(()=>{var __webpack_modules__={9406:()=>{Cr.LHProxy=function(e){this.__config=e,!this.__config||"ws"!=this.__config.protocol&&"wss"!=this.__config.protocol?this._protocol="wss":this._protocol=this.__config.protocol,this._type="html5",this._logining=!1},Cr.LHProxy.prototype.init=function(){var e=new Cr.AsyncResult;return this.callbackDict={},this._initData=new Ice.InitializationData,this._initData.properties=Ice.createProperties(),this._initData.properties.setProperty("Ice.Trace.Network","0"),this._initData.properties.setProperty("Ice.Trace.Protocol","0"),this._initData.properties.setProperty("Ice.ACM.Client","0"),this._initData.properties.setProperty("Ice.Default.EncodingVersion","1.0"),this._initData.properties.setProperty("Ice.ThreadPool.Client.Serialize","1"),this._initData.properties.setProperty("Ice.ThreadPool.Server.Serialize","1"),e.complete([0,""]),e},Cr.LHProxy.prototype.registeredCallback=function(e,t){if(this.callbackDict[e])throw"已经存在的注册对象";this.callbackDict[e]=t},Cr.LHProxy.prototype.unregisterCallback=function(e,t){this.callbackDict[e]=null,delete this.callbackDict[e]},Cr.LHProxy.prototype.callCallback=function(e,t){var n=this.callbackDict[e];if(n&&"function"==typeof n)try{n.call(null,t)}catch(e){console.crlog(`[SDK][Error] ${e}`),console.error(e)}},Cr.LHProxy.prototype.initCon=function(){try{this._communicator&&(this._communicator.destroy(),this._communicator=null),this._connection&&(this._connection.destroy(0),this._connection=null),this._adapter&&(this._adapter.destroy(),this._adapter=null),this._routerPrx&&(this._routerPrx.destroySession(),this._routerPrx=null)}catch(e){console.crlog("[RTC] ice Init fail.!")}},Cr.LHProxy.prototype.login=function(e,t,n,i,r){var o=function(e,s){console.crlog(`[Access] Connect to access server: ${e.acssvr[0]}, isResmAccess: ${s||!1}`),CRVideo.accessSvr=e.acssvr[1],CRVideo.accessNo=e.acssvr[0],this._routerPrx=e.routerPrx,console.crlog("[Resm] this._routerPrx createSession()"),this._routerPrx.createSession("N"+Cr.crmt.MEET[0],"").then(function(e){return this._session=e,console.crlog("[Resm] this._routerPrx.getCategoryForClient()"),this._routerPrx.getCategoryForClient()}.bind(this)).then(function(e){if(this._category=e,console.crlog("[Resm] this._communicator.setDefaultRouter(this._routerPrx)"),this._communicator.setDefaultRouter(this._routerPrx),s)return console.crlog('[Resm] _communicator.createObjectAdapterWithRouter("CallbackAdapter2", "this._routerPrx")'),this._communicator.createObjectAdapterWithRouter("CallbackAdapter",this._routerPrx);{console.crlog("[Resm] Resm.AccessMPrx uncheckedCast...");const e=Resm.AccessMPrx.uncheckedCast(this._communicator.stringToProxy("d0/AccessM")),t=Cr.crmt.DOMAIN,n=Cr.crmt.MEET[0],i=Cr.crmt.MYPUBIP,r=Ice.generateUUID(),s=new Resm.NetworkResult;return CRVideo.availableSvrs.forEach((e=>{const t=new Resm.NetworkStatus;t.latency=Math.floor(e.delay/4),t.lostRate=0,s.set(e.acssvr[0],t)})),console.crlog(`[Resm] NetworkResult: ${JSON.stringify(s)}`),console.crlog(`[Resm] Resm locate${JSON.stringify({domain:t,confID:n,publicIP:i,uuid:r})}`),e.locate(t,n,s,i,r).then((e=>{if(console.crlog(`[Resm] Got resm accessNo: ${e}`),+e==+CRVideo.bestNetworkAccessSvr.acssvr[0])return console.crlog('[Resm] _communicator.createObjectAdapterWithRouter("CallbackAdapter0", "this._routerPrx")'),this._communicator.createObjectAdapterWithRouter("CallbackAdapter",this._routerPrx);{let t=!1;if(CRVideo.availableSvrs.forEach((n=>{if(n.acssvr[0]==e)return t=!0,o(n,!0),!1})),!t)return o(CRVideo.bestNetworkAccessSvr,!0),!1}})).exception(function(e){return console.crlog("[Resm] Resm locate fail!"),console.crlog(e),console.crlog('[Resm] _communicator.createObjectAdapterWithRouter("CallbackAdapter1", "this._routerPrx")'),this._communicator.createObjectAdapterWithRouter("CallbackAdapter",this._routerPrx)}.bind(this))}}.bind(this)).then(function(o){if(!o)return!1;this._adapter=o;var s="c"+Cr.crmt.MEET[0]+"/ConferenceRoom  @ c"+Cr.crmt.MEET[0]+"-ReplicaConfCtrlAdapters",a=Conference.ConferenceRoomPrx.uncheckedCast(this._communicator.stringToProxy(s)),c=new Conference.LoginRequest;c.confId=Cr.crmt.MEET[0],c.confKey=Cr.crmt.MEET[1],c.termId=t||0,n?(c.memberId=n.id,c.memberType=n.type,c.nickname=n.nickname,c.priv_dat=n.userId):(c.memberId=Cr.crmt.ACNT[0],c.memberType=Cr.crmt.ACNT[1],c.nickname=Cr.crmt.ACNT[3]),c.accessNo=e.acssvr[0],c.callbacks=new Ice.HashMap,c.extProperty=new Ice.HashMap,c.extProperty.set(Conference.CLINET_PCID,i);let l=CRVideo.sdkver.split(".");(l[0]>1||l[1]>7)&&c.extProperty.set("h5sdk_ver",CRVideo.sdkver),n?c.extProperty.set(Conference.CLIETN_PRIV_DAT,n.userId):c.extProperty.set(Conference.CLIETN_PRIV_DAT,Cr.crmt.ACNT[3]);var d=/macintosh|mac os x/i.test(navigator.userAgent),u=/windows|win32/i.test(navigator.userAgent),h=/linux/i.test(navigator.userAgent),f=navigator.userAgent.indexOf("Android")>-1||navigator.userAgent.indexOf("Adr")>-1,_="";!!navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)?_=Conference.PLATFORMTYPE_IOS:d?_=Conference.PLATFORMTYPE_MAC:u?_=Conference.PLATFORMTYPE_WIN32:f?_=Conference.PLATFORMTYPE_ANDROID:h&&(_=Conference.PLATFORMTYPE_LINUX);var p=Conference.DEVICETYPE_WEBRTC;c.extProperty.set(Conference.CLINET_PLATFORM,_),c.extProperty.set(Conference.CLINET_BROWSER_INFO,__Rtc.CRBrowser.curBrowserCfg.platform),c.extProperty.set(Conference.CLINET_OPENID,r),c.extProperty.set(Conference.CLINET_WEBRTC_CODECS,window.__Rtc.rtc_codecs),c.extProperty.set(Conference.CLINET_DEVICETYPE,p);var C=new Ice.Identity;C.name="ConferenceCallback",C.category=this._category,this._conferenceReceptor=new __Rtc.ConferenceReceptor,this._conferenceReceptor.setProxy(this),this._adapter.add(this._conferenceReceptor,C);var g=Conference.ConferenceCallbackPrx.uncheckedCast(this._adapter.createDirectProxy(C));c.callbacks.set("ConferenceCallback",g);var m=new Ice.Identity;m.name="IMCallback",m.category=this._category,this._chatReceptor=new __Rtc.ChatReceptor,this._chatReceptor.setProxy(this),this._adapter.add(this._chatReceptor,m);var R=Conference.IMCallbackPrx.uncheckedCast(this._adapter.createDirectProxy(m));c.callbacks.set("IMCallback",R);var v=new Ice.Identity;v.name="AnsQueCallback",v.category=this._category,this._ansQueReceptor=new __Rtc.AnsQueReceptor,this._ansQueReceptor.setProxy(this),this._adapter.add(this._ansQueReceptor,v);var I=Conference.AnsQueCallbackPrx.uncheckedCast(this._adapter.createDirectProxy(v));c.callbacks.set("AnsQueCallback",I);var y=new Ice.Identity;y.name="VideoCallback",y.category=this._category,this._videoReceptor=new __Rtc.VideoReceptor,this._videoReceptor.setProxy(this),this._adapter.add(this._videoReceptor,y);var S=Conference.VideoCallbackPrx.uncheckedCast(this._adapter.createDirectProxy(y));c.callbacks.set("VideoCallback",S);var E=new Ice.Identity;E.name="AudioCallback",E.category=this._category,this._audioReceptor=new __Rtc.AudioReceptor,this._audioReceptor.setProxy(this),this._adapter.add(this._audioReceptor,E);var b=Conference.AudioCallbackPrx.uncheckedCast(this._adapter.createDirectProxy(E));c.callbacks.set("AudioCallback",b);var w=new Ice.Identity;w.name="MS.MSClient",w.category=this._category,this._mSClientI=new __Rtc.MSClientI,this._mSClientI.setProxy(this),this._adapter.add(this._mSClientI,w);var P=MS.MSClientPrx.uncheckedCast(this._adapter.createDirectProxy(w));c.callbacks.set("MS.MSClient",P);var x=new Ice.Identity;x.name="ScreenShareClient",x.category=this._category,this._screenShareReceptor=new __Rtc.ScreenShareReceptor,this._screenShareReceptor.setProxy(this),this._adapter.add(this._screenShareReceptor,x);var T=Conference.ScreenShareClientPrx.uncheckedCast(this._adapter.createDirectProxy(x));c.callbacks.set("ScreenShareClient",T);var M=new Ice.Identity;M.name="MediaCallback",M.category=this._category,this._mediaReceptor=new __Rtc.MediaReceptor,this._mediaReceptor.setProxy(this),this._adapter.add(this._mediaReceptor,M);var D=Conference.MediaCallbackPrx.uncheckedCast(this._adapter.createDirectProxy(M));c.callbacks.set("MediaCallback",D);var O=new Ice.Identity;O.name="WhiteBoardCallback",O.category=this._category,this._whiteBoardReceptor=new __Rtc.WhiteBoardReceptor,this._whiteBoardReceptor.setProxy(this),this._adapter.add(this._whiteBoardReceptor,O);var A=Conference.WhiteBoardCallbackPrx.uncheckedCast(this._adapter.createDirectProxy(O));c.callbacks.set("WhiteBoardCallback",A);var V=new Ice.Identity;V.name="SyncCtrlCallback",V.category=this._category,this._syncCtrlReceptor=new __Rtc.SyncCtrlReceptor,this._syncCtrlReceptor.setProxy(this),this._adapter.add(this._syncCtrlReceptor,V);var k=Conference.SyncCtrlCallbackPrx.uncheckedCast(this._adapter.createDirectProxy(V));return c.callbacks.set("SyncCtrlCallback",k),a.login(c)}.bind(this)).then(function(e){if(!e)return;window.loginResponse=e;const t={};t.termId=e.termId,t.activeMembers=e.activeMembers,t.myDetail=e.myDetail,t.serverTime=1e3*e.ServerUTCTime-(new Date).getTime(),t.isBegan=e.isBegan,t.countdown=e.countdown,t.mainVideoTermID=e.mainVideoTermID,t.wbDescibes=e.wbDescibes,t.ServerUTCTime=e.ServerUTCTime,t.bAllowWall=e.bAllowWall,t.bFull=e.bFull,t.bRoomLocked=e.bRoomLocked,t.curMainTab=e.curMainTab,t.curSubTab=e.curSubTab,t.option=e.option,t.lastElemValue=e.lastElemValue,t.lastTabValue=e.lastTabValue;for(var n=e.confInfo.keys(),i={},r=0;r<n.length;r++)i[n[r]]=e.confInfo.get(n[r]);t.confInfo=i;for(let e=0;e<t.activeMembers.length;e++){var o=t.activeMembers[e];Cr.parseMemberInfo(o),o.termId==t.termId&&(t.nickname=o.nickname,t.userId=o.userId,t.bindId=o.bindId,t.openedCamIDs=o.openedCamIDs)}this._screenShareCtrl=Conference.ScreenShareCtrlPrx.uncheckedCast(e.modules.get("ScreenShareCtrl")),this._whiteBoardCtrl=Conference.WhiteBoardCtrlPrx.uncheckedCast(e.modules.get("WhiteBoardCtrl")),this._chatRequest=Conference.IMSessionPrx.uncheckedCast(e.modules.get("IMSession")),this._mediaCtrl=Conference.MediaCtrlPrx.uncheckedCast(e.modules.get("MediaCtrl")),this._ansQuesCtrl=Conference.AnsQuesCtrlPrx.uncheckedCast(e.modules.get("AnsQuesCtrl")),this._syncCtrl=Conference.SyncCtrlPrx.uncheckedCast(e.modules.get("SyncCtrl")),this._audioCtrl=Conference.AudioCtrlPrx.uncheckedCast(e.modules.get("AudioCtrl")),this._conferenceRequest=Conference.ConferenceSessionPrx.uncheckedCast(e.modules.get("ConferenceSession")),this._clientReport=MS.ClientReportPrx.uncheckedCast(e.modules.get("MS.ClientReport")),this._videoCtrl=Conference.VideoCtrlPrx.uncheckedCast(e.modules.get("VideoCtrl")),this._logining=!1,window.loginConnection&&window.loginConnection.close(),window.loginConnection=null,__Rtc.CR__LoginRslt.call([0,"",new Cr.MeetInfo(t)]),console.crlog(`[RTC] Access server login consuming: ${(new Date).getTime()-Cr.AccessLoginStartTime}ms`),setTimeout((()=>{console.crlog(`[Resm] Finally using accessNo: ${CRVideo.accessNo}`),CRVideo.availableSvrs.forEach((e=>{+e.acssvr[0]!=+CRVideo.accessNo&&e.routerPrx.ice_getConnection().then((t=>{console.crlog(`[Resm] Close access connection: ${e.acssvr[0]}`),t.close()}))}))}),5e3)}.bind(this)).exception(function(e){const t=e.toString();if(console.crlog(t),e instanceof Conference.ConferencePrepareError||e instanceof Conference.ConferenceLoginRetry)return CRVideo.reEnterMeetTimes||(CRVideo.reEnterMeetTimes=1),void(CRVideo.reEnterMeetTimes<10?(console.crlog(`[ICE] ReEnter meeting:${CRVideo.reEnterMeetTimes}`),CRVideo.reEnterMeetTimes++,CRVideo.loginWebMeeting()):l.complete([3,e.toString()]));this._logining=!1,e instanceof Ice.SocketException?l.complete([204,"socket错误"]):e instanceof Conference.MemberAlreadyInCanTryVisitor||e instanceof Conference.MemberAlreadyInMeet?l.complete([807,"用户已存在"]):e instanceof Conference.MemberOverflowError||e instanceof Glacier2.CannotCreateSessionException?l.complete([802,"并发数超出"]):e instanceof Conference.BalanceLessError?l.complete([805,"余额不足"]):e.id&&"ConferenceRoom"==e.id.name||e instanceof Conference.ConferencePrepareError?(CRVideo.reEnterConfTimes||(CRVideo.reEnterConfTimes=1),CRVideo.reEnterConfTimes<10?(console.crlog(`[ICE] ReEnter meeting - ${CRVideo.reEnterConfTimes}`),setTimeout((()=>{CRVideo.reEnterConfTimes++,CRVideo.loginWebMeeting()}),1e3)):l.complete([800,"房间不存在或已结束"])):l.complete([1,e.toString()])}.bind(this))}.bind(this),s=(e,t)=>(console.crlog(`[Resm] Ping 第 ${t+1} 台服务器：${JSON.stringify(e)}`),new Promise(((t,n)=>{var i=e[3];if(i.indexOf("sig")>-1){var r=parseInt(i.split("/sig/")[0]);i="/sig/"+i.split("/sig/")[1];let t="s"+e[0]+"/Access:"+this._protocol+" -r "+i+" -h "+e[1]+" -p "+r+" -t 5000";console.crlog(`[RTC] StringToProxy: ${t}`);var o=Glacier2.RouterPrx.uncheckedCast(this._communicator.stringToProxy(t))}else{r=parseInt(e[3])+4;let t="s"+e[0]+"/Access:"+this._protocol+" -h "+e[1]+" -p "+r+" -t 5000";console.crlog(`[RTC] StringToProxy: ${t}`);o=Glacier2.RouterPrx.uncheckedCast(this._communicator.stringToProxy(t))}u=(new Date).getTime(),o.ice_ping().then(function(){var n=(new Date).getTime()-u,i=this._protocol+"://"+e[1]+":"+r;return console.crlog(`[RTC] Finish ping(${e[1]}) 耗时：${n}ms, report:${Math.floor(n/4)}`),t({url:i,delay:n,routerPrx:o,acssvr:e})}.bind(this)).exception(function(t){return console.crlog(`[RTC] Finish ping(${e[1]}) Bad Network!`),n({url,delay:-1,acssvr:e})}.bind(this))}))),a=function(){Ice.Promise.try2(function(){this._communicator=Ice.initialize(this._initData),CRVideo.communicatorIc=this._communicator,h=Cr.crmt.ACSSVR,new Promise(((e,t)=>{let n;CRVideo.availableSvrs=[],h.forEach(((t,i)=>{s(t,i).then((t=>{if(CRVideo.availableSvrs.push(t),CRVideo.availableSvrs.length==h.length)return clearInterval(n),e(CRVideo.availableSvrs)}))}));let i=200;const r=()=>{n=setTimeout((()=>CRVideo.availableSvrs.length>0?e(CRVideo.availableSvrs):i<=15e3?(i+=200,clearTimeout(n),void r()):t()),200)};r()})).then((e=>{e.forEach((e=>{CRVideo.bestNetworkAccessSvr||-1==e.delay?CRVideo.bestNetworkAccessSvr.delay>e.delay&&-1!=e.delay&&(CRVideo.bestNetworkAccessSvr=e):CRVideo.bestNetworkAccessSvr=e})),CRVideo.bestNetworkAccessSvr?o(CRVideo.bestNetworkAccessSvr):(console.crlog("Login to access fail, have not available access server!"),l.complete([205,"没有可用服务器"]))})).catch((()=>{console.crlog("Login to access fail, have not available access server!"),l.complete([205,"没有可用服务器"])}))}.bind(this)).exception(function(e){Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack),this._logining=!1,l.complete([1,"未知错误"])}.bind(this))}.bind(this),c=function(e){Cr.crmt={};for(var t=atob(e.substr(5)).split("\n"),n=0;n<t.length;n++){var i=t[n].match(/-(\w+?)=(\S+)/);null!=i&&3==i.length&&(Cr.crmt[i[1]]=i[2],console.crlog(`[RTC] parseCrmt>${n}: ${i[1]} ${i[2]}`))}for(var r=Cr.crmt.ACNT.split(";"),o=r[3].match(/../g),s=new ArrayBuffer(o.length),a=new DataView(s),c=[],l=0;l<o.length;l++)a.setUint8(l,parseInt(o[l],16)),c[l]=a.getUint8(l);var d=Cr.Utils.utf8ByteToUnicodeStr(c);r[3]=d,Cr.crmt.ACNT=r,Cr.crmt.MEET=Cr.crmt.MEET.split(";"),1==CRVideo.isHttp&&(Cr.crmt.ACSSVR=Cr.crmt.ACSSVR.replace("50008:ali8.cloudroom.com:2698:443/sig/2063","50008:ali8.cloudroom.com:2698:80/sig/2063"));var u=Cr.crmt.ACSSVR.split(";");let h=[];for(l=0;l<u.length;l++)""!=u[l]&&h.push(u[l].split(":"));Cr.crmt.ACSSVR=h}.bind(this);console.crlog("[RTC] Access login begain...");var l=new Cr.AsyncResult,d=Cr.Utils.base64;try{this._logining=!0;var u=0,h=null;if(CRVideo.bestNetworkAccessSvr=null,Cr.AccessLoginStartTime=(new Date).getTime(),this.initCon(),Cr.crmt)Ice.Promise.try2(function(){a()}.bind(this)).exception(function(e){Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack),l.complete([1,"未知错误"])}.bind(this));else{let t=d.decode(e);const n=`${CRVideo.protocol}//${CRVideo.webServerAddr}/servlet/getWebrtcAccKey`;t=`${t}\r\n-PRODUCT=win32_net`,t=`${t}\r\n-JSCLIENT=${Conference.DEVICETYPE_WEBRTC}`;const i="crmt:"+d.encode(t).replace(/\r\n/g,"");Ice.Promise.try2(function(){console.crlog(`[Access] Web request:${n}, data: crmt:******`),CRVideo.ajax({type:"POST",url:n,data:i,dataType:"text",success:(e,t)=>{"success"==t?-1!=e.indexOf("erro:")?(this._logining=!1,-1!=e.indexOf("erro:2")?l.complete([800,e]):l.complete([3,e])):(c(e),a()):(this._logining=!1,l.complete([202,"服务器没有响应"]))},error:e=>{CRVideo_EnterMeetingRslt.target(202,CRVideo.enterMeetingCookie),CRVideo_UploadingReport()}})}.bind(this)).exception(function(e){Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack),this._logining=!1,l.complete([1,"未知错误"])}.bind(this))}}catch(e){l.complete([3,e.toString()])}return l},Cr.LHProxy.prototype.refreshSession=function(){var e=new Cr.AsyncResult;try{this._routerPrx.refreshSession().then(function(){e.complete([0,""])}.bind(this)).exception(function(t){e.complete([204,"网络错误"]),Cr.Utils.log(t.toString()),Cr.Utils.log(t.stack)}.bind(this))}catch(t){e.complete([3,t.toString()])}return e},Cr.LHProxy.prototype.keepAlive=function(e){var t=new Cr.AsyncResult;try{statusDict=new Ice.HashMap,statusDict.set("w",e.toString()),this._conferenceRequest.keepAlive(statusDict).then(function(){t.complete([0,""])}.bind(this)).exception(function(e){t.complete([204,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([3,e.toString()])}return t},Cr.LHProxy.prototype.exit=function(e){var t=new Cr.AsyncResult;try{console.crlog(`[Ice] this._conferenceRequest.exit(${e})`),this._conferenceRequest.exit(e).then(function(){t.complete([0,""])}.bind(this)).exception(function(e){t.complete([204,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([3,e.toString()])}return t},Cr.LHProxy.prototype.getActiveMembers=function(){var e=new Cr.AsyncResult;try{statusDict=new Ice.HashMap,this._conferenceRequest.getActiveMembers().then(function(t){for(var n in t){var i=t[n].extProperty.get(Conference.MINFO_OPENEDCAMIDS);null!=i&&(i=i.split(";")[0]),t[n].openedCamIDs=i}e.complete([0,"",t])}.bind(this)).exception(function(t){e.complete([204,"网络错误"]),Cr.Utils.log(t.toString()),Cr.Utils.log(t.stack)}.bind(this))}catch(t){e.complete([3,t.toString()])}return e},Cr.LHProxy.prototype.endConference=function(){var e=new Cr.AsyncResult;try{statusDict=new Ice.HashMap,this._conferenceRequest.endConference().then(function(){e.complete([0,""])}.bind(this)).exception(function(t){e.complete([204,"网络错误"]),Cr.Utils.log(t.toString()),Cr.Utils.log(t.stack)}.bind(this))}catch(t){e.complete([3,t.toString()])}return e},Cr.LHProxy.prototype.SendIMMsg=function(e,t,n,i,r){var o=new Cr.AsyncResult;try{var s=new Ice.Context;s._fwd="z";var a=new Conference.InIMMsgInfo;a.targetTermId=e,a.targetNickname=t,a.font=n,a.msg=Cr.Utils.html2chat(i),a.sendTime=r,this._chatRequest.sendIMMsg(a,s).then(function(){o.complete([0,""])}.bind(this)).exception(function(e){e instanceof Conference.ContainsSensitiveWords?o.complete([900,"包含了敏感词"]):e instanceof Conference.NotPermitError?o.complete([901,"没有聊天权限"]):o.complete([1,"未知错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){o.complete([3,e.toString()])}return o},Cr.LHProxy.prototype.getIMMsgCount=function(){var e=new Cr.AsyncResult;try{this._chatRequest.getIMMsgCount().then(function(t){e.complete([0,"",t])}.bind(this)).exception(function(t){e.complete([1,"未知错误"]),Cr.Utils.log(t.toString()),Cr.Utils.log(t.stack)}.bind(this))}catch(t){e.complete([3,t.toString()])}return e},Cr.LHProxy.prototype.getLastMsg=function(e){var t=new Cr.AsyncResult;try{var n=new Ice.Context;n._fwd="z",this._chatRequest.getLastMsg(e,n).then(function(e){var n=[];for(var i in e){var r=e[i],o=r.srcNickname.split("\0"),s=Cr.Utils.chat2html(r.inMsg.msg,r.inMsg.font.color,r.inMsg.font.size),a={type:s[0],index:r.index,msg:s[2],head:s[1],sendTime:r.inMsg.sendTime,targetNickname:r.inMsg.targetNickname,targetTermId:r.inMsg.targetTermId,srcNickname:o[0],srcTermId:r.srcTermId,ishost:o.length>1};n.push(new Cr.MsgInfo(a))}t.complete([0,"",n])}.bind(this)).exception(function(e){t.complete([1,"未知错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([3,e.toString()])}return t},Cr.LHProxy.prototype.getLastNMsg=function(e,t){var n=new Cr.AsyncResult;try{var i=new Ice.Context;i._fwd="z",this._chatRequest.getLastNMsg(e,t,i).then(function(e){var t=[];for(var i in e){var r=e[i],o=r.srcNickname.split("\0"),s=Cr.Utils.chat2html(r.inMsg.msg,r.inMsg.font.color,r.inMsg.font.size),a={type:s[0],index:r.index,msg:s[2],head:s[1],sendTime:r.inMsg.sendTime,targetNickname:r.inMsg.targetNickname,targetTermId:r.inMsg.targetTermId,srcNickname:o[0],srcTermId:r.srcTermId,ishost:o.length>1};t.push(new Cr.MsgInfo(a))}n.complete([0,"",t]),Cr.Utils.log("[RTC] It takes time to get chat history:"+((new Date).getTime()-Cr.AccessLoginStartTime))}.bind(this)).exception(function(e){n.complete([1,"未知错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){n.complete([3,e.toString()])}return n},Cr.LHProxy.prototype.getBroadCastUrl=function(){var e=new Cr.AsyncResult;try{this._conferenceRequest.getBroadCastUrl().then((function(t){var n={rtmp:t.get(Conference.BOARDCAST_RTMP),hls:t.get(Conference.BOARDCAST_HLS)};e.complete([0,"",n])})).exception((function(t){e.complete([1,"未知错误"]),Cr.Utils.log(t.toString()),Cr.Utils.log(t.stack)}))}catch(t){e.complete([3,t.toString()])}return e},Cr.LHProxy.prototype.askQues=function(e,t,n,i,r,o){var s=new Cr.AsyncResult;try{var a=new Conference.QuesAsk;a.typeID=e,a.asktime=t,a.termID=n,i&&""!=i&&(r='<headimg src="'+i+'"/>'+ +r),a.content=r,a.nickname=o,this._ansQuesCtrl.askQues(a).then((function(e){s.complete([0,"",e])})).exception((function(e){s.complete([1,"未知错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}))}catch(e){s.complete([3,e.toString()])}return s},Cr.LHProxy.prototype.getQuesList=function(){var e=new Cr.AsyncResult;try{this._ansQuesCtrl.getQuesList().then((function(t){for(var n in quesList=[],t){var i=t[n];quesList.push(new Cr.QuesInf(i))}e.complete([0,"",quesList])})).exception((function(t){e.complete([1,"未知错误"]),Cr.Utils.log(t.toString()),Cr.Utils.log(t.stack)}))}catch(t){e.complete([3,t.toString()])}return e},Cr.LHProxy.prototype.getLuckyDrawCfg=function(){var e=new Cr.AsyncResult;try{this._conferenceRequest.getLuckyDrawCfg().then((function(t){var n=t;e.complete([0,"",n])})).exception((function(t){e.complete([1,"未知错误"])}))}catch(t){e.complete([3,t.toString()])}return e},Cr.LHProxy.prototype.joinLuckyDrawMembers=function(e,t){var n=new Cr.AsyncResult;try{this._conferenceRequest.joinLuckyDrawMembers(e,t).then(function(){n.complete([0,""])}.bind(this)).exception(function(e){n.complete([204,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){n.complete([3,e.toString()])}return n},Cr.LHProxy.prototype.terminalMsg=function(e,t,n,i){var r=new Cr.AsyncResult;try{this._conferenceRequest.terminalMsg(e,t,n,i).then((function(){r.complete([0,""])})).exception((function(e){r.complete([1,"未知错误"])}))}catch(e){r.complete([3,e.toString()])}return r},Cr.LHProxy.prototype.allowVideoWall=function(e){var t=new Cr.AsyncResult;try{this._videoCtrl.allowVideoWall(e).then(function(){t.complete([0,""])}.bind(this)).exception(function(e){t.complete([204,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([3,e.toString()])}return t},Cr.LHProxy.prototype.enableVideo=function(e){var t=new Cr.AsyncResult;try{this._videoCtrl.enableVideo(e).then(function(){t.complete([0,""])}.bind(this)).exception(function(e){t.complete([204,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([3,e.toString()])}return t},Cr.LHProxy.prototype.setFocusWindow=function(e,t){var n=new Cr.AsyncResult,i=Conference.WINDOW_MODE[e];try{this._videoCtrl.setFocusWindow(i,t).then(function(){n.complete([0,""])}.bind(this)).exception(function(e){n.complete([204,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){n.complete([3,e.toString()])}return n},Cr.LHProxy.prototype.batchSubscribeVideo=function(e,t){var n=new Cr.AsyncResult;try{this._videoCtrl.batchSubscribeVideo(e,t).then(function(){n.complete([0,""])}.bind(this)).exception(function(e){n.complete([204,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){n.complete([3,e.toString()])}return n},Cr.LHProxy.prototype.subscribeFocusWindow=function(e){var t=new Cr.AsyncResult;try{this._videoCtrl.subscribeFocusWindow(e).then(function(){t.complete([0,""])}.bind(this)).exception(function(e){t.complete([204,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([3,e.toString()])}return t},Cr.LHProxy.prototype.subscribeFocusWindow2=function(e){var t=new Cr.AsyncResult;try{this._videoCtrl.subscribeFocusWindow2(e).then(function(){t.complete([0,""])}.bind(this)).exception(function(e){t.complete([204,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([3,e.toString()])}return t},Cr.LHProxy.prototype.setVLayout=function(e){var t=new Cr.AsyncResult;try{this._videoCtrl.setVLayout(e).then(function(){t.complete([0,""])}.bind(this)).exception(function(e){t.complete([204,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([3,e.toString()])}return t},Cr.LHProxy.prototype.setMainVideoShowMode=function(e){var t=new Cr.AsyncResult;try{this._videoCtrl.setMainVideoShowMode(e).then(function(){t.complete([0,""])}.bind(this)).exception(function(e){t.complete([204,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([3,e.toString()])}return t},Cr.LHProxy.prototype.setVideoListMode=function(e){var t=new Cr.AsyncResult;try{this._videoCtrl.setVideoListMode(e).then(function(){t.complete([0,""])}.bind(this)).exception(function(e){t.complete([204,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([3,e.toString()])}return t},Cr.LHProxy.prototype.refuseOpenVideo=function(e){var t=new Cr.AsyncResult;try{this._videoCtrl.refuseOpenVideo(e).then(function(){t.complete([0,""])}.bind(this)).exception(function(e){t.complete([204,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([3,e.toString()])}return t},Cr.LHProxy.prototype.getVideoSetting=function(e){var t=new Cr.AsyncResult;try{this._videoCtrl.getVideoSetting(e).then(function(){t.complete([0,""])}.bind(this)).exception(function(e){t.complete([204,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([3,e.toString()])}return t},Cr.LHProxy.prototype.setCamera=function(e,t){var n=new Cr.AsyncResult;try{this._videoCtrl.setCamera(e,t).then(function(){n.complete([0,""])}.bind(this)).exception(function(e){n.complete([204,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){n.complete([3,e.toString()])}return n},Cr.LHProxy.prototype.setCameraById=function(e){var t=new Cr.AsyncResult;try{this._videoCtrl.setCameraById(e).then(function(){t.complete([0,""])}.bind(this)).exception(function(e){t.complete([204,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([3,e.toString()])}return t},Cr.LHProxy.prototype.setVideoPolling=function(e,t){var n=new Cr.AsyncResult;try{this._videoCtrl.setVideoPolling(e,t).then(function(){n.complete([0,""])}.bind(this)).exception(function(e){n.complete([204,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){n.complete([3,e.toString()])}return n},Cr.LHProxy.prototype.updatePollingVideo=function(e){var t=new Cr.AsyncResult;try{this._videoCtrl.updatePollingVideo(e).then(function(){t.complete([0,""])}.bind(this)).exception(function(e){t.complete([204,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([3,e.toString()])}return t},Cr.LHProxy.prototype.updateVideoList=function(e){var t=new Cr.AsyncResult;try{this._videoCtrl.updateVideoList(e).then(function(){t.complete([0,""])}.bind(this)).exception(function(e){t.complete([204,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([3,e.toString()])}return t},Cr.LHProxy.prototype.getVideoPollingState=function(e,t){var n=new Cr.AsyncResult;try{this._videoCtrl.getVideoPollingState(e,t).then(function(){n.complete([0,""])}.bind(this)).exception(function(e){n.complete([204,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){n.complete([3,e.toString()])}return n},Cr.LHProxy.prototype.startAdjustDirection=function(e,t){var n=new Cr.AsyncResult;try{this._videoCtrl.startAdjustDirection(e,t).then(function(){n.complete([0,""])}.bind(this)).exception(function(e){n.complete([204,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){n.complete([3,e.toString()])}return n},Cr.LHProxy.prototype.startAdjustZoom=function(e,t){var n=new Cr.AsyncResult;try{this._videoCtrl.startAdjustZoom(e,t).then(function(){n.complete([0,""])}.bind(this)).exception(function(e){n.complete([204,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){n.complete([3,e.toString()])}return n},Cr.LHProxy.prototype.stopAdjustDirection=function(e){var t=new Cr.AsyncResult;try{this._videoCtrl.stopAdjustDirection(e).then(function(){t.complete([0,""])}.bind(this)).exception(function(e){t.complete([204,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([3,e.toString()])}return t},Cr.LHProxy.prototype.stopAdjustDirection=function(e){var t=new Cr.AsyncResult;try{this._videoCtrl.stopAdjustDirection(e).then(function(){t.complete([0,""])}.bind(this)).exception(function(e){t.complete([204,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([3,e.toString()])}return t},Cr.LHProxy.prototype.VideoResolutionReport=function(e,t,n){var i=new Cr.AsyncResult;try{this._clientReport.VideoResolutionReport(e,t,n).then(function(){i.complete([0,""])}.bind(this)).exception(function(e){i.complete([204,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){i.complete([3,e.toString()])}return i},Cr.LHProxy.prototype.setAudioDeviceStatus=function(e){var t=new Cr.AsyncResult;try{this._audioCtrl.setDeviceStatus(e).then(function(){t.complete([0,""])}.bind(this)).exception(function(e){t.complete([204,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([3,e.toString()])}return t},Cr.LHProxy.prototype.askForMic=function(){var e=new Cr.AsyncResult;try{this._audioCtrl.askForMic().then(function(){e.complete([0,""])}.bind(this)).exception(function(t){e.complete([204,"网络错误"]),Cr.Utils.log(t.toString()),Cr.Utils.log(t.stack)}.bind(this))}catch(t){e.complete([3,t.toString()])}return e},Cr.LHProxy.prototype.askForMic=function(){var e=new Cr.AsyncResult;try{this._audioCtrl.askForMic().then(function(){e.complete([0,""])}.bind(this)).exception(function(t){e.complete([204,"网络错误"]),Cr.Utils.log(t.toString()),Cr.Utils.log(t.stack)}.bind(this))}catch(t){e.complete([3,t.toString()])}return e},Cr.LHProxy.prototype.closeMicEx=function(e){var t=new Cr.AsyncResult;try{this._audioCtrl.closeMicEx(e).then(function(){t.complete([0,""])}.bind(this)).exception(function(e){t.complete([204,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([3,e.toString()])}return t},Cr.LHProxy.prototype.closeAll=function(){var e=new Cr.AsyncResult;try{this._audioCtrl.closeAll().then(function(){e.complete([0,""])}.bind(this)).exception(function(t){e.complete([204,"网络错误"]),Cr.Utils.log(t.toString()),Cr.Utils.log(t.stack)}.bind(this))}catch(t){e.complete([3,t.toString()])}return e},Cr.LHProxy.prototype.setVoiceEnergy=function(e){var t=new Cr.AsyncResult;try{this._audioCtrl.setVoiceEnergy(e).then(function(){t.complete([0,""])}.bind(this)).exception(function(e){t.complete([204,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([3,e.toString()])}return t},Cr.LHProxy.prototype.pstnSwitchMicStatus=function(){var e=new Cr.AsyncResult;try{this._audioCtrl.pstnSwitchMicStatus().then(function(){e.complete([0,""])}.bind(this)).exception(function(t){e.complete([204,"网络错误"]),Cr.Utils.log(t.toString()),Cr.Utils.log(t.stack)}.bind(this))}catch(t){e.complete([3,t.toString()])}return e},Cr.LHProxy.prototype.startRecord=function(){var e=new Cr.AsyncResult;try{this._audioCtrl.startRecord().then(function(){e.complete([0,""])}.bind(this)).exception(function(t){e.complete([204,"网络错误"]),Cr.Utils.log(t.toString()),Cr.Utils.log(t.stack)}.bind(this))}catch(t){e.complete([3,t.toString()])}return e},Cr.LHProxy.prototype.isRecording=function(){var e=new Cr.AsyncResult;try{this._audioCtrl.isRecording().then(function(){e.complete([0,""])}.bind(this)).exception(function(t){e.complete([204,"网络错误"]),Cr.Utils.log(t.toString()),Cr.Utils.log(t.stack)}.bind(this))}catch(t){e.complete([3,t.toString()])}return e},Cr.LHProxy.prototype.stopRecord=function(){var e=new Cr.AsyncResult;try{this._audioCtrl.stopRecord().then(function(){e.complete([0,""])}.bind(this)).exception(function(t){e.complete([204,"网络错误"]),Cr.Utils.log(t.toString()),Cr.Utils.log(t.stack)}.bind(this))}catch(t){e.complete([3,t.toString()])}return e},Cr.LHProxy.prototype.playApplause=function(){var e=new Cr.AsyncResult;try{this._audioCtrl.playApplause().then(function(){e.complete([0,""])}.bind(this)).exception(function(t){e.complete([204,"网络错误"]),Cr.Utils.log(t.toString()),Cr.Utils.log(t.stack)}.bind(this))}catch(t){e.complete([3,t.toString()])}return e},Cr.LHProxy.prototype.getMusicList=function(){var e=new Cr.AsyncResult;try{this._audioCtrl.getMusicList().then(function(){e.complete([0,""])}.bind(this)).exception(function(t){e.complete([204,"网络错误"]),Cr.Utils.log(t.toString()),Cr.Utils.log(t.stack)}.bind(this))}catch(t){e.complete([3,t.toString()])}return e},Cr.LHProxy.prototype.getPlayBGMusic=function(){var e=new Cr.AsyncResult;try{this._audioCtrl.getPlayBGMusic().then(function(){e.complete([0,""])}.bind(this)).exception(function(t){e.complete([204,"网络错误"]),Cr.Utils.log(t.toString()),Cr.Utils.log(t.stack)}.bind(this))}catch(t){e.complete([3,t.toString()])}return e},Cr.LHProxy.prototype.startBGMusic=function(e,t){var n=new Cr.AsyncResult;try{this._audioCtrl.startBGMusic(e,t).then(function(){n.complete([0,""])}.bind(this)).exception(function(e){n.complete([204,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){n.complete([3,e.toString()])}return n},Cr.LHProxy.prototype.stopPlayBGMusic=function(){var e=new Cr.AsyncResult;try{this._audioCtrl.stopPlayBGMusic().then(function(){e.complete([0,""])}.bind(this)).exception(function(t){e.complete([204,"网络错误"]),Cr.Utils.log(t.toString()),Cr.Utils.log(t.stack)}.bind(this))}catch(t){e.complete([3,t.toString()])}return e},Cr.LHProxy.prototype.setPlayBGMusicVolumn=function(e){var t=new Cr.AsyncResult;try{this._audioCtrl.setPlayBGMusicVolumn(e).then(function(){t.complete([0,""])}.bind(this)).exception(function(e){t.complete([204,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([3,e.toString()])}return t},Cr.LHProxy.prototype.getPlayBGMusicVolumn=function(){var e=new Cr.AsyncResult;try{this._audioCtrl.getPlayBGMusicVolumn().then(function(){e.complete([0,""])}.bind(this)).exception(function(t){e.complete([204,"网络错误"]),Cr.Utils.log(t.toString()),Cr.Utils.log(t.stack)}.bind(this))}catch(t){e.complete([3,t.toString()])}return e},Cr.LHProxy.prototype.voiceHowling=function(e){var t=new Cr.AsyncResult;try{this._audioCtrl.voiceHowling(e).then(function(){t.complete([0,""])}.bind(this)).exception(function(e){t.complete([204,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([3,e.toString()])}return t},Cr.LHProxy.prototype.voiceNoise=function(e){var t=new Cr.AsyncResult;try{this._audioCtrl.voiceNoise(e).then(function(){t.complete([0,""])}.bind(this)).exception(function(e){t.complete([204,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([3,e.toString()])}return t},Cr.LHProxy.prototype.remoteAudioSet=function(e,t){var n=new Cr.AsyncResult;try{this._audioCtrl.remoteAudioSet(e,t).then(function(){n.complete([0,""])}.bind(this)).exception(function(e){n.complete([204,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){n.complete([3,e.toString()])}return n},Cr.LHProxy.prototype.getRemoteAudioInf=function(e){var t=new Cr.AsyncResult;try{this._audioCtrl.getRemoteAudioInf(e).then(function(){t.complete([0,""])}.bind(this)).exception(function(e){t.complete([204,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([3,e.toString()])}return t},Cr.conferenceRequest=(e,...t)=>new Promise(((n,i)=>{try{Cr._proxy._conferenceRequest[e](...t).then((function(...e){return n(e)})).exception((function(e){return console.crlog("[RTC] conferenceRequest fail: "+e.toString()),i(window.CRVideo_ERR_DEF.UNKNOWERR)}))}catch(e){return console.crlog("[RTC] conferenceRequest error: "+e.toString()),i(window.CRVideo_ERR_DEF.UNKNOWERR)}}))},3207:()=>{const e=window.__Rtc;e.CR_InitRslt=new Cr.CbProxy("CR_InitRslt"),e.CR__LoginRslt=new Cr.CbProxy("CR__LoginRslt"),e.CR__RefreshSessionRslt=new Cr.CbProxy("CR__RefreshSessionRslt"),e.CR__KeepAliveRslt=new Cr.CbProxy("CR__KeepAliveRslt"),e.CR__ExitRslt=new Cr.CbProxy("CR__ExitRslt"),e.CR__GetActiveMembersRslt=new Cr.CbProxy("CR__GetActiveMembersRslt"),e.CR__EndConferenceRslt=new Cr.CbProxy("CR__EndConferenceRslt"),e.CR__GetLastMsgRslt=new Cr.CbProxy("CR__GetLastMsgRslt"),e.CR__GetLastNMsgRslt=new Cr.CbProxy("CR__GetLastNMsgRslt"),e.CR__UserLeftMeet=new Cr.CbProxy("CR__UserLeftMeet"),e.CR__UserEnter=new Cr.CbProxy("CR__UserEnter"),e.CR__MeetEnded=new Cr.CbProxy("CR__MeetEnded"),e.CR__NotifyStartBroadCast=new Cr.CbProxy("CR__NotifyStartBroadCast"),e.CR__NotifyStopBroadCast=new Cr.CbProxy("CR__NotifyStopBroadCast"),e.CR__NotifyBroadCastStartPush=new Cr.CbProxy("CR__NotifyBroadCastStartPush"),e.CR__NotifyBroadCastStopPush=new Cr.CbProxy("CR__NotifyBroadCastStopPush"),e.CR__GetBroadCastUrlRslt=new Cr.CbProxy("CR__GetBroadCastUrlRslt"),e.CR__RightChanged=new Cr.CbProxy("CR__RightChanged"),e.CR__AskQuesRslt=new Cr.CbProxy("CR__AskQuesRslt"),e.CR__GetQuesListRslt=new Cr.CbProxy("CR__GetQuesListRslt"),e.CR__AskQuesNotify=new Cr.CbProxy("CR__AskQuesNotify"),e.CR__LockQuesNotify=new Cr.CbProxy("CR__LockQuesNotify"),e.CR__ReplyQuesNotify=new Cr.CbProxy("CR__ReplyQuesNotify"),e.CR__ModifyQuesNotify=new Cr.CbProxy("CR__ModifyQuesNotify"),e.CR__DelQuesNotify=new Cr.CbProxy("CR__DelQuesNotify"),e.CR__DelAllQuesNotify=new Cr.CbProxy("CR__DelAllQuesNotify"),e.CR__PublicQuesNotify=new Cr.CbProxy("CR__PublicQuesNotify"),e.CR__QuesTypeChangeNotify=new Cr.CbProxy("CR__QuesTypeChangeNotify"),e.CR__ModifyQuesTypeNotify=new Cr.CbProxy("CR__ModifyQuesTypeNotify"),e.CR__SetBroadCastQuesNotify=new Cr.CbProxy("CR__SetBroadCastQuesNotify"),e.CR__NotifyPlayBackStartPush=new Cr.CbProxy("CR__NotifyPlayBackStartPush"),e.CR__GetIMMsgCountRslt=new Cr.CbProxy("CR__GetIMMsgCountRslt"),e.CR__Notifypayback=new Cr.CbProxy("CR__Notifypayback"),e.CR__NotifyBroadCastPlaybackStop=new Cr.CbProxy("CR__NotifyBroadCastPlaybackStop"),e.CR__NotifySwtichLiveAppElements=new Cr.CbProxy("CR__NotifySwtichLiveAppElements"),e.CR__NotifyThumbUp=new Cr.CbProxy("CR__NotifyThumbUp"),e.CR__NotifyLuckyDrawCfg=new Cr.CbProxy("CR__NotifyLuckyDrawCfg"),e.CR__GetLuckyDrawCfgRslt=new Cr.CbProxy("CR__GetLuckyDrawCfgRslt"),e.CR__JoinLuckyDrawMembersRslt=new Cr.CbProxy("CR__JoinLuckyDrawMembersRslt"),e.CR__NotifyLDMembersStatus=new Cr.CbProxy("CR__NotifyLDMembersStatus"),e.CR__NotifyLuckyDrawResult=new Cr.CbProxy("CR__NotifyLuckyDrawResult"),e.CR__AskForMicRslt=new Cr.CbProxy("CR__AskForMicRslt"),e.CR__CloseMicExRslt=new Cr.CbProxy("CR__CloseMicExRslt"),e.CR__AudioAllocRaw=new Cr.CbProxy("CR__AudioAllocRaw"),e.CR__AudioAllocRawExt=new Cr.CbProxy("CR__AudioAllocRawExt"),e.CR__AudioAllocRawExt2=new Cr.CbProxy("CR__AudioAllocRawExt2"),e.CR__VideoAllocRaw=new Cr.CbProxy("CR__VideoAllocRaw"),e.CR__VideoAllocRawExt=new Cr.CbProxy("CR__VideoAllocRawExt"),e.CR__VideoAllocRawExt2=new Cr.CbProxy("CR__VideoAllocRawExt2"),e.CR__ModifyPeerAddr=new Cr.CbProxy("CR__ModifyPeerAddr"),e.CR__ModifyPeerAddrExt=new Cr.CbProxy("CR__ModifyPeerAddrExt"),e.CR__NotifyRTMPStreamPublishFinished=new Cr.CbProxy("CR__NotifyRTMPStreamPublishFinished"),e.CR__EnableSendScreen2Internet=new Cr.CbProxy("CR__EnableSendScreen2Internet"),e.CR__DisableSendScreen2Internet=new Cr.CbProxy("CR__DisableSendScreen2Internet"),e.CR__EnableSendFilm2Internet=new Cr.CbProxy("CR__EnableSendFilm2Internet"),e.CR__DisableSendFilm2Internet=new Cr.CbProxy("CR__DisableSendFilm2Internet"),e.CR__Free=new Cr.CbProxy("CR__Free"),e.CR__NotifyAllowVideoWall=new Cr.CbProxy("CR__NotifyAllowVideoWall"),e.CR__StartVideoByManager=new Cr.CbProxy("CR__StartVideoByManager"),e.CR__NotifyEnableVideo=new Cr.CbProxy("CR__NotifyEnableVideo"),e.CR__UpdateFocusWindow=new Cr.CbProxy("CR__UpdateFocusWindow"),e.CR__UpdateVLayout=new Cr.CbProxy("CR__UpdateVLayout"),e.CR__UpdateVLayout2=new Cr.CbProxy("CR__UpdateVLayout2"),e.CR__UpdateMainVideoShowMode=new Cr.CbProxy("CR__UpdateMainVideoShowMode"),e.CR__UpdateVideoListMode=new Cr.CbProxy("CR__UpdateVideoListMode"),e.CR__EnableUpload=new Cr.CbProxy("CR__EnableUpload"),e.CR__EnableUpload2=new Cr.CbProxy("CR__EnableUpload2"),e.CR__GenerateIFrame=new Cr.CbProxy("CR__GenerateIFrame"),e.CR__NotifyRefuseOpenVideo=new Cr.CbProxy("CR__NotifyRefuseOpenVideo"),e.CR__NotifyVideoPolling=new Cr.CbProxy("CR__NotifyVideoPolling"),e.CR__NotifyPollingVideo=new Cr.CbProxy("CR__NotifyPollingVideo"),e.CR__NotifyVideoList=new Cr.CbProxy("CR__NotifyVideoList"),e.CR__NotifyStartAdjustDirection=new Cr.CbProxy("CR__NotifyStartAdjustDirection"),e.CR__NotifyStartAdjustZoom=new Cr.CbProxy("CR__NotifyStartAdjustZoom"),e.CR__NotifyStopAdjustDirection=new Cr.CbProxy("CR__NotifyStopAdjustDirection"),e.CR__NotifyStopAdjustZoom=new Cr.CbProxy("CR__NotifyStopAdjustZoom"),e.CR__AllowVideoWallRslt=new Cr.CbProxy("CR__AllowVideoWallRslt"),e.CR__EnableVideoRslt=new Cr.CbProxy("CR__EnableVideoRslt"),e.CR__SetFocusWindowRslt=new Cr.CbProxy("CR__SetFocusWindowRslt"),e.CR__SubscribeFocusWindowRslt=new Cr.CbProxy("CR__SubscribeFocusWindowRslt"),e.CR__SubscribeFocusWindow2Rslt=new Cr.CbProxy("CR__SubscribeFocusWindow2Rslt"),e.CR__SetVLayoutRslt=new Cr.CbProxy("CR__SetVLayoutRslt"),e.CR__SetMainVideoShowModeRslt=new Cr.CbProxy("CR__SetMainVideoShowModeRslt"),e.CR__SetVideoListModeRslt=new Cr.CbProxy("CR__SetVideoListModeRslt"),e.CR__RefuseOpenVideoRslt=new Cr.CbProxy("CR__RefuseOpenVideoRslt"),e.CR__GetVideoSettingRslt=new Cr.CbProxy("CR__GetVideoSettingRslt"),e.CR__SetCameraRslt=new Cr.CbProxy("CR__SetCameraRslt"),e.CR__SetCameraByIdRslt=new Cr.CbProxy("CR__SetCameraByIdRslt"),e.CR__SetVideoPollingRslt=new Cr.CbProxy("CR__SetVideoPollingRslt"),e.CR__UpdatePollingVideoRslt=new Cr.CbProxy("CR__UpdatePollingVideoRslt"),e.CR__UpdateVideoListRslt=new Cr.CbProxy("CR__UpdateVideoListRslt"),e.CR__GetVideoPollingStateRslt=new Cr.CbProxy("CR__GetVideoPollingStateRslt"),e.CR__StartAdjustDirectionRslt=new Cr.CbProxy("CR__StartAdjustDirectionRslt"),e.CR__StartAdjustZoomRslt=new Cr.CbProxy("CR__StartAdjustZoomRslt"),e.CR__StopAdjustDirectionRslt=new Cr.CbProxy("CR__StopAdjustDirectionRslt"),e.CR__VideoResolutionReportRslt=new Cr.CbProxy("CR__VideoResolutionReportRslt"),e.CR__SetVoiceEnergyRslt=new Cr.CbProxy("CR__SetVoiceEnergyRslt"),e.CR__PstnSwitchMicStatusRslt=new Cr.CbProxy("CR__PstnSwitchMicStatusRslt"),e.CR__StartRecordRslt=new Cr.CbProxy("CR__StartRecordRslt"),e.CR__IsRecordingRslt=new Cr.CbProxy("CR__IsRecordingRslt"),e.CR__StopRecordRslt=new Cr.CbProxy("CR__StopRecordRslt"),e.CR__PlayApplauseRslt=new Cr.CbProxy("CR__PlayApplauseRslt"),e.CR__GetMusicListRslt=new Cr.CbProxy("CR__GetMusicListRslt"),e.CR__GetPlayBGMusicRslt=new Cr.CbProxy("CR__GetPlayBGMusicRslt"),e.CR__StartBGMusicRslt=new Cr.CbProxy("CR__StartBGMusicRslt"),e.CR__StopPlayBGMusicRslt=new Cr.CbProxy("CR__StopPlayBGMusicRslt"),e.CR__SetPlayBGMusicVolumnRslt=new Cr.CbProxy("CR__SetPlayBGMusicVolumnRslt"),e.CR__GetPlayBGMusicVolumnRslt=new Cr.CbProxy("CR__GetPlayBGMusicVolumnRslt"),e.CR__VoiceHowlingRslt=new Cr.CbProxy("CR__VoiceHowlingRslt"),e.CR__VoiceNoiseRslt=new Cr.CbProxy("CR__VoiceNoiseRslt"),e.CR__RemoteAudioSetRslt=new Cr.CbProxy("CR__RemoteAudioSetRslt"),e.CR__GetRemoteAudioInfRslt=new Cr.CbProxy("CR__GetRemoteAudioInfRslt"),e.CR__NotifyCtrlReqState=new Cr.CbProxy("CR__NotifyCtrlReqState")},5796:()=>{window.CRVideo_ERR_DEF={NOERR:0,UNKNOWERR:1,OUTOF_MEM:2,INNER_ERR:3,MISMATCHCLIENTVER:4,MEETPARAM_ERR:5,ERR_DATA:6,ANCTPSWD_ERR:7,SERVER_EXCEPTION:8,LOGINSTATE_ERROR:9,SDK_USER_BEEN_KICKOUT:10,SDK_NOT_INIT:11,SDK_NOT_LOGIN:12,SDK_BASE64_COV_ERR:13,SDK_CUSTOMAUTH_NOINFO:14,SDK_CUSTOMAUTH_NOTSUPPORT:15,SDK_CUSTOMAUTH_EXCEPTION:16,SDK_CUSTOMAUTH_FAILED:17,SDK_TOKEN_TIMEOUT:18,SDK_TOKEN_AUTHINFOERR:19,SDK_TOKEN_APPIDNOTEXIST:20,SDK_TOKEN_AUTH_FAILED:21,SDK_TOKEN_NOTTOKENTYPE:22,NETWORK_INITFAILED:200,NO_SERVERINFO:201,NOSERVER_RSP:202,CREATE_CONN_FAILED:203,SOCKETEXCEPTION:204,SOCKETTIMEOUT:205,FORCEDCLOSECONNECTION:206,CONNECTIONLOST:207,VOICEENG_INITFAILED:208,SDK_SSL_ERR:209,QUE_ID_INVALID:400,QUE_NOUSER:401,QUE_USER_CANCELLED:402,QUE_SERVICE_NOT_START:403,ALREADY_OTHERQUE:404,INVALID_CALLID:600,ERR_CALL_EXIST:601,ERR_BUSY:602,ERR_OFFLINE:603,ERR_NOANSWER:604,ERR_USER_NOT_FOUND:605,ERR_REFUSE:606,MEETNOTEXIST:800,AUTHERROR:801,MEMBEROVERFLOWERROR:802,RESOURCEALLOCATEERROR:803,MEETROOMLOCKED:804,BALANCELESSERROR:805,SEVICE_NOTENABLED:806,ALREADYLOGIN:807,SDK_MIC_NORIGHT:808,SDK_MIC_BEING_USED:809,SDK_MIC_UNKNOWERR:810,SDK_SPK_NORIGHT:811,SDK_SPK_BEING_USED:812,SDK_SPK_UNKNOWERR:813,CATCH_SCREEN_ERR:900,RECORD_MAX:901,RECORD_NO_DISK:902,RECORD_SIZE_ERR:903,SDK_CFG_RESTRICTED:904,SDK_FILE_ERR:905,SDK_RECORDSTARTED:906,SENDFAIL:1e3,CONTAIN_SENSITIVEWORDS:1001,SENDCMD_LARGE:1100,SENDBUFFER_LARGE:1101,SENDDATA_TARGETINVALID:1102,SENDFILE_FILEINERROR:1103,TRANSID_INVALID:1104,RECORDFILE_STATE_ERR:1200,RECORDFILE_NOT_EXIST:1201,IPCAM_URLERR:1300,IPCAM_ALREADYEXIST:1301,IPCAM_TOOMUCH:1302,SDK_FILE_NOT_EXIST:1400,SDK_FILE_READ_ERR:1401,SDK_FILE_WRITE_ERR:1402,SDK_FILE_OPERATOR_ERR:1403,WEB_OCX_NOTINSTALLED:2001,WEB_BROWER_NOTUPPORTED:2002,OCX_VERSION_NOTUPPORTED:2003,DEVICE_UNKNOW_ERR:8001,DEVICE_NOTALLOWED_ERR:8002,DEVICE_UPDATELIST_ERR:8003,DEVICE_HAVENOTAPI_ERR:8004,DEVICE_NONSUPPORT_ERR:8005,DEVICE_LOWVER_ERR:8006},window.CRVideo_ASTATUS={AUNKNOWN:0,ANULL:1,ACLOSE:2,AOPEN:3,AOPENING:4},window.CRVideo_VSTATUS={VUNKNOWN:0,VNULL:1,VCLOSE:2,VOPEN:3,VOPENING:4},window.CRVideo_VIDEO_SHOW_SIZE={VIDEO_SZ_80:1,VSIZE_SZ_128:2,VSIZE_SZ_160:3,VSIZE_SZ_192:4,VSIZE_SZ_256:5,VSIZE_SZ_288:6,VSIZE_SZ_320:7,VSIZE_SZ_360:8,VSIZE_SZ_400:9,VSIZE_SZ_480:10,VSIZE_SZ_576:11,VSIZE_SZ_720:12,VSIZE_SZ_1080:13},window.CRVideo_VIDEO_FORMAT={VFMT_YUV420P:0,VFMT_ARGB32:1},window.CRVideo_REC_VCONTENT_TYPE={RECVTP_VIDEO:0,RECVTP_PIC:1,RECVTP_SCREEN:2,RECVTP_MEDIA:3,RECVTP_TIMESTAMP:4,RECVTP_REMOTE_SCREEN:5},window.CRVideo_RECORD_STATE={NO_RECORD:0,STARTING:1,RECORDING:2,PAUSED:3,STOPPING:4},window.CRVideo_RECORD_AUDIO_TYPE={REC_AUDIO_TYPE_NULL:0,REC_AUDIO_TYPE_LOC:1,REC_AUDIO_TYPE_OTHER:2,REC_AUDIO_TYPE_ALL:3},window.CRVideo_RECORD_VIDEO_TYPE={REC_VCONTENT_NULL:0,RECORD_VIDEO_TYPE_SCREEN:1,REC_VCONTENT_VIDEOS:3},window.CRVideo_RECORD_VLAYOUT={REC_VLAYOUT_GRID:0,REC_VLAYOUT_PIP:1},window.CRVideo_ENCODE_TYPE={ENC_CLOUDROOM:0,ENC_H264:1},window.CRVideo_MOUSE_MSG_TYPE={MOUSE_MOVE:0,MOUSE_DOWN:1,MOUSE_UP:2,MOUSE_DBCLICK:3},window.CRVideo_MOUSE_KEY_TYPE={MOUSEKEY_NULL:0,MOUSEKEY_L:1,MOUSEKEY_M:2,MOUSEKEY_R:3,MOUSEKEY_WHEEL:4,MOUSEKEY_X:5},window.CRVideo_KEY_MSG_TYPE={KEYT_DWON:0,KEYT_UP:1},window.CRVideo_MAIN_PAGE_TYPE={MAINPAGE_VIDEOWALL:0,MAINPAGE_SHARE:1,MAINPAGE_WHITEBOARD:2},window.CRVideo_VIDEOLAYOUTMODE={VLO_1v1_M:0,VLO_WALL1_M:1,VLO_WALL2:2,VLO_WALL4:3,VLO_WALL5_M:4,VLO_WALL6_M:5,VLO_WALL9:6,VLO_WALL13_M:7,VLO_WALL16:8,VLO_WALL25:9},window.CRVideo_HTTP_TRANSFER_STAT={HTTPFS_NULL:0,HTTPFS_QUEUE:1,HTTPFS_TRANSFERING:2,HTTPFS_FINISHED:3},window.CRVideo_HTTP_TRANSFER_RESULT={HTTPR_Success:0,HTTPR_InnerErr:1,HTTPR_ParamErr:2,HTTPR_NetworkFail:3,HTTPR_NetworkTimeout:4,HTTPR_FileOperationFail:5,HTTPR_PathNotSupprot:6,HTTPR_FileTransfering:7,HTTPR_HTTPERR_BEGIN:1e3,HTTPR_HTTPERR_END:1999},window.CRVideo_ToolBarUI={BTN_Pause:0,BTN_Stop:1},window.CRVideo_REC_DATATYPE={REC_AV_DEFAULT:0,REC_AUDIO_LOC:1,REC_AUDIO_OTHER:2,REC_VIDEO:3}},3130:()=>{const e={0:"SDK_SUCCESS",1:"SDK_UNSUPPORT",2:"SDK_ANCT_NOTEXIST",3:"SDK_USR_PSWD_ERR",4:"SDK_MEET_PSWD_ERR",5:"SDK_UNKNOW_ERR",6:"SDK_MEET_NOTEXIST",7:"SDK_MEET_START_ERR",8:"SDK_CREATEMEETINGFAILED",9:"SDK_THEME_EMPTY_ERR",10:"SDK_NOUSED",11:"SDK_CMEET_NO_PERMISSION",12:"SDK_FIXMEET_NOBALANCE",13:"SDK_FIXMEETING_TOOMANY",14:"SDK_CONFERENCELINK_ERR",15:"SDK_NICKNAMEEMPTY_ERR",16:"SDK_CONTINUOUSFAILURE",17:"SDK_MEETINGNOTSTART",18:"SDK_MEETINGOVER",19:"SDK_MEETID_INVALID",21:"SDK_ACCOUNT_INVALID",22:"SDK_MEET_BUS_USED",23:"SDK_VIN_NO_PERMISSION",26:"SDK_MEET_NO_TV_MEETING",27:"SDK_OEM_ANCT_MISMATCH",30:"SDK_VERSION_NOTMATCH",31:"SDK_USER_EXISTS",32:"SDK_USER_NOT_EXISTS",33:"SDK_LOGINSTATE_ERROR",34:"SDK_USER_BEEN_KICKOUT",38:"SDK_ONLY_INVITER",71:"SDK_CUSTOMAUTH_NOINFO",72:"SDK_CUSTOMAUTH_NOTSUPPORT",73:"SDK_CUSTOMAUTH_EXCEPTION",74:"SDK_CUSTOMAUTH_FAILED",81:"SDK_TOKEN_AUTHINFOERR",83:"SDK_TOKEN_AUTHCHECKERR",84:"SDK_TOKEN_AUTHEXCEPTION",85:"SDK_TOKEN_AUTHINFOTIMEOUT",86:"SDK_TOKEN_APPIDNOTEXIST",87:"SDK_TOKEN_NOTTOKENTYPE",500:"SDK_NOT_LOGIN",1e4:"HTTP_ERR_BEGIN",10999:"HTTP_ERR_END",11e3:"SDK_SND_DATA_ERR",11001:"SDK_RSP_DATA_ERR",2e4:"CALL_ERR_BEGIN",20001:"CALL_ERR_UNKNOW",20002:"CALL_ERR_CALL_NOT_FOUND",20003:"CALL_ERR_CALL_EXIST",20004:"CALL_ERR_BUSY",20005:"CALL_ERR_OFFLINE",20006:"CALL_ERR_NOANSWER",20007:"CALL_ERR_PARAM_INVALID",20008:"CALL_ERR_USER_NOT_FOUND",20009:"CALL_ERR_PWD_INVALID",20010:"CALL_ERR_BUSY_MEETING",20011:"CALL_ERR_REFUSE",20012:"CALL_SEND_FAILED",20013:"CALL_RSP_DATA_ERR",20014:"CALL_ERR_SESSIONERR",20015:"CALL_ERR_ICEPRXNULL",20016:"CALL_SENDDATA_TARGETINVALID",20100:"RSP_CODE_QUE_ID_INVALID",20101:"RSP_CODE_QUE_NOUSER",20102:"RSP_CODE_QUE_USER_CANCELLED",20103:"RSP_CODE_QUE_SERVICE_NOT_START",20104:"RSP_CODE_QUE_QUEUING",3e4:"CALL_SENDCMD_LARGE",30001:"CALL_SENDBUFFER_LARGE",30002:"CALL_SENDFILE_FILEINERROR",30003:"CALL_TRANSID_INVALID"},t={CRVIDEOSDK_NOERR:0,CRVIDEOSDK_UNKNOWERR:1,CRVIDEOSDK_OUTOF_MEM:2,CRVIDEOSDK_INNER_ERR:3,CRVIDEOSDK_MISMATCHCLIENTVER:4,CRVIDEOSDK_MEETPARAM_ERR:5,CRVIDEOSDK_ERR_DATA:6,CRVIDEOSDK_ANCTPSWD_ERR:7,CRVIDEOSDK_SERVER_EXCEPTION:8,CRVIDEOSDK_LOGINSTATE_ERROR:9,CRVIDEOSDK_USER_BEEN_KICKOUT:10,CRVIDEOSDK_NOT_INIT:11,CRVIDEOSDK_NOT_LOGIN:12,CRVIDEOSDK_BASE64_COV_ERR:13,CRVIDEOSDK_CUSTOMAUTH_NOINFO:14,CRVIDEOSDK_CUSTOMAUTH_NOTSUPPORT:15,CRVIDEOSDK_CUSTOMAUTH_EXCEPTION:16,CRVIDEOSDK_CUSTOMAUTH_FAILED:17,CRVIDEOSDK_TOKEN_TIMEOUT:18,CRVIDEOSDK_TOKEN_AUTHINFOERR:19,CRVIDEOSDK_TOKEN_APPIDNOTEXIST:20,CRVIDEOSDK_TOKEN_AUTH_FAILED:21,CRVIDEOSDK_TOKEN_NOTTOKENTYPE:22,CRVIDEOSDK_API_NO_PERMISSION:23,CRVIDEOSDK_NETWORK_INITFAILED:200,CRVIDEOSDK_NO_SERVERINFO:201,CRVIDEOSDK_NOSERVER_RSP:202,CRVIDEOSDK_CREATE_CONN_FAILED:203,CRVIDEOSDK_SOCKETEXCEPTION:204,CRVIDEOSDK_SOCKETTIMEOUT:205,CRVIDEOSDK_FORCEDCLOSECONNECTION:206,CRVIDEOSDK_CONNECTIONLOST:207,CRVIDEOSDK_VOICEENG_INITFAILED:208,CRVIDEOSDK_SSL_ERR:209,CRVIDEOSDK_QUE_ID_INVALID:400,CRVIDEOSDK_QUE_NOUSER:401,CRVIDEOSDK_QUE_USER_CANCELLED:402,CRVIDEOSDK_QUE_SERVICE_NOT_START:403,CRVIDEOSDK_ALREADY_OTHERQUE:404,CRVIDEOSDK_INVALID_CALLID:600,CRVIDEOSDK_ERR_CALL_EXIST:601,CRVIDEOSDK_ERR_BUSY:602,CRVIDEOSDK_ERR_OFFLINE:603,CRVIDEOSDK_ERR_NOANSWER:604,CRVIDEOSDK_ERR_USER_NOT_FOUND:605,CRVIDEOSDK_ERR_REFUSE:606,CRVIDEOSDK_MEETNOTEXIST:800,CRVIDEOSDK_AUTHERROR:801,CRVIDEOSDK_MEMBEROVERFLOWERROR:802,CRVIDEOSDK_RESOURCEALLOCATEERROR:803,CRVIDEOSDK_MEETROOMLOCKED:804,CRVIDEOSDK_BALANCELESSERROR:805,CRVIDEOSDK_SEVICE_NOTENABLED:806,CRVIDEOSDK_ALREADYLOGIN:807,CRVIDEOSDK_MIC_NORIGHT:808,CRVIDEOSDK_MIC_BEING_USED:809,CRVIDEOSDK_MIC_UNKNOWERR:810,CRVIDEOSDK_SPK_NORIGHT:811,CRVIDEOSDK_SPK_BEING_USED:812,CRVIDEOSDK_SPK_UNKNOWERR:813,CRVIDEOSDK_PIC_ISNULL:814,CRVIDEOSDK_CATCH_SCREEN_ERR:900,CRVIDEOSDK_RECORD_MAX:901,CRVIDEOSDK_RECORD_NO_DISK:902,CRVIDEOSDK_RECORD_SIZE_ERR:903,CRVIDEOSDK_CFG_RESTRICTED:904,CRVIDEOSDK_FILE_ERR:905,CRVIDEOSDK_RECORDSTARTED:906,CRVIDEOSDK_NOMORE_MCU:907,CRVIDEOSDK_SENDFAIL:1e3,CRVIDEOSDK_CONTAIN_SENSITIVEWORDS:1001,CRVIDEOSDK_SENDCMD_LARGE:1100,CRVIDEOSDK_SENDBUFFER_LARGE:1101,CRVIDEOSDK_SENDDATA_TARGETINVALI:1102,CRVIDEOSDK_SENDFILE_FILEINERRO:1103,CRVIDEOSDK_TRANSID_INVALI:1104,CRVIDEOSDK_RECORDFILE_STATE_ERR:1200,CRVIDEOSDK_RECORDFILE_NOT_EXIST:1201,CRVIDEOSDK_RECORDFILE_UPLOAD_FAILED:1202,CRVIDEOSDK_RECORDFILE_DEL_FAILED:1203,CRVIDEOSDK_IPCAM_URLERR:1300,CRVIDEOSDK_IPCAM_ALREADYEXIST:1301,CRVIDEOSDK_IPCAM_TOOMANYCAM:1302,CRVIDEOSDK_FILE_NOT_EXIST:1400,CRVIDEOSDK_FILE_READ_ERR:1401,CRVIDEOSDK_FILE_WRITE_ERR:1402,CRVIDEOSDK_FILE_ALREADY_EXIST:1403,CRVIDEOSDK_FILE_OPERATOR_ERR:1404,CRVIDEOSDK_NETDISK_NOT_EXIST:1500,CRVIDEOSDK_NETDISK_PERMISSIONDENIED:1501,CRVIDEOSDK_NETDISK_INVALIDFILENAME:1502,CRVIDEOSDK_NETDISK_FILEALREADYEXISTS:1503,CRVIDEOSDK_NETDISK_FILEORDIRECTORYNOTEXISTS:1504,CRVIDEOSDK_NETDISK_FILENOTTRANSFORM:1505,CRVIDEOSDK_NETDISK_TRANSFORMFAILED:1506,CRVIDEOSDK_NETDISK_NOSPACE:1507};window.Err_Cover=function(e){switch(e){case"SDK_SUCCESS":return"CRVIDEOSDK_NOERR";case"SDK_UNKNOW_ERR":default:return"CRVIDEOSDK_UNKNOWERR";case"SDK_NOT_LOGIN":return"CRVIDEOSDK_NOT_LOGIN";case"SDK_VERSION_NOTMATCH":case"SDK_UNSUPPORT":return"CRVIDEOSDK_MISMATCHCLIENTVER";case"SDK_ACCOUNT_INVALID":case"SDK_ANCT_NOTEXIST":case"SDK_USER_NOT_EXISTS":case"SDK_USR_PSWD_ERR":case"CALL_ERR_PWD_INVALID":return"CRVIDEOSDK_ANCTPSWD_ERR";case"SDK_LOGINSTATE_ERROR":return"CRVIDEOSDK_LOGINSTATE_ERROR";case"SDK_USER_BEEN_KICKOUT":return"CRVIDEOSDK_USER_BEEN_KICKOUT";case"SDK_CUSTOMAUTH_NOINFO":return"CRVIDEOSDK_CUSTOMAUTH_NOINFO";case"SDK_CUSTOMAUTH_NOTSUPPORT":return"CRVIDEOSDK_CUSTOMAUTH_NOTSUPPORT";case"SDK_CUSTOMAUTH_EXCEPTION":return"CRVIDEOSDK_CUSTOMAUTH_EXCEPTION";case"SDK_CUSTOMAUTH_FAILED":return"CRVIDEOSDK_CUSTOMAUTH_FAILED";case"SDK_MEET_PSWD_ERR":return"CRVIDEOSDK_AUTHERROR";case"SDK_MEETINGOVER":case"SDK_MEETID_INVALID":case"SDK_MEET_NO_TV_MEETING":case"SDK_MEET_NOTEXIST":return"CRVIDEOSDK_MEETNOTEXIST";case"SDK_MEET_START_ERR":case"SDK_CREATEMEETINGFAILED":case"SDK_FIXMEETING_TOOMANY":case"SDK_CMEET_NO_PERMISSION":case"SDK_FIXMEET_NOBALANCE":case"SDK_CONTINUOUSFAILURE":case"SDK_MEETINGNOTSTART":return"CRVIDEOSDK_RESOURCEALLOCATEERROR";case"SDK_VIN_NO_PERMISSION":return"CRVIDEOSDK_API_NO_PERMISSION";case"SDK_CONFERENCELINK_ERR":case"SDK_NICKNAMEEMPTY_ERR":case"SDK_THEME_EMPTY_ERR":case"SDK_OEM_ANCT_MISMATCH":case"SDK_USER_EXISTS":case"SDK_MEET_BUS_USED":case"CALL_ERR_PARAM_INVALID":return"CRVIDEOSDK_MEETPARAM_ERR";case"SDK_SND_DATA_ERR":return"CRVIDEOSDK_NOSERVER_RSP";case"SDK_RSP_DATA_ERR":case"CALL_RSP_DATA_ERR":return"CRVIDEOSDK_ERR_DATA";case"SDK_TOKEN_AUTHINFOERR":case"SDK_TOKEN_AUTHEXCEPTION":return"CRVIDEOSDK_TOKEN_AUTHINFOERR";case"SDK_TOKEN_AUTHCHECKERR":return"CRVIDEOSDK_TOKEN_AUTH_FAILED";case"SDK_TOKEN_AUTHINFOTIMEOUT":return"CRVIDEOSDK_TOKEN_TIMEOUT";case"SDK_TOKEN_APPIDNOTEXIST":return"CRVIDEOSDK_TOKEN_APPIDNOTEXIST";case"SDK_TOKEN_NOTTOKENTYPE":return"CRVIDEOSDK_TOKEN_NOTTOKENTYPE";case"CALL_ERR_CALL_NOT_FOUND":return"CRVIDEOSDK_INVALID_CALLID";case"CALL_ERR_CALL_EXIST":return"CRVIDEOSDK_ERR_CALL_EXIST";case"CALL_ERR_BUSY":case"CALL_ERR_BUSY_MEETING":return"CRVIDEOSDK_ERR_BUSY";case"CALL_ERR_OFFLINE":return"CRVIDEOSDK_ERR_OFFLINE";case"CALL_ERR_NOANSWER":return"CRVIDEOSDK_ERR_NOANSWER";case"CALL_ERR_USER_NOT_FOUND":return"CRVIDEOSDK_ERR_USER_NOT_FOUND";case"CALL_ERR_REFUSE":return"CRVIDEOSDK_ERR_REFUSE";case"CALL_ERR_ICEPRXNULL":return"CRVIDEOSDK_CREATE_CONN_FAILED";case"CALL_SENDDATA_TARGETINVALID":return"CRVIDEOSDK_SENDDATA_TARGETINVALID";case"CALL_SENDCMD_LARGE":return"CRVIDEOSDK_SENDCMD_LARGE";case"CALL_SENDBUFFER_LARGE":return"CRVIDEOSDK_SENDBUFFER_LARGE";case"CALL_TRANSID_INVALID":return"CRVIDEOSDK_TRANSID_INVALID";case"CALL_SENDFILE_FILEINERROR":return"CRVIDEOSDK_SENDFILE_FILEINERROR";case"CALL_ERR_SESSIONERR":return"CRVIDEOSDK_CONNECTIONLOST";case"CALL_SEND_FAILED":return"CRVIDEOSDK_SOCKETTIMEOUT";case"RSP_CODE_QUE_ID_INVALID":return"CRVIDEOSDK_QUE_ID_INVALID";case"RSP_CODE_QUE_NOUSER":return"CRVIDEOSDK_QUE_NOUSER";case"RSP_CODE_QUE_USER_CANCELLED":return"CRVIDEOSDK_QUE_USER_CANCELLED";case"RSP_CODE_QUE_SERVICE_NOT_START":return"CRVIDEOSDK_QUE_SERVICE_NOT_START";case"RSP_CODE_QUE_QUEUING":return"CRVIDEOSDK_ALREADY_OTHERQUE"}},window.ICE_SDK_ERR=function(n){return 0==n?0:t[Err_Cover(e[2e4+n])]},window.WEB_SDK_ERR=function(n){return 0==n?0:t[Err_Cover(e[n])]};window.__Rtc.CRCONFERR=new class{constructor(){}Parse(e){const t={err:e.toString(),errCode:1,errDesc:"未知错误"};return e instanceof Conference.RoomLockedError&&(t.errCode=804,t.errDesc="房间已加锁"),e instanceof Conference.SeviceNotEnabled&&(t.errCode=806,t.errDesc="业务权限未开启"),e instanceof Conference.NoResourceForMIC&&(t.errCode=808,t.errDesc="没有开麦权限"),e instanceof Conference.NoResourceForMIC&&(t.errCode=816,t.errDesc="开麦数达到上限"),e instanceof Conference.SrvRecordStarted&&(t.errCode=906,t.errDesc="录制已开启"),t}}},2058:()=>{__Rtc.MSClientI=Ice.Class(MS.MSClient,{setProxy:function(e){this.proxy=e},VideoAllocRaw_async:function(e,t,n){Cr.Utils.log("[RTC] VideoAllocRaw"),this.proxy.callCallback("VideoAllocRaw",[e,t,n])},VideoAllocRawExt_async:function(e,t,n,i,r){Cr.Utils.log("[RTC] VideoAllocRawExt_async"),this.proxy.callCallback("VideoAllocRawExt",[e,t,n,i])},VideoAllocRawExt2_async:function(e,t,n,i,r){Cr.Utils.log("[RTC] VideoAllocRawExt2_async"),this.proxy.callCallback("VideoAllocRawExt2",[e,t,n,i])},AudioAllocRaw_async:function(e,t){Cr.Utils.log("[RTC] AudioAllocRaw"),this.proxy.callCallback("AudioAllocRaw",[e,t])},AudioAllocRawExt_async:function(e,t,n,i){Cr.Utils.log("[RTC] AudioAllocRawExt"),this.proxy.callCallback("AudioAllocRawExt",[e,t,n])},AudioAllocRawExt2_async(...e){__Rtc.CRRTCAudio.ICECallback.AudioAllocRawExt2_async(...e)},ModifyPeerAddr_async:function(e,t,n){Cr.Utils.log("[RTC] ModifyPeerAddr"),this.proxy.callCallback("ModifyPeerAddr",[e,asParam,strParams])},ModifyPeerAddrExt_async:function(e,t,n){e.ice_response(),Cr.Utils.log("[RTC] ModifyPeerAddrExt"),this.proxy.callCallback("ModifyPeerAddrExt",[e,t,n])},NotifyRTMPStreamPublishFinished_async:function(e,t,n,i,r,o,s,a){Cr.Utils.log("[RTC] NotifyRTMPStreamPublishFinished_async"),this.proxy.callCallback("NotifyRTMPStreamPublishFinished",[e,t,n])},EnableSendScreen2Internet_async:function(e){e.ice_response(),Cr.Utils.log("[RTC] EnableSendScreen2Internet"),this.proxy.callCallback("EnableSendScreen2Internet",[e])},DisableSendScreen2Internet_async:function(e){e.ice_response(),Cr.Utils.log("[RTC] DisableSendScreen2Internet"),this.proxy.callCallback("DisableSendScreen2Internet",[e])},EnableSendFilm2Internet_async:function(e){e.ice_response(),Cr.Utils.log("[RTC] EnableSendFilm2Internet"),this.proxy.callCallback("EnableSendFilm2Internet",[e])},DisableSendFilm2Internet_async:function(e){e.ice_response(),Cr.Utils.log("[RTC] DisableSendFilm2Internet"),this.proxy.callCallback("DisableSendFilm2Internet",[e])},EnableSendVideo2Internet_async(e,t){e.ice_response(),__Rtc.CRRTCVideo&&__Rtc.CRRTCVideo.ICECallback.enableSendVideo2Internet(t)},DisableSendVideo2Internet_async:(e,t)=>{e.ice_response(),__Rtc.CRRTCVideo&&__Rtc.CRRTCVideo.ICECallback.disableSendVideo2Internet(t)},Free_async:function(e,t){e.ice_response(),Cr.Utils.log("[RTC] Free"),this.proxy.callCallback("Free",[t])}}),__Rtc.ChatReceptor=Ice.Class(Conference.IMCallback,{setProxy:function(e){this.proxy=e},receiveIMMsg(...e){__Rtc.CRRTCIMMsg.ICECallback.receiveIMMsg(...e)},notifyIMForbidStatus(...e){__Rtc.CRRTCIMMsg.ICECallback.notifyIMForbidStatus(...e)},notifyClearIMMsg(...e){__Rtc.CRRTCIMMsg.ICECallback.notifyClearIMMsg(...e)},notifyDeleteIMMsg(...e){__Rtc.CRRTCIMMsg.ICECallback.notifyDeleteIMMsg(...e)}}),__Rtc.AudioReceptor=Ice.Class(Conference.AudioCallback,{setProxy:function(e){this.proxy=e},updateStatus(...e){__Rtc.CRRTCAudio&&__Rtc.CRRTCAudio.ICECallback.audioUpdateStatus.call(__Rtc.CRRTCAudio,...e)},updateVoiceEnergy(...e){__Rtc.CRRTCAudio&&__Rtc.CRRTCAudio.ICECallback.updateVoiceEnergy.call(__Rtc.CRRTCAudio,...e)},updateSpeaker(...e){__Rtc.CRRTCAudio&&__Rtc.CRRTCAudio.ICECallback.updateSpeaker.call(__Rtc.CRRTCAudio,...e)},closeAll(...e){__Rtc.CRRTCAudio&&__Rtc.CRRTCAudio.ICECallback.closeAll.call(__Rtc.CRRTCAudio,...e)},playBackgroundMusic(...e){__Rtc.CRRTCAudio&&__Rtc.CRRTCAudio.ICECallback.playBackgroundMusic.call(__Rtc.CRRTCAudio,...e)},notifyVoiceHowling(...e){__Rtc.CRRTCAudio&&__Rtc.CRRTCAudio.ICECallback.notifyVoiceHowling.call(__Rtc.CRRTCAudio,...e)},notifyVoiceNoise(...e){__Rtc.CRRTCAudio&&__Rtc.CRRTCAudio.ICECallback.notifyVoiceNoise.call(__Rtc.CRRTCAudio,...e)},getRemoteAudioInfNotify(...e){__Rtc.CRRTCAudio&&__Rtc.CRRTCAudio.ICECallback.getRemoteAudioInfNotify.call(__Rtc.CRRTCAudio,...e)},remoteAudioSetNotify(...e){__Rtc.CRRTCAudio&&__Rtc.CRRTCAudio.ICECallback.remoteAudioSetNotify.call(__Rtc.CRRTCAudio,...e)},notifyLanLessMicOpen(...e){__Rtc.CRRTCAudio&&__Rtc.CRRTCAudio.ICECallback.notifyLanLessMicOpen.call(__Rtc.CRRTCAudio,...e)}}),__Rtc.VideoReceptor=Ice.Class(Conference.VideoCallback,{setProxy:function(e){this.proxy=e},notifyAllowVideoWall:function(e,t){Cr.Utils.log("[RTC] notifyAllowVideoWall"),this.proxy.callCallback("notifyAllowVideoWall",[e,t])},updateStatus(...e){__Rtc.CRRTCVideo&&__Rtc.CRRTCVideo.ICECallback.updateStatus.call(__Rtc.CRRTCVideo,...e)},notifyOpenVideo:function(e){__Rtc.CRRTCVideo&&__Rtc.CRRTCVideo.ICECallback.notifyOpenVideo.call(__Rtc.CRRTCVideo,...args)},startVideoByManager:function(){Cr.Utils.log("[RTC] startVideoByManager"),this.proxy.callCallback("startVideoByManager")},notifyEnableVideo:function(e,t,n){Cr.Utils.log("[RTC] notifyEnableVideo"),this.proxy.callCallback("notifyEnableVideo",[e,t,n])},updateFocusWindow:function(e,t){Cr.Utils.log("[RTC] updateFocusWindow"),this.proxy.callCallback("updateFocusWindow",[e,t])},updateVLayout:function(e,t){Cr.Utils.log("[RTC] updateVLayout"),this.proxy.callCallback("updateVLayout",[e,t])},updateVLayout2:function(e,t){Cr.Utils.log("[RTC] updateVLayout2"),this.proxy.callCallback("updateVLayout2",[e,t])},updateMainVideoShowMode:function(e,t){Cr.Utils.log("[RTC] updateMainVideoShowMode"),this.proxy.callCallback("updateMainVideoShowMode",[e,t])},updateVideoListMode:function(e,t){Cr.Utils.log("[RTC] updateVideoListMode"),this.proxy.callCallback("updateVideoListMode",[e,t])},enableUpload:function(e,t){Cr.Utils.log("[RTC] enableUpload"),this.proxy.callCallback("enableUpload",[e,t])},enableUpload2:function(e,t){Cr.Utils.log("[RTC] enableUpload2"),this.proxy.callCallback("enableUpload2",[e,t])},generateIFrame:function(e){Cr.Utils.log("[RTC] generateIFrame"),this.proxy.callCallback("generateIFrame",[e])},notifyRefuseOpenVideo:function(e){Cr.Utils.log("[RTC] notifyRefuseOpenVideo"),this.proxy.callCallback("notifyRefuseOpenVideo",[e])},getVideoSetting:function(){Cr.Utils.log("[RTC] getVideoSetting"),this.proxy.callCallback("getVideoSetting")},setCamera:function(e,t){Cr.Utils.log("[RTC] setCamera"),this.proxy.callCallback("setCamera",[e,t])},setCameraById:function(){Cr.Utils.log("[RTC] setCameraById"),this.proxy.callCallback("setCameraById")},notifyVideoPolling:function(e,t,n){Cr.Utils.log("[RTC] notifyVideoPolling"),this.proxy.callCallback("notifyVideoPolling",[e,t,n])},notifyPollingVideo:function(e,t){Cr.Utils.log("[RTC] notifyPollingVideo"),this.proxy.callCallback("notifyPollingVideo",[e,t])},notifyPollingVideo2:function(e,t){Cr.Utils.log("[RTC] notifyPollingVideo2")},notifyVideoList:function(e,t){Cr.Utils.log("[RTC] notifyVideoList"),this.proxy.callCallback("notifyVideoList",[e,t])},notifyUpdateAllCameraInfos(...e){__Rtc.CRRTCVideo&&__Rtc.CRRTCVideo.ICECallback.notifyUpdateAllCameraInfos.call(__Rtc.CRRTCVideo,...e)},notifySetOpenedCameraNumber(...e){__Rtc.CRRTCVideo&&__Rtc.CRRTCVideo.ICECallback.notifySetOpenedCameraNumber.call(__Rtc.CRRTCVideo,...e)},notifyStartAdjustDirection:function(e,t){Cr.Utils.log("[RTC] notifyStartAdjustDirection"),this.proxy.callCallback("notifyStartAdjustDirection",[e,t])},notifyStartAdjustZoom:function(e,t){Cr.Utils.log("[RTC] notifyStartAdjustZoom"),this.proxy.callCallback("notifyStartAdjustZoom",[e,t])},notifyStopAdjustDirection:function(e){Cr.Utils.log("[RTC] notifyStopAdjustDirection"),this.proxy.callCallback("notifyStopAdjustDirection",[e])},notifyStopAdjustZoom:function(e){Cr.Utils.log("[RTC] notifyStopAdjustZoom"),this.proxy.callCallback("notifyStopAdjustZoom",[e])},isSupportNewStream:function(e,t,n,i){console.log(e,t,n,i)}}),__Rtc.ScreenShareReceptor=Ice.Class(Conference.ScreenShareClient,{setProxy:function(e){this.proxy=e},notifyStartScreenShare(...e){__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.notifyStartScreenShare.call(__Rtc.CRRTCScreen,...e)},notifyStopScreenShare(...e){__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.notifyStopScreenShare.call(__Rtc.CRRTCScreen,...e)},notifyStartMarked(...e){__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.notifyStartMarked.call(__Rtc.CRRTCScreen,...e)},notifyStopMarked(...e){__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.notifyStopMarked.call(__Rtc.CRRTCScreen,...e)},notifyMakeIFrame(...e){__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.notifyScMakeIFrame.call(__Rtc.CRRTCScreen,...e)},notifyMarkData(...e){__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.notifyMarkData.call(__Rtc.CRRTCScreen,...e)},notifyClearAllMarks(...e){__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.notifyClearAllMarks.call(__Rtc.CRRTCScreen,...e)},notifyMarkDataV4(...e){__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.notifyMarkDataV4.call(__Rtc.CRRTCScreen,...e)},notifyClearAllMarksV4(...e){__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.notifyClearAllMarksV4.call(__Rtc.CRRTCScreen,...e)},notifyRequestMarked:function(e){Cr.Utils.log("[RTC] notifyRequestMarked",e),this.proxy.callCallback("notifyRequestMarked",[e])},notifyCancelMarkedReq:function(e){Cr.Utils.log("[RTC] notifyCancelMarkedReq",e),this.proxy.callCallback("notifyCancelMarkedReq",[e])},notifyEnableOtherMarked:function(e,t){Cr.Utils.log("[RTC] notifyEnableOtherMarked",e,t),this.proxy.callCallback("notifyEnableOtherMarked",[e,t])},notifyCtrlReqState:function(e,t){Cr.Utils.log("[RTC] notifyCtrlReqState",e,t),this.proxy.callCallback("notifyCtrlReqState",[e,t])},notifyRequestCtrlRight:function(e){Cr.Utils.log("[RTC] notifyRequestCtrlRight",e),this.proxy.callCallback("notifyRequestCtrlRight",[e])},notifyCancelCtrlReq:function(e){Cr.Utils.log("[RTC] notifyCancelCtrlReq",e),this.proxy.callCallback("notifyCancelCtrlReq",[e])},notifyRejectCtrlReq:function(e,t,n){Cr.Utils.log("[RTC] notifyRejectCtrlReq",e,t,n),this.proxy.callCallback("notifyRejectCtrlReq",[e,t,n])},notifyGiveCtrlRight:function(e,t){Cr.Utils.log("[RTC] notifyGiveCtrlRight",e,t),this.proxy.callCallback("notifyGiveCtrlRight",[e,t])},notifyReleaseCtrlRight:function(e){Cr.Utils.log("[RTC] notifyReleaseCtrlRight",e),this.proxy.callCallback("notifyReleaseCtrlRight",[e])},notifyCtrlMsg:function(e,t){Cr.Utils.log("[RTC] notifyCtrlMsg",e,t),this.proxy.callCallback("notifyCtrlMsg",[e,t])},notifyTmpSetRemoteCtrlState:function(e,t){Cr.Utils.log("[RTC] notifyTmpSetRemoteCtrlState",e,t),this.proxy.callCallback("notifyTmpSetRemoteCtrlState",[e,t])},notifyIndicator:function(e,t){Cr.Utils.log("[RTC] notifyIndicator",e,t),this.proxy.callCallback("notifyIndicator",[e,t])}}),__Rtc.MediaReceptor=Ice.Class(Conference.MediaCallback,{setProxy:function(e){this.proxy=e},notifyStartPlayMedia(...e){__Rtc.CRRTCMedia&&__Rtc.CRRTCMedia.ICECallback.notifyStartPlayMedia.call(__Rtc.CRRTCMedia,...e)},notifyStopPlayMedia(...e){__Rtc.CRRTCMedia&&__Rtc.CRRTCMedia.ICECallback.notifyStopPlayMedia.call(__Rtc.CRRTCMedia,...e)},notifyPausePlayMedia(...e){__Rtc.CRRTCMedia&&__Rtc.CRRTCMedia.ICECallback.notifyPausePlayMedia.call(__Rtc.CRRTCMedia,...e)},notifyMakeIFrame(...e){__Rtc.CRRTCMedia&&__Rtc.CRRTCMedia.ICECallback.notifyMakeIFrame.call(__Rtc.CRRTCMedia,...e)},notifySubscribeMedia(...e){__Rtc.CRRTCMedia&&__Rtc.CRRTCMedia.ICECallback.notifySubscribeMedia.call(__Rtc.CRRTCMedia,...e)}}),__Rtc.ConferenceReceptor=Ice.Class(Conference.ConferenceCallback,{setProxy:function(e){this.proxy=e},entered:function(e){Cr.parseMemberInfo(e),Cr.Utils.log("[RTC] New member entered..."),this.proxy.callCallback("entered",[e])},left:function(e,t,n,i){Cr.Utils.log("[RTC] User left meeting...  reason: "+i),this.proxy.callCallback("left",[t,i])},actorChanged:function(e,t,n){Cr.Utils.log("[RTC] actorChanged")},nicknameChanged(...e){__Rtc.CRRTCConf&&__Rtc.CRRTCConf.ICECallback.nicknameChanged.call(__Rtc.CRRTCConf,...e)},optionChanged:function(e){Cr.Utils.log("[RTC] optionChanged")},agendaUpdated:function(e){Cr.Utils.log("[RTC] agendaUpdated")},autoEndCancelled:function(){Cr.Utils.log("[RTC] autoEndCancelled")},conferenceBegan:function(){Cr.Utils.log("[RTC] conferenceBegan")},conferenceEnded:function(e){Cr.Utils.log("[RTC] conferenceEnded"),this.proxy.callCallback("conferenceEnded",e)},confirmAutoEnd:function(e){Cr.Utils.log("[RTC] confirmAutoEnd")},inviteStateChanged:function(e,t){Cr.Utils.log("[RTC] inviteStateChanged:")},memberCount:function(e){Cr.Utils.log("[RTC] memberCount")},notifyApplyDemo:function(e){Cr.Utils.log("[RTC] notifyApplyDemo")},notifyApplyRejected:function(e,t){Cr.Utils.log("[RTC] notifyApplyRejected")},notifyAssistantChanged:function(e,t,n){Cr.Utils.log("[RTC] notifyAssistantChanged")},notifyNetDetectResults:function(e,t,n){Cr.Utils.log("[RTC] notifyNetDetectResults")},notifyReportStatus:function(e,t){Cr.Utils.log("[RTC] notifyReportStatus")},exeCmd:function(e){Cr.Utils.log("[RTC] exeCmd")},notifyStart1v1SubMeeting:function(e){Cr.Utils.log("[RTC] notifyStart1v1SubMeeting")},notifyStop1v1SubMeeting:function(e){Cr.Utils.log("[RTC] notifyStop1v1SubMeeting")},notifyStart1v1SubMeetingRslt:function(e,t){Cr.Utils.log("[RTC] notifyStart1v1SubMeetingRslt")},setWDT1v1SubMeetingMode:function(e,t){Cr.Utils.log("[RTC] setWDT1v1SubMeetingMode")},notifyIVRStatus:function(e,t){Cr.Utils.log("[RTC] notifyIVRStatus")},notifyStartSvrBroadcast:function(e,t){Cr.Utils.log("[RTC] notifyStartSvrBroadcast")},notifyLuckyDrawCfg:function(e){Cr.Utils.log("[RTC] notifyLuckyDrawCfg")},notifyLuckyDrawResult:function(e){Cr.Utils.log("[RTC] notifyLuckyDrawResult")},roomKnocked:function(e,t){Cr.Utils.log("[RTC] roomKnocked")},roomStateChanged:function(e){Cr.Utils.log("[RTC] roomStateChanged")},serverNotify:function(e){Cr.Utils.log("[RTC] serverNotify, id:"+e)},serverNotifyMsg:function(e){Cr.Utils.log("[RTC] serverNotifyMsg, msg:"+e)},subjectUpdated:function(e){Cr.Utils.log("[RTC] subjectUpdated")},updateAppStatus:function(e,t){Cr.Utils.log("[RTC] updateAppStatus")},notifyStartBroadCast:function(){Cr.Utils.log("[RTC] notifyStartBroadCast"),this.proxy.callCallback("notifyStartBroadCast")},notifyStopBroadCast:function(){Cr.Utils.log("[RTC] notifyStopBroadCast"),this.proxy.callCallback("notifyStopBroadCast")},notifyWebViewerNum:function(e){Cr.Utils.log("[RTC] notifyWebViewerNum")},notifyBroadCastStartPush:function(){Cr.Utils.log("[RTC] notifyBroadCastStartPush"),this.proxy.callCallback("notifyBroadCastStartPush")},notifyBroadCastStopPush:function(){Cr.Utils.log("[RTC] CR__NotifyBroadCastStopPush"),this.proxy.callCallback("notifyBroadCastStopPush")},rightChanged:function(e){var t=Array.from(e.addedRights),n=Array.from(e.reducedRights);__Rtc.CR__RightChanged.call([e.termId,t,n]),Cr.Utils.log("[RTC] rightChanged"),this.proxy.callCallback("rightChanged",[e.termId,t,n])},notifyBroadCastPlayback:function(e){this.proxy.callCallback("notifyPlayBackStartPush",[e])},notifypayback:function(){this.proxy.callCallback("notifypayback")},notifyBroadCastPlaybackStop:function(e){this.proxy.callCallback("notifyBroadCastPlaybackStop",[e])},notifySwtichLiveAppElements:function(e,t){this.proxy.callCallback("notifySwtichLiveAppElements",[e,t])},notifyThumbUp:function(e,t,n){this.proxy.callCallback("notifyThumbUp",[e,t,n])},notifyLuckyDrawCfg:function(e){Cr.Utils.log("[RTC] notifyLuckyDrawCfg"),this.proxy.callCallback("notifyLuckyDrawCfg",[e.cdTime,e.isAutoDraw,e.memberType,e.prizes])},notifyLDMembersStatus:function(e){this.proxy.callCallback("notifyLDMembersStatus",e)},notifyLuckyDrawResult:function(e){Cr.Utils.log("[RTC] notifyLuckyDrawResult"),this.proxy.callCallback("notifyLuckyDrawResult",[e.prize,e.annouceTime,e.res])},notifySvrRecordStateChanged(...e){__Rtc.CRRTCRecord.ICECallback.notifySvrRecordStateChanged(...e)},notifySvrRecordCfgChanged(...e){__Rtc.CRRTCRecord.ICECallback.notifySvrRecordCfgChanged(...e)},notifySvrRecordFileState(...e){__Rtc.CRRTCRecord.ICECallback.notifySvrRecordFileState(...e)},notifySvrBroadcastCfgChanged:function(e,t){Cr.Utils.log("[RTC] notifySvrBroadcastCfgChanged"),this.proxy.callCallback("notifySvrBroadcastCfgChanged",[e,t])},notifyTerminalMsg(...e){__Rtc.CRRTCTermMsg.ICECallback.notifyTerminalMsg(...e)},notifyAppUILocked:function(e){Cr.Utils.log("[RTC] notifyAppUILocked")},notifyBeginVote:function(e,t,n){Cr.Utils.log("[RTC] notifyBeginVote")},notifyEndVote:function(e){Cr.Utils.log("[RTC] notifyEndVote")},notifyPublishVoteResult:function(e,t){Cr.Utils.log("[RTC] notifyPublishVoteResult")},notifyCommitVote:function(e,t){Cr.Utils.log("[RTC] notifyCommitVote")},notifyMeetingAttrsChanged(...e){__Rtc.CRRTCAttr.ICECallback.notifyMeetingAttrsChanged(...e)},notifyUserAttrsChanged(...e){__Rtc.CRRTCAttr.ICECallback.notifyUserAttrsChanged(...e)},notifyShareStateChanged(...e){console.crlog(`[Conf] notifyShareStateChanged, ${e[0]}`)},notifyClodudRecordStateChanged(...e){__Rtc.CRRTCCloudRecord.ICECallback.notifyCloudRecordStateChanged(...e)},notifyClodudRecordCfgChanged(...e){__Rtc.CRRTCCloudRecord.ICECallback.notifyCloudRecordCfgChanged(...e)},notifyClodudRecordFileState(...e){__Rtc.CRRTCCloudRecord.ICECallback.notifyCloudRecordFileState(...e)}}),__Rtc.AnsQueReceptor=Ice.Class(Conference.AnsQueCallback,{setProxy:function(e){this.proxy=e},askQuesNotify:function(e,t){Cr.Utils.log("[RTC] askQuesNotify(id:%s)",e),this.proxy.callCallback("askQuesNotify",[e,t])},lockQuesNotify:function(e,t){Cr.Utils.log("[RTC] lockQuesNotify(id:%s)",e),this.proxy.callCallback("lockQuesNotify",[e,t])},replyQuesNotify:function(e,t){Cr.Utils.log("[RTC] replyQuesNotify(id:%s)",e),this.proxy.callCallback("replyQuesNotify",[e,t])},modifyQuesNotify:function(e,t){Cr.Utils.log("[RTC] modifyQuesNotify(id:%s)",e),this.proxy.callCallback("modifyQuesNotify",[e,t])},delQuesNotify:function(e,t){Cr.Utils.log("[RTC] delQuesNotify(id:%s)",e),this.proxy.callCallback("delQuesNotify",[e,t])},delAllQuesNotify:function(e){Cr.Utils.log("[RTC] delAllQuesNotify(termId:%s)",e),this.proxy.callCallback("delAllQuesNotify",[e])},publicQuesNotify:function(e,t,n){Cr.Utils.log("[RTC] publicQuesNotify(id:%s)",e),this.proxy.callCallback("publicQuesNotify",[e,t,n])},quesTypeChangeNotify:function(e,t){Cr.Utils.log("[RTC] quesTypeChangeNotify(id:%s)",e),this.proxy.callCallback("quesTypeChangeNotify",[e,t])},modifyQuesTypeNotify:function(e,t){Cr.Utils.log("[RTC] modifyQuesTypeNotify(termId:%s)",e),this.proxy.callCallback("modifyQuesTypeNotify",[e,t])},setBroadCastQuesNotify:function(e){Cr.Utils.log("[RTC] setBroadCastQuesNotify(bEnable:%s)",e),this.proxy.callCallback("setBroadCastQuesNotify",[e])}}),__Rtc.WhiteBoardReceptor=Ice.Class(Conference.WhiteBoardCallback,{setProxy:function(e){this.proxy=e},notifySetCurrentPage(...e){__Rtc.CRRTCBoard&&__Rtc.CRRTCBoard.ICECallback.notifySetCurrentPage.call(__Rtc.CRRTCBoard,...e)},notifyCreate(...e){__Rtc.CRRTCBoard&&__Rtc.CRRTCBoard.ICECallback.notifyCreate.call(__Rtc.CRRTCBoard,...e)},notifyClose(...e){__Rtc.CRRTCBoard&&__Rtc.CRRTCBoard.ICECallback.notifyClose.call(__Rtc.CRRTCBoard,...e)},notifyAddElement(...e){__Rtc.CRRTCBoard&&__Rtc.CRRTCBoard.ICECallback.notifyAddElement.call(__Rtc.CRRTCBoard,...e)},notifyDelElement(...e){__Rtc.CRRTCBoard&&__Rtc.CRRTCBoard.ICECallback.notifyDelElement.call(__Rtc.CRRTCBoard,...e)},notifySetContainerSize(...e){__Rtc.CRRTCBoard&&__Rtc.CRRTCBoard.ICECallback.notifySetContainerSize.call(__Rtc.CRRTCBoard,...e)},notifyImportPage(...e){__Rtc.CRRTCBoard&&__Rtc.CRRTCBoard.ICECallback.notifyImportPage.call(__Rtc.CRRTCBoard,...e)},notifyChangeName(...e){__Rtc.CRRTCBoard&&__Rtc.CRRTCBoard.ICECallback.notifyChangeName.call(__Rtc.CRRTCBoard,...e)},notifyChangeScale(...e){__Rtc.CRRTCBoard&&__Rtc.CRRTCBoard.ICECallback.notifyChangeScale.call(__Rtc.CRRTCBoard,...e)},notifyChangeRotate(...e){__Rtc.CRRTCBoard&&__Rtc.CRRTCBoard.ICECallback.notifyChangeRotate.call(__Rtc.CRRTCBoard,...e)},notifyShowThumPage(...e){__Rtc.CRRTCBoard&&__Rtc.CRRTCBoard.ICECallback.notifyShowThumPage.call(__Rtc.CRRTCBoard,...e)},notifyAddElementEx(...e){__Rtc.CRRTCBoard&&__Rtc.CRRTCBoard.ICECallback.notifyAddElementEx.call(__Rtc.CRRTCBoard,...e)},notifyMoveElement(...e){__Rtc.CRRTCBoard&&__Rtc.CRRTCBoard.ICECallback.notifyMoveElement.call(__Rtc.CRRTCBoard,...e)},notifyModifyElement(...e){__Rtc.CRRTCBoard&&__Rtc.CRRTCBoard.ICECallback.notifyModifyElement.call(__Rtc.CRRTCBoard,...e)},notifySetElementZPos(...e){__Rtc.CRRTCBoard&&__Rtc.CRRTCBoard.ICECallback.notifySetElementZPos.call(__Rtc.CRRTCBoard,...e)},notifySetIndicator(...e){__Rtc.CRRTCBoard&&__Rtc.CRRTCBoard.ICECallback.notifySetIndicator.call(__Rtc.CRRTCBoard,...e)},notifySetHotspot(...e){__Rtc.CRRTCBoard&&__Rtc.CRRTCBoard.ICECallback.notifySetHotspot.call(__Rtc.CRRTCBoard,...e)},notifySetMarkTerms(...e){__Rtc.CRRTCBoard&&__Rtc.CRRTCBoard.ICECallback.notifySetMarkTerms.call(__Rtc.CRRTCBoard,...e)}}),__Rtc.SyncCtrlReceptor=Ice.Class(Conference.SyncCtrlCallback,{setProxy:function(e){this.proxy=e},notifySetCurrentTab(...e){__Rtc.CRRTCSync&&__Rtc.CRRTCSync.ICECallback.notifySetCurrentTab.call(__Rtc.CRRTCSync,...e)},notifySetFullScreen(...e){__Rtc.CRRTCSync&&__Rtc.CRRTCSync.ICECallback.notifySetFullScreen.call(__Rtc.CRRTCSync,...e)},notifySetPrivTabInfo(...e){__Rtc.CRRTCSync&&__Rtc.CRRTCSync.ICECallback.notifySetPrivTabInfo.call(__Rtc.CRRTCSync,...e)},notifySetSyncMode(...e){__Rtc.CRRTCSync&&__Rtc.CRRTCSync.ICECallback.notifySetSyncMode.call(__Rtc.CRRTCSync,...e)}})},1602:()=>{__Rtc.CR__Init=function(e,t){try{Cr._proxy=new Cr.LHProxy(t),Cr._proxy.init().then((function(e,t){Cr._proxy.registeredCallback("conferenceEnded",(function(e){__Rtc.CR__MeetEnded.call(e)})),Cr._proxy.registeredCallback("entered",(function(e){__Rtc.CR__UserEnter.call(e)})),Cr._proxy.registeredCallback("left",(function(e){__Rtc.CR__UserLeftMeet.call(e)})),Cr._proxy.registeredCallback("notifyStartBroadCast",(function(){__Rtc.CR__NotifyStartBroadCast.call()})),Cr._proxy.registeredCallback("notifyStopBroadCast",(function(){__Rtc.CR__NotifyStopBroadCast.call()})),Cr._proxy.registeredCallback("notifyBroadCastStartPush",(function(){__Rtc.CR__NotifyBroadCastStartPush.call()})),Cr._proxy.registeredCallback("notifyBroadCastStopPush",(function(){__Rtc.CR__NotifyBroadCastStopPush.call()})),Cr._proxy.registeredCallback("rightChanged",(function(e){__Rtc.CR__RightChanged.call(e)})),Cr._proxy.registeredCallback("askQuesNotify",(function(e){id=e[0],askQue=e[1],__Rtc.CR__AskQuesNotify.call([id,new Cr.Quesask(askQue)])})),Cr._proxy.registeredCallback("lockQuesNotify",(function(e){id=e[0],queDeal=e[1],__Rtc.CR__LockQuesNotify.call([id,new Cr.QuesDeal(queDeal)])})),Cr._proxy.registeredCallback("replyQuesNotify",(function(e){id=e[0],queDeal=e[1],__Rtc.CR__ReplyQuesNotify.call([id,new Cr.QuesDeal(queDeal)])})),Cr._proxy.registeredCallback("modifyQuesNotify",(function(e){id=e[0],queDeal=e[1],__Rtc.CR__ModifyQuesNotify.call([id,new Cr.QuesDeal(queDeal)])})),Cr._proxy.registeredCallback("delQuesNotify",(function(e){id=e[0],termId=e[1],__Rtc.CR__DelQuesNotify.call([id,termId])})),Cr._proxy.registeredCallback("delAllQuesNotify",(function(e){termId=e[0],__Rtc.CR__DelAllQuesNotify.call([termId])})),Cr._proxy.registeredCallback("publicQuesNotify",(function(e){id=e[0],bPublic=e[1],termId=e[2],__Rtc.CR__PublicQuesNotify.call([id,bPublic,termId])})),Cr._proxy.registeredCallback("quesTypeChangeNotify",(function(e){id=e[0],typeID=e[1],__Rtc.CR__QuesTypeChangeNotify.call([termId])})),Cr._proxy.registeredCallback("modifyQuesTypeNotify",(function(e){termId=e[0],quesType=e[1],__Rtc.CR__ModifyQuesTypeNotify.call([termId])})),Cr._proxy.registeredCallback("setBroadCastQuesNotify",(function(e){bEnable=e[0],__Rtc.CR__SetBroadCastQuesNotify.call([bEnable])})),Cr._proxy.registeredCallback("notifyPlayBackStartPush",(function(e){url=e[0],__Rtc.CR__NotifyPlayBackStartPush.call([url])})),Cr._proxy.registeredCallback("notifypayback",(function(e){__Rtc.CR__Notifypayback.call()})),Cr._proxy.registeredCallback("notifyBroadCastPlaybackStop",(function(e){url=e[0],__Rtc.CR__NotifyBroadCastPlaybackStop.call([url])})),Cr._proxy.registeredCallback("notifySwtichLiveAppElements",(function(e){ele=e[0],status=e[1],__Rtc.CR__NotifySwtichLiveAppElements.call([ele,status])})),Cr._proxy.registeredCallback("notifyThumbUp",(function(e){num=e[0],total=e[1],info=e[2],__Rtc.CR__NotifyThumbUp.call([num,total,info])})),Cr._proxy.registeredCallback("notifyLuckyDrawCfg",(function(e){__Rtc.CR__NotifyLuckyDrawCfg.call(e)})),Cr._proxy.registeredCallback("notifyLDMembersStatus",(function(e){__Rtc.CR__NotifyLDMembersStatus.call(e)})),Cr._proxy.registeredCallback("notifyLuckyDrawResult",(function(e){__Rtc.CR__NotifyLuckyDrawResult.call(e)})),Cr._proxy.registeredCallback("ModifyPeerAddr",(function(e){__Rtc.CR__ModifyPeerAddr.call(e)})),Cr._proxy.registeredCallback("ModifyPeerAddrExt",(function(e){__Rtc.CR__ModifyPeerAddrExt.call(e)})),Cr._proxy.registeredCallback("AudioAllocRaw",(function(e){__Rtc.CR__AudioAllocRaw.call(e)})),Cr._proxy.registeredCallback("AudioAllocRawExt",(function(e){__Rtc.CR__AudioAllocRawExt.call(e)})),Cr._proxy.registeredCallback("VideoAllocRaw",(function(e){__Rtc.CR__VideoAllocRaw.call(e)})),Cr._proxy.registeredCallback("VideoAllocRawExt",(function(e){__Rtc.CR__VideoAllocRawExt.call(e)})),Cr._proxy.registeredCallback("VideoAllocRawExt2",(function(e){__Rtc.CR__VideoAllocRawExt2.call(e)})),Cr._proxy.registeredCallback("NotifyRTMPStreamPublishFinished",(function(e){__Rtc.CR__NotifyRTMPStreamPublishFinished.call(e)})),Cr._proxy.registeredCallback("EnableSendScreen2Internet",(function(e){__Rtc.CR__EnableSendScreen2Internet.call(e)})),Cr._proxy.registeredCallback("DisableSendScreen2Internet",(function(e){__Rtc.CR__DisableSendScreen2Internet.call(e)})),Cr._proxy.registeredCallback("EnableSendFilm2Internet",(function(e){__Rtc.CR__EnableSendFilm2Internet.call(e)})),Cr._proxy.registeredCallback("DisableSendFilm2Internet",(function(e){__Rtc.CR__DisableSendFilm2Internet.call(e)})),Cr._proxy.registeredCallback("Free",(function(e){__Rtc.CR__Free.call(e)})),Cr._proxy.registeredCallback("notifyAllowVideoWall",(function(e){__Rtc.CR__NotifyAllowVideoWall.call(e)})),Cr._proxy.registeredCallback("startVideoByManager",(function(e){__Rtc.CR__StartVideoByManager.call(e)})),Cr._proxy.registeredCallback("notifyEnableVideo",(function(e){__Rtc.CR__NotifyEnableVideo.call(e)})),Cr._proxy.registeredCallback("updateFocusWindow",(function(e){__Rtc.CR__UpdateFocusWindow.call(e)})),Cr._proxy.registeredCallback("updateVLayout",(function(e){__Rtc.CR__UpdateVLayout.call(e)})),Cr._proxy.registeredCallback("updateVLayout2",(function(e){__Rtc.CR__UpdateVLayout2.call(e)})),Cr._proxy.registeredCallback("updateMainVideoShowMode",(function(e){__Rtc.CR__UpdateMainVideoShowMode.call(e)})),Cr._proxy.registeredCallback("updateVideoListMode",(function(e){__Rtc.CR__UpdateVideoListMode.call(e)})),Cr._proxy.registeredCallback("enableUpload",(function(e){__Rtc.CR__EnableUpload.call(e)})),Cr._proxy.registeredCallback("enableUpload2",(function(e){__Rtc.CR__EnableUpload2.call(e)})),Cr._proxy.registeredCallback("generateIFrame",(function(e){__Rtc.CR__GenerateIFrame.call(e)})),Cr._proxy.registeredCallback("notifyRefuseOpenVideo",(function(e){__Rtc.CR__NotifyRefuseOpenVideo.call(e)})),Cr._proxy.registeredCallback("getVideoSetting",(function(e){__Rtc.CR__GetVideoSetting.call(e)})),Cr._proxy.registeredCallback("setCamera",(function(e){__Rtc.CR__SetCamera.call(e)})),Cr._proxy.registeredCallback("setCameraById",(function(e){__Rtc.CR__SetCameraById.call(e)})),Cr._proxy.registeredCallback("notifyVideoPolling",(function(e){__Rtc.CR__NotifyVideoPolling.call(e)})),Cr._proxy.registeredCallback("notifyPollingVideo",(function(e){__Rtc.CR__NotifyPollingVideo.call(e)})),Cr._proxy.registeredCallback("notifyVideoList",(function(e){__Rtc.CR__NotifyVideoList.call(e)})),Cr._proxy.registeredCallback("notifyStartAdjustDirection",(function(e){__Rtc.CR__NotifyStartAdjustDirection.call(e)})),Cr._proxy.registeredCallback("notifyStartAdjustZoom",(function(e){__Rtc.CR__NotifyStartAdjustZoom.call(e)})),Cr._proxy.registeredCallback("notifyStopAdjustDirection",(function(e){__Rtc.CR__NotifyStopAdjustDirection.call(e)})),Cr._proxy.registeredCallback("notifyStopAdjustZoom",(function(e){__Rtc.CR__NotifyStopAdjustZoom.call(e)})),Cr._proxy.registeredCallback("notifyCtrlReqState",(function(e){var t=e[0],n=e[1];__Rtc.CR__NotifyCtrlReqState.call(t,n)})),Cr._proxy.registeredCallback("notifyRequestCtrlRight",(function(e){})),Cr._proxy.registeredCallback("notifyCancelCtrlReq",(function(e){})),Cr._proxy.registeredCallback("notifyRejectCtrlReq",(function(e){})),Cr._proxy.registeredCallback("notifyGiveCtrlRight",(function(e){})),Cr._proxy.registeredCallback("notifyReleaseCtrlRight",(function(e){})),Cr._proxy.registeredCallback("notifyCtrlMsg",(function(e){})),Cr._proxy.registeredCallback("notifyTmpSetRemoteCtrlState",(function(e){})),Cr._proxy.registeredCallback("notifyRequestMarked",(function(e){})),Cr._proxy.registeredCallback("notifyCancelMarkedReq",(function(e){})),Cr._proxy.registeredCallback("notifyEnableOtherMarked",(function(e){})),Cr._proxy.registeredCallback("notifyIndicator",(function(e){})),window.__Rtc.CR_InitRslt.call([e,t])}))}catch(e){Cr.Utils.log(e),window.__Rtc.CR_InitRslt.call([3,"sdk内部错误"])}},__Rtc.CR__UnInit=function(){try{Cr.communicator&&Cr.communicator.shutdown(),Cr.communicator=null,Cr._connection&&Cr._connection.destroy(0),Cr._connection=null,Cr._adapter&&Cr._adapter.destroy(),Cr._adapter=null,Cr._routerPrx&&Cr._routerPrx.destroySession(),Cr._routerPrx=null}catch(e){return 3}},__Rtc.CR__Login=function(e,t,n,i,r){Cr._proxy._loinging||(console.crlog(`[MEET] Login：${JSON.stringify({crmt:e,termId:t,myDetail:n,client_pcid:i,openId:r})}`),Cr._proxy.login(e,t,n,i,r).then((function(e,t,n){console.crlog(`[MEET] loginRslt: ${e}`),0==e&&"flash"==Cr._proxy._type?__Rtc.CR__LoginRslt.call([e,t,new Cr.MeetInfo(n)]):__Rtc.CR__LoginRslt.call([e,t,n])})))},__Rtc.CR__RefreshSession=function(e){Cr._proxy&&Cr._proxy.refreshSession().then((function(t,n){__Rtc.CR__RefreshSessionRslt.call([t,n,e])}))},__Rtc.CR__KeepAlive=function(e,t){void 0===e&&(e=0),Cr._proxy&&Cr._proxy.keepAlive(e).then((function(e,n){__Rtc.CR__KeepAliveRslt.call([e,n,t])}))},__Rtc.CR__Exit=function(e){void 0===e&&(e=""),Cr._proxy&&Cr._proxy.exit(e).then((function(e,t){__Rtc.CR__ExitRslt.call([e,t])}))},__Rtc.CR__GetActiveMembers=function(){Cr._proxy.getActiveMembers().then((function(e,t,n){0==e?__Rtc.CR__GetActiveMembersRslt.call([e,t,n]):__Rtc.CR__GetActiveMembersRslt.call([e,t])}))},__Rtc.CR__EndConference=function(){Cr._proxy.endConference().then((function(e,t){__Rtc.CR__EndConferenceRslt.call([e,t])}))},__Rtc.CR__SendIMMsg=function(e,t,n,i,r,o,s){Cr._proxy.SendIMMsg(e,t,n,i,r).then(((...e)=>{__Rtc.CRRTCIMMsg.ICECallback.sendIMMsgRslt(...e,s)}))},__Rtc.CR__GetIMMsgCount=function(){Cr._proxy.getIMMsgCount().then((function(e,t,n){0==e?__Rtc.CR__GetIMMsgCountRslt.call([e,t,n]):__Rtc.CR__GetIMMsgCountRslt.call([e,t])}))},__Rtc.CR__GetLastMsg=function(e){Cr._proxy.getLastMsg(e).then((function(e,t,n){0==e?__Rtc.CR__GetLastMsgRslt.call([e,t,n]):__Rtc.CR__GetLastMsgRslt.call([e,t])}))},__Rtc.CR__GetLastNMsg=function(e,t){Cr._proxy.getLastNMsg(e,t).then((function(e,t,n){0==e?__Rtc.CR__GetLastNMsgRslt.call([e,t,n]):__Rtc.CR__GetLastNMsgRslt.call([e,t])}))},__Rtc.CR__GetBroadCastUrl=function(){Cr._proxy.getBroadCastUrl().then((function(e,t,n){0==e?__Rtc.CR__GetBroadCastUrlRslt.call([e,t,n]):__Rtc.CR__GetBroadCastUrlRslt.call([e,t])}))},__Rtc.CR__AskQues=function(e,t,n,i,r,o){Cr._proxy.askQues(e,t,n,i,r,o).then((function(e,t,n){0==e?__Rtc.CR__AskQuesRslt.call([e,t,n]):__Rtc.CR__AskQuesRslt.call([e,t])}))},__Rtc.CR__GetQuesList=function(){Cr._proxy.getQuesList().then((function(e,t,n){0==e?__Rtc.CR__GetQuesListRslt.call([e,t,n]):__Rtc.CR__GetQuesListRslt.call([e,t])}))},__Rtc.CR__GetLuckyDrawCfg=function(){Cr._proxy.getLuckyDrawCfg().then((function(e,t,n){0==e?__Rtc.CR__GetLuckyDrawCfgRslt.call([e,t,n]):__Rtc.CR__GetLuckyDrawCfgRslt.call([e,t])}))},__Rtc.CR__JoinLuckyDrawMembers=function(e,t){Cr._proxy.joinLuckyDrawMembers(e,t).then((function(e,t){__Rtc.CR__JoinLuckyDrawMembersRslt.call([e,t])}))},__Rtc.CR__TerminalMsg=function(e,t,n,i,r){Cr._proxy.terminalMsg(e,t,n,i).then(((...e)=>{__Rtc.CRRTCTermMsg.ICECallback.terminalMsgRslt(...e,r)}))},__Rtc.CR__AllowVideoWall=function(e){Cr._proxy.allowVideoWall(e).then((function(e,t){__Rtc.CR__AllowVideoWallRslt.call([e,t])}))},__Rtc.CR__EnableVideo=function(e){Cr._proxy.enableVideo(e).then((function(e,t){__Rtc.CR__EnableVideoRslt.call([e,t])}))},__Rtc.CR__SetFocusWindow=function(e,t){Cr._proxy.setFocusWindow(e,t).then((function(e,t){__Rtc.CR__SetFocusWindowRslt.call([e,t])}))},__Rtc.CR__SubscribeFocusWindow=function(e){Cr._proxy.subscribeFocusWindow(e).then((function(e,t){__Rtc.CR__SubscribeFocusWindowRslt.call([e,t])}))},__Rtc.CR__SubscribeFocusWindow2=function(e){Cr._proxy.subscribeFocusWindow2(e).then((function(e,t){__Rtc.CR__SubscribeFocusWindow2Rslt.call([e,t])}))},__Rtc.CR__SetVLayout=function(e){Cr._proxy.setVLayout(e).then((function(e,t){__Rtc.CR__SetVLayoutRslt.call([e,t])}))},__Rtc.CR__SetMainVideoShowMode=function(e){Cr._proxy.setMainVideoShowMode(e).then((function(e,t){__Rtc.CR__SetMainVideoShowModeRslt.call([e,t])}))},__Rtc.CR__SetVideoListMode=function(e){Cr._proxy.setVideoListMode(e).then((function(e,t){__Rtc.CR__SetVideoListModeRslt.call([e,t])}))},__Rtc.CR__RefuseOpenVideo=function(e){Cr._proxy.refuseOpenVideo(e).then((function(e,t){__Rtc.CR__RefuseOpenVideoRslt.call([e,t])}))},__Rtc.CR__GetVideoSetting=function(e){Cr._proxy.getVideoSetting(e).then((function(e,t){__Rtc.CR__GetVideoSettingRslt.call([e,t])}))},__Rtc.CR__SetCamera=function(e,t){Cr._proxy.setCamera(e,t).then((function(e,t){__Rtc.CR__SetCameraRslt.call([e,t])}))},__Rtc.CR__SetCameraById=function(e){Cr._proxy.setCameraById(e).then((function(e,t){__Rtc.CR__SetCameraByIdRslt.call([e,t])}))},__Rtc.CR__SetVideoPolling=function(e,t){Cr._proxy.setVideoPolling(e,t).then((function(e,t){__Rtc.CR__SetVideoPollingRslt.call([e,t])}))},__Rtc.CR__UpdatePollingVideo=function(e){Cr._proxy.updatePollingVideo(e).then((function(e,t){__Rtc.CR__UpdatePollingVideoRslt.call([e,t])}))},__Rtc.CR__UpdateVideoList=function(e){Cr._proxy.updateVideoList(e).then((function(e,t){__Rtc.CR__UpdateVideoListRslt.call([e,t])}))},__Rtc.CR__GetVideoPollingState=function(e,t){Cr._proxy.getVideoPollingState(e,t).then((function(e,t){__Rtc.CR__GetVideoPollingStateRslt.call([e,t])}))},__Rtc.CR__StartAdjustDirection=function(e,t){Cr._proxy.startAdjustDirection(e,t).then((function(e,t){__Rtc.CR__StartAdjustDirectionRslt.call([e,t])}))},__Rtc.CR__StartAdjustZoom=function(e,t){Cr._proxy.startAdjustZoom(e,t).then((function(e,t){__Rtc.CR__StartAdjustZoomRslt.call([e,t])}))},__Rtc.CR__StopAdjustDirection=function(e){Cr._proxy.stopAdjustDirection(e).then((function(e,t){__Rtc.CR__StopAdjustDirectionRslt.call([e,t])}))},__Rtc.CR__StopAdjustZoom=function(e){Cr._proxy.stopAdjustZoom(e).then((function(e,t){__Rtc.CR__StopAdjustZoomRslt.call([e,t])}))},__Rtc.CR__VideoResolutionReport=function(e,t,n){Cr._proxy.VideoResolutionReport(e,t,n).then((function(e,t){__Rtc.CR__VideoResolutionReportRslt.call([e,t])}))},__Rtc.CR__SetAudioDeviceStatus=function(e){Cr._proxy.setAudioDeviceStatus(e).then(((...e)=>{__Rtc.CRRTCAudio.ICECallback.setAudioDeviceStatusRslt.call(__Rtc.CRRTCAudio,...e)}))},__Rtc.CR__AskForMic=function(){Cr._proxy.askForMic().then((function(e,t){__Rtc.CR__AskForMicRslt.call([e,t])}))},__Rtc.CR__CloseMicEx=function(e){Cr._proxy.closeMicEx(e).then(((...e)=>{__Rtc.CRRTCAudio.ICECallback.closeMicExRslt.call(__Rtc.CRRTCAudio,...e)}))},__Rtc.CR__CloseAll=function(){Cr._proxy.closeAll().then((function(...e){__Rtc.CRRTCAudio.ICECallback.closeAllRslt.call(__Rtc.CRRTCAudio,...e)}))},__Rtc.CR__SetVoiceEnergy=function(e){Cr._proxy.setVoiceEnergy(e).then((function(e,t){__Rtc.CR__SetVoiceEnergyRslt.call([e,t])}))},__Rtc.CR__PstnSwitchMicStatus=function(){Cr._proxy.pstnSwitchMicStatus().then((function(e,t){__Rtc.CR__PstnSwitchMicStatusRslt.call([e,t])}))},__Rtc.CR__StartRecord=function(){Cr._proxy.startRecord().then((function(e,t){__Rtc.CR__StartRecordRslt.call([e,t])}))},__Rtc.CR__IsRecording=function(){Cr._proxy.isRecording().then((function(e,t){__Rtc.CR__IsRecordingRslt.call([e,t])}))},__Rtc.CR__StopRecord=function(){Cr._proxy.isRecording().then((function(e,t){__Rtc.CR__StopRecordRslt.call([e,t])}))},__Rtc.CR__PlayApplause=function(){Cr._proxy.playApplause().then((function(e,t){__Rtc.CR__PlayApplauseRslt.call([e,t])}))},__Rtc.CR__GetMusicList=function(){Cr._proxy.getMusicList().then((function(e,t){__Rtc.CR__GetMusicListRslt.call([e,t])}))},__Rtc.CR__GetPlayBGMusic=function(){Cr._proxy.getPlayBGMusic().then((function(e,t){__Rtc.CR__GetPlayBGMusicRslt.call([e,t])}))},__Rtc.CR__StartBGMusic=function(e,t){Cr._proxy.startBGMusic(e,t).then((function(e,t){__Rtc.CR__StartBGMusicRslt.call([e,t])}))},__Rtc.CR__StopPlayBGMusic=function(){Cr._proxy.stopPlayBGMusic().then((function(e,t){__Rtc.CR__StopPlayBGMusicRslt.call([e,t])}))},__Rtc.CR__SetPlayBGMusicVolumn=function(e){Cr._proxy.setPlayBGMusicVolumn(e).then((function(e,t){__Rtc.CR__SetPlayBGMusicVolumnRslt.call([e,t])}))},__Rtc.CR__GetPlayBGMusicVolumn=function(){Cr._proxy.getPlayBGMusicVolumn().then((function(e,t){__Rtc.CR__GetPlayBGMusicVolumnRslt.call([e,t])}))},__Rtc.CR__VoiceHowling=function(e){Cr._proxy.voiceHowling(e).then((function(e,t){__Rtc.CR__VoiceHowlingRslt.call([e,t])}))},__Rtc.CR__VoiceNoise=function(e){Cr._proxy.voiceNoise(e).then((function(e,t){__Rtc.CR__VoiceNoiseRslt.call([e,t])}))},__Rtc.CR__RemoteAudioSet=function(e,t){Cr._proxy.remoteAudioSet(e,t).then((function(e,t){__Rtc.CR__RemoteAudioSetRslt.call([e,t])}))},__Rtc.CR__GetRemoteAudioInf=function(e){Cr._proxy.getRemoteAudioInf(e).then((function(e,t){__Rtc.CR__GetRemoteAudioInfRslt.call([e,t])}))};window.__Rtc.CRICEAPI=new class{constructor(){}SetVideoDeviceStatus(e){console.crlog(`[Video] __Rtc.CRICEAPI.SetVideoDeviceStatus(${e})`),Cr.iceReq("_videoCtrl","setDeviceStatus",e).then((e=>{__Rtc.CRRTCVideo&&__Rtc.CRRTCVideo.ICECallback.setVideoDeviceStatusRslt.apply(__Rtc.CRRTCVideo,e)})).catch((e=>{__Rtc.CRRTCVideo&&__Rtc.CRRTCVideo.ICECallback.setVideoDeviceStatusRslt.apply(__Rtc.CRRTCVideo,[e])}))}UpdateAllCameraInfos(e){console.crlog(`[Video] __Rtc.CRICEAPI.UpdateAllCameraInfos(${e})`),Cr.iceReq("_videoCtrl","updateAllCameraInfos",e).then((e=>{__Rtc.CRRTCVideo&&__Rtc.CRRTCVideo.ICECallback.updateAllCameraInfosRlst.apply(__Rtc.CRRTCVideo,e)})).catch((e=>{__Rtc.CRRTCVideo&&__Rtc.CRRTCVideo.ICECallback.updateAllCameraInfosRlst.apply(__Rtc.CRRTCVideo,[e])}))}StartVideo(){console.crlog("[Video] __Rtc.CRICEAPI.StartVideo()"),Cr.iceReq("_videoCtrl","startVideo").then((e=>{__Rtc.CRRTCVideo&&__Rtc.CRRTCVideo.ICECallback.startVideoRslt.apply(__Rtc.CRRTCVideo,e)})).catch((e=>{__Rtc.CRRTCVideo&&__Rtc.CRRTCVideo.ICECallback.startVideoRslt.apply(__Rtc.CRRTCVideo,[e])}))}StopVideo(){console.crlog("[Video] __Rtc.CRICEAPI.StopVideo()"),Cr.iceReq("_videoCtrl","stopVideo").then((e=>{__Rtc.CRRTCVideo&&__Rtc.CRRTCVideo.ICECallback.stopVideoRslt.apply(__Rtc.CRRTCVideo,e)})).catch((e=>{__Rtc.CRRTCVideo&&__Rtc.CRRTCVideo.ICECallback.stopVideoRslt.apply(__Rtc.CRRTCVideo,[e])}))}ReqOpenVideo(e){console.crlog(`[Video] __Rtc.CRICEAPI.ReqOpenVideo(${e})`),Cr.iceReq("_videoCtrl","reqOpenVideo",e).then((e=>{__Rtc.CRRTCVideo&&__Rtc.CRRTCVideo.ICECallback.reqOpenVideoRslt.apply(__Rtc.CRRTCVideo,e)})).catch((e=>{__Rtc.CRRTCVideo&&__Rtc.CRRTCVideo.ICECallback.reqOpenVideoRslt.apply(__Rtc.CRRTCVideo,[e])}))}StartVideoEx(e){console.crlog(`[Video] __Rtc.CRICEAPI.StartVideoEx(${e})`),Cr.iceReq("_videoCtrl","startVideoEx",e).then((e=>{__Rtc.CRRTCVideo&&__Rtc.CRRTCVideo.ICECallback.startVideoExRslt.apply(__Rtc.CRRTCVideo,e)})).catch((e=>{__Rtc.CRRTCVideo&&__Rtc.CRRTCVideo.ICECallback.startVideoExRslt.apply(__Rtc.CRRTCVideo,[e])}))}StopVideoEx(e){console.crlog(`[Video] __Rtc.CRICEAPI.StopVideoEx(${e})`),Cr.iceReq("_videoCtrl","stopVideoEx",e).then((e=>{__Rtc.CRRTCVideo&&__Rtc.CRRTCVideo.ICECallback.stopVideoExRslt.apply(__Rtc.CRRTCVideo,e)})).catch((e=>{__Rtc.CRRTCVideo&&__Rtc.CRRTCVideo.ICECallback.stopVideoExRslt.apply(__Rtc.CRRTCVideo,[e])}))}SetOpenedCameraNumber(e){console.crlog(`[Video] __Rtc.CRICEAPI.SetOpenedCameraNumber(${JSON.stringify(e)})`),Cr.iceReq("_videoCtrl","setOpenedCameraNumber",e).then((e=>{__Rtc.CRRTCVideo&&__Rtc.CRRTCVideo.ICECallback.setOpenedCameraNumberRslt.apply(__Rtc.CRRTCVideo,e)})).catch((e=>{__Rtc.CRRTCVideo&&__Rtc.CRRTCVideo.ICECallback.setOpenedCameraNumberRslt.apply(__Rtc.CRRTCVideo,[e])}))}BatchSubscribeVideo2(e,t,n){console.crlog(`[Video] __Rtc.CRICEAPI.BatchSubscribeVideo2(${e},${t},${n}})`);const i=[new Conference.UsrCamSize(Number(e),Number(t),Number(n))],r=new Ice.Context;r._fwd="z",Cr.iceReq("_videoCtrl","batchSubscribeVideo2",i,r).then((e=>{__Rtc.CRRTCVideo&&__Rtc.CRRTCVideo.ICECallback.batchSubscribeVideo2Rslt.apply(__Rtc.CRRTCVideo,e)})).catch((e=>{__Rtc.CRRTCVideo&&__Rtc.CRRTCVideo.ICECallback.batchSubscribeVideo2Rslt.apply(__Rtc.CRRTCVideo,[e])}))}GetScreenShareInfo(){console.crlog("[Screen] __Rtc.CRICEAPI.GetScreenShareInfo()"),Cr.iceReq("_screenShareCtrl","getScreenShareInfo").then((e=>{__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.getScreenShareInfoRslt.apply(__Rtc.CRRTCScreen,e)})).catch((e=>{__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.getScreenShareInfoRslt.apply(__Rtc.CRRTCScreen,[e])}))}StartScreenShare(){console.crlog("[Screen] __Rtc.CRICEAPI.StartScreenShare()"),Cr.iceReq("_screenShareCtrl","startScreenShare").then((e=>{__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.startScreenShareRslt.apply(__Rtc.CRRTCScreen,e)})).catch((e=>{__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.startScreenShareRslt.apply(__Rtc.CRRTCScreen,[e])}))}StopScreenShare(){console.crlog("[Screen] __Rtc.CRICEAPI.StopScreenShare()"),Cr.iceReq("_screenShareCtrl","stopScreenShare").then((e=>{__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.stopScreenShareRslt.apply(__Rtc.CRRTCScreen,e)})).catch((e=>{__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.stopScreenShareRslt.apply(__Rtc.CRRTCScreen,[e])}))}StartMarked(){console.crlog("[Screen] __Rtc.CRICEAPI.StartMarked()"),Cr.iceReq("_screenShareCtrl","startMarked").then((e=>{__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.startMarkedRslt.apply(__Rtc.CRRTCScreen,e)})).catch((e=>{__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.startMarkedRslt.apply(__Rtc.CRRTCScreen,[e])}))}StopMarked(){console.crlog("[Screen] __Rtc.CRICEAPI.StopMarked()"),Cr.iceReq("_screenShareCtrl","stopMarked").then((e=>{__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.stopMarkedRslt.apply(__Rtc.CRRTCScreen,e)})).catch((e=>{__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.stopMarkedRslt.apply(__Rtc.CRRTCScreen,[e])}))}ClearAllMarksV4(){console.crlog("[Screen] __Rtc.CRICEAPI.ClearAllMarksV4()"),Cr.iceReq("_screenShareCtrl","clearAllMarksV4").then((e=>{__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.clearAllMarksV4Rslt.apply(__Rtc.CRRTCScreen,e)})).catch((e=>{__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.clearAllMarksV4Rslt.apply(__Rtc.CRRTCScreen,[e])}))}GetAllMarkData(){console.crlog("[Screen] __Rtc.CRICEAPI.GetAllMarkData()"),Cr.iceReq("_screenShareCtrl","getAllMarkData").then((e=>{__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.getAllMarkDataRslt.apply(__Rtc.CRRTCScreen,e)})).catch((e=>{__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.getAllMarkDataRslt.apply(__Rtc.CRRTCScreen,[e])}))}GetAllMarkDataV4(){console.crlog("[Screen] __Rtc.CRICEAPI.GetAllMarkDataV4()"),Cr.iceReq("_screenShareCtrl","getAllMarkDataV4").then((e=>{__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.getAllMarkDataV4Rslt.apply(__Rtc.CRRTCScreen,e)})).catch((e=>{__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.getAllMarkDataV4Rslt.apply(__Rtc.CRRTCScreen,[e])}))}SendMarkData({termid:e,color:t,mousePosSeq:n}={}){console.crlog("[Screen] __Rtc.CRICEAPI.SendMarkData(data)")}SendMarkDataV4({termid:e,markid:t,type:n,mousePosSeq:i}={}){console.crlog(`[Screen] __Rtc.CRICEAPI.SendMarkDataV4(${e},${t},${n},mousePosSeq)`);const r=new Conference.MarkDataV4(e,t,n,i);Cr.iceReq("_screenShareCtrl","sendMarkDataV4",r).then((e=>{__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.sendMarkDataV4Rslt.apply(__Rtc.CRRTCScreen,e)})).catch((e=>{__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.sendMarkDataV4Rslt.apply(__Rtc.CRRTCScreen,[e])}))}StartPlayMedia(e){console.crlog(`[Media] __Rtc.CRICEAPI.StartPlayMedia(${e})`),Cr.iceReq("_mediaCtrl","startPlayMedia",e).then((e=>{__Rtc.CRRTCMedia&&__Rtc.CRRTCMedia.ICECallback.startPlayMediaRslt.apply(__Rtc.CRRTCMedia,e)})).catch((e=>{__Rtc.CRRTCMedia&&__Rtc.CRRTCMedia.ICECallback.startPlayMediaRslt.apply(__Rtc.CRRTCMedia,[e])}))}StopPlayMedia(){console.crlog("[Media] __Rtc.CRICEAPI.StopPlayMedia()"),Cr.iceReq("_mediaCtrl","stopPlayMedia").then((e=>{__Rtc.CRRTCMedia&&__Rtc.CRRTCMedia.ICECallback.stopPlayMediaRslt.apply(__Rtc.CRRTCMedia,e)})).catch((e=>{__Rtc.CRRTCMedia&&__Rtc.CRRTCMedia.ICECallback.stopPlayMediaRslt.apply(__Rtc.CRRTCMedia,[e])}))}GetMediaInfo(){console.crlog("[Media] __Rtc.CRICEAPI.GetMediaInfo()"),Cr.iceReq("_mediaCtrl","getMediaInfo").then((e=>{__Rtc.CRRTCMedia&&__Rtc.CRRTCMedia.ICECallback.getMediaInfoRslt.apply(__Rtc.CRRTCMedia,e)})).catch((e=>{__Rtc.CRRTCMedia&&__Rtc.CRRTCMedia.ICECallback.getMediaInfoRslt.apply(__Rtc.CRRTCMedia,[e])}))}PausePlayMedia(e){console.crlog(`[Media] __Rtc.CRICEAPI.PausePlayMedia(${e})`),Cr.iceReq("_mediaCtrl","pausePlayMedia",e).then((e=>{__Rtc.CRRTCMedia&&__Rtc.CRRTCMedia.ICECallback.pausePlayMediaRslt.apply(__Rtc.CRRTCMedia,e)})).catch((e=>{__Rtc.CRRTCMedia&&__Rtc.CRRTCMedia.ICECallback.pausePlayMediaRslt.apply(__Rtc.CRRTCMedia,[e])}))}SubscribeMedia(e){console.crlog(`[Media] __Rtc.CRICEAPI.SubscribeMedia(${e})`),Cr.iceReq("_mediaCtrl","subscribeMedia",e).then((e=>{__Rtc.CRRTCMedia&&__Rtc.CRRTCMedia.ICECallback.subscribeMediaRslt.apply(__Rtc.CRRTCMedia,e)})).catch((e=>{__Rtc.CRRTCMedia&&__Rtc.CRRTCMedia.ICECallback.subscribeMediaRslt.apply(__Rtc.CRRTCMedia,[e])}))}SetCurrentTab(e,t){console.crlog(`[Sync] __Rtc.CRICEAPI.SetCurrentTab(${JSON.stringify(e)},${JSON.stringify(t)})`);return new Promise(((n,i)=>{const r=new Conference.TabID(e.termID,e.localID),o=new Conference.TabID(t.termID,t.localID);Cr.iceReq("_syncCtrl","setCurrentTab",r,o).then((e=>n(e))).catch((e=>i(e)))}))}SaveLastTabValue(e){console.crlog(`[Sync] __Rtc.CRICEAPI.SaveLastTabValue(${e})`);return new Promise(((t,n)=>{Cr.iceReq("_syncCtrl","saveLastTabValue",e).then((e=>t(e))).catch((e=>n(e)))}))}setContainerSize(){}Create(e){return new Promise(((t,n)=>{try{console.crlog(`[Board] __Rtc.CRICEAPI.SetCurrentPage(${JSON.stringify(e)})`)}catch(e){return n(e)}const i=new Conference.TabID(e.wID.termID,e.wID.localID),r=new Conference.WhiteBoardDescribe(i,e.wType,e.docType,e.name,e.docName,e.width,e.height,e.scaleType,e.rotation,e.pageCount,e.curPage,e.animID,e.animFrames,e.showThum,e.bAll,e.allowTerms);Cr.iceReq("_whiteBoardCtrl","create",r).then((e=>t(e)),(e=>n(e)))}))}ImportPage(e,t){return new Promise(((n,i)=>{try{console.crlog(`[Board] __Rtc.CRICEAPI.ImportPage(${JSON.stringify(e)},${JSON.stringify(t)})`)}catch(e){return i(e)}e=new Conference.TabID(e.termID,e.localID);const r=[];for(let e=0;e<t.length;e++){const n=t[e].pageNo,i=t[e].imgID,o=i?Conference.WB_BAKIMG_TYPE.WB_BAKIMG_JPG:Conference.WB_BAKIMG_TYPE.WB_BAKIMG_NULL,s=t[e].elementList||[];r[e]=new Conference.PageData(n,o,i,s)}Cr.iceReq("_whiteBoardCtrl","importPage",e,r).then((e=>n(e)),(e=>i(e)))}))}Close(e){return new Promise(((t,n)=>{try{console.crlog(`[Board] __Rtc.CRICEAPI.Close(${JSON.stringify(e)})`)}catch(e){return n(e)}const i=new Conference.TabID(e.termID,e.localID);Cr.iceReq("_whiteBoardCtrl","close",i).then((e=>t(e)),(e=>n(e)))}))}changeName(){}changeScale(){}changeRatote(){}SetCurrentPage(e,t,n,i){return new Promise(((r,o)=>{try{console.crlog(`[Board] __Rtc.CRICEAPI.SetCurrentPage(${JSON.stringify(e)},${t},${n},${i})`)}catch(e){console.error(e)}e=new Conference.TabID(e.termID,e.localID),Cr.iceReq("_whiteBoardCtrl","setCurrentPage",e,t,n,i).then((e=>r(e)),(e=>o(e)))}))}showThumPage(){}AddElement(e,t,n){return new Promise(((i,r)=>{try{console.crlog(`[Board] __Rtc.CRICEAPI.AddElement(${JSON.stringify(e)},${t},${n})`)}catch(e){console.error(e)}const o=new Conference.ElementID(n.eID.ownerID,n.eID.ID),s=new Conference.ElementData(o,n.orderId,n.left,n.top,n.type,n.noused,n.data);Cr.iceReq("_whiteBoardCtrl","addElement",e,t,s).then((e=>i(e)),(e=>r(e)))}))}AddElementEx(e,t,n){return new Promise(((i,r)=>{try{console.crlog(`[Board] __Rtc.CRICEAPI.AddElementEx(${JSON.stringify(e)},${t},${n})`)}catch(e){console.error(e)}const o=[];for(var s=0;s<n.length;s++){const e=new Conference.ElementID(n[s].eID.ownerID,n[s].eID.ID);o.push(new Conference.ElementData(e,n[s].orderId,n[s].left,n[s].top,n[s].type,n[s].noused,n[s].data))}Cr.iceReq("_whiteBoardCtrl","addElementEx",e,t,o).then((e=>i(e)),(e=>r(e)))}))}moveElement(){}modifyElement(){}DelElement(e,t,n){return new Promise(((i,r)=>{try{console.crlog(`[Board] __Rtc.CRICEAPI.DelElement(${JSON.stringify(e)},${t},elementIds)`)}catch(e){console.error(e)}e=new Conference.TabID(e.termID,e.localID);const o=[];for(var s=0;s<n.length;s++)o.push(new Conference.ElementID(n[s].ownerID,n[s].ID));Cr.iceReq("_whiteBoardCtrl","delElement",e,t,o).then((e=>i(e)),(e=>r(e)))}))}setElementZPos(){}setIndicator(){}setHotspot(){}queryIndicator(){}QueryAllBoardList(){return new Promise(((e,t)=>{console.crlog("[Board] __Rtc.CRICEAPI.QueryAllBoardList()"),Cr.iceReq("_whiteBoardCtrl","queryAllBoardList").then((t=>e(t))).catch((e=>t(e)))}))}QueryElementByIDs(e,t){return new Promise(((n,i)=>{console.crlog(`[Board] __Rtc.CRICEAPI.QueryElementByIDs(${JSON.stringify(e)},${JSON.stringify(t)})`);const r=new Conference.TabID(e.termID,e.localID);Cr.iceReq("_whiteBoardCtrl","queryElementByIDs",r,t).then((e=>n(e))).catch((e=>i(e)))}))}QueryPageElementByIDs(e,t,n){return new Promise(((i,r)=>{console.crlog(`[Board] __Rtc.CRICEAPI.QueryPageElementByIDs(${JSON.stringify(e)},${t},${JSON.stringify(n)})`);const o=[];for(var s=0;s<n.length;s++)o.push(new Conference.ElementID(n[s]));const a=new Conference.TabID(e.termID,e.localID);Cr.iceReq("_whiteBoardCtrl","queryPageElementByIDs",a,t,o).then((e=>i(e))).catch((e=>r(e)))}))}SetMarkTerms(){}Kickout(e){return new Promise(((t,n)=>{console.crlog(`[Conference] __Rtc.CRICEAPI.Kickout(${e})`),Cr.iceReq("_conferenceRequest","kickout",e).then((e=>t(e))).catch((e=>n(e)))}))}ChangeNickname(e,t){return new Promise(((n,i)=>{console.crlog(`[Conference] __Rtc.CRICEAPI.ChangeNickname(${e},${t})`),Cr.iceReq("_conferenceRequest","changeNickname",e,t).then((e=>n(e))).catch((e=>i(e)))}))}StartSvrRecord(e){return new Promise(((t,n)=>{Cr.iceReq("_conferenceRequest","startSvrRecord",e).then((e=>t(e))).catch((e=>n(e)))}))}UpdateSvrRecCfg(e){return new Promise(((t,n)=>{Cr.iceReq("_conferenceRequest","updateSvrRecCfg",e).then((e=>t(e))).catch((e=>n(e)))}))}StopSvrRecord(){return new Promise(((e,t)=>{Cr.iceReq("_conferenceRequest","stopSvrRecord").then((t=>e(t))).catch((e=>t(e)))}))}StartCloudRecord(e,t){return new Promise(((n,i)=>{Cr.iceReq("_conferenceRequest","startCloudRecord",e,t).then((e=>n(e))).catch((e=>i(e)))}))}StopCloudRecord(e){return new Promise(((t,n)=>{Cr.iceReq("_conferenceRequest","stopCloudRecord",e).then((e=>t(e))).catch((e=>n(e)))}))}UpdateCloudRecord(e,t){return new Promise(((n,i)=>{Cr.iceReq("_conferenceRequest","updateCloudRecord",e,t).then((e=>n(e))).catch((e=>i(e)))}))}OpenMicEx(e){return new Promise(((t,n)=>{console.crlog(`[Audio] __Rtc.CRICEAPI.StartSvrRecord(${e})`),Cr.iceReq("_audioCtrl","openMicEx",e).then((e=>t(e))).catch((e=>n(e)))}))}},Cr.iceReq=(e,t,...n)=>new Promise(((i,r)=>{try{let o=!0;if("addElement"==t&&(o=!1),!CRVideo.isMeeting)return;o&&console.crlog(`[ICE] Ice Request [${e}:${t}],${JSON.stringify(n)}`),!o&&console.crlog(`[ICE] Ice Request [${e}:${t}],args...`),Cr._proxy[e][t](...n).then((function(...n){return console.crlog(`[ICE] Ice Request [${e}:${t}] success!`),n.unshift(0),i(n)})).exception((function(n){return console.crlog(`[ICE][Error] Ice Request [${e}:${t}] fail,${n.toString()}`),r(n)}))}catch(e){return console.crlog(`[ICE][Error] Conference Request error: ${e}`),r(e)}})),Cr.LHProxy.prototype.setContainerSize=function(e,t){var n=new Cr.AsyncResult;try{this._whiteBoardCtrl.setContainerSize(e,t).then(function(){n.complete([0,""])}.bind(this)).exception(function(e){n.complete([204,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){n.complete([3,e.toString()])}return n},Cr.LHProxy.prototype.importPage=function(e,t){for(var n=new Cr.AsyncResult,i=[],r=new Conference.TabID(e.termID,e.localID),o=0;o<t.length;o++){var s=t[o].pageNo,a=t[o].imgType,c=t[o].imgResourceID,l=t[o].elementList;i[o]=new Conference.PageData(s,a,c,l)}try{this._whiteBoardCtrl.importPage(r,i).then(function(){n.complete([0,""])}.bind(this)).exception(function(e){n.complete([204,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){n.complete([3,e.toString()])}return n},Cr.LHProxy.prototype.changeName=function(e,t){var n=new Cr.AsyncResult;try{this._whiteBoardCtrl.changeName(e,t).then(function(){n.complete([0,""])}.bind(this)).exception(function(e){n.complete([204,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){n.complete([3,e.toString()])}return n},Cr.LHProxy.prototype.changeScale=function(e,t){var n=new Cr.AsyncResult,i=new Conference.WB_SCALE_TYPE(t);try{this._whiteBoardCtrl.changeScale(e,i).then(function(){n.complete([0,""])}.bind(this)).exception(function(e){n.complete([204,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){n.complete([3,e.toString()])}return n},Cr.LHProxy.prototype.changeRatote=function(e,t){var n=new Cr.AsyncResult,i=new Conference.WB_ROTATE_TYPE(t);try{this._whiteBoardCtrl.changeRatote(e,i).then(function(){n.complete([0,""])}.bind(this)).exception(function(e){n.complete([204,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){n.complete([3,e.toString()])}return n},Cr.LHProxy.prototype.showThumPage=function(e,t){var n=new Cr.AsyncResult;try{this._whiteBoardCtrl.showThumPage(e,t).then(function(){n.complete([0,""])}.bind(this)).exception(function(e){n.complete([204,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){n.complete([3,e.toString()])}return n},Cr.LHProxy.prototype.moveElement=function(e,t,n){var i=new Cr.AsyncResult,r=new Conference.ElementPos(n);try{this._whiteBoardCtrl.moveElement(e,t,r).then(function(){i.complete([0,""])}.bind(this)).exception(function(e){i.complete([204,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){i.complete([3,e.toString()])}return i},Cr.LHProxy.prototype.modifyElement=function(e,t,n){var i=new Cr.AsyncResult,r=new Conference.ElementID(n.eID.ownerID,n.eID.ID),o=new Conference.ElementData(r,n.orderId,n.left,n.top,n.type,n.noused,n.data);try{this._whiteBoardCtrl.modifyElement(e,t,o).then(function(){i.complete([0,""])}.bind(this)).exception(function(e){i.complete([204,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){i.complete([3,e.toString()])}return i},Cr.LHProxy.prototype.setElementZPos=function(e,t,n){var i=new Cr.AsyncResult,r=new Conference.WB_ELEMENT_ZPOS(n);try{this._whiteBoardCtrl.setElementZPos(e,t,r).then(function(){i.complete([0,""])}.bind(this)).exception(function(e){i.complete([204,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){i.complete([3,e.toString()])}return i},Cr.LHProxy.prototype.setIndicator=function(e,t){var n=new Cr.AsyncResult,i=new Conference.IndicatorData(t);try{this._whiteBoardCtrl.setIndicator(e,i).then(function(){n.complete([0,""])}.bind(this)).exception(function(e){n.complete([204,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){n.complete([3,e.toString()])}return n},Cr.LHProxy.prototype.setHotspot=function(e,t,n,i){var r=new Cr.AsyncResult;try{this._whiteBoardCtrl.setHotspot(e,t,n,i).then(function(){r.complete([0,""])}.bind(this)).exception(function(e){r.complete([204,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){r.complete([3,e.toString()])}return r},Cr.LHProxy.prototype.queryIndicator=function(e){var t=new Cr.AsyncResult;try{this._whiteBoardCtrl.queryIndicator(e).then(function(e){for(var n=[],i=0;i<e.length;i++)n.push(new Conference.IndicatorData(e[i]));t.complete([0,"",n])}.bind(this)).exception(function(e){t.complete([204,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){t.complete([3,e.toString()])}return t},Cr.LHProxy.prototype.setMarkTerms=function(e,t,n){for(var i=new Cr.AsyncResult,r=[],o=0;o<describeSeq.length;o++)r.push(new Conference.ElementID(eIds[o].ownerID,eIds[o].ID));try{this._whiteBoardCtrl.setMarkTerms(e,t,n).then(function(){i.complete([0,""])}.bind(this)).exception(function(e){i.complete([204,"网络错误"]),Cr.Utils.log(e.toString()),Cr.Utils.log(e.stack)}.bind(this))}catch(e){i.complete([3,e.toString()])}return i}},1287:()=>{window.__Rtc={},function(){for(var e=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,n){var i=(new Date).getTime(),r=Math.max(0,16.7-(i-e)),o=window.setTimeout((function(){t(i+r)}),r);return e=i+r,o}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}(),function(){if(void 0!==window.RTCPeerConnection){test_isvp8="",test_isH264="";try{window.loginConnection=new RTCPeerConnection({iceServers:[{urls:"stun:121.42.156.84:3478"}]});window.loginConnection.createOffer((function(e){window.__Rtc.baseOffer=e,e.sdp.includes("H264")&&e.sdp.includes("VP8")?window.__Rtc.rtc_codecs="VP8;H264":e.sdp.includes("H264")?window.__Rtc.rtc_codecs="H264":e.sdp.includes("VP8")?window.__Rtc.rtc_codecs="VP8":window.__Rtc.rtc_codecs=""}),(function(e){console.error(e),window.__Rtc.rtc_codecs=""}),{offerToReceiveAudio:!1,offerToReceiveVideo:!0,voiceActivityDetection:!1})}catch(e){console.error(e),console.log(JSON.stringify({name:e.name,message:e.message})),window.__Rtc.rtc_codecs=""}}}(),Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),n=this,i=function(){},r=function(){return n.apply(this instanceof i&&e?this:e,t.concat(Array.prototype.slice.call(arguments)))};return i.prototype=this.prototype,r.prototype=new i,r}),window.Cr={},window.CRVideo={},Cr.CbProxy=function(e){this.name=e,this.callback=null},Cr.CbProxy.prototype.call=function(e){try{this.callback&&"function"==typeof this.callback&&this.callback.apply(null,e)}catch(e){console.error(e)}},Cr.MsgInfo=function(e){this.type=e.type,this.index=e.index,this.msg=e.msg,this.head=e.head,this.sendTime=e.sendTime,this.targetNickname=e.targetNickname,this.targetTermId=e.targetTermId,this.srcNickname=e.srcNickname,this.srcTermId=e.srcTermId,this.ishost=e.ishost},Cr.MeetInfo=function(e){this.termId=e.termId,this.nickname=e.nickname,this.userId=e.userId,this.bindId=e.bindId,this.openedCamIDs=e.openedCamIDs,this.activeMembers=e.activeMembers,this.myDetail=e.myDetail,this.serverTime=e.serverTime,this.isBegan=e.isBegan,this.countdown=e.countdown,this.mainVideoTermID=e.mainVideoTermID,this.srvRecordState=e.srvRecordState,this.srvRecordCfg=e.srvRecordCfg,this.wbDescibes=e.wbDescibes,this.ServerUTCTime=e.ServerUTCTime,this.bAllowWall=e.bAllowWall,this.bFull=e.bFull,this.bRoomLocked=e.bRoomLocked,this.curMainTab=e.curMainTab,this.curSubTab=e.curSubTab,this.option=e.option,this.lastElemValue=e.lastElemValue,this.lastTabValue=e.lastTabValue,this.confInfo=e.confInfo},Cr.parseMemberInfo=function(e){var t=e.extProperty,n=t.get(Conference.MINFO_OPENEDCAMIDS);if(null!=n){n=n.split(";");for(let e=0;e<n.length;e++)n[e]=+n[e];e.defaultCam=n[0],e.openedCamIDs=n.slice(1)}void 0!==t.get(Conference.MINFO_ALLCAMS)&&(e.allCams=t.get(Conference.MINFO_ALLCAMS).split("\n").slice(0,-1)),e.userId=t.get(Conference.CLIETN_PRIV_DAT),e.platform=t.get(Conference.CLINET_PLATFORM),e.sdk_ver=t.get(Conference.CLINET_SDK_VER),e.slice_ver=t.get(Conference.SLICE_VER),e.iswifi=t.get(Conference.CLINET_ISWIFI),e.privRole=t.get("priv_role")||"others"},Cr.Quesask=function(e){this.typeID=e.typeID,this.asktime=e.asktime,this.termID=e.termID,this.content=e.content,this.nickname=e.nickname},Cr_Question_State={NotReply:0,Replying:1,NotPublic:2,Publiced:3,Deleted:4},Cr.QuesDeal=function(e){this.state=e.state._value,this.replyCon=e.replyCon,this.replyTermId=e.replyTermId,this.replyTime=e.replyTime,this.publishTermID=e.publishTermID,this.publishTime=e.publishTime,this.delTermID=e.delTermID,this.delTime=e.delTime},Cr.QuesInf=function(e){this.quesID=e.quesID,this.ask=new Cr.Quesask(e.ask),this.deal=new Cr.QuesDeal(e.deal)},Cr.ScreenShareInfo=function(e){this.scrSviceProxy=e.scrSviceProxy,this.authKey=e.authKey,this.allowCtrlReq=e.allowCtrlReq,this.state=e.state,this.sharer=e.sharer,this.controller=e.controller,this.allowOtherMark=e.allowOtherMark},Cr.MediaInfo=function(e){this.termid=e.termid,this.MEDIA_STATE=e.MEDIA_STATE,this.mediaName=e.mediaName},Cr.ElementID=function(e){this.ownerID=e.ownerID,this.ID=e.ID},Cr.ElementData=function(e){this.eID=e.eID,this.orderId=e.orderId,this.left=e.left,this.top=e.top,this.type=e.type,this.noused=e.noused,this.data=e.data},Cr.AsyncResult=function(){},Cr.AsyncResult.prototype.then=function(e){return this.__child=new Cr.AsyncResult,this.__complete=e,this.__child},Cr.AsyncResult.prototype.complete=function(e){var t=function(){this.next(e),this.__parent&&"function"==typeof this.__parent.next&&this.__parent.next(e)}.bind(this);setTimeout(t,0)},Cr.AsyncResult.prototype.next=function(e){if(this.__complete&&"function"==typeof this.__complete){var t=this.__complete.apply(this,e);t&&this.__child&&(t.__parent=this.__child)}},Cr.AsyncResult2As=function(e,t){this.id=e,this.proxy=t},Cr.AsyncResult2As.prototype.complete=function(e){e.unshift(this.id),this.proxy.callback.apply(this.proxy,e)},Cr.Swf={__callbackId_generator:0,__generateCallbackId:function(){return Cr.Swf.__callbackId_generator++},__callbackAsyncDict:{},__registerCallbackAsync:function(e,t){if(Cr.Swf.__callbackAsyncDict[e])throw"register swf callback error:duplicate id";Cr.Swf.__callbackAsyncDict[e]=t},asyncAsCallback:function(){if(!(arguments.length>=1))throw"swf callback error:arguments deficient";for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];var n=e.shift(),i=Cr.Swf.__callbackAsyncDict[n];if(!i)throw"swf callback error:async not exist";i.complete(e)},callJs:function(){if(arguments.length>=2){for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];if(cmd=e.shift(),id=e.shift(),cmdObj=Cr.Swf.__asCallbackCmdDict[cmd],cmdObj){var n=cmdObj.fun;cmdObj.proxy;n.call(null,e)}}},__asCallbackCmdDict:{},addAsCallback:function(e,t,n){if(Cr.Swf.__asCallbackCmdDict[e])throw"register swf callback error:duplicate id";Cr.Swf.__asCallbackCmdDict[e]={fun:t,proxy:n}}},Cr.crmt=null},158:()=>{},4567:()=>{CRVideo.CbProxy=function(e){this.name=e,this.target=function(...t){try{"[object Function]"===Object.prototype.toString.call(this.callback)?this.callback.apply(null,t):"CRVideo_MicEnergyUpdate"!=e&&console.crlog("[SDK] Undefined callback: "+e)}catch(e){console.error(e)}}},window.CRVideo_NotifyMainVideoChanged=new CRVideo.CbProxy("CRVideo_NotifyMainVideoChanged"),window.CRVideo_NotifyMainVideoModeChanged=new CRVideo.CbProxy("CRVideo_NotifyMainVideoModeChanged"),window.CRVideo_ShakeHandRslt=new CRVideo.CbProxy("CRVideo_ShakeHandRslt"),window.CRVideo_NotifyCmdData=new CRVideo.CbProxy("CRVideo_NotifyCmdData"),window.CRVideo_UserLeftMeeting=new CRVideo.CbProxy("CRVideo_UserLeftMeeting"),window.CRVideo_UserEnterMeeting=new CRVideo.CbProxy("CRVideo_UserEnterMeeting"),window.CRVideo_MeetingDropped=new CRVideo.CbProxy("CRVideo_MeetingDropped"),window.CRVideo_NotifyMeetEnded=new CRVideo.CbProxy("CRVideo_NotifyMeetEnded"),window.CRVideo_DestroyMeetingRslt=new CRVideo.CbProxy("CRVideo_DestroyMeetingRslt"),window.CRVideo_StopMeetingRslt=new CRVideo.CbProxy("CRVideo_StopMeetingRslt"),window.CRVideo_MeetingStopped=new CRVideo.CbProxy("CRVideo_MeetingStopped"),window.CRVideo_SendCmdRslt=new CRVideo.CbProxy("CRVideo_SendCmdRslt"),window.CRVideo_SendBufferRslt=new CRVideo.CbProxy("CRVideo_SendBufferRslt"),window.CRVideo_SendProgress=new CRVideo.CbProxy("CRVideo_SendProgress"),window.CRVideo_SendFileRslt=new CRVideo.CbProxy("CRVideo_SendFileRslt"),window.CRVideo_SendProgress=new CRVideo.CbProxy("CRVideo_SendProgress"),window.CRVideo_CancelSendRslt=new CRVideo.CbProxy("CRVideo_CancelSendRslt"),window.CRVideo_NotifyBufferData=new CRVideo.CbProxy("CRVideo_NotifyBufferData"),window.CRVideo_NotifyFileData=new CRVideo.CbProxy("CRVideo_NotifyFileData"),window.CRVideo_NotifyCancelSend=new CRVideo.CbProxy("CRVideo_NotifyCancelSend")},3961:()=>{CRVideo.logAry=[],CRVideo.browserInfo="";var e=new function(){var e=this;e.num=0,e.logFilename="sdkDebug.log",e.output="",this.getLog=function(){return e.output},this.clear=function(){e.output=""},this.downloadLog=function(){var t="data:text/plain;charset=utf-8,",n=e.getLog();t+=encodeURIComponent(n);var i=document.createElement("a");i.href=t,i.target="_blank",i.download=e.logFilename,document.body.appendChild(i),i.click(),i.remove()},this.log=function(t,n,i){var r="";n=n||"INF";if(null!=t)if("object"==typeof object)var o=JSON.stringify(t);else o=t;var s=new Date;r+=e.formatTimestamp(s),r+="["+n+"] ",r+=o,e.output+=r+"\n",e.num++,256==e.num&&(e.num=0),(e.output.length/1024).toFixed(2)>500&&CRVideo_UploadingLog()},this.formatTimestamp=function(e){e.getFullYear();var t=e.getDate();return"["+("0"+(e.getMonth()+1)).slice(-2)+"-"+t+" "+Number(e.getHours())+":"+("0"+e.getMinutes()).slice(-2)+":"+("0"+e.getSeconds()).slice(-2)+":"+e.getMilliseconds()+"] "}};console.crlog=function(t,n,i){return function(t,n,i){console.log(t),e.log(t,n,i)}},CRVideo_EnableLog2File=function(t,n,i){CRVideo.isUploadLog=t,console.crlog=t&&n?function(t,n,i){console.log(t),e.log(t,n,i)}:t?e.log:n?console.log:function(){},i||(console.crlog("[LOG] Enable upload log: "+t),console.crlog("[LOG] Enable console log debug: "+n))},CRVideo_EnableLog2File(!0,!0,1),CRVideo.browserInfo=function(){var e="";if(navigator.userAgent.match(/AppleWebKit.*Mobile.*/)){e=/(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent)?"ios":/(Android)/i.test(navigator.userAgent)?"android":"mobile";var t=navigator.userAgent.toLowerCase();if("micromessenger"==t.match(/MicroMessenger/i))return e+"_WX";if("qq"==t.match(/QQ/i))return e+"_qq";if(t.indexOf("liebao")>0)return e+"_leibao";if(null!=t.match(/ubrowser/))return e+"_uc";if(t.indexOf("chrome")>0||t.indexOf("crios")>0)return e+"_chrome";if(t.indexOf("safari")>0)return e+"_safari"}else{var n=navigator.userAgent,i=n.indexOf("Opera")>-1,r=n.indexOf("compatible")>-1&&n.indexOf("MSIE")>-1&&!i,o=n.indexOf("Firefox")>-1,s=n.indexOf("Safari")>-1,a=n.indexOf("Chrome")>-1;if(o)return"PC_FF";if(i)return"PC_Opera";if(a){return function(e,t){var n=navigator.mimeTypes;for(var i in n)if(n[i][e]==t)return!0;return!1}("type","application/vnd.chromium.remoting-viewer")?"PC_360":"pc_chrome"}if(s)return"PC_Safari";if(r)return"IE"}}(),window.CRVideo_StartLogReport=function(e,t){CRVideo.isUploadLog=1,CRVideo.logServer=t,CRVideo_UploadingReport()},window.CRVideo_StopLogReport=function(){CRVideo.isUploadLog=0},window.CRVideo_UploadingReport=function(e){CRVideo_UploadingLog(e),CRVideo.logReportTimer&&clearTimeout(CRVideo.logReportTimer),CRVideo.logReportTimer=setTimeout((function(){CRVideo_UploadingReport()}),3e4)},window.CRVideo_UploadingLog=function(t,n){if(!CRVideo.isUploadLog)return;CRVideo.logproxy||__Rtc.postCmd.IceLogCreate();var i=e.getLog();if(n&&(i+=n.type+":"+n.info),e.clear(),0==CRVideo.isUploadLog)return;var r=new Date,o=r.getFullYear(),s=r.getMonth()+1;s=String(s<10?"0"+s:s);var a=r.getDate();a=String(a<10?"0"+a:a);var c=CRVideo.LoginParam.user_id;c.length>4&&c.substr(4);const l=`/${o}-${s}-${a}/`;var d=JSON.parse(window.sessionStorage.getItem("CRVideo.LOCAL_KEY_logName"));if(d&&d.account==CRVideo.LoginParam.account&&d.user_id==CRVideo.LoginParam.user_id&&d.logMonth==s&&d.logDay==a&&d.browserInfo==CRVideo.browserInfo)var u=`${CRVideo.LoginParam.account}${l}${CRVideo.LoginParam.user_id}_${d.logUUID}_webrtc_${CRVideo.browserInfo}.log`;else u=`${CRVideo.LoginParam.account}${l}${CRVideo.LoginParam.user_id}_${CRVideo.logUUID}_webrtc_${CRVideo.browserInfo}.log`;var h=new TextEncoder("utf-8").encode(i),f=new Zlib.Deflate(h).compress();if(console.crlog("[LOG] Log uploading =====> "+u),CRVideo.webLogDetail(0,u,f),CRVideo&&CRVideo.isMeeting&&CRVideo.meetingID){var _=`${CRVideo.meetingID}/${u.slice(u.indexOf(l)+l.length)}`;_=_.replace(CRVideo.logUUID,CRVideo.meetLogUUID)}_&&console.crlog("[LOG] Log uploading =====> "+_),_&&CRVideo.webLogDetail(0,_,f);var p={account:CRVideo.LoginParam.account,user_id:CRVideo.LoginParam.user_id,logUUID:CRVideo.logUUID,browserInfo:CRVideo.browserInfo,logMonth:s,logDay:a};window.sessionStorage.setItem("CRVideo.LOCAL_KEY_logName",JSON.stringify(p))},window.onerror=function(e,t,n,i,r){var o="\n出错的文件："+t;o+="\n出错的代码行号："+n;o+="\n错误的详细信息："+r}},3085:()=>{Cr.Utils={generate_uuid:function(){for(var e=[],t="0123456789abcdef",n=0;n<36;n++)e[n]=t.substr(Math.floor(16*Math.random()),1);return e[14]="4",e[19]=t.substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-",e.join("")},setCookie:function(e,t){var n=new Date;n.setTime(n.getTime()+2592e6),document.cookie=e+"="+escape(t)+";expires="+n.toGMTString()},getCookie:function(e){var t=new RegExp("(^| )"+e+"=([^;]*)(;|$)"),n=document.cookie.match(t);return n?unescape(n[2]):void 0},delCookie:function(e){var t=new Date;t.setTime(t.getTime()-1);var n=Utils.getCookie(e);null!=n&&(document.cookie=e+"="+n+";expires="+t.toGMTString())},Uint8ToString:function(e){for(var t=[],n=0;n<e.length;n+=32768)t.push(String.fromCharCode.apply(null,e.subarray(n,n+32768)));return t.join("")},Uint8ToBase64:function(e){for(var t,n=0,i=e.length,r="";n<i;)t=e.subarray(n,Math.min(n+32768,i)),r+=String.fromCharCode.apply(null,t),n+=32768;return btoa(r)},compare:function(e){return function(t,n){var i=t[e],r=n[e];return r>i?-1:r<i?1:0}},deepCopy:function(e){var t={};for(var n in e)t[n]="object"==typeof e[n]?deepCoyp(e[n]):e[n];return t},chat2html:function(e,t,n){var i="",r="",o="";if(e.indexOf("0x10x4")>=0)(i=e.split("0x10x4")[1]).indexOf("0x1")>=0&&(i=i.split("0x1")[0]),r=(i=JSON.parse(i)).opt,o=i.headerUrl;else if(e.indexOf("0x10x5")>=0){(i=e.split("0x10x5")[1]).indexOf("0x1")>=0&&(i=i.split("0x1")[0]),r=(i=JSON.parse(i)).opt,o=i.headerUrl}else if(e.indexOf("0x10x6")>=0){(i=e.split("0x10x6")[1]).indexOf("0x1")>=0&&(i=i.split("0x1")[0]),r=(i=JSON.parse(i)).opt,o=i.headerUrl}else{null==Cr._imgRegExp&&(Cr._sign=Cr.Utils.utf8ByteToUnicodeStr([1]),Cr._signB=Cr.Utils.utf8ByteToUnicodeStr([2]),Cr._signA=Cr.Utils.utf8ByteToUnicodeStr([3]),Cr._imgRegExp=new RegExp(Cr._sign+Cr._sign+":*/*([^"+Cr._sign+"]+?)"+Cr._sign,"g"),Cr._headimgRegExp=new RegExp(Cr._sign+Cr._signA+":*/*([^"+Cr._sign+"]+?)"+Cr._sign,"g"),Cr._captureRegExp=new RegExp(Cr._sign+Cr._signB+":*/*([^"+Cr._sign+"]+?)"+Cr._sign,"g")),i=(i=(i=(i=(i=(i=(i=(i=(i=(i=e.replace(/<br\/>/g,"\n")).replace(/&quot;/g,'"')).replace(/&lt;/g,"<")).replace(/&gt;/g,">")).replace(/\&/g,"&amp;")).replace(/\"/g,"&quot;")).replace(/\</g,"&lt;")).replace(/\>/g,"&gt;")).replace(Cr._imgRegExp,'<img  src="$1"></img>')).replace(Cr._captureRegExp,"");var s=Cr._headimgRegExp.exec(i);if(s)o=s[1];i=i.replace(Cr._headimgRegExp,"");for(var a=(16777215&t).toString(16),c=6-a.length,l=0;l<c;l++)a="0"+a;i='<p style="color:#'+a+";font-size:"+n+'">'+i+"</p>",r=0}return[r,o,i]},html2chat:function(e){return null==Cr._imgRegExp&&(Cr._sign=Cr.Utils.utf8ByteToUnicodeStr([1]),Cr._signB=Cr.Utils.utf8ByteToUnicodeStr([2]),Cr._signA=Cr.Utils.utf8ByteToUnicodeStr([3]),Cr._imgRegExp=new RegExp(Cr._sign+Cr._sign+":*/*([^"+Cr._sign+"]+?)"+Cr._sign,"g"),Cr._headimgRegExp=new RegExp(Cr._sign+Cr._signA+":*/*([^"+Cr._sign+"]+?)"+Cr._sign,"g"),Cr._captureRegExp=new RegExp(Cr._sign+Cr._signB+":*/*([^"+Cr._sign+"]+?)"+Cr._sign,"g")),[e=(e=(e=(e=e.replace(/\<headimg\s+src=[\"\']([^\"\']*?)[\"\']\s*\/\>/gi,Cr._sign+Cr._signA+":$1"+Cr._sign)).replace(/\<headimg\s+src=[\"\']([^\"\']*?)[\"\']\s*\>.*?\<\/s*imgs*\>/gi,Cr._sign+Cr._signA+":$1"+Cr._sign)).replace(/\<img\s+[^>]*?src=[\"\']([\w\/\.\:]*)[\"\'][^>]*\/\>/gi,Cr._sign+Cr._sign+":/$1"+Cr._sign)).replace(/\<img\s+[^>]*?src=[\"\']([\w\/\.\:]*)[\"\'][^>]*\>.*?\<\/s*imgs*\>/gi,Cr._sign+Cr._sign+":/$1"+Cr._sign)]},ask2html:function(e){null==Cr._imgRegExp&&(Cr._sign=Cr.Utils.utf8ByteToUnicodeStr([1]),Cr._signA=Cr.Utils.utf8ByteToUnicodeStr([3]),Cr._imgRegExp=new RegExp(Cr._sign+Cr._sign+":*/*([^"+Cr._sign+"]+?)"+Cr._sign,"g"),Cr._headimgRegExp=new RegExp(Cr._sign+Cr._signA+":*/*([^"+Cr._sign+"]+?)"+Cr._sign,"g"));var t=e.replace(/<br\/>/g,"\n");t=(t=(t=(t=(t=t.replace(/\&/g,"&amp;")).replace(/\"/g,"&quot;")).replace(/\</g,"&lt;")).replace(/\>/g,"&gt;")).replace(Cr._imgRegExp,'<img  src="$1"></img>');var n=Cr._headimgRegExp.exec(t);if(n)var i=n[1];return[i,t=t=t.replace(Cr._headimgRegExp,"")]},utf8ByteToUnicodeStr:function(e){for(var t="",n=0;n<e.length;){var i=e[n],r=0;i>>>7==0?(t+=String.fromCharCode(e[n]),n+=1):252==(252&i)?(r=(3&e[n])<<30,r|=(63&e[n+1])<<24,r|=(63&e[n+2])<<18,r|=(63&e[n+3])<<12,r|=(63&e[n+4])<<6,r|=63&e[n+5],t+=String.fromCharCode(r),n+=6):248==(248&i)?(r=(7&e[n])<<24,r|=(63&e[n+1])<<18,r|=(63&e[n+2])<<12,r|=(63&e[n+3])<<6,r|=63&e[n+4],t+=String.fromCharCode(r),n+=5):240==(240&i)?(r=(15&e[n])<<18,r|=(63&e[n+1])<<12,r|=(63&e[n+2])<<6,r|=63&e[n+3],t+=String.fromCharCode(r),n+=4):224==(224&i)?(r=(31&e[n])<<12,r|=(63&e[n+1])<<6,r|=63&e[n+2],t+=String.fromCharCode(r),n+=3):192==(192&i)?(r=(63&e[n])<<6,r|=63&e[n+1],t+=String.fromCharCode(r),n+=2):(t+=String.fromCharCode(e[n]),n+=1)}return t},base64:{_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t,n,i,r,o,s,a,c="",l=0;for(e=this._utf8_encode(e);l<e.length;)r=(t=e.charCodeAt(l++))>>2,o=(3&t)<<4|(n=e.charCodeAt(l++))>>4,s=(15&n)<<2|(i=e.charCodeAt(l++))>>6,a=63&i,isNaN(n)?s=a=64:isNaN(i)&&(a=64),c=c+this._keyStr.charAt(r)+this._keyStr.charAt(o)+this._keyStr.charAt(s)+this._keyStr.charAt(a);return c},decode:function(e){var t,n,i,r,o,s,a="",c=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");c<e.length;)t=this._keyStr.indexOf(e.charAt(c++))<<2|(r=this._keyStr.indexOf(e.charAt(c++)))>>4,n=(15&r)<<4|(o=this._keyStr.indexOf(e.charAt(c++)))>>2,i=(3&o)<<6|(s=this._keyStr.indexOf(e.charAt(c++))),a+=String.fromCharCode(t),64!=o&&(a+=String.fromCharCode(n)),64!=s&&(a+=String.fromCharCode(i));return a=this._utf8_decode(a)},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var i=e.charCodeAt(n);i<128?t+=String.fromCharCode(i):i>127&&i<2048?(t+=String.fromCharCode(i>>6|192),t+=String.fromCharCode(63&i|128)):(t+=String.fromCharCode(i>>12|224),t+=String.fromCharCode(i>>6&63|128),t+=String.fromCharCode(63&i|128))}return t},_utf8_decode:function(e){for(var t="",n=0,i=0,r=0;n<e.length;)(i=e.charCodeAt(n))<128?(t+=String.fromCharCode(i),n++):i>191&&i<224?(r=e.charCodeAt(n+1),t+=String.fromCharCode((31&i)<<6|63&r),n+=2):(r=e.charCodeAt(n+1),c3=e.charCodeAt(n+2),t+=String.fromCharCode((15&i)<<12|(63&r)<<6|63&c3),n+=3);return t}},parse_url:function(e,t){for(var n=["source","scheme","authority","userInfo","user","pass","host","port","relative","path","directory","file","query","fragment"],i=this.php_js&&this.php_js.ini||{},r=i["phpjs.parse_url.mode"]&&i["phpjs.parse_url.mode"].local_value||"php",o={php:/^(?:([^:\/?#]+):)?(?:\/\/()(?:(?:()(?:([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?()(?:(()(?:(?:[^?#\/]*\/)*)()(?:[^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/\/?)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/},s=o[r].exec(e),a={},c=14;c--;)s[c]&&(a[n[c]]=s[c]);if(t)return a[t.replace("PHP_URL_","").toLowerCase()];if("php"!==r){var l=i["phpjs.parse_url.queryKey"]&&i["phpjs.parse_url.queryKey"].local_value||"queryKey";o=/(?:^|&)([^&=]*)=?([^&]*)/g,a[l]={},a[n[12]].replace(o,(function(e,t,n){t&&(a[l][t]=n)}))}return delete a.source,a},log:function(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);window.console&&window.console.crlog.apply(window.console,e)}}},2382:()=>{!function(){var e="undefined"!=typeof window?window:self;e.Glacier2=e.Glacier2||{};var t=Ice.Slice;IceMX.SessionMetrics=t.defineObject((function(e,t,n,i,r,o,s,a,c,l,d,u){IceMX.Metrics.call(this,e,t,n,i,r),this.forwardedClient=void 0!==o?o:0,this.forwardedServer=void 0!==s?s:0,this.routingTableSize=void 0!==a?a:0,this.queuedClient=void 0!==c?c:0,this.queuedServer=void 0!==l?l:0,this.overriddenClient=void 0!==d?d:0,this.overriddenServer=void 0!==u?u:0}),IceMX.Metrics,void 0,2,["::Ice::Object","::IceMX::Metrics","::IceMX::SessionMetrics"],-1,(function(e){e.writeInt(this.forwardedClient),e.writeInt(this.forwardedServer),e.writeInt(this.routingTableSize),e.writeInt(this.queuedClient),e.writeInt(this.queuedServer),e.writeInt(this.overriddenClient),e.writeInt(this.overriddenServer)}),(function(e){this.forwardedClient=e.readInt(),this.forwardedServer=e.readInt(),this.routingTableSize=e.readInt(),this.queuedClient=e.readInt(),this.queuedServer=e.readInt(),this.overriddenClient=e.readInt(),this.overriddenServer=e.readInt()}),!1),IceMX.SessionMetricsPrx=t.defineProxy(IceMX.MetricsPrx,IceMX.SessionMetrics.ice_staticId,void 0),t.defineOperations(IceMX.SessionMetrics,IceMX.SessionMetricsPrx),Glacier2.SSLInfo=t.defineStruct((function(e,t,n,i,r,o){this.remoteHost=void 0!==e?e:"",this.remotePort=void 0!==t?t:0,this.localHost=void 0!==n?n:"",this.localPort=void 0!==i?i:0,this.cipher=void 0!==r?r:"",this.certs=void 0!==o?o:null}),!0,(function(e){e.writeString(this.remoteHost),e.writeInt(this.remotePort),e.writeString(this.localHost),e.writeInt(this.localPort),e.writeString(this.cipher),Ice.StringSeqHelper.write(e,this.certs)}),(function(e){this.remoteHost=e.readString(),this.remotePort=e.readInt(),this.localHost=e.readString(),this.localPort=e.readInt(),this.cipher=e.readString(),this.certs=Ice.StringSeqHelper.read(e)}),12,!1),Glacier2.CannotCreateSessionException=t.defineUserException((function(e,t){Ice.UserException.call(this,t),this.reason=void 0!==e?e:""}),Ice.UserException,"Glacier2::CannotCreateSessionException",(function(e){e.writeString(this.reason)}),(function(e){this.reason=e.readString()}),!0,!1),Glacier2.Session=t.defineObject(void 0,Ice.Object,void 0,0,["::Glacier2::Session","::Ice::Object"],-1,void 0,void 0,!1),Glacier2.SessionPrx=t.defineProxy(Ice.ObjectPrx,Glacier2.Session.ice_staticId,void 0),t.defineOperations(Glacier2.Session,Glacier2.SessionPrx,{destroy:[,,,,,,,,,,]}),Glacier2.StringSet=t.defineObject(void 0,Ice.Object,void 0,0,["::Glacier2::StringSet","::Ice::Object"],-1,void 0,void 0,!1),Glacier2.StringSetPrx=t.defineProxy(Ice.ObjectPrx,Glacier2.StringSet.ice_staticId,void 0),t.defineOperations(Glacier2.StringSet,Glacier2.StringSetPrx,{add:[,2,2,,,,[["Ice.StringSeqHelper"]],,,,],remove:[,2,2,,,,[["Ice.StringSeqHelper"]],,,,],get:[,2,2,,,["Ice.StringSeqHelper"],,,,,]}),Glacier2.IdentitySet=t.defineObject(void 0,Ice.Object,void 0,0,["::Glacier2::IdentitySet","::Ice::Object"],-1,void 0,void 0,!1),Glacier2.IdentitySetPrx=t.defineProxy(Ice.ObjectPrx,Glacier2.IdentitySet.ice_staticId,void 0),t.defineOperations(Glacier2.IdentitySet,Glacier2.IdentitySetPrx,{add:[,2,2,,,,[["Ice.IdentitySeqHelper"]],,,,],remove:[,2,2,,,,[["Ice.IdentitySeqHelper"]],,,,],get:[,2,2,,,["Ice.IdentitySeqHelper"],,,,,]}),Glacier2.SessionControl=t.defineObject(void 0,Ice.Object,void 0,0,["::Glacier2::SessionControl","::Ice::Object"],-1,void 0,void 0,!1),Glacier2.SessionControlPrx=t.defineProxy(Ice.ObjectPrx,Glacier2.SessionControl.ice_staticId,void 0),t.defineOperations(Glacier2.SessionControl,Glacier2.SessionControlPrx,{categories:[,,,,,["Glacier2.StringSetPrx"],,,,,],adapterIds:[,,,,,["Glacier2.StringSetPrx"],,,,,],identities:[,,,,,["Glacier2.IdentitySetPrx"],,,,,],getSessionTimeout:[,2,2,,,[3],,,,,],destroy:[,,,,,,,,,,]}),Glacier2.SessionManager=t.defineObject(void 0,Ice.Object,void 0,0,["::Glacier2::SessionManager","::Ice::Object"],-1,void 0,void 0,!1),Glacier2.SessionManagerPrx=t.defineProxy(Ice.ObjectPrx,Glacier2.SessionManager.ice_staticId,void 0),t.defineOperations(Glacier2.SessionManager,Glacier2.SessionManagerPrx,{create:[,,,,2,["Glacier2.SessionPrx"],[[7],["Glacier2.SessionControlPrx"]],,[Glacier2.CannotCreateSessionException],,]}),Glacier2.SSLSessionManager=t.defineObject(void 0,Ice.Object,void 0,0,["::Glacier2::SSLSessionManager","::Ice::Object"],-1,void 0,void 0,!1),Glacier2.SSLSessionManagerPrx=t.defineProxy(Ice.ObjectPrx,Glacier2.SSLSessionManager.ice_staticId,void 0),t.defineOperations(Glacier2.SSLSessionManager,Glacier2.SSLSessionManagerPrx,{create:[,,,,2,["Glacier2.SessionPrx"],[[Glacier2.SSLInfo],["Glacier2.SessionControlPrx"]],,[Glacier2.CannotCreateSessionException],,]}),Glacier2.PermissionDeniedException=t.defineUserException((function(e,t){Ice.UserException.call(this,t),this.reason=void 0!==e?e:""}),Ice.UserException,"Glacier2::PermissionDeniedException",(function(e){e.writeString(this.reason)}),(function(e){this.reason=e.readString()}),!0,!1),Glacier2.PermissionsVerifier=t.defineObject(void 0,Ice.Object,void 0,0,["::Glacier2::PermissionsVerifier","::Ice::Object"],-1,void 0,void 0,!1),Glacier2.PermissionsVerifierPrx=t.defineProxy(Ice.ObjectPrx,Glacier2.PermissionsVerifier.ice_staticId,void 0),t.defineOperations(Glacier2.PermissionsVerifier,Glacier2.PermissionsVerifierPrx,{checkPermissions:[,2,1,,2,[1],[[7],[7]],[[7]],[Glacier2.PermissionDeniedException],,]}),Glacier2.SSLPermissionsVerifier=t.defineObject(void 0,Ice.Object,void 0,0,["::Glacier2::SSLPermissionsVerifier","::Ice::Object"],-1,void 0,void 0,!1),Glacier2.SSLPermissionsVerifierPrx=t.defineProxy(Ice.ObjectPrx,Glacier2.SSLPermissionsVerifier.ice_staticId,void 0),t.defineOperations(Glacier2.SSLPermissionsVerifier,Glacier2.SSLPermissionsVerifierPrx,{authorize:[,2,1,,2,[1],[[Glacier2.SSLInfo]],[[7]],[Glacier2.PermissionDeniedException],,]}),Glacier2.SessionNotExistException=t.defineUserException((function(e){Ice.UserException.call(this,e)}),Ice.UserException,"Glacier2::SessionNotExistException",void 0,void 0,!1,!1),Glacier2.Router=t.defineObject(void 0,Ice.Object,[Ice.Router],0,["::Glacier2::Router","::Ice::Object","::Ice::Router"],-1,void 0,void 0,!1),Glacier2.RouterPrx=t.defineProxy(Ice.ObjectPrx,Glacier2.Router.ice_staticId,[Ice.RouterPrx]),t.defineOperations(Glacier2.Router,Glacier2.RouterPrx,{getCategoryForClient:[,2,1,,,[7],,,,,],createSession:[,,,1,2,["Glacier2.SessionPrx"],[[7],[7]],,[Glacier2.CannotCreateSessionException,Glacier2.PermissionDeniedException],,],createSessionFromSecureConnection:[,,,1,2,["Glacier2.SessionPrx"],,,[Glacier2.CannotCreateSessionException,Glacier2.PermissionDeniedException],,],refreshSession:[,,,1,,,,,[Glacier2.SessionNotExistException],,],destroySession:[,,,,,,,,[Glacier2.SessionNotExistException],,],getSessionTimeout:[,2,1,,,[4],,,,,],getACMTimeout:[,2,1,,,[3],,,,,]}),e.Glacier2=Glacier2}()},2770:()=>{!function(){var e="undefined"!=typeof window?window:self;e.Ice=e.Ice||{},Ice.Slice=Ice.Slice||{},e.IceMX=e.IceMX||{},e.IceSSL=e.IceSSL||{};var t,n,i,r,o,s,a,c,l,d,u,h,f,_,p,C,g,m,R,v,I,y,S,E,b,w,P,x,T,M,D,O,A,V,k,N=Ice.Slice;!function(){var e="undefined"!=typeof window?window:self,t={module:function(t){var n=e[t];return void 0===n&&(n={},e[t]=n),n},require:function(t){return e},type:function(t){if(void 0!==t){for(var n=t.split("."),i=e,r=0,o=n.length;r<o;++r)if(void 0===(i=i[n[r]]))return;return i}}};Ice.__require=function(){return e},Ice.Slice=Ice.Slice||{},Ice.__M=t}(),function(){var e=Ice.__M,t=Ice.Slice,n=function(e,t){return e===t||null!=e&&null!=t&&(e.prototype===t.prototype&&("function"==typeof e.equals?e.equals(t):e instanceof Array&&i.equals(e,t,n)))},i={clone:function(e){return void 0===e?e:null===e?[]:e.slice()},equals:function(e,t,i){if(e.length!=t.length)return!1;var r,o,s=i||n;for(r=0,o=e.length;r<o;++r)if(!s.call(s,e[r],t[r]))return!1;return!0},shuffle:function(e){for(var t=e.length;t>1;--t){var n=e[t-1],i=Math.floor(Math.random()*t);e[t-1]=e[i],e[i]=n}},indexOf:function(e,t,n){if(null==n)return e.indexOf(t);for(var i=0;i<e.length;++i)if(n.call(n,e[i],t))return i;return-1},filter:function(e,t,n){n=void 0===n?t:n;for(var i=[],r=0;r<e.length;++r)t.call(n,e[r],r,e)&&i.push(e[r]);return i}};i.eq=n,t.defineSequence=function(t,n,i,r,o){var s=null;Object.defineProperty(t,n,{get:function(){return null===s&&(s=Ice.StreamHelpers.generateSeqHelper(e.type(i),r,e.type(o))),s}})},Ice.ArrayUtil=i}(),Ice.Class=function(){var e,t,n;1==arguments.length?t=arguments[0]:2==arguments.length&&(e=arguments[0],t=arguments[1]),void 0!==t&&(n=t.__init__)&&delete t.__init__;var i=n||function(){};if(void 0!==e&&(i.prototype=new e,i.prototype.constructor=i),void 0!==t)for(var r in t)i.prototype[r]=t[r];return i},function(){var e=Ice.Class,t=function(e,n,i,r){if(r+="  ",null===n)return"\n"+r+e+": (null)";if(void 0===n)return"\n"+r+e+": (undefined)";if("stack"==e||"function"==typeof n)return"";if("object"!=typeof n)return"\n"+r+e+': "'+n+'"';if(-1!=i.indexOf(n))return"\n"+r+e+": (recursive)";i.push(n);var o="\n"+r+e+":";for(var s in n)0!==e.indexOf("_")&&"function"!=typeof n[s]&&(o+=r+t(s,n[s],i,r));return o},n=e(Error,{__init__:function(e){e&&(this.ice_cause=e)},ice_name:function(){return"Ice::Exception"},toString:function(){if(this._inToStringAlready)return"";this._inToStringAlready=!0;var e=this.ice_name();for(var n in this)"_inToStringAlready"!=n&&(e+=t(n,this[n],[],""));return!0===Ice.__printStackTraces&&this.stack&&(e+="\n"+this.stack),this._inToStringAlready=!1,e}});n.captureStackTrace=function(e){var t=(new Error).stack;void 0!==t&&Object.defineProperty(e,"stack",{get:function(){return t}})},Ice.Exception=n;var i=e(n,{__init__:function(e){n.call(this,e),n.captureStackTrace(this)},ice_name:function(){return"Ice::LocalException"}});Ice.LocalException=i;var r=Ice.Slice;r.defineLocalException=function(e,t,n){var i=e;return i.prototype=new t,i.prototype.constructor=i,i.prototype.ice_name=function(){return n},i};var o=e(n,{__init__:function(e){n.call(this,e),n.captureStackTrace(this)},ice_name:function(){return"Ice::UserException"},__write:function(e){e.startWriteException(null),s(this,e,this.__mostDerivedType()),e.endWriteException()},__read:function(e){e.startReadException(),a(this,e,this.__mostDerivedType()),e.endReadException(!1)},__usesClasses:function(){return!1}});Ice.UserException=o;var s=function(e,t,n){void 0!==n&&n!==o&&(t.startWriteSlice(n.__id,-1,n.__parent===o),n.prototype.__writeMemberImpl&&n.prototype.__writeMemberImpl.call(e,t),t.endWriteSlice(),s(e,t,n.__parent))},a=function(e,t,n){void 0!==n&&n!==o&&(t.startReadSlice(),n.prototype.__readMemberImpl&&n.prototype.__readMemberImpl.call(e,t),t.endReadSlice(),a(e,t,n.__parent))},c=function(e){e.startWriteException(this.__slicedData),s(this,e,this.__mostDerivedType()),e.endWriteException()},l=function(e){e.startReadException(),a(this,e,this.__mostDerivedType()),this.__slicedData=e.endReadException(!0)};r.defineUserException=function(e,t,n,i,r,o,s){var a=e;return a.__parent=t,a.prototype=new t,a.__id="::"+n,a.prototype.ice_name=function(){return n},a.prototype.constructor=a,a.prototype.__mostDerivedType=function(){return a},o&&(a.prototype.__write=c,a.prototype.__read=l),a.prototype.__writeMemberImpl=i,a.prototype.__readMemberImpl=r,s&&(a.prototype.__usesClasses=function(){return!0}),a}}(),Ice.AsyncStatus={Queued:0,Sent:1},(t=Ice.Class({__init__:function(e,n){if(n<0||n>t.MAX_UINT32)throw new RangeError("Low word must be between 0 and 0xFFFFFFFF");if(e<0||e>t.MAX_UINT32)throw new RangeError("High word must be between 0 and 0xFFFFFFFF");this.high=e,this.low=n},hashCode:function(){return this.low},equals:function(e){return this===e||e instanceof t&&this.high===e.high&&this.low===e.low},toString:function(){return this.high+":"+this.low},toNumber:function(){if(0!=(this.high&t.SIGN_MASK)){if(this.high===t.MAX_UINT32&&0!==this.low)return-(1+~this.low);var e=1+~this.high;return e>t.HIGH_MAX?Number.NEGATIVE_INFINITY:e*t.HIGH_MASK*-1+this.low}return this.high>t.HIGH_MAX?Number.POSITIVE_INFINITY:this.high*t.HIGH_MASK+this.low}})).MAX_UINT32=4294967295,t.SIGN_MASK=2147483648,t.HIGH_MASK=4294967296,t.HIGH_MAX=2097151,Ice.Long=t,Ice.AssertionFailedException=Ice.Class(Error,{__init__:function(e){Error.call(this),Ice.Exception.captureStackTrace(this),this.message=e}}),Ice.Debug={assert:function(e,t){if(!e)throw Cr.Utils.log(void 0===t?"assertion failed":t),Cr.Utils.log(Error().stack),new Ice.AssertionFailedException(void 0===t?"assertion failed":t)}},Ice.DispatchStatus={DispatchOK:0,DispatchUserException:1,DispatchAsync:2},function(){var e=Ice.Class({__init__:function(e,t){this._name=e,this._value=t},equals:function(e){return this===e||e instanceof Object.getPrototypeOf(this).constructor&&this._value==e._value},hashCode:function(){return this._value},toString:function(){return this._name}});Ice.EnumBase=e;var t=e.prototype;try{Object.defineProperty(t,"name",{enumerable:!0,get:function(){return this._name}}),Object.defineProperty(t,"value",{enumerable:!0,get:function(){return this._value}})}catch(e){}var n=Ice.Class({__init__:function(e){this._enumType=e},write:function(e,t){this._enumType.__write(e,t)},writeOpt:function(e,t,n){this._enumType.__writeOpt(e,t,n)},read:function(e){return this._enumType.__read(e)},readOpt:function(e,t){return this._enumType.__readOpt(e,t)}});Ice.EnumHelper=n,Ice.Slice.defineEnum=function(t){var i=function(t,n){e.call(this,t,n)};(i.prototype=new e).constructor=i;var r=[],o=0,s=null;for(var a in t){var c=t[a][0],l=t[a][1],d=new i(c,l);r[l]=d,s||(s=d),Object.defineProperty(i,c,{enumerable:!0,value:d}),l>o&&(o=l)}return Object.defineProperty(i,"minWireSize",{get:function(){return 1}}),i.__write=function(e,t){t?e.writeEnum(t):e.writeEnum(s)},i.__read=function(e){return e.readEnum(i)},i.__writeOpt=function(e,t,n){void 0!==n&&e.writeOpt(t,Ice.OptionalFormat.Size)&&i.__write(e,n)},i.__readOpt=function(e,t){return e.readOptEnum(t,i)},i.__helper=new n(i),Object.defineProperty(i,"valueOf",{value:function(e){return void 0===e?i:r[e]}}),Object.defineProperty(i,"maxValue",{value:o}),Object.defineProperty(i.prototype,"maxValue",{value:o}),i}}(),Ice.generateUUID=function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?n:7&n|8).toString(16)}))},Ice.FormatType=Ice.Slice.defineEnum([["DefaultFormat",0],["CompactFormat",1],["SlicedFormat",2]]),function(){var e=Ice.Debug;function t(e,t,n){switch(e){case 92:t.push("\\\\");break;case 39:t.push("\\'");break;case 34:t.push('\\"');break;case 8:t.push("\\b");break;case 12:t.push("\\f");break;case 10:t.push("\\n");break;case 13:t.push("\\r");break;case 9:t.push("\\t");break;default:if(e>=32&&e<=126){var i=String.fromCharCode(e);null!==n&&-1!==n.indexOf(i)?(t.push("\\"),t.push(i)):t.push(i)}else{t.push("\\");for(var r=e.toString(8),o=r.length;o<3;o++)t.push("0");t.push(r)}}}function n(e,t){var n,i=e.charCodeAt(t);if(!(i>=32&&i<=126))throw n=t>0?"character after `"+e.substring(0,t)+"'":"first character",n+=" is not a printable ASCII character (ordinal "+i+")",new Error(n);return i}function i(t,i,r,o){if(e.assert(i>=0),e.assert(r<=t.length),i>=r)throw new Error("EOF while decoding string");var s;if("\\"!=t.charAt(i))s=n(t,i++);else{if(i+1==r)throw new Error("trailing backslash");switch(t.charAt(++i)){case"\\":case"'":case'"':s=t.charCodeAt(i++);break;case"b":++i,s="\b".charCodeAt(0);break;case"f":++i,s="\f".charCodeAt(0);break;case"n":++i,s="\n".charCodeAt(0);break;case"r":++i,s="\r".charCodeAt(0);break;case"t":++i,s="\t".charCodeAt(0);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":for(var a=0,c=0;c<3&&i<r;++c){var l=t.charAt(i++);if(-1=="01234567".indexOf(l)){--i;break}a=8*a+parseInt(l)}if(a>255){var d="octal value \\"+a.toString(8)+" ("+a+") is out of range";throw new Error(d)}s=a;break;default:s=n(t,i++)}}return o.value=i,s}Ice.StringUtil={findFirstOf:function(e,t,n){n=void 0===n?0:n;for(var i=e.length,r=n;r<i;r++){var o=e.charAt(r);if(-1!=t.indexOf(o))return r}return-1},findFirstNotOf:function(e,t,n){n=void 0===n?0:n;for(var i=e.length,r=n;r<i;r++){var o=e.charAt(r);if(-1==t.indexOf(o))return r}return-1},escapeString:function(e,n){var i,r;if(null!==(n=void 0===n?null:n))for(i=0,r=n.length;i<r;++i)if(n.charCodeAt(i)<32||n.charCodeAt(i)>126)throw new Error("special characters must be in ASCII range 32-126");var o,s=[];for(i=0,r=e.length;i<r;++i)(o=e.charCodeAt(i))<128?t(o,s,n):o>127&&o<2048?(t(o>>6|192,s,n),t(63&o|128,s,n)):(t(o>>12|224,s,n),t(o>>6&63|128,s,n),t(63&o|128,s,n));return s.join("")},unescapeString:function(t,n,r){n=void 0===n?0:n,r=void 0===r?t.length:r,e.assert(n>=0&&n<=r&&r<=t.length);var o=[];return function(e,t,n,r){var o,s,a,c={value:0};for(;t<n;)o=i(e,t,n,c),t=c.value,o<128?r.push(String.fromCharCode(o)):o>191&&o<224?(s=i(e,t,n,c),t=c.value,r.push(String.fromCharCode((31&o)<<6|63&s))):(s=i(e,t,n,c),a=i(e,t=c.value,n,c),t=c.value,r.push(String.fromCharCode((15&o)<<12|(63&s)<<6|63&a)))}(t,n,r,o),o.join("")},splitString:function(e,t){for(var n=[],i="",r=0,o=null;r<e.length;)if(null!==o||'"'!==e.charAt(r)&&"'"!==e.charAt(r)){if(null===o&&"\\"===e.charAt(r)&&r+1<e.length&&('"'===e.charAt(r+1)||"'"===e.charAt(r+1)))++r;else if(null!==o&&"\\"===e.charAt(r)&&r+1<e.length&&e.charAt(r+1)===o)++r;else{if(null!==o&&e.charAt(r)===o){++r,o=null;continue}if(-1!==t.indexOf(e.charAt(r))&&null===o){++r,i.length>0&&(n.push(i),i="");continue}}r<e.length&&(i+=e.charAt(r++))}else o=e.charAt(r++);return i.length>0&&n.push(i),null!==o?null:n},checkQuote:function(e,t){t=void 0===t?0:t;var n=e.charAt(t);if('"'==n||"'"==n){t++;for(var i,r=e.length;t<r&&-1!=(i=e.indexOf(n,t));){if("\\"!=e.charAt(i-1))return i;t=i+1}return-1}return 0},hashCode:function(e){for(var t=0,n=e.length,i=0;i<n;i++)t=31*t+e.charCodeAt(i);return t},toInt:function(e){var t=parseInt(e,10);if(isNaN(t))throw new Error("conversion of `"+e+"' to int failed");return t}}}(),function(){var e=Ice.__M,t=Ice.StringUtil;function n(e,t,n,i,r){for(var o=e._table[r];null!==o;o=o._nextInBucket)if(o._hash===i&&e.keysEqual(t,o._key))return void(o._value=n);e.add(t,n,i,r)}function i(e,t){return e===t}var r=Ice.Class({__init__:function(e,t){var n,o,s,a,c;if("function"==typeof e?(o=e,s=t):e instanceof r&&(o=(n=e).keyComparator,s=n.valueComparator),this._size=0,this._head=null,this._initialCapacity=32,this._loadFactor=.75,this._table=[],this._keyComparator="function"==typeof o?o:i,this._valueComparator="function"==typeof s?s:i,n instanceof r&&n._size>0){for(this._threshold=n._threshold,c=n._table.length,this._table.length=c,a=0;a<c;a++)this._table[a]=null;this.merge(n)}else for(this._threshold=this._initialCapacity*this._loadFactor,a=0;a<this._initialCapacity;a++)this._table[a]=null},set:function(e,t){var i=this.computeHash(e),r=this.hashIndex(i.hash,this._table.length);return n(this,i.key,t,i.hash,r)},get:function(e){var t=this.computeHash(e),n=this.findEntry(t.key,t.hash);return void 0!==n?n._value:void 0},has:function(e){var t=this.computeHash(e);return void 0!==this.findEntry(t.key,t.hash)},del:function(e){for(var t=this.computeHash(e),n=this.hashIndex(t.hash,this._table.length),i=null,r=this._table[n];null!==r;r=r._nextInBucket){if(r._hash===t.hash&&this.keysEqual(t.key,r._key))return this._size--,null!==i?i._nextInBucket=r._nextInBucket:this._table[n]=r._nextInBucket,null!==r._prev&&(r._prev._next=r._next),null!==r._next&&(r._next._prev=r._prev),this._head===r&&(this._head=r._next),r._value;i=r}},clear:function(){for(var e=0;e<this._table.length;++e)this._table[e]=null;this._head=null,this._size=0},forEach:function(e,t){t=void 0===t?e:t;for(var n=this._head;null!==n;n=n._next)e.call(t,n._key,n._value)},keys:function(){for(var e=[],t=0,n=this._head;null!==n;n=n._next)e[t++]=n._key;return e},values:function(){for(var e=[],t=0,n=this._head;null!==n;n=n._next)e[t++]=n._value;return e},equals:function(e,t){if(null===e||!(e instanceof r)||this._size!==e._size)return!1;for(var n=this,i=t||function(e,t){return n._valueComparator.call(n._valueComparator,e,t)},o=this._head;null!==o;o=o._next){var s=e.findEntry(o._key,o._hash);if(void 0===s||!i(o._value,s._value))return!1}return!0},clone:function(){return new r(this)},merge:function(e){for(var t=e._head;null!==t;t=t._next)n(this,t._key,t._value,t._hash,this.hashIndex(t._hash,this._table.length))},add:function(e,t,n,i){var r=Object.create(null,{key:{enumerable:!0,get:function(){return this._key}},value:{enumerable:!0,get:function(){return this._value}},next:{enumerable:!0,get:function(){return this._next}},_key:{enumerable:!1,writable:!0,value:e},_value:{enumerable:!1,writable:!0,value:t},_prev:{enumerable:!1,writable:!0,value:null},_next:{enumerable:!1,writable:!0,value:null},_nextInBucket:{enumerable:!1,writable:!0,value:null},_hash:{enumerable:!1,writable:!0,value:n}});r._nextInBucket=this._table[i],this._table[i]=r,r._next=this._head,null!==this._head&&(this._head._prev=r),this._head=r,this._size++,this._size>=this._threshold&&this.resize(2*this._table.length)},resize:function(e){this._table;for(var t=[],n=0;n<e;n++)t[n]=null;for(var i=this._head;null!==i;i=i._next){var r=this.hashIndex(i._hash,e);i._nextInBucket=t[r],t[r]=i}this._table=t,this._threshold=e*this._loadFactor},findEntry:function(e,t){for(var n=this.hashIndex(t,this._table.length),i=this._table[n];null!==i;i=i._nextInBucket)if(i._hash===t&&this.keysEqual(e,i._key))return i},hashIndex:function(e,t){return e&t-1},computeHash:function(e){var n;if(0===e||-0===e)return{key:0,hash:0};if(null===e)return null===r._null&&(n=Ice.generateUUID(),r._null={key:n,hash:t.hashCode(n)}),r._null;if(void 0===e)throw new Error("cannot compute hash for undefined value");if("function"==typeof e.hashCode)return{key:e,hash:e.hashCode()};var i=typeof e;if("string"===i||e instanceof String)return{key:e,hash:t.hashCode(e)};if("number"===i||e instanceof Number)return isNaN(e)?(null===r._nan&&(n=Ice.generateUUID(),r._nan={key:n,hash:t.hashCode(n)}),r._nan):{key:e,hash:e.toFixed(0)};if("boolean"===i||e instanceof Boolean)return{key:e,hash:e?1:0};throw new Error("cannot compute hash for value of type "+i)},keysEqual:function(e,t){return this._keyComparator.call(this._keyComparator,e,t)}});Ice.HashMap=r,r.compareEquals=function(e,t){return e===t||null!=e&&null!=t&&e.equals(t)},r.compareIdentity=i,r._null=null,r._nan=null;var o=r.prototype;Object.defineProperty(o,"size",{get:function(){return this._size}}),Object.defineProperty(o,"entries",{get:function(){return this._head}}),Ice.Slice.defineDictionary=function(t,n,i,o,s,a,c,l,d){t[n]=void 0!==c||void 0!==d?function(e){return new r(e||c,d)}:r;var u=null;Object.defineProperty(t,i,{get:function(){return null===u&&(u=Ice.StreamHelpers.generateDictHelper(e.type(o),e.type(s),a,e.type(l),t[n])),u}})}}(),Ice.OptionalFormat=Ice.Slice.defineEnum([["F1",0],["F2",1],["F4",2],["F8",3],["Size",4],["VSize",5],["FSize",6],["Class",7]]),function(){var e=Ice.Class,t=Object.defineProperty,n=(Ice.HashMap,Ice.OptionalFormat),i={FSizeOptHelper:function(){this.writeOpt=function(e,t,i){if(void 0!==i&&e.writeOpt(t,n.FSize)){var r=e.startSize();this.write(e,i),e.endSize(r)}},this.readOpt=function(e,t){var i;return e.readOpt(t,n.FSize)&&(e.skip(4),i=this.read(e)),i}},VSizeOptHelper:function(){this.writeOpt=function(e,t,i){void 0!==i&&e.writeOpt(t,n.VSize)&&(e.writeSize(this.minWireSize),this.write(e,i))},this.readOpt=function(e,t){var i;return e.readOpt(t,n.VSize)&&(e.skipSize(),i=this.read(e)),i}},VSizeContainerOptHelper:function(e){this.writeOpt=function(t,i,r){if(void 0!==r&&t.writeOpt(i,n.VSize)){var o=this.size(r);t.writeSize(o>254?o*e+5:o*e+1),this.write(t,r)}},this.readOpt=function(e,t){var i;return e.readOpt(t,n.VSize)&&(e.skipSize(),i=this.read(e)),i}},VSizeContainer1OptHelper:function(){this.writeOpt=function(e,t,i){void 0!==i&&e.writeOpt(t,n.VSize)&&this.write(e,i)},this.readOpt=function(e,t){var i;return e.readOpt(t,n.VSize)&&(i=this.read(e)),i}}},r=e({write:function(e,t){if(null===t||0===t.length)e.writeSize(0);else{var n=this.elementHelper;e.writeSize(t.length);for(var i=0;i<t.length;++i)n.write(e,t[i])}},read:function(e){var t=this.elementHelper,n=e.readAndCheckSeqSize(t.minWireSize),i=[];i.length=n;for(var r=0;r<n;++r)i[r]=t.read(e);return i},size:function(e){return null==e?0:e.length}});t(r.prototype,"minWireSize",{get:function(){return 1}});var o=new r;o.write=function(e,t){return e.writeByteSeq(t)},o.read=function(e){return e.readByteSeq()},t(o,"elementHelper",{get:function(){return Ice.ByteHelper}}),i.VSizeContainer1OptHelper.call(o);var s=function(e){var t=e.readAndCheckSeqSize(1),n=[];n.length=t;for(var i=this.elementType,r=function(t){e.readObject((function(e){n[t]=e}),i)},o=0;o<t;++o)r(o);return n};i.generateSeqHelper=function(e,n,a){if(e===Ice.ByteHelper)return o;var c=new r;return n?1===e.minWireSize?i.VSizeContainer1OptHelper.call(c):i.VSizeContainerOptHelper.call(c,e.minWireSize):i.FSizeOptHelper.call(c),t(c,"elementHelper",{get:function(){return e}}),e==Ice.ObjectHelper&&(t(c,"elementType",{get:function(){return a}}),c.read=s),c};var a=e({write:function(e,t){if(null==t||0===t.size)e.writeSize(0);else{var n=this.keyHelper,i=this.valueHelper;e.writeSize(t.size);for(var r=t.entries;null!==r;r=r.next)n.write(e,r.key),i.write(e,r.value)}},read:function(e){for(var t=new(0,this.mapType),n=e.readSize(),i=this.keyHelper,r=this.valueHelper,o=0;o<n;++o)t.set(i.read(e),r.read(e));return t},size:function(e){return null==e?0:e.size}});Object.defineProperty(a.prototype,"minWireSize",{get:function(){return 1}});var c=function(e){for(var t=e.readSize(),n=new(0,this.mapType),i=this.valueType,r=function(t){e.readObject((function(e){n.set(t,e)}),i)},o=this.keyHelper,s=0;s<t;++s)r(o.read(e));return n};i.generateDictHelper=function(e,n,r,o,s){var l=new a;return r?i.VSizeContainerOptHelper.call(l,e.minWireSize+n.minWireSize):i.FSizeOptHelper.call(l),t(l,"mapType",{get:function(){return s}}),t(l,"keyHelper",{get:function(){return e}}),t(l,"valueHelper",{get:function(){return n}}),n==Ice.ObjectHelper&&(t(l,"valueType",{get:function(){return o}}),l.read=c),l},Ice.StreamHelpers=i}(),function(){var e,t=Ice.HashMap,n=Number.MAX_SAFE_INTEGER||9007199254740991,i=new t,r={},o=0,s=function(){return o==n&&(o=0),o++};r.setTimeout=function(t,n){var r=s();return i.set(r,t),e.postMessage({type:0,id:r,ms:n}),r},r.clearTimeout=function(t){i.del(t),e.postMessage({type:3,id:t})},r.setInterval=function(t,n){var r=s();return i.set(r,t),e.postMessage({type:1,id:r,ms:n}),r},r.clearInterval=function(t){i.del(t),e.postMessage({type:4,id:t})},r.setImmediate=function(t){var n=s();return i.set(n,t),e.postMessage({type:2,id:n}),n},r.onmessage=function(e){var t;void 0!==(t=1===e.data.type?i.get(e.data.id):i.del(e.data.id))&&t.call()};var a;if(void 0===e)try{a=URL.createObjectURL(new Blob(["("+function(){var e={};self.onmessage=function(t){0==t.data.type?e[t.data.id]=setTimeout((function(){self.postMessage(t.data)}),t.data.ms):1==t.data.type?e[t.data.id]=setInterval((function(){self.postMessage(t.data)}),t.data.ms):2==t.data.type?self.postMessage(t.data):3==t.data.type?(clearTimeout(e[t.data.id]),delete e[t.data.id]):4==t.data.type&&(clearInterval(e[t.data.id]),delete e[t.data.id])}}.toString()+"());"],{type:"text/javascript"})),(e=new Worker(a)).onmessage=r.onmessage,Ice.Timer=r}catch(e){URL.revokeObjectURL(a),Ice.Timer=function(){var e={setTimeout:function(){setTimeout.apply(null,arguments)},clearTimeout:function(){clearTimeout.apply(null,arguments)},setInterval:function(){setInterval.apply(null,arguments)},clearInterval:function(){clearInterval.apply(null,arguments)}};return e.setImmediate="function"==typeof setImmediate?function(){setImmediate.apply(null,arguments)}:function(){setTimeout.apply(null,arguments)},e}()}}(),function(){var e=Ice.Class,t=0,n=e({__init__:function(){this.__address=t++},hashCode:function(){return this.__address},ice_isA:function(e,t){return this.__mostDerivedType().__ids.indexOf(e)>=0},ice_ping:function(e){},ice_ids:function(e){return this.__mostDerivedType().__ids},ice_id:function(e){return this.__mostDerivedType().__id},toString:function(){return"[object "+this.ice_id()+"]"},ice_preMarshal:function(){},ice_postUnmarshal:function(){},__write:function(e){e.startWriteObject(null),i(this,e,this.__mostDerivedType()),e.endWriteObject()},__read:function(e){e.startReadObject(),r(this,e,this.__mostDerivedType()),e.endReadObject(!1)},ice_instanceof:function(e){return!!e&&(this instanceof e||this.__mostDerivedType().__instanceof(e))},__mostDerivedType:function(){return n},equals:function(e){return this===e}});n.write=function(e,t){e.writeObject(t)},n.writeOpt=function(e,t,n){e.writeOptObject(t,n)},n.read=function(e){var t={value:null};return e.readObject((function(e){t.value=e}),n),t},n.readOpt=function(e,t){var i={value:void 0};return e.readOptObject(t,(function(e){i.value=e}),n),i},n.ice_staticId=function(){return n.__id},n.__instanceof=function(e){if(e===this)return!0;for(var t in this.__implements)if(this.__implements[t].__instanceof(e))return!0;return!!this.__parent&&this.__parent.__instanceof(e)},n.__ids=["::Ice::Object"],n.__id=n.__ids[0],n.__compactId=-1,n.__preserved=!1;var i=function(e,t,r){void 0!==r&&r!==n&&(t.startWriteSlice(r.__id,r.__compactId,r.__parent===n),r.prototype.__writeMemberImpl&&r.prototype.__writeMemberImpl.call(e,t),t.endWriteSlice(),i(e,t,r.__parent))},r=function(e,t,i){void 0!==i&&i!==n&&(t.startReadSlice(),i.prototype.__readMemberImpl&&i.prototype.__readMemberImpl.call(e,t),t.endReadSlice(),r(e,t,i.__parent))},o=function(e){e.startWriteObject(this.__slicedData),i(this,e,this.__mostDerivedType()),e.endWriteObject()},s=function(e){e.startReadObject(),r(this,e,this.__mostDerivedType()),this.__slicedData=e.endReadObject(!0)};Ice.Object=n;var a=Ice.Slice;a.defineLocalObject=function(e,t){var n=e||function(){};return void 0!==t&&(n.prototype=new t,n.__parent=t,n.prototype.constructor=e),n},a.defineObject=function(e,t,i,r,a,c,l,d,u){var h=e||function(){};return h.prototype=new t,h.__parent=t,h.__ids=a,h.__id=a[r],h.__compactId=c,h.__instanceof=n.__instanceof,h.__implements=i,h.write=function(e,t){e.writeObject(t)},h.writeOpt=function(e,t,n){e.writeOptObject(t,n)},h.read=function(e){var t={value:null};return e.readObject((function(e){t.value=e}),h),t},h.readOpt=function(e,t){var n={value:void 0};return e.readOptObject(t,(function(e){n.value=e}),h),n},h.ice_staticId=function(){return a[r]},h.prototype.constructor=h,h.prototype.__mostDerivedType=function(){return h},u&&(h.prototype.__write=o,h.prototype.__read=s),h.prototype.__writeMemberImpl=l,h.prototype.__readMemberImpl=d,h}}(),n=Ice.StringUtil,Ice.HashUtil={addBoolean:function(e,t){return(e<<5)+e^(t?0:1)},addString:function(e,t){return null!=t&&(e=(e<<5)+e^n.hashCode(t)),e},addNumber:function(e,t){return(e<<5)+e^t},addHashable:function(e,t){return null!=t&&(e=(e<<5)+e^t.hashCode()),e},addArray:function(e,t,n){if(null!=t)for(var i=0;i<t.length;++i)e=n(e,t[i]);return e}},i=Ice.ArrayUtil,r=i.eq,o=function(e){if(this===e)return!0;if(null==e)return!1;if(this.prototype!==e.prototype)return!1;var t,n;for(var i in this)if(t=this[i],n=e[i],"function"!=typeof t&&!r(t,n))return!1;return!0},s=function(){var e,t=new this.constructor;for(var n in this)if(null==(e=this[n]))t[n]=e;else{if("function"==typeof e)continue;"function"==typeof e.clone?t[n]=e.clone():t[n]=e instanceof Array?i.clone(e):e}return t},a=function(e,t){if("function"==typeof t.hashCode)return Ice.HashUtil.addHashable(e,t);if(t instanceof Array)return Ice.HashUtil.addArray(e,t,a);var n=typeof t;return t instanceof String||"string"==n?Ice.HashUtil.addString(e,t):t instanceof Number||"number"==n?Ice.HashUtil.addNumber(e,t):t instanceof Boolean||"boolean"==n?Ice.HashUtil.addBoolean(e,t):void 0},c=function(){var e,t=5381;for(var n in this)null!=(e=this[n])&&"function"!=typeof e&&(t=a(t,e));return t},Ice.Slice.defineStruct=function(e,t,n,i,r,a){var l=e;return l.prototype.clone=s,l.prototype.equals=o,t&&(l.prototype.hashCode=c),i&&n&&(l.prototype.__write=n,l.prototype.__read=i,l.write=function(e,t){t||(l.prototype._nullMarshalValue||(l.prototype._nullMarshalValue=new this),t=l.prototype._nullMarshalValue),t.__write(e)},l.read=function(e,t){return t&&t instanceof this||(t=new this),t.__read(e),t},Object.defineProperty(l,"minWireSize",{get:function(){return r}}),a?Ice.StreamHelpers.VSizeOptHelper.call(l):Ice.StreamHelpers.FSizeOptHelper.call(l)),l},Ice.CompactIdRegistry=new Ice.HashMap,N.defineSequence(Ice,"BoolSeqHelper","Ice.BoolHelper",!0),N.defineSequence(Ice,"ByteSeqHelper","Ice.ByteHelper",!0),N.defineSequence(Ice,"ShortSeqHelper","Ice.ShortHelper",!0),N.defineSequence(Ice,"IntSeqHelper","Ice.IntHelper",!0),N.defineSequence(Ice,"LongSeqHelper","Ice.LongHelper",!0),N.defineSequence(Ice,"FloatSeqHelper","Ice.FloatHelper",!0),N.defineSequence(Ice,"DoubleSeqHelper","Ice.DoubleHelper",!0),N.defineSequence(Ice,"StringSeqHelper","Ice.StringHelper",!1),N.defineSequence(Ice,"ObjectSeqHelper","Ice.ObjectHelper",!1,"Ice.Object"),N.defineSequence(Ice,"ObjectProxySeqHelper","Ice.ObjectPrx",!1),Ice.ReferenceMode={ModeTwoway:0,ModeOneway:1,ModeBatchOneway:2,ModeDatagram:3,ModeBatchDatagram:4,ModeLast:4},function(){var e=Ice.Long;ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=function(e,t){var n=new Uint8Array(this);t=void 0===t?n.length:t;for(var i=new Uint8Array(new ArrayBuffer(t-e)),r=0,o=i.length;r<o;r++)i[r]=n[r+e];return i.buffer});var t="BufferOverflowException",n="BufferUnderflowException",i="IndexOutOfBoundsException",r=Ice.Class({__init__:function(e){void 0!==e?(this.b=e,this.v=new DataView(this.b)):(this.b=null,this.v=null),this._position=0,this._limit=0,this._shrinkCounter=0},empty:function(){return 0===this._limit},resize:function(e){0===e?this.clear():e>this.capacity&&this.reserve(e),this._limit=e},clear:function(){this.b=null,this.v=null,this._position=0,this._limit=0},expand:function(e){var t=0===this.capacity?e:this._position+e;t>this._limit&&this.resize(t)},reset:function(){this._limit>0&&2*this._limit<this.capacity?++this._shrinkCounter>2&&(this.reserve(this._limit),this._shrinkCounter=0):this._shrinkCounter=0,this._limit=0,this._position=0},reserve:function(e){if(e>this.capacity){var t=Math.max(e,2*this.capacity);if(t=Math.max(1024,t),this.b){var n=new Uint8Array(t);n.set(new Uint8Array(this.b)),this.b=n.buffer}else this.b=new ArrayBuffer(t);this.v=new DataView(this.b)}else{if(!(e<this.capacity))return;this.b=this.b.slice(0,this.capacity),this.v=new DataView(this.b)}},put:function(e){if(this._position===this._limit)throw new Error(t);this.v.setUint8(this._position,e),this._position++},putAt:function(e,t){if(e>=this._limit)throw new Error(i);this.v.setUint8(e,t)},putArray:function(e){if(!(e instanceof Uint8Array))throw new TypeError("argument is not a Uint8Array");if(e.byteLength>0){if(this._position+e.length>this._limit)throw new Error(t);new Uint8Array(this.b,0,this.b.byteLength).set(e,this._position),this._position+=e.byteLength}},putShort:function(e){if(this._position+2>this._limit)throw new Error(t);this.v.setInt16(this._position,e,!0),this._position+=2},putInt:function(e){if(this._position+4>this._limit)throw new Error(t);this.v.setInt32(this._position,e,!0),this._position+=4},putIntAt:function(e,t){if(e+4>this._limit||e<0)throw new Error(i);this.v.setInt32(e,t,!0)},putFloat:function(e){if(this._position+4>this._limit)throw new Error(t);this.v.setFloat32(this._position,e,!0),this._position+=4},putDouble:function(e){if(this._position+8>this._limit)throw new Error(t);this.v.setFloat64(this._position,e,!0),this._position+=8},putLong:function(e){if(this._position+8>this._limit)throw new Error(t);this.v.setInt32(this._position,e.low,!0),this._position+=4,this.v.setInt32(this._position,e.high,!0),this._position+=4},writeString:function(e,t){var n=unescape(encodeURIComponent(t));e.writeSize(n.length),e.expand(n.length),this.putString(n,n.length)},putString:function(e,n){if(this._position+n>this._limit)throw new Error(t);for(var i=0;i<n;++i)this.v.setUint8(this._position,e.charCodeAt(i)),this._position++},get:function(){if(this._position>=this._limit)throw new Error(n);var e=this.v.getUint8(this._position);return this._position++,e},getAt:function(e){if(e<0||e>=this._limit)throw new Error(i);return this.v.getUint8(e)},getArray:function(e){if(this._position+e>this._limit)throw new Error(n);var t=this.b.slice(this._position,this._position+e);return this._position+=e,new Uint8Array(t)},getArrayAt:function(e,t){if(e+t>this._limit)throw new Error(n);return t=void 0===t?this.b.byteLength-e:t,new Uint8Array(this.b.slice(e,e+t))},getShort:function(){if(this._limit-this._position<2)throw new Error(n);var e=this.v.getInt16(this._position,!0);return this._position+=2,e},getInt:function(){if(this._limit-this._position<4)throw new Error(n);var e=this.v.getInt32(this._position,!0);return this._position+=4,e},getFloat:function(){if(this._limit-this._position<4)throw new Error(n);var e=this.v.getFloat32(this._position,!0);return this._position+=4,e},getDouble:function(){if(this._limit-this._position<8)throw new Error(n);var e=this.v.getFloat64(this._position,!0);return this._position+=8,e},getLong:function(){if(this._limit-this._position<8)throw new Error(n);var t=new e;return t.low=this.v.getUint32(this._position,!0),this._position+=4,t.high=this.v.getUint32(this._position,!0),this._position+=4,t},getString:function(e){if(this._position+e>this._limit)throw new Error(n);for(var t=new DataView(this.b,this._position,e),i="",r=0;r<e;++r)i+=String.fromCharCode(t.getUint8(r));return this._position+=e,i=decodeURIComponent(escape(i))}}),o=r.prototype;Object.defineProperty(o,"position",{get:function(){return this._position},set:function(e){e>=0&&e<=this._limit&&(this._position=e)}}),Object.defineProperty(o,"limit",{get:function(){return this._limit},set:function(e){e<=this.capacity&&(this._limit=e,this._position>e&&(this._position=e))}}),Object.defineProperty(o,"capacity",{get:function(){return null===this.b?0:this.b.byteLength}}),Object.defineProperty(o,"remaining",{get:function(){return this._limit-this._position}}),r.createNative=function(e){return void 0===e?new Uint8Array(0):new Uint8Array(e)},Ice.Buffer=r}(),function(){var e=Ice.Buffer,t={},n="A".charCodeAt(0),i="a".charCodeAt(0),r="0".charCodeAt(0);function o(e){return e<26?String.fromCharCode(n+e):e<52?String.fromCharCode(i+(e-26)):e<62?String.fromCharCode(r+(e-52)):62==e?"+":"/"}function s(e){return e>="A"&&e<="Z"?e.charCodeAt(0)-n:e>="a"&&e<="z"?e.charCodeAt(0)-i+26:e>="0"&&e<="9"?e.charCodeAt(0)-r+52:"+"==e?62:63}t.encode=function(e){if(null===e||0===e.length)return"";e.length;for(var t,n,i,r,s,a,c,l=[],d=0;d<e.length;d+=3)t=255&e[d],n=0,i=0,d+1<e.length&&(n=255&e[d+1]),d+2<e.length&&(i=255&e[d+2]),r=t>>2&255,s=255&((3&t)<<4|n>>4),a=255&((15&n)<<2|i>>6),c=63&i,l.push(o(r)),l.push(o(s)),d+1<e.length?l.push(o(a)):l.push("="),d+2<e.length?l.push(o(c)):l.push("=");for(var u=l.join(""),h=[],f=0;u.length-f>76;)h.push(u.substring(f,f+76)),h.push("\r\n"),f+=76;return h.push(u.substring(f)),h.join("")},t.decode=function(n){for(var i=[],r=0;r<n.length;r++){var o=n.charAt(r);t.isBase64(o)&&i.push(o)}if(0===i.length)return null;var a,c,l,d,u,h,f,_,p=3*i.length/4+1,C=new e;C.resize(p);for(var g=0;g<i.length;g+=4)"A",h="A",f="A",_="A",u=i[g],g+1<i.length&&(h=i[g+1]),g+2<i.length&&(f=i[g+2]),g+3<i.length&&(_=i[g+3]),a=255&s(u),c=255&s(h),l=255&s(f),d=255&s(_),C.put(a<<2|c>>4),"="!=f&&C.put((15&c)<<4|l>>2),"="!=_&&C.put((3&l)<<6|d);return C.remaining>0?C.getArrayAt(0,C.position):C.getArrayAt(0)},t.isBase64=function(e){return e>="A"&&e<="Z"||(e>="a"&&e<="z"||(e>="0"&&e<="9"||("+"==e||("/"==e||"="==e))))},Ice.Base64=t}(),Ice.Identity=N.defineStruct((function(e,t){this.name=void 0!==e?e:"",this.category=void 0!==t?t:""}),!0,(function(e){e.writeString(this.name),e.writeString(this.category)}),(function(e){this.name=e.readString(),this.category=e.readString()}),2,!1),N.defineDictionary(Ice,"ObjectDict","ObjectDictHelper","Ice.Identity","Ice.ObjectHelper",!1,Ice.HashMap.compareEquals,"Ice.Object"),N.defineSequence(Ice,"IdentitySeqHelper","Ice.Identity",!1),Ice.ProtocolVersion=N.defineStruct((function(e,t){this.major=void 0!==e?e:0,this.minor=void 0!==t?t:0}),!0,(function(e){e.writeByte(this.major),e.writeByte(this.minor)}),(function(e){this.major=e.readByte(),this.minor=e.readByte()}),2,!0),Ice.EncodingVersion=N.defineStruct((function(e,t){this.major=void 0!==e?e:0,this.minor=void 0!==t?t:0}),!0,(function(e){e.writeByte(this.major),e.writeByte(this.minor)}),(function(e){this.major=e.readByte(),this.minor=e.readByte()}),2,!0),function(){Ice.SliceInfo=function(){this.typeId="",this.compactId=-1,this.bytes=[],this.objects=[],this.hasOptionalMembers=!1,this.isLastSlice=!1};Ice.SlicedData=function(e){this.slices=e};var e=Ice.Class(Ice.Object,{__init__:function(e){this._unknownTypeId=e},getUnknownTypeId:function(){return this._unknownTypeId},__write:function(e){e.startWriteObject(this._slicedData),e.endWriteObject()},__read:function(e){e.startReadObject(),this._slicedData=e.endReadObject(!0)}});Ice.UnknownSlicedObject=e}(),function(){var e=Ice.HashMap,t=Ice.Debug,n=Ice.Class({__init__:function(){this._adapterEndpointsTable=new e,this._objectTable=new e(e.compareEquals)},clear:function(){this._adapterEndpointsTable.clear(),this._objectTable.clear()},getAdapterEndpoints:function(e,t,n){if(0===t)return n.value=!1,null;var i=this._adapterEndpointsTable.get(e);return void 0!==i?(n.value=this.checkTTL(i.time,t),i.endpoints):(n.value=!1,null)},addAdapterEndpoints:function(e,t){this._adapterEndpointsTable.set(e,new i(Date.now(),t))},removeAdapterEndpoints:function(e){var t=this._adapterEndpointsTable.get(e);return this._adapterEndpointsTable.del(e),void 0!==t?t.endpoints:null},getObjectReference:function(e,t,n){if(0===t)return n.value=!1,null;var i=this._objectTable.get(e);return void 0!==i?(n.value=this.checkTTL(i.time,t),i.reference):(n.value=!1,null)},addObjectReference:function(e,t){this._objectTable.set(e,new r(Date.now(),t))},removeObjectReference:function(e){var t=this._objectTable.get(e);return this._objectTable.del(e),void 0!==t?t.reference:null},checkTTL:function(e,n){return t.assert(0!==n),n<0||Date.now()-e<=1e3*n}});Ice.LocatorTable=n;var i=function(e,t){this.time=e,this.endpoints=t},r=function(e,t){this.time=e,this.reference=t}}(),function(){var e=Ice.Timer,t=0,n=1,i=2,r=function(e,t){var i=e.__state===n?t.onResponse:t.onException;try{if("function"!=typeof i)t.promise.setState(e.__state,e._args);else{var r=i.apply(null,e._args);r&&"function"==typeof r.then?r.then((function(){var e=arguments;t.promise.succeed.apply(t.promise,e)}),(function(){var e=arguments;t.promise.fail.apply(t.promise,e)})):t.promise.succeed(r)}}catch(e){t.promise.fail.call(t.promise,e)}},o=Ice.Class({__init__:function(){this.__state=t,this.__listeners=[]},then:function(t,n){var i=new o,r=this;return e.setImmediate((function(){r.__listeners.push({promise:i,onResponse:t,onException:n}),r.resolve()})),i},exception:function(e){return this.then(null,e)},finally2:function(t){var n=new o,i=this,r=function(e){return function(){var i=arguments;try{var r=t.apply(null,i);if(r&&"function"==typeof r.then){var o=function(){e.apply(n,i)};r.then(o).exception(o)}else e.apply(n,i)}catch(t){e.apply(n,i)}}};return e.setImmediate((function(){i.then(r(n.succeed),r(n.fail))})),n},delay:function(t){var n=new o,i=this,r=function(n,i){return function(){var r=arguments;e.setTimeout((function(){i.apply(n,r)}),t)}};return e.setImmediate((function(){i.then(r(n,n.succeed),r(n,n.fail))})),n},resolve:function(){if(this.__state!==t)for(var e;e=this.__listeners.pop();)r(this,e)},setState:function(e,n){this.__state===t&&e!==t&&(this.__state=e,this._args=n,this.resolve())},succeed:function(){var e=arguments;return this.setState(n,e),this},fail:function(){var e=arguments;return this.setState(i,e),this},succeeded:function(){return this.__state===n},failed:function(){return this.__state===i},completed:function(){return this.__state!==t}});o.all=function(){if(1===arguments.length&&arguments[0]instanceof Array)return o.all.apply(this,arguments[0]);var e=new o,t=Array.prototype.slice.call(arguments),n=new Array(arguments.length),i=t.length;0===i&&e.succeed.apply(e,n);for(var r=0;r<t.length;++r)!function(r){t[r]&&"function"==typeof t[r].then?t[r].then((function(){n[r]=arguments,0===--i&&e.succeed.apply(e,n)}),(function(){e.fail.apply(e,arguments)})):(n[r]=t[r],0===--i&&e.succeed.apply(e,n))}(r);return e},o.try2=function(e){return(new o).succeed().then(e)},o.delay=function(e){if(arguments.length>1){var t=new o,n=Array.prototype.slice.call(arguments);return e=n.pop(),t.succeed.apply(t,n).delay(e)}return(new o).succeed().delay(e)},Ice.Promise=o}(),l=Ice.Class({__init__:function(e){void 0!==e&&e.length>0?this._prefix=e+": ":this._prefix="",this._dateformat={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!1}},print:function(e){this.write(e,!1)},trace:function(e,t){var n=[];new Date,n.push("-- "),n.push(this.timestamp()),n.push(" "),n.push(this._prefix),n.push(e),n.push(": "),n.push(t),this.write(n.join(""),!0)},warning:function(e){var t=[];new Date,t.push("-! "),t.push(this.timestamp()),t.push(" "),t.push(this._prefix),t.push("warning: "),t.push(e),this.write(t.join(""),!0)},error:function(e){var t=[];new Date,t.push("!! "),t.push(this.timestamp()),t.push(" "),t.push(this._prefix),t.push("error: "),t.push(e),this.write(t.join(""),!0)},cloneWithPrefix:function(e){return new l(e)},write:function(e,t){t&&(e=e.replace(/\n/g,"\n   ")),Cr.Utils.log(e)},timestamp:function(){var e=new Date;return e.toLocaleString("en-US",this._dateformat)+"."+e.getMilliseconds()}}),Ice.Logger=l,Ice.InitializationException=N.defineLocalException((function(e,t){Ice.LocalException.call(this,t),this.reason=void 0!==e?e:""}),Ice.LocalException,"Ice::InitializationException"),Ice.PluginInitializationException=N.defineLocalException((function(e,t){Ice.LocalException.call(this,t),this.reason=void 0!==e?e:""}),Ice.LocalException,"Ice::PluginInitializationException"),Ice.CollocationOptimizationException=N.defineLocalException((function(e){Ice.LocalException.call(this,e)}),Ice.LocalException,"Ice::CollocationOptimizationException"),Ice.AlreadyRegisteredException=N.defineLocalException((function(e,t,n){Ice.LocalException.call(this,n),this.kindOfObject=void 0!==e?e:"",this.id=void 0!==t?t:""}),Ice.LocalException,"Ice::AlreadyRegisteredException"),Ice.NotRegisteredException=N.defineLocalException((function(e,t,n){Ice.LocalException.call(this,n),this.kindOfObject=void 0!==e?e:"",this.id=void 0!==t?t:""}),Ice.LocalException,"Ice::NotRegisteredException"),Ice.TwowayOnlyException=N.defineLocalException((function(e,t){Ice.LocalException.call(this,t),this.operation=void 0!==e?e:""}),Ice.LocalException,"Ice::TwowayOnlyException"),Ice.CloneNotImplementedException=N.defineLocalException((function(e){Ice.LocalException.call(this,e)}),Ice.LocalException,"Ice::CloneNotImplementedException"),Ice.UnknownException=N.defineLocalException((function(e,t){Ice.LocalException.call(this,t),this.unknown=void 0!==e?e:""}),Ice.LocalException,"Ice::UnknownException"),Ice.UnknownLocalException=N.defineLocalException((function(e,t){Ice.UnknownException.call(this,e,t)}),Ice.UnknownException,"Ice::UnknownLocalException"),Ice.UnknownUserException=N.defineLocalException((function(e,t){Ice.UnknownException.call(this,e,t)}),Ice.UnknownException,"Ice::UnknownUserException"),Ice.VersionMismatchException=N.defineLocalException((function(e){Ice.LocalException.call(this,e)}),Ice.LocalException,"Ice::VersionMismatchException"),Ice.CommunicatorDestroyedException=N.defineLocalException((function(e){Ice.LocalException.call(this,e)}),Ice.LocalException,"Ice::CommunicatorDestroyedException"),Ice.ObjectAdapterDeactivatedException=N.defineLocalException((function(e,t){Ice.LocalException.call(this,t),this.name=void 0!==e?e:""}),Ice.LocalException,"Ice::ObjectAdapterDeactivatedException"),Ice.ObjectAdapterIdInUseException=N.defineLocalException((function(e,t){Ice.LocalException.call(this,t),this.id=void 0!==e?e:""}),Ice.LocalException,"Ice::ObjectAdapterIdInUseException"),Ice.NoEndpointException=N.defineLocalException((function(e,t){Ice.LocalException.call(this,t),this.proxy=void 0!==e?e:""}),Ice.LocalException,"Ice::NoEndpointException"),Ice.EndpointParseException=N.defineLocalException((function(e,t){Ice.LocalException.call(this,t),this.str=void 0!==e?e:""}),Ice.LocalException,"Ice::EndpointParseException"),Ice.EndpointSelectionTypeParseException=N.defineLocalException((function(e,t){Ice.LocalException.call(this,t),this.str=void 0!==e?e:""}),Ice.LocalException,"Ice::EndpointSelectionTypeParseException"),Ice.VersionParseException=N.defineLocalException((function(e,t){Ice.LocalException.call(this,t),this.str=void 0!==e?e:""}),Ice.LocalException,"Ice::VersionParseException"),Ice.IdentityParseException=N.defineLocalException((function(e,t){Ice.LocalException.call(this,t),this.str=void 0!==e?e:""}),Ice.LocalException,"Ice::IdentityParseException"),Ice.ProxyParseException=N.defineLocalException((function(e,t){Ice.LocalException.call(this,t),this.str=void 0!==e?e:""}),Ice.LocalException,"Ice::ProxyParseException"),Ice.IllegalIdentityException=N.defineLocalException((function(e,t){Ice.LocalException.call(this,t),this.id=void 0!==e?e:new Ice.Identity}),Ice.LocalException,"Ice::IllegalIdentityException"),Ice.IllegalServantException=N.defineLocalException((function(e,t){Ice.LocalException.call(this,t),this.reason=void 0!==e?e:""}),Ice.LocalException,"Ice::IllegalServantException"),Ice.RequestFailedException=N.defineLocalException((function(e,t,n,i){Ice.LocalException.call(this,i),this.id=void 0!==e?e:new Ice.Identity,this.facet=void 0!==t?t:"",this.operation=void 0!==n?n:""}),Ice.LocalException,"Ice::RequestFailedException"),Ice.ObjectNotExistException=N.defineLocalException((function(e,t,n,i){Ice.RequestFailedException.call(this,e,t,n,i)}),Ice.RequestFailedException,"Ice::ObjectNotExistException"),Ice.FacetNotExistException=N.defineLocalException((function(e,t,n,i){Ice.RequestFailedException.call(this,e,t,n,i)}),Ice.RequestFailedException,"Ice::FacetNotExistException"),Ice.OperationNotExistException=N.defineLocalException((function(e,t,n,i){Ice.RequestFailedException.call(this,e,t,n,i)}),Ice.RequestFailedException,"Ice::OperationNotExistException"),Ice.SyscallException=N.defineLocalException((function(e,t){Ice.LocalException.call(this,t),this.error=void 0!==e?e:0}),Ice.LocalException,"Ice::SyscallException"),Ice.SocketException=N.defineLocalException((function(e,t){Ice.SyscallException.call(this,e,t)}),Ice.SyscallException,"Ice::SocketException"),Ice.FileException=N.defineLocalException((function(e,t,n){Ice.SyscallException.call(this,e,n),this.path=void 0!==t?t:""}),Ice.SyscallException,"Ice::FileException"),Ice.ConnectFailedException=N.defineLocalException((function(e,t){Ice.SocketException.call(this,e,t)}),Ice.SocketException,"Ice::ConnectFailedException"),Ice.ConnectionRefusedException=N.defineLocalException((function(e,t){Ice.ConnectFailedException.call(this,e,t)}),Ice.ConnectFailedException,"Ice::ConnectionRefusedException"),Ice.ConnectionLostException=N.defineLocalException((function(e,t){Ice.SocketException.call(this,e,t)}),Ice.SocketException,"Ice::ConnectionLostException"),Ice.DNSException=N.defineLocalException((function(e,t,n){Ice.LocalException.call(this,n),this.error=void 0!==e?e:0,this.host=void 0!==t?t:""}),Ice.LocalException,"Ice::DNSException"),Ice.OperationInterruptedException=N.defineLocalException((function(e){Ice.LocalException.call(this,e)}),Ice.LocalException,"Ice::OperationInterruptedException"),Ice.TimeoutException=N.defineLocalException((function(e){Ice.LocalException.call(this,e)}),Ice.LocalException,"Ice::TimeoutException"),Ice.ConnectTimeoutException=N.defineLocalException((function(e){Ice.TimeoutException.call(this,e)}),Ice.TimeoutException,"Ice::ConnectTimeoutException"),Ice.CloseTimeoutException=N.defineLocalException((function(e){Ice.TimeoutException.call(this,e)}),Ice.TimeoutException,"Ice::CloseTimeoutException"),Ice.ConnectionTimeoutException=N.defineLocalException((function(e){Ice.TimeoutException.call(this,e)}),Ice.TimeoutException,"Ice::ConnectionTimeoutException"),Ice.InvocationTimeoutException=N.defineLocalException((function(e){Ice.TimeoutException.call(this,e)}),Ice.TimeoutException,"Ice::InvocationTimeoutException"),Ice.InvocationCanceledException=N.defineLocalException((function(e){Ice.LocalException.call(this,e)}),Ice.LocalException,"Ice::InvocationCanceledException"),Ice.ProtocolException=N.defineLocalException((function(e,t){Ice.LocalException.call(this,t),this.reason=void 0!==e?e:""}),Ice.LocalException,"Ice::ProtocolException"),Ice.BadMagicException=N.defineLocalException((function(e,t,n){Ice.ProtocolException.call(this,e,n),this.badMagic=void 0!==t?t:null}),Ice.ProtocolException,"Ice::BadMagicException"),Ice.UnsupportedProtocolException=N.defineLocalException((function(e,t,n,i){Ice.ProtocolException.call(this,e,i),this.bad=void 0!==t?t:new Ice.ProtocolVersion,this.supported=void 0!==n?n:new Ice.ProtocolVersion}),Ice.ProtocolException,"Ice::UnsupportedProtocolException"),Ice.UnsupportedEncodingException=N.defineLocalException((function(e,t,n,i){Ice.ProtocolException.call(this,e,i),this.bad=void 0!==t?t:new Ice.EncodingVersion,this.supported=void 0!==n?n:new Ice.EncodingVersion}),Ice.ProtocolException,"Ice::UnsupportedEncodingException"),Ice.UnknownMessageException=N.defineLocalException((function(e,t){Ice.ProtocolException.call(this,e,t)}),Ice.ProtocolException,"Ice::UnknownMessageException"),Ice.ConnectionNotValidatedException=N.defineLocalException((function(e,t){Ice.ProtocolException.call(this,e,t)}),Ice.ProtocolException,"Ice::ConnectionNotValidatedException"),Ice.UnknownRequestIdException=N.defineLocalException((function(e,t){Ice.ProtocolException.call(this,e,t)}),Ice.ProtocolException,"Ice::UnknownRequestIdException"),Ice.UnknownReplyStatusException=N.defineLocalException((function(e,t){Ice.ProtocolException.call(this,e,t)}),Ice.ProtocolException,"Ice::UnknownReplyStatusException"),Ice.CloseConnectionException=N.defineLocalException((function(e,t){Ice.ProtocolException.call(this,e,t)}),Ice.ProtocolException,"Ice::CloseConnectionException"),Ice.ForcedCloseConnectionException=N.defineLocalException((function(e,t){Ice.ProtocolException.call(this,e,t)}),Ice.ProtocolException,"Ice::ForcedCloseConnectionException"),Ice.IllegalMessageSizeException=N.defineLocalException((function(e,t){Ice.ProtocolException.call(this,e,t)}),Ice.ProtocolException,"Ice::IllegalMessageSizeException"),Ice.CompressionException=N.defineLocalException((function(e,t){Ice.ProtocolException.call(this,e,t)}),Ice.ProtocolException,"Ice::CompressionException"),Ice.DatagramLimitException=N.defineLocalException((function(e,t){Ice.ProtocolException.call(this,e,t)}),Ice.ProtocolException,"Ice::DatagramLimitException"),Ice.MarshalException=N.defineLocalException((function(e,t){Ice.ProtocolException.call(this,e,t)}),Ice.ProtocolException,"Ice::MarshalException"),Ice.ProxyUnmarshalException=N.defineLocalException((function(e,t){Ice.MarshalException.call(this,e,t)}),Ice.MarshalException,"Ice::ProxyUnmarshalException"),Ice.UnmarshalOutOfBoundsException=N.defineLocalException((function(e,t){Ice.MarshalException.call(this,e,t)}),Ice.MarshalException,"Ice::UnmarshalOutOfBoundsException"),Ice.NoObjectFactoryException=N.defineLocalException((function(e,t,n){Ice.MarshalException.call(this,e,n),this.type=void 0!==t?t:""}),Ice.MarshalException,"Ice::NoObjectFactoryException"),Ice.UnexpectedObjectException=N.defineLocalException((function(e,t,n,i){Ice.MarshalException.call(this,e,i),this.type=void 0!==t?t:"",this.expectedType=void 0!==n?n:""}),Ice.MarshalException,"Ice::UnexpectedObjectException"),Ice.MemoryLimitException=N.defineLocalException((function(e,t){Ice.MarshalException.call(this,e,t)}),Ice.MarshalException,"Ice::MemoryLimitException"),Ice.StringConversionException=N.defineLocalException((function(e,t){Ice.MarshalException.call(this,e,t)}),Ice.MarshalException,"Ice::StringConversionException"),Ice.EncapsulationException=N.defineLocalException((function(e,t){Ice.MarshalException.call(this,e,t)}),Ice.MarshalException,"Ice::EncapsulationException"),Ice.FeatureNotSupportedException=N.defineLocalException((function(e,t){Ice.LocalException.call(this,t),this.unsupportedFeature=void 0!==e?e:""}),Ice.LocalException,"Ice::FeatureNotSupportedException"),Ice.SecurityException=N.defineLocalException((function(e,t){Ice.LocalException.call(this,t),this.reason=void 0!==e?e:""}),Ice.LocalException,"Ice::SecurityException"),Ice.FixedProxyException=N.defineLocalException((function(e){Ice.LocalException.call(this,e)}),Ice.LocalException,"Ice::FixedProxyException"),Ice.ResponseSentException=N.defineLocalException((function(e){Ice.LocalException.call(this,e)}),Ice.LocalException,"Ice::ResponseSentException"),function(){var e=Ice.StringUtil,t={};function n(t){var n=t.indexOf(".");if(-1===n)throw new Ice.VersionParseException("malformed version value `"+t+"'");var i,r=t.substring(0,n);try{i=e.toInt(r)}catch(e){throw new Ice.VersionParseException("invalid version value `"+t+"'")}if(i<1||i>255)throw new Ice.VersionParseException("range error in version `"+t+"'");return i}function i(t){var n=t.indexOf(".");if(-1===n)throw new Ice.VersionParseException("malformed version value `"+t+"'");var i,r=t.substring(n+1);try{i=e.toInt(r)}catch(e){throw new Ice.VersionParseException("invalid version value `"+t+"'")}if(i<0||i>255)throw new Ice.VersionParseException("range error in version `"+t+"'");return i}function r(e,t){return e+"."+t}Ice.Encoding_1_0=new Ice.EncodingVersion(1,0),Ice.Encoding_1_1=new Ice.EncodingVersion(1,1),Ice.Protocol_1_0=new Ice.ProtocolVersion(1,0),t.headerSize=14,t.magic=Ice.Buffer.createNative([73,99,101,80]),t.protocolMajor=1,t.protocolMinor=0,t.protocolEncodingMajor=1,t.protocolEncodingMinor=0,t.encodingMajor=1,t.encodingMinor=1,t.requestMsg=0,t.requestBatchMsg=1,t.replyMsg=2,t.validateConnectionMsg=3,t.closeConnectionMsg=4,t.replyOK=0,t.replyUserException=1,t.replyObjectNotExist=2,t.replyFacetNotExist=3,t.replyOperationNotExist=4,t.replyUnknownLocalException=5,t.replyUnknownUserException=6,t.replyUnknownException=7,t.requestHdr=Ice.Buffer.createNative([t.magic[0],t.magic[1],t.magic[2],t.magic[3],t.protocolMajor,t.protocolMinor,t.protocolEncodingMajor,t.protocolEncodingMinor,t.requestMsg,0,0,0,0,0,0,0,0,0]),t.requestBatchHdr=Ice.Buffer.createNative([t.magic[0],t.magic[1],t.magic[2],t.magic[3],t.protocolMajor,t.protocolMinor,t.protocolEncodingMajor,t.protocolEncodingMinor,t.requestBatchMsg,0,0,0,0,0,0,0,0,0]),t.replyHdr=Ice.Buffer.createNative([t.magic[0],t.magic[1],t.magic[2],t.magic[3],t.protocolMajor,t.protocolMinor,t.protocolEncodingMajor,t.protocolEncodingMinor,t.replyMsg,0,0,0,0,0]),t.currentProtocol=new Ice.ProtocolVersion(t.protocolMajor,t.protocolMinor),t.currentProtocolEncoding=new Ice.EncodingVersion(t.protocolEncodingMajor,t.protocolEncodingMinor),t.currentEncoding=new Ice.EncodingVersion(t.encodingMajor,t.encodingMinor),t.checkSupportedProtocol=function(e){if(e.major!==t.currentProtocol.major||e.minor>t.currentProtocol.minor)throw new Ice.UnsupportedProtocolException("",e,t.currentProtocol)},t.checkSupportedProtocolEncoding=function(e){if(e.major!==t.currentProtocolEncoding.major||e.minor>t.currentProtocolEncoding.minor)throw new Ice.UnsupportedEncodingException("",e,t.currentProtocolEncoding)},t.checkSupportedEncoding=function(e){if(e.major!==t.currentEncoding.major||e.minor>t.currentEncoding.minor)throw new Ice.UnsupportedEncodingException("",e,t.currentEncoding)},t.getCompatibleProtocol=function(e){return e.major!==t.currentProtocol.major||e.minor<t.currentProtocol.minor?e:t.currentProtocol},t.getCompatibleEncoding=function(e){return e.major!==t.currentEncoding.major||e.minor<t.currentEncoding.minor?e:t.currentEncoding},t.isSupported=function(e,t){return e.major===t.major&&e.minor<=t.minor},Ice.stringToProtocolVersion=function(e){return new Ice.ProtocolVersion(n(e),i(e))},Ice.stringToEncodingVersion=function(e){return new Ice.EncodingVersion(n(e),i(e))},Ice.protocolVersionToString=function(e){return r(e.major,e.minor)},Ice.encodingVersionToString=function(e){return r(e.major,e.minor)},Ice.Protocol=t}(),d=function(e,t,n){this._pattern=e,this._deprecated=t,this._deprecatedBy=n},Object.defineProperty(d.prototype,"pattern",{get:function(){return this._pattern}}),Object.defineProperty(d.prototype,"deprecated",{get:function(){return this._deprecated}}),Object.defineProperty(d.prototype,"deprecatedBy",{get:function(){return this._deprecatedBy}}),Ice.Property=d,function(){var e={},t=Ice.Property;e.IceProps=[new t("/^Ice.ACM.Client/",!0,null),new t("/^Ice.ACM.Server/",!0,null),new t("/^Ice.ACM.Timeout/",!1,null),new t("/^Ice.ACM.Heartbeat/",!1,null),new t("/^Ice.ACM.Close/",!1,null),new t("/^Ice.ACM/",!1,null),new t("/^Ice.ACM.Client.Timeout/",!1,null),new t("/^Ice.ACM.Client.Heartbeat/",!1,null),new t("/^Ice.ACM.Client.Close/",!1,null),new t("/^Ice.ACM.Client/",!1,null),new t("/^Ice.ACM.Server.Timeout/",!1,null),new t("/^Ice.ACM.Server.Heartbeat/",!1,null),new t("/^Ice.ACM.Server.Close/",!1,null),new t("/^Ice.ACM.Server/",!1,null),new t("/^Ice.Admin.ACM.Timeout/",!1,null),new t("/^Ice.Admin.ACM.Heartbeat/",!1,null),new t("/^Ice.Admin.ACM.Close/",!1,null),new t("/^Ice.Admin.ACM/",!1,null),new t("/^Ice.Admin.AdapterId/",!1,null),new t("/^Ice.Admin.Endpoints/",!1,null),new t("/^Ice.Admin.Locator.EndpointSelection/",!1,null),new t("/^Ice.Admin.Locator.ConnectionCached/",!1,null),new t("/^Ice.Admin.Locator.PreferSecure/",!1,null),new t("/^Ice.Admin.Locator.LocatorCacheTimeout/",!1,null),new t("/^Ice.Admin.Locator.InvocationTimeout/",!1,null),new t("/^Ice.Admin.Locator.Locator/",!1,null),new t("/^Ice.Admin.Locator.Router/",!1,null),new t("/^Ice.Admin.Locator.CollocationOptimized/",!1,null),new t("/^Ice.Admin.Locator.Context../",!1,null),new t("/^Ice.Admin.Locator/",!1,null),new t("/^Ice.Admin.PublishedEndpoints/",!1,null),new t("/^Ice.Admin.ReplicaGroupId/",!1,null),new t("/^Ice.Admin.Router.EndpointSelection/",!1,null),new t("/^Ice.Admin.Router.ConnectionCached/",!1,null),new t("/^Ice.Admin.Router.PreferSecure/",!1,null),new t("/^Ice.Admin.Router.LocatorCacheTimeout/",!1,null),new t("/^Ice.Admin.Router.InvocationTimeout/",!1,null),new t("/^Ice.Admin.Router.Locator/",!1,null),new t("/^Ice.Admin.Router.Router/",!1,null),new t("/^Ice.Admin.Router.CollocationOptimized/",!1,null),new t("/^Ice.Admin.Router.Context../",!1,null),new t("/^Ice.Admin.Router/",!1,null),new t("/^Ice.Admin.ProxyOptions/",!1,null),new t("/^Ice.Admin.ThreadPool.Size/",!1,null),new t("/^Ice.Admin.ThreadPool.SizeMax/",!1,null),new t("/^Ice.Admin.ThreadPool.SizeWarn/",!1,null),new t("/^Ice.Admin.ThreadPool.StackSize/",!1,null),new t("/^Ice.Admin.ThreadPool.Serialize/",!1,null),new t("/^Ice.Admin.ThreadPool.ThreadIdleTime/",!1,null),new t("/^Ice.Admin.ThreadPool.ThreadPriority/",!1,null),new t("/^Ice.Admin.MessageSizeMax/",!1,null),new t("/^Ice.Admin.DelayCreation/",!1,null),new t("/^Ice.Admin.Enabled/",!1,null),new t("/^Ice.Admin.Facets/",!1,null),new t("/^Ice.Admin.InstanceName/",!1,null),new t("/^Ice.Admin.Logger.KeepLogs/",!1,null),new t("/^Ice.Admin.Logger.KeepTraces/",!1,null),new t("/^Ice.Admin.Logger.Properties/",!1,null),new t("/^Ice.Admin.ServerId/",!1,null),new t("/^Ice.BackgroundLocatorCacheUpdates/",!1,null),new t("/^Ice.BatchAutoFlush/",!0,null),new t("/^Ice.BatchAutoFlushSize/",!1,null),new t("/^Ice.ChangeUser/",!1,null),new t("/^Ice.ClientAccessPolicyProtocol/",!1,null),new t("/^Ice.Compression.Level/",!1,null),new t("/^Ice.CollectObjects/",!1,null),new t("/^Ice.Config/",!1,null),new t("/^Ice.ConsoleListener/",!1,null),new t("/^Ice.Default.CollocationOptimized/",!1,null),new t("/^Ice.Default.EncodingVersion/",!1,null),new t("/^Ice.Default.EndpointSelection/",!1,null),new t("/^Ice.Default.Host/",!1,null),new t("/^Ice.Default.Locator.EndpointSelection/",!1,null),new t("/^Ice.Default.Locator.ConnectionCached/",!1,null),new t("/^Ice.Default.Locator.PreferSecure/",!1,null),new t("/^Ice.Default.Locator.LocatorCacheTimeout/",!1,null),new t("/^Ice.Default.Locator.InvocationTimeout/",!1,null),new t("/^Ice.Default.Locator.Locator/",!1,null),new t("/^Ice.Default.Locator.Router/",!1,null),new t("/^Ice.Default.Locator.CollocationOptimized/",!1,null),new t("/^Ice.Default.Locator.Context../",!1,null),new t("/^Ice.Default.Locator/",!1,null),new t("/^Ice.Default.LocatorCacheTimeout/",!1,null),new t("/^Ice.Default.InvocationTimeout/",!1,null),new t("/^Ice.Default.Package/",!1,null),new t("/^Ice.Default.PreferSecure/",!1,null),new t("/^Ice.Default.Protocol/",!1,null),new t("/^Ice.Default.Router.EndpointSelection/",!1,null),new t("/^Ice.Default.Router.ConnectionCached/",!1,null),new t("/^Ice.Default.Router.PreferSecure/",!1,null),new t("/^Ice.Default.Router.LocatorCacheTimeout/",!1,null),new t("/^Ice.Default.Router.InvocationTimeout/",!1,null),new t("/^Ice.Default.Router.Locator/",!1,null),new t("/^Ice.Default.Router.Router/",!1,null),new t("/^Ice.Default.Router.CollocationOptimized/",!1,null),new t("/^Ice.Default.Router.Context../",!1,null),new t("/^Ice.Default.Router/",!1,null),new t("/^Ice.Default.SlicedFormat/",!1,null),new t("/^Ice.Default.SourceAddress/",!1,null),new t("/^Ice.Default.Timeout/",!1,null),new t("/^Ice.EventLog.Source/",!1,null),new t("/^Ice.FactoryAssemblies/",!1,null),new t("/^Ice.HTTPProxyHost/",!1,null),new t("/^Ice.HTTPProxyPort/",!1,null),new t("/^Ice.ImplicitContext/",!1,null),new t("/^Ice.InitPlugins/",!1,null),new t("/^Ice.IPv4/",!1,null),new t("/^Ice.IPv6/",!1,null),new t("/^Ice.LogFile/",!1,null),new t("/^Ice.LogStdErr.Convert/",!1,null),new t("/^Ice.MessageSizeMax/",!1,null),new t("/^Ice.Nohup/",!1,null),new t("/^Ice.NullHandleAbort/",!1,null),new t("/^Ice.Override.CloseTimeout/",!1,null),new t("/^Ice.Override.Compress/",!1,null),new t("/^Ice.Override.ConnectTimeout/",!1,null),new t("/^Ice.Override.Timeout/",!1,null),new t("/^Ice.Override.Secure/",!1,null),new t("/^Ice.Package../",!1,null),new t("/^Ice.Plugin../",!1,null),new t("/^Ice.PluginLoadOrder/",!1,null),new t("/^Ice.PreferIPv6Address/",!1,null),new t("/^Ice.PrintAdapterReady/",!1,null),new t("/^Ice.PrintProcessId/",!1,null),new t("/^Ice.PrintStackTraces/",!1,null),new t("/^Ice.ProgramName/",!1,null),new t("/^Ice.RetryIntervals/",!1,null),new t("/^Ice.ServerIdleTime/",!1,null),new t("/^Ice.SOCKSProxyHost/",!1,null),new t("/^Ice.SOCKSProxyPort/",!1,null),new t("/^Ice.StdErr/",!1,null),new t("/^Ice.StdOut/",!1,null),new t("/^Ice.SyslogFacility/",!1,null),new t("/^Ice.ThreadPool.Client.Size/",!1,null),new t("/^Ice.ThreadPool.Client.SizeMax/",!1,null),new t("/^Ice.ThreadPool.Client.SizeWarn/",!1,null),new t("/^Ice.ThreadPool.Client.StackSize/",!1,null),new t("/^Ice.ThreadPool.Client.Serialize/",!1,null),new t("/^Ice.ThreadPool.Client.ThreadIdleTime/",!1,null),new t("/^Ice.ThreadPool.Client.ThreadPriority/",!1,null),new t("/^Ice.ThreadPool.Server.Size/",!1,null),new t("/^Ice.ThreadPool.Server.SizeMax/",!1,null),new t("/^Ice.ThreadPool.Server.SizeWarn/",!1,null),new t("/^Ice.ThreadPool.Server.StackSize/",!1,null),new t("/^Ice.ThreadPool.Server.Serialize/",!1,null),new t("/^Ice.ThreadPool.Server.ThreadIdleTime/",!1,null),new t("/^Ice.ThreadPool.Server.ThreadPriority/",!1,null),new t("/^Ice.ThreadPriority/",!1,null),new t("/^Ice.Trace.Admin.Properties/",!1,null),new t("/^Ice.Trace.Admin.Logger/",!1,null),new t("/^Ice.Trace.Locator/",!1,null),new t("/^Ice.Trace.Network/",!1,null),new t("/^Ice.Trace.Protocol/",!1,null),new t("/^Ice.Trace.Retry/",!1,null),new t("/^Ice.Trace.Slicing/",!1,null),new t("/^Ice.Trace.ThreadPool/",!1,null),new t("/^Ice.UDP.RcvSize/",!1,null),new t("/^Ice.UDP.SndSize/",!1,null),new t("/^Ice.TCP.Backlog/",!1,null),new t("/^Ice.TCP.RcvSize/",!1,null),new t("/^Ice.TCP.SndSize/",!1,null),new t("/^Ice.UseApplicationClassLoader/",!1,null),new t("/^Ice.UseSyslog/",!1,null),new t("/^Ice.Warn.AMICallback/",!1,null),new t("/^Ice.Warn.Connections/",!1,null),new t("/^Ice.Warn.Datagrams/",!1,null),new t("/^Ice.Warn.Dispatch/",!1,null),new t("/^Ice.Warn.Endpoints/",!1,null),new t("/^Ice.Warn.UnknownProperties/",!1,null),new t("/^Ice.Warn.UnusedProperties/",!1,null),new t("/^Ice.CacheMessageBuffers/",!1,null),new t("/^Ice.ThreadInterruptSafe/",!1,null),new t("/^Ice.Voip/",!1,null)],e.validProps=[e.IceProps],e.clPropNames=["Ice"],Ice.PropertyNames=e}(),u=Ice.HashMap,h=Ice.AlreadyRegisteredException,f=Ice.NotRegisteredException,_=Ice.Class({__init__:function(){this._factoryMap=new u},add:function(e,t){var n;if(void 0!==this._factoryMap.get(t))throw(n=new h).id=t,n.kindOfObject="object factory",n;this._factoryMap.set(t,e)},remove:function(e){var t,n;if(void 0===(t=this._factoryMap.get(e)))throw(n=new f).id=e,n.kindOfObject="object factory",n;this._factoryMap.del(e),t.destroy()},find:function(e){return this._factoryMap.get(e)},destroy:function(){var e=this._factoryMap.entries;for(this._factoryMap=new u;null!==e;)e.value.destroy(),e=e.next}}),Ice.ObjectFactoryManager=_,function(){var e=Ice.Promise,t=Ice.Class(e,{__init__:function(t,n,i,r,o){e.call(this),void 0!==t&&(this._communicator=t,this._instance=null!==t?t.instance:null,this._operation=n,this._connection=i,this._proxy=r,this._adapter=o)}}),n=t.prototype,i=Object.defineProperty;i(n,"communicator",{get:function(){return this._communicator}}),i(n,"connection",{get:function(){return this._connection}}),i(n,"proxy",{get:function(){return this._proxy}}),i(n,"adapter",{get:function(){return this._adapter}}),i(n,"operation",{get:function(){return this._operation}}),Ice.AsyncResultBase=t}(),N.defineDictionary(Ice,"Context","ContextHelper","Ice.StringHelper","Ice.StringHelper",!1,void 0,void 0),Ice.OperationMode=N.defineEnum([["Normal",0],["Nonmutating",1],["Idempotent",2]]),Ice.Current=N.defineStruct((function(e,t,n,i,r,o,s,a,c){this.adapter=void 0!==e?e:null,this.con=void 0!==t?t:null,this.id=void 0!==n?n:new Ice.Identity,this.facet=void 0!==i?i:"",this.operation=void 0!==r?r:"",this.mode=void 0!==o?o:Ice.OperationMode.Normal,this.ctx=void 0!==s?s:null,this.requestId=void 0!==a?a:0,this.encoding=void 0!==c?c:new Ice.EncodingVersion}),!1),Ice.ObjectFactory=Ice.Class({create:function(e){throw new Error("not implemented")},destroy:function(){throw new Error("not implemented")}}),p=Ice.Class(Error,{__init__:function(e){e instanceof Ice.LocalException?this._ex=e:(Ice.Debug.assert(e instanceof p),this._ex=e._ex)}}),C=p.prototype,Object.defineProperty(C,"inner",{get:function(){return this._ex}}),Ice.RetryException=p,Ice.EndpointSelectionType=N.defineEnum([["Random",0],["Ordered",1]]),function(){Ice.Promise;var e=Ice.ReferenceMode,t=Ice.Class({__init__:function(t,n,i){this._reference=t,this._response=t.getMode()==e.ModeTwoway,this._connection=n,this._compress=i},update:function(e,t){try{if(e===this)return t;if(e.getConnection()===this._connection)return t}catch(e){}return this},sendAsyncRequest:function(e){return e.__invokeRemote(this._connection,this._compress,this._response)},asyncRequestCanceled:function(e){return this._connection.asyncRequestCanceled(e)},getReference:function(){return this._reference},getConnection:function(){return this._connection}});Ice.ConnectionRequestHandler=t}(),function(){var e=Ice.Debug,t=Ice.HashMap,n=Ice.Protocol,i=Ice.StringUtil,r=Ice.OperationMode,o=Ice.Identity,s={traceSend:function(e,t,n){if(n.protocol>=1){var i=e.pos;e.pos=0;var r=[],o=l(r,e);t.trace(n.protocolCat,"sending "+d(o)+" "+r.join("")),e.pos=i}},traceRecv:function(e,t,n){if(n.protocol>=1){var i=e.pos;e.pos=0;var r=[],o=l(r,e);t.trace(n.protocolCat,"received "+d(o)+" "+r.join("")),e.pos=i}},trace:function(e,t,n,i){if(i.protocol>=1){var r=t.pos;t.pos=0;var o=[];o.push(e),l(o,t),n.trace(i.protocolCat,o.join("")),t.pos=r}}};new t;function a(e,t){var n=new o;n.__read(t),e.push("\nidentity = "+t.instance.identityToString(n));var r=Ice.StringSeqHelper.read(t);e.push("\nfacet = "),r.length>0&&e.push(i.escapeString(r[0],""));var s=t.readString();e.push("\noperation = "+s)}function c(e,t){a(e,t);var n=t.readByte();switch(e.push("\nmode = "+n+" "),r.valueOf(n)){case r.Normal:e.push("(normal)");break;case r.Nonmutating:e.push("(nonmutating)");break;case r.Idempotent:e.push("(idempotent)");break;default:e.push("(unknown)")}var i=t.readSize();for(e.push("\ncontext = ");i-- >0;){var o=t.readString(),s=t.readString();e.push(o+"/"+s),i>0&&e.push(", ")}var c=t.skipEncaps();c.equals(Ice.Encoding_1_0)||(e.push("\nencoding = "),e.push(Ice.encodingVersionToString(c)))}function l(t,i){var r=function(e,t){t.readByte(),t.readByte(),t.readByte(),t.readByte(),t.readByte(),t.readByte(),t.readByte(),t.readByte();var n=t.readByte();e.push("\nmessage type = "+n+" ("+d(n)+")");var i=t.readByte();switch(e.push("\ncompression status = "+i+" "),i){case 0:e.push("(not compressed; do not compress response, if any)");break;case 1:e.push("(not compressed; compress response, if any)");break;case 2:e.push("(compressed; compress response, if any)");break;default:e.push("(unknown)")}var r=t.readInt();return e.push("\nmessage size = "+r),n}(t,i);switch(r){case n.closeConnectionMsg:case n.validateConnectionMsg:break;case n.requestMsg:!function(e,t){var n=t.readInt();e.push("\nrequest id = "+n),0===n&&e.push(" (oneway)"),c(e,t)}(t,i);break;case n.requestBatchMsg:!function(e,t){var n=t.readInt();e.push("\nnumber of requests = "+n);for(var i=0;i<n;++i)e.push("\nrequest #"+i+":"),c(e,t)}(t,i);break;case n.replyMsg:!function(t,i){var r=i.readInt();t.push("\nrequest id = "+r);var o=i.readByte();switch(t.push("\nreply status = "+o+" "),o){case n.replyOK:t.push("(ok)");break;case n.replyUserException:t.push("(user exception)");break;case n.replyObjectNotExist:case n.replyFacetNotExist:case n.replyOperationNotExist:switch(o){case n.replyObjectNotExist:t.push("(object not exist)");break;case n.replyFacetNotExist:t.push("(facet not exist)");break;case n.replyOperationNotExist:t.push("(operation not exist)");break;default:e.assert(!1)}a(t,i);break;case n.replyUnknownException:case n.replyUnknownLocalException:case n.replyUnknownUserException:switch(o){case n.replyUnknownException:t.push("(unknown exception)");break;case n.replyUnknownLocalException:t.push("(unknown local exception)");break;case n.replyUnknownUserException:t.push("(unknown user exception)");break;default:e.assert(!1)}var s=i.readString();t.push("\nunknown = "+s);break;default:t.push("(unknown)")}if(o===n.replyOK||o===n.replyUserException){var c=i.skipEncaps();c.equals(Ice.Encoding_1_0)||(t.push("\nencoding = "),t.push(Ice.encodingVersionToString(c)))}}(t,i)}return r}function d(e){switch(e){case n.requestMsg:return"request";case n.requestBatchMsg:return"batch request";case n.replyMsg:return"reply";case n.closeConnectionMsg:return"close connection";case n.validateConnectionMsg:return"validate connection";default:return"unknown"}}s.dumpStream=function(e){var t=e.pos;e.pos=0;var n=e.readBlob(e.size());s.dumpOctets(n),e.pos=t},s.dumpOctets=function(e){for(var t=[],n=0;n<e.length;n+=8){var i;for(i=n;i-n<8;i++)if(i<e.length){var r,o=e[i];o<0&&(o+=256),r=o<10?"  "+o:o<100?" "+o:""+o,t.push(r+" ")}else t.push("    ");for(t.push('"'),i=n;i<e.length&&i-n<8;i++)e[i]>=32&&e[i]<127?t.push(String.fromCharCode(e[i])):t.push(".");t.push('"\n')}Cr.Utils.log(t.join(""))},Ice.TraceUtil=s}(),function(){var e=Ice.Logger,t=null;Ice.getProcessLogger=function(){return null===t&&(t=new e("","")),t},Ice.setProcessLogger=function(e){t=e}}(),g=Ice.UnexpectedObjectException,m=Ice.MemoryLimitException,Ice.ExUtil={throwUOE:function(e,t){var n=t.ice_id();throw new g("expected element of type `"+e+"' but received '"+n,n,e)},throwMemoryLimitException:function(e,t){throw new m("requested "+e+" bytes, maximum allowed is "+t+" bytes (see Ice.MessageSizeMax)")}},function(){var e=Ice.StringUtil,t=Ice.HashMap,n=(Ice.Promise,Ice.PropertyNames),i=Ice.Debug,r=(Ice.ProcessLogger,Ice.getProcessLogger),o=Ice.InitializationException,s=Ice.Class({__init__:function(e,n){if(this._properties=new t,null!=n)for(var i=n._properties.entries;null!==i;i=i.next)this._properties.set(i.key,{value:i.value.value,used:!1});if(null!=e){var r=this.parseIceCommandLineOptions(e);e.length=0;for(var o=0;o<r.length;++o)e.push(r[o])}},getProperty:function(e){return this.getPropertyWithDefault(e,"")},getPropertyWithDefault:function(e,t){var n=this._properties.get(e);return void 0!==n?(n.used=!0,n.value):t},getPropertyAsInt:function(e){return this.getPropertyAsIntWithDefault(e,0)},getPropertyAsIntWithDefault:function(e,t){var n=this._properties.get(e);return void 0!==n?(n.used=!0,parseInt(n.value)):t},getPropertyAsList:function(e){return this.getPropertyAsListWithDefault(e,0)},getPropertyAsListWithDefault:function(t,n){null==n&&(n=[]);var i=this._properties.get(t);if(void 0!==i){i.used=!0;var o=e.splitString(i.value,", \t\r\n");return null===o?(r().warning("mismatched quotes in property "+t+"'s value, returning default value"),n):(0===o.length&&(o=n),o)}return n},getPropertiesForPrefix:function(e){for(var n=new t,i=this._properties.entries;null!==i;i=i.next)null!=e&&0!==i.key.indexOf(e)||(i.value.used=!0,n.set(i.key,i.value.value));return n},setProperty:function(e,t){null!=e&&(e=e.trim());var s=r();if(null==e||0===e.length)throw new o("Attempt to set property with empty key");var a=e.indexOf(".");if(-1!==a)for(var c=e.substr(0,a),l=0;l<n.validProps.length;++l){var d=n.validProps[l][0].pattern;if(a=d.indexOf("."),i.assert(-1!=a),d.substring(0,a-1)==c){for(var u,h=!1,f=!1,_=0;_<n.validProps[l][_].length&&!h;++_){d=n.validProps[l][_].pattern();var p=new RegExp(d);if((h=p.test(e))&&n.validProps[l][_].deprecated&&(s.warning("deprecated property: "+e),null!==n.validProps[l][_].deprecatedBy&&(e=n.validProps[l][_].deprecatedBy)),h)break;if(h=(p=new RegExp(d.toUpperCase())).test(e.toUpperCase())){f=!0,u=(u=(u=d.substr(2)).substr(0,u.length-1)).replace(/\\/g,"");break}}h?f&&s.warning("unknown property: `"+e+"'; did you mean `"+u+"'"):s.warning("unknown property: "+e)}}if(null!=t&&t.length>0){var C=this._properties.get(e);void 0!==C?C.value=t:this._properties.set(e,{value:t,used:!1})}else this._properties.del(e)},getCommandLineOptions:function(){for(var e=[],t=this._properties.entries;null!==t;t=t.next)e.push("--"+t.key+"="+t.pv.value);return e},parseCommandLineOptions:function(e,t){e.length>0&&"."!=e.charAt(e.length-1)&&(e+="."),e="--"+e;var n=[],i=this;return t.forEach((function(t){0===t.indexOf(e)?(-1===t.indexOf("=")&&(t+="=1"),i.parseLine(t.substring(2))):n.push(t)})),n},parseIceCommandLineOptions:function(e){for(var t=e.slice(),i=0;i<n.clPropNames.length;++i)t=this.parseCommandLineOptions(n.clPropNames[i],t);return t},parse:function(e){for(var t,n=e.match(/[^\r\n]+/g);t=n.shift();)this.parseLine(t)},parseLine:function(e){for(var t="",n="",i=0,o="",s="",a=!1,c=0;c<e.length;++c){var l=e.charAt(c);switch(i){case 0:switch(l){case"\\":if(c<e.length-1)switch(l=e.charAt(++c)){case"\\":case"#":case"=":t+=o,o="",t+=l;break;case" ":0!==t.length&&(o+=l);break;default:t+=o,o="",t+="\\",t+=l}else t+=o,t+=l;break;case" ":case"\t":case"\r":case"\n":0!==t.length&&(o+=l);break;case"=":o="",i=1;break;case"#":a=!0;break;default:t+=o,o="",t+=l}break;case 1:switch(l){case"\\":if(c<e.length-1)switch(l=e.charAt(++c)){case"\\":case"#":case"=":n+=0===n.length?s:o,o="",s="",n+=l;break;case" ":o+=l,s+=l;break;default:n+=0===n.length?s:o,o="",s="",n+="\\",n+=l}else n+=0===n.length?s:o,n+=l;break;case" ":case"\t":case"\r":case"\n":0!==n.length&&(o+=l);break;case"#":a=!0;break;default:n+=0===n.length?s:o,o="",s="",n+=l}}if(a)break}n+=s,0===i&&0!==t.length||1==i&&0===t.length?r().warning('invalid config file entry: "'+e+'"'):0!==t.length&&this.setProperty(t,n)},clone:function(){return new s(null,this)},getUnusedProperties:function(){for(var e=[],t=this._properties.entries;null!==t;t=t.next)t.pv.used||e.push(t.key);return e}});s.createProperties=function(e,t){return new s(e,t)},Ice.Properties=s}(),function(){var e=Ice.Debug,t=Ice.HashMap,n=Ice.StringUtil,i=Ice.Class({__init__:function(e,n){this._instance=e,this._adapterName=n,this._servantMapMap=new t(t.compareEquals),this._defaultServantMap=new t,this._locatorMap=new t},addServant:function(i,r,o){e.assert(null!==this._instance),null===o&&(o="");var s=this._servantMapMap.get(r);if(void 0===s)s=new t,this._servantMapMap.set(r,s);else if(s.has(o)){var a=new Ice.AlreadyRegisteredException;throw a.id=this._instance.identityToString(r),a.kindOfObject="servant",o.length>0&&(a.id+=" -f "+n.escapeString(o,"")),a}s.set(o,i)},addDefaultServant:function(t,n){if(e.assert(null!==this._instance),void 0!==this._defaultServantMap.get(n)){var i=new Ice.AlreadyRegisteredException;throw i.kindOfObject="default servant",i.id=n,i}this._defaultServantMap.set(n,t)},removeServant:function(t,i){e.assert(null!==this._instance),null===i&&(i="");var r=this._servantMapMap.get(t);if(void 0===r||!r.has(i)){var o=new Ice.NotRegisteredException;throw o.id=this._instance.identityToString(t),o.kindOfObject="servant",i.length>0&&(o.id+=" -f "+n.escapeString(i,"")),o}var s=r.get(i);return r.del(i),0===r.size&&this._servantMapMap.del(t),s},removeDefaultServant:function(t){e.assert(null!==this._instance);var n=this._defaultServantMap.get(t);if(void 0===n){var i=new Ice.NotRegisteredException;throw i.kindOfObject="default servant",i.id=t,i}return this._defaultServantMap.del(t),n},removeAllFacets:function(t){e.assert(null!==this._instance);var n=this._servantMapMap.get(t);if(void 0===n){var i=new Ice.NotRegisteredException;throw i.id=this._instance.identityToString(t),i.kindOfObject="servant",i}return this._servantMapMap.del(t),n},findServant:function(e,t){null===t&&(t="");var n=this._servantMapMap.get(e),i=null;return void 0===n?void 0===(i=this._defaultServantMap.get(e.category))&&(i=this._defaultServantMap.get("")):i=n.get(t),void 0===i?null:i},findDefaultServant:function(t){e.assert(null!==this._instance);var n=this._defaultServantMap.get(t);return void 0===n?null:n},findAllFacets:function(n){e.assert(null!==this._instance);var i=this._servantMapMap.get(n);return void 0!==i?i.clone():new t},hasServant:function(t){var n=this._servantMapMap.get(t);return void 0!==n&&(e.assert(n.size>0),!0)},addServantLocator:function(t,i){if(e.assert(null!==this._instance),void 0!==this._locatorMap.get(i)){var r=new Ice.AlreadyRegisteredException;throw r.id=n.escapeString(i,""),r.kindOfObject="servant locator",r}this._locatorMap.set(i,t)},removeServantLocator:function(t){e.assert(null!==this._instance);var i=this._locatorMap.get(t);if(void 0===i){var r=new Ice.NotRegisteredException;throw r.id=n.escapeString(t,""),r.kindOfObject="servant locator",r}return this._locatorMap.del(t),i},findServantLocator:function(e){var t=this._locatorMap.get(e);return void 0===t?null:t},destroy:function(){e.assert(null!==this._instance);var t=this._instance.initializationData().logger;this._servantMapMap.clear(),this._defaultServantMap.clear();var n=this._locatorMap.clone();this._locatorMap.clear(),this._instance=null;for(var i=n.entries;null!==i;i=i.next){var r=i.value;try{r.deactivate(i.key)}catch(e){var o="exception during locator deactivation:\nobject adapter: `"+this._adapterName+"'\nlocator category: `"+i.key+"'\n"+e.toString();t.error(o)}}}});Ice.ServantManager=i}(),function(){var e=Ice.__M,t=Ice.Debug,n=Ice.ExUtil,i=Ice.FormatType,r=Ice.HashMap,o=Ice.Object,s=Ice.OptionalFormat,a=Ice.Protocol,c=Ice.TraceUtil,l=Ice.ArrayUtil,d=Ice.SlicedData,u={NoSlice:0,ObjectSlice:1,ExceptionSlice:2};Number.isNaN=Number.isNaN||function(e){return"number"==typeof e&&isNaN(e)};var h=function(e,t){this.index=e,this.patcher=t},f=Ice.Class,_=f({__init__:function(e,t,n,i){this._stream=e,this._encaps=t,this._sliceObjects=n,this._servantFactoryManager=i,this._patchMap=null,this._unmarshaledMap=new r,this._typeIdMap=null,this._typeIdIndex=0,this._objectList=null},readOpt:function(){return!1},readPendingObjects:function(){},readTypeId:function(e){var t,n;if(null===this._typeIdMap&&(this._typeIdMap=new r),e){if(n=this._stream.readSize(),void 0===(t=this._typeIdMap.get(n)))throw new Ice.UnmarshalOutOfBoundsException}else t=this._stream.readString(),this._typeIdMap.set(++this._typeIdIndex,t);return t},newInstance:function(e){var t=this._servantFactoryManager.find(e),n=null;return void 0!==t&&(n=t.create(e)),null==n&&void 0!==(t=this._servantFactoryManager.find(""))&&(n=t.create(e)),null==n&&(n=this._stream.createObject(e)),n},addPatchEntry:function(e,n){t.assert(e>0);var i=this._unmarshaledMap.get(e);if(null==i){null===this._patchMap&&(this._patchMap=new r);var o=this._patchMap.get(e);void 0===o&&(o=[],this._patchMap.set(e,o)),o.push(n)}else n.call(null,i)},unmarshal:function(e,n){var i,r,o;if(this._unmarshaledMap.set(e,n),n.__read(this._stream),null!==this._patchMap&&void 0!==(o=this._patchMap.get(e))){for(t.assert(o.length>0),i=0,r=o.length;i<r;++i)o[i](n);this._patchMap.del(e)}if(null!==this._patchMap&&0!==this._patchMap.size||null!==this._objectList){if(null===this._objectList&&(this._objectList=[]),this._objectList.push(n),null===this._patchMap||0===this._patchMap.size){for(i=0,r=this._objectList.length;i<r;i++)try{this._objectList[i].ice_postUnmarshal()}catch(e){this._stream.instance.initializationData().logger.warning("exception raised by ice_postUnmarshal:\n"+e.toString())}this._objectList=[]}}else try{n.ice_postUnmarshal()}catch(e){this._stream.instance.initializationData().logger.warning("exception raised by ice_postUnmarshal:\n"+e.toString())}}}),p=f(_,{__init__:function(e,t,n,i){_.call(this,e,t,n,i),this._sliceType=u.NoSlice},readObject:function(e){t.assert(null!==e);var n=this._stream.readInt();if(n>0)throw new Ice.MarshalException("invalid object id");0===(n=-n)?e.call(null,null):this.addPatchEntry(n,e)},throwException:function(){t.assert(this._sliceType===u.NoSlice);var e=this._stream.readBool();this._sliceType=u.ExceptionSlice,this._skipFirstSlice=!1,this.startSlice();for(var n=this._typeId;;){var i=this._stream.createUserException(this._typeId);if(null!==i)throw i.__read(this._stream),e&&this.readPendingObjects(),i;this.skipSlice();try{this.startSlice()}catch(e){throw e instanceof Ice.UnmarshalOutOfBoundsException&&(e.reason="unknown exception type `"+n+"'"),e}}},startInstance:function(e){t.assert(this._sliceType===e),this._skipFirstSlice=!0},endInstance:function(){if(this._sliceType===u.ObjectSlice){if(this.startSlice(),0!==this._stream.readSize())throw new Ice.MarshalException("invalid Object slice");this.endSlice()}return this._sliceType=u.NoSlice,null},startSlice:function(){var e;if(this._skipFirstSlice)return this._skipFirstSlice=!1,this._typeId;if(this._sliceType===u.ObjectSlice?(e=this._stream.readBool(),this._typeId=this.readTypeId(e)):this._typeId=this._stream.readString(),this._sliceSize=this._stream.readInt(),this._sliceSize<4)throw new Ice.UnmarshalOutOfBoundsException;return this._typeId},endSlice:function(){},skipSlice:function(){if(this._stream.instance.traceLevels().slicing>0){var e=this._stream.instance.initializationData().logger;this._sliceType===u.ObjectSlice?c.traceSlicing("object",this._typeId,this._stream.instance.traceLevels().slicingCat,e):c.traceSlicing("exception",this._typeId,this._stream.instance.traceLevels().slicingCat,e)}t.assert(this._sliceSize>=4),this._stream.skip(this._sliceSize-4)},readPendingObjects:function(){var e,t;do{for(e=t=this._stream.readSize();e>0;--e)this.readInstance()}while(t>0);if(null!==this._patchMap&&0!==this._patchMap.size)throw new Ice.MarshalException("index for class received, but no instance")},readInstance:function(){var e,t=this._stream.readInt(),n=null;if(t<=0)throw new Ice.MarshalException("invalid object id");for(this._sliceType=u.ObjectSlice,this._skipFirstSlice=!1,this.startSlice(),e=this._typeId;;){if(this._typeId==o.ice_staticId())throw new Ice.NoObjectFactoryException("",e);if(n=this.newInstance(this._typeId))break;if(!this._sliceObjects)throw new Ice.NoObjectFactoryException("no object factory found and object slicing is disabled",this._typeId);this.skipSlice(),this.startSlice()}this.unmarshal(t,n)}}),C=f(_,{__init__:function(e,t,n,i){_.call(this,e,t,n,i),this._current=null,this._objectIdIndex=1},readObject:function(e){t.assert(void 0!==e);var n=this._stream.readSize();if(n<0)throw new Ice.MarshalException("invalid object id");if(0===n)null!==e&&e.call(null,null);else if(null!==this._current&&0!=(8&this._current.sliceFlags)){if(null!==e){null===this._current.indirectPatchList&&(this._current.indirectPatchList=[]);var i=new h;i.index=n-1,i.patcher=e,this._current.indirectPatchList.push(i)}}else this.readInstance(n,e)},throwException:function(){t.assert(null===this._current),this.push(u.ExceptionSlice),this.startSlice();for(var e=this._current.typeId;;){var n=this._stream.createUserException(this._current.typeId);if(null!==n)throw n.__read(this._stream),n;if(this.skipSlice(),0!=(32&this._current.sliceFlags)){if(0===e.indexOf("::"))throw new Ice.UnknownUserException(e.substr(2));throw new Ice.UnknownUserException(e)}this.startSlice()}},startInstance:function(e){t.assert(void 0!==e),t.assert(null!==this._current.sliceType&&this._current.sliceType===e),this._current.skipFirstSlice=!0},endInstance:function(e){var t=null;return e&&(t=this.readSlicedData()),null!==this._current.slices&&(this._current.slices.length=0,this._current.indirectionTables.length=0),this._current=this._current.previous,t},startSlice:function(){if(this._current.skipFirstSlice)return this._current.skipFirstSlice=!1,this._current.typeId;if(this._current.sliceFlags=this._stream.readByte(),this._current.sliceType===u.ObjectSlice?3==(3&this._current.sliceFlags)?(this._current.typeId="",this._current.compactId=this._stream.readSize()):0!=(3&this._current.sliceFlags)?(this._current.typeId=this.readTypeId(0!=(2&this._current.sliceFlags)),this._current.compactId=-1):(this._current.typeId="",this._current.compactId=-1):(this._current.typeId=this._stream.readString(),this._current.compactId=-1),0!=(16&this._current.sliceFlags)){if(this._current.sliceSize=this._stream.readInt(),this._current.sliceSize<4)throw new Ice.UnmarshalOutOfBoundsException}else this._current.sliceSize=0;return this._current.typeId},endSlice:function(){var e,n,i,r=[];if(0!=(4&this._current.sliceFlags)&&this._stream.skipOpts(),0!=(8&this._current.sliceFlags)){for(i=this._stream.readAndCheckSeqSize(1),n=0;n<i;++n)r[n]=this.readInstance(this._stream.readSize(),null);if(0===r.length)throw new Ice.MarshalException("empty indirection table");if((null===this._current.indirectPatchList||0===this._current.indirectPatchList.length)&&0==(4&this._current.sliceFlags))throw new Ice.MarshalException("no references to indirection table");if(null!==this._current.indirectPatchList){for(n=0,i=this._current.indirectPatchList.length;n<i;++n){if(e=this._current.indirectPatchList[n],t.assert(e.index>=0),e.index>=r.length)throw new Ice.MarshalException("indirection out of range");this.addPatchEntry(r[e.index],e.patcher)}this._current.indirectPatchList.length=0}}},skipSlice:function(){if(this._stream.instance.traceLevels().slicing>0){var e=this._stream.instance.initializationData().logger,n=this._stream.instance.traceLevels().slicingCat;this._current.sliceType===u.ExceptionSlice?c.traceSlicing("exception",this._current.typeId,n,e):c.traceSlicing("object",this._current.typeId,n,e)}var i=this._stream.pos;if(0==(16&this._current.sliceFlags)){if(this._current.sliceType===u.ObjectSlice)throw new Ice.NoObjectFactoryException("no object factory found and compact format prevents slicing (the sender should use the sliced format instead)",this._current.typeId);if(0===this._current.typeId.indexOf("::"))throw new Ice.UnknownUserException(this._current.typeId.substring(2));throw new Ice.UnknownUserException(this._current.typeId)}t.assert(this._current.sliceSize>=4),this._stream.skip(this._current.sliceSize-4);var r=new Ice.SliceInfo;r.typeId=this._current.typeId,r.compactId=this._current.compactId,r.hasOptionalMembers=0!=(4&this._current.sliceFlags),r.isLastSlice=0!=(32&this._current.sliceFlags);var o=this._stream._buf,s=o.position,a=s;if(r.hasOptionalMembers&&--a,o.position=i,r.bytes=o.getArray(a-i),o.position=s,null===this._current.slices&&(this._current.slices=[],this._current.indirectionTables=[]),0!=(8&this._current.sliceFlags)){for(var l=this._stream.readAndCheckSeqSize(1),d=[],h=0;h<l;++h)d[h]=this.readInstance(this._stream.readSize(),null);this._current.indirectionTables.push(d)}else this._current.indirectionTables.push(null);this._current.slices.push(r)},readOpt:function(e,t){return(null===this._current||0!=(4&this._current.sliceFlags))&&this._stream.readOptImpl(e,t)},readInstance:function(e,n){t.assert(e>0);var i,r=null;if(e>1)return null!==n&&this.addPatchEntry(e,n),e;for(this.push(u.ObjectSlice),e=++this._objectIdIndex,this.startSlice(),i=this._current.typeId;this._current.compactId>=0&&(this._current.typeId="",0===this._current.typeId.length&&(this._current.typeId=this._stream.getTypeId(this._current.compactId))),!(this._current.typeId.length>0&&null!=(r=this.newInstance(this._current.typeId)));){if(!this._sliceObjects)throw new Ice.NoObjectFactoryException("no object factory found and object slicing is disabled",this._current.typeId);if(this.skipSlice(),0!=(32&this._current.sliceFlags)){r=new Ice.UnknownSlicedObject(i);break}this.startSlice()}if(this.unmarshal(e,r),null===this._current&&null!==this._patchMap&&0!==this._patchMap.size)throw new Ice.MarshalException("index for class received, but no instance");return null!==n&&n.call(null,r),e},readSlicedData:function(){var e,n,i,r,s,a;if(null===this._current.slices)return null;for(t.assert(this._current.slices.length===this._current.indirectionTables.length),e=0,n=this._current.slices.length;e<n;++e)for(i=this._current.indirectionTables[e],(r=this._current.slices[e]).objects=[],a=i?i.length:0,s=0;s<a;++s)this.addPatchEntry(i[s],g(r.objects,s,o));return new d(l.clone(this._current.slices))},push:function(e){null===this._current?this._current=new C.InstanceData(null):this._current=this._current.next?this._current.next:new C.InstanceData(this._current),this._current.sliceType=e,this._current.skipFirstSlice=!1}});C.InstanceData=function(e){null!==e&&(e.next=this),this.previous=e,this.next=null,this.sliceType=null,this.skipFirstSlice=!1,this.slices=null,this.indirectionTables=null,this.sliceFlags=0,this.sliceSize=0,this.typeId=null,this.compactId=0,this.indirectPatchList=null};var g=function(e,t,i){return function(r){null===r||r instanceof i||n.throwUOE(i.ice_staticId(),r),e[t]=r}},m=f({__init__:function(e,t){this._stream=e,this._encaps=t,this._marshaledMap=new r,this._typeIdMap=null,this._typeIdIndex=0},writeOpt:function(){return!1},writePendingObjects:function(){},registerTypeId:function(e){null===this._typeIdMap&&(this._typeIdMap=new r);var t=this._typeIdMap.get(e);return void 0!==t?t:(this._typeIdMap.set(e,++this._typeIdIndex),-1)}}),R=f(m,{__init__:function(e,t){m.call(this,e,t),this._sliceType=u.NoSlice,this._writeSlice=0,this._objectIdIndex=0,this._toBeMarshaledMap=new r},writeObject:function(e){t.assert(void 0!==e),null!==e?this._stream.writeInt(-this.registerObject(e)):this._stream.writeInt(0)},writeUserException:function(e){t.assert(null!=e);var n=e.__usesClasses();this._stream.writeBool(n),e.__write(this._stream),n&&this.writePendingObjects()},startInstance:function(e){this._sliceType=e},endInstance:function(){this._sliceType===u.ObjectSlice&&(this.startSlice(o.ice_staticId(),-1,!0),this._stream.writeSize(0),this.endSlice()),this._sliceType=u.NoSlice},startSlice:function(e){if(this._sliceType===u.ObjectSlice){var t=this.registerTypeId(e);t<0?(this._stream.writeBool(!1),this._stream.writeString(e)):(this._stream.writeBool(!0),this._stream.writeSize(t))}else this._stream.writeString(e);this._stream.writeInt(0),this._writeSlice=this._stream.pos},endSlice:function(){var e=this._stream.pos-this._writeSlice+4;this._stream.rewriteInt(e,this._writeSlice-4)},writePendingObjects:function(){for(var e,t=this,n=function(e,n){t._stream.writeInt(n);try{e.ice_preMarshal()}catch(e){t._stream.instance.initializationData().logger.warning("exception raised by ice_preMarshal:\n"+e.toString())}e.__write(t._stream)};this._toBeMarshaledMap.size>0;)this._marshaledMap.merge(this._toBeMarshaledMap),e=this._toBeMarshaledMap,this._toBeMarshaledMap=new r,this._stream.writeSize(e.size),e.forEach(n);this._stream.writeSize(0)},registerObject:function(e){t.assert(null!==e);var n=this._toBeMarshaledMap.get(e);return void 0!==n||void 0!==(n=this._marshaledMap.get(e))?n:(this._toBeMarshaledMap.set(e,++this._objectIdIndex),this._objectIdIndex)}}),v=f(m,{__init__:function(e,t){m.call(this,e,t),this._current=null,this._objectIdIndex=1},writeObject:function(e){var n,o;t.assert(void 0!==e),null===e?this._stream.writeSize(0):null!==this._current&&this._encaps.format===i.SlicedFormat?(null===this._current.indirectionTable&&(this._current.indirectionTable=[],this._current.indirectionMap=new r),void 0===(n=this._current.indirectionMap.get(e))?(this._current.indirectionTable.push(e),o=this._current.indirectionTable.length,this._current.indirectionMap.set(e,o),this._stream.writeSize(o)):this._stream.writeSize(n)):this.writeInstance(e)},writePendingObjects:function(){},writeUserException:function(e){t.assert(null!=e),e.__write(this._stream)},startInstance:function(e,t){null===this._current?this._current=new v.InstanceData(null):this._current=null===this._current.next?new v.InstanceData(this._current):this._current.next,this._current.sliceType=e,this._current.firstSlice=!0,null!=t&&this.writeSlicedData(t)},endInstance:function(){this._current=this._current.previous},startSlice:function(e,n,r){if(t.assert(!(null!==this._current.indirectionTable&&0!==this._current.indirectionTable.length||null!==this._current.indirectionMap&&0!==this._current.indirectionMap.size)),this._current.sliceFlagsPos=this._stream.pos,this._current.sliceFlags=0,this._encaps.format===i.SlicedFormat&&(this._current.sliceFlags|=16),r&&(this._current.sliceFlags|=32),this._stream.writeByte(0),this._current.sliceType===u.ObjectSlice){if(this._encaps.format===i.SlicedFormat||this._current.firstSlice)if(n>=0)this._current.sliceFlags|=3,this._stream.writeSize(n);else{var o=this.registerTypeId(e);o<0?(this._current.sliceFlags|=1,this._stream.writeString(e)):(this._current.sliceFlags|=2,this._stream.writeSize(o))}}else this._stream.writeString(e);0!=(16&this._current.sliceFlags)&&this._stream.writeInt(0),this._current.writeSlice=this._stream.pos,this._current.firstSlice=!1},endSlice:function(){var e,n,r;if(0!=(4&this._current.sliceFlags)&&this._stream.writeByte(255),0!=(16&this._current.sliceFlags)&&(e=this._stream.pos-this._current.writeSlice+4,this._stream.rewriteInt(e,this._current.writeSlice-4)),null!==this._current.indirectionTable&&0!==this._current.indirectionTable.length){for(t.assert(this._encaps.format===i.SlicedFormat),this._current.sliceFlags|=8,this._stream.writeSize(this._current.indirectionTable.length),n=0,r=this._current.indirectionTable.length;n<r;++n)this.writeInstance(this._current.indirectionTable[n]);this._current.indirectionTable.length=0,this._current.indirectionMap.clear()}this._stream.rewriteByte(this._current.sliceFlags,this._current.sliceFlagsPos)},writeOpt:function(e,t){return null===this._current?this._stream.writeOptImpl(e,t):!!this._stream.writeOptImpl(e,t)&&(this._current.sliceFlags|=4,!0)},writeSlicedData:function(e){var n,o,s,a,c;if(t.assert(null!=e),this._encaps.format===i.SlicedFormat)for(n=0,o=e.slices.length;n<o;++n){if(s=e.slices[n],this.startSlice(s.typeId,s.compactId,s.isLastSlice),this._stream.writeBlob(s.bytes),s.hasOptionalMembers&&(this._current.sliceFlags|=4),null!==s.objects&&s.objects.length>0)for(null===this._current.indirectionTable&&(this._current.indirectionTable=[],this._current.indirectionMap=new r),a=0,c=s.objects.length;a<c;++a)this._current.indirectionTable.push(s.objects[a]);this.endSlice()}},writeInstance:function(e){t.assert(null!=e);var n=this._marshaledMap.get(e);if(void 0===n){this._marshaledMap.set(e,++this._objectIdIndex);try{e.ice_preMarshal()}catch(e){this._stream.instance.initializationData().logger.warning("exception raised by ice_preMarshal:\n"+e.toString())}this._stream.writeSize(1),e.__write(this._stream)}else this._stream.writeSize(n)}});v.InstanceData=function(e){t.assert(void 0!==e),null!==e&&(e.next=this),this.previous=e,this.next=null,this.sliceType=null,this.firstSlice=!1,this.sliceFlags=0,this.writeSlice=0,this.sliceFlagsPos=0,this.indirectionTable=null,this.indirectionMap=null};var I=f({__init__:function(){this.start=0,this.sz=0,this.encoding=null,this.encoding_1_0=!1,this.decoder=null,this.next=null},reset:function(){this.decoder=null},setEncoding:function(e){this.encoding=e,this.encoding_1_0=e.equals(Ice.Encoding_1_0)}}),y=f({__init__:function(){this.start=0,this.format=i.DefaultFormat,this.encoding=null,this.encoding_1_0=!1,this.encoder=null,this.next=null},reset:function(){this.encoder=null},setEncoding:function(e){this.encoding=e,this.encoding_1_0=e.equals(Ice.Encoding_1_0)}}),S=f({__init__:function(e,t,n){this._instance=e,this._closure=null,this._encoding=t,this._readEncapsStack=null,this._writeEncapsStack=null,this._readEncapsCache=null,this._writeEncapsCache=null,this._sliceObjects=!0,this._startSeq=-1,this._sizePos=-1,this._buf=void 0!==n?new Ice.Buffer(n):new Ice.Buffer},reset:function(){this._buf.reset(),this.clear()},clear:function(){null!==this._readEncapsStack&&(t.assert(this._readEncapsStack.next),this._readEncapsStack.next=this._readEncapsCache,this._readEncapsCache=this._readEncapsStack,this._readEncapsCache.reset(),this._readEncapsStack=null),null!==this._writeEncapsStack&&(t.assert(this._writeEncapsStack.next),this._writeEncapsStack.next=this._writeEncapsCache,this._writeEncapsCache=this._writeEncapsStack,this._writeEncapsCache.reset(),this._writeEncapsStack=null),this._startSeq=-1,this._sliceObjects=!0},swap:function(e){var n,i,r,o,s;t.assert(this._instance===e._instance),n=e._buf,e._buf=this._buf,this._buf=n,i=e._closure,e._closure=this._closure,this._closure=i,this.resetEncaps(),e.resetEncaps(),r=e._startSeq,e._startSeq=this._startSeq,this._startSeq=r,o=e._minSeqSize,e._minSeqSize=this._minSeqSize,this._minSeqSize=o,s=e._sizePos,e._sizePos=this._sizePos,this._sizePos=s},resetEncaps:function(){this._readEncapsStack=null,this._writeEncapsStack=null},resize:function(e){this._buf.resize(e),this._buf.position=e},prepareWrite:function(){return this._buf.position=0,this._buf},startWriteObject:function(e){t.assert(null!==this._writeEncapsStack&&null!==this._writeEncapsStack.encoder),this._writeEncapsStack.encoder.startInstance(u.ObjectSlice,e)},endWriteObject:function(){t.assert(null!==this._writeEncapsStack&&null!==this._writeEncapsStack.encoder),this._writeEncapsStack.encoder.endInstance()},startReadObject:function(){t.assert(null!==this._readEncapsStack&&null!==this._readEncapsStack.decoder),this._readEncapsStack.decoder.startInstance(u.ObjectSlice)},endReadObject:function(e){return t.assert(null!==this._readEncapsStack&&null!==this._readEncapsStack.decoder),this._readEncapsStack.decoder.endInstance(e)},startWriteException:function(e){t.assert(null!==this._writeEncapsStack&&null!==this._writeEncapsStack.encoder),this._writeEncapsStack.encoder.startInstance(u.ExceptionSlice,e)},endWriteException:function(){t.assert(null!==this._writeEncapsStack&&null!==this._writeEncapsStack.encoder),this._writeEncapsStack.encoder.endInstance()},startReadException:function(){t.assert(null!==this._readEncapsStack&&null!==this._readEncapsStack.decoder),this._readEncapsStack.decoder.startInstance(u.ExceptionSlice)},endReadException:function(e){return t.assert(null!==this._readEncapsStack&&null!==this._readEncapsStack.decoder),this._readEncapsStack.decoder.endInstance(e)},startWriteEncaps:function(e,t){void 0===e&&(null!==this._writeEncapsStack?(e=this._writeEncapsStack.encoding,t=this._writeEncapsStack.format):(e=this._encoding,t=i.DefaultFormat)),a.checkSupportedEncoding(e);var n=this._writeEncapsCache;null!==n?(n.reset(),this._writeEncapsCache=this._writeEncapsCache.next):n=new y,n.next=this._writeEncapsStack,this._writeEncapsStack=n,this._writeEncapsStack.format=t,this._writeEncapsStack.setEncoding(e),this._writeEncapsStack.start=this._buf.limit,this.writeInt(0),this._writeEncapsStack.encoding.__write(this)},endWriteEncaps:function(){t.assert(this._writeEncapsStack);var e=this._writeEncapsStack.start,n=this._buf.limit-e;this._buf.putIntAt(e,n);var i=this._writeEncapsStack;this._writeEncapsStack=i.next,i.next=this._writeEncapsCache,this._writeEncapsCache=i,this._writeEncapsCache.reset()},endWriteEncapsChecked:function(){if(null===this._writeEncapsStack)throw new Ice.EncapsulationException("not in an encapsulation");this.endWriteEncaps()},writeEmptyEncaps:function(e){a.checkSupportedEncoding(e),this.writeInt(6),e.__write(this)},writeEncaps:function(e){if(e.length<6)throw new Ice.EncapsulationException;this.expand(e.length),this._buf.putArray(e)},getWriteEncoding:function(){return null!==this._writeEncapsStack?this._writeEncapsStack.encoding:this._encoding},startReadEncaps:function(){var e=this._readEncapsCache;null!==e?(e.reset(),this._readEncapsCache=this._readEncapsCache.next):e=new I,e.next=this._readEncapsStack,this._readEncapsStack=e,this._readEncapsStack.start=this._buf.position;var t=this.readInt();if(t<6)throw new Ice.UnmarshalOutOfBoundsException;if(t-4>this._buf.remaining)throw new Ice.UnmarshalOutOfBoundsException;this._readEncapsStack.sz=t;var n=new Ice.EncodingVersion;return n.__read(this),a.checkSupportedEncoding(n),this._readEncapsStack.setEncoding(n),n},endReadEncaps:function(){if(t.assert(null!==this._readEncapsStack),this._readEncapsStack.encoding_1_0){if(this._buf.position!==this._readEncapsStack.start+this._readEncapsStack.sz){if(this._buf.position+1!==this._readEncapsStack.start+this._readEncapsStack.sz)throw new Ice.EncapsulationException;try{this._buf.get()}catch(e){throw new Ice.UnmarshalOutOfBoundsException}}}else if(this.skipOpts(),this._buf.position!==this._readEncapsStack.start+this._readEncapsStack.sz)throw new Ice.EncapsulationException;var e=this._readEncapsStack;this._readEncapsStack=e.next,e.next=this._readEncapsCache,this._readEncapsCache=e,this._readEncapsCache.reset()},skipEmptyEncaps:function(e){if(t.assert(void 0!==e),6!==this.readInt())throw new Ice.EncapsulationException;var n=this._buf.position;if(n+2>this._buf.limit)throw new Ice.UnmarshalOutOfBoundsException;null!==e?e.__read(this):this._buf.position=n+2},endReadEncapsChecked:function(){if(null===this._readEncapsStack)throw new Ice.EncapsulationException("not in an encapsulation");this.endReadEncaps()},readEncaps:function(e){t.assert(void 0!==e);var n=this.readInt();if(n<6)throw new Ice.UnmarshalOutOfBoundsException;if(n-4>this._buf.remaining)throw new Ice.UnmarshalOutOfBoundsException;null!==e?(e.__read(this),this._buf.position=this._buf.position-6):this._buf.position=this._buf.position-4;try{return this._buf.getArray(n)}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},getReadEncoding:function(){return null!==this._readEncapsStack?this._readEncapsStack.encoding:this._encoding},getReadEncapsSize:function(){return t.assert(null!==this._readEncapsStack),this._readEncapsStack.sz-6},skipEncaps:function(){var e=this.readInt();if(e<6)throw new Ice.UnmarshalOutOfBoundsException;var t=new Ice.EncodingVersion;t.__read(this);try{this._buf.position=this._buf.position+e-6}catch(e){throw new Ice.UnmarshalOutOfBoundsException}return t},startWriteSlice:function(e,n,i){t.assert(null!==this._writeEncapsStack&&null!==this._writeEncapsStack.encoder),this._writeEncapsStack.encoder.startSlice(e,n,i)},endWriteSlice:function(){t.assert(null!==this._writeEncapsStack&&null!==this._writeEncapsStack.encoder),this._writeEncapsStack.encoder.endSlice()},startReadSlice:function(){return t.assert(null!==this._readEncapsStack&&null!==this._readEncapsStack.decoder),this._readEncapsStack.decoder.startSlice()},endReadSlice:function(){t.assert(null!==this._readEncapsStack&&null!==this._readEncapsStack.decoder),this._readEncapsStack.decoder.endSlice()},skipSlice:function(){t.assert(null!==this._readEncapsStack&&null!==this._readEncapsStack.decoder),this._readEncapsStack.decoder.skipSlice()},readPendingObjects:function(){null!==this._readEncapsStack&&null!==this._readEncapsStack.decoder?this._readEncapsStack.decoder.readPendingObjects():(null!==this._readEncapsStack&&this._readEncapsStack.encoding_1_0||null===this._readEncapsStack&&this._encoding.equals(Ice.Encoding_1_0))&&this.skipSize()},writePendingObjects:function(){null!==this._writeEncapsStack&&null!==this._writeEncapsStack.encoder?this._writeEncapsStack.encoder.writePendingObjects():(null!==this._writeEncapsStack&&this._writeEncapsStack.encoding_1_0||null===this._writeEncapsStack&&this._encoding.equals(Ice.Encoding_1_0))&&this.writeSize(0)},writeSize:function(e){e>254?(this.expand(5),this._buf.put(255),this._buf.putInt(e)):(this.expand(1),this._buf.put(e))},readSize:function(){try{var e=this._buf.get();if(255===e){var t=this._buf.getInt();if(t<0)throw new Ice.UnmarshalOutOfBoundsException;return t}return e}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},readAndCheckSeqSize:function(e){var t=this.readSize();if(0===t)return t;if(-1===this._startSeq||this._buf.position>this._startSeq+this._minSeqSize?(this._startSeq=this._buf.position,this._minSeqSize=t*e):this._minSeqSize+=t*e,this._startSeq+this._minSeqSize>this._buf.limit)throw new Ice.UnmarshalOutOfBoundsException;return t},startSize:function(){var e=this._buf.position;return this.writeInt(0),e},endSize:function(e){t.assert(e>=0),this.rewriteInt(this._buf.position-e-4,e)},writeBlob:function(e){null!==e&&(this.expand(e.length),this._buf.putArray(e))},readBlob:function(e){if(this._buf.remaining<e)throw new Ice.UnmarshalOutOfBoundsException;try{return this._buf.getArray(e)}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},writeOpt:function(e,n){return t.assert(null!==this._writeEncapsStack),null!==this._writeEncapsStack.encoder?this._writeEncapsStack.encoder.writeOpt(e,n):this.writeOptImpl(e,n)},readOpt:function(e,n){return t.assert(null!==this._readEncapsStack),null!==this._readEncapsStack.decoder?this._readEncapsStack.decoder.readOpt(e,n):this.readOptImpl(e,n)},writeOptValue:function(e,t,n,i){void 0!==i&&this.writeOpt(e,t)&&n.call(this,i)},readOptValue:function(e,t,n){return this.readOpt(e,t)?n.call(this):void 0},writeByte:function(e){this.expand(1),this._buf.put(e)},rewriteByte:function(e,t){this._buf.putAt(t,e)},readByte:function(){try{return this._buf.get()}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},writeByteSeq:function(e){null===e||0===e.length?this.writeSize(0):(this.writeSize(e.length),this.expand(e.length),this._buf.putArray(e))},readByteSeq:function(){return this._buf.getArray(this.readAndCheckSeqSize(1))},writeBool:function(e){this.expand(1),this._buf.put(e?1:0)},rewriteBool:function(e,t){this._buf.putAt(t,e?1:0)},readBool:function(){try{return 1===this._buf.get()}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},writeShort:function(e){this.expand(2),this._buf.putShort(e)},readShort:function(){try{return this._buf.getShort()}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},writeInt:function(e){this.expand(4),this._buf.putInt(e)},rewriteInt:function(e,t){this._buf.putIntAt(t,e)},readInt:function(){try{return this._buf.getInt()}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},writeLong:function(e){this.expand(8),this._buf.putLong(e)},readLong:function(){try{return this._buf.getLong()}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},writeFloat:function(e){this.expand(4),this._buf.putFloat(e)},readFloat:function(){try{return this._buf.getFloat()}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},writeDouble:function(e){this.expand(8),this._buf.putDouble(e)},readDouble:function(){try{return this._buf.getDouble()}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},writeString:function(e){null==e||0===e.length?this.writeSize(0):this._buf.writeString(this,e)},readString:function(){var e=this.readSize();if(0===e)return"";if(this._buf.remaining<e)throw new Ice.UnmarshalOutOfBoundsException;try{return this._buf.getString(e)}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},writeProxy:function(e){this._instance.proxyFactory().proxyToStream(e,this)},writeOptProxy:function(e,t){if(void 0!==t&&this.writeOpt(e,s.FSize)){var n=this.startSize();this.writeProxy(t),this.endSize(n)}},readProxy:function(e){return this._instance.proxyFactory().streamToProxy(this,e)},readOptProxy:function(e,t){return this.readOpt(e,s.FSize)?(this.skip(4),this.readProxy(t)):void 0},writeEnum:function(e){this.isWriteEncoding_1_0()?e.maxValue<127?this.writeByte(e.value):e.maxValue<32767?this.writeShort(e.value):this.writeInt(e.value):this.writeSize(e.value)},readEnum:function(e){var t;t=this.getReadEncoding().equals(Ice.Encoding_1_0)?e.maxValue<127?this.readByte():e.maxValue<32767?this.readShort():this.readInt():this.readSize();var n=e.valueOf(t);if(void 0===n)throw new Ice.MarshalException("enumerator value "+t+" is out of range");return n},readOptEnum:function(e,t){return this.readOpt(e,s.Size)?this.readEnum(t):void 0},writeObject:function(e){this.initWriteEncaps(),this._writeEncapsStack.encoder.writeObject(e)},writeOptObject:function(e,t){void 0!==t&&this.writeOpt(e,s.Class)&&this.writeObject(t)},readObject:function(e,t){this.initReadEncaps(),this._readEncapsStack.decoder.readObject.call(this._readEncapsStack.decoder,(function(i){null===i||i.ice_instanceof(t)||n.throwUOE(t.ice_staticId(),i),e(i)}))},readOptObject:function(e,t,n){this.readOpt(e,s.Class)?this.readObject(t,n):t(void 0)},writeUserException:function(e){this.initWriteEncaps(),this._writeEncapsStack.encoder.writeUserException(e)},throwException:function(){this.initReadEncaps(),this._readEncapsStack.decoder.throwException()},sliceObjects:function(e){this._sliceObjects=e},readOptImpl:function(e,t){var n,i,r,o;if(this.isReadEncoding_1_0())return!1;for(;;){if(this._buf.position>=this._readEncapsStack.start+this._readEncapsStack.sz)return!1;if(255===(n=this.readByte()))return this._buf.position-=1,!1;if(i=s.valueOf(7&n),30===(r=n>>3)&&(r=this.readSize()),r>e)return o=r<30?1:r<255?2:6,this._buf.position-=o,!1;if(!(r<e)){if(i!==t)throw new Ice.MarshalException("invalid optional data member `"+r+"': unexpected format");return!0}this.skipOpt(i)}},writeOptImpl:function(e,t){if(this.isWriteEncoding_1_0())return!1;var n=t.value;return e<30?(n|=e<<3,this.writeByte(n)):(n|=240,this.writeByte(n),this.writeSize(e)),!0},skipOpt:function(e){switch(e){case s.F1:this.skip(1);break;case s.F2:this.skip(2);break;case s.F4:this.skip(4);break;case s.F8:this.skip(8);break;case s.Size:this.skipSize();break;case s.VSize:this.skip(this.readSize());break;case s.FSize:this.skip(this.readInt());break;case s.Class:this.readObject(null,Ice.Object)}},skipOpts:function(){for(var e,t,n;;){if(this._buf.position>=this._readEncapsStack.start+this._readEncapsStack.sz)return;if(255===(t=(e=this.readByte())<0?e+256:e))return;n=s.valueOf(7&t),t>>3==30&&this.skipSize(),this.skipOpt(n)}},skip:function(e){if(e>this._buf.remaining)throw new Ice.UnmarshalOutOfBoundsException;this._buf.position+=e},skipSize:function(){255===this.readByte()&&this.skip(4)},isEmpty:function(){return this._buf.empty()},expand:function(e){this._buf.expand(e)},createObject:function(t){var n,i=null;try{var r=t.length>2?t.substr(2).replace(/::/g,"."):"";void 0!==(n=e.type(r))&&(i=new n)}catch(e){throw new Ice.NoObjectFactoryException("no object factory",t,e)}return i},getTypeId:function(e){var t=Ice.CompactIdRegistry.get(e);return void 0===t?"":t},isReadEncoding_1_0:function(){return null!==this._readEncapsStack?this._readEncapsStack.encoding_1_0:this._encoding.equals(Ice.Encoding_1_0)},isWriteEncoding_1_0:function(){return this._writeEncapsStack?this._writeEncapsStack.encoding_1_0:this._encoding.equals(Ice.Encoding_1_0)},initReadEncaps:function(){if(null===this._readEncapsStack&&(this._readEncapsStack=this._readEncapsCache,null!==this._readEncapsStack?this._readEncapsCache=this._readEncapsCache.next:this._readEncapsStack=new I,this._readEncapsStack.setEncoding(this._encoding),this._readEncapsStack.sz=this._buf.limit),null===this._readEncapsStack.decoder){var e=this._instance.servantFactoryManager();this._readEncapsStack.encoding_1_0?this._readEncapsStack.decoder=new p(this,this._readEncapsStack,this._sliceObjects,e):this._readEncapsStack.decoder=new C(this,this._readEncapsStack,this._sliceObjects,e)}},initWriteEncaps:function(){this._writeEncapsStack||(this._writeEncapsStack=this._writeEncapsCache,this._writeEncapsStack?this._writeEncapsCache=this._writeEncapsCache.next:this._writeEncapsStack=new y,this._writeEncapsStack.setEncoding(this._encoding)),this._writeEncapsStack.format===i.DefaultFormat&&(this._writeEncapsStack.format=this._instance.defaultsAndOverrides().defaultFormat),this._writeEncapsStack.encoder||(this._writeEncapsStack.encoding_1_0?this._writeEncapsStack.encoder=new R(this,this._writeEncapsStack):this._writeEncapsStack.encoder=new v(this,this._writeEncapsStack))},createUserException:function(t){var n,i=null;try{var r=t.length>2?t.substr(2).replace(/::/g,"."):"";void 0!==(n=e.type(r))&&(i=new n)}catch(e){throw new Ice.MarshalException(e)}return i}}),E=Object.defineProperty;E(S.prototype,"pos",{get:function(){return this._buf.position},set:function(e){this._buf.position=e}}),E(S.prototype,"size",{get:function(){return this._buf.limit}}),E(S.prototype,"instance",{get:function(){return this._instance}}),E(S.prototype,"closure",{get:function(){return this._type},set:function(e){this._type=e}}),E(S.prototype,"buffer",{get:function(){return this._buf}});var b=function(e,t,n,i,r,o){var s={write:function(t,n){return e.call(t,n)},read:function(e){return t.call(e)},writeOpt:function(t,n,r){t.writeOptValue(n,i,e,r)},readOpt:function(e,n){return e.readOptValue(n,i,t)}};return void 0!==r&&void 0!==o&&(s.validate=function(e){return e>=r&&e<=o}),E(s,"minWireSize",{get:function(){return n}}),s},w=S.prototype,P=4294967295,x=-34028234664e28,T=34028234664e28;Ice.ByteHelper=b(w.writeByte,w.readByte,1,Ice.OptionalFormat.F1,0,255),Ice.ShortHelper=b(w.writeShort,w.readShort,2,Ice.OptionalFormat.F2,-32768,32767),Ice.IntHelper=b(w.writeInt,w.readInt,4,Ice.OptionalFormat.F4,-2147483648,2147483647),Ice.FloatHelper=b(w.writeFloat,w.readFloat,4,Ice.OptionalFormat.F4,x,T),Ice.FloatHelper.validate=function(e){return Number.isNaN(e)||e==Number.POSITIVE_INFINITY||e==Number.NEGATIVE_INFINITY||e>=x&&e<=T},Ice.DoubleHelper=b(w.writeDouble,w.readDouble,8,Ice.OptionalFormat.F8,-Number.MAX_VALUE,Number.MAX_VALUE),Ice.DoubleHelper.validate=function(e){return Number.isNaN(e)||e==Number.POSITIVE_INFINITY||e==Number.NEGATIVE_INFINITY||e>=-Number.MAX_VALUE&&e<=Number.MAX_VALUE},Ice.BoolHelper=b(w.writeBool,w.readBool,1,Ice.OptionalFormat.F1),Ice.LongHelper=b(w.writeLong,w.readLong,8,Ice.OptionalFormat.F8),Ice.LongHelper.validate=function(e){return e.low>=0&&e.low<=P&&e.high>=0&&e.high<=P},Ice.StringHelper=b(w.writeString,w.readString,1,Ice.OptionalFormat.VSize),Ice.ObjectHelper={write:function(e,t){e.writeObject(t)},read:function(e){var t;return e.readObject((function(e){t=e}),Ice.Object),t},writeOpt:function(e,t,n){e.writeOptValue(t,Ice.OptionalFormat.Class,w.writeObject,n)},readOpt:function(e,t){var n;return e.readOptObject(t,(function(e){n=e}),Ice.Object),n}},E(Ice.ObjectHelper,"minWireSize",{get:function(){return 1}}),Ice.BasicStream=S}(),Ice.SocketOperation={None:0,Read:1,Write:2,Connect:2},R=Ice.Class({__init__:function(e,t,n,i){this._instance=e,this._traceLevel=e.traceLevels().network,this._traceCategory=e.traceLevels().networkCat,this._logger=e.initializationData().logger,this._properties=e.initializationData().properties,this._type=t,this._protocol=n,this._secure=i},traceLevel:function(){return this._traceLevel},traceCategory:function(){return this._traceCategory},logger:function(){return this._logger},protocol:function(){return this._protocol},type:function(){return this._type},secure:function(){return this._secure},properties:function(){return this._properties},defaultHost:function(){return this._instance.defaultsAndOverrides().defaultHost},defaultSourceAddress:function(){return this._instance.defaultsAndOverrides().defaultSourceAddress},defaultEncoding:function(){return this._instance.defaultsAndOverrides().defaultEncoding},defaultTimeout:function(){return this._instance.defaultsAndOverrides().defaultTimeout},messageSizeMax:function(){return this._instance.messageSizeMax()}}),Ice.ProtocolInstance=R,N.defineSequence(Ice,"EndpointSeqHelper","Ice.ObjectHelper",!1,"Ice.Endpoint"),v=Ice.AsyncResultBase,I=Ice.Debug,Ice.Promise,y=Ice.Protocol,S=Ice.UserException,E=Ice.BasicStream,(b=Ice.Class(v,{__init__:function(e,t,n,i,r,o){v.call(this,e,t,n,i,r),void 0!==e&&(this._completed=o,this._is=null,this._os=null!==e?new E(this._instance,y.currentProtocolEncoding):null,this._state=0,this._exception=null,this._sentSynchronously=!1)},cancel:function(){this.__cancel(new Ice.InvocationCanceledException)},isCompleted:function(){return(this._state&b.Done)>0},isSent:function(){return(this._state&b.Sent)>0},throwLocalException:function(){if(null!==this._exception)throw this._exception},sentSynchronously:function(){return this._sentSynchronously},__markSent:function(e){I.assert(0==(this._state&b.Done)),this._state|=b.Sent,e&&(this._state|=b.Done|b.OK,this._cancellationHandler=null,this.succeed(this))},__markFinished:function(e,t){I.assert(0==(this._state&b.Done)),this._state|=b.Done,e&&(this._state|=b.OK),this._cancellationHandler=null,t?t(this):this.succeed(this)},__markFinishedEx:function(e){I.assert(0==(this._state&b.Done)),this._exception=e,this._state|=b.Done,this._cancellationHandler=null,this.fail(e,this)},__cancel:function(e){this._cancellationException=e,this._cancellationHandler&&this._cancellationHandler.asyncRequestCanceled(this,e)},__cancelable:function(e){if(this._cancellationException)try{throw this._cancellationException}finally{this._cancellationException=null}this._cancellationHandler=e},__os:function(){return this._os},__is:function(){return this._is},__startReadParams:function(){return this._is.startReadEncaps(),this._is},__endReadParams:function(){this._is.endReadEncaps()},__readEmptyParams:function(){this._is.skipEmptyEncaps(null)},__readParamEncaps:function(){return this._is.readEncaps(null)},__throwUserException:function(){if(I.assert(0!=(this._state&b.Done)),0==(this._state&b.OK))try{this._is.startReadEncaps(),this._is.throwException()}catch(e){throw e instanceof S&&this._is.endReadEncaps(),e}}})).OK=1,b.Done=2,b.Sent=4,Ice.AsyncResult=b,Ice.Address=function(e,t){this.host=e,this.port=t},function(){var e=Ice.BasicStream,t=Ice.Debug,n=(Ice.ExUtil,Ice.Class),i=Ice.Protocol,r=n({__init__:function(t,n){if(this._batchStreamInUse=!1,this._batchRequestNum=0,this._batchStream=new e(t,i.currentProtocolEncoding),this._batchStream.writeBlob(i.requestBatchHdr),this._batchMarker=this._batchStream.size,this._exception=null,this._maxSize=t.batchAutoFlushSize(),this._maxSize>0&&n){var r=t.initializationData().properties.getPropertyAsIntWithDefault("Ice.UDP.SndSize",65507);r<this._maxSize&&(this._maxSize=r)}},prepareBatchRequest:function(e){if(this._exception)throw this._exception;this._batchStream.swap(e)},finishBatchRequest:function(e,n,i){this._batchStream.swap(e);try{this._maxSize>0&&this._batchStream.size>=this._maxSize&&n.ice_flushBatchRequests(),t.assert(this._batchMarker<this._batchStream.size),this._batchMarker=this._batchStream.size,++this._batchRequestNum}finally{this._batchStream.resize(this._batchMarker)}},abortBatchRequest:function(e){this._batchStream.swap(e),this._batchStream.resize(this._batchMarker)},swap:function(e){if(0===this._batchRequestNum)return 0;var t=null;if(this._batchMarker<this._batchStream.size){var n=this._batchStream.size-this._batchMarker;this._batchStream.pos=this._batchMarker,t=this._batchStream.buffer.getArray(n),this._batchStream.resize(this._batchMarker)}var r=this._batchRequestNum;return this._batchStream.swap(e),this._batchRequestNum=0,this._batchStream.writeBlob(i.requestBatchHdr),this._batchMarker=this._batchStream.size,null!==t&&this._batchStream.writeBlob(t),r},destroy:function(e){this._exception=e},isEmpty:function(){return this._batchStream.size===i.requestBatchHdr.length}});Ice.BatchRequestQueue=r}(),function(){var e=Ice.HashMap,t=Ice.CommunicatorDestroyedException,n=Ice.Class({__init__:function(t){this._logger=t,this._destroyed=!1,this._tokenId=0,this._tokens=new e},destroy:function(){var e=this;this._tokens.forEach((function(t,n){e.cancel(t)})),this._destroyed=!0,this._tokens.clear()},schedule:function(e,i){if(this._destroyed)throw new t;var r=this._tokenId++,o=this,s=n.setTimeout((function(){o.handleTimeout(r)}),i);return this._tokens.set(r,{callback:e,id:s,isInterval:!1}),r},scheduleRepeated:function(e,i){if(this._destroyed)throw new t;var r=this._tokenId++,o=this,s=n.setInterval((function(){o.handleInterval(r)}),i);return this._tokens.set(r,{callback:e,id:s,isInterval:!0}),r},cancel:function(e){if(this._destroyed)return!1;var t=this._tokens.get(e);return void 0!==t&&(this._tokens.del(e),t.isInterval?n.clearInterval(t.id):n.clearTimeout(t.id),!0)},handleTimeout:function(e){if(!this._destroyed){var t=this._tokens.get(e);if(void 0!==t){this._tokens.del(e);try{t.callback()}catch(e){this._logger.warning("uncaught exception while executing timer:\n"+e)}}}},handleInterval:function(e){if(!this._destroyed){var t=this._tokens.get(e);if(void 0!==t)try{t.callback()}catch(e){this._logger.warning("uncaught exception while executing timer:\n"+e)}}}});n.setTimeout=Ice.Timer.setTimeout,n.clearTimeout=Ice.Timer.clearTimeout,n.setInterval=Ice.Timer.setInterval,n.clearInterval=Ice.Timer.clearInterval,n.setImmediate=Ice.Timer.setImmediate,Ice.Timer=n}(),function(){var e=Ice.Class,t=e({__init__:function(e){this._instance=e,this._requests=[]},add:function(e,t){if(null===this._instance)throw new Ice.CommunicatorDestroyedException;var i=new n(this._instance,this,e);e.__cancelable(i),i.token=this._instance.timer().schedule((function(){i.run()}),t),this._requests.push(i)},destroy:function(){for(var e=0;e<this._requests.length;++e)this._instance.timer().cancel(this._requests[e].token),this._requests[e].destroy();this._requests=[],this._instance=null},remove:function(e){var t=this._requests.indexOf(e);t>=0&&this._requests.splice(t,1)},cancel:function(e){var t=this._requests.indexOf(e);return t>=0&&(this._requests.splice(t,1),this._instance.timer().cancel(e.token))}});Ice.RetryQueue=t;var n=e({__init__:function(e,t,n,i){this._instance=e,this._queue=t,this._outAsync=n},run:function(){this._outAsync.__retry(),this._queue.remove(this)},destroy:function(){try{this._outAsync.__abort(new Ice.CommunicatorDestroyedException)}catch(e){}},asyncRequestCanceled:function(e,t){this._queue.cancel(this)&&(this._instance.traceLevels().retry>=1&&this._instance.initializationData().logger.trace(this._instance.traceLevels().retryCat,"operation retry canceled\n"+t.toString()),this._outAsync.__completedEx(t))}})}(),function(){var e=Ice.ArrayUtil,t=Ice.Debug,n=Ice.HashMap,i=Ice.Promise,r=Ice.Class({__init__:function(e){this._router=e,t.assert(null!==this._router),this._clientEndpoints=null,this._serverEndpoints=null,this._adapter=null,this._identities=new n(n.compareEquals),this._evictedIdentities=[]},destroy:function(){this._clientEndpoints=[],this._serverEndpoints=[],this._adapter=null,this._identities.clear()},equals:function(e){return this===e||e instanceof r&&this._router.equals(e._router)},hashCode:function(){return this._router.hashCode()},getRouter:function(){return this._router},getClientEndpoints:function(){var e=new i;if(null!==this._clientEndpoints)e.succeed(this._clientEndpoints);else{var t=this;this._router.getClientProxy().then((function(n){t.setClientEndpoints(n,e)})).exception((function(t){e.fail(t)}))}return e},getServerEndpoints:function(){if(null!==this._serverEndpoints)return(new i).succeed(this._serverEndpoints);var e=this;return this._router.getServerProxy().then((function(t){return e.setServerEndpoints(t)}))},addProxy:function(e){if(t.assert(null!==e),this._identities.has(e.ice_getIdentity()))return(new i).succeed();var n=this;return this._router.addProxies([e]).then((function(t){n.addAndEvictProxies(e,t)}))},setAdapter:function(e){this._adapter=e},getAdapter:function(){return this._adapter},clearCache:function(e){this._identities.del(e.getIdentity())},setClientEndpoints:function(e,t){if(null===this._clientEndpoints)if(null===e)this._clientEndpoints=this._router.__reference().getEndpoints(),t.succeed(this._clientEndpoints);else{e=e.ice_router(null);var n=this;this._router.ice_getConnection().then((function(i){var r=e.ice_timeout(i.timeout());n._clientEndpoints=r.__reference().getEndpoints(),t.succeed(n._clientEndpoints)})).exception((function(e){t.fail(e)}))}else t.succeed(this._clientEndpoints)},setServerEndpoints:function(e){if(null===e)throw new Ice.NoEndpointException;return e=e.ice_router(null),this._serverEndpoints=e.__reference().getEndpoints(),this._serverEndpoints},addAndEvictProxies:function(t,n){var i=e.indexOf(this._evictedIdentities,t.ice_getIdentity(),(function(e,t){return e.equals(t)}));i>=0?this._evictedIdentities.splice(i,1):this._identities.set(t.ice_getIdentity(),1);for(var r=0;r<n.length;++r)this._identities.del(n[r].ice_getIdentity())}});Ice.RouterInfo=r}(),function(){var e=Ice.AsyncStatus,t=Ice.AsyncResult,n=Ice.BasicStream,i=Ice.Debug,r=Ice.HashMap,o=Ice.RetryException,s=(Ice.OperationMode,Ice.Protocol),a=Ice.Identity,c=Ice.Class(t,{__init__:function(e,i,r,o,a){void 0!==e?(t.call(this,e,i,r,o,a),this._os=new n(this._instance,s.currentProtocolEncoding)):t.call(this)},__os:function(){return this._os},__sent:function(){this.__markSent(!0)},__completedEx:function(e){this.__markFinishedEx(e)}}),l=Ice.Class(c,{__init__:function(e,n){void 0!==e?(c.call(this,e.ice_getCommunicator(),n,null,e,null),this._mode=null,this._cnt=0,this._sent=!1,this._handler=null):t.call(this)},__completedEx:function(e){try{this._instance.retryQueue().add(this,this.__handleException(e))}catch(e){this.__markFinishedEx(e)}},__retryException:function(e){try{this._proxy.__updateRequestHandler(this._handler,null),this._instance.retryQueue().add(this,0)}catch(e){this.__completedEx(e)}},__retry:function(){this.__invokeImpl(!1)},__abort:function(e){this.__markFinishedEx(e)},__invokeImpl:function(t){try{if(t){var n=this._proxy.__reference().getInvocationTimeout();if(n>0){var i=this;this._timeoutToken=this._instance.timer().schedule((function(){i.__cancel(new Ice.InvocationTimeoutException)}),n)}}for(;;)try{return this._sent=!1,this._handler=this._proxy.__getRequestHandler(),void((this._handler.sendAsyncRequest(this)&e.Sent)>0&&t&&(this._sentSynchronously=!0))}catch(e){if(e instanceof o)this._proxy.__updateRequestHandler(this._handler,null);else{var r=this.__handleException(e);if(r>0)return void this._instance.retryQueue().add(this,r)}}}catch(e){this.__markFinishedEx(e)}},__markSent:function(e){this._sent=!0,e&&this._timeoutToken&&this._instance.timer().cancel(this._timeoutToken),c.prototype.__markSent.call(this,e)},__markFinishedEx:function(e){this._timeoutToken&&this._instance.timer().cancel(this._timeoutToken),c.prototype.__markFinishedEx.call(this,e)},__handleException:function(e){var t={value:0};return this._cnt=this._proxy.__handleException(e,this._handler,this._mode,this._sent,t,this._cnt),t.value}}),d=Ice.Class(l,{__init__:function(e,t,n){void 0!==e?(l.call(this,e,t),this._encoding=s.getCompatibleEncoding(this._proxy.__reference().getEncoding()),this._completed=n):l.call(this)},__prepare:function(e,t,n){s.checkSupportedProtocol(s.getCompatibleProtocol(this._proxy.__reference().getProtocol())),this._mode=t,null===n&&(n=d._emptyContext),this._proxy.ice_isBatchOneway()||this._proxy.ice_isBatchDatagram()?this._proxy.__getBatchRequestQueue().prepareBatchRequest(this._os):this._os.writeBlob(s.requestHdr);var i=this._proxy.__reference();i.getIdentity().__write(this._os);var o=i.getFacet();if(null===o||0===o.length?Ice.StringSeqHelper.write(this._os,null):Ice.StringSeqHelper.write(this._os,[o]),this._os.writeString(this._operation),this._os.writeByte(t.value),void 0!==n){if(null!==n&&!(n instanceof r))throw new Error("illegal context value, expecting null or HashMap");Ice.ContextHelper.write(this._os,n)}else{var a=i.getInstance().getImplicitContext(),c=i.getContext();null===a?Ice.ContextHelper.write(this._os,c):a.write(c,this._os)}},__sent:function(){this.__markSent(!this._proxy.ice_isTwoway())},__invokeRemote:function(e,t,n){return e.sendAsyncRequest(this,t,n,0)},__abort:function(e){(this._proxy.ice_isBatchOneway()||this._proxy.ice_isBatchDatagram())&&this._proxy.__getBatchRequestQueue().abortBatchRequest(this._os),l.prototype.__abort.call(this,e)},__invoke:function(){if(this._proxy.ice_isBatchOneway()||this._proxy.ice_isBatchDatagram())return this._sentSynchronously=!0,this._proxy.__getBatchRequestQueue().finishBatchRequest(this._os,this._proxy,this._operation),void this.__markFinished(!0);this.__invokeImpl(!0)},__completed:function(e){var t;i.assert(this._proxy.ice_isTwoway());try{switch(null===this._is&&(this._is=new n(this._instance,s.currentProtocolEncoding)),this._is.swap(e),t=this._is.readByte()){case s.replyOK:case s.replyUserException:break;case s.replyObjectNotExist:case s.replyFacetNotExist:case s.replyOperationNotExist:var r=new a;r.__read(this._is);var o,c=Ice.StringSeqHelper.read(this._is);if(c.length>0){if(c.length>1)throw new Ice.MarshalException;o=c[0]}else o="";var l=this._is.readString(),d=null;switch(t){case s.replyObjectNotExist:d=new Ice.ObjectNotExistException;break;case s.replyFacetNotExist:d=new Ice.FacetNotExistException;break;case s.replyOperationNotExist:d=new Ice.OperationNotExistException;break;default:i.assert(!1)}throw d.id=r,d.facet=o,d.operation=l,d;case s.replyUnknownException:case s.replyUnknownLocalException:case s.replyUnknownUserException:var u=this._is.readString(),h=null;switch(t){case s.replyUnknownException:h=new Ice.UnknownException;break;case s.replyUnknownLocalException:h=new Ice.UnknownLocalException;break;case s.replyUnknownUserException:h=new Ice.UnknownUserException;break;default:i.assert(!1)}throw h.unknown=u,h;default:throw new Ice.UnknownReplyStatusException}this.__markFinished(t==s.replyOK,this._completed)}catch(e){this.__completedEx(e)}},__startWriteParams:function(e){return this._os.startWriteEncaps(this._encoding,e),this._os},__endWriteParams:function(){this._os.endWriteEncaps()},__writeEmptyParams:function(){this._os.writeEmptyEncaps(this._encoding)},__writeParamEncaps:function(e){null===e||0===e.length?this._os.writeEmptyEncaps(this._encoding):this._os.writeEncaps(e)},__is:function(){return this._is},__startReadParams:function(){return this._is.startReadEncaps(),this._is},__endReadParams:function(){this._is.endReadEncaps()},__readEmptyParams:function(){this._is.skipEmptyEncaps(null)},__readParamEncaps:function(){return this._is.readEncaps(null)},__throwUserException:function(){if(i.assert(0!=(this._state&t.Done)),0==(this._state&t.OK))try{this._is.startReadEncaps(),this._is.throwException()}catch(e){throw e instanceof Ice.UserException&&this._is.endReadEncaps(),e}}});d._emptyContext=new r;var u=Ice.Class(l,{__init__:function(e,t){l.call(this,e,t),this._batchRequestNum=e.__getBatchRequestQueue().swap(this._os)},__invokeRemote:function(t,n,i){return 0===this._batchRequestNum?(this.__sent(),e.Sent):t.sendAsyncRequest(this,n,i,this._batchRequestNum)},__invoke:function(){s.checkSupportedProtocol(s.getCompatibleProtocol(this._proxy.__reference().getProtocol())),this.__invokeImpl(!0)}}),h=Ice.Class(l,{__init__:function(e,t){l.call(this,e,t)},__invokeRemote:function(t,n,i){return this.__markFinished(!0,(function(e){e.succeed(t)})),e.Sent},__invoke:function(){this.__invokeImpl(!0)}}),f=Ice.Class(c,{__init__:function(e,t,n){c.call(this,t,n,e,null,null)},__invoke:function(){try{var t,n=this._connection.getBatchRequestQueue().swap(this._os);0===n?(this.__sent(),t=e.Sent):t=this._connection.sendAsyncRequest(this,!1,!1,n),(t&e.Sent)>0&&(this._sentSynchronously=!0)}catch(e){this.__completedEx(e)}}});Ice.OutgoingAsync=d,Ice.ProxyFlushBatch=u,Ice.ProxyGetConnection=h,Ice.ConnectionFlushBatch=f}(),function(){var e=Ice.ArrayUtil,t=Ice.AsyncResultBase,n=(Ice.AsyncResult,Ice.Debug),i=(Ice.FormatType,Ice.HashMap),r=Ice.OutgoingAsync,o=Ice.ProxyFlushBatch,s=Ice.ProxyGetConnection,a=Ice.ReferenceMode,c=Ice.OperationMode,l=Ice.Class({__init__:function(){this._reference=null,this._requestHandler=null},hashCode:function(e){return this._reference.hashCode()},ice_getCommunicator:function(){return this._reference.getCommunicator()},toString:function(){return this._reference.toString()},ice_getIdentity:function(){return this._reference.getIdentity().clone()},ice_identity:function(e){if(null==e||0===e.name.length)throw new Ice.IllegalIdentityException;if(e.equals(this._reference.getIdentity()))return this;var t=new l;return t.__setup(this._reference.changeIdentity(e)),t},ice_getContext:function(){return new i(this._reference.getContext())},ice_context:function(e){return this.__newInstance(this._reference.changeContext(e))},ice_getFacet:function(){return this._reference.getFacet()},ice_facet:function(e){if(null==e&&(e=""),e===this._reference.getFacet())return this;var t=new l;return t.__setup(this._reference.changeFacet(e)),t},ice_getAdapterId:function(){return this._reference.getAdapterId()},ice_adapterId:function(e){return null==e&&(e=""),e===this._reference.getAdapterId()?this:this.__newInstance(this._reference.changeAdapterId(e))},ice_getEndpoints:function(){return e.clone(this._reference.getEndpoints())},ice_endpoints:function(t){return null==t&&(t=[]),e.equals(t,this._reference.getEndpoints())?this:this.__newInstance(this._reference.changeEndpoints(t))},ice_getLocatorCacheTimeout:function(){return this._reference.getLocatorCacheTimeout()},ice_locatorCacheTimeout:function(e){if(e<-1)throw new Error("invalid value passed to ice_locatorCacheTimeout: "+e);return e===this._reference.getLocatorCacheTimeout()?this:this.__newInstance(this._reference.changeLocatorCacheTimeout(e))},ice_getInvocationTimeout:function(){return this._reference.getInvocationTimeout()},ice_invocationTimeout:function(e){if(e<1&&-1!==e)throw new Error("invalid value passed to ice_invocationTimeout: "+e);return e===this._reference.getInvocationTimeout()?this:this.__newInstance(this._reference.changeInvocationTimeout(e))},ice_isConnectionCached:function(){return this._reference.getCacheConnection()},ice_connectionCached:function(e){return e===this._reference.getCacheConnection()?this:this.__newInstance(this._reference.changeCacheConnection(e))},ice_getEndpointSelection:function(){return this._reference.getEndpointSelection()},ice_endpointSelection:function(e){return e===this._reference.getEndpointSelection()?this:this.__newInstance(this._reference.changeEndpointSelection(e))},ice_isSecure:function(){return this._reference.getSecure()},ice_secure:function(e){return e===this._reference.getSecure()?this:this.__newInstance(this._reference.changeSecure(e))},ice_getEncodingVersion:function(){return this._reference.getEncoding().clone()},ice_encodingVersion:function(e){return e.equals(this._reference.getEncoding())?this:this.__newInstance(this._reference.changeEncoding(e))},ice_isPreferSecure:function(){return this._reference.getPreferSecure()},ice_preferSecure:function(e){return e===this._reference.getPreferSecure()?this:this.__newInstance(this._reference.changePreferSecure(e))},ice_getRouter:function(){var e=this._reference.getRouterInfo();return null!==e?e.getRouter():null},ice_router:function(e){var t=this._reference.changeRouter(e);return t.equals(this._reference)?this:this.__newInstance(t)},ice_getLocator:function(){var e=this._reference.getLocatorInfo();return null!==e?e.getLocator():null},ice_locator:function(e){var t=this._reference.changeLocator(e);return t.equals(this._reference)?this:this.__newInstance(t)},ice_isTwoway:function(){return this._reference.getMode()===a.ModeTwoway},ice_twoway:function(){return this._reference.getMode()===a.ModeTwoway?this:this.__newInstance(this._reference.changeMode(a.ModeTwoway))},ice_isOneway:function(){return this._reference.getMode()===a.ModeOneway},ice_oneway:function(){return this._reference.getMode()===a.ModeOneway?this:this.__newInstance(this._reference.changeMode(a.ModeOneway))},ice_isBatchOneway:function(){return this._reference.getMode()===a.ModeBatchOneway},ice_batchOneway:function(){return this._reference.getMode()===a.ModeBatchOneway?this:this.__newInstance(this._reference.changeMode(a.ModeBatchOneway))},ice_isDatagram:function(){return this._reference.getMode()===a.ModeDatagram},ice_datagram:function(){return this._reference.getMode()===a.ModeDatagram?this:this.__newInstance(this._reference.changeMode(a.ModeDatagram))},ice_isBatchDatagram:function(){return this._reference.getMode()===a.ModeBatchDatagram},ice_batchDatagram:function(){return this._reference.getMode()===a.ModeBatchDatagram?this:this.__newInstance(this._reference.changeMode(a.ModeBatchDatagram))},ice_compress:function(e){var t=this._reference.changeCompress(e);return t.equals(this._reference)?this:this.__newInstance(t)},ice_timeout:function(e){if(e<1&&-1!==e)throw new Error("invalid value passed to ice_timeout: "+e);var t=this._reference.changeTimeout(e);return t.equals(this._reference)?this:this.__newInstance(t)},ice_getConnectionId:function(){return this._reference.getConnectionId()},ice_connectionId:function(e){var t=this._reference.changeConnectionId(e);return t.equals(this._reference)?this:this.__newInstance(t)},ice_getConnection:function(){var e=new s(this,"ice_getConnection");try{e.__invoke()}catch(t){e.__abort(t)}return e},ice_getCachedConnection:function(){return this._requestHandler?this._requestHandler.getConnection():null},ice_flushBatchRequests:function(){var e=new o(this,"ice_flushBatchRequests");try{e.__invoke()}catch(t){e.__abort(t)}return e},equals:function(e){return this===e||e instanceof l&&this._reference.equals(e._reference)},__reference:function(){return this._reference},__copyFrom:function(e){n.assert(null===this._reference),n.assert(null===this._requestHandler),this._reference=e._reference,this._requestHandler=e._requestHandler},__handleException:function(e,t,n,i,r,o){if(this.__updateRequestHandler(t,null),!(e instanceof Ice.LocalException&&(!i||n==c.Nonmutating||n==c.Idempotent||e instanceof Ice.CloseConnectionException||e instanceof Ice.ObjectNotExistException)))throw e;try{return this._reference.getInstance().proxyFactory().checkRetryAfterException(e,this._reference,r,o)}catch(t){throw t instanceof Ice.CommunicatorDestroyedException?e:t}},__checkAsyncTwowayOnly:function(e){if(!this.ice_isTwoway())throw new Error("`"+e+"' can only be called with a twoway proxy")},__getRequestHandler:function(){return this._reference.getCacheConnection()&&this._requestHandler?this._requestHandler:this._reference.getRequestHandler(this)},__getBatchRequestQueue:function(){return this._batchRequestQueue||(this._batchRequestQueue=this._reference.getBatchRequestQueue()),this._batchRequestQueue},__setRequestHandler:function(e){return this._reference.getCacheConnection()?(this._requestHandler||(this._requestHandler=e),this._requestHandler):e},__updateRequestHandler:function(e,t){this._reference.getCacheConnection()&&null!==e&&this._requestHandler&&this._requestHandler!==t&&(this._requestHandler=this._requestHandler.update(e,t))},__setup:function(e){n.assert(null===this._reference),this._reference=e},__newInstance:function(e){var t=new this.constructor;return t.__setup(e),t},ice_instanceof:function(e){return!!e&&(this instanceof e||this.constructor.__instanceof(e))}});l.__invoke=function(e,t,n,i,o,s,a,c,d){(null!==a||c.length>0)&&e.__checkAsyncTwowayOnly(t);var u=new r(e,t,(function(e){l.__completed(e,a,c)}));try{if(u.__prepare(t,n,o),null===s)u.__writeEmptyParams();else{var h=u.__startWriteParams(i);s.call(null,h,d),u.__endWriteParams()}u.__invoke()}catch(e){u.__abort(e)}return u},l.__completed=function(e,t,n){if(l.__check(e,n))try{if(null===t)e.__readEmptyParams(),e.succeed(e);else{var i=t(e);e.succeed.apply(e,i)}}catch(t){return void l.__dispatchLocalException(e,t)}},l.__returns_bool=function(e,t){t.push(e.readBool())},l.__returns_byte=function(e,t){t.push(e.readByte())},l.__returns_short=function(e,t){t.push(e.readShort())},l.__returns_int=function(e,t){t.push(e.readInt())},l.__returns_long=function(e,t){t.push(e.readLong())},l.__returns_float=function(e,t){t.push(e.readFloat())},l.__returns_double=function(e,t){t.push(e.readDouble())},l.__returns_string=function(e,t){t.push(e.readString())},l.__returns_ObjectPrx=function(e,t){t.push(e.readProxy())},l.__returns_Object=function(e,t){e.readObject((function(e){t.push(e)}),Ice.Object),e.readPendingObjects()},l.__check=function(e,t){try{e.__throwUserException()}catch(i){if(i instanceof Ice.UserException){if(null!==t)for(var n=0;n<t.length;++n)if(i instanceof t[n])return e.fail(i,e),!1;return e.fail(new Ice.UnknownUserException(i.ice_name()),e),!1}return e.fail(i,e),!1}return!0},l.__dispatchLocalException=function(e,t){e.fail(t,e)},l.ice_staticId=Ice.Object.ice_staticId,l.checkedCast=function(e,n,i){var r=null;if(null==e)(r=new t(null,"checkedCast",null,null,null)).succeed(null,r);else{void 0!==n&&(e=e.ice_facet(n));var o=this;r=new t(e.ice_getCommunicator(),"checkedCast",null,e,null),e.ice_isA(this.ice_staticId(),i).then((function(t,n){if(n){var i=new o;i.__copyFrom(e),r.succeed(i,r)}else r.succeed(null,r)})).exception((function(e){e instanceof Ice.FacetNotExistException?r.succeed(null,r):r.fail(e,r)}))}return r},l.uncheckedCast=function(e,t){var n=null;return null!=e&&(n=new this,void 0!==t&&(e=e.ice_facet(t)),n.__copyFrom(e)),n},Object.defineProperty(l,"minWireSize",{get:function(){return 2}}),l.write=function(e,t){e.writeProxy(t)},l.read=function(e){return e.readProxy(this)},l.writeOpt=function(e,t,n){e.writeOptProxy(t,n)},l.readOpt=function(e,t){return e.readOptProxy(t,this)},l.__instanceof=function(e){if(e===this)return!0;for(var t in this.__implements)if(this.__implements[t].__instanceof(e))return!0;return!!this.__parent&&this.__parent.__instanceof(e)},Ice.Slice.defineProxy=function(e,t,n){var i=function(){e.call(this)};return i.__parent=e,i.__implements=n,(i.prototype=new e).constructor=i,i.ice_staticId=t,i.checkedCast=l.checkedCast,i.uncheckedCast=l.uncheckedCast,i.write=l.write,i.writeOpt=l.writeOpt,i.read=l.read,i.readOpt=l.readOpt,i.__instanceof=l.__instanceof,Object.defineProperty(i,"minWireSize",{get:function(){return 2}}),i},Ice.ObjectPrx=l}(),Object.defineProperty(Ice,"TCPEndpointType",{value:1}),Object.defineProperty(Ice,"SSLEndpointType",{value:2}),Object.defineProperty(Ice,"UDPEndpointType",{value:3}),Object.defineProperty(Ice,"WSEndpointType",{value:4}),Object.defineProperty(Ice,"WSSEndpointType",{value:5}),Ice.EndpointInfo=N.defineLocalObject((function(e,t){this.timeout=void 0!==e?e:0,this.compress=void 0!==t&&t})),Ice.Endpoint=N.defineLocalObject(),Ice.IPEndpointInfo=N.defineLocalObject((function(e,t,n,i,r){Ice.EndpointInfo.call(this,e,t),this.host=void 0!==n?n:"",this.port=void 0!==i?i:0,this.sourceAddress=void 0!==r?r:""}),Ice.EndpointInfo),Ice.TCPEndpointInfo=N.defineLocalObject((function(e,t,n,i,r){Ice.IPEndpointInfo.call(this,e,t,n,i,r)}),Ice.IPEndpointInfo),Ice.UDPEndpointInfo=N.defineLocalObject((function(e,t,n,i,r,o,s){Ice.IPEndpointInfo.call(this,e,t,n,i,r),this.mcastInterface=void 0!==o?o:"",this.mcastTtl=void 0!==s?s:0}),Ice.IPEndpointInfo),Ice.WSEndpointInfo=N.defineLocalObject((function(e,t,n,i,r,o){Ice.TCPEndpointInfo.call(this,e,t,n,i,r),this.resource=void 0!==o?o:""}),Ice.TCPEndpointInfo),Ice.OpaqueEndpointInfo=N.defineLocalObject((function(e,t,n,i){Ice.EndpointInfo.call(this,e,t),this.rawEncoding=void 0!==n?n:new Ice.EncodingVersion,this.rawBytes=void 0!==i?i:null}),Ice.EndpointInfo),w=(0,Ice.Class)(Ice.Endpoint,{toString:function(){return this.protocol()+this.options()},initWithOptions:function(e){var t,n=[],i="`"+this.protocol();for(t=0;t<e.length;++t)-1!==e[t].search(/[ \t\n\r]+/)?i+=' "'+e[t]+'"':i+=" "+e[t];for(i+="'",t=0;t<e.length;){var r=e[t++];if(r.length<2||"-"!=r.charAt(0))n.push(r);else{var o=null;t<e.length&&"-"!=e[t].charAt(0)&&(o=e[t++]),this.checkOption(r,o,i)||(n.push(r),null!==o&&n.push(o))}}for(e.length=0,t=0;t<n.length;t++)e.push(n[t])},equals:function(e){return e instanceof w&&0===this.compareTo(e)},checkOption:function(){return!1}}),Ice.EndpointI=w,function(){var e=Ice.__M,t=Ice.Class,n=[Ice.ByteHelper,Ice.BoolHelper,Ice.ShortHelper,Ice.IntHelper,Ice.LongHelper,Ice.FloatHelper,Ice.DoubleHelper,Ice.StringHelper,Ice.Object,Ice.ObjectPrx];function i(t){var i=t[0],r=typeof i;return"number"===r?i=n[t[0]]:"string"===r&&(i=e.type(i)),{type:i,isObject:!0===t[1],tag:t[2]}}function r(e,t){var n,r,o,s={};s.name=e,s.mode=t[1]?Ice.OperationMode.valueOf(t[1]):Ice.OperationMode.Normal,s.sendMode=t[2]?Ice.OperationMode.valueOf(t[2]):Ice.OperationMode.Normal,s.amd=!!t[3],s.format=t[4]?Ice.FormatType.valueOf(t[4]):Ice.FormatType.DefaultFormat,s.amd?s.servantMethod=e+"_async":s.servantMethod=t[0]?t[0]:e,t[5]&&((o=i(t[5])).pos=0),s.returns=o;var a=[],c=[];if(t[6])for(n=0;n<t[6].length;++n)(r=i(t[6][n])).pos=n,a.push(r),r.tag&&c.push(r);c.sort((function(e,t){return e.tag-t.tag})),s.inParams=a,s.inParamsOpt=c;var l=[],d=[];if(t[7]){var u=o?1:0;for(n=0;n<t[7].length;++n)(r=i(t[7][n])).pos=n+u,l.push(r),r.tag&&d.push(r)}o&&o.tag&&d.push(o),d.sort((function(e,t){return e.tag-t.tag})),s.outParams=l,s.outParamsOpt=d;var h=[];if(t[8])for(n=0;n<t[8].length;++n)h.push(t[8][n]);return s.exceptions=h,s.sendsClasses=!0===t[9],s.returnsClasses=!0===t[10],s}var o=t({__init__:function(e){this.raw=e,this.parsed={}},find:function(e){var t=this.parsed[e];return void 0===t&&void 0!==this.raw[e]&&(t=r(e,this.raw[e]),this.parsed[e]=t),t}});function s(e,t,n,i,r,o,s){var a,c,l;for(a=0;a<n.length;++a)(c=n[a]).tag||(l=c.type.read(e),o[c.pos+s]=l);for(t&&(l=t.type.read(e),o[t.pos+s]=l),a=0;a<i.length;++a)l=(c=i[a]).type.readOpt(e,c.tag),o[c.pos+s]=l;r&&e.readPendingObjects()}function a(e,t,n,i,r,o){var s,a;for(s=0;s<i.length;++s)(a=i[s]).tag||a.type.write(e,t[a.pos]);for(n&&n.type.write(e,t[n.pos]),s=0;s<r.length;++s)(a=r[s]).type.writeOpt(e,a.tag,t[a.pos]);o&&e.writePendingObjects()}var c=t({__init__:function(e,t){this.incomingAsync=e,this.op=t},ice_response:function(){var e=arguments;if(this.incomingAsync.__validateResponse(!0))try{this.__sendResponse(e),this.incomingAsync.__response()}catch(e){this.incomingAsync.__exception(e)}},ice_exception:function(e){this.__checkException(e)?this.incomingAsync.__validateResponse(!1)&&(this.__sendException(e),this.incomingAsync.__response()):this.incomingAsync.ice_exception(e)},__sendResponse:function(e){if(void 0===this.op.returns&&0===this.op.outParams.length){if(e&&e.length>0)throw new Error("ice_response called with invalid arguments");this.incomingAsync.__writeEmptyParams()}else{var t,n=this.incomingAsync.__startWriteParams(this.op.format);this.op.returns&&!this.op.returns.tag&&(t=this.op.returns),a(n,e,t,this.op.outParams,this.op.outParamsOpt,this.op.returnsClasses),this.incomingAsync.__endWriteParams(!0)}},__checkException:function(e){for(var t=0;t<this.op.exceptions.length;++t)if(e instanceof this.op.exceptions[t])return!0;return!1},__sendException:function(e){this.incomingAsync.__writeUserException(e,this.op.format)}});function l(e,t,n){for(var i,r=0;void 0===i&&r<e.length;++r){var o=e[r];void 0===(i=o[t])&&(-1===n.indexOf(o)&&n.push(o),o.__implements&&(i=l(o.__implements,t,n)))}return i}function d(e,t){var n,i="__op_"+t,r=e[i];if(void 0===r){n=[];for(var o=e;o&&void 0===r;)o.__implements&&(r=l(o.__implements,i,n)),o=o.__parent;void 0!==r&&(e[i]=r)}if(void 0===r){var a,d;if(e.__ops&&(a=e.__ops.find(t)),void 0===a){for(var u=e.__parent;void 0===a&&u;)u.__ops&&void 0!==(a=u.__ops.find(t))&&(d=u),u=u.__parent;for(var h=0;void 0===a&&h<n.length;++h){var f=n[h];f.__ops&&void 0!==(a=f.__ops.find(t))&&(d=f)}}void 0!==a&&(r=function(e,t,n){return function(e,t,n,i){var r=e[t.servantMethod];if(void 0===r||"function"!=typeof r){var o="servant for identity "+i.adapter.getCommunicator().identityToString(i.id)+" does not define operation `"+t.servantMethod+"'";throw new Ice.UnknownException(o)}var a=new c(n,t);try{var l=t.amd?[null]:[];if(0===t.inParams.length)n.readEmptyParams();else{var d=n.startReadParams(),u=t.amd?1:0;if(s(d,void 0,t.inParams,t.inParamsOpt,t.sendsClasses,l,u),n.endReadParams(),t.inParams.length>0&&(t.sendsClasses||t.inParamsOpt.length>0))for(var h=0;h<t.inParams.length;++h){var f=t.inParams[h];f.isObject&&void 0!==l[f.pos+u]&&(l[f.pos+u]=l[f.pos+u].value)}}if(l.push(i),t.amd){l[0]=a;try{r.apply(e,l)}catch(e){a.ice_exception(e)}return Ice.DispatchStatus.DispatchAsync}var _=t.outParams.length;t.returns&&++_;var p=r.apply(e,l);if(_>1&&!(p instanceof Array))throw new Ice.MarshalException("operation `"+t.servantMethod+"' should return an array of length "+_);return 1===_&&(p=[p]),a.__sendResponse(p),Ice.DispatchStatus.DispatchOK}catch(e){if(a.__checkException(e))return a.__sendException(e),Ice.DispatchStatus.DispatchUserException;throw e}}(e,a,t,n)},e[i]=r,d&&(d[i]=r))}return r}function u(e,t,n){var i=n[0]?n[0]:t,o=null;e.prototype[i]=function(){var e=arguments;null===o&&(o=r(t,n));var i=e[o.inParams.length],c=null;o.inParams.length>0&&(c=function(e,t){var n,i,r;for(n=0;n<o.inParams.length;++n)if(r=t[(i=o.inParams[n]).pos],!(i.tag&&void 0===r||"function"!=typeof i.type.validate||i.type.validate(r)))throw new Ice.MarshalException("invalid value for argument "+(n+1)+" in operation `"+o.servantMethod+"'");a(e,t,void 0,o.inParams,o.inParamsOpt,o.sendsClasses)});var l=null;return(o.returns||o.outParams.length>0)&&(l=function(e){var t,n=[],i=e.__startReadParams();if(o.returns&&!o.returns.tag&&(t=o.returns),s(i,t,o.outParams,o.outParamsOpt,o.returnsClasses,n,0),e.__endReadParams(),o.returnsClasses||o.outParamsOpt.length>0){o.returns&&o.returns.isObject&&void 0!==n[o.returns.pos+0]&&(n[o.returns.pos+0]=n[o.returns.pos+0].value);for(var r=0;r<o.outParams.length;++r){var a=o.outParams[r];a.isObject&&void 0!==n[a.pos+0]&&(n[a.pos+0]=n[a.pos+0].value)}}return n.push(e),n}),Ice.ObjectPrx.__invoke(this,o.name,o.sendMode,o.format,i,c,l,o.exceptions,Array.prototype.slice.call(e))}}var h=Ice.Slice;h.defineOperations=function(e,t,n){if(n&&(e.__ops=new o(n)),e.prototype.__dispatch=function(t,n){var i=d(e,n.operation);if(void 0===i||"function"!=typeof i)throw new Ice.OperationNotExistException(n.id,n.facet,n.operation);return i.call(i,this,t,n)},n)for(var i in n)u(t,i,n[i]);if(t.__implements)for(var r in t.__implements){var s=t.__implements[r].prototype;for(var a in s)"function"==typeof s[a]&&void 0===t.prototype[a]&&(t.prototype[a]=s[a])}},h.defineOperations(Ice.Object,Ice.ObjectPrx,{ice_ping:[,1,1,,,,,,],ice_isA:[,1,1,,,[1],[[7]],,],ice_id:[,1,1,,,[7],,,],ice_ids:[,1,1,,,["Ice.StringSeqHelper"],,,]})}(),function(){var e=Ice.Address,t=Ice.HashUtil,n=Ice.StringUtil,i=Ice.Class,r=Ice.EndpointParseException,o=i(Ice.EndpointI,{__init__:function(e,t,n,i,r){this._instance=e,this._host=void 0===t?null:t,this._port=void 0===n?null:n,this._sourceAddr=void 0===i?null:i,this._connectionId=void 0===r?"":r},streamWrite:function(e){e.startWriteEncaps(),this.streamWriteImpl(e),e.endWriteEncaps()},getInfo:function(){var e=new Ice.IPEndpointInfo;return this.fillEndpointInfo(e),e},type:function(){return this._instance.type()},protocol:function(){return this._instance.protocol()},secure:function(){return this._instance.secure()},connectionId:function(){return this._connectionId},changeConnectionId:function(e){return e===this._connectionId?this:this.createEndpoint(this._host,this._port,e)},hashCode:function(){return void 0===this._hashCode&&(this._hashCode=this.hashInit(5381)),this._hashCode},options:function(){var e="";if(null!==this._host&&this._host.length>0){e+=" -h ";var t=-1!=this._host.indexOf(":");t&&(e+='"'),e+=this._host,t&&(e+='"')}return e+=" -p "+this._port,null!==this._sourceAddr&&this._sourceAddr.length>0&&(e+=" --sourceAddr "+this._sourceAddr),e},compareTo:function(e){return this===e?0:null===e?1:e instanceof o?this._port<e._port?-1:e._port<this._port?1:this._host!=e._host?this._host<e._host?-1:1:this._sourceAddr!=e._sourceAddr?this._sourceAddr<e._sourceAddr?-1:1:this._connectionId!=e._connectionId?this._connectionId<e._connectionId?-1:1:0:this.type()<e.type()?-1:1},getAddress:function(){return new e(this._host,this._port)},toConnectorString:function(){return this._host+":"+this._port},streamWriteImpl:function(e){e.writeString(this._host),e.writeInt(this._port)},hashInit:function(e){return e=t.addNumber(e,this.type()),e=t.addString(e,this._host),e=t.addNumber(e,this._port),e=t.addString(e,this._sourceAddr),e=t.addString(e,this._connectionId)},fillEndpointInfo:function(e){var t=this;e.type=function(){return t.type()},e.datagram=function(){return t.datagram()},e.secure=function(){return t.secure()},e.host=this._host,e.port=this._port,e.sourceAddress=this._sourceAddr},initWithOptions:function(e,t){if(Ice.EndpointI.prototype.initWithOptions.call(this,e),null===this._host||0===this._host.length)this._host=this._instance.defaultHost();else if("*"==this._host){if(!t)throw new r("`-h *' not valid for proxy endpoint `"+this+"'");this._host=""}if(null===this._host&&(this._host=""),null===this._sourceAddr)t||(this._sourceAddr=this._instance.defaultSourceAddress());else if(t)throw new r("`--sourceAddress not valid for object adapter endpoint `"+this+"'")},initWithStream:function(e){this._host=e.readString(),this._port=e.readInt()},checkOption:function(e,t,i){if("-h"===e){if(null===t)throw new r("no argument provided for -h option in endpoint "+i);this._host=t}else if("-p"===e){if(null===t)throw new r("no argument provided for -p option in endpoint "+i);try{this._port=n.toInt(t)}catch(e){throw new r("invalid port value `"+t+"' in endpoint "+i)}if(this._port<0||this._port>65535)throw new r("port value `"+t+"' out of range in endpoint "+i)}else{if("--sourceAddress"!==e)return!1;if(null===t)throw new r("no argument provided for --sourceAddress option in endpoint "+i);this._sourceAddr=t}return!0}});Ice.IPEndpointI=o}(),Object.defineProperty(IceSSL,"EndpointType",{value:Ice.SSLEndpointType}),IceSSL.EndpointInfo=N.defineLocalObject((function(e,t,n,i,r){Ice.IPEndpointInfo.call(this,e,t,n,i,r)}),Ice.IPEndpointInfo),IceSSL.WSSEndpointInfo=N.defineLocalObject((function(e,t,n,i,r,o){IceSSL.EndpointInfo.call(this,e,t,n,i,r),this.resource=void 0!==o?o:""}),IceSSL.EndpointInfo),Ice.ConnectionInfo=N.defineLocalObject((function(e,t,n,i,r){this.incoming=void 0!==e&&e,this.adapterName=void 0!==t?t:"",this.connectionId=void 0!==n?n:"",this.rcvSize=void 0!==i?i:0,this.sndSize=void 0!==r?r:0})),Ice.ConnectionCallback=N.defineLocalObject(),Ice.ACMClose=N.defineEnum([["CloseOff",0],["CloseOnIdle",1],["CloseOnInvocation",2],["CloseOnInvocationAndIdle",3],["CloseOnIdleForceful",4]]),Ice.ACMHeartbeat=N.defineEnum([["HeartbeatOff",0],["HeartbeatOnInvocation",1],["HeartbeatOnIdle",2],["HeartbeatAlways",3]]),Ice.ACM=N.defineStruct((function(e,t,n){this.timeout=void 0!==e?e:0,this.close=void 0!==t?t:Ice.ACMClose.CloseOff,this.heartbeat=void 0!==n?n:Ice.ACMHeartbeat.HeartbeatOff}),!0),Ice.Connection=N.defineLocalObject(),Ice.IPConnectionInfo=N.defineLocalObject((function(e,t,n,i,r,o,s,a,c){Ice.ConnectionInfo.call(this,e,t,n,i,r),this.localAddress=void 0!==o?o:"",this.localPort=void 0!==s?s:-1,this.remoteAddress=void 0!==a?a:"",this.remotePort=void 0!==c?c:-1}),Ice.ConnectionInfo),Ice.TCPConnectionInfo=N.defineLocalObject((function(e,t,n,i,r,o,s,a,c){Ice.IPConnectionInfo.call(this,e,t,n,i,r,o,s,a,c)}),Ice.IPConnectionInfo),Ice.UDPConnectionInfo=N.defineLocalObject((function(e,t,n,i,r,o,s,a,c,l,d){Ice.IPConnectionInfo.call(this,e,t,n,i,r,o,s,a,c),this.mcastAddress=void 0!==l?l:"",this.mcastPort=void 0!==d?d:-1}),Ice.IPConnectionInfo),N.defineDictionary(Ice,"HeaderDict","HeaderDictHelper","Ice.StringHelper","Ice.StringHelper",!1,void 0,void 0),Ice.WSConnectionInfo=N.defineLocalObject((function(e,t,n,i,r,o,s,a,c,l){Ice.TCPConnectionInfo.call(this,e,t,n,i,r,o,s,a,c),this.headers=void 0!==l?l:null}),Ice.TCPConnectionInfo),Ice.TraceLevels=function(e){var t="Network",n="Protocol",i="Retry",r="Locator",o="Slicing",s="Ice.Trace.",a=e.getPropertyAsInt(s+t),c=e.getPropertyAsInt(s+n),l=e.getPropertyAsInt(s+i),d=e.getPropertyAsInt("Ice.Trace.Locator"),u=e.getPropertyAsInt(s+o);return e.getPropertyAsInt(s+"ThreadPool"),Object.create(null,{network:{get:function(){return a}},networkCat:{get:function(){return t}},protocol:{get:function(){return c}},protocolCat:{get:function(){return n}},retry:{get:function(){return l}},retryCat:{get:function(){return i}},location:{get:function(){return d}},locationCat:{get:function(){return r}},slicing:{get:function(){return u}},slicingCat:{get:function(){return o}}})},function(){var e=Ice.Base64,t=Ice.Debug,n=Ice.HashUtil,i=(Ice.Protocol,Ice.StringUtil),r=Ice.EndpointParseException,o=Ice.Class,s=o(Ice.EndpointI,{__init__:function(e){this._rawEncoding=Ice.Encoding_1_0,this._type=void 0===e?-1:e,this._rawBytes=null},streamWrite:function(e){e.startWriteEncaps(this._rawEncoding,Ice.FormatType.DefaultFormat),e.writeBlob(this._rawBytes),e.endWriteEncaps()},getInfo:function(){return new a(-1,!1,this._rawEncoding,this._rawBytes,this._type)},type:function(){return this._type},protocol:function(){return"opaque"},timeout:function(){return-1},changeTimeout:function(e){return this},changeConnectionId:function(e){return this},compress:function(){return!1},changeCompress:function(e){return this},datagram:function(){return!1},secure:function(){return!1},rawBytes:function(){return this._rawBytes},transceiver:function(e){return e.value=null,null},acceptor:function(e,t){return e.value=this,null},connect:function(){return null},hashCode:function(){if(void 0===this._hashCode){var e=5381;e=n.addNumber(e,this._type),e=n.addHashable(e,this._rawEncoding),e=n.addArray(e,this._rawBytes,n.addNumber),this._hashCode=e}return this._hashCode},options:function(){var t="";return t+=" -t "+this._type,t+=" -e "+Ice.encodingVersionToString(this._rawEncoding),t+=" -v "+e.encode(this._rawBytes)},equals:function(e){if(!(e instanceof s))return!1;if(this===e)return!0;if(this._type!==e._type)return!1;if(!this._rawEncoding.equals(e._rawEncoding))return!1;if(this._rawBytes.length!==e._rawBytes.length)return!1;for(var t=0;t<this._rawBytes.length;t++)if(this._rawBytes[t]!==e._rawBytes[t])return!1;return!0},compareTo:function(e){if(this===e)return 0;if(null===e)return 1;if(!(e instanceof s))return this.type()<e.type()?-1:1;if(this._type<e._type)return-1;if(e._type<this._type)return 1;if(this._rawEncoding.major<e._rawEncoding.major)return-1;if(e._rawEncoding.major<this._rawEncoding.major)return 1;if(this._rawEncoding.minor<e._rawEncoding.minor)return-1;if(e._rawEncoding.minor<this._rawEncoding.minor)return 1;if(this._rawBytes.length<e._rawBytes.length)return-1;if(e._rawBytes.length<this._rawBytes.length)return 1;for(var t=0;t<this._rawBytes.length;t++){if(this._rawBytes[t]<e._rawBytes[t])return-1;if(e._rawBytes[t]<this._rawBytes[t])return 1}return 0},checkOption:function(t,n,o){switch(t.charAt(1)){case"t":if(this._type>-1)throw new r("multiple -t options in endpoint "+o);if(null===n)throw new r("no argument provided for -t option in endpoint "+o);var s;try{s=i.toInt(n)}catch(e){throw new r("invalid type value `"+n+"' in endpoint "+o)}if(s<0||s>65535)throw new r("type value `"+n+"' out of range in endpoint "+o);return this._type=s,!0;case"v":if(this._rawBytes)throw new r("multiple -v options in endpoint "+o);if(null===n||0===n.length)throw new r("no argument provided for -v option in endpoint "+o);for(var a=0;a<n.length;++a)if(!e.isBase64(n.charAt(a)))throw new r("invalid base64 character `"+n.charAt(a)+"' (ordinal "+n.charCodeAt(a)+") in endpoint "+o);return this._rawBytes=e.decode(n),!0;case"e":if(null===n)throw new r("no argument provided for -e option in endpoint "+o);try{this._rawEncoding=Ice.stringToEncodingVersion(n)}catch(e){throw new r("invalid encoding version `"+n+"' in endpoint "+o+":\n"+e.str)}return!0;default:return!1}},initWithOptions:function(e){if(Ice.EndpointI.prototype.initWithOptions.call(this,e),t.assert(this._rawEncoding),this._type<0)throw new r("no -t option in endpoint `"+this+"'");if(null===this._rawBytes||0===this._rawBytes.length)throw new r("no -v option in endpoint `"+this+"'")},initWithStream:function(e){this._rawEncoding=e.getReadEncoding();var t=e.getReadEncapsSize();this._rawBytes=e.readBlob(t)}}),a=o(Ice.OpaqueEndpointInfo,{__init__:function(e,t,n,i,r){Ice.OpaqueEndpointInfo.call(this,-1,!1,n,i),this._type=r},type:function(){return this._type},datagram:function(){return!1},secure:function(){return!1}});Ice.OpaqueEndpointI=s}(),function(){var e=Ice.BasicStream,t=Ice.Current,n=Ice.Debug,i=Ice.FormatType,r=Ice.Context,o=Ice.Identity,s=Ice.Protocol,a=Ice.StringUtil,c=Ice.Class({__init__:function(n,i,r,a,c,l){this._instance=n,this._response=a,this._compress=c,this._response&&(this._os=new e(n,s.currentProtocolEncoding)),this._connection=i,this._current=new t,this._current.id=new o,this._current.adapter=r,this._current.con=this._connection,this._current.requestId=l,this._servant=null,this._locator=null,this._cookie={value:null},a&&(this._os.writeBlob(s.replyHdr),this._os.writeInt(l)),this._is=null,this._cb=null,this._active=!0},__startWriteParams:function(e){if(!this._response)throw new Ice.MarshalException("can't marshal out parameters for oneway dispatch");return n.assert(this._os.size==s.headerSize+4),n.assert(null!==this._current.encoding),this._os.writeByte(0),this._os.startWriteEncaps(this._current.encoding,e),this._os},__endWriteParams:function(e){if(this._response){var t=this._os.pos;this._os.pos=s.headerSize+4,this._os.writeByte(e?s.replyOK:s.replyUserException),this._os.pos=t,this._os.endWriteEncaps()}},__writeEmptyParams:function(){this._response&&(n.assert(this._os.size===s.headerSize+4),n.assert(null!==this._current.encoding),this._os.writeByte(s.replyOK),this._os.writeEmptyEncaps(this._current.encoding))},__writeParamEncaps:function(e,t){this._response&&(n.assert(this._os.size===s.headerSize+4),n.assert(null!==this._current.encoding),this._os.writeByte(t?s.replyOK:s.replyUserException),null===e||0===e.length?this._os.writeEmptyEncaps(this._current.encoding):this._os.writeEncaps(e))},__writeUserException:function(e,t){this.__startWriteParams(t).writeUserException(e),this.__endWriteParams(!1)},__warning:function(e){n.assert(null!==this._instance);var t=[];if(t.push("dispatch exception:"),t.push("\nidentity: "+this._instance.identityToString(this._current.id)),t.push("\nfacet: "+a.escapeString(this._current.facet,"")),t.push("\noperation: "+this._current.operation),null!==this._connection){var i=this._connection.getInfo();if(i instanceof Ice.IPConnectionInfo){var r=i;t.push("\nremote host: "+r.remoteAddress+" remote port: "+r.remotePort)}}e.stack&&(t.push("\n"),t.push(e.stack)),this._instance.initializationData().logger.warning(t.join(""))},__servantLocatorFinished:function(){n.assert(null!==this._locator&&null!==this._servant);try{return this._locator.finished(this._current,this._servant,this._cookie.value),!0}catch(e){return e instanceof Ice.UserException?(n.assert(null!==this._connection),this._response?(this._os.resize(s.headerSize+4),this._os.writeByte(s.replyUserException),this._os.startWriteEncaps(),this._os.writeUserException(e),this._os.endWriteEncaps(),this._connection.sendResponse(this._os,this._compress)):this._connection.sendNoResponse(),this._connection=null):this.__handleException(e),!1}},__handleException:function(e){n.assert(null!==this._connection);var t,i=this._instance.initializationData().properties;e instanceof Ice.RequestFailedException?(null===e.id&&(e.id=this._current.id),null===e.facet&&(e.facet=this._current.facet),null!==e.operation&&0!==e.operation.length||(e.operation=this._current.operation),i.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)>1&&this.__warning(e),this._response?(this._os.resize(s.headerSize+4),e instanceof Ice.ObjectNotExistException?this._os.writeByte(s.replyObjectNotExist):e instanceof Ice.FacetNotExistException?this._os.writeByte(s.replyFacetNotExist):e instanceof Ice.OperationNotExistException?this._os.writeByte(s.replyOperationNotExist):n.assert(!1),e.id.__write(this._os),null===e.facet||0===e.facet.length?Ice.StringSeqHelper.write(this._os,null):Ice.StringSeqHelper.write(this._os,[e.facet]),this._os.writeString(e.operation),this._connection.sendResponse(this._os,this._compress)):this._connection.sendNoResponse()):e instanceof Ice.UnknownLocalException?(i.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)>0&&this.__warning(e),this._response?(this._os.resize(s.headerSize+4),this._os.writeByte(s.replyUnknownLocalException),this._os.writeString(e.unknown),this._connection.sendResponse(this._os,this._compress)):this._connection.sendNoResponse()):e instanceof Ice.UnknownUserException?(i.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)>0&&this.__warning(e),this._response?(this._os.resize(s.headerSize+4),this._os.writeByte(s.replyUnknownUserException),this._os.writeString(e.unknown),this._connection.sendResponse(this._os,this._compress)):this._connection.sendNoResponse()):e instanceof Ice.UnknownException?(i.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)>0&&this.__warning(e),this._response?(this._os.resize(s.headerSize+4),this._os.writeByte(s.replyUnknownException),this._os.writeString(e.unknown),this._connection.sendResponse(this._os,this._compress)):this._connection.sendNoResponse()):e instanceof Ice.LocalException?(i.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)>0&&this.__warning(e),this._response?(this._os.resize(s.headerSize+4),this._os.writeByte(s.replyUnknownLocalException),t=[e.ice_name()],e.stack&&(t.push("\n"),t.push(e.stack)),this._os.writeString(t.join("")),this._connection.sendResponse(this._os,this._compress)):this._connection.sendNoResponse()):e instanceof Ice.UserException?(i.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)>0&&this.__warning(e),this._response?(this._os.resize(s.headerSize+4),this._os.writeByte(s.replyUnknownUserException),t=[e.ice_name()],e.stack&&(t.push("\n"),t.push(e.stack)),this._os.writeString(t.join("")),this._connection.sendResponse(this._os,this._compress)):this._connection.sendNoResponse()):(i.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)>0&&this.__warning(e),this._response?(this._os.resize(s.headerSize+4),this._os.writeByte(s.replyUnknownException),this._os.writeString(e.stack?e.stack:""),this._connection.sendResponse(this._os,this._compress)):this._connection.sendNoResponse()),this._connection=null},invoke:function(e,t){this._is=t;this._is.pos;this._current.id.__read(this._is);var o=Ice.StringSeqHelper.read(this._is);if(o.length>0){if(o.length>1)throw new Ice.MarshalException;this._current.facet=o[0]}else this._current.facet="";this._current.operation=this._is.readString(),this._current.mode=Ice.OperationMode.valueOf(this._is.readByte()),this._current.ctx=new r;for(var a=this._is.readSize();a-- >0;){var c=this._is.readString(),l=this._is.readString();this._current.ctx.set(c,l)}if(null!==e&&(this._servant=e.findServant(this._current.id,this._current.facet),null===this._servant&&(this._locator=e.findServantLocator(this._current.id.category),null===this._locator&&this._current.id.category.length>0&&(this._locator=e.findServantLocator("")),null!==this._locator)))try{this._servant=this._locator.locate(this._current,this._cookie)}catch(e){if(e instanceof Ice.UserException){var d=this._is.skipEncaps();return this._response?(this._os.writeByte(s.replyUserException),this._os.startWriteEncaps(d,i.DefaultFormat),this._os.writeUserException(e),this._os.endWriteEncaps(),this._connection.sendResponse(this._os,this._compress)):this._connection.sendNoResponse(),void(this._connection=null)}return this._is.skipEncaps(),void this.__handleException(e)}try{if(null===this._servant)throw this._is.skipEncaps(),null!==e&&e.hasServant(this._current.id)?new Ice.FacetNotExistException(this._current.id,this._current.facet,this._current.operation):new Ice.ObjectNotExistException(this._current.id,this._current.facet,this._current.operation);if(this._servant.__dispatch(this,this._current)===Ice.DispatchStatus.DispatchAsync)return;if(null!==this._locator&&!this.__servantLocatorFinished())return}catch(e){if(null!==this._servant&&null!==this._locator&&!this.__servantLocatorFinished())return;return void this.__handleException(e)}n.assert(null!==this._connection),this._response?this._connection.sendResponse(this._os,this._compress):this._connection.sendNoResponse(),this._connection=null},startReadParams:function(){return this._current.encoding=this._is.startReadEncaps(),this._is},endReadParams:function(){this._is.endReadEncaps()},readEmptyParams:function(){this._current.encoding=new Ice.EncodingVersion,this._is.skipEmptyEncaps(this._current.encoding)},readParamEncaps:function(){return this._current.encoding=new Ice.EncodingVersion,this._is.readEncaps(this._current.encoding)},__response:function(){try{if(null!==this._locator&&!this.__servantLocatorFinished())return;n.assert(null!==this._connection),this._response?this._connection.sendResponse(this._os,this._compress):this._connection.sendNoResponse(),this._connection=null}catch(e){this._connection.invokeException(e,1)}},__exception:function(e){try{if(null!==this._locator&&!this.__servantLocatorFinished())return;this.__handleException(e)}catch(e){this._connection.invokeException(e,1)}},__validateResponse:function(e){return!!this._active&&(this._active=!1,!0)},ice_exception:function(e){this._active&&(this._active=!1,null!==this._connection?this.__exception(e):this._instance.initializationData().properties.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)>0&&this.__warning(e))}});Ice.IncomingAsync=c}(),function(){Ice.AsyncResult;var e=Ice.AsyncStatus,t=(Ice.BasicStream,Ice.ConnectionRequestHandler),n=Ice.Debug,i=(Ice.ExUtil,Ice.RetryException),r=(Ice.OutgoingAsync,Ice.Protocol,Ice.ReferenceMode),o=Ice.LocalException,s=(Ice.Promise,Ice.Class({__init__:function(e,t){this._reference=e,this._response=e.getMode()===r.ModeTwoway,this._proxy=t,this._proxies=[],this._initialized=!1,this._connection=null,this._compress=!1,this._exception=null,this._requests=[]},connect:function(e){return this.initialized()||this._proxies.push(e),this._requestHandler?this._requestHandler:this},update:function(e,t){return e===this?t:this},sendAsyncRequest:function(t){return this._initialized||t.__cancelable(this),this.initialized()?t.__invokeRemote(this._connection,this._compress,this._response):(this._requests.push(t),e.Queued)},asyncRequestCanceled:function(e,t){if(null===this._exception){if(!this.initialized()){for(var i=0;i<this._requests.length;i++)if(this._requests[i]===e)return e.__completedEx(t),void this._requests.splice(i,1);n.assert(!1)}this._connection.asyncRequestCanceled(e,t)}},getReference:function(){return this._reference},getConnection:function(){if(null!==this._exception)throw this._exception;return this._connection},setConnection:function(e,t){n.assert(null===this._exception&&null===this._connection),this._connection=e,this._compress=t;var i=this._reference.getRouterInfo();if(null===i)this.flushRequests();else{var r=this;i.addProxy(this._proxy).then((function(){r.flushRequests()}),(function(e){r.setException(e)}))}},setException:function(e){n.assert(!this._initialized&&null===this._exception),this._exception=e,this._proxies.length=0,this._proxy=null;try{this._reference.getInstance().requestHandlerFactory().removeRequestHandler(this._reference,this)}catch(e){}for(var t=0;t<this._requests.length;++t){var i=this._requests[t];null!==i&&i.__completedEx(this._exception)}this._requests.length=0},initialized:function(){if(this._initialized)return n.assert(null!==this._connection),!0;if(null!==this._exception){if(null!==this._connection)return!0;throw this._exception}return this._initialized},flushRequests:function(){n.assert(null!==this._connection&&!this._initialized);for(var e=null,r=0;r<this._requests.length;++r){var s=this._requests[r];try{s.__invokeRemote(this._connection,this._compress,this._response)}catch(t){t instanceof i?(e=t.inner,this._reference.getInstance().requestHandlerFactory().removeRequestHandler(this._reference,this),s.__retryException(t.inner)):(n.assert(t instanceof o),e=t,s.out.__completedEx(t))}}if(this._requests.length=0,this._reference.getCacheConnection()&&null===e){this._requestHandler=new t(this._reference,this._connection,this._compress);for(var a=0;a<this._proxies.length;++a)this._proxies[a].__updateRequestHandler(this,this._requestHandler)}n.assert(!this._initialized),this._exception=e,this._initialized=null===this._exception,this._reference.getInstance().requestHandlerFactory().removeRequestHandler(this._reference,this),this._proxies.length=0,this._proxy=null}}));Ice.ConnectRequestHandler=s}(),IceSSL.ConnectionInfo=N.defineLocalObject((function(e,t,n,i,r,o,s,a,c,l,d,u){Ice.IPConnectionInfo.call(this,e,t,n,i,r,o,s,a,c),this.cipher=void 0!==l?l:"",this.certs=void 0!==d?d:null,this.verified=void 0!==u&&u}),Ice.IPConnectionInfo),IceSSL.WSSConnectionInfo=N.defineLocalObject((function(e,t,n,i,r,o,s,a,c,l,d,u,h){IceSSL.ConnectionInfo.call(this,e,t,n,i,r,o,s,a,c,l,d,u),this.headers=void 0!==h?h:null}),IceSSL.ConnectionInfo),function(){var e=Ice.__M.module("IceSSL");IsChrome=-1===navigator.userAgent.indexOf("Edge/")&&-1!==navigator.userAgent.indexOf("Chrome/");var t=Ice.Debug,n=(Ice.ExUtil,Ice.Network,Ice.SocketOperation),i=(Ice.Connection,Ice.LocalException,Ice.SocketException,Ice.Timer),r=Ice.Class({__init__:function(e){this._logger=e.logger(),this._readBuffers=[],this._readPosition=0,this._maxSendPacketSize=e.properties().getPropertyAsIntWithDefault("Ice.TCP.SndSize",524288),this._writeReadyTimeout=0},writeReadyTimeout:function(){var e=Math.round(this._writeReadyTimeout);return this._writeReadyTimeout+=this._writeReadyTimeout>=5?5:.2,Math.min(e,25)},setCallbacks:function(e,t,n){this._connectedCallback=e,this._bytesAvailableCallback=t,this._bytesWrittenCallback=n},initialize:function(e,i){try{if(this._exception)throw this._exception;if(0===this._state){this._state=1,this._fd=new WebSocket(this._url,"ice.zeroc.com"),this._fd.binaryType="arraybuffer";var r=this;return this._fd.onopen=function(e){console.crlog("[RTC] Websocket is opened: "+r._url),"wss://crlab.cloudroom.com:543/sig/13100"==r._url&&(window.callsvr=r._fd),r.socketConnected(e)},this._fd.onmessage=function(e){r.socketBytesAvailable(e.data)},this._fd.onclose=function(e){console.crlog("[RTC] Websocket is closed: "+r._url),r.socketClosed(e)},n.Connect}1===this._state&&(this._desc="local address = <not available>\nremote address = "+(s=this._addr).host+":"+s.port,this._state=2)}catch(e){throw this._exception||(this._exception=o(this._state,e)),this._exception}var s;return t.assert(2===this._state),n.None},register:function(){this._registered=!0,(this._hasBytesAvailable||this._exception)&&(this._bytesAvailableCallback(),this._hasBytesAvailable=!1)},unregister:function(){this._registered=!1},close:function(){if(null!==this._fd)if(IsChrome&&this._fd.readyState===WebSocket.CONNECTING)this._state=3;else{t.assert(null!==this._fd);try{this._state=4,this._fd.close()}catch(e){throw o(this._state,e)}finally{this._fd=null}}else t.assert(this._exception)},write:function(e){if(this._exception)throw this._exception;if(0===e.remaining)return!0;t.assert(this._fd);for(e.position;;){var n=this._maxSendPacketSize>0&&e.remaining>this._maxSendPacketSize?this._maxSendPacketSize:e.remaining;if(0===e.remaining)break;if(t.assert(n>0),this._fd.bufferedAmount+n>this._maxSendPacketSize){var r=this;return i.setTimeout((function(){r._fd&&r._fd.bufferedAmount+n<=r._maxSendPacketSize&&r._bytesWrittenCallback(0,0)}),this.writeReadyTimeout()),!1}this._writeReadyTimeout=0;var o=e.b.slice(e.position,e.position+n);this._fd.send(o),e.position=e.position+n}return!0},read:function(e,n){if(this._exception)throw this._exception;if(n.value=!1,0===this._readBuffers.length)return!1;var i=this._readBuffers[0].byteLength-this._readPosition;t.assert(i>0);for(e.remaining;e.remaining>0;)if(i>e.remaining&&(i=e.remaining),new Uint8Array(e.b).set(new Uint8Array(this._readBuffers[0],this._readPosition,i),e.position),e.position+=i,this._readPosition+=i,this._readPosition===this._readBuffers[0].byteLength){if(this._readPosition=0,this._readBuffers.shift(),0===this._readBuffers.length)break;i=this._readBuffers[0].byteLength}return n.value=this._readBuffers.byteLength>0,0===e.remaining},type:function(){return this._secure?"wss":"ws"},getInfo:function(){t.assert(null!==this._fd);var n=this._secure?new e.WSSConnectionInfo:new Ice.WSConnectionInfo;return n.localAddress="",n.localPort=-1,n.remoteAddress=this._addr.host,n.remotePort=this._addr.port,n.rcvSize=-1,n.sndSize=this._maxSendPacketSize,n.headers={},n},checkSendSize:function(e){},setBufferSize:function(e,t){this._maxSendPacketSize=t},toString:function(){return this._desc},socketConnected:function(e){3!=this._state?(t.assert(null!==this._connectedCallback),this._connectedCallback()):this.close()},socketBytesAvailable:function(e){if(t.assert(null!==this._bytesAvailableCallback),e.byteLength>0)if(this._readBuffers.push(e),this._registered)for(;this._readBuffers.length>0;)this._bytesAvailableCallback();else this._hasBytesAvailable||(this._hasBytesAvailable=!0)},socketClosed:function(e){3!=this._state?(this._exception=o(this._state,e),this._state<2?this._connectedCallback():this._registered&&this._bytesAvailableCallback()):this.close()}});function o(e,t){return e<2?new Ice.ConnectFailedException(t.code,t):1e3===t.code||1006===t.code?new Ice.ConnectionLostException:new Ice.SocketException(t.code,t)}r.createOutgoing=function(e,t,n,i){var o=new r(e),s=t?"wss":"ws";return s+="://"+n.host,80!==n.port&&(s+=":"+n.port),s+=i||"/",o._url=s,o._fd=null,o._addr=n,o._desc="local address = <not available>\nremote address = "+n.host+":"+n.port,o._state=0,o._secure=t,o._exception=null,o},Ice.WSTransceiver=r}(),Ice.Router=N.defineObject(void 0,Ice.Object,void 0,1,["::Ice::Object","::Ice::Router"],-1,void 0,void 0,!1),Ice.RouterPrx=N.defineProxy(Ice.ObjectPrx,Ice.Router.ice_staticId,void 0),N.defineOperations(Ice.Router,Ice.RouterPrx,{getClientProxy:[,2,1,,,[9],,,,,],getServerProxy:[,2,1,,,[9],,,,,],addProxies:[,2,2,,,["Ice.ObjectProxySeqHelper"],[["Ice.ObjectProxySeqHelper"]],,,,]}),Ice.RouterFinder=N.defineObject(void 0,Ice.Object,void 0,1,["::Ice::Object","::Ice::RouterFinder"],-1,void 0,void 0,!1),Ice.RouterFinderPrx=N.defineProxy(Ice.ObjectPrx,Ice.RouterFinder.ice_staticId,void 0),N.defineOperations(Ice.RouterFinder,Ice.RouterFinderPrx,{getRouter:[,,,,,["Ice.RouterPrx"],,,,,]}),Ice.AdapterNotFoundException=N.defineUserException((function(e){Ice.UserException.call(this,e)}),Ice.UserException,"Ice::AdapterNotFoundException",void 0,void 0,!1,!1),Ice.InvalidReplicaGroupIdException=N.defineUserException((function(e){Ice.UserException.call(this,e)}),Ice.UserException,"Ice::InvalidReplicaGroupIdException",void 0,void 0,!1,!1),Ice.AdapterAlreadyActiveException=N.defineUserException((function(e){Ice.UserException.call(this,e)}),Ice.UserException,"Ice::AdapterAlreadyActiveException",void 0,void 0,!1,!1),Ice.ObjectNotFoundException=N.defineUserException((function(e){Ice.UserException.call(this,e)}),Ice.UserException,"Ice::ObjectNotFoundException",void 0,void 0,!1,!1),Ice.ServerNotFoundException=N.defineUserException((function(e){Ice.UserException.call(this,e)}),Ice.UserException,"Ice::ServerNotFoundException",void 0,void 0,!1,!1),Ice.Locator=N.defineObject(void 0,Ice.Object,void 0,0,["::Ice::Locator","::Ice::Object"],-1,void 0,void 0,!1),Ice.LocatorPrx=N.defineProxy(Ice.ObjectPrx,Ice.Locator.ice_staticId,void 0),N.defineOperations(Ice.Locator,Ice.LocatorPrx,{findObjectById:[,2,1,1,,[9],[[Ice.Identity]],,[Ice.ObjectNotFoundException],,],findAdapterById:[,2,1,1,,[9],[[7]],,[Ice.AdapterNotFoundException],,],getRegistry:[,2,1,,,["Ice.LocatorRegistryPrx"],,,,,]}),Ice.LocatorRegistry=N.defineObject(void 0,Ice.Object,void 0,0,["::Ice::LocatorRegistry","::Ice::Object"],-1,void 0,void 0,!1),Ice.LocatorRegistryPrx=N.defineProxy(Ice.ObjectPrx,Ice.LocatorRegistry.ice_staticId,void 0),N.defineOperations(Ice.LocatorRegistry,Ice.LocatorRegistryPrx,{setAdapterDirectProxy:[,2,2,1,,,[[7],[9]],,[Ice.AdapterAlreadyActiveException,Ice.AdapterNotFoundException],,],setReplicatedAdapterDirectProxy:[,2,2,1,,,[[7],[7],[9]],,[Ice.AdapterAlreadyActiveException,Ice.AdapterNotFoundException,Ice.InvalidReplicaGroupIdException],,],setServerProcessProxy:[,2,2,1,,,[[7],["Ice.ProcessPrx"]],,[Ice.ServerNotFoundException],,]}),Ice.LocatorFinder=N.defineObject(void 0,Ice.Object,void 0,0,["::Ice::LocatorFinder","::Ice::Object"],-1,void 0,void 0,!1),Ice.LocatorFinderPrx=N.defineProxy(Ice.ObjectPrx,Ice.LocatorFinder.ice_staticId,void 0),N.defineOperations(Ice.LocatorFinder,Ice.LocatorFinderPrx,{getLocator:[,,,,,["Ice.LocatorPrx"],,,,,]}),function(){var e=Ice.Debug,t=Ice.HashUtil,n=Ice.StringUtil,i=void 0!==Ice.TcpTransceiver?Ice.TcpTransceiver:null,r=(0,Ice.Class)(Ice.IPEndpointI,{__init__:function(e,t,n,i,r,o,s){Ice.IPEndpointI.call(this,e,t,n,i,o),this._timeout=void 0===r?e?e.defaultTimeout():void 0:r,this._compress=void 0!==s&&s},getInfo:function(){var e=this.secure()?new IceSSL.EndpointInfo:new Ice.TCPEndpointInfo;return this.fillEndpointInfo(e),e},timeout:function(){return this._timeout},changeTimeout:function(e){return e===this._timeout?this:new r(this._instance,this._host,this._port,this._sourceAddr,e,this._connectionId,this._compress)},changeConnectionId:function(e){return e===this._connectionId?this:new r(this._instance,this._host,this._port,this._sourceAddr,this._timeout,e,this._compress)},compress:function(){return this._compress},changeCompress:function(e){return e===this._compress?this:new r(this._instance,this._host,this._port,this._sourceAddr,this._timeout,this._connectionId,e)},datagram:function(){return!1},connectable:function(){return null!==i&&!this.secure()},connect:function(){return e.assert(!this.secure()),i.createOutgoing(this._instance,this.getAddress(),this._sourceAddr)},options:function(){var e=Ice.IPEndpointI.prototype.options.call(this);return-1==this._timeout?e+=" -t infinite":e+=" -t "+this._timeout,this._compress&&(e+=" -z"),e},compareTo:function(e){return this===e?0:null===e?1:e instanceof r?this._timeout<e._timeout?-1:e._timeout<this._timeout?1:!this._compress&&e._compress?-1:!e._compress&&this._compress?1:Ice.IPEndpointI.prototype.compareTo.call(this,e):this.type()<e.type()?-1:1},streamWriteImpl:function(e){Ice.IPEndpointI.prototype.streamWriteImpl.call(this,e),e.writeInt(this._timeout),e.writeBool(this._compress)},hashInit:function(e){return e=Ice.IPEndpointI.prototype.hashInit.call(this,e),e=t.addNumber(e,this._timeout),e=t.addBoolean(e,this._compress)},fillEndpointInfo:function(e){Ice.IPEndpointI.prototype.fillEndpointInfo.call(this,e),e.timeout=this._timeout,e.compress=this._compress},initWithStream:function(e){Ice.IPEndpointI.prototype.initWithStream.call(this,e),this._timeout=e.readInt(),this._compress=e.readBool()},checkOption:function(e,t,i){if(Ice.IPEndpointI.prototype.checkOption.call(this,e,t,i))return!0;if("-t"===e){if(null===t)throw new Ice.EndpointParseException("no argument provided for -t option in endpoint "+i);if("infinite"==t)this._timeout=-1;else{var r=!1;try{this._timeout=n.toInt(t)}catch(e){r=!0}if(r||this._timeout<1)throw new Ice.EndpointParseException("invalid timeout value `"+t+"' in endpoint "+i)}}else{if("-z"!==e)return!1;if(null!==t)throw new Ice.EndpointParseException("unexpected argument `"+t+"' provided for -z option in "+i);this._compress=!0}return!0},createEndpoint:function(e,t,n){return new r(this._instance,e,t,this._sourceAddr,this._timeout,n,this._compress)}});Ice.TcpEndpointI=r}(),function(){var e=Ice.AsyncStatus,t=Ice.AsyncResultBase,n=Ice.BasicStream,i=Ice.BatchRequestQueue,r=Ice.ConnectionFlushBatch,o=Ice.Debug,s=Ice.ExUtil,a=Ice.HashMap,c=Ice.IncomingAsync,l=Ice.RetryException,d=Ice.Promise,u=Ice.Protocol,h=Ice.SocketOperation,f=Ice.Timer,_=Ice.TraceUtil,p=Ice.ProtocolVersion,C=Ice.EncodingVersion,g=Ice.ACM,m=Ice.ACMClose,R=Ice.ACMHeartbeat,v=function(e){this.stream=new n(e,u.currentProtocolEncoding),this.invokeNum=0,this.requestId=0,this.compress=!1,this.servantManager=null,this.adapter=null,this.outAsync=null,this.heartbeatCallback=null},I=Ice.Class,y=I({__init__:function(e,t,r,o,s,c,l){this._communicator=e,this._instance=t,this._monitor=r,this._transceiver=o,this._desc=o.toString(),this._type=o.type(),this._endpoint=s,this._incoming=c,this._adapter=l;var d=t.initializationData();this._logger=d.logger,this._traceLevels=t.traceLevels(),this._timer=t.timer(),this._writeTimeoutId=0,this._writeTimeoutScheduled=!1,this._readTimeoutId=0,this._readTimeoutScheduled=!1,this._hasMoreData={value:!1},this._warn=d.properties.getPropertyAsInt("Ice.Warn.Connections")>0,this._warnUdp=t.initializationData().properties.getPropertyAsInt("Ice.Warn.Datagrams")>0,this._acmLastActivity=null!==this._monitor&&this._monitor.getACM().timeout>0?Date.now():-1,this._nextRequestId=1,this._messageSizeMax=l?l.messageSizeMax():t.messageSizeMax(),this._batchRequestQueue=new i(t,s.datagram()),this._sendStreams=[],this._readStream=new n(t,u.currentProtocolEncoding),this._readHeader=!1,this._writeStream=new n(t,u.currentProtocolEncoding),this._readStreamPos=-1,this._writeStreamPos=-1,this._dispatchCount=0,this._state=0,this._shutdownInitiated=!1,this._initialized=!1,this._validated=!1,this._readProtocol=new p,this._readProtocolEncoding=new C,this._asyncRequests=new a,this._exception=null,this._startPromise=null,this._closePromises=[],this._holdPromises=[],this._finishedPromises=[],null!==this._adapter?this._servantManager=this._adapter.getServantManager():this._servantManager=null,this._callback=null},start:function(){o.assert(null===this._startPromise);try{if(this._state>=5)return o.assert(null!==this._exception),(new d).fail(this._exception);this._startPromise=new d;var e=this;this._transceiver.setCallbacks((function(){e.message(h.Write)}),(function(){e.message(h.Read)}),(function(t,n){if(e.message(h.Write),e._instance.traceLevels().network>=3&&t>0){var i=[];i.push("sent "),i.push(t),e._endpoint.datagram()||(i.push(" of "),i.push(n)),i.push(" bytes via "),i.push(e._endpoint.protocol()),i.push("\n"),i.push(this.toString()),e._instance.initializationData().logger.trace(e._instance.traceLevels().networkCat,i.join(""))}})),this.initialize()}catch(e){return e instanceof Ice.LocalException&&this.exception(e),(new d).fail(e)}return this._startPromise},activate:function(){this._state<=1||(this._acmLastActivity>0&&(this._acmLastActivity=Date.now()),this.setState(2))},hold:function(){this._state<=1||this.setState(3)},destroy:function(e){switch(e){case y.ObjectAdapterDeactivated:this.setState(4,new Ice.ObjectAdapterDeactivatedException);break;case y.CommunicatorDestroyed:this.setState(4,new Ice.CommunicatorDestroyedException)}},close:function(e){var n=new t(this._communicator,"close",this,null,null);return e?(this.setState(5,new Ice.ForcedCloseConnectionException),n.succeed(n)):(this._closePromises.push(n),this.checkClose()),n},checkClose:function(){if(0===this._asyncRequests.size&&this._closePromises.length>0){this.setState(4,new Ice.CloseConnectionException);for(var e=0;e<this._closePromises.length;++e)this._closePromises[e].succeed(this._closePromises[e]);this._closePromises=[]}},isActiveOrHolding:function(){return this._state>1&&this._state<4},isFinished:function(){return 6===this._state&&0===this._dispatchCount&&(o.assert(6===this._state),!0)},throwException:function(){if(null!==this._exception)throw o.assert(this._state>=4),this._exception},waitUntilHolding:function(){var e=new d;return this._holdPromises.push(e),this.checkState(),e},waitUntilFinished:function(){var e=new d;return this._finishedPromises.push(e),this.checkState(),e},monitor:function(e,t){2===this._state&&((t.heartbeat==Ice.ACMHeartbeat.HeartbeatAlways||t.heartbeat!=Ice.ACMHeartbeat.HeartbeatOff&&this._writeStream.isEmpty()&&e>=this._acmLastActivity+t.timeout/4)&&(t.heartbeat!=Ice.ACMHeartbeat.HeartbeatOnInvocation||this._dispatchCount>0)&&this.heartbeat(),this._readStream.size>u.headerSize||!this._writeStream.isEmpty()||t.close!=Ice.ACMClose.CloseOff&&e>=this._acmLastActivity+t.timeout&&(t.close==Ice.ACMClose.CloseOnIdleForceful||t.close!=Ice.ACMClose.CloseOnIdle&&this._asyncRequests.size>0?this.setState(5,new Ice.ConnectionTimeoutException):t.close!=Ice.ACMClose.CloseOnInvocation&&0===this._dispatchCount&&this._batchRequestQueue.isEmpty()&&0===this._asyncRequests.size&&this.setState(4,new Ice.ConnectionTimeoutException)))},sendAsyncRequest:function(e,t,n,i){var r,s=0,a=e.__os();if(null!==this._exception)throw new l(this._exception);o.assert(this._state>1),o.assert(this._state<4),this._transceiver.checkSendSize(a),e.__cancelable(this),n?((s=this._nextRequestId++)<=0&&(this._nextRequestId=1,s=this._nextRequestId++),a.pos=u.headerSize,a.writeInt(s)):i>0&&(a.pos=u.headerSize,a.writeInt(i));try{r=this.sendMessage(S.create(e,e.__os(),t,s))}catch(e){throw e instanceof Ice.LocalException?(this.setState(5,e),o.assert(null!==this._exception),this._exception):e}return n&&this._asyncRequests.set(s,e),r},getBatchRequestQueue:function(){return this._batchRequestQueue},flushBatchRequests:function(){var e=new r(this,this._communicator,"flushBatchRequests");return e.__invoke(),e},setCallback:function(e){if(this._state>=5){if(null!==e){var t=this;f.setImmediate((function(){try{e.closed(this)}catch(e){t._logger.error("connection callback exception:\n"+e+"\n"+t._desc)}}))}}else this._callback=e},setACM:function(e,t,n){null===this._monitor||this._state>=5||(2==this._state&&this._monitor.remove(this),this._monitor=this._monitor.acm(e,t,n),2==this._state&&this._monitor.add(this),this._monitor.getACM().timeout<=0?this._acmLastActivity=-1:2==this._state&&-1==this._acmLastActivity&&(this._acmLastActivity=Date.now()))},getACM:function(){return null!==this._monitor?this._monitor.getACM():new g(0,m.CloseOff,R.HeartbeatOff)},asyncRequestCanceled:function(e,t){for(var n=0;n<this._sendStreams.length;n++){var i=this._sendStreams[n];if(i.outAsync===e)return i.requestId>0&&this._asyncRequests.del(i.requestId),i.canceled(),0!==n&&this._sendStreams.splice(n,1),void e.__completedEx(t)}if(e instanceof Ice.OutgoingAsync)for(var r=this._asyncRequests.entries;null!==r;r=r.next)if(r.value===e)return this._asyncRequests.del(r.key),void e.__completedEx(t)},sendResponse:function(e,t){o.assert(this._state>1);try{if(0==--this._dispatchCount&&(6===this._state&&this.reap(),this.checkState()),this._state>=5)throw o.assert(null!==this._exception),this._exception;this.sendMessage(S.createForStream(e,0!==t,!0)),4===this._state&&0===this._dispatchCount&&this.initiateShutdown()}catch(e){if(!(e instanceof Ice.LocalException))throw e;this.setState(5,e)}},sendNoResponse:function(){o.assert(this._state>1);try{if(0==--this._dispatchCount&&(6===this._state&&this.reap(),this.checkState()),this._state>=5)throw o.assert(null!==this._exception),this._exception;4===this._state&&0===this._dispatchCount&&this.initiateShutdown()}catch(e){if(!(e instanceof Ice.LocalException))throw e;this.setState(5,e)}},endpoint:function(){return this._endpoint},setAdapter:function(e){this._state<=1||this._state>=4||(o.assert(this._state<4),this._adapter=e,null!==this._adapter?(this._servantManager=this._adapter.getServantManager(),null===this._servantManager&&(this._adapter=null)):this._servantManager=null)},getAdapter:function(){return this._adapter},getEndpoint:function(){return this._endpoint},createProxy:function(e){return this._instance.proxyFactory().referenceToProxy(this._instance.referenceFactory().createFixed(e,this))},message:function(e){if(!(this._state>=5)){this.unscheduleTimeout(e),this._hasMoreData.value=0!=(e&h.Read);var t=null;try{if(0!=(e&h.Write)&&this._writeStream.buffer.remaining>0){if(!this.write(this._writeStream.buffer))return o.assert(!this._writeStream.isEmpty()),void this.scheduleTimeout(h.Write,this._endpoint.timeout());o.assert(0===this._writeStream.buffer.remaining)}if(0!=(e&h.Read)&&!this._readStream.isEmpty()){if(this._readHeader){if(!this.read(this._readStream.buffer))return;o.assert(0===this._readStream.buffer.remaining),this._readHeader=!1;var n=this._readStream.pos;if(n<u.headerSize)throw new Ice.IllegalMessageSizeException;this._readStream.pos=0;var i=this._readStream.readByte(),r=this._readStream.readByte(),a=this._readStream.readByte(),c=this._readStream.readByte();if(i!==u.magic[0]||r!==u.magic[1]||a!==u.magic[2]||c!==u.magic[3]){var l=new Ice.BadMagicException;throw l.badMagic=Ice.Buffer.createNative([i,r,a,c]),l}this._readProtocol.__read(this._readStream),u.checkSupportedProtocol(this._readProtocol),this._readProtocolEncoding.__read(this._readStream),u.checkSupportedProtocolEncoding(this._readProtocolEncoding),this._readStream.readByte(),this._readStream.readByte();var d=this._readStream.readInt();if(d<u.headerSize)throw new Ice.IllegalMessageSizeException;d>this._messageSizeMax&&s.throwMemoryLimitException(d,this._messageSizeMax),d>this._readStream.size&&this._readStream.resize(d),this._readStream.pos=n}if(this._readStream.pos!=this._readStream.size){if(this._endpoint.datagram())throw new Ice.DatagramLimitException;if(!this.read(this._readStream.buffer))return o.assert(!this._readStream.isEmpty()),void this.scheduleTimeout(h.Read,this._endpoint.timeout());o.assert(0===this._readStream.buffer.remaining)}}if(this._state<=1){if(0===this._state&&!this.initialize())return;if(this._state<=1&&!this.validate())return;this._transceiver.unregister(),this.setState(3),null!==this._startPromise&&++this._dispatchCount}else o.assert(this._state<=4),0!=(e&h.Read)&&(t=this.parseMessage()),0!=(e&h.Write)&&this.sendNextMessage()}catch(e){if(e instanceof Ice.DatagramLimitException)return this._warnUdp&&this._logger.warning("maximum datagram size of "+this._readStream.pos+" exceeded"),this._readStream.resize(u.headerSize),this._readStream.pos=0,void(this._readHeader=!0);if(e instanceof Ice.SocketException)return void this.setState(5,e);if(e instanceof Ice.LocalException)return void(this._endpoint.datagram()?(this._warn&&this._logger.warning("datagram connection exception:\n"+e+"\n"+this._desc),this._readStream.resize(u.headerSize),this._readStream.pos=0,this._readHeader=!0):this.setState(5,e));throw e}if(this._acmLastActivity>0&&(this._acmLastActivity=Date.now()),this.dispatch(t),this._hasMoreData.value){var _=this;f.setImmediate((function(){_.message(h.Read)}))}}},dispatch:function(e){var t=0;if(null!==this._startPromise&&(this._startPromise.succeed(),this._startPromise=null,++t),null!==e&&(null!==e.outAsync&&(e.outAsync.__completed(e.stream),++t),e.invokeNum>0&&this.invokeAll(e.stream,e.invokeNum,e.requestId,e.compress,e.servantManager,e.adapter),e.heartbeatCallback)){try{e.heartbeatCallback.heartbeat(this)}catch(e){this._logger.error("connection callback exception:\n"+e+"\n"+this._desc)}e.heartbeatCallback=null,++t}if(t>0&&(this._dispatchCount-=t,0===this._dispatchCount)){if(4!==this._state||this._shutdownInitiated)6===this._state&&this.reap();else try{this.initiateShutdown()}catch(e){if(!(e instanceof Ice.LocalException))throw e;this.setState(5,e)}this.checkState()}},finish:function(){var e;o.assert(5===this._state),this.unscheduleTimeout(h.Read|h.Write|h.Connect);var t=this._instance.traceLevels();if(this._initialized?t.network>=1&&((e=[]).push("closed "),e.push(this._endpoint.protocol()),e.push(" connection\n"),e.push(this.toString()),this._exception instanceof Ice.CloseConnectionException||this._exception instanceof Ice.ForcedCloseConnectionException||this._exception instanceof Ice.ConnectionTimeoutException||this._exception instanceof Ice.CommunicatorDestroyedException||this._exception instanceof Ice.ObjectAdapterDeactivatedException||(e.push("\n"),e.push(this._exception.toString())),this._instance.initializationData().logger.trace(t.networkCat,e.join(""))):t.network>=2&&((e=[]).push("failed to establish "),e.push(this._endpoint.protocol()),e.push(" connection\n"),e.push(this.toString()),e.push("\n"),e.push(this._exception.toString()),this._instance.initializationData().logger.trace(t.networkCat,e.join(""))),null!==this._startPromise&&(this._startPromise.fail(this._exception),this._startPromise=null),this._sendStreams.length>0){if(!this._writeStream.isEmpty()){var n=this._sendStreams[0];this._writeStream.swap(n.stream)}for(var i=0;i<this._sendStreams.length;++i){var r=this._sendStreams[i];r.requestId>0&&this._asyncRequests.del(r.requestId),r.completed(this._exception)}this._sendStreams=[]}for(var s=this._asyncRequests.entries;null!==s;s=s.next)s.value.__completedEx(this._exception);if(this._asyncRequests.clear(),this._readStream.clear(),this._readStream.buffer.clear(),this._writeStream.clear(),this._writeStream.buffer.clear(),null!==this._callback){try{this._callback.closed(this)}catch(e){this._logger.error("connection callback exception:\n"+e+"\n"+this._desc)}this._callback=null}0===this._dispatchCount&&this.reap(),this.setState(6)},toString:function(){return this._desc},timedOut:function(e){this._state<=1?this.setState(5,new Ice.ConnectTimeoutException):this._state<4?this.setState(5,new Ice.TimeoutException):4===this._state&&this.setState(5,new Ice.CloseTimeoutException)},type:function(){return this._type},timeout:function(){return this._endpoint.timeout()},getInfo:function(){if(this._state>=5)throw this._exception;var e=this._transceiver.getInfo();return e.adapterName=null!==this._adapter?this._adapter.getName():"",e.incoming=this._incoming,e},setBufferSize:function(e,t){if(this._state>=5)throw this._exception;this._transceiver.setBufferSize(e,t)},exception:function(e){this.setState(5,e)},invokeException:function(e,t){this.setState(5,e),t>0&&(o.assert(this._dispatchCount>0),this._dispatchCount-=t,o.assert(this._dispatchCount>=0),0===this._dispatchCount&&(6===this._state&&this.reap(),this.checkState()))},setState:function(e,t){if(void 0!==t){if(o.assert(t instanceof Ice.LocalException),o.assert(e>=4),this._state===e)return;null===this._exception&&(this._exception=t,this._warn&&this._validated&&(this._exception instanceof Ice.CloseConnectionException||this._exception instanceof Ice.ForcedCloseConnectionException||this._exception instanceof Ice.ConnectionTimeoutException||this._exception instanceof Ice.CommunicatorDestroyedException||this._exception instanceof Ice.ObjectAdapterDeactivatedException||this._exception instanceof Ice.ConnectionLostException&&4===this._state||this.warning("connection exception",this._exception)))}if(this._endpoint.datagram()&&4===e&&(e=5),this._state<=1&&4===e&&(e=5),this._state!==e){try{switch(e){case 0:o.assert(!1);break;case 1:if(0!==this._state)return void o.assert(5===this._state);this._endpoint.datagram()||this._incoming||this._transceiver.register();break;case 2:if(3!==this._state&&1!==this._state)return;this._transceiver.register();break;case 3:if(2!==this._state&&1!==this._state)return;2===this._state&&this._transceiver.unregister();break;case 4:if(this._state>=5)return;3===this._state&&this._transceiver.register();break;case 5:if(6===this._state)return;this._batchRequestQueue.destroy(this._exception),this._transceiver.unregister();break;case 6:o.assert(5===this._state),this._transceiver.close(),this._communicator=null}}catch(t){if(!(t instanceof Ice.LocalException))throw t;var n="unexpected connection exception:\n "+this._desc+"\n"+t.toString();this._instance.initializationData().logger.error(n)}if(null!==this._monitor&&(2===e?(this._monitor.add(this),this._acmLastActivity>0&&(this._acmLastActivity=Date.now())):2===this._state&&this._monitor.remove(this)),this._state=e,4===this._state&&0===this._dispatchCount)try{this.initiateShutdown()}catch(t){if(!(t instanceof Ice.LocalException))throw t;this.setState(5,t)}else 5===this._state&&this.finish();this.checkState()}},initiateShutdown:function(){if(o.assert(4===this._state),o.assert(0===this._dispatchCount),o.assert(!this._shutdownInitiated),!this._endpoint.datagram()){var t=new n(this._instance,u.currentProtocolEncoding);t.writeBlob(u.magic),u.currentProtocol.__write(t),u.currentProtocolEncoding.__write(t),t.writeByte(u.closeConnectionMsg),t.writeByte(0),t.writeInt(u.headerSize),(this.sendMessage(S.createForStream(t,!1,!1))&e.Sent)>0&&this.scheduleTimeout(h.Write,this.closeTimeout())}},heartbeat:function(){if(o.assert(2===this._state),!this._endpoint.datagram()){var e=new n(this._instance,u.currentProtocolEncoding);e.writeBlob(u.magic),u.currentProtocol.__write(e),u.currentProtocolEncoding.__write(e),e.writeByte(u.validateConnectionMsg),e.writeByte(0),e.writeInt(u.headerSize);try{this.sendMessage(S.createForStream(e,!1,!1))}catch(e){this.setState(5,e),o.assert(null!==this._exception)}}},initialize:function(){var e=this._transceiver.initialize(this._readStream.buffer,this._writeStream.buffer);return e!=h.None?(this.scheduleTimeout(e,this.connectTimeout()),!1):(this._desc=this._transceiver.toString(),this._initialized=!0,this.setState(1),!0)},validate:function(){if(!this._endpoint.datagram())if(null!==this._adapter){if(0===this._writeStream.size&&(this._writeStream.writeBlob(u.magic),u.currentProtocol.__write(this._writeStream),u.currentProtocolEncoding.__write(this._writeStream),this._writeStream.writeByte(u.validateConnectionMsg),this._writeStream.writeByte(0),this._writeStream.writeInt(u.headerSize),_.traceSend(this._writeStream,this._logger,this._traceLevels),this._writeStream.prepareWrite()),this._writeStream.pos!=this._writeStream.size&&!this.write(this._writeStream.buffer))return this.scheduleTimeout(h.Write,this.connectTimeout()),!1}else{if(0===this._readStream.size&&(this._readStream.resize(u.headerSize),this._readStream.pos=0),this._readStream.pos!==this._readStream.size&&!this.read(this._readStream.buffer))return this.scheduleTimeout(h.Read,this.connectTimeout()),!1;o.assert(this._readStream.pos===u.headerSize),this._readStream.pos=0;var e=this._readStream.readBlob(4);if(e[0]!==u.magic[0]||e[1]!==u.magic[1]||e[2]!==u.magic[2]||e[3]!==u.magic[3]){var t=new Ice.BadMagicException;throw t.badMagic=e,t}if(this._readProtocol.__read(this._readStream),u.checkSupportedProtocol(this._readProtocol),this._readProtocolEncoding.__read(this._readStream),u.checkSupportedProtocolEncoding(this._readProtocolEncoding),this._readStream.readByte()!==u.validateConnectionMsg)throw new Ice.ConnectionNotValidatedException;if(this._readStream.readByte(),this._readStream.readInt()!==u.headerSize)throw new Ice.IllegalMessageSizeException;_.traceRecv(this._readStream,this._logger,this._traceLevels),this._validated=!0}this._writeStream.resize(0),this._writeStream.pos=0,this._readStream.resize(u.headerSize),this._readHeader=!0,this._readStream.pos=0;var n=this._instance.traceLevels();if(n.network>=1){var i=[];this._endpoint.datagram()?(i.push("starting to send "),i.push(this._endpoint.protocol()),i.push(" messages\n"),i.push(this._transceiver.toDetailedString())):((i=[]).push("established "),i.push(this._endpoint.protocol()),i.push(" connection\n"),i.push(this.toString())),this._instance.initializationData().logger.trace(n.networkCat,i.join(""))}return!0},sendNextMessage:function(){if(0!==this._sendStreams.length){o.assert(!this._writeStream.isEmpty()&&this._writeStream.pos===this._writeStream.size);try{for(;;){var e=this._sendStreams.shift();if(this._writeStream.swap(e.stream),e.sent(),0===this._sendStreams.length)break;if(this._state>=5)return;e=this._sendStreams[0],o.assert(!e.prepared);var t=e.stream;if(t.pos=10,t.writeInt(t.size),t.prepareWrite(),e.prepared=!0,null!==e.outAsync?_.trace("sending asynchronous request",t,this._logger,this._traceLevels):_.traceSend(t,this._logger,this._traceLevels),this._writeStream.swap(e.stream),this._writeStream.pos!=this._writeStream.size&&!this.write(this._writeStream.buffer))return o.assert(!this._writeStream.isEmpty()),void this.scheduleTimeout(h.Write,this._endpoint.timeout())}}catch(e){if(e instanceof Ice.LocalException)return void this.setState(5,e);throw e}o.assert(this._writeStream.isEmpty()),4===this._state&&this.scheduleTimeout(h.Write,this.closeTimeout())}},sendMessage:function(t){if(this._sendStreams.length>0)return t.doAdopt(),this._sendStreams.push(t),e.Queued;o.assert(this._state<5),o.assert(!t.prepared);var n=t.stream;return n.pos=10,n.writeInt(n.size),n.prepareWrite(),t.prepared=!0,t.outAsync?_.trace("sending asynchronous request",t.stream,this._logger,this._traceLevels):_.traceSend(t.stream,this._logger,this._traceLevels),this.write(t.stream.buffer)?(t.sent(),this._acmLastActivity>0&&(this._acmLastActivity=Date.now()),e.Sent):(t.doAdopt(),this._writeStream.swap(t.stream),this._sendStreams.push(t),this.scheduleTimeout(h.Write,this._endpoint.timeout()),e.Queued)},parseMessage:function(){o.assert(this._state>1&&this._state<5);var e=new v(this._instance);this._readStream.swap(e.stream),this._readStream.resize(u.headerSize),this._readStream.pos=0,this._readHeader=!0,this._validated=!0,o.assert(e.stream.pos===e.stream.size);try{e.stream.pos=8;var t=e.stream.readByte();if(e.compress=e.stream.readByte(),2===e.compress){var n=new Ice.FeatureNotSupportedException;throw n.unsupportedFeature="Cannot uncompress compressed message",n}switch(e.stream.pos=u.headerSize,t){case u.closeConnectionMsg:_.traceRecv(e.stream,this._logger,this._traceLevels),this._endpoint.datagram()?this._warn&&this._logger.warning("ignoring close connection message for datagram connection:\n"+this._desc):this.setState(5,new Ice.CloseConnectionException);break;case u.requestMsg:4===this._state?_.trace("received request during closing\n(ignored by server, client will retry)",e.stream,this._logger,this._traceLevels):(_.traceRecv(e.stream,this._logger,this._traceLevels),e.requestId=e.stream.readInt(),e.invokeNum=1,e.servantManager=this._servantManager,e.adapter=this._adapter,++this._dispatchCount);break;case u.requestBatchMsg:if(4===this._state)_.trace("received batch request during closing\n(ignored by server, client will retry)",e.stream,this._logger,this._traceLevels);else{if(_.traceRecv(e.stream,this._logger,this._traceLevels),e.invokeNum=e.stream.readInt(),e.invokeNum<0)throw e.invokeNum=0,new Ice.UnmarshalOutOfBoundsException;e.servantManager=this._servantManager,e.adapter=this._adapter,this._dispatchCount+=e.invokeNum}break;case u.replyMsg:_.traceRecv(e.stream,this._logger,this._traceLevels),e.requestId=e.stream.readInt(),e.outAsync=this._asyncRequests.get(e.requestId),e.outAsync?(this._asyncRequests.del(e.requestId),++this._dispatchCount):e=null,this.checkClose();break;case u.validateConnectionMsg:_.traceRecv(e.stream,this._logger,this._traceLevels),null!==this._callback&&(e.heartbeatCallback=this._callback,++this._dispatchCount);break;default:throw _.trace("received unknown message\n(invalid, closing connection)",e.stream,this._logger,this._traceLevels),new Ice.UnknownMessageException}}catch(n){if(!(n instanceof Ice.LocalException))throw n;this._endpoint.datagram()?this._warn&&this._logger.warning("datagram connection exception:\n"+n+"\n"+this._desc):this.setState(5,n)}return e},invokeAll:function(e,t,n,i,r,o){try{for(;t>0;){var s=!this._endpoint.datagram()&&0!==n;new c(this._instance,this,o,s,i,n).invoke(r,e),--t,null}e.clear()}catch(e){if(!(e instanceof Ice.LocalException))throw e;this.invokeException(e,t)}},scheduleTimeout:function(e,t){if(!(t<0)){var n=this;0!=(e&h.Read)&&(this._readTimeoutId=this._timer.schedule((function(){n.timedOut()}),t),this._readTimeoutScheduled=!0),0!=(e&(h.Write|h.Connect))&&(this._writeTimeoutId=this._timer.schedule((function(){n.timedOut()}),t),this._writeTimeoutScheduled=!0)}},unscheduleTimeout:function(e){0!=(e&h.Read)&&this._readTimeoutScheduled&&(this._timer.cancel(this._readTimeoutId),this._readTimeoutScheduled=!1),0!=(e&(h.Write|h.Connect))&&this._writeTimeoutScheduled&&(this._timer.cancel(this._writeTimeoutId),this._writeTimeoutScheduled=!1)},connectTimeout:function(){var e=this._instance.defaultsAndOverrides();return e.overrideConnectTimeout?e.overrideConnectTimeoutValue:this._endpoint.timeout()},closeTimeout:function(){var e=this._instance.defaultsAndOverrides();return e.overrideCloseTimeout?e.overrideCloseTimeoutValue:this._endpoint.timeout()},warning:function(e,t){this._logger.warning(e+":\n"+this._desc+"\n"+t.toString())},checkState:function(){if(!(this._state<3||this._dispatchCount>0)){var e;if(this._holdPromises.length>0){for(e=0;e<this._holdPromises.length;++e)this._holdPromises[e].succeed();this._holdPromises=[]}if(6===this._state&&this._finishedPromises.length>0){for(this._adapter=null,e=0;e<this._finishedPromises.length;++e)this._finishedPromises[e].succeed();this._finishedPromises=[]}}},reap:function(){null!==this._monitor&&this._monitor.reap(this)},read:function(e){var t=e.position,n=this._transceiver.read(e,this._hasMoreData);if(this._instance.traceLevels().network>=3&&e.position!=t){var i=[];i.push("received "),this._endpoint.datagram()?i.push(e.limit):(i.push(e.position-t),i.push(" of "),i.push(e.limit-t)),i.push(" bytes via "),i.push(this._endpoint.protocol()),i.push("\n"),i.push(this.toString()),this._instance.initializationData().logger.trace(this._instance.traceLevels().networkCat,i.join(""))}return n},write:function(e){var t=e.position,n=this._transceiver.write(e);if(this._instance.traceLevels().network>=3&&e.position!=t){var i=[];i.push("sent "),i.push(e.position-t),this._endpoint.datagram()||(i.push(" of "),i.push(e.limit-t)),i.push(" bytes via "),i.push(this._endpoint.protocol()),i.push("\n"),i.push(this.toString()),this._instance.initializationData().logger.trace(this._instance.traceLevels().networkCat,i.join(""))}return n}});y.ObjectAdapterDeactivated=0,y.CommunicatorDestroyed=1,Ice.ConnectionI=y;var S=I({__init__:function(){this.stream=null,this.outAsync=null,this.compress=!1,this.requestId=0,this.prepared=!1},canceled:function(){o.assert(null!==this.outAsync),this.outAsync=null},doAdopt:function(){if(this.adopt){var e=new n(this.stream.instance,u.currentProtocolEncoding);e.swap(this.stream),this.stream=e,this.adopt=!1}},sent:function(){null!==this.outAsync&&this.outAsync.__sent()},completed:function(e){null!==this.outAsync&&this.outAsync.__completedEx(e)}});S.createForStream=function(e,t,n){var i=new S;return i.stream=e,i.compress=t,i.adopt=n,i.isSent=!1,i.requestId=0,i.outAsync=null,i},S.create=function(e,t,n,i){var r=new S;return r.stream=t,r.compress=n,r.outAsync=e,r.requestId=i,r.isSent=!1,r.adopt=!1,r}}(),function(){var e=Ice.__M.module("IceSSL"),t=Ice.HashUtil,n=(Ice.StringUtil,Ice.EndpointI),i=(0,Ice.Class)(n,{__init__:function(e,t,n){this._instance=e,this._delegate=t,this._resource=n||"/"},getInfo:function(){var t=this._delegate.secure()?new e.WSSEndpointInfo:new Ice.WSEndpointInfo;return t.resource=this._resource,this._delegate.fillEndpointInfo(t),t},type:function(){return this._delegate.type()},protocol:function(){return this._delegate.protocol()},streamWrite:function(e){e.startWriteEncaps(),this._delegate.streamWriteImpl(e),e.writeString(this._resource),e.endWriteEncaps()},timeout:function(){return this._delegate.timeout()},changeTimeout:function(e){return e===this._delegate.timeout()?this:new i(this._instance,this._delegate.changeTimeout(e),this._resource)},changeConnectionId:function(e){return e===this._delegate.connectionId()?this:new i(this._instance,this._delegate.changeConnectionId(e),this._resource)},compress:function(){return this._delegate.compress()},changeCompress:function(e){return e===this._delegate.compress()?this:new i(this._instance,this._delegate.changeCompress(e),this._resource)},datagram:function(){return this._delegate.datagram()},secure:function(){return this._delegate.secure()},connect:function(){return Ice.WSTransceiver.createOutgoing(this._instance,this._delegate.secure(),this._delegate.getAddress(),this._resource)},hashCode:function(){return void 0===this._hashCode&&(this._hashCode=this._delegate.hashCode(),this._hashCode=t.addString(this._hashCode,this._resource)),this._hashCode},compareTo:function(e){if(this===e)return 0;if(null===e)return 1;if(!(e instanceof i))return this.type()<e.type()?-1:1;var t=this._delegate.compareTo(e._delegate);return 0!==t?t:this._resource!==e._resource?this._resource<e._resource?-1:1:0},options:function(){var e=this._delegate.options();return null!==this._resource&&this._resource.length>0&&(e+=" -r ",e+=-1!==this._resource.indexOf(":")?'"'+this._resource+'"':this._resource),e},toConnectorString:function(){return this._delegate.toConnectorString()},initWithStream:function(e){this._resource=e.readString()},checkOption:function(e,t,n){if("-r"!==e)return!1;if(null===t)throw new Ice.EndpointParseException("no argument provided for -r option in endpoint "+n);return this._resource=t,!0}});void 0!==Ice.WSTransceiver?i.prototype.connectable=function(){return!0}:i.prototype.connectable=function(){return!1},Ice.WSEndpoint=i}(),function(){var e=Ice.HashMap,t=Ice.RouterInfo,n=Ice.RouterPrx,i=Ice.Class({__init__:function(){this._table=new e(e.compareEquals)},destroy:function(){for(var e=this._table.entries;null!==e;e=e.next)e.value.destroy();this._table.clear()},find:function(e){if(null===e)return null;var i=n.uncheckedCast(e.ice_router(null)),r=this._table.get(i);return void 0===r&&(r=new t(i),this._table.set(i,r)),r},erase:function(e){var t=null;if(null!==e){var i=n.uncheckedCast(e.ice_router(null));t=this._table.get(i),this._table.del(i)}return t}});Ice.RouterManager=i}(),function(){var e=Ice.Class,t=Ice.Debug,n=e({__init__:function(e,t,n,i){if(void 0===e)return this.timeout=6e4,this.heartbeat=Ice.ACMHeartbeat.HeartbeatOnInvocation,void(this.close=Ice.ACMClose.CloseOnInvocationAndIdle);var r;r="Ice.ACM.Client"!=n&&"Ice.ACM.Server"!=n||0!==e.getProperty(n+".Timeout").length?n+".Timeout":n,this.timeout=1e3*e.getPropertyAsIntWithDefault(r,i.timeout/1e3);var o=e.getPropertyAsIntWithDefault(n+".Heartbeat",i.heartbeat.value);o>=0&&o<=Ice.ACMHeartbeat.maxValue?this.heartbeat=Ice.ACMHeartbeat.valueOf(o):(t.warning("invalid value for property `"+n+".Heartbeat', default value will be used instead"),this.heartbeat=i.heartbeat);var s=e.getPropertyAsIntWithDefault(n+".Close",i.close.value);s>=0&&s<=Ice.ACMClose.maxValue?this.close=Ice.ACMClose.valueOf(s):(t.warning("invalid value for property `"+n+".Close', default value will be used instead"),this.close=i.close)}}),i=e({add:function(e){t.assert(!1)},remove:function(e){t.assert(!1)},reap:function(e){t.assert(!1)},acm:function(e){return t.assert(!1),null},getACM:function(){return t.assert(!1),0}}),r=e(i,{__init__:function(e,t){this._instance=e,this._config=t,this._reapedConnections=[],this._connections=[]},destroy:function(){null!==this._instance&&(this._instance=null,this._connections=null)},add:function(e){if(0!==this._config.timeout&&(this._connections.push(e),1==this._connections.length)){var t=this;this._timerToken=this._instance.timer().scheduleRepeated((function(){t.runTimerTask()}),this._config.timeout/2)}},remove:function(e){if(0!==this._config.timeout){var n=this._connections.indexOf(e);t.assert(n>=0),this._connections.splice(n,1),0!==this._connections.length||this._instance.timer().cancel(this._timerToken)}},reap:function(e){this._reapedConnections.push(e)},acm:function(e,i,r){t.assert(null!==this._instance);var s=new n;return s.timeout=this._config.timeout,s.close=this._config.close,s.heartbeat=this._config.heartbeat,void 0!==e&&(s.timeout=1e3*e),void 0!==i&&(s.close=i),void 0!==r&&(s.heartbeat=r),new o(this,this._instance.timer(),s)},getACM:function(){return new Ice.ACM(this._config.timeout/1e3,this._config.close,this._config.heartbeat)},swapReapedConnections:function(){if(0===this._reapedConnections.length)return null;var e=this._reapedConnections;return this._reapedConnections=[],e},runTimerTask:function(){if(null!==this._instance)for(var e=Date.now(),t=0;t<this._connections.length;t++)try{this._connections[t].monitor(e,this._config)}catch(e){this.handleException(e)}},handleException:function(e){null!==this._instance&&this._instance.initializationData().logger.error("exception in connection monitor:\n"+e)}}),o=e(i,{__init__:function(e,t,n){this._parent=e,this._timer=t,this._config=n,this._connection=null},add:function(e){if(t.assert(null===this._connection),this._connection=e,this._config.timeout>0){var n=this;this._timerToken=this._timer.scheduleRepeated((function(){n.runTimerTask()}),this._config.timeout/2)}},remove:function(e){t.assert(this._connection===e),this._connection=null,this._config.timeout>0&&this._timer.cancel(this._timerToken)},reap:function(e){this._parent.reap(e)},acm:function(e,t,n){return this._parent.acm(e,t,n)},getACM:function(){return new Ice.ACM(this._config.timeout/1e3,this._config.close,this._config.heartbeat)},runTimerTask:function(){try{this._connection.monitor(Date.now(),this._config)}catch(e){this._parent.handleException(e)}}});Ice.FactoryACMMonitor=r,Ice.ACMConfig=n}(),P=Ice.Context,x=Ice.InitializationException,(T=Ice.Class({__init__:function(){this._context=new P},getContext:function(){return new P(this._context)},setContext:function(e){null!==e&&e.size>0?this._context=new P(e):this._context.clear()},containsKey:function(e){return null===e&&(e=""),this._context.has(e)},get:function(e){null===e&&(e="");var t=this._context.get(e);return null===t&&(t=""),t},put:function(e,t){null===e&&(e=""),null===t&&(t="");var n=this._context.get(e);return null===n&&(n=""),this._context.set(e,t),n},remove:function(e){null===e&&(e="");var t=this._context.get(e);return this._context.del(e),null===t&&(t=""),t},write:function(e,t){if(0===e.size)Ice.ContextHelper.write(t,this._context);else{var n=null;0===this._context.size?n=e:(n=new P(this._context)).merge(e),Ice.ContextHelper.write(t,n)}}})).create=function(e){if(0===e.length||"None"===e)return null;if("Shared"===e)return new T;throw new x("'"+e+"' is not a valid value for Ice.ImplicitContext")},Ice.ImplicitContextI=T,function(){var e=Ice.ArrayUtil,t=Ice.Debug,n=Ice.BatchRequestQueue,i=Ice.HashMap,r=Ice.HashUtil,o=Ice.OpaqueEndpointI,s=Ice.Promise,a=(Ice.Protocol,Ice.ReferenceMode),c=Ice.StringUtil,l=Ice.StringSeqHelper,d=Ice.EndpointSelectionType,u=Ice.Identity,h=Ice.RouterPrx,f=Ice.LocatorPrx,_=Ice.PropertyNames,p=Ice.ConnectionRequestHandler,C=Ice.Class,g=["EndpointSelection","ConnectionCached","PreferSecure","EncodingVersion","LocatorCacheTimeout","InvocationTimeout","Locator","Router","CollocationOptimized"],m=C({__init__:function(e,t){this._instance=e,this._communicator=t,this._defaultRouter=null,this._defaultLocator=null},create:function(e,t,n,i){return 0===e.name.length&&0===e.category.length?null:this.createImpl(e,t,n.getMode(),n.getSecure(),n.getProtocol(),n.getEncoding(),i,null,null)},createWithAdapterId:function(e,t,n,i){return 0===e.name.length&&0===e.category.length?null:this.createImpl(e,t,n.getMode(),n.getSecure(),n.getProtocol(),n.getEncoding(),null,i,null)},createFixed:function(e,t){return 0===e.name.length&&0===e.category.length?null:new v(this._instance,this._communicator,e,"",t.endpoint().datagram()?a.ModeDatagram:a.ModeTwoway,t.endpoint().secure(),this._instance.defaultsAndOverrides().defaultEncoding,t)},copy:function(e){var t=e.getIdentity();return 0===t.name.length&&0===t.category.length?null:e.clone()},createFromString:function(e,n){if(null==e||0===e.length)return null;var i,r=" \t\n\r",o=0;if(-1==(i=c.findFirstNotOf(e,r,o)))throw new Ice.ProxyParseException("no non-whitespace characters found in `"+e+"'");var s=null;if(-1===(o=c.checkQuote(e,i)))throw new Ice.ProxyParseException("mismatched quotes around identity in `"+e+"'");if(0===o?(-1===(o=c.findFirstOf(e," \t\n\r:@",i))&&(o=e.length),s=e.substring(i,o)):(i++,s=e.substring(i,o),o++),i===o)throw new Ice.ProxyParseException("no identity in `"+e+"'");var l=this._instance.stringToIdentity(s);if(0===l.name.length){if(l.category.length>0)throw new Ice.IllegalIdentityException(l);if(-1!=c.findFirstNotOf(e,r,o))throw new Ice.ProxyParseException("invalid characters after identity in `"+e+"'");return null}for(var d="",u=a.ModeTwoway,h=!1,f=this._instance.defaultsAndOverrides().defaultEncoding,_=Ice.Protocol_1_0,p="";-1!==(i=c.findFirstNotOf(e,r,o))&&":"!=e.charAt(i)&&"@"!=e.charAt(i)&&(-1==(o=c.findFirstOf(e," \t\n\r:@",i))&&(o=e.length),i!=o);){var C=e.substring(i,o);if(2!=C.length||"-"!=C.charAt(0))throw new Ice.ProxyParseException("expected a proxy option but found `"+C+"' in `"+e+"'");var g=null,m=c.findFirstNotOf(e,r,o);if(-1!=m){var R=e.charAt(m);if("@"!=R&&":"!=R&&"-"!=R){if(i=m,-1==(o=c.checkQuote(e,i)))throw new Ice.ProxyParseException("mismatched quotes around value for "+C+" option in `"+e+"'");0===o?(-1===(o=c.findFirstOf(e," \t\n\r:@",i))&&(o=e.length),g=e.substring(i,o)):(i++,g=e.substring(i,o),o++)}}switch(C.charAt(1)){case"f":if(null===g)throw new Ice.ProxyParseException("no argument provided for -f option in `"+e+"'");try{d=c.unescapeString(g,0,g.length)}catch(t){throw new Ice.ProxyParseException("invalid facet in `"+e+"': "+t.message)}break;case"t":if(null!==g)throw new Ice.ProxyParseException("unexpected argument `"+g+"' provided for -t option in `"+e+"'");u=a.ModeTwoway;break;case"o":if(null!==g)throw new Ice.ProxyParseException("unexpected argument `"+g+"' provided for -o option in `"+e+"'");u=a.ModeOneway;break;case"O":if(null!==g)throw new Ice.ProxyParseException("unexpected argument `"+g+"' provided for -O option in `"+e+"'");u=a.ModeBatchOneway;break;case"d":if(null!==g)throw new Ice.ProxyParseException("unexpected argument `"+g+"' provided for -d option in `"+e+"'");u=a.ModeDatagram;break;case"D":if(null!==g)throw new Ice.ProxyParseException("unexpected argument `"+g+"' provided for -D option in `"+e+"'");u=a.ModeBatchDatagram;break;case"s":if(null!==g)throw new Ice.ProxyParseException("unexpected argument `"+g+"' provided for -s option in `"+e+"'");h=!0;break;case"e":if(null===g)throw new Ice.ProxyParseException("no argument provided for -e option in `"+e+"'");try{f=Ice.stringToEncodingVersion(g)}catch(t){throw new Ice.ProxyParseException("invalid encoding version `"+g+"' in `"+e+"':\n"+t.str)}break;case"p":if(null===g)throw new Ice.ProxyParseException("no argument provided for -p option in `"+e+"'");try{_=Ice.stringToProtocolVersion(g)}catch(t){throw new Ice.ProxyParseException("invalid protocol version `"+g+"' in `"+e+"':\n"+t.str)}break;default:throw new Ice.ProxyParseException("unknown option `"+C+"' in `"+e+"'")}}if(-1===i)return this.createImpl(l,d,u,h,_,f,null,null,n);var v=[];if(":"==e.charAt(i)){var I=[];for(o=i;o<e.length&&":"==e.charAt(o);){for(o=i=o+1;;){if(-1==(o=e.indexOf(":",o))){o=e.length;break}for(var y=!1,S=i;!(-1==(S=e.indexOf('"',S))||o<S)&&-1!=(S=e.indexOf('"',++S));){if(o<S){y=!0;break}++S}if(!y)break;++o}var E=e.substring(i,o),b=this._instance.endpointFactoryManager().create(E,!1);null!==b?v.push(b):I.push(E)}if(0===v.length)throw t.assert(I.length>0),new Ice.EndpointParseException("invalid endpoint `"+I[0]+"' in `"+e+"'");if(0!==I.length&&this._instance.initializationData().properties.getPropertyAsIntWithDefault("Ice.Warn.Endpoints",1)>0){var w=[];w.push("Proxy contains unknown endpoints:");for(var P=0;P<I.length;++P)w.push(" `"),w.push(I[P]),w.push("'");this._instance.initializationData().logger.warning(w.join(""))}return this.createImpl(l,d,u,h,_,f,v,null,n)}if("@"==e.charAt(i)){if(-1==(i=c.findFirstNotOf(e,r,i+1)))throw new Ice.ProxyParseException("missing adapter id in `"+e+"'");var x=null;if(-1===(o=c.checkQuote(e,i)))throw new Ice.ProxyParseException("mismatched quotes around adapter id in `"+e+"'");if(0===o?(-1===(o=c.findFirstOf(e,r,i))&&(o=e.length),x=e.substring(i,o)):(i++,x=e.substring(i,o),o++),o!==e.length&&-1!==c.findFirstNotOf(e,r,o))throw new Ice.ProxyParseException("invalid trailing characters after `"+e.substring(0,o+1)+"' in `"+e+"'");try{p=c.unescapeString(x,0,x.length)}catch(t){throw new Ice.ProxyParseException("invalid adapter id in `"+e+"': "+t.message)}if(0===p.length)throw new Ice.ProxyParseException("empty adapter id in `"+e+"'");return this.createImpl(l,d,u,h,_,f,null,p,n)}throw new Ice.ProxyParseException("malformed proxy `"+e+"'")},createFromStream:function(e,t){if(0===e.name.length&&0===e.category.length)return null;var n,i=l.read(t);if(i.length>0){if(i.length>1)throw new Ice.ProxyUnmarshalException;n=i[0]}else n="";var r=t.readByte();if(r<0||r>a.ModeLast)throw new Ice.ProxyUnmarshalException;var o=t.readBool(),s=null,c=null;t.getReadEncoding().equals(Ice.Encoding_1_0)?(s=Ice.Protocol_1_0,c=Ice.Encoding_1_0):((s=new Ice.ProtocolVersion).__read(t),(c=new Ice.EncodingVersion).__read(t));var d=null,u=null,h=t.readSize();if(h>0){d=[];for(var f=0;f<h;f++)d[f]=this._instance.endpointFactoryManager().read(t)}else u=t.readString();return this.createImpl(e,n,r,o,s,c,d,u,null)},setDefaultRouter:function(e){if(null===this._defaultRouter?null===e:this._defaultRouter.equals(e))return this;var t=new m(this._instance,this._communicator);return t._defaultLocator=this._defaultLocator,t._defaultRouter=e,t},getDefaultRouter:function(){return this._defaultRouter},setDefaultLocator:function(e){if(null===this._defaultLocator?null===e:this._defaultLocator.equals(e))return this;var t=new m(this._instance,this._communicator);return t._defaultRouter=this._defaultRouter,t._defaultLocator=e,t},getDefaultLocator:function(){return this._defaultLocator},checkForUnknownProperties:function(e){var t,n,i=[];for(t=0;t<_.clPropNames.length;++t)if(0===e.indexOf(_.clPropNames[t]+"."))return;for(var r=this._instance.initializationData().properties.getPropertiesForPrefix(e+".").entries;null!==r;r=r.next){var o=!1;for(t=0,n=g.length;t<n;++t)if(r.key===e+"."+g[t]){o=!0;break}o||i.push(r.key)}if(i.length>0){var s=[];for(s.push("found unknown properties for proxy '"),s.push(e),s.push("':"),t=0,n=i.length;t<n;++t)s.push("\n    "),s.push(i[t]);this._instance.initializationData().logger.warning(s.join(""))}},createImpl:function(e,t,n,i,r,o,s,a,c){var l=this._instance.defaultsAndOverrides(),u=null;null!==this._defaultLocator&&(u=this._defaultLocator.__reference().getEncoding().equals(o)?this._instance.locatorManager().find(this._defaultLocator):this._instance.locatorManager().find(this._defaultLocator.ice_encodingVersion(o)));var _=this._instance.routerManager().find(this._defaultRouter),p=!0,C=l.defaultPreferSecure,g=l.defaultEndpointSelection,m=l.defaultLocatorCacheTimeout,R=l.defaultInvocationTimeout;if(null!==c&&c.length>0){var v,y=this._instance.initializationData().properties;y.getPropertyAsIntWithDefault("Ice.Warn.UnknownProperties",1)>0&&this.checkForUnknownProperties(c),v=c+".Locator";var S=f.uncheckedCast(this._communicator.propertyToProxy(v));null!==S&&(u=S.__reference().getEncoding().equals(o)?this._instance.locatorManager().find(S):this._instance.locatorManager().find(S.ice_encodingVersion(o))),v=c+".Router";var E=h.uncheckedCast(this._communicator.propertyToProxy(v));if(null!==E){var b=".Router";if(c.lastIndexOf(b)==c.length-b.length){var w="`"+v+"="+y.getProperty(v)+"': cannot set a router on a router; setting ignored";this._instance.initializationData().logger.warning(w)}else _=this._instance.routerManager().find(E)}if(v=c+".ConnectionCached",p=y.getPropertyAsIntWithDefault(v,p?1:0)>0,v=c+".PreferSecure",C=y.getPropertyAsIntWithDefault(v,C?1:0)>0,v=c+".EndpointSelection",y.getProperty(v).length>0){var P=y.getProperty(v);if("Random"==P)g=d.Random;else{if("Ordered"!=P)throw new Ice.EndpointSelectionTypeParseException("illegal value `"+P+"'; expected `Random' or `Ordered'");g=d.Ordered}}v=c+".LocatorCacheTimeout";var x=y.getProperty(v);0!==x.length&&(m=y.getPropertyAsIntWithDefault(v,m))<-1&&(m=-1,this._instance.initializationData().logger.warning("invalid value for"+v+"`"+y.getProperty(v)+"': defaulting to -1")),v=c+".InvocationTimeout",0!==(x=y.getProperty(v)).length&&(R=y.getPropertyAsIntWithDefault(v,R))<1&&-1!==R&&(R=-1,this._instance.initializationData().logger.warning("invalid value for"+v+"`"+y.getProperty(v)+"': defaulting to -1"))}return new I(this._instance,this._communicator,e,t,n,i,r,o,s,a,u,_,p,C,g,m,R)}});Ice.ReferenceFactory=m;var R=C({__init__:function(e,n,i,r,o,s,a,c,l){t.assert(void 0===i||null!==i.name),t.assert(void 0===i||null!==i.category),t.assert(void 0===r||null!==r),this._instance=e,this._communicator=n,this._mode=o,this._secure=s,this._identity=i,this._context=R._emptyContext,this._facet=r,this._protocol=a,this._encoding=c,this._invocationTimeout=l,this._hashInitialized=!1,this._overrideCompress=!1,this._compress=!1},getMode:function(){return this._mode},getSecure:function(){return this._secure},getProtocol:function(){return this._protocol},getEncoding:function(){return this._encoding},getIdentity:function(){return this._identity},getFacet:function(){return this._facet},getInstance:function(){return this._instance},getContext:function(){return this._context},getInvocationTimeout:function(){return this._invocationTimeout},getCommunicator:function(){return this._communicator},getEndpoints:function(){return t.assert(!1),null},getAdapterId:function(){return t.assert(!1),""},getRouterInfo:function(){return t.assert(!1),null},getLocatorInfo:function(){return t.assert(!1),null},getCacheConnection:function(){return t.assert(!1),!1},getPreferSecure:function(){return t.assert(!1),!1},getEndpointSelection:function(){return t.assert(!1),null},getLocatorCacheTimeout:function(){return t.assert(!1),0},getConnectionId:function(){return t.assert(!1),""},changeContext:function(e){null==e&&(e=R._emptyContext);var t=this._instance.referenceFactory().copy(this);return 0===e.size?t._context=R._emptyContext:t._context=new i(e),t},changeMode:function(e){if(e===this._mode)return this;var t=this._instance.referenceFactory().copy(this);return t._mode=e,t},changeSecure:function(e){if(e===this._secure)return this;var t=this._instance.referenceFactory().copy(this);return t._secure=e,t},changeIdentity:function(e){if(e.equals(this._identity))return this;var t=this._instance.referenceFactory().copy(this);return t._identity=new u(e.name,e.category),t},changeFacet:function(e){if(e===this._facet)return this;var t=this._instance.referenceFactory().copy(this);return t._facet=e,t},changeInvocationTimeout:function(e){if(e===this._invocationTimeout)return this;var t=this._instance.referenceFactory().copy(this);return t._invocationTimeout=e,t},changeEncoding:function(e){if(e.equals(this._encoding))return this;var t=this._instance.referenceFactory().copy(this);return t._encoding=e,t},changeCompress:function(e){if(this._overrideCompress&&this._compress===e)return this;var t=this._instance.referenceFactory().copy(this);return t._compress=e,t._overrideCompress=!0,t},changeAdapterId:function(e){return t.assert(!1),null},changeEndpoints:function(e){return t.assert(!1),null},changeLocator:function(e){return t.assert(!1),null},changeRouter:function(e){return t.assert(!1),null},changeCacheConnection:function(e){return t.assert(!1),null},changePreferSecure:function(e){return t.assert(!1),null},changeEndpointSelection:function(e){return t.assert(!1),null},changeLocatorCacheTimeout:function(e){return t.assert(!1),null},changeTimeout:function(e){return t.assert(!1),null},changeConnectionId:function(e){return t.assert(!1),null},hashCode:function(){if(this._hashInitialized)return this._hashValue;var e=5381;if(e=r.addNumber(e,this._mode),e=r.addBoolean(e,this._secure),e=r.addHashable(e,this._identity),null!==this._context&&void 0!==this._context)for(var t=this._context.entries;null!==t;t=t.next)e=r.addString(e,t.key),e=r.addString(e,t.value);return e=r.addString(e,this._facet),e=r.addBoolean(e,this._overrideCompress),this._overrideCompress&&(e=r.addBoolean(e,this._compress)),e=r.addHashable(e,this._protocol),e=r.addHashable(e,this._encoding),e=r.addNumber(e,this._invocationTimeout),this._hashValue=e,this._hashInitialized=!0,this._hashValue},isIndirect:function(){return t.assert(!1),!1},isWellKnown:function(){return t.assert(!1),!1},streamWrite:function(e){0===this._facet.length?e.writeSize(0):(e.writeSize(1),e.writeString(this._facet)),e.writeByte(this._mode),e.writeBool(this._secure),e.getWriteEncoding().equals(Ice.Encoding_1_0)||(this._protocol.__write(e),this._encoding.__write(e))},toString:function(){var e=[],t=this._instance.identityToString(this._identity);if(-1!=t.search(/[ :@]/)?(e.push('"'),e.push(t),e.push('"')):e.push(t),this._facet.length>0){e.push(" -f ");var n=c.escapeString(this._facet,"");-1!=n.search(/[ :@]/)?(e.push('"'),e.push(n),e.push('"')):e.push(n)}switch(this._mode){case a.ModeTwoway:e.push(" -t");break;case a.ModeOneway:e.push(" -o");break;case a.ModeBatchOneway:e.push(" -O");break;case a.ModeDatagram:e.push(" -d");break;case a.ModeBatchDatagram:e.push(" -D")}return this._secure&&e.push(" -s"),this._protocol.equals(Ice.Protocol_1_0)||(e.push(" -p "),e.push(Ice.protocolVersionToString(this._protocol))),e.push(" -e "),e.push(Ice.encodingVersionToString(this._encoding)),e.join("")},toProperty:function(e){return t.assert(!1),null},getRequestHandler:function(e){t.assert(!1)},getBatchRequestQueue:function(){t.assert(!1)},equals:function(e){return this._mode===e._mode&&(this._secure===e._secure&&(!!this._identity.equals(e._identity)&&(!!this._context.equals(e._context)&&(this._facet===e._facet&&(this._overrideCompress===e._overrideCompress&&((!this._overrideCompress||this._compress===e._compress)&&(!!this._protocol.equals(e._protocol)&&(!!this._encoding.equals(e._encoding)&&this._invocationTimeout===e._invocationTimeout))))))))},clone:function(){return t.assert(!1),null},copyMembers:function(e){e._context=this._context,e._overrideCompress=this._overrideCompress,e._compress=this._compress}});R._emptyContext=new i,R._emptyEndpoints=[],Ice.Reference=R;var v=C(R,{__init__:function(e,t,n,i,r,o,s,a){R.call(this,e,t,n,i,r,o,Ice.Protocol_1_0,s),this._fixedConnection=a},getEndpoints:function(){return R._emptyEndpoints},getAdapterId:function(){return""},getRouterInfo:function(){return null},getLocatorInfo:function(){return null},getCacheConnection:function(){return!0},getPreferSecure:function(){return!1},getEndpointSelection:function(){return d.Random},getLocatorCacheTimeout:function(){return 0},getConnectionId:function(){return""},changeAdapterId:function(e){throw new Ice.FixedProxyException},changeEndpoints:function(e){throw new Ice.FixedProxyException},changeLocator:function(e){throw new Ice.FixedProxyException},changeRouter:function(e){throw new Ice.FixedProxyException},changeCacheConnection:function(e){throw new Ice.FixedProxyException},changePreferSecure:function(e){throw new Ice.FixedProxyException},changeEndpointSelection:function(e){throw new Ice.FixedProxyException},changeLocatorCacheTimeout:function(e){throw new Ice.FixedProxyException},changeTimeout:function(e){throw new Ice.FixedProxyException},changeConnectionId:function(e){throw new Ice.FixedProxyException},isIndirect:function(){return!1},isWellKnown:function(){return!1},streamWrite:function(e){throw new Ice.FixedProxyException},toString:function(){throw new Ice.FixedProxyException},toProperty:function(e){throw new Ice.FixedProxyException},clone:function(){var e=new v(this.getInstance(),this.getCommunicator(),this.getIdentity(),this.getFacet(),this.getMode(),this.getSecure(),this.getEncoding(),this._fixedConnection);return this.copyMembers(e),e},getRequestHandler:function(e){switch(this.getMode()){case a.ModeTwoway:case a.ModeOneway:case a.ModeBatchOneway:if(this._fixedConnection.endpoint().datagram())throw new Ice.NoEndpointException("");break;case a.ModeDatagram:case a.ModeBatchDatagram:if(!this._fixedConnection.endpoint().datagram())throw new Ice.NoEndpointException("")}var t,n=this.getInstance().defaultsAndOverrides();if((n.overrideSecure?n.overrideSecureValue:this.getSecure())&&!this._fixedConnection.endpoint().secure())throw new Ice.NoEndpointException("");return this._fixedConnection.throwException(),t=n.overrideCompress?n.overrideCompressValue:this._overrideCompress?this._compress:this._fixedConnection.endpoint().compress(),e.__setRequestHandler(new p(this,this._fixedConnection,t))},getBatchRequestQueue:function(){return this._fixedConnection.getBatchRequestQueue()},equals:function(e){return this===e||e instanceof v&&(!!R.prototype.equals.call(this,e)&&this._fixedConnection.equals(e._fixedConnection))}});Ice.FixedReference=v;var I=C(R,{__init__:function(e,n,i,r,o,s,a,c,l,d,u,h,f,_,p,C,g){R.call(this,e,n,i,r,o,s,a,c,g),this._endpoints=l,this._adapterId=d,this._locatorInfo=u,this._routerInfo=h,this._cacheConnection=f,this._preferSecure=_,this._endpointSelection=p,this._locatorCacheTimeout=C,this._overrideTimeout=!1,this._timeout=-1,null===this._endpoints&&(this._endpoints=R._emptyEndpoints),null===this._adapterId&&(this._adapterId=""),this._connectionId="",t.assert(0===this._adapterId.length||0===this._endpoints.length)},getEndpoints:function(){return this._endpoints},getAdapterId:function(){return this._adapterId},getRouterInfo:function(){return this._routerInfo},getLocatorInfo:function(){return this._locatorInfo},getCacheConnection:function(){return this._cacheConnection},getPreferSecure:function(){return this._preferSecure},getEndpointSelection:function(){return this._endpointSelection},getLocatorCacheTimeout:function(){return this._locatorCacheTimeout},getConnectionId:function(){return this._connectionId},changeEncoding:function(e){var t=R.prototype.changeEncoding.call(this,e);if(t!==this){var n=t._locatorInfo;null===n||n.getLocator().ice_getEncodingVersion().equals(e)||(t._locatorInfo=this.getInstance().locatorManager().find(n.getLocator().ice_encodingVersion(e)))}return t},changeCompress:function(e){var t=R.prototype.changeCompress.call(this,e);if(t!==this&&this._endpoints.length>0){for(var n=[],i=0;i<this._endpoints.length;i++)n[i]=this._endpoints[i].changeCompress(e);t._endpoints=n}return t},changeAdapterId:function(e){if(this._adapterId===e)return this;var t=this.getInstance().referenceFactory().copy(this);return t._adapterId=e,t._endpoints=R._emptyEndpoints,t},changeEndpoints:function(t){if(e.equals(t,this._endpoints,(function(e,t){return e.equals(t)})))return this;var n=this.getInstance().referenceFactory().copy(this);return n._endpoints=t,n._adapterId="",n.applyOverrides(n._endpoints),n},changeLocator:function(e){var t=this.getInstance().locatorManager().find(e);if(null!==t&&null!==this._locatorInfo&&t.equals(this._locatorInfo))return this;var n=this.getInstance().referenceFactory().copy(this);return n._locatorInfo=t,n},changeRouter:function(e){var t=this.getInstance().routerManager().find(e);if(null!==t&&null!==this._routerInfo&&t.equals(this._routerInfo))return this;var n=this.getInstance().referenceFactory().copy(this);return n._routerInfo=t,n},changeCacheConnection:function(e){if(e===this._cacheConnection)return this;var t=this.getInstance().referenceFactory().copy(this);return t._cacheConnection=e,t},changePreferSecure:function(e){if(e===this._preferSecure)return this;var t=this.getInstance().referenceFactory().copy(this);return t._preferSecure=e,t},changeEndpointSelection:function(e){if(e===this._endpointSelection)return this;var t=this.getInstance().referenceFactory().copy(this);return t._endpointSelection=e,t},changeLocatorCacheTimeout:function(e){if(this._locatorCacheTimeout===e)return this;var t=this.getInstance().referenceFactory().copy(this);return t._locatorCacheTimeout=e,t},changeTimeout:function(e){if(this._overrideTimeout&&this._timeout===e)return this;var t=this.getInstance().referenceFactory().copy(this);if(t._timeout=e,t._overrideTimeout=!0,this._endpoints.length>0){for(var n=[],i=0;i<this._endpoints.length;i++)n[i]=this._endpoints[i].changeTimeout(e);t._endpoints=n}return t},changeConnectionId:function(e){if(this._connectionId===e)return this;var t=this.getInstance().referenceFactory().copy(this);if(t._connectionId=e,this._endpoints.length>0){for(var n=[],i=0;i<this._endpoints.length;i++)n[i]=this._endpoints[i].changeConnectionId(e);t._endpoints=n}return t},isIndirect:function(){return 0===this._endpoints.length},isWellKnown:function(){return 0===this._endpoints.length&&0===this._adapterId.length},streamWrite:function(e){if(R.prototype.streamWrite.call(this,e),e.writeSize(this._endpoints.length),this._endpoints.length>0){t.assert(0===this._adapterId.length);for(var n=0;n<this._endpoints.length;++n)e.writeShort(this._endpoints[n].type()),this._endpoints[n].streamWrite(e)}else e.writeString(this._adapterId)},toString:function(){var e=[];if(e.push(R.prototype.toString.call(this)),this._endpoints.length>0)for(var t=0;t<this._endpoints.length;++t){var n=this._endpoints[t].toString();null!==n&&n.length>0&&(e.push(":"),e.push(n))}else if(this._adapterId.length>0){e.push(" @ ");var i=c.escapeString(this._adapterId,null);-1!=i.search(/[ :@]/)?(e.push('"'),e.push(i),e.push('"')):e.push(i)}return e.join("")},toProperty:function(e){var t,n=new i;if(n.set(e,this.toString()),n.set(e+".CollocationOptimized","0"),n.set(e+".ConnectionCached",this._cacheConnection?"1":"0"),n.set(e+".PreferSecure",this._preferSecure?"1":"0"),n.set(e+".EndpointSelection",this._endpointSelection===d.Random?"Random":"Ordered"),n.set(e+".LocatorCacheTimeout",""+this._locatorCacheTimeout),n.set(e+".InvocationTimeout",""+this.getInvocationTimeout()),null!==this._routerInfo)for(t=this._routerInfo.getRouter().__reference().toProperty(e+".Router").entries;null!==t;t=t.next)n.set(t.key,t.value);if(null!==this._locatorInfo)for(t=this._locatorInfo.getLocator().__reference().toProperty(e+".Locator").entries;null!==t;t=t.next)n.set(t.key,t.value);return n},hashCode:function(){return this._hashInitialized||(R.prototype.hashCode.call(this),this._hashValue=r.addString(this._hashValue,this._adapterId)),this._hashValue},equals:function(t){return this===t||t instanceof I&&(!!R.prototype.equals.call(this,t)&&(!!(null===this._locatorInfo?null===t._locatorInfo:this._locatorInfo.equals(t._locatorInfo))&&(!!(null===this._routerInfo?null===t._routerInfo:this._routerInfo.equals(t._routerInfo))&&(this._cacheConnection===t._cacheConnection&&(this._preferSecure===t._preferSecure&&(this._endpointSelection===t._endpointSelection&&(this._locatorCacheTimeout===t._locatorCacheTimeout&&(this._connectionId===t._connectionId&&(this._overrideTimeout===t._overrideTimeout&&((!this._overrideTimeout||this._timeout===t._timeout)&&(!!e.equals(this._endpoints,t._endpoints,(function(e,t){return e.equals(t)}))&&this._adapterId===t._adapterId)))))))))))},getRequestHandler:function(e){return this._instance.requestHandlerFactory().getRequestHandler(this,e)},getBatchRequestQueue:function(){return new n(this._instance,this._mode===a.ModeBatchDatagram)},getConnection:function(){var e=new s;if(null!==this._routerInfo){var t=this;this._routerInfo.getClientEndpoints().then((function(n){n.length>0?(t.applyOverrides(n),t.createConnection(n).then((function(t,n){e.succeed(t,n)}),(function(t){e.fail(t)}))):t.getConnectionNoRouterInfo(e)})).exception((function(t){e.fail(t)}))}else this.getConnectionNoRouterInfo(e);return e},getConnectionNoRouterInfo:function(e){if(this._endpoints.length>0)this.createConnection(this._endpoints).then((function(t,n){e.succeed(t,n)})).exception((function(t){e.fail(t)}));else{var n=this;null!==this._locatorInfo?this._locatorInfo.getEndpoints(this,null,this._locatorCacheTimeout).then((function(i,r){0!==i.length?(n.applyOverrides(i),n.createConnection(i).then((function(t,n){e.succeed(t,n)}),(function(i){if(i instanceof Ice.NoEndpointException)e.fail(i);else{if(t.assert(null!==n._locatorInfo),n.getLocatorInfo().clearCache(n),r){var o=n.getInstance().traceLevels();if(o.retry>=2){var s="connection to cached endpoints failed\nremoving endpoints from cache and trying one more time\n"+i.toString();n.getInstance().initializationData().logger.trace(o.retryCat,s)}return void n.getConnectionNoRouterInfo(e)}e.fail(i)}}))):e.fail(new Ice.NoEndpointException(n.toString()))})).exception((function(t){e.fail(t)})):e.fail(new Ice.NoEndpointException(this.toString()))}},clone:function(){var e=new I(this.getInstance(),this.getCommunicator(),this.getIdentity(),this.getFacet(),this.getMode(),this.getSecure(),this.getProtocol(),this.getEncoding(),this._endpoints,this._adapterId,this._locatorInfo,this._routerInfo,this._cacheConnection,this._preferSecure,this._endpointSelection,this._locatorCacheTimeout,this._invocationTimeout);return this.copyMembers(e),e},copyMembers:function(e){R.prototype.copyMembers.call(this,e),e._overrideTimeout=this._overrideTimeout,e._timeout=this._timeout,e._connectionId=this._connectionId},applyOverrides:function(e){for(var t=0;t<e.length;++t)e[t]=e[t].changeConnectionId(this._connectionId),this._overrideCompress&&(e[t]=e[t].changeCompress(this._compress)),this._overrideTimeout&&(e[t]=e[t].changeTimeout(this._timeout))},filterEndpoints:function(n){for(var i=[],r=0;r<n.length;++r)n[r]instanceof o||!n[r].connectable()||i.push(n[r]);switch(this.getMode()){case a.ModeTwoway:case a.ModeOneway:case a.ModeBatchOneway:i=e.filter(i,(function(e,t,n){return!e.datagram()}));break;case a.ModeDatagram:case a.ModeBatchDatagram:i=e.filter(i,(function(e,t,n){return e.datagram()}))}switch(this.getEndpointSelection()){case d.Random:e.shuffle(i);break;case d.Ordered:break;default:t.assert(!1)}var s=this.getInstance().defaultsAndOverrides();if(s.overrideSecure?s.overrideSecureValue:this.getSecure())i=e.filter(i,(function(e,t,n){return e.secure()}));else{var c=this.getPreferSecure();i.sort((function(e,t){var n=e.secure(),i=t.secure();return n&&i||!n&&!i?0:!n&&i?c?1:-1:c?-1:1}))}return i},createConnection:function(e){var t=this.filterEndpoints(e);if(0===t.length)return(new s).fail(new Ice.NoEndpointException(this.toString()));var n,i=new s,r=this.getInstance().outgoingConnectionFactory();if(this.getCacheConnection()||1==t.length)n=new y(this,null,i),r.create(t,!1,this.getEndpointSelection()).then((function(e,t){n.setConnection(e,t)})).exception((function(e){n.setException(e)}));else{var o=[t[0]];n=new y(this,t,i),r.create(o,!0,this.getEndpointSelection()).then((function(e,t){n.setConnection(e,t)})).exception((function(e){n.setException(e)}))}return i}});Ice.RoutableReference=I;var y=C({__init__:function(e,t,n){this.ref=e,this.endpoints=t,this.promise=n,this.i=0,this.exception=null},setConnection:function(e,t){null!==this.ref.getRouterInfo()&&null!==this.ref.getRouterInfo().getAdapter()&&e.setAdapter(this.ref.getRouterInfo().getAdapter()),this.promise.succeed(e,t)},setException:function(e){if(null===this.exception&&(this.exception=e),null!==this.endpoints&&++this.i!==this.endpoints.length){var t=this.i!=this.endpoints.length-1,n=[this.endpoints[this.i]],i=this;this.ref.getInstance().outgoingConnectionFactory().create(n,t,this.ref.getEndpointSelection()).then((function(e,t){i.setConnection(e,t)})).exception((function(e){i.setException(e)}))}else this.promise.fail(this.exception)}})}(),function(){var e=Ice.Debug,t=Ice.BasicStream,n=Ice.EndpointParseException,i=Ice.OpaqueEndpointI,r=Ice.Protocol,o=Ice.StringUtil,s=Ice.Class({__init__:function(e){this._instance=e,this._factories=[]},add:function(t){for(var n=0;n<this._factories.length;++n)e.assert(this._factories[n].type()!=t.type());this._factories.push(t)},get:function(e){for(var t=0;t<this._factories.length;++t)if(this._factories[t].type()===e)return this._factories[t];return null},create:function(e,s){var a=e.trim();if(0===a.length)throw new n("value has no non-whitespace characters");var c=o.splitString(a," \t\n\r");if(0===c.length)throw new n("value has no non-whitespace characters");var l=c[0];c.splice(0,1),"default"===l&&(l=this._instance.defaultsAndOverrides().defaultProtocol);for(var d=0,u=this._factories.length;d<u;++d)if(this._factories[d].protocol()===l){var h=this._factories[d].create(c,s);if(c.length>0)throw new n("unrecognized argument `"+c[0]+"' in endpoint `"+e+"'");return h}if("opaque"===l){var f=new i;if(f.initWithOptions(c),c.length>0)throw new n("unrecognized argument `"+c[0]+"' in endpoint `"+e+"'");for(d=0,u=this._factories.length;d<u;++d)if(this._factories[d].type()==f.type()){var _=new t(this._instance,r.currentProtocolEncoding);_.writeShort(f.type()),f.streamWrite(_),_.pos=0,_.readShort(),_.startReadEncaps();var p=this._factories[d].read(_);return _.endReadEncaps(),p}return f}return null},read:function(e){for(var t,n=e.readShort(),r=0;r<this._factories.length;++r)if(this._factories[r].type()==n)return e.startReadEncaps(),t=this._factories[r].read(e),e.endReadEncaps(),t;return e.startReadEncaps(),(t=new i(n)).initWithStream(e),e.endReadEncaps(),t},destroy:function(){for(var e=0;e<this._factories.length;++e)this._factories[e].destroy();this._factories=[]}});Ice.EndpointFactoryManager=s}(),function(){var e=Ice.Debug,t=Ice.HashMap,n=Ice.ObjectPrx,i=Ice.StringUtil,r=Ice.Identity,o=Ice.Class({__init__:function(e){this._instance=e;var t=this._instance.initializationData().properties.getPropertyAsList("Ice.RetryIntervals");if(t.length>0){this._retryIntervals=[];for(var n=0;n<t.length;n++){var r;try{r=i.toInt(t[n])}catch(e){r=0}if(0===n&&-1===r)break;this._retryIntervals[n]=r>0?r:0}}else this._retryIntervals=[0]},stringToProxy:function(e){var t=this._instance.referenceFactory().createFromString(e,null);return this.referenceToProxy(t)},proxyToString:function(e){return null!==e?e.__reference().toString():""},propertyToProxy:function(e){var t=this._instance.initializationData().properties.getProperty(e),n=this._instance.referenceFactory().createFromString(t,e);return this.referenceToProxy(n)},proxyToProperty:function(e,n){return null!==e?e.__reference().toProperty(n):new t},streamToProxy:function(e,t){var n=new r;n.__read(e);var i=this._instance.referenceFactory().createFromStream(n,e);return this.referenceToProxy(i,t)},referenceToProxy:function(e,t){if(null!==e){var i=t?new t:new n;return i.__setup(e),i}return null},proxyToStream:function(e,t){if(null!==e){var n=e.__reference();n.getIdentity().__write(t),n.streamWrite(t)}else{new r("","").__write(t)}},checkRetryAfterException:function(t,n,i,r){var o,s=this._instance.traceLevels(),a=this._instance.initializationData().logger;if(n.getMode()===Ice.Reference.ModeBatchOneway||n.getMode()===Ice.Reference.ModeBatchDatagram)throw t;if(t instanceof Ice.ObjectNotExistException){var c=t;if(null!==n.getRouterInfo()&&"ice_add_proxy"===c.operation)return n.getRouterInfo().clearCache(n),s.retry>=1&&a.trace(s.retryCat,"retrying operation call to add proxy to router\n"+t.toString()),null!==i&&(i.value=0),r;if(!n.isIndirect())throw t;if(n.isWellKnown()){var l=n.getLocatorInfo();null!==l&&l.clearCache(n)}}else if(t instanceof Ice.RequestFailedException)throw t;if(t instanceof Ice.MarshalException)throw t;if(t instanceof Ice.CommunicatorDestroyedException||t instanceof Ice.ObjectAdapterDeactivatedException)throw t;if(t instanceof Ice.InvocationTimeoutException||t instanceof Ice.InvocationCanceledException)throw t;if(++r,e.assert(r>0),r===this._retryIntervals.length+1&&t instanceof Ice.CloseConnectionException)o=0;else{if(r>this._retryIntervals.length)throw s.retry>=1&&a.trace(s.retryCat,"cannot retry operation call because retry limit has been exceeded\n"+t.toString()),t;o=this._retryIntervals[r-1]}if(s.retry>=1){var d="retrying operation call";o>0&&(d+=" in "+o+"ms"),d+=" because of exception\n"+t.toString(),a.trace(s.retryCat,d)}return e.assert(null!==i),i.value=o,r}});Ice.ProxyFactory=o}(),function(){var e=Ice.FormatType,t=Ice.EndpointSelectionType,n=Ice.Protocol;Ice.DefaultsAndOverrides=function(i,r){this.defaultProtocol=i.getPropertyWithDefault("Ice.Default.Protocol",void 0!==Ice.TcpEndpointFactory?"tcp":"ws");var o=i.getProperty("Ice.Default.Host");if(this.defaultHost=o.length>0?o:null,o=i.getProperty("Ice.Default.SourceAddress"),this.defaultSourceAddress=o.length>0?o:null,(o=i.getProperty("Ice.Override.Timeout")).length>0?(this.overrideTimeout=!0,this.overrideTimeoutValue=i.getPropertyAsInt("Ice.Override.Timeout"),this.overrideTimeoutValue<1&&-1!==this.overrideTimeoutValue&&(this.overrideTimeoutValue=-1,r.warning("invalid value for Ice.Override.Timeout `"+i.getProperty("Ice.Override.Timeout")+"': defaulting to -1"))):(this.overrideTimeout=!1,this.overrideTimeoutValue=-1),(o=i.getProperty("Ice.Override.ConnectTimeout")).length>0?(this.overrideConnectTimeout=!0,this.overrideConnectTimeoutValue=i.getPropertyAsInt("Ice.Override.ConnectTimeout"),this.overrideConnectTimeoutValue<1&&-1!==this.overrideConnectTimeoutValue&&(this.overrideConnectTimeoutValue=-1,r.warning("invalid value for Ice.Override.ConnectTimeout `"+i.getProperty("Ice.Override.ConnectTimeout")+"': defaulting to -1"))):(this.overrideConnectTimeout=!1,this.overrideConnectTimeoutValue=-1),(o=i.getProperty("Ice.Override.CloseTimeout")).length>0?(this.overrideCloseTimeout=!0,this.overrideCloseTimeoutValue=i.getPropertyAsInt("Ice.Override.CloseTimeout"),this.overrideCloseTimeoutValue<1&&-1!==this.overrideCloseTimeoutValue&&(this.overrideCloseTimeoutValue=-1,r.warning("invalid value for Ice.Override.CloseTimeout `"+i.getProperty("Ice.Override.CloseTimeout")+"': defaulting to -1"))):(this.overrideCloseTimeout=!1,this.overrideCloseTimeoutValue=-1),this.overrideCompress=!1,this.overrideSecure=!1,"Random"===(o=i.getPropertyWithDefault("Ice.Default.EndpointSelection","Random")))this.defaultEndpointSelection=t.Random;else{if("Ordered"!==o){var s=new Ice.EndpointSelectionTypeParseException;throw s.str="illegal value `"+o+"'; expected `Random' or `Ordered'",s}this.defaultEndpointSelection=t.Ordered}this.defaultTimeout=i.getPropertyAsIntWithDefault("Ice.Default.Timeout",6e4),this.defaultTimeout<1&&-1!==this.defaultTimeout&&(this.defaultTimeout=6e4,r.warning("invalid value for Ice.Default.Timeout `"+i.getProperty("Ice.Default.Timeout")+"': defaulting to 60000")),this.defaultLocatorCacheTimeout=i.getPropertyAsIntWithDefault("Ice.Default.LocatorCacheTimeout",-1),this.defaultLocatorCacheTimeout<-1&&(this.defaultLocatorCacheTimeout=-1,r.warning("invalid value for Ice.Default.LocatorCacheTimeout `"+i.getProperty("Ice.Default.LocatorCacheTimeout")+"': defaulting to -1")),this.defaultInvocationTimeout=i.getPropertyAsIntWithDefault("Ice.Default.InvocationTimeout",-1),this.defaultInvocationTimeout<1&&-1!==this.defaultInvocationTimeout&&(this.defaultInvocationTimeout=-1,r.warning("invalid value for Ice.Default.InvocationTimeout `"+i.getProperty("Ice.Default.InvocationTimeout")+"': defaulting to -1")),this.defaultPreferSecure=i.getPropertyAsIntWithDefault("Ice.Default.PreferSecure",0)>0,o=i.getPropertyWithDefault("Ice.Default.EncodingVersion",Ice.encodingVersionToString(n.currentEncoding)),this.defaultEncoding=Ice.stringToEncodingVersion(o),n.checkSupportedEncoding(this.defaultEncoding);var a=i.getPropertyAsIntWithDefault("Ice.Default.SlicedFormat",0)>0;this.defaultFormat=a?e.SlicedFormat:e.CompactFormat}}(),function(){var e=Ice.StringUtil,t=Ice.Identity,n=Ice.IdentityParseException;Ice.stringToIdentity=function(i){for(var r=new t,o=-1,s=0;-1!==(s=i.indexOf("/",s));){for(var a=0;s-a>0&&"\\"==i.charAt(s-a-1);)a++;if(a%2==0){if(-1!=o)throw(c=new n).str="unescaped backslash in identity `"+i+"'",c;o=s}s++}if(-1==o){r.category="";try{r.name=e.unescapeString(i)}catch(e){throw(c=new n).str="invalid identity name `"+i+"': "+c.toString(),c}}else{try{r.category=e.unescapeString(i,0,o)}catch(e){throw(c=new n).str="invalid category in identity `"+i+"': "+c.toString(),c}if(o+1<i.length)try{r.name=e.unescapeString(i,o+1,i.length)}catch(e){var c;throw(c=new n).str="invalid name in identity `"+i+"': "+c.toString(),c}else r.name=""}return r},Ice.identityToString=function(t){return null===t.category||0===t.category.length?e.escapeString(t.name,"/"):e.escapeString(t.category,"/")+"/"+e.escapeString(t.name,"/")},Ice.proxyIdentityCompare=function(e,t){if(e===t)return 0;if(null===e&&null!==t)return-1;if(null!==e&&null===t)return 1;var n,i=e.ice_getIdentity(),r=t.ice_getIdentity();return 0!==(n=i.name.localeCompare(r.name))?n:i.category.localeCompare(r.category)},Ice.proxyIdentityAndFacetCompare=function(e,t){if(e===t)return 0;if(null===e&&null!==t)return-1;if(null!==e&&null===t)return 1;var n,i=e.ice_getIdentity(),r=t.ice_getIdentity();if(0!==(n=i.name.localeCompare(r.name)))return n;if(0!==(n=i.category.localeCompare(r.category)))return n;var o=e.ice_getFacet(),s=t.ice_getFacet();return null===o&&null===s?0:null===o?-1:null===s?1:o.localeCompare(s)}}(),function(){Ice.ArrayUtil;var e=Ice.AsyncResultBase,t=Ice.ConnectionI,n=(Ice.ConnectionReaper,Ice.Debug),i=Ice.HashMap,r=Ice.Promise,o=(Ice.EndpointSelectionType,Ice.FactoryACMMonitor),s=Ice.Class,a=s({__init__:function(e,t){this._communicator=e,this._instance=t,this._destroyed=!1,this._monitor=new o(this._instance,this._instance.clientACM()),this._connectionsByEndpoint=new c,this._pending=new i(i.compareEquals),this._pendingConnectCount=0,this._waitPromise=null},destroy:function(){this._destroyed||(this._connectionsByEndpoint.forEach((function(e){e.destroy(t.CommunicatorDestroyed)})),this._destroyed=!0,this._communicator=null,this.checkFinished())},waitUntilFinished:function(){return this._waitPromise=new r,this.checkFinished(),this._waitPromise},create:function(e,t,i){n.assert(e.length>0);var o=this.applyOverrides(e);try{var s={value:!1},a=this.findConnectionByEndpoint(o,s);if(null!==a)return(new r).succeed(a,s.value)}catch(e){return(new r).fail(e)}return new l(this,o,t,i).start()},setRouterInfo:function(e){var t=this;return Ice.Promise.try2((function(){if(t._destroyed)throw new Ice.CommunicatorDestroyedException;return e.getClientEndpoints()})).then((function(n){for(var i=e.getAdapter(),r=t._instance.defaultsAndOverrides(),o=0;o<n.length;++o){var s=n[o];r.overrideTimeout&&(s=s.changeTimeout(r.overrideTimeoutValue)),s=s.changeCompress(!1);for(var a=0;a<t._connectionsByEndpoint.length;++a){var c=t._connectionsByEndpoint[a];c.endpoint().equals(s)&&c.setAdapter(i)}}}))},removeAdapter:function(e){this._destroyed||this._connectionsByEndpoint.forEach((function(t){t.getAdapter()===e&&t.setAdapter(null)}))},flushAsyncBatchRequests:function(){var t=new e(this._communicator,"flushBatchRequests",null,null,null);if(!this._destroyed)return r.all(this._connectionsByEndpoint.map((function(e){if(e.isActiveOrHolding())return e.flushBatchRequests().exception((function(e){if(!(e instanceof Ice.LocalException))throw e}))}))).then((function(){t.succeed(t)}),(function(e){t.fail(e,t)})),t;t.succeed()},applyOverrides:function(e){for(var t=this._instance.defaultsAndOverrides(),n=[],i=0;i<e.length;++i){var r=e[i];t.overrideTimeout?n.push(r.changeTimeout(t.overrideTimeoutValue)):n.push(r)}return n},findConnectionByEndpoint:function(e,t){if(this._destroyed)throw new Ice.CommunicatorDestroyedException;var i=this._instance.defaultsAndOverrides();n.assert(e.length>0);for(var r=0;r<e.length;++r){var o=e[r];if(!this._pending.has(o)){var s=this._connectionsByEndpoint.get(o);if(void 0!==s)for(var a=0;a<s.length;++a)if(s[a].isActiveOrHolding())return i.overrideCompress?t.value=i.overrideCompressValue:t.value=o.compress(),s[a]}}return null},incPendingConnectCount:function(){if(this._destroyed)throw new Ice.CommunicatorDestroyedException;++this._pendingConnectCount},decPendingConnectCount:function(){--this._pendingConnectCount,n.assert(this._pendingConnectCount>=0),this._destroyed&&0===this._pendingConnectCount&&this.checkFinished()},getConnection:function(e,t,n){if(this._destroyed)throw new Ice.CommunicatorDestroyedException;var i=this._monitor.swapReapedConnections();if(null!==i)for(var r=0;r<i.length;++r){var o=i[r];this._connectionsByEndpoint.removeConnection(o.endpoint(),o),this._connectionsByEndpoint.removeConnection(o.endpoint().changeCompress(!0),o)}for(;;){if(this._destroyed)throw new Ice.CommunicatorDestroyedException;var s=this.findConnectionByEndpoint(e,n);if(null!==s)return s;if(this.addToPending(t,e))return null;break}return t.nextEndpoint(),null},createConnection:function(e,i){n.assert(this._pending.has(i)&&null!==e);var r=null;try{if(this._destroyed)throw new Ice.CommunicatorDestroyedException;r=new t(this._communicator,this._instance,this._monitor,e,i.changeCompress(!1),!1,null)}catch(t){if(t instanceof Ice.LocalException)try{e.close()}catch(e){}throw t}return this._connectionsByEndpoint.set(r.endpoint(),r),this._connectionsByEndpoint.set(r.endpoint().changeCompress(!0),r),r},finishGetConnection:function(e,t,n,i){var r,o,s=[];null!==i&&s.push(i);var a,c=[];for(r=0;r<e.length;++r){var l=e[r],d=this._pending.get(l);if(void 0!==d){this._pending.del(l);for(var u=0;u<d.length;++u)(o=d[u]).hasEndpoint(t)?-1===s.indexOf(o)&&s.push(o):-1===c.indexOf(o)&&c.push(o)}}for(r=0;r<s.length;++r){(o=s[r]).removeFromPending();var h=c.indexOf(o);-1!==h&&c.splice(h,1)}for(r=0;r<c.length;++r)(o=c[r]).removeFromPending();var f=this._instance.defaultsAndOverrides();for(a=f.overrideCompress?f.overrideCompressValue:t.compress(),r=0;r<c.length;++r)(o=c[r]).getConnection();for(r=0;r<s.length;++r)(o=s[r]).setConnection(n,a);this.checkFinished()},finishGetConnectionEx:function(e,t,i){var r,o,s=[];null!==i&&s.push(i);var a=[];for(r=0;r<e.length;++r){var c=e[r],l=this._pending.get(c);if(void 0!==l){this._pending.del(c);for(var d=0;d<l.length;++d)(o=l[d]).removeEndpoints(e)?-1===s.indexOf(o)&&s.push(o):-1===a.indexOf(o)&&a.push(o)}}for(r=0;r<a.length;++r)o=a[r],n.assert(-1===s.indexOf(o)),o.removeFromPending();for(this.checkFinished(),r=0;r<a.length;++r)(o=a[r]).getConnection();for(r=0;r<s.length;++r)(o=s[r]).setException(t)},addToPending:function(e,t){var n,i,r=!1;if(null!==e)for(i=0;i<t.length;++i){n=t[i];var o=this._pending.get(n);void 0!==o&&(r=!0,-1===o.indexOf(e)&&o.push(e))}if(r)return!0;for(i=0;i<t.length;++i)n=t[i],this._pending.has(n)||this._pending.set(n,[]);return!1},removeFromPending:function(e,t){for(var n=0;n<t.length;++n){var i=t[n],r=this._pending.get(i);if(void 0!==r){var o=r.indexOf(e);-1!==o&&r.splice(o,1)}}},handleConnectionException:function(e,t){var n=this._instance.traceLevels();if(n.retry>=2){var i=[];i.push("connection to endpoint failed"),e instanceof Ice.CommunicatorDestroyedException?i.push("\n"):t?i.push(", trying next endpoint\n"):i.push(" and no more endpoints to try\n"),i.push(e.toString()),this._instance.initializationData().logger.trace(n.retryCat,i.join(""))}},handleException:function(e,t){var n=this._instance.traceLevels();if(n.retry>=2){var i=[];i.push("couldn't resolve endpoint host"),e instanceof Ice.CommunicatorDestroyedException?i.push("\n"):t?i.push(", trying next endpoint\n"):i.push(" and no more endpoints to try\n"),i.push(e.toString()),this._instance.initializationData().logger.trace(n.retryCat,i.join(""))}},checkFinished:function(){if(!(!this._waitPromise||!this._destroyed||this._pending.size>0||this._pendingConnectCount>0)){var e=this;r.all(e._connectionsByEndpoint.map((function(e){return e.waitUntilFinished().exception((function(e){n.assert(!1)}))}))).then((function(){var t=e._monitor.swapReapedConnections();if(null!==t){for(var i=[],r=e._connectionsByEndpoint.entries;null!==r;r=r.next)for(var o=r.value,s=0;s<o.length;++s)-1===i.indexOf(o[s])&&i.push(o[s]);n.assert(t.length===i.length),e._connectionsByEndpoint.clear()}else n.assert(0===e._connectionsByEndpoint.size);n.assert(null!==e._waitPromise),e._waitPromise.succeed(),e._monitor.destroy()}))}}});Ice.OutgoingConnectionFactory=a;var c=s(i,{__init__:function(e){i.call(this,e||i.compareEquals)},set:function(e,r){var o=this.get(e);void 0===o&&(o=[],i.prototype.set.call(this,e,o)),n.assert(r instanceof t),o.push(r)},removeConnection:function(e,t){var i=this.get(e);n.assert(null!==i);var r=i.indexOf(t);n.assert(-1!==r),i.splice(r,1),0===i.length&&this.del(e)},map:function(e){var t=[];return this.forEach((function(n){t.push(e(n))})),t},forEach:function(e){for(var t=this._head;null!==t;t=t._next)for(var n=0;n<t.value.length;++n)e(t.value[n])}}),l=s({__init__:function(e,t,n,i){this._factory=e,this._endpoints=t,this._hasMore=n,this._selType=i,this._promise=new r,this._index=0,this._current=null},connectionStartCompleted:function(e){e.activate(),this._factory.finishGetConnection(this._endpoints,this._current,e,this)},connectionStartFailed:function(e,t){n.assert(null!==this._current),t instanceof Ice.LocalException?(this._factory.handleConnectionException(t,this._hasMore||this._index<this._endpoints.length),t instanceof Ice.CommunicatorDestroyedException?this._factory.finishGetConnectionEx(this._endpoints,t,this):this._index<this._endpoints.length?this.nextEndpoint():this._factory.finishGetConnectionEx(this._endpoints,t,this)):this._factory.finishGetConnectionEx(this._endpoints,t,this)},setConnection:function(e,t){this._promise.succeed(e,t),this._factory.decPendingConnectCount()},setException:function(e){this._promise.fail(e),this._factory.decPendingConnectCount()},hasEndpoint:function(e){return-1!==this.findEndpoint(e)},findEndpoint:function(e){for(var t=0;t<this._endpoints.length;++t)if(e.equals(this._endpoints[t]))return t;return-1},removeEndpoints:function(e){for(var t=0;t<e.length;++t){var n=this.findEndpoint(e[t]);-1!==n&&this._endpoints.splice(n,1)}return this._index=0,0===this._endpoints.length},removeFromPending:function(){this._factory.removeFromPending(this,this._endpoints)},start:function(){try{this._factory.incPendingConnectCount()}catch(e){return void this._promise.fail(e)}return this.getConnection(),this._promise},getConnection:function(){try{var e={value:!1},t=this._factory.getConnection(this._endpoints,this,e);if(null===t)return;this._promise.succeed(t,e.value),this._factory.decPendingConnectCount()}catch(e){this._promise.fail(e),this._factory.decPendingConnectCount()}},nextEndpoint:function(){var e=null,t=this._factory._instance.traceLevels();try{if(n.assert(this._index<this._endpoints.length),this._current=this._endpoints[this._index++],t.network>=2)(r=[]).push("trying to establish "),r.push(this._current.protocol()),r.push(" connection to "),r.push(this._current.toConnectorString()),this._factory._instance.initializationData().logger.trace(t.networkCat,r.join(""));e=this._factory.createConnection(this._current.connect(),this._current);var i=this;e.start().then((function(){i.connectionStartCompleted(e)}),(function(t){i.connectionStartFailed(e,t)}))}catch(n){var r;if(t.network>=2)(r=[]).push("failed to establish "),r.push(this._current.protocol()),r.push(" connection to "),r.push(this._current.toString()),r.push("\n"),r.push(n.toString()),this._factory._instance.initializationData().logger.trace(t.networkCat,r.join(""));this.connectionStartFailed(e,n)}}})}(),function(){var e=Ice.Debug,t=Ice.HashMap,n=Ice.Promise,i=Ice.Protocol,r=Ice.LocatorRegisterPrx,o=Ice.Class,s=o({__init__:function(e,n,i){this._locator=e,this._locatorRegistry=null,this._table=n,this._background=i,this._adapterRequests=new t,this._objectRequests=new t(t.compareEquals)},destroy:function(){this._locatorRegistry=null,this._table.clear()},equals:function(e){return this===e||e instanceof s&&this._locator.equals(e._locator)},hashCode:function(){return this._locator.hashCode()},getLocator:function(){return this._locator},getLocatorRegistry:function(){if(null!==this._locatorRegistry)return(new n).succeed(this._locatorRegistry);var e=this;return this._locator.getRegistry().then((function(t){return e._locatorRegistry=r.uncheckedCast(t.ice_locator(null).ice_endpointSelection(Ice.EndpointSelectionType.Ordered)),e._locatorRegistry}))},getEndpoints:function(t,i,r,o){var s=o||new n;e.assert(t.isIndirect());var a=null,c={value:!1};if(t.isWellKnown()){var l=this._table.getObjectReference(t.getIdentity(),r,c);if(!c.value){if(!this._background||null===l)return this.getObjectRequest(t).addCallback(t,null,r,s),s;this.getObjectRequest(t).addCallback(t,null,r,null)}if(l.isIndirect()){if(!l.isWellKnown())return this.getEndpoints(l,t,r,s),s}else a=l.getEndpoints()}else if(a=this._table.getAdapterEndpoints(t.getAdapterId(),r,c),!c.value){if(!this._background||null===a)return this.getAdapterRequest(t).addCallback(t,i,r,s),s;this.getAdapterRequest(t).addCallback(t,i,r,null)}return e.assert(null!==a),t.getInstance().traceLevels().location>=1&&this.getEndpointsTrace(t,a,!0),s.succeed(a,!0),s},clearCache:function(t){if(e.assert(t.isIndirect()),t.isWellKnown()){var n=this._table.removeObjectReference(t.getIdentity());null!==n&&(n.isIndirect()?n.isWellKnown()||this.clearCache(n):t.getInstance().traceLevels().location>=2&&this.trace("removed endpoints from locator table",t,n.getEndpoints()))}else{var i=this._table.removeAdapterEndpoints(t.getAdapterId());null!==i&&t.getInstance().traceLevels().location>=2&&this.trace("removed endpoints from locator table\n",t,i)}},trace:function(t,n,i){e.assert(n.isIndirect());var r=[];r.push(t),r.push("\n"),n.isWellKnown()?(r.push("object = "),r.push(n.getInstance().identityToString(n.getIdentity())),r.push("\n")):(r.push("adapter = "),r.push(n.getAdapterId()),r.push("\n")),r.push("endpoints = ");for(var o=0;o<i.length;o++)r.push(i[o].toString()),o+1<i.length&&r.push(":");n.getInstance().initializationData().logger.trace(n.getInstance().traceLevels().locationCat,r.join(""))},getEndpointsException:function(t,n){e.assert(t.isIndirect());var i,r,o=t.getInstance();try{throw n}catch(n){if(n instanceof Ice.AdapterNotFoundException)throw o.traceLevels().location>=1&&((i=[]).push("adapter not found\n"),i.push("adapter = "),i.push(t.getAdapterId()),o.initializationData().logger.trace(o.traceLevels().locationCat,i.join(""))),(r=new Ice.NotRegisteredException).kindOfObject="object adapter",r.id=t.getAdapterId(),r;if(n instanceof Ice.ObjectNotFoundException)throw o.traceLevels().location>=1&&((i=[]).push("object not found\n"),i.push("object = "),i.push(o.identityToString(t.getIdentity())),o.initializationData().logger.trace(o.traceLevels().locationCat,i.join(""))),(r=new Ice.NotRegisteredException).kindOfObject="object",r.id=o.identityToString(t.getIdentity()),r;if(n instanceof Ice.NotRegisteredException)throw n;if(n instanceof Ice.LocalException)throw o.traceLevels().location>=1&&((i=[]).push("couldn't contact the locator to retrieve adapter endpoints\n"),t.getAdapterId().length>0?(i.push("adapter = "),i.push(t.getAdapterId()),i.push("\n")):(i.push("object = "),i.push(o.identityToString(t.getIdentity())),i.push("\n")),i.push("reason = "+n.toString()),o.initializationData().logger.trace(o.traceLevels().locationCat,i.join(""))),n;e.assert(!1)}},getEndpointsTrace:function(e,t,n){if(null!==t&&t.length>0)n?this.trace("found endpoints in locator table",e,t):this.trace("retrieved endpoints from locator, adding to locator table",e,t);else{var i=e.getInstance(),r=[];r.push("no endpoints configured for "),e.getAdapterId().length>0?(r.push("adapter\n"),r.push("adapter = "),r.push(e.getAdapterId()),r.push("\n")):(r.push("object\n"),r.push("object = "),r.push(i.identityToString(e.getIdentity())),r.push("\n")),i.initializationData().logger.trace(i.traceLevels().locationCat,r.join(""))}},getAdapterRequest:function(e){if(e.getInstance().traceLevels().location>=1){var t=e.getInstance(),n=[];n.push("searching for adapter by id\n"),n.push("adapter = "),n.push(e.getAdapterId()),t.initializationData().logger.trace(t.traceLevels().locationCat,n.join(""))}var i=this._adapterRequests.get(e.getAdapterId());return void 0!==i||(i=new d(this,e),this._adapterRequests.set(e.getAdapterId(),i)),i},getObjectRequest:function(e){if(e.getInstance().traceLevels().location>=1){var t=e.getInstance(),n=[];n.push("searching for object by id\n"),n.push("object = "),n.push(t.identityToString(e.getIdentity())),t.initializationData().logger.trace(t.traceLevels().locationCat,n.join(""))}var i=this._objectRequests.get(e.getIdentity());return void 0!==i||(i=new l(this,e),this._objectRequests.set(e.getIdentity(),i)),i},finishRequest:function(t,n,i,r){if(null===i||i.__reference().isIndirect())for(var o=0;o<n.length;++o)this._table.removeObjectReference(n[o].getIdentity());t.isWellKnown()?(null===i||i.__reference().isWellKnown()?r&&this._table.removeObjectReference(t.getIdentity()):this._table.addObjectReference(t.getIdentity(),i.__reference()),e.assert(this._objectRequests.has(t.getIdentity())),this._objectRequests.del(t.getIdentity())):(null===i||i.__reference().isIndirect()?r&&this._table.removeAdapterEndpoints(t.getAdapterId()):this._table.addAdapterEndpoints(t.getAdapterId(),i.__reference().getEndpoints()),e.assert(this._adapterRequests.has(t.getAdapterId())),this._adapterRequests.del(t.getAdapterId()))}});Ice.LocatorInfo=s;var a=o({__init__:function(e,t,n){this._ref=e,this._ttl=t,this._promise=n},response:function(e,t){var n=null;if(null!==t){var r=t.__reference();if(this._ref.isWellKnown()&&!i.isSupported(this._ref.getEncoding(),r.getEncoding()));else if(r.isIndirect()){if(this._ref.isWellKnown()&&!r.isWellKnown()){var o=this;return void e.getEndpoints(r,this._ref,this._ttl).then((function(e,t){null!==o._promise&&o._promise.succeed(e,t)}),(function(e){null!==o._promise&&o._promise.fail(e)}))}}else n=r.getEndpoints()}this._ref.getInstance().traceLevels().location>=1&&e.getEndpointsTrace(this._ref,n,!1),null!==this._promise&&this._promise.succeed(null===n?[]:n,!1)},exception:function(e,t){try{e.getEndpointsException(this._ref,t)}catch(e){null!==this._promise&&this._promise.fail(e)}}}),c=o({__init__:function(e,t){this._locatorInfo=e,this._ref=t,this._callbacks=[],this._wellKnownRefs=[],this._sent=!1,this._response=!1,this._proxy=null,this._exception=null},addCallback:function(e,t,n,i){var r=new a(e,n,i);this._response?r.response(this._locatorInfo,this._proxy):null!==this._exception?r.exception(this._locatorInfo,this._exception):(this._callbacks.push(r),null!==t&&this._wellKnownRefs.push(t),this._sent||(this._sent=!0,this.send()))},response:function(e){this._locatorInfo.finishRequest(this._ref,this._wellKnownRefs,e,!1),this._response=!0,this._proxy=e;for(var t=0;t<this._callbacks.length;++t)this._callbacks[t].response(this._locatorInfo,e)},exception:function(e){this._locatorInfo.finishRequest(this._ref,this._wellKnownRefs,null,e instanceof Ice.UserException),this._exception=e;for(var t=0;t<this._callbacks.length;++t)this._callbacks[t].exception(this._locatorInfo,e)}}),l=o(c,{__init__:function(t,n){c.call(this,t,n),e.assert(n.isWellKnown())},send:function(){try{var e=this;this._locatorInfo.getLocator().findObjectById(this._ref.getIdentity()).then((function(t){e.response(t)}),(function(t){e.exception(t)}))}catch(e){this.exception(e)}}}),d=o(c,{__init__:function(t,n){c.call(this,t,n),e.assert(n.isIndirect())},send:function(){try{var e=this;this._locatorInfo.getLocator().findAdapterById(this._ref.getAdapterId()).then((function(t){e.response(t)}),(function(t){e.exception(t)}))}catch(e){this.exception(e)}}})}(),function(){var e=Ice.AsyncResultBase,t=Ice.Debug,n=Ice.Identity,i=(Ice.Promise,Ice.PropertyNames),r=Ice.ServantManager,o=(Ice.StringUtil,["ACM","AdapterId","Endpoints","Locator","Locator.EncodingVersion","Locator.EndpointSelection","Locator.ConnectionCached","Locator.PreferSecure","Locator.CollocationOptimized","Locator.Router","MessageSizeMax","PublishedEndpoints","ReplicaGroupId","Router","Router.EncodingVersion","Router.EndpointSelection","Router.ConnectionCached","Router.PreferSecure","Router.CollocationOptimized","Router.Locator","Router.Locator.EndpointSelection","Router.Locator.ConnectionCached","Router.Locator.PreferSecure","Router.Locator.CollocationOptimized","Router.Locator.LocatorCacheTimeout","Router.Locator.InvocationTimeout","Router.LocatorCacheTimeout","Router.InvocationTimeout","ProxyOptions","ThreadPool.Size","ThreadPool.SizeMax","ThreadPool.SizeWarn","ThreadPool.StackSize","ThreadPool.Serialize"]),s=Ice.Class({__init__:function(e,n,i,o,s,a,c){if(this._instance=e,this._communicator=n,this._objectAdapterFactory=i,this._servantManager=new r(e,o),this._name=o,this._routerEndpoints=[],this._routerInfo=null,this._state=0,this._noConfig=a,this._noConfig)return this._reference=this._instance.referenceFactory().createFromString("dummy -t",""),this._messageSizeMax=this._instance.messageSizeMax(),void c.succeed(this,c);var l=this._instance.initializationData().properties,d=[],u=this.filterProperties(d);if(0!==d.length&&l.getPropertyAsIntWithDefault("Ice.Warn.UnknownProperties",1)>0){for(var h=["found unknown properties for object adapter `"+o+"':"],f=0;f<d.length;++f)h.push("\n    "+d[f]);this._instance.initializationData().logger.warning(h.join(""))}if(null===s&&u)throw(p=new Ice.InitializationException).reason="object adapter `"+this._name+"' requires configuration",p;var _=l.getPropertyWithDefault(this._name+".ProxyOptions","-t");try{this._reference=this._instance.referenceFactory().createFromString("dummy "+_,"")}catch(e){var p;if(e instanceof Ice.ProxyParseException)throw(p=new Ice.InitializationException).reason="invalid proxy options `"+_+"' for object adapter `"+o+"'",p;throw e}var C=this._instance.messageSizeMax()/1024,g=l.getPropertyAsIntWithDefault(this._name+".MessageSizeMax",C);this._messageSizeMax=g<1||g>2147483647/1024?2147483647:1024*g;try{if(null===s&&(s=Ice.RouterPrx.uncheckedCast(this._instance.proxyFactory().propertyToProxy(this._name+".Router"))),null!==s){if(this._routerInfo=this._instance.routerManager().find(s),t.assert(null!==this._routerInfo),null!==this._routerInfo.getAdapter())throw new Ice.AlreadyRegisteredException("object adapter with router",this._instance.identityToString(s.ice_getIdentity()));var m=this;this._routerInfo.getServerEndpoints().then((function(e){var t;for(t=0;t<e.length;++t)m._routerEndpoints.push(e[t]);for(m._routerEndpoints.sort((function(e,t){return e.compareTo(t)})),t=0;t<m._routerEndpoints.length-1;){var n=m._routerEndpoints[t],i=m._routerEndpoints[t+1];n.equals(i)?m._routerEndpoints.splice(t,1):++t}return m._routerInfo.setAdapter(m),m._instance.outgoingConnectionFactory().setRouterInfo(m._routerInfo)})).then((function(){c.succeed(m,c)}),(function(e){c.fail(e,c)}))}else{if(l.getProperty(this._name+".Endpoints").length>0)throw new Ice.FeatureNotSupportedException("object adapter endpoints not supported");c.succeed(this,c)}}catch(p){throw this.destroy(),p}},getName:function(){return this._noConfig?"":this._name},getCommunicator:function(){return this._communicator},activate:function(){},hold:function(){this.checkForDeactivation()},waitForHold:function(){var t=new e(this._communicator,"waitForHold",null,null,this);return this.checkForDeactivation(t)?t:t.succeed(t)},deactivate:function(){var t=new e(this._communicator,"deactivate",null,null,this);return this._state<5&&(this._state=5,this._instance.outgoingConnectionFactory().removeAdapter(this)),t.succeed(t)},waitForDeactivate:function(){var t=new e(this._communicator,"deactivate",null,null,this);return t.succeed(t)},isDeactivated:function(){return this._state>=5},destroy:function(){var t=new e(this._communicator,"destroy",null,null,this),n=this,i=function(){return n._state<6&&(n._state=6,n._servantManager.destroy(),n._objectAdapterFactory.removeObjectAdapter(n)),t.succeed(t)};return this._state<5?this.deactivate().then(i):i()},add:function(e,t){return this.addFacet(e,t,"")},addFacet:function(e,t,n){this.checkForDeactivation(),this.checkIdentity(t),this.checkServant(e);var i=t.clone();return this._servantManager.addServant(e,i,n),this.newProxy(i,n)},addWithUUID:function(e){return this.addFacetWithUUID(e,"")},addFacetWithUUID:function(e,t){return this.addFacet(e,new n(Ice.generateUUID(),""),t)},addDefaultServant:function(e,t){this.checkServant(e),this.checkForDeactivation(),this._servantManager.addDefaultServant(e,t)},remove:function(e){return this.removeFacet(e,"")},removeFacet:function(e,t){return this.checkForDeactivation(),this.checkIdentity(e),this._servantManager.removeServant(e,t)},removeAllFacets:function(e){return this.checkForDeactivation(),this.checkIdentity(e),this._servantManager.removeAllFacets(e)},removeDefaultServant:function(e){return this.checkForDeactivation(),this._servantManager.removeDefaultServant(e)},find:function(e){return this.findFacet(e,"")},findFacet:function(e,t){return this.checkForDeactivation(),this.checkIdentity(e),this._servantManager.findServant(e,t)},findAllFacets:function(e){return this.checkForDeactivation(),this.checkIdentity(e),this._servantManager.findAllFacets(e)},findByProxy:function(e){this.checkForDeactivation();var t=e.__reference();return this.findFacet(t.getIdentity(),t.getFacet())},findDefaultServant:function(e){return this.checkForDeactivation(),this._servantManager.findDefaultServant(e)},addServantLocator:function(e,t){this.checkForDeactivation(),this._servantManager.addServantLocator(e,t)},removeServantLocator:function(e){return this.checkForDeactivation(),this._servantManager.removeServantLocator(e)},findServantLocator:function(e){return this.checkForDeactivation(),this._servantManager.findServantLocator(e)},createProxy:function(e){return this.checkForDeactivation(),this.checkIdentity(e),this.newProxy(e,"")},createDirectProxy:function(e){return this.createProxy(e)},createIndirectProxy:function(e){throw new Ice.FeatureNotSupportedException("setLocator not supported")},setLocator:function(e){throw new Ice.FeatureNotSupportedException("setLocator not supported")},refreshPublishedEndpoints:function(){throw new Ice.FeatureNotSupportedException("refreshPublishedEndpoints not supported")},getEndpoints:function(){return[]},getPublishedEndpoints:function(){return[]},getServantManager:function(){return this._servantManager},messageSizeMax:function(){return this._messageSizeMax},newProxy:function(e,t){for(var n=[],i=0;i<this._routerEndpoints.length;++i)n.push(this._routerEndpoints[i]);var r=this._instance.referenceFactory().create(e,t,this._reference,n);return this._instance.proxyFactory().referenceToProxy(r)},checkForDeactivation:function(e){if(this._state>=5){var t=new Ice.ObjectAdapterDeactivatedException;if(t.name=this.getName(),void 0!==e)return e.fail(t,e),!0;throw t}return!1},checkIdentity:function(e){if(void 0===e.name||null===e.name||0===e.name.length)throw new Ice.IllegalIdentityException(e);void 0!==e.category&&null!==e.category||(e.category="")},checkServant:function(e){if(null==e)throw new Ice.IllegalServantException("cannot add null servant to Object Adapter")},filterProperties:function(e){var t,n=!0,r=this._name+".";for(t=0;t<i.clPropNames.length;++t)if(0===r.indexOf(i.clPropNames[t]+".")){n=!1;break}for(var s=!0,a=this._instance.initializationData().properties.getPropertiesForPrefix(r).entries;null!==a;a=a.next){var c=!1;for(t=0;t<o.length;++t)if(a.key===r+o[t]){s=!1,c=!0;break}!c&&n&&e.push(a.key)}return s}});Ice.ObjectAdapterI=s}(),function(){var e=Ice.HashMap,t=Ice.LocatorInfo,n=Ice.LocatorTable,i=Ice.LocatorPrx,r=Ice.Class({__init__:function(t){this._background=t.getPropertyAsInt("Ice.BackgroundLocatorCacheUpdates")>0,this._table=new e(e.compareEquals),this._locatorTables=new e(e.compareEquals)},destroy:function(){for(var e=this._table.entries;null!==e;e=e.next)e.value.destroy();this._table.clear(),this._locatorTables.clear()},find:function(e){if(null===e)return null;var r=i.uncheckedCast(e.ice_locator(null)),o=this._table.get(r);if(void 0===o){var s=this._locatorTables.get(r.ice_getIdentity());void 0===s&&(s=new n,this._locatorTables.set(r.ice_getIdentity(),s)),o=new t(r,s,this._background),this._table.set(r,o)}return o}});Ice.LocatorManager=r}(),function(){Ice.AsyncResultBase;var e=Ice.ObjectAdapterI,t=Ice.Promise,n=Ice.Class({__init__:function(e,n){this._instance=e,this._communicator=n,this._adapters=[],this._adapterNamesInUse=[],this._shutdownPromise=new t},shutdown:function(){return null===this._instance||(this._instance=null,this._communicator=null,this._shutdownPromise=t.all(this._adapters.map((function(e){return e.deactivate()})))),this._shutdownPromise},waitForShutdown:function(){var e=this;return this._shutdownPromise.then((function(){return t.all(e._adapters.map((function(e){return e.waitForDeactivate()})))}))},isShutdown:function(){return null===this._instance},destroy:function(){var e=this;return this.waitForShutdown().then((function(){return t.all(e._adapters.map((function(e){return e.destroy()})))}))},createObjectAdapter:function(t,n,i){if(null===this._instance)throw new Ice.ObjectAdapterDeactivatedException;var r=null;try{if(0===t.length){var o=Ice.generateUUID();r=new e(this._instance,this._communicator,this,o,null,!0,i)}else{if(-1!==this._adapterNamesInUse.indexOf(t))throw new Ice.AlreadyRegisteredException("object adapter",t);r=new e(this._instance,this._communicator,this,t,n,!1,i),this._adapterNamesInUse.push(t)}this._adapters.push(r)}catch(e){i.fail(e,i)}},removeObjectAdapter:function(e){if(null!==this._instance){var t=this._adapters.indexOf(e);-1!==t&&this._adapters.splice(t,1),-1!==(t=this._adapterNamesInUse.indexOf(e.getName()))&&this._adapterNamesInUse.splice(t,1)}}});Ice.ObjectAdapterFactory=n}(),N.defineDictionary(IceMX,"StringIntDict","StringIntDictHelper","Ice.StringHelper","Ice.IntHelper",!1,void 0,void 0),IceMX.Metrics=N.defineObject((function(e,t,n,i,r){Ice.Object.call(this),this.id=void 0!==e?e:"",this.total=void 0!==t?t:new Ice.Long(0,0),this.current=void 0!==n?n:0,this.totalLifetime=void 0!==i?i:new Ice.Long(0,0),this.failures=void 0!==r?r:0}),Ice.Object,void 0,1,["::Ice::Object","::IceMX::Metrics"],-1,(function(e){e.writeString(this.id),e.writeLong(this.total),e.writeInt(this.current),e.writeLong(this.totalLifetime),e.writeInt(this.failures)}),(function(e){this.id=e.readString(),this.total=e.readLong(),this.current=e.readInt(),this.totalLifetime=e.readLong(),this.failures=e.readInt()}),!1),IceMX.MetricsPrx=N.defineProxy(Ice.ObjectPrx,IceMX.Metrics.ice_staticId,void 0),N.defineOperations(IceMX.Metrics,IceMX.MetricsPrx),IceMX.MetricsFailures=N.defineStruct((function(e,t){this.id=void 0!==e?e:"",this.failures=void 0!==t?t:null}),!1,(function(e){e.writeString(this.id),IceMX.StringIntDictHelper.write(e,this.failures)}),(function(e){this.id=e.readString(),this.failures=IceMX.StringIntDictHelper.read(e)}),2,!1),N.defineSequence(IceMX,"MetricsFailuresSeqHelper","IceMX.MetricsFailures",!1),N.defineSequence(IceMX,"MetricsMapHelper","Ice.ObjectHelper",!1,"IceMX.Metrics"),N.defineDictionary(IceMX,"MetricsView","MetricsViewHelper","Ice.StringHelper","IceMX.MetricsMapHelper",!1,void 0,void 0,Ice.ArrayUtil.equals),IceMX.UnknownMetricsView=N.defineUserException((function(e){Ice.UserException.call(this,e)}),Ice.UserException,"IceMX::UnknownMetricsView",void 0,void 0,!1,!1),IceMX.MetricsAdmin=N.defineObject(void 0,Ice.Object,void 0,1,["::Ice::Object","::IceMX::MetricsAdmin"],-1,void 0,void 0,!1),IceMX.MetricsAdminPrx=N.defineProxy(Ice.ObjectPrx,IceMX.MetricsAdmin.ice_staticId,void 0),N.defineOperations(IceMX.MetricsAdmin,IceMX.MetricsAdminPrx,{getMetricsViewNames:[,,,,2,["Ice.StringSeqHelper"],,[["Ice.StringSeqHelper"]],,,],enableMetricsView:[,,,,2,,[[7]],,[IceMX.UnknownMetricsView],,],disableMetricsView:[,,,,2,,[[7]],,[IceMX.UnknownMetricsView],,],getMetricsView:[,,,,2,["IceMX.MetricsViewHelper"],[[7]],[[4]],[IceMX.UnknownMetricsView],,!0],getMapMetricsFailures:[,,,,2,["IceMX.MetricsFailuresSeqHelper"],[[7],[7]],,[IceMX.UnknownMetricsView],,],getMetricsFailures:[,,,,2,[IceMX.MetricsFailures],[[7],[7],[7]],,[IceMX.UnknownMetricsView],,]}),IceMX.ThreadMetrics=N.defineObject((function(e,t,n,i,r,o,s,a){IceMX.Metrics.call(this,e,t,n,i,r),this.inUseForIO=void 0!==o?o:0,this.inUseForUser=void 0!==s?s:0,this.inUseForOther=void 0!==a?a:0}),IceMX.Metrics,void 0,2,["::Ice::Object","::IceMX::Metrics","::IceMX::ThreadMetrics"],-1,(function(e){e.writeInt(this.inUseForIO),e.writeInt(this.inUseForUser),e.writeInt(this.inUseForOther)}),(function(e){this.inUseForIO=e.readInt(),this.inUseForUser=e.readInt(),this.inUseForOther=e.readInt()}),!1),IceMX.ThreadMetricsPrx=N.defineProxy(IceMX.MetricsPrx,IceMX.ThreadMetrics.ice_staticId,void 0),N.defineOperations(IceMX.ThreadMetrics,IceMX.ThreadMetricsPrx),IceMX.DispatchMetrics=N.defineObject((function(e,t,n,i,r,o,s,a){IceMX.Metrics.call(this,e,t,n,i,r),this.userException=void 0!==o?o:0,this.size=void 0!==s?s:new Ice.Long(0,0),this.replySize=void 0!==a?a:new Ice.Long(0,0)}),IceMX.Metrics,void 0,1,["::Ice::Object","::IceMX::DispatchMetrics","::IceMX::Metrics"],-1,(function(e){e.writeInt(this.userException),e.writeLong(this.size),e.writeLong(this.replySize)}),(function(e){this.userException=e.readInt(),this.size=e.readLong(),this.replySize=e.readLong()}),!1),IceMX.DispatchMetricsPrx=N.defineProxy(IceMX.MetricsPrx,IceMX.DispatchMetrics.ice_staticId,void 0),N.defineOperations(IceMX.DispatchMetrics,IceMX.DispatchMetricsPrx),IceMX.ChildInvocationMetrics=N.defineObject((function(e,t,n,i,r,o,s){IceMX.Metrics.call(this,e,t,n,i,r),this.size=void 0!==o?o:new Ice.Long(0,0),this.replySize=void 0!==s?s:new Ice.Long(0,0)}),IceMX.Metrics,void 0,1,["::Ice::Object","::IceMX::ChildInvocationMetrics","::IceMX::Metrics"],-1,(function(e){e.writeLong(this.size),e.writeLong(this.replySize)}),(function(e){this.size=e.readLong(),this.replySize=e.readLong()}),!1),IceMX.ChildInvocationMetricsPrx=N.defineProxy(IceMX.MetricsPrx,IceMX.ChildInvocationMetrics.ice_staticId,void 0),N.defineOperations(IceMX.ChildInvocationMetrics,IceMX.ChildInvocationMetricsPrx),IceMX.CollocatedMetrics=N.defineObject((function(e,t,n,i,r,o,s){IceMX.ChildInvocationMetrics.call(this,e,t,n,i,r,o,s)}),IceMX.ChildInvocationMetrics,void 0,2,["::Ice::Object","::IceMX::ChildInvocationMetrics","::IceMX::CollocatedMetrics","::IceMX::Metrics"],-1,void 0,void 0,!1),IceMX.CollocatedMetricsPrx=N.defineProxy(IceMX.ChildInvocationMetricsPrx,IceMX.CollocatedMetrics.ice_staticId,void 0),N.defineOperations(IceMX.CollocatedMetrics,IceMX.CollocatedMetricsPrx),IceMX.RemoteMetrics=N.defineObject((function(e,t,n,i,r,o,s){IceMX.ChildInvocationMetrics.call(this,e,t,n,i,r,o,s)}),IceMX.ChildInvocationMetrics,void 0,3,["::Ice::Object","::IceMX::ChildInvocationMetrics","::IceMX::Metrics","::IceMX::RemoteMetrics"],-1,void 0,void 0,!1),IceMX.RemoteMetricsPrx=N.defineProxy(IceMX.ChildInvocationMetricsPrx,IceMX.RemoteMetrics.ice_staticId,void 0),N.defineOperations(IceMX.RemoteMetrics,IceMX.RemoteMetricsPrx),IceMX.InvocationMetrics=N.defineObject((function(e,t,n,i,r,o,s,a,c){IceMX.Metrics.call(this,e,t,n,i,r),this.retry=void 0!==o?o:0,this.userException=void 0!==s?s:0,this.remotes=void 0!==a?a:null,this.collocated=void 0!==c?c:null}),IceMX.Metrics,void 0,1,["::Ice::Object","::IceMX::InvocationMetrics","::IceMX::Metrics"],-1,(function(e){e.writeInt(this.retry),e.writeInt(this.userException),IceMX.MetricsMapHelper.write(e,this.remotes),IceMX.MetricsMapHelper.write(e,this.collocated)}),(function(e){this.retry=e.readInt(),this.userException=e.readInt(),this.remotes=IceMX.MetricsMapHelper.read(e),this.collocated=IceMX.MetricsMapHelper.read(e)}),!1),IceMX.InvocationMetricsPrx=N.defineProxy(IceMX.MetricsPrx,IceMX.InvocationMetrics.ice_staticId,void 0),N.defineOperations(IceMX.InvocationMetrics,IceMX.InvocationMetricsPrx),IceMX.ConnectionMetrics=N.defineObject((function(e,t,n,i,r,o,s){IceMX.Metrics.call(this,e,t,n,i,r),this.receivedBytes=void 0!==o?o:new Ice.Long(0,0),this.sentBytes=void 0!==s?s:new Ice.Long(0,0)}),IceMX.Metrics,void 0,1,["::Ice::Object","::IceMX::ConnectionMetrics","::IceMX::Metrics"],-1,(function(e){e.writeLong(this.receivedBytes),e.writeLong(this.sentBytes)}),(function(e){this.receivedBytes=e.readLong(),this.sentBytes=e.readLong()}),!1),IceMX.ConnectionMetricsPrx=N.defineProxy(IceMX.MetricsPrx,IceMX.ConnectionMetrics.ice_staticId,void 0),N.defineOperations(IceMX.ConnectionMetrics,IceMX.ConnectionMetricsPrx),function(){Ice.Debug;var e=Ice.HashMap,t=Ice.ConnectRequestHandler,n=Ice.Class({__init__:function(t){this._instance=t,this._handlers=new e(e.compareEquals)},getRequestHandler:function(e,n){var i,r=!1;return e.getCacheConnection()?(i=this._handlers.get(e))||(i=new t(e,n),this._handlers.set(e,i),r=!0):(r=!0,i=new t(e,n)),r&&e.getConnection().then((function(e,t){i.setConnection(e,t)}),(function(e){i.setException(e)})),n.__setRequestHandler(i.connect(n))},removeRequestHandler:function(e,t){e.getCacheConnection()&&this._handlers.get(e)===t&&this._handlers.del(e)}});Ice.RequestHandlerFactory=n}(),Ice.Process=N.defineObject(void 0,Ice.Object,void 0,1,["::Ice::Object","::Ice::Process"],-1,void 0,void 0,!1),Ice.ProcessPrx=N.defineProxy(Ice.ObjectPrx,Ice.Process.ice_staticId,void 0),N.defineOperations(Ice.Process,Ice.ProcessPrx,{shutdown:[,,,,,,,,,,],writeMessage:[,,,,,,[[7],[3]],,,,]}),M=Ice.TcpEndpointI,D=Ice.Class({__init__:function(e){this._instance=e},type:function(){return this._instance.type()},protocol:function(){return this._instance.protocol()},create:function(e,t){var n=new M(this._instance);return n.initWithOptions(e,t),n},read:function(e){var t=new M(this._instance);return t.initWithStream(e),t},destroy:function(){this._instance=null},clone:function(e){return new D(e)}}),Ice.TcpEndpointFactory=D,N.defineDictionary(Ice,"PropertyDict","PropertyDictHelper","Ice.StringHelper","Ice.StringHelper",!1,void 0,void 0),Ice.PropertiesAdmin=N.defineObject(void 0,Ice.Object,void 0,1,["::Ice::Object","::Ice::PropertiesAdmin"],-1,void 0,void 0,!1),Ice.PropertiesAdminPrx=N.defineProxy(Ice.ObjectPrx,Ice.PropertiesAdmin.ice_staticId,void 0),N.defineOperations(Ice.PropertiesAdmin,Ice.PropertiesAdminPrx,{getProperty:[,,,,,[7],[[7]],,,,],getPropertiesForPrefix:[,,,,,["Ice.PropertyDictHelper"],[[7]],,,,],setProperties:[,,,1,,,[["Ice.PropertyDictHelper"]],,,,]}),Ice.LogMessageType=N.defineEnum([["PrintMessage",0],["TraceMessage",1],["WarningMessage",2],["ErrorMessage",3]]),N.defineSequence(Ice,"LogMessageTypeSeqHelper","Ice.LogMessageType.__helper",!1),Ice.LogMessage=N.defineStruct((function(e,t,n,i){this.type=void 0!==e?e:Ice.LogMessageType.PrintMessage,this.timestamp=void 0!==t?t:0,this.traceCategory=void 0!==n?n:"",this.message=void 0!==i?i:""}),!0,(function(e){Ice.LogMessageType.__write(e,this.type),e.writeLong(this.timestamp),e.writeString(this.traceCategory),e.writeString(this.message)}),(function(e){this.type=Ice.LogMessageType.__read(e),this.timestamp=e.readLong(),this.traceCategory=e.readString(),this.message=e.readString()}),11,!1),N.defineSequence(Ice,"LogMessageSeqHelper","Ice.LogMessage",!1),Ice.RemoteLogger=N.defineObject(void 0,Ice.Object,void 0,1,["::Ice::Object","::Ice::RemoteLogger"],-1,void 0,void 0,!1),Ice.RemoteLoggerPrx=N.defineProxy(Ice.ObjectPrx,Ice.RemoteLogger.ice_staticId,void 0),N.defineOperations(Ice.RemoteLogger,Ice.RemoteLoggerPrx,{init:[,,,,,,[[7],["Ice.LogMessageSeqHelper"]],,,,],log:[,,,,,,[[Ice.LogMessage]],,,,]}),Ice.RemoteLoggerAlreadyAttachedException=N.defineUserException((function(e){Ice.UserException.call(this,e)}),Ice.UserException,"Ice::RemoteLoggerAlreadyAttachedException",void 0,void 0,!1,!1),Ice.LoggerAdmin=N.defineObject(void 0,Ice.Object,void 0,0,["::Ice::LoggerAdmin","::Ice::Object"],-1,void 0,void 0,!1),Ice.LoggerAdminPrx=N.defineProxy(Ice.ObjectPrx,Ice.LoggerAdmin.ice_staticId,void 0),N.defineOperations(Ice.LoggerAdmin,Ice.LoggerAdminPrx,{attachRemoteLogger:[,,,,,,[["Ice.RemoteLoggerPrx"],["Ice.LogMessageTypeSeqHelper"],["Ice.StringSeqHelper"],[3]],,[Ice.RemoteLoggerAlreadyAttachedException],,],detachRemoteLogger:[,,,,,[1],[["Ice.RemoteLoggerPrx"]],,,,],getLog:[,,,,,["Ice.LogMessageSeqHelper"],[["Ice.LogMessageTypeSeqHelper"],["Ice.StringSeqHelper"],[3]],[[7]],,,]}),O=Ice.WSEndpoint,A=Ice.Class({__init__:function(e,t){this._instance=e,this._delegate=t},type:function(){return this._instance.type()},protocol:function(){return this._instance.protocol()},create:function(e,t){var n=new O(this._instance,this._delegate.create(e,t));return n.initWithOptions(e),n},read:function(e){var t=new O(this._instance,this._delegate.read(e));return t.initWithStream(e),t},destroy:function(){this._delegate.destroy(),this._instance=null}}),Ice.WSEndpointFactory=A,N.defineDictionary(Ice,"SliceChecksumDict","SliceChecksumDictHelper","Ice.StringHelper","Ice.StringHelper",!1,void 0,void 0),function(){var e=Ice.AsyncResultBase,t=Ice.Debug,n=Ice.DefaultsAndOverrides,i=Ice.EndpointFactoryManager,r=(Ice.HashMap,Ice.ImplicitContextI),o=Ice.LocatorManager,s=(Ice.Logger,Ice.ObjectAdapterFactory),a=Ice.ObjectFactoryManager,c=Ice.OutgoingConnectionFactory,l=(Ice.Promise,Ice.Properties),d=Ice.ProxyFactory,u=Ice.RetryQueue,h=Ice.RouterManager,f=Ice.Timer,_=Ice.TraceLevels,p=Ice.ReferenceFactory,C=Ice.RequestHandlerFactory,g=Ice.ACMConfig,m=Ice.Class({__init__:function(e){this._state=0,this._initData=e,this._traceLevels=null,this._defaultsAndOverrides=null,this._messageSizeMax=0,this._batchAutoFlushSize=0,this._clientACM=null,this._implicitContext=null,this._routerManager=null,this._locatorManager=null,this._referenceFactory=null,this._requestHandlerFactory=null,this._proxyFactory=null,this._outgoingConnectionFactory=null,this._servantFactoryManager=null,this._objectAdapterFactory=null,this._retryQueue=null,this._endpointHostResolver=null,this._endpointFactoryManager=null},initializationData:function(){return this._initData},traceLevels:function(){return t.assert(null!==this._traceLevels),this._traceLevels},defaultsAndOverrides:function(){return t.assert(null!==this._defaultsAndOverrides),this._defaultsAndOverrides},routerManager:function(){if(2===this._state)throw new Ice.CommunicatorDestroyedException;return t.assert(null!==this._routerManager),this._routerManager},locatorManager:function(){if(2===this._state)throw new Ice.CommunicatorDestroyedException;return t.assert(null!==this._locatorManager),this._locatorManager},referenceFactory:function(){if(2===this._state)throw new Ice.CommunicatorDestroyedException;return t.assert(null!==this._referenceFactory),this._referenceFactory},requestHandlerFactory:function(){if(2===this._state)throw new Ice.CommunicatorDestroyedException;return t.assert(null!==this._requestHandlerFactory),this._requestHandlerFactory},proxyFactory:function(){if(2===this._state)throw new Ice.CommunicatorDestroyedException;return t.assert(null!==this._proxyFactory),this._proxyFactory},outgoingConnectionFactory:function(){if(2===this._state)throw new Ice.CommunicatorDestroyedException;return t.assert(null!==this._outgoingConnectionFactory),this._outgoingConnectionFactory},servantFactoryManager:function(){if(2===this._state)throw new Ice.CommunicatorDestroyedException;return t.assert(null!==this._servantFactoryManager),this._servantFactoryManager},objectAdapterFactory:function(){if(2===this._state)throw new Ice.CommunicatorDestroyedException;return t.assert(null!==this._objectAdapterFactory),this._objectAdapterFactory},retryQueue:function(){if(2===this._state)throw new Ice.CommunicatorDestroyedException;return t.assert(null!==this._retryQueue),this._retryQueue},timer:function(){if(2===this._state)throw new Ice.CommunicatorDestroyedException;return t.assert(null!==this._timer),this._timer},endpointFactoryManager:function(){if(2===this._state)throw new Ice.CommunicatorDestroyedException;return t.assert(null!==this._endpointFactoryManager),this._endpointFactoryManager},messageSizeMax:function(){return this._messageSizeMax},batchAutoFlushSize:function(){return this._batchAutoFlushSize},clientACM:function(){return this._clientACM},getImplicitContext:function(){return this._implicitContext},stringToIdentity:function(e){return Ice.stringToIdentity(e)},identityToString:function(e){return Ice.identityToString(e)},setDefaultLocator:function(e){if(2==this._state)throw new Ice.CommunicatorDestroyedException;this._referenceFactory=this._referenceFactory.setDefaultLocator(e)},setDefaultRouter:function(e){if(2==this._state)throw new Ice.CommunicatorDestroyedException;this._referenceFactory=this._referenceFactory.setDefaultRouter(e)},setLogger:function(e){this._initData.logger=e},finishSetup:function(e,t){try{null===this._initData.properties&&(this._initData.properties=l.createProperties()),void 0===Ice.__oneOfDone&&(Ice.__printStackTraces=this._initData.properties.getPropertyAsIntWithDefault("Ice.PrintStackTraces",0)>0,Ice.__oneOfDone=!0),null===this._initData.logger&&(this._initData.logger=Ice.getProcessLogger()),this._traceLevels=new _(this._initData.properties),this._defaultsAndOverrides=new n(this._initData.properties,this._initData.logger);var m=this._initData.properties.getPropertyAsIntWithDefault("Ice.MessageSizeMax",1024);this._messageSizeMax=m<1||m>2147483647/1024?2147483647:1024*m,0===this._initData.properties.getProperty("Ice.BatchAutoFlushSize").length&&this._initData.properties.getProperty("Ice.BatchAutoFlush").length>0?this._initData.properties.getPropertyAsInt("Ice.BatchAutoFlush")>0&&(this._batchAutoFlushSize=this._messageSizeMax):(m=this._initData.properties.getPropertyAsIntWithDefault("Ice.BatchAutoFlushSize",1024),this._batchAutoFlushSize=m<1?m:m>2147483647/1024?2147483647:1024*m),this._clientACM=new g(this._initData.properties,this._initData.logger,"Ice.ACM.Client",new g(this._initData.properties,this._initData.logger,"Ice.ACM",new g)),this._implicitContext=r.create(this._initData.properties.getProperty("Ice.ImplicitContext")),this._routerManager=new h,this._locatorManager=new o(this._initData.properties),this._referenceFactory=new p(this,e),this._requestHandlerFactory=new C(this,e),this._proxyFactory=new d(this),this._endpointFactoryManager=new i(this);var R=new Ice.ProtocolInstance(this,Ice.TCPEndpointType,"tcp",!1),v=new Ice.TcpEndpointFactory(R);this._endpointFactoryManager.add(v);var I=new Ice.ProtocolInstance(this,Ice.WSEndpointType,"ws",!1),y=new Ice.WSEndpointFactory(I,v.clone(I));this._endpointFactoryManager.add(y);var S=new Ice.ProtocolInstance(this,IceSSL.EndpointType,"ssl",!0),E=new Ice.TcpEndpointFactory(S);this._endpointFactoryManager.add(E);var b=new Ice.ProtocolInstance(this,Ice.WSSEndpointType,"wss",!0),w=new Ice.WSEndpointFactory(b,E.clone(b));this._endpointFactoryManager.add(w),this._outgoingConnectionFactory=new c(e,this),this._servantFactoryManager=new a,this._objectAdapterFactory=new s(this,e),this._retryQueue=new u(this),this._timer=new f(this._initData.logger);var P=Ice.RouterPrx.uncheckedCast(this._proxyFactory.propertyToProxy("Ice.Default.Router"));null!==P&&(this._referenceFactory=this._referenceFactory.setDefaultRouter(P));var x=Ice.LocatorPrx.uncheckedCast(this._proxyFactory.propertyToProxy("Ice.Default.Locator"));null!==x&&(this._referenceFactory=this._referenceFactory.setDefaultLocator(x)),null!==t&&t.succeed(e)}catch(e){if(null===t)throw e instanceof Ice.LocalException&&this.destroy(),e;e instanceof Ice.LocalException?this.destroy().finally2((function(){t.fail(e)})):t.fail(e)}},destroy:function(){var t=new e(null,"destroy",null,this,null);if(1==this._state)return this._destroyPromises||(this._destroyPromises=[]),this._destroyPromises.push(t),t;this._state=1;var n=this;return Ice.Promise.try2((function(){if(n._objectAdapterFactory)return n._objectAdapterFactory.shutdown()})).then((function(){if(null!==n._outgoingConnectionFactory&&n._outgoingConnectionFactory.destroy(),null!==n._objectAdapterFactory)return n._objectAdapterFactory.destroy()})).then((function(){if(null!==n._outgoingConnectionFactory)return n._outgoingConnectionFactory.waitUntilFinished()})).then((function(){var e;if(n._retryQueue&&n._retryQueue.destroy(),n._timer&&n._timer.destroy(),n._servantFactoryManager&&n._servantFactoryManager.destroy(),n._routerManager&&n._routerManager.destroy(),n._locatorManager&&n._locatorManager.destroy(),n._endpointFactoryManager&&n._endpointFactoryManager.destroy(),n._initData.properties.getPropertyAsInt("Ice.Warn.UnusedProperties")>0){var i=n._initData.properties.getUnusedProperties();if(i.length>0){var r=[];for(r.push("The following properties were set but never read:"),e=0;e<i.length;++e)r.push("\n    "),r.push(i[e]);n._initData.logger.warning(r.join(""))}}if(n._objectAdapterFactory=null,n._outgoingConnectionFactory=null,n._retryQueue=null,n._timer=null,n._servantFactoryManager=null,n._referenceFactory=null,n._requestHandlerFactory=null,n._proxyFactory=null,n._routerManager=null,n._locatorManager=null,n._endpointFactoryManager=null,n._state=2,this._destroyPromises)for(e=0;e<this._destroyPromises.length;++e)this._destroyPromises[e].succeed(this._destroyPromises[e]);t.succeed(t)})).exception((function(e){if(this._destroyPromises)for(var n=0;n<this._destroyPromises.length;++n)this._destroyPromises[n].fail(e,this._destroyPromises[n]);t.fail(e,t)})),t}});Ice.Instance=m}(),V=Ice.Instance,Ice.Promise,k=Ice.Class({__init__:function(e){this._instance=new V(e)},finishSetup:function(e){this._instance.finishSetup(this,e)},destroy:function(){return this._instance.destroy()},shutdown:function(){this._instance.objectAdapterFactory().shutdown()},waitForShutdown:function(){return this._instance.objectAdapterFactory().waitForShutdown()},isShutdown:function(){return this._instance.objectAdapterFactory().isShutdown()},stringToProxy:function(e){return this._instance.proxyFactory().stringToProxy(e)},proxyToString:function(e){return this._instance.proxyFactory().proxyToString(e)},propertyToProxy:function(e){return this._instance.proxyFactory().propertyToProxy(e)},proxyToProperty:function(e,t){return this._instance.proxyFactory().proxyToProperty(e,t)},stringToIdentity:function(e){return this._instance.stringToIdentity(e)},identityToString:function(e){return this._instance.identityToString(e)},createObjectAdapter:function(e){var t=new Ice.AsyncResultBase(this,"createObjectAdapter",this,null,null);return this._instance.objectAdapterFactory().createObjectAdapter(e,null,t),t},createObjectAdapterWithEndpoints:function(e,t){0===e.length&&(e=Ice.generateUUID()),this.getProperties().setProperty(e+".Endpoints",t);var n=new Ice.AsyncResultBase(this,"createObjectAdapterWithEndpoints",this,null,null);return this._instance.objectAdapterFactory().createObjectAdapter(e,null,n),n},createObjectAdapterWithRouter:function(e,t){0===e.length&&(e=Ice.generateUUID());for(var n=new Ice.AsyncResultBase(this,"createObjectAdapterWithRouter",this,null,null),i=this.proxyToProperty(t,e+".Router").entries;null!==i;i=i.next)this.getProperties().setProperty(i.key,i.value);return this._instance.objectAdapterFactory().createObjectAdapter(e,t,n),n},addObjectFactory:function(e,t){this._instance.servantFactoryManager().add(e,t)},findObjectFactory:function(e){return this._instance.servantFactoryManager().find(e)},getImplicitContext:function(){return this._instance.getImplicitContext()},getProperties:function(){return this._instance.initializationData().properties},getLogger:function(){return this._instance.initializationData().logger},getDefaultRouter:function(){return this._instance.referenceFactory().getDefaultRouter()},setDefaultRouter:function(e){this._instance.setDefaultRouter(e)},getDefaultLocator:function(){return this._instance.referenceFactory().getDefaultLocator()},setDefaultLocator:function(e){this._instance.setDefaultLocator(e)},flushBatchRequests:function(){return this._instance.outgoingConnectionFactory().flushAsyncBatchRequests()}}),Object.defineProperty(k.prototype,"instance",{get:function(){return this._instance}}),Ice.Communicator=k,function(){var e=Ice.Protocol;Ice.InitializationData=function(){this.properties=null,this.logger=null},Ice.InitializationData.prototype.clone=function(){var e=new Ice.InitializationData;return e.properties=this.properties,e.logger=this.logger,e},Ice.initialize=function(e,t){var n=null,i=null;if(e instanceof Array)n=e;else if(e instanceof Ice.InitializationData)i=e;else if(null!=e)throw new Ice.InitializationException("invalid argument to initialize");if(null!=t){if(!(t instanceof Ice.InitializationData&&null===i))throw new Ice.InitializationException("invalid argument to initialize");i=t}(i=null===i?new Ice.InitializationData:i.clone()).properties=Ice.createProperties(n,i.properties);var r=new Ice.Communicator(i);return r.finishSetup(null),r},Ice.createProperties=function(e,t){return new Ice.Properties(e,t)},Ice.currentProtocol=function(){return e.currentProtocol.clone()},Ice.currentEncoding=function(){return e.currentEncoding.clone()}}(),e.Ice=Ice,e.IceMX=IceMX,e.IceSSL=IceSSL}()},9327:()=>{!function(e,t,n){e.__crAttrClass=class{constructor(){this.initIceCallback(),this.initSDKInterface()}initIceCallback(){this.ICECallback={notifyMeetingAttrsChanged:(e,t,n)=>{console.crlog("[Attr] notifyMeetingAttrsChanged");const i=this.ConferenceToData(e),r=this.ConferenceToData(t);CRVideo_NotifyMeetingAttrsChanged.target(i,r,n)},notifyUserAttrsChanged:(e,t,n,i)=>{console.crlog("[Attr] notifyUserAttrsChanged: "+e);const r=this.ConferenceToData(t),o=this.ConferenceToData(n);CRVideo_NotifyUserAttrsChanged.target(e,r,o,i)}}}initSDKInterface(){e.CRVideo_GetMeetingAttrs=(t,n)=>{if(console.crlog("[Attr] CRVideo_GetMeetingAttrs start..."),!(t instanceof Array))return console.crlog("[Attr] CRVideo_GetMeetingAttrsFail parameter error"),void e.CRVideo_GetMeetingAttrsFail.target(e.CRVideo_ERR_DEF.MEETPARAM_ERR,n);Cr.conferenceRequest("getMeetingAttrs",t).then((t=>{const i=this.ConferenceToData(t[0]);console.crlog("[Attr] CRVideo_GetMeetingAttrsSuccess"),e.CRVideo_GetMeetingAttrsSuccess.target(i,n)})).catch((t=>{console.crlog("[Attr] CRVideo_GetMeetingAttrsFail"),e.CRVideo_GetMeetingAttrsFail.target(t,n)}))},e.CRVideo_GetMeetingAllAttrs=t=>{console.crlog("[Attr] CRVideo_GetMeetingAllAttrs start..."),Cr.conferenceRequest("getMeetingAllAttrs").then((n=>{const i=this.ConferenceToData(n[0]);console.crlog("[Attr] CRVideo_GetMeetingAllAttrsSuccess"),e.CRVideo_GetMeetingAllAttrsSuccess.target(i,t)})).catch((n=>{console.crlog("[Attr] CRVideo_GetMeetingAllAttrsFail"),e.CRVideo_GetMeetingAllAttrsFail.target(n,t)}))},e.CRVideo_SetMeetingAttrs=(t,n,i)=>{console.crlog("[Attr] CRVideo_SetMeetingAttrs start");try{const r=JSON.parse(t);if("object"!=typeof r)throw"[Attr] attrs not is object";const o=this.checkLength(r);if(o)throw o;const s=this.createStringMap(r);Cr.conferenceRequest("setMeetingAttrs",s,n).then((()=>{console.crlog("[Attr] CRVideo_SetMeetingAttrsSuccess"),e.CRVideo_SetMeetingAttrsRslt.target(e.CRVideo_ERR_DEF.NOERR,i)})).catch((t=>{console.crlog("[Attr] CRVideo_SetMeetingAttrsFail"),e.CRVideo_SetMeetingAttrsRslt.target(t,i)}))}catch(t){return console.crlog(`[Attr] SetMeetingAttrs fail: ${t}`),void e.CRVideo_SetMeetingAttrsRslt.target(e.CRVideo_ERR_DEF.UNKNOWERR,i)}},e.CRVideo_AddOrUpdateMeetingAttrs=(t,n,i)=>{console.crlog("[Attr] AddOrUpdateMeetingAttrs start");try{const r=JSON.parse(t);if("object"!=typeof r)throw"[Attr] attrs not is object";const o=this.checkLength(r);if(o)throw o;const s=this.createStringMap(r);Cr.conferenceRequest("addOrUpdateMeetingAttrs",s,n).then((()=>{console.crlog("[Attr] CRVideo_AddOrUpdateMeetingAttrs Success"),e.CRVideo_AddOrUpdateMeetingAttrsRslt.target(e.CRVideo_ERR_DEF.NOERR,i)})).catch((t=>{console.crlog("[Attr] CRVideo_AddOrUpdateMeetingAttrs Fail"),e.CRVideo_AddOrUpdateMeetingAttrsRslt.target(t,i)}))}catch(t){return console.crlog(`[Attr] CRVideo_AddOrUpdateMeetingAttrs fail: ${t}`),void e.CRVideo_AddOrUpdateMeetingAttrsRslt.target(e.CRVideo_ERR_DEF.UNKNOWERR,i)}},e.CRVideo_DelMeetingAttrs=(t,n,i)=>{console.crlog("[Attr] CRVideo_DelMeetingAttrs start"),t instanceof Array?Cr.conferenceRequest("delMeetingAttrs",t,n).then((()=>{console.crlog("[Attr] CRVideo_DelMeetingAttrs Success"),e.CRVideo_DelMeetingAttrsRslt.target(e.CRVideo_ERR_DEF.NOERR,i)})).catch((t=>{console.crlog("[Attr] CRVideo_DelMeetingAttrs Fail"),e.CRVideo_DelMeetingAttrsRslt.target(t,i)})):e.CRVideo_DelMeetingAttrsRslt.target(e.CRVideo_ERR_DEF.MEETPARAM_ERR,i)},e.CRVideo_ClearMeetingAttrs=(t,n)=>{console.crlog("[Attr] CRVideo_ClearMeetingAttrs start..."),Cr.conferenceRequest("clearMeetingAttrs",t).then((()=>{console.crlog("[Attr] CRVideo_ClearMeetingAttrsRslt Success"),e.CRVideo_ClearMeetingAttrsRslt.target(e.CRVideo_ERR_DEF.NOERR,n)})).catch((t=>{console.crlog("[Attr] CRVideo_ClearMeetingAttrsRslt Fail"),e.CRVideo_ClearMeetingAttrsRslt.target(t,n)}))},e.CRVideo_GetUserAttrs=(t,n,i)=>{if(console.crlog("[Attr] CRVideo_GetUserAttrs start..."),!(t instanceof Array&&t.length<=50&&(!n||n&&n instanceof Array)))return console.crlog("[Attr] CRVideo_GetUserAttrsFail parameter error"),void e.CRVideo_GetUserAttrsFail.target(e.CRVideo_ERR_DEF.MEETPARAM_ERR,i);let r,o="getUserAttrs";n&&n.length>0&&(o="getUserAttrsWithKey",r=n),Cr.conferenceRequest(o,t,r).then((t=>{const n=this.getUserData(t[0]);console.crlog("[Attr] CRVideo_GetUserAttrsSuccess"),e.CRVideo_GetUserAttrsSuccess.target(n,i)})).catch((t=>{console.crlog("[Attr] CRVideo_GetUserAttrsFail"),e.CRVideo_GetUserAttrsFail.target(t,i)}))},e.CRVideo_SetUserAttrs=(t,n,i,r)=>{console.crlog("[Attr] CRVideo_SetUserAttrs start");try{const s=JSON.parse(n);if("object"!=typeof s)throw"attrs not is object";const a=this.checkLength(s);if(a)throw a;var o=new Conference.StringStringMap;for(let e in s)o.set(e,s[e]);Cr.conferenceRequest("setUserAttrs",t,o,i).then((()=>{console.crlog("[Attr] CRVideo_SetMeetingAttrsSuccess"),e.CRVideo_SetMeetingAttrsRslt.target(e.CRVideo_ERR_DEF.NOERR,r)})).catch((t=>{console.crlog("[Attr] CRVideo_SetMeetingAttrsFail"),e.CRVideo_SetMeetingAttrsRslt.target(t,r)}))}catch(t){return console.crlog(`[Attr] CRVideo_SetUserAttrsRslt fail: ${t}`),void e.CRVideo_SetUserAttrsRslt.target(e.CRVideo_ERR_DEF.UNKNOWERR,r)}},e.CRVideo_AddOrUpdateUserAttrs=(t,n,i,r)=>{console.crlog("[Attr] CRVideo_AddOrUpdateUserAttrs start");try{const o=JSON.parse(n);if("object"!=typeof o)throw"attrs not is object";const s=this.checkLength(o);if(s)throw s;const a=new Conference.StringStringMap;for(let e in o)a.set(e,o[e]);Cr.conferenceRequest("addOrUpdateUserAttrs",t,a,i).then((()=>{console.crlog("[Attr] CRVideo_AddOrUpdateUserAttrsRslt Success"),e.CRVideo_AddOrUpdateUserAttrsRslt.target(e.CRVideo_ERR_DEF.NOERR,r)})).catch((t=>{console.crlog("[Attr] CRVideo_AddOrUpdateUserAttrsRslt Fail"),e.CRVideo_AddOrUpdateUserAttrsRslt.target(t,r)}))}catch(t){return console.crlog(`[Attr] CRVideo_AddOrUpdateUserAttrsRslt fail: ${t}`),void e.CRVideo_AddOrUpdateUserAttrsRslt.target(e.CRVideo_ERR_DEF.UNKNOWERR,r)}},e.CRVideo_DelUserAttrs=(t,n,i,r)=>{console.crlog("[Attr] CRVideo_DelUserAttrs start"),n instanceof Array?Cr.conferenceRequest("delUserAttrs",t,n,i).then((()=>{console.crlog("[Attr] CRVideo_DelUserAttrs Success"),e.CRVideo_DelUserAttrsRslt.target(e.CRVideo_ERR_DEF.NOERR,r)})).catch((t=>{console.crlog("[Attr] CRVideo_DelUserAttrs Fail"),e.CRVideo_DelUserAttrsRslt.target(t,r)})):e.CRVideo_DelUserAttrsRslt.target(CONSTANT.CRVideo_MEETPARAM_ERR,r)},e.CRVideo_ClearUserAttrs=(t,n,i)=>{console.crlog("[Attr] CRVideo_ClearUserAttrs start..."),"string"==typeof t&&(t=[t]),t instanceof Array?Cr.conferenceRequest("clearUserAttrs",t,n).then((()=>{console.crlog("[Attr] CRVideo_ClearUserAttrsRslt Success"),e.CRVideo_ClearUserAttrsRslt.target(e.CRVideo_ERR_DEF.NOERR,i)})).catch((t=>{console.crlog("[Attr] CRVideo_ClearUserAttrsRslt Fail"),e.CRVideo_ClearUserAttrsRslt.target(t,i)})):e.CRVideo_ClearUserAttrsRslt.target(CONSTANT.CRVideo_MEETPARAM_ERR,i)},e.CRVideo_ClearAllUserAttrs=(t,n)=>{console.crlog("[Attr] CRVideo_ClearAllUserAttrs start..."),Cr.conferenceRequest("clearAllUserAttrs",t).then((()=>{console.crlog("[Attr] CRVideo_ClearAllUserAttrsRslt Success"),e.CRVideo_ClearAllUserAttrsRslt.target(e.CRVideo_ERR_DEF.NOERR,n)})).catch((t=>{console.crlog("[Attr] CRVideo_ClearAllUserAttrsRslt Fail"),e.CRVideo_ClearAllUserAttrsRslt.target(t,n)}))}}checkLength(e){for(let t in e){if(t.length>64)return"[MeetingAttr] key Exceed maximum length";if(e[t].length>8192)return"[MeetingAttr] value Exceed maximum length"}return!1}ConferenceToData(e){const t={};return e.forEach(((e,n)=>{t[e]=n})),t}getUserData(e){const t={};return e.forEach(((e,n)=>{t[e]={},n.forEach(((n,i)=>{t[e][n]=i}))})),t}createStringMap(e){const t=new Conference.StringStringMap;for(let n in e)t.set(n,e[n]);return t}},e.__Rtc.CRRTCAttr=new e.__crAttrClass,e.CRVideo_GetMeetingAttrsSuccess=new n.CbProxy("CRVideo_GetMeetingAttrsSuccess"),e.CRVideo_GetMeetingAttrsFail=new n.CbProxy("CRVideo_GetMeetingAttrsFail"),e.CRVideo_GetMeetingAllAttrsSuccess=new n.CbProxy("CRVideo_GetMeetingAllAttrsSuccess"),e.CRVideo_GetMeetingAllAttrsFail=new n.CbProxy("CRVideo_GetMeetingAllAttrsFail"),e.CRVideo_SetMeetingAttrsRslt=new n.CbProxy("CRVideo_SetMeetingAttrsRslt"),e.CRVideo_AddOrUpdateMeetingAttrsRslt=new n.CbProxy("CRVideo_AddOrUpdateMeetingAttrsRslt"),e.CRVideo_DelMeetingAttrsRslt=new n.CbProxy("CRVideo_DelMeetingAttrsRslt"),e.CRVideo_ClearMeetingAttrsRslt=new n.CbProxy("CRVideo_ClearMeetingAttrsRslt"),e.CRVideo_GetUserAttrsSuccess=new n.CbProxy("CRVideo_GetUserAttrsSuccess"),e.CRVideo_GetUserAttrsFail=new n.CbProxy("CRVideo_GetUserAttrsFail"),e.CRVideo_SetUserAttrsRslt=new n.CbProxy("CRVideo_SetUserAttrsRslt"),e.CRVideo_AddOrUpdateUserAttrsRslt=new n.CbProxy("CRVideo_AddOrUpdateUserAttrsRslt"),e.CRVideo_DelUserAttrsRslt=new n.CbProxy("CRVideo_DelUserAttrsRslt"),e.CRVideo_ClearUserAttrsRslt=new n.CbProxy("CRVideo_ClearUserAttrsRslt"),e.CRVideo_ClearAllUserAttrsRslt=new n.CbProxy("CRVideo_ClearAllUserAttrsRslt"),e.CRVideo_NotifyMeetingAttrsChanged=new n.CbProxy("CRVideo_NotifyMeetingAttrsChanged"),e.CRVideo_NotifyUserAttrsChanged=new n.CbProxy("CRVideo_NotifyUserAttrsChanged")}(window,Ice,CRVideo)},5974:()=>{!function(e,t,n){e.__crAudioClass=class{constructor(){console.crlog("[Audio] AudioModule initData..."),this.initData(),this.initIceCallback(),this.initSDKInterface()}initData(){this.localAudioStream=null,this.localAudioTracks=[],this.audioMSID=11e4,this.audioPeerConnections=[],this.audioInput=[],this.audioOutput=[],this.audioCfg={micID:1,speakerID:1,speakerPause:!1},this.audioContext=""}initIceCallback(){this.ICECallback={AudioAllocRawExt2_async:(e,t,n,i)=>{console.crlog(`[Audio] ICE Notify: AudioAllocRawExt2_async, params:${JSON.stringify({asParam:t,strParams:n})}`),"1"==(n=n.get("mediashare"))?setTimeout((()=>{__Rtc.CRRTCMedia.audioAllocRawExt2(e,t,n,i)}),500):this.audioAllocRawExt2(e,t.shareListen)},updateVoiceEnergy:e=>{const t=e._head._key,i=e._head._value;let r=null,o=0;n.allMemberInfo.forEach((e=>{e.termId==t&&(r=e.userId,o=e.voiceEnergy||0,e.voiceEnergy=i)})),r&&CRVideo_MicEnergyUpdate.target(r,o,i)},audioUpdateStatus:(e,t,i)=>{console.crlog(`[Audio] ICE Notify: audioUpdateStatus, params:${JSON.stringify({terminalID:t,status:i,opId:e})}`);const r={AUNKNOWN:0,ANULL:1,ACLOSE:2,AOPEN:3,AOPENING:4};let o,s,a;n.allMemberInfo.forEach((e=>{e.termId==t&&(o=e.userId,s=e.audioStatus,e.audioStatus=i.name,e.userId==n.userInfo.userId&&"ACLOSE"===i.name&&this.isEnableAudioTrack(!1),a=e.audioStatus,a!==s&&console.crlog(`[Audio] CRVideo_AudioStatusChanged.target(${o},${r[s]},${r[a]})`),a!==s&&CRVideo_AudioStatusChanged.target(o,r[s],r[a]))}))},updateSpeaker:e=>{console.crlog(`[Audio] ICE Notify: updateSpeaker, params:${JSON.stringify({terminalID:e})}`)},closeAll:e=>{console.crlog(`[Audio] ICE Notify: closeAll, params:${JSON.stringify({operatorID:e})}`),e!==n.userInfo.termId&&this.closeMicEx(n.userInfo.userId)},playBackgroundMusic:(e,t)=>{console.crlog(`[Audio] ICE Notify: playBackgroundMusic, params:${JSON.stringify({operatorID:e,sPlay:t})}`)},notifyVoiceHowling:(e,t)=>{console.crlog(`[Audio] ICE Notify: notifyVoiceHowling, params:${JSON.stringify({termid:e,bHowling:t})}`)},notifyVoiceNoise:(e,t)=>{console.crlog(`[Audio] ICE Notify: notifyVoiceNoise, params:${JSON.stringify({termid:e,bNoising:t})}`)},getRemoteAudioInfNotify:(e,t)=>{try{console.crlog(`[Audio] ICE Notify: getRemoteAudioInfNotify, params:${JSON.stringify({cb:e,reqTermID:t})}`)}catch(e){console.error(e)}e.ice_response(),e.isResponsed=!0},remoteAudioSetNotify:(e,t)=>{console.crlog(`[Audio] ICE Notify: remoteAudioSetNotify, params:${JSON.stringify({opeTermId:e,rAudio:t})}`)},notifyLanLessMicOpen:()=>{console.crlog("[Audio] ICE Notify: notifyLanLessMicOpen, params:null")},closeMicExRslt:(e,t)=>{console.crlog(`[Audio] ICE Callback --\x3e closeMicExRslt, params:${JSON.stringify({errCode:e,errDesc:t})}`)},setAudioDeviceStatusRslt:(e,t)=>{console.crlog(`[Audio] ICE Callback --\x3e setAudioDeviceStatusRslt, params:${JSON.stringify({errCode:e,errDesc:t})}`)},closeAllRslt:(e,t)=>{console.crlog(`[Audio] ICE Callback --\x3e closeAllRslt, params:${JSON.stringify({errCode:e,errDesc:t})}`)}}}initSDKInterface(){e.CRVideo_OpenMic=t=>{console.crlog(`[Audio] CRVideo_OpenMic(${t})`);return new Promise(((i,r)=>{const o=e.userIdToTermId(t);if(t==n.userInfo.userId&&0===this.audioInput.length)return console.crlog("[Audio][Error] CRVideo_OpenMic fail, no mic devices!"),void console.error("[Audio][Error] CRVideo_OpenMic fail, no mic devices!");o&&__Rtc.CRICEAPI.OpenMicEx(o).then((e=>i(e[0])),(e=>r(__Rtc.CRCONFERR.Parse(e))))}))},e.CRVideo_CloseMic=e=>{console.crlog(`[Audio] CRVideo_CloseMic(${e})`),this.closeMicEx(e)},e.CRVideo_PlaySpeaker=()=>{console.crlog("[Audio] CRVideo_PlaySpeaker()"),document.querySelector("#CRSDKAudioPlayer").click(),document.querySelector("#CRSDKAudioPlayer").play(),document.querySelector("#CRSDKAudioPlayer").isPaused=!1,!document.querySelector("#CRSDKAudioPlayer").paused&&console.crlog("[Audio] Audio elememt is playing...")},e.CRVideo_PauseSpeaker=()=>{console.crlog("[Audio] CRVideo_PauseSpeaker()"),this.audioCfg.speakerPause=!0,document.querySelector("#CRSDKAudioPlayer").click(),document.querySelector("#CRSDKAudioPlayer").pause(),document.querySelector("#CRSDKAudioPlayer").isPaused=!0,document.querySelector("#CRSDKAudioPlayer").paused&&console.crlog("[Audio] Audio elememt is paused...")},e.CRVideo_GetAudioMicNames=()=>{const e=[];this.audioInput.forEach((t=>{e.push({micID:t.id,micName:t.name})}));try{console.crlog(`[Audio] CRVideo_GetAudioMicNames(), return:${JSON.stringify(e)}`)}catch(e){console.error(e)}return e},e.CRVideo_GetAudioSpkNames=()=>{const e=[];this.audioOutput.forEach((t=>{e.push({speakerID:t.id,speakerName:t.name})}));try{console.crlog(`[Audio] CRVideo_GetAudioSpkNames(), return:${JSON.stringify(e)}`)}catch(e){console.error(e)}return e},e.CRVideo_SetAudioCfg=e=>{console.crlog(`[Audio] CRVideo_SetAudioCfg(${JSON.stringify(e)})`),this.setAudioCfg(e)},e.CRVideo_GetAudioCfg=()=>{const e=this.audioCfg;return console.crlog(`[Audio] CRVideo_GetAudioCfg(), return:${JSON.stringify(e)}`),e},e.CRVideo_GetMicEnergy=e=>{let t=null;return n.allMemberInfo.forEach((n=>{n.userId==e&&(t=void 0===n.voiceEnergy?null:n.voiceEnergy)})),t},e.CRVideo_GetAudioStatus=e=>{const t=this.getAudioStatus(e);return console.crlog(`[Audio] CRVideo_GetAudioStatus(${e}), return:${t}`),t},e.CRVideo_SetAllAudioClose=()=>{console.crlog("[Audio] CRVideo_SetAllAudioClose()"),__Rtc.CR__CloseAll()}}createAudioElement(){console.crlog("[Audio] Do create audio element...");const t=this;!n.changyiweb&&function(e){if(!(n=e.document.getElementById("CRSDKAudioPlayer"))){var n,i=e.document.createElement("div");i.style.position="absolute",i.style.top="0px",i.style.left="0px",i.style.zIndex="99999",i.style.display="none",i.id="CRSDKAudioBox",(n=e.document.createElement("audio")).autoplay=!0,n.controls=!0,n.id="CRSDKAudioPlayer",i.appendChild(n),e.document.body.appendChild(i),t.setAudioCfg(t.audioCfg)}}(e)}connectToSpeaker(t,n){this.audioContext&&this.audioContext.close(),this.audioContext=new(e.AudioContext||e.webkitAudioContext);const i=this.audioContext.createMediaStreamSource(t),r=this.audioContext.createGain();r.gain.value=n||10,i.connect(r),r.connect(this.audioContext.destination)}audioAllocRawExt2(e,t){console.crlog(`[Audio] AudioAllocRawExt2, isRecvonly: ${t}`),setTimeout((()=>{e.isResponsed||e.ice_response()}),2e4);const n={};if(n.msid=this.audioMSID++,n.cb=e,n.candidates=[],n.connection=null,n.remoteStream=null,n.offer=null,n.answer=null,n.isFree=!1,this.audioPeerConnections.push(n),console.crlog(`[Audio] Start to create audio connection, MSID: ${n.msid}`),t)n.type="recvonly",this.setPeerConnection(n,e);else{n.type="sendrecv",n.micID=this.audioCfg.micID;const t=this.audioInput.find((e=>e.id===this.audioCfg.micID)).deviceId;this.localAudioStream&&this.localAudioTracks[0].micID===this.audioCfg.micID?(this.isEnableAudioTrack(!0),this.setPeerConnection(n,e)):this.getAudioStream(t&&!__Rtc.CRBrowser.curBrowserCfg.isMobile||!t.includes("default")?{audio:{deviceId:{ideal:t}},video:!1}:{audio:!0,video:!1}).then((()=>{this.setPeerConnection(n,e)}))}}setPeerConnection(e,i){const r=`[Audio] MSID:${e.msid} --`;console.crlog(`${r} SetPeerConnection... >> ${e.type} <<`),console.crlog(`${r} New RTCPeerConnection`);const o=new RTCPeerConnection(n.rtcCfg);if(e.connection=o,"recvonly"==e.type){const t={offerToReceiveAudio:!0,offerToReceiveVideo:!1};console.crlog(`${r} Audio RTCPeerConnection offerOptions: ${JSON.stringify(t)}`),o.createOffer(t).then((t=>{e.offer=t,console.crlog(`${r} Audio RTCPeerConnection createOffer success! offer sdp: ${t.sdp}`),this.offerSetLocalDescription(t)})).catch((t=>{console.crlog(`[Audio][Error] MSID:${e.msid} -- Audio RTCPeerConnection createOffer fail!`),console.error(t)}))}else this.localAudioStream?o.addTrack?(console.crlog(`[Audio] MSID:${e.msid} -- Audio RTCPeerConnection addTrack`),o.addTrack(this.localAudioTracks[0],this.localAudioStream)):setTimeout((function(){console.crlog(`[Audio] MSID:${e.msid} -- Audio RTCPeerConnection dispatchEvent:negotiationneeded`),o.dispatchEvent(new Event("negotiationneeded"))}),1e3):(console.crlog(`[Audio][Error] MSID:${e.msid} -- Audio RTCPeerConnection addTrack fail, no localAudioStream!`),console.error(`[Audio][Error] MSID:${e.msid} -- Audio RTCPeerConnection addTrack fail, no localAudioStream!`)),o.createOffer().then((t=>{e.offer=t,console.crlog(`${r} Audio RTCPeerConnection createOffer success! offer sdp: ${t.sdp}`),this.offerSetLocalDescription(t)})).catch((t=>{console.crlog(`[Audio][Error] MSID:${e.msid} -- Audio RTCPeerConnection createOffer fail!`),console.error(t)}));this.__proto__.offerSetLocalDescription=t=>{o.setLocalDescription(t).then((e=>{console.crlog(`${r} Audio RTCPeerConnection setLocalDescription success!`),o.waitingCandidateTimer=setTimeout((()=>{i&&i.ice_response(),i.isResponsed=!0}),1e4)})).catch((t=>{console.crlog(`[Audio][Error] MSID:${e.msid} -- Audio RTCPeerConnection setLocalDescription fail!`),console.error(t)}))},o.onicecandidate=n=>{if(console.crlog(`${r} Audio RTCPeerConnection onicecandidate, canditate:${JSON.stringify(n.candidate)}`),n.candidate)if(e.candidates.push(n.candidate),e.candidates.length<=1){console.crlog(`${r} Audio RTCPeerConnection canditates:\r\n${JSON.stringify(e.candidates)}`),console.crlog(`${r} Audio RTCPeerConnection ice gathering completed!`),clearTimeout(o.waitingCandidateTimer);const n=new t.HashMap;n.set("sdp",e.offer.sdp),n.set("icecandidate",JSON.stringify(e.candidates)),console.crlog(`${r} ice_response -- MSID:${e.msid}`),i&&i.ice_response(e.msid,n),i.isResponsed=!0}else console.crlog("The user maybe have two Network kard,the first candidates is:\r\n"+JSON.stringify(e.candidates)),console.crlog("The user maybe have two Network kard,the second candidates is：\r\n"+n.candidate.candidate);else 0===e.candidates.length&&(console.crlog(`[Audio][Error] MSID:${e.msid} -- Audio RTCPeerConnection ice gathering fail!`),console.error(`[Audio][Error] MSID:${e.msid} -- Audio RTCPeerConnection ice gathering fail!`))},o.onicecandidateerror=e=>{e.address,e.errorCode,e.errorText,e.hostCandidate},o.ontrack=t=>{console.crlog(`${r} Audio RTCPeerConnection ontrack`);const n=t.streams[0];console.crlog(`${r} Audio RTCPeerConnection got audio stream: ${JSON.stringify({active:n.active,id:n.id})}`),e.remoteStream=n,CRVideo_NotifyAudioStream.target(n);const i=__Rtc.CRBrowser.curBrowserCfg;i.isMobile&&"Safari"==i.name&&"iOS"==i.platform&&15==i.ver?this.connectToSpeaker(n):document.getElementById("CRSDKAudioPlayer")?(console.crlog(`${r} Founded audio element success and set srcObject!`),document.getElementById("CRSDKAudioPlayer").srcObject=n,document.getElementById("CRSDKAudioPlayer").isPaused?CRVideo_PauseSpeaker():setTimeout((()=>{try{document.getElementById("CRSDKAudioPlayer").srcObject&&1==document.getElementById("CRSDKAudioPlayer").srcObject.active&&(document.getElementById("CRSDKAudioPlayer").click(),document.getElementById("CRSDKAudioPlayer").play())}catch(e){console.error(e)}}),100)):console.crlog(`[Audio][Error] MSID:${e.msid} -- Can not find audio elemment, set srcObject fail!`)},o.onconnectionstatechange=e=>{console.crlog(`${r} Audio RTCPeerConnection onconnectionstatechange, connectionState: ${e.currentTarget.connectionState}`)},o.ondatachannel=e=>{console.crlog(`${r} Audio RTCPeerConnection ondatachannel`)},o.oniceconnectionstatechange=e=>{console.crlog(`${r} Audio RTCPeerConnection oniceconnectionstatechange, iceConnectionState: ${e.currentTarget.iceConnectionState}`)},o.onicegatheringstatechange=e=>{console.crlog(`${r} Audio RTCPeerConnection onicegatheringstatechange, iceGatheringState: ${e.currentTarget.iceGatheringState}`)},o.onnegotiationneeded=e=>{console.crlog(`${r} Audio RTCPeerConnection onnegotiationneeded`)},o.onremovestream=e=>{console.crlog(`${r} Audio RTCPeerConnection onremovestream`)},o.onsignalingstatechange=e=>{console.crlog(`${r} Audio RTCPeerConnection onsignalingstatechange, signalingState: ${e.currentTarget.signalingState}`)}}modifyPeerAddrExt(e,t){console.crlog(`[Audio] ModifyPeerAddrExt, MSID:${t}`);const n=`[Audio] MSID:${t} --`;let i=this.audioPeerConnections.find((e=>e.msid===t));void 0!==i?(console.crlog(`${n} Audio RTCPeerConnection got remote answer, answer.sdp:\r\n${e.sdp}`),i.answer=e,i.connection.setRemoteDescription(new RTCSessionDescription(e)).then((e=>{console.crlog(`${n} Audio RTCPeerConnection answer setRemoteDescription success!`)})).catch((e=>{console.crlog(`[Audio][Error] MSID:${i.msid} -- Audio RTCPeerConnection setRemoteDescription fail!`),console.error(e)}))):console.crlog(`[Audio][Error] Can not find MSID:${t} corresponding connection object!!!`)}getAudioStream(e){console.crlog("[Audio] Do get audio stream...");return new Promise(((t,n)=>{e=e||{audio:!0,video:!1},console.crlog(`[Audio] Open or change mic, constraints: ${JSON.stringify(e)}`),navigator.mediaDevices.getUserMedia(e).then((e=>(console.crlog(`[Audio] Local audio getUserMedia success! ${JSON.stringify({active:e.active,id:e.id})}`),this.localAudioStream=e,this.localAudioTracks=e.getAudioTracks(),this.localAudioTracks[0].micID=this.audioCfg.micID,t()))).catch((e=>(console.crlog(`[Audio][Error] Local audio getUserMedia fail! ${e}`),console.error(e),n())))}))}isEnableAudioTrack(e){this.localAudioTracks.forEach((t=>{e?console.crlog("[Audio] Enable local audio track!"):console.crlog("[Audio] Disable local audio track!"),t.enabled=e}))}stopAllAudioTrack(){console.crlog("[Audio] Do stop all audio track..."),this.localAudioTracks.forEach((e=>{"ended"!==e.readyState&&e.stop()})),this.localAudioTracks=[],this.localAudioStream=null}closeAllPeerConnection(){console.crlog("[Audio] Do close all peerConnections..."),this.audioPeerConnections.forEach((e=>{e.connection&&e.connection.close()})),this.audioPeerConnections=[]}closeMicEx(t){const i=e.userIdToTermId(t);t==n.userInfo.userId&&this.isEnableAudioTrack(!1),i&&console.crlog(`[Audio] CR__CloseMicEx(${i})`),i&&__Rtc.CR__CloseMicEx(i)}audioMSIDFree(e){console.crlog(`[Audio] Audio MSID free, MSID:${e}`);const t=this.audioPeerConnections.findIndex((t=>t.msid===e));-1!=t&&this.audioPeerConnections.splice(t,1),CRVideo_UploadingReport(),e===this.audioMSID-1&&this.audioPeerConnections.length>0&&(console.crlog("[Audio] Fast on/off mic"),this.resetAudioPeerConnection(e))}resetAudioPeerConnection(){console.crlog("[Audio] Do reset audio peerConnection...");const e=this.audioPeerConnections[0];if(console.crlog(`[Audio] Current audio connection type: ${e.type}`),"recvonly"===e.type){const t=e.remoteStream;CRVideo_NotifyAudioStream.target(t);const n=__Rtc.CRBrowser.curBrowserCfg;n.isMobile&&"Safari"==n.name&&"iOS"==n.platform&&15==n.ver?this.connectToSpeaker(t):document.getElementById("CRSDKAudioPlayer")?(console.crlog(`[Audio] MSID:${e.msid} -- Founded audio element success and set srcObject on free notify!`),document.getElementById("CRSDKAudioPlayer").srcObject=t,document.getElementById("CRSDKAudioPlayer").isPaused?CRVideo_PauseSpeaker():setTimeout((()=>{try{document.getElementById("CRSDKAudioPlayer").srcObject&&1==document.getElementById("CRSDKAudioPlayer").srcObject.active&&(document.getElementById("CRSDKAudioPlayer").click(),document.getElementById("CRSDKAudioPlayer").play())}catch(e){console.error(e)}}),100)):console.crlog(`[Audio][Error] MSID:${e.msid} -- Can not find audio elemment, set srcObject fail on free notify!`)}else if(this.isEnableAudioTrack(!0),e.micID===this.audioCfg.micID){console.crlog("[Audio] Audio micID did not changed...");const t=e.remoteStream;CRVideo_NotifyAudioStream.target(t);const n=__Rtc.CRBrowser.curBrowserCfg;n.isMobile&&"Safari"==n.name&&"iOS"==n.platform&&15==n.ver?this.connectToSpeaker(t):document.getElementById("CRSDKAudioPlayer")?(console.crlog(`[Audio] MSID:${e.msid} -- Founded audio element success and set srcObject on free notify!`),document.getElementById("CRSDKAudioPlayer").srcObject=t,document.getElementById("CRSDKAudioPlayer").isPaused?CRVideo_PauseSpeaker():setTimeout((()=>{try{document.getElementById("CRSDKAudioPlayer").srcObject&&1==document.getElementById("CRSDKAudioPlayer").srcObject.active&&(document.getElementById("CRSDKAudioPlayer").click(),document.getElementById("CRSDKAudioPlayer").play())}catch(e){console.error(e)}}),100)):console.crlog(`[Audio][Error] MSID:${e.msid} -- Can not find audio elemment, set srcObject fail on free notify!`)}else console.crlog("[Audio] Audio micID has changed, do setMicCfg now..."),this.setMicCfg(this.audioCfg.micID)}uploadAudioDevicesStatus(e){console.crlog("[Audio] Do upload audio devices status..."),void 0===e&&console.crlog(`[Audio] Audio input devices: ${JSON.stringify(this.audioInput)}`),void 0===e?this.audioInput.length>0?(console.crlog("[Audio] CR__SetAudioDeviceStatus(true)"),__Rtc.CR__SetAudioDeviceStatus(!0)):(console.crlog("[Audio] CR__SetAudioDeviceStatus(false)"),__Rtc.CR__SetAudioDeviceStatus(!1)):e?(console.crlog("[Audio] CR__SetAudioDeviceStatus(true)"),__Rtc.CR__SetAudioDeviceStatus(!0)):(console.crlog("[Audio] CR__SetAudioDeviceStatus(false)"),__Rtc.CR__SetAudioDeviceStatus(!1))}setAudioCfg(e){for(var t in e)this.audioCfg[t]=e[t];e.micID&&this.setMicCfg(+e.micID),e.speakerID&&this.setSpeakerCfg(+e.speakerID)}setMicCfg(e){console.crlog(`[Audio] Set mic device, micID:${e}`),this.audioInput.forEach((t=>{if(t.id===e){this.audioCfg.micID=e;let n=!1;this.localAudioTracks.forEach((e=>{1==e.enabled&&(n=!0)}));let i=this.localAudioTracks;n&&this.getAudioStream({audio:{deviceId:{ideal:t.deviceId}}}).then((()=>{console.crlog("[Audio] Do stop old audio tracks..."),i.forEach((e=>{e.stop()})),this.uploadAudioDevicesStatus(!0)}))}}))}setSpeakerCfg(e){console.crlog(`[Audio] Set speaker device, speakerID:${e}`);const t=document.getElementById("CRSDKAudioPlayer");for(let n=0;n<this.audioOutput.length;n++)e==this.audioOutput[n].id&&t&&t.setSinkId&&t.setSinkId(this.audioOutput[n].deviceId).then((()=>{console.crlog(`[Audio] Change speaker devices success, audio output device attached: ${this.audioOutput[n].deviceId}`)})).catch((e=>{console.crlog(`[Audio] Change speaker devices fail! ${e.name}`);let t=e;"SecurityError"==e.name&&(t="You need to use HTTPS for selecting audio output"),console.error(e)}))}getAudioStatus(t){let i="AUNKNOWN";return i=n.findMemberInfo({use:"userId",want:"audioStatus",value:t})||i,e.CRVideo_ASTATUS[i]}},e.__Rtc.CRRTCAudio=new e.__crAudioClass,e.CRVideo_AudioStatusChanged=new n.CbProxy("CRVideo_AudioStatusChanged"),e.CRVideo_NotifyAudioStream=new n.CbProxy("CRVideo_NotifyAudioStream"),e.CRVideo_MicEnergyUpdate=new n.CbProxy("CRVideo_MicEnergyUpdate")}(window,Ice,CRVideo)},137:()=>{((e,t,n)=>{e.__crCloudRecordClass=class{constructor(){this.initData(),this.initIceCallback(),this.initSDKInterface()}initData(){this.cloudRecordList=[]}initIceCallback(){this.ICECallback={notifyCloudRecordStateChanged:(n,i,r,o)=>{(o=JSON.parse(o)).jsonCfg&&(o.jsonCfg=JSON.parse(o.jsonCfg)),console.crlog(`[CloudRecord] ICE Notify: notifyCloudRecordStateChanged, params:${JSON.stringify({operatorId:n,MixerID:i,state:r,exParam:o})}`),this.updateRecordList({MixerID:i,state:r.value});const s=t.findMemberInfo({use:"termId",want:"userId",value:n})||"CRMCU",a=r.value;console.crlog(`[CloudRecord] CRVideo_CloudMixerStateChanged.target(${i},${a},${JSON.stringify(o)},${s})`),e.CRVideo_CloudMixerStateChanged.target(i,a,o,s)},notifyCloudRecordCfgChanged:(t,n,i)=>{i=JSON.parse(i),console.crlog(`[CloudRecord] ICE Notify: notifyCloudRecordCfgChanged, params:${JSON.stringify({operatorId:t,MixerID:n,jsonCfg:i})}`),this.updateRecordList({MixerID:n,jsonCfg:i}),console.crlog(`[CloudRecord] CRVideo_CloudMixerInfoChanged.target(${n})`),e.CRVideo_CloudMixerInfoChanged.target(n)},notifyCloudRecordFileState:(t,n)=>{n=JSON.parse(n),console.crlog(`[CloudRecord] ICE Notify: notifyCloudRecordFileState, params:${JSON.stringify({MixerID:t,jsonState:n})}`),console.crlog(`[CloudRecord] CRVideo_CloudMixerOutputStateChanged.target(${t}, ${JSON.stringify(n)})`),e.CRVideo_CloudMixerOutputStateChanged.target(t,n)}}}initSDKInterface(){e.CRVideo_CreateCloudMixer=e=>new Promise(((t,i)=>{try{console.crlog(`[CloudRecord] CRVideo_CreateCloudMixer(${JSON.stringify(e)})`)}catch(e){return console.error(e),i({errCode:5,errDesc:"参数格式错误",err:e.toString()})}const r=n.generateUUID().replace(/-/g,"");this.userCfg2IceCfg(e).then((e=>{__Rtc.CRICEAPI.StartCloudRecord(r,JSON.stringify(e)).then((e=>t({errCode:0,errDesc:"success",ID:r})),(e=>(console.error(e),i(__Rtc.CRCONFERR.Parse(e)))))}),(e=>i(e)))})),e.CRVideo_DestroyCloudMixer=e=>new Promise(((t,n)=>{console.crlog(`[CloudRecord] CRVideo_DestroyCloudMixer(${e})`),__Rtc.CRICEAPI.StopCloudRecord(e).then((e=>t({errCode:0,errDesc:"success"})),(e=>(console.error(e),n(__Rtc.CRCONFERR.Parse(e)))))})),e.CRVideo_UpdateCloudMixerContent=(e,t)=>new Promise(((n,i)=>{try{console.crlog(`[CloudRecord] CRVideo_UpdateCloudMixerContent(${e},${JSON.stringify(t)})`)}catch(e){return console.error(e),i({errCode:5,errDesc:"参数格式错误",err:e.toString()})}this.cloudRecordList.forEach((r=>{if(r.MixerID==e){if(1==r.jsonCfg.mode)for(var o in t)r.jsonCfg[o]=t[o];__Rtc.CRICEAPI.UpdateCloudRecord(e,r.jsonCfg).then((e=>n({errCode:0,errDesc:"success"})),(e=>(console.error(e),i(__Rtc.CRCONFERR.Parse(e)))))}}))})),e.CRVideo_GetCloudMixerInfo=e=>{console.crlog(`[CloudRecord] CRVideo_GetCloudMixerInfo(${e})`);const t={};return this.cloudRecordList.forEach((n=>{if(n.MixerID==e){const e=this.IceCfg2UserCfg(n.jsonCfg);t.ID=n.MixerID,t.owner=e.owner||"",t.cfg=e,t.state=n.state,delete t.cfg.clientType,delete t.cfg.storageConfig,t.cfg.owner&&delete t.cfg.owner}})),console.crlog(`[CloudRecord] CRVideo_GetCloudMixerInfo, return: ${JSON.stringify(t)}`),t},e.CRVideo_GetAllCloudMixerInfo=()=>{console.crlog("[CloudRecord] CRVideo_GetAllCloudMixerInfo()");const e=[];return this.cloudRecordList.forEach((t=>{if(0!==t.state){const n=this.IceCfg2UserCfg(t.jsonCfg);delete n.clientType,delete n.storageConfig;const i={ID:t.MixerID,owner:n.owner||"",cfg:n,state:t.state};i.cfg.owner&&delete i.cfg.owner,e.push(i)}})),console.crlog(`[CloudRecord] CRVideo_GetAllCloudMixerInfo, return: ${JSON.stringify(e)}`),e}}initRecord(e){if(e.confInfo&&e.confInfo.cloud_record){const n=JSON.parse(e.confInfo.cloud_record);for(var t in n)this.cloudRecordList.push({MixerID:t,jsonCfg:JSON.parse(n[t].jsonCfg||"{}"),state:n[t].state})}}updateRecordList(e){const t=this.cloudRecordList.findIndex((t=>t.MixerID==e.MixerID));if(-1!==t)if(0==e.state)this.cloudRecordList.splice(t,1);else for(var n in e)this.cloudRecordList[t][n]=e[n];else{const t={};for(var n in e)t[n]=e[n];this.cloudRecordList.push(t)}}userCfg2IceCfg(e){return new Promise(((n,i)=>{const r={clientType:1};if(r.owner=t.userInfo.termId,r.storageConfig={userNetDiskId:t.multiProject.userId},r.mode=e.mode||0,1==r.mode){if(e.audioFileCfg){r.audioFileCfg={svrPath:e.audioFileCfg.svrPath?e.audioFileCfg.svrPath:"",svrFileNameSuffix:e.audioFileCfg.svrFileNameSuffix?e.audioFileCfg.svrFileNameSuffix:".mp3"},r.audioFileCfg.subscribeAudios=[];try{e.audioFileCfg.subscribeAudios&&e.audioFileCfg.subscribeAudios.forEach((e=>{if("_cr_all_"===e)r.audioFileCfg.subscribeAudios.push(e);else{const n=t.findMemberInfo({use:"userId",want:"termId",value:e});if(!n)return i({errCode:5,errDesc:`参数错误，未找到用户: ${e}`,err:err.toString()});r.audioFileCfg.subscribeAudios.push(n)}}))}catch(e){return console.error(e),i({errCode:5,errDesc:'"subscribeAudios"参数错误',err:e.toString()})}}if(e.videoFileCfg){r.videoFileCfg={svrPath:e.videoFileCfg.svrPath?e.videoFileCfg.svrPath:"",svrFileNameSuffix:e.videoFileCfg.svrFileNameSuffix?e.videoFileCfg.svrFileNameSuffix:".mp4",aStreamType:e.videoFileCfg.aStreamType?e.videoFileCfg.aStreamType:0},r.videoFileCfg.subscribeVideos=[];try{e.videoFileCfg.subscribeVideos&&e.videoFileCfg.subscribeVideos.forEach((e=>{if("_cr_all_"===e||"_cr_allDefCam_"===e)r.videoFileCfg.subscribeVideos.push(e);else{const n=e.split(".")[0],o=e.split(".")[1]||0,s=t.findMemberInfo({use:"userId",want:"termId",value:n});if(!s)return i({errCode:5,errDesc:`参数错误，未找到用户: ${n}`,err:err.toString()});r.videoFileCfg.subscribeVideos.push(`${s}.${o}`)}}))}catch(e){return console.error(e),i({errCode:5,errDesc:'"subscribeVideos"参数错误',err:e.toString()})}}}return n(r)}))}IceCfg2UserCfg(e){const n={};n.mode=e.mode,e.owner&&(n.owner=t.findMemberInfo({use:"termId",want:"userId",value:e.owner})),n.audioFileCfg=e.audioFileCfg||{},n.videoFileCfg=e.videoFileCfg||{};const i=[];return n.videoFileCfg.subscribeVideos&&n.videoFileCfg.subscribeVideos.forEach((e=>{if("_cr_all_"!==e&&"_cr_allDefCam_"!==e){const n=e.split(".")[0],r=e.split(".")[1]||0,o=t.findMemberInfo({use:"termId",want:"userId",value:n})||"";i.push(`${o}.${r}`)}})),n.videoFileCfg.subscribeVideos=i,n}},e.__Rtc.CRRTCCloudRecord=new e.__crCloudRecordClass,e.CRVideo_CloudMixerStateChanged=new t.CbProxy("CRVideo_CloudMixerStateChanged"),e.CRVideo_CloudMixerInfoChanged=new t.CbProxy("CRVideo_CloudMixerInfoChanged"),e.CRVideo_CloudMixerOutputStateChanged=new t.CbProxy("CRVideo_CloudMixerOutputStateChanged")})(window,CRVideo,Ice)},3301:()=>{!function(e,t,n){e.__crConferenceClass=class{constructor(){console.crlog("[Audio] ConferenceModule initData..."),this.initData(),this.initIceCallback(),this.initSDKInterface()}initData(){}initIceCallback(){this.ICECallback={nicknameChanged:(t,n,i,r)=>{console.crlog(`[Conference] ICE Callback --\x3e nicknameChanged, params:${JSON.stringify({operatorID:t,termID:n,newNickname:i})}`);const o=CRVideo.allMemberInfo.find((e=>e.termId==n));if(!o)return;const s=o.nickname;if(o.nickname=i,n==CRVideo.userInfo.termId&&(CRVideo.userInfo.nickname=i),__Rtc.CRRTCUI.videoContainerList.forEach((e=>{if(e._userID==o.userId){let t=e.nickNameContent||e._nicknameEle.innerText;t=t.replace(s,i),e.nickNameContent&&(e.nickNameContent=t),e._nicknameEle.innerText=t}})),__Rtc.CRRTCUI.screenContainerList.forEach((e=>{if(e._userID==o.userId){let t=e.nickNameContent||e._nicknameEle.innerText;t=t.replace(s,i),e.nickNameContent&&(e.nickNameContent=t),e._nicknameEle.innerText=t}})),__Rtc.CRRTCMedia.container&&__Rtc.CRRTCMedia.container._userID==o.userId){let e=__Rtc.CRRTCMedia.container.nickNameContent||__Rtc.CRRTCMedia.container._nicknameEle.innerText;e=e.replace(s,i),__Rtc.CRRTCMedia.container.nickNameContent&&(__Rtc.CRRTCMedia.container.nickNameContent=e),__Rtc.CRRTCMedia.container._nicknameEle.innerText=e}console.crlog(`[Conference] CRVideo_NotifyNickNameChanged.target(${o.userId},${s},${i})`),e.CRVideo_NotifyNickNameChanged.target(o.userId,s,i)}}}initSDKInterface(){e.CRVideo_Kickout=e=>{console.crlog(`[Conference] CRVideo_Kickout(${e})`);return new Promise(((t,i)=>{const r=n.findMemberInfo({want:"termId",use:"userId",value:e});__Rtc.CRICEAPI.Kickout(r).then((n=>{const i={errCode:0,userID:e};return console.crlog(`[Conference] CRVideo_Kickout, success! userID:${JSON.stringify(i)}`),t(i)}),(e=>(console.crlog(`[Conference][Error] CRVideo_Kickout, fail! userID:${e}`),i({errCode:1,errDesc:e}))))}))},e.CRVideo_SetNickName=(e,t)=>{console.crlog(`[Conference] CRVideo_SetNickName(${e},${t})`);return new Promise(((i,r)=>{const o=n.findMemberInfo({want:"termId",use:"userId",value:e});__Rtc.CRICEAPI.ChangeNickname(o,t).then((n=>{const r={errCode:0,userID:e,newname:t};return console.crlog(`[Conference] CRVideo_SetNickName, success! ${JSON.stringify(r)}`),i(r)}),(e=>(console.crlog(`[Conference] CRVideo_SetNickName, fail! ${e}`),r({errCode:1,errDesc:e}))))}))}}},e.__Rtc.CRRTCConf=new e.__crConferenceClass,e.CRVideo_NotifyNickNameChanged=new n.CbProxy("CRVideo_NotifyNickNameChanged")}(window,Ice,CRVideo)},724:()=>{((e,t,n)=>{class i{constructor(e){this._id=n.generateUUID(),this._height="100%",this._width="100%",this._left="0px",this._top="0px",this._handler=null,this._isPlaying=!1,this._playBtnImgBase64="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAACWCAYAAAA8AXHiAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAA6TSURBVHhe7Z0JcFXVGccTIWoVk3fvOee+BAJhiYDYgkqnWrdalVLrYEEdKy5oXREwiBUruOAy2lFQAWlJ3SibA6NMBATFSUBZSyKC1Q4FAoqhFAIaAgRCEkK/793zxLwcwkvylnvO/f4zv3F59917zvn+uWd5Z0nxsdratp1t285FthA3Ag8yJp6xOZ9iczEbWAAU2YyvgH9+1gD3/xUBeA1cy6eEvgv3CN0L7wn3xme4jyIZqV69ep3KOe9u2+J6MMETwAybieVgiuKQUeJDMTzjU8b5dHjeWHw2pgHTIpNF0lBt0oXoxphzK7xJJkGQC4GSHwU9WWAaCi0mJkLabsE0YlrdJJO8qjR4I/QFIz0CwXtfBlEVXC+BaSzANEPaz4c8UNXpFWH1YnH+MFQ7iyKCph+hPPBRkKezZfZIiVRWVtYZ0EAeBMGY2Sg4hsC4Mx2qy4GYV5ltUrwkhMiEv+g8KHjskSkDYiCF0NMc4ThOUBYDKVYKBAI52JuDHtYqRcH7AsYg7zYfi2Uhi4XUUkFbI8s1lFitKmw/4pYFH4tvb1lMpGgVDAbPxNe/cnCScGFiORNiOJaVLDZSEzolwPm18Nr/SFmYRCOgrD6EXvE1WHZuEZIaCBqnXaGg8iMLjoiaqRnBYGdZnCRQmm2LO6DaW6koLKI5YNMByhLK1N8DrZbVviNj4i1lIREth4k35I/gvlMq9PiugUJY1qhQiFixzBKiP5a1W+SGKycn53TsLkPGdfgtT3dKoGock5ube5osfjOF41KM838oCoCII1Dm04wduQ84Tm9oXNIwQrLAYQkr+FMZDjPEGLuKBjs9AA6qMnalDIvesji/iXHxT2VGiYQTioUQN8rw6Ckw1T2QGWqkew9o1PO7ZJj0EmPO0FAG1Bkjkk8JxkiGSwulWozdjwmPyAjhPUowVhgzN3TeVSq+YjHBERkgvAuOdd2JsXND6EGF1tTFd0kVER+Kcaq3DKO3BN3YX1PvT18wdpzzX8lwekOWFTwXx0hUCSY0golPbTvzHBnW5CozM1NAgvRfekW4MPFBu6wsLsObLPVNo2kvBsLEGxDcNDfGSZDFxGhlwgjtwUXAMsyJFWPOVZAAGlYwlxLskMlwJ0busixfLRr1K4WJnG7Txub8b4pEECZi8ykYczf0cRTOVlAmgDAWjLkMf3xk23YH6DF8ono4YTTLsPkjbRB74YZhiocSfoCJl6UNYiuceah8IOEb4K11ubRDbOSurBHzIx9E+A1ekBLLFT84rUL9IMJ32GKItEXrlJ6eDT1OsbTRAwi/UpSRkWFJe7Rc8Pp7SHFzws/YYoS0R8vUzp25QNNhiIaAJ9Ab0ibNF72tiBPS0rcW1KMBuAFt2kGciGWWZWVIu0QvW5jVE7zwoou/HD9+QtmiRYu+W7r0k4q5c+eW540cubVjp86fq64noqAFPcS2UI9+oLyZZnTI7vj5jBkzdx05cqT+mEK7du068tCoUduEE1R+n2iSBegV1zJRSM61Ut1IK8BU69asWVMpPdSk1q1bt7/fb/r/W3Uf4sQwxq6Qtjm5oNGOR6spb6QTU/Pzd0rfRKWampr62e+8s7tHj57rVfcjGsMYnyxt07TkJD7t1wZ279Fzw4EDB+qkZ5qlvXv31jz22Jivg5nt16nuTRyHcbE2qj3n4W2FK5mVN9GJ+4c+UCp90mJt2PDFgQEDrtuouj/xI9wNdZvUKdBon6P8sma8+NJLZdIfrRJWj+++9155z3N6bVA9hwgxG73jWkgheKV1g4uMWCAx4ZVXdkhvxEQVFRW1T40b940TzKTqsTElTe4xD+2rexVf0pJYGyusjRs3Hhx0/Q3/UT3T35x4v61UuMCY8//iZSxUbW1t/fz5C/b27nPeF6pn+xHctFj6qKFwmY9Jm3rE01hhVVZW1j7//Avftu+Q7fvqEbyzJku1NN/i/HeqL+hKIowV1ubNm6tuunnwJi4cZVr8gmWFDixoKIuJp1UX60oijYU6evToscWLF3933gV9fVw98ielnX4Qtq+MmtOeaGOFVVVVVTdhwstl+HOSKl2GU4Beci0FwtF2HEFVXKgtyTJWWFu3bj08ZMgdm/1UPWIbPRgMOtJW7m58qgt1JtnGQmH1WFhY9D1O2VGl0UTgJXV8V0DGxDDVRTrjBWOFhdXj5Nde25HdsZPxc78abPENxpqkukhnvGSssL4tKzt81z33blGl1xSgE/iKtFVKiimT+n6MF40V1ooVKyouufQyU6tHnPwHprLtdBzcUlygNV42Furw4cNH8/Nf39m5S1ejqkf0khCiHfYIu6su0B2vGyusnTt3Vg8bPrzUpKnR4KmzjZmGHIkuxkLV19cfW7VqdeUVV171lSovuhGarhxg7BbVh7qjk7HCqq6urn972rRdXbp203pqtMX5zcYuStXRWGHt3l1eo/fKIZ6HQw3PqT/UG52NhcLq8bPP1u3v3/8a7VYOgaeeTmHcmaz6UHd0N1ZYuB5y1uzZu3Nzu2tTPYKxJoKxzDxV3hRjhbV9+/bDv7jwl/9S5dVrMMbfxsHRd1Qf6o5pxkKVlpYe0mRLgNn4xnpX8YH2mGgs1IsvvlSmyq+nYGIuGus95YeaY6qxNm/ZcsjrU3HQU2QszYQ/BXl9nIuMpaHq6urqc7v38PTiWTKWhtqzZ0+N11cFhY1FjXeNtHDhwr2q/HoKbLzTcIM+qq6uPqrJD9Wh4QYaINVAOH/+qafGfaPKq9ewmHgLjEU/6XhduF9XXt7Irap8ehH3Jx0mnlV9qDsmGCv0O+GsWbt79DxHqy2UOHfG0bQZj2rt2rWVV1/dT889UYUYQRP9PKYdO3ZUPzBseKnOC11DE/0YCxq3WBXRzVgHDx6smzxlyn87de6i/eKK0KJVWkyRXOFI+pIlS77TZUpMFJQIIXLhjcXOouVfydGmTZuqBg++ZZMq/boCXlodDAbPdNcW0oLVhGrfvn21zzz77HZDt/ueHzIVymLiVcUFWuNFY+EOzHPmzN1t+A7ME6StQkecDFVcoDVeMhYujCgpKdFyYURzgTb7fdJWoW2MrlBdpDNeMRaudB456uGtfjkEKsD5ZdJW5m1siyTbWIcOHTo6dWr+Tt0XnzYH7ARmRpy8iltFFkReqDPJMhZWe0VFRRUXXXyJbzZbC8O4M0/66bhwY1LVxbqSDGNtKS09dNvtQzar0uMP+OPSTsdlCfFb9cV6kkhj4fDBCy/8hfZ7t51+0k7HhXWjSQOliTBWTW1t/bx58/b8rHcf359QgQOjZ7Vvz6SdGopxPl31JR2Jp7GwHbV+/foDA677PR05J2FCvCVt1FhQRxpxViESL2OVl5cf+dMjo7+mU8AiaOrMwoxgsAtcRMfKKYTzzd98883/+Wn4oBk0fawcCA/CNGJxRawOwsRqb/ny5RWXXna574YPoofPRO+4FjqBbCHuVH9ZL4Y+MKzVR/du27bt0B/vumeL3w9fOhmMidulfU4sPDgaWvjaH3+C88QPVlW16LDx/fv3140fP6HMDxv+txb8xabBMSdNCY+8V91EN96ANpH0SlSqq6s7tmDhwr19zruADriMEnhbvSptc3KZcrYOvnGKi4srpW+a1JdffnVw4MBBNHzQTDjnl0vbRKW20IhfqLqRbuAc8jlz5pbjXCjpoQYqLy+vGTNmLA0ftAyc1NfGtUyUsm0xRHEjbYFe3VcTJ03a8fHHH3+/YuXKfQUFBXtGP/ro16adDJFIGHNulXaJXpZlZcCXl0XejCAkRXhcjrRL82Rznqe4IUFgo324tEnz1S4zU0Bba7nqxoSvWZaenm5Lm7RM9NYiImnV2yqs9PRsG262NPLmhG8pzMjICEh7tE7QQzTiZx6i9UT18020ysnJOR1uOj/yIYTf4AUpubmnSVvERqZuHkJET3NH2aOWxcRE1QMJH8DEy9IGsZdt2x3gAZ8qH0yYCxOfwNsqS9ogPoIHDFY+nDAWi/ObZPjjqrbwsKmRDydMhf8VYt68H5pbqlCVSGNbfqAQJ37KsCdGtuP0gwcbsfCCUFLCGLtShjuhSmVM/FmRIMIALCZGY4zdUCdavXqdyhifpkoYoS+ho3dT+qbJKCdHWAfbjH+oSiChIUwsjnpxRLwVcJzeYK6VyoQS+sD4CisYPFeG1RuCnuLVJiwb8yu4jAsX0chweksW53+ARBZHJprwPMWJGgRtqVIhgfcpEk54lxKb87sxdm4IvatUmzujFBkgvIgtRmDM3NB5X6mcczKXt8E3VR7Gyg2ZPkq1mHO/mwFlxojkUYJNFhknLZWKx9ZRb9E7YCzAVINlfPSWJUR/m/FVqowSCQTHGlUb0OosaHOdzxhfoswwEXcsKPuAEH1kOMySnG4zKzLTRLzhMxhj7WUYzFR2dvZPIKPj1AVAxBjs+T2Bq6xk8RuvVPgLGkDz5+OIO0/9Wixrt8h9pEBmZg5Nu4k9OO3FsrI6yWL2rdLgL+tumh0RA0K9vtB+68mdS+UlCSG6wev7dWWBESeHib87jtNVFicpQqdg24uGJaIHyuqjgNuWanqfdVJoc92zbCEexIlnqsIkACwbIUb8cGI8KXrh2At0l59kXKxWFq4PccuCPw7t0viuTPaDAoFAjmswx7c/CzHOV9k2fxzLQhYLKVbCv1Iw2Ego6KLIgjeYQmwWJHzhqB+VlZV1hm07g6DQZ0YEwRjg7TydMWcg5lVmm5RIQTush8X5w9DdXqQKkFaE8sBHwZu5u8weyQNKA5P9nDExGoL0PqDDBENM4/uQ5kfATOdDHtq6WSF5VW2gTZILVcltELRJEDxsk3nBaJiGIkwTnuqQLkQ3TKubZJJ2ys3NPQ2rTGgE34C9SwjuLDlGFk+zlUDVhnvkQzuQP4HPxjRgWmSySIYqDX+otYS4BNfUYW8T3iTP408jwBz498XwT5x9oVonWRz6DNtEcC38d37ou3APvFfonu6PwD79zS4l5f+L9kY9CrI2iQAAAABJRU5ErkJggg==",this.initDOM(e)}initDOM(e){const t=document.createElement("div");t.style.width="100%",t.style.height="100%",t.style.position="relative",t.style.overflow="hidden",this._handler=t;const n=document.createElement("div");n.style.position="absolute",n.style.left="20px",n.style.top="20px",n.style.padding="0 10px",n.style.height="30px",n.style.lineHeight="30px",n.style.color="#fff",n.style.fontSize="12px",n.style.zIndex="2",n.style.fontWeight="800",n.style.backgroundColor="rgb(0, 0, 0)",n.style.borderRadius="15px",n.style.filter="alpha(opacity:50)",n.style.display="none",this._handler.appendChild(n),this._nicknameEle=n;const i=document.createElement("video");i.style.width="100%",i.style.height="100%",i.autoplay=!0,i.muted=!0,i.playsInline=!0,i.playsinline=!0,"iOS"!=__Rtc.CRBrowser.curBrowserCfg.platform&&"media"!=e||(i.controls=!0);const r=!!__Rtc.CRBrowser.weixin.isWeixin&&__Rtc.CRBrowser.weixin.weixinVer.split(".");if(r&&+`${r[0]}${r[1]}${r[2]}`>=8014){const e=document.createElement("img");e.src=this._playBtnImgBase64,e.style.position="absolute",e.style.width="20%",e.style.left="50%",e.style.top="50%",e.style.transform="translate(-50%, -50%)",e.style.transition="all 0.8s ease",e.style.zIndex="3",this._playBtnImg=e,this._handler.appendChild(e),e.onclick=e=>{console.crlog(`[UI] ${this._id} videoPlayImg onclick`),this._isPlaying||i.play()}}this._handler.appendChild(i),this._videoEle=i,i.onplaying=e=>{this._playBtnImg&&(this._playBtnImg.style.opacity=0),this._isPlaying=!0},i.onplay=e=>{},i.onpause=e=>{console.crlog(`[UI] ${this._id} onpause`),this._playBtnImg&&(this._playBtnImg.style.opacity=1),this._isPlaying=!1},i.onload=e=>{console.crlog(`[UI] ${this._id} onload`)},i.onerror=e=>{console.crlog(`[UI] ${this._id} onerror`),this._isPlaying=!1},i.onended=e=>{console.crlog(`[UI] ${this._id} onended`),this._isPlaying=!1},i.onclick=e=>{i.srcObject&&i.srcObject.active&&i.play()}}id(e){if(void 0===e)return this._id;this._id=e}height(e){if(void 0===e)return this._handler.style.height;this._handler.style.height=e}width(e){if(void 0===e)return this._handler.style.width;this._handler.style.width=e}left(e){if(void 0===e)return this._handler.style.left;this._handler.style.left=e}top(e){if(void 0===e)return this._handler.style.top;this._handler.style.top=e}handler(){return this._handler}show(){try{console.crlog(`[UI] Container:${this._id}, show()`)}catch(e){console.error(e)}this._handler.style.display="block","video"==this.type&&__Rtc.CRRTCRemoteVideo.updateSubscribeVideo()}hide(){try{console.crlog(`[UI] Container:${this._id}, hide()`)}catch(e){console.error(e)}this._handler.style.display="none","video"==this.type&&__Rtc.CRRTCRemoteVideo.updateSubscribeVideo()}isPicEmpty(){return this._videoEle.srcObject?1:0}setNickNameStyle(e){try{console.crlog(`[UI] Container:${this._id}, setNickNameStyle(${JSON.stringify(e)})`)}catch(e){console.error(e)}this.nickNameStyle=e;const t=this._nicknameEle;if(null!=t&&e&&"object"==typeof e)for(var n in e)t.style[n]=e[n]}setNickNameContent(e){console.crlog(`[UI] Container:${this._id}, setNickNameContent(${e})`);const t=this._nicknameEle;null!=t&&(t.innerHTML=e),this.nickNameContent=e}setVisibleNickName(e){try{console.crlog(`[UI] Container:${this._id}, setVisibleNickName(${e})`)}catch(e){console.error(e)}const t=this._nicknameEle;t.style.display=e?"block":"none"}setVideoProp(e){try{console.crlog(`[UI] Container:${this._id}, setVideoProp(${JSON.stringify(e)})`)}catch(e){console.error(e)}try{const t=this._videoEle;if(e)for(let n in e)if("style"==n)for(let i in e[n])t.style[i]=e[n][i];else t[n]=e[n]}catch(e){console.error(e)}}dblClickFullScreen(e){try{console.crlog(`[UI] Container:${this._id}, dblClickFullScreen(${e})`)}catch(e){console.error(e)}const t=this._videoEle;let n=!1;return void 0!==e?e&&0==t.controls?(t.ondblclick=function(){this.webkitRequestFullScreen&&0==t.controls?this.webkitRequestFullScreen():this.mozRequestFullScreen&&0==t.controls?this.mozRequestFullScreen():this.msRequestFullScreen&&0==t.controls&&this.msRequestFullScreen()},n=!0):e?t.controls&&(n=!1):(t.ondblclick=null,n=!1):n=!!t.ondblclick,n}savePic(t){try{console.crlog(`[UI] Container:${this._id}, savePic(${t})`)}catch(e){console.error(e)}let n="png";if(!t)return;switch(t){case t.indexOf(".png")>-1:n="png";break;case t.indexOf(".jpg")>-1:n="jpg";break;case t.indexOf(".jpeg")>-1:n="jpeg";break;case t.indexOf(".bmp")>-1:n="bmp";break;case t.indexOf(".gif")>-1:n="gif";break;default:n="png"}const i=this._videoEle;if(null==i.srcObject||0==i.srcObject.active)return console.crlog(`[UI] Container:${this._id}, savePic fail, this video have not videoStream!`);const r=e.canvas=document.createElement("canvas");r.width=i.videoWidth,r.height=i.videoHeight,r.getContext("2d").drawImage(i,0,0,r.width,r.height);let o=r.toDataURL("image/"+n).split(","),s=o[0].match(/:(.*?);/)[1],a=atob(o[1]),c=a.length,l=new Uint8Array(c);for(;c--;)l[c]=a.charCodeAt(c);const d=new Blob([l],{type:s}),u=e.URL.createObjectURL(d),h=document.createElement("a");h.style.display="none",h.href=u,h.download=t,document.body.appendChild(h),h.click(),setTimeout((function(){document.body.removeChild(h),e.URL.revokeObjectURL(u)}),1e3)}savePicToBase64(t,n){try{console.crlog(`[UI] Container:${this._id}, savePicToBase64(${t},${JSON.stringify(n)})`)}catch(e){console.error(e)}const i=this._videoEle;if(null==i.srcObject||0==i.srcObject.active)return console.crlog(`[UI] Container:${this._id}, savePic fail, this video have not videoStream!`);const r=e.canvas=document.createElement("canvas");r.width=n&&n.width?n.width:i.videoWidth,r.height=n&&n.height?n.height:i.videoHeight,r.getContext("2d").drawImage(i,0,0,r.width,r.height);return r.toDataURL("image/"+t)}keepAspectRatio(e){}}class r extends i{constructor(e){super(),this._videoID=-1,this.type="video"}getVideoID(){return this._videoID}clear(){console.crlog(`[UI] Container:${this._id}, clear()`),this._videoEle&&(this._videoEle.srcObject=null)}setVideo(e,t){void 0===t&&(t=-1),console.crlog(`[UI] Video Container:${this._id}, setVideo(${e},${t})`);const n=this._videoID||null,i=this._userID||"";if(this._userID=e,this._videoID=t,0==t&&e!==CRVideo.userInfo.userId&&null!==n)return __Rtc.CRRTCRemoteVideo.unSubscibevideo(i,n),void this.clear();const r=CRVideo.allMemberInfo.find((t=>t.userId==e));this.nickNameContent?this._nicknameEle.innerHTML=this.nickNameContent:this._nicknameEle.innerHTML=r?r.nickname:e;__Rtc.CRRTCUI.videoContainerList.find((e=>e._id==this._id))||__Rtc.CRRTCUI.videoContainerList.push(this),e==CRVideo.userInfo.userId?__Rtc.CRRTCLocalVideo.refreshLocalContainerSrc(this):(r&&r.defaultCam&&(-1===t?__Rtc.CRRTCRemoteVideo.updateConnectList(r.termId,r.defaultCam,this):__Rtc.CRRTCRemoteVideo.updateConnectList(r.termId,t,this),__Rtc.CRRTCRemoteVideo.updateSubscribeVideo()),__Rtc.CRRTCRemoteVideo.refreshContainerSrc(this))}destroy(){console.crlog(`[UI] Video Container:${this._id}, destroy()`),this._videoEle=null,this._handler=null;const e=__Rtc.CRRTCUI.videoContainerList.findIndex((e=>e._id==this._id));-1!==e&&(console.crlog(`[UI] UserID:${this._userID}, container:${this._id} be destroyed...`),__Rtc.CRRTCUI.videoContainerList.splice(e,1),__Rtc.CRRTCRemoteVideo.updateSubscribeVideo())}}class o{constructor(e){this._penType={1:"Pencil"},this._init(e)}_init(e){const t=document.createElement("canvas"),n=t.getContext("2d");this._screenContainer=e.screenContainer,this._parentNode=e.screenContainer._handler,this._parentNode.appendChild(t),t.style.position="absolute",t.style.top=0,t.style.left=0,t.style.width="100%",t.style.height="100%",t.style.display="none",this._lastStyle={parentStyle:{width:0,height:0},canvasStyle:{width:0,height:0}},this._canvas=t,this._ctx=n,this._markDataList=[],this._lineWidth=e.lineWidth,this._strokeStyle=e.strokeStyle,this._type=e.type,this._allowMark=e.allowMark,this._cursor=e.cursor,this._canvas.style.cursor=this._cursor,console.crlog(`[UI] ContainerID:${this._screenContainer._id}, canvasContainer init...`)}_loadEvent(){const{_ctx:e,_canvas:t}=this;t.onmousedown=n=>{if(!this._allowMark)return;e.lineWidth=this._lineWidth;const i=t.width/t.offsetWidth;var r=[{x:parseInt(n.offsetX*i),y:parseInt(n.offsetY*i)}];t.onmousemove=t=>{var n=parseInt(t.offsetX*i),o=parseInt(t.offsetY*i);e.beginPath();const{x:s,y:a}=r[r.length-1];e.moveTo(s,a),e.lineTo(n,o),r.push({x:n,y:o}),e.stroke()},document.onmouseup=()=>{const e=this._encode(r);this._sendData(e),t.onmousemove=null,document.onmouseup=null}}}_loadImg(e){var t=new Image;t.src=e,t.onload=()=>{this._canvas.style.position="absolute",this._canvas.style.width="100%",this._canvas.style.height="100%",this._canvas.style.top="0px",this._canvas.style.left="0px",this._canvas.width=t.width,this._canvas.height=t.height,this._ctx.strokeStyle=this._strokeStyle,this._ctx.lineWidth=this._lineWidth,this._loadEvent(),this.resize()},this._img=t,console.crlog(`[UI] ContainerID:${this._screenContainer._id}, canvasContainer loadImg...`)}_setCursor(e){this._canvas.style.cursor=e}_encode(e){const{lineWidth:t,strokeStyle:i}=this._ctx,r=n.generateUUID(),o=e.length,s=this._type||1,a=parseInt(i.substr(1,2),16),c=parseInt(i.substr(3,2),16),l=parseInt(i.substr(5,2),16),d=new ArrayBuffer(4*o+8),u=new Uint8Array(d);u.set([0,l,c,a,t>>8,255&t,o>>8,255&o]);let h=[];for(;e.length>0;){const t=e.shift();h.push(t.x>>8),h.push(255&t.x),h.push(t.y>>8),h.push(255&t.y)}return u.set(h,8),console.crlog(`[UI] ContainerID:${this._screenContainer._id}, canvasContainer encode markData...`),{mousePosSeq:u,markid:r,type:s}}_sendData(e){console.crlog(`[UI] ContainerID:${this._screenContainer._id}, canvasContainer send mark data...`),e.termid=CRVideo.userInfo.termId,__Rtc.CRICEAPI.SendMarkDataV4(e)}_drawAllMarkData(e){console.crlog(`[UI] ContainerID:${this._screenContainer._id}, canvasContainer drawAllMarkData...`),e.length>0&&(this._markDataList=[]),e.forEach((e=>{const t=__Rtc.CRRTCScreen.parseMarkData(e);this._markDataList.push(t),t.data.length&&this._drawData(t)}))}_drawData(e){if(console.crlog(`[UI] ContainerID:${this._screenContainer._id}, canvasContainer _drawData...`),!this._penType[e.type])return console.crlog("[UI][Error] 画笔未定义,类型: "+e.type);this._ctx.save(),e.data.length&&(this["_draw"+this._penType[e.type]](e),this._ctx.restore())}_drawPencil(e){console.crlog(`[UI] ContainerID:${this._screenContainer._id}, canvasContainer _drawPencil...`);const t=this._ctx,n=e.data;t.strokeStyle=e.color,t.lineWidth=e.width,t.beginPath(),t.moveTo(n[0].x,n[0].y);for(let e=3;e<n.length;e++)t.lineTo(n[e].x,n[e].y);t.stroke()}set(e,t){console.crlog(`[UI] ContainerID:${this._screenContainer._id}, canvasContainer set, ${e}:${t}`);const{_ctx:n,_canvas:i}=this;"strokeStyle"===e||"lineWidth"===e?n[e]=t:"cursor"===e?i.style.cursor=t:"allowMark"===e&&(this._allowMark=!!t)}resize(){console.crlog(`[UI] ContainerID:${this._screenContainer._id}, canvasContainer resize...`);const{_canvas:e,_ctx:t,_img:n,_parentNode:i}=this;let{width:r,height:o,clientWidth:s,clientHeight:a}=e;const{offsetWidth:c,offsetHeight:l}=i;if(this._lastStyle.parentStyle.width=c,this._lastStyle.parentStyle.height=l,this._lastStyle.canvasStyle.width=s,this._lastStyle.canvasStyle.height=a,e.style.width="100%",e.style.height="100%",e.style.position="absolute",e.style.top="0px",e.style.left="0px",s=e.clientWidth,a=e.clientHeight,r/o>s/a){const t=o/(r/s),n=(a-t)/2;e.style.height=t+"px",e.style.top=n+"px"}else{const t=r/(o/a),n=(s-t)/2;e.style.width=t+"px",e.style.left=n+"px"}this._markDataList.forEach((e=>{this._drawData(e)}))}clearAllMark(){console.crlog(`[UI] ContainerID:${this._screenContainer._id}, canvasContainer clearAllMark...`);const{_canvas:e}=this,t=e.width,n=e.height;e.width=t,e.height=n,this._markDataList=[]}savePic(t){var n="png";switch(t){case t.indexOf("png")>-1:n="png";break;case t.indexOf("jpg")>-1:n="jpg";break;case t.indexOf("jpeg")>-1:n="jpeg";break;case t.indexOf("bmp")>-1:n="bmp";break;case t.indexOf("gif")>-1:n="gif";break;default:n="png"}for(var i=this._canvas.toDataURL("image/"+n).split(","),r=i[0].match(/:(.*?);/)[1],o=atob(i[1]),s=o.length,a=new Uint8Array(s);s--;)a[s]=o.charCodeAt(s);var c=new Blob([a],{type:r}),l=e.URL.createObjectURL(c),d=document.createElement("a");d.style.display="none",d.href=l,d.download=t,document.body.appendChild(d),d.click(),setTimeout((function(){document.body.removeChild(d),e.URL.revokeObjectURL(l)}),1e3)}savePicToBase64(e="png"){return this._canvas.toDataURL("image/"+e)}}class s extends i{constructor(){super(),this.type="screen",this.canvasContainer=new o({type:1,strokeStyle:"#000000",cursor:"default",lineWidth:2,allowMark:!1,screenContainer:this})}setVideo(e){console.crlog(`[UI] Screen Container:${this._id}, setVideo(${e})`),this._userID=e||"";const t=CRVideo.allMemberInfo.find((t=>t.userId==e));this.nickNameContent?this._nicknameEle.innerHTML=this.nickNameContent:this._nicknameEle.innerHTML=t?t.nickname:e;__Rtc.CRRTCUI.screenContainerList.find((e=>e._id==this._id))||__Rtc.CRRTCUI.screenContainerList.push(this),this._videoEle.onplaying=()=>{this.canvasContainer._canvas.height=this._videoEle.videoHeight,this.canvasContainer._canvas.width=this._videoEle.videoWidth,this.canvasContainer._drawAllMarkData(__Rtc.CRRTCScreen.allMarkDataList);const e=this.savePicToBase64();e&&this.canvasContainer._loadImg(e)},__Rtc.CRRTCScreen.refreshContainerSrc()}setMark(e){try{console.crlog(`[UI] Screen Container:${this._id}, setMark(${JSON.stringify(e)})`)}catch(e){console.error(e)}this.canvasContainer._allowMark=void 0===e.allowMark?this.canvasContainer._allowMark:e.allowMark,this.canvasContainer._type=void 0===e.type?this.canvasContainer._type:e.type,this.canvasContainer._strokeStyle=void 0===e.strokeStyle?this.canvasContainer._strokeStyle:e.strokeStyle,this.canvasContainer._lineWidth=void 0===e.lineWidth?this.canvasContainer._lineWidth:e.lineWidth,this.canvasContainer._cursor=void 0===e.cursor?this.canvasContainer._cursor:e.cursor,this.canvasContainer.set("strokeStyle",this.canvasContainer._strokeStyle),this.canvasContainer.set("lineWidth",this.canvasContainer._lineWidth),this.canvasContainer.set("cursor",this.canvasContainer._cursor),"true"==this.canvasContainer._allowMark&&__Rtc.CRRTCScreen.isMarking?this.canvasContainer._canvas.style.display="block":"false"!=this.canvasContainer._allowMark||__Rtc.CRRTCScreen.isMarking||(this.canvasContainer._canvas.style.display="none")}markResize(){console.crlog(`[UI] Screen Container:${this._id}, markResize()`),this.canvasContainer.resize()}destroy(){console.crlog(`[UI] Screen Container:${this._id}, destroy()`);const e=__Rtc.CRRTCUI.screenContainerList.findIndex((e=>e._id==this._id));-1!==e&&(console.crlog(`[UI] Screen Container:${this._id} be destroyed...`),__Rtc.CRRTCUI.screenContainerList.splice(e,1))}}class a extends i{constructor(){super("media"),this.type="media"}setVideo(e){console.crlog(`[UI] Media Container:${this._id}, setVideo(${e})`),this._userID=e;const t=CRVideo.allMemberInfo.find((t=>t.userId==e));this.nickNameContent?this._nicknameEle.innerHTML=this.nickNameContent:this._nicknameEle.innerHTML=t?t.nickname:e,__Rtc.CRRTCMedia.refreshContainerSrc()}}e.__crUIClass=class{constructor(){console.crlog("[UI] UIModule initData..."),this.initData(),this.initSDKInterface()}initData(){this.videoContainerList=[],this.screenContainerList=[]}initSDKInterface(){e.CRVideo_CreatVideoObj=e=>{try{console.crlog(`[UI] CRVideo_CreatVideoObj(${JSON.stringify(e)})`)}catch(e){console.error(e)}const t=new r,n=t._videoEle;try{if(e)for(let t in e)if("style"==t)for(let i in e[t])n.style[i]=e[t][i];else n[t]=e[t]}catch(e){console.error(e)}return t},e.CRVideo_CreatScreenShareObj=e=>{try{console.crlog(`[UI] CRVideo_CreatScreenShareObj(${JSON.stringify(e)})`)}catch(e){console.error(e)}const t=new s,n=t._videoEle;try{if(e)for(let t in e)if("style"==t)for(let i in e[t])n.style[i]=e[t][i];else n[t]=e[t]}catch(e){console.error(e)}return t.setVideo(),t},e.CRVideo_CreatMediaObj=e=>{try{console.crlog(`[UI] CRVideo_CreatMediaObj(${JSON.stringify(e)})`)}catch(e){console.error(e)}const t=new a;__Rtc.CRRTCMedia.container=t;const n=t._videoEle;n.muted=!1,n.volume=.001;try{if(e)for(let t in e)if("style"==t)for(let i in e[t])n.style[i]=e[t][i];else n[t]=e[t]}catch(e){console.error(e)}return t}}},e.__Rtc.CRRTCUI=new __crUIClass})(window,CRVideo,Ice)},2039:()=>{var e,t;CRVideo.APPIDMode=1,CRVideo.changyiweb=!1,CRVideo.LOCAL_KEY="CRwebRTC",CRVideo.KEEPLIVE_COMMIT=!1,CRVideo.KEEPALIVE_TIMER=-1,CRVideo.REFRESH_SESSION_TIMER=-1,CRVideo.userInfo={},CRVideo.allMemberInfo=[],CRVideo.isExitmeet=!1,CRVideo.isMeeting=!1,CRVideo.isWebRTC=!0,CRVideo.mainVideoTermID=0,CRVideo.msType={localAudio:11,localVideo:12,localScreen:13,localMediaVideo:14,localMediaAudio:15,remoteVideo:22,remoteScreen:23,remoteMedia:24},CRVideo.firstEnterStatus=!1,CRVideo.meetingExiting=!1,CRVideo.callserverExiting=!1,window.enmeet={config:{controlSharkTime:3e4,refreshSessionTime:1e4}},function(e){var t,n;n={findUserInfo:function(t,n){return e.allMemberInfo.find((function(e){return e[t]==n}))}},(t=e).findUserInfo=n.findUserInfo,n.controlSharkHand=function(){__Rtc.CR__KeepAlive(1,(new Date).getTime()),clearTimeout(e.KEEPALIVE_TIMER),e.KEEPALIVE_TIMER=setTimeout(n.controlSharkHand,enmeet.config.controlSharkTime)},t.controlSharkHand=n.controlSharkHand,n.refreshSessionSharkHand=function(){__Rtc.CR__RefreshSession((new Date).getTime()),clearTimeout(e.REFRESH_SESSION_TIMER),e.REFRESH_SESSION_TIMER=setTimeout(n.refreshSessionSharkHand,enmeet.config.refreshSessionTime)},t.refreshSessionSharkHand=n.refreshSessionSharkHand,n.destroyMeetingConnect=function(){console.crlog("[Meeting] Websockt destroy meeting connect..."),e.communicatorIc&&e.communicatorIc.destroy(),e.communicatorIc=null,console.crlog("[Meeting] CRVideo.communicatorIc && CRVideo.communicatorIc.destroy();CRVideo.communicatorIc = null")},t.destroyMeetingConnect=n.destroyMeetingConnect}(CRVideo),window.userIdToTermId=function(e){var t=null;return CRVideo.allMemberInfo.forEach((function(n){n.userId==e&&(t=n.termId)})),null!=t?t:""},window.termIdToUserId=function(e){var t=null;return CRVideo.allMemberInfo.forEach((function(n){e==n.termId&&(t=n.userId)})),null!==t?t:""},window.findMemberInfo=function(e){var t=!1;return CRVideo.allMemberInfo.forEach((function(n){n[e.use]==e.value&&(t=n[e.want])})),t},CRVideo.findMemberInfo=findMemberInfo,CRVideo.initweb=function(){var e=window.sessionStorage.getItem("client_pcid")?window.sessionStorage.getItem("client_pcid"):Ice.generateUUID();CRVideo.userInfo={nickname:CRVideo.LoginParam.nick_name,userId:CRVideo.LoginParam.user_id,headerUrl:"",userCode:e,openId:""},CRVideo.urlHref=CRVideo.webServerAddr,window.sessionStorage.setItem("client_pcid",e),console.crlog("[Meeting] CRVideo.initweb"+JSON.stringify({"CRVideo.userInfo":CRVideo.userInfo,"CRVideo.urlHref":CRVideo.urlHref})),0==CRVideo.isHttp?__Rtc.CR__Init("js",{protocol:"wss",CheckFlash:!1}):__Rtc.CR__Init("js",{protocol:"ws",CheckFlash:!1})},__Rtc.CR_InitRslt.callback=function(e,t){code=0==e?"success":"fail",desc=null==t?"":t,0==e?(console.crlog("[Meeting] CR_InitRslt.callback success!"),CRVideo.loginWebMeeting()):console.crlog("[Meeting] CR_InitRslt.callback fail!")},CRVideo.loginWebMeeting=function(){var e=CRVideo.LIVE_INFO.dataStr,t=sessionStorage.getItem(CRVideo.LOCAL_KEY+"_TermId_")||"",n={};n.nickname=CRVideo.userInfo.nickname||"",n.userId=CRVideo.userInfo.userId||"";var i=CRVideo.userInfo.userCode,r=CRVideo.userInfo.openId?CRVideo.userInfo.openId:"";CRVideo.KEEPLIVE_COMMIT=!0,Cr.crmt=null,CRVideo.isExitmeet=!1;let o=JSON.parse(sessionStorage.getItem("CRWebRTCSDK_UserHistory")),s=o[CRVideo.meetingID];if(s){let a=s.find((e=>e.userId==n.userId));a?(e=a.dataStr||e,t=a.termId||t,n=a.detail||n,i=a.userCode||i,r=a.openId||r):(s.push({userId:n.userId,nickname:n.nickname,termId:t,detail:n,userCode:i,openId:r}),sessionStorage.setItem("CRWebRTCSDK_UserHistory",JSON.stringify(o)))}else s=[];__Rtc.CR__Login(e,t,n,i,r)},__Rtc.CR__LoginRslt.callback=function(e,t,n){var i=null==t||""==t?"":" ----errDesc: \n"+t;if(console.crlog("[Meeting] Login Access CallBack, errCode: "+e+i),CRVideo_UploadingLog(),"3"==e||"1"==e)console.crlog("[Meeting] 登录access未知错误: "+t);else if("800"==e)console.crlog("[Meeting] 会议不存在或已结束!");else if("801"==e)console.crlog("[Meeting] 房间密码不正确!");else if("802"==e)console.crlog("[Meeting] 房间终端数量已满（购买的license不够)!");else if("803"==e)console.crlog("[Meeting] 分配房间资源失败!");else if("804"==e)console.crlog("[Meeting] 房间已加锁!");else if("805"==e)console.crlog("[Meeting] 余额不足!");else if("806"==e)console.crlog("[Meeting] 业务权限为开启!");else if("807"==e)console.crlog("[Meeting] 重复进入了，该用户当前已在房间内！");else if("0"==e){if(CRVideo.reEnterMeetTimes=0,CRVideo.reEnterConfTimes=0,CRVideo.firstEnterStatus=!0,setTimeout((()=>{CRVideo.firstEnterStatus=!1}),3e3),CRVideo.isMeeting=!0,CRVideo.mainVideoTermID=n.mainVideoTermID||0,n.activeMembers.length<=10){const e=[];n.activeMembers.forEach((t=>{e.push({termId:t.termId,userId:t.userId,nickname:t.nickname,audioStatus:t.audioStatus.value,videoStatus:t.videoStatus.value})})),console.crlog("[Meeting] AllMembers in the meeting : "+JSON.stringify(e))}function r(e){CRVideo.rtcCfg.iceServers.forEach((t=>{let n=t.urls,i=[];t.urls=n.map((t=>{let n=String(CRVideo.stunList),r=String(e);i.push(t.replace(n,r))})),console.crlog(`[WEBRTC] New stun server urls: ${JSON.stringify(i)}`),t.urls=i}));const t=_.cloneDeep(CRVideo.rtcCfg);t.iceServers[0].credential="******",t.iceServers[0].username="******",console.crlog(`[WEBRTC] New webrtc RTCPeerConnection config: ${JSON.stringify(t)}`)}n.activeMembers.forEach((e=>{e.userId==n.userId&&CRVideo.allMemberInfo.push(e)})),n.activeMembers.forEach((e=>{e.userId!==n.userId&&CRVideo.allMemberInfo.push(e)})),__Rtc.CRRTCBoard.lastElemValue=++n.lastElemValue,__Rtc.CRRTCBoard.lastTabValue=++n.lastTabValue,CRVideo.userInfo.detail=n.myDetail,CRVideo.userInfo.termId=n.termId,CRVideo.userInfo.nickname=n.nickname,CRVideo.userInfo.userId=n.userId||CRVideo.userInfo.userId,n.confInfo&&n.confInfo.srv_record_state?(__Rtc.CRRTCRecord.svrRecordStatus=+n.confInfo.srv_record_state,__Rtc.CRRTCRecord.MixersList=JSON.parse(n.confInfo.srv_record_cfg)):__Rtc.CRRTCRecord.svrRecordStatus=0,Cr.crmt.STUNSVR?r(Cr.crmt.STUNSVR):CRVideo.accessSvr&&r(CRVideo.accessSvr+":"+CRVideo.stunList.split(":")[1]),1==CRVideo.isWebRTC&&(console.crlog(`[SDK] RTC Codecs: ${window.__Rtc.rtc_codecs}`),setTimeout((()=>{console.crlog(`[Login] LoginOAuth: ${CRVideo.callServerLoginOAuth.crPswd}`)}),100),console.crlog(`[Video] Video input devices: ${JSON.stringify(__Rtc.CRRTCLocalVideo.videoInput)}`),__Rtc.CRRTCAudio.uploadAudioDevicesStatus(),__Rtc.CRRTCLocalVideo.uploadVideoDeviceStatus(),__Rtc.CRRTCLocalVideo.uploadAllCamInfo()),CRVideo.meetingInfo=n,n.wbDescibes&&(__Rtc.CRRTCBoard.wbDescibes=n.wbDescibes),CRVideo.isWebRTC&&CRVideo.allMemberInfo.forEach((function(e){e.termId==n.termId?(e.isSelf=!0,e.userId=e.userId||CRVideo.userInfo.userId):e.isSelf=!1,e.audioStream=null,e.videoStream=null,e.screenStream=null,e.camId=null==e.openedCamIDs?null:e.openedCamIDs,e.userId=null==e.userId?e.nickname:e.userId,e.audioStatus=e.audioStatus.name,e.videoStatus=e.videoStatus.name,"family"==e.privRole?CRVideo.privRoleFamily=e.userId:"prisoner"==e.privRole&&(CRVideo.privRolePrison=e.userId)})),CRVideo.controlSharkHand(),CRVideo.refreshSessionSharkHand(),n.myDetail.userId=n.userId,sessionStorage.setItem(CRVideo.LOCAL_KEY+"_TermId_",n.termId),sessionStorage.setItem(CRVideo.LOCAL_KEY+"_USERDETAIL_",JSON.stringify(n.myDetail));let e=JSON.parse(sessionStorage.getItem("CRWebRTCSDK_UserHistory"));e[CRVideo.meetingID].forEach((e=>{e.userId==n.userId&&(e.termId=n.termId,e.detail=n.myDetail,e.userCode=CRVideo.userInfo.userCode)})),sessionStorage.setItem("CRWebRTCSDK_UserHistory",JSON.stringify(e)),console.crlog(`[Meeting] Enter meeting success, meetID:${CRVideo.meetingID}`)}else console.crlog(`[Meeting][Error] Enter meeting fail! Error:${e}`);try{console.crlog(`[MeetingMgr] CRVideo_EnterMeetingRslt.target(${e},${CRVideo.enterMeetingCookie})`),CRVideo_EnterMeetingRslt.target(e,CRVideo.enterMeetingCookie),CRVideo_UploadingLog(),0==e&&(__Rtc.CRRTCBoard.initBoards(),__Rtc.CRICEAPI.GetScreenShareInfo(),__Rtc.CRICEAPI.GetMediaInfo(),__Rtc.CRRTCSync.initSync(n),__Rtc.CRRTCCloudRecord.initRecord(n))}catch(e){console.error(e)}window.loginData=n},__Rtc.CR__RefreshSessionRslt.callback=function(e,t,n){code="0"==e?"success":"fail",desc=null==t?"":t;let i=(new Date).getTime()-n;console.crlog(`[Meeting] RefreshSessionRslt: ${code} ${desc} delay:${i}ms`),0==e&&-1!=CRVideo.REFRESH_SESSION_TIMER||-1!=CRVideo.REFRESH_SESSION_TIMER&&(clearTimeout(CRVideo.REFRESH_SESSION_TIMER),CRVideo.REFRESH_SESSION_TIMER=-1,-1==CRVideo.KEEPALIVE_TIMER||CRVideo.isExitmeet||(console.crlog("[Meeting] RefreshSession fail, meeting dropped!!!"),console.crlog(`[MeetingMgr] CRVideo_MeetingDropped.target(${CRVideo_ERR_DEF.SOCKETEXCEPTION})`),CRVideo.destroyMeetingConnect(),CRVideo_MeetingDropped.target(CRVideo_ERR_DEF.SOCKETEXCEPTION)))},__Rtc.CR__KeepAliveRslt.callback=function(e,t,n){code="0"==e?"success":"fail",desc=null==t?"":t;let i=(new Date).getTime()-n;console.crlog(`[Meeting] KeepAliveRslt: ${code} ${desc} delay:${i}ms`),0==e&&-1!=CRVideo.KEEPALIVE_TIMER||-1!=CRVideo.KEEPALIVE_TIMER&&(clearTimeout(CRVideo.KEEPALIVE_TIMER),CRVideo.KEEPALIVE_TIMER=-1,-1==CRVideo.REFRESH_SESSION_TIMER||CRVideo.isExitmeet||(console.crlog("[Meeting] KeepAlive fail, meeting dropped!!!"),console.crlog(`[MeetingMgr] CRVideo_MeetingDropped.target(${CRVideo_ERR_DEF.SOCKETEXCEPTION})`),CRVideo.destroyMeetingConnect(),CRVideo_MeetingDropped.target(CRVideo_ERR_DEF.SOCKETEXCEPTION)))},__Rtc.CR__MeetEnded.callback=function(e){console.crlog("[Meeting] Meet ended Callback!"),console.crlog("[Meeting] ----- CR__UnInit -----"),CRVideo.leftMeetingFun(),clearTimeout(CRVideo.KEEPALIVE_TIMER),clearTimeout(CRVideo.REFRESH_SESSION_TIMER),console.crlog("[MeetMgr] CRVideo_NotifyMeetEnded.target()"),console.crlog("[MeetMgr] CRVideo_MeetingStopped.target()"),CRVideo_NotifyMeetEnded.target(),CRVideo_MeetingStopped.target()},window.CRVideo_Uninit=function(){console.crlog("[SDK] CRVideo_Uninit()"),CRVideo.loginAuthFlag=0,CRVideo.webLoginOAuth={},console.crlog("[Meeting] ----- CR__UnInit -----"),__Rtc.CR__UnInit(),setTimeout((()=>{CRVideo.destroyLogConnect(),clearTimeout(CRVideo.logReportTimer)}),5e3)},e="hidden"in document?"hidden":"webkitHidden"in document?"webkitHidden":"mozHidden"in document?"mozHidden":null,t=e.replace(/hidden/i,"visibilitychange"),document.addEventListener(t,(function(){document[e]||(console.crlog("[Meeting] CRVideo.KEEPALIVE_TIMER-----"+CRVideo.KEEPALIVE_TIMER),console.crlog("[Meeting] CRVideo.REFRESH_SESSION_TIMER-----"+CRVideo.REFRESH_SESSION_TIMER),CRVideo.KEEPLIVE_COMMIT&&(-1!=CRVideo.KEEPALIVE_TIMER&&CRVideo.controlSharkHand(),-1!=CRVideo.REFRESH_SESSION_TIMER&&CRVideo.refreshSessionSharkHand(),CRVideo_ShakeHand()))})),CRVideo.updateDevicesList=e=>{__Rtc.CRRTCAudio.audioInput=[],__Rtc.CRRTCAudio.audioOutput=[],__Rtc.CRRTCLocalVideo.videoInput=[];let t=1,n=1,i=1;for(var r=0;r<e.length;r++){var o=e[r];if("audioinput"==o.kind){var s={};s.deviceId=o.deviceId,s.name=o.label||"麦克风 - 默认",s.kind=o.kind,s.id=t++,__Rtc.CRRTCAudio.audioInput.push(s)}else if("audiooutput"==o.kind){var a={};a.deviceId=o.deviceId,a.name=o.label||"扬声器 - 默认",a.kind=o.kind,a.id=n++,__Rtc.CRRTCAudio.audioOutput.push(a)}else if("videoinput"==o.kind){var c={};c.deviceId=o.deviceId||i,c.name=o.label||"摄像头 - 默认",c.kind=o.kind,c.id=i++,c.disabled=!1,c.locAttr=null,c.stream=null,c.connect=new _ConnectItemClass(c.id,__Rtc.CRRTCLocalVideo.lastLocalVideoMSID++),c.connect2=new _ConnectItemClass(c.id+1e4,__Rtc.CRRTCLocalVideo.lastLocalVideoMSID++),__Rtc.CRRTCLocalVideo.videoInput.push(c)}}__Rtc.CRBrowser.curBrowserCfg.isMobile&&__Rtc.CRRTCLocalVideo.videoInput.length>0&&(__Rtc.CRRTCLocalVideo.videoInput=[],__Rtc.CRRTCLocalVideo.videoInput.push({facingMode:"user",name:"前置镜头",kind:"video",id:1,disabled:!1,locAttr:null,stream:null,connect:new _ConnectItemClass(1,__Rtc.CRRTCLocalVideo.lastLocalVideoMSID++),connect2:new _ConnectItemClass(10001,__Rtc.CRRTCLocalVideo.lastLocalVideoMSID++)}),__Rtc.CRRTCLocalVideo.videoInput.push({facingMode:"environment",name:"后置镜头",kind:"video",id:2,disabled:!1,locAttr:null,stream:null,connect:new _ConnectItemClass(2,__Rtc.CRRTCLocalVideo.lastLocalVideoMSID++),connect2:new _ConnectItemClass(10002,__Rtc.CRRTCLocalVideo.lastLocalVideoMSID++)})),"Firefox"==__Rtc.CRBrowser.name?__Rtc.CRRTCAudio.audioOutput.push({name:"Firefox暂不支持切换扬声器",deviceId:""}):"Mac"==__Rtc.CRBrowser.curBrowserCfg.platform&&"Safari"==__Rtc.CRBrowser.curBrowserCfg.name&&__Rtc.CRRTCAudio.audioOutput.push({name:"Safari暂不支持切换扬声器",deviceId:""})},__Rtc.CR__SubscribeFocusWindow2Rslt.callback=function(e,t){e=0==e?"success":"fail",t=null==t?"":t,console.crlog("[Meeting] SubscribeFocusWindow2Rslt Callback:"+e+" "+t)},__Rtc.CR__VideoAllocRawExt2.callback=function(e,t,n,i){const r={VCT_CAMERA:"video",VCT_SCREEN:"screen",VCT_FILM:"media"}[t.contentType.name];if("video"==r)__Rtc.CRRTCVideo.videoAllocRawExt2(e,t,n,i);else{if("screen"==r)return void __Rtc.CRRTCScreen.videoAllocRawExt2(e,t,n,i);"media"==r&&__Rtc.CRRTCMedia.videoAllocRawExt2(e,t,n,i)}},__Rtc.CR__ModifyPeerAddrExt.callback=function(e,t,n){console.crlog("[Meeting] CR__ModifyPeerAddrExt: MSID-----"+t),enmeet.videoAnswerBrowserParse=function(e,t){const n=__Rtc.baseOffer.sdp.match(/a=extmap:(.*?)http:\/\/www.webrtc.org\/experiments\/rtp-hdrext\/abs-send-time/)?`${__Rtc.baseOffer.sdp.match(/a=extmap:(.*?)http:\/\/www.webrtc.org\/experiments\/rtp-hdrext\/abs-send-time/)[0]}\r\n`:"",i=__Rtc.baseOffer.sdp.match(/a=extmap:(.*?)urn:3gpp:video-orientation/)?`${__Rtc.baseOffer.sdp.match(/a=extmap:(.*?)urn:3gpp:video-orientation/)[0]}\r\n`:"";t.sdp=t.sdp.replace("a=extmap:5 http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01\r\n",`${n}${i}`);const r=t.sdp.match(/c=IN IP4(.*?)\r\n/)?t.sdp.match(/c=IN IP4(.*?)\r\n/)[0]:"",o=t.sdp.match(/b=AS:(.*?)\r\n/)?t.sdp.match(/b=AS:(.*?)\r\n/)[0]:"";r&&t.sdp.split(r).length>2&&(t.sdp=t.sdp.replace(`${r}${o}`,"")),t.sdp=t.sdp.replace(";profile-level-id=42001f",""),"local"==e||(t.sdp=t.sdp.replace("a=sendrecv","a=sendonly"))};var i={type:"answer",sdp:n.get("sdp")},r=t.toString().substr(0,2);if(r==CRVideo.msType.localAudio)__Rtc.CRRTCAudio.modifyPeerAddrExt(i,+t);else{if(r==CRVideo.msType.localVideo)return void __Rtc.CRRTCVideo.modifyPeerAddrExt("localVideo",e,t,n);if(r==CRVideo.msType.remoteVideo)return void __Rtc.CRRTCVideo.modifyPeerAddrExt("remoteVideo",e,t,n);if(r==CRVideo.msType.localScreen)return void __Rtc.CRRTCScreen.modifyPeerAddrExt("localScreen",e,t,n);if(r==CRVideo.msType.remoteScreen)return void __Rtc.CRRTCScreen.modifyPeerAddrExt("remoteScreen",e,t,n);if(r==CRVideo.msType.remoteMedia)return void __Rtc.CRRTCMedia.modifyPeerAddrExt("remoteMedia",e,t,n);if(r==CRVideo.msType.localMediaVideo)return void __Rtc.CRRTCMedia.modifyPeerAddrExt("localMediaVideo",e,t,n);if(r==CRVideo.msType.localMediaAudio)return void __Rtc.CRRTCMedia.modifyPeerAddrExt("localMediaAudio",e,t,n)}},window.videoResolutionReport=function(e,t,n,i){if(CRVideo.isMeeting){if("screen"==t){const t=__Rtc.CRRTCScreen.localScreenStream.getTracks()[0].getSettings();i=t.height?t.height:1080,n=t.widht?t.widht:1920,e=__Rtc.CRRTCScreen.localConnection.msid}if("media"==t){const t=__Rtc.CRRTCMedia.localMediaVideoConnection.stream.getTracks()[0].getSettings();i=t.height?t.height:1080,n=t.widht?t.widht:1920,e=__Rtc.CRRTCMedia.localMediaVideoConnection.msid}console.crlog(`[Ctrl] CR__VideoResolutionReport(${e},${n},${i})`),__Rtc.CR__VideoResolutionReport(e,n,i)}},__Rtc.CR__VideoResolutionReportRslt.callback=function(e,t){e=0==e?"success":"fail",t=null==t?"":t,console.crlog("[Ctrl] VideoResolutionReportRslt Callback: "+e+" "+t)},__Rtc.CR__UserEnter.callback=function(e){if(!CRVideo.isMeeting)return console.crlog(`[Meeting] CR__UserEnter.callback, isMeeting:${CRVideo.isMeeting} return!`);console.crlog("[Meeting] userEnter args: "+JSON.stringify(e)),console.crlog("[Meeting] user: "+e.nickname+" enter meeting; termId is: "+e.termId);var t=!0;if(CRVideo.allMemberInfo.forEach((function(n){n.termId!=e.termId||(t=!1)})),e.termId!==CRVideo.userInfo.termId&&t){var n=e;n.userId=e.userId||e.nickname,n.nickname=e.nickname,n.audioStatus="AUNKNOWN",n.videoStatus="VUNKNOWN","family"==e.privRole?CRVideo.privRoleFamily=e.userId:"prisoner"==e.privRole&&(CRVideo.privRolePrison=e.userId),CRVideo.allMemberInfo.push(n),console.crlog(`[MeetingMgr]CRVideo_UserEnterMeeting.target(${n.userId}) `),CRVideo_UserEnterMeeting.target(n.userId)}},__Rtc.CR__UserLeftMeet.callback=function(e,t){if(console.crlog("[Meeting] UserLeftMeet Callback: id: "+e+",reson: "+t),e!==CRVideo.userInfo.termId){var n="",i=null;CRVideo.allMemberInfo.forEach((function(t,r){e==t.termId&&(n=t.userId,i=r)})),__Rtc.CRRTCRemoteVideo.userLeftHandler(e),n&&null!=i&&(CRVideo.allMemberInfo.splice(i,1),console.crlog(`[MeetingMgr] CRVideo_UserLeftMeeting.target(${n},${t})`),CRVideo_UserLeftMeeting.target(n,t),console.crlog("[Meeting]"+n+" :left meeting,and the reason is:"+t))}else"kick"===t&&(CRVideo.leftMeetingFun(t),CRVideo.destroyMeetingConnect(),CRVideo_UserLeftMeeting.target(CRVideo.userInfo.userId,t))},CRVideo.leftMeetingFun=function(e){CRVideo.isMeeting=!1,CRVideo.isWebRTC&&window.__Rtc.CRICEAPI.StopVideo(),clearTimeout(CRVideo.KEEPALIVE_TIMER),CRVideo.KEEPALIVE_TIMER=-1,clearTimeout(CRVideo.REFRESH_SESSION_TIMER),CRVideo.REFRESH_SESSION_TIMER=-1,window.__Rtc.CRRTCAudio&&__Rtc.CRRTCAudio.stopAllAudioTrack(),window.__Rtc.CRRTCAudio&&__Rtc.CRRTCAudio.closeAllPeerConnection(),window.__Rtc.CRRTCRemoteVideo&&__Rtc.CRRTCRemoteVideo.closeAllRTCConnection(),window.__Rtc.CRRTCLocalVideo&&__Rtc.CRRTCLocalVideo.stopAllLocalVideoAndConnect(),window.__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.isMySharing&&(CRVideo_StopScreenShare(),__Rtc.CRICEAPI.SetCurrentTab(8,{termID:CRVideo.userInfo.termId,localID:0})),window.__Rtc.CRRTCMedia&&0==__Rtc.CRRTCMedia.mediaShareInfo.state&&__Rtc.CRRTCMedia.mediaShareInfo.userID==CRVideo.userInfo.userId&&(CRVideo_StopPlayMedia(),__Rtc.CRICEAPI.SetCurrentTab(8,{termID:CRVideo.userInfo.termId,localID:0})),"token失效"==e&&(console.crlog(`[MeetingMgr] CRVideo_MeetingDropped.target(${CRVideo_ERR_DEF.SDK_TOKEN_TIMEOUT})`),CRVideo.destroyMeetingConnect(),CRVideo_MeetingDropped.target(CRVideo_ERR_DEF.SDK_TOKEN_TIMEOUT))},window.CRVideo_ExitMeeting=function(e){console.crlog(`[Meeting] CRVideo_ExitMeeting(${e})`);let t=void 0!==e?e:"主动离开";"token失效"==t&&console.crlog("[Meeting] Token Expire, do left meeting!"),__Rtc.CR__Exit(t),CRVideo.isExitmeet||(sessionStorage.setItem(CRVideo.LOCAL_KEY+"_TermId_",""),sessionStorage.setItem(CRVideo.LOCAL_KEY+"_USERDETAIL_",""),CRVideo.isExitmeet=!0,CRVideo.isMeeting=!1,CRVideo_UploadingLog(),setTimeout((()=>{CRVideo_UploadingLog()}),1e3),CRVideo.meetingExiting=!0,setTimeout((()=>{CRVideo.meetingExiting=!1}),3e3),console.crlog("[Meeting] exit meeting---do left meeting function"),CRVideo.leftMeetingFun(t))},__Rtc.CR__ExitRslt.callback=function(e,t){e=0==e?"success":"fail",t=null==t?"":t,console.crlog("[Meeting] ExitRslt Callback："+e+" "+t),CRVideo.CallID="",console.crlog("[Meeting] ----- CR__UnInit -----"),__Rtc.CR__UnInit(),setTimeout((()=>{CRVideo.destroyMeetingConnect()}),1e3)},__Rtc.CR__Free.callback=function(e){console.crlog("[Meeting] Free Callback: msid is "+e);var t=e.toString().substr(0,2);t==CRVideo.msType.localAudio?__Rtc.CRRTCAudio.audioMSIDFree(+e):t==CRVideo.msType.remoteVideo&&__Rtc.CRRTCRemoteVideo.videoMSIDFree(e)},window.CRVideo_GetMainVideo=function(){return console.crlog("[Meeting] CRVideo_GetMainVideo"),termIdToUserId(CRVideo.mainVideoTermID)||0},window.CRVideo_SetMainVideo=function(e){console.crlog(`[Meeting] CRVideo_SetMainVideo,userId:${e}`);var t=userIdToTermId(e);console.crlog("[Meeting] ----- CR__SetFocusWindow ----- mode:VMANAGER_LOCK,termId:"+t),__Rtc.CR__SetFocusWindow("VMANAGER_LOCK",t)},window.CRVideo_SetMainVideoMode=function(e,t){let n;console.crlog(`[Meeting] CRVideo_SetMainVideoMode,mode:${e},userId:${t}`),1==e?n="VSPEAKER_TRACK":2==e?n="VPRESENTER_LOCK":3==e&&(n="VMANAGER_LOCK");const i=findMemberInfo({use:"userId",want:"termId",value:t});i&&(console.crlog(`[MEETRELY] ---- CR__SetFocusWindow ---- mode: ${e},termid: ${i},userid:${t}`),__Rtc.CR__SetFocusWindow(n,i))},CRVideo.windowMode="Unknown",__Rtc.CR__UpdateFocusWindow.callback=function(e,t){let n;n="VSPEAKER_TRACK"==e?1:"VPRESENTER_LOCK"==e?2:"VMANAGER_LOCK"==e?3:0,CRVideo.windowMode!=e&&(console.crlog(`[Video] Notify mainVideoModeChanged, oldMode:${CRVideo.windowMode},newMode:${e}`),CRVideo.windowMode=e,console.crlog(`[MeetingMgr] CRVideo_NotifyMainVideoModeChanged.target(${n})`),CRVideo_NotifyMainVideoModeChanged.target(n));let i=findMemberInfo({use:"termId",want:"userId",value:t});console.crlog(`[Video] Notify updateFocusWindow, mode:${e},termId:${t},userId:${i}`),CRVideo.mainVideoTermID=t,i&&console.crlog(`[MeetingMgr] CRVideo_NotifyMainVideoChanged.target(${i})`),i&&CRVideo_NotifyMainVideoChanged.target(i)}},5043:()=>{!function(e,t,n){class i{constructor(e){this.msid=e,this.offer=null,this.answer=null,this.offer_cb=null,this.answer_cb=null,this.connection=null,this.candidates=[],this.stream=null,this.logstr=null,this.isResponsedCandidate=!1}}e.__crMediaClass=class{constructor(){console.crlog("[Media] MediaShareModule initData..."),this.initData(),this.initIceCallback(),this.initSDKInterface()}initData(){this.mediaFileInfo={isAudioFile:!1,name:null,url:null,FileObj:null},this.mediaShareInfo={userID:null,mediaName:null,state:null},this.container=null,this.bPauseWhenFinished=!1,this.isLocalPlay=!1,this.localMediaAudioConnection=new i(this.mediaAudioMSID++),this.localMediaVideoConnection=new i(this.localMediaMSID++),this.remoteMediaConnection=new i(this.remoteMediaMSID++),this.localMediaMSID=14e4,this.mediaAudioMSID=15e4,this.remoteMediaMSID=24e4}initIceCallback(){this.ICECallback={notifyStartPlayMedia:e=>{console.crlog(`[Media] ICE Notify --\x3e notifyStartPlayMedia, params:${JSON.stringify({mediaShareInfo:e})}`),e.state=e.state.value;const t=n.allMemberInfo.find((t=>t.termId==e.termid)),i=t?t.userId:"";e.termid!==CRVideo.userInfo.termId&&__Rtc.CRICEAPI.SubscribeMedia(!0),this.mediaShareInfo.userID=i,this.mediaShareInfo.mediaName=e.mediaName,this.mediaShareInfo.state=e.state,console.crlog(`[Media] CRVideo_NotifyMediaStart.target(${i})`),CRVideo_NotifyMediaStart.target(i)},notifyStopPlayMedia:e=>{console.crlog(`[Media] ICE Notify --\x3e notifyStopPlayMedia, params:${JSON.stringify({operator:e})}`),n.isMeeting&&e!==n.userInfo.termId&&__Rtc.CRICEAPI.SubscribeMedia(!1);const t=n.allMemberInfo.find((t=>t.termId==e)),i=t?t.userId:"";this.container&&(this.container._videoEle.srcObject=null),this.mediaShareInfo.userID=null,this.mediaShareInfo.mediaName=null,this.mediaShareInfo.state=2,n.isMeeting&&console.crlog(`[Media] CRVideo_NotifyMediaStop.target(${i})`),n.isMeeting&&CRVideo_NotifyMediaStop.target(i)},notifyPausePlayMedia:(e,t)=>{console.crlog(`[Media] ICE Notify --\x3e notifyPausePlayMedia, params:${JSON.stringify({operator:e,bPause:t})}`);const i=n.allMemberInfo.find((t=>t.termId==e)),r=i?i.userId:"",o=t?1:0;this.mediaShareInfo.state=o,console.crlog(`[Media] CRVideo_NotifyMediaPause.target(${r},${o})`),CRVideo_NotifyMediaPause.target(r,o)},notifyMakeIFrame:e=>{console.crlog("[Media] ICE Notify --\x3e notifyMakeIFrame")},notifySubscribeMedia:e=>{console.crlog(`[Media] ICE Notify --\x3e notifySubscribeMedia, params:${JSON.stringify({bSub:e})}`)},startPlayMediaRslt:e=>{console.crlog(`[Media] ICE Callback --\x3e startPlayMediaRslt, params:${JSON.stringify({errCode:e})}`)},stopPlayMediaRslt:e=>{console.crlog(`[Media] ICE Callback --\x3e stopPlayMediaRslt, params:${JSON.stringify({errCode:e})}`)},getMediaInfoRslt:(e,t)=>{if(console.crlog(`[Media] ICE Callback --\x3e getMediaInfoRslt, params:${JSON.stringify({errCode:e,data:t})}`),0==e){if(2!==t.state.value)return void __Rtc.CRRTCMedia.ICECallback.notifyStartPlayMedia(t);t.state=t.state.value;const e=n.allMemberInfo.find((e=>e.termId==t.termid));this.mediaShareInfo.userID=e?e.userId:"",this.mediaShareInfo.state=t.state,this.mediaShareInfo.mediaName=t.mediaName}},pausePlayMediaRslt:e=>{console.crlog(`[Media] ICE Callback --\x3e pausePlayMediaRslt, params:${JSON.stringify({errCode:e})}`)},subscribeMediaRslt:e=>{console.crlog(`[Media] ICE Callback --\x3e subscribeMediaRslt, params:${JSON.stringify({errCode:e})}`)}}}initSDKInterface(){e.CRVideo_StartPlayMedia=(e,t,i,r)=>{if(console.crlog(`[Media] CRVideo_StartPlayMedia(${e},${t},${i},${r})`),!e||!e._id)return console.crlog("[Media] Start play media fail, did not create mediaObj"),0;if(this.container=e,this.container._userID=n.userInfo.userId,this.isLocalPlay=i||!1,r=r||0,this.bPauseWhenFinished=r,!MediaSource&&!t)return console.crlog("[Media] Start play media fail, the File object is not audio or video"),console.crlog("[Media] CRVideo_StartPlayMedia, return: 0"),0;try{if(t instanceof File){if("Chrome"==__Rtc.CRBrowser.curBrowserCfg.name||"Edg"==__Rtc.CRBrowser.curBrowserCfg.name){if(!/(.mp3|.mkv|.mp4|.webm)$/.test(t.name))return console.crlog("[Media] Start play media fail, Chrome does not support this file type"),console.crlog("[Media] CRVideo_StartPlayMedia, return: 0"),0}else if("Firefox"==__Rtc.CRBrowser.curBrowserCfg.name){if(!/(.mp3|.mp4|.webm)$/.test(t.name))return console.crlog("[Media] Start play media fail, Firefox does not support this file type"),console.crlog("[Media] CRVideo_StartPlayMedia, return: 0"),0}else if("Safari"==__Rtc.CRBrowser.curBrowserCfg.name&&!/(.mp3|.mp4)$/.test(t.name))return console.crlog("[Media] Start play media fail, Safari does not support this file type"),console.crlog("[Media] CRVideo_StartPlayMedia, return: 0"),0;/(.mp3)$/.test(t.name)&&(this.mediaFileInfo.isAudioFile=!0),this.mediaFileInfo.FileObj=t,this.mediaFileInfo.name=t.name,this.mediaFileInfo.url=URL.createObjectURL(t)}else{if("string"!=typeof t)return console.crlog("[Media] CRVideo_StartPlayMedia, return: 0"),0;this.mediaFileInfo.name=t.match(/[^/]+(?!.*\/)/),this.mediaFileInfo.url=t}const e=this.container._videoEle;return e.loop=0==this.bPauseWhenFinished,e.srcObject=null,e.src=this.mediaFileInfo.url,setTimeout((()=>{e.click(),e.play()}),100),e.onplaying=()=>{console.crlog("[Media] Video event: onplaying"),n.isMeeting&&!i&&!this.ispaused&&__Rtc.CRICEAPI.StartPlayMedia(this.mediaFileInfo.name),this.ispaused=!1,this.pausePlayMedia(!1)},e.onpause=()=>{console.crlog("[Media] Video event: onpause"),this.ispaused=!0,this.pausePlayMedia(!0)},e.onended=()=>{console.crlog("[Media] Video event: onended"),this.ispaused=!1,this.bPauseWhenFinished||this.endMediaPlay()},e.onerror=e=>{console.crlog(`[Media] Video event: error, ${e}`)},1}catch(e){return console.crlog(`[Media] Start play media fail, err: ${e}`),console.crlog("[Media] CRVideo_StartPlayMedia, return: 0"),0}},e.CRVideo_PausePlayMedia=e=>{console.crlog(`[Media] CRVideo_PausePlayMedia(${e})`),this.pausePlayMedia(e)},e.CRVideo_StopPlayMedia=()=>{console.crlog("[Media] CRVideo_StopPlayMedia()"),this.endMediaPlay()},e.CRVideo_SetMediaplaypos=e=>{console.crlog(`[Media] CRVideo_SetMediaplaypos(${e}`),this.container&&(this.container._videoEle.currentTime=e/1e3),console.crlog(`[Media] CRVideo_NotifyPlayPosSetted.target(${e})`),CRVideo_NotifyPlayPosSetted.target(e)},e.CRVideo_SetMediaVolume=e=>{console.crlog(`[Media] CRVideo_SetMediaVolume(${e})`);const t=this.container._videoEle;t&&(t.volume=e/100,t.muted=!1)},e.CRVideo_Getmediainfo=e.CRVideo_GetMediaInfo=e=>{console.crlog(`[Media] CRVideo_Getmediainfo(${e})/CRVideo_GetMediaInfo(${e})`);const t={};return t.userID=this.mediaShareInfo.userID,t.mediaName=this.mediaShareInfo.mediaName,t.state=this.mediaShareInfo.state,t},e.CRVideo_GetMediaImg=(e,t)=>{console.crlog(`[Media] CRVideo_GetMediaImg(${e},${t})`);const n=document.createElement("canvas"),i=this.container._videoEle;if(!i)return{dat,width,height};n.width=i.videoWidth,n.height=i.videoHeight,n.getContext("2d").drawImage(i,0,0,n.width,n.height);return{dat:n.toDataURL("image/"+t||0),width:n.width,height:n.height}}}updateMediaShareInfo(){console.crlog("[Media] Update media share info"),__Rtc.CRICEAPI.GetMediaInfo()}pausePlayMedia(e){this.container&&(e?(this.container._videoEle.click(),this.container._videoEle.pause(),this.isLocalPlay||__Rtc.CRICEAPI.PausePlayMedia(!0)):(this.container._videoEle.click(),this.container._videoEle.play(),this.isLocalPlay||__Rtc.CRICEAPI.PausePlayMedia(!1)))}endMediaPlay(){const e=this.container?this.container._videoEle:null;e&&(e.pause(),e.src="",e.srcObject=null,this.container=null),this.isLocalPlay||__Rtc.CRICEAPI.StopPlayMedia(),clearInterval(this.canvasDrawTimer)}getBaseStream(e){let t=null;if(this.container){const n=this.container._videoEle,i=__Rtc.CRBrowser.curBrowserCfg;if("audio"==e){console.crlog("[Media] Capture media audio stream from video element...");try{"captureStream"in n?t=n.captureStream():"mozCaptureStream"in n?t=n.mozCaptureStream():"webkitCaptureStream"in n&&(t=n.webkitCaptureStream())}catch(e){console.crlog(`[Media][Error] Get media audio base stream fail: ${e}`),console.error(e)}}else if("Safari"!==i.name&&"Chrome"==i.name&&i.ver<88||"Edg"==i.name&&i.ver<88){console.crlog("[Media] Capture media video stream from video element...");try{"captureStream"in n?t=n.captureStream():"mozCaptureStream"in n?t=n.mozCaptureStream():"webkitCaptureStream"in n&&(t=n.webkitCaptureStream())}catch(e){console.crlog(`[Media][Error] Get media video base stream fail: ${e}`),console.error(e)}}else{console.crlog("[Media] Capture media video base stream from canvas element...");try{const e=this.container._videoEle,n=document.createElement("canvas");n.style.height="1px",n.style.width="1px",this.container._handler.appendChild(n),n.width=e.videoWidth>1920?1920:e.videoWidth,n.height=e.videoHeight>1080?1080:e.videoHeight,console.crlog(`[Media] width:${n.width}, height:${n.height}, fps:15`),this.canvasDrawTimer=setInterval((()=>{n.getContext("2d").drawImage(e,0,0,n.width,n.height)}),50),t=n.captureStream(20)}catch(e){console.error(e)}}}return t||console.crlog("[Media][Error] Your browser does NOT supports pre-recorded media streaming!"),t}audioAllocRawExt2(e,i,r,o){console.crlog("[Media] Local media audio, audioAllocRawExt2...");const s=this.localMediaAudioConnection,a=`[Media] MSID:${s.msid}, Local media audio RTCPeerConnection,`;s.logstr=a,s.offer_cb=e,s.offer_cb.isResponsed=!1;const c=setTimeout((()=>{s.offer_cb.isResponsed||(console.crlog(`${a} offer_cb ice_response()...(No candidate for more than 20 s)`),s.offer_cb.ice_response(),s.offer_cb.isResponsed=!0)}),2e4),l=this.getBaseStream("audio");if(!l)return;console.crlog(`[Media] MSID:${s.msid}, Local media audio, new RTCPeerConnection(${JSON.stringify(n.rtcCfg)})`);const d=new RTCPeerConnection(n.rtcCfg);s.connection=d,console.crlog("[Media] New MediaStream()");const u=new MediaStream;l.getTracks().forEach((e=>{"audio"==e.kind&&(console.crlog("[Media] MediaStream add audioTrack"),u.addTrack(e))})),s.stream=u,console.crlog(`${a} addStream(${s.stream})`),d.addTrack(l.getAudioTracks()[0],u),console.crlog(`${a} createOffer()`),d.createOffer().then((e=>{console.crlog(`${a} createOffer success!`),e.sdp=e.sdp.replace("a=sendrecv","a=sendonly");let t="";e.sdp.includes("VP8")&&(t+="VP8"),e.sdp.includes("H264")&&(t+="H264"),console.crlog(`${a} offer.sdp:${e.sdp.length} ${t}`),s.offer=e,console.crlog(`${a} offer setLocalDescription(offer)`),d.setLocalDescription(e).then((e=>{console.crlog(`${a} offer setLocalDescription success!`)})).catch((e=>{console.crlog(`${a} offer setLocalDescription fail! ${e}`),console.error(e)}))})).catch((e=>{console.crlog(`${a} createOffer fail! ${e}`),console.error(e)})),d.onicecandidate=e=>{if(e.candidate&&!s.offer_cb.isResponsed){s.candidates.push(e.candidate);const n=new t.HashMap;n.set("sdp",s.offer.sdp),n.set("icecandidate",JSON.stringify(s.candidates)),console.crlog(`${a} onicecandidate, response candidates(${s.candidates.length}): ${JSON.stringify(s.candidates)}`),console.crlog(`${a} offer_cb ice_response(${s.msid}, HashMap)...`),s.offer_cb.ice_response(s.msid,n),s.offer_cb.isResponsed=!0,clearTimeout(c)}else console.crlog(`${a} onicecandidate! e.candidate == ${JSON.stringify(e.candidate)}!`)},d.oniceconnectionstatechange=e=>{console.crlog(`${a} oniceconnectionstatechange, iceConnectionState: ${e.currentTarget.iceConnectionState}`),s&&s.iceConnectionState&&"completed"==s.iceConnectionState&&setTimeout((()=>{s.answer_cb&&!s.answer_cb.isResponsed&&(console.crlog(`${a} answer_cb ice_response()...`),s.answer_cb.ice_response(),s.answer_cb.isResponsed=!0)}),500)},d.onconnectionstatechange=e=>{console.crlog(`${a} onconnectionstatechange, connectionState: ${e.currentTarget.connectionState}`)},d.onsignalingstatechange=e=>{console.crlog(`${a} onsignalingstatechange, signalingState: ${e.currentTarget.signalingState}`)}}videoAllocRawExt2(e,t,n,i){console.crlog(`[Media] VideoAllocRawExt2, srcSelf:${n}`),n?this.setLocalMediaVideoConnection(e):this.setRemoteMediaConnection(e)}modifyPeerAddrExt(e,t,n,i){const r={type:"answer",sdp:i.get("sdp")};"localMediaVideo"==e&&this.localMediaVideoModifyPeerAddrExt(t,n,r),"localMediaAudio"==e&&this.localMediaAudioModifyPeerAddrExt(t,n,r),"remoteMedia"==e&&this.remoteMediaModifyPeerAddrExt(t,n,r)}parseOfferSDP(e,t){let n=e;return"sendonly"==t&&(n=n.replace("a=sendrecv","a=sendonly")),n}parseVideoAnswerSDP(e,t){const i=e.match(/c=IN IP4(.*?)\r\n/)?e.match(/c=IN IP4(.*?)\r\n/)[0]:"",r=e.match(/b=AS:(.*?)\r\n/)?e.match(/b=AS:(.*?)\r\n/)[0]:"";return i&&e.split(i).length>2&&(e=e.replace(`${i}${r}`,"")),e="local"==t?(e=e.replace("profile-level-id=42001f",`x-google-min-bitrate=${n.maxBps_media/4};x-google-start-bitrate=${n.maxBps_media/2};x-google-max-bitrate=${n.maxBps_media};`)).replace("a=extmap:5 http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01\r\n",""):e.replace("a=sendrecv","a=sendonly")}setLocalMediaVideoConnection(e){const i=this.localMediaVideoConnection,r=this.getBaseStream();if(!r)return;const o=`[Media] MSID:${i.msid}, Local media video RTCPeerConnection,`;i.logstr=o,i.offer_cb=e,i.offer_cb.isResponsed=!1,console.crlog(`[Media] MSID:${i.msid}, Local media video, new RTCPeerConnection(${JSON.stringify(n.rtcCfg)})`);const s=new RTCPeerConnection(n.rtcCfg);i.connection=s,console.crlog("[Media] New MediaStream()");const a=new MediaStream;if(r.getTracks().forEach((e=>{console.crlog("[Media] MediaStream add videoTrack"),"video"==e.kind&&a.addTrack(e)})),i.stream=a,console.crlog(`${o} addStream(localMediaVideoStream)`),0==r.getVideoTracks().length)return console.crlog(`${o} addTrack fail, base stream have not video track (mp3?)`),console.crlog(`${o} offer_cb ice_response()...`),i.offer_cb.ice_response(),void(i.offer_cb.isResponsed=!0);s.addTrack(r.getVideoTracks()[0],a),console.crlog(`${o} createOffer()`),s.createOffer().then((e=>{console.crlog(`${o} createOffer success!`),e.sdp=this.parseOfferSDP(e.sdp,"sendonly");let t="";e.sdp.includes("VP8")&&(t+="VP8"),e.sdp.includes("H264")&&(t+="H264"),console.crlog(`${o} offer.sdp:${e.sdp.length} ${t}`),i.offer=e,console.crlog(`${o} offer setLocalDescription(offer)`),s.setLocalDescription(e).then((e=>{console.crlog(`${o} offer setLocalDescription success!`)})).catch((e=>{console.crlog(`${o} offer setLocalDescription fail! ${e}`),console.error(e)}))})).catch((e=>{console.crlog(`${o} createOffer fail! ${e}`),console.error(e)}));const c=setTimeout((()=>{i.offer_cb.isResponsed||(console.crlog(`${o} offer_cb ice_response()...(No candidate for more than 20 s)`),i.offer_cb.ice_response(),i.offer_cb.isResponsed=!0)}),2e4);s.onicecandidate=e=>{if(e.candidate){i.candidates.push(e.candidate);const n=new t.HashMap;n.set("sdp",i.offer.sdp),n.set("icecandidate",JSON.stringify(i.candidates)),console.crlog(`${o} onicecandidate, response candidates(${i.candidates.length}): ${JSON.stringify(i.candidates)}`),console.crlog(`${o} offer_cb ice_response(${i.msid}, HashMap)...`),i.offer_cb.ice_response(i.msid,n),i.offer_cb.isResponsed=!0,clearTimeout(c)}else console.crlog(`${o} onicecandidate! e.candidate == ${e.candidate}!`)},s.oniceconnectionstatechange=e=>{console.crlog(`${o} oniceconnectionstatechange, iceConnectionState: ${e.currentTarget.iceConnectionState}`),i&&i.iceConnectionState&&"completed"==i.iceConnectionState&&setTimeout((()=>{i.answer_cb&&!i.answer_cb.isResponsed&&(console.crlog(`${o} answer_cb ice_response()...`),i.answer_cb.ice_response(),i.answer_cb.isResponsed=!0)}),500)},s.onconnectionstatechange=e=>{console.crlog(`${o} onconnectionstatechange, connectionState: ${e.currentTarget.connectionState}`)},s.onsignalingstatechange=e=>{console.crlog(`${o} onsignalingstatechange, signalingState: ${e.currentTarget.signalingState}`)}}setRemoteMediaConnection(e){console.crlog(`[Media] Remote Media, new RTCPeerConnection(${JSON.stringify(n.rtcCfg)})`);const i=new RTCPeerConnection(n.rtcCfg),r=`[Media] MSID:${this.remoteMediaMSID}, remoteMediaConnection`;this.remoteMediaConnection.logstr=r,this.remoteMediaConnection.connection=i,this.remoteMediaConnection.offer_cb=e,this.remoteMediaConnection.offer_cb.isResponsed=!1;const o=setTimeout((()=>{connect.offer_cb.isResponsed||(console.crlog(`${logstr} offer_cb ice_response()...(No candidate for more than 20 s)`),connect.offer_cb.ice_response(),connect.offer_cb.isResponsed=!0)}),2e4);i.createOffer({offerToReceiveAudio:!1,offerToReceiveVideo:!0,voiceActivityDetection:!1}).then((e=>{e.sdp=this.parseOfferSDP(e.sdp);let t="";e.sdp.includes("VP8")&&(t+="VP8"),e.sdp.includes("H264")&&(t+="H264"),console.crlog(`${r} createOffer success! offerSDP is:${e.sdp.length} ${t}`),this.remoteMediaConnection.offer=e,console.crlog(`${r} setLocalDescription(offer)`),i.setLocalDescription(e).then((()=>{console.crlog(`${r} offer setLocalDescription success!`)})).catch((e=>{console.error(`${r} offer setLocalDescription fail! ${e}`),console.error(e)}))})).catch((e=>{console.crlog(`${r} createOffer fail! ${e}`),console.error(e)})),i.onicecandidate=e=>{if(e.candidate&&!i.isResponsedCandidate){this.remoteMediaConnection.candidates.push(e.candidate);const n=new t.HashMap;n.set("sdp",this.remoteMediaConnection.offer.sdp),n.set("icecandidate",JSON.stringify(this.remoteMediaConnection.candidates)),console.crlog(`${r} onicecandidate, response candidates(${this.remoteMediaConnection.candidates.length}): ${JSON.stringify(this.remoteMediaConnection.candidates)}`),console.crlog(`${r} offer_cb ice_response(${this.remoteMediaConnection.msid}, HashMap)...`),this.remoteMediaConnection.offer_cb.ice_response(this.remoteMediaConnection.msid,n),this.remoteMediaConnection.offer_cb.isResponsed=!0,clearTimeout(o),this.remoteMediaConnection.isResponsedCandidate=!0}else 0===this.remoteMediaConnection.candidates.length&&console.crlog(`${r} onicecandidate! null!`)},i.oniceconnectionstatechange=e=>{console.crlog(`${r} oniceconnectionstatechange, iceConnectionState: ${e.currentTarget.iceConnectionState}`),this.remoteMediaConnection.connection&&this.remoteMediaConnection.connection.iceConnectionState&&"completed"==this.remoteMediaConnection.connection.iceConnectionState&&setTimeout((function(){console.crlog(`${r} answer_cb ice_response()...`),this.remoteMediaConnection.answer_cb.ice_response(),this.remoteMediaConnection.answer_cb.isResponsed=!0}),500)},i.ontrack=e=>{console.crlog(`${r} ontrack!`),console.crlog(`${r}, video stream:${e.streams[0].id}`),this.remoteMediaConnection.stream=e.streams[0],this.refreshContainerSrc()},i.onconnectionstatechange=e=>{console.crlog(`${r} onconnectionstatechange, connectionState: ${e.currentTarget.connectionState}`)},i.onsignalingstatechange=e=>{console.crlog(`${r} onsignalingstatechange, signalingState: ${e.currentTarget.signalingState}`)}}localMediaVideoModifyPeerAddrExt(t,n,i){this.localMediaVideoConnection.answer_cb=t;const r=this.localMediaVideoConnection.logstr,o=this.localMediaVideoConnection.connection;i.sdp=this.parseVideoAnswerSDP(i.sdp,"local");let s="";i.sdp.includes("VP8")&&(s+="VP8"),i.sdp.includes("H264")&&(s+="H264"),console.crlog(`${r} ModifyPeerAddrExt, answerSDP:${i.sdp.length} ${s}`),this.localMediaVideoConnection.answer=i,console.crlog(`${r} answer setRemoteDescription(answer)`),o.setRemoteDescription(new RTCSessionDescription(i)).then((t=>{console.crlog(`${r} answer setRemoteDescription success!`),e.videoResolutionReport(this.localMediaVideoConnection.msid,"media")})).catch((e=>{console.crlog(`${r} answer setRemoteDescription fail! ${e}`),console.error(e)})),setTimeout((()=>{this.localMediaVideoConnection.answer_cb.isResponsed||(console.crlog(`${r} answer_cb ice_response()...`),this.localMediaVideoConnection.answer_cb.ice_response(),this.localMediaVideoConnection.answer_cb.isResponsed=!0)}),500)}localMediaAudioModifyPeerAddrExt(e,t,n){this.localMediaAudioConnection.answer_cb=e;const i=this.localMediaAudioConnection.logstr,r=this.localMediaAudioConnection.connection;n.sdp=n.sdp.replace("a=sendrecv","a=recvonly");let o="";n.sdp.includes("VP8")&&(o+="VP8"),n.sdp.includes("H264")&&(o+="H264"),console.crlog(`${i} ModifyPeerAddrExt, answerSDP:${n.sdp.length} ${o}`),this.localMediaAudioConnection.answer=n,console.crlog(`${i} answer setRemoteDescription(answer)`),r.setRemoteDescription(new RTCSessionDescription(n)).then((e=>{console.crlog(`${i} answer setRemoteDescription success!`)})).catch((e=>{console.crlog(`${i} answer setRemoteDescription fail! ${e}`),console.error(e)})),setTimeout((()=>{this.localMediaAudioConnection.answer_cb.isResponsed||(console.crlog(`${i} answer_cb ice_response()...`),this.localMediaAudioConnection.answer_cb.ice_response(),this.localMediaAudioConnection.answer_cb.isResponsed=!0)}),500)}remoteMediaModifyPeerAddrExt(e,t,n){this.remoteMediaConnection.answer_cb=e;const i=this.remoteMediaConnection.logstr,r=this.remoteMediaConnection.connection;n.sdp=this.parseVideoAnswerSDP(n.sdp,"remote");let o="";n.sdp.includes("VP8")&&(o+="VP8"),n.sdp.includes("H264")&&(o+="H264"),console.crlog(`${i} ModifyPeerAddrExt, answerSDP:${n.sdp.length} ${o}`),this.remoteMediaConnection.answer=n,console.crlog(`${i} answer setRemoteDescription(answer)`),r.setRemoteDescription(new RTCSessionDescription(n)).then((e=>{console.crlog(`${i} answer setRemoteDescription success!`)})).catch((e=>{console.crlog(`${i} answer setRemoteDescription fail! ${e}`),console.error(e)})),setTimeout((()=>{this.remoteMediaConnection.answer_cb&&!this.remoteMediaConnection.answer_cb.isResponsed&&(console.crlog(`${i} answer_cb ice_response()...`),this.remoteMediaConnection.answer_cb.ice_response(),this.remoteMediaConnection.answer_cb.isResponsed=!0)}),500)}refreshContainerSrc(){try{if(this.container&&this.container._userID!==n.userInfo.userId){const e=this.container._videoEle;console.crlog(`${this.remoteMediaConnection.logstr} containerID:${this.container._id}, videoEle set srcObject...`),e.srcObject=this.remoteMediaConnection.stream,setTimeout((()=>{"Chrome"!==__Rtc.CRBrowser.curBrowserCfg.name&&e.srcObject&&"true"==e.srcObject.active&&(e.click(),e.play())}),2e3)}}catch(e){console.error(e)}}},e.__Rtc.CRRTCMedia=new e.__crMediaClass,e.CRVideo_NotifyMediaOpened=new n.CbProxy("CRVideo_NotifyMediaOpened"),e.CRVideo_NotifyMediaStart=new n.CbProxy("CRVideo_NotifyMediaStart"),e.CRVideo_NotifyMediaStop=new n.CbProxy("CRVideo_NotifyMediaStop"),e.CRVideo_NotifyMediaPause=new n.CbProxy("CRVideo_NotifyMediaPause"),e.CRVideo_NotifyPlayPosSetted=new n.CbProxy("CRVideo_NotifyPlayPosSetted"),e.CRVideo_NotifyMemberMediaData=new n.CbProxy("CRVideo_NotifyMemberMediaData")}(window,Ice,CRVideo)},5296:()=>{var e,t;e=window,t=CRVideo,Ice,e._crMemberClass=class{constructor(){this.initIceCallback(),this.initSDKInterface()}initIceCallback(){this.ICECallback={kickoutRslt:(e,t,n)=>{console.log(e,t,n),CRVideo_KickoutRslt.target()},changeNicknameRslt:(e,t)=>{console.log(e,t)}}}initSDKInterface(){e.CRVideo_GetAllMembers=()=>{const n=[];t.allMemberInfo.forEach((t=>{const i={};i.userID=t.userId,i.nickname=t.nickname,i.audioStatus=e.CRVideo_ASTATUS[t.audioStatus],i.videoStatus=e.CRVideo_VSTATUS[t.videoStatus],n.push(i)}));try{console.crlog(`[Member] CRVideo_GetAllMembers(), return: ${JSON.stringify(n)}`)}catch(e){console.error(e)}return n},e.CRVideo_GetMemberInfo=n=>{const i={};t.allMemberInfo.forEach((t=>{n==t.userId&&(i.userID=t.userId,i.nickname=t.nickname,i.audioStatus=e.CRVideo_ASTATUS[t.audioStatus],i.videoStatus=e.CRVideo_VSTATUS[t.videoStatus])}));try{console.crlog(`[Member] CRVideo_GetMemberInfo(${n}), return: ${JSON.stringify(i)}`)}catch(e){console.error(e)}return i},e.CRVideo_GetMemberNickName=e=>{let n="";return e==t.userInfo.userId?n=t.userInfo.nickname:t.allMemberInfo.forEach((t=>{e==t.userId&&(n=t.nickname)})),console.crlog(`[Member] CRVideo_GetMemberNickName(${e}), return: ${n}`),n},e.CRVideo_IsUserInMeeting=e=>{let n=!1;return t.allMemberInfo.forEach((function(e){userId==e.userId&&(n=!0)})),console.crlog(`[Member] CRVideo_IsUserInMeeting(${e}), return: ${n}`),n}}},e.__Rtc.CRRTCMember=new e._crMemberClass},1954:()=>{((e,t,n)=>{e.__crIMMsgClass=class{constructor(){console.crlog("[Message] IMMsgModule initData..."),this.initData(),this.initIceCallback(),this.initSDKInterface()}initData(){}initIceCallback(){this.ICECallback={receiveIMMsg:e=>{console.crlog(`[Message] ICE Notify: receiveIMMsg, params: ${JSON.stringify({data:e})}`),this.receiveIMMsg(e)},notifyIMForbidStatus:(e,t,n)=>{console.crlog(`[Message] ICE Notify: notifyIMForbidStatus, params:${JSON.stringify({operId:e,dstId:t,bForbid:n})}`)},notifyClearIMMsg:e=>{console.crlog(`[Message] ICE Notify: notifyClearIMMsg, params:${JSON.stringify({operId:e})}`)},notifyDeleteIMMsg:e=>{console.crlog(`[Message] ICE Notify: notifyDeleteIMMsg, params:${JSON.stringify({sn:e})}`)},sendIMMsgRslt:(e,t,n,i)=>{console.crlog(`[Message] ICE Callback --\x3e sendIMMsgRslt, params:${JSON.stringify({errCode:e,errDesc:t,taskID:n,cookie:i})}`),this.sendIMMsgRslt(e,t,n,i)}}}initSDKInterface(){e.CRVideo_SendIMMsg=(e,t,n)=>(console.crlog(`[Message] CRVideo_SendIMMsg(${e},${t},${n})`),this.sendIMMsg(e,t,n))}sendIMMsg(i,r,o){let s=32767,a="",c=new Conference.IMFont(4278190080,12),l=(new Date).getTime()/1e3;""!==r&&void 0!==r&&(s=n.findMemberInfo({use:"userId",want:"termId",value:r}),a=n.findMemberInfo({use:"userId",want:"nickname",value:r}));const d=t.generateUUID();try{console.crlog(`[Message] CR__SendIMMsg(${s},${a},${c},${i},${l},${d},${o})`)}catch(e){console.error(e)}return e.__Rtc.CR__SendIMMsg(s,a,c,i,l,d,o),d}sendIMMsgRslt(t,n,i,r){let o=0;900==t||901==t?(o=1001,msg="信息包含敏感词"):3==t&&(send_IM_type=2,msg="没有聊天权限"),console.crlog(`[Message] CRVideo_SendIMMsgRslt.target(${i},${o},${r})`),e.CRVideo_SendIMMsgRslt.target(i,o,r)}receiveIMMsg(t){const i=t.inMsg;let r=n.findMemberInfo({use:"termId",want:"userId",value:t.srcTermId}),o=i.msg,s=1e3*i.sendTime;r=r||t.srcNickname,console.crlog(`[Message] CRVideo_NotifyIMmsg/CRVideo_NotifyIMMsg.target(${r},${o},${s})`),e.CRVideo_NotifyIMmsg.target(r,o,s),e.CRVideo_NotifyIMMsg.target(r,o,s)}},e.__crTerminalMsgClass=class{constructor(){console.crlog("[Message] TerminalMsgModule initData..."),this.initData(),this.initIceCallback(),this.initSDKInterface()}initData(){}initIceCallback(){this.ICECallback={terminalMsgRslt:(e,t,n)=>{console.crlog(`[Message] ICE Callback --\x3e terminalMsgRslt, params:${JSON.stringify({errCode:e,errDesc:t,cookie:n})}`),this.terminalMsgRslt(e,t,n)},notifyTerminalMsg:(e,t,n,i)=>{console.crlog(`[Message] ICE Callback --\x3e notifyTerminalMsg, params:${JSON.stringify({moduleName:e,jsonMsg:t,dstTermID:n,srcTermId:i})}`),this.notifyTerminalMsg(e,t,n,i)}}}initSDKInterface(){e.CRVideo_SendMeetingCustomMsg=(e,t)=>{console.crlog(`[Message] CRVideo_SendMeetingCustomMsg(${e},${t})`),this.sendMeetingCustiomMsg(e,t)}}sendMeetingCustiomMsg(t,n){const i="CloudroomMeetingSDK";console.crlog(`[Message] CR__TerminalMsg(${i},${t},,true,${n})`),e.__Rtc.CR__TerminalMsg(i,t,"",true,n)}terminalMsgRslt(e,t,n){console.crlog(`[Message] CRVideo_SendMeetingCustomMsgRslt.target(${e},${n})`),CRVideo_SendMeetingCustomMsgRslt.target(e,n)}notifyTerminalMsg(t,i,r,o){const s=n.findMemberInfo({use:"termId",want:"userId",value:o});"CloudroomMeetingSDK"==t&&(console.crlog(`[Message] CRVideo_NotifyMeetingCustomMsg.target(${s},${i})`),e.CRVideo_NotifyMeetingCustomMsg.target(s,i))}},e.__Rtc.CRRTCIMMsg=new e.__crIMMsgClass,e.__Rtc.CRRTCTermMsg=new e.__crTerminalMsgClass,e.CRVideo_SendIMMsgRslt=new n.CbProxy("CRVideo_SendIMMsgRslt"),e.CRVideo_NotifyIMmsg=new n.CbProxy("CRVideo_NotifyIMmsg"),e.CRVideo_NotifyIMMsg=new n.CbProxy("CRVideo_NotifyIMMsg"),e.CRVideo_NotifyMeetingCustomMsg=new n.CbProxy("CRVideo_NotifyMeetingCustomMsg"),e.CRVideo_SendMeetingCustomMsgRslt=new n.CbProxy("CRVideo_SendMeetingCustomMsgRslt")})(window,Ice,CRVideo)},702:()=>{!function(e,t,n){class i{constructor(e){this.msid=e,this.offer_cb=null,this.offer=null,this.answer_cb=null,this.answer=null,this.candidates=[],this.stream=null,this.connection=null,this.logstr=null}}e.__crScreenClass=class{constructor(){console.crlog("[Screen] ScreenShareModule initData..."),this.initData(),this.initIceCallback(),this.initSDKInterface()}initData(){this.getDisplayMediaAPI=!1,this.screenHeight=e.screen.height<=1080?e.screen.height:1080,this.screenShareCfg={maxFps:10,maxKbps:800},this.screenCfg={audio:!1,video:{frameRate:{ideal:this.screenShareCfg.maxFps},height:{ideal:this.screenHeight}}},this.isSharing=!1,this.isMySharing=!1,this.isMarking=!1,this.localScreenBaseStream=null,this.localScreenStream=null,this.remoteScreenStream=null,this.userInterfaceStop=!1,this.lastLocalMSID=13e4,this.lastRemoteMSID=23e4,this.localConnection=new i(this.lastLocalMSID++),this.remoteConnection=new i(this.lastRemoteMSID++),this.screenShareInfo={},this.allMarkDataList=[],navigator.mediaDevices&&void 0!==navigator.mediaDevices.getDisplayMedia&&(this.getDisplayMediaAPI=!0)}initIceCallback(){this.ICECallback={notifyStartScreenShare:e=>{console.crlog(`[Screen] ICE Notify --\x3e notifyStartScreenShare, params:${JSON.stringify(e)}`),this.screenShareInfo=e;const t=n.allMemberInfo.find((t=>t.termId==e.sharer));console.crlog(`[Screen] CRVideo_NotifyScreenShareStarted.target(${t.userId},${e.state})`),t&&CRVideo_NotifyScreenShareStarted.target(t.userId,e.state),this.isSharing=!0,e.sharer==n.userInfo.termId&&(this.isMySharing=!0),3==e.state&&(this.ICECallback.notifyStartMarked(e.sharer),__Rtc.CRICEAPI.GetAllMarkData(),__Rtc.CRICEAPI.GetAllMarkDataV4())},notifyStopScreenShare:e=>{console.crlog(`[Screen] ICE Notify --\x3e notifyStopScreenShare, params:${JSON.stringify({operator:e})}`),this.isMySharing&&this.stopScreenShareHandle(!0),this.ICECallback.notifyClearAllMarks();const t=n.allMemberInfo.find((t=>t.termId==e));this.isSharing=!1,e==n.userInfo.termId&&(this.isMySharing=!1),t&&n.isMeeting&&console.crlog(`[Screen] CRVideo_NotifyScreenShareStopped.target(${t.userId})`),t&&n.isMeeting&&CRVideo_NotifyScreenShareStopped.target(t.userId)},notifyScMakeIFrame:()=>{console.crlog("[Screen] ICE Notify --\x3e notifyScMakeIFrame, params: null"),this.handleScMakeIFrame()},notifyStartMarked:e=>{console.crlog(`[Screen] ICE Notify --\x3e notifyStartMarked, params:${JSON.stringify({operator:e})}`),this.pauseCanvasRender&&this.pauseCanvasRender();const t=n.allMemberInfo.find((t=>t.termId==e));t&&console.crlog(`[Screen] CRVideo_NotifyScreenMarkStarted.target(${t.userId})`),this.isMarking=!0,__Rtc.CRRTCUI.screenContainerList.forEach((e=>{e.canvasContainer&&(e.canvasContainer._canvas.style.display="block",e.canvasContainer.resize())})),t&&CRVideo_NotifyScreenMarkStarted.target(t.userId)},notifyStopMarked:e=>{console.crlog(`[Screen] ICE Notify --\x3e notifyStopMarked, params:${JSON.stringify({operator:e})}`),this.startCanvasRender&&this.startCanvasRender();const t=n.allMemberInfo.find((t=>t.termId==e));t&&console.crlog(`[Screen] CRVideo_NotifyScreenMarkStopped.target(${t.userId})`),this.isMarking=!1,__Rtc.CRRTCUI.screenContainerList.forEach((e=>{e.canvasContainer&&(e.canvasContainer._canvas.style.display="none",e.canvasContainer.resize())})),t&&CRVideo_NotifyScreenMarkStopped.target(t.userId)},notifyMarkData:e=>{const t=e.termid,n=e.type,i=e.markid;console.crlog(`[Screen] ICE Notify --\x3e notifyMarkData, params:${JSON.stringify({termID:t,type:n,markID:i,mousePosSeq:"mousePoseqDataArr"})}`)},notifyMarkDataV4:e=>{const t=e.termid,n=e.type,i=e.markid;console.crlog(`[Screen] ICE Notify --\x3e notifyMarkDataV4, params:${JSON.stringify({termID:t,type:n,markID:i,mousePosSeq:"mousePoseqDataArr"})}`),this.allMarkDataList.push(e),__Rtc.CRRTCUI.screenContainerList.forEach((t=>{const n=this.parseMarkData(e);t.canvasContainer._markDataList.push(n),t.canvasContainer&&t.canvasContainer._drawData(n)}))},notifyClearAllMarks:()=>{console.crlog("[Screen] ICE Notify --\x3e notifyClearAllMarks, params: null"),this.allMarkDataList=[],__Rtc.CRRTCUI.screenContainerList.forEach((e=>{e.canvasContainer.clearAllMark()}))},notifyClearAllMarksV4:()=>{console.crlog("[Screen] ICE Notify --\x3e notifyClearAllMarksV4, params: null"),this.allMarkDataList=[],__Rtc.CRRTCUI.screenContainerList.forEach((e=>{e.canvasContainer.clearAllMark()}))},getScreenShareInfoRslt:(e,t)=>{try{console.crlog(`[Screen] ICE Callback --\x3e getScreenShareInfoRslt, params:${JSON.stringify({errCode:e,data:t})}`)}catch(e){console.error(e)}0==e?0!==t.state&&(console.crlog("[Screen] ScreenShare is strated in this meeting..."),this.ICECallback.notifyStartScreenShare(t)):console.crlog(`[Screen][Error] Get screenShare info fail! ${e}`)},startScreenShareRslt:e=>{console.crlog(`[Screen] ICE Callback --\x3e startScreenShareRslt, params:${JSON.stringify({errCode:e})}`),console.crlog(`[Screen] CRVideo_StartScreenShareRslt.target(${e})`),CRVideo_StartScreenShareRslt.target(e)},stopScreenShareRslt:e=>{console.crlog(`[Screen] ICE Callback --\x3e stopScreenShareRslt, params:${JSON.stringify({errCode:e})}`),console.crlog(`[Screen] CRVideo_StopScreenShareRslt.target(${e})`),CRVideo_StopScreenShareRslt.target(e)},startMarkedRslt:e=>{console.crlog(`[Screen] ICE Callback --\x3e startMarkedRslt, params:${JSON.stringify({errCode:e})}`),console.crlog(`[Screen] CRVideo_StartScreenMarkRslt.target(${e})`),CRVideo_StartScreenMarkRslt.target(e)},stopMarkedRslt:e=>{console.crlog(`[Screen] ICE Callback --\x3e stopMarkedRslt, params:${JSON.stringify({errCode:e})}`),console.crlog(`[Screen] CRVideo_StopScreenMarkRslt.target(${e})`),CRVideo_StopScreenMarkRslt.target(e)},clearAllMarksV4Rslt:e=>{console.crlog(`[Screen] ICE Callback --\x3e clearAllMarksV4Rslt, params:${JSON.stringify({errCode:e})}`)},getAllMarkDataRslt:(e,t)=>{try{console.crlog(`[Screen] ICE Callback --\x3e getAllMarkDataRslt, params:${JSON.stringify({errCode:e,data:t})}`)}catch(e){console.error(e)}},getAllMarkDataV4Rslt:(e,t)=>{try{console.crlog(`[Screen] ICE Callback --\x3e getAllMarkDataV4Rslt, params:${JSON.stringify({errCode:e,data:"markData"})}`)}catch(e){console.error(e)}0==e&&(this.allMarkDataList=t),this.allMarkDataList.forEach((e=>{__Rtc.CRRTCUI.screenContainerList.forEach((t=>{const n=this.parseMarkData(e);t.canvasContainer._markDataList.push(n),t.canvasContainer&&t.canvasContainer._drawData(n)}))}))},sendMarkDataV4Rslt:e=>{try{console.crlog(`[Screen] ICE Callback --\x3e sendMarkDataV4Rslt, params:${JSON.stringify({errCode:e})}`)}catch(e){console.error(e)}}}}initSDKInterface(){e.CRVideo_SetScreenShareCfg=e=>{for(var t in console.crlog(`[Screen] CRVideo_SetScreenShareCfg(${JSON.stringify(e)})`),e)this.screenShareCfg[t]=e[t]},e.CRVideo_StartScreenShare=()=>{if(console.crlog("[Screen] CRVideo_StartScreenShare()"),this.isSharing)return CRVideo_StartScreenShareRslt.target(1);this.startScreenShare(this.screenShareCfg)},e.CRVideo_StopScreenShare=()=>{console.crlog("[Screen] CRVideo_StopScreenShare()"),this.userInterfaceStop=!0,this.stopScreenShareHandle()},e.CRVideo_StartScreenMark=()=>{console.crlog("[Screen] CRVideo_StartScreenMark()"),__Rtc.CRICEAPI.StartMarked()},e.CRVideo_StopScreenMark=()=>{console.crlog("[Screen] CRVideo_StopScreenMark()"),__Rtc.CRICEAPI.StopMarked(),__Rtc.CRICEAPI.ClearAllMarksV4()}}videoAllocRawExt2(e,t,n,i){n?this.setLocalScreenConnection(e):this.setRemoteScreenConnection(e)}modifyPeerAddrExt(e,t,n,i){const r={type:"answer",sdp:i.get("sdp")};"localScreen"==e&&this.localScreenModifyPeerAddrExt(t,n,r),"remoteScreen"==e&&this.remoteScreenModifyPeerAddrExt(t,n,r)}parseOfferSDP(e,t){return this.screenShareCfg.maxKbps&&(console.crlog(`[Screen] c=IN IP4 0.0.0.0\r\nb=AS:${this.screenShareCfg.maxKbps}`),e=e.replace("c=IN IP4 0.0.0.0",`c=IN IP4 0.0.0.0\r\nb=AS:${this.screenShareCfg.maxKbps}`)),t&&(e=e.replace("a=sendrecv",`a=${t}`)),e}parseAnswerSDP(e,t){const n=e.match(/c=IN IP4(.*?)\r\n/)?e.match(/c=IN IP4(.*?)\r\n/)[0]:"",i=e.match(/b=AS:(.*?)\r\n/)?e.match(/b=AS:(.*?)\r\n/)[0]:"";return n&&e.split(n).length>2&&(e=e.replace(`${n}${i}`,"")),e=e.replace("a=rtcp-fb:102 nack\r\n",""),e="local"==t?(e=e.replace("profile-level-id=42001f","x-google-min-bitrate=800;x-google-start-bitrate=800;")).replace("a=extmap:5 http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01\r\n",""):e.replace("a=sendrecv","a=sendonly")}startScreenShare(e){if(e&&e.maxFps&&(this.screenCfg.video.frameRate.ideal=e.maxFps),e&&e.height&&(this.screenHeight=e.height,this.screenCfg.video.height.ideal=e.height),this.getDisplayMediaAPI){try{console.crlog(`[Screen] navigator.mediaDevices.getDisplayMedia(${JSON.stringify(this.screenCfg)})`)}catch(e){console.error(e)}navigator.mediaDevices.getDisplayMedia(this.screenCfg).then((e=>{this.localScreenBaseStream=e,this.gotLocalScreenStream(e)})).catch((e=>{console.crlog(`[Screen] getDisplayMedia fail: ${e}`),CRVideo_StartScreenShareRslt.target(8002),console.error(e)}))}else console.crlog("[Screen] CRVideo_StartScreenShareRslt.target(8004)"),CRVideo_StartScreenShareRslt.target(8004)}stopScreenShareHandle(t){(this.localScreenBaseStream||this.localScreenStream)&&(console.crlog("[Screen] Stop local screen stream track"),this.localScreenBaseStream&&this.localScreenBaseStream.getTracks().forEach((e=>{e.stop()})),this.localScreenStream&&this.localScreenStream.getTracks().forEach((e=>{e.stop()})),this.pauseCanvasRender("stop")),this.isMarking&&(__Rtc.CRICEAPI.StopMarked(),__Rtc.CRICEAPI.ClearAllMarksV4()),!t&&e.__Rtc.CRICEAPI.StopScreenShare(),this.isSharing=!1,this.isMySharing=!1,this.localScreenBaseStream=null,this.localScreenStream=null,this.baseVideoEle&&this.baseVideoEle.onplay&&(this.baseVideoEle.onplay=null),this.baseVideoEle=null,this.streamCanvas=null,this.ctx=null,this.startCanvasRender=null,this.pauseCanvasRender=null,this.handleScMakeIFrame=null;const n={};for(var i in this.screenShareCfg)n[i]=this.screenShareCfg[i];this.initData(),this.screenShareCfg=n}gotLocalScreenStream(t){console.crlog(`[Screen] GetDisplayMedia success! stream: ${t.id}`),this.localScreenStream=this.getCanvasStream(t),this.userInterfaceStop=!1,t.getTracks()[0].onended=e=>{this.userInterfaceStop?console.crlog("[Screen] Screen share stoped by interface."):(console.crlog("[Screen] Screen share stoped by plug-in button."),this.userInterfaceStop=!1,this.stopScreenShareHandle())},e.__Rtc.CRICEAPI.StartScreenShare()}getCanvasStream(e){console.crlog("[Screen] Start to get canvas stream...");const t=this;this.baseVideoEle=document.createElement("video"),this.streamCanvas=document.createElement("canvas"),this.baseVideoEle.autoplay=!0,this.baseVideoEle.playsinline=!0,this.baseVideoEle.click(),this.baseVideoEle.srcObject=e,setTimeout((()=>{this.baseVideoEle.isplay||"Mac"!=__Rtc.CRBrowser.curBrowserCfg.platform||"Safari"!=__Rtc.CRBrowser.curBrowserCfg.name||(this.baseVideoEle.click(),this.baseVideoEle.play())}),1e3),this.baseVideoEle.onplay=function(){t.baseVideoEle.isplay=!0,console.crlog("[Screen] Get canvas stream:baseVideoEle on play..."),t.streamCanvas.width=t.baseVideoEle.videoWidth,t.streamCanvas.height=t.baseVideoEle.videoHeight,t.startCanvasRender()},this.baseVideoEle.onplaying=function(){console.crlog("[Screen] Get canvas stream:baseVideoEle on playing...")},this.ctx=this.streamCanvas.getContext("2d");const n=URL.createObjectURL(new Blob([(console.crlog("[Screen] Get canvas stream:new Worker..."),"("+function(){let e;self.onmessage=function(n){const{cmd:i,data:r}=n.data;if("start"===i){clearTimeout(e);const n=()=>{self.postMessage("draw"),e=setTimeout(n,r&&r.rote||1e3/t.screenShareCfg.maxFps)};n()}else"stop"===i&&(clearTimeout(e),e=null)}}.toString()+"());")],{type:"text/javascript"}));t.worker&&t.worker.terminate&&t.worker.terminate();const i=new Worker(n);t.worker=i,i.onmessage=function(e){if("draw"===e.data)if(t.screenShareCfg&&t.screenShareCfg.catchRect){const{left:e,top:n,width:i,height:r}=t.screenShareCfg.catchRect;t.streamCanvas.width=i,t.streamCanvas.height=r,t.ctx.drawImage(t.baseVideoEle,e,n,t.streamCanvas.width,t.streamCanvas.height,0,0,t.streamCanvas.width,t.streamCanvas.height)}else t.streamCanvas.width=t.baseVideoEle.videoWidth,t.streamCanvas.height=t.baseVideoEle.videoHeight,t.ctx.drawImage(t.baseVideoEle,0,0,t.streamCanvas.width,t.streamCanvas.height)};this.startCanvasRender=function(){console.crlog("[Screen] Get canvas stream:startCanvasRender..."),t.baseVideoEle.click(),t.baseVideoEle.play();const e=1e3/t.screenShareCfg.maxFps;i.postMessage({cmd:"start",data:{rote:e}})},this.pauseCanvasRender=function(e){console.crlog("[Screen] Get canvas stream:pauseCanvasRender..."),t.baseVideoEle.pause(),i.postMessage({cmd:"stop",data:{isStop:e}})},this.handleScMakeIFrame=function(){let e;return console.crlog("[Screen] Get canvas stream:handleScMakeIFrame..."),function(){if(t.baseVideoEle.paused){clearTimeout(e);let n=0;function i(){if(!(n++>=10)){if(t.screenShareCfg&&t.screenShareCfg.catchRect){const{left:e,top:n,width:i,height:r}=t.screenShareCfg.catchRect;t.streamCanvas.width=i,t.streamCanvas.height=r,t.ctx.drawImage(t.baseVideoEle,e,n,t.streamCanvas.width,t.streamCanvas.height,0,0,t.streamCanvas.width,t.streamCanvas.height)}else t.streamCanvas.width=t.baseVideoEle.videoWidth,t.streamCanvas.height=t.baseVideoEle.videoHeight,t.ctx.drawImage(t.baseVideoEle,0,0,t.streamCanvas.width,t.streamCanvas.height);e=setTimeout(i,300)}}i()}}}();const r=function(e=20){return console.crlog(`[Screen] Get canvas stream:this.streamCanvas.captureStream(${e})...`),t.streamCanvas.captureStream(e)}(t.screenShareCfg.maxFps);return console.crlog(`[Screen] Get canvas stream success! ${r.id}`),r}setLocalScreenConnection(e){const i=this.localConnection,r="[Screen] Local screenShare RTCPeerConnection,";i.logstr=r,i.offer_cb=e,i.offer_cb.isResponsed=!1,console.crlog(`[Screen] Local screenShare, new RTCPeerConnection(${JSON.stringify(n.rtcCfg)})`);const o=new RTCPeerConnection(n.rtcCfg);i.connection=o,i.stream=this.localScreenStream,console.crlog(`${r} addTrack(localScreenTrack, localScreenStream)`),o.addTrack(i.stream.getTracks()[0],i.stream),console.crlog(`${r} createOffer()`),o.createOffer().then((e=>{console.crlog(`${r} createOffer success!`),e.sdp=this.parseOfferSDP(e.sdp,"sendonly");let t="";e.sdp.includes("VP8")&&(t+="VP8"),e.sdp.includes("H264")&&(t+="H264"),console.crlog(`${r} offer.sdp:${e.sdp.length} ${t}`),i.offer=e,console.crlog(`${r} offer setLocalDescription(offer)`),o.setLocalDescription(e).then((e=>{console.crlog(`${r} offer setLocalDescription success!`)})).catch((e=>{console.crlog(`${r} offer setLocalDescription fail! ${e}`),console.error(e)}))})).catch((e=>{console.crlog(`${r} createOffer fail! ${e}`),console.error(e)}));setTimeout((()=>{i.offer_cb.isResponsed||(console.crlog(`${r} offer_cb ice_response()...(No candidate for more than 20 s)`),i.offer_cb.ice_response(),i.offer_cb.isResponsed=!0)}),2e4);o.onicecandidate=e=>{if(e.candidate){i.candidates.push(e.candidate);const n=new t.HashMap;n.set("sdp",i.offer.sdp),n.set("icecandidate",JSON.stringify(i.candidates)),console.crlog(`${r} onicecandidate, response candidates(${i.candidates.length}): ${JSON.stringify(i.candidates)}`),console.crlog(`${r} offer_cb ice_response(${i.msid}, HashMap)...`),i.offer_cb.ice_response(i.msid,n),i.offer_cb.isResponsed=!0}else console.crlog(`${r} onicecandidate! e.candidate == ${e.candidate}!`)},o.oniceconnectionstatechange=e=>{console.crlog(`${r} oniceconnectionstatechange, iceConnectionState: ${e.currentTarget.iceConnectionState}`),i&&i.iceConnectionState&&"completed"==i.iceConnectionState&&setTimeout((()=>{i.answer_cb&&!i.answer_cb.isResponsed&&(console.crlog(`${r} answer_cb ice_response()...`),i.answer_cb.ice_response(),i.answer_cb.isResponsed=!0)}),500)},o.onconnectionstatechange=e=>{console.crlog(`${r} onconnectionstatechange, connectionState: ${e.currentTarget.connectionState}`)},o.onsignalingstatechange=e=>{console.crlog(`${r} onsignalingstatechange, signalingState: ${e.currentTarget.signalingState}`)}}localScreenModifyPeerAddrExt(e,t,n){this.localConnection.answer_cb=e;const i=this.localConnection.logstr,r=this.localConnection.connection;n.sdp=this.parseAnswerSDP(n.sdp,"local");let o="";n.sdp.includes("VP8")&&(o+="VP8"),n.sdp.includes("H264")&&(o+="H264"),console.crlog(`${i} ModifyPeerAddrExt, answerSDP:${n.sdp.length} ${o}`),this.localConnection.answer=n,console.crlog(`${i} answer setRemoteDescription(answer)`),r.setRemoteDescription(new RTCSessionDescription(n)).then((e=>{console.crlog(`${i} answer setRemoteDescription success!`),videoResolutionReport(this.localConnection.msid,"screen"),this.refreshContainerSrc()})).catch((e=>{console.crlog(`${i} answer setRemoteDescription fail! ${e}`),console.error(e)})),setTimeout((()=>{this.localConnection.answer_cb.isResponsed||(console.crlog(`${i} answer_cb ice_response()...`),this.localConnection.answer_cb.ice_response(),this.localConnection.answer_cb.isResponsed=!0)}),500)}setRemoteScreenConnection(e){const i=this.remoteConnection,r="[Screen] Remote screenShare RTCPeerConnection,";i.logstr=r,i.offer_cb=e,i.offer_cb.isResponsed=!1,console.crlog(`[Screen] Remote screenShare, new RTCPeerConnection(${JSON.stringify(n.rtcCfg)})`);const o=new RTCPeerConnection(n.rtcCfg);i.connection=o;const s={offerToReceiveAudio:!1,offerToReceiveVideo:!0,voiceActivityDetection:!1};console.crlog(`${r} createOffer(${JSON.stringify(s)})`),o.createOffer(s).then((e=>{console.crlog(`${r} createOffer success!`),e.sdp=this.parseOfferSDP(e.sdp);let t="";e.sdp.includes("VP8")&&(t+="VP8"),e.sdp.includes("H264")&&(t+="H264"),console.crlog(`${r} offer.sdp:${e.sdp.length} ${t}`),i.offer=e,console.crlog(`${r} offer setLocalDescription(offer)`),o.setLocalDescription(e).then((e=>{console.crlog(`${r} offer setLocalDescription success!`)})).catch((e=>{console.crlog(`${r} offer setLocalDescription fail! ${e}`),console.error(e)}))})).catch((e=>{console.crlog(`${r} createOffer fail! ${e}`),console.error(e)}));setTimeout((()=>{i.offer_cb.isResponsed||(console.crlog(`${r} offer_cb ice_response()...(No candidate for more than 20 s)`),i.offer_cb.ice_response(),i.offer_cb.isResponsed=!0)}),2e4);o.onicecandidate=e=>{if(e.candidate){i.candidates.push(e.candidate);const n=new t.HashMap;n.set("sdp",i.offer.sdp),n.set("icecandidate",JSON.stringify(i.candidates)),console.crlog(`${r} onicecandidate, response candidates(${i.candidates.length}): ${JSON.stringify(i.candidates)}`),console.crlog(`${r} offer_cb ice_response(${i.msid}, HashMap)...`),i.offer_cb.ice_response(i.msid,n),i.offer_cb.isResponsed=!0}else console.crlog(`${r} onicecandidate! e.candidate == ${e.candidate}!`)},o.oniceconnectionstatechange=e=>{console.crlog(`${r} oniceconnectionstatechange, iceConnectionState: ${e.currentTarget.iceConnectionState}`),i&&i.iceConnectionState&&"completed"==i.iceConnectionState&&setTimeout((()=>{i.answer_cb&&!i.answer_cb.isResponsed&&(console.crlog(`${r} answer_cb ice_response()...`),i.answer_cb.ice_response(),i.answer_cb.isResponsed=!0)}),500)},o.onconnectionstatechange=e=>{console.crlog(`${r} onconnectionstatechange, connectionState: ${e.currentTarget.connectionState}`)},o.onsignalingstatechange=e=>{console.crlog(`${r} onsignalingstatechange, signalingState: ${e.currentTarget.signalingState}`)},o.ontrack=e=>{console.crlog(`${r} ontrack, get stream now...`),i.stream=e.streams[0],this.refreshContainerSrc()}}remoteScreenModifyPeerAddrExt(e,t,n){this.remoteConnection.answer_cb=e;const i=this.remoteConnection.logstr,r=this.remoteConnection.connection;n.sdp=this.parseAnswerSDP(n.sdp,"remote");let o="";n.sdp.includes("VP8")&&(o+="VP8"),n.sdp.includes("H264")&&(o+="H264"),console.crlog(`${i} ModifyPeerAddrExt, answerSDP:${n.sdp.length} ${o}`),this.remoteConnection.answer=n,console.crlog(`${i} answer setRemoteDescription(answer)`),r.setRemoteDescription(new RTCSessionDescription(n)).then((e=>{console.crlog(`${i} answer setRemoteDescription success!`)})).catch((e=>{console.crlog(`${i} answer setRemoteDescription fail! ${e}`),console.error(e)})),setTimeout((()=>{this.remoteConnection.answer_cb.isResponsed||(console.crlog(`${i} answer_cb ice_response()...`),this.remoteConnection.answer_cb.ice_response(),this.remoteConnection.answer_cb.isResponsed=!0)}),500)}refreshContainerSrc(){console.crlog("[Screen] Refresh all screen container src..."),__Rtc.CRRTCUI.screenContainerList.forEach((e=>{if(e._userID==n.userInfo.userId){if(!this.localScreenStream)return;console.crlog(`[Screen] Local screenShare, containerID:${e._id} set srcObject, stream:${this.localScreenStream.id}, active:${this.localScreenStream.active}`),e._videoEle.srcObject=this.localScreenStream,setTimeout((()=>{"Chrome"!==__Rtc.CRBrowser.curBrowserCfg.name&&e&&e._videoEle&&e._videoEle.srcObject&&(e._videoEle.click(),e._videoEle.play())}),2e3)}else{if(!this.remoteConnection.stream)return;console.crlog(`[Screen] Remote screenShare, userID:${e._userID}, containerID:${e._id} set srcObject, stream:${this.remoteConnection.stream.id}, active:${this.remoteConnection.stream.active}`),e._videoEle.srcObject=this.remoteConnection.stream,setTimeout((()=>{"Chrome"!==__Rtc.CRBrowser.curBrowserCfg.name&&e&&e._videoEle&&e._videoEle.srcObject&&(e._videoEle.click(),e._videoEle.play())}),2e3)}}))}parseMarkData(e){const t={};t.type=e.type,t.markId=e.markid;const n=e.mousePosSeq,i=n[3].toString(16),r=n[2].toString(16),o=n[1].toString(16);t.color="#"+(Array(2).join(0)+i).slice(-2)+(Array(2).join(0)+r).slice(-2)+(Array(2).join(0)+o).slice(-2);let s=4;t.width=n[s++]<<8|n[s++],t.size=n[s++]<<8|n[s++];const a=[],c=new DataView(n.buffer);for(;s<n.length;){let e={};e.x=c.getInt16(s),s+=2,e.y=c.getInt16(s),s+=2,a.push(e)}return t.data=a,t}},e.__Rtc.CRRTCScreen=new e.__crScreenClass,e.CRVideo_StartScreenShareRslt=new n.CbProxy("CRVideo_StartScreenShareRslt"),e.CRVideo_StopScreenShareRslt=new n.CbProxy("CRVideo_StopScreenShareRslt"),e.CRVideo_StartScreenMarkRslt=new n.CbProxy("CRVideo_StartScreenMarkRslt"),e.CRVideo_StopScreenMarkRslt=new n.CbProxy("CRVideo_StopScreenMarkRslt"),e.CRVideo_NotifyScreenShareStarted=new n.CbProxy("CRVideo_NotifyScreenShareStarted"),e.CRVideo_NotifyScreenShareStopped=new n.CbProxy("CRVideo_NotifyScreenShareStopped"),e.CRVideo_NotifyScreenShareData=new n.CbProxy("CRVideo_NotifyScreenShareData"),e.CRVideo_NotifyCatchScreen=new n.CbProxy("CRVideo_NotifyCatchScreen"),e.CRVideo_NotifyGiveCtrlRight=new n.CbProxy("CRVideo_NotifyGiveCtrlRight"),e.CRVideo_NotifyReleaseCtrlRight=new n.CbProxy("CRVideo_NotifyReleaseCtrlRight"),e.CRVideo_NotifyShareRectChanged=new n.CbProxy("CRVideo_NotifyShareRectChanged"),e.CRVideo_NotifyScreenMarkStarted=new n.CbProxy("CRVideo_NotifyScreenMarkStarted"),e.CRVideo_NotifyScreenMarkStopped=new n.CbProxy("CRVideo_NotifyScreenMarkStopped")}(window,Ice,CRVideo)},9087:()=>{((e,t,n)=>{e.__crSvrRecordClass=class{constructor(){this.initData(),this.initIceCallback(),this.initSDKInterface()}initData(){this.MixersList=[],this.svrRecordStatus=0}initIceCallback(){this.ICECallback={notifySvrRecordStateChanged:(n,i,r)=>{console.crlog(`[SvrRecord] ICE Notify: notifySvrRecordStateChanged, params:${JSON.stringify({operatorID:n,state:i,err:r})}`);const o=i._value,s=t.findMemberInfo({use:"termId",want:"userId",value:n});let a;switch(this.svrRecordStatus=o,i.name){case"NO_RECORD":a=0;break;case"STARTING":a=1;break;case"RECORDING":a=2;break;case"PAUSED":a=3;break;case"STOPPING":a=4;break;default:a=i._value}console.crlog(`[SvrRecord] CRVideo_SvrMixerStateChanged/CRVideo_SvrRecordStateChanged.target(${a},${r})`),CRVideo_SvrMixerStateChanged.target(a,r,s),e.CRVideo_SvrRecordStateChanged.target(a,r),setTimeout((()=>{e.CRVideo_UploadingLog()}),1e3)},notifySvrRecordCfgChanged:(t,n)=>{const i=JSON.parse(n);console.crlog(`[SvrRecord] ICE Notify: notifySvrRecordCfgChanged, params:${JSON.stringify({operatorID:t,svrConfig:i})}`),console.crlog("[SvrRecord] CRVideo_SvrRecVideosChanged/CRVideo_SvrMixerCfgChanged.target()"),e.CRVideo_SvrRecVideosChanged.target(),e.CRVideo_SvrMixerCfgChanged.target()},notifySvrRecordFileState:t=>{const n=JSON.parse(t);console.crlog(`[SvrRecord] ICE Notify: notifySvrRecordFileState, params:${JSON.stringify({State:n})}`);const i={errCode:n.errCode,state:n.state,duration:n.duration,fileSize:n.fileSize,fileName:n.fileName,id:n.id};console.crlog(`[SvrRecord] CRVideo_NotifySvrRecordFileState.target(${JSON.stringify(n)})`),console.crlog(`[SvrRecord] CRVideo_SvrMixerOutputInfo.target(${JSON.stringify(i)})`),e.CRVideo_NotifySvrRecordFileState.target(n),e.CRVideo_SvrMixerOutputInfo.target(i)}}}initSDKInterface(){e.CRVideo_StartSvrMixer=(e,n,i)=>{try{console.crlog("[SvrRecord] CRVideo_StartSvrMixer(MutiMixerCfgs, MutiMixerContents, MutiMixerOutputs)"),console.crlog(`[SvrRecord] MutiMixerCfgs: ${JSON.stringify(e)}`),console.crlog(`[SvrRecord] MutiMixerContents: ${JSON.stringify(n)}`),console.crlog(`[SvrRecord] MutiMixerOutputs: ${JSON.stringify(i)}`)}catch(e){console.error(e)}return new Promise(((r,o)=>{this.MixersList=[],e.forEach((e=>{let r,o,s={};if(s.id=e.id,s.recCfg={},s.contents=[],s.clientType=1,e.streamTypes=e.streamTypes?e.streamTypes:3,n.forEach((t=>{t.id===e.id&&(r=t.content)})),i.forEach((t=>{t.id==e.id&&(o=t.output)})),e.streamTypes&&3!=e.streamTypes){if(e.streamTypes&&1==e.streamTypes){let n=e.aCfg;n&&(s.recCfg.audioFormat=n.audioFormat||1,s.recCfg.channelType=n.channelType||1,s.recCfg.streamTypes=1),o&&o.forEach((e=>{0==e.type&&(s.recCfg.serverPathFileName=e.filename,CRVideo.APPIDMode&&(s.recCfg.userNetDiskId=t.multiProject.userId))})),r&&(s.contents=this.fmtAudioContent(r)),this.MixersList.push(s)}}else{let n=e.cfg;n&&(s.recCfg.dstResolutionWidth=n.width||1280,s.recCfg.dstResolutionHeight=n.height||720,s.recCfg.fps=n.frameRate||20,s.recCfg.gop=n.gop||120,s.recCfg.maxBPS=n.bitRate||35e4,s.recCfg.qp=n.defaultQP||26,s.recCfg.streamTypes=3),o&&o.forEach((e=>{0==e.type?(s.recCfg.serverPathFileName=e.filename,CRVideo.APPIDMode&&(s.recCfg.userNetDiskId=t.multiProject.userId)):1==e.type&&(s.recCfg.liveUrl=e.liveUrl)})),r&&(s.contents=this.fmtVideoContent(r)),this.MixersList.push(s)}})),__Rtc.CRICEAPI.StartSvrRecord(JSON.stringify(this.MixersList)).then((e=>r({errCode:0})),(e=>o(__Rtc.CRCONFERR.Parse(e))))}))},e.CRVideo_UpdateSvrMixerContent=t=>{try{console.crlog(`[SvrRecord] CRVideo_UpdateSvrMixerContent(${JSON.stringify(t)})`)}catch(e){console.error(e)}return new Promise(((n,i)=>{t.forEach((e=>{this.MixersList.forEach((t=>{t.id===e.id&&(3===t.recCfg.streamTypes&&(t.contents=this.fmtVideoContent(e.content)),1===t.recCfg.streamTypes&&(t.contents=this.fmtAudioContent(e.content)))}))})),e.__Rtc.CRICEAPI.UpdateSvrRecCfg(JSON.stringify(this.MixersList)).then((e=>n({errCode:0})),(e=>i(__Rtc.CRCONFERR.Parse(e))))}))},e.CRVideo_StopSvrMixer=()=>new Promise(((t,n)=>{console.crlog("[SvrRecord] CRVideo_StopSvrMixer()"),e.__Rtc.CRICEAPI.StopSvrRecord().then((e=>t({errCode:0})),(e=>n(__Rtc.CRCONFERR.Parse(e))))})),e.CRVideo_GetSvrMixerState=()=>{const e=this.svrRecordStatus||0;return console.crlog(`[SvrRecord] CRVideo_GetSvrMixerState(), return: ${e}`),e}}fmtAudioContent(e){const n=JSON.parse(JSON.stringify(e));return n.forEach((e=>{if(9==e.type){const n=t.findMemberInfo({use:"userId",want:"termId",value:e.param});e.param={termId:n}}})),n}fmtVideoContent(e){const i=JSON.parse(JSON.stringify(e));return i.forEach((e=>{if(4==e.type)e.param={},e.param.resourceid=n.generateUUID();else if(0==e.type){var i,r,o,s;r=(i=e.param.camid.split("."))[i.length-1],i.length=i.length-1,o=i.join(".");const n=t.allMemberInfo.find((e=>e.userId==o));s=n&&n.termId?n.termId:"",e.param={},e.param.camId=+r,e.param.termId=s}else 7==e.type&&(e.param.resourceid=n.generateUUID())})),i}},e.__Rtc.CRRTCRecord=new e.__crSvrRecordClass,e.CRVideo_SvrRecordStateChanged=new t.CbProxy("CRVideo_SvrRecordStateChanged"),e.CRVideo_SvrRecVideosChanged=new t.CbProxy("CRVideo_SvrRecVideosChanged"),e.CRVideo_NotifySvrRecordFileState=new t.CbProxy("CRVideo_NotifySvrRecordFileState"),e.CRVideo_SvrMixerCfgChanged=new t.CbProxy("CRVideo_SvrMixerCfgChanged"),e.CRVideo_SvrMixerStateChanged=new t.CbProxy("CRVideo_SvrMixerStateChanged"),e.CRVideo_SvrMixerOutputInfo=new t.CbProxy("CRVideo_SvrMixerOutputInfo")})(window,CRVideo,Ice)},1955:()=>{!function(e,t,n){e.__crSyncClass=class{constructor(){console.crlog("[Sync] SyncModule initData..."),this.initData(),this.initIceCallback(),this.initSDKInterface()}initData(){this.curMainTab={termID:-1,localID:0},this.curSubTab={termID:0,localID:0}}initIceCallback(){this.ICECallback={notifySetCurrentTab(e,t,n){console.crlog(`[Sync] ICE Callback --\x3e notifySetCurrentTab, params:${JSON.stringify({mainId:e,subId:t,operId:n})}`),this.curMainTab=e,this.curSubTab=t,this.notifyCurPageID()},notifySetFullScreen(e,t){console.crlog(`[Sync] ICE Callback --\x3e notifySetFullScreen, params:${JSON.stringify({bFull:e,operId:t})}`)},notifySetPrivTabInfo(e,t){console.crlog(`[Sync] ICE Callback --\x3e notifySetPrivTabInfo, params:${JSON.stringify({jsonCfg:e,operId:t})}`)},notifySetSyncMode(e,t){console.crlog(`[Sync] ICE Callback --\x3e notifySetSyncMode, params:${JSON.stringify({sm:e,operId:t})}`)}}}initSDKInterface(){e.CRVideo_SwitchToPage=(e,t)=>new Promise(((i,r)=>{if(console.crlog(`[Sync] CRVideo_SwitchToPage(${e},${t})`),!n.isMeeting)return r({errCode:8,errDesc:"服务异常"});const o={termID:-1,localID:e};let s=-1,a=0;t||(t="0.0");try{s=+t.split(".")[0],a=+t.split(".")[1]}catch(e){return r({errCode:5,errDesc:"参数错误"})}const c={termID:s,localID:a};__Rtc.CRICEAPI.SetCurrentTab(o,c).then((e=>(console.crlog("[Sync] __Rtc.CRICEAPI.SetCurrentTab success! "),i({errCode:0}))),(e=>(console.crlog(`[Sync][Error] __Rtc.CRICEAPI.SetCurrentTab fail! ${e}`),r({errCode:1,errDesc:e}))))})),e.CRVideo_GetCurrentMainPage=()=>{console.crlog("[Sync] CRVideo_GetCurrentMainPage()");const e=this.curMainTab.localID;return console.crlog(`[Sync] CRVideo_GetCurrentMainPage, return: ${e}`),e},e.CRVideo_GetCurrentSubPage=()=>{console.crlog("[Sync] CRVideo_GetCurrentSubPage()");const e=`${this.curSubTab.termID}.${this.curSubTab.localID}`;return console.crlog(`[Sync] CRVideo_GetCurrentSubPage, return: ${e}`),e}}initSync(e){this.curMainTab=e.curMainTab,this.curSubTab=e.curSubTab}notifyCurPageID(){const e=`${this.curSubTab.termID}.${this.curSubTab.localID}`;console.crlog(`[Sync] CRVideo_NotifySwitchToPage.target(${this.curMainTab.localID},${e});`),CRVideo_NotifySwitchToPage.target(this.curMainTab.localID,e)}saveLastTabValue(e){__Rtc.CRICEAPI.SaveLastTabValue(e).then((e=>{console.crlog(`[Sync] __Rtc.CRICEAPI.SaveLastTabValue success! ${e[0]}`)}),(e=>{console.crlog(`[Sync][Error] __Rtc.CRICEAPI.SaveLastTabValue fail! ${e}`),console.error(e)}))}},e.__Rtc.CRRTCSync=new e.__crSyncClass,e.CRVideo_NotifySwitchToPage=new n.CbProxy("CRVideo_NotifySwitchToPage")}(window,Ice,CRVideo)},7957:()=>{(function(window,Ice,CR){class CRVideo_VideoInfoObj{constructor(e,t,n){this.userID=e,this.videoID=t,this.videoName=n}}class VideoClass{constructor(){console.crlog("[Video] VideoModule initData..."),this.initData(),this.initIceCallback(),this.initSDKInterface()}initData(){this.VSTATUS={VUNKNOWN:0,VNULL:1,VCLOSE:2,VOPEN:3,VOPENING:4}}initIceCallback(){this.ICECallback={notifyUpdateAllCameraInfos:this.notifyUpdateAllCameraInfos,notifySetOpenedCameraNumber:this.notifySetOpenedCameraNumber,updateStatus:this.updateStatus,enableSendVideo2Internet:e=>{console.crlog(`[Video] ICE Notify: enableSendVideo2Internet, params:${JSON.stringify({camID:e})}`),__Rtc.CRRTCLocalVideo.enableSendVideo2Internet(e)},disableSendVideo2Internet:e=>{console.crlog(`[Video] ICE Notify: disableSendVideo2Internet, params:${JSON.stringify({camID:e})}`),__Rtc.CRRTCLocalVideo.disableSendVideo2Internet(e)},notifyOpenVideo:e=>{console.crlog(`[Video] ICE Notify: notifyOpenVideo, params:${JSON.stringify({operID:e})}`),window.CRVideo_OpenVideo(CR.userInfo.userId)},updateAllCameraInfosRlst:e=>{console.crlog(`[Video] ICE Callback --\x3e updateAllCameraInfosRlst, params:${JSON.stringify({errCode:e})}`)},startVideoRslt:e=>{console.crlog(`[Video] ICE Callback --\x3e startVideoRslt, params:${JSON.stringify({errCode:e})}`)},stopVideoRslt:e=>{console.crlog(`[Video] ICE Callback --\x3e stopVideoRslt, params:${JSON.stringify({errCode:e})}`)},reqOpenVideoRslt:e=>{console.crlog(`[Video] ICE Callback --\x3e reqOpenVideoRslt, params:${JSON.stringify({errCode:e})}`)},startVideoExRslt:e=>{console.crlog(`[Video] ICE Callback --\x3e startVideoExRslt, params:${JSON.stringify({errCode:e})}`)},stopVideoExRslt:e=>{console.crlog(`[Video] ICE Callback --\x3e stopVideoExRslt, params:${JSON.stringify({errCode:e})}`)},setVideoDeviceStatusRslt:e=>{console.crlog(`[Video] ICE Callback --\x3e setVideoDeviceStatusRslt, params:${JSON.stringify({errCode:e})}`)},setOpenedCameraNumberRslt:e=>{console.crlog(`[Video] ICE Callback --\x3e setOpenedCameraNumberRslt, params:${JSON.stringify({errCode:e})}`)},batchSubscribeVideo2Rslt:e=>{console.crlog(`[Video] ICE Callback --\x3e batchSubscribeVideo2Rslt, params:${JSON.stringify({errCode:e})}`)}}}initSDKInterface(){window.CRVideo_SetVideoCfg=e=>{console.crlog(`[Video] CRVideo_SetVideoCfg(${JSON.stringify(e)})`),__Rtc.CRRTCLocalVideo.setVideoCfg(e)},window.CRVideo_GetVideoCfg=()=>{const e={};for(var t in __Rtc.CRRTCLocalVideo.videoCfg)e[t]=__Rtc.CRRTCLocalVideo.videoCfg[t];return console.crlog(`[Video] CRVideo_GetVideoCfg(), return: ${JSON.stringify(e)}`),e},window.CRVideo_GetVideoStatus=e=>{let t=CR.findMemberInfo({use:"userId",want:"videoStatus",value:e})||"VUNKNOWN";const n=this.VSTATUS[t];return console.crlog(`[Video] CRVideo_GetVideoStatus(${e}), return: ${n}`),n},window.CRVideo_GetDefaultVideo=e=>{let t;if(e==CR.userInfo.userId)t=__Rtc.CRRTCLocalVideo.defaultCamID;else{let n=null;CR.allMemberInfo.forEach((t=>{t.userId==e&&(n=null==t.defaultCam?-1:+t.defaultCam)})),t=null!=n?n:0}return console.crlog(`[Video] CRVideo_GetDefaultVideo(${e}), return:${t}`),+t},window.CRVideo_SetDefaultVideo=(e,t)=>{try{console.crlog(`[Video] CRVideo_SetDefaultVideo(${e},${t})`),t=+t}catch(e){console.error(e)}e==CR.userInfo.userId&&__Rtc.CRRTCLocalVideo.setDefaultVideo(t)},window.CRVideo_GetAllVideoInfo=e=>{const t=+CR.findMemberInfo({use:"userId",want:"termId",value:e}),n=[];t&&t===CR.userInfo.termId?__Rtc.CRRTCLocalVideo.videoInput.forEach((t=>{n.push(new CRVideo_VideoInfoObj(e,t.id,t.name))})):CR.allMemberInfo.forEach((i=>{i.termId==t&&i.allCams&&i.allCams.forEach((t=>{const i=t.split(";");n.push(new CRVideo_VideoInfoObj(e,+i[0],i[1]))}))}));try{console.crlog(`[Video] CRVideo_GetAllVideoInfo(${e}), return: ${JSON.stringify(n)}`)}catch(e){console.error(e)}return n},window.CRVideo_OpenVideo=e=>{if(console.crlog(`[Video] CRVideo_OpenVideo(${e})`),e==CR.userInfo.userId)__Rtc.CRRTCLocalVideo.videoInput.length>0?window.__Rtc.CRICEAPI.StartVideo():console.crlog("[Video] CRVideo_OpenVideo fail, no video devices!");else{const t=window.userIdToTermId(e);t&&window.__Rtc.CRICEAPI.ReqOpenVideo(t)}},window.CRVideo_CloseVideo=e=>{if(console.crlog(`[Video] CRVideo_CloseVideo(${e})`),e==CR.userInfo.userId)__Rtc.CRRTCLocalVideo.stopAllLocalVideoAndConnect(),window.__Rtc.CRICEAPI.StopVideo();else{const t=window.userIdToTermId(e);window.__Rtc.CRICEAPI.StopVideoEx(t)}},window.CRVideo_AddStreamCam=(e,t,n)=>(console.crlog(`[Video] CRVideo_AddStreamCam(${e},${t},${JSON.stringify(n)})`),__Rtc.CRRTCLocalVideo.addStreamCam(e,t,n)),window.CRVideo_RemoveStreamVideo=e=>(console.crlog(`[Video] CRVideo_RemoveStreamVideo(${e})`),__Rtc.CRRTCLocalVideo.removeStreamCam(e)),window.CRVideo_AddCanvasVCam=(e,t,n)=>{console.crlog(`[Video] CRVideo_AddCanvasVCam(${e},${t},${JSON.stringify(n)})`);const i=n&&n.fps?n.fps:__Rtc.CRRTCLocalVideo.videoCfg.fps;void 0===t&&(t=Ice.generateUUID());const r=e.getContext("2d"),o={type:"canvasStreamCam",canvas:e,ctx:r,putImageFun(){r.putImageData(r.getImageData(0,0,e.width,e.height),0,0)}};o.putImageFun();const s=e.captureStream(i||15),a=window.CRVideo_AddStreamCam(s,t,o);return!!a&&new CRVideo_VideoInfoObj(CR.userInfo.userId,a,t)},window.CRVideo_RemoveCanvasVCam=e=>{console.crlog(`[Video] CRVideo_RemoveCanvasVCam(${e})`),window.CRVideo_RemoveStreamVideo(e)},window.CRVideo_GetOpenedVideoIDs=e=>{const t=CR.findMemberInfo({use:"userId",want:"openedCamIDs",value:e})||[];try{console.crlog(`[Video] CRVideo_GetOpenedVideoIDs(${e}), return: ${JSON.stringify(t)}`)}catch(e){console.error(e)}return t},window.CRVideo_SetEnableMutiVideo=(e,t)=>{console.crlog(`[Video] CRVideo_SetEnableMutiVideo(${e},${t})`),__Rtc.CRRTCLocalVideo.VBGConfig.type&&t||e==CR.userInfo.userId&&__Rtc.CRRTCLocalVideo.setEnableMutiVideo(t)},window.CRVideo_GetEnableMutiVideo=e=>{let t=null;return e==CR.userInfo.userId&&(t=__Rtc.CRRTCLocalVideo.multipleCams),console.crlog(`[Video] CRVideo_GetEnableMutiVideo(${e}), return:${t}`),t},window.CRVideo_SetVirtualBackground=e=>{console.crlog(`[Video] CRVideo_SetVirtualBackground(${JSON.stringify(e)})`);return new Promise(((t,n)=>{if(e.LANData?CR.LANHumansegModel=!0:CR.LANHumansegModel=!1,null==e.type||0==e.type)__Rtc.CRRTCLocalVideo.VBGConfig.type=0,t();else if(1==e.type);else if(2==e.type){__Rtc.CRRTCLocalVideo.multipleCams&&n({errCode:1,errDesc:"多摄像头模式下不可开启虚拟背景"}),window.__RtcWEBGL||n({errCode:8007,errDesc:"启用webGL失败，请检查浏览器硬件加速是否被禁用"}),e.imgUrl||n({errCode:5,errDesc:'缺少必要参数"imgUrl"'}),humanseg.load(!0,!1);const i=__Rtc.CRRTCLocalVideo.VBGConfig.img,r=__Rtc.CRRTCLocalVideo.VBGConfig.bgCanvas;i.src=e.imgUrl,__Rtc.CRRTCLocalVideo.vbImgUrlChangeWaiting=!0,i.onload=()=>{r.width=i.width,r.height=i.height,r.getContext("2d").drawImage(i,0,0,i.width,i.height),__Rtc.CRRTCLocalVideo.vbImgUrlChangeWaiting=!1,__Rtc.CRRTCLocalVideo.VBGConfig.type=2,t()},i.onerror=e=>{console.crlog("[Video] SetVirtualBackground, load img url fail!"),n({errCode:1,errDesc:"背景图片url加载异常!"})}}}))}}videoAllocRawExt2(e,t,n,i){const r=+t.cameraID,o=+t.srcTermID;console.crlog(`[Video] TermID:${o}, camID:${r}, isSelf:${n}, videoAllocRawExt2...`),setTimeout((()=>{e.isResponsed||(console.crlog(`[Video] TermID:${o}, camID:${r}, isSelf:${n}, waiting for over 20s, do cb.ice_response()`),e.ice_response(),e.isResponsed=!0)}),2e4),n?__Rtc.CRRTCLocalVideo.videoAllocRawExt2(e,r):__Rtc.CRRTCRemoteVideo.videoAllocRawExt2(e,o,r)}modifyPeerAddrExt(e,t,n,i){if(setTimeout((()=>{t.isResponsed||(t.ice_response(),t.isResponsed=!0)}),2e4),"localVideo"==e){const e={type:"answer",sdp:this.parseAnswerSDP("local",i.get("sdp"))};__Rtc.CRRTCLocalVideo.modifyPeerAddrExt(e,t,n)}else if("remoteVideo"==e){const e={type:"answer",sdp:this.parseAnswerSDP("remote",i.get("sdp"))};__Rtc.CRRTCRemoteVideo.modifyPeerAddrExt(e,t,n)}}parseOfferSDP(e,t){let n=e;return"send"==t&&(n=n.replace("a=sendrecv","a=sendonly")),n}parseAnswerSDP(e,t){const n=t.match(/c=IN IP4(.*?)\r\n/)?t.match(/c=IN IP4(.*?)\r\n/)[0]:"",i=t.match(/b=AS:(.*?)\r\n/)?t.match(/b=AS:(.*?)\r\n/)[0]:"";return n&&t.split(n).length>2&&(t=t.replace(`${n}${i}`,"")),t=t.replace("a=extmap:5 http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01\r\n",""),"local"==e&&(t=(t=t.replace("a=extmap:5 http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01\r\n","")).replace(";profile-level-id=42001f","")),"remote"==e&&(t=t.replace("a=sendrecv","a=sendonly")),t}notifyUpdateAllCameraInfos(e,t){console.crlog(`[Video] ICE Notify: notifyUpdateAllCameraInfos, params:${JSON.stringify({termID:e,camInfos:t})}`),CR.allMemberInfo.forEach((n=>{if(n.termId==e){const i=new RegExp("\n","g");console.crlog(`[Video] TermID:${e}, userID:${n.userId}, updateAllCameraInfos: ${t.replace(i,"|")}`);const r=t.split("\n").slice(0,-1);console.log(n.allCams,r),n.allCams=r,console.crlog(`[Video] CRVideo_VideoDevChanged.target(${n.userId})`),CRVideo_VideoDevChanged.target(n.userId)}}))}notifySetOpenedCameraNumber(e,t){console.crlog(`[Video] ICE Notify --\x3e notifySetOpenedCameraNumber, params:${JSON.stringify({termID:e,camID:t})}`);const n=[];t.forEach((e=>n.push(parseInt(e)))),CR.allMemberInfo.forEach((t=>{if(t.termId==e){console.crlog(`[Video] NotifySetOpenedCameraNumber, termID:${t.termId}, userID:${t.userId}, camIDs:${JSON.stringify(n)}`);const i=t.defaultCam||0,r=n[0],o=t.openedCamIDs||[],s=n.slice(1);let a=!1;console.crlog(`[Video] Old OpenedCams: ${o}`),console.crlog(`[Video] Now OpenedCams: ${s}`),console.crlog(`[Video] Old DefaultCam: ${i}`),console.crlog(`[Video] Now DefaultCam: ${r}`),t.defaultCam=r,t.openedCamIDs=s;const c=[],l=[];for(let e=0;e<s.length;e++)o.includes(s[e])||l.push(s[e]);for(let e=0;e<o.length;e++)s.includes(o[e])||c.push(o[e]);return(c.length>0||l.length>0)&&(a=!0),t.userId!==CR.userInfo.userId&&c.forEach((t=>{__Rtc.CRRTCRemoteVideo.connectList.forEach((n=>{n.termID==e&&n.list.forEach((n=>{n.camID%1e4==t&&(console.crlog(`[Video] MSID:${n.msid}, termID:${e}, camID:${n.camID} video RTCConnection closed...`),n.connection&&n.connection.close())}))}))})),a&&(console.crlog(`[Video] TermID:${t.termId}, userID:${t.userId}, opened cams changed, stoppedCams:${JSON.stringify(c)}, addedCams:${JSON.stringify(l)}`),console.crlog(`[Video] CRVideo_VideoDevChanged.target(${t.userId})`),CRVideo_VideoDevChanged.target(t.userId)),r!==i&&(console.crlog(`[Video] TermID:${t.termId}, userID:${t.userId}, default camId changed:${i} ----\x3e ${r}`),console.crlog(`[Video] CRVideo_DefVideoChanged.target(${t.userId},${r})`),CRVideo_DefVideoChanged.target(t.userId,r)),void(e!==CR.userInfo.termId&&__Rtc.CRRTCRemoteVideo.updateSubscribeVideo())}}))}updateStatus(e,t,n){const i=CRVideo.allMemberInfo.find((t=>t.termId==e));if(!i)return;try{console.crlog(`[Video] Video updateStatus, termID:${e}, userID:${i.userId}, status:${t}, opID:${n}`)}catch(e){console.error(e)}const r=i.videoStatus||"VUNKNOWN";i.videoStatus=t.name,i.termId==CR.userInfo.termId&&("VOPEN"==t.name?(__Rtc.CRRTCLocalVideo.uploadCurOpenedCamNumber(),__Rtc.CRRTCLocalVideo.getLocalCamStream()):"VCLOSE"==t.name&&__Rtc.CRRTCLocalVideo.stopAllLocalVideoAndConnect()),r!==t.name&&(console.crlog(`[Video] CRVideo_VideoStatusChanged.target(${i.userId},${CRVideo_VSTATUS[r]},${CRVideo_VSTATUS[t.name]})`),CRVideo_VideoStatusChanged.target(i.userId,CRVideo_VSTATUS[r],CRVideo_VSTATUS[t.name]))}}class LocalVideoClass{constructor(){console.crlog("[Video] LocalVideoModule initData..."),this.initData()}initData(){this.lastLocalVideoMSID=12e4,this.defaultCamID=1,this.videoCfg={size:2,fps:15,ratio:1},__Rtc.CRBrowser.curBrowserCfg.isMobile&&(this.videoCfg.ratio=3),this.multipleCams=!1,this.videoInput=[],this.streamCamID=50,this.VBGConfig={type:0,imgUrl:"",videoEle:document.createElement("video"),videoCanvas:document.createElement("canvas"),bgCanvas:document.createElement("canvas"),streamCanvas:document.createElement("canvas"),img:new Image},this.VBGConfig.img.crossOrigin="anonymous",this.VBGConfig.videoEle.autoplay=!0,clearInterval(this.VBGTimer),this.VBGTimer=null}parseVideoHeight(e){let t=null;return 1==e?t={ideal:360}:2==e?t={ideal:480,min:360}:3==e?t={ideal:720,min:360}:4==e&&(t={ideal:1080,min:360}),t}parseVideoWidth(e){let t=null;return 1==e?t={ideal:640}:2==e?t={ideal:848}:3==e?t={ideal:1280}:4==e&&(t={ideal:1920}),t}parseVideoRatio(e){let t=null;switch(e){case 1:t={exact:16/9};break;case 2:t={exact:4/3};break;case 3:t={exact:1};break;case 4:t={exact:3/4};break;case 5:t={exact:9/16}}return t}parseVideoConstraints(videoCfg,device){const videoConstraints={};null==videoCfg&&(videoCfg=this.videoCfg),null==videoCfg.ratio&&(videoCfg.ratio=this.videoCfg.ratio);const sdkRatio=this.parseVideoRatio(videoCfg.ratio);null!==sdkRatio&&(videoConstraints.aspectRatio=sdkRatio),videoCfg.aspectRatio&&(videoConstraints.aspectRatio={exact:eval(videoCfg.aspectRatio)}),null==videoCfg.size&&(videoCfg.size=this.videoCfg.size);const width=this.parseVideoWidth(videoCfg.size),height=this.parseVideoHeight(videoCfg.size);return null!==height&&videoConstraints.aspectRatio&&videoConstraints.aspectRatio.exact<=1?videoConstraints.height=height:null!==width&&(videoConstraints.width=width),null==videoCfg.fps&&(videoCfg.fps=this.videoCfg.fps),videoConstraints.frameRate={ideal:videoCfg.fps},void 0!==device&&(__Rtc.CRBrowser.curBrowserCfg.isMobile?videoConstraints.facingMode={ideal:device.includes("user")?"user":"environment"}:videoConstraints.deviceId={ideal:device}),videoConstraints}getCurVideoCfg(e){return new Promise(((t,n)=>{const i=e.getVideoTracks()[0];if(i&&i.getSettings){let e,n;function r(){e=i.getSettings(),e.height&&e.width?(clearTimeout(n),t(e)):n=setTimeout((()=>{r()}),100)}r()}else{let e={width:this.parseVideoWidth(this.videoCfg.size),height:this.parseVideoHeight(this.videoCfg.size)};t(e)}}))}getMaxbps(){let e=1600;switch(this.videoCfg.size){case 1:e=6e5;break;case 2:e=8e5;break;case 3:e=12e5;break;case 4:e=16e5}return e}setMaxbps(e){try{const t=e.getSenders()[0];if(!t)return console.crlog("[Video][Error] connection.getSenders()[0] is undefind! setMaxbps fail!");const n=t.getParameters(),i=this.getMaxbps();n.encodings[0].maxBitrate=i,console.crlog(`[Video] LocalVideoConnection sender setParams, maxBitrate:${i}bps`),t.setParameters(n).then((e=>{console.crlog(`[Video] LocalVideoConnection sender setParams, maxBitrate:${i}, success!`)})).catch((e=>{console.crlog(`[Video][Error] LocalVideoConnection sender setParams, maxBitrate:${i}, fail! ${e}`),console.error(e)}))}catch(e){console.crlog(`[Video][Error] ${e}`),console.error(e)}}setVideoCfg(e){const t={};if(void 0!==e.size&&(t.size=+e.size),void 0!==e.fps&&(t.fps=+e.fps),void 0!==e.ratio&&(t.ratio=+e.ratio),void 0!==e.aspectRatio&&(t.aspectRatio=e.aspectRatio),0!==Object.keys(t).length){for(let e in t)this.videoCfg[e]=t[e];this.videoInput.forEach((e=>{if(!e.locAttr&&e.stream&&e.stream.active){const n=this.parseVideoConstraints(t),i=e.stream.getVideoTracks()[0];console.crlog(`[Video] Local camID:${e.id} applyConstraints:${JSON.stringify(n)}`),i.applyConstraints(n).then((()=>{console.crlog(`[Video] Local camID:${e.id} applyConstraints success! Current settings:${JSON.stringify(i.getSettings())}`),e.connect&&e.connect.connection&&this.setMaxbps(e.connect.connection),e.connect2&&e.connect2.connection&&this.setMaxbps(e.connect2.connection)})).catch((t=>{console.crlog(`[Video] Local camID:${e.id} applyConstraints fail! ${t}`),console.error(t)}))}}))}}setDefaultVideo(e){const t=this.videoInput.find((t=>t.id==e)),n=CRUtils.findMemberInfo(CR.userInfo.userId,"videoStatus");t&&(this.defaultCamID=e,this.multipleCams||"VOPEN"!=n||(this.stopAllLocalVideoAndConnect(),this.getLocalCamStream()),this.uploadCurOpenedCamNumber())}stopAllLocalVideoAndConnect(e){console.crlog("[Video] Do stop all local video track and connect..."),__Rtc.CRRTCUI.videoContainerList.forEach((e=>{e._userID==CR.userInfo.userId&&e.clear()})),clearInterval(this.VBGTimer),this.videoInput.forEach((e=>{e.connect.connection&&e.connect.connection.close(),e.connect2.connection&&e.connect2.connection.close(),e.connect.answer=null,e.connect.answer_cb=null,e.connect.candidate=[],e.connect.connection=null,e.connect.offer=null,e.connect.offer_cb=null,e.connect2.answer=null,e.connect2.answer_cb=null,e.connect2.candidate=[],e.connect2.connection=null,e.connect2.offer=null,e.connect2.offer_cb=null,window.videoResolutionReport(e.connect.msid,"video",0,0),window.videoResolutionReport(e.connect2.msid,"video",0,0),this.VBGConfig.videoEle.srcObject&&__Rtc.CRRTCLocalVideo.VBGConfig.videoEle.srcObject.getTracks()[0].stop(),"streamCam"!==e.kind&&"canvasStreamCam"!==e.kind&&(e.stream&&e.stream.getVideoTracks()[0].stop(),e.connect.stream=null,e.connect2.stream=null,e.stream=null),"canvasStreamCam"==e.kind&&e.exData&&e.exData.putImageTimer&&clearInterval(e.exData.putImageTimer)}))}uploadAllCamInfo(){console.crlog("[Video] UploadAllCamInfo...");let e="";this.videoInput.forEach((function(t){e=e+t.id+";"+t.name+";0;0\n"})),e&&__Rtc.CRICEAPI.UpdateAllCameraInfos(e)}uploadVideoDeviceStatus(){console.crlog("[Video] UploadVideoDeviceStatus..."),__Rtc.CRICEAPI.SetVideoDeviceStatus(this.videoInput.length>0)}uploadCurOpenedCamNumber(){console.crlog("[Video] UploadCurOpenedCamNumber...");const e=[this.defaultCamID];this.videoInput.forEach((t=>{t.disabled||!this.multipleCams&&(this.multipleCams||t.id!=this.defaultCamID)||e.push(t.id)})),__Rtc.CRICEAPI.SetOpenedCameraNumber(e)}getLocalCamStream(e){console.crlog("[Video] getLocalCamStream..."),this.videoInput.forEach((t=>{if(!t.disabled&&(this.multipleCams||!this.multipleCams&&t.id==this.defaultCamID))if("streamCam"===t.kind||t.stream&&t.stream.active||"canvasStreamCam"===t.kind){if("streamCam"==t.kind)t.connect.stream=t.stream,t.connect2.stream=t.stream,this.refreshLocalContainerSrc("",t);else if("canvasStreamCam"==t.kind&&(t.connect.stream=t.stream,t.connect2.stream=t.stream,this.refreshLocalContainerSrc("",t),t.exData)){t.exData.putImageTimer&&clearInterval(t.exData.putImageTimer),t.exData.putImageTimer=setInterval((()=>{t.exData.putImageFun()}),2e3);let e=0,n=300;const i=setInterval((()=>{e>3e3/n?(clearInterval(i),e=0):(t.exData.putImageFun(),e++)}),n)}}else{let n={audio:!1,video:__Rtc.CRBrowser.curBrowserCfg.isMobile?this.parseVideoConstraints(null,t.facingMode):this.parseVideoConstraints(null,t.deviceId)};null!=e&&(n=e),console.crlog(`[Video] local video camID:${t.id} getUserMedia:${JSON.stringify(n)}`),navigator.mediaDevices.getUserMedia(n).then((e=>{let n;t.deviceId&&console.crlog(`[Video] Local video camID:${t.id}, deviceID:${t.deviceId} getUserMedia success! stream:${e.id}`),t.facingMode&&console.crlog(`[Video] Local video camID:${t.id}, facingMode:${t.facingMode} getUserMedia success! stream:${e.id}`),console.crlog(`[Video] Local video camID:${t.id} current settings:${JSON.stringify(e.getVideoTracks()[0].getSettings())}`),2!=this.VBGConfig.type||this.multipleCams?(n=e,t.stream=n,t.connect.stream=n,t.connect2.stream=n,this.refreshLocalContainerSrc("",t)):(this.VBGConfig.videoEle.onplay=()=>{clearInterval(this.VBGTimer),this.VBGConfig.videoCanvas.width=this.VBGConfig.videoEle.videoWidth,this.VBGConfig.videoCanvas.height=this.VBGConfig.videoEle.videoHeight,this.VBGConfig.videoCanvas.getContext("2d").drawImage(this.VBGConfig.videoEle,0,0,this.VBGConfig.videoEle.videoWidth,this.VBGConfig.videoEle.videoHeight),this.VBGTimer=setInterval((()=>{this.vbImgUrlChangeWaiting||(this.VBGConfig.videoCanvas.width=this.VBGConfig.videoEle.videoWidth,this.VBGConfig.videoCanvas.height=this.VBGConfig.videoEle.videoHeight,this.VBGConfig.videoCanvas.getContext("2d").drawImage(this.VBGConfig.videoEle,0,0,this.VBGConfig.videoEle.videoWidth,this.VBGConfig.videoEle.videoHeight),humanseg.getGrayValue(this.VBGConfig.videoCanvas).then((e=>{humanseg.drawHumanSeg(e.data,this.VBGConfig.streamCanvas,this.VBGConfig.bgCanvas)})))}),100),setTimeout((()=>{n=this.VBGConfig.streamCanvas.captureStream(10),t.stream=n,t.connect.stream=n,t.connect2.stream=n,this.refreshLocalContainerSrc("",t)}),0)},this.VBGConfig.videoEle.srcObject=e)})).catch((e=>{t.deviceId&&console.crlog(`[Video] Local video camID:${t.id}, deviceID:${t.deviceId} getUserMedia fail! ${e}`),t.facingMode&&console.crlog(`[Video] Local video camID:${t.id}, deviceID:${t.facingMode} getUserMedia fail! ${e}`),console.error(e),"boolean"!=typeof n.video&&this.getLocalCamStream({audio:!1,video:!0})}))}}))}refreshLocalContainerSrc(e,t){var n=(e,t)=>{if(e._userID==CR.userInfo.userId&&(t.id==e._videoID||-1==e._videoID&&t.id==this.defaultCamID)){console.crlog(`[Video] Refresh local videoContainer src..., containerID:${e._id}, camID:${t.id}`);const n=t.stream||null,i=n?n.id:null,r=n?n.active:null;console.crlog(`[Video] Local video camID:${t.id}, containerID:${e._id}, set srcObject, stream:${i}, active:${r}`),e._videoEle.srcObject=n,setTimeout((()=>{r&&e&&e._videoEle&&e._videoEle.srcObject&&e._videoEle.click()}),1e3)}};e?this.videoInput.forEach((t=>{n(e,t)})):t?__Rtc.CRRTCUI.videoContainerList.forEach((e=>{n(e,t)})):(console.crlog("[Video] Refresh all local videoContainer src..."),__Rtc.CRRTCUI.videoContainerList.forEach((e=>{e._userID==CR.userInfo.userId&&this.videoInput.forEach((t=>{n(e,t)}))})))}videoAllocRawExt2(e,t){const n=this.videoInput.find((e=>e.id==t%1e4));if(!n)return console.crlog(`[Video] LocalVideoConnection, can not find camItem with camID:${t}, do offer_cb.ice_response()`),e.ice_response(),void(e.isResponsed=!0);t<=1e4?(n.connect.offer_cb=e,this.setLocalVideoConnection(n.connect)):t>1e4&&(n.connect2.offer_cb=e,this.setLocalVideoConnection(n.connect2))}setLocalVideoConnection(e){const t=`[Video] LocalVideoConnection, MSID:${e.msid}, camID:${e.camID},`,n=new RTCPeerConnection(CR.rtcCfg);e.connection=n;let i,r=0;!function o(){if(r>1e4)return console.crlog(`${t} wait more than 10 s, but can not get local video stream, do offer_cb.ice_response()`),e.offer_cb&&e.offer_cb.ice_response(),void(e.offer_cb&&(e.offer_cb.isResponsed=!0));if(!e.stream)return void(i=setTimeout((()=>{r+=50,o()}),50));const s=e.stream,a=e.stream.getVideoTracks()[0];n.addTrack&&"closed"!==n.signalingState?(console.crlog(`${t} addTrack(videoTrack, stream)`),n.addTrack(a,s)):setTimeout((function(){n.dispatchEvent(new Event("negotiationneeded"))}),100);console.crlog(`${t} createOffer()`),n.createOffer().then((i=>{i.sdp=__Rtc.CRRTCVideo.parseOfferSDP(i.sdp,"send"),e.offer=i;let r="";i.sdp.includes("VP8")&&(r+="VP8"),i.sdp.includes("H264")&&(r+="H264"),console.crlog(`${t} createOffer success!${i.sdp.length} ${r}`),console.crlog(`${t} setLocalDescription(offer)`),n.setLocalDescription(i).then((e=>{console.crlog(`${t} setLocalDescription success!`)})).catch((e=>{console.crlog(`${t} setLocalDescription fail! ${e}`),console.error(e)}))})).catch((e=>{console.crlog(`${t} createOffer fail! ${e}`),console.error(e)})),n.onicecandidate=n=>{if(n.candidate){e.candidate.push(n.candidate);const i=new Ice.HashMap;i.set("sdp",e.offer.sdp),i.set("icecandidate",JSON.stringify(e.candidate)),console.crlog(`${t} onicecandidate, response candidates(${e.candidate.length}): ${JSON.stringify(e.candidate)}`),console.crlog(`${t} offer_cb ice_response(${e.msid}, HashMap)...`),e.offer_cb.ice_response(e.msid,i),e.offer_cb.isResponsed=!0}else console.crlog(`${t} onicecandidate! e.candidate == ${n.candidate}!`)},n.oniceconnectionstatechange=n=>{console.crlog(`${t} oniceconnectionstatechange, iceConnectionState: ${n.currentTarget.iceConnectionState}`),e&&e.iceConnectionState&&"completed"==e.iceConnectionState&&setTimeout((function(){console.crlog(`${t} answer_cb ice_response()...`),e.answer_cb.ice_response(),e.answer_cb.isResponsed=!0}),500)},n.onconnectionstatechange=e=>{console.crlog(`${t} onconnectionstatechange, connectionState: ${e.currentTarget.connectionState}`)},n.onsignalingstatechange=e=>{console.crlog(`${t} onsignalingstatechange, signalingState: ${e.currentTarget.signalingState}`)}}()}modifyPeerAddrExt(e,t,n){let i;if(this.videoInput.forEach((e=>{e.connect.msid==n&&(i=e.connect),e.connect2.msid==n&&(i=e.connect2)})),i){const n=`[Video] LocalVideoConnection, MSID:${i.msid}, camID:${i.camID},`;let r="";e.sdp.includes("VP8")&&(r+="VP8"),e.sdp.includes("H264")&&(r+="H264"),console.crlog(`${n} modifyPeerAddrExt, answerSDP:${e.sdp.length} ${r}`),i.answer_cb=t,i.answer=e,setTimeout((()=>{i.answer_cb&&(console.crlog(`${n} answer_cb ice_response()...`),i.answer_cb.ice_response(),i.answer_cb.isResponsed=!0)}),500)}}enableSendVideo2Internet(e){let t;if(this.videoInput.forEach((n=>{n.connect.camID==e&&(t=n.connect),n.connect2.camID==e&&(t=n.connect2)})),t){if(t&&"stable"==t.connection.signalingState)return;const e=`[Video] LocalVideoConnection, MSID:${t.msid}, camID:${t.camID},`;console.crlog(`${e} setRemoteDescription(answer)`),t.connection.setRemoteDescription(new RTCSessionDescription(t.answer)).then((()=>{console.crlog(`${e} setRemoteDescription success!`);const n=t.connection.getSenders()[0],i=n.getParameters(),r=this.getMaxbps();null!=i.encodings&&i.encodings!=[]||(i.encodings=[],i.encodings[0]={}),i.encodings[0].maxBitrate=r,console.crlog(`${e} sender setParams, maxBitrate:${r}bps`),n.setParameters(i).then((t=>{console.crlog(`${e} sender setParams, maxBitrate:${r}, success!`)})).catch((t=>{console.crlog(`${e} sender setParams, maxBitrate:${r}, fail! ${t}`),console.error(t)})),this.getCurVideoCfg(t.stream).then((e=>{e.width&&e.height&&window.videoResolutionReport(t.msid,"video",e.width,e.height)}))})).catch((t=>{console.crlog(`${e} setRemoteDescription fail! ${t}`),console.error(t)}))}}setEnableMutiVideo(e){const t=this.multipleCams;if(t==e)return;this.multipleCams=e;const n=CR.allMemberInfo.find((e=>e.userId==CR.userInfo.userId));1==t?(n&&"VOPEN"==n.videoStatus&&this.uploadCurOpenedCamNumber(),this.videoInput.forEach((e=>{e.id!==this.defaultCamID&&e.stream&&e.stream.active&&("streamCam"!==e.kind&&"canvasStreamCam"!==e.kind?(e.stream.getVideoTracks()[0].stop(),e.stream=null):"canvasStreamCam"==e.kind&&e.exData&&e.exData.putImageTimer&&clearInterval(e.exData.putImageTimer),e.connect.stream=null,e.connect2.stream=null)}))):n&&"VOPEN"==n.videoStatus&&(this.getLocalCamStream(),this.uploadCurOpenedCamNumber())}stopAllLocalVideoTrack(){console.crlog("[Video] Do stop all local video track..."),this.videoInput.forEach((e=>{e.stream&&"streamCam"!==e.kind&&"canvasStreamCam"!==e.kind?(e.stream.getVideoTracks()[0].stop(),e.stream=null):"canvasStreamCam"==e.kind&&e.exData&&e.exData.putImageTimer&&clearInterval(e.exData.putImageTimer)}))}addStreamCam(e,t,n){try{console.crlog(`[Video] AddStreamCam -- stream --\x3e id:${e.id}, active: ${e.active}`)}catch(e){console.error(e)}const i=this.streamCamID++,r=Ice.generateUUID(),o={};o.deviceId=r,o.name=t||r,o.kind=n&&"canvasStreamCam"==n.type?"canvasStreamCam":"streamCam",o.id=i,o.disabled=!1,o.locAttr=null,o.stream=e,o.connect=new _ConnectItemClass(i,__Rtc.CRRTCLocalVideo.lastLocalVideoMSID++),o.connect2=new _ConnectItemClass(i+1e4,__Rtc.CRRTCLocalVideo.lastLocalVideoMSID++),n&&(o.exData=n),this.videoInput.push(o),this.uploadAllCamInfo(),this.uploadCurOpenedCamNumber();const s=CR.allMemberInfo.find((e=>e.userId==CR.userInfo.userId));return s&&"VOPEN"==s.videoStatus&&this.multipleCams&&(this.getLocalCamStream(),this.uploadCurOpenedCamNumber()),i}removeStreamCam(e){const t=this.videoInput.findIndex((t=>t.id===e&&("streamCam"==t.kind||"canvasStreamCam"==t.kind)));-1!=t&&this.videoInput.splice(t,1),this.uploadAllCamInfo(),this.uploadCurOpenedCamNumber()}}class RemoteVideoClass{constructor(){console.crlog("[Video] RemoteVideoModule initData..."),this.initData()}initData(){this.lastRemoteVideoMSID=22e4,this.remoteVideoSSVal=0,this.connectList=[],this.subscribedCamList=[]}subscribeVideo(e,t,n){if(-1==t&&(t=CR.findMemberInfo({want:"defaultCam",use:"termId",value:e})),window.__Rtc.CRICEAPI.BatchSubscribeVideo2(e,t,n),255==n){let n=null,i=null,r=!1;this.subscribedCamList.forEach(((o,s)=>{o.list.forEach(((a,c)=>{o.termID==e&&a==t&&(n=s,i=c,1==o.list.length&&(r=!0))}))})),r?null!==n&&this.subscribedCamList.splice(n,1):null!==n&&null!==i&&this.subscribedCamList[n].list.splice(i,1)}}videoAllocRawExt2(e,t,n){const i=this.connectList.find((e=>e.termID==t));if(i){let r=i.list.find((e=>e.camID==n));r||(r=new _ConnectItem(n,this.lastRemoteVideoMSID++),i.list.push(r)),r.offer_cb=e,this.setRemoteVideoConnection(t,r)}else{const i=new _UserConnectList(t),r=new _ConnectItem(n,this.lastRemoteVideoMSID++);i.list.push(r),this.connectList.push(i),r.offer_cb=e,this.setRemoteVideoConnection(t,r)}}modifyPeerAddrExt(e,t,n){console.crlog(`[Video] MSID:${n} modifyPeerAddrExt...`),this.connectList.forEach((i=>{const r=i.list.find((e=>e.msid==n));if(r){r.answer_cb=t,r.answer=e;const n=i.termID,o=CR.allMemberInfo.find((e=>e.termId==n)),s=`[Video] MSID:${r.msid}, termID:${n}, userID:${o.userId}, camID:${-1==r.camID?o.defaultCam:r.camID}, remoteVideoConnection`;let a="";e.sdp.includes("VP8")&&(a+="VP8"),e.sdp.includes("H264")&&(a+="H264"),console.crlog(`${s} received answer sdp:${e.sdp.length} ${a}`),console.crlog(`${s} setRemoteDescription(answer)`),r.connection.setRemoteDescription(new RTCSessionDescription(e)).then((()=>{console.crlog(`${s} setRemoteDescription success!`)})).catch((e=>{console.crlog(`${s} setRemoteDescription fail! ${e}`),console.error(e)})),setTimeout((()=>{console.crlog(`${s} answer_cb ice_response()...`),r.answer_cb.ice_response(),r.answer_cb.isResponsed=!0}),500)}}))}setRemoteVideoConnection(e,t){const n=CR.allMemberInfo.find((t=>t.termId==e)),i=new RTCPeerConnection(CR.rtcCfg),r=`[Video] MSID:${t.msid}, termID:${e}, userID:${n.userId}, camID:${t.camID}, remoteVideoConnection`;t.connection=i;const o={offerToReceiveAudio:!1,offerToReceiveVideo:!0,voiceActivityDetection:!1};console.crlog(`${r} createOffer(${JSON.stringify(o)})`),i.createOffer(o).then((e=>{e.sdp=__Rtc.CRRTCVideo.parseOfferSDP(e.sdp);let n="";e.sdp.includes("VP8")&&(n+="VP8"),e.sdp.includes("H264")&&(n+="H264"),console.crlog(`${r} createOffer success! offerSDP is:${e.sdp.length} ${n}`),t.offer=e,console.crlog(`${r} setLocalDescription(offer)`),i.setLocalDescription(e).then((()=>{console.crlog(`${r} offer setLocalDescription success!`)})).catch((e=>{console.error(`${r} offer setLocalDescription fail! ${e}`),console.error(e)}))})).catch((e=>{console.crlog(`${r} createOffer fail! ${e}`),console.error(e)})),i.onicecandidate=e=>{if(e.candidate&&!t.isResponsedCandidate){t.candidate.push(e.candidate);const n=new Ice.HashMap;n.set("sdp",t.offer.sdp),n.set("icecandidate",JSON.stringify(t.candidate)),console.crlog(`${r} onicecandidate, response candidates(${t.candidate.length}): ${JSON.stringify(t.candidate)}`),console.crlog(`${r} offer_cb ice_response(${t.msid}, HashMap)...`),t.offer_cb.ice_response(t.msid,n),t.offer_cb.isResponsed=!0,t.isResponsedCandidate=!0}else 0===t.candidate.length&&console.crlog(`${r} onicecandidate! null!`)},i.oniceconnectionstatechange=e=>{console.crlog(`${r} oniceconnectionstatechange, iceConnectionState: ${e.currentTarget.iceConnectionState}`),t&&t.iceConnectionState&&"completed"==t.iceConnectionState&&setTimeout((function(){console.crlog(`${r} answer_cb ice_response()...`),t.answer_cb.ice_response(),t.answer_cb.isResponsed=!0}),500)},i.ontrack=e=>{console.crlog(`${r} ontrack!`),console.crlog(`${r}, video stream:${e.streams[0].id}`),t.stream=e.streams[0],CRVideo_NotifyVideoStream.target(n.userId,e.streams[0]);try{return void __Rtc.CRRTCUI.videoContainerList.forEach((e=>{e._userID==n.userId&&(e._videoID==t.camID%1e4||-1==e._videoID&&t.camID%1e4==n.defaultCam)&&(console.crlog(`${r} containerID:${e._id}, videoEle set srcObject...`),e._videoEle.srcObject=t.stream,setTimeout((()=>{t.stream.active&&e&&e._videoEle&&e._videoEle.srcObject&&e._videoEle.click()}),1e3))}))}catch(e){console.error(e)}},i.onconnectionstatechange=e=>{console.crlog(`${r} onconnectionstatechange, connectionState: ${e.currentTarget.connectionState}`)},i.onsignalingstatechange=e=>{console.crlog(`${r} onsignalingstatechange, signalingState: ${e.currentTarget.signalingState}`)}}videoMSIDFree(e){this.connectList.forEach((t=>{t.list.forEach(((n,i)=>{if(n.msid==e){n.connection&&n.connection.close(),n.stream=null;const e=CR.allMemberInfo.find((e=>e.termId==t.termID));__Rtc.CRRTCUI.videoContainerList.forEach((t=>{if(t._userID==e.userId&&(t._videoID==n.camID%1e4||-1==t._videoID&&n.camID%1e4==e.defaultCam))try{t._videoEle.srcObject=null}catch(e){}})),t.list.splice(i,1)}}))}))}updateSubscribeVideo(){this.subcribeTimer&&clearTimeout(this.subcribeTimer),this.subcribeTimer=setTimeout((()=>{console.crlog("[Video] UpdateSubscribeVideo...");const e=[],t=[];__Rtc.CRRTCUI.videoContainerList.forEach((t=>{const n=CR.allMemberInfo.find((e=>e.userId==t._userID));if(!n||!n.defaultCam||n.termId==CR.userInfo.termId||!t._handler.parentNode||"none"==t._handler.style.display)return;let i=e.find((e=>e.termID==n.termId));i||(i={termID:n.termId,list:[]},e.push(i));const r=-1==t._videoID?n.defaultCam:t._videoID;!i.list.includes(r)&&n.openedCamIDs.includes(r)&&i.list.push(r)}));const n=(e,t)=>{const n=new Set(t);return e.filter((e=>!n.has(e)))};e.forEach((e=>{const i=[],r=this.subscribedCamList.find((t=>t.termID==e.termID)),o=CR.allMemberInfo.find((t=>t.termId==e.termID));if(o)if(r){const s=n(e.list,r.list);s&&s.forEach((e=>{const n={termID:o.termId,camID:e,ssVal:this.remoteVideoSSVal};t.push(n),i.push(n)}))}else e.list.forEach((e=>{const n={termID:o.termId,camID:e,ssVal:this.remoteVideoSSVal};t.push(n),i.push(n)}))})),this.subscribedCamList.forEach((i=>{const r=[],o=e.find((e=>e.termID==i.termID)),s=CR.allMemberInfo.find((e=>e.termId==i.termID));if(s)if(o){const e=n(i.list,o.list);e&&e.forEach((e=>{const n={termID:s.termId,camID:e,ssVal:255};t.push(n),r.push(n)}))}else i.list.forEach((e=>{const n={termID:s.termId,camID:e,ssVal:255};t.push(n),r.push(n)}))})),this.subscribedCamList=e,console.crlog(`[Video] NewsubscribeVideo and unSubscribeVideo resArr: ${JSON.stringify(t)}`),t.forEach((e=>{this.subscribeVideo(e.termID,e.camID,e.ssVal)}))}),100)}unSubscibevideo(e,t){const n=CR.allMemberInfo.find((t=>t.userId==e));n&&this.subscribeVideo(n.termId,t,255)}updateConnectList(e,t,n){console.crlog(`[Video] TermID:${e}, camID:${t}, containerID:${n._id} updateConnectList...`);const i=this.connectList.find((t=>t.termID==e));if(i){i.list.find((e=>e.camID==t))||i.list.push(new _ConnectItem(t,this.lastRemoteVideoMSID++))}else{const n=new _UserConnectList(e);n.list.push(new _ConnectItem(t,this.lastRemoteVideoMSID++)),this.connectList.push(n)}}refreshContainerSrc(e){e?(console.crlog(`[Video] Do refresh remote video container src..., containerID:${e._id}`),this.connectList.forEach((t=>{const n=CR.allMemberInfo.find((e=>e.termId==t.termID));t.list.forEach((t=>{!function(e,t,n){e._userID==n.userId&&(e._videoID==t.camID%1e4||-1==e._videoID&&t.camID%1e4==n.defaultCam)&&(t.stream&&t.stream.active&&console.crlog(`[Video] TermID:${n.termId}, userID:${n.userId}, containerID:${e._id} video set srcObject, stream:${t.stream.id}`),t.stream&&t.stream.active&&(e._videoEle.srcObject=t.stream),setTimeout((()=>{e&&e._videoEle&&e._videoEle.srcObject&&e._videoEle.click()}),1e3))}(e,t,n)}))}))):(console.crlog("[Video] Do refresh all remote video container src..."),this.connectList.forEach((e=>{const t=CR.allMemberInfo.find((t=>t.termId==e.termID));e.list.forEach((e=>{__Rtc.CRRTCUI.videoContainerList.forEach((n=>{n._userID==t.userId&&(n._videoID==e.camID%1e4||-1==n._videoID&&e.camID%1e4==t.defaultCam)&&(e.stream&&e.stream.active&&console.crlog(`[Video] TermID:${t.termId}, userID:${t.userId}, containerID:${n._id} video set srcObject, stream:${e.stream.id}`),e.stream&&e.stream.active&&(n._videoEle.srcObject=e.stream),setTimeout((()=>{n&&n._videoEle&&n._videoEle.srcObject&&n._videoEle.click()}),1e3))}))}))})))}userLeftHandler(e){console.crlog("[Video] Do user left meet video handler...");const t=this.subscribedCamList.findIndex((t=>t.termID==e));this.subscribedCamList.splice(t,1);const n=this.connectList.findIndex((t=>t.termID==e));this.connectList.splice(n,1)}closeAllRTCConnection(){console.crlog("[Video] Do close all remote video RTC connection..."),this.connectList.forEach((e=>{e.list.forEach((e=>{e.connection&&(e.connection.close(),e.connection=null)}))}))}}window.__crVideoClass=VideoClass,window.__crLocalVideoClass=LocalVideoClass,window.__crRemoteVideoClass=RemoteVideoClass,window.__Rtc.CRRTCVideo=new window.__crVideoClass,window.__Rtc.CRRTCLocalVideo=new window.__crLocalVideoClass,window.__Rtc.CRRTCRemoteVideo=new window.__crRemoteVideoClass,window.CRVideo_VideoStatusChanged=new CR.CbProxy("CRVideo_VideoStatusChanged"),window.CRVideo_DefVideoChanged=new CR.CbProxy("CRVideo_DefVideoChanged"),window.CRVideo_VideoDevChanged=new CR.CbProxy("CRVideo_VideoDevChanged"),window.CRVideo_NotifyOpenVideo=new CR.CbProxy("CRVideo_NotifyOpenVideo"),window.CRVideo_NotifyVideoStream=new CR.CbProxy("CRVideo_NotifyVideoStream"),window.CRVideo_SetVideoCfgRslt=new CR.CbProxy("CRVideo_SetVideoCfgRslt");class _ConnectItem{constructor(e,t){this.camID=e,this.ssValue=0,this.msid=t,this.offer=null,this.answer=null,this.offer_cb=null,this.answer_cb=null,this.connection=null,this.candidate=[],this.stream=null}}window._ConnectItemClass=_ConnectItem;class _UserConnectList{constructor(e){this.termID=e,this.list=[]}}})(window,Ice,CRVideo)},7331:()=>{!function(e,t,n){function i(e){let t=0,n=0;try{t=e.split(".")[0],n=e.split(".")[1]}catch(e){throw e}return{termID:t,localID:n}}class r{constructor(e){this.boardID=`${e.wID.termID}.${e.wID.localID}`,this.title=e.name,this.width=e.width,this.height=e.height,this.pageCount=e.pageCount,this.curPage=e.curPage,this.pagePos1=e.animID,this.pagePos2=e.animFrames}}class o{constructor(){this._initData(),this._initDom(),this._activeDraw(),this._passiveDraw(),this._setCtx(),this._loadEvent()}_initData(){this._id=t.generateUUID(),this._wbDesc=null,this._pageID=0,this._bScaled=!1,this._showTitle=!0,this._ctx=null,this._canvasEle=null,this._bgImg=null,this._titleEle=null,this._handler=null,this._revocableEleArr=[],this._resumableEleArr=[],this._pelType={4:"Pencil",5:"NiteWriterPen",6:"Line",7:"ArrowLine",8:"ArrowsLine",9:"Text",10:"SolidRectangular",11:"HollowRectangular",12:"RoundedSolidRectangle",13:"RoundedHollowRectangle",14:"SolidEllipse",15:"HollowEllipse"},this._style={type:4,cursor:"default",lineType:1,lineWidth:2,strokeStyle:"#0000FF",fillColor:"#FC011A",fullOpacity:.5}}_initDom(){const e=document.createElement("div");e.style.position="relative",e.style.width="100%",e.style.height="100%",e.style.overflow="auto",this._handler=e;const t=document.createElement("div");t.style.position="absolute",t.style.left=0,t.style.top=0,t.style.width="100%",t.style.lineHeight="normal",t.style.zIndex=2,this._titleEle=t,this._handler.appendChild(t);const n=document.createElement("canvas");n.style.position="absolute",n.style.left="50%",n.style.top="50%",n.style.transform="translateX(-50%) translateY(-50%)",n.style.height="0",n.style.width="0",n.style.backgroundColor="#fff",this._canvasEle=n,this._ctx=n.getContext("2d"),this._handler.appendChild(n)}handler(){return console.crlog(`[BoardUI] ID:${this._id}, handler()`),this._handler}setCurBoardPage(e,t){console.crlog(`[BoardUI] ID:${this._id}, setCurBoard(${e},${t})`);const n={};try{n.termID=+e.split(".")[0],n.localID=+e.split(".")[1]}catch(e){console.crlog(`[BoardUI][Error] ID:${this._id}, setBoardPage fail! The boardID is not correct!`),console.error(e)}if(n=={})return;const i=__Rtc.CRRTCBoard.wbDescibes.filter((e=>e.wID.termID==n.termID&&e.wID.localID==n.localID));if(0==i.length)return;this._wbDesc=i[0],i[0].boardUI=this,this._pageID=+t,this._titleEle.innerHTML=this._wbDesc.name;new ResizeObserver((e=>{this._revocableEleArr=[],this._resumableEleArr=[],this._resizeCanvas()})).observe(this._handler)}getCurBoardPage(){}isScaledContents(e){if(console.crlog(`[BoardUI] ID:${this._id}, isScaledContents(${e})`),null==e)return this._bScaled;this._bScaled=!!e,this._wbDesc&&this._resizeCanvas()}setTitleStyle(e){for(var t in console.crlog(`[BoardUI] ID:${this._id}, setTitleStyle(${JSON.stringify(e)})`),e)try{this._titleEle.style[t]=e[t]}catch(e){console.error(e)}}setBoardStyle(e){for(var t in console.crlog(`[BoardUI] ID:${this._id}, setBoardStyle(${JSON.stringify(e)})`),e)try{this._canvasEle.style[t]=e[t]}catch(e){console.error(e)}}setPen(e){console.crlog(`[BoardUI] ID:${this._id}, setPen(${JSON.stringify(e)})`),this._style.type=e.type||this._style.type,this._style.lineWidth=e.lineWidth||this._style.lineWidth,this._style.lineType=e.lineType||this._style.lineType,this._style.fillColor=e.fillColor||this._style.fillColor,this._style.strokeStyle=e.strokeStyle||this._style.strokeStyle,this._style.cursor=e.cursor||this._style.cursor,this._canvasEle.style.cursor=this._style.cursor}undo(){console.crlog(`[BoardUI] ID:${this._id}, undo()`);const e=this._revocableEleArr.pop();e&&(this._resumableEleArr.push(e),this.removeElement([e.eID]))}redo(){console.crlog(`[BoardUI] ID:${this._id}, redo()`);const e=this._resumableEleArr.pop();e&&(this._revocableEleArr.push(e),this.addElement(this._switchEleType(e)))}clear(){console.crlog(`[BoardUI] ID:${this._id}, clear()`);const e=[],t=this._wbDesc.pageDatas.filter((e=>e.pageNo==this._pageID));t.length>0&&t[0].elementList.forEach((t=>{e.push(t.eID)})),e.length>0&&__Rtc.CRRTCBoard.delElement(this._wbDesc.wID,this._pageID,e),this._resumableEleArr=[],this._revocableEleArr=[]}addElement(e){console.crlog(`[BoardUI] ID:${this._id}, addElement(${e})`),__Rtc.CRRTCBoard.addElement(this._wbDesc.wID,this._pageID,e)}removeElement(e){console.crlog(`[BoardUI] ID:${this._id}, removeElement(${e})`),__Rtc.CRRTCBoard.delElement(this._wbDesc.wID,this._pageID,e)}importImg(e){this._bgImg=e,this._resizeCanvas()}getCanvasElement(){return this._canvasEle||null}_drawBgImg(){this._bgImg&&this._ctx.drawImage(this._bgImg,0,0,this._canvasEle.width,this._canvasEle.height)}_resizeCanvas(){const e=this._wbDesc.width/this._wbDesc.height,t=this._handler.clientWidth/this._handler.clientHeight||1;this._bScaled||this._wbDesc.width>this._handler.clientWidth&&this._wbDesc.height>this._handler.clientHeight?e<=1&&e>t||e>1&&e>t?(this._canvasEle.style.width=`${this._handler.clientWidth}px`,this._canvasEle.style.height=this._handler.clientWidth/e+"px"):(this._canvasEle.style.height=`${this._handler.clientHeight}px`,this._canvasEle.style.width=this._handler.clientHeight*e+"px"):(this._canvasEle.style.height=`${this._wbDesc.height}px`,this._canvasEle.style.width=`${this._wbDesc.width}px`),this._canvasEle.height=this._wbDesc.height,this._canvasEle.width=this._wbDesc.width,this._drawBgImg(),this._drawAllPageData()}_activeDraw(){this._setCtx=()=>{this._ctx.strokeStyle=this._style.strokeStyle,this._ctx.lineWidth=this._style.lineWidth,3==this._style.lineType?this._ctx.setLineDash([5,6]):this._ctx.setLineDash([])},this._loadEvent=()=>{const{_ctx:t,_canvasEle:i}=this;e._canvasEle=this._canvasEle;let r=!1;i.ontouchstart=e=>{r=!0,this._setCtx();const o=i.width/i.offsetWidth,s=e.touches[0].pageX-i.getBoundingClientRect().left,a=e.touches[0].pageY-i.getBoundingClientRect().top;var c=parseInt(s*o),l=parseInt(a*o);const d={};d.type=this._style.type,d.left=c,d.top=l,d.color=this._style.strokeStyle,d.width=this._style.lineWidth,d.style=this._style.lineType,d.eID={ownerID:n.userInfo.termId,ID:__Rtc.CRRTCBoard.lastElemValue++},d.orderId=0,d.size=1,d.data=[{x:0,y:0}];var u=[{x:c,y:l}];return i.ontouchmove=e=>{const n=e.touches[0].pageX-i.getBoundingClientRect().left,r=e.touches[0].pageY-i.getBoundingClientRect().top;var s=parseInt(n*o),a=parseInt(r*o);t.beginPath();const{x:c,y:l}=u[u.length-1];return t.moveTo(c,l),t.lineTo(s,a),u.push({x:s,y:a}),d.data.push({x:s-d.left,y:a-d.top}),d.size=d.data.length,t.stroke(),!1},i.ontouchend=e=>{r=!1,i.onmousemove=null,i.ontouchmove=null,i.ontouchend=null,document.onmouseup=null,this._revocableEleArr.push(d),this.addElement(this._switchEleType(d))},!1},i.onmousedown=e=>{if(r)return;this._setCtx();const o=i.width/i.offsetWidth;var s=parseInt(e.offsetX*o),a=parseInt(e.offsetY*o);const c={};c.type=this._style.type,c.left=s,c.top=a,c.color=this._style.strokeStyle,c.width=this._style.lineWidth,c.style=this._style.lineType,c.eID={ownerID:n.userInfo.termId,ID:__Rtc.CRRTCBoard.lastElemValue++},c.orderId=0,c.size=1,c.data=[{x:0,y:0}];var l=[{x:s,y:a}];i.onmousemove=e=>{var n=parseInt(e.offsetX*o),i=parseInt(e.offsetY*o);t.beginPath();const{x:r,y:s}=l[l.length-1];t.moveTo(r,s),t.lineTo(n,i),l.push({x:n,y:i}),c.data.push({x:n-c.left,y:i-c.top}),c.size=c.data.length,t.stroke()},document.onmouseup=()=>{i.onmousemove=null,i.ontouchmove=null,i.ontouchend=null,document.onmouseup=null,this._revocableEleArr.push(c),this.addElement(this._switchEleType(c))}},console.crlog(`[BoardUI] ID:${this._id}, canvas on loadEvent...`)},this._switchEleType=e=>{switch(e.type){case 4:case 5:e=this._ele2buffer.pen(e)}return e},this._ele2buffer={pen(e){let t=0;const n={};n.eID=e.eID,n.left=e.left,n.top=e.top,n.type=e.type,n.orderId=e.orderId,n.noused=0;const i=e.data,r=i.length,o=new ArrayBuffer(15+4*i.length),s=new Uint8Array(o);this.color2buffer(s,t,e.color),t+=11,s[t++]=e.width,s[t++]=e.style,s[t++]=parseInt(r/256),s[t++]=r%256;let a=0;for(;a<i.length;)s[t++]=i[a].x>>8,s[t++]=255&i[a].x,s[t++]=i[a].y>>8,s[t++]=255&i[a].y,a++;return n.data=s,n},color2buffer(e,t,n){const i=this.hexColor2Rgba(n);e[t++]=1,e[t++]=e[t++]=i[3],e[t++]=e[t++]=i[0],e[t++]=e[t++]=i[1],e[t++]=e[t++]=i[2],e[t++]=e[t++]=0},hexColor2Rgba(e){var t=e;let n=[];if(/^(rgb|RGB)/.test(t))n=t.replace(/(?:\(|\)|RGBA|rgba|rgb|RGB)*/g,"").split(",").map((e=>+e)),n[3]=n[3]?Math.round(255*n[3]):255;else if(/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(t)){if(4===e.length){for(var i="#",r=1;r<4;r+=1)i+=e.slice(r,r+1).concat(e.slice(r,r+1));e=i}for(r=1;r<7;r+=2)n.push(parseInt("0x"+e.slice(r,r+2)));n.push(255)}return n}}}_passiveDraw(){this._drawAllPageData=()=>{this._wbDesc.pageDatas&&this._wbDesc.pageDatas.forEach((e=>{e.pageNo==this._pageID&&e.elementList.forEach((e=>{this._drawElement(e)}))}))},this._drawElement=e=>{const t=__Rtc.CRRTCBoard.Uint8ArrayToData(e),n=this._pelType[t.type];this[`_draw${n}`]?this[`_draw${n}`](t):console.crlog(`[BoardUI] ID:${this._id}, _drawElement fail, type ${t.type} is not defined!`)},this._drawPencil=e=>{this._setLineStyle(e),this._ctx.beginPath(),this._ctx.moveTo(e.left,e.top);for(var t=0;t<e.data.length;t++)this._ctx.lineTo(e.left+e.data[t].w,e.top+e.data[t].h);this._ctx.stroke(),this._setCtx()},this._setLineStyle=e=>{this._ctx.strokeStyle=e.color,this._ctx.lineWidth=e.width,this._ctx.lineCap="round",3===e.style?this._ctx.setLineDash([5,6]):this._ctx.setLineDash([])}}}e.__crBoardClass=class{constructor(){console.crlog("[Board] WhiteBoardModule initData..."),this.initData(),this.initIceCallback(),this.initSDKInterface()}initData(){this.lastTabValue=100,this.lastElemValue=100,this.wbDescibes=[],this.boardUIList=[],this.iceNotifyParams={},this.myLastWID={}}initIceCallback(){this.ICECallback={notifySetCurrentPage(t,i,r,o,s){if(void 0!==this.iceNotifyParams.notifySetCurrentPage&&this.iceNotifyParams.notifySetCurrentPage.boardID.termID==t.termID&&this.iceNotifyParams.notifySetCurrentPage.boardID.localID==t.localID&&this.iceNotifyParams.notifySetCurrentPage.pageNo==i&&this.iceNotifyParams.notifySetCurrentPage.animID==r&&this.iceNotifyParams.notifySetCurrentPage.animFrames==o&&this.iceNotifyParams.notifySetCurrentPage.operatorID==s)return;this.iceNotifyParams.notifySetCurrentPage={},this.iceNotifyParams.notifySetCurrentPage.boardID=t,this.iceNotifyParams.notifySetCurrentPage.pageNo=i,this.iceNotifyParams.notifySetCurrentPage.animID=r,this.iceNotifyParams.notifySetCurrentPage.animFrames=o,this.iceNotifyParams.notifySetCurrentPage.operatorID=s,console.crlog(`[Board] ICE Notify --\x3e notifySetCurrentPage, params:${JSON.stringify({wID:t,pageNo:i,animID:r,animFrames:o,operatorID:s})}`);const a=n.findMemberInfo({want:"userId",use:"termId",value:s})||"";this.wbDescibes.forEach((e=>{e.wID.termID==t.termID&&e.wID.localID==t.localID&&(e.curPage=i)})),console.crlog(`[Board] CRVideo_NotifyBoardCurPageNo.target(${t.termID}.${t.localID},${i},${r},${o},${a})`),e.CRVideo_NotifyBoardCurPageNo.target(`${t.termID}.${t.localID}`,i,r,o,a)},notifyCreate(e,t){console.crlog(`[Board] ICE Notify --\x3e notifyCreate, params:${JSON.stringify(e)},${t}`),this.wbDescibes.push(e),this.queryBoardPageDatas(e);const i=new r(e),o=n.findMemberInfo({want:"userId",use:"termId",value:t})||"";console.crlog(`[Board] CRVideo_NotifyCreateBoard.target(${JSON.stringify(i)},${o})`),CRVideo_NotifyCreateBoard.target(i,o)},notifyClose(e,t){console.crlog(`[Board] ICE Notify --\x3e notifyClose, params:${JSON.stringify(e)},${t}`);const i=this.wbDescibes.findIndex((t=>t.wID.termID==e.termID&&t.wID.localID==e.localID)),r=n.findMemberInfo({want:"userId",use:"termId",value:t})||"";if(i>-1){this.wbDescibes.splice(i,1);const t=`${e.termID}.${e.localID}`;console.crlog(`[Board] CRVideo_NotifyCloseBoard.target(${t},${r})`),CRVideo_NotifyCloseBoard.target(t,r)}},notifyAddElement(e,t,n,i){console.crlog(`[Board] ICE Notify --\x3e notifyAddElement, params:${JSON.stringify(e)},${t},${n},${i}`),this.notifyAddElement(e,t,n,i)},notifyAddElementEx(e,t,n,i){console.crlog(`[Board] ICE Notify --\x3e notifyAddElementEx, params: ${JSON.stringify(e)},${t},${n},${i}`);for(var r=0;r<n.length;r++)this.notifyAddElement(e,pageNo,element,i)},notifyDelElement(e,t,n,i){console.crlog(`[Board] ICE Notify --\x3e notifyDelElement, params:${JSON.stringify(e)},${t},${JSON.stringify(n)},${i}`),this.notifyDelElement(e,t,n,i)},notifySetContainerSize(e,t,n){console.crlog(`[Board] ICE Notify --\x3e notifySetContainerSize, params:${e},${t},${n}`)},notifyImportPage(e,t,n){console.crlog(`[Board] ICE Notify --\x3e notifyImportPage, params: ${JSON.stringify(e)},${JSON.stringify(t)},${n}`)},notifyChangeName(e,t,n){console.crlog(`[Board] ICE Notify --\x3e notifyChangeName, params: ${JOSN.stringify(e)},${t},${n}`)},notifyChangeScale(e,t,n){console.crlog(`[Board] ICE Notify --\x3e notifyChangeScale, params: ${JSON.stringify(e)},${t},${n}`)},notifyChangeRotate(e,t,n){console.crlog(`[Board] ICE Notify --\x3e notifyChangeRotate, params: ${JSON.stringify(e)},${t},${n}`)},notifyShowThumPage(e,t,n){console.crlog(`[Board] ICE Notify --\x3e notifyShowThumPage, params: ${JSON.stringify(e)},${t},${n}`)},notifyMoveElement(e,t,n,i){console.crlog(`[Board] ICE Notify --\x3e notifyMoveElement, params: ${JSON.stringify(e)},${t},${n},${i}`)},notifyModifyElement(e,t,n,i){console.crlog(`[Board] ICE Notify --\x3e notifyModifyElement, params: ${JSON.stringify(e)},${t},${n},${i}`)},notifySetElementZPos(e,t,n,i){console.crlog(`[Board] ICE Notify --\x3e notifySetElementZPos, params: ${JSON.stringify(e)},${t},${n},${i}`)},notifySetIndicator(e,t,n){console.crlog(`[Board] ICE Notify --\x3e notifySetIndicator, params: ${JSON.stringify(e)},${t},${n}`)},notifySetHotspot(e,t,n,i,r){console.crlog(`[Board] ICE Notify --\x3e notifySetHotspot, params: ${JSON.stringify(e)},${t},${n},${i},${r}`)},notifySetMarkTerms(e,t,n){console.crlog(`[Board] ICE Notify --\x3e notifySetMarkTerms, params: ${JSON.stringify(e)},${t},${n}`)}}}initSDKInterface(){e.CRVideo_CreateBoardUIObj=e=>{try{console.crlog(`[Board] CRVideo_CreateBoardUIObj(${JSON.stringify(e)})`)}catch(e){console.error(e)}const t=new o;return console.crlog(`[Board] CRVideo_CreateBoardUIObj, return BoardUI ID：${t._id}`),this.boardUIList.push(t),t},e.CRVideo_Creatboard=(e,t,i,r)=>new Promise(((o,s)=>{console.crlog(`[Board] CRVideo_Creatboard(${e},${t},${i},${r})`);const a={};a.name=e,a.width=t,a.height=i,a.pageCount=r,a.bAll=!0,a.wID={termID:n.userInfo.termId,localID:this.lastTabValue++},__Rtc.CRICEAPI.Create(a).then((e=>{console.crlog(`[Board] __Rtc.CRICEAPI.Create success! ${e[0]}`),__Rtc.CRRTCSync.saveLastTabValue(this.lastTabValue);const t=[];for(let e=0;e<r;e++)t.push({pageNo:e,elementList:[]});this.initBoardPageDat(a.wID,t),o({errCode:0,boardID:`${a.wID.termID}.${a.wID.localID}`})}),(e=>{console.crlog(`[Board][Error] __Rtc.CRICEAPI.Create fail! ${e}`),s({errCode:1,errDesc:e})}))})),e.CRVideo_Closeboard=e=>new Promise(((t,n)=>{console.crlog(`[Board] CRVideo_Closeboard(${e})`);const r=i(e);__Rtc.CRICEAPI.Close(r).then((e=>{console.crlog(`[Board] __Rtc.CRICEAPI.Close success! ${e[0]}`),t({errCode:0})}),(e=>{console.crlog(`[Board][Error] __Rtc.CRICEAPI.Close fail! ${e}`),n({errCode:1,errDesc:e})}))})),e.CRVideo_SetBoardCurPageNo=(e,t,n,r)=>new Promise(((o,s)=>{console.crlog(`[Board] CRVideo_SetBoardCurPageNo(${JSON.stringify({boardID:e,pageNo:t,pagePos1:n,pagePos2:r})})`),__Rtc.CRICEAPI.SetCurrentPage(i(e),t,n,r).then((e=>{console.crlog(`[Board] __Rtc.CRICEAPI.SetCurrentPage success! ${e[0]}`),o({errCode:0})}),(e=>{console.crlog(`[Board][Error] __Rtc.CRICEAPI.SetCurrentPage fail! ${e}`),s({errCode:1,errDesc:e})}))}))}Uint8ArrayToData(e){var t=[],n={},i=new Uint8Array(e.data.buffer),r=(i[0],{}),o=(i[9],i[11]),s=i[12],a=i[13]<<8|i[14];r.alpha=i[1],r.red=i[3],r.green=i[5],r.blue=i[7];for(var c=[],l=15;l<i.length;l+=2)c[l]=i[l],c[l+1]=i[l+1],i[l]>=240&&(c[l]=i[l]-256,c[l+1]=i[l+1]+256*(i[l]-256));for(l=15;l<c.length;l+=4)t.push({w:c[l]<<8|c[l+1],h:c[l+2]<<8|c[l+3]});return n.color=this.colorRGB2Hex("rgb("+r.red+","+r.green+","+r.blue+")"),n.width=o,n.style=s,n.size=a,n.data=t,n.eID=e.eID,n.orderId=e.orderId,n.type=e.type,n.left=e.left,n.top=e.top,n}elementDataToBuffer(e){var t={},n=e.data;const i=this.colorHexToRgba(e.color,1);var r=new ArrayBuffer(15+4*n.length);t.eID=e.eID,t.noused=0,t.left=e.left,t.top=e.top,t.type=e.type,t.data=new Uint8Array(r),t.data[0]=1,t.data[1]=t.data[2]=255,t.data[3]=t.data[4]=i.red,t.data[5]=t.data[6]=i.green,t.data[7]=t.data[8]=i.blue,t.data[9]=t.data[10]=0,t.data[11]=e.width,t.data[12]=1,t.data[13]=parseInt(e.size/256),t.data[14]=e.size%256;for(var o=0,s=15;o<n.length;o++)t.data[s]=n[o].w>>8,t.data[s+1]=255&n[o].w,t.data[s+2]=n[o].h>>8,t.data[s+3]=255&n[o].h,s+=4;return t}colorRGB2Hex(e){var t=e.split(",");return"#"+((1<<24)+(parseInt(t[0].split("(")[1])<<16)+(parseInt(t[1])<<8)+parseInt(t[2].split(")")[0])).toString(16).slice(1)}colorHexToRgba(e,t){var n="rgba("+parseInt("0x"+e.slice(1,3))+","+parseInt("0x"+e.slice(3,5))+","+parseInt("0x"+e.slice(5,7))+","+t+")";return{red:parseInt("0x"+e.slice(1,3)),green:parseInt("0x"+e.slice(3,5)),blue:parseInt("0x"+e.slice(5,7)),rgba:n}}termIdToNickname(e){var t,i="[object Array]"==Object.prototype.toString.call(e);if(i){t=[];for(var r=0;r<e.length;r++)"object"==typeof e[r]&&(t[r]=JSON.parse(JSON.stringify(e[r])));for(var o=0;o<t.length;o++)t[o].ownerID==n.userInfo.termId&&(t[o].ownerID=n.userInfo.userId)}else"number"==typeof e?(t=null,t=e==n.userInfo.termId?n.userInfo.userId:e):"object"!=typeof e||i||(t={},(t=JSON.parse(JSON.stringify(e))).ownerID==n.userInfo.termId&&(t.ownerID=n.userInfo.userId));return t}initBoards(){console.crlog("[Board] Init boards..");const e=[];this.wbDescibes.forEach((t=>{this.queryBoardPageDatas(t),e.push(new r(t))})),console.crlog(`[Board] CRVideo_NotifyInitBoards.target(${JSON.stringify(e)})`),CRVideo_NotifyInitBoards.target(e)}queryAllWhiteBoardList(){console.crlog("[Board] Query all whiteBoard list.."),__Rtc.CRICEAPI.QueryAllBoardList().then((e=>{console.crlog(`[Board] __Rtc.CRICEAPI.QueryAllBoardList success! ${e[0]}`);const t=e[1];this.wbDescibes=t,this.wbDescibes.forEach((e=>{this.queryBoardPageDatas(e)}))}),(e=>{console.crlog(`[Board][Error] __Rtc.CRICEAPI.QueryAllBoardList fail! ${e}`),console.error(e)}))}queryBoardPageDatas(e){console.crlog(`[Board] Query board page datas, wbID:${JSON.stringify(e.wID)}`);const t=[];for(var n=0;n<e.pageCount;n++)t.push(n);t.length>0&&__Rtc.CRICEAPI.QueryElementByIDs(e.wID,t).then((t=>{const n=t[1].values();e.pageDatas=n,e.boardUI&&e.boardUI._drawAllPageData()}))}notifyAddElement(e,t,n,i){this.wbDescibes.forEach((i=>{i.wID.termID==e.termID&&i.wID.localID==e.localID&&i.pageDatas.forEach((e=>{e.pageNo==t&&(e.elementList.push(n),i.boardUI._drawElement(n),i.boardUI._resizeCanvas())}))}))}notifyDelElement(e,t,n,i){for(var r=0;r<n.length;r++){let i;this.wbDescibes.forEach((o=>{o.wID.termID==e.termID&&o.wID.localID==e.localID&&o.pageDatas.forEach((e=>{e.pageNo==t&&(i=e.elementList.findIndex((e=>e.eID.ownerID==n[r].ownerID&&e.eID.ID==n[r].ID)),-1!==i&&e.elementList.splice(i,1),o.boardUI._resizeCanvas())}))}))}}delElement(e,t,n){console.crlog(`[Board] DelElement, wID:${JSON.stringify(e)},pageNo:${t},delEleIDs}`),__Rtc.CRICEAPI.DelElement(e,t,n).then((e=>{}),(e=>{console.crlog(`[Board][Error] __Rtc.CRICEAPI.DelElement fail! ${e}`)}))}addElement(e,t,n){this.myLastWID={wID:e,pageNo:t,element:n},__Rtc.CRICEAPI.AddElement(e,t,n).then((e=>{}),(e=>{console.crlog(`[Board] __Rtc.CRICEAPI.AddElement fail! ${e}`)}))}initBoardPageDat(e,t){__Rtc.CRICEAPI.ImportPage(e,t).then((e=>{console.log(e)}),(e=>{console.log(e)}))}},e.__Rtc.CRRTCBoard=new e.__crBoardClass,e.CRVideo_NotifyInitBoards=new CRVideo.CbProxy("CRVideo_NotifyInitBoards"),e.CRVideo_NotifyBoardCurPageNo=new CRVideo.CbProxy("CRVideo_NotifyBoardCurPageNo"),e.CRVideo_NotifyCreateBoard=new CRVideo.CbProxy("CRVideo_NotifyCreateBoard"),e.CRVideo_NotifyCloseBoard=new CRVideo.CbProxy("CRVideo_NotifyCloseBoard"),e.CRVideo_NotifyInitBoardPageDat=new CRVideo.CbProxy("CRVideo_NotifyInitBoardPageDat"),e.CRVideo_NotifyBoardBkImage=new CRVideo.CbProxy("CRVideo_NotifyBoardBkImage"),e.CRVideo_NotifyAddBoardElement=new CRVideo.CbProxy("CRVideo_NotifyAddBoardElement"),e.CRVideo_NotifyModifyBoardElement=new CRVideo.CbProxy("CRVideo_NotifyModifyBoardElement"),e.CRVideo_NotifyDelBoardElement=new CRVideo.CbProxy("CRVideo_NotifyDelBoardElement"),e.CRVideo_NotifyMouseHotSpot=new CRVideo.CbProxy("CRVideo_NotifyMouseHotSpot")}(window,Ice,CRVideo)},2767:()=>{"use strict";const e=window.Ice,t=window.whiteBoard;const n=new class{constructor(){this._initData(),this._initCallback()}_initData(){this._proxyString="WhiteBoard:wss -r /sig/8099 -h crlab.cloudroom.com -p 543",this._ic=null,this._proxy=null,this._adapter=null,this._connection=null,this._boardI=null,this.serverPrx=null}_initCallback(){this._boardI=e.Class(t.WhiteBoardCallback2,{notifyCreate(){console.log("notifyCreate")},notifySetPageDat(){console.log("notifySetPageDat")},notifyDelete(){console.log("notifyDelete")},notifySetExtInfo(){console.log("notifySetExtInfo")},notifySetScale(){console.log("notifySetScale")},notifyCurrentPos(){console.log("notifyCurrentPos")},notifyAddShape(){console.log("notifyAddShape")},notifyAppendShapeDat(){console.log("notifyAppendShapeDat")},notifyMoveShape(){console.log("notifyMoveShape")},notifyModifyShape(){console.log("notifyModifyShape")},notifyDelShape(){console.log("notifyDelShape")},notifySetHotspot(){console.log("notifySetHotspot")}})}_initializationData(){const t=new e.InitializationData;return t.properties=e.createProperties(),t.properties.setProperty("Ice.Trace.Network","0"),t.properties.setProperty("Ice.Trace.Protocol","0"),t.properties.setProperty("Ice.ACM.Client","0"),t.properties.setProperty("Ice.ACM.Server","0"),t.properties.setProperty("Ice.Default.EncodingVersion","1.0"),e.initialize(t)}createConnect(){console.crlog("[WhiteBoard] Create whiteBoard connection..");const e=new Promise(((e,n)=>{this._ic=this._initializationData(),this._proxy=this._ic.stringToProxy(this._proxyString),t.WhiteBoardCtrl2Prx.checkedCast(this._proxy).then((t=>{console.log(t),this.serverPrx=t,this._ic.createObjectAdapter("").then((t=>{this._adapter=t,this._adapter.add(new this._boardI,this._ic.stringToIdentity("jclient")),this._adapter.activate();const i=this.serverPrx.ice_getCachedConnection();return null!=i?(this._connection=i,i.setAdapter(t),e()):(console.crlog("[WhiteBoard] WhiteBoard connection, ice_getCachedConnection is null!"),n())})).exception((e=>(console.log(e),n())))})).exception((e=>(console.log(e.toString()),console.crlog("[WhiteBoard] checkedCast fail!"),n())))}));return e}destroyConnect(){this._ic&&this._ic.destroy&&this._ice.destroy(),this._initData()}},i=n,r=window.Ice;const o=new class{constructor(){}login(e,t){console.crlog(`[WhiteBoard] Ice request: login(${e},${t})`);const n=i.serverPrx;n&&n.login(new r.Long(e,0),t.toString()).then((e=>{console.log(`登陆成功， sessionID: ${e}`)})).exception((e=>{console.log(e)}))}logout(e){const t=i.serverPrx;t&&t.logout(e).then((e=>{console.log(e)})).exception((e=>{console.log(e)}))}},s={Login:(e,t)=>{console.crlog(`[WhiteBoard] CRBoard_Login(${e}, ${t})`),i.serverPrx?o.login(e,t):i.createConnect().then((()=>{o.login(e,t)})).catch((e=>{console.log("create connect fail",e)}))}},a=(window.CRVideo_Init,window.CRVideo_LoginSuccess,{Login:s.Login});window.CRBoard_Login=a.Login},8525:()=>{CRVideo.sdkver="2.5.5.7",CRVideo.sdkInfo="SDK Ver: 2.5.5.7, Last modified: Victor.Liu 2022/1/11 下午4:03:19",console.crlog(`[SDK] ${CRVideo.sdkInfo}`),setTimeout((()=>{console.crlog(`[WEBRTC] WebRTC codecs: ${window.__Rtc.rtc_codecs}`)}),2e3),CRVideo.isSDKConsole=!0,CRVideo.isUploadLog=!0,CRVideo.maxBps_media=2400,CRVideo.isHttp=!1,CRVideo.isCallSer=!0,CRVideo.MSProtocol=1,CRVideo.isWebRTC=!0,CRVideo.__crfib=function(e){return e<2?e:CRVideo.__crfib(e-1)+CRVideo.__crfib(e-2)},window.addEventListener("unload",(e=>{(CRVideo.isMeeting||CRVideo.isLoginCallserver)&&(CRVideo.isMeeting&&__Rtc.CR__Exit("直接离开页面"),CRVideo.isLoginCallserver&&CRVideo.webSendcmd({cmd:"Logout",module:"CallServer",sessionID:CRVideo.sessionID}),CRVideo.__crfib(25))})),window.CRVideo_GetSDKVersion=()=>CRVideo.sdkver,window.CRVideo_WriteLog=e=>{console.crlog(`[App] ${e}`)},window.CRVideo_SetSDKParams=e=>{if(console.crlog(`[SDK] CRVideo_SetSDKParams:${JSON.stringify(e)}`),void 0!==e)return CRVideo.isSDKConsole=!1!==e.isSDKConsole,CRVideo.isUploadLog=!1!==e.isUploadLog,e.mediaSendBW&&(CRVideo.maxBps_media=+e.mediaSendBW),e.isHttp&&(CRVideo.isHttp=!0,CRVideo.protocol="http:"),CRVideo.isCallSer=!1!==e.isCallSer,void 0!==e.MSProtocol&&(CRVideo.MSProtocol=+e.MSProtocol),CRVideo.isWebRTC=!1!==e.isWebRTC,console.crlog(`[Init] Set isUploadLog:${CRVideo.isUploadLog},isSDKConsole:${CRVideo.isSDKConsole}, on init sdk!`),void window.CRVideo_EnableLog2File(CRVideo.isUploadLog,CRVideo.isSDKConsole);console.crlog(`[Init] Set isUploadLog:${CRVideo.isUploadLog},isSDKConsole:${CRVideo.isSDKConsole}, on init sdk!`),window.CRVideo_EnableLog2File(CRVideo.isUploadLog,CRVideo.isSDKConsole),CRVideo_UploadingReport()},window.CRVideo_Init=e=>(console.crlog(`[Init] CRVideo_Init(${JSON.stringify(e)})`),new Promise(((t,n)=>{if(e&&!1===e.isWebRTC&&(CRVideo.isWebRTC=!1),!CRVideo.isWebRTC)return console.crlog("[Init] Init sdk success when isWebRTC false!"),t(0);{if(!window.RTCPeerConnection)return console.crlog('[Init] Init SDK fail! "window.RTCPeerConnection" API not found!'),n(8004);if(!window.navigator.mediaDevices)return console.crlog('[Init] Init SDK fail! "window.navigator.mediaDevices" API not found!'),n(8004);if(!window.navigator.mediaDevices.enumerateDevices)return console.crlog('[Init] Init SDK fail! "window.navigator.mediaDevices.enumerateDevices" API not found!'),n(8004);if(!window.navigator.mediaDevices.getUserMedia)return console.crlog('[Init] Init SDK fail! "window.navigator.mediaDevices.getUserMedia" API not found!'),n(8004);let i;if(!(navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices&&window.RTCPeerConnection))return window.RTCPeerConnection?(console.crlog("[Init] Init sdk fail, navigator.mediaDevices.enumerateDevices API not found!"),window.location.protocol&&"http:"==window.location.protocol&&console.crlog('[Init][Error] The current page protocal is "HTTP", You should use "HTTPS" protocol!'),window.location.protocol&&"http:"==window.location.protocol&&console.error('The current page protocal is "HTTP", You should use "HTTPS" protocol!'),n(8004)):(console.crlog("[Init] Init sdk fail, the browser haven't window.RTCPeerConnection Object!"),n(8004));console.crlog("[Init] First enumerateDevices on init..."),navigator.mediaDevices.enumerateDevices().then((r=>{const o=[],s=[],a=[];r.forEach((e=>{"audioinput"==e.kind?s.push(e):"audiooutput"==e.kind?a.push(e):"videoinput"==e.kind&&o.push(e)})),console.crlog(`[Init] Video input devices: ${JSON.stringify(o)}`),console.crlog(`[Init] Audio input devices: ${JSON.stringify(s)}`),console.crlog(`[Init] Audio output devices: ${JSON.stringify(a)}`),i=(0!==o.length||0!==s.length)&&(0===o.length?{video:!1,audio:!0}:0===s.length?{video:!0,audio:!1}:{video:!0,audio:!0}),void 0!==e&&(CRVideo.isSDKConsole=!1!==e.isSDKConsole,CRVideo.isUploadLog=!1!==e.isUploadLog,e.mediaSendBW&&(CRVideo.maxBps_media=+e.mediaSendBW),e.isHttp&&(CRVideo.isHttp=!0,CRVideo.protocol="http:"),CRVideo.isCallSer=!1!==e.isCallSer,void 0!==e.MSProtocol&&(CRVideo.MSProtocol=+e.MSProtocol)),function(e){if(!e)return console.crlog("[Init] Init sdk success, no video or audio input devices, still return init success!"),t(0);console.crlog(`[Init] GetUserMedia on initDevicePromission, constrains: ${JSON.stringify(e)}`),navigator.mediaDevices.getUserMedia(e).then((e=>(console.crlog("[Init] Get video & audio permission by getUserMedia on init, success!"),e&&e.getTracks().forEach((e=>{e.stop()})),console.crlog("[Init] Init sdk success!"),t(0)))).catch((e=>(console.crlog(`[Init] Get video & audio permission by getUserMedia on init, fail! GetUserMedia fail: ${e}`),"NotAllowedError"==e.name?(console.crlog(`[Init] Init sdk fail,user not allowd devices promission! ${e.name}`),n(8002)):"NotReadableError"==e.name?(console.crlog("[Init] InitDevicePromission success,but getusermedia fail because NotReadableError, still return init success!"),t(0)):(console.crlog(`[Init] Init sdk fail, getUserMedia fail: ${e.name}`),n(8001)))))}(i),console.crlog(`[Init] Set isUploadLog:${CRVideo.isUploadLog},isSDKConsole:${CRVideo.isSDKConsole}, on init sdk!`),window.CRVideo_EnableLog2File(CRVideo.isUploadLog,CRVideo.isSDKConsole),__Rtc.CRRTCAudio.createAudioElement()})).catch((e=>(console.crlog(`[Init] Enumerate devices fail! ${e}`),n(8003))))}}))),window.CRVideo_SetServerAddr=e=>{e=e.replace(/\s*/g,"");try{console.crlog(`[Init] CRVideo_SetServerAddr(${e})`)}catch(e){console.error(e)}CRVideo.webServerAddr=e},function(e,t,n){e.__Rtc.CRBrowser=new class{constructor(){this.initData(),this.getPlatform(),this.getBrowser(),console.crlog(`[Browser] UA: ${this.ua}`),console.crlog(`[Browser] Browser: ${JSON.stringify(this.curBrowserCfg)}`)}initData(){this.ua=e.navigator.userAgent,this.curBrowserCfg={name:"",minVer:null,ver:null,support:!1,platform:"unknown",isMobile:!1},this.supportVer={Windows_Chrome:58,Windows_Edg:80,Windows_Edge:999,Windows_OPR:70,Windows_Firefox:78,Windows_QQBrowser:10,Android_Chrome:58,Mac_Safari:12,Mac_Chrome:69,iOS_Safari:12,iOS_Chrome:69,iOS_QQBrowser:11,iOS_MicroMessenger:7,iOS_uniApp:1},this.weixin={isWeixin:!1,weixinVer:null}}getPlatform(){if((this.ua.match(/AppleWebKit.*Mobile.*/)||this.ua.includes("Android"))&&(this.curBrowserCfg.isMobile=!0),this.ua.includes("Windows")&&(this.curBrowserCfg.platform="Windows"),this.ua.includes("Macintosh")&&(this.curBrowserCfg.platform="Mac"),this.ua.includes("Android")&&(this.curBrowserCfg.platform="Android"),/(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent)&&(this.curBrowserCfg.platform="iOS"),"iOS"==this.curBrowserCfg.platform){const e=this.ua.split(" like Mac OS X")[0].split(" OS ")[1].split("_")||null;e&&e[0]>13&&(this.curBrowserCfg.platform="iOS")}}getBrowser(){if(this.curBrowserCfg.isMobile){if("Android"==this.curBrowserCfg.platform&&this.ua.includes("Chrome/")&&(this.curBrowserCfg.name="Chrome",this.curBrowserCfg.ver=+this.ua.split("Chrome/")[1].split(".")[0]),"iOS"==this.curBrowserCfg.platform&&(this.ua.includes("Safari")&&!/(Chrome|FxiOS|EdgiOS|CriOS|MQQ|QQ|MXiOS|Sogou|baidu|Baidu|MicroMessenger|UC|Quark|AliApp|QH|Qihoo|2345|Browser)/i.test(this.ua)&&(this.curBrowserCfg.name="Safari",this.curBrowserCfg.ver=+this.ua.split("Version/")[1].split(".")[0],this.curBrowserCfg.platform="iOS"),this.ua.includes("CriOS/")&&(this.curBrowserCfg.name="Chrome",this.curBrowserCfg.ver=+this.ua.split("CriOS/")[1].split(".")[0]),this.ua.includes("MQQBrowser/")&&(this.curBrowserCfg.name="QQBrowser",this.curBrowserCfg.ver=+this.ua.split("MQQBrowser/")[1].split(".")[0]),this.ua.includes("MicroMessenger/")&&(this.curBrowserCfg.name="MicroMessenger",this.curBrowserCfg.ver=+this.ua.split("MicroMessenger/")[1].split(".")[0]),this.ua.includes("uni-app")&&(this.curBrowserCfg.name="uniApp",this.curBrowserCfg.ver=1)),this.ua.includes("MQQBrowser/")&&this.ua.includes("MicroMessenger/")&&this.ua.includes("WeChat/")&&this.ua.includes("Weixin"))try{this.weixin.isWeixin=!0,this.weixin.weixinVer=this.ua.split("MicroMessenger/")[1].split("(")[0]}catch(e){console.error(e)}console.crlog(`[Browser] ${JSON.stringify(this.weixin)}`)}else"Mac"==this.curBrowserCfg.platform&&this.ua.includes("Safari")&&!/(Chrome|FxiOS|EdgiOS|CriOS|MQQ|QQ|MXiOS|Sogou|baidu|Baidu|MicroMessenger|UC|Quark|AliApp|QH|Qihoo|2345|Browser)/i.test(this.ua)&&(this.curBrowserCfg.name="Safari",this.curBrowserCfg.ver=+this.ua.split("Version/")[1].split(".")[0]),this.ua.includes("Chrome/")&&(this.curBrowserCfg.name="Chrome",this.curBrowserCfg.ver=+this.ua.split("Chrome/")[1].split(".")[0]),/(Edg|Edge)/i.test(this.ua)&&(this.ua.includes("Edg/")?(this.curBrowserCfg.name="Edg",this.curBrowserCfg.ver=+this.ua.split("Edg/")[1].split(".")[0]):this.ua.includes("Edge/")&&(this.curBrowserCfg.name="Edge",this.curBrowserCfg.ver=+this.ua.split("Edge/")[1].split(".")[0])),this.ua.includes("Firefox/")&&(this.curBrowserCfg.name="Firefox",this.curBrowserCfg.ver=+this.ua.split("Firefox/")[1].split(".")[0]);const e=`${this.curBrowserCfg.platform}_${this.curBrowserCfg.name}`;console.crlog(`[Browser] ${e} ${this.curBrowserCfg.ver}`),this.curBrowserCfg.minVer=this.supportVer[e]||999,this.curBrowserCfg.ver>=this.curBrowserCfg.minVer&&(this.curBrowserCfg.support=!0),console.crlog(`[Browser] Support: ${this.curBrowserCfg.support}`)}}}(window,Ice,CRVideo)},5829:()=>{((e,t,n)=>{e.CRVideo_SetDNDStatus=function(e,n){try{console.crlog(`[CallMgr] CRVideo_SetDNDStatus(${+e},${n})`)}catch(e){}const i={cmd:"ClientCustomStatusUpdate",module:"CallServer",customStatus:+e,sessionID:t.sessionID};try{console.crlog(`[CallMgr] WebCMD:${JSON.stringify(i)},cookie:${n}`)}catch(e){}t.webSendcmd(i,n)},e.CRVideo_StartUserStatusNotify=function(e){try{console.crlog(`[CallMgr] CRVideo_StartUserStatusNotify(${e})`)}catch(e){}const n={cmd:"StartStatusPush",module:"CallServer",sessionID:t.sessionID};try{console.crlog(`[CallMgr] WebCMD:${JSON.stringify(n)},cookie:${e}`)}catch(e){}t.webSendcmd(n,e)},e.CRVideo_StopUserStatusNotify=function(e){try{console.crlog(`[CallMgr] CRVideo_StartUserStatusNotify(${e})`)}catch(e){}const n={cmd:"StopStatusPush",module:"CallServer",sessionID:t.sessionID};try{console.crlog(`[CallMgr] WebCMD:${JSON.stringify(n)},cookie:${e}`)}catch(e){}t.webSendcmd(n,e)},e.CRVideo_GetUserStatus=function(e){try{console.crlog("[CallMgr] CRVideo_GetUserStatus()")}catch(e){}const n={cmd:"GetUserStatus",module:"CallServer",sessionID:t.sessionID};try{console.crlog(`[CallMgr] WebCMD:${JSON.stringify(n)},cookie:${e}`)}catch(e){}t.webSendcmd(n,e)},e.CRVideo_GetOneUserStatus=function(e,n){try{console.crlog(`[CallMgr] CRVideo_GetUserStatus(${e},${n})`)}catch(e){}const i={cmd:"GetUserStatus",module:"CallServer",userID:e,sessionID:t.sessionID};try{console.crlog(`[CallMgr] WebCMD:${JSON.stringify(i)},cookie:${n}`)}catch(e){}t.webSendcmd(i,n)},e.CRVideo_Call=function(e,i,r,o){try{console.crlog(`[CallMgr] CRVideo_Call(${e},${JSON.stringify(i)},${r},${o}`)}catch(e){}const s={callID:n.generateUUID(),called:e,calledOEMKey:"CLOUDROOM",calledType:0,cmd:"ClientCall",meeting:{ID:i.ID,pswd:i.pswd,pubMeetUrl:i.pubMeetUrl,subject:i.subject},module:"CallServer",sessionID:t.sessionID,usrExDat:r||""};try{console.crlog(`[CallMgr] WebCMD:${JSON.stringify(s)},cookie:${o}`)}catch(e){}t.webSendcmd(s,o)},e.CRVideo_AcceptCall=function(e,n,i,r){try{console.crlog(`[CallMgr] CRVideo_AcceptCall(${e},${JSON.stringify(n)},${i},${r})`)}catch(e){}console.crlog("[CallMgr] Meet ID："+n.ID),console.crlog("[CallMgr] Meet pubMeetUrl:"+n.pubMeetUrl),t.pubMeetUrl=n.pubMeetUrl,t.CallID=e;const o={callID:e,cmd:"ClientAccept",meeting:n,module:"CallServer",sessionID:t.sessionID,usrExDat:i||""};try{console.crlog(`[CallMgr] WebCMD:${JSON.stringify(o)},cookie:${r}`)}catch(e){}t.webSendcmd(o,r)},e.CRVideo_RejectCall=function(e,n,i){try{console.crlog(`[CallMgr] CRVideo_RejectCall(${JSON.stringify(e,n,i)})`)}catch(e){}const r={callID:e,sessionID:t.sessionID,cmd:"ClientDecline",module:"CallServer",declineReason:"ClientDecline"};try{console.crlog(`[CallMgr] WebCMD:${JSON.stringify(r)},cookie:${i}`)}catch(e){}t.webSendcmd(r,i)},e.CRVideo_HangupCall=function(e,n,i){try{console.crlog(`[CallMgr] CRVideo_HangupCall(${e},${n},${i})`)}catch(e){}const r={callID:e,sessionID:t.sessionID,cmd:"ClientReleaseCall",module:"CallServer",usrExDat:n||""};try{console.crlog(`[CallMgr] WebCMD:${JSON.stringify(r)},cookie:${i}`)}catch(e){throw e}t.webSendcmd(r)},e.CRVideo_HungupCall=function(e,t,n){CRVideo_HangupCall(e,t,n)},t.callSvrCallback={ClientCustomStatusUpdate:function(t,n,i){try{console.crlog(`[Queue] CRVideo_SetDNDStatus -- CMDCallback --\x3e ClientCustomStatusUpdate: ${JSON.stringify(t)}`)}catch(e){}if(0===t.RspCode){try{console.crlog(`[CallMgr] CRVideo_SetDNDStatusSuccess.target(${i})`)}catch(e){}e.CRVideo_SetDNDStatusSuccess.target(i)}else{try{console.crlog(`[CallMgr] CRVideo_SetDNDStatusFail.target(${ICE_SDK_ERR(t.RspCode)},${i})`)}catch(e){}e.CRVideo_SetDNDStatusFail.target(ICE_SDK_ERR(t.RspCode),i)}},StartStatusPush:function(e,t,n){try{console.crlog(`[Queue] CRVideo_StartUserStatusNotify -- CMDCallback --\x3e StartStatusPush: ${JSON.stringify(e)}`)}catch(e){}try{console.crlog(`[CallMgr] CRVideo_StartUserStatusNotifyRslt.target(${ICE_SDK_ERR(e.RspCode)}, ${n})`)}catch(e){}CRVideo_StartUserStatusNotifyRslt.target(ICE_SDK_ERR(e.RspCode),n)},StopStatusPush:function(e,t,n){try{console.crlog(`[Queue] CRVideo_StopUserStatusNotify -- CMDCallback --\x3e StopStatusPush: ${JSON.stringify(e)}`)}catch(e){}try{console.crlog(`[CallMgr] CRVideo_StopUserStatusNotifyRslt.target(${ICE_SDK_ERR(e.RspCode)}, ${n})`)}catch(e){}CRVideo_StopUserStatusNotifyRslt.target(ICE_SDK_ERR(e.RspCode),n)},GetUserStatus:function(e,t,n){try{console.crlog(`[Queue] CRVideo_GetUserStatus -- CMDCallback --\x3e GetUserStatus: ${JSON.stringify(e)}`)}catch(e){}if(0===e.RspCode){let t=JSON.parse(JSON.stringify(e.userStatus));try{console.crlog(`[CallMgr] CRVideo_GetUserStatusSuccess.target(${JSON.stringify(t)}, ${n})`)}catch(e){}CRVideo_GetUserStatusSuccess.target(t,n)}else{try{console.crlog(`[CallMgr] CRVideo_GetUserStatusFail.target(${ICE_SDK_ERR(e.RspCode)}, ${n})`)}catch(e){}CRVideo_GetUserStatusFail.target(ICE_SDK_ERR(e.RspCode),n)}},ClientCall:function(e,t,n){const i=t.callID;try{console.crlog(`[CallMgr] CRVideo_Call -- CMDCallback --\x3e ClientCall: ${JSON.stringify(e)}`)}catch(e){}if(0==e.RspCode){try{console.crlog(`[CallMgr] CRVideo_CallSuccess.target(${i}, ${n});`)}catch(e){}CRVideo_CallSuccess.target(i,n)}else{try{console.crlog(`[CallMgr] CRVideo_CallFail.target(${i} ${ICE_SDK_ERR(e.RspCode)}, ${n});`)}catch(e){}CRVideo_CallFail.target(i,ICE_SDK_ERR(e.RspCode),n)}},ClientAccept:function(e,t,n){try{console.crlog(`[CallMgr] CRVideo_AcceptCall -- CMDCallback --\x3e AcceptCall: ${JSON.stringify(e)}`)}catch(e){}const i=t.callID;if(0==e.RspCode){try{console.crlog(`[CallMgr] CRVideo_AcceptCallSuccess.target(${i},${n})`)}catch(e){}CRVideo_AcceptCallSuccess.target(i,n)}else{try{console.crlog(`[CallMgr] CRVideo_AcceptCallFail.target(${i},${ICE_SDK_ERR(e.RspCode)},${n})`)}catch(e){}CRVideo_AcceptCallFail.target(i,ICE_SDK_ERR(e.RspCode),n)}},ClientDecline:function(e,t,n){try{console.crlog(`[CallMgr] CRVideo_RejectCall -- CMDCallback --\x3e ClientDecline: ${JSON.stringify(e)}`)}catch(e){}const i=t.callID;if(0==e.RspCode){try{console.crlog(`[CallMgr] CRVideo_RejectCallSuccess.target(${i},${n})`)}catch(e){}CRVideo_RejectCallSuccess.target(i,n)}else{try{console.crlog(`[CallMgr] CRVideo_RejectCallFail.target(${i},${ICE_SDK_ERR(e.RspCode)},${n})`)}catch(e){}CRVideo_RejectCallFail.target(i,ICE_SDK_ERR(e.RspCode),n)}},ClientReleaseCall:function(e,t,n){try{console.crlog(`[CallMgr] CRVideo_HangupCall -- CMDCallback --\x3e ClientReleaseCall: ${JSON.stringify(e)}`)}catch(e){}const i=t.callID;if(0==e.RspCode){try{console.crlog(`[CallMgr] CRVideo_HangupCallSuccess.target(${i},${n})`)}catch(e){}CRVideo_HangupCallSuccess.target(i,n)}else{try{console.crlog(`[CallMgr] CRVideo_HangupCallFail.target(${i},${ICE_SDK_ERR(e.RspCode)},${n})`)}catch(e){}CRVideo_HangupCallFail.target(i,ICE_SDK_ERR(e.RspCode),n)}},ServerPushUserStatus:function(e){let t={userID:e.usersStatus.userID,userStatus:e.usersStatus.userStatus,DNDType:e.usersStatus.isDND};try{console.crlog(`[CallMgr] CRVideo_NotifyUserStatus.target(${JSON.stringify(t)})`)}catch(e){}CRVideo_NotifyUserStatus.target(t)},ServerAccept:function(e){const n={ID:e.meeting.ID,pswd:e.meeting.pswd,subject:e.meeting.subject,pubMeetUrl:e.meeting.pubMeetUrl},i=e.callID,r=e.usrExDat;t.CallID=i;try{console.crlog(`[CallMgr] CRVideo_NotifyCallAccepted.target(${i},${n},${r})`)}catch(e){}CRVideo_NotifyCallAccepted.target(i,n,r)},ServerDecline:function(e){const t=e.callID,n=e.usrExDat;let i=1;switch(e.declineReason){case"NoAnswer":i=604;break;case"Refuse":i=606}try{console.crlog(`[CallMgr] CRVideo_NotifyCallRejected.target(${t},${i},${n})`)}catch(e){}CRVideo_NotifyCallRejected.target(t,i,n)},ServerCall:function(e){e.meeting.ID,e.meeting.pswd,e.meeting.subject,e.meeting.pubMeetUrl;const n=e.callID,i=e.caller,r=e.usrExDat;t.CallID=n;try{console.crlog(`[CallMgr] CRVideo_NotifyCallIn.target(${n},${JSON.stringify(e.meeting)},${i},${r})`)}catch(e){}CRVideo_NotifyCallIn.target(e.callID,e.meeting,e.caller,e.usrExDat)},ServerReleaseCall:function(e){const n=e.callID,i=e.usrExDat;t.CallID="";try{console.crlog(`[CallMgr] CRVideo_NotifyCallHangup.target(${n},${i})`)}catch(e){}CRVideo_NotifyCallHangup.target(n,i),CRVideo_NotifyCallHungup.target(n,i)},ServerCancelCall:function(e){const n=e.callID,i=e.usrExDat;t.CallID="";try{console.crlog(`[CallMgr] CRVideo_NotifyCallHangup.target(${n},${i})`)}catch(e){}CRVideo_NotifyCallHangup.target(n,i),CRVideo_NotifyCallHungup.target(n,i)}},e.CRVideo_SetDNDStatusSuccess=new t.CbProxy("CRVideo_SetDNDStatusSuccess"),e.CRVideo_SetDNDStatusFail=new t.CbProxy("CRVideo_SetDNDStatusFail"),e.CRVideo_StartUserStatusNotifyRslt=new t.CbProxy("CRVideo_StartUserStatusNotifyRslt"),e.CRVideo_StopUserStatusNotifyRslt=new t.CbProxy("CRVideo_StopUserStatusNotifyRslt"),e.CRVideo_GetUserStatusSuccess=new t.CbProxy("CRVideo_GetUserStatusSuccess"),e.CRVideo_GetUserStatusFail=new t.CbProxy("CRVideo_GetUserStatusFail"),e.CRVideo_CallSuccess=new t.CbProxy("CRVideo_CallSuccess"),e.CRVideo_CallFail=new t.CbProxy("CRVideo_CallFail"),e.CRVideo_AcceptCallSuccess=new CRVideo.CbProxy("CRVideo_AcceptCallSuccess"),e.CRVideo_AcceptCallFail=new CRVideo.CbProxy("CRVideo_AcceptCallFail"),e.CRVideo_RejectCallSuccess=new CRVideo.CbProxy("CRVideo_RejectCallSuccess"),e.CRVideo_RejectCallFail=new CRVideo.CbProxy("CRVideo_RejectCallFail"),e.CRVideo_HangupCallSuccess=new CRVideo.CbProxy("CRVideo_HangupCallSuccess"),e.CRVideo_HangupCallFail=new CRVideo.CbProxy("CRVideo_HangupCallFail"),e.CRVideo_NotifyUserStatus=new t.CbProxy("CRVideo_NotifyUserStatus"),e.CRVideo_NotifyCallIn=new CRVideo.CbProxy("CRVideo_NotifyCallIn"),e.CRVideo_NotifyCallAccepted=new t.CbProxy("CRVideo_NotifyCallAccepted"),e.CRVideo_NotifyCallHangup=new CRVideo.CbProxy("CRVideo_NotifyCallHangup"),e.CRVideo_NotifyCallHungup=new CRVideo.CbProxy("CRVideo_NotifyCallHungup"),e.CRVideo_NotifyCallRejected=new CRVideo.CbProxy("CRVideo_NotifyCallRejected")})(window,CRVideo,Ice)},6533:()=>{((e,t,n)=>{e._crInviteClass=class{constructor(){this.initData(),this.initIceCallback(),this.initSDKInterface()}initData(){}initIceCallback(){this.ICECallback={invite:(...e)=>{this.notifyInviteIn(...e)},cancelInvite:(...e)=>{this.notifyInviteCanceled(...e)},acceptInvite:(...e)=>{this.notifyInviteAccepted(...e)},rejectInvite:(...e)=>{this.notifyInviteRejected(...e)},inviteResult:(...e)=>{console.log(JSON.stringify(...e))}}}initSDKInterface(){e.CRVideo_Invite=(e,t,n)=>{try{console.crlog(`[Invite] CRVideo_Invite(${JSON.stringify(e,t,n)})`)}catch(e){console.error(e)}return this.invite(e,t,n)},e.CRVideo_AcceptInvite=(e,t,n)=>{try{console.crlog(`[Invite] CRVideo_AcceptInvite(${JSON.stringify(e,t,n)})`)}catch(e){console.error(e)}return this.acceptInvite(e,t,n)},e.CRVideo_RejectInvite=(e,t,n)=>{try{console.crlog(`[Invite] CRVideo_RejectInvite(${JSON.stringify(e,t,n)})`)}catch(e){console.error(e)}return this.rejectInvite(e,t,n)},e.CRVideo_CancelInvite=(e,t,n)=>{try{console.crlog(`[Invite] CRVideo_CancelInvite(${JSON.stringify(e,t,n)})`)}catch(e){console.error(e)}return this.cancelInvite(e,t,n)}}invite(i,r,o){const s=n.generateUUID(),a={module:"CallServer",cmd:"invite",inviteID:s,invitedUserID:i,usrExtDat:r||""};try{console.crlog(`[Invite] WebCMD:${JSON.stringify(a)},cookie:${o}`)}catch(e){}return t.callServerSendCMD(a).then((t=>{try{console.crlog(`[Invite] CRVideo_Invite -- CMDRslt --\x3e invite: ${JSON.stringify(t)}`)}catch(e){}if(0!==t.RspCode)return console.crlog(`[Invite] CRVideo_InviteFail.target(${s},${ICE_SDK_ERR(t.RspCode)},${o})`),void e.CRVideo_InviteFail.target(s,ICE_SDK_ERR(t.RspCode),o);console.crlog(`[Invite] CRVideo_InviteSuccess.target(${s},${o})`),e.CRVideo_InviteSuccess.target(s,o)})),s}acceptInvite(n,i,r){const o={module:"CallServer",cmd:"acceptInvite",inviteID:n,usrExtDat:i||""};try{console.crlog(`[Invite] WebCMD:${JSON.stringify(o)},cookie:${r}`)}catch(e){}t.callServerSendCMD(o).then((t=>{try{console.crlog(`[Invite] CRVideo_AcceptInvite -- CMDRslt --\x3e acceptInvite: ${JSON.stringify(t)}`)}catch(e){}if(0!==t.RspCode)return console.crlog(`[Invite] CRVideo_AcceptInviteFail.target(${n},${ICE_SDK_ERR(t.RspCode)},${r})`),void e.CRVideo_AcceptInviteFail.target(n,ICE_SDK_ERR(t.RspCode),r);console.crlog(`[Invite] CRVideo_AcceptInviteSuccess.target(${n},${r})`),e.CRVideo_AcceptInviteSuccess.target(n,r)}))}rejectInvite(n,i,r){const o={module:"CallServer",cmd:"rejectInvite",inviteID:n,usrExtDat:i||""};try{console.crlog(`[Invite] WebCMD:${JSON.stringify(o)},cookie:${r}`)}catch(e){}t.callServerSendCMD(o).then((t=>{try{console.crlog(`[Invite] CRVideo_RejectInvite -- CMDRslt --\x3e rejectInvite: ${JSON.stringify(t)}`)}catch(e){}if(0!==t.RspCode)return console.crlog(`[Invite] CRVideo_RejectInviteFail.target(${n},${ICE_SDK_ERR(t.RspCode)},${r})`),void e.CRVideo_RejectInviteFail.target(n,ICE_SDK_ERR(t.RspCode),r);console.crlog(`[Invite] CRVideo_RejectInviteSuccess.target(${n},${r})`),e.CRVideo_RejectInviteSuccess.target(n,r)}))}cancelInvite(n,i,r){const o={module:"CallServer",cmd:"cancelInvite",inviteID:n,usrExtDat:i||""};try{console.crlog(`[Invite] WebCMD:${JSON.stringify(o)},cookie:${r}`)}catch(e){}t.callServerSendCMD(o).then((t=>{try{console.crlog(`[Invite] CRVideo_CancelInvite -- CMDRslt --\x3e cancelInvite: ${JSON.stringify(t)}`)}catch(e){}if(0!==t.RspCode)return console.crlog(`[Invite] CRVideo_CancelInviteFail.target(${n},${ICE_SDK_ERR(t.RspCode)},${r})`),void e.CRVideo_CancelInviteFail.target(n,ICE_SDK_ERR(t.RspCode),r);console.crlog(`[Invite] CRVideo_CancelInviteSuccess.target(${n},${r})`),e.CRVideo_CancelInviteSuccess.target(n,r)}))}notifyInviteIn(t){const n=t.inviteID,i=t.inviterUserID,r=t.usrExtDat;console.crlog(`[Invite] CRVideo_NotifyInviteIn.target(${n},${i},${r})`),e.CRVideo_NotifyInviteIn.target(n,i,r)}notifyInviteCanceled(t){const n=t.inviteID,i=ICE_SDK_ERR(t.failCode),r=t.usrExtDat;console.crlog(`[Invite] CRVideo_NotifyInviteCanceled.target(${n},${i},${r})`),e.CRVideo_NotifyInviteCanceled.target(n,i,r)}notifyInviteAccepted(t){const n=t.inviteID,i=t.usrExtDat;console.crlog(`[Invite] CRVideo_NotifyInviteAccepted.target(${n},${i})`),e.CRVideo_NotifyInviteAccepted.target(n,i)}notifyInviteRejected(t){const n=t.inviteID,i=ICE_SDK_ERR(t.failCode),r=t.usrExtDat;console.crlog(`[Invite] CRVideo_NotifyInviteRejected.target(${n},${i},${r})`),e.CRVideo_NotifyInviteRejected.target(n,i,r)}},e.__Rtc.CRRTCInvite=new e._crInviteClass,e.CRVideo_InviteSuccess=new t.CbProxy("CRVideo_InviteSuccess"),e.CRVideo_InviteFail=new t.CbProxy("CRVideo_InviteFail"),e.CRVideo_AcceptInviteSuccess=new t.CbProxy("CRVideo_AcceptInviteSuccess"),e.CRVideo_AcceptInviteFail=new t.CbProxy("CRVideo_AcceptInviteFail"),e.CRVideo_RejectInviteSuccess=new t.CbProxy("CRVideo_RejectInviteSuccess"),e.CRVideo_RejectInviteFail=new t.CbProxy("CRVideo_RejectInviteFail"),e.CRVideo_CancelInviteSuccess=new t.CbProxy("CRVideo_CancelInviteSuccess"),e.CRVideo_CancelInviteFail=new t.CbProxy("CRVideo_CancelInviteFail"),e.CRVideo_NotifyInviteIn=new t.CbProxy("CRVideo_NotifyInviteIn"),e.CRVideo_NotifyInviteAccepted=new t.CbProxy("CRVideo_NotifyInviteAccepted"),e.CRVideo_NotifyInviteRejected=new t.CbProxy("CRVideo_NotifyInviteRejected"),e.CRVideo_NotifyInviteCanceled=new t.CbProxy("CRVideo_NotifyInviteCanceled")})(window,CRVideo,Ice)},7830:()=>{var e,t,n,i,r,o;e=window,t=CRVideo,n=function(n,o,s,a){const c=`${t.protocol}//${t.webServerAddr}/servlet/getJsCallServerInfo`;var l={RequestId:e.Ice.generateUUID(),OEMKey:"CLOUDROOM",MgrSDKVer:t.sdkver,PRODUCT:"H5",APPIDMode:CRVideo.APPIDMode,...n};let d={};d=__Rtc._ReplaceObjParam(l,"UserPswd","******"),d=__Rtc._ReplaceObjParam(d,"Token","******"),d=__Rtc._ReplaceObjParam(d,"CustomPswd","******"),console.crlog("[Login] WebAPI request url: "+c+", data:"+JSON.stringify(d)),t.ajax({url:c,type:"get",timeout:3e4,data:l,success:function(e){if(console.crlog("[Login] WebAPI, /servlet/getJsCallServerInfo result: "+JSON.stringify(e)),__Rtc.postCmd.CallServerInfo=e,t.webLoginOAuth=n,t.callServerLoginOAuth=o,void 0!==e.RspCode&&0==e.RspCode){console.crlog(`[Login] CR.isHttp: ${t.isHttp}`),1==t.isHttp&&(e.callSvrList=e.callSvrList.replace("ali9.cloudroom.com:543/sig/","ali9.cloudroom.com:80/sig/"),e.callSvrList=e.callSvrList.replace("crlab.cloudroom.com:543/sig/","crlab.cloudroom.com:80/sig/"));let n=-1;!function r(){t.callserverExiting?(console.crlog("[Login] callserver exiting.... waiting...."),n=setTimeout((()=>{r()}),500)):(console.crlog("[Login] callserver exiting complete...."),clearInterval(n),i(e,a))}()}else r(e,a)},error:function(e){console.crlog("[Login] GetJsCallServerInfo API request fail:"),console.crlog(`[Login][Error] ${e}`),console.error(e),r({RspCode:11e3,RspDesc:"Server not responding..!"},a)}})},i=function(e,n){console.crlog("[Login] GetCallServerInfoSuccess..."),e.Data&&e.APPIDMode?(CRVideo.APPIDMode=+e.APPIDMode,CRVideo.multiProject=e.Data):CRVideo.APPIDMode=0,void 0!==e.TokenTime&&0!==e.TokenTime&&o(e.TokenTime),e.stunServerAddr&&""!=e.stunServerAddr?e.stunServerAddr.indexOf(";")>-1?t.stunList=e.stunServerAddr.split(";")[0]:t.stunList=e.stunServerAddr:window.location.href.indexOf("cloudroom")>-1?t.stunList="47.104.128.57:30000":t.stunList=`${t.webServerAddr}:2699`;let i=[];if(i=0==t.MSProtocol?["turn:"+t.stunList+"?transport=udp","turn:"+t.stunList+"?transport=tcp"]:1==t.MSProtocol?["turn:"+t.stunList+"?transport=udp"]:["turn:"+t.stunList+"?transport=tcp"],t.rtcCfg={iceServers:[{credential:"cloudroom",username:"cloudroom",urls:i}],iceTransportPolicy:"relay"},t.loginAuthFlag=1,t.isCallSer)__Rtc.postCmd.IceCruxCreate(n);else{try{console.crlog(`[Login] CRVideo_LoginSuccess.target(${t.LoginParam.user_id}, ${n})`)}catch(e){}CRVideo_LoginSuccess.target(t.LoginParam.user_id,n),CRVideo_UploadingReport()}e.uploadUrl&&CRVideo.isUploadLog&&__Rtc.postCmd.IceLogCreate()},r=function(e,t){try{console.crlog(`[Login] Login authentication failed, RspCode:${e.RspCode} --- RspDesc:${e.RspDesc}`),console.crlog(`[Login] CRVideo_LoginFail.target(${window.WEB_SDK_ERR(e.RspCode)},${t})`)}catch(e){}CRVideo_LoginFail.target(window.WEB_SDK_ERR(e.RspCode),t)},o=function(){let e,n;return function(i){console.crlog("[Login] Update webAPI Token Expire Time: "+i),clearTimeout(e),clearTimeout(n);const r=i>30?1e3*(i-30):0;function o(){console.crlog("[Login] !!!Token Expire!!!"),t.ic&&(clearTimeout(t.HandShark),console.crlog("[Login] CallServer destroy connection..."),t.destroyCruxConnect(),t.LineOffHandler(CRVideo_ERR_DEF.SDK_TOKEN_TIMEOUT)),t.isMeeting&&(console.crlog("[Login] Token失效，退出会议！CRVideo_ExitMeeting('token失效')"),CRVideo_ExitMeeting("token失效"))}console.crlog(`[Login] Token剩余有效期：${r/1e3+30} 秒`),r>2147483647||(e=setTimeout((()=>{n=setTimeout(o,1e3*(r>30?30:i)),console.crlog("[Login] CRVideo_NotifyTokenWillExpire.target()"),CRVideo_NotifyTokenWillExpire.target()}),r))}}(),t.LineOffHandler=e=>{console.crlog(`[CMD] line off .... ${e}`),t.callserverCastPrx?(t.callserverCastPrx=null,console.crlog(`[Login] CRVideo_LineOff.target(${e})`),CRVideo_LineOff.target(e)):18==e&&(t.loginAuthFlag=0,t.webLoginOAuth={},console.crlog(`[Login] CRVideo_LineOff.target(${e})`),CRVideo_LineOff.target(e))},t.__LoginCallserver=()=>{const e=CRVideo.LoginParam.cookie,n=__Rtc.CRBrowser.curBrowserCfg,i={OEMKey:"CLOUDROOM",SDKVersion:CRVideo.sdkver,cmd:"Login",...CRVideo.callServerLoginOAuth,deviceType:`${n.platform}_${n.name}`,language:"zh_CN",module:"CallServer",productType:"h5sdk",userID:CRVideo.LoginParam.user_id,userName:CRVideo.LoginParam.nick_name},r=__Rtc._ReplaceObjParam(i,"crPswd","******");try{console.crlog(`[Login] WebCMD:${JSON.stringify(r)}, cookie:${e}`)}catch(e){}t.webSendcmd(i,e)},e.CRVideo_Login=function(i,r,o,s,a,c){try{console.crlog(`[Login] CRVideo_Login(${i},'******',${o},${s},${a},${c})`)}catch(e){}if(""===o||void 0===o||""===s||void 0===s)return CRVideo_LoginFail.target(5,c),void CRVideo_UploadingReport();t.crpswdmd5=r,t.loginCookie=c,t.LoginParam={account:i,psw:r,nick_name:o,user_id:s,CustomID:s,CustomPswd:a||"",cookie:c};try{console.crlog(`[Login] Login param: ${JSON.stringify(e.__Rtc._ReplaceObjParam(t.LoginParam,"psw","******"))}`)}catch(e){}let l;l=a?{UserName:i,UserPswd:r,CustomID:s,CustomPswd:a||""}:{UserName:i,UserPswd:r},n(l,{crAcnt:i,crPswd:r},0,c)},e.CRVideo_LoginByToken=(e,i,r,o,s)=>{try{console.crlog(`[Login] CRVideo_LoginByToken('******',${i},${r},${o},${s})`)}catch(e){}let a,c;try{const t=e.split(".")[1],n=!!t&&Cr.Utils.base64.decode(t).replace(/\0/g,"");a=JSON.parse(n)}catch(e){console.crlog("[Login] token本地解析失败"),console.crlog(e);try{console.crlog(`[Login] CRVideo_LoginFail.target(1,${s});`)}catch(e){}return CRVideo_LoginFail.target(1,s),void CRVideo_UploadingReport()}t.LoginParam={account:a.appID,nick_name:i,user_id:r,CustomID:r,CustomPswd:o||"",cookie:s||""},c=o?{Token:e,CustomID:r,CustomPswd:o||""}:{Token:e};const l={crToken:e};try{console.crlog(`[Login] Login param: ${JSON.stringify(t.LoginParam)}`)}catch(e){}n(c,l,0,s)},e.CRVideo_UpdateToken=function(n){console.crlog("[Login] CRVideo_UpdateToken('******')");const i=`${t.protocol}//${t.webServerAddr}/servlet/HandToken`,r={ClientVer:"",Language:"",RequestId:e.Ice.generateUUID(),MgrSDKVer:t.sdkver,OEMKey:"CLOUDROOM",PRODUCT:"H5",Token:n},s=__Rtc._ReplaceObjParam(r,"Token","******");try{console.crlog("[Login] WebAPI UpdateToken: url: "+i+" ,data: "+JSON.stringify(s))}catch(e){}t.ajax({url:i,data:{_data_:JSON.stringify(r)},dataType:"jsonp",jsonp:"callback",success:function(e){if(console.crlog("[Login] WebAPI UpdateToken result: "+JSON.stringify(e)),0==e.RspCode){e.TokenTime&&o(e.TokenTime);try{console.crlog(`[Login] CRVideo_UpdateTokenRslt.target(${CRVideo_ERR_DEF.NOERR})`)}catch(e){}CRVideo_UpdateTokenRslt.target(CRVideo_ERR_DEF.NOERR),t.webLoginOAuth={Token:n},t.callServerLoginOAuth={crToken:n}}else{try{console.crlog(`[Login] CRVideo_UpdateTokenRslt.target(${CRVideo_ERR_DEF.SDK_TOKEN_AUTH_FAILED})`)}catch(e){}CRVideo_UpdateTokenRslt.target(CRVideo_ERR_DEF.SDK_TOKEN_AUTH_FAILED)}},error:function(e){try{console.crlog(`[Login] CRVideo_UpdateTokenRslt.target(${CRVideo_ERR_DEF.NOSERVER_RSP})`)}catch(e){}CRVideo_UpdateTokenRslt.target(CRVideo_ERR_DEF.NOSERVER_RSP)}})},e.CRVideo_Logout=function(){if(t.loginAuthFlag=0,t.webLoginOAuth={},console.crlog("[Login] CRVideo_Logout()"),clearInterval(t.resetAdapterTimer),!t.isCallSer)return;t.callserverExiting=!0,setTimeout((()=>{t.callserverExiting=!1}),3e3);const e={cmd:"Logout",module:"CallServer",sessionID:t.sessionID};try{console.crlog(`[Login] WebCMD:${JSON.stringify(e)},cookie:${cookie}`)}catch(e){}t.webSendcmd(e),t.CallID="",t.HandErrTimes=0,t.KEEPLIVE_COMMIT=!1},t.loginCallback={Login:function(n,i,r){try{console.crlog(`[Login] CRVideo_Login -- CMDCallback --\x3e Login: ${JSON.stringify(n)}`)}catch(e){}0==n.RspCode?(console.crlog("[Login] CallServer login success!"),t.sessionID=n.sessionID,t.isLoginCallserver=!0,console.crlog(`[Login] CRVideo_LoginSuccess.target(${n.userID}, ${r})`),CRVideo_LoginSuccess.target(n.userID,r),CRVideo_UploadingReport(),console.crlog("[Login] CallServer sessionID: "+n.sessionID),console.crlog("[Login] Begain shakeHand..."),e.CRVideo_ShakeHand()):(console.crlog("[Login] CallServer login fail!"),console.crlog(`[Login] CRVideo_LoginFail.target(${ICE_SDK_ERR(n.RspDesc)},${r})`),CRVideo_LoginFail.target(ICE_SDK_ERR(n.RspDesc),r),CRVideo_UploadingReport())},Logout:function(e,n){if(0==e.RspCode)console.crlog("[Login] Callserver logout success..."),setTimeout((()=>{CRVideo_UploadingLog()}),1e3),setTimeout((()=>{t.destroyCruxConnect()}),1e3);else{console.crlog("[Login] Callserver logout fail...");try{console.crlog(`[Login] ${JSON.stringify(e)}`)}catch(e){}}t.isLoginCallserver=!1},ServerKickoutUser:function(e){t.HandErrTimes=0,t.isLoginCallserver=!1,clearTimeout(t.HandShark),t.LineOffHandler(CRVideo_ERR_DEF.SDK_USER_BEEN_KICKOUT)}},e.CRVideo_LineOff=new t.CbProxy("CRVideo_LineOff"),e.CRVideo_LoginSuccess=new t.CbProxy("CRVideo_LoginSuccess"),e.CRVideo_LoginFail=new t.CbProxy("CRVideo_LoginFail"),e.CRVideo_NotifyTokenWillExpire=new t.CbProxy("CRVideo_NotifyTokenWillExpire"),e.CRVideo_UpdateTokenRslt=new t.CbProxy("CRVideo_UpdateTokenRslt"),e.CRVideo_LogoutSuccess=new CRVideo.CbProxy("CRVideo_LogoutSuccess"),e.CRVideo_LogoutFail=new CRVideo.CbProxy("CRVideo_LogoutFail")},894:()=>{((e,t,n)=>{e.CRVideo_CreateMeeting2=t=>{try{console.crlog(`[MeetMgr] CRVideo_CreateMeeting2(${t})`)}catch(e){console.error(e)}e.CRVideo_CreateMeeting("",t)},e.CRVideo_CreateMeeting=function(i,r){try{console.crlog(`[MeetMgr] CRVideo_CreateMeeting(${JSON.stringify(i)},${r})`)}catch(e){console.error(e)}const o=`${t.protocol}//${t.webServerAddr}/servlet/ClientCreateNetMeet`,s=!!i&&i.meetSubject||"H5_SDK_REGULAR_ROOM",a=!!i&&i.needPswd||0,c=!!i&&i.isRegular||1,l={RequestId:n.generateUUID(),MeetSubject:encodeURI(s),IsRegular:c,NeedPswd:a,...t.webLoginOAuth};let d={};d=e.__Rtc._ReplaceObjParam(l,"UserPswd","******"),d=e.__Rtc._ReplaceObjParam(d,"Token","******"),console.crlog("[MeetMgr] WebAPI request url: "+o+", data:"+JSON.stringify(d)),t.meetSubject=s,t.ajax({url:o,timeout:3e4,data:l,dataType:"jsonp",jsonp:"CallBack",success:function(n){let i;if(i=e.__Rtc._ReplaceObjParam(n,"CRMTStr","******"),i=e.__Rtc._ReplaceObjParam(n,"MeetPswd","******"),console.crlog("[MeetMgr] WebAPI /servlet/ClientCreateNetMeet request success, result: "+JSON.stringify(i)),0==n.RspCode){const i={ID:n.MeetID,pswd:n.MeetPswd,subject:s,pubMeetUrl:n.PublicUrl};t.pubMeetUrl=i.publicUrl,__Rtc.postCmd.meetJson=i,console.crlog("[MeetMgr] CreateMeetingSuccess! meetID: "+i.ID);try{console.crlog(`[MeetMgr] CRVideo_CreateMeetingSuccess.target(${JSON.stringify(e.__Rtc._ReplaceObjParam(i,"pswd","******"))},${r})`)}catch(e){console.error(e)}e.CRVideo_CreateMeetingSuccess.target(i,r)}else{console.crlog(`[MeetMgr] CreateMeetingFail! ResJson: ${JSON.stringify(n)}`);try{console.crlog(`[MeetMgr] CRVideo_CreateMeetingFail.target(${window.WEB_SDK_ERR(n.RspCode)},${r})`)}catch(e){console.error(e)}e.CRVideo_CreateMeetingFail.target(window.WEB_SDK_ERR(n.RspCode),r)}},error:function(t){console.crlog("[MeetMgr] WebAPI /servlet/ClientCreateNetMeet request fail!");try{console.crlog(`[MeetMgr] CRVideo_CreateMeetingFail.target(202,${r})`)}catch(e){console.error(e)}e.CRVideo_CreateMeetingFail.target(202,r)}})},e.CRVideo_EnterMeeting3=(e,n,i)=>{if(console.crlog(`[MeetMgr] CRVideo_EnterMeeting3(${e},${n},${i})`),1!==t.loginAuthFlag||!t.LoginParam)return CRVideo_EnterMeetingRslt.target(7,n),void CRVideo_UploadingReport();if(!e||8!==e.toString().length||NaN==(+e).toString())return CRVideo_EnterMeetingRslt.target(5,n),void CRVideo_UploadingReport();const r=i||"",o=t.LoginParam.user_id,s=t.LoginParam.nick_name;CRVideo_EnterMeeting(e,r,o,s,n)},e.CRVideo_EnterMeeting2=(e,t,n,i)=>{console.crlog(`[MeetMgr] CRVideo_EnterMeeting2(${e},${t},${n},${i})`),CRVideo_EnterMeeting(e,"",t,n,i)},e.CRVideo_EnterMeeting=function(i,r,o,s,a){if(CRVideo.meetLogUUID=n.generateUUID(),console.crlog(`[MeetMgr] CRVideo_EnterMeeting(${i},***,${o},${s},${a})`),t.enterMeetingCookie=a,t.destroyMeetingConnect(),t.leftMeetingFun(),1!==t.loginAuthFlag||!t.LoginParam)return CRVideo_EnterMeetingRslt.target(7,a),void CRVideo_UploadingReport();function c(){let c={};try{c=JSON.parse(sessionStorage.getItem("CRWebRTCSDK_UserHistory"))}catch(e){console.error(e)}let l=[];if(c)if(l=c[i],null==l)c={},c[i]=[],sessionStorage.setItem("CRWebRTCSDK_UserHistory",JSON.stringify(c));else{let e=l.find((e=>e.userId==o&&e.timestamp));const n=(new Date).getTime();if(e&&e.timestamp&&e.timestamp+15e5>n){t.meetingID=+i,t.LIVE_INFO={},t.LIVE_INFO.dataStr=e.dataStr;let n=setInterval((()=>{t.meetingExiting?console.crlog("[MeetMgr] meeting exiting.... waiting...."):(console.crlog("[MeetMgr] meeting exiting complete......"),clearInterval(n),t.initweb())}),100);return}}else c={},c[i]=[],sessionStorage.setItem("CRWebRTCSDK_UserHistory",JSON.stringify(c));const d=`${t.protocol}//${t.webServerAddr}/servlet/joinMeetingAPI`;console.crlog("[MeetMgr] CR.EnterMeeting begin： "+i);const u={ClientVer:t.sdkver,OEMKey:"CLOUDROOM",PRODUCT:"H5SDK",RequestId:n.generateUUID(),MeetID:i,MeetPswd:r,NickName:encodeURI(s),UserType:4,MeetWay:0,...t.webLoginOAuth};let h={};h=e.__Rtc._ReplaceObjParam(u,"UserPswd","******"),h=e.__Rtc._ReplaceObjParam(h,"Token","******"),h=e.__Rtc._ReplaceObjParam(h,"MeetPswd","******"),console.crlog("[MeetMgr] WebAPI request url: "+d+", data:"+JSON.stringify(h));const f={_data_:JSON.stringify(u)};CRVideo.lastJoinApiRequest=u.RequestId,t.ajax({url:d,timeout:3e4,data:f,dataType:"jsonp",jsonp:"jsoncallback",success:function(e){if(u.RequestId===CRVideo.lastJoinApiRequest)if(console.crlog("[MeetMgr] WebAPI /servlet/joinMeetingAPI request success, result: "+JSON.stringify(e)),0==e.RspCode){t.meetingID=+i,t.LIVE_INFO={},t.LIVE_INFO.dataStr=e.CRMTStr.replace(/CRMT[\.|\w]{0,}:/,"");let n=JSON.parse(sessionStorage.getItem("CRWebRTCSDK_UserHistory"));l=n[i];let r={userId:o,nickname:s,dataStr:t.LIVE_INFO.dataStr,timestamp:(new Date).getTime(),termId:null,detail:"",userCode:"",openId:""};l.push(r),n[i]=l,sessionStorage.setItem("CRWebRTCSDK_UserHistory",JSON.stringify(n));let a=setInterval((()=>{t.meetingExiting?console.crlog("[MeetMgr] meeting exiting.... waiting...."):(console.crlog("[MeetMgr] meeting exiting complete......"),clearInterval(a),t.initweb())}),100)}else console.crlog(`[MeetMgr] CRVideo_EnterMeetingRslt.target(${window.WEB_SDK_ERR(e.RspCode)},${a})`),CRVideo_EnterMeetingRslt.target(window.WEB_SDK_ERR(e.RspCode),a),CRVideo_UploadingReport()},error:function(e){console.error(e),console.crlog("[MeetMgr] WebAPI /servlet/joinMeetingAPI request fail!"),console.crlog(`[MeetMgr] CRVideo_EnterMeetingRslt.target(202,${a})`),CRVideo_EnterMeetingRslt.target(202,a),CRVideo_UploadingReport()}})}CRVideo.allMemberInfo=[],window.__Rtc.CRRTCConf.initData(),window.__Rtc.CRRTCIMMsg.initData(),window.__Rtc.CRRTCTermMsg.initData(),window.__Rtc.CRRTCAudio.initData(),window.__Rtc.CRRTCVideo.initData(),window.__Rtc.CRRTCLocalVideo.initData(),window.__Rtc.CRRTCRemoteVideo.initData(),window.__Rtc.CRRTCUI.initData(),window.__Rtc.CRRTCRecord.initData(),window.__Rtc.CRRTCScreen.initData(),window.__Rtc.CRRTCMedia.initData(),window.__Rtc.CRRTCBoard.initData(),window.__Rtc.CRRTCSync.initData(),window.__Rtc.CRRTCCloudRecord.initData(),t.isWebRTC?navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?(console.crlog("[MeetMgr] EnumerateDevices on enterMeeting..."),navigator.mediaDevices.enumerateDevices().then((e=>{console.crlog(`[MeetMgr] EnumerateDevices success:${JSON.stringify(e)}`),t.updateDevicesList(e),c()})).catch((function(e){console.crlog(`navigator.mediaDevices.enumerateDevices error: ${e}`),console.crlog(`[MeetMgr] CRVideo_EnterMeetingRslt.target(8003,${a})`),CRVideo_EnterMeetingRslt.target(8003,a),CRVideo_UploadingReport(),console.error(e)}))):(console.crlog(`[MeetMgr] navigator.mediaDevices is undefined!!! protocal: ${window.location.protocol}`),console.crlog(`[MeetMgr] CRVideo_EnterMeetingRslt.target(8004,${a})`),CRVideo_EnterMeetingRslt.target(8004,a)):c()},e.CRVideo_DestroyMeeting=function(e,i,r){console.crlog(`[MeetMgr] CRVideo_DestroyMeeting(${e},${i},${r})`);const o=`${t.protocol}//${t.webServerAddr}/api/servlet/closeConf`,s={RequestId:n.generateUUID(),MeetID:e,OEMKey:"CLOUDROOM",ClientVer:"",...t.webLoginOAuth};let a={};a=__Rtc._ReplaceObjParam(s,"UserPswd","******"),a=__Rtc._ReplaceObjParam(a,"Token","******"),console.crlog("[MeetMgr] WebAPI request url: "+o+", data:"+JSON.stringify(a));const c={_data_:JSON.stringify(s)};t.ajax({url:o,timeout:3e4,data:c,dataType:"jsonp",jsonp:"jsoncallback",success:function(e){console.crlog("[MeetMgr] WebAPI /api/servlet/closeConf request success: "+JSON.stringify(e)),r?(console.crlog(`[MeetMgr] CRVideo_StopMeetingRslt.target(${window.WEB_SDK_ERR(e.RspCode)},${i})`),CRVideo_StopMeetingRslt.target(window.WEB_SDK_ERR(e.RspCode),i)):(console.crlog(`[MeetMgr] CRVideo_DestroyMeetingRslt.target(${window.WEB_SDK_ERR(e.RspCode)},${i})`),CRVideo_DestroyMeetingRslt.target(window.WEB_SDK_ERR(e.RspCode),i))},error:function(e){console.error(e),console.crlog("[MeetMgr] WebAPI /api/servlet/closeConf request fail!"),r?(console.crlog(`[MeetMgr] CRVideo_StopMeetingRslt.target(202,${i})`),CRVideo_StopMeetingRslt.target(202,i)):(console.crlog(`[MeetMgr] CRVideo_DestroyMeetingRslt.target(202,${i})`),CRVideo_DestroyMeetingRslt.target(202,i))}})},e.CRVideo_StopMeeting=(t,n)=>{console.crlog(`[MeetMgr] CRVideo_StopMeeting(${t},${n})`),e.CRVideo_DestroyMeeting(t,n,!0)},e.CRVideo_CreateMeetingSuccess=new t.CbProxy("CRVideo_CreateMeetingSuccess"),e.CRVideo_CreateMeetingFail=new t.CbProxy("CRVideo_CreateMeetingFail"),e.CRVideo_EnterMeetingRslt=new t.CbProxy("CRVideo_EnterMeetingRslt")})(window,CRVideo,Ice)},8883:()=>{var e,t,n,i,r,o,s,a;CRVideo.addEventListener=function(e,t,n){e.addEventListener?e.addEventListener(t,n):e.attachEvent&&e.attachEvent("on"+t,n)},CRVideo.ic=null,CRVideo.webServerAddr=null,CRVideo.proxy=null,CRVideo.logproxy=null,CRVideo.queuingID=null,CRVideo.sessionID=null,CRVideo.cookie="",CRVideo.MeetInfoObj=null,CRVideo.CallID="",CRVideo.HandErrTimes=0,CRVideo.loginAuthFlag=0,CRVideo.meetSubject="test",CRVideo.IceAddr=null,CRVideo.protocol="https:",CRVideo.logServer=null,CRVideo.logUUID="",__Rtc._ReplaceObjParam=function(e,t,n){let i={};for(var r in e)i[r]=r!==t?e[r]:n;return i},__Rtc.postCmd={config:{HandSharkTime:1e4}},e=__Rtc.postCmd,t=CRVideo,n={},i=["Ice::ConnectionLostException","Ice::ConnectFailedException"],r=function(){return this._initData=new Ice.InitializationData,this._initData.properties=Ice.createProperties(),this._initData.properties.setProperty("Ice.Trace.Network","0"),this._initData.properties.setProperty("Ice.Trace.Protocol","0"),this._initData.properties.setProperty("Ice.ACM.Client","0"),this._initData.properties.setProperty("Ice.ACM.Server","0"),this._initData.properties.setProperty("Ice.Default.EncodingVersion","1.0"),Ice.initialize(this._initData)},o=function(){console.crlog("[Callsvr] destroy Crux Connect on IceCruxCreate..."),s();var i,o,a=e.CallServerInfo,c=a.callSvrList,l=new Array;l=a.callSvrList.indexOf(";")>-1?c.split(";")[0]:c,(i=0==CRVideo.isHttp?Cr.Utils.parse_url("https://"+l):Cr.Utils.parse_url("http://"+l))?(o=0==CRVideo.isHttp?"jserver:wss":"jserver:ws",n.crux=r(),i.path&&(o+=" -r "+i.path),i.host&&(o+=" -h "+i.host),i.port?o+=" -p "+i.port:0==CRVideo.isHttp?o+=" -p 443":o+=" -p 80",console.crlog("[Callsvr] "+o),CRVideo.proxy=n.crux.stringToProxy(o),t.ic=n.crux,CRVideo_SetAdapter().then(CRVideo.__LoginCallserver).catch((e=>{CRVideo_LoginFail.target(204,CRVideo.LoginParam.cookie),CRVideo_UploadingReport()}))):console.error("[Callsvr] error: jserver parseUrl")},s=function(){n.crux&&n.crux.destroy&&(clearTimeout(t.HandShark),console.crlog("[Callsvr] Websockt destroy Crux connect..."),n.crux.destroy(),clearInterval(t.resetAdapterTimer),t.callserverCastPrx=null,setTimeout((()=>{t.callserverExiting=!1}),100))},a=function(){n.Log&&n.Log.destroy&&(console.crlog("[Callsvr] Websockt destroy Log connect..."),n.Log.destroy(),t.logproxy=null)},e.IceCruxCreate=o,t.destroyCruxConnect=s,e.IceLogCreate=function(){console.crlog("[Callsvr] destroy Log Connect on IceLogCreate..."),a();var i=e.CallServerInfo,o=i.uploadUrl.split(";")[0]?i.uploadUrl.split(";")[0]:i.uploadUrl.split(";")[1];if("https:"==CRVideo.protocol)var s=Cr.Utils.parse_url("https://"+o);else s=Cr.Utils.parse_url("http://"+o);if(s){if(0==CRVideo.isHttp)var c="Log.ClientLogServer:wss";else c="Log.ClientLogServer:ws";s.path&&(c+=" -r "+s.path),s.host&&(c+=" -h "+s.host),s.port?c+=" -p "+s.port:0==CRVideo.isHttp?c+=" -p 443":c+=" -p 80",console.crlog("[Callsvr] logserver: "+c),n.Log=r(),CRVideo.logproxy=n.Log.stringToProxy(c),CRVideo_LoggerAdapter();var l="";window.sessionStorage&&((l=window.sessionStorage.getItem("logUUID"))||(l=Ice.generateUUID(),window.sessionStorage.setItem("logUUID",l))),t.logUUID=l,null==CRVideo.isUploadLog&&(CRVideo.isUploadLog=0),t.logIceConnect=n.Log,CRVideo_UploadingReport()}else console.error("[Callsvr] error: ClientLogServer parseUrl")},t.destroyLogConnect=a,e.destroyLogConnect=a,e.resetCruxConnect=function(e){var t=e.toString();i.find((e=>-1!=t.indexOf(e)))&&(console.crlog("[Callsvr] callserver loginAgain..."),o())},e.errorLoginAgain=i,CRVideo.ajax=function(e){var t=e.dataType||"json",n=e.type||"get",i=e.data||{};if("jsonp"==t){var r=document.getElementsByTagName("body")[0],o=e.url||"",s="CRjsonp_"+(new Date).getTime();e.jsonp?i[e.jsonp]=s:i.callback=s;var a="";for(var c in i)a+=encodeURIComponent(c)+"="+encodeURIComponent(i[c])+"&";o+="?"+a;var l=document.createElement("script");l.src=o,r.appendChild(l),window[s]=function(){e.success&&e.success.apply(this,arguments),r.removeChild(l),window[s]=null,delete window[s]},l.onerror=function(){e.error&&e.error.apply(this,arguments),console.error("[Callsvr] server error:"+o),r.removeChild(l),window[s]=null,delete window[s]}}else{if(window.XMLHttpRequest?xhr=new XMLHttpRequest:xhr=new ActiveXObject("Microsoft.XMLHTTP"),"GET"==n||"get"==n){var d=function(e){if("string"==typeof e)return e;var t=[];for(var n in e){var i=encodeURIComponent(e[n]);t.push(n+"="+i)}return t.join("&")}(i);o=e.url+"?"+d;try{xhr.open(n,o,null==e.async||e.async),xhr.send(null)}catch(t){e.error&&e.error(xhr)}}else if("POST"==n||"post"==n){d=function(e){if("string"==typeof e)return e;var t=[];for(var n in e)t.push(n+"="+e[n]);return t.join("&")}(i);try{xhr.open(n,e.url,null==e.async||e.async),xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8"),xhr.send(d)}catch(t){e.error&&e.error(xhr)}}xhr.onreadystatechange=function(){if(4==xhr.readyState)if(200==xhr.status&&e.success)if("text"==t)e.success(xhr.responseText,"success");else{try{var n=JSON.parse(xhr.responseText)}catch(e){CRVideo_LoginFail.target(202,CRVideo.LoginParam.cookie),CRVideo_UploadingReport(),console.error(e)}e.success(n||xhr.responseText)}else e.error&&e.error(xhr)}}};var c={NotifyQueueStatus:CRVideo.queCallback.NotifyQueueStatus,NotifyPosition:CRVideo.queCallback.NotifyPosition,AssignUser:CRVideo.queCallback.AssignUser,AssignCancel:CRVideo.queCallback.AssignCancel,ServerAccept:CRVideo.callSvrCallback.ServerAccept,ServerDecline:CRVideo.callSvrCallback.ServerDecline,ServerCall:CRVideo.callSvrCallback.ServerCall,ServerPushUserStatus:CRVideo.callSvrCallback.ServerPushUserStatus,ServerReleaseCall:CRVideo.callSvrCallback.ServerReleaseCall,ServerCancelCall:CRVideo.callSvrCallback.ServerCancelCall,ServerKickoutUser:CRVideo.loginCallback.ServerKickoutUser,invite:__Rtc.CRRTCInvite.ICECallback.invite,acceptInvite:__Rtc.CRRTCInvite.ICECallback.acceptInvite,rejectInvite:__Rtc.CRRTCInvite.ICECallback.rejectInvite,cancelInvite:__Rtc.CRRTCInvite.ICECallback.cancelInvite,inviteResult:__Rtc.CRRTCInvite.ICECallback.inviteResult},l={Login:CRVideo.loginCallback.Login,GetServiceData:CRVideo.queCallback.GetServiceData,GetQueueStatus:CRVideo.queCallback.GetQueueStatus,UserEnter:CRVideo.queCallback.UserEnter,UserLeave:CRVideo.queCallback.UserLeave,AgentEnter:CRVideo.queCallback.AgentEnter,AgentLeave:CRVideo.queCallback.AgentLeave,AssignResponse:CRVideo.queCallback.AssignResponse,StartStatusPush:CRVideo.callSvrCallback.StartStatusPush,StopStatusPush:CRVideo.callSvrCallback.StopStatusPush,GetUserStatus:CRVideo.callSvrCallback.GetUserStatus,GetUserServiceStatus:CRVideo.queCallback.GetUserServiceStatus,GetAgentServiceStatus:CRVideo.queCallback.GetAgentServiceStatus,ClientCustomStatusUpdate:CRVideo.callSvrCallback.ClientCustomStatusUpdate,RequestUser:CRVideo.queCallback.RequestUser,ClientCall:CRVideo.callSvrCallback.ClientCall,ClientAccept:CRVideo.callSvrCallback.ClientAccept,ClientDecline:CRVideo.callSvrCallback.ClientDecline,ClientReleaseCall:CRVideo.callSvrCallback.ClientReleaseCall,Logout:CRVideo.loginCallback.Logout,ShakeHand:function(e,t,n){0==e.RspCode?CRVideo_ShakeHandRslt.target(e,n):console.crlog("[Callsvr] CRVideo_ShakeHandRslt"+e.RspCode)}};const d={data:{sendTask:[]},receive(e,t,n){let i=0;const r=t[i++],o=t[i++]<<24|t[i++]<<16|t[i++]<<8|t[i++],s=CRUtils.Uint8ArrToChar(t.slice(i,i+=o));if(0===r){console.crlog("[Callsvr] Received bufferData, received header data...");const e=t[i++]<<24|t[i++]<<16|t[i++]<<8|t[i++],n=CRUtils.Uint8ArrToChar(t.slice(i,i+=e)),o=t[i++]<<24|t[i++]<<16|t[i++]<<8|t[i++];this.data[s]={type:r,fileName:n,dataSize:o,dataBurst:[]}}else if(1===r){this.isStarting||(console.crlog("[Callsvr] Received bufferData, start to recive part data..."),this.isStarting=!0);const e=t[i++]<<24|t[i++]<<16|t[i++]<<8|t[i++],n=t[i++]<<24|t[i++]<<16|t[i++]<<8|t[i++],o=Array.prototype.concat.apply([],t.slice(i,n+i));this.data[s].type=r,this.data[s].dataBurst.push({start:e,length:n,data:o})}else if(2===r){console.crlog("[Callsvr] Received bufferData, transmit finished...");const t=this.data[s].dataBurst;t.sort(((e,t)=>e.start-t.start));let n=0,i=[];console.crlog("[Callsvr] Received bufferData, start to concat...");for(let e=0;e<t.length;e++)n+=t[e].length,i=i.concat(t[e].data);if(i=CRUtils.Uint8ArrToChar(i),n===this.data[s].dataSize)try{console.crlog(`[Callsvr] CRVideo_NotifyBufferData.target(${e.sourceUserId},bufferData)`),CRVideo_NotifyBufferData.target(e.sourceUserId,i)}catch(e){console.error(e)}}n.ice_response(JSON.stringify({RspCode:0,RspDesc:"ok"}))},receiveFile(e,t,n){let i=0;const r=t[i++],o=t[i++]<<24|t[i++]<<16|t[i++]<<8|t[i++],s=CRUtils.Uint8ArrToChar(t.slice(i,i+=o));if(0===r){console.crlog("[Callsvr] Received fileData, received header data...");const e=t[i++]<<24|t[i++]<<16|t[i++]<<8|t[i++],n=CRUtils.Uint8ArrToChar(t.slice(i,i+=e)).split("\\").pop(),o=t[i++]<<24|t[i++]<<16|t[i++]<<8|t[i++];this.data[s]={type:r,fileName:n,dataSize:o,dataBurst:[]}}else if(1===r){this.isStarting||(console.crlog("[Callsvr] Received fileData, start to recive part data..."),this.isStarting=!0);const e=t[i++]<<24|t[i++]<<16|t[i++]<<8|t[i++],n=t[i++]<<24|t[i++]<<16|t[i++]<<8|t[i++],o=Array.prototype.concat.apply([],t.slice(i,n+i));this.data[s].type=r,this.data[s].dataBurst.push({start:e,length:n,data:o})}else if(2===r){console.crlog("[Callsvr] Received fileData, transmit finished...");const t=this.data[s].dataBurst;t.sort(((e,t)=>e.start-t.start));let n=0,i=[];console.crlog("[Callsvr] Received fileData, start to concat...");for(let e=0;e<t.length;e++)n+=t[e].length,i=i.concat(t[e].data);if(n===this.data[s].dataSize)try{this.writeFile(e.sourceUserId,new Uint8Array(i).buffer,this.data[s].fileName,s)}catch(e){console.error(e)}}n.ice_response(JSON.stringify({RspCode:0,RspDesc:"ok"}))},writeFile(e,t,n,i){const r=CRUtils.getFileType(n),o=new Blob([t]);window.URL.createObjectURL(o);console.crlog(`[Callsvr] Recevied file success, fileName: ${n}, fileType: ${r}, size: ${parseInt(o.size/1024)}KB`),console.crlog(`[Callsvr] CRVideo_NotifyFileData.target(${e}, ${t}, ${n})`),CRVideo_NotifyFileData.target(e,t,n)},sendFile(e,t,n,i,r){const o=102400,s=n,a=CRUtils.splitCutArr(s,o),c=s.length,l=CRUtils.charToUint8Arr(t),u=l.length,h=new f,_=h.create(0,8+l.length);let p=_.length-8-l.length;_[p++]=(4278190080&u)>>24,_[p++]=(16711680&u)>>16,_[p++]=(65280&u)>>8,_[p++]=255&u;for(let e=0;e<l.length;e++)_[p++]=l[e];_[p++]=(4278190080&c)>>24,_[p++]=(16711680&c)>>16,_[p++]=(65280&c)>>8,_[p++]=255&c;var C={cmd:"SendFile",module:"CallServer",sessionID:CRVideo.sessionID,sourceUserId:CRVideo.LoginParam.user_id||"",targetUserId:e};function g(e){d.data.sendTask.forEach((e=>{e.uuid==i&&(e.state=3)})),console.crlog(`[Callsvr] CRVideo_SendFileRslt.target(${i},1,${r})`),CRVideo_SendFileRslt.target(i,e||1,r)}d.data.sendTask.forEach((e=>{e.uuid==i&&(e.state=1)})),CRVideo.webSendBuffer(C,_,((e,t)=>{if(0!==t)return void g(t);let n=0;function i(t,n){const i=t*o,l=a.length?o:s.length%o,d=h.create(1,l+8);let u=d.length-(l+8);d[u++]=(4278190080&i)>>24,d[u++]=(16711680&i)>>16,d[u++]=(65280&i)>>8,d[u++]=255&i,d[u++]=(4278190080&l)>>24,d[u++]=(16711680&l)>>16,d[u++]=(65280&l)>>8,d[u++]=255&l;for(let e=0;e<n.length;e++)d[u++]=n[e];CRVideo_SendProgress.target(e,i,s.length,r),CRVideo.webSendBuffer(C,d,c,e,r)}function c(e,t){if(t&&0!==t)return void g(t);const o=d.data.sendTask.find((t=>t.uuid==e)),s=a.shift();if(s)1==o.state?(i(n,s),n++):(console.crlog(`[Callsvr] CRVideo_SendFileRslt.target(${e},1199,${r})`),CRVideo_SendFileRslt.target(e,1199,r));else{const t=h.create(2,0);CRVideo.webSendBuffer(C,t,((e,t)=>{0===t?(d.data.sendTask.forEach((t=>{t.uuid==e&&(t.state=2)})),console.crlog(`[Callsvr] CRVideo_SendFileRslt.target(${e},0,${r})`),CRVideo_SendFileRslt.target(e,0,r)):g(t)}),e,r)}}c(e)}),i,r)}};var u=Ice.Class(SendCmd.Cmd,{sendCmd_async:function(e,t,n){e.ice_response(JSON.stringify({RspCode:0,RspDesc:"ok"}));var i=JSON.parse(t),r=i.cmd;i.module;if(null!=r){console.crlog(`[Callsvr] Received cmd callback:${r} --\x3e ${JSON.stringify(i)}`);try{c[r](i)}catch(e){console.crlog(e),console.error(e)}}},sendBuffer_async:function(e,t,n,i){e.ice_response(JSON.stringify({RspCode:0,RspDesc:"ok"}));var r=JSON.parse(t);if("SendCMD"==r.cmd){var o=function(e){var t,n,i,r,o,s;for(t="",i=e.length,n=0;n<i;)switch((r=e[n++])>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:t+=String.fromCharCode(r);break;case 12:case 13:o=e[n++],t+=String.fromCharCode((31&r)<<6|63&o);break;case 14:o=e[n++],s=e[n++],t+=String.fromCharCode((15&r)<<12|(63&o)<<6|(63&s)<<0)}return t}(n);console.crlog(`[Callsvr] CRVideo_NotifyCmdData.target(${r.sourceUserId}, ${o});`),CRVideo_NotifyCmdData.target(r.sourceUserId,o)}else"SendBuffer"==r.cmd?d.receive(r,n,e):"SendFile"==r.cmd&&d.receiveFile(r,n,e)}}),h=Ice.Class(LogSpace.ClientLogServer,{log:function(e){console.crlog("[Callsvr] log:"+e)},logFatal:function(e){console.crlog("[Callsvr] logFatal:"+e)},usrReport:function(e){console.crlog("[Callsvr] usrReport:"+e)},logDetail:function(e){console.crlog("[Callsvr] logDetail:"+e)}});function f(){this.uuid=Ice.generateUUID(),this.CommonArray=[],this.init()}window.CRVideo_SetAdapter=function(){return new Promise(((e,t)=>{Ice.Promise.try2((function(){SendCmd.CmdPrx.checkedCast(CRVideo.proxy).then((function(t){return CRVideo.callserverCastPrx=t,console.crlog("[Callsvr] Ice set adapter success!"),CRVideo.ic.createObjectAdapter("").then((function(e){CRVideo.cruxAdapter=e,e.add(new u,CRVideo.ic.stringToIdentity("jclient")),e.activate();let t=CRVideo.callserverCastPrx.ice_getCachedConnection();if(null==t)return console.crlog("[Callsvr] callserver ice_getCachedConnection is null!"),!1;t.setAdapter(e)})),e()})).exception((function(e){return console.crlog("[Callsvr] !!!Callserver checkedCast fail. is: "+e),t()}))})).exception((function(e){return t()}))}))},CRVideo_LoggerAdapter=function(){Ice.Promise.try2((function(){CRVideo.ServerLogger=LogSpace.ClientLogServerPrx.checkedCast(CRVideo.logproxy).then((function(e){CRVideo.logIceConnect.createObjectAdapter("").then((function(t){CRVideo.logServerPrx=e,CRVideo.logServerAdapter=t,t.add(new h,Ice.stringToIdentity("jclient"));let n=CRVideo.logServerPrx.ice_getCachedConnection();if(null==n)return console.crlog("[Callsvr] log ice_getCachedConnection is null!"),!1;n.setAdapter(t)}))}))})).exception((function(e){console.crlog("[Callsvr] There are several reasons for websocket errors: "+e.toString()),Ice.Promise.try2(__Rtc.postCmd.destroyLogConnect).finally((function(){process.exit(1)}))}))},f.prototype.init=function(){let e=0;const t=this.uuid.length;this.CommonArray[e++]=0,this.CommonArray[e++]=(4278190080&t)>>24,this.CommonArray[e++]=(16711680&t)>>16,this.CommonArray[e++]=(65280&t)>>8,this.CommonArray[e++]=255&t;const n=new TextEncoder("utf-8").encode(this.uuid);for(let i=0;i<t;i++)this.CommonArray[e++]=n[i]},f.prototype.create=function(e,t){const n=new Uint8Array(this.CommonArray.length+t);for(let e=0;e<this.CommonArray.length;e++)n[e]=this.CommonArray[e];return n[0]=e,n},f.prototype.getUUID=function(){return this.uuid},window.CRVideo_SendBuffer=function(e,t,n){function i(e){d.data.sendTask.forEach((e=>{e.uuid==u&&(e.state=3)})),console.crlog("[Callsvr] CRVideo_SendBuffer finished： "+JSON.stringify(_)),CRVideo_SendBufferRslt.target(u,e||1,n)}const r=102400;let o=new TextEncoder("utf-8").encode(t.toString());const s=function(e,t){let n=0,i=[];for(;n<e.length;)i.push(e.slice(n,n+=t));return i}(o,r),a=o.length,c=new f,l=c.create(0,8),u=c.getUUID();d.data.sendTask.push({uuid:u,state:0});let h=l.length-8;l[h++]=l[h++]=l[h++]=l[h++]=0,l[h++]=(4278190080&a)>>24,l[h++]=(16711680&a)>>16,l[h++]=(65280&a)>>8,l[h++]=255&a;var _={cmd:"SendBuffer",module:"CallServer",sessionID:CRVideo.sessionID,sourceUserId:CRVideo.LoginParam.user_id||"",targetUserId:e};return d.data.sendTask.forEach((e=>{e.uuid==u&&(e.state=1)})),CRVideo.webSendBuffer(_,l,(function(e,t){if(0!==t)return void i(t);let a=0;function l(t,a){const l=t*r,d=s.length?r:o.length%r,h=c.create(1,d+8);let f=h.length-(d+8);h[f++]=(4278190080&l)>>24,h[f++]=(16711680&l)>>16,h[f++]=(65280&l)>>8,h[f++]=255&l,h[f++]=(4278190080&d)>>24,h[f++]=(16711680&d)>>16,h[f++]=(65280&d)>>8,h[f++]=255&d;for(let e=0;e<a.length;e++)h[f++]=a[e];CRVideo_SendProgress.target(e,l,o.length,n),CRVideo.webSendBuffer(_,h,(function(e,t){0===t?u(e):i(t)}),e,n)}function u(e){const t=d.data.sendTask.find((t=>t.uuid==e)),r=s.shift();if(r)1==t.state?(l(a,r),a++):(console.crlog(`[Callsvr] CRVideo_SendBufferRslt.target(${e},1199,${n})`),CRVideo_SendBufferRslt.target(e,1199,n));else{const t=c.create(2,0);CRVideo.webSendBuffer(_,t,(function(e,t){0===t?(d.data.sendTask.forEach((t=>{t.uuid==e&&(t.state=2)})),CRVideo_SendBufferRslt.target(e,0,n)):i(t)}),e,n)}}u(e)}),u,n),u},window.CRVideo_SendFile=function(e,t,n){console.crlog(`[Callsvr] CRVideo_SendFile(${e},${t.name})`);const i=Ice.generateUUID();try{const o=t.name;var r=new FileReader;r.readAsArrayBuffer(t),r.onload=t=>{const s=new Int8Array(r.result);d.data.sendTask.push({uuid:i,state:0}),d.sendFile(e,o,s,i,n)}}catch(e){throw console.crlog(`[Callsvr] [error] ${e}`),e}return i},window.CRVideo_SendCmd=function(e,t,n){try{console.crlog(`[Callsvr] CRVideo_SendCmd(${e},${t},${n})`)}catch(e){throw e}var i={cmd:"SendCMD",module:"CallServer",sessionID:CRVideo.sessionID,sourceUserId:CRVideo.LoginParam.user_id||"",targetUserId:e},r=new TextEncoder("utf-8").encode(t.toString());const o=Ice.generateUUID();return CRVideo.webSendBuffer(i,r,CRVideo_SendCmdRslt.callback,o,n),o},window.CRVideo_CancelSend=function(e){d.data.sendTask.forEach((t=>{t.uuid==e&&(t.state=0)}))},CRVideo.webSendBuffer=function(e,t,n,i,r){Ice.Promise.try2((function(){CRVideo.callserverCastPrx&&(CRVideo.ic.createObjectAdapter("").then((function(e){CRVideo.cruxAdapter=e,e.add(new u,CRVideo.ic.stringToIdentity("jclient")),e.activate();let t=CRVideo.callserverCastPrx.ice_getCachedConnection();if(null==t)return console.crlog("[Callsvr] callserver ice_getCachedConnection is null!"),!1;t.setAdapter(e)})),CRVideo.callserverCastPrx.sendBuffer(JSON.stringify(e),t).then((function(t){void 0!==n&&n(i,CRVideo_ERR_DEF.NOERR,r);e.cmd})).exception((function(e){let t=e.reason;void 0!==n&&(t.includes("not found")?n(i,CRVideo_ERR_DEF.SENDDATA_TARGETINVALID,r):n(i,CRVideo_ERR_DEF.UNKNOWERR,r)),console.crlog("[Callsvr] ex = "+e),console.error(e),console.crlog("[Callsvr] reason = "+e.reason)})))})).exception((function(e){console.crlog("[Callsvr] There are several reasons for websocket errors: "+e.toString()),Ice.Promise.try2(CRVideo.destroyCruxConnect).finally((function(){process.exit(1)}))}))},CRVideo.webSendcmd=function(e,t,n){var i=e.cmd;e.module;CRVideo.callserverCastPrx&&CRVideo.callserverCastPrx.sendCmd(JSON.stringify(e)).then((function(r){let o=CRVideo.callserverCastPrx.ice_getCachedConnection();null!=o?o.setAdapter(CRVideo.cruxAdapter):console.crlog("[Callsvr] callserver ice_getCachedConnection is null!");var s=JSON.parse(r);0!=s.RspCode&&console.crlog("[Callsvr] !!!error. sendcmdName: "+i+", RspCode: "+s.RspCode+", RspDesc: "+s.RspDesc),l[i]&&l[i](s,e,t,n)})).exception((function(r){console.crlog(`[Callsvr] !!!Callserver send cmd uncheckedCast fail. error: ${r.error}, reason: ${r.reason}`),3!==r.error&&1006!==r.error||CRVideo.LineOffHandler(204),console.error(r),l[i]&&l[i]({RspCode:204},e,t,n)}))},CRVideo.webLogDetail=function(e,t,n){Ice.Promise.try2((function(){LogSpace.ClientLogServerPrx.checkedCast(CRVideo.logproxy).then((function(i){i.logDetail(e,t,n).then((function(e){console.crlog("[LOG] Log uploading success!")}))})).exception((function(e){console.crlog("[LOG] !!! log checkedCast fail. is: "+e),-1!=__Rtc.postCmd.errorLoginAgain.indexOf(e.toString())&&__Rtc.postCmd.IceLogCreate()}))})).exception((function(e){console.crlog("[Callsvr] There are several reasons for websocket errors: "+e.toString()),Ice.Promise.try((function(){CRVideo.destroyCruxConnect})).finally((function(){process.exit(1)}))}))},CRVideo_ShakeHand=function(){if(clearTimeout(CRVideo.HandShark),CRVideo.HandShark=setTimeout(CRVideo_ShakeHand,__Rtc.postCmd.config.HandSharkTime),CRVideo.HandErrTimes>120)CRVideo.HandErrTimes=0,console.crlog("[Callsvr] HandErrTimes error: Abnormal dropped!!!!!"),CRVideo.LineOffHandler(CRVideo_ERR_DEF.SOCKETEXCEPTION);else{var e={};let t=(new Date).getTime();e=CRVideo.CallID?{cmd:"ShakeHand",module:"CallServer",sessionID:CRVideo.sessionID,callID:CRVideo.CallID}:{cmd:"ShakeHand",module:"CallServer",sessionID:CRVideo.sessionID},CRVideo.webSendcmd(e,t),CRVideo.HandErrTimes=CRVideo.HandErrTimes+1}},CRVideo_ShakeHandRslt.callback=function(e,t){const n=(new Date).getTime()-t;0==e.RspCode?(console.crlog(`[Callserver] Callserver shakeHand success, delay: ${n}ms`),CRVideo.HandErrTimes=CRVideo.HandErrTimes-1):console.crlog(`[Callserver] Callserver shakeHand fail: ${JSON.stringify(e)},`)},CRVideo.callServerSendCMD=function(e){return new Promise(((t,n)=>{Ice.Promise.try2((()=>{if(!CRVideo.callserverCastPrx)return console.crlog("[Callserver] Did not login callserver!"),n("[Callserver] Did not login callserver!");{const i=JSON.stringify(Object.assign(e,{sessionID:CRVideo.sessionID}));CRVideo.callserverCastPrx.sendCmd(i).then((e=>t(JSON.parse(e)))).exception((t=>{if(console.crlog(`[Callserver] SendCMD Fail, cmd: ${e.cmd}`),console.crlog(t),!t||3!==t.error)return n(t);CRVideo.LineOffHandler(204)}))}})).exception((e=>(console.crlog(e.toString()),n(`[Error] Callserver connect Fail, ${e.toString()}`))))}))}},2803:()=>{var e,t;e=window,(t=CRVideo).QueList=[],t.queStateList=[],t.queuingID=null,t.queuingInfo={},t.queuingTimer=null,t.queServiceArr=[],t.mycallInfo={},e.CRVideo_InitQueueDat=function(e){try{console.crlog(`[QueueMgr] CRVideo_InitQueueDat(${e})`)}catch(e){}var n={cmd:"GetServiceData",module:"Queue",sessionID:t.sessionID};try{console.crlog(`[QueueMgr] WebCMD: ${JSON.stringify(n)}, cookie:${e}`)}catch(e){}t.webSendcmd(n,e)},e.CRVideo_GetAllQueueInfo=function(){try{console.crlog("[QueueMgr] CRVideo_GetAllQueueInfo()")}catch(e){}let e=[];return t.QueList.forEach((t=>{e.push({queID:+t.queID,prio:+t.prio,name:t.name,desc:t.desc})})),e},e.CRVideo_RefreshAllQueueStatus=function(n){try{!n&&console.crlog(`[QueueMgr] CRVideo_RefreshAllQueueStatus(${n})`)}catch(e){}let i=t.QueList.length;try{!n&&console.crlog(`[QueueMgr] All queue list length: ${i}`)}catch(e){}for(let r=0;r<i;r++){let i=t.QueList[r];e.CRVideo_GetQueueStatus(i.queID,"RefreshAllQueueStatus",n)}},e.CRVideo_GetQueueStatus=function(e,n,i){try{!i&&console.crlog(`[QueueMgr] CRVideo_GetQueueStatus(${e},${n},${i})`)}catch(e){}var r={cmd:"GetQueueStatus",module:"Queue",queID:e=parseInt(e),sessionID:t.sessionID};try{!i&&console.crlog(`[QueueMgr] WebCMD: ${JSON.stringify(r)}`)}catch(e){}t.webSendcmd(r,n,i)},e.CRVideo_StartService=function(e,n,i){try{console.crlog(`[QueueMgr] CRVideo_StartService(${e},${n},${i})`)}catch(e){}n=null==n?0:n;var r={cmd:"AgentEnter",module:"Queue",queID:e=parseInt(e),priority:n,sessionID:t.sessionID};try{console.crlog(`[QueueMgr] WebCMD: ${JSON.stringify(r)}, cookie: ${i}`)}catch(e){}t.webSendcmd(r,i)},e.CRVideo_StopService=function(e,n){try{console.crlog(`[QueueMgr] CRVideo_StopService(${e},${n})`)}catch(e){}var i={cmd:"AgentLeave",module:"Queue",queID:e=parseInt(e),sessionID:t.sessionID};try{console.crlog(`[QueueMgr] WebCMD: ${JSON.stringify(i)}, cookie: ${n}`)}catch(e){}t.webSendcmd(i,n)},e.CRVideo_AcceptAssignUser=function(e,n,i){try{console.crlog(`[QueueMgr] CRVideo_AcceptAssignUser(${e},${n},${i})`)}catch(e){}var r={accept:1,cmd:"AssignResponse",module:"Queue",queID:+e,userID:n,sessionID:t.sessionID};try{console.crlog(`[QueueMgr] WebCMD: ${JSON.stringify(r)}, cookie: ${i}`)}catch(e){}t.webSendcmd(r,i)},e.CRVideo_RejectAssignUser=function(e,n,i){try{console.crlog(`[QueueMgr] CRVideo_RejectAssignUser(${e},${n},${i})`)}catch(e){}var r={accept:0,cmd:"AssignResponse",module:"Queue",queID:+e,userID:n,sessionID:t.sessionID};try{console.crlog(`[QueueMgr] WebCMD: ${JSON.stringify(r)}, cookie: ${i}`)}catch(e){}t.webSendcmd(r,i)},e.CRVideo_ReqAssignUser=function(e){try{console.crlog(`[QueueMgr] CRVideo_ReqAssignUser(${e})`)}catch(e){}var n={cmd:"RequestUser",module:"Queue",sessionID:t.sessionID};try{console.crlog(`[QueueMgr] WebCMD: ${JSON.stringify(n)}, cookie: ${e}`)}catch(e){}t.webSendcmd(n,e)},e.CRVideo_GetServingQueues=function(){let e=[];return t.queServiceArr.forEach((t=>{e.push(t)})),e},e.CRVideo_StartQueuing=function(e,n,i){try{console.crlog(`[QueueMgr] CRVideo_StartQueuing(${e},${JSON.stringify(n)},${i})`)}catch(e){}t.queuingID=parseInt(e);var r={cmd:"UserEnter",module:"Queue",queID:parseInt(e),sessionID:t.sessionID,usrExDat:n};try{console.crlog(`[QueueMgr] WebCMD:${JSON.stringify(r)},cookie:${i}`)}catch(e){}t.webSendcmd(r,i)},e.CRVideo_StopQueuing=function(e){try{console.crlog(`[QueueMgr] CRVideo_StopQueuing(${e})`)}catch(e){}var n={cmd:"UserLeave",module:"Queue",queID:+t.queuingID,sessionID:t.sessionID};try{console.crlog(`[QueueMgr] WebCMD:${JSON.stringify(n)},cookie:${e}`)}catch(e){}t.webSendcmd(n,e),t.queuingID=null},e.CRVideo_GetUserServiceStatus=function(){console.crlog("[QueueMgr] CRVideo_GetUserServiceStatus()");const e={cmd:"GetUserServiceStatus",module:"Queue",sessionID:t.sessionID};try{console.crlog(`[QueueMgr] WebCMD:${JSON.stringify(e)}`)}catch(e){}t.webSendcmd(e)},e.CRVideo_GetAgentServiceStatus=function(){console.crlog("[QueueMgr] CRVideo_GetAgentServiceStatus()");const e={cmd:"GetAgentServiceStatus",module:"Queue",sessionID:t.sessionID};try{console.crlog(`[QueueMgr] WebCMD:${JSON.stringify(e)}`)}catch(e){}t.webSendcmd(e)},e.CRVideo_GetQueuingInfo=function(){const e=t.queuingInfo;return console.crlog(`[QueueMgr] CRVideo_GetQueuingInfo(), returnVal: ${JSON.stringify(e)}`),e},e.CRVideo_GetSessionInfo=function(){const e={callID:t.mycallInfo.callID||"",peerID:t.mycallInfo.peerID||"",peerName:t.mycallInfo.peerName||"",bCallAccepted:t.mycallInfo.bCallAccepted||0,duration:t.mycallInfo.duration||0,meetingID:t.mycallInfo.meetingID||null,meetingPswd:t.mycallInfo.meetingPswd||""};return console.crlog(`[QueueMgr] CRVideo_GetSessionInfo(), returnVal: ${JSON.stringify(e)}`),e},t.queCallback={GetServiceData:function(n,i,r){try{console.crlog(`[QueueMgr] CRVideo_InitQueueDat -- CMDCallback --\x3e GetServiceData: ${JSON.stringify(n)}`)}catch(e){}0===n.RspCode&&(t.QueList=n.ques,e.CRVideo_GetUserServiceStatus(),e.CRVideo_GetAgentServiceStatus());try{console.crlog(`[QueueMgr] CRVideo_InitQueueDatRslt.target(${ICE_SDK_ERR(n.RspCode)},${r})`)}catch(e){}e.CRVideo_InitQueueDatRslt.target(ICE_SDK_ERR(n.RspCode),r)},GetQueueStatus:function(n,i,r,o){try{!o&&console.crlog(`[QueueMgr] CRVideo_GetQueueStatus -- CMDCallback --\x3e GetQueueStatus: ${JSON.stringify(n)}`)}catch(e){}if(0===n.RspCode){t.queStateList.length;for(var s=!1,a=n.status,c=0;c<t.queStateList.length;c++)t.queStateList[c].queID!=a.queID||(t.queStateList[c]=a,s=!0);s||t.queStateList.push(a)}try{!o&&console.crlog(`[QueueMgr] CRVideo_GetQueueStatusRslt.target(${JSON.stringify(n.status)},${ICE_SDK_ERR(n.RspCode)},${r})`)}catch(e){}e.CRVideo_GetQueueStatusRslt.target(n.status,ICE_SDK_ERR(n.RspCode),r)},AgentEnter:function(e,n,i){try{console.crlog(`[QueueMgr] CRVideo_StartService -- CMDCallback --\x3e AgentEnter: ${JSON.stringify(e)}`)}catch(e){}0===e.RspCode&&(t.queServiceArr.push(n.queID),console.crlog(`[QueueMgr] queServiceArr: ${JSON.stringify(t.queServiceArr)}`));try{console.crlog(`[QueueMgr] CRVideo_StartServiceRslt.target(${n.queID},${ICE_SDK_ERR(e.RspCode)},${i})`)}catch(e){}CRVideo_StartServiceRslt.target(n.queID,ICE_SDK_ERR(e.RspCode),i)},AgentLeave:function(e,n,i){try{console.crlog(`[QueueMgr] CRVideo_StopService -- CMDCallback --\x3e AgentLeave: ${JSON.stringify(e)}`)}catch(e){}0===e.RspCode&&(t.queServiceArr.splice(t.queServiceArr.findIndex((e=>e==n.queID)),1),console.crlog(`[QueueMgr] queServiceArr: ${JSON.stringify(t.queServiceArr)}`));try{console.crlog(`[QueueMgr] CRVideo_StopServiceRslt.target(${n.queID},${ICE_SDK_ERR(e.RspCode)},${i})`)}catch(e){}CRVideo_StopServiceRslt.target(n.queID,ICE_SDK_ERR(e.RspCode),i)},AssignResponse:function(e,t,n){try{console.crlog(`[QueueMgr] CRVideo_AcceptAssignUser、CRVideo_RejectAssignUser -- CMDCallback --\x3e AssignResponse: ${JSON.stringify(e)}`)}catch(e){}try{console.crlog(`[QueueMgr] CRVideo_ResponseAssignUserRslt.target(${ICE_SDK_ERR(e.RspCode)},${n})`)}catch(e){}CRVideo_ResponseAssignUserRslt.target(ICE_SDK_ERR(e.RspCode),n)},RequestUser:function(e,t,n){try{console.crlog(`[QueueMgr] CRVideo_ReqAssignUser -- CMDCallback --\x3e RequestUser: ${JSON.stringify(e)}`)}catch(e){}let i={queID:e.queID,userID:e.userID,nickname:e.userName,queuingTime:e.wait_time,usrExDat:e.usrExDat};try{console.crlog(`[QueueMgr] CRVideo_ReqAssignUserRslt.target(${ICE_SDK_ERR(e.RspCode)},${JSON.stringify(i)},${n})`)}catch(e){}CRVideo_ReqAssignUserRslt.target(ICE_SDK_ERR(e.RspCode),i,n)},UserEnter:function(n,i,r){try{console.crlog(`[QueueMgr] CRVideo_StartQueuing -- CMDCallback --\x3e UserEnter: ${JSON.stringify(n)}`)}catch(e){}let o=n.RspCode;0==o&&(t.queuingInfo={queID:i.queID,position:+n.position,queuingTime:0},t.queuingTimer=setInterval((()=>{t.queuingInfo.queuingTime++}),1e3));try{console.crlog(`[QueueMgr] CRVideo_StartQueuingRslt.target(${ICE_SDK_ERR(o)},${r})`)}catch(e){}e.CRVideo_StartQueuingRslt.target(ICE_SDK_ERR(o),r);try{console.crlog(`[QueueMgr] CRVideo_QueuingInfoChanged.target(${JSON.stringify(t.queuingInfo)})`)}catch(e){}e.CRVideo_QueuingInfoChanged.target(t.queuingInfo)},UserLeave:function(e,n,i){try{console.crlog(`[QueueMgr] CRVideo_StopQueuing -- CMDCallback --\x3e UserLeave: ${JSON.stringify(e)}`)}catch(e){}let r=e.RspCode;if(0==r){t.queuingInfo={queID:n.queID,position:-1,queuingTime:0};try{console.crlog("[QueueMgr] Clear Interval: queuingTimer")}catch(e){}clearInterval(t.queuingTimer)}try{console.crlog(`[QueueMgr] CRVideo_StopQueuingRslt.target(${ICE_SDK_ERR(r)},${i})`)}catch(e){}CRVideo_StopQueuingRslt.target(ICE_SDK_ERR(r),i)},GetUserServiceStatus:function(e,n,i){try{console.crlog(`[QueueMgr] CRVideo_GetUserServiceStatus -- CMDCallback --\x3e GetUserServiceStatus: ${JSON.stringify(e)}`)}catch(e){}0==e.RspCode&&(t.mycallInfo.callID=e.callInfo.callID,t.mycallInfo.peerID=e.callInfo.peerID,t.mycallInfo.peerName=e.callInfo.peerName,t.mycallInfo.bCallAccepted=e.callInfo.callState,t.mycallInfo.duration=e.callInfo.duration,t.mycallInfo.meetingID=void 0!==e.callInfo.meetInfo?e.callInfo.meetInfo.ID:null,t.mycallInfo.meetingPswd=void 0!==e.callInfo.meetInfo?e.callInfo.meetInfo.pswd:null,t.mycallInfo.position=void 0!==e.position?e.position:null,t.mycallInfo.queID=void 0!==e.queID?e.queID:null,t.mycallInfo.wait_time=void 0!==e.wait_time?e.wait_time:null)},GetAgentServiceStatus:function(e,n,i){try{console.crlog(`[QueueMgr] CRVideo_GetAgentServiceStatus -- CMDCallback --\x3e GetAgentServiceStatus: ${JSON.stringify(e)}`)}catch(e){}0==e.RspCode&&(t.mycallInfo.callID=e.callInfo.callID,t.mycallInfo.peerID=e.callInfo.peerID,t.mycallInfo.peerName=e.callInfo.peerName,t.mycallInfo.bCallAccepted=e.callInfo.callState,t.mycallInfo.duration=e.callInfo.duration,t.mycallInfo.meetingID=void 0!==e.callInfo.meetInfo?e.callInfo.meetInfo.ID:null,t.mycallInfo.meetingPswd=void 0!==e.callInfo.meetInfo?e.callInfo.meetInfo.pswd:null,t.mycallInfo.queIDs=void 0!==e.queIDs?e.queIDs:null)},NotifyQueueStatus:function(e){try{console.crlog(`[QueueMgr] CRVideo_QueueStatusChanged.target(${JSON.stringify(e.status)})`)}catch(e){}CRVideo_QueueStatusChanged.target(e.status)},AssignUser:function(e){const t={queID:e.queID,userID:e.userID,nickname:e.userName,queuingTime:e.wait_time,usrExDat:e.usrExDat};try{console.crlog(`[QueueMgr] CRVideo_AutoAssignUser.target(${JSON.stringify(t)})`)}catch(e){}CRVideo_AutoAssignUser.target(t)},AssignCancel:function(e){try{console.crlog(`[QueueMgr] CRVideo_CancelAssignUser.target(${e.queID},${e.userID})`)}catch(e){}CRVideo_CancelAssignUser.target(e.queID,e.userID)},NotifyPosition:function(e){const t={queID:e.status.queID,agent_num:e.status.agent_num,wait_num:e.status.wait_num,srv_num:e.status.srv_num},n={queID:e.status.queID,position:e.position,queuingTime:e.wait_time};try{console.crlog(`[QueueMgr] CRVideo_QueueStatusChanged.target(${JSON.stringify(t)})`)}catch(e){}CRVideo_QueueStatusChanged.target(t);try{console.crlog(`[QueueMgr] CRVideo_QueuingInfoChanged.target(${JSON.stringify(n)})`)}catch(e){}CRVideo_QueuingInfoChanged.target(n)}},e.CRVideo_InitQueueDatRslt=new t.CbProxy("CRVideo_InitQueueDatRslt"),e.CRVideo_GetQueueStatusRslt=new t.CbProxy("CRVideo_GetQueueStatusRslt"),e.CRVideo_StartServiceRslt=new t.CbProxy("CRVideo_StartServiceRslt"),e.CRVideo_StopServiceRslt=new t.CbProxy("CRVideo_StopServiceRslt"),e.CRVideo_ResponseAssignUserRslt=new t.CbProxy("CRVideo_ResponseAssignUserRslt"),e.CRVideo_ReqAssignUserRslt=new CRVideo.CbProxy("CRVideo_ReqAssignUserRslt"),e.CRVideo_StartQueuingRslt=new t.CbProxy("CRVideo_StartQueuingRslt"),e.CRVideo_StopQueuingRslt=new t.CbProxy("CRVideo_StopQueuingRslt"),e.CRVideo_AutoAssignUser=new t.CbProxy("CRVideo_AutoAssignUser"),e.CRVideo_CancelAssignUser=new t.CbProxy("CRVideo_CancelAssignUser"),e.CRVideo_QueueStatusChanged=new t.CbProxy("CRVideo_QueueStatusChanged"),e.CRVideo_QueuingInfoChanged=new t.CbProxy("CRVideo_QueuingInfoChanged")},1369:function(e,t,n){e=n.nmd(e),function(e,t,n){var i=t("ice").Ice,r=i.__M,o=i.Slice,s=r.module("Common");s.ConferenceError=o.defineUserException((function(e,t,n){i.UserException.call(this,n),this.error=void 0!==e?e:0,this.reason=void 0!==t?t:""}),i.UserException,"Common::ConferenceError",(function(e){e.writeInt(this.error),e.writeString(this.reason)}),(function(e){this.error=e.readInt(),this.reason=e.readString()}),!1,!1),n.Common=s}(void 0!==n.g&&n.g.process,void 0!==n.g&&void 0!==n.g.process?n(5488):window.Ice.__require,void 0!==n.g&&void 0!==n.g.process?t:this)},5488:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=5488,e.exports=t},1798:function(e,t,n){e=n.nmd(e),function(e,t,n){var i=t("ice").Ice,r=(i.__M,t("Common/Exception").Common),o=t("Control/PublicTypes").Conference,s=i.Slice;s.defineSequence(o,"MusicListHelper","Ice.StringHelper",!1),s.defineDictionary(o,"TerminalEnergy","TerminalEnergyHelper","Ice.ShortHelper","Ice.IntHelper",!0,void 0,void 0),s.defineSequence(o,"deviceLstHelper","Ice.StringHelper",!1),o.remoteAudio=s.defineStruct((function(e,t,n,i,r,o,s,a){this.inputDevice=void 0!==e?e:"",this.outputDevice=void 0!==t?t:"",this.bMicBoost=void 0!==n&&n,this.hiLevelEC=void 0!==i?i:0,this.outputDType=void 0!==r?r:0,this.echoDelay=void 0!==o?o:0,this.outputVolume=void 0!==s?s:0,this.inputVolume=void 0!==a?a:0}),!0,(function(e){e.writeString(this.inputDevice),e.writeString(this.outputDevice),e.writeBool(this.bMicBoost),e.writeInt(this.hiLevelEC),e.writeInt(this.outputDType),e.writeInt(this.echoDelay),e.writeInt(this.outputVolume),e.writeInt(this.inputVolume)}),(function(e){this.inputDevice=e.readString(),this.outputDevice=e.readString(),this.bMicBoost=e.readBool(),this.hiLevelEC=e.readInt(),this.outputDType=e.readInt(),this.echoDelay=e.readInt(),this.outputVolume=e.readInt(),this.inputVolume=e.readInt()}),23,!1),o.remoteAudioInf=s.defineStruct((function(e,t,n){this.inputDLst=void 0!==e?e:null,this.outputDLst=void 0!==t?t:null,this.remoteInf=void 0!==n?n:new o.remoteAudio}),!0,(function(e){o.deviceLstHelper.write(e,this.inputDLst),o.deviceLstHelper.write(e,this.outputDLst),o.remoteAudio.write(e,this.remoteInf)}),(function(e){this.inputDLst=o.deviceLstHelper.read(e),this.outputDLst=o.deviceLstHelper.read(e),this.remoteInf=o.remoteAudio.read(e,this.remoteInf)}),25,!1),o.AudioCallback=s.defineObject(void 0,i.Object,void 0,0,["::Conference::AudioCallback","::Ice::Object"],-1,void 0,void 0,!1),o.AudioCallbackPrx=s.defineProxy(i.ObjectPrx,o.AudioCallback.ice_staticId,void 0),s.defineOperations(o.AudioCallback,o.AudioCallbackPrx,{updateStatus:[,,,,,,[[2],[2],[o.ASTATUS.__helper]],,,,],updateVoiceEnergy:[,,,,,,[["Conference.TerminalEnergyHelper"]],,,,],updateSpeaker:[,,,,,,[[2]],,,,],closeAll:[,,,,,,[[2]],,,,],playBackgroundMusic:[,,,,,,[[2],[1]],,,,],notifyVoiceHowling:[,,,,,,[[2],[1]],,,,],notifyVoiceNoise:[,,,,,,[[2],[1]],,,,],getRemoteAudioInfNotify:[,,,1,,[o.remoteAudioInf],[[2]],,[r.ConferenceError],,],remoteAudioSetNotify:[,,,,,,[[2],[o.remoteAudio]],,[r.ConferenceError],,],notifyLanLessMicOpen:[,,,,,,,,,,],notifySetVoiceChange:[,,,,,,[[2],[2],[3]],,,,]}),o.AudioCtrl=s.defineObject(void 0,i.Object,void 0,0,["::Conference::AudioCtrl","::Ice::Object"],-1,void 0,void 0,!1),o.AudioCtrlPrx=s.defineProxy(i.ObjectPrx,o.AudioCtrl.ice_staticId,void 0),s.defineOperations(o.AudioCtrl,o.AudioCtrlPrx,{setDeviceStatus:[,,,1,,,[[1]],,[r.ConferenceError],,],askForMic:[,,,1,,,,,[r.ConferenceError],,],openMicEx:[,,,1,,,[[2]],,[r.ConferenceError],,],closeMicEx:[,,,1,,,[[2]],,[r.ConferenceError],,],closeAll:[,,,1,,,,,[r.ConferenceError],,],setVoiceEnergy:[,,,1,,,[[3]],,[r.ConferenceError],,],pstnSwitchMicStatus:[,,,1,,,,,[r.ConferenceError],,],startRecord:[,,,1,,,,,[r.ConferenceError],,],isRecording:[,,,1,,[1],,,[r.ConferenceError],,],stopRecord:[,,,1,,,,,[r.ConferenceError],,],playApplause:[,,,1,,,,,[r.ConferenceError],,],getMusicList:[,,,1,,["Conference.MusicListHelper"],,,[r.ConferenceError],,],getPlayBGMusic:[,,,1,,[7],,,[r.ConferenceError],,],startBGMusic:[,,,1,,,[[7],[3]],,[r.ConferenceError],,],stopPlayBGMusic:[,,,1,,,,,[r.ConferenceError],,],setPlayBGMusicVolumn:[,,,1,,,[[3]],,[r.ConferenceError],,],getPlayBGMusicVolumn:[,,,1,,[3],,,[r.ConferenceError],,],voiceHowling:[,,,1,,,[[1]],,,,],voiceNoise:[,,,1,,,[[1]],,,,],remoteAudioSet:[,,,1,,,[[2],[o.remoteAudio]],,[r.ConferenceError],,],getRemoteAudioInf:[,,,1,,[o.remoteAudioInf],[[2]],,[r.ConferenceError],,],setMediaAudioState:[,,,1,,,[[7]],,,,],batchSubscribeAudio:[,,,1,,,[[7]],,[r.ConferenceError],,],setVoiceChange:[,,,1,,,[[2],[3]],,[r.ConferenceError],,]}),n.Conference=o}(void 0!==n.g&&n.g.process,void 0!==n.g&&void 0!==n.g.process?n(4986):window.Ice.__require,void 0!==n.g&&void 0!==n.g.process?t:this)},7576:function(e,t,n){e=n.nmd(e),function(e,t,n){var i=t("ice").Ice,r=i.__M,o=t("Common/Exception").Common,s=r.require(e,["Control/Member","Control/Contact","Control/PublicTypes","Control/Notice","Control/ConferenceV4"]).Conference,a=i.Slice;s.LoginResponse=a.defineStruct((function(e,t,n,i,r,o,a,c,l,d,u,h,f,_,p,C,g,m,R,v,I,y,S){this.termId=void 0!==e?e:0,this.option=void 0!==t?t:0,this.myDetail=void 0!==n?n:new s.Contact,this.modules=void 0!==i?i:null,this.activeMembers=void 0!==r?r:null,this.ServerUTCTime=void 0!==o?o:0,this.bRoomLocked=void 0!==a&&a,this.confInfo=void 0!==c?c:null,this.isBegan=void 0!==l&&l,this.countdown=void 0!==d?d:0,this.fileServers=void 0!==u?u:null,this.vqs=void 0!==h?h:null,this.windowMode=void 0!==f?f:s.WINDOW_MODE.VMANAGER_LOCK,this.mainVideoTermID=void 0!==_?_:0,this.vlo=void 0!==p?p:s.VIDEOLAYOUTMODE.VLO_1v1_M,this.bAllowWall=void 0!==C&&C,this.curMainTab=void 0!==g?g:new s.TabID,this.curSubTab=void 0!==m?m:new s.TabID,this.bFull=void 0!==R&&R,this.sm=void 0!==v?v:s.SYNCMODE.SYNC_FORCE,this.lastTabValue=void 0!==I?I:0,this.lastElemValue=void 0!==y?y:0,this.wbDescibes=void 0!==S?S:null}),!1,(function(e){e.writeShort(this.termId),e.writeInt(this.option),s.Contact.write(e,this.myDetail),s.ModuleDictHelper.write(e,this.modules),s.MemberSeqHelper.write(e,this.activeMembers),e.writeInt(this.ServerUTCTime),e.writeBool(this.bRoomLocked),s.StringStringMapHelper.write(e,this.confInfo),e.writeBool(this.isBegan),e.writeInt(this.countdown),s.FileServerSeqHelper.write(e,this.fileServers),s.VideoQualitySeqHelper.write(e,this.vqs),s.WINDOW_MODE.__write(e,this.windowMode),e.writeShort(this.mainVideoTermID),s.VIDEOLAYOUTMODE.__write(e,this.vlo),e.writeBool(this.bAllowWall),s.TabID.write(e,this.curMainTab),s.TabID.write(e,this.curSubTab),e.writeBool(this.bFull),s.SYNCMODE.__write(e,this.sm),e.writeShort(this.lastTabValue),e.writeShort(this.lastElemValue),s.WhiteBoardDescribeSeqHelper.write(e,this.wbDescibes)}),(function(e){this.termId=e.readShort(),this.option=e.readInt(),this.myDetail=s.Contact.read(e,this.myDetail),this.modules=s.ModuleDictHelper.read(e),this.activeMembers=s.MemberSeqHelper.read(e),this.ServerUTCTime=e.readInt(),this.bRoomLocked=e.readBool(),this.confInfo=s.StringStringMapHelper.read(e),this.isBegan=e.readBool(),this.countdown=e.readInt(),this.fileServers=s.FileServerSeqHelper.read(e),this.vqs=s.VideoQualitySeqHelper.read(e),this.windowMode=s.WINDOW_MODE.__read(e),this.mainVideoTermID=e.readShort(),this.vlo=s.VIDEOLAYOUTMODE.__read(e),this.bAllowWall=e.readBool(),this.curMainTab=s.TabID.read(e,this.curMainTab),this.curSubTab=s.TabID.read(e,this.curSubTab),this.bFull=e.readBool(),this.sm=s.SYNCMODE.__read(e),this.lastTabValue=e.readShort(),this.lastElemValue=e.readShort(),this.wbDescibes=s.WhiteBoardDescribeSeqHelper.read(e)}),50,!1),s.ConferenceRoom=a.defineObject(void 0,i.Object,[s.ConferenceSessionV4],0,["::Conference::ConferenceRoom","::Conference::ConferenceSessionV4","::Ice::Object"],-1,void 0,void 0,!1),s.ConferenceRoomPrx=a.defineProxy(i.ObjectPrx,s.ConferenceRoom.ice_staticId,[s.ConferenceSessionV4Prx]),a.defineOperations(s.ConferenceRoom,s.ConferenceRoomPrx,{login:[,,,1,,[s.LoginResponse],[[s.LoginRequest]],,[o.ConferenceError],,]}),s.SSLoginRequest=a.defineStruct((function(e,t,n,i,r,o,s,a){this.confKey=void 0!==e?e:"",this.memberId=void 0!==t?t:0,this.memberType=void 0!==n?n:0,this.phoneNum=void 0!==i?i:"",this.callbacks=void 0!==r?r:null,this.accessNo=void 0!==o?o:0,this.PIN=void 0!==s?s:"",this.sessionId=void 0!==a?a:""}),!1,(function(e){e.writeString(this.confKey),e.writeInt(this.memberId),e.writeByte(this.memberType),e.writeString(this.phoneNum),s.ModuleDictHelper.write(e,this.callbacks),e.writeInt(this.accessNo),e.writeString(this.PIN),e.writeString(this.sessionId)}),(function(e){this.confKey=e.readString(),this.memberId=e.readInt(),this.memberType=e.readByte(),this.phoneNum=e.readString(),this.callbacks=s.ModuleDictHelper.read(e),this.accessNo=e.readInt(),this.PIN=e.readString(),this.sessionId=e.readString()}),14,!1),s.SSLoginResponse=a.defineStruct((function(e,t,n,i,r,o,a,c){this.termId=void 0!==e?e:0,this.modules=void 0!==t?t:null,this.actor=void 0!==n?n:0,this.needPIN=void 0!==i&&i,this.PINLen=void 0!==r?r:0,this.currentTermNum=void 0!==o?o:0,this.isBegan=void 0!==a&&a,this.audioStatus=void 0!==c?c:s.ASTATUS.AUNKNOWN}),!1,(function(e){e.writeShort(this.termId),s.ModuleDictHelper.write(e,this.modules),e.writeByte(this.actor),e.writeBool(this.needPIN),e.writeByte(this.PINLen),e.writeInt(this.currentTermNum),e.writeBool(this.isBegan),s.ASTATUS.__write(e,this.audioStatus)}),(function(e){this.termId=e.readShort(),this.modules=s.ModuleDictHelper.read(e),this.actor=e.readByte(),this.needPIN=e.readBool(),this.PINLen=e.readByte(),this.currentTermNum=e.readInt(),this.isBegan=e.readBool(),this.audioStatus=s.ASTATUS.__read(e)}),12,!1),Object.defineProperty(s,"PHASE_ALERTING",{value:0}),Object.defineProperty(s,"PHASE_CONNECT",{value:1}),Object.defineProperty(s,"PHASE_END",{value:2}),Object.defineProperty(s,"END_REASON_NORMAL",{value:0}),Object.defineProperty(s,"END_REASON_NO_ANSWER",{value:1}),Object.defineProperty(s,"END_REASON_REJECT",{value:2}),Object.defineProperty(s,"END_REASON_CONNECT_ERR",{value:3}),Object.defineProperty(s,"END_REASON_USER_BUSY",{value:4}),Object.defineProperty(s,"END_REASON_BALANCE_LESS",{value:5}),s.SoftSwitchUser=a.defineObject(void 0,i.Object,void 0,0,["::Conference::SoftSwitchUser","::Ice::Object"],-1,void 0,void 0,!1),s.SoftSwitchUserPrx=a.defineProxy(i.ObjectPrx,s.SoftSwitchUser.ice_staticId,void 0),a.defineOperations(s.SoftSwitchUser,s.SoftSwitchUserPrx,{login:[,,,1,,[s.SSLoginResponse],[[s.SSLoginRequest]],,[o.ConferenceError],,],callProgress:[,,,1,,,[[3],[3],[7]],,,,]}),s.AAAReport=a.defineObject(void 0,i.Object,void 0,0,["::Conference::AAAReport","::Ice::Object"],-1,void 0,void 0,!1),s.AAAReportPrx=a.defineProxy(i.ObjectPrx,s.AAAReport.ice_staticId,void 0),a.defineOperations(s.AAAReport,s.AAAReportPrx,{callBalanceLess:[,,,1,,,[[7],[7]],,[o.ConferenceError],,]}),a.defineDictionary(s,"IntMemberMap","IntMemberMapHelper","Ice.IntHelper","Conference.Member",!1,void 0,void 0,i.HashMap.compareEquals),s.AllMembersInfo=a.defineStruct((function(e,t){this.sn=void 0!==e?e:0,this.memberMap=void 0!==t?t:null}),!1,(function(e){e.writeLong(this.sn),s.IntMemberMapHelper.write(e,this.memberMap)}),(function(e){this.sn=e.readLong(),this.memberMap=s.IntMemberMapHelper.read(e)}),9,!1),s.ConfDataCenter=a.defineObject(void 0,i.Object,void 0,0,["::Conference::ConfDataCenter","::Ice::Object"],-1,void 0,void 0,!1),s.ConfDataCenterPrx=a.defineProxy(i.ObjectPrx,s.ConfDataCenter.ice_staticId,void 0),a.defineOperations(s.ConfDataCenter,s.ConfDataCenterPrx,{getActiveMembers:[,,,1,,[s.AllMembersInfo],[[7]],,[o.ConferenceError],,]}),s.WebAdmin=a.defineObject(void 0,i.Object,void 0,0,["::Conference::WebAdmin","::Ice::Object"],-1,void 0,void 0,!1),s.WebAdminPrx=a.defineProxy(i.ObjectPrx,s.WebAdmin.ice_staticId,void 0),a.defineOperations(s.WebAdmin,s.WebAdminPrx,{refresInvitees:[,,,1,,,,,[o.ConferenceError],,],refreshOptions:[,,,1,,,,,[o.ConferenceError],,],getConfStatus:[,,,1,,[7],,,,,],callInvite:[,,,1,,,[[7],[7],[1]],,[o.ConferenceError],,],getLiveStream:[,,,1,,["Conference.StringStringMapHelper"],,,[o.ConferenceError],,],requestThirdPartyLiveStreamUrl:[,,,1,,[7],[[3]],,,,],notifyLiveStreamStatus:[,,,1,,,[[3],[3]],,,,],refreshThirdPublishStatus:[,,,1,,,,,,,],startListLive:[,,,1,,[3],[[7]],,[o.ConferenceError],,],stopListLive:[,,,1,,[3],,,,,],notifyRedStatus:[,,,1,,,[[3],[7],[3],[3],[7],[7],[7],[7]],,,,],notifyThumbUp:[,,,1,,,[[3],[3],[3],[7]],,,,],notifypayback:[,,,1,,,[[3],[7]],,,,],swtichLiveAppElements:[,,,1,,,[[3],[2]],,,,],getActiveMembers:[,,,1,,["Conference.MemberSeqHelper"],,,[o.ConferenceError],,],startRtsp:[,,,1,,[7],[[3],[3],[3],[3]],,[o.ConferenceError],,],stopRtsp:[,,,1,,,,,[o.ConferenceError],,],getRtspInfo:[,,,1,,["Conference.StringStringMapHelper"],,,[o.ConferenceError],,],updateRtspContent:[,,,1,,,[[3],[3]],,[o.ConferenceError],,],startNoticeMsg:[,,,1,,,[[s.NoticeInfo]],,,,],kickout:[,,,1,,,[[7]],,[o.ConferenceError],,],sendMsg:[,,,1,,,[[7],[7]],,[o.ConferenceError],,],sendVoteMsg:[,,,1,,,[[7]],,[o.ConferenceError],,],sendVoteMsg2Host:[,,,1,,,[[7]],,[o.ConferenceError],,]}),a.defineDictionary(s,"MemberRights","MemberRightsHelper","Ice.ShortHelper","Conference.ByteListHelper",!1,void 0,void 0,i.ArrayUtil.equals),s.ChangedRights=a.defineStruct((function(e,t,n){this.termId=void 0!==e?e:0,this.addedRights=void 0!==t?t:null,this.reducedRights=void 0!==n?n:null}),!0,(function(e){e.writeShort(this.termId),s.ByteListHelper.write(e,this.addedRights),s.ByteListHelper.write(e,this.reducedRights)}),(function(e){this.termId=e.readShort(),this.addedRights=s.ByteListHelper.read(e),this.reducedRights=s.ByteListHelper.read(e)}),4,!1),a.defineSequence(s,"ChangedRightsSeqHelper","Conference.ChangedRights",!1),Object.defineProperty(s,"INVITE_PREPARE",{value:0}),Object.defineProperty(s,"PSTN_CALLING",{value:1}),Object.defineProperty(s,"PSTN_RING",{value:2}),Object.defineProperty(s,"PSTN_CONNECTED",{value:3}),Object.defineProperty(s,"PSTN_HUNG",{value:4}),Object.defineProperty(s,"PSTN_NO_ANSWER",{value:5}),Object.defineProperty(s,"PSTN_REJECT",{value:6}),Object.defineProperty(s,"PSTN_CONNECT_ERR",{value:7}),Object.defineProperty(s,"PSTN_BUSY",{value:8}),Object.defineProperty(s,"AAA_ACCOUNT_NOT_EXIST",{value:100}),Object.defineProperty(s,"AAA_NO_PERMIT",{value:101}),Object.defineProperty(s,"AAA_BALANCE_NOT_ENOUGH",{value:102}),Object.defineProperty(s,"INV_SMS_FAILED",{value:2}),Object.defineProperty(s,"INV_SMS_SUCCESS",{value:1}),Object.defineProperty(s,"INV_EMAIL_FAILED",{value:2}),Object.defineProperty(s,"INV_EMAIL_SUCCESS",{value:1}),Object.defineProperty(s,"INV_EMAIL_READED",{value:3}),Object.defineProperty(s,"WDT_1V1SUBMT_MONITOR",{value:0}),Object.defineProperty(s,"WDT_1v1SUBMT_CHAT",{value:1}),s.InvitedMember=a.defineStruct((function(e,t,n){this.member=void 0!==e?e:new s.Contact,this.pstnNotice=void 0!==t&&t,this.state=void 0!==n?n:0}),!0,(function(e){s.Contact.write(e,this.member),e.writeBool(this.pstnNotice),e.writeInt(this.state)}),(function(e){this.member=s.Contact.read(e,this.member),this.pstnNotice=e.readBool(),this.state=e.readInt()}),14,!1),a.defineSequence(s,"InvitedMembersHelper","Conference.InvitedMember",!1),s.INVITE_TYPE=a.defineEnum([["TP_CALL",0],["TP_SMS",1],["TP_EMAIL",2]]),a.defineDictionary(s,"InvitedMembersDict","InvitedMembersDictHelper","Conference.INVITE_TYPE.__helper","Conference.InvitedMembersHelper",!1,void 0,void 0,i.ArrayUtil.equals),a.defineDictionary(s,"HistoryMembers","HistoryMembersHelper","Ice.ShortHelper","Conference.Member",!1,void 0,void 0,i.HashMap.compareEquals),a.defineDictionary(s,"HistoryMemberNames","HistoryMemberNamesHelper","Ice.ShortHelper","Ice.StringHelper",!1,void 0,void 0),a.defineDictionary(s,"StatusDict","StatusDictHelper","Ice.StringHelper","Ice.StringHelper",!1,void 0,void 0),a.defineDictionary(s,"BroadCastDict","BroadCastDictHelper","Ice.StringHelper","Ice.StringHelper",!1,void 0,void 0),Object.defineProperty(s,"LD_MEMBER_LOCAL",{value:1}),Object.defineProperty(s,"LD_MEMBER_VIEWER",{value:2}),Object.defineProperty(s,"LD_MEMBER_ALL",{value:3}),s.LDPrize=a.defineStruct((function(e,t){this.prizeName=void 0!==e?e:"",this.prizeCnt=void 0!==t?t:0}),!0,(function(e){e.writeString(this.prizeName),e.writeInt(this.prizeCnt)}),(function(e){this.prizeName=e.readString(),this.prizeCnt=e.readInt()}),5,!1),s.LuckyDrawCfg=a.defineStruct((function(e,t,n,i){this.memberType=void 0!==e?e:0,this.cdTime=void 0!==t?t:0,this.isAutoDraw=void 0!==n&&n,this.prizes=void 0!==i?i:new s.LDPrize}),!0,(function(e){e.writeInt(this.memberType),e.writeInt(this.cdTime),e.writeBool(this.isAutoDraw),s.LDPrize.write(e,this.prizes)}),(function(e){this.memberType=e.readInt(),this.cdTime=e.readInt(),this.isAutoDraw=e.readBool(),this.prizes=s.LDPrize.read(e,this.prizes)}),14,!1),s.LuckyDrawMember=a.defineStruct((function(e,t,n){this.name=void 0!==e?e:"",this.contact=void 0!==t?t:"",this.memberType=void 0!==n?n:0}),!0,(function(e){e.writeString(this.name),e.writeString(this.contact),e.writeInt(this.memberType)}),(function(e){this.name=e.readString(),this.contact=e.readString(),this.memberType=e.readInt()}),6,!1),a.defineSequence(s,"LuckyDrawMembersHelper","Conference.LuckyDrawMember",!1),s.LDMembersCNT=a.defineStruct((function(e,t){this.memberLocalCnt=void 0!==e?e:0,this.memberViewerCnt=void 0!==t?t:0}),!0,(function(e){e.writeInt(this.memberLocalCnt),e.writeInt(this.memberViewerCnt)}),(function(e){this.memberLocalCnt=e.readInt(),this.memberViewerCnt=e.readInt()}),8,!0),s.LuckyResult=a.defineStruct((function(e,t,n){this.prize=void 0!==e?e:new s.LDPrize,this.annouceTime=void 0!==t?t:0,this.res=void 0!==n?n:null}),!0,(function(e){s.LDPrize.write(e,this.prize),e.writeInt(this.annouceTime),s.LuckyDrawMembersHelper.write(e,this.res)}),(function(e){this.prize=s.LDPrize.read(e,this.prize),this.annouceTime=e.readInt(),this.res=s.LuckyDrawMembersHelper.read(e)}),10,!1),s.VoteState=a.defineStruct((function(e,t,n,i,r){this.id=void 0!==e?e:"",this.voteOwner=void 0!==t?t:0,this.state=void 0!==n?n:0,this.voteInfo=void 0!==i?i:"",this.memberVotes=void 0!==r?r:null}),!1,(function(e){e.writeString(this.id),e.writeShort(this.voteOwner),e.writeInt(this.state),e.writeString(this.voteInfo),s.StringStringMapHelper.write(e,this.memberVotes)}),(function(e){this.id=e.readString(),this.voteOwner=e.readShort(),this.state=e.readInt(),this.voteInfo=e.readString(),this.memberVotes=s.StringStringMapHelper.read(e)}),9,!1),s.meetingAttr=a.defineStruct((function(e,t,n){this.value=void 0!==e?e:"",this.lastModifyUserID=void 0!==t?t:"",this.lastModifyTs=void 0!==n?n:0}),!0,(function(e){e.writeString(this.value),e.writeString(this.lastModifyUserID),e.writeInt(this.lastModifyTs)}),(function(e){this.value=e.readString(),this.lastModifyUserID=e.readString(),this.lastModifyTs=e.readInt()}),6,!1),a.defineDictionary(s,"MeetingAttrsMap","MeetingAttrsMapHelper","Ice.StringHelper","Conference.meetingAttr",!1,void 0,void 0,i.HashMap.compareEquals),a.defineDictionary(s,"UserAttrsMap","UserAttrsMapHelper","Ice.StringHelper","Conference.MeetingAttrsMapHelper",!1,void 0,void 0,i.HashMap.compareEquals),a.defineSequence(s,"stringSeqHelper","Ice.StringHelper",!1),s.ConferenceSession=a.defineObject(void 0,i.Object,void 0,0,["::Conference::ConferenceSession","::Ice::Object"],-1,void 0,void 0,!1),s.ConferenceSessionPrx=a.defineProxy(i.ObjectPrx,s.ConferenceSession.ice_staticId,void 0),a.defineOperations(s.ConferenceSession,s.ConferenceSessionPrx,{keepAlive:[,,,1,,,[["Conference.StatusDictHelper"]],,[o.ConferenceError],,],exit:[,,,1,,,[[7]],,,,],setAppStatus:[,,,1,,,[[1]],,[o.ConferenceError],,],changeNickname:[,,,1,,[7],[[2],[7]],,[o.ConferenceError],,],getActiveMembers:[,,,1,,["Conference.MemberSeqHelper"],,,[o.ConferenceError],,],getContacts:[,,,1,,["Conference.ContactTreeHelper"],,,[o.ConferenceError],,],applyDemoActor:[,,,1,,,,,[o.ConferenceError],,],applyAssistantActor:[,,,1,,,,,[o.ConferenceError],,],getOption:[,,,1,,[3],,,[o.ConferenceError],,],getMyDetail:[,,,1,,[s.Contact],,,[o.ConferenceError],,],getInfo:[,,,1,,["Conference.StringStringMapHelper"],,,[o.ConferenceError],,],setAgenda:[,,,1,,,[[7]],,[o.ConferenceError],,],setSubject:[,,,1,,,[[7]],,[o.ConferenceError],,],getPSTNNumber:[,,,1,,[7],,,[o.ConferenceError],,],setPSTNNumber:[,,,1,,,[[7],[1]],,[o.ConferenceError],,],generatePIN:[,,,1,,[7],,,,,],cancelPIN:[,,,1,,,,,,,],changeMemberRights:[,,,1,,,[["Conference.ChangedRightsSeqHelper"]],,[o.ConferenceError],,],getAllMemberRights:[,,,1,,["Conference.MemberRightsHelper"],,,[o.ConferenceError],,],changeOption:[,,,1,,,[[3]],,[o.ConferenceError],,],setDemoActor:[,,,1,,,[[2]],,[o.ConferenceError],,],setHostActor:[,,,1,,,[[2],[7]],,[o.ConferenceError],,],setPSTNHostActor:[,,,1,,,[[s.ContactIdType]],,[o.ConferenceError],,],getPSTNHostActor:[,,,1,,[s.ContactIdType],,,[o.ConferenceError],,],allowDemoActor:[,,,1,,,[[2],[1]],,[o.ConferenceError],,],setAssistantActor:[,,,1,,,[[2],[1]],,[o.ConferenceError],,],getInviteMembers:[,,,1,,["Conference.InvitedMembersDictHelper"],,,[o.ConferenceError],,],getSelfInviteInfo:[,,,1,,[s.InvitedMember],,,[o.ConferenceError],,],addPSTNInvite:[,,,1,,["Conference.ContactIdSeqHelper"],[["Conference.ContactSeqHelper"],[1]],,[o.ConferenceError],,],modifyPSTNInvitee:[,,,1,,,[[s.INVITE_TYPE.__helper],[s.Contact]],,,,],smsInvite:[,,,1,,["Conference.ContactIdSeqHelper"],[["Conference.ContactSeqHelper"]],,[o.ConferenceError],,],callInvite:[,,,1,,["Conference.ContactIdSeqHelper"],[["Conference.ContactSeqHelper"],[1]],,[o.ConferenceError],,],emailInvite:[,,,1,,["Conference.ContactIdSeqHelper"],[["Conference.ContactSeqHelper"]],,[o.ConferenceError],,],removeInvitee:[,,,1,,,[[s.INVITE_TYPE.__helper],[s.Contact]],,[o.ConferenceError],,],cancelCall:[,,,1,,,[[s.ContactIdType]],,,,],callCustomerService:[,,,1,,,,,[o.ConferenceError],,],sendFeedback:[,,,1,,,[[7],[7]],,[o.ConferenceError],,],kickout:[,,,1,,,[[2]],,[o.ConferenceError],,],lockRoom:[,,,1,,,[[1]],,[o.ConferenceError],,],beginConference:[,,,1,,[s.ContactIdType],[[s.Contact]],,[o.ConferenceError],,],endConference:[,,,1,,,,,[o.ConferenceError],,],toggleRoomLock:[,,,1,,,,,[o.ConferenceError],,],broadcastMemberCount:[,,,1,,,,,[o.ConferenceError],,],getMemberCount:[,,,1,,[3],,,[o.ConferenceError],,],getBalance:[,,,1,,,,,[o.ConferenceError],,],cancelCountdown:[,,,1,,,,,[o.ConferenceError],,],getHistoryMembers:[,,,1,,["Conference.HistoryMembersHelper"],[["Ice.ShortSeqHelper"]],,[o.ConferenceError],,],getHistoryMemberNames:[,,,1,,["Conference.HistoryMemberNamesHelper"],,,[o.ConferenceError],,],cancelAutoEnd:[,,,1,,,,,[o.ConferenceError],,],netDetectResults:[,,,1,,,[[3],[1]],,[o.ConferenceError],,],getUserStatus:[,,,1,,["Conference.StringStringMapHelper"],[[2],[3]],,[o.ConferenceError],,],start1v1SubMeeting:[,,,1,,,[[2]],,[o.ConferenceError],,],stop1v1SubMeeting:[,,,1,,,[[2]],,[o.ConferenceError],,],setWDT1v1SubMeetingMode:[,,,1,,,[[3]],,,,],reportIVRStatus:[,,,1,,,[[1]],,,,],startSvrBroadcast:[,,,1,,,[[7]],,[o.ConferenceError],,],startBroadCast:[,,,1,,,,,[o.ConferenceError],,],stopBroadCast:[,,,1,,,,,[o.ConferenceError],,],getBroadCastCfg:[,,,1,,[7],,,[o.ConferenceError],,],getBroadCastUrl:[,,,1,,["Conference.BroadCastDictHelper"],,,,,],enableBroadCastPlayback:[,,,1,,,,,[o.ConferenceError],,],disableBroadCastPlayback:[,,,1,,,[[3]],,[o.ConferenceError],,],setLuckyDrawCfg:[,,,1,,,[[s.LuckyDrawCfg]],,[o.ConferenceError],,],joinLuckyDrawMembers:[,,,1,,,[["Conference.LuckyDrawMembersHelper"],[3]],,[o.ConferenceError],,],clearLuckyDrawMembers:[,,,1,,,[[3]],,[o.ConferenceError],,],queryLuckyDrawMembers:[,,,1,,["Conference.LuckyDrawMembersHelper"],[[3],[2],[3]],,,,],announceLuckyDrawResult:[,,,1,,,,,[o.ConferenceError],,],getLuckyDrawCfg:[,,,1,,[s.LuckyDrawCfg],,,[o.ConferenceError],,],getLuckyDrawMembersStatus:[,,,1,,[s.LDMembersCNT],,,[o.ConferenceError],,],startSvrRecord:[,,,1,,,[[7]],,[o.ConferenceError],,],updateSvrRecCfg:[,,,1,,,[[7]],,[o.ConferenceError],,],stopSvrRecord:[,,,1,,,,,[o.ConferenceError],,],setSvrRecordState:[,,,1,,,[[s.REC_STATE.__helper],[3]],,[o.ConferenceError],,],setSvrRecordFileState:[,,,1,,,[[7]],,,,],setAppUILocked:[,,,1,,,[[3]],,[o.ConferenceError],,],setMcuPrivTaskState:[,,,1,,,[[3]],,[o.ConferenceError],,],beginVote:[,,,1,,,[[7]],,[o.ConferenceError],,],endVote:[,,,1,,,,,[o.ConferenceError],,],publishVoteResult:[,,,1,,,[[7]],,[o.ConferenceError],,],commitVote:[,,,1,,,[[7]],,[o.ConferenceError],,],getVoteState:[,,,1,,[s.VoteState],,,[o.ConferenceError],,],terminalMsg:[,,,1,,,[[7],[7],[3],[1]],,,,],updateSCEP:[,,,1,,,[[7]],,,,],updateSDKToken:[,,,1,,[3],[[7]],,,,],getMeetingAllAttrs:[,,,1,,["Conference.MeetingAttrsMapHelper"],,,[o.ConferenceError],,],getMeetingAttrs:[,,,1,,["Conference.MeetingAttrsMapHelper"],[["Conference.stringSeqHelper"]],,[o.ConferenceError],,],setMeetingAttrs:[,,,1,,,[["Conference.StringStringMapHelper"],[7]],,[o.ConferenceError],,],addOrUpdateMeetingAttrs:[,,,1,,,[["Conference.StringStringMapHelper"],[7]],,[o.ConferenceError],,],delMeetingAttrs:[,,,1,,,[["Conference.stringSeqHelper"],[7]],,[o.ConferenceError],,],clearMeetingAttrs:[,,,1,,,[[7]],,[o.ConferenceError],,],getUserAttrs:[,,,1,,["Conference.UserAttrsMapHelper"],[["Conference.stringSeqHelper"]],,[o.ConferenceError],,],getUserAttrsWithKey:[,,,1,,["Conference.UserAttrsMapHelper"],[["Conference.stringSeqHelper"],["Conference.stringSeqHelper"]],,[o.ConferenceError],,],setUserAttrs:[,,,1,,,[[7],["Conference.StringStringMapHelper"],[7]],,[o.ConferenceError],,],addOrUpdateUserAttrs:[,,,1,,,[[7],["Conference.StringStringMapHelper"],[7]],,[o.ConferenceError],,],delUserAttrs:[,,,1,,,[[7],["Conference.stringSeqHelper"],[7]],,[o.ConferenceError],,],clearAllUserAttrs:[,,,1,,,[[7]],,[o.ConferenceError],,],clearUserAttrs:[,,,1,,,[["Conference.stringSeqHelper"],[7]],,[o.ConferenceError],,],startShare:[,,,1,,,[[7]],,[o.ConferenceError],,],stopShare:[,,,1,,,[[7]],,[o.ConferenceError],,],getWaitingMembers:[,,,1,,["Conference.WaitingMemberSeqHelper"],[[7]],,[o.ConferenceError],,],kickoutFromWaitRoom:[,,,1,,,[[7]],,[o.ConferenceError],,],acceptFromWaitRoom:[,,,1,,,[[7]],,[o.ConferenceError],,],gobackToWaitRoom:[,,,1,,,[[2]],,[o.ConferenceError],,],startCloudRecord:[,,,1,,,[[7],[7]],,,,],stopCloudRecord:[,,,1,,,[[7]],,,,],updateCloudRecord:[,,,1,,,[[7],[7]],,,,],setClodudRecordState:[,,,1,,,[[s.REC_STATE.__helper],[7]],,,,],setClodudRecordFileState:[,,,1,,,[[7]],,,,]}),Object.defineProperty(s,"SVR_NOTIFY_BALANCE_LESS",{value:1}),s.ConferenceCallback=a.defineObject(void 0,i.Object,void 0,0,["::Conference::ConferenceCallback","::Ice::Object"],-1,void 0,void 0,!1),s.ConferenceCallbackPrx=a.defineProxy(i.ObjectPrx,s.ConferenceCallback.ice_staticId,void 0),a.defineOperations(s.ConferenceCallback,s.ConferenceCallbackPrx,{entered:[,,,,,,[[s.Member]],,,,],left:[,,,,,,[[2],[2],[7],[7]],,,,],actorChanged:[,,,,,,[[2],[2],[0]],,,,],nicknameChanged:[,,,,,,[[2],[2],[7]],,,,],optionChanged:[,,,,,,[[3]],,,,],rightChanged:[,,,,,,[[s.ChangedRights]],,,,],roomStateChanged:[,,,,,,[[1]],,,,],inviteStateChanged:[,,,,,,[[s.INVITE_TYPE.__helper],[s.InvitedMember]],,,,],conferenceBegan:[,,,,,,,,,,],conferenceEnded:[,,,,,,[[s.Contact],[7]],,,,],memberCount:[,,,,,,[[3]],,,,],confirmAutoEnd:[,,,,,,[[3]],,,,],autoEndCancelled:[,,,,,,,,,,],roomKnocked:[,,,,,,[[s.Contact],[7]],,,,],agendaUpdated:[,,,,,,[[7]],,,,],subjectUpdated:[,,,,,,[[7]],,,,],notifyApplyDemo:[,,,,,,[[2]],,,,],notifyApplyRejected:[,,,,,,[[2],[2]],,,,],serverNotify:[,,,,,,[[3]],,,,],serverNotifyMsg:[,,,,,,[[7]],,,,],updateAppStatus:[,,,,,,[["Ice.ShortSeqHelper"],["Ice.ShortSeqHelper"]],,,,],notifyAssistantChanged:[,,,,,,[[2],[2],[1]],,,,],notifyNetDetectResults:[,,,,,,[[2],[3],[1]],,,,],notifyReportStatus:[,,,1,,["Conference.StringStringMapHelper"],[[2],[3]],,,,],exeCmd:[,,,1,,[7],[[7]],,,,],notifyStart1v1SubMeeting:[,,,1,,,[[2]],,[o.ConferenceError],,],notifyStop1v1SubMeeting:[,,,,,,[[2]],,,,],notifyStart1v1SubMeetingRslt:[,,,,,,[[2],[1]],,,,],setWDT1v1SubMeetingMode:[,,,,,,[[2],[3]],,,,],notifyIVRStatus:[,,,,,,[[2],[1]],,,,],notifyStartSvrBroadcast:[,,,,,,[[2],[7]],,,,],notifyStartBroadCast:[,,,,,,[[2]],,,,],notifyStopBroadCast:[,,,,,,[[2]],,,,],notifyWebViewerNum:[,,,,,,[[3]],,,,],notifyBroadCastStartPush:[,,,,,,[["Conference.BroadCastDictHelper"]],,,,],notifyBroadCastStopPush:[,,,,,,,,,,],notifyBroadCastPlayback:[,,,,,,[[7]],,,,],notifyBroadCastPlaybackStop:[,,,,,,[[7]],,,,],notifypayback:[,,,,,,,,,,],notifySwtichLiveAppElements:[,,,,,,[[3],[2]],,,,],notifyThumbUp:[,,,,,,[[3],[3],[7]],,,,],notifyLuckyDrawCfg:[,,,,,,[[s.LuckyDrawCfg]],,,,],notifyLDMembersStatus:[,,,,,,[[s.LDMembersCNT]],,,,],notifyLuckyDrawResult:[,,,,,,[[s.LuckyResult]],,,,],notifySvrRecordStateChanged:[,,,,,,[[2],[s.REC_STATE.__helper],[3]],,,,],notifySvrRecordCfgChanged:[,,,,,,[[2],[7]],,,,],notifySvrRecordFileState:[,,,,,,[[7]],,,,],notifySvrBroadcastCfgChanged:[,,,,,,[[2],[7]],,,,],notifyAppUILocked:[,,,,,,[[3]],,,,],notifyBeginVote:[,,,,,,[[2],[7],[7]],,,,],notifyEndVote:[,,,,,,[[2]],,,,],notifyPublishVoteResult:[,,,,,,[[2],[7]],,,,],notifyCommitVote:[,,,,,,[[2],[7]],,,,],notifyTerminalMsg:[,,,,,,[[7],[7],[3],[3]],,,,],notifySCEPChanged:[,,,,,,[[2],[7]],,,,],notifyMeetingAttrsChanged:[,,,,,,[["Conference.MeetingAttrsMapHelper"],["Conference.MeetingAttrsMapHelper"],["Conference.stringSeqHelper"]],,,,],notifyUserAttrsChanged:[,,,,,,[[7],["Conference.MeetingAttrsMapHelper"],["Conference.MeetingAttrsMapHelper"],["Conference.stringSeqHelper"]],,,,],notifyShareStateChanged:[,,,,,,[[7]],,,,],notifyEnterWaitingRoom:[,,,,,,[[s.WaitingMember]],,,,],notifyLeftWaitingRoom:[,,,,,,[[7],[7]],,,,],notifyJoinSubMeeting:[,,,,,,[[2],[7]],,,,],notifyClodudRecordStateChanged:[,,,,,,[[2],[7],[s.REC_STATE.__helper],[7]],,,,],notifyClodudRecordCfgChanged:[,,,,,,[[2],[7],[7]],,,,],notifyClodudRecordFileState:[,,,,,,[[7],[7]],,,,]}),n.Conference=s}(void 0!==n.g&&void 0!==n.g.process?e:void 0,void 0!==n.g&&void 0!==n.g.process?n(4986):window.Ice.__require,void 0!==n.g&&void 0!==n.g.process?t:this)},4750:function(e,t,n){e=n.nmd(e),function(e,t,n){var i=t("ice").Ice,r=(i.__M,t("Common/Exception").Common),o=t("Control/PublicTypes").Conference,s=i.Slice;o.ConferenceSessionV4=s.defineObject(void 0,i.Object,void 0,0,["::Conference::ConferenceSessionV4","::Ice::Object"],-1,void 0,void 0,!1),o.ConferenceSessionV4Prx=s.defineProxy(i.ObjectPrx,o.ConferenceSessionV4.ice_staticId,void 0),s.defineOperations(o.ConferenceSessionV4,o.ConferenceSessionV4Prx,{sendCmd:[,,,1,,,[[7],[7],[7],["Ice.ByteSeqHelper"]],[[7],["Ice.ByteSeqHelper"]],[r.ConferenceError],,]}),n.Conference=o}(void 0!==n.g&&n.g.process,void 0!==n.g&&void 0!==n.g.process?n(4986):window.Ice.__require,void 0!==n.g&&void 0!==n.g.process?t:this)},4060:function(e,t,n){e=n.nmd(e),function(e,t,n){var i=t("ice").Ice,r=i.__M,o=i.Slice,s=r.module("Conference");Object.defineProperty(s,"CT_USER",{value:1}),Object.defineProperty(s,"CT_CONTACT",{value:2}),Object.defineProperty(s,"CT_TMP",{value:3}),Object.defineProperty(s,"CT_CLIENT",{value:6}),Object.defineProperty(s,"CT_VIRTUAL",{value:7}),s.Contact=o.defineStruct((function(e,t,n,i,r,o){this.id=void 0!==e?e:0,this.type=void 0!==t?t:0,this.nickname=void 0!==n?n:"",this.email=void 0!==i?i:"",this.mobile=void 0!==r?r:"",this.confPhone=void 0!==o?o:""}),!0,(function(e){e.writeInt(this.id),e.writeByte(this.type),e.writeString(this.nickname),e.writeString(this.email),e.writeString(this.mobile),e.writeString(this.confPhone)}),(function(e){this.id=e.readInt(),this.type=e.readByte(),this.nickname=e.readString(),this.email=e.readString(),this.mobile=e.readString(),this.confPhone=e.readString()}),9,!1),s.ContactIdType=o.defineStruct((function(e,t){this.id=void 0!==e?e:0,this.type=void 0!==t?t:0}),!0,(function(e){e.writeInt(this.id),e.writeByte(this.type)}),(function(e){this.id=e.readInt(),this.type=e.readByte()}),5,!0),o.defineSequence(s,"ContactSeqHelper","Conference.Contact",!1),o.defineSequence(s,"ContactIdSeqHelper","Conference.ContactIdType",!0),o.defineDictionary(s,"ContactTree","ContactTreeHelper","Ice.StringHelper","Conference.ContactSeqHelper",!1,void 0,void 0,i.ArrayUtil.equals),n.Conference=s}(void 0!==n.g&&n.g.process,void 0!==n.g&&void 0!==n.g.process?n(4986):window.Ice.__require,void 0!==n.g&&void 0!==n.g.process?t:this)},4859:function(e,t,n){e=n.nmd(e),function(e,t,n){var i=t("ice").Ice,r=(i.__M,t("Common/Exception").Common),o=t("Control/Conference").Conference,s=i.Slice;o.IMFont=s.defineStruct((function(e,t){this.color=void 0!==e?e:0,this.size=void 0!==t?t:0}),!0,(function(e){e.writeInt(this.color),e.writeByte(this.size)}),(function(e){this.color=e.readInt(),this.size=e.readByte()}),5,!0),o.InIMMsgInfo=s.defineStruct((function(e,t,n,i,r){this.targetTermId=void 0!==e?e:0,this.targetNickname=void 0!==t?t:"",this.font=void 0!==n?n:new o.IMFont,this.msg=void 0!==i?i:"",this.sendTime=void 0!==r?r:0}),!0,(function(e){e.writeShort(this.targetTermId),e.writeString(this.targetNickname),o.IMFont.write(e,this.font),e.writeString(this.msg),e.writeInt(this.sendTime)}),(function(e){this.targetTermId=e.readShort(),this.targetNickname=e.readString(),this.font=o.IMFont.read(e,this.font),this.msg=e.readString(),this.sendTime=e.readInt()}),13,!1),o.OutIMMsgInfo=s.defineStruct((function(e,t,n,i){this.index=void 0!==e?e:0,this.srcTermId=void 0!==t?t:0,this.srcNickname=void 0!==n?n:"",this.inMsg=void 0!==i?i:new o.InIMMsgInfo}),!0,(function(e){e.writeInt(this.index),e.writeShort(this.srcTermId),e.writeString(this.srcNickname),o.InIMMsgInfo.write(e,this.inMsg)}),(function(e){this.index=e.readInt(),this.srcTermId=e.readShort(),this.srcNickname=e.readString(),this.inMsg=o.InIMMsgInfo.read(e,this.inMsg)}),20,!1),s.defineSequence(o,"outMsgListHelper","Conference.OutIMMsgInfo",!1),s.defineSequence(o,"termIDListHelper","Ice.ShortHelper",!0),o.IMCallback=s.defineObject(void 0,i.Object,void 0,0,["::Conference::IMCallback","::Ice::Object"],-1,void 0,void 0,!1),o.IMCallbackPrx=s.defineProxy(i.ObjectPrx,o.IMCallback.ice_staticId,void 0),s.defineOperations(o.IMCallback,o.IMCallbackPrx,{receiveIMMsg:[,,,,,,[[o.OutIMMsgInfo]],,,,],receiveMultiIMMsg:[,,,,,,[["Conference.outMsgListHelper"]],,,,],notifyIMForbidStatus:[,,,,,,[[2],[2],[1]],,,,],notifyClearIMMsg:[,,,,,,[[2]],,,,],notifyDeleteIMMsg:[,,,,,,[[3]],,,,]}),o.IMSession=s.defineObject(void 0,i.Object,void 0,0,["::Conference::IMSession","::Ice::Object"],-1,void 0,void 0,!1),o.IMSessionPrx=s.defineProxy(i.ObjectPrx,o.IMSession.ice_staticId,void 0),s.defineOperations(o.IMSession,o.IMSessionPrx,{getIMMsgCount:[,,,1,,[3],,,,,],getLastMsg:[,,,1,,["Conference.outMsgListHelper"],[[3]],,[r.ConferenceError],,],getLastNMsg:[,,,1,,["Conference.outMsgListHelper"],[[3],[3]],,[r.ConferenceError],,],sendIMMsg:[,,,1,,,[[o.InIMMsgInfo]],,[r.ConferenceError],,],deleteIMMsg:[,,,1,,,[[3]],,[r.ConferenceError],,],getIMForbidList:[,,,1,,["Conference.termIDListHelper"],,,[r.ConferenceError],,],setIMForbidStatus:[,,,1,,,[[2],[1]],,[r.ConferenceError],,],clearIMMsg:[,,,1,,,,,[r.ConferenceError],,],passIMMsg:[,,,1,,[1],[[3]],,[r.ConferenceError],,]}),n.Conference=o}(void 0!==n.g&&n.g.process,void 0!==n.g&&void 0!==n.g.process?n(4986):window.Ice.__require,void 0!==n.g&&void 0!==n.g.process?t:this)},2034:function(e,t,n){e=n.nmd(e),function(e,t,n){var i=t("ice").Ice,r=i.__M,o=t("Common/Exception").Common,s=i.Slice,a=r.module("Conference");a.MEDIA_STATE=s.defineEnum([["MEDIA_START",0],["MEDIA_PAUSE",1],["MEDIA_STOP",2]]),a.MediaInfo=s.defineStruct((function(e,t,n){this.termid=void 0!==e?e:0,this.state=void 0!==t?t:a.MEDIA_STATE.MEDIA_START,this.mediaName=void 0!==n?n:""}),!0,(function(e){e.writeShort(this.termid),a.MEDIA_STATE.__write(e,this.state),e.writeString(this.mediaName)}),(function(e){this.termid=e.readShort(),this.state=a.MEDIA_STATE.__read(e),this.mediaName=e.readString()}),4,!1),a.MediaCallback=s.defineObject(void 0,i.Object,void 0,0,["::Conference::MediaCallback","::Ice::Object"],-1,void 0,void 0,!1),a.MediaCallbackPrx=s.defineProxy(i.ObjectPrx,a.MediaCallback.ice_staticId,void 0),s.defineOperations(a.MediaCallback,a.MediaCallbackPrx,{notifyStartPlayMedia:[,,,,,,[[a.MediaInfo]],,,,],notifyStopPlayMedia:[,,,,,,[[2]],,,,],notifyPausePlayMedia:[,,,,,,[[2],[1]],,,,],notifyMakeIFrame:[,,,,,,,,,,],notifySubscribeMedia:[,,,,,,[[1]],,,,]}),a.MediaCtrl=s.defineObject(void 0,i.Object,void 0,0,["::Conference::MediaCtrl","::Ice::Object"],-1,void 0,void 0,!1),a.MediaCtrlPrx=s.defineProxy(i.ObjectPrx,a.MediaCtrl.ice_staticId,void 0),s.defineOperations(a.MediaCtrl,a.MediaCtrlPrx,{getMediaInfo:[,,,1,,[a.MediaInfo],,,[o.ConferenceError],,],startPlayMedia:[,,,1,,,[[7]],,[o.ConferenceError],,],stopPlayMedia:[,,,1,,,,,[o.ConferenceError],,],pausePlayMedia:[,,,1,,,[[1]],,[o.ConferenceError],,],subscribeMedia:[,,,1,,,[[1]],,[o.ConferenceError],,]}),n.Conference=a}(void 0!==n.g&&n.g.process,void 0!==n.g&&void 0!==n.g.process?n(4986):window.Ice.__require,void 0!==n.g&&void 0!==n.g.process?t:this)},270:function(e,t,n){e=n.nmd(e),function(e,t,n){var i=t("ice").Ice,r=i.__M,o=(t("Common/Exception").Common,r.require(e,["Control/PublicTypes","Control/Contact"]).Conference),s=i.Slice;Object.defineProperty(o,"ACNT_ADMIN",{value:0}),Object.defineProperty(o,"ACNT_MEETCREATOR",{value:1}),Object.defineProperty(o,"ACNT_PARTICIPANTS",{value:2}),Object.defineProperty(o,"MINFO_ALLCAMS",{value:"allCams"}),Object.defineProperty(o,"MINFO_OPENEDCAMIDS",{value:"openedCamIDs"}),Object.defineProperty(o,"MINFO_ACNTTYPE",{value:"anctType"}),Object.defineProperty(o,"MINFO_WDTXDTYPE",{value:"WDTXDType"}),Object.defineProperty(o,"WDTXDTYPE_ADMIN",{value:"1"}),Object.defineProperty(o,"WDTXDTYPE_USER",{value:"2"}),Object.defineProperty(o,"MINFO_PSTNIVR",{value:"ivr"}),Object.defineProperty(o,"PSTNIVR_YES",{value:"1"}),Object.defineProperty(o,"MINFO_YDYUSERID",{value:"ydyuserid"}),Object.defineProperty(o,"MINFO_SCEP",{value:"scep"}),Object.defineProperty(o,"MINFO_VOICECHANGETYPE",{value:"voiceChangeType"}),o.Member=s.defineStruct((function(e,t,n,i,r,s,a,c,l,d,u,h){this.termId=void 0!==e?e:0,this.bindId=void 0!==t?t:0,this.termType=void 0!==n?n:0,this.nickname=void 0!==i?i:"",this.actor=void 0!==r?r:0,this.audioStatus=void 0!==s?s:o.ASTATUS.AUNKNOWN,this.videoStatus=void 0!==a?a:o.VSTATUS.VUNKNOWN,this.bEnableVideo=void 0!==c&&c,this.rights=void 0!==l?l:null,this.contactId=void 0!==d?d:new o.ContactIdType,this.phone=void 0!==u?u:"",this.extProperty=void 0!==h?h:null}),!1,(function(e){e.writeShort(this.termId),e.writeShort(this.bindId),e.writeByte(this.termType),e.writeString(this.nickname),e.writeByte(this.actor),o.ASTATUS.__write(e,this.audioStatus),o.VSTATUS.__write(e,this.videoStatus),e.writeBool(this.bEnableVideo),o.ByteListHelper.write(e,this.rights),o.ContactIdType.write(e,this.contactId),e.writeString(this.phone),o.StringStringMapHelper.write(e,this.extProperty)}),(function(e){this.termId=e.readShort(),this.bindId=e.readShort(),this.termType=e.readByte(),this.nickname=e.readString(),this.actor=e.readByte(),this.audioStatus=o.ASTATUS.__read(e),this.videoStatus=o.VSTATUS.__read(e),this.bEnableVideo=e.readBool(),this.rights=o.ByteListHelper.read(e),this.contactId=o.ContactIdType.read(e,this.contactId),this.phone=e.readString(),this.extProperty=o.StringStringMapHelper.read(e)}),18,!1),s.defineSequence(o,"MemberSeqHelper","Conference.Member",!1),o.WaitingMember=s.defineStruct((function(e,t,n){this.pcid=void 0!==e?e:"",this.name=void 0!==t?t:"",this.extProperty=void 0!==n?n:null}),!1,(function(e){e.writeString(this.pcid),e.writeString(this.name),o.StringStringMapHelper.write(e,this.extProperty)}),(function(e){this.pcid=e.readString(),this.name=e.readString(),this.extProperty=o.StringStringMapHelper.read(e)}),3,!1),s.defineSequence(o,"WaitingMemberSeqHelper","Conference.WaitingMember",!1),n.Conference=o}(void 0!==n.g&&void 0!==n.g.process?e:void 0,void 0!==n.g&&void 0!==n.g.process?n(4986):window.Ice.__require,void 0!==n.g&&void 0!==n.g.process?t:this)},1086:function(e,t,n){e=n.nmd(e),function(e,t,n){var i=t("ice").Ice,r=i.__M,o=t("Common/Exception").Common,s=i.Slice,a=r.module("Conference");Object.defineProperty(a,"SLICE_VER",{value:"1.9"}),Object.defineProperty(a,"ANON_TERMID",{value:0}),Object.defineProperty(a,"ALL_TERMID",{value:32767}),Object.defineProperty(a,"ANON_MEMBER_ID",{value:0}),Object.defineProperty(a,"TERM_PC",{value:1}),Object.defineProperty(a,"TERM_PHONE",{value:2}),Object.defineProperty(a,"NORMAL_AT",{value:0}),Object.defineProperty(a,"DEMO_AT",{value:1}),Object.defineProperty(a,"HOST_AT",{value:2}),Object.defineProperty(a,"PSTN_HOST_AT",{value:4}),Object.defineProperty(a,"ASSISTANT_AT",{value:8}),Object.defineProperty(a,"OPT_VIDEO",{value:1}),Object.defineProperty(a,"OPT_AUTO_MUTE",{value:2}),Object.defineProperty(a,"OPT_AUTO_AUDIO",{value:4}),Object.defineProperty(a,"OPT_PSTN_CALL",{value:8}),Object.defineProperty(a,"OPT_END_WHEN_HOST_EXIT",{value:16}),Object.defineProperty(a,"OPT_ONLY_INVITE_CAN_LOGIN",{value:32}),Object.defineProperty(a,"OPT_ALLOW_PLAY_APPLAUSE",{value:64}),Object.defineProperty(a,"OPT_PLAY_ENTRANCEANDEXITTONE",{value:128}),Object.defineProperty(a,"OPT_ALLOW_MODIFY_NICKNAME",{value:256}),Object.defineProperty(a,"OPT_NOT_SEE_EACH_OTHER",{value:512}),Object.defineProperty(a,"OPT_IM_FORBID_PIC",{value:1024}),Object.defineProperty(a,"OPT_IM_FORBID_URL",{value:2048}),Object.defineProperty(a,"OPT_FORBID_OPEN_CAMERA",{value:4096}),Object.defineProperty(a,"OPT_AUTO_MUTE_HOST",{value:8192}),Object.defineProperty(a,"OPT_REVIEW_CHAT",{value:16384}),Object.defineProperty(a,"OPT_AUTO_OPEN_CAMERA",{value:32768}),Object.defineProperty(a,"OPT_MIC_USE_LOCAL",{value:65536}),Object.defineProperty(a,"OPT_CAMERA_USE_LOCAL",{value:131072}),Object.defineProperty(a,"OPT_FORBID_MARK",{value:262144}),Object.defineProperty(a,"OPT_ALLOW_SHARE",{value:524288}),Object.defineProperty(a,"OPT_SCREENSHARE_WATERMARK",{value:1048576}),Object.defineProperty(a,"OPT_START_WAITINGROOM",{value:2097152}),s.defineSequence(a,"ByteListHelper","Ice.ByteHelper",!0),s.defineDictionary(a,"StringStringMap","StringStringMapHelper","Ice.StringHelper","Ice.StringHelper",!1,void 0,void 0),a.ASTATUS=s.defineEnum([["AUNKNOWN",0],["ANULL",1],["ACLOSE",2],["AOPEN",3],["AOPENING",4]]),a.WINDOW_MODE=s.defineEnum([["VMANAGER_LOCK",0],["VSPEAKER_TRACK",1],["VPRESENTER_LOCK",2]]),a.VSTATUS=s.defineEnum([["VUNKNOWN",0],["VNULL",1],["VCLOSE",2],["VOPEN",3],["VOPENING",4]]),a.VIDEOLEVEL=s.defineEnum([["VL_HIGH_HD",0],["VL_HIGH_HDL",1],["VL_HIGH_H",2],["VL_HIGH_M",3],["VL_HIGH_L",4],["VL_MID",5],["VL_LOW",6]]),a.VideoSize=s.defineStruct((function(e,t){this.w=void 0!==e?e:0,this.h=void 0!==t?t:0}),!0,(function(e){e.writeShort(this.w),e.writeShort(this.h)}),(function(e){this.w=e.readShort(),this.h=e.readShort()}),4,!0),a.VideoQuality=s.defineStruct((function(e,t,n,i,r,o){this.vl=void 0!==e?e:a.VIDEOLEVEL.VL_HIGH_HD,this.vs=void 0!==t?t:new a.VideoSize,this.isec=void 0!==n?n:0,this.fps=void 0!==i?i:null,this.crf=void 0!==r?r:null,this.cost=void 0!==o?o:""}),!0,(function(e){a.VIDEOLEVEL.__write(e,this.vl),a.VideoSize.write(e,this.vs),e.writeByte(this.isec),a.ByteListHelper.write(e,this.fps),a.ByteListHelper.write(e,this.crf),e.writeString(this.cost)}),(function(e){this.vl=a.VIDEOLEVEL.__read(e),this.vs=a.VideoSize.read(e,this.vs),this.isec=e.readByte(),this.fps=a.ByteListHelper.read(e),this.crf=a.ByteListHelper.read(e),this.cost=e.readString()}),9,!1),a.VIDEOLAYOUTMODE=s.defineEnum([["VLO_1v1_M",0],["VLO_WALL1_M",1],["VLO_WALL2",2],["VLO_WALL4",3],["VLO_WALL5_M",4],["VLO_WALL6_M",5],["VLO_WALL9",6],["VLO_WALL13_M",7],["VLO_WALL16",8],["VLO_WALL25",9]]),Object.defineProperty(a,"MVM_1MAIN",{value:0}),Object.defineProperty(a,"MVM_1v1",{value:1}),Object.defineProperty(a,"MVM_2VIDEO",{value:2}),Object.defineProperty(a,"MVM_4VIDEO",{value:3}),Object.defineProperty(a,"MVM_6VIDEO",{value:4}),Object.defineProperty(a,"VIDEO_SS_1M",{value:0}),Object.defineProperty(a,"VIDEO_SS_5M",{value:1}),Object.defineProperty(a,"VIDEO_SS_13M",{value:2}),Object.defineProperty(a,"VIDEO_SS_2",{value:3}),Object.defineProperty(a,"VIDEO_SS_4",{value:4}),Object.defineProperty(a,"VIDEO_SS_9",{value:5}),Object.defineProperty(a,"VIDEO_SS_16",{value:6}),Object.defineProperty(a,"VIDEO_SS_25",{value:7}),Object.defineProperty(a,"VIDEO_SS_NULL",{value:255}),s.defineSequence(a,"VideoQualitySeqHelper","Conference.VideoQuality",!1),a.SYNCMODE=s.defineEnum([["SYNC_FORCE",0],["SYNC_FREE",1]]),a.TabID=s.defineStruct((function(e,t){this.termID=void 0!==e?e:0,this.localID=void 0!==t?t:0}),!0,(function(e){e.writeShort(this.termID),e.writeShort(this.localID)}),(function(e){this.termID=e.readShort(),this.localID=e.readShort()}),4,!0),s.defineSequence(a,"TabIDSeqHelper","Conference.TabID",!0),a.WBBOARD_TYPE=s.defineEnum([["WB_WHITE",0],["WB_DOC",1]]),a.WBBOARD_DOCTYPE=s.defineEnum([["WD_IMG",0],["WD_PPTANIM",1],["WD_PPT",2]]),a.WB_SCALE_TYPE=s.defineEnum([["WB_SCALE_50",0],["WB_SCALE_100",1],["WB_SCALE_150",2],["WB_SCALE_200",3],["WB_SCALE_SADP",4],["WB_SCALE_WIDTH",5]]),a.WB_ROTATE_TYPE=s.defineEnum([["WB_ROTATE_0",0],["WB_ROTATE_90",1],["WB_ROTATE_180",2],["WB_ROTATE_270",3]]),a.WhiteBoardDescribe=s.defineStruct((function(e,t,n,i,r,o,s,c,l,d,u,h,f,_,p,C){this.wID=void 0!==e?e:new a.TabID,this.wType=void 0!==t?t:a.WBBOARD_TYPE.WB_WHITE,this.docType=void 0!==n?n:a.WBBOARD_DOCTYPE.WD_IMG,this.name=void 0!==i?i:"",this.docName=void 0!==r?r:"",this.width=void 0!==o?o:0,this.height=void 0!==s?s:0,this.scaleType=void 0!==c?c:a.WB_SCALE_TYPE.WB_SCALE_50,this.rotation=void 0!==l?l:a.WB_ROTATE_TYPE.WB_ROTATE_0,this.pageCount=void 0!==d?d:0,this.curPage=void 0!==u?u:0,this.animID=void 0!==h?h:0,this.animFrames=void 0!==f?f:0,this.showThum=void 0!==_&&_,this.bAll=void 0!==p&&p,this.allowTerms=void 0!==C?C:null}),!0,(function(e){a.TabID.write(e,this.wID),a.WBBOARD_TYPE.__write(e,this.wType),a.WBBOARD_DOCTYPE.__write(e,this.docType),e.writeString(this.name),e.writeString(this.docName),e.writeInt(this.width),e.writeInt(this.height),a.WB_SCALE_TYPE.__write(e,this.scaleType),a.WB_ROTATE_TYPE.__write(e,this.rotation),e.writeInt(this.pageCount),e.writeInt(this.curPage),e.writeInt(this.animID),e.writeInt(this.animFrames),e.writeBool(this.showThum),e.writeBool(this.bAll),i.ShortSeqHelper.write(e,this.allowTerms)}),(function(e){this.wID=a.TabID.read(e,this.wID),this.wType=a.WBBOARD_TYPE.__read(e),this.docType=a.WBBOARD_DOCTYPE.__read(e),this.name=e.readString(),this.docName=e.readString(),this.width=e.readInt(),this.height=e.readInt(),this.scaleType=a.WB_SCALE_TYPE.__read(e),this.rotation=a.WB_ROTATE_TYPE.__read(e),this.pageCount=e.readInt(),this.curPage=e.readInt(),this.animID=e.readInt(),this.animFrames=e.readInt(),this.showThum=e.readBool(),this.bAll=e.readBool(),this.allowTerms=i.ShortSeqHelper.read(e)}),37,!1),Object.defineProperty(a,"SubMeetType_MainRoom",{value:"main"}),Object.defineProperty(a,"SubMeetType_WaitRoom",{value:"wait"}),a.SubMeetInfo=s.defineStruct((function(e,t,n){this.type=void 0!==e?e:"",this.id=void 0!==t?t:0,this.key=void 0!==n?n:""}),!0,(function(e){e.writeString(this.type),e.writeInt(this.id),e.writeString(this.key)}),(function(e){this.type=e.readString(),this.id=e.readInt(),this.key=e.readString()}),6,!1),s.defineSequence(a,"WhiteBoardDescribeSeqHelper","Conference.WhiteBoardDescribe",!1),a.ConfIdError=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::ConfIdError",void 0,void 0,!1,!1),a.AuthError=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::AuthError",void 0,void 0,!1,!1),a.ReenterError=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::ReenterError",void 0,void 0,!1,!1),a.RoomLockedError=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::RoomLockedError",void 0,void 0,!1,!1),a.NicknameError=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::NicknameError",void 0,void 0,!1,!1),a.NicknameDuplicatedError=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::NicknameDuplicatedError",void 0,void 0,!1,!1),a.NotPermitError=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::NotPermitError",void 0,void 0,!1,!1),a.MemberDeactivedError=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::MemberDeactivedError",void 0,void 0,!1,!1),a.MemberOverflowError=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::MemberOverflowError",void 0,void 0,!1,!1),a.ConfMemberOverflowError=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::ConfMemberOverflowError",void 0,void 0,!1,!1),a.BalanceLessError=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::BalanceLessError",void 0,void 0,!1,!1),a.KickoutSelfError=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::KickoutSelfError",void 0,void 0,!1,!1),a.ConferenceEndError=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::ConferenceEndError",void 0,void 0,!1,!1),a.ConferenceBeginError=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::ConferenceBeginError",void 0,void 0,!1,!1),a.PINError=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::PINError",void 0,void 0,!1,!1),a.FieldDuplicatedError=s.defineUserException((function(e,t,n,i,r){o.ConferenceError.call(this,e,t,r),this.name=void 0!==n?n:"",this.value=void 0!==i?i:""}),o.ConferenceError,"Conference::FieldDuplicatedError",(function(e){e.writeString(this.name),e.writeString(this.value)}),(function(e){this.name=e.readString(),this.value=e.readString()}),!1,!1),a.InviteeNotFoundError=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::InviteeNotFoundError",void 0,void 0,!1,!1),a.InviteeDuplicatedError=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::InviteeDuplicatedError",void 0,void 0,!1,!1),a.InvalidTermTypeError=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::InvalidTermTypeError",void 0,void 0,!1,!1),a.NoPSTNHostError=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::NoPSTNHostError",void 0,void 0,!1,!1),a.ConferencePrepareError=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::ConferencePrepareError",void 0,void 0,!1,!1),a.ConferenceLoginRetry=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::ConferenceLoginRetry",void 0,void 0,!1,!1),a.ResourceAllocateError=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::ResourceAllocateError",void 0,void 0,!1,!1),a.OnlyInviteeCanLogin=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::OnlyInviteeCanLogin",void 0,void 0,!1,!1),a.MemberAlreadyInMeet=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::MemberAlreadyInMeet",void 0,void 0,!1,!1),a.MemberAlreadyInCanTryVisitor=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::MemberAlreadyInCanTryVisitor",void 0,void 0,!1,!1),a.MismatchClientVersion=s.defineUserException((function(e,t,n,i){o.ConferenceError.call(this,e,t,i),this.newVer=void 0!==n?n:""}),o.ConferenceError,"Conference::MismatchClientVersion",(function(e){e.writeString(this.newVer)}),(function(e){this.newVer=e.readString()}),!1,!1),a.PeerHasBeen1v1SubMeeting=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::PeerHasBeen1v1SubMeeting",void 0,void 0,!1,!1),a.LiveStreamNotStart=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::LiveStreamNotStart",void 0,void 0,!1,!1),a.PstnHostCantLoginInWeb=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::PstnHostCantLoginInWeb",void 0,void 0,!1,!1),a.CannotBoradcast=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::CannotBoradcast",void 0,void 0,!1,!1),a.CannotInteractBoradcast=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::CannotInteractBoradcast",void 0,void 0,!1,!1),a.ConfCannotInteractBoradcast=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::ConfCannotInteractBoradcast",void 0,void 0,!1,!1),a.ContainsSensitiveWords=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::ContainsSensitiveWords",void 0,void 0,!1,!1),a.ThirdPartyLiveIsOn=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::ThirdPartyLiveIsOn",void 0,void 0,!1,!1),a.ListLiveIsOn=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::ListLiveIsOn",void 0,void 0,!1,!1),a.ClientLiveIsOn=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::ClientLiveIsOn",void 0,void 0,!1,!1),a.LuckyDrawNotExists=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::LuckyDrawNotExists",void 0,void 0,!1,!1),a.LuckyDrawCfgFails=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::LuckyDrawCfgFails",void 0,void 0,!1,!1),a.JoinLuckyDrawFails=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::JoinLuckyDrawFails",void 0,void 0,!1,!1),a.AnnouceLuckyDrawFails=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::AnnouceLuckyDrawFails",void 0,void 0,!1,!1),a.AnnouceLuckyDrawNoMember=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::AnnouceLuckyDrawNoMember",void 0,void 0,!1,!1),a.SeviceNotEnabled=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::SeviceNotEnabled",void 0,void 0,!1,!1),a.SrvRecordStarted=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::SrvRecordStarted",void 0,void 0,!1,!1),a.NoResourceForMIC=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::NoResourceForMIC",void 0,void 0,!1,!1),a.StartRecordError=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::StartRecordError",void 0,void 0,!1,!1),a.PlayBackGroundMusicFail=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::PlayBackGroundMusicFail",void 0,void 0,!1,!1),a.SameTimeStartMediaError=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::SameTimeStartMediaError",void 0,void 0,!1,!1),a.lockQuesError=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::lockQuesError",void 0,void 0,!1,!1),a.delQuesError=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::delQuesError",void 0,void 0,!1,!1),a.quesNotExistError=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::quesNotExistError",void 0,void 0,!1,!1),a.modifyQuesTypeError=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::modifyQuesTypeError",void 0,void 0,!1,!1),a.AlreadyRollCallError=s.defineUserException((function(e,t,n,i){o.ConferenceError.call(this,e,t,i),this.rollCaller=void 0!==n?n:0}),o.ConferenceError,"Conference::AlreadyRollCallError",(function(e){e.writeShort(this.rollCaller)}),(function(e){this.rollCaller=e.readShort()}),!1,!1),a.AlreadySharedException=s.defineUserException((function(e,t,n,i){o.ConferenceError.call(this,e,t,i),this.sharer=void 0!==n?n:0}),o.ConferenceError,"Conference::AlreadySharedException",(function(e){e.writeShort(this.sharer)}),(function(e){this.sharer=e.readShort()}),!1,!1),a.WBMaxError=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::WBMaxError",void 0,void 0,!1,!1),a.WBNotExistError=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::WBNotExistError",void 0,void 0,!1,!1),a.WBElementNoExistError=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::WBElementNoExistError",void 0,void 0,!1,!1),a.ExceedTheCapacityLimit=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::ExceedTheCapacityLimit",void 0,void 0,!1,!1),a.ConferenceBusy=s.defineUserException((function(e,t,n,i){o.ConferenceError.call(this,e,t,i),this.retry_delay=void 0!==n?n:0}),o.ConferenceError,"Conference::ConferenceBusy",(function(e){e.writeInt(this.retry_delay)}),(function(e){this.retry_delay=e.readInt()}),!1,!1),a.EnterWaitingRoom=s.defineUserException((function(e,t,n,i){o.ConferenceError.call(this,e,t,i),this.subMeetInfo=void 0!==n?n:""}),o.ConferenceError,"Conference::EnterWaitingRoom",(function(e){e.writeString(this.subMeetInfo)}),(function(e){this.subMeetInfo=e.readString()}),!1,!1),a.NosuchPersonInWaitingRoom=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::NosuchPersonInWaitingRoom",void 0,void 0,!1,!1),Object.defineProperty(a,"SET_PSTN_NUM",{value:1}),Object.defineProperty(a,"CALLED_PSTN_NUM",{value:2}),Object.defineProperty(a,"BIND_PSTN_NUM",{value:4}),s.defineDictionary(a,"ModuleDict","ModuleDictHelper","Ice.StringHelper","Ice.ObjectPrx",!1,void 0,void 0),Object.defineProperty(a,"CLIENT_SLICE_VER",{value:"slice_ver"}),Object.defineProperty(a,"CLINET_PCID",{value:"client_pcid"}),Object.defineProperty(a,"CLINET_MACADDR",{value:"client_macaddr"}),Object.defineProperty(a,"CLINET_LANGUAGE",{value:"client_lang"}),Object.defineProperty(a,"CLINET_VER",{value:"client_ver"}),Object.defineProperty(a,"CLINET_SDK_VER",{value:"sdk_ver"}),Object.defineProperty(a,"CLINET_H5SDK_VER",{value:"h5sdk_ver"}),Object.defineProperty(a,"CLINET_ISWIFI",{value:"client_iswifi"}),Object.defineProperty(a,"CLINET_PLATFORM",{value:"client_platform"}),Object.defineProperty(a,"CLINET_PRODUCTTYPE",{value:"client_pdType"}),Object.defineProperty(a,"CLINET_DEVICETYPE",{value:"client_device"}),Object.defineProperty(a,"CLIENT_BRIDGETYPE",{value:"bridgeType"}),Object.defineProperty(a,"CLIENT_INVITECODE",{value:"invite_code"}),Object.defineProperty(a,"CLIENT_PHONENUM",{value:"phone_num"}),Object.defineProperty(a,"CLIENT_ISCUSTOMERSERVICE",{value:"is_cs"}),Object.defineProperty(a,"CLIENT_PRIV_ID",{value:"priv_id"}),Object.defineProperty(a,"CLIETN_PRIV_DAT",{value:"priv_dat"}),Object.defineProperty(a,"CLIETN_PRIV_ROLE",{value:"priv_role"}),Object.defineProperty(a,"CLINET_LOGIN_TIMESTAMP",{value:"client_time"}),Object.defineProperty(a,"CLINET_IS_WEB_VIEWER",{value:"webview"}),Object.defineProperty(a,"CLINET_LIVEAUDIO",{value:"liveAudio"}),Object.defineProperty(a,"CLINET_OPENID",{value:"openId"}),Object.defineProperty(a,"CLIENT_ACODEC",{value:"acodec"}),Object.defineProperty(a,"CLIENT_LIVE_TYPE",{value:"livetype"}),Object.defineProperty(a,"CLIENT_LIVE_MOBILE",{value:"livemobile"}),Object.defineProperty(a,"CLINET_BROWSER_INFO",{value:"browser"}),Object.defineProperty(a,"CLINET_VP8_SUPPORT",{value:"vp8"}),Object.defineProperty(a,"CLINET_WEBRTC_CODECS",{value:"__Rtc.rtc_codecs"}),Object.defineProperty(a,"CLIENT_TIME_OUT",{value:"time_out"}),Object.defineProperty(a,"CLINET_SUPPORT_NEWCONFID",{value:"spt_newconf"}),Object.defineProperty(a,"CLIENT_SDK_USRTOKEN",{value:"token"}),Object.defineProperty(a,"CLIENT_MCUID",{value:"mcuID"}),Object.defineProperty(a,"CLIENT_VER",{value:"client_ver"}),Object.defineProperty(a,"CLIENT_SIP_VIDEO_REENCODE",{value:"video_reencode"}),Object.defineProperty(a,"CLIENT_PROJECT_CODE",{value:"pjcode"}),Object.defineProperty(a,"CLIENT_PROJECT_FOR",{value:"pjfor"}),Object.defineProperty(a,"CLIENT_SUPPORT_DATA_CENTER",{value:"dcenter_enable"}),Object.defineProperty(a,"CLIENT_MCU_SESSION_ID",{value:"mcu_session_id"}),Object.defineProperty(a,"CLIENT_SDK_TYPE",{value:"sdktype"}),Object.defineProperty(a,"CLIENT_SDK_TYPE_VIDEO",{value:"video"}),Object.defineProperty(a,"CLIENT_SDK_TYPE_LIVE",{value:"live"}),Object.defineProperty(a,"PLATFORMTYPE_WIN32",{value:"win32"}),Object.defineProperty(a,"PLATFORMTYPE_IOS",{value:"ios"}),Object.defineProperty(a,"PLATFORMTYPE_ANDROID",{value:"android"}),Object.defineProperty(a,"PLATFORMTYPE_LINUX",{value:"linux"}),Object.defineProperty(a,"PLATFORMTYPE_MAC",{value:"mac"}),Object.defineProperty(a,"PDTYPE_TVNETMEETING",{value:"net_tv"}),Object.defineProperty(a,"PDTYPE_NETMEETING",{value:"net"}),Object.defineProperty(a,"PDTYPE_PSTNMEETING",{value:"pstn"}),Object.defineProperty(a,"PDTYPE_LIVE",{value:"live"}),Object.defineProperty(a,"PDTYPE_MCU",{value:"mcu"}),Object.defineProperty(a,"DEVICETYPE_PC",{value:"pc"}),Object.defineProperty(a,"DEVICETYPE_PAD",{value:"pad"}),Object.defineProperty(a,"DEVICETYPE_PHONE",{value:"phone"}),Object.defineProperty(a,"DEVICETYPE_FLASH",{value:"flash"}),Object.defineProperty(a,"DEVICETYPE_MCU",{value:"mcu"}),Object.defineProperty(a,"DEVICETYPE_BOX",{value:"box"}),Object.defineProperty(a,"DEVICETYPE_SIPGATEWAY",{value:"sipgateway"}),Object.defineProperty(a,"DEVICETYPE_WEBRTC",{value:"webrtc"}),Object.defineProperty(a,"DEVICETYPE_WXMINI",{value:"wxmini"}),Object.defineProperty(a,"BRIDGETYPE_MONITOR",{value:"monitor"}),Object.defineProperty(a,"BRIDGETYPE_MEETING",{value:"meeting"}),Object.defineProperty(a,"MEETINGMODE_NORMAL",{value:"normal"}),Object.defineProperty(a,"MEETINGMODE_CONSULTATION",{value:"consultation"}),Object.defineProperty(a,"ACODEC_ISAC",{value:"isac"}),Object.defineProperty(a,"LIVETYPE_WEIXIN",{value:"0"}),Object.defineProperty(a,"LIVETYPE_USER",{value:"1"}),Object.defineProperty(a,"LIVETYPE_OTHER",{value:"2"}),a.LoginRequest=s.defineStruct((function(e,t,n,i,r,o,s,a,c,l,d,u){this.confId=void 0!==e?e:0,this.confKey=void 0!==t?t:"",this.termId=void 0!==n?n:0,this.memberId=void 0!==i?i:0,this.memberType=void 0!==r?r:0,this.nickname=void 0!==o?o:"",this.callbacks=void 0!==s?s:null,this.accessNo=void 0!==a?a:0,this.publicIP=void 0!==c?c:"",this.localIP=void 0!==l?l:"",this.localMask=void 0!==d?d:"",this.extProperty=void 0!==u?u:null}),!1,(function(e){e.writeInt(this.confId),e.writeString(this.confKey),e.writeShort(this.termId),e.writeInt(this.memberId),e.writeByte(this.memberType),e.writeString(this.nickname),a.ModuleDictHelper.write(e,this.callbacks),e.writeInt(this.accessNo),e.writeString(this.publicIP),e.writeString(this.localIP),e.writeString(this.localMask),a.StringStringMapHelper.write(e,this.extProperty)}),(function(e){this.confId=e.readInt(),this.confKey=e.readString(),this.termId=e.readShort(),this.memberId=e.readInt(),this.memberType=e.readByte(),this.nickname=e.readString(),this.callbacks=a.ModuleDictHelper.read(e),this.accessNo=e.readInt(),this.publicIP=e.readString(),this.localIP=e.readString(),this.localMask=e.readString(),this.extProperty=a.StringStringMapHelper.read(e)}),22,!1),a.FileServerInfo=s.defineStruct((function(e,t){this.fsProxy=void 0!==e?e:"",this.key=void 0!==t?t:""}),!0,(function(e){e.writeString(this.fsProxy),e.writeString(this.key)}),(function(e){this.fsProxy=e.readString(),this.key=e.readString()}),2,!1),a.REC_STATE=s.defineEnum([["NO_RECORD",0],["STARTING",1],["RECORDING",2],["PAUSED",3],["STOPPING",4]]),s.defineSequence(a,"FileServerSeqHelper","Conference.FileServerInfo",!1),Object.defineProperty(a,"INVALID_COUNTDOWN",{value:-1}),Object.defineProperty(a,"CONFINFO_HOSTPWD",{value:"hostpwd"}),Object.defineProperty(a,"CONFINFO_CONFPWD",{value:"confpwd"}),Object.defineProperty(a,"CONFINFO_SCHEDULETIME",{value:"scheduletime"}),Object.defineProperty(a,"CONFINFO_SUBJECT",{value:"subject"}),Object.defineProperty(a,"CONFINFO_URL",{value:"url"}),Object.defineProperty(a,"CONFINFO_URLPIC",{value:"urlpic"}),Object.defineProperty(a,"CONFINFO_PSTNNUM",{value:"pstnnum"}),Object.defineProperty(a,"CONFINFO_PSTNPWD",{value:"pstnpwd"}),Object.defineProperty(a,"CONFINFO_AGENDA",{value:"agenda"}),Object.defineProperty(a,"CONFINFO_SUPPORT_VLIST",{value:"vlist"}),Object.defineProperty(a,"CONFINFO_ROOM_SIZETYPE",{value:"roomsizetype"}),Object.defineProperty(a,"CONFINFO_ISTEST",{value:"istest"}),Object.defineProperty(a,"CONFINFO_ISDEMO",{value:"isdemo"}),Object.defineProperty(a,"CONFINFO_HOTLINE",{value:"hotline"}),Object.defineProperty(a,"CONFINFO_ISFIX",{value:"isfixed"}),Object.defineProperty(a,"CONFINFO_HD",{value:"hd"}),Object.defineProperty(a,"CONFINFO_PSTNNOTICE",{value:"pstnnotice"}),Object.defineProperty(a,"CONFINFO_FUNC_VIDEOWALL",{value:"videowall"}),Object.defineProperty(a,"CONFINFO_VIDEO_ENABLE",{value:"video"}),Object.defineProperty(a,"CONFINFO_SHOW_MAIN_AD",{value:"main_ad"}),Object.defineProperty(a,"CONFINFO_VIDEO_MONITOR",{value:"vmonitor"}),Object.defineProperty(a,"CONFINFO_USE_PHONE",{value:"use_phone"}),Object.defineProperty(a,"CONFINFO_INVITE",{value:"invite"}),Object.defineProperty(a,"CONFINFO_VIDEO_LUBO",{value:"lubo"}),Object.defineProperty(a,"CONFINFO_MEDIA_PLAY",{value:"media_play"}),Object.defineProperty(a,"CONFINFO_MULTI_CAMERAS",{value:"multiple_cameras"}),Object.defineProperty(a,"CONFINFO_SUPPORT_BRIDGE",{value:"bridge"}),Object.defineProperty(a,"CONFINFO_SCREEN_SHARE",{value:"screen_share"}),Object.defineProperty(a,"CONFINFO_DOCUMENT_SHOW",{value:"document_show"}),Object.defineProperty(a,"CONFINFO_WHITE_BOARD",{value:"whiteboard"}),Object.defineProperty(a,"CONFINFO_ANSWER_QUESTION",{value:"answer_question"}),Object.defineProperty(a,"CONFINFO_FILE_SHARE",{value:"file_share"}),Object.defineProperty(a,"CONFINFO_MEETING_INFO",{value:"meeting_info"}),Object.defineProperty(a,"CONFINFO_OMNIDIRECTIONAL_MIC",{value:"omnidirectional_mic"}),Object.defineProperty(a,"CONFINFO_MEET_MODE",{value:"meeting_mode"}),Object.defineProperty(a,"CONFINFO_USER_ROLE",{value:"user_role"}),Object.defineProperty(a,"CONFINFO_COMPANY_ID",{value:"compid"}),Object.defineProperty(a,"CONFINFO_USER_NETDISK_ENABLE",{value:"user_net_disk"}),Object.defineProperty(a,"CONFINFO_COMP_NETDISK_ENABLE",{value:"comp_net_disk"}),Object.defineProperty(a,"CONFINFO_FREECONF",{value:"freeconf"}),Object.defineProperty(a,"CONFINFO_MAINVIDEO_SHOWMODE",{value:"main_svm"}),Object.defineProperty(a,"CONFINFO_IS_BROADCATING",{value:"rtmpliveon"}),Object.defineProperty(a,"CONFINFO_WEBVIEWER_NUM",{value:"webviewer_num"}),Object.defineProperty(a,"CONFINFO_WEBVIEWER_RIGHTS",{value:"webviewer_rights"}),Object.defineProperty(a,"CONFINFO_WEBVIEWER_QUES",{value:"webviewer_ques"}),Object.defineProperty(a,"CONFINFO_BROADCAST_DURATION",{value:"rtmplivetm"}),Object.defineProperty(a,"CONFINFO_WB_CONTAINERSIZE",{value:"wb_container"}),Object.defineProperty(a,"CONFINFO_H264_PROFILE",{value:"h264profile"}),Object.defineProperty(a,"CONFINFO_H264_NOCABAC",{value:"h264nocabac"}),Object.defineProperty(a,"CONFINFO_H264_SLICEMAXSZ",{value:"h264slicemaxsz"}),Object.defineProperty(a,"CONFINFO_H264_IFRAME",{value:"h264iframe"}),Object.defineProperty(a,"CONFINFO_H264_NOHARDCODING",{value:"h264nohardcoding"}),Object.defineProperty(a,"CONFINFO_SCREEN_ENCTYPE",{value:"screenenctype"}),Object.defineProperty(a,"CONFINFO_HIFPS_VALUE",{value:"hi_fps"}),Object.defineProperty(a,"CONFINFO_H264_PICMAXSIZE",{value:"h264picmaxsize"}),Object.defineProperty(a,"CONFINFO_SUPPORT_SIP",{value:"is_sip"}),Object.defineProperty(a,"CONFINFO_MS_MODE",{value:"ms_mode"}),Object.defineProperty(a,"CONFINFO_H264_ENCFIXEDSZ",{value:"h264encfixedsz"}),Object.defineProperty(a,"CONFINFO_HD_FOR_MOBILE",{value:"hd_for_mobile"}),Object.defineProperty(a,"CONFINFO_LOG_LEVEL",{value:"log_level"}),Object.defineProperty(a,"CONFINFO_LIVE_CONFIG",{value:"livecfg"}),Object.defineProperty(a,"CONFINFO_SRV_RECORDSTATE",{value:"srv_record_state"}),Object.defineProperty(a,"CONFINFO_SRV_RECORDCFG",{value:"srv_record_cfg"}),Object.defineProperty(a,"CONFINFO_SVR_RECORDOWNER",{value:"svr_record_owner"}),Object.defineProperty(a,"CONFINFO_VIDEO_VPU_SUPPORT_ENC",{value:"vpu_support_enc"}),Object.defineProperty(a,"CONFINFO_VIDEO_VPU_SUPPORT_DEC",{value:"vpu_supportd_dec"}),Object.defineProperty(a,"CONFINFO_VIDEO_VPU_UNSUPPORT_ENC_DEV",{value:"vpu_unsupport_enc_dev"}),Object.defineProperty(a,"CONFINFO_VIDEO_VPU_UNSUPPORT_DEC_DEV",{value:"vpu_unsupport_dec_dev"}),Object.defineProperty(a,"CONFINFO_VIDEOLIST_MODE",{value:"vlistmode"}),Object.defineProperty(a,"CONFINFO_VIDEOLIST_CAMS",{value:"vlistcams"}),Object.defineProperty(a,"CONFINFO_MAX_VIDEOUIS",{value:"maxvuis"}),Object.defineProperty(a,"CONFINFO_VIDEOWALL_LAYOUT",{value:"vwalllo"}),Object.defineProperty(a,"CONFINFO_UI_LOCKSTATUS",{value:"uilock"}),Object.defineProperty(a,"CONFINFO_SRV_RECORD",{value:"srv_record"}),Object.defineProperty(a,"CONFINFO_SHOW_LIVE",{value:"show_live"}),Object.defineProperty(a,"CONFINFO_SIGNIN",{value:"signinurl"}),Object.defineProperty(a,"CONFINFO_EXTTAB_URL",{value:"exttaburl"}),Object.defineProperty(a,"CONFINFO_PRIVTAB_INFO",{value:"privtabinfo"}),Object.defineProperty(a,"CONFINFO_PRIVATE_FILE_SERVER",{value:"privfs"}),Object.defineProperty(a,"CONFINFO_DOC_BACKUP_COMP_NDD",{value:"doc_backup_comp_ndd"}),Object.defineProperty(a,"CONFINFO_OEMKEY",{value:"oem_key"}),Object.defineProperty(a,"CONFINFO_VIDEOCUSTOMBPS",{value:"video_custom_bps"}),Object.defineProperty(a,"CONFINFO_CONFIRM_AUTOEND_TYPE",{value:"autoend"}),Object.defineProperty(a,"CONFINFO_RECORD_ALL_MEMBER",{value:"record_all"}),Object.defineProperty(a,"CONFINFO_ACCESS_KEEPALIVE_TIME",{value:"kp_time_a"}),Object.defineProperty(a,"CONFINFO_CONTROL_KEEPALIVE_TIME",{value:"kp_time_c"}),Object.defineProperty(a,"CONFINFO_NEW_CONFID",{value:"new_confid"}),Object.defineProperty(a,"CONFINFO_FS_HTTP",{value:"fs_http"}),Object.defineProperty(a,"CONFINFO_SHARE_CFG",{value:"share_cfg"}),Object.defineProperty(a,"CONFINFO_MCU_MAX_VIDEOUIS",{value:"mcu_maxvuis"}),Object.defineProperty(a,"CONFINFO_MEETING_CHECK",{value:"meeting_check"}),Object.defineProperty(a,"CONFINFO_DATA_CENTER_PROXY",{value:"dcenter_prxy"}),Object.defineProperty(a,"CONFINFO_DATA_CENTER_KEY",{value:"dcenter_key"}),Object.defineProperty(a,"CONFINFO_MCU_RECORD_ID",{value:"mcu_recid"}),Object.defineProperty(a,"CONFINFO_IS_SDKMEETING",{value:"is_sdkmeeting"}),Object.defineProperty(a,"CONF_END_REASON_UNKOWN",{value:"unkown"}),Object.defineProperty(a,"CONF_END_REASON_TERM",{value:"term"}),Object.defineProperty(a,"CONF_END_REASON_AUTO",{value:"auto"}),Object.defineProperty(a,"CONF_END_REASON_WEB",{value:"web"}),Object.defineProperty(a,"CONF_END_REASON_AAA",{value:"aaa"}),Object.defineProperty(a,"CONF_END_REASON_HOST_OFFLINE",{value:"host_offline"}),Object.defineProperty(a,"LEFT_REASON_KICK",{value:"kick"}),Object.defineProperty(a,"LEFT_REASON_REFRESH",{value:"refresh"}),Object.defineProperty(a,"LEFT_REASON_EXTRUDE",{value:"extrude"}),Object.defineProperty(a,"LEFT_REASON_TIMEOUT",{value:"timeout"}),Object.defineProperty(a,"LEFT_REASON_SEAT",{value:"seat"}),Object.defineProperty(a,"LEFT_REASON_EXIT",{value:"exit"}),Object.defineProperty(a,"LEFT_REASON_BUSY",{value:"busy"}),Object.defineProperty(a,"LEFT_REASON_BALANCE_LESS",{value:"balance_less"}),Object.defineProperty(a,"LEFT_REASON_TOKENTIMEOUT",{value:"token_timeout"}),Object.defineProperty(a,"LEFT_REASON_SUBMEETING",{value:"sub_meeting"}),Object.defineProperty(a,"KNOCKED_REASON_ROOMLOCKED",{value:"room_locked"}),Object.defineProperty(a,"KNOCKED_REASON_SEATLESS",{value:"seat_less"}),Object.defineProperty(a,"KNOCKED_REASON_BALANCELESS",{value:"balance_less"}),Object.defineProperty(a,"BOARDCAST_RTMP",{value:"rtmp"}),Object.defineProperty(a,"BOARDCAST_RTMP2",{value:"rtmp2"}),Object.defineProperty(a,"BOARDCAST_SCREEN_RTMP",{value:"rtmp_screen"}),Object.defineProperty(a,"BOARDCAST_HLS",{value:"hls"}),Object.defineProperty(a,"BOARDCAST_HLS2",{value:"hls2"}),Object.defineProperty(a,"BOARDCAST_SCREEN_HLS",{value:"hls_screen"}),Object.defineProperty(a,"BROADCAST_FLV",{value:"flv"}),n.Conference=a}(void 0!==n.g&&n.g.process,void 0!==n.g&&void 0!==n.g.process?n(4986):window.Ice.__require,void 0!==n.g&&void 0!==n.g.process?t:this)},8036:function(e,t,n){e=n.nmd(e),function(e,t,n){var i=t("ice").Ice,r=i.__M,o=t("Common/Exception").Common,s=r.require(e,["Control/Conference","Control/PublicTypes"]).Conference,a=i.Slice;s.QuesType=a.defineStruct((function(e,t,n){this.typeID=void 0!==e?e:"",this.name=void 0!==t?t:"",this.deleted=void 0!==n&&n}),!0,(function(e){e.writeString(this.typeID),e.writeString(this.name),e.writeBool(this.deleted)}),(function(e){this.typeID=e.readString(),this.name=e.readString(),this.deleted=e.readBool()}),3,!1),s.QuesState=a.defineEnum([["Question_NotReply",0],["Question_Replying",1],["Question_NotPublic",2],["Question_Publiced",3],["Question_Deleted",4]]),s.QuesAsk=a.defineStruct((function(e,t,n,i,r){this.typeID=void 0!==e?e:"",this.asktime=void 0!==t?t:0,this.termID=void 0!==n?n:0,this.content=void 0!==i?i:"",this.nickname=void 0!==r?r:""}),!0,(function(e){e.writeString(this.typeID),e.writeInt(this.asktime),e.writeShort(this.termID),e.writeString(this.content),e.writeString(this.nickname)}),(function(e){this.typeID=e.readString(),this.asktime=e.readInt(),this.termID=e.readShort(),this.content=e.readString(),this.nickname=e.readString()}),9,!1),s.QuesDeal=a.defineStruct((function(e,t,n,i,r,o,a,c){this.state=void 0!==e?e:s.QuesState.Question_NotReply,this.replyCon=void 0!==t?t:"",this.replyTermId=void 0!==n?n:0,this.replyTime=void 0!==i?i:0,this.publishTermID=void 0!==r?r:0,this.publishTime=void 0!==o?o:0,this.delTermID=void 0!==a?a:0,this.delTime=void 0!==c?c:0}),!0,(function(e){s.QuesState.__write(e,this.state),e.writeString(this.replyCon),e.writeShort(this.replyTermId),e.writeInt(this.replyTime),e.writeShort(this.publishTermID),e.writeInt(this.publishTime),e.writeShort(this.delTermID),e.writeInt(this.delTime)}),(function(e){this.state=s.QuesState.__read(e),this.replyCon=e.readString(),this.replyTermId=e.readShort(),this.replyTime=e.readInt(),this.publishTermID=e.readShort(),this.publishTime=e.readInt(),this.delTermID=e.readShort(),this.delTime=e.readInt()}),20,!1),s.QuesInf=a.defineStruct((function(e,t,n){this.quesID=void 0!==e?e:0,this.ask=void 0!==t?t:new s.QuesAsk,this.deal=void 0!==n?n:new s.QuesDeal}),!0,(function(e){e.writeInt(this.quesID),s.QuesAsk.write(e,this.ask),s.QuesDeal.write(e,this.deal)}),(function(e){this.quesID=e.readInt(),this.ask=s.QuesAsk.read(e,this.ask),this.deal=s.QuesDeal.read(e,this.deal)}),33,!1),a.defineSequence(s,"QuesListHelper","Conference.QuesInf",!1),a.defineSequence(s,"QuesTypeListHelper","Conference.QuesType",!1),s.AnsQueCallback=a.defineObject(void 0,i.Object,void 0,0,["::Conference::AnsQueCallback","::Ice::Object"],-1,void 0,void 0,!1),s.AnsQueCallbackPrx=a.defineProxy(i.ObjectPrx,s.AnsQueCallback.ice_staticId,void 0),a.defineOperations(s.AnsQueCallback,s.AnsQueCallbackPrx,{askQuesNotify:[,,,,,,[[3],[s.QuesAsk]],,[o.ConferenceError],,],lockQuesNotify:[,,,,,,[[3],[s.QuesDeal]],,[o.ConferenceError],,],replyQuesNotify:[,,,,,,[[3],[s.QuesDeal]],,[o.ConferenceError],,],modifyQuesNotify:[,,,,,,[[3],[s.QuesDeal]],,[o.ConferenceError],,],delQuesNotify:[,,,,,,[[3],[2]],,[o.ConferenceError],,],delAllQuesNotify:[,,,,,,[[2]],,[o.ConferenceError],,],publicQuesNotify:[,,,,,,[[3],[1],[2]],,[o.ConferenceError],,],quesTypeChangeNotify:[,,,,,,[[3],[7]],,[o.ConferenceError],,],modifyQuesTypeNotify:[,,,,,,[[2],["Conference.QuesTypeListHelper"]],,[o.ConferenceError],,],setBroadCastQuesNotify:[,,,,,,[[1]],,[o.ConferenceError],,]}),s.AnsQuesCtrl=a.defineObject(void 0,i.Object,void 0,0,["::Conference::AnsQuesCtrl","::Ice::Object"],-1,void 0,void 0,!1),s.AnsQuesCtrlPrx=a.defineProxy(i.ObjectPrx,s.AnsQuesCtrl.ice_staticId,void 0),a.defineOperations(s.AnsQuesCtrl,s.AnsQuesCtrlPrx,{askQues:[,,,1,,[3],[[s.QuesAsk]],,[o.ConferenceError],,],lockQues:[,,,1,,,[[3],[1]],,[o.ConferenceError],,],replyQues:[,,,1,,,[[3],[s.QuesDeal]],,[o.ConferenceError],,],publicQues:[,,,1,,,[[3],[1]],,[o.ConferenceError],,],modifyQues:[,,,1,,,[[3],[s.QuesDeal]],,[o.ConferenceError],,],delQues:[,,,1,,,[[3]],,[o.ConferenceError],,],delAllQues:[,,,1,,,,,[o.ConferenceError],,],quesTypeChange:[,,,1,,,[[3],[7]],,[o.ConferenceError],,],getQuesList:[,,,1,,["Conference.QuesListHelper"],,,[o.ConferenceError],,],getQuesType:[,,,1,,["Conference.QuesTypeListHelper"],,,[o.ConferenceError],,],modifyQuesType:[,,,1,,,[["Conference.QuesTypeListHelper"]],,[o.ConferenceError],,],setBoradCastQues:[,,,1,,,[[1]],,[o.ConferenceError],,]}),n.Conference=s}(void 0!==n.g&&void 0!==n.g.process?e:void 0,void 0!==n.g&&void 0!==n.g.process?n(4986):window.Ice.__require,void 0!==n.g&&void 0!==n.g.process?t:this)},4870:function(e,t,n){e=n.nmd(e),function(e,t,n){var i=t("ice").Ice,r=i.__M,o=(i.Slice,r.module("Conference"));Object.defineProperty(o,"PUBLIC_CHAT",{value:1}),Object.defineProperty(o,"PRIVATE_HOST_CHAT",{value:2}),Object.defineProperty(o,"PRIVATE_DEMO_CHAT",{value:3}),Object.defineProperty(o,"PRIVATE_OTHER_CHAT",{value:4}),Object.defineProperty(o,"SCREEN_RECORD",{value:11}),Object.defineProperty(o,"FILE_SHARE",{value:5}),Object.defineProperty(o,"WB_VIEW_PAGE",{value:9}),Object.defineProperty(o,"WB_VIEW_ANY",{value:10}),Object.defineProperty(o,"DEMO_RIGHT_MANAGE",{value:50}),Object.defineProperty(o,"DEMO_ACTOR_MANAGE",{value:51}),Object.defineProperty(o,"OPTION_MANAGE",{value:60}),Object.defineProperty(o,"HOST_ACTOR_MANAGE",{value:70}),Object.defineProperty(o,"LOCK_RIGHT",{value:71}),Object.defineProperty(o,"KICKOUT_RIGHT",{value:72}),Object.defineProperty(o,"END_CONFERENCE_RIGHT",{value:73}),Object.defineProperty(o,"MEMBER_INFO_MANAGE",{value:74}),Object.defineProperty(o,"INVITE_RIGHT",{value:75}),Object.defineProperty(o,"BEGIN_CONFERENCE_RIGHT",{value:76}),Object.defineProperty(o,"UPLOAD_FILE",{value:80}),Object.defineProperty(o,"DEL_OTHERS_FILE",{value:81}),Object.defineProperty(o,"START_NOTICE",{value:85}),Object.defineProperty(o,"STOP_NOTICE",{value:86}),Object.defineProperty(o,"START_ROLL_CALL",{value:90}),Object.defineProperty(o,"STOP_ROLL_CALL",{value:91}),Object.defineProperty(o,"OPEN_OTHERS_MIC",{value:95}),Object.defineProperty(o,"CLOSE_OTHERS_MIC",{value:96}),Object.defineProperty(o,"ALL_SILENCE",{value:97}),Object.defineProperty(o,"CHANGE_VIDEO_FOCUS_WINDOW_MODE",{value:100}),Object.defineProperty(o,"CHANGE_VIDEO_LAYOUT_MODE",{value:101}),Object.defineProperty(o,"SET_CURRENT_TAB",{value:105}),Object.defineProperty(o,"SET_FULLSCREEN",{value:106}),Object.defineProperty(o,"SET_FRAME_LAYOUT",{value:107}),Object.defineProperty(o,"FORCE_SYNC",{value:108}),Object.defineProperty(o,"WB_CREATE",{value:110}),Object.defineProperty(o,"WB_CLOSE",{value:111}),Object.defineProperty(o,"WB_CHANGE_NAME",{value:112}),Object.defineProperty(o,"WB_MARK",{value:113}),Object.defineProperty(o,"WB_SAVE",{value:114}),Object.defineProperty(o,"WB_PAGE_IMPORT",{value:115}),Object.defineProperty(o,"WB_CHANGE_SCALE",{value:116}),Object.defineProperty(o,"WB_ROTATE",{value:117}),Object.defineProperty(o,"WB_SET_CURRENT_PAGE",{value:118}),Object.defineProperty(o,"WB_SET_HOTSPOT",{value:119}),Object.defineProperty(o,"WB_SET_MARK_TERMS",{value:120}),Object.defineProperty(o,"SCREEN_SHARE_OPERATE",{value:130}),n.Conference=o}(void 0!==n.g&&n.g.process,void 0!==n.g&&void 0!==n.g.process?n(4986):window.Ice.__require,void 0!==n.g&&void 0!==n.g.process?t:this)},4270:function(e,t,n){e=n.nmd(e),function(e,t,n){var i=t("ice").Ice,r=(i.__M,t("Common/Exception").Common),o=t("Control/PublicTypes").Conference,s=i.Slice;Object.defineProperty(o,"SSST_SHARING",{value:1}),Object.defineProperty(o,"SSST_MARKING",{value:2}),Object.defineProperty(o,"SSST_PAUSECTRL",{value:4}),Object.defineProperty(o,"SSRE_SOMEONE_REQ",{value:1}),Object.defineProperty(o,"SSRE_REJECT",{value:2}),o.ScreenShareInfo=s.defineStruct((function(e,t,n,i,r,o,s){this.scrSviceProxy=void 0!==e?e:"",this.authKey=void 0!==t?t:"",this.allowCtrlReq=void 0!==n&&n,this.state=void 0!==i?i:0,this.sharer=void 0!==r?r:0,this.controller=void 0!==o?o:0,this.allowOtherMark=void 0!==s&&s}),!0,(function(e){e.writeString(this.scrSviceProxy),e.writeString(this.authKey),e.writeBool(this.allowCtrlReq),e.writeByte(this.state),e.writeShort(this.sharer),e.writeShort(this.controller),e.writeBool(this.allowOtherMark)}),(function(e){this.scrSviceProxy=e.readString(),this.authKey=e.readString(),this.allowCtrlReq=e.readBool(),this.state=e.readByte(),this.sharer=e.readShort(),this.controller=e.readShort(),this.allowOtherMark=e.readBool()}),9,!1),o.MarkData=s.defineStruct((function(e,t,n){this.termid=void 0!==e?e:0,this.color=void 0!==t?t:0,this.mousePosSeq=void 0!==n?n:null}),!0,(function(e){e.writeShort(this.termid),e.writeInt(this.color),o.ByteListHelper.write(e,this.mousePosSeq)}),(function(e){this.termid=e.readShort(),this.color=e.readInt(),this.mousePosSeq=o.ByteListHelper.read(e)}),7,!1),o.MarkDataV4=s.defineStruct((function(e,t,n,i){this.termid=void 0!==e?e:0,this.markid=void 0!==t?t:"",this.type=void 0!==n?n:0,this.mousePosSeq=void 0!==i?i:null}),!0,(function(e){e.writeShort(this.termid),e.writeString(this.markid),e.writeByte(this.type),o.ByteListHelper.write(e,this.mousePosSeq)}),(function(e){this.termid=e.readShort(),this.markid=e.readString(),this.type=e.readByte(),this.mousePosSeq=o.ByteListHelper.read(e)}),5,!1),s.defineSequence(o,"MarkDataSeqHelper","Conference.MarkData",!1),s.defineSequence(o,"MarkDataSeqV4Helper","Conference.MarkDataV4",!1),s.defineSequence(o,"MarkIdSeqHelper","Ice.StringHelper",!1),o.ScreenShareCtrl=s.defineObject(void 0,i.Object,void 0,0,["::Conference::ScreenShareCtrl","::Ice::Object"],-1,void 0,void 0,!1),o.ScreenShareCtrlPrx=s.defineProxy(i.ObjectPrx,o.ScreenShareCtrl.ice_staticId,void 0),s.defineOperations(o.ScreenShareCtrl,o.ScreenShareCtrlPrx,{getScreenShareInfo:[,,,1,,[o.ScreenShareInfo],,,[r.ConferenceError],,],startScreenShare:[,,,1,,,,,[r.ConferenceError],,],stopScreenShare:[,,,1,,,,,[r.ConferenceError],,],setCtrlReqState:[,,,1,,,[[1]],,[r.ConferenceError],,],requestCtrlRight:[,,,1,,,,,[r.ConferenceError],,],cancelCtrlReq:[,,,1,,,,,[r.ConferenceError],,],rejectCtrlReq:[,,,1,,,[[2],[0]],,[r.ConferenceError],,],giveCtrlRight:[,,,1,,,[[2]],,[r.ConferenceError],,],releaseCtrlRight:[,,,1,,,,,[r.ConferenceError],,],ctrlMsg:[,,,1,,,[["Conference.ByteListHelper"]],,[r.ConferenceError],,],tmpSetRemoteCtrlState:[,,,1,,,[[1]],,[r.ConferenceError],,],requestMarked:[,,,1,,,,,[r.ConferenceError],,],cancelMarkedReq:[,,,1,,,,,[r.ConferenceError],,],startMarked:[,,,1,,,,,[r.ConferenceError],,],stopMarked:[,,,1,,,,,[r.ConferenceError],,],enableOtherMarked:[,,,1,,,[[1]],,[r.ConferenceError],,],askForNewIFrame:[,,,1,,,[[3]],,[r.ConferenceError],,],getAllMarkData:[,,,1,,["Conference.MarkDataSeqHelper"],,,[r.ConferenceError],,],sendMarkData:[,,,1,,,[[o.MarkData]],,[r.ConferenceError],,],clearAllMarks:[,,,1,,,,,[r.ConferenceError],,],setIndicator:[,,,1,,,[["Conference.StringStringMapHelper"]],,,,],getAllMarkDataV4:[,,,1,,["Conference.MarkDataSeqV4Helper"],,,[r.ConferenceError],,],sendMarkDataV4:[,,,1,,,[[o.MarkDataV4]],,[r.ConferenceError],,],clearAllMarksV4:[,,,1,,,,,[r.ConferenceError],,],delMarkDataV4:[,,,1,,,[["Conference.MarkIdSeqHelper"]],,[r.ConferenceError],,]}),o.ScreenShareClient=s.defineObject(void 0,i.Object,void 0,0,["::Conference::ScreenShareClient","::Ice::Object"],-1,void 0,void 0,!1),o.ScreenShareClientPrx=s.defineProxy(i.ObjectPrx,o.ScreenShareClient.ice_staticId,void 0),s.defineOperations(o.ScreenShareClient,o.ScreenShareClientPrx,{notifyStartScreenShare:[,,,,,,[[o.ScreenShareInfo]],,,,],notifyStopScreenShare:[,,,,,,[[2]],,,,],notifyCtrlReqState:[,,,,,,[[2],[1]],,[r.ConferenceError],,],notifyRequestCtrlRight:[,,,,,,[[2]],,,,],notifyCancelCtrlReq:[,,,,,,[[2]],,,,],notifyRejectCtrlReq:[,,,,,,[[2],[2],[0]],,,,],notifyGiveCtrlRight:[,,,,,,[[2],[2]],,,,],notifyReleaseCtrlRight:[,,,,,,[[2]],,,,],notifyCtrlMsg:[,,,,,,[[2],["Conference.ByteListHelper"]],,,,],notifyTmpSetRemoteCtrlState:[,,,,,,[[2],[1]],,,,],notifyRequestMarked:[,,,,,,[[2]],,,,],notifyCancelMarkedReq:[,,,,,,[[2]],,,,],notifyStartMarked:[,,,,,,[[2]],,,,],notifyStopMarked:[,,,,,,[[2]],,,,],notifyEnableOtherMarked:[,,,,,,[[2],[1]],,,,],notifyMakeIFrame:[,,,,,,[[3]],,,,],notifyMarkData:[,,,,,,[[o.MarkData]],,,,],notifyClearAllMarks:[,,,,,,,,,,],notifyIndicator:[,,,,,,[[2],["Conference.StringStringMapHelper"]],,,,],notifyClearAllMarksV4:[,,,,,,,,,,],notifyMarkDataV4:[,,,,,,[[o.MarkDataV4]],,,,],notifyDelMarkDataV4:[,,,,,,[["Conference.MarkIdSeqHelper"],[2]],,,,]}),n.Conference=o}(void 0!==n.g&&n.g.process,void 0!==n.g&&void 0!==n.g.process?n(4986):window.Ice.__require,void 0!==n.g&&void 0!==n.g.process?t:this)},9946:function(e,t,n){e=n.nmd(e),function(e,t,n){var i=t("ice").Ice,r=(i.__M,t("Common/Exception").Common),o=t("Control/PublicTypes").Conference,s=i.Slice;o.SyncCtrlCallback=s.defineObject(void 0,i.Object,void 0,0,["::Conference::SyncCtrlCallback","::Ice::Object"],-1,void 0,void 0,!1),o.SyncCtrlCallbackPrx=s.defineProxy(i.ObjectPrx,o.SyncCtrlCallback.ice_staticId,void 0),s.defineOperations(o.SyncCtrlCallback,o.SyncCtrlCallbackPrx,{notifySetCurrentTab:[,,,,,,[[o.TabID],[o.TabID],[2]],,,,],notifySetFullScreen:[,,,,,,[[1],[2]],,,,],notifySetPrivTabInfo:[,,,,,,[[7],[2]],,,,],notifySetSyncMode:[,,,,,,[[o.SYNCMODE.__helper],[2]],,,,]}),o.SyncCtrl=s.defineObject(void 0,i.Object,void 0,0,["::Conference::SyncCtrl","::Ice::Object"],-1,void 0,void 0,!1),o.SyncCtrlPrx=s.defineProxy(i.ObjectPrx,o.SyncCtrl.ice_staticId,void 0),s.defineOperations(o.SyncCtrl,o.SyncCtrlPrx,{setCurrentTab:[,,,1,,,[[o.TabID],[o.TabID]],,[r.ConferenceError],,],setFullScreen:[,,,1,,,[[1]],,[r.ConferenceError],,],setPrivTabInfo:[,,,1,,,[[7]],,[r.ConferenceError],,],setSyncMode:[,,,1,,,[[o.SYNCMODE.__helper]],,[r.ConferenceError],,],saveLastTabValue:[,,,1,,,[[2]],,[r.ConferenceError],,]}),n.Conference=o}(void 0!==n.g&&n.g.process,void 0!==n.g&&void 0!==n.g.process?n(4986):window.Ice.__require,void 0!==n.g&&void 0!==n.g.process?t:this)},7342:function(e,t,n){e=n.nmd(e),function(e,t,n){var i=t("ice").Ice,r=(i.__M,t("Common/Exception").Common),o=t("Control/PublicTypes").Conference,s=i.Slice;Object.defineProperty(o,"FPS_LOW",{value:-1}),Object.defineProperty(o,"FPS_NOR",{value:0}),Object.defineProperty(o,"FPS_HI",{value:1}),Object.defineProperty(o,"VEDIO_LD",{value:-1}),Object.defineProperty(o,"VEDIO_SD",{value:0}),Object.defineProperty(o,"VEDIO_HD",{value:1}),Object.defineProperty(o,"VEDIO_UD",{value:2}),o.VideoSetting=s.defineStruct((function(e,t,n,i,r,o){this.mutiCam=void 0!==e&&e,this.openCamIDs=void 0!==t?t:null,this.denoise=void 0!==n&&n,this.deinterlace=void 0!==i&&i,this.fpsType=void 0!==r?r:0,this.videType=void 0!==o?o:0}),!0,(function(e){e.writeBool(this.mutiCam),i.ShortSeqHelper.write(e,this.openCamIDs),e.writeBool(this.denoise),e.writeBool(this.deinterlace),e.writeInt(this.fpsType),e.writeInt(this.videType)}),(function(e){this.mutiCam=e.readBool(),this.openCamIDs=i.ShortSeqHelper.read(e),this.denoise=e.readBool(),this.deinterlace=e.readBool(),this.fpsType=e.readInt(),this.videType=e.readInt()}),12,!1),o.UsrCamID=s.defineStruct((function(e,t){this.termID=void 0!==e?e:0,this.camID=void 0!==t?t:0}),!0,(function(e){e.writeShort(this.termID),e.writeShort(this.camID)}),(function(e){this.termID=e.readShort(),this.camID=e.readShort()}),4,!0),s.defineSequence(o,"UsrCamIDListHelper","Conference.UsrCamID",!0),o.UsrCamSize=s.defineStruct((function(e,t,n){this.termID=void 0!==e?e:0,this.camID=void 0!==t?t:0,this.VIDEO_SS_value=void 0!==n?n:0}),!0,(function(e){e.writeShort(this.termID),e.writeShort(this.camID),e.writeInt(this.VIDEO_SS_value)}),(function(e){this.termID=e.readShort(),this.camID=e.readShort(),this.VIDEO_SS_value=e.readInt()}),8,!0),s.defineSequence(o,"UsrCamSizeListHelper","Conference.UsrCamSize",!0),Object.defineProperty(o,"ZOOM_TELE",{value:2}),Object.defineProperty(o,"ZOOM_WIDE",{value:3}),Object.defineProperty(o,"ZOOM_STOP",{value:0}),Object.defineProperty(o,"PAN_TILT_DIR_UP",{value:1}),Object.defineProperty(o,"PAN_TILT_DIR_DOWN",{value:2}),Object.defineProperty(o,"PAN_TILT_DIR_LEFT",{value:3}),Object.defineProperty(o,"PAN_TILT_DIR_RIGHT",{value:4}),Object.defineProperty(o,"PAN_TILT_DIR_STOP",{value:5}),o.VideoCallback=s.defineObject(void 0,i.Object,void 0,0,["::Conference::VideoCallback","::Ice::Object"],-1,void 0,void 0,!1),o.VideoCallbackPrx=s.defineProxy(i.ObjectPrx,o.VideoCallback.ice_staticId,void 0),s.defineOperations(o.VideoCallback,o.VideoCallbackPrx,{notifyAllowVideoWall:[,,,,,,[[1],[2]],,,,],updateStatus:[,,,,,,[[2],[o.VSTATUS.__helper],[2]],,,,],notifyOpenVideo:[,,,,,,[[2]],,,,],startVideoByManager:[,,,,,,,,[r.ConferenceError],,],notifyEnableVideo:[,,,,,,[[2],[1],[2]],,,,],updateFocusWindow:[,,,,,,[[o.WINDOW_MODE.__helper],[2]],,,,],updateVLayout:[,,,,,,[[o.VIDEOLAYOUTMODE.__helper],[2]],,,,],updateVLayout2:[,,,,,,[[3],[2]],,,,],updateMainVideoShowMode:[,,,,,,[[3],[2]],,,,],updateVideoListMode:[,,,,,,[[7],[2]],,,,],enableUpload:[,,,,,,[[2],[1]],,,,],enableUpload2:[,,,,,,[[2],[3]],,,,],generateIFrame:[,,,,,,[[2]],,,,],notifyRefuseOpenVideo:[,,,,,,[[2]],,,,],getVideoSetting:[,,,1,,[o.VideoSetting],,,[r.ConferenceError],,],setCamera:[,,,,,,[[o.VideoSetting],[2]],,[r.ConferenceError],,],setCameraById:[,,,,,,[[o.UsrCamID],[2]],,[r.ConferenceError],,],notifyVideoPolling:[,,,,,,[[2],[1],[3]],,[r.ConferenceError],,],notifyPollingVideo:[,,,,,,[[2],["Conference.UsrCamIDListHelper"]],,[r.ConferenceError],,],notifyPollingVideo2:[,,,,,,[[2],["Conference.UsrCamIDListHelper"],[7]],,[r.ConferenceError],,],notifyVideoList:[,,,,,,[[2],[7]],,[r.ConferenceError],,],notifyUpdateAllCameraInfos:[,,,,,,[[2],[7]],,[r.ConferenceError],,],notifySetOpenedCameraNumber:[,,,,,,[[2],["Ice.ShortSeqHelper"]],,[r.ConferenceError],,],notifyStartAdjustDirection:[,,,,,,[[o.UsrCamID],[3]],,,,],notifyStartAdjustZoom:[,,,,,,[[o.UsrCamID],[3]],,,,],notifyStopAdjustDirection:[,,,,,,[[o.UsrCamID]],,,,],notifyStopAdjustZoom:[,,,,,,[[o.UsrCamID]],,,,]}),o.VideoCtrl=s.defineObject(void 0,i.Object,void 0,0,["::Conference::VideoCtrl","::Ice::Object"],-1,void 0,void 0,!1),o.VideoCtrlPrx=s.defineProxy(i.ObjectPrx,o.VideoCtrl.ice_staticId,void 0),s.defineOperations(o.VideoCtrl,o.VideoCtrlPrx,{setDeviceStatus:[,,,1,,,[[1]],,[r.ConferenceError],,],allowVideoWall:[,,,1,,,[[1]],,[r.ConferenceError],,],startVideo:[,,,1,,,,,[r.ConferenceError],,],stopVideo:[,,,1,,,,,[r.ConferenceError],,],reqOpenVideo:[,,,1,,,[[2]],,[r.ConferenceError],,],startVideoEx:[,,,1,,,[[2]],,[r.ConferenceError],,],stopVideoEx:[,,,1,,,[[2]],,[r.ConferenceError],,],enableVideo:[,,,1,,,[[1]],,[r.ConferenceError],,],setFocusWindow:[,,,1,,,[[o.WINDOW_MODE.__helper],[2]],,[r.ConferenceError],,],batchSubscribeVideo:[,,,1,,,[["Conference.UsrCamIDListHelper"],[1]],,[r.ConferenceError],,],batchSubscribeVideo2:[,,,1,,,[["Conference.UsrCamSizeListHelper"]],,[r.ConferenceError],,],subscribeFocusWindow:[,,,1,,,[[1]],,[r.ConferenceError],,],subscribeFocusWindow2:[,,,1,,,[[3]],,[r.ConferenceError],,],setVLayout:[,,,1,,,[[o.VIDEOLAYOUTMODE.__helper]],,[r.ConferenceError],,],setVLayout2:[,,,1,,,[[3]],,[r.ConferenceError],,],setMainVideoShowMode:[,,,1,,,[[3]],,[r.ConferenceError],,],setVideoListMode:[,,,1,,,[[7]],,,,],refuseOpenVideo:[,,,1,,,[[2]],,,,],getVideoSetting:[,,,1,,[o.VideoSetting],[[2]],,[r.ConferenceError],,],setCamera:[,,,1,,,[[2],[o.VideoSetting]],,[r.ConferenceError],,],setCameraById:[,,,1,,,[[o.UsrCamID]],,[r.ConferenceError],,],setVideoPolling:[,,,1,,,[[1],[3]],,[r.ConferenceError],,],updatePollingVideo:[,,,1,,,[["Conference.UsrCamIDListHelper"]],,[r.ConferenceError],,],updatePollingVideo2:[,,,1,,,[["Conference.UsrCamIDListHelper"],[7]],,[r.ConferenceError],,],updateVideoList:[,,,1,,,[[7]],,[r.ConferenceError],,],getVideoPollingState:[,,,1,,[1],,[["Conference.UsrCamIDListHelper"],[3]],[r.ConferenceError],,],updateAllCameraInfos:[,,,1,,,[[7]],,[r.ConferenceError],,],setOpenedCameraNumber:[,,,1,,,[["Ice.ShortSeqHelper"]],,[r.ConferenceError],,],startAdjustDirection:[,,,1,,,[[o.UsrCamID],[3]],,[r.ConferenceError],,],startAdjustZoom:[,,,1,,,[[o.UsrCamID],[3]],,[r.ConferenceError],,],stopAdjustDirection:[,,,1,,,[[o.UsrCamID]],,[r.ConferenceError],,],stopAdjustZoom:[,,,1,,,[[o.UsrCamID]],,[r.ConferenceError],,]}),n.Conference=o}(void 0!==n.g&&n.g.process,void 0!==n.g&&void 0!==n.g.process?n(4986):window.Ice.__require,void 0!==n.g&&void 0!==n.g.process?t:this)},3351:function(e,t,n){e=n.nmd(e),function(e,t,n){var i=t("ice").Ice,r=(i.__M,t("Common/Exception").Common),o=t("Control/PublicTypes").Conference,s=i.Slice;o.WB_BAKIMG_TYPE=s.defineEnum([["WB_BAKIMG_NULL",0],["WB_BAKIMG_EMF",1],["WB_BAKIMG_JPG",2],["WB_BAKIMG_HTML",3]]),o.WB_ELEMENT_ZPOS=s.defineEnum([["WB_ELEMENT_ZTOP",0],["WB_ELEMENT_ZBOTTOM",1]]),o.ElementID=s.defineStruct((function(e,t){this.ownerID=void 0!==e?e:0,this.ID=void 0!==t?t:0}),!0,(function(e){e.writeShort(this.ownerID),e.writeShort(this.ID)}),(function(e){this.ownerID=e.readShort(),this.ID=e.readShort()}),4,!0),s.defineSequence(o,"ElementIDSeqHelper","Conference.ElementID",!0),o.ElementPos=s.defineStruct((function(e,t,n){this.eID=void 0!==e?e:new o.ElementID,this.left=void 0!==t?t:0,this.top=void 0!==n?n:0}),!0,(function(e){o.ElementID.write(e,this.eID),e.writeInt(this.left),e.writeInt(this.top)}),(function(e){this.eID=o.ElementID.read(e,this.eID),this.left=e.readInt(),this.top=e.readInt()}),12,!0),s.defineSequence(o,"ElementPosSeqHelper","Conference.ElementPos",!0),o.ElementData=s.defineStruct((function(e,t,n,i,r,s,a){this.eID=void 0!==e?e:new o.ElementID,this.orderId=void 0!==t?t:0,this.left=void 0!==n?n:0,this.top=void 0!==i?i:0,this.type=void 0!==r?r:0,this.noused=void 0!==s?s:0,this.data=void 0!==a?a:null}),!0,(function(e){o.ElementID.write(e,this.eID),e.writeInt(this.orderId),e.writeInt(this.left),e.writeInt(this.top),e.writeInt(this.type),e.writeInt(this.noused),o.ByteListHelper.write(e,this.data)}),(function(e){this.eID=o.ElementID.read(e,this.eID),this.orderId=e.readInt(),this.left=e.readInt(),this.top=e.readInt(),this.type=e.readInt(),this.noused=e.readInt(),this.data=o.ByteListHelper.read(e)}),25,!1),s.defineSequence(o,"ElementSeqHelper","Conference.ElementData",!1),o.IndicatorData=s.defineStruct((function(e,t,n,i,r,o){this.termId=void 0!==e?e:0,this.pageNo=void 0!==t?t:0,this.x=void 0!==n?n:0,this.y=void 0!==i?i:0,this.msg=void 0!==r?r:"",this.lifeSec=void 0!==o?o:0}),!0,(function(e){e.writeInt(this.termId),e.writeInt(this.pageNo),e.writeInt(this.x),e.writeInt(this.y),e.writeString(this.msg),e.writeByte(this.lifeSec)}),(function(e){this.termId=e.readInt(),this.pageNo=e.readInt(),this.x=e.readInt(),this.y=e.readInt(),this.msg=e.readString(),this.lifeSec=e.readByte()}),18,!1),s.defineSequence(o,"IndicatorDataSeqHelper","Conference.IndicatorData",!1),o.PageData=s.defineStruct((function(e,t,n,i){this.pageNo=void 0!==e?e:0,this.imgType=void 0!==t?t:o.WB_BAKIMG_TYPE.WB_BAKIMG_NULL,this.imgResourceID=void 0!==n?n:"",this.elementList=void 0!==i?i:null}),!0,(function(e){e.writeInt(this.pageNo),o.WB_BAKIMG_TYPE.__write(e,this.imgType),e.writeString(this.imgResourceID),o.ElementSeqHelper.write(e,this.elementList)}),(function(e){this.pageNo=e.readInt(),this.imgType=o.WB_BAKIMG_TYPE.__read(e),this.imgResourceID=e.readString(),this.elementList=o.ElementSeqHelper.read(e)}),7,!1),s.defineSequence(o,"PageDataSeqHelper","Conference.PageData",!1),o.WhiteBoardData=s.defineStruct((function(e,t){this.descData=void 0!==e?e:new o.WhiteBoardDescribe,this.pageDataList=void 0!==t?t:null}),!0,(function(e){o.WhiteBoardDescribe.write(e,this.descData),o.PageDataSeqHelper.write(e,this.pageDataList)}),(function(e){this.descData=o.WhiteBoardDescribe.read(e,this.descData),this.pageDataList=o.PageDataSeqHelper.read(e)}),38,!1),s.defineSequence(o,"WhiteBoardDataSeqHelper","Conference.WhiteBoardData",!1),s.defineDictionary(o,"PageToDatas","PageToDatasHelper","Ice.IntHelper","Conference.PageData",!1,void 0,void 0,i.HashMap.compareEquals),o.WhiteBoardCtrl=s.defineObject(void 0,i.Object,void 0,0,["::Conference::WhiteBoardCtrl","::Ice::Object"],-1,void 0,void 0,!1),o.WhiteBoardCtrlPrx=s.defineProxy(i.ObjectPrx,o.WhiteBoardCtrl.ice_staticId,void 0),s.defineOperations(o.WhiteBoardCtrl,o.WhiteBoardCtrlPrx,{setContainerSize:[,,,1,,,[[3],[3]],,[r.ConferenceError],,],create:[,,,1,,,[[o.WhiteBoardDescribe]],,[r.ConferenceError],,],importPage:[,,,1,,,[[o.TabID],["Conference.PageDataSeqHelper"]],,[r.ConferenceError],,],close:[,,,1,,,[[o.TabID]],,[r.ConferenceError],,],changeName:[,,,1,,,[[o.TabID],[7]],,[r.ConferenceError],,],changeScale:[,,,1,,,[[o.TabID],[o.WB_SCALE_TYPE.__helper]],,[r.ConferenceError],,],changeRatote:[,,,1,,,[[o.TabID],[o.WB_ROTATE_TYPE.__helper]],,[r.ConferenceError],,],setCurrentPage:[,,,1,,,[[o.TabID],[3],[3],[3]],,[r.ConferenceError],,],showThumPage:[,,,1,,,[[o.TabID],[1]],,[r.ConferenceError],,],addElement:[,,,1,,,[[o.TabID],[3],[o.ElementData]],,[r.ConferenceError],,],addElementEx:[,,,1,,,[[o.TabID],[3],["Conference.ElementSeqHelper"]],,[r.ConferenceError],,],moveElement:[,,,1,,,[[o.TabID],[3],["Conference.ElementPosSeqHelper"]],,[r.ConferenceError],,],modifyElement:[,,,1,,,[[o.TabID],[3],[o.ElementData]],,[r.ConferenceError],,],delElement:[,,,1,,,[[o.TabID],[3],["Conference.ElementIDSeqHelper"]],,[r.ConferenceError],,],setElementZPos:[,,,1,,,[[o.TabID],[3],[o.WB_ELEMENT_ZPOS.__helper]],,[r.ConferenceError],,],setIndicator:[,,,1,,,[[o.TabID],[o.IndicatorData]],,[r.ConferenceError],,],setHotspot:[,,,1,,,[[o.TabID],[3],[3],[3]],,[r.ConferenceError],,],queryIndicator:[,,,1,,["Conference.IndicatorDataSeqHelper"],[[o.TabID]],,[r.ConferenceError],,],queryAllBoardList:[,,,1,,["Conference.WhiteBoardDescribeSeqHelper"],,,[r.ConferenceError],,],queryElementByIDs:[,,,1,,["Conference.PageToDatasHelper"],[[o.TabID],["Ice.IntSeqHelper"]],,[r.ConferenceError],,],queryPageElementByIDs:[,,,1,,["Conference.ElementSeqHelper"],[[o.TabID],[3],["Conference.ElementIDSeqHelper"]],,[r.ConferenceError],,],setMarkTerms:[,,,1,,,[[o.TabID],[1],["Ice.ShortSeqHelper"]],,[r.ConferenceError],,]}),o.WhiteBoardCallback=s.defineObject(void 0,i.Object,void 0,0,["::Conference::WhiteBoardCallback","::Ice::Object"],-1,void 0,void 0,!1),o.WhiteBoardCallbackPrx=s.defineProxy(i.ObjectPrx,o.WhiteBoardCallback.ice_staticId,void 0),s.defineOperations(o.WhiteBoardCallback,o.WhiteBoardCallbackPrx,{notifySetContainerSize:[,,,,,,[[3],[3],[2]],,,,],notifyCreate:[,,,,,,[[o.WhiteBoardDescribe],[2]],,,,],notifyImportPage:[,,,,,,[[o.TabID],["Conference.PageDataSeqHelper"],[2]],,,,],notifyClose:[,,,,,,[[o.TabID],[2]],,,,],notifyChangeName:[,,,,,,[[o.TabID],[7],[2]],,,,],notifyChangeScale:[,,,,,,[[o.TabID],[o.WB_SCALE_TYPE.__helper],[2]],,,,],notifyChangeRotate:[,,,,,,[[o.TabID],[o.WB_ROTATE_TYPE.__helper],[2]],,,,],notifySetCurrentPage:[,,,,,,[[o.TabID],[3],[3],[3],[2]],,,,],notifyShowThumPage:[,,,,,,[[o.TabID],[1],[2]],,,,],notifyAddElement:[,,,,,,[[o.TabID],[3],[o.ElementData],[2]],,,,],notifyAddElementEx:[,,,,,,[[o.TabID],[3],["Conference.ElementSeqHelper"],[2]],,,,],notifyMoveElement:[,,,,,,[[o.TabID],[3],["Conference.ElementPosSeqHelper"],[2]],,,,],notifyModifyElement:[,,,,,,[[o.TabID],[3],[o.ElementData],[2]],,,,],notifyDelElement:[,,,,,,[[o.TabID],[3],["Conference.ElementIDSeqHelper"],[2]],,,,],notifySetElementZPos:[,,,,,,[[o.TabID],[3],[o.WB_ELEMENT_ZPOS.__helper],[2]],,,,],notifySetIndicator:[,,,,,,[[o.TabID],[o.IndicatorData],[2]],,,,],notifySetHotspot:[,,,,,,[[o.TabID],[3],[3],[3],[2]],,,,],notifySetMarkTerms:[,,,,,,[[o.TabID],[1],["Ice.ShortSeqHelper"]],,,,]}),n.Conference=o}(void 0!==n.g&&n.g.process,void 0!==n.g&&void 0!==n.g.process?n(4986):window.Ice.__require,void 0!==n.g&&void 0!==n.g.process?t:this)},4986:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=4986,e.exports=t},7511:function(e,t,n){e=n.nmd(e),function(e,t,n){var i=t("ice").Ice,r=i.__M,o=i.Slice,s=r.module("LogSpace");s.LogLevel=o.defineEnum([["debug",0],["info",1],["warning",2],["error",3]]),s.FatalLogInfo=o.defineStruct((function(e,t,n,i,r,o,s,a){this.version=void 0!==e?e:"",this.conferenceID=void 0!==t?t:0,this.userID=void 0!==n?n:0,this.client=void 0!==i?i:"",this.clientIP=void 0!==r?r:"",this.logDate=void 0!==o?o:"",this.content=void 0!==s?s:"",this.dumpData=void 0!==a?a:null}),!0,(function(e){e.writeString(this.version),e.writeInt(this.conferenceID),e.writeInt(this.userID),e.writeString(this.client),e.writeString(this.clientIP),e.writeString(this.logDate),e.writeString(this.content),i.ByteSeqHelper.write(e,this.dumpData)}),(function(e){this.version=e.readString(),this.conferenceID=e.readInt(),this.userID=e.readInt(),this.client=e.readString(),this.clientIP=e.readString(),this.logDate=e.readString(),this.content=e.readString(),this.dumpData=i.ByteSeqHelper.read(e)}),14,!1),s.AppendData=o.defineStruct((function(e,t,n){this.uuid=void 0!==e?e:"",this.type=void 0!==t?t:"",this.data=void 0!==n?n:null}),!0,(function(e){e.writeString(this.uuid),e.writeString(this.type),i.ByteSeqHelper.write(e,this.data)}),(function(e){this.uuid=e.readString(),this.type=e.readString(),this.data=i.ByteSeqHelper.read(e)}),3,!1),o.defineSequence(s,"AppendDataSeqHelper","LogSpace.AppendData",!1),s.UsrReportInfo=o.defineStruct((function(e,t,n,i,r,o,s,a,c){this.version=void 0!==e?e:"",this.conferenceID=void 0!==t?t:0,this.userID=void 0!==n?n:0,this.client=void 0!==i?i:"",this.clientIP=void 0!==r?r:"",this.reportDate=void 0!==o?o:"",this.contact=void 0!==s?s:"",this.content=void 0!==a?a:"",this.appendDatas=void 0!==c?c:null}),!0,(function(e){e.writeString(this.version),e.writeInt(this.conferenceID),e.writeInt(this.userID),e.writeString(this.client),e.writeString(this.clientIP),e.writeString(this.reportDate),e.writeString(this.contact),e.writeString(this.content),s.AppendDataSeqHelper.write(e,this.appendDatas)}),(function(e){this.version=e.readString(),this.conferenceID=e.readInt(),this.userID=e.readInt(),this.client=e.readString(),this.clientIP=e.readString(),this.reportDate=e.readString(),this.contact=e.readString(),this.content=e.readString(),this.appendDatas=s.AppendDataSeqHelper.read(e)}),15,!1),s.ClientLogServer=o.defineObject(void 0,i.Object,void 0,1,["::Ice::Object","::LogSpace::ClientLogServer"],-1,void 0,void 0,!1),s.ClientLogServerPrx=o.defineProxy(i.ObjectPrx,s.ClientLogServer.ice_staticId,void 0),o.defineOperations(s.ClientLogServer,s.ClientLogServerPrx,{log:[,,,,,,[["Ice.ByteSeqHelper"]],,,,],logFatal:[,,,,,,[[s.FatalLogInfo]],,,,],usrReport:[,,,,,,[[s.UsrReportInfo]],,,,],logDetail:[,,,,,,[[3],[7],["Ice.ByteSeqHelper"]],,,,],sendCmd:[,,,,,,[[7],[7],[7],["Ice.ByteSeqHelper"]],[[7],["Ice.ByteSeqHelper"]],,,]}),n.LogSpace=s}(void 0!==n.g&&n.g.process,void 0!==n.g&&void 0!==n.g.process?n(739):window.Ice.__require,void 0!==n.g&&void 0!==n.g.process?t:this)},739:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=739,e.exports=t},5898:function(e,t,n){e=n.nmd(e),function(e,t,n){var i=t("ice").Ice,r=i.__M,o=i.Slice,s=r.module("SendCmd");s.CmdError=o.defineUserException((function(e,t,n){i.UserException.call(this,n),this.error=void 0!==e?e:0,this.reason=void 0!==t?t:""}),i.UserException,"SendCmd::CmdError",(function(e){e.writeInt(this.error),e.writeString(this.reason)}),(function(e){this.error=e.readInt(),this.reason=e.readString()}),!1,!1),s.UnknowErr=o.defineUserException((function(e,t,n){s.CmdError.call(this,e,t,n)}),s.CmdError,"SendCmd::UnknowErr",void 0,void 0,!1,!1),s.CmdNotFound=o.defineUserException((function(e,t,n){s.CmdError.call(this,e,t,n)}),s.CmdError,"SendCmd::CmdNotFound",void 0,void 0,!1,!1),s.CmdNotImplement=o.defineUserException((function(e,t,n){s.CmdError.call(this,e,t,n)}),s.CmdError,"SendCmd::CmdNotImplement",void 0,void 0,!1,!1),s.AppException=o.defineUserException((function(e,t,n){s.CmdError.call(this,e,t,n)}),s.CmdError,"SendCmd::AppException",void 0,void 0,!1,!1),s.AppReturnInvalid=o.defineUserException((function(e,t,n){s.CmdError.call(this,e,t,n)}),s.CmdError,"SendCmd::AppReturnInvalid",void 0,void 0,!1,!1),s.SessionInvalid=o.defineUserException((function(e,t,n){s.CmdError.call(this,e,t,n)}),s.CmdError,"SendCmd::SessionInvalid",void 0,void 0,!1,!1),s.TargetInvalid=o.defineUserException((function(e,t,n){s.CmdError.call(this,e,t,n)}),s.CmdError,"SendCmd::TargetInvalid",void 0,void 0,!1,!1),Object.defineProperty(s,"DATATYPE_ALPHA",{value:1}),s.Cmd=o.defineObject(void 0,i.Object,void 0,1,["::Ice::Object","::SendCmd::Cmd"],-1,void 0,void 0,!1),s.CmdPrx=o.defineProxy(i.ObjectPrx,s.Cmd.ice_staticId,void 0),o.defineOperations(s.Cmd,s.CmdPrx,{sendCmd:[,,,1,,[7],[[7]],,[s.CmdError],,],sendBuffer:[,,,1,,[7],[[7],["Ice.ByteSeqHelper"]],,[s.CmdError],,]}),n.SendCmd=s}(void 0!==n.g&&n.g.process,void 0!==n.g&&void 0!==n.g.process?n(5254):window.Ice.__require,void 0!==n.g&&void 0!==n.g.process?t:this)},5254:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=5254,e.exports=t},1821:function(e,t,n){e=n.nmd(e),function(e,t,n){var i=t("ice").Ice,r=i.__M,o=i.Slice,s=r.module("Resm");s.ResmError=o.defineUserException((function(e,t,n){i.UserException.call(this,n),this.error=void 0!==e?e:0,this.reason=void 0!==t?t:""}),i.UserException,"Resm::ResmError",(function(e){e.writeInt(this.error),e.writeString(this.reason)}),(function(e){this.error=e.readInt(),this.reason=e.readString()}),!1,!1),s.ServerIdNotConfiger=o.defineUserException((function(e,t,n){s.ResmError.call(this,e,t,n)}),s.ResmError,"Resm::ServerIdNotConfiger",void 0,void 0,!1,!1),s.ServerNotEnable=o.defineUserException((function(e,t,n){s.ResmError.call(this,e,t,n)}),s.ResmError,"Resm::ServerNotEnable",void 0,void 0,!1,!1),s.NotAddedToService=o.defineUserException((function(e,t,n){s.ResmError.call(this,e,t,n)}),s.ResmError,"Resm::NotAddedToService",void 0,void 0,!1,!1),s.NoServerAvailable=o.defineUserException((function(e,t,n){s.ResmError.call(this,e,t,n)}),s.ResmError,"Resm::NoServerAvailable",void 0,void 0,!1,!1),s.NotConnected2Db=o.defineUserException((function(e,t,n){s.ResmError.call(this,e,t,n)}),s.ResmError,"Resm::NotConnected2Db",void 0,void 0,!1,!1),s.ResSessionBase=o.defineObject(void 0,i.Object,void 0,1,["::Ice::Object","::Resm::ResSessionBase"],-1,void 0,void 0,!1),s.ResSessionBasePrx=o.defineProxy(i.ObjectPrx,s.ResSessionBase.ice_staticId,void 0),o.defineOperations(s.ResSessionBase,s.ResSessionBasePrx,{nouse:[,,,,,,,,,,]}),s.InfoResponse=o.defineStruct((function(e,t,n,i){this.serverNo=void 0!==e?e:0,this.domain=void 0!==t?t:0,this.registerInverval=void 0!==n?n:0,this.reportInverval=void 0!==i?i:0}),!0,(function(e){e.writeInt(this.serverNo),e.writeInt(this.domain),e.writeInt(this.registerInverval),e.writeInt(this.reportInverval)}),(function(e){this.serverNo=e.readInt(),this.domain=e.readInt(),this.registerInverval=e.readInt(),this.reportInverval=e.readInt()}),16,!0),Object.defineProperty(s,"SERVER_ACCESS",{value:0}),Object.defineProperty(s,"SERVER_SS",{value:1}),Object.defineProperty(s,"SERVER_CONTROL",{value:2}),Object.defineProperty(s,"SERVER_FILE",{value:3}),Object.defineProperty(s,"SERVER_MIX",{value:4}),Object.defineProperty(s,"SERVER_FN",{value:5}),Object.defineProperty(s,"SERVER_MCU",{value:6}),s.ResmCommon=o.defineObject(void 0,i.Object,void 0,1,["::Ice::Object","::Resm::ResmCommon"],-1,void 0,void 0,!1),s.ResmCommonPrx=o.defineProxy(i.ObjectPrx,s.ResmCommon.ice_staticId,void 0),o.defineOperations(s.ResmCommon,s.ResmCommonPrx,{getSelfInfo:[,,,,,[s.InfoResponse],[[7],[3]],,[s.ResmError],,],getActiveConference:[,,,,,["Ice.IntSeqHelper"],,,[s.ResmError],,]}),o.defineDictionary(s,"ReportDict","ReportDictHelper","Ice.StringHelper","Ice.IntHelper",!1,void 0,void 0),o.defineDictionary(s,"DataDict","DataDictHelper","Ice.StringHelper","Ice.IntHelper",!1,void 0,void 0),o.defineSequence(s,"IpAddressSeqHelper","Ice.StringHelper",!1),s.NetworkStatus=o.defineStruct((function(e,t){this.latency=void 0!==e?e:0,this.lostRate=void 0!==t?t:0}),!0,(function(e){e.writeInt(this.latency),e.writeInt(this.lostRate)}),(function(e){this.latency=e.readInt(),this.lostRate=e.readInt()}),8,!0),s.NetworkReport=o.defineStruct((function(e,t,n,i,r,o,s,a){this.avgLatency=void 0!==e?e:0,this.maxLatency=void 0!==t?t:0,this.minLatency=void 0!==n?n:0,this.lostRate=void 0!==i?i:0,this.singleLost=void 0!==r?r:0,this.contLostCnt=void 0!==o?o:0,this.contLostPkt=void 0!==s?s:0,this.statisTime=void 0!==a?a:""}),!0,(function(e){e.writeInt(this.avgLatency),e.writeInt(this.maxLatency),e.writeInt(this.minLatency),e.writeInt(this.lostRate),e.writeInt(this.singleLost),e.writeInt(this.contLostCnt),e.writeInt(this.contLostPkt),e.writeString(this.statisTime)}),(function(e){this.avgLatency=e.readInt(),this.maxLatency=e.readInt(),this.minLatency=e.readInt(),this.lostRate=e.readInt(),this.singleLost=e.readInt(),this.contLostCnt=e.readInt(),this.contLostPkt=e.readInt(),this.statisTime=e.readString()}),29,!1),s.PathStatus=o.defineStruct((function(e,t,n,i){this.remoteServerNo=void 0!==e?e:0,this.remoteIP=void 0!==t?t:"",this.netReport=void 0!==n?n:new s.NetworkReport,this.weight=void 0!==i?i:0}),!0,(function(e){e.writeInt(this.remoteServerNo),e.writeString(this.remoteIP),s.NetworkReport.write(e,this.netReport),e.writeInt(this.weight)}),(function(e){this.remoteServerNo=e.readInt(),this.remoteIP=e.readString(),this.netReport=s.NetworkReport.read(e,this.netReport),this.weight=e.readInt()}),38,!1),o.defineSequence(s,"PathStatusSeqHelper","Resm.PathStatus",!1),o.defineDictionary(s,"PathStatusDict","PathStatusDictHelper","Ice.StringHelper","Resm.PathStatusSeqHelper",!1,void 0,void 0,i.ArrayUtil.equals),s.MixSession=o.defineObject(void 0,i.Object,[s.ResSessionBase],1,["::Ice::Object","::Resm::MixSession","::Resm::ResSessionBase"],-1,void 0,void 0,!1),s.MixSessionPrx=o.defineProxy(i.ObjectPrx,s.MixSession.ice_staticId,[s.ResSessionBasePrx]),o.defineOperations(s.MixSession,s.MixSessionPrx,{abilityReport:[,,,,,,[["Resm.ReportDictHelper"]],,[s.ResmError],,]}),s.NetworkProperty=o.defineEnum([["TELECOM",0],["UNICOM",1],["TELEUNI",2],["UNKNOW",3]]),s.MixM=o.defineObject(void 0,i.Object,void 0,1,["::Ice::Object","::Resm::MixM"],-1,void 0,void 0,!1),s.MixMPrx=o.defineProxy(i.ObjectPrx,s.MixM.ice_staticId,void 0),o.defineOperations(s.MixM,s.MixMPrx,{register:[,,,,,["Resm.MixSessionPrx"],[[3],[7],[7],["Resm.IpAddressSeqHelper"]],[["Resm.DataDictHelper"]],[s.ResmError],,],locate:[,,,,,[3],[[3],[3],[s.NetworkProperty.__helper]],,[s.ResmError],,],locateMixAndSs:[,,,,,["Resm.DataDictHelper"],[[3],[3],[3]],,[s.ResmError],,]}),s.SsSession=o.defineObject(void 0,i.Object,[s.ResSessionBase],2,["::Ice::Object","::Resm::ResSessionBase","::Resm::SsSession"],-1,void 0,void 0,!1),s.SsSessionPrx=o.defineProxy(i.ObjectPrx,s.SsSession.ice_staticId,[s.ResSessionBasePrx]),o.defineOperations(s.SsSession,s.SsSessionPrx,{abilityReport:[,,,,,,[["Resm.ReportDictHelper"]],,,,]}),s.SsM=o.defineObject(void 0,i.Object,void 0,1,["::Ice::Object","::Resm::SsM"],-1,void 0,void 0,!1),s.SsMPrx=o.defineProxy(i.ObjectPrx,s.SsM.ice_staticId,void 0),o.defineOperations(s.SsM,s.SsMPrx,{register:[,,,,,["Resm.SsSessionPrx"],[[3],[7],[7]],[["Resm.DataDictHelper"]],[s.ResmError],,],locate:[,,,,,[3],[[3],[3]],,[s.ResmError],,]}),s.ControlSession=o.defineObject(void 0,i.Object,[s.ResSessionBase],1,["::Ice::Object","::Resm::ControlSession","::Resm::ResSessionBase"],-1,void 0,void 0,!1),s.ControlSessionPrx=o.defineProxy(i.ObjectPrx,s.ControlSession.ice_staticId,[s.ResSessionBasePrx]),o.defineOperations(s.ControlSession,s.ControlSessionPrx,{abilityReport:[,,,,,,[["Resm.ReportDictHelper"]],,,,]}),s.ControlM=o.defineObject(void 0,i.Object,void 0,1,["::Ice::Object","::Resm::ControlM"],-1,void 0,void 0,!1),s.ControlMPrx=o.defineProxy(i.ObjectPrx,s.ControlM.ice_staticId,void 0),o.defineOperations(s.ControlM,s.ControlMPrx,{register:[,,,,,["Resm.ControlSessionPrx"],[[3],[7],[7]],,[s.ResmError],,],locate:[,,,,,["Resm.DataDictHelper"],[[3],[3],[3],[3]],,[s.ResmError],,]}),s.FileCallback=o.defineObject(void 0,i.Object,void 0,1,["::Ice::Object","::Resm::FileCallback"],-1,void 0,void 0,!1),s.FileCallbackPrx=o.defineProxy(i.ObjectPrx,s.FileCallback.ice_staticId,void 0),o.defineOperations(s.FileCallback,s.FileCallbackPrx,{setFileData:[,,,,,,[["Resm.DataDictHelper"]],,,,]}),s.FileSession=o.defineObject(void 0,i.Object,[s.ResSessionBase],1,["::Ice::Object","::Resm::FileSession","::Resm::ResSessionBase"],-1,void 0,void 0,!1),s.FileSessionPrx=o.defineProxy(i.ObjectPrx,s.FileSession.ice_staticId,[s.ResSessionBasePrx]),o.defineOperations(s.FileSession,s.FileSessionPrx,{abilityReport:[,,,,,,[["Resm.ReportDictHelper"]],,,,]}),s.FileM=o.defineObject(void 0,i.Object,void 0,1,["::Ice::Object","::Resm::FileM"],-1,void 0,void 0,!1),s.FileMPrx=o.defineProxy(i.ObjectPrx,s.FileM.ice_staticId,void 0),o.defineOperations(s.FileM,s.FileMPrx,{register:[,,,,,["Resm.FileSessionPrx"],[[3],[7],[7],["Resm.FileCallbackPrx"]],[["Resm.DataDictHelper"]],[s.ResmError],,],locate:[,,,,,["Resm.DataDictHelper"],[[3],[3]],,[s.ResmError],,]}),o.defineDictionary(s,"ConfMemberDict","ConfMemberDictHelper","Ice.IntHelper","Ice.IntHelper",!0,void 0,void 0),s.AccessSession=o.defineObject(void 0,i.Object,[s.ResSessionBase],1,["::Ice::Object","::Resm::AccessSession","::Resm::ResSessionBase"],-1,void 0,void 0,!1),s.AccessSessionPrx=o.defineProxy(i.ObjectPrx,s.AccessSession.ice_staticId,[s.ResSessionBasePrx]),o.defineOperations(s.AccessSession,s.AccessSessionPrx,{abilityReport:[,,,,,,[["Resm.ReportDictHelper"],["Resm.ConfMemberDictHelper"]],,,,]}),o.defineDictionary(s,"NetworkResult","NetworkResultHelper","Ice.IntHelper","Resm.NetworkStatus",!0,void 0,void 0,i.HashMap.compareEquals),s.NetworkAddress=o.defineStruct((function(e,t,n){this.ip=void 0!==e?e:"",this.port=void 0!==t?t:0,this.glacier2Port=void 0!==n?n:0}),!0,(function(e){e.writeString(this.ip),e.writeShort(this.port),e.writeShort(this.glacier2Port)}),(function(e){this.ip=e.readString(),this.port=e.readShort(),this.glacier2Port=e.readShort()}),5,!1),o.defineDictionary(s,"AccessAddrDict","AccessAddrDictHelper","Ice.IntHelper","Resm.NetworkAddress",!1,void 0,void 0,i.HashMap.compareEquals),s.AccessM=o.defineObject(void 0,i.Object,void 0,1,["::Ice::Object","::Resm::AccessM"],-1,void 0,void 0,!1),s.AccessMPrx=o.defineProxy(i.ObjectPrx,s.AccessM.ice_staticId,void 0),o.defineOperations(s.AccessM,s.AccessMPrx,{register:[,,,,,["Resm.AccessSessionPrx"],[[3],[7],[7],["Resm.IpAddressSeqHelper"]],[["Resm.DataDictHelper"]],[s.ResmError],,],locate:[,,,,,[3],[[3],[3],["Resm.NetworkResultHelper"],[7],[7]],,[s.ResmError],,],getAccessList:[,,,,,["Resm.AccessAddrDictHelper"],[[3]],,,,],sendCmd:[,,,,,,[[7],[7],[7],["Ice.ByteSeqHelper"]],[[7],["Ice.ByteSeqHelper"]],[s.ResmError],,]}),s.NetworkBandwidth=o.defineStruct((function(e,t){this.sendBandWidth=void 0!==e?e:0,this.recvBandWidth=void 0!==t?t:0}),!0,(function(e){e.writeInt(this.sendBandWidth),e.writeInt(this.recvBandWidth)}),(function(e){this.sendBandWidth=e.readInt(),this.recvBandWidth=e.readInt()}),8,!0),o.defineDictionary(s,"FNBandwidthDict","FNBandwidthDictHelper","Ice.StringHelper","Resm.NetworkBandwidth",!1,void 0,void 0,i.HashMap.compareEquals),s.FnSession=o.defineObject(void 0,i.Object,[s.ResSessionBase],1,["::Ice::Object","::Resm::FnSession","::Resm::ResSessionBase"],-1,void 0,void 0,!1),s.FnSessionPrx=o.defineProxy(i.ObjectPrx,s.FnSession.ice_staticId,[s.ResSessionBasePrx]),o.defineOperations(s.FnSession,s.FnSessionPrx,{abilityReport:[,,,,,,[["Resm.ReportDictHelper"],["Resm.FNBandwidthDictHelper"]],,,,]}),s.FnM=o.defineObject(void 0,i.Object,void 0,1,["::Ice::Object","::Resm::FnM"],-1,void 0,void 0,!1),s.FnMPrx=o.defineProxy(i.ObjectPrx,s.FnM.ice_staticId,void 0),o.defineOperations(s.FnM,s.FnMPrx,{register:[,,,,,["Resm.FnSessionPrx"],[[3],[7],[7],["Resm.IpAddressSeqHelper"]],[["Resm.DataDictHelper"]],[s.ResmError],,]}),s.RouteType=o.defineEnum([["UNREACHABLE",0],["DIRECT",1],["FORWARD",2]]),s.RouteScore=o.defineEnum([["BROKEN",0],["BAD",1],["AVAILABLE",2],["PERFECT",3]]),o.defineSequence(s,"IntSeqHelper","Ice.IntHelper",!0),s.Route=o.defineStruct((function(e,t,n,i,r,o,a){this.type=void 0!==e?e:s.RouteType.UNREACHABLE,this.score=void 0!==t?t:s.RouteScore.BROKEN,this.srcIP=void 0!==n?n:"",this.dstIP=void 0!==i?i:"",this.fnNo=void 0!==r?r:0,this.srcFnIP=void 0!==o?o:"",this.dstFnIP=void 0!==a?a:""}),!0,(function(e){s.RouteType.__write(e,this.type),s.RouteScore.__write(e,this.score),e.writeString(this.srcIP),e.writeString(this.dstIP),e.writeInt(this.fnNo),e.writeString(this.srcFnIP),e.writeString(this.dstFnIP)}),(function(e){this.type=s.RouteType.__read(e),this.score=s.RouteScore.__read(e),this.srcIP=e.readString(),this.dstIP=e.readString(),this.fnNo=e.readInt(),this.srcFnIP=e.readString(),this.dstFnIP=e.readString()}),10,!1),o.defineDictionary(s,"RouteMap","RouteMapHelper","Ice.IntHelper","Resm.Route",!1,void 0,void 0,i.HashMap.compareEquals),s.RouteM=o.defineObject(void 0,i.Object,void 0,1,["::Ice::Object","::Resm::RouteM"],-1,void 0,void 0,!1),s.RouteMPrx=o.defineProxy(i.ObjectPrx,s.RouteM.ice_staticId,void 0),o.defineOperations(s.RouteM,s.RouteMPrx,{RouteAllocBatch:[,,,,,["Resm.RouteMapHelper"],[[3],[3],["Resm.IntSeqHelper"]],,,,],RouteAlloc:[,,,,,[s.Route],[[3],[3],[3],["Resm.IntSeqHelper"]],,,,],PathReport:[,,,,,,[[3],["Resm.PathStatusDictHelper"]],,,,],RouteMapGet:[,,,,,["Resm.RouteMapHelper"],[[3],[3]],,,,]}),s.McuSession=o.defineObject(void 0,i.Object,[s.ResSessionBase],1,["::Ice::Object","::Resm::McuSession","::Resm::ResSessionBase"],-1,void 0,void 0,!1),s.McuSessionPrx=o.defineProxy(i.ObjectPrx,s.McuSession.ice_staticId,[s.ResSessionBasePrx]),o.defineOperations(s.McuSession,s.McuSessionPrx,{abilityReport:[,,,,,,[["Resm.ReportDictHelper"]],,,,]}),s.McuM=o.defineObject(void 0,i.Object,void 0,1,["::Ice::Object","::Resm::McuM"],-1,void 0,void 0,!1),s.McuMPrx=o.defineProxy(i.ObjectPrx,s.McuM.ice_staticId,void 0),o.defineOperations(s.McuM,s.McuMPrx,{register:[,,,,,["Resm.McuSessionPrx"],[[3],[7],[7]],[["Resm.DataDictHelper"]],[s.ResmError],,],locate:[,,,,,[3],[[3]],,[s.ResmError],,]}),n.Resm=s}(void 0!==n.g&&n.g.process,void 0!==n.g&&void 0!==n.g.process?n(3794):window.Ice.__require,void 0!==n.g&&void 0!==n.g.process?t:this)},3794:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=3794,e.exports=t},3239:function(e,t,n){e=n.nmd(e),function(e,t,n){var i=t("ice").Ice,r=(i.__M,t("Trans/MSPub").MS),o=i.Slice;r.LanTerm=o.defineStruct((function(e,t){this.hostIP=void 0!==e?e:"",this.termID=void 0!==t?t:0}),!0,(function(e){e.writeString(this.hostIP),e.writeShort(this.termID)}),(function(e){this.hostIP=e.readString(),this.termID=e.readShort()}),3,!1),o.defineSequence(r,"TermSeqHelper","MS.LanTerm",!1),r.MSClient=o.defineObject(void 0,i.Object,void 0,1,["::Ice::Object","::MS::MSClient"],-1,void 0,void 0,!1),r.MSClientPrx=o.defineProxy(i.ObjectPrx,r.MSClient.ice_staticId,void 0),o.defineOperations(r.MSClient,r.MSClientPrx,{AudioAllocRaw:[,,,1,,[3],[[r.AudioStreamParam]],,,,],AudioAlloc:[,,,1,,[3],[[r.AudioStreamParam],[r.MediaStreamAddr]],,,,],VideoAllocRaw:[,,,1,,[3],[[r.VideoStreamParam],[1]],,,,],VideoAlloc:[,,,1,,[3],[[r.VideoStreamParam],[1],[r.MediaStreamAddr]],,,,],AudioAllocRawExt:[,,,1,,[3],[[r.AudioStreamParam],["MS.DictStrParamsHelper"]],,,,],AudioAllocRawExt2:[,,,1,,[3],[[r.AudioStreamParam],["MS.DictStrParamsHelper"]],[["MS.DictStrParamsHelper"]],,,],AudioAllocExt:[,,,1,,[3],[[r.AudioStreamParam],[r.MediaStreamAddr],["MS.DictStrParamsHelper"]],,,,],VideoAllocRawExt:[,,,1,,[3],[[r.VideoStreamParam],[1],["MS.DictStrParamsHelper"]],,,,],VideoAllocRawExt2:[,,,1,,[3],[[r.VideoStreamParam],[1],["MS.DictStrParamsHelper"]],[["MS.DictStrParamsHelper"]],,,],VideoAllocExt:[,,,1,,[3],[[r.VideoStreamParam],[1],[r.MediaStreamAddr],["MS.DictStrParamsHelper"]],,,,],Free:[,,,1,,,[[3]],,,,],ModifyPeerAddr:[,,,1,,,[[3],[r.MediaStreamAddr]],,,,],ModifyPeerAddrExt:[,,,1,,,[[3],["MS.DictStrParamsHelper"]],,,,],ModifyIOMode:[,,,1,,,[[3],[r.MediaStreamIOMode.__helper]],,,,],NotifyRTMPStreamPublishFinished:[,,,1,,,[[3]],,,,],StartLanThrough:[,,,1,,,[[3],[3],[7]],,,,],StopLanThrough:[,,,1,,,[[3]],,,,],LanDetect:[,,,1,,,[["MS.TermSeqHelper"]],,,,],EnableSendVideo2Internet:[,,,1,,,[[2]],,,,],DisableSendVideo2Internet:[,,,1,,,[[2]],,,,],EnableSendScreen2Internet:[,,,1,,,,,,,],DisableSendScreen2Internet:[,,,1,,,,,,,],EnableSendFilm2Internet:[,,,1,,,,,,,],DisableSendFilm2Internet:[,,,1,,,,,,,],EnableSendLive2Internet:[,,,1,,,,,,,],DisableSendLive2Internet:[,,,1,,,,,,,]}),r.ClientReport=o.defineObject(void 0,i.Object,void 0,1,["::Ice::Object","::MS::ClientReport"],-1,void 0,void 0,!1),r.ClientReportPrx=o.defineProxy(i.ObjectPrx,r.ClientReport.ice_staticId,void 0),o.defineOperations(r.ClientReport,r.ClientReportPrx,{UpdateClientIP:[,,,1,,,[[7],[3],[7]],,,,],ReportLanNeighbor:[,,,1,,,[["MS.TermSeqHelper"]],,,,],LanMediaStreamFail:[,,,1,,,[[3],[3],[7]],,,,],VideoResolutionReport:[,,,1,,,[[3],[3],[3]],,,,]}),n.MS=r}(void 0!==n.g&&n.g.process,void 0!==n.g&&void 0!==n.g.process?n(3252):window.Ice.__require,void 0!==n.g&&void 0!==n.g.process?t:this)},7900:function(e,t,n){e=n.nmd(e),function(e,t,n){var i=t("ice").Ice,r=i.__M,o=i.Slice,s=r.module("MS");s.AudioTransType=o.defineEnum([["ATT_CORP_PRIV",0],["ATT_EIS_ENCRYPT",1],["ATT_RTP_STD",2],["ATT_RTMP",3]]),s.AudioCodecType=o.defineEnum([["ACT_PCMU",0],["ACT_PCMA",1],["ACT_G723",2],["ACT_G729",3],["ACT_AMRWB",4],["ACT_SPEEX",5],["ACT_AAC",6],["ACT_ISAC",7],["ACT_AAC_48K",8],["ACT_OPUS",9],["ACT_RESERV10",10],["ACT_RESERV11",11],["ACT_RESERV12",12],["ACT_RESERV13",13],["ACT_RESERV14",14],["ACT_NULL",15]]),s.MediaStreamIOMode=o.defineEnum([["MSIO_INACTIVE",0],["MSIO_SEND",1],["MSIO_RECV",2],["MSIO_SEND_RECV",3]]),s.AudioStreamParam=o.defineStruct((function(e,t,n,i,r){this.codecType=void 0!==e?e:s.AudioCodecType.ACT_PCMU,this.transType=void 0!==t?t:s.AudioTransType.ATT_CORP_PRIV,this.ioMode=void 0!==n?n:s.MediaStreamIOMode.MSIO_INACTIVE,this.mixerID=void 0!==i?i:0,this.shareListen=void 0!==r&&r}),!0,(function(e){s.AudioCodecType.__write(e,this.codecType),s.AudioTransType.__write(e,this.transType),s.MediaStreamIOMode.__write(e,this.ioMode),e.writeInt(this.mixerID),e.writeBool(this.shareListen)}),(function(e){this.codecType=s.AudioCodecType.__read(e),this.transType=s.AudioTransType.__read(e),this.ioMode=s.MediaStreamIOMode.__read(e),this.mixerID=e.readInt(),this.shareListen=e.readBool()}),8,!1),s.VideoContentType=o.defineEnum([["VCT_CAMERA",0],["VCT_SCREEN",1],["VCT_FILM",2],["VCT_LIVE",3]]),s.VideoStreamParam=o.defineStruct((function(e,t,n,i,r,o,a,c){this.contentType=void 0!==e?e:s.VideoContentType.VCT_CAMERA,this.srcTermID=void 0!==t?t:0,this.cameraID=void 0!==n?n:0,this.ioMode=void 0!==i?i:s.MediaStreamIOMode.MSIO_INACTIVE,this.attachToMSID=void 0!==r?r:0,this.subscribeFlag=void 0!==o&&o,this.isPeerSourceTerm=void 0!==a&&a,this.screenAuthKey=void 0!==c?c:""}),!0,(function(e){s.VideoContentType.__write(e,this.contentType),e.writeShort(this.srcTermID),e.writeShort(this.cameraID),s.MediaStreamIOMode.__write(e,this.ioMode),e.writeInt(this.attachToMSID),e.writeBool(this.subscribeFlag),e.writeBool(this.isPeerSourceTerm),e.writeString(this.screenAuthKey)}),(function(e){this.contentType=s.VideoContentType.__read(e),this.srcTermID=e.readShort(),this.cameraID=e.readShort(),this.ioMode=s.MediaStreamIOMode.__read(e),this.attachToMSID=e.readInt(),this.subscribeFlag=e.readBool(),this.isPeerSourceTerm=e.readBool(),this.screenAuthKey=e.readString()}),13,!1),s.NetworkAddress=o.defineStruct((function(e,t){this.ip=void 0!==e?e:"",this.port=void 0!==t?t:0}),!0,(function(e){e.writeString(this.ip),e.writeShort(this.port)}),(function(e){this.ip=e.readString(),this.port=e.readShort()}),3,!1),s.MediaStreamAddr=o.defineStruct((function(e,t){this.netAddr=void 0!==e?e:new s.NetworkAddress,this.MSID=void 0!==t?t:0}),!0,(function(e){s.NetworkAddress.write(e,this.netAddr),e.writeInt(this.MSID)}),(function(e){this.netAddr=s.NetworkAddress.read(e,this.netAddr),this.MSID=e.readInt()}),7,!1),s.ConferenceInfo=o.defineStruct((function(e,t,n,i){this.confId=void 0!==e?e:0,this.isPeerTerminal=void 0!==t&&t,this.peerTermId=void 0!==n?n:0,this.peerTermName=void 0!==i?i:""}),!0,(function(e){e.writeInt(this.confId),e.writeBool(this.isPeerTerminal),e.writeShort(this.peerTermId),e.writeString(this.peerTermName)}),(function(e){this.confId=e.readInt(),this.isPeerTerminal=e.readBool(),this.peerTermId=e.readShort(),this.peerTermName=e.readString()}),8,!1),o.defineDictionary(s,"DictStrParams","DictStrParamsHelper","Ice.StringHelper","Ice.StringHelper",!1,void 0,void 0),n.MS=s}(void 0!==n.g&&n.g.process,void 0!==n.g&&void 0!==n.g.process?n(3252):window.Ice.__require,void 0!==n.g&&void 0!==n.g.process?t:this)},3252:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=3252,e.exports=t},1638:(e,t,n)=>{var i;function r(e,t){var i;i=void 0!==n.g?n.g:null,"undefined"==typeof RecordRTC&&i&&"undefined"==typeof window&&void 0!==n.g&&(n.g.navigator={userAgent:"Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45",getUserMedia:function(){}},n.g.console||(n.g.console={}),void 0!==n.g.console.log&&void 0!==n.g.console.error||(n.g.console.error=n.g.console.log=n.g.console.log||function(){console.log(arguments)}),"undefined"==typeof document&&(i.document={documentElement:{appendChild:function(){return""}}},document.createElement=document.captureStream=document.mozCaptureStream=function(){var e={getContext:function(){return e},play:function(){},pause:function(){},drawImage:function(){},toDataURL:function(){return""},style:{}};return e},i.HTMLVideoElement=function(){}),"undefined"==typeof location&&(i.location={protocol:"file:",href:"",hash:""}),"undefined"==typeof screen&&(i.screen={width:0,height:0}),void 0===d&&(i.URL={createObjectURL:function(){return""},revokeObjectURL:function(){return""}}),i.window=n.g),t=t||"multi-streams-mixer";var r=[],o=!1,s=document.createElement("canvas"),a=s.getContext("2d");s.style.opacity=0,s.style.position="absolute",s.style.zIndex=-1,s.style.top="-1000em",s.style.left="-1000em",s.className=t,(document.body||document.documentElement).appendChild(s),this.disableLogs=!1,this.frameInterval=10,this.width=360,this.height=240,this.useGainNode=!0;var c=this,l=window.AudioContext;void 0===l&&("undefined"!=typeof webkitAudioContext&&(l=webkitAudioContext),"undefined"!=typeof mozAudioContext&&(l=mozAudioContext));var d=window.URL;void 0===d&&"undefined"!=typeof webkitURL&&(d=webkitURL),"undefined"!=typeof navigator&&void 0===navigator.getUserMedia&&(void 0!==navigator.webkitGetUserMedia&&(navigator.getUserMedia=navigator.webkitGetUserMedia),void 0!==navigator.mozGetUserMedia&&(navigator.getUserMedia=navigator.mozGetUserMedia));var u=window.MediaStream;void 0===u&&"undefined"!=typeof webkitMediaStream&&(u=webkitMediaStream),void 0!==u&&void 0===u.prototype.stop&&(u.prototype.stop=function(){this.getTracks().forEach((function(e){e.stop()}))});var h={};function f(){if(!o){var e=r.length,t=!1,n=[];if(r.forEach((function(e){e.stream||(e.stream={}),e.stream.fullcanvas?t=e:n.push(e)})),t)s.width=t.stream.width,s.height=t.stream.height;else if(n.length){s.width=e>1?2*n[0].width:n[0].width;var i=1;3!==e&&4!==e||(i=2),5!==e&&6!==e||(i=3),7!==e&&8!==e||(i=4),9!==e&&10!==e||(i=5),s.height=n[0].height*i}else s.width=c.width||360,s.height=c.height||240;t&&t instanceof HTMLVideoElement&&_(t),n.forEach((function(e,t){_(e,t)})),setTimeout(f,c.frameInterval)}}function _(e,t){if(!o){var n=0,i=0,r=e.width,s=e.height;1===t&&(n=e.width),2===t&&(i=e.height),3===t&&(n=e.width,i=e.height),4===t&&(i=2*e.height),5===t&&(n=e.width,i=2*e.height),6===t&&(i=3*e.height),7===t&&(n=e.width,i=3*e.height),void 0!==e.stream.left&&(n=e.stream.left),void 0!==e.stream.top&&(i=e.stream.top),void 0!==e.stream.width&&(r=e.stream.width),void 0!==e.stream.height&&(s=e.stream.height),a.drawImage(e,n,i,r,s),"function"==typeof e.stream.onRender&&e.stream.onRender(a,n,i,r,s,t)}}function p(){h.AudioContextConstructor||(h.AudioContextConstructor=new h.AudioContext),c.audioContext=h.AudioContextConstructor,c.audioSources=[],!0===c.useGainNode&&(c.gainNode=c.audioContext.createGain(),c.gainNode.connect(c.audioContext.destination),c.gainNode.gain.value=0);var t=0;if(e.forEach((function(e){if(e.getTracks().filter((function(e){return"audio"===e.kind})).length){t++;var n=c.audioContext.createMediaStreamSource(e);!0===c.useGainNode&&n.connect(c.gainNode),c.audioSources.push(n)}})),t)return c.audioDestination=c.audioContext.createMediaStreamDestination(),c.audioSources.forEach((function(e){e.connect(c.audioDestination)})),c.audioDestination.stream}function C(e){var n=document.createElement("video");return function(e,t){"srcObject"in t?t.srcObject=e:"mozSrcObject"in t?t.mozSrcObject=e:t.srcObject=e}(e,n),n.className=t,n.muted=!0,n.volume=0,n.width=e.width||c.width||360,n.height=e.height||c.height||240,n.click(),n.play(),n}function g(t){r=[],(t=t||e).forEach((function(e){if(e.getTracks().filter((function(e){return"video"===e.kind})).length){var t=C(e);t.stream=e,r.push(t)}}))}void 0!==l?h.AudioContext=l:"undefined"!=typeof webkitAudioContext&&(h.AudioContext=webkitAudioContext),this.startDrawingFrames=function(){f()},this.appendStreams=function(t){if(!t)throw"First parameter is required.";t instanceof Array||(t=[t]),t.forEach((function(t){var n=new u;if(t.getTracks().filter((function(e){return"video"===e.kind})).length){var i=C(t);i.stream=t,r.push(i),n.addTrack(t.getTracks().filter((function(e){return"video"===e.kind}))[0])}if(t.getTracks().filter((function(e){return"audio"===e.kind})).length){var o=c.audioContext.createMediaStreamSource(t);c.audioDestination=c.audioContext.createMediaStreamDestination(),o.connect(c.audioDestination),n.addTrack(c.audioDestination.stream.getTracks().filter((function(e){return"audio"===e.kind}))[0])}e.push(n)}))},this.releaseStreams=function(){r=[],o=!0,c.gainNode&&(c.gainNode.disconnect(),c.gainNode=null),c.audioSources.length&&(c.audioSources.forEach((function(e){e.disconnect()})),c.audioSources=[]),c.audioDestination&&(c.audioDestination.disconnect(),c.audioDestination=null),c.audioContext&&c.audioContext.close(),c.audioContext=null,a.clearRect(0,0,s.width,s.height),s.stream&&(s.stream.stop(),s.stream=null)},this.resetVideoStreams=function(e){!e||e instanceof Array||(e=[e]),g(e)},this.name="MultiStreamsMixer",this.toString=function(){return this.name},this.getMixedStream=function(){o=!1;var t=function(){var e;g(),"captureStream"in s?e=s.captureStream():"mozCaptureStream"in s?e=s.mozCaptureStream():c.disableLogs||console.error("Upgrade to latest Chrome or otherwise enable this flag: chrome://flags/#enable-experimental-web-platform-features");var t=new u;return e.getTracks().filter((function(e){return"video"===e.kind})).forEach((function(e){t.addTrack(e)})),s.stream=t,t}(),n=p();return n&&n.getTracks().filter((function(e){return"audio"===e.kind})).forEach((function(e){t.addTrack(e)})),e.forEach((function(e){e.fullcanvas&&!0})),t},this.getMixedAudioStream=p}"undefined"==typeof RecordRTC&&(e.exports=r,void 0===(i=function(){return r}.apply(t,[]))||(e.exports=i))},1046:e=>{e.exports=function(){function e(t,n,i){function r(s,a){if(!n[s]){if(!t[s]){if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[s]={exports:{}};t[s][0].call(l.exports,(function(e){return r(t[s][1][e]||e)}),l,l.exports,e,t,n,i)}return n[s].exports}for(var o=void 0,s=0;s<i.length;s++)r(i[s]);return r}return e}()({1:[function(e,t,n){"use strict";var i=(0,e("./adapter_factory.js").adapterFactory)({window:"undefined"==typeof window?void 0:window});t.exports=i},{"./adapter_factory.js":2}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.adapterFactory=d;var i=l(e("./utils")),r=l(e("./chrome/chrome_shim")),o=l(e("./firefox/firefox_shim")),s=l(e("./safari/safari_shim")),a=l(e("./common_shim")),c=l(e("sdp"));function l(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function d(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).window,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0},n=i.log,l=i.detectBrowser(e),d={browserDetails:l,commonShim:a,extractVersion:i.extractVersion,disableLog:i.disableLog,disableWarnings:i.disableWarnings,sdp:c};switch(l.browser){case"chrome":if(!r||!r.shimPeerConnection||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),d;if(null===l.version)return n("Chrome shim can not determine version, not shimming."),d;n("adapter.js shimming chrome."),d.browserShim=r,a.shimAddIceCandidateNullOrEmpty(e,l),r.shimGetUserMedia(e,l),r.shimMediaStream(e,l),r.shimPeerConnection(e,l),r.shimOnTrack(e,l),r.shimAddTrackRemoveTrack(e,l),r.shimGetSendersWithDtmf(e,l),r.shimGetStats(e,l),r.shimSenderReceiverGetStats(e,l),r.fixNegotiationNeeded(e,l),a.shimRTCIceCandidate(e,l),a.shimConnectionState(e,l),a.shimMaxMessageSize(e,l),a.shimSendThrowTypeError(e,l),a.removeExtmapAllowMixed(e,l);break;case"firefox":if(!o||!o.shimPeerConnection||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),d;n("adapter.js shimming firefox."),d.browserShim=o,a.shimAddIceCandidateNullOrEmpty(e,l),o.shimGetUserMedia(e,l),o.shimPeerConnection(e,l),o.shimOnTrack(e,l),o.shimRemoveStream(e,l),o.shimSenderGetStats(e,l),o.shimReceiverGetStats(e,l),o.shimRTCDataChannel(e,l),o.shimAddTransceiver(e,l),o.shimGetParameters(e,l),o.shimCreateOffer(e,l),o.shimCreateAnswer(e,l),a.shimRTCIceCandidate(e,l),a.shimConnectionState(e,l),a.shimMaxMessageSize(e,l),a.shimSendThrowTypeError(e,l);break;case"safari":if(!s||!t.shimSafari)return n("Safari shim is not included in this adapter release."),d;n("adapter.js shimming safari."),d.browserShim=s,a.shimAddIceCandidateNullOrEmpty(e,l),s.shimRTCIceServerUrls(e,l),s.shimCreateOfferLegacy(e,l),s.shimCallbacksAPI(e,l),s.shimLocalStreamsAPI(e,l),s.shimRemoteStreamsAPI(e,l),s.shimTrackEventTransceiver(e,l),s.shimGetUserMedia(e,l),s.shimAudioContext(e,l),a.shimRTCIceCandidate(e,l),a.shimMaxMessageSize(e,l),a.shimSendThrowTypeError(e,l),a.removeExtmapAllowMixed(e,l);break;default:n("Unsupported browser!")}return d}},{"./chrome/chrome_shim":3,"./common_shim":6,"./firefox/firefox_shim":7,"./safari/safari_shim":10,"./utils":11,sdp:12}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetDisplayMedia=n.shimGetUserMedia=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=e("./getusermedia");Object.defineProperty(n,"shimGetUserMedia",{enumerable:!0,get:function(){return r.shimGetUserMedia}});var o=e("./getdisplaymedia");Object.defineProperty(n,"shimGetDisplayMedia",{enumerable:!0,get:function(){return o.shimGetDisplayMedia}}),n.shimMediaStream=l,n.shimOnTrack=d,n.shimGetSendersWithDtmf=u,n.shimGetStats=h,n.shimSenderReceiverGetStats=f,n.shimAddTrackRemoveTrackWithNative=_,n.shimAddTrackRemoveTrack=p,n.shimPeerConnection=C,n.fixNegotiationNeeded=g;var s=a(e("../utils.js"));function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function d(e){if("object"===(void 0===e?"undefined":i(e))&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var n=this;return this._ontrackpoly||(this._ontrackpoly=function(t){t.stream.addEventListener("addtrack",(function(i){var r=void 0;r=e.RTCPeerConnection.prototype.getReceivers?n.getReceivers().find((function(e){return e.track&&e.track.id===i.track.id})):{track:i.track};var o=new Event("track");o.track=i.track,o.receiver=r,o.transceiver={receiver:r},o.streams=[t.stream],n.dispatchEvent(o)})),t.stream.getTracks().forEach((function(i){var r=void 0;r=e.RTCPeerConnection.prototype.getReceivers?n.getReceivers().find((function(e){return e.track&&e.track.id===i.id})):{track:i};var o=new Event("track");o.track=i,o.receiver=r,o.transceiver={receiver:r},o.streams=[t.stream],n.dispatchEvent(o)}))},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else s.wrapPeerConnectionEvent(e,"track",(function(e){return e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e}))}function u(e){if("object"===(void 0===e?"undefined":i(e))&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){var t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,i){var r=n.apply(this,arguments);return r||(r=t(this,e),this._senders.push(r)),r};var r=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){r.apply(this,arguments);var t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}var o=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var n=this;this._senders=this._senders||[],o.apply(this,[e]),e.getTracks().forEach((function(e){n._senders.push(t(n,e))}))};var s=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._senders=this._senders||[],s.apply(this,[e]),e.getTracks().forEach((function(e){var n=t._senders.find((function(t){return t.track===e}));n&&t._senders.splice(t._senders.indexOf(n),1)}))}}else if("object"===(void 0===e?"undefined":i(e))&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){var a=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){var e=this,t=a.apply(this,[]);return t.forEach((function(t){return t._pc=e})),t},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function h(e){if(e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var e=this,n=Array.prototype.slice.call(arguments),i=n[0],r=n[1],o=n[2];if(arguments.length>0&&"function"==typeof i)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!=typeof i))return t.apply(this,[]);var s=function(e){var t={};return e.result().forEach((function(e){var n={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach((function(t){n[t]=e.stat(t)})),t[n.id]=n})),t},a=function(e){return new Map(Object.keys(e).map((function(t){return[t,e[t]]})))};if(arguments.length>=2){var c=function(e){r(a(s(e)))};return t.apply(this,[c,i])}return new Promise((function(n,i){t.apply(e,[function(e){n(a(s(e)))},i])})).then(r,o)}}}function f(e){if("object"===(void 0===e?"undefined":i(e))&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver){if(!("getStats"in e.RTCRtpSender.prototype)){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,n=t.apply(this,[]);return n.forEach((function(t){return t._pc=e})),n});var n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){var e=this;return this._pc.getStats().then((function(t){return s.filterStats(t,e.track,!0)}))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){var r=e.RTCPeerConnection.prototype.getReceivers;r&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,t=r.apply(this,[]);return t.forEach((function(t){return t._pc=e})),t}),s.wrapPeerConnectionEvent(e,"track",(function(e){return e.receiver._pc=e.srcElement,e})),e.RTCRtpReceiver.prototype.getStats=function(){var e=this;return this._pc.getStats().then((function(t){return s.filterStats(t,e.track,!1)}))}}if("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype){var o=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){var t=arguments[0],n=void 0,i=void 0,r=void 0;return this.getSenders().forEach((function(e){e.track===t&&(n?r=!0:n=e)})),this.getReceivers().forEach((function(e){return e.track===t&&(i?r=!0:i=e),e.track===t})),r||n&&i?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):n?n.getStats():i?i.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return o.apply(this,arguments)}}}}function _(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map((function(t){return e._shimmedLocalStreams[t][0]}))};var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){if(!n)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var i=t.apply(this,arguments);return this._shimmedLocalStreams[n.id]?-1===this._shimmedLocalStreams[n.id].indexOf(i)&&this._shimmedLocalStreams[n.id].push(i):this._shimmedLocalStreams[n.id]=[n,i],i};var n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var t=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach((function(e){if(t.getSenders().find((function(t){return t.track===e})))throw new DOMException("Track already exists.","InvalidAccessError")}));var i=this.getSenders();n.apply(this,arguments);var r=this.getSenders().filter((function(e){return-1===i.indexOf(e)}));this._shimmedLocalStreams[e.id]=[e].concat(r)};var i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],i.apply(this,arguments)};var r=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach((function(n){var i=t._shimmedLocalStreams[n].indexOf(e);-1!==i&&t._shimmedLocalStreams[n].splice(i,1),1===t._shimmedLocalStreams[n].length&&delete t._shimmedLocalStreams[n]})),r.apply(this,arguments)}}function p(e,t){if(e.RTCPeerConnection){if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return _(e);var n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this,t=n.apply(this);return this._reverseStreams=this._reverseStreams||{},t.map((function(t){return e._reverseStreams[t.id]}))};var i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){var n=this;if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach((function(e){if(n.getSenders().find((function(t){return t.track===e})))throw new DOMException("Track already exists.","InvalidAccessError")})),!this._reverseStreams[t.id]){var r=new e.MediaStream(t.getTracks());this._streams[t.id]=r,this._reverseStreams[r.id]=t,t=r}i.apply(this,[t])};var r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},r.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,n){var i=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var r=[].slice.call(arguments,1);if(1!==r.length||!r[0].getTracks().find((function(e){return e===t})))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find((function(e){return e.track===t})))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};var o=this._streams[n.id];if(o)o.addTrack(t),Promise.resolve().then((function(){i.dispatchEvent(new Event("negotiationneeded"))}));else{var s=new e.MediaStream([t]);this._streams[n.id]=s,this._reverseStreams[s.id]=n,this.addStream(s)}return this.getSenders().find((function(e){return e.track===t}))},["createOffer","createAnswer"].forEach((function(t){var n=e.RTCPeerConnection.prototype[t],i=c({},t,(function(){var e=this,t=arguments;return arguments.length&&"function"==typeof arguments[0]?n.apply(this,[function(n){var i=a(e,n);t[0].apply(null,[i])},function(e){t[1]&&t[1].apply(null,e)},arguments[2]]):n.apply(this,arguments).then((function(t){return a(e,t)}))}));e.RTCPeerConnection.prototype[t]=i[t]}));var o=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=l(this,arguments[0]),o.apply(this,arguments)):o.apply(this,arguments)};var s=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get:function(){var e=s.get.apply(this);return""===e.type?e:a(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(e._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};var n=void 0;Object.keys(this._streams).forEach((function(i){t._streams[i].getTracks().find((function(t){return e.track===t}))&&(n=t._streams[i])})),n&&(1===n.getTracks().length?this.removeStream(this._reverseStreams[n.id]):n.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function a(e,t){var n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((function(t){var i=e._reverseStreams[t],r=e._streams[i.id];n=n.replace(new RegExp(r.id,"g"),i.id)})),new RTCSessionDescription({type:t.type,sdp:n})}function l(e,t){var n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((function(t){var i=e._reverseStreams[t],r=e._streams[i.id];n=n.replace(new RegExp(i.id,"g"),r.id)})),new RTCSessionDescription({type:t.type,sdp:n})}}function C(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var n=e.RTCPeerConnection.prototype[t],i=c({},t,(function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}));e.RTCPeerConnection.prototype[t]=i[t]}))}function g(e,t){s.wrapPeerConnectionEvent(e,"negotiationneeded",(function(e){var n=e.target;if(!(t.version<72||n.getConfiguration&&"plan-b"===n.getConfiguration().sdpSemantics)||"stable"===n.signalingState)return e}))}},{"../utils.js":11,"./getdisplaymedia":4,"./getusermedia":5}],4:[function(e,t,n){"use strict";function i(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"==typeof t?e.navigator.mediaDevices.getDisplayMedia=function(n){return t(n).then((function(t){var i=n.video&&n.video.width,r=n.video&&n.video.height,o=n.video&&n.video.frameRate;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:o||3}},i&&(n.video.mandatory.maxWidth=i),r&&(n.video.mandatory.maxHeight=r),e.navigator.mediaDevices.getUserMedia(n)}))}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetDisplayMedia=i},{}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}n.shimGetUserMedia=s;var o=r(e("../utils.js")).log;function s(e,t){var n=e&&e.navigator;if(n.mediaDevices){var r=function(e){if("object"!==(void 0===e?"undefined":i(e))||e.mandatory||e.optional)return e;var t={};return Object.keys(e).forEach((function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var r="object"===i(e[n])?e[n]:{ideal:e[n]};void 0!==r.exact&&"number"==typeof r.exact&&(r.min=r.max=r.exact);var o=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==r.ideal){t.optional=t.optional||[];var s={};"number"==typeof r.ideal?(s[o("min",n)]=r.ideal,t.optional.push(s),(s={})[o("max",n)]=r.ideal,t.optional.push(s)):(s[o("",n)]=r.ideal,t.optional.push(s))}void 0!==r.exact&&"number"!=typeof r.exact?(t.mandatory=t.mandatory||{},t.mandatory[o("",n)]=r.exact):["min","max"].forEach((function(e){void 0!==r[e]&&(t.mandatory=t.mandatory||{},t.mandatory[o(e,n)]=r[e])}))}})),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},s=function(e,s){if(t.version>=61)return s(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"===i(e.audio)){var a=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])};a((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),a(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=r(e.audio)}if(e&&"object"===i(e.video)){var c=e.video.facingMode;c=c&&("object"===(void 0===c?"undefined":i(c))?c:{ideal:c});var l=t.version<66;if(c&&("user"===c.exact||"environment"===c.exact||"user"===c.ideal||"environment"===c.ideal)&&(!n.mediaDevices.getSupportedConstraints||!n.mediaDevices.getSupportedConstraints().facingMode||l)){delete e.video.facingMode;var d=void 0;if("environment"===c.exact||"environment"===c.ideal?d=["back","rear"]:"user"!==c.exact&&"user"!==c.ideal||(d=["front"]),d)return n.mediaDevices.enumerateDevices().then((function(t){var n=(t=t.filter((function(e){return"videoinput"===e.kind}))).find((function(e){return d.some((function(t){return e.label.toLowerCase().includes(t)}))}));return!n&&t.length&&d.includes("back")&&(n=t[t.length-1]),n&&(e.video.deviceId=c.exact?{exact:n.deviceId}:{ideal:n.deviceId}),e.video=r(e.video),o("chrome: "+JSON.stringify(e)),s(e)}))}e.video=r(e.video)}return o("chrome: "+JSON.stringify(e)),s(e)},a=function(e){return t.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}},c=function(e,t,i){s(e,(function(e){n.webkitGetUserMedia(e,t,(function(e){i&&i(a(e))}))}))};if(n.getUserMedia=c.bind(n),n.mediaDevices.getUserMedia){var l=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(e){return s(e,(function(e){return l(e).then((function(t){if(e.audio&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length)throw t.getTracks().forEach((function(e){e.stop()})),new DOMException("","NotFoundError");return t}),(function(e){return Promise.reject(a(e))}))}))}}}}},{"../utils.js":11}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n.shimRTCIceCandidate=c,n.shimMaxMessageSize=l,n.shimSendThrowTypeError=d,n.shimConnectionState=u,n.removeExtmapAllowMixed=h,n.shimAddIceCandidateNullOrEmpty=f;var r=a(e("sdp")),o=s(e("./utils"));function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}function c(e){if(!(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)){var t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"===(void 0===e?"undefined":i(e))&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){var n=new t(e),o=r.default.parseCandidate(e.candidate),s=Object.assign(n,o);return s.toJSON=function(){return{candidate:s.candidate,sdpMid:s.sdpMid,sdpMLineIndex:s.sdpMLineIndex,usernameFragment:s.usernameFragment}},s}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,o.wrapPeerConnectionEvent(e,"icecandidate",(function(t){return t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t}))}}function l(e,t){if(e.RTCPeerConnection){"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp}});var n=function(e){if(!e||!e.sdp)return!1;var t=r.default.splitSections(e.sdp);return t.shift(),t.some((function(e){var t=r.default.parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")}))},i=function(e){var t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;var n=parseInt(t[1],10);return n!=n?-1:n},o=function(e){var n=65536;return"firefox"===t.browser&&(n=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),n},s=function(e,n){var i=65536;"firefox"===t.browser&&57===t.version&&(i=65535);var o=r.default.matchPrefix(e.sdp,"a=max-message-size:");return o.length>0?i=parseInt(o[0].substr(19),10):"firefox"===t.browser&&-1!==n&&(i=2147483637),i},a=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===t.browser&&t.version>=76&&"plan-b"===this.getConfiguration().sdpSemantics&&Object.defineProperty(this,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0}),n(arguments[0])){var e=i(arguments[0]),r=o(e),c=s(arguments[0],e),l=void 0;l=0===r&&0===c?Number.POSITIVE_INFINITY:0===r||0===c?Math.max(r,c):Math.min(r,c);var d={};Object.defineProperty(d,"maxMessageSize",{get:function(){return l}}),this._sctp=d}return a.apply(this,arguments)}}}function d(e){if(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype){var t=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){var e=t.apply(this,arguments);return n(e,this),e},o.wrapPeerConnectionEvent(e,"datachannel",(function(e){return n(e.channel,e.target),e}))}function n(e,t){var n=e.send;e.send=function(){var i=arguments[0],r=i.length||i.size||i.byteLength;if("open"===e.readyState&&t.sctp&&r>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return n.apply(e,arguments)}}}function u(e){if(e.RTCPeerConnection&&!("connectionState"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get:function(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get:function(){return this._onconnectionstatechange||null},set:function(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach((function(e){var n=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=function(e){var t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;var n=new Event("connectionstatechange",e);t.dispatchEvent(n)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}}))}}function h(e,t){if(e.RTCPeerConnection&&!("chrome"===t.browser&&t.version>=71||"safari"===t.browser&&t.version>=605)){var n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(t){if(t&&t.sdp&&-1!==t.sdp.indexOf("\na=extmap-allow-mixed")){var i=t.sdp.split("\n").filter((function(e){return"a=extmap-allow-mixed"!==e.trim()})).join("\n");e.RTCSessionDescription&&t instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:t.type,sdp:i}):t.sdp=i}return n.apply(this,arguments)}}}function f(e,t){if(e.RTCPeerConnection&&e.RTCPeerConnection.prototype){var n=e.RTCPeerConnection.prototype.addIceCandidate;n&&0!==n.length&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===t.browser&&t.version<78||"firefox"===t.browser&&t.version<68||"safari"===t.browser)&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}}},{"./utils":11,sdp:12}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetDisplayMedia=n.shimGetUserMedia=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=e("./getusermedia");Object.defineProperty(n,"shimGetUserMedia",{enumerable:!0,get:function(){return r.shimGetUserMedia}});var o=e("./getdisplaymedia");Object.defineProperty(n,"shimGetDisplayMedia",{enumerable:!0,get:function(){return o.shimGetDisplayMedia}}),n.shimOnTrack=l,n.shimPeerConnection=d,n.shimSenderGetStats=u,n.shimReceiverGetStats=h,n.shimRemoveStream=f,n.shimRTCDataChannel=_,n.shimAddTransceiver=p,n.shimGetParameters=C,n.shimCreateOffer=g,n.shimCreateAnswer=m;var s=a(e("../utils"));function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e){"object"===(void 0===e?"undefined":i(e))&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function d(e,t){if("object"===(void 0===e?"undefined":i(e))&&(e.RTCPeerConnection||e.mozRTCPeerConnection)){!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var n=e.RTCPeerConnection.prototype[t],i=c({},t,(function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}));e.RTCPeerConnection.prototype[t]=i[t]}));var n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var e=Array.prototype.slice.call(arguments),i=e[0],o=e[1],s=e[2];return r.apply(this,[i||null]).then((function(e){if(t.version<53&&!o)try{e.forEach((function(e){e.type=n[e.type]||e.type}))}catch(t){if("TypeError"!==t.name)throw t;e.forEach((function(t,i){e.set(i,Object.assign({},t,{type:n[t.type]||t.type}))}))}return e})).then(o,s)}}}function u(e){if("object"===(void 0===e?"undefined":i(e))&&e.RTCPeerConnection&&e.RTCRtpSender&&(!e.RTCRtpSender||!("getStats"in e.RTCRtpSender.prototype))){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,n=t.apply(this,[]);return n.forEach((function(t){return t._pc=e})),n});var n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}}function h(e){if("object"===(void 0===e?"undefined":i(e))&&e.RTCPeerConnection&&e.RTCRtpSender&&(!e.RTCRtpSender||!("getStats"in e.RTCRtpReceiver.prototype))){var t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,n=t.apply(this,[]);return n.forEach((function(t){return t._pc=e})),n}),s.wrapPeerConnectionEvent(e,"track",(function(e){return e.receiver._pc=e.srcElement,e})),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}}function f(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;s.deprecated("removeStream","removeTrack"),this.getSenders().forEach((function(n){n.track&&e.getTracks().includes(n.track)&&t.removeTrack(n)}))})}function _(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function p(e){if("object"===(void 0===e?"undefined":i(e))&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];var e=arguments[1],n=e&&"sendEncodings"in e;n&&e.sendEncodings.forEach((function(e){if("rid"in e&&!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")}));var i=t.apply(this,arguments);if(n){var r=i.sender,o=r.getParameters();(!("encodings"in o)||1===o.encodings.length&&0===Object.keys(o.encodings[0]).length)&&(o.encodings=e.sendEncodings,r.sendEncodings=e.sendEncodings,this.setParametersPromises.push(r.setParameters(o).then((function(){delete r.sendEncodings})).catch((function(){delete r.sendEncodings}))))}return i})}}function C(e){if("object"===(void 0===e?"undefined":i(e))&&e.RTCRtpSender){var t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){var e=t.apply(this,arguments);return"encodings"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}}function g(e){if("object"===(void 0===e?"undefined":i(e))&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){var e=this,n=arguments;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((function(){return t.apply(e,n)})).finally((function(){e.setParametersPromises=[]})):t.apply(this,arguments)}}}function m(e){if("object"===(void 0===e?"undefined":i(e))&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){var e=this,n=arguments;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((function(){return t.apply(e,n)})).finally((function(){e.setParametersPromises=[]})):t.apply(this,arguments)}}}},{"../utils":11,"./getdisplaymedia":8,"./getusermedia":9}],8:[function(e,t,n){"use strict";function i(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(n){if(!n||!n.video){var i=new DOMException("getDisplayMedia without video constraints is undefined");return i.name="NotFoundError",i.code=8,Promise.reject(i)}return!0===n.video?n.video={mediaSource:t}:n.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(n)})}Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetDisplayMedia=i},{}],9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n.shimGetUserMedia=s;var r=o(e("../utils"));function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function s(e,t){var n=e&&e.navigator,o=e&&e.MediaStreamTrack;if(n.getUserMedia=function(e,t,i){r.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(e).then(t,i)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){var s=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])},a=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(e){return"object"===(void 0===e?"undefined":i(e))&&"object"===i(e.audio)&&(e=JSON.parse(JSON.stringify(e)),s(e.audio,"autoGainControl","mozAutoGainControl"),s(e.audio,"noiseSuppression","mozNoiseSuppression")),a(e)},o&&o.prototype.getSettings){var c=o.prototype.getSettings;o.prototype.getSettings=function(){var e=c.apply(this,arguments);return s(e,"mozAutoGainControl","autoGainControl"),s(e,"mozNoiseSuppression","noiseSuppression"),e}}if(o&&o.prototype.applyConstraints){var l=o.prototype.applyConstraints;o.prototype.applyConstraints=function(e){return"audio"===this.kind&&"object"===(void 0===e?"undefined":i(e))&&(e=JSON.parse(JSON.stringify(e)),s(e,"autoGainControl","mozAutoGainControl"),s(e,"noiseSuppression","mozNoiseSuppression")),l.apply(this,[e])}}}}},{"../utils":11}],10:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n.shimLocalStreamsAPI=s,n.shimRemoteStreamsAPI=a,n.shimCallbacksAPI=c,n.shimGetUserMedia=l,n.shimConstraints=d,n.shimRTCIceServerUrls=u,n.shimTrackEventTransceiver=h,n.shimCreateOfferLegacy=f,n.shimAudioContext=_;var r=o(e("../utils"));function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function s(e){if("object"===(void 0===e?"undefined":i(e))&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){var n=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach((function(i){return t.call(n,i,e)})),e.getVideoTracks().forEach((function(i){return t.call(n,i,e)}))},e.RTCPeerConnection.prototype.addTrack=function(e){for(var n=this,i=arguments.length,r=Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];return r&&r.forEach((function(e){n._localStreams?n._localStreams.includes(e)||n._localStreams.push(e):n._localStreams=[e]})),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._localStreams||(this._localStreams=[]);var n=this._localStreams.indexOf(e);if(-1!==n){this._localStreams.splice(n,1);var i=e.getTracks();this.getSenders().forEach((function(e){i.includes(e.track)&&t.removeTrack(e)}))}})}}function a(e){if("object"===(void 0===e?"undefined":i(e))&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(e){var t=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=function(e){e.streams.forEach((function(e){if(t._remoteStreams||(t._remoteStreams=[]),!t._remoteStreams.includes(e)){t._remoteStreams.push(e);var n=new Event("addstream");n.stream=e,t.dispatchEvent(n)}}))})}});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach((function(t){if(e._remoteStreams||(e._remoteStreams=[]),!(e._remoteStreams.indexOf(t)>=0)){e._remoteStreams.push(t);var n=new Event("addstream");n.stream=t,e.dispatchEvent(n)}}))}),t.apply(e,arguments)}}}function c(e){if("object"===(void 0===e?"undefined":i(e))&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,o=t.setLocalDescription,s=t.setRemoteDescription,a=t.addIceCandidate;t.createOffer=function(e,t){var i=arguments.length>=2?arguments[2]:arguments[0],r=n.apply(this,[i]);return t?(r.then(e,t),Promise.resolve()):r},t.createAnswer=function(e,t){var n=arguments.length>=2?arguments[2]:arguments[0],i=r.apply(this,[n]);return t?(i.then(e,t),Promise.resolve()):i};var c=function(e,t,n){var i=o.apply(this,[e]);return n?(i.then(t,n),Promise.resolve()):i};t.setLocalDescription=c,c=function(e,t,n){var i=s.apply(this,[e]);return n?(i.then(t,n),Promise.resolve()):i},t.setRemoteDescription=c,c=function(e,t,n){var i=a.apply(this,[e]);return n?(i.then(t,n),Promise.resolve()):i},t.addIceCandidate=c}}function l(e){var t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){var n=t.mediaDevices,i=n.getUserMedia.bind(n);t.mediaDevices.getUserMedia=function(e){return i(d(e))}}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,n,i){t.mediaDevices.getUserMedia(e).then(n,i)}.bind(t))}function d(e){return e&&void 0!==e.video?Object.assign({},e,{video:r.compactObject(e.video)}):e}function u(e){if(e.RTCPeerConnection){var t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,n){if(e&&e.iceServers){for(var i=[],o=0;o<e.iceServers.length;o++){var s=e.iceServers[o];!s.hasOwnProperty("urls")&&s.hasOwnProperty("url")?(r.deprecated("RTCIceServer.url","RTCIceServer.urls"),(s=JSON.parse(JSON.stringify(s))).urls=s.url,delete s.url,i.push(s)):i.push(e.iceServers[o])}e.iceServers=i}return new t(e,n)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return t.generateCertificate}})}}function h(e){"object"===(void 0===e?"undefined":i(e))&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function f(e){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);var n=this.getTransceivers().find((function(e){return"audio"===e.receiver.track.kind}));!1===e.offerToReceiveAudio&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==e.offerToReceiveAudio||n||this.addTransceiver("audio"),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);var i=this.getTransceivers().find((function(e){return"video"===e.receiver.track.kind}));!1===e.offerToReceiveVideo&&i?"sendrecv"===i.direction?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":"recvonly"===i.direction&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):!0!==e.offerToReceiveVideo||i||this.addTransceiver("video")}return t.apply(this,arguments)}}function _(e){"object"!==(void 0===e?"undefined":i(e))||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}},{"../utils":11}],11:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.extractVersion=a,n.wrapPeerConnectionEvent=c,n.disableLog=l,n.disableWarnings=d,n.log=u,n.deprecated=h,n.detectBrowser=f,n.compactObject=p,n.walkStats=C,n.filterStats=g;var o=!0,s=!0;function a(e,t,n){var i=e.match(t);return i&&i.length>=n&&parseInt(i[n],10)}function c(e,t,n){if(e.RTCPeerConnection){var i=e.RTCPeerConnection.prototype,r=i.addEventListener;i.addEventListener=function(e,i){if(e!==t)return r.apply(this,arguments);var o=function(e){var t=n(e);t&&(i.handleEvent?i.handleEvent(t):i(t))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(i,o),r.apply(this,[e,o])};var o=i.removeEventListener;i.removeEventListener=function(e,n){if(e!==t||!this._eventMap||!this._eventMap[t])return o.apply(this,arguments);if(!this._eventMap[t].has(n))return o.apply(this,arguments);var i=this._eventMap[t].get(n);return this._eventMap[t].delete(n),0===this._eventMap[t].size&&delete this._eventMap[t],0===Object.keys(this._eventMap).length&&delete this._eventMap,o.apply(this,[e,i])},Object.defineProperty(i,"on"+t,{get:function(){return this["_on"+t]},set:function(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}}function l(e){return"boolean"!=typeof e?new Error("Argument type: "+(void 0===e?"undefined":i(e))+". Please use a boolean."):(o=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function d(e){return"boolean"!=typeof e?new Error("Argument type: "+(void 0===e?"undefined":i(e))+". Please use a boolean."):(s=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function u(){if("object"===("undefined"==typeof window?"undefined":i(window))){if(o)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function h(e,t){s&&console.warn(e+" is deprecated, please use "+t+" instead.")}function f(e){var t={browser:null,version:null};if(void 0===e||!e.navigator)return t.browser="Not a browser.",t;var n=e.navigator;if(n.mozGetUserMedia)t.browser="firefox",t.version=a(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)t.browser="chrome",t.version=a(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else{if(!e.RTCPeerConnection||!n.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=a(n.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return t}function _(e){return"[object Object]"===Object.prototype.toString.call(e)}function p(e){return _(e)?Object.keys(e).reduce((function(t,n){var i=_(e[n]),o=i?p(e[n]):e[n],s=i&&!Object.keys(o).length;return void 0===o||s?t:Object.assign(t,r({},n,o))}),{}):e}function C(e,t,n){t&&!n.has(t.id)&&(n.set(t.id,t),Object.keys(t).forEach((function(i){i.endsWith("Id")?C(e,e.get(t[i]),n):i.endsWith("Ids")&&t[i].forEach((function(t){C(e,e.get(t),n)}))})))}function g(e,t,n){var i=n?"outbound-rtp":"inbound-rtp",r=new Map;if(null===t)return r;var o=[];return e.forEach((function(e){"track"===e.type&&e.trackIdentifier===t.id&&o.push(e)})),o.forEach((function(t){e.forEach((function(n){n.type===i&&n.trackId===t.id&&C(e,n,r)}))})),r}},{}],12:[function(e,t,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};r.localCName=r.generateIdentifier(),r.splitLines=function(e){return e.trim().split("\n").map((function(e){return e.trim()}))},r.splitSections=function(e){return e.split("\nm=").map((function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"}))},r.getDescription=function(e){var t=r.splitSections(e);return t&&t[0]},r.getMediaSections=function(e){var t=r.splitSections(e);return t.shift(),t},r.matchPrefix=function(e,t){return r.splitLines(e).filter((function(e){return 0===e.indexOf(t)}))},r.parseCandidate=function(e){for(var t=void 0,n={foundation:(t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" "))[0],component:{1:"rtp",2:"rtcp"}[t[1]],protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]},i=8;i<t.length;i+=2)switch(t[i]){case"raddr":n.relatedAddress=t[i+1];break;case"rport":n.relatedPort=parseInt(t[i+1],10);break;case"tcptype":n.tcpType=t[i+1];break;case"ufrag":n.ufrag=t[i+1],n.usernameFragment=t[i+1];break;default:void 0===n[t[i]]&&(n[t[i]]=t[i+1])}return n},r.writeCandidate=function(e){var t=[];t.push(e.foundation);var n=e.component;"rtp"===n?t.push(1):"rtcp"===n?t.push(2):t.push(n),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);var i=e.type;return t.push("typ"),t.push(i),"host"!==i&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},r.parseIceOptions=function(e){return e.substr(14).split(" ")},r.parseRtpMap=function(e){var t=e.substr(9).split(" "),n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.channels=3===t.length?parseInt(t[2],10):1,n.numChannels=n.channels,n},r.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var n=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==n?"/"+n:"")+"\r\n"},r.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},r.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},r.parseFmtp=function(e){for(var t={},n=void 0,i=e.substr(e.indexOf(" ")+1).split(";"),r=0;r<i.length;r++)t[(n=i[r].trim().split("="))[0].trim()]=n[1];return t},r.writeFmtp=function(e){var t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var i=[];Object.keys(e.parameters).forEach((function(t){e.parameters[t]?i.push(t+"="+e.parameters[t]):i.push(t)})),t+="a=fmtp:"+n+" "+i.join(";")+"\r\n"}return t},r.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},r.writeRtcpFb=function(e){var t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((function(e){t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),t},r.parseSsrcMedia=function(e){var t=e.indexOf(" "),n={ssrc:parseInt(e.substr(7,t-7),10)},i=e.indexOf(":",t);return i>-1?(n.attribute=e.substr(t+1,i-t-1),n.value=e.substr(i+1)):n.attribute=e.substr(t+1),n},r.parseSsrcGroup=function(e){var t=e.substr(13).split(" ");return{semantics:t.shift(),ssrcs:t.map((function(e){return parseInt(e,10)}))}},r.getMid=function(e){var t=r.matchPrefix(e,"a=mid:")[0];if(t)return t.substr(6)},r.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1]}},r.getDtlsParameters=function(e,t){return{role:"auto",fingerprints:r.matchPrefix(e+t,"a=fingerprint:").map(r.parseFingerprint)}},r.writeDtlsParameters=function(e,t){var n="a=setup:"+t+"\r\n";return e.fingerprints.forEach((function(e){n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),n},r.parseCryptoLine=function(e){var t=e.substr(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},r.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"===i(e.keyParams)?r.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},r.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;var t=e.substr(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},r.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},r.getCryptoParameters=function(e,t){return r.matchPrefix(e+t,"a=crypto:").map(r.parseCryptoLine)},r.getIceParameters=function(e,t){var n=r.matchPrefix(e+t,"a=ice-ufrag:")[0],i=r.matchPrefix(e+t,"a=ice-pwd:")[0];return n&&i?{usernameFragment:n.substr(12),password:i.substr(10)}:null},r.writeIceParameters=function(e){var t="a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n";return e.iceLite&&(t+="a=ice-lite\r\n"),t},r.parseRtpParameters=function(e){for(var t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},n=r.splitLines(e)[0].split(" "),i=3;i<n.length;i++){var o=n[i],s=r.matchPrefix(e,"a=rtpmap:"+o+" ")[0];if(s){var a=r.parseRtpMap(s),c=r.matchPrefix(e,"a=fmtp:"+o+" ");switch(a.parameters=c.length?r.parseFmtp(c[0]):{},a.rtcpFeedback=r.matchPrefix(e,"a=rtcp-fb:"+o+" ").map(r.parseRtcpFb),t.codecs.push(a),a.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(a.name.toUpperCase())}}}return r.matchPrefix(e,"a=extmap:").forEach((function(e){t.headerExtensions.push(r.parseExtmap(e))})),t},r.writeRtpDescription=function(e,t){var n="";n+="m="+e+" ",n+=t.codecs.length>0?"9":"0",n+=" UDP/TLS/RTP/SAVPF ",n+=t.codecs.map((function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType})).join(" ")+"\r\n",n+="c=IN IP4 0.0.0.0\r\n",n+="a=rtcp:9 IN IP4 0.0.0.0\r\n",t.codecs.forEach((function(e){n+=r.writeRtpMap(e),n+=r.writeFmtp(e),n+=r.writeRtcpFb(e)}));var i=0;return t.codecs.forEach((function(e){e.maxptime>i&&(i=e.maxptime)})),i>0&&(n+="a=maxptime:"+i+"\r\n"),t.headerExtensions&&t.headerExtensions.forEach((function(e){n+=r.writeExtmap(e)})),n},r.parseRtpEncodingParameters=function(e){var t=[],n=r.parseRtpParameters(e),i=-1!==n.fecMechanisms.indexOf("RED"),o=-1!==n.fecMechanisms.indexOf("ULPFEC"),s=r.matchPrefix(e,"a=ssrc:").map((function(e){return r.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute})),a=s.length>0&&s[0].ssrc,c=void 0,l=r.matchPrefix(e,"a=ssrc-group:FID").map((function(e){return e.substr(17).split(" ").map((function(e){return parseInt(e,10)}))}));l.length>0&&l[0].length>1&&l[0][0]===a&&(c=l[0][1]),n.codecs.forEach((function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var n={ssrc:a,codecPayloadType:parseInt(e.parameters.apt,10)};a&&c&&(n.rtx={ssrc:c}),t.push(n),i&&((n=JSON.parse(JSON.stringify(n))).fec={ssrc:a,mechanism:o?"red+ulpfec":"red"},t.push(n))}})),0===t.length&&a&&t.push({ssrc:a});var d=r.matchPrefix(e,"b=");return d.length&&(d=0===d[0].indexOf("b=TIAS:")?parseInt(d[0].substr(7),10):0===d[0].indexOf("b=AS:")?1e3*parseInt(d[0].substr(5),10)*.95-16e3:void 0,t.forEach((function(e){e.maxBitrate=d}))),t},r.parseRtcpParameters=function(e){var t={},n=r.matchPrefix(e,"a=ssrc:").map((function(e){return r.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute}))[0];n&&(t.cname=n.value,t.ssrc=n.ssrc);var i=r.matchPrefix(e,"a=rtcp-rsize");t.reducedSize=i.length>0,t.compound=0===i.length;var o=r.matchPrefix(e,"a=rtcp-mux");return t.mux=o.length>0,t},r.writeRtcpParameters=function(e){var t="";return e.reducedSize&&(t+="a=rtcp-rsize\r\n"),e.mux&&(t+="a=rtcp-mux\r\n"),void 0!==e.ssrc&&e.cname&&(t+="a=ssrc:"+e.ssrc+" cname:"+e.cname+"\r\n"),t},r.parseMsid=function(e){var t=void 0,n=r.matchPrefix(e,"a=msid:");if(1===n.length)return{stream:(t=n[0].substr(7).split(" "))[0],track:t[1]};var i=r.matchPrefix(e,"a=ssrc:").map((function(e){return r.parseSsrcMedia(e)})).filter((function(e){return"msid"===e.attribute}));return i.length>0?{stream:(t=i[0].value.split(" "))[0],track:t[1]}:void 0},r.parseSctpDescription=function(e){var t=r.parseMLine(e),n=r.matchPrefix(e,"a=max-message-size:"),i=void 0;n.length>0&&(i=parseInt(n[0].substr(19),10)),isNaN(i)&&(i=65536);var o=r.matchPrefix(e,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substr(12),10),protocol:t.fmt,maxMessageSize:i};var s=r.matchPrefix(e,"a=sctpmap:");if(s.length>0){var a=s[0].substr(10).split(" ");return{port:parseInt(a[0],10),protocol:a[1],maxMessageSize:i}}},r.writeSctpDescription=function(e,t){var n=[];return n="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&n.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),n.join("")},r.generateSessionId=function(){return Math.random().toString().substr(2,21)},r.writeSessionBoilerplate=function(e,t,n){var i=void 0!==t?t:2;return"v=0\r\no="+(n||"thisisadapterortc")+" "+(e||r.generateSessionId())+" "+i+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},r.getDirection=function(e,t){for(var n=r.splitLines(e),i=0;i<n.length;i++)switch(n[i]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return n[i].substr(2)}return t?r.getDirection(t):"sendrecv"},r.getKind=function(e){return r.splitLines(e)[0].split(" ")[0].substr(2)},r.isRejected=function(e){return"0"===e.split(" ",2)[1]},r.parseMLine=function(e){var t=r.splitLines(e)[0].substr(2).split(" ");return{kind:t[0],port:parseInt(t[1],10),protocol:t[2],fmt:t.slice(3).join(" ")}},r.parseOLine=function(e){var t=r.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:t[0],sessionId:t[1],sessionVersion:parseInt(t[2],10),netType:t[3],addressType:t[4],address:t[5]}},r.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;for(var t=r.splitLines(e),n=0;n<t.length;n++)if(t[n].length<2||"="!==t[n].charAt(1))return!1;return!0},"object"===(void 0===t?"undefined":i(t))&&(t.exports=r)},{}]},{},[1])(1)},6740:e=>{var t;window,t=function(){const e=document.createElement("canvas"),t={alpha:!1,antialias:!1,depth:!1,failIfMajorPerformanceCaveat:!0,premultipliedAlpha:!1,preserveDrawingBuffer:!1,stencil:!1};return window.__RtcWEBGL=e.getContext("webgl2",t)||e.getContext("webgl",t)||e.getContext("experimental-webgl",t),!!window.__RtcWEBGL&&function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){e.exports=(()=>{var e={911:(e,t)=>{"use strict";var n=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n)return n;throw new Error("unable to locate global object")}();e.exports=t=n.fetch,n.fetch&&(t.default=n.fetch.bind(n)),t.Headers=n.Headers,t.Request=n.Request,t.Response=n.Response},216:(e,t,n)=>{"use strict";n.r(t),n.d(t,{PaddlejsBackend:()=>z,Runner:()=>K,Transformer:()=>h,env:()=>s,interfaces:()=>i,registerBackend:()=>d});var i={};function r(){var e;if("undefined"!=typeof window)e=window;else if(void 0!==n.g)e=n.g;else{if("undefined"==typeof self)throw new Error("Could not find a global object");e=self}return e}function o(e,t){var n=r();return n[e]||(n[e]=t),n[e]}n.r(i),n.d(i,{GraphType:()=>c});const s=o("env",new(function(){function e(){this.ENV={}}return e.prototype.set=function(e,t){this.ENV[e]=t},e.prototype.get=function(e){return this.ENV[e]},e}())),a=function(){function e(e){this.urlConf={dir:"",main:""},this.separateChunk=!0,this.chunkNum=1,this.dataType="binary",this.params={type:"fetch"},this.inNode=!1,this.isLocalFile=!1,this.realFetch=function(){throw new Error("ERROR: empty fetch funciton")};var t="",n="model.json";if(e.endsWith(".json")){var i=e.lastIndexOf("/")+1;t=e.substr(0,i),n=e.substr(i)}else"/"!==e.charAt(e.length-1)&&(t=e+"/");this.isLocalFile=0!==t.indexOf("http"),this.urlConf={dir:this.isLocalFile?"/"===t.charAt(0)?""+t:"/"+t:t,main:n},this.inNode="node"===s.get("platform")}return e.prototype.load=function(){return e=this,n=function(){var e,t=this;return function(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,(function(n){switch(n.label){case 0:return[4,this.fetchModel()];case 1:return e=n.sent(),this.separateChunk=!!e.chunkNum&&e.chunkNum>0,this.chunkNum=this.separateChunk?e.chunkNum:0,this.separateChunk?"binary"!==this.dataType?[3,3]:[4,this.fetchChunks().then((function(n){return t.traverse(e.vars,n)}))]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2,e]}}))},new((t=void 0)||(t=Promise))((function(i,r){function o(e){try{a(n.next(e))}catch(e){r(e)}}function s(e){try{a(n.throw(e))}catch(e){r(e)}}function a(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(o,s)}a((n=n.apply(e,[])).next())}));var e,t,n},e.prototype.fetchOneChunk=function(e){return this.fetch(e).then((function(e){return e.arrayBuffer()}))},e.prototype.fetchJson=function(e){return this.fetch(e).then((function(e){return e.json()}))},e.prototype.getFileName=function(e){return"chunk_"+e+".dat"},e.prototype.fetchChunks=function(){for(var e=this.chunkNum,t=[],n=1;n<=e;n++)t.push(this.fetchOneChunk(this.urlConf.dir+this.getFileName(n)));return Promise.all(t).then((function(e){var t,n=0,i=[];e.forEach((function(e){t=new Float32Array(e),i.push(t),n+=t.length}));var r=new Float32Array(n),o=0;return i.forEach((function(e){e.forEach((function(e){r[o]=e,o+=1}))})),r}))},e.prototype.traverse=function(e,t){var n,i=0;e.filter((function(e){return e.name})).forEach((function(e){n=e.shape.reduce((function(e,t){return e*t})),e.persistable&&(e.data=t.slice(i,i+n),i+=n)}))},e.prototype.fetch=function(e,t){var i=(t||this.params).method||"get",r=new(this.inNode?n(911).Headers:Headers);return this.realFetch=this.inNode?this.isLocalFile?this.fetchLocalFile:n(911):window.fetch.bind(window),this.realFetch(e,{method:i,headers:r})},e.prototype.fetchLocalFile=function(e){var t=n(993);return new Promise((function(n,i){try{n(t.readFileSync(e,"utf8"))}catch(e){i(e)}}))},e.prototype.fetchModel=function(){var e=this,t=this.params,n=this.urlConf.dir+this.urlConf.main,i=null;return"fetch"===t.type&&(i=new Promise((function(i,r){e.fetch(n,t).then((function(t){return e.isLocalFile&&e.inNode?JSON.parse(t):t.json()})).then((function(e){return i(e)})).then((function(e){return r(e)}))}))),i},e}();var c;!function(e){e.SingleOutput="single",e.MultipleOutput="multiple",e.MultipleInput="multipleInput"}(c||(c={}));var l={opRegistry:{ops:{}},backend:"",backendInstance:null};function d(e,t,n){e&&(l.backend=e),t&&(l.backendInstance=t),n&&Object.keys(n).forEach((function(e){!function(e,t){var n=e.conf,i=e.params,r=e.main,o=e.main_packed,s=void 0===o?"":o,a=e.behaviors,c=void 0===a?[]:a,d=l.backend+"_"+t;l.opRegistry.ops[d]||(l.opRegistry.ops[d]={name:t,conf:n,params:i,main:r,main_packed:s,behaviors:c})}(n[e],e)}))}l=o("GLOBALS",l);const u=function(){function e(e,t,n){void 0===n&&(n=!1),this.id="",this.type="",this.inputs={},this.outputs={},this.attrs={},this.subAttrs=[],this.next=null,this.opData=null,this.isPacked=!1,this.finish=!1;var i=e.inputs,r=e.outputs,o=e.attrs,s=void 0===o?{}:o,a=e.type;this.id=a+"_"+ +new Date+"_"+t,this.inputs=i,this.outputs=r,this.attrs=s,this.subAttrs=e["sub-attrs"]||[],this.type=a,this.isPacked=n||!1,this.finish=!1,this.next=null,this.opData=null,this.isPacked=!1}return Object.defineProperty(e.prototype,"inputsName",{get:function(){var e=this,t=[];return Object.keys(this.inputs).forEach((function(n){t.push(e.inputs[n][0])})),t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"outputsName",{get:function(){return this.outputs.Output||this.outputs.Out||this.outputs.Y},enumerable:!1,configurable:!0}),e.prototype.execute=function(e){"feed"!==this.type&&l.backendInstance.runProgram(this.opData,e)},e}(),h=function(e){this.name=e};var f,_=(f=function(e,t){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}f(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),p={conv2d:function(e,t){var n=e.attrs.strides,i=e.inputs.Input[0],r=e.inputs.Filter[0];if("image"===i)return!1;var o=t.find((function(e){return e.name===i})).shape,s=t.find((function(e){return e.name===r})).shape;return!n.find((function(e){return e>1}))&&o[o.length-1-2]%4==0&&4===s.length&&s[0]%4==0&&s[1]%4==0}};function C(e){return{type:"packed_2_unpacked",attrs:{},inputs:{Input:[e.inputName]},outputs:{Output:[e.outputName]}}}function g(e){return{type:"unpacked_2_packed",attrs:{},inputs:{Input:[e.inputName]},outputs:{Output:[e.outputName]}}}function m(e,t){Object.keys(e.inputs).forEach((function(t){e.inputs[t]=[e.inputs[t]+"_packed"]})),Object.keys(e.outputs).forEach((function(t){e.outputs[t]=[e.outputs[t]+"_packed"]})),e.id=e.type+"_"+ +new Date+"_"+t.length,e.isPacked=!0}const R=function(e){function t(){return e.call(this,"TexturePacking")||this}return _(t,e),t.prototype.transform=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if("webgl"===l.backend&&s.get("webgl_pack_channel")){var n=e[0],i=e[1],r=e[2],o="depthwise_conv2d"===n.type?"conv2d":n.type,a=p[o];if(a&&a(n,i)){var c=n.inputs,d=n.outputs,h=c.Input[0],f=d.Output[0],_=g({inputName:h,outputName:h+"_packed"}),R=r.length;r.push(new u(_,R)),m(n,r);var v=C({inputName:f+"_packed",outputName:f}),I=r.length+1;r.push(new u(v,I))}}},t}(h);var v=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();const I=function(e){function t(){return e.call(this,"FormatInputsX")||this}return v(t,e),t.prototype.transform=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[0];if("concat"===n.type||"connect"===n.type){var i=n.inputs;if(i.X.length>4)throw Error("Not yet supporting concat input tensors more than 4.");if(i.X.length>1){var r=i.X,o=r[0],s=r[1],a=r[2],c=r[3];i.X=[o],s&&(i.Y=[s]),a&&(i.Z=[a],n.type+="_mul"),c&&(i.M=[c])}}},t}(h);var y=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),S=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),r=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,r++)i[r]=o[s];return i};function E(e,t){var n=t.filter((function(t){return t.name===e}));return n.length?n[0].shape:[]}function b(e,t,n,i){for(var r=S(t),o=0,s=0,a=e;s<a.length;s++)o+=E(a[s],i)[n];return r[n]=o,{name:e[e.length-1]+"_out",shape:r}}const w=function(e){function t(){return e.call(this,"splitOp")||this}return y(t,e),t.prototype.transform=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var i=t[0],r=t[1],o=0,s=i.length;o<s;o++){var a=i[o];if("concat"===a.type&&(null===(e=a.inputs)||void 0===e?void 0:e.X)&&!(a.inputs.X.length<=4)){var c=a.attrs,l=a.inputs,d=a.outputs,u=l.X,h=u.length,f=Math.ceil((h-4)/3)+1,_=d.Out[0],p=E(_,r),C=c.axis||0;C=C>-1?C:p.length+C;for(var g=[],m=[],R=u.slice(0,4),v=void 0,I=0;I<f;I++){var y=0===I?R:u.slice(3*I+1,3*(I+1)+1),w=b(y,p,C,r);0!==I&&y.splice(0,0,v.name),w.shape[C]+=v?v.shape[C]:0;var P={Out:[w.name]};m.push({attrs:c,inputs:{X:y},outputs:P,type:"concat"}),g.push(w),v=w}m[f-1].outputs.Out=[_],i.splice.apply(i,S([o,1],m)),r.splice.apply(r,S([r.length-1,0],g))}}},t}(h);var P=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),r=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,r++)i[r]=o[s];return i};function x(e){if(e.length<4){for(var t=[],n=0;n<4-e.length;n++)t.push(1);return t.concat(e)}return P(e)}function T(e){return e.reduce((function(e,t){return e*t}))}function M(e,t){var n=e.length;return 4-n+(t>-1?t:n+t)}var D=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),O="fetch_pack",A="final_nchw";const V=function(e){function t(){return e.call(this,"PackOut")||this}return D(t,e),t.prototype.transform=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(s.get("webgl_pack_output")){var n=e[0],i=e[1],r=n.find((function(e){return"fetch"===e.type})),o=r.inputs.X[0],a=i.find((function(e){return e.name===o})),c=x(a.shape),l=c[0],d=c[1],u=c[2],h=c[3],f={attrs:{},inputs:{X:[o]},outputs:{Y:[A]},type:"nhwc_2_nchw"},_={attrs:{},inputs:{X:[A]},outputs:{Y:[O]},type:"pack_out"},p={name:A,shape:[l,d,u,h],persistable:!1},C=d*h,g=Math.ceil(l*u/4),m={name:O,shape:[1,1,g,C],persistable:!1};r.inputs.X=[O],r.attrs.origin_shape=[l,d,u,h],n.push.apply(n,[f,_]),i.push.apply(i,[p,m])}},t}(h),k={preTransforms:[new w,new V],transforms:[new I,new R],postTransforms:[]};var N,L=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),r=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,r++)i[r]=o[s];return i};function U(e,t){return e&&e[t]||[]}!function(e){e.PreTransforms="preTransforms",e.Transforms="transforms",e.PostTransforms="postTransforms"}(N||(N={}));const F=function(){function e(e,t){this.weightMap=[],this.ops=[],this.vars=[],this.config={},this.type=c.SingleOutput,this.plugins=null,this.ops=e.ops,this.vars=e.vars,this.type=t.type||this.type,this.plugins=t.plugins,this.config=t}return e.prototype.createGraph=function(){return this.preTransforms(),this.createOpsMap(),this.arrangeMap(),this.postTransforms(),this.weightMap},e.prototype.preTransforms=function(){var e=this;L(k.preTransforms,U(this.plugins,N.PreTransforms)).forEach((function(t){t.transform(e.ops,e.vars,e.config)}))},e.prototype.transforms=function(e,t){var n=this;L(k.transforms,U(this.plugins,N.Transforms)).forEach((function(i){i.transform(e,n.vars,t)}))},e.prototype.postTransforms=function(){var e=this;L(k.postTransforms,U(this.plugins,N.PostTransforms)).forEach((function(t){t.transform(e.weightMap,e.vars,e.type)}))},e.prototype.createOpsMap=function(){for(var e=[],t=0;t<this.ops.length;t++){var n=e.length,i=this.ops[t],r=new u(i,n);this.transforms(r,e),e.push(r)}this.weightMap=e},e.prototype.arrangeMap=function(){for(var e={},t=[],n={},i=function(i){for(var o=r.weightMap[i],s=0;s<o.outputsName.length;s++){var a=o.outputsName[s];e[a]=!0}t[i]=0,n[o.id]=i,o.inputsName.length>1?o.inputsName.forEach((function(n){!0===e[n]&&t[i]++})):t[i]=o.inputsName.length},r=this,o=0;o<this.weightMap.length;o++)i(o);this.topoSort(this.weightMap,t,n)},e.prototype.topoSort=function(e,t,n){var i=[];i.push(e[0]);for(var r=e.slice(0),o=null,s=e[0];i.length>0;){null!=o&&(e[n[o.id]].next=s.id),o=s,s=i.pop()||{};for(var a=0;a<s.outputsName.length;a++)for(var c=0;c<r.length;c++)for(var l=0;l<r[c].inputsName.length;l++)if(r[c].inputsName[l]===s.outputsName[a]&&(t[n[r[c].id]]--,0===t[n[r[c].id]])){i.push(e[n[r[c].id]]),r.splice(c,1),c--;break}}},e.prototype.getFeedExecutor=function(){return this.weightMap.find((function(e){return"feed"===e.type}))},e.prototype.getFetchExecutor=function(){return this.weightMap.find((function(e){return"fetch"===e.type}))},e.prototype.getExecutorById=function(e){return this.weightMap.find((function(t){return t.id===e}))},e}(),j=function(){function e(e){this.opts={},this.isPacked=!1,this.name="",this.tensorId="",this.total=1,this.shape=[],this.unformattedShapeLength=0,this.shape_texture=[],this.exceedMax=!1,this.data=null,this.opts=e,this.isPacked=e.isPacked||!1,this.name=e.name,this.tensorId=e.type,this.unformattedShapeLength=e.shape.length,this.shape=x(e.shape);var t=this.shape;if(this.total=t.reduce((function(e,t){return e*t})),!e.noLayout){var n=function(e,t){void 0===e&&(e=[]),void 0===t&&(t=!1);var n=l.backendInstance.MAX_TEXTURE_SIZE||4096,i=e[0],r=e[1],o=e[2],s=e[3],a=i*o,c=r*s,d=!1;if(t)return{exceedMax:d,shape:[4,a,c],packedShape:[i,r,o,s],packedTextureShape:[4,a,r*s],zeroNumber:a*r*s*4-a*c};if((a>n||c>n)&&(console.error("大小超限",e),a*=4,c=r*Math.ceil(s/4),d=!0,a>n||c>n))throw new Error("Requested texture size ["+c+"x"+a+"] greater than WebGL maximum on this browser / GPU ["+n+"x"+n+"].");return{exceedMax:d,shape:[4,a,c],zeroNumber:0}}(t,e.isPacked),i=n.exceedMax,r=n.shape;if(this.shape_texture=r,this.exceedMax=i,e.type.endsWith("image"))this.data=e.data;else if(e.data&&e.data.length){var o=function(e,t){for(var n=t[0],i=t[1],r=t[2],o=t[3],s=r*o,a=i*r*o,c=[],l=0;l<n;l++)for(var d=0;d<r;d++)for(var u=0;u<o;u++)for(var h=0;h<i;h++)c.push(e[l*a+h*s+d*o+u]);return c}(e.data,[t[0],t[1]*(this.isPacked?4:1),t[2],t[3]]);this.data=new Float32Array(o),e.data=null}}}return Object.defineProperty(e.prototype,"width_texture",{get:function(){var e=this.shape_texture.length;return this.shape_texture[e-1]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height_texture",{get:function(){var e=this.shape_texture.length;return this.shape_texture[e-2]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width_shape",{get:function(){var e=this.shape.length;return this.shape[e-1]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height_shape",{get:function(){var e=this.shape.length;return this.shape[e-2]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"channel",{get:function(){var e=this.shape.length;return this.shape[e-3]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"binding",{get:function(){return this.opts.binding},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"limit",{get:function(){return this.exceedMax?"Limit":""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"length_shape",{get:function(){return this.shape.length||0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"length_unformatted_shape",{get:function(){return this.unformattedShapeLength||0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"total_shape",{get:function(){return this.total},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"numbers_shape",{get:function(){for(var e=[],t=this.shape.length,n=0;n<t-1;n++){var i=this.shape.slice(n+1).reduce((function(e,t){return e*t}));e.push(i)}return e.push(1),e},enumerable:!1,configurable:!0}),e}(),B={adaptPaddings:function(){for(var e in this.attrs)if(Object.prototype.hasOwnProperty.call(this.attrs,e)&&"paddings"===e){var t=this.attrs[e],n=t[0],i=t[1];return void(0===n&&1===i&&(this.attrs[e][1]=0))}},setAdaptive:function(){this.attrs.adaptive&&2===this.attrs.ksize.length&&1===this.attrs.ksize[0]&&1===this.attrs.ksize[1]&&(this.attrs.adaptive=!1,this.attrs.global_pooling=!0)},isGlobalPooling:function(){var e=this.input.X[0]||{},t=e.shape&&e.shape.length||0;t>2&&this.attrs.global_pooling&&(this.attrs.ksize=[e.shape[t-2],e.shape[t-1]])},setPacked:function(e){var t=this;void 0===e&&(e=[]);var n=this.attrs.ispacked;e.forEach((function(e){"origin"===e.tensorName&&n&&(e.isPacked=!0,t.name.indexOf("pool")>-1&&(t.name+="_winograd"))}))},mergeAttrs:function(){this.attrs=this.subAttrs.reduce((function(e,t){return Object.assign(e,t)}),{})},isApplySeparableConv:function(e){if(void 0===e&&(e=[]),!this.isPackedOp){var t=this.attrs.groups,n=e.filter((function(e){var n=e.shape,i=e.tensorName,r=n[0],o=n[1];return r===t&&1===o&&"filter"===i}));"depthwise_conv2d"===this.name&&(this.name="conv2d"),n&&n.length&&(this.name+="_depthwise")}},batchComputeConv2d:function(){try{var e=this.input.Filter[0].shape[1];this.attrs.filter_nearest_vec4=4*Math.floor(e/4),this.attrs.filter_remainder_vec4=e%4}catch(e){console.error(e)}},processBias:function(e){void 0===e&&(e=[]);var t=e.find((function(e){return"bias"===e.tensorName}));if(t&&this.isPackedOp){t.packed=!0;var n=t.shape,i=[n[n.length-1]/4,1,1];t.shape=i}else if(!t){var r=e.find((function(e){return"out"===e.tensorName})).shape,o=r[r.length-3],s=this.isPackedOp?[o,1,1]:[o],a=this.isPackedOp?4*o:o;e.push({name:"conv1_scale_offset_custom",packed:this.isPackedOp,needBatch:!0,persistable:!0,shape:s,data:Array.from(new Float32Array(a),(function(){return 0})),tensorName:"bias"})}},isMax:function(){var e="max"===this.attrs.pooling_type?1:0;this.attrs.pooling_type=e,1===e&&(this.name+="_max")},transToPrelu:function(){this.data.multi_value="0.0",this.data.active_function="prelu"},transToRelu6:function(){this.data.multi_value=this.attrs.threshold,this.data.active_function="relu6"},transToHardSigmoid:function(){this.data.multi_value=this.attrs.slope||.2,this.data.bias_value=this.attrs.offset||.5,this.data.active_function="hardSigmoid"},transToLeakyrelu:function(){this.data.multi_value=this.attrs.alpha,this.data.active_function="leakyRelu",this.name="relu"},transToPow:function(){this.data.multi_value=this.attrs.factor||2,this.data.active_function="pow_func",this.name="pow"},transToSigmoid:function(){this.data.active_function="sigmoid"},transToSqrt:function(){this.data.active_function="sqrt"},transToTanh:function(){this.data.active_function="tanh_func"},transToScale:function(){var e=this.attrs.scale;this.data.multi_value=void 0!==e?e:1,this.data.bias_value=this.attrs.bias||0;var t=this.attrs.bias_after_scale;this.data.active_function=t||void 0===t?"scale":"scaleWidthBias"},setActiveFunc:function(){var e=this.realName.replace("conv2d-elementwise_add-","");this.data=Object.assign({active_function:"scale",multi_value:"1.0",bias_value:"0.0",fuse_relu:!1},this.data),"leaky_relu"===e&&(this.data.multi_value=this.attrs.alpha,this.data.active_function="leakyRelu")},normalizeDim:function(){for(var e=this.input.X[0].shape,t=x(e),n=M(e,this.attrs.axis),i=[],r=0;r<t[n];r++)i[r]=r;if(this.attrs.target_length=i.length,this.attrs.target_value=i,this.attrs.inputs_dim=t[n],this.attrs.dim=n,this.input.Y){var o=x(this.input.Y[0].shape);this.attrs.append_num=o[n]}if(this.input.M){this.attrs.fourInputs=!0;var s=x(this.input.M[0].shape);this.attrs.fourth_num=s[n]}},processAxis:function(){var e=this.input.X[0].shape,t=this.input.Y[0].shape,n=this.attrs.axis||-1;this.attrs.counterLen=t.length,T(e)===T(t)?(this.attrs.axis=0,this.attrs.counterLen=4):(-1===n&&(n=e.length-t.length),this.attrs.axis=M(e,n))},genElementwiseCounterPos:function(){for(var e=this.attrs,t=e.counterLen,n=["0","0","0","0"],i=e.axis,r=4-t;r<4;r++)n[r]="oPos["+i+++"]";this.attrs.counterPos=n.join(",")},flattenShape:function(e){void 0===e&&(e=[]);var t=e.find((function(e){return e.shape.length>2}));if(t){var n=x(t.shape);t.shape=[n[0]*n[2],n[1]*n[3]]}},reshape:function(e){void 0===e&&(e=[]);var t=e.find((function(e){return"origin"===e.tensorName})),n=e.find((function(e){return"counter"===e.tensorName})),i=e.find((function(e){return"out"===e.tensorName||"output"===e.tensorName}));if(n.shape.length>t.shape.length){var r=n;n=t,t=r}if(t.shape.length>2&&2===n.shape.length){var o=function(e,t){void 0===e&&(e=[]),void 0===t&&(t=[]);var n=e.reduce((function(e,t){return e*t}));return 1===t.length?[1,n]:[t[0],n/t[0]]}(t.shape,i.shape);t.shape=o}},checkIsMerge:function(){var e=this.realName.replace("conv2d-elementwise_add-","");this.name="conv2d_elementwise_add","leaky_relu"===e&&(this.data.multi_value=this.attrs.alpha,this.data.active_function="leakyRelu")}};var H=function(){return(H=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};const $=function(){function e(e,t,n,i,r){this.name="",this.realName="",this.isPackedOp=!1,this.input={},this.output={},this.data={},this.attrs={},this.subAttrs=[],this.inputTensors=[],this.outputTensors=[],this.fShaderParams=[],this.vars=[],this.iLayer=0,this.program=[],this.renderData=[],this.tensorData=[],this.isFinalOp=!1;var o=e.type,s=e.inputs,a=e.outputs,c=e.attrs,l=e.isPacked;this.modelName=r,this.attrs=c,this.subAttrs=e.subAttrs,this.name=o,this.realName=o,this.isPackedOp=l,this.vars=n,this.iLayer=t,this.isFinalOp=i,this.input=s,this.output=a,this.inputTensors=[],this.outputTensors=[],this.fShaderParams=[],this.program=[],this.renderData=[],this.constructTensorData(),this.buildTensor(),this.buildShaderParams(),this.buildProgram()}return e.prototype.constructTensorData=function(){var e=this;Object.keys(this.output).forEach((function(t){e.output[t].forEach((function(n,i){e.output[t][i]=e.getTensorVar(n)[0]}))})),Object.keys(this.input).forEach((function(t){e.input[t]=e.getTensorVar(e.input[t][0])}));var t=function(t){if(Object.prototype.hasOwnProperty.call(n.output,t))try{var i=n.output[t]||[{}],r=n.getExactTensorName(t,"output");r&&i.forEach((function(t,n){t.tensorName=r,e.tensorData.push(H(H({},t),{tensorName:r,runtime:n}))}))}catch(e){console.error(e)}},n=this;for(var i in this.output)t(i);for(var i in this.input)if(Object.prototype.hasOwnProperty.call(this.input,i)){var r=this.input[i].length>0?this.input[i]:[{}],o=this.getExactTensorName(i,"input");if(o){var s=r[0];s.tensorName=o,this.tensorData.push(H(H({},s),{tensorName:o}))}}},e.prototype.getExactTensorName=function(e,t){return"input"===t?{input:"origin",x:"origin",filter:"filter",y:"counter",z:"appender",m:"fourth",scale:"scale",bias:"bias",mean:"mean",variance:"variance",w:"weight"}[e.toLowerCase()]||e.toLowerCase():{output:"out",y:"out",out:"out",scale:"scale",bias:"bias",mean:"mean",variance:"variance",mask:"out"}[e.toLowerCase()]},e.prototype.getTensorVar=function(e){var t=this.vars.filter((function(t){return t.name===e||t.name===e.replace(/_packed$/,"")}));return t.length>0&&e.endsWith("_packed")?[function(e,t){var n=3===e.shape.length?P([1],e.shape):e.shape,i=n[0],r=n[1],o=n[2],s=n[3],a=Object.assign({},e);if(a.name=t,a.packed=!1,r%4==0){var c=r/4;a.packed=!0,a.shape=[i,c,o,s]}return a}(t[0],e)]:t},e.prototype.buildProgram=function(){var e=this,t=this.name,n=this.inputTensors;this.program=this.outputTensors.map((function(i,r){return l.backendInstance.createProgram({name:t,outTensor:i,inputTensors:n,shaderParams:e.fShaderParams[r],runtime:r,isPacked:e.isPackedOp||!1})}))},e.prototype.processTensorDataAndAttrs=function(){var e=this;try{this.name.indexOf("conv2d-elementwise_add")>-1&&(this.name="conv2d_elementwise_add"),this.name.indexOf("flatten2")>-1&&(this.name="reshape2"),this.name.indexOf("max_pool2d_with_index")>-1&&(this.name="pool2d_max");var t=this.tensorData,n=l.backend+"_"+this.name;(l.opRegistry.ops[n]&&l.opRegistry.ops[n].behaviors||[]).forEach((function(n){B[n].call(e,t)}))}catch(e){console.error(e)}},e.prototype.buildTensor=function(){var e=this;this.processTensorDataAndAttrs(),this.tensorData.forEach((function(t,n){var i,r=t.tensorName,o=new j({type:e.modelName+"_"+t.name,name:r,shape:t.shape,data:t.data||null,isPacked:e.isPackedOp||!1,binding:n,noLayout:null===(i=l.backendInstance)||void 0===i?void 0:i.noLayout});"out"===r?e.outputTensors.push(o):e.inputTensors.push(o),t.shape=o.shape,t.total=o.total}))},e.prototype.buildShaderParams=function(){var e=this,t=["length_shape","length_unformatted_shape","width_shape","height_shape","width_texture","height_texture","limit","channel","total_shape","binding"];for(var n in this.attrs)if(Object.prototype.hasOwnProperty.call(this.attrs,n)){var i=this.attrs[n];this.data[n]=i}this.inputTensors.forEach((function(n){t.forEach((function(t){e.data[t+"_"+n.name]=n[t]}))})),this.outputTensors.forEach((function(n){var i=JSON.parse(JSON.stringify(e.data));t.forEach((function(e){i[e+"_"+n.name]=n[e]})),e.fShaderParams.push(i)}))},e}(),q=function(){function e(){this.targetContext={},this.gapFillWith="#fff",this.mean=[0,0,0],this.std=[1,1,1],this.bgr=!1,this.result=[],this.pixelWidth=224,this.pixelHeight=224,this.inputFeed=[];var e=document.createElement("canvas");this.targetContext=e.getContext("2d")}return e.prototype.process=function(e,t){var n=t.feedShape,i=t.fill,r=t.targetSize,o=t.scale,s=t.mean,a=t.std,c=t.bgr,l=n.fh,d=n.fw,u=e,h={gapFillWith:i||this.gapFillWith,mean:s||this.mean,std:a||this.std,bgr:c||this.bgr,scale:o,targetSize:r,targetShape:[1,3,l,d]};if(0===this.result.length){var f=h.targetShape,_=f[1],p=f[2],C=f[3];this.result=new Float32Array(p*C*_)}return this.fromPixels(u,h)||[]},e.prototype.fromPixels=function(e,t){var n,i=[];return e instanceof HTMLImageElement||e instanceof HTMLVideoElement||e instanceof HTMLCanvasElement?(this.pixelWidth=e.width,this.pixelHeight=e.height,t.scale&&t.targetSize?i=this.resizeAndFitTargetSize(e,t):t.targetSize?(n=this.fitToTargetSize(e,t),i=this.getImageData(0,0,n)):(n=this.reSize(e,t),i=this.getImageData(0,0,n)),t.gray&&(i=this.grayscale(i)),t.reShape&&(i=this.reshape(i,t,n)),t.targetShape&&(i=this.allReshapeToRGB(i,t)),[{data:i,shape:t.targetShape||t.shape,name:"image"}]):[{data:i,shape:t.shape||t.targetShape,name:"image"}]},e.prototype.reshape=function(e,t,n){for(var i=n.sw,r=n.sh,o=t.width,s=t.height,a=Math.ceil((i-o)/2),c=Math.ceil((r-s)/2),l=e.data,d=[],u=[],h=[],f=t.mean,_=t.std,p=0;p<l.length;p+=4){var C=p/4,g=Math.floor(C/i),m=C-g*i-1;m>=a&&m<a+o&&g>=c&&g<c+s&&(d.push((l[p]/255-f[0])/_[0]),u.push((l[p+1]/255-f[1])/_[1]),h.push((l[p+2]/255-f[2])/_[2]))}return d.concat(u.concat(h))},e.prototype.allReshapeToRGB=function(e,t){for(var n=t.mean,i=t.std,r=t.targetShape,o=t.bgr,s=r[1],a=r[2],c=r[3],l=e.data||e,d=this.result,u=0,h=0;h<a;++h)for(var f=h*c,_=0;_<c;++_)for(var p=f+_,C=0;C<s;++C){var g=o?4*p+(2-C):4*p+C;d[u]=l[g]/255,d[u]-=n[C],d[u]/=i[C],u++}return d},e.prototype.reSize=function(e,t){var n=this.pixelWidth,i=this.pixelHeight;return n=i=t.scale,this.targetContext.canvas.width=n,this.targetContext.canvas.height=i,this.targetContext.drawImage(e,0,0,n,i),{sw:n,sh:i}},e.prototype.resizeAndFitTargetSize=function(e,t){var n=this.pixelWidth,i=this.pixelHeight,r=n,o=i;n<i?(r=t.scale,o=Math.round(r*i/n)):(o=t.scale,r=Math.round(o*n/i)),this.targetContext.canvas.width=r,this.targetContext.canvas.height=o;var s=t.targetSize.width,a=t.targetSize.height;this.targetContext.drawImage(e,0,0,r,o);var c=(r-s)/2,l=(o-a)/2;return r=s,o=a,this.getImageData(c,l,{sw:r,sh:o})},e.prototype.fitToTargetSize=function(e,t){var n=t.targetSize.width,i=t.targetSize.height;this.targetContext.canvas.width=n,this.targetContext.canvas.height=i,this.targetContext.fillStyle=t.gapFillWith,this.targetContext.fillRect(0,0,i,n);var r=n,o=i,s=0,a=0;return n/i*this.pixelHeight/this.pixelWidth>=1?(r=Math.round(o*this.pixelWidth/this.pixelHeight),s=Math.floor((n-r)/2)):(o=Math.round(r*this.pixelHeight/this.pixelWidth),a=Math.floor((i-o)/2)),this.targetContext.drawImage(e,s,a,r,o),{sw:n,sh:i}},e.prototype.getImageData=function(e,t,n){var i=n.sw,r=n.sh;return this.targetContext.getImageData(e,t,i,r)},e.prototype.grayscale=function(e){for(var t=e.data,n=0;n<t.length;n+=4){var i=(t[n]+t[n+1]+t[n+2])/3;t[n]=i,t[n+1]=i,t[n+2]=i}return t},e}();var W=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))},G=function(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};const K=function(){function e(e){this.modelConfig={},this.isPaused=!1,this.model={},this.weightMap=[],this.isExecuted=!1,this.test=!1,this.graphGenerator={},this.mediaProcessor=null,this.needPreheat=!0,this.modelConfig=Object.assign({},e),this.needPreheat=void 0===e.needPreheat||e.needPreheat,this.modelName=e.modelName||Date.now().toString(),this.weightMap=[],s.set("ns",r()),"node"!==s.get("platform")&&(this.mediaProcessor=new q)}return e.prototype.init=function(){return W(this,void 0,void 0,(function(){return G(this,(function(e){switch(e.label){case 0:return l.backendInstance?[4,l.backendInstance.init()]:(console.error("ERROR: Haven't register backend"),[2]);case 1:return e.sent(),this.isExecuted=!1,[4,this.load()];case 2:return e.sent(),this.genFeedData(),this.genGraph(),this.genOpData(),this.needPreheat?[4,this.preheat()]:[3,4];case 3:return[2,e.sent()];case 4:return[2]}}))}))},e.prototype.load=function(){return W(this,void 0,void 0,(function(){var e,t,n;return G(this,(function(i){switch(i.label){case 0:return e=this.modelConfig.modelPath,t=new a(e),n=this,[4,t.load()];case 1:return n.model=i.sent(),[2]}}))}))},e.prototype.genGraph=function(){this.graphGenerator=new F(this.model,this.modelConfig),this.weightMap=this.graphGenerator.createGraph()},e.prototype.genOpData=function(){var e=this,t=0;this.weightMap.forEach((function(n,i){var r=n.type;if("feed"!==r&&"fetch"!==r){t++;var o=i===e.weightMap.length-2,s=new $(n,t,e.model.vars,o,e.modelName);n.opData=s}}))},e.prototype.preheat=function(){return W(this,void 0,void 0,(function(){var e;return G(this,(function(t){switch(t.label){case 0:return[4,this.checkModelLoaded()];case 1:return t.sent(),[4,this.execute()];case 2:return e=t.sent(),this.isExecuted=!0,[2,e]}}))}))},e.prototype.checkModelLoaded=function(){return W(this,void 0,void 0,(function(){return G(this,(function(e){switch(e.label){case 0:return 0!==this.weightMap.length?[3,2]:(console.info("It's better to preheat the model before running."),[4,this.load()]);case 1:e.sent(),this.genFeedData(),this.genGraph(),this.genOpData(),this.isExecuted=!1,e.label=2;case 2:return[2]}}))}))},e.prototype.predict=function(e,t){return W(this,void 0,void 0,(function(){var n,i;return G(this,(function(r){switch(r.label){case 0:return this.isPaused||!this.mediaProcessor?[2]:(n=this.mediaProcessor.process(e,this.modelConfig),this.updateFeedData(n),[4,this.execute()]);case 1:return i=r.sent(),this.isExecuted=!0,[2,t?t(i):i]}}))}))},e.prototype.predictWithFeed=function(e,t,n){var i;return W(this,void 0,void 0,(function(){var r,o,s,a,c,l,d,u,h;return G(this,(function(f){switch(f.label){case 0:return r=this.modelConfig.feedShape,o=r.fw,s=r.fh,Array.isArray(e)?(null===(i=e[0])||void 0===i?void 0:i.data)?((u=e[0].data)instanceof Float32Array||(e[0].data=new Float32Array(u)),a=e):a=[{data:new Float32Array(e),shape:n||[1,3,s,o],name:"image"}]:(l=(c=e).width,d=c.height,u=c.data,a=[{data:new Float32Array(u),shape:n||[1,3,d||s,l||o],name:"image"}]),this.updateFeedData(a),[4,this.execute()];case 1:return h=f.sent(),this.isExecuted=!0,[2,t?t(h):h]}}))}))},e.prototype.genFeedData=function(){var e,t,n=this.modelConfig,i=n.type,r=n.feedShape,o=r.fh,s=r.fw,a=this.model.vars;if(i===c.MultipleInput){var l=this.model.ops&&this.model.ops[0]&&(null===(e=this.model.ops[0].inputs)||void 0===e?void 0:e.X);l.length>1&&(t=l.map((function(e){var t=a.find((function(t){return t.name===e})),n=t.shape.reverse(),i=n[0],r=n[1],o=n[2],s=void 0===o?3:o,c=n[3],l=void 0===c?1:c;return t.data=new Float32Array(l*s*r*i),t})))}else{if(t=a.find((function(e){return"image"===e.name})))return void(t.data=new Float32Array(3*o*s).fill(1));t={data:new Float32Array(3*o*s).fill(1),name:"image",shape:[1,3,o,s]}}a.push(t)},e.prototype.updateFeedData=function(e){this.weightMap.find((function(e){return e.opData?e.opData.inputTensors.find((function(e){return e.tensorId.endsWith("_image")})):null})).opData.inputTensors.find((function(e){return e.tensorId.endsWith("_image")})).data=e[0].data},e.prototype.execute=function(){return W(this,void 0,void 0,(function(){var e,t,n,i;return G(this,(function(r){switch(r.label){case 0:return e=this.graphGenerator.getFeedExecutor(),this.executeOp(e),[4,this.read()];case 1:return t=r.sent(),(n=this.model.multiOutputs)?(i=0,[2,n.map((function(e){var n,r=T(e.shape),o=t.slice(i,r+i);return i+=r,(n={})[e.name]=o,n}))]):[2,t]}}))}))},e.prototype.executeOp=function(e){var t;if("fetch"!==e.type)if(e.execute(this.isExecuted),s.get("debug")&&(null===(t=e.opData)||void 0===t?void 0:t.outputTensors)&&e.opData.outputTensors[0]&&e.opData.outputTensors[0].tensorId===this.modelName+"_"+s.get("ns").layerName)console.info(e.opData.name+"_"+e.opData.iLayer,"runner op");else if(e.next){var n=e.next,i=this.graphGenerator.getExecutorById(n);this.executeOp(i)}},e.prototype.read=function(){return W(this,void 0,void 0,(function(){var e,t,n;return G(this,(function(i){switch(i.label){case 0:return e=this.graphGenerator.getFetchExecutor(),t=this.model.vars.find((function(t){return t.name===e.inputs.X[0]})),n={name:t.name,shape:e.attrs.origin_shape||t.shape},[4,l.backendInstance.read(n)];case 1:return[2,i.sent()]}}))}))},e.prototype.stopPredict=function(){this.isPaused=!0},e}(),z=function(){}},993:()=>{}},t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={exports:{}};return e[i](r,r.exports,n),r.exports}return n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(216)})()},function(e,t,n){e.exports=n(3)},function(e,t,n){self,e.exports=(()=>{"use strict";var e={740:(e,t,n)=>{n.r(t),n.d(t,{GLHelper:()=>_,glInstance:()=>se,webgl_types:()=>o});var i={};n.r(i),n.d(i,{hardSigmoid:()=>q,leakyRelu:()=>j,pow_func:()=>G,prelu:()=>U,relu6:()=>F,scale:()=>B,scaleWidthBias:()=>H,sigmoid:()=>$,sqrt:()=>W,tanh_func:()=>K,transferFromNHWCtoNCHW:()=>L});var r={};n.r(r),n.d(r,{getPixelsFromTexturePos:()=>Y,getSamplerCode:()=>ee,getTensorPosFromArrayIndex:()=>X,getValueFromTensorPos:()=>z,getValueFromTensorPosPacked:()=>J,getValueFromTensorPosPacking:()=>Q,moveTexture2PosToReal:()=>Z});var o={};function s(e,t){var i=function(){var e;if("undefined"!=typeof window)e=window;else if(void 0!==n.g)e=n.g;else{if("undefined"==typeof self)throw new Error("Could not find a global object");e=self}return e}();return i[e]||(i[e]=t),i[e]}n.r(o);var a={opRegistry:{ops:{}},backend:"",backendInstance:null};a=s("GLOBALS",a);const c=s("env",new(function(){function e(){this.ENV={}}return e.prototype.set=function(e,t){this.ENV[e]=t},e.prototype.get=function(e){return this.ENV[e]},e}()));var l,d;!function(e){e[e.VS_SHADER=0]="VS_SHADER",e[e.FS_SHADER=1]="FS_SHADER"}(l||(l={})),function(e){e[e.FLOAT_VEC2=35664]="FLOAT_VEC2",e[e.FLOAT_VEC3=35665]="FLOAT_VEC3",e[e.FLOAT_VEC4=35666]="FLOAT_VEC4",e[e.INT_VEC2=35667]="INT_VEC2",e[e.INT_VEC3=35668]="INT_VEC3",e[e.INT_VEC4=35669]="INT_VEC4",e[e.BOOL=35670]="BOOL",e[e.BOOL_VEC2=35671]="BOOL_VEC2",e[e.BOOL_VEC3=35672]="BOOL_VEC3",e[e.BOOL_VEC4=35673]="BOOL_VEC4",e[e.FLOAT_MAT2=35674]="FLOAT_MAT2",e[e.FLOAT_MAT3=35675]="FLOAT_MAT3",e[e.FLOAT_MAT4=35676]="FLOAT_MAT4",e[e.SAMPLER_2D=35677]="SAMPLER_2D",e[e.SAMPLER_CUBE=35678]="SAMPLER_CUBE",e[e.FLOAT=5126]="FLOAT",e[e.INT=5124]="INT"}(d||(d={}));var u,h=function(e,t,n){this.size=e,this.type=t,this.location=n},f=function(e,t,n){this.size=e,this.type=t,this.location=n},_=function(){function e(){}return e.getWebglVersion=function(){return c.get("webglVersion")},e.createCanvas=function(){return document.createElement("canvas")},e.setWebglVersion=function(e){c.set("webglVersion",e)},e.setWebGLRenderingContext=function(e){return this.gl?this.gl:(this.gl=e,e)},e.getWebGLRenderingContext=function(){if(this.gl)return this.gl;var e=this.createCanvas();e.addEventListener("webglcontextlost",(function(e){throw e.preventDefault(),Error("webgl context is lost~")}),!1);var t=e.getContext("webgl2",this.WEBGL_ATTRIBUTES);return t?c.set("webglVersion",2):(c.set("webglVersion",1),t=e.getContext("webgl",this.WEBGL_ATTRIBUTES)||e.getContext("experimental-webgl",this.WEBGL_ATTRIBUTES)),t},e.printStates=function(e){console.log("1. isBlendEnable = "+e.isEnabled(e.BLEND)),console.log("2. isCullFaceEnable = "+e.isEnabled(e.CULL_FACE)),console.log("3. isDepthTestEnable = "+e.isEnabled(e.DEPTH_TEST)),console.log("4. isDitherEnable = "+e.isEnabled(e.DITHER)),console.log("5. isPolygonOffsetFillEnable = "+e.isEnabled(e.POLYGON_OFFSET_FILL)),console.log("6. isSampleAlphtToCoverageEnable = "+e.isEnabled(e.SAMPLE_ALPHA_TO_COVERAGE)),console.log("7. isSampleCoverageEnable = "+e.isEnabled(e.SAMPLE_COVERAGE)),console.log("8. isScissorTestEnable = "+e.isEnabled(e.SCISSOR_TEST)),console.log("9. isStencilTestEnable = "+e.isEnabled(e.STENCIL_TEST))},e.printWebGLInfo=function(e){console.log("renderer = "+e.getParameter(e.RENDERER)),console.log("version = "+e.getParameter(e.VERSION)),console.log("vendor = "+e.getParameter(e.VENDOR)),console.log("glsl version = "+e.getParameter(e.SHADING_LANGUAGE_VERSION))},e.printWebGLTextureInfo=function(e){console.log("MAX_COMBINED_TEXTURE_IMAGE_UNITS = ",e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS)),console.log("MAX_TEXTURE_IMAGE_UNITS = ",e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)),console.log("MAX_TEXTURE_SIZE = ",e.getParameter(e.MAX_TEXTURE_SIZE)),console.log("MAX_CUBE_MAP_TEXTURE_SIZE = ",e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE))},e.triggerContextLostEvent=function(e){var t=e.getExtension("WEBGL_lose_context");null!==t&&t.loseContext()},e.checkGLError=function(e){var t=e.getError();return 0!==t&&(console.log("WebGL Error NO: ",t),!0)},e.setDefaultState=function(e){e.clearColor(0,0,0,0),e.clearDepth(1),e.enable(e.DEPTH_TEST),e.enable(e.CULL_FACE),e.enable(e.SCISSOR_TEST)},e.setViewport=function(e,t){e.viewport(t[0],t[1],t[2],t[3])},e.initShader=function(e,t,n){var i=this.createShader(e,t);return this.compileShader(e,n,i),i},e.createShader=function(e,t){var n;if(null===(n=t===l.VS_SHADER?e.createShader(e.VERTEX_SHADER):e.createShader(e.FRAGMENT_SHADER)))throw new Error("WebGLShader创建失败！");return n},e.compileShader=function(e,t,n){return e.shaderSource(n,t),e.compileShader(n),!1!==e.getShaderParameter(n,e.COMPILE_STATUS)||(console.error(e.getShaderInfoLog(n)),e.deleteShader(n),!1)},e.createProgram=function(e){var t=e.createProgram();if(null===t)throw new Error("WebGLProgram创建失败！");return t},e.linkProgram=function(e,t,n,i,r,o){return void 0===r&&(r=null),void 0===o&&(o=null),e.attachShader(t,n),e.attachShader(t,i),null!==r&&r(e,t),e.linkProgram(t),!1===e.getProgramParameter(t,e.LINK_STATUS)?(console.error(e.getProgramInfoLog(t)),e.deleteShader(n),e.deleteShader(i),e.deleteProgram(t),!1):(e.validateProgram(t),!1===e.getProgramParameter(t,e.VALIDATE_STATUS)?(console.error(e.getProgramInfoLog(t)),e.deleteShader(n),e.deleteShader(i),e.deleteProgram(t),!1):(null!==o&&o(e,t),!0))},e.getProgramActiveAttribs=function(e,t,n){for(var i=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),r=0;r<i;r++){var o=e.getActiveAttrib(t,r);o&&(n[o.name]=new f(o.size,o.type,e.getAttribLocation(t,o.name)))}},e.getProgramAtciveUniforms=function(e,t,n){for(var i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),r=0;r<i;r++){var o=e.getActiveUniform(t,r);if(o){var s=e.getUniformLocation(t,o.name);null!==s&&(n[o.name]=new h(o.size,o.type,s))}}},e.createBuffer=function(e){var t=e.createBuffer();if(null===t)throw new Error("WebGLBuffer创建失败！");return t},e.getColorBufferData=function(e){var t=new Uint8Array(e.drawingBufferWidth*e.drawingBufferHeight*4);return e.readPixels(0,0,e.drawingBufferWidth,e.drawingBufferHeight,e.RGBA,e.UNSIGNED_BYTE,t),t},e.WEBGL_ATTRIBUTES={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0},e.gl=null,e}();!function(e){e[e.GL_REPEAT=0]="GL_REPEAT",e[e.GL_MIRRORED_REPEAT=1]="GL_MIRRORED_REPEAT",e[e.GL_CLAMP_TO_EDGE=2]="GL_CLAMP_TO_EDGE"}(u||(u={}));var p=function(){function e(){}return e.getTextureConfig=function(e){var t,n,i,r,o,s=e,a=!0,l=!0;return 2===c.get("webglVersion")?(t=s.getExtension("EXT_color_buffer_float"),i=null,r=s.R32F,n=s.RED,o=s.RGBA32F):(r=s.RGBA,n=s.RGBA,o=s.RGBA,t=s.getExtension("OES_texture_float"),i=s.getExtension("OES_texture_half_float"),a=this.isDownloadFloatTextureEnabled(s,o),l=this.isFloatTextureReadPixelsEnabledMethod(s,1)),{textureFloat:t,textureHalfFloat:i,internalFormat:r,textureFormat:n,downloadInternalFormat:o,frameBufferSupportFloat:a,isFloatTextureReadPixelsEnabled:l}},e.isFloatTextureReadPixelsEnabledMethod=function(e,t){var n=e;if(0===t)return!1;if(1===t){if(null==n.getExtension("OES_texture_float"))return!1}else if(null==n.getExtension("EXT_color_buffer_float")||null==n.getExtension("EXT_color_buffer_half_float"))return!1;var i=n.createFramebuffer(),r=n.createTexture();n.bindTexture(n.TEXTURE_2D,r);var o=2===t?n.RGBA32F:n.RGBA;n.texImage2D(n.TEXTURE_2D,0,o,1,1,0,n.RGBA,n.getExtension("OES_texture_half_float").HALF_FLOAT_OES,null),n.bindFramebuffer(n.FRAMEBUFFER,i),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,r,0);var s=n.checkFramebufferStatus(n.FRAMEBUFFER)===n.FRAMEBUFFER_COMPLETE;n.readPixels(0,0,1,1,n.RGBA,n.FLOAT,new Float32Array(4));var a=n.getError()===n.NO_ERROR;return s&&a},e.isDownloadFloatTextureEnabled=function(e,t){var n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n),e.texImage2D(e.TEXTURE_2D,0,t,1,1,0,e.RGBA,e.FLOAT,null);var i=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,i),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);var r=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(i),r},e.initTexture=function(e,t,n){var i=this.getTextureConfig(e),r=e.createTexture();if(e.activeTexture(e["TEXTURE"+t]),e.bindTexture(e.TEXTURE_2D,r),n)if(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),2===c.get("webglVersion"))e.texImage2D(e.TEXTURE_2D,0,i.internalFormat,n.width_texture,n.height_texture,0,i.textureFormat,e.FLOAT,n.data);else{for(var o=new Float32Array(n.width_texture*n.height_texture*4),s=0;s<n.data.length;s++)o[4*s]=n.data[s],o[4*s+1]=0,o[4*s+2]=0,o[4*s+3]=0;e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width_texture,n.height_texture,0,e.RGBA,e.FLOAT,o)}return r},e.genOutputTexture=function(e,t,n,i){var r=e.createTexture();return e.bindTexture(e.TEXTURE_2D,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texImage2D(e.TEXTURE_2D,0,t.downloadInternalFormat,n.width_texture,n.height_texture,0,e.RGBA,i?t.isFloatTextureReadPixelsEnabled?t.frameBufferSupportFloat?e.FLOAT:t.textureHalfFloat.HALF_FLOAT_OES:e.UNSIGNED_BYTE:t.frameBufferSupportFloat?e.FLOAT:t.textureHalfFloat.HALF_FLOAT_OES,null),e.bindTexture(e.TEXTURE_2D,null),r},e}(),C=["\n    precision highp float;\n    precision highp int;\n\n    attribute vec4 position;\n    varying vec2 vCoord;\n\n    void main() {\n        vCoord.x = (position.x + 1.0) / 2.0;\n        vCoord.y = (position.y + 1.0) / 2.0;\n        gl_Position = position;\n    }\n    ","#version 300 es\n    in vec4 position;\n    out vec2 vCoord;\n\n    void main() {\n        vCoord.x = (position.x + 1.0) / 2.0;\n        vCoord.y = (position.y + 1.0) / 2.0;\n        gl_Position = position;\n    }\n    "],g=new Float32Array([-1,1,-1,-1,1,1,1,-1]);const m={mainFunc:function(e,t){var n=e.origin,i=e.filter,r=e.out,o=t.groups,s=void 0===o?1:o,a=t.strides,c=void 0===a?[]:a,l=t.paddings,d=void 0===l?[]:l,u=t.dilations,h=void 0===u?[]:u,f=t.fuse_relu,_=t.filter_nearest_vec4,p=t.filter_remainder_vec4,C=c[0],g=void 0===C?1:C,m=c[1],R=void 0===m?1:m,v=d[0],I=void 0===v?0:v,y=d[1],S=void 0===y?0:y,E=h[0],b=void 0===E?1:E,w=h[1],P=void 0===w?1:w;return"\n    // start函数\n    void main(void) {\n        ivec4 oPos = getOutputTensorPos();\n        int x = oPos.a;\n        int c = oPos.g;\n        int y = oPos.b;\n        int b = oPos.r;\n        float res = 0.0;\n\n        // 获取output的坐标\n        int oTensorChannel = (c / ("+r.channel+" / "+s+")) * "+i.channel+";\n        int oy = y * "+g+" - "+I+";\n        for (int fy = 0; fy < "+i.height_shape+"; fy++) {\n            if (oy >= "+n.height_shape+") {\n                break;\n            }\n            if (oy < 0) {\n                oy += "+b+";\n                continue;\n            }\n            int ox = x * "+R+" - "+S+";\n            for (int fx = 0; fx < "+i.width_shape+"; fx++) {\n                if (ox >= "+n.width_shape+") {\n                    break;\n                }\n                if (ox < 0) {\n                    ox += "+P+";\n                    continue;\n                }\n                // channel计算\n                for (int j = 0; j < "+_+"; j += 4) {\n                    vec4 fValues = vec4(\n                        getValueFromTensorPos_filter(c, j, fy, fx),\n                        getValueFromTensorPos_filter(c, j + 1, fy, fx),\n                        getValueFromTensorPos_filter(c, j + 2, fy, fx),\n                        getValueFromTensorPos_filter(c, j + 3, fy, fx)\n                    );\n\n                    vec4 oValues = vec4(\n                        getValueFromTensorPos_origin(b, oTensorChannel + j, oy, ox),\n                        getValueFromTensorPos_origin(b, oTensorChannel + j + 1, oy, ox),\n                        getValueFromTensorPos_origin(b, oTensorChannel + j + 2, oy, ox),\n                        getValueFromTensorPos_origin(b, oTensorChannel + j + 3, oy, ox)\n                      );\n\n                    res += dot(fValues, oValues);\n                }\n\n                if ("+p+" == 1) {\n                    res += dot(\n                        getValueFromTensorPos_filter(c, "+_+", fy, fx),\n                        getValueFromTensorPos_origin(b, oTensorChannel + "+_+", oy, ox));\n                } else if ("+p+" == 2) {\n                    vec2 fValues = vec2(\n                        getValueFromTensorPos_filter(c, "+_+", fy, fx),\n                        getValueFromTensorPos_filter(c, "+_+" + 1, fy, fx)\n                    );\n                    vec2 oValues = vec2(\n                        getValueFromTensorPos_origin(b, oTensorChannel + "+_+", oy, ox),\n                        getValueFromTensorPos_origin(b, oTensorChannel + "+_+" + 1, oy, ox)\n                      );\n                    res += dot(fValues, oValues);\n                } else if ("+p+" == 3) {\n                    vec3 fValues = vec3(\n                        getValueFromTensorPos_filter(c, "+_+", fy, fx),\n                        getValueFromTensorPos_filter(c, "+_+" + 1, fy, fx),\n                        getValueFromTensorPos_filter(c, "+_+" + 2, fy, fx)\n                    );\n                    vec3 oValues = vec3(\n                        getValueFromTensorPos_origin(b, oTensorChannel + "+_+", oy, ox),\n                        getValueFromTensorPos_origin(b, oTensorChannel + "+_+" + 1, oy, ox),\n                        getValueFromTensorPos_origin(b, oTensorChannel + "+_+" + 2, oy, ox)\n                    );\n                    res += dot(fValues, oValues);\n                }\n\n                ox += "+P+";\n            }\n            oy += "+b+";\n        }\n\n        float bi = getValueFromTensorPos_bias(0, 0, 0, c);\n        res += bi;\n        if ("+f+") {\n            res = max(0.0, res);\n        }\n\n        setOutput(res);\n    }\n    "},params:["strides","paddings","dilations","groups","filter_nearest_vec4","filter_remainder_vec4"],textureFuncConf:{filter:["getValueFromTensorPos"],origin:["getValueFromTensorPos"],bias:["getValueFromTensorPos"]},behaviors:["adaptPaddings","isApplySeparableConv","batchComputeConv2d","processBias"]};function R(e,t){for(var n=t[0],i=t[1],r=t[2],o=t[3],s=r*o,a=i*r*o,c=[],l=0;l<n;l++)for(var d=0;d<o;d++)for(var u=0;u<i;u++)for(var h=0;h<r;h++)c.push(e[l*a+u*s+h*o+d]);return c}function v(e){for(var t=e.length,n=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),r=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,r++)i[r]=o[s];return i}(e),i=[];t>1;)n.splice(0,1),i.push(n.reduce((function(e,t){return e*t}))),t--;return i}function I(e){return e.reduce((function(e,t){return e*t}),1)}function y(e,t){var n=e[0],i=e[1],r=e[2],o=e[3];if(1===n&&1===i)return[[1,1,r],3,[o],1,[r,o]];var s=e.slice(0,t),a=e.slice(t);return[s,s.length,a,a.length,[s.reduce((function(e,t){return e*t})),a.reduce((function(e,t){return e*t}))]]}function S(e,t,n){if(1===n)return"\n            int getTensorPosFromArrayIndex_"+e+"(int n) {\n                return int(mod(float(n), float("+t[0]+")));\n            }\n        ";var i=v(t);return i.push(1),"\n    ivec"+n+" shapeVec_"+e+" = ivec"+n+"("+i.join(", ")+");\n    ivec"+n+" getTensorPosFromArrayIndex_"+e+"(int n) {\n        ivec"+n+" pos;\n        pos[0] = n / shapeVec_"+e+"[0];\n        for (int i = 1; i < "+n+"; i++) {\n            n = int(mod(float(n), float(shapeVec_"+e+"[i - 1])));\n            pos[i] = n / shapeVec_"+e+"[i];\n        }\n        return pos;\n    }\n    "}function E(e){return 1===e?"int":"ivec"+e}function b(e){var t=e.total_shape,n=e.channel,i=e.height_shape,r=e.width_shape;return[t/n/i/r,n,i,r]}const w={mainFunc:function(e,t){var n=e.out,i=e.origin,r=t.align_mode,o=void 0===r?1:r,s=t.align_corners,a=void 0===s||s;return"\n    // start函数\n\n    vec4 getData(float n, float scale, bool align_flag, int in_len) {\n        float m = align_flag ? ((n + 0.5) / scale - 0.5) : (n / scale);\n        int a1 = int(floor(m));\n        a1 = a1 > 0 ? a1 : 0;\n        int a2 = (a1 + 1) < (in_len - 1) ? (a1 + 1) : (in_len - 1);\n\n        float idx_src = (n + 0.5) / scale - 0.5;\n        idx_src = idx_src > 0.0 ? idx_src : 0.0;\n        float b1 = align_flag ? (idx_src - float(a1)) : (n / scale - float(a1));\n        float b2 = 1.0 - b1;\n        return vec4(float(a1), float(a2), b1, b2);\n    }\n\n    void main(void) {\n        // 输出数据\n        ivec4 oPos = getOutputTensorPos();\n\n        bool align_flag = "+o+" == 0 && !"+a+";\n\n        float scale_x = 0.0;\n        float scale_y = 0.0;\n        if ("+a+") {\n            scale_x = float("+n.width_shape+" - 1) / float("+i.width_shape+" - 1);\n            scale_y = float("+n.height_shape+" - 1) / float("+i.height_shape+" - 1);\n        }\n        else {\n            scale_x = float("+n.width_shape+") / float("+i.width_shape+");\n            scale_y = float("+n.height_shape+") / float("+i.height_shape+");\n        }\n\n        vec4 vx = getData(float(oPos.a), scale_x, align_flag, "+i.width_shape+");\n        vec4 vy = getData(float(oPos.b), scale_y, align_flag, "+i.height_shape+");\n\n        int x1 = int(vx.r);\n        int x2 = int(vx.g);\n        float x3 = vx.b;\n        float x4 = vx.a;\n        int y1 = int(vy.r);\n        int y2 = int(vy.g);\n        float y3 = vy.b;\n        float y4 = vy.a;\n\n        float value11 = getValueFromTensorPos_origin(oPos.r, oPos.g, y1, x1);\n        float value12 = getValueFromTensorPos_origin(oPos.r, oPos.g, y2, x1);\n        float value21 = getValueFromTensorPos_origin(oPos.r, oPos.g, y1, x2);\n        float value22 = getValueFromTensorPos_origin(oPos.r, oPos.g, y2, x2);\n        float value = x4 * y4 * value11 + x4 * y3 * value12 + x3 * y4 * value21 + x3 * y3 * value22;\n        setOutput(float(value));\n    }\n    "},params:["align_corners","align_mode"],textureFuncConf:{origin:["getValueFromTensorPos"]}},P=w;var x={relu:["transToPrelu"],relu6:["transToRelu6"],leaky_relu:["transToLeakyrelu"],transToLeakyrelu:["transToLeakyrelu"],scale:["transToScale"],sigmoid:["transToSigmoid"],hard_sigmoid:["transToHardSigmoid"],pow:["transToPow"],sqrt:["transToSqrt"],tanh:["transToTanh"]};function T(e,t){var n=t.multi_value,i=void 0===n?1:n,r=t.bias_value,o=void 0===r?0:r;return"\n    // start函数\n    void main(void) {\n        // 输出数据\n        float o = getPixelsFromTexturePos_origin(vCoord).r;\n        float res = "+t.active_function+"(o, float("+i+"), float("+o+"));\n        setOutput(res);\n    }\n    "}function M(e){return{mainFunc:T,params:["multi_value","bias_value","active_function"],textureFuncConf:{origin:["getPixelsFromTexturePos"]},behaviors:x[e]}}const D={mainFunc:function(e,t){var n=t.axes,i=Array.isArray(n)?n:[n],r=[0,1,2,3].filter((function(e){return e>=i.length}));return"\n    // start函数\n    void main(void) {\n        ivec4 oPos = getOutputTensorPos();\n        // 输出坐标转换为输入坐标\n        float o = 0.0;\n        o = getValueFromTensorPos_origin("+[0,1,2,3].map((function(e){return i.indexOf(e)>-1?0:"oPos["+r.splice(0,1)+"]"})).join(",")+");\n        setOutput(float(o));\n    }\n    "},params:["axes"],textureFuncConf:{origin:["getValueFromTensorPos"]}},O={mainFunc:function(e,t){var n=e.origin,i=e.out,r=t.align_corners;return"\n    // start函数\n    int getData(float n, float scale, bool align_corners) {\n        float m = align_corners ? (n / scale + 0.5) : (n / scale);\n        return int(floor(m));\n    }\n\n    void main(void) {\n        // 输出数据\n        ivec4 oPos = getOutputTensorPos();\n        \n        float scale_x = 0.0;\n        float scale_y = 0.0;\n        if ("+r+") {\n            scale_x = float("+i.width_shape+" -1) / float("+n.width_shape+" - 1);\n            scale_y = float("+i.height_shape+" - 1) / float("+n.height_shape+" - 1);\n        }\n        else {\n            scale_x = float("+i.width_shape+") / float("+n.width_shape+");\n            scale_y = float("+i.height_shape+") / float("+n.height_shape+");\n        }\n    \n        int vx = getData(float(oPos.a), scale_x, "+r+");\n        int vy = getData(float(oPos.b), scale_y, "+r+");\n        \n        float o = getValueFromTensorPos_origin(oPos.r, oPos.g, vy, vx);\n        setOutput(float(o));\n}\n    "},params:["align_corners"],textureFuncConf:{origin:["getValueFromTensorPos"]},commonFuncConf:["transferFromNHWCtoNCHW"]};var A={arg_max:{mainFunc:function(e,t){var n=e.origin,i=t.axis,r=void 0===i?-1:i,o=t.flatten,s=n.total_shape,a=n.height_shape,c=n.width_shape,l=n.channel,d=n.length_unformatted_shape,u=s/(c*a*l),h=r<0?3:4-d+r,f=[u,l,a,c][h];return"\n\n    void main() {\n        ivec4 oPos = getOutputTensorPos();\n        float o = 0.0;\n        int pos = 0;\n        if ("+!o+") {\n            if ("+h+" == 1) {\n                float tmp = getValueFromTensorPos_origin(oPos.g, 0, oPos.b, oPos.a);\n                for (int index = 0; index < "+f+"; index++) {\n                    o = getValueFromTensorPos_origin(oPos.g, index, oPos.b, oPos.a);\n                    if (o > tmp) {\n                        tmp = o;\n                        pos = index;\n                    }\n                }\n            }\n            else if ("+h+" == 2) {\n                float tmp = getValueFromTensorPos_origin(oPos.g, oPos.b, 0, oPos.a);\n                for (int index = 0; index < "+f+"; index++) {\n                    o = getValueFromTensorPos_origin(oPos.g, oPos.b, index, oPos.a);\n                    if (o > tmp) {\n                        tmp = o;\n                        pos = index;\n                    }\n                }\n            }\n            else if ("+h+" == 3) {\n                float tmp = getValueFromTensorPos_origin(oPos.g, oPos.b, oPos.a, 0);\n                for (int index = 0; index < "+f+"; index++) {\n                    o = getValueFromTensorPos_origin(oPos.g, oPos.b, oPos.a, index);\n                    if (o > tmp) {\n                        tmp = o;\n                        pos = index;\n                    }\n                }\n            }\n            else {\n                float tmp = getValueFromTensorPos_origin(0, oPos.g, oPos.b, oPos.a);\n                for (int index = 0; index < "+f+"; index++) {\n                    o = getValueFromTensorPos_origin(index, oPos.g, oPos.b, oPos.a);\n                    if (o > tmp) {\n                        tmp = o;\n                        pos = index;\n                    }\n                }\n            }\n        }\n        else {\n            int index = 0;\n            float tmp = getValueFromTensorPos_origin(0, 0, 0, 0);\n            for (int n = 0; n < "+u+"; n++) {\n                for (int c = 0; c < "+l+"; c++) {\n                    for (int h = 0; h < "+a+"; h++) {\n                        for (int w = 0; w < "+c+"; w++) {\n                            o = getValueFromTensorPos_origin(n, c, h, w);\n                            if (o > tmp) {\n                                tmp = o;\n                                pos = index;\n                            }\n                            index++;\n                        }\n                    }\n                }\n            }\n        }\n        setOutput(float(pos));\n    }"},params:["axis","flatten"],textureFuncConf:{origin:["getValueFromTensorPos"]}},arg_min:{mainFunc:function(e,t){for(var n=e.origin,i=t.axis,r=void 0===i?-1:i,o=t.flatten,s=n.total_shape,a=n.height_shape,c=n.width_shape,l=n.channel,d=s/(c*a*l),u=[d,l,a,c],h=0,f=0;f<4&&!(u[f]>1);f++)h++;var _=r<0?4-h+r:r,p=u[_=h+_];return"\n    void main() {\n        ivec4 oPos = getOutputTensorPos();\n        float o = 0.0;\n        int pos = 0;\n        if ("+!o+") {\n            if ("+_+" == 1) {\n                float tmp = getValueFromTensorPos_origin(oPos.g, 0, oPos.b, oPos.a);\n                for (int index = 0; index < "+p+"; index++) {\n                    o = getValueFromTensorPos_origin(oPos.g, index, oPos.b, oPos.a);\n                    if (o < tmp) {\n                        tmp = o;\n                        pos = index;\n                    }\n                }\n            }\n            else if ("+_+" == 2) {\n                float tmp = getValueFromTensorPos_origin(oPos.g, oPos.b, 0, oPos.a);\n                for (int index = 0; index < "+p+"; index++) {\n                    o = getValueFromTensorPos_origin(oPos.g, oPos.b, index, oPos.a);\n                    if (o < tmp) {\n                        tmp = o;\n                        pos = index;\n                    }\n                }\n            }\n            else if ("+_+" == 3) {\n                float tmp = getValueFromTensorPos_origin(oPos.g, oPos.b, oPos.a, 0);\n                for (int index = 0; index < "+p+"; index++) {\n                    o = getValueFromTensorPos_origin(oPos.g, oPos.b, oPos.a, index);\n                    if (o < tmp) {\n                        tmp = o;\n                        pos = index;\n                    }\n                }     \n            }\n            else {\n                float tmp = getValueFromTensorPos_origin(0, oPos.g, oPos.b, oPos.a);\n                for (int index = 0; index < "+p+"; index++) {\n                    o = getValueFromTensorPos_origin(index, oPos.g, oPos.b, oPos.a);\n                    if (o < tmp) {\n                        tmp = o;\n                        pos = index;\n                    }\n                }\n            }\n        }\n        else {\n            int index = 0;\n            float tmp = getValueFromTensorPos_origin(0, 0, 0, 0);\n            for (int n = 0; n < "+d+"; n++) {\n                for (int c = 0; c < "+l+"; c++) {\n                    for (int h = 0; h < "+a+"; h++) {\n                        for (int w = 0; w < "+c+"; w++) {\n                            o = getValueFromTensorPos_origin(n, c, h, w);\n                            if (o < tmp) {\n                                tmp = o;\n                                pos = index;\n                            }\n                            index++;\n                        }\n                    }\n                }\n            }\n        }\n        setOutput(float(pos));\n    }"},params:["axis","flatten"],textureFuncConf:{origin:["getValueFromTensorPos"]}},conv2d:m,conv2d_packing:{mainFunc:function(e,t){var n=e.origin,i=e.filter,r=e.out,o=t.groups,s=void 0===o?1:o,a=t.strides,c=void 0===a?[]:a,l=t.paddings,d=void 0===l?[]:l,u=t.dilations,h=void 0===u?[]:u,f=t.fuse_relu,_=c[0],p=void 0===_?1:_,C=c[1],g=void 0===C?1:C,m=d[0],R=void 0===m?0:m,v=d[1],I=void 0===v?0:v,y=h[0],S=void 0===y?1:y,E=h[1],b=void 0===E?1:E;return"\n    void main() {\n        ivec4 oPos = getOutputTensorPos();\n        int x = oPos.a;\n        int c = oPos.g;\n        int y = oPos.b;\n        int b = oPos.r;\n        vec4 res = vec4(0.0, 0.0, 0.0, 0.0);\n\n        int oy = y * "+p+" - "+R+";\n        for (int fy = 0; fy < "+i.height_shape+"; fy++) {\n            if (oy >= "+n.height_shape+") {\n                break;\n            }\n            if (oy < 0) {\n                oy += "+S+";\n                continue;\n            }\n            int ox = x * "+g+" - "+I+";\n            for (int fx = 0; fx < "+i.width_shape+"; fx++) {\n                if (ox >= "+n.width_shape+") {\n                    break;\n                }\n                if (ox < 0) {\n                    ox += "+b+";\n                    continue;\n                }\n                // channel计算\n                for (int j = 0; j < "+i.channel+"; j += 1) {\n                    int c0 = (c / ("+r.channel+" * 4 / "+s+")) * "+i.channel+" + j;\n                    vec4 fValue = getValueFromTensorPosPacking_filter(c * 4, j, fy, fx);\n                    vec4 oValue = getValueFromTensorPosPacking_origin(b, c0, oy, ox);\n\n                    for (int packed_index = 0; packed_index < 4; packed_index++) {\n                        if (packed_index == 0) {\n                            res.r += dot(fValue, oValue);\n                        } else if (packed_index == 1) {\n                            int c1 = ((c + 1) / ("+r.channel+" * 4 / "+s+")) * "+i.channel+" + j;\n                            oValue = getValueFromTensorPosPacking_origin(b, c1, oy, ox);\n                            fValue = getValueFromTensorPosPacking_filter(c * 4 + 1, j, fy, fx);\n                            res.g += dot(fValue, oValue);\n                        } else if (packed_index == 2) {\n                            int c2 = ((c + 2) / ("+r.channel+" * 4 / "+s+")) * "+i.channel+" + j;\n                            oValue = getValueFromTensorPosPacking_origin(b, c2, oy, ox);\n                            fValue = getValueFromTensorPosPacking_filter(c * 4 + 2, j, fy, fx);\n                            res.b += dot(fValue, oValue);\n                        } else if (packed_index == 3) {\n                            int c3 = ((c + 3) / ("+r.channel+" * 4 / "+s+")) * "+i.channel+" + j;\n                            oValue = getValueFromTensorPosPacking_origin(b, c3, oy, ox);\n                            fValue = getValueFromTensorPosPacking_filter(c * 4 + 3, j, fy, fx);\n                            res.a += dot(fValue, oValue);\n                        }\n                    }\n                }\n                ox += "+b+";\n            }\n            oy += "+S+";\n        }\n\n        res += getValueFromTensorPosPacking_bias(0, c, 0, 0);\n        if ("+f+") {\n            res.r = max(0.0, res.r);\n            res.g = max(0.0, res.g);\n            res.b = max(0.0, res.b);\n            res.a = max(0.0, res.a);\n        }\n        setPackedOutput(res);\n    }\n    "},params:["strides","paddings","dilations","groups"],textureFuncConf:{filter:["getValueFromTensorPosPacking"],origin:["getValueFromTensorPosPacking"],bias:["getValueFromTensorPosPacking"]},behaviors:["adaptPaddings","isApplySeparableConv","batchComputeConv2d","processBias"]},conv2d_transpose:{mainFunc:function(e,t){var n=e.origin,i=e.filter,r=e.out,o=t.groups,s=void 0===o?1:o,a=t.strides,c=void 0===a?[]:a,l=t.paddings,d=void 0===l?[]:l,u=t.dilations,h=void 0===u?[]:u,f=c[0],_=void 0===f?1:f,p=c[1],C=void 0===p?1:p,g=d[0],m=void 0===g?0:g,R=d[1],v=void 0===R?0:R;v=i.height_shape-v-1,m=i.width_shape-m-1;var I=h[0],y=void 0===I?1:I,S=h[1],E=void 0===S?1:S;return"\n    // start函数\n    void main(void) {\n        ivec4 oPos = getOutputTensorPos();\n        int x = oPos.a;\n        int c = oPos.g;\n        int y = oPos.b;\n        int b = oPos.r;\n        float res = 0.0;\n        int temp_x = 0;\n        int temp_y = 0;\n        float o = 0.0;\n        float f = 0.0;\n\n        // 获取output的坐标\n        int oTensorChannel = int(c * "+s+" / "+r.channel+") * "+n.channel+";\n        int oy = y - "+v+";\n        const int groupLen = int("+n.channel+" / "+s+");\n        int groupIndex = int(c / groupLen);\n\n        for (int fy = 0; fy < "+i.height_shape+"; fy++) {\n            if (oy < 0) {\n                oy += "+y+";\n                continue;\n            }\n            int ox = x - "+m+";\n            for (int fx = 0; fx < "+i.width_shape+"; fx++) {\n\n                if (ox < 0) {\n                    ox += "+E+";\n                    continue;\n                }\n                // channel计算\n                for (int j = 0; j < groupLen; j++) {\n                    int curIndex = j + b * groupLen;\n                    if (int(mod(float(ox), float("+C+"))) == 0 && int(mod(float(oy), float("+_+"))) == 0) {\n                        temp_x = int(floor(float(ox) / float("+C+")));\n                        temp_y = int(floor(float(oy) / float("+_+")));\n                        if (temp_x < "+n.width_shape+" && temp_y < "+n.height_shape+") {\n                            o = getValueFromTensorPos_origin(b, curIndex , temp_y, temp_x);\n                            f = getValueFromTensorPos_filter(\n                                curIndex,\n                                int(c / "+s+"),\n                                "+i.height_shape+"-1-fy,\n                                "+i.width_shape+"-1-fx\n                            );\n                            res += f * o;\n                        }\n                    }\n                }\n                ox += "+E+";\n            }\n            oy += "+y+";\n        }\n        setOutput(float(res));\n    }\n"},params:["strides","paddings","dilations","groups"],textureFuncConf:{filter:["getValueFromTensorPos"],origin:["getValueFromTensorPos"]},behaviors:["adaptPaddings","isApplySeparableConv","batchComputeConv2d","processBias"]},depthwise_conv2d:m,conv2d_depthwise:m,conv2d_elementwise_add:{mainFunc:function(e,t){var n=e.origin,i=e.filter,r=e.out,o=e.counter,s=t.active_function,a=t.groups,c=void 0===a?1:a,l=t.axis,d=t.strides,u=void 0===d?[]:d,h=t.paddings,f=void 0===h?[]:h,_=t.dilations,p=void 0===_?[]:_,C=t.multi_value,g=t.bias_value,m=u[0],R=void 0===m?1:m,v=u[1],I=void 0===v?1:v,y=f[0],S=void 0===y?0:y,E=f[1],b=void 0===E?0:E,w=p[0],P=void 0===w?1:w,x=p[1],T=void 0===x?1:x;return"\n    // start函数\n\n    float getValueFromCounter(int index) {\n        float xPos = float(index) / float("+o.width_shape+");\n        vec4 pixels = TEXTURE2D(texture_counter, vec2(xPos, 0.5));\n        return pixels.r;\n    }\n    void main(void) {\n        ivec4 oPos = getOutputTensorPos();\n\n        int x = oPos.a;\n        int c = oPos.g;\n        int y = oPos.b;\n        int b = oPos.r;\n        int addAxis = oPos["+l+"];\n        float res = getValueFromCounter(addAxis);\n\n        // 获取output的坐标\n        int oTensorChannel = (c / ("+r.channel+" / "+c+")) * "+i.channel+";\n        int oy = y * "+R+" - "+S+";\n        for (int fy = 0; fy < "+i.height_shape+"; fy++) {\n            if (oy >= "+n.height_shape+") {\n                break;\n            }\n            if (oy < 0) {\n                oy += "+P+";\n                continue;\n            }\n            int ox = x * "+I+" - "+b+";\n            for (int fx = 0; fx < "+i.width_shape+"; fx++) {\n                if (ox >= "+n.width_shape+") {\n                    break;\n                }\n                if (ox < 0) {\n                    ox += "+T+";\n                    continue;\n                }\n                // channel计算\n                for (int j = 0; j < "+i.channel+"; j++) {\n                    float f = getValueFromTensorPos_filter(c, j, fy, fx);\n                    float o = getValueFromTensorPos_origin(b, oTensorChannel + j, oy, ox);\n                    res += f * o;\n                }\n                ox += "+T+";\n            }\n            oy += "+P+";\n        }\n        setOutput("+s+"(res,  "+C+",  "+g+"));\n    }\n"},params:["active_function","groups","axis","strides","paddings","dilations","multi_value","bias_value"],textureFuncConf:{filter:["getValueFromTensorPos"],origin:["getValueFromTensorPos"],counter:["getValueFromTensorPos"]},behaviors:["mergeAttrs","checkIsMerge","setActiveFunc"]},pool2d:{mainFunc:function(e,t){var n=e.origin,i=t.strides,r=void 0===i?[]:i,o=t.paddings,s=void 0===o?[]:o,a=t.pooling_type,c=t.ksize,l=r[0],d=void 0===l?1:l,u=r[1],h=void 0===u?1:u,f=s[0],_=void 0===f?0:f,p=s[1],C=void 0===p?0:p,g=c[0];return"\n    // start函数\n    void main(void) {\n        float res = 0.0;\n        // 获取output的坐标\n        ivec4 out_pos = getOutputTensorPos();\n        // X、Y方向的移动步长\n        int count_pool = 0;\n        int oy_base = out_pos[2] * "+d+" - "+_+";\n        int ox_base = out_pos[3] * "+h+" - "+C+";\n        for (int fy = 0; fy < "+c[1]+"; fy++) {\n            int oy = oy_base + fy;\n            if (oy >= "+n.height_shape+") {\n                break;\n            }\n            if (oy < 0) {\n                continue;\n            }\n            for (int fx = 0; fx < "+g+"; fx++) {\n                int ox = ox_base + fx;\n                if (ox >= "+n.width_shape+") {\n                    break;\n                }\n                if (ox < 0) {\n                    continue;\n                }\n                // origin数据\n                float curr = getValueFromTensorPos_origin(out_pos[0], out_pos[1], oy, ox);\n                if ("+a+" == 1) {\n                    if (curr > res) {\n                        res = curr;\n                    }\n                } else {\n                    res += curr;\n                    // 在平均池化模式忽略填充值(exclusive默认为true）\n                    count_pool++;\n                }\n            }\n        }\n        if ("+a+" != 1) {\n            res = res / float(count_pool);\n        }\n        setOutput(res);\n    }\n    "},params:["strides","paddings","pooling_type","ksize"],textureFuncConf:{origin:["getValueFromTensorPos"]},behaviors:["isMax","setPacked","isGlobalPooling"]},pool2d_max:{mainFunc:function(e,t){var n=e.origin,i=t.strides,r=void 0===i?[]:i,o=t.paddings,s=void 0===o?[]:o,a=t.ksize,c=t.global_pooling,l=t.runtime,d=r[0],u=void 0===d?1:d,h=r[1],f=void 0===h?1:h,_=s[0],p=void 0===_?0:_,C=s[1],g=void 0===C?0:C,m=a[0],R=a[1],v=function(e){var t=e.total_shape,n=e.channel,i=e.height_shape,r=e.width_shape;return[t/n/i/r,n,i,r]}(n),I="",y="setOutput(float(res));";return 0===l&&!0===c&&(I="\n            if (curr > res) {\n                index = "+v[2]*v[3]+" * out_pos[1] + "+v[3]+" * oy + ox;\n            }\n        ",y="setOutput(float(index));"),"\n    // start函数\n    void main(void) {\n        float res = -1. / 0.;\n        int index = 0;\n        // 获取output的坐标\n        ivec4 out_pos = getOutputTensorPos();\n        int b = out_pos[0];\n        int c = out_pos[1];\n        int y = out_pos[2];\n        int x = out_pos[3];\n        // X、Y方向的移动步长\n        int oy_base = out_pos[2] * "+u+" - "+p+";\n        int ox_base = out_pos[3] * "+f+" - "+g+";\n        for (int fy = 0; fy < "+R+"; fy++) {\n            int oy = oy_base + fy;\n            if (oy >= "+n.height_shape+") {\n                break;\n            }\n            if (oy < 0) {\n                continue;\n            }\n            for (int fx = 0; fx < "+m+"; fx++) {\n                int ox = ox_base + fx;\n                if (ox >= "+n.width_shape+") {\n                    break;\n                }\n                if (ox < 0) {\n                    continue;\n                }\n                // origin数据\n                float curr = getValueFromTensorPos_origin(out_pos[0], out_pos[1], oy, ox);\n                "+I+"\n                res = max(res, curr);\n            }\n        }\n        "+y+"\n    }\n    "},params:["strides","paddings","ksize","global_pooling","runtime"],textureFuncConf:{origin:["getValueFromTensorPos"]},behaviors:["isMax","setPacked","setAdaptive","isGlobalPooling"]},pool2d_winograd:{mainFunc:function(e,t){var n=e.origin,i=e.pool,r=t.strides,o=void 0===r?[]:r,s=t.paddings,a=void 0===s?[]:s,c=t.type_pool,l=o[0],d=void 0===l?1:l,u=o[1],h=void 0===u?1:u,f=a[0],_=void 0===f?0:f,p=a[1];return"\n    // start函数\n    void main(void) {\n        float res = (-1.0 / exp(-20.0));\n        // 获取output的坐标\n        ivec4 out_pos = getOutputTensorPos();\n        // int b = out_pos[0];\n        // int c = out_pos[1];\n        // int y = out_pos[2];\n        // int x = out_pos[3];\n        // X、Y方向的移动步长\n        int count_pool = 0;\n        int oy_base = out_pos[2] * "+d+" - "+_+";\n        int ox_base = out_pos[3] * "+h+" - "+(void 0===p?0:p)+";\n\n        for (int fy = 0; fy < "+i.height_shape+"; fy++) {\n            int oy = oy_base + fy;\n            if (oy >= "+n.height_shape+") {\n                break;\n            }\n            if (oy < 0) {\n                continue;\n            }\n            for (int fx = 0; fx < "+i.width_shape+"; fx++) {\n                int ox = ox_base + fx;\n                if (ox >= "+n.width_shape+") {\n                    break;\n                }\n                if (ox < 0) {\n                    continue;\n                }\n                // origin数据\n                float curr = getValueFromTensorPosPacked_origin(out_pos[0], out_pos[1], oy, ox);\n                if ("+c+" == 1) {\n                    if (curr > res) {\n                        res = curr;\n                    }\n                } else {\n                    res += curr;\n                    // 在平均池化模式忽略填充值(exclusive默认为true）\n                    count_pool++;\n                }\n            }\n        }\n        if ("+c+" != 1) {\n            res = res / float(count_pool);\n        }\n        setOutput(res);\n    }\n    "},params:["strides","paddings","type_pool"],textureFuncConf:{origin:["getValueFromTensorPosPacked"]},behaviors:["isMax","setPacked","isGlobalPooling"]},elementwise_add:{mainFunc:function(e,t){var n=t.counterPos,i=t.Scale_y,r=void 0===i?1:i,o=t.Scale_x,s=void 0===o?1:o,a=t.Scale_out,c=void 0===a?1:a;return"\n    void main(void) {\n        // 输出数据\n        ivec4 oPos = getOutputTensorPos();\n        float o = getValueFromTensorPos_origin(oPos.r, oPos.g, oPos.b, oPos.a);\n\n        float c = getValueFromTensorPos_counter("+n+");\n        float res = float("+c/r+") * c + float("+c/s+") * o;\n        setOutput(float(res));\n    }\n    "},params:["Scale_y","Scale_x","Scale_out","counterPos"],textureFuncConf:{counter:["getValueFromTensorPos"],origin:["getValueFromTensorPos"]},behaviors:["processAxis","genElementwiseCounterPos"]},elementwise_mul:{mainFunc:function(e,t){var n=e.counter,i=t.counterPos,r=t.Scale_y,o=void 0===r?1:r,s=t.Scale_x,a=void 0===s?1:s,c=t.Scale_out,l=void 0===c?1:c;return"\n    ivec4 formatNCHW(int n, int c, int h, int w) {\n        int newN = n;\n        int newC = c;\n        int newH = h;\n        int newW = w;\n\n        if (n >= "+n.height_texture/n.height_shape+") {\n            newN = int("+n.height_texture/n.height_shape+");\n        }\n        if (c >= "+n.channel+") {\n            newC = int("+(n.channel-1)+");\n        }\n        if (h >= "+n.height_shape+") {\n            newH = "+(n.height_shape-1)+";\n        }\n        if (w >= "+n.width_shape+") {\n            newW = "+(n.width_shape-1)+";\n        }\n        return ivec4(newN, newC, newH, newW);\n    }\n\n    // start函数\n    void main() {\n        // 输出数据\n        ivec4 oPos1 = getOutputTensorPos();\n        float o = getValueFromTensorPos_origin(oPos1.r, oPos1.g, oPos1.b, oPos1.a);\n        ivec4 oPos = formatNCHW(oPos1.r, oPos1.g, oPos1.b, oPos1.a);\n\n        float c = getValueFromTensorPos_counter("+i+");\n        float res = float("+l/a+") * o * float("+1/o+") * c;\n        setOutput(float(res));\n    }\n\n    "},params:["Scale_y","Scale_x","Scale_out","counterPos"],textureFuncConf:{counter:["getValueFromTensorPos"],origin:["getValueFromTensorPos"]},behaviors:["processAxis","genElementwiseCounterPos"]},elementwise_div:{mainFunc:function(e,t){var n=e.counter,i=t.counterPos,r=t.Scale_y,o=void 0===r?1:r,s=t.Scale_x,a=void 0===s?1:s,c=t.Scale_out,l=void 0===c?1:c;return"\n    ivec4 formatNCHW(int n, int c, int h, int w) {\n        int newN = n;\n        int newC = c;\n        int newH = h;\n        int newW = w;\n\n        if (n >= "+n.height_texture/n.height_shape+") {\n            newN = int("+n.height_texture/n.height_shape+");\n        }\n        if (c >= "+n.channel+") {\n            newC = int("+(n.channel-1)+");\n        }\n        if (h >= "+n.height_shape+") {\n            newH = "+(n.height_shape-1)+";\n        }\n        if (w >= "+n.width_shape+") {\n            newW = "+(n.width_shape-1)+";\n        }\n        return ivec4(newN, newC, newH, newW);\n    }\n\n    // start函数\n    void main() {\n        // 输出数据\n        ivec4 oPos1 = getOutputTensorPos();\n        float o = getValueFromTensorPos_origin(oPos1.r, oPos1.g, oPos1.b, oPos1.a);\n        ivec4 oPos = formatNCHW(oPos1.r, oPos1.g, oPos1.b, oPos1.a);\n\n        float c = getValueFromTensorPos_counter("+i+");\n        float res = float("+l+") * (float("+1/a+") * o / (float("+1/o+") * c));\n        setOutput(float(res));\n    }\n\n    "},params:["axis","Scale_y","Scale_x","Scale_out","counterPos"],textureFuncConf:{counter:["getValueFromTensorPos"],origin:["getValueFromTensorPos"]},behaviors:["processAxis","genElementwiseCounterPos"]},elementwise_pow:{mainFunc:function(e,t){var n=t.counterPos,i=t.Scale_y,r=void 0===i?1:i,o=t.Scale_x,s=void 0===o?1:o,a=t.Scale_out,c=void 0===a?1:a;return"\n    void main(void) {\n        // 输出数据\n        ivec4 oPos = getOutputTensorPos();\n        float o = getValueFromTensorPos_origin(oPos.r, oPos.g, oPos.b, oPos.a);\n\n        float c = getValueFromTensorPos_counter("+n+");\n        float res = pow(float("+c/s+") * o, float("+c/r+") * c);\n        setOutput(float(res));\n    }\n    "},params:["Scale_y","Scale_x","Scale_out","counterPos"],textureFuncConf:{counter:["getValueFromTensorPos"],origin:["getValueFromTensorPos"]},behaviors:["processAxis","genElementwiseCounterPos"]},elementwise_sub:{mainFunc:function(e,t){var n=t.counterPos,i=t.Scale_y,r=void 0===i?1:i,o=t.Scale_x,s=void 0===o?1:o,a=t.Scale_out,c=void 0===a?1:a;return"\n    void main(void) {\n        // 输出数据\n        ivec4 oPos = getOutputTensorPos();\n        float o = getValueFromTensorPos_origin(oPos.r, oPos.g, oPos.b, oPos.a);\n\n        float c = getValueFromTensorPos_counter("+n+");\n        float res = float("+c/s+") * o - float("+c/r+") * c;\n        setOutput(float(res));\n    }\n    "},params:["Scale_y","Scale_x","Scale_out","counterPos"],textureFuncConf:{counter:["getValueFromTensorPos"],origin:["getValueFromTensorPos"]},behaviors:["processAxis","genElementwiseCounterPos"]},mul:{mainFunc:function(e,t){var n=e.origin,i=e.counter,r=t.x_num_col_dims,o=t.y_num_col_dims,s=b(n),a=b(i),c=y(s,r),l=c[0],d=c[1],u=c[2],h=c[3],f=c[4],_=y(a,o),p=_[0],C=_[1],g=_[2],m=_[3];return"\n    "+S("x1",l,d)+"\n    "+S("x2",u,h)+"\n    "+S("y1",p,C)+"\n    "+S("y2",g,m)+"\n\n    // start函数\n    void main(void) {\n        float res = 0.0;\n        // 获取output的坐标\n        ivec4 opos = getOutputTensorPos();\n        float temp = 0.0;\n\n        // output is 2D\n        int b = opos.b;\n        int a = opos.a;\n\n        "+E(d)+" x1 = getTensorPosFromArrayIndex_x1(b);\n        "+E(m)+" y2 = getTensorPosFromArrayIndex_y2(a);\n\n        for (int j = 0; j < "+f[1]+"; j++) {\n            "+E(h)+" x2 = getTensorPosFromArrayIndex_x2(j);\n            "+E(C)+" y1 = getTensorPosFromArrayIndex_y1(j);\n\n            ivec4 xPos = ivec4("+E(d)+"(x1), "+E(h)+"(x2));\n            ivec4 yPos = ivec4("+E(C)+"(y1), "+E(m)+"(y2));\n\n            float o = getValueFromTensorPos_origin(xPos.r, xPos.g, xPos.b, xPos.a);\n            float c = getValueFromTensorPos_counter(yPos.r, yPos.g, yPos.b, yPos.a);\n            res += c * o;\n        }\n\n        setOutput(res);\n    }\n    "},params:["x_num_col_dims","y_num_col_dims"],textureFuncConf:{counter:["getValueFromTensorPos"],origin:["getValueFromTensorPos"]}},matmul:{mainFunc:function(e,t){var n=e.origin,i=t.transpose_X,r=void 0!==i&&i,o=t.transpose_Y,s=void 0!==o&&o;return"\n    void main() {\n        float res = 0.0;\n        // 获取output的坐标\n        ivec4 out_pos = getOutputTensorPos();\n        ivec4 origin_pos = out_pos;\n        if ("+r+") {\n            origin_pos[3] = origin_pos[2];\n        }\n        ivec4 counter_pos = out_pos;\n        if ("+s+") {\n            counter_pos[2] = counter_pos[3];\n        }\n\n        for (int j = 0; j < "+(r?n.height_shape:n.width_shape)+"; j++) {\n            if ("+r+") {\n                origin_pos[2] = j;\n            }\n            else {\n                origin_pos[3] = j;\n            }\n            if ("+s+") {\n                counter_pos[3] = j;\n            }\n            else {\n                counter_pos[2] = j;\n            }\n            float o = getValueFromTensorPos_origin(origin_pos[0], origin_pos[1], origin_pos[2], origin_pos[3]);\n            float c = getValueFromTensorPos_counter(counter_pos[0], counter_pos[1], counter_pos[2], counter_pos[3]);\n            \n            res += c * o;\n        }\n        setOutput(res);\n    }\n    "},params:["transpose_X","transpose_Y"],textureFuncConf:{counter:["getValueFromTensorPos"],origin:["getValueFromTensorPos"]}},fc:{mainFunc:function(e,t){return"\n    // start函数\n    void main(void) {\n        float res = 0.0;\n        ivec4 out_pos = getOutputTensorPos();\n        float bias = getValueFromTensorPos_bias(out_pos.r, out_pos.g, out_pos.b, out_pos.a);\n\n        for (int j = 0; j < "+e.origin.width_shape+"; j++) {\n            float w = getValueFromTensorPos_weight(out_pos[0], out_pos[1], j, out_pos[3]);\n            float o = getValueFromTensorPos_origin(out_pos[0], out_pos[1], out_pos[2], j);\n            res += w * o;\n        }\n\n        res = res + bias;\n        setOutput(res);\n    }\n"},params:[],textureFuncConf:{weight:["getValueFromTensorPos"],origin:["getValueFromTensorPos"],bias:["getValueFromTensorPos"]},behaviors:["flattenShape"]},dropout:{mainFunc:function(e,t){return"\n    // start函数\n    void main(void) {\n        ivec4 oPos = getOutputTensorPos();\n        // 输出坐标转换为输入坐标\n        float o = 0.0;\n        o = getValueFromTensorPos_origin(oPos.r, oPos.g, oPos.b, oPos.a);\n        if ("+("downgrade_in_infer"===t.dropout_implementation)+") {\n            o = o * (1.0 - "+t.dropout_prob+");\n        }\n        setOutput(float(o));\n    }\n    "},params:["dropout_implementation","dropout_prob"],textureFuncConf:{origin:["getValueFromTensorPos"]},behaviors:["normalizeDim"]},concat:{mainFunc:function(e,t){var n=t.inputs_dim,i=t.dim;return"\n    // start函数\n    void main(void) {\n        ivec4 oPos = getOutputTensorPos();\n        // 输出坐标转换为输入坐标\n        float o = 0.0;\n        if (oPos["+i+"] > "+n+" - 1) {\n            oPos["+i+"] = oPos["+i+"] - "+n+";\n            o = getValueFromTensorPos_counter(oPos.r, oPos.g, oPos.b, oPos.a);\n        }\n        else {\n            o = getValueFromTensorPos_origin(oPos.r, oPos.g, oPos.b, oPos.a);\n        }\n        setOutput(float(o));\n    }\n    "},params:["inputs_dim","dim"],textureFuncConf:{origin:["getValueFromTensorPos"],counter:["getValueFromTensorPos"]},behaviors:["normalizeDim"]},concat_mul:{mainFunc:function(e,t){var n=t.dim,i=t.inputs_dim,r=t.append_num,o=t.fourth_num,s=void 0===o?0:o,a=t.fourInputs,c=i+r,l=i+r+s;return"\n    // start函数\n    void main(void) {\n        ivec4 oPos = getOutputTensorPos();\n        // 输出坐标转换为输入坐标\n        float o = 0.0;\n\n        if (oPos["+n+"] < "+i+") {\n            o = getValueFromTensorPos_origin(oPos.r, oPos.g, oPos.b, oPos.a);\n        }\n        else if (oPos["+n+"] < "+c+") {\n            oPos["+n+"] = oPos["+n+"] - "+i+";\n            o = getValueFromTensorPos_counter(oPos.r, oPos.g, oPos.b, oPos.a);\n        }\n        else {\n            "+(void 0!==a&&a?"\n            if (oPos["+n+"] < "+l+") {\n                oPos["+n+"] = oPos["+n+"] - "+c+";\n                o = getValueFromTensorPos_appender(oPos.r, oPos.g, oPos.b, oPos.a);\n            }\n            else {\n                oPos["+n+"] = oPos["+n+"] - "+l+";\n                o = getValueFromTensorPos_fourth(oPos.r, oPos.g, oPos.b, oPos.a);\n            }\n        ":"\n            oPos["+n+"] = oPos["+n+"] - "+c+";\n            o = getValueFromTensorPos_appender(oPos.r, oPos.g, oPos.b, oPos.a);\n        ")+"\n        }\n        setOutput(float(o));\n    }\n    "},params:["dim","inputs_dim","append_num","fourInputs","fourth_num"],textureFuncConf:{origin:["getValueFromTensorPos"],counter:["getValueFromTensorPos"],appender:["getValueFromTensorPos"],fourth:["getValueFromTensorPos"]},behaviors:["normalizeDim"]},split:{mainFunc:function(e,t){var n=e.out,i=t.target_length,r=t.num,o=t.dim;return"\n    // start函数\n    void main(void) {\n        int length = int("+i+" / "+r+");\n        ivec4 oPos = getOutputTensorPos();\n        // 输出坐标转换为输入坐标\n        //int sumVal = oPos.g\n            + oPos.a * "+n.channel+"\n            + oPos.b * "+n.channel+" * "+n.width_shape+"\n            + oPos.r * "+n.channel+" * "+n.width_shape+" * "+n.height_shape+";\n\n        oPos["+o+"] = oPos["+o+"] + layer_run_time * length;\n        float o = getValueFromTensorPos_origin(oPos.r, oPos.g, oPos.b, oPos.a);\n        setOutput(float(o));\n    }\n    "},params:["target_length","num","dim"],textureFuncConf:{origin:["getValueFromTensorPos"]},behaviors:["normalizeDim"]},softmax:{mainFunc:function(e,t){var n=e.origin,i=t.axis,r=i;return(!i||i<0)&&(r=(i||-1)+4),"\n    // start函数\n    void main(void) {\n        ivec4 oPos = getOutputTensorPos();\n        const int n = int("+n.total_shape+"/"+n.channel+"/"+n.height_shape+"/"+n.width_shape+");\n        float o = getValueFromTensorPos_origin(oPos[0], oPos[1], oPos[2], oPos[3]);\n        // 输出坐标转换为输入坐标\n        float total = 0.0;\n        float res = 0.0;\n        if ("+r+" == 0) {\n            for (int i = 0; i < n; i++){\n            float temp = getValueFromTensorPos_origin(i, oPos[1], oPos[2], oPos[3]);\n            total += exp(temp);\n            }\n            res = exp(o) / total;\n        }\n        else if ("+r+" == 1) {\n            for (int i = 0; i < "+n.channel+"; i++){\n            float temp = getValueFromTensorPos_origin(oPos[0], i, oPos[2], oPos[3]);\n            total += exp(temp);\n            }\n            res = exp(o) / total;\n        }\n        else if ("+r+" == 2) {\n            for (int i = 0; i < "+n.height_shape+"; i++){\n            float temp = getValueFromTensorPos_origin(oPos[0], oPos[1], i, oPos[3]);\n            total += exp(temp);\n            }\n            res = exp(o) / total;\n        }\n        else {\n            for (int i = 0; i < "+n.width_shape+"; i++){\n            float temp = getValueFromTensorPos_origin(oPos[0], oPos[1], oPos[2], i);\n            total += exp(temp);\n            }\n            res = exp(o) / total;\n        }\n        setOutput(res);\n    }\n    "},params:["axis"],textureFuncConf:{origin:["getValueFromTensorPos"]}},batchnorm:{mainFunc:function(e,t){var n=e.bias,i=e.scale,r=e.mean,o=e.variance,s=t.epsilon;return"\n    // start函数\n    void main(void) {\n        // 输出数据\n        ivec4 oPos = getOutputTensorPos();\n        float o = getValueFromTensorPos_origin(oPos.r, oPos.g, oPos.b, oPos.a);\n\n        // 归一化数据\n        vec4 scale = getPixelsFromTexturePos_scale(vec2( float(oPos.g) / float("+i.width_texture+") + 0.00001, 0.0));\n        vec4 bias = getPixelsFromTexturePos_bias(vec2( float(oPos.g) / float("+n.width_texture+") + 0.00001, 0.0));\n        vec4 mean = getPixelsFromTexturePos_mean(vec2((float(oPos.g)) / float("+r.width_texture+")  + 0.00001, 0.0));\n        vec4 variance = getPixelsFromTexturePos_variance(\n            vec2((float(oPos.g)) / float("+o.width_texture+") + 0.00001,\n            0.0)\n        );\n\n        float x = (o - mean[0]) / sqrt(variance[0] + "+s+");\n        float res = scale[0] * x + bias[0];\n        setOutput(res);\n    }\n    "},params:["epsilon"],textureFuncConf:{origin:["getValueFromTensorPos"],scale:["getPixelsFromTexturePos"],bias:["getPixelsFromTexturePos"],mean:["getPixelsFromTexturePos"],variance:["getPixelsFromTexturePos"]}},reshape2:{mainFunc:function(e,t){var n=e.origin,i=e.out;return"\n    // start函数\n    void main(void) {\n        // 输出数据\n        ivec4 oPos = getOutputTensorPos();\n        // 输出坐标转换为输入坐标\n        int sumVal = oPos.a\n            + oPos.b * "+i.width_shape+"\n            + oPos.g * "+i.height_shape+" * "+i.width_shape+"\n            + oPos.r * "+i.channel+" * "+i.width_shape+" * "+i.height_shape+";\n        ivec4 new_oPos = transferFromNHWCtoNCHW(\n            sumVal,\n            "+n.channel+",\n            "+n.width_shape+",\n            "+n.height_shape+",\n            "+n.total_shape+"\n        );\n        float o = getValueFromTensorPos_origin(new_oPos.r, new_oPos.g, new_oPos.b, new_oPos.a);\n        setOutput(float(o));\n    }\n    "},params:[],textureFuncConf:{origin:["getValueFromTensorPos"]},commonFuncConf:["transferFromNHWCtoNCHW"]},bilinear_interp:w,transpose2:{mainFunc:function(e,t){var n=e.origin,i=t.axis,r=n.length_unformatted_shape,o=i,s=o.length;if(s-r>0&&(s=(o=o.map((function(e){return e-1})).filter((function(e){return e>=0}))).length),s>4)throw Error("op transpoes2 axis length exceeds maximum length 4, get "+s);for(var a=new Array(s).fill(0),c=0;c<s;c++)a[o[c]]=c;var l=[];for(c=0;c<4;c++)l[c]=a[c]||0;var d=l[0],u=l[1],h=l[2];return"\n    // start函数\n    void main(void) {\n        // 输出数据\n        ivec4 oPos = getOutputTensorPos();\n\n        // 转置 坐标变换\n        float o = 0.0;\n        if ("+s+" == 1) {\n            o = getValueFromTensorPos_origin(oPos[0], oPos[1], oPos[2], oPos[3]);\n        }\n        else if ("+s+" == 2) {\n            o = getValueFromTensorPos_origin(\n                oPos[0], oPos[1],\n                oPos[(2 + "+d+") > 3 ? 3 : (2 + "+d+")],\n                oPos[(2 + "+u+") > 3 ? 3 : (2 + "+u+")]\n            );\n        }\n        else if ("+s+" == 3) {\n            o = getValueFromTensorPos_origin(\n                oPos[0],\n                oPos[(1 + "+d+") > 3 ? 3 : (1 + "+d+")],\n                oPos[(1 + "+u+") > 3 ? 3 : (1 + "+u+")],\n                oPos[(1 + "+h+") > 3 ? 3 : (1 + "+h+")]\n            );\n        }\n        else if ("+s+" == 4) {\n            o = getValueFromTensorPos_origin(\n                oPos["+d+"],\n                oPos["+u+"],\n                oPos["+h+"],\n                oPos["+l[3]+"]\n            );\n        }\n\n\n        setOutput(float(o));\n    }\n    "},params:["axis"],textureFuncConf:{origin:["getValueFromTensorPos"]}},unpacked_2_packed:{mainFunc:function(e,t){return"\n    // start函数\n    void main() {\n        ivec4 oPos = getOutputTensorPos();\n        vec4 out4;\n        for (int i = 0; i < 4; i++) {\n            vec4 o = getValueFromTensorPosPacking_origin(oPos[0], oPos[1] * 4 + i, oPos[2], oPos[3]);\n            out4[i] = o[0];\n        }\n        setPackedOutput(out4);\n    }\n    "},params:[],textureFuncConf:{origin:["getValueFromTensorPosPacking"]}},packed_2_unpacked:{mainFunc:function(e,t){return"\n    // start函数\n    void main() {\n        ivec4 oPos = getOutputTensorPos();\n        float res = 0.0;\n        int c1 = int(mod(float(oPos[1]), 4.0));\n        vec4 o = getValueFromTensorPosPacking_origin(oPos[0], oPos[1] / 4, oPos[2], oPos[3]);\n\n        if (c1 == 0) {\n            res = o.r;\n        } else if (c1 == 1) {\n            res = o.g;\n        } else if (c1 == 2) {\n            res = o.b;\n        } else if (c1 == 3) {\n            res = o.a;\n        }\n        setOutput(res);\n    }\n    "},params:[],textureFuncConf:{origin:["getValueFromTensorPosPacking"]}},unsqueeze2:{mainFunc:function(e,t){var n=e.origin,i=t.axes,r=n.length_unformatted_shape,o=Array.isArray(i)?i:[i],s=4-r-o.length,a=o.map((function(e){return e+s})),c=[0,1,2,3].filter((function(e){return-1===a.indexOf(e)})).map((function(e){return"oPos["+e+"]"})),l=Array.from(new Array(a.length),(function(){return"0"}));return c.splice.apply(c,function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),r=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,r++)i[r]=o[s];return i}([0,0],l)),"\n    void main() {\n        ivec4 oPos = getOutputTensorPos();\n        float o = 0.0;\n        o = getValueFromTensorPos_origin("+c.join(",")+");\n        setOutput(float(o));\n    }\n    "},params:["axes"],textureFuncConf:{origin:["getValueFromTensorPos"]}},flatten_contiguous_range:{mainFunc:function(e,t){var n=e.origin,i=e.out;return"\n    void main() {\n        ivec4 oPos = getOutputTensorPos();\n        // 输出坐标转换为输入坐标\n        int sumVal = oPos.a\n            + oPos.b * "+i.width_shape+"\n            + oPos.g * "+i.height_shape+" * "+i.width_shape+"\n            + oPos.r * "+i.channel+" * "+i.width_shape+" * "+i.height_shape+";\n        ivec4 new_oPos = transferFromNHWCtoNCHW(\n            sumVal,\n            "+n.channel+",\n            "+n.width_shape+",\n            "+n.height_shape+",\n            "+n.total_shape+"\n        );\n        float o = getValueFromTensorPos_origin(new_oPos.r, new_oPos.g, new_oPos.b, new_oPos.a);\n        setOutput(float(o));\n    }\n    "},params:[],textureFuncConf:{origin:["getValueFromTensorPos"]},commonFuncConf:["transferFromNHWCtoNCHW"]},greater_than:{mainFunc:function(e,t){return"\n    // start函数\n    void main(void) {\n        ivec4 oPos = getOutputTensorPos();\n        // 输出坐标转换为输入坐标\n        float x = getValueFromTensorPos_input(oPos.r, oPos.g, oPos.b, oPos.a);\n        float y = getValueFromTensorPos_counter(oPos.r, oPos.g, oPos.b, oPos.a);\n\n        setOutput(bool(x >= y));\n    }\n    "},textureFuncConf:{origin:["getValueFromTensorPos"],counter:["getValueFromTensorPos"]}},reduce_sum:{mainFunc:function(e,t){return"\n    // start函数\n    void main(void) {\n        ivec4 oPos = getOutputTensorPos();\n        // 输出坐标转换为输入坐标\n        float o = 0.0;\n        for (int i = 0; i < "+t.inputs_dim+"; i++) {\n            oPos["+t.dim+"] = i;\n            o += getValueFromTensorPos_origin(oPos.r, oPos.g, oPos.b, oPos.a);;\n        }\n        setOutput(float(o));\n    }\n    "},params:["inputs_dim","dim"],textureFuncConf:{origin:["getValueFromTensorPos"]},behaviors:["normalizeDim"]},where:{mainFunc:function(e,t){return"\n    // start函数\n    void main(void) {\n        ivec4 oPos = getOutputTensorPos();\n        // 输出坐标转换为输入坐标\n        float x = getValueFromTensorPos_input(oPos.r, oPos.g, oPos.b, oPos.a);\n        float y = getValueFromTensorPos_counter(oPos.r, oPos.g, oPos.b, oPos.a);\n        float condition = getValueFromTensorPos_condition(oPos.r, oPos.g, oPos.b, oPos.a);\n        float o = 0.0;\n\n        if (bool(condition)) {\n            o = x;\n        }\n        else {\n            o = y;\n        }\n        setOutput(o);\n    }\n    "},params:[],textureFuncConf:{origin:["getValueFromTensorPos"],counter:["getValueFromTensorPos"],condition:["getValueFromTensorPos"]}},connect:{mainFunc:function(e,t){var n=e.origin,i=e.out,r=i.total_shape,o=i.width_shape,s=i.height_shape,a=i.channel;return"\n    // start函数\n    void main(void) {\n        ivec4 oPos = getOutputTensorPos();\n        float o = 0.0;\n        ivec4 co;\n        int sumVal = oPos.b * "+v([r/(o*s*a),a,s,o])[2]+" + oPos.a;\n        if (sumVal < "+n.total_shape+") {\n            // from origin\n            co = getTensorPosFromArrayIndex_origin(sumVal);\n            o = getValueFromTensorPos_origin(co.r, co.g, co.b, co.a);\n\n        }\n        else {\n            // from counter\n            co = getTensorPosFromArrayIndex_counter(sumVal - "+n.total_shape+");\n            o = getValueFromTensorPos_counter(co.r, co.g, co.b, co.a);\n        }\n        setOutput(float(o));\n    }\n    "},params:[],textureFuncConf:{origin:["getValueFromTensorPos","getTensorPosFromArrayIndex"],counter:["getValueFromTensorPos","getTensorPosFromArrayIndex"]}},reduce_mean:{mainFunc:function(e,t){var n=t.inputs_dim;return"\n    // start函数\n    void main(void) {\n        ivec4 oPos = getOutputTensorPos();\n        // 输出坐标转换为输入坐标\n        float o = 0.0;\n        for (int i = 0; i < "+n+"; i++) {\n            oPos["+t.dim+"] = i;\n            o += getValueFromTensorPos_origin(oPos.r, oPos.g, oPos.b, oPos.a);\n        }\n        o = o / float("+n+");\n        setOutput(o);\n    }\n    "},params:["inputs_dim","dim"],textureFuncConf:{origin:["getValueFromTensorPos"]},behaviors:["normalizeDim"]},hard_swish:{mainFunc:function(e,t){var n=t.offset,i=void 0===n?3:n,r=t.scale,o=void 0===r?6:r,s=t.threshold;return"\n    void main(void) {\n        // 输出数据\n        ivec4 oPos = getOutputTensorPos();\n        float o = getValueFromTensorPos_origin(oPos.r, oPos.g, oPos.b, oPos.a);\n        float res = o * min(max(0.0, o + float("+i+")), float("+(void 0===s?6:s)+")) / float("+o+");\n        setOutput(res);\n    }\n    "},params:["offset","scale","threshold"],textureFuncConf:{origin:["getValueFromTensorPos"]}},nearest_interp:O,nearest_interp_v2:O,cast:{mainFunc:function(e,t){var n="";switch(t.out_dtype){case 0:n="\n            float res_bool = 0.0;\n            if (o != 0.0) {\n                res_bool = 1.0;\n            }\n            setOutput(res_bool);";break;case 1:case 2:case 3:n="\n            int res_int = int(o);\n            setOutput(float(res_int));";break;default:n="       \n            float res_float = o;\n            setOutput(res_float);"}return"\n    void main() {\n       // 输出数据\n        ivec4 oPos = getOutputTensorPos();\n        float o = getValueFromTensorPos_origin(oPos.r, oPos.g, oPos.b, oPos.a);\n        "+n+"\n    }\n    "},params:["out_dtype"],textureFuncConf:{origin:["getValueFromTensorPos"]}},prelu:M("prelu"),relu6:M("relu6"),leakyRelu:M("leakyRelu"),scale:M("scale"),sigmoid:M("sigmoid"),relu:M("relu"),hard_sigmoid:M("hard_sigmoid"),pow:M("pow"),sqrt:M("sqrt"),tanh:M("tanh"),squeeze2:D,pad3d:{mainFunc:function(e,t){var n=e.origin,i=t.paddings,r=t.mode,o=t.value,s=function(e){var t=e.total_shape,n=e.channel,i=e.height_shape,r=e.width_shape;return[t/n/i/r,n,i,r]}(n),a={reflect:"\n            int a;\n            int b;\n            if (oPos.a - "+i[0]+" < 0) {\n                a = "+i[0]+" - oPos.a;\n            }\n            else if (oPos.a - "+i[0]+" >= "+s[3]+") {\n                a = "+s[3]+" - (oPos.a - "+i[0]+" - "+s[3]+" + 1) - 1;\n            }\n            else {\n                a = oPos.a - "+i[0]+";\n            }\n            if (oPos.b - "+i[2]+" < 0) {\n                b = "+i[2]+" - oPos.b;\n            }\n            else if (oPos.b - "+i[2]+" >= "+s[2]+") {\n                b = "+s[2]+" - (oPos.b - "+i[2]+" - "+s[2]+" + 1) - 1;\n            }\n            else {\n                b = oPos.b - "+i[2]+";\n            }\n            o = getValueFromTensorPos_origin(oPos.r, oPos.g, b, a);\n        ",replicate:"\n            int a;\n            int b;\n            if (oPos.a - "+i[0]+" < 0) {\n                a = 0;\n            }\n            else if (oPos.a - "+i[0]+" >= "+s[3]+") {\n                a = "+s[3]+" - 1;\n            }\n            else {\n                a = oPos.a - "+i[0]+";\n            }\n            if (oPos.b - "+i[2]+" < 0) {\n                b = 0;\n            }\n            else if (oPos.b - "+i[2]+" >= "+s[2]+") {\n                b = "+s[2]+" - 1;\n            }\n            else {\n                b = oPos.b - "+i[2]+";\n            }\n            o = getValueFromTensorPos_origin(oPos.r, oPos.g, b, a);\n        ",circular:"\n            int a;\n            int b;\n            if (oPos.a - "+i[0]+" < 0) {\n                a = int(mod(float("+i[0]+" + oPos.a - 1), float("+s[3]+")));\n            }\n            else if (oPos.a - "+i[0]+" >= "+s[3]+") {\n                a = int(mod(float(oPos.a - "+i[0]+" - "+s[3]+"), float("+s[3]+")));\n            }\n            else {\n                a = oPos.a - "+i[0]+";\n            }\n            if (oPos.b - "+i[2]+" < 0) {\n                b = int(mod(float("+i[2]+" + oPos.b - 1), float("+s[2]+")));\n            }\n            else if (oPos.b - "+i[2]+" >= "+s[2]+") {\n                b = int(mod(float(oPos.b - "+i[2]+" - "+s[2]+"), float("+s[2]+")));\n            }\n            else {\n                b = oPos.b - "+i[2]+";\n            }\n            o = getValueFromTensorPos_origin(oPos.r, oPos.g, b, a);\n        ",constant:"",undefined:""};return"\n    // start函数\n    void main(void) {\n        ivec4 oPos = getOutputTensorPos();\n        float o = "+(o||"0.0")+";\n        if (oPos.a - "+i[0]+" >= 0\n            && oPos.b - "+i[2]+" >= 0\n            && oPos.a - "+i[0]+" < "+s[3]+"\n            && oPos.b - "+i[2]+" < "+s[2]+"\n        ) {\n            o = getValueFromTensorPos_origin(oPos.r, oPos.g, oPos.b - "+i[2]+", oPos.a - "+i[0]+");\n        }\n        else {\n            "+a[r]+"\n        }\n        setOutput(float(o));\n    }\n    "},params:["paddings","mode","value"],textureFuncConf:{origin:["getValueFromTensorPos"]}},bilinear_interp_v2:P,shuffle_channel:{mainFunc:function(e,t){var n=e.out,i=t.group,r=void 0===i?2:i,o=n.total_shape,s=n.height_shape,a=n.width_shape,c=n.channel,l=[1,0,2,3];return"\n    // start函数\n    void main(void) {\n        // 输出数据\n        ivec4 oPos = getOutputTensorPos();\n        float o = 0.0;\n\n        int sumVal = oPos.a\n            + oPos.b * "+a+"\n            + oPos.g * "+s+" * "+a+"\n            + oPos.r * "+c+" * "+a+" * "+s+";\n\n        ivec4 transpose_out_pos = transferFromNHWCtoNCHW(\n            sumVal,\n            "+r+",\n            "+a+",\n            "+s+",\n            "+o+"\n        );\n\n        ivec4 transpose_in_pos = ivec4(transpose_out_pos["+l[0]+"],\n            transpose_out_pos["+l[1]+"], transpose_out_pos["+l[2]+"], transpose_out_pos["+l[3]+"]);\n        int sumVal2 = transpose_in_pos.a\n            + transpose_in_pos.b * "+a+"\n            + transpose_in_pos.g * "+s+" * "+a+"\n            + transpose_in_pos.r * "+c/r+" * "+a+" * "+s+";\n        ivec4 origin_oPos = transferFromNHWCtoNCHW(\n            sumVal2,\n            "+c+",\n            "+a+",\n            "+s+",\n            "+o+"\n        );\n\n\n        o = getValueFromTensorPos_origin(\n            origin_oPos[0],\n            origin_oPos[1],\n            origin_oPos[2],\n            origin_oPos[3]\n        );\n\n        setOutput(float(o));\n    }\n    "},params:["group"],textureFuncConf:{origin:["getValueFromTensorPos"]},commonFuncConf:["transferFromNHWCtoNCHW"]},pack_out:{mainFunc:function(e,t){var n=e.origin,i=n.width_texture;return"\n\n    vec2 getOriginCoord(float x, float y) {\n        if (x > float("+i+")) {\n            int num = int(x / float("+i+"));\n            x = mod(x, float("+i+"));\n            y = y + float(num);\n        }\n        return vec2(x, y);\n    }\n\n    float getClipedCoordRed(vec2 xy) {\n        return TEXTURE2D(\n            texture_origin,\n            vec2(float(xy.x / float("+i+")), float(xy.y / float("+n.height_texture+")))\n        ).r;\n    }\n\n    // start函数\n    void main() {\n        \n        vec2 outCoord = vCoord.xy * _2d_shape_texture_out;\n        vec4 out4;\n        float x = floor(outCoord.x) * 4.0;\n        float y = floor(outCoord.y) * 4.0 + 0.5;\n        float x0 = x + 0.5;\n        float x1 = x + 1.5;\n        float x2 = x + 2.5;\n        float x3 = x + 3.5;\n\n        vec2 xy0 = getOriginCoord(x0, y);\n        vec2 xy1 = getOriginCoord(x1, y);\n        vec2 xy2 = getOriginCoord(x2, y);\n        vec2 xy3 = getOriginCoord(x3, y);\n\n        float r = getClipedCoordRed(xy0);\n        float g = getClipedCoordRed(xy1);\n        float b = getClipedCoordRed(xy2);\n        float a = getClipedCoordRed(xy3);\n\n        setPackedOutput(vec4(r, g, b, a));\n    }\n    "},params:[],textureFuncConf:{origin:["getValueFromTensorPosPacking","getValueFromTensorPos"]}},nhwc_2_nchw:{mainFunc:function(e,t){var n=e.origin,i=e.out;return"\n    void main() {\n        ivec4 oPos = getOutputTensorPos();\n        // 输出坐标转换为输入坐标\n        int sumVal = oPos.a * "+i.channel+"\n            + oPos.b * "+i.width_shape+" * "+i.channel+"\n            + oPos.g\n            + oPos.r * "+i.channel+" * "+i.width_shape+" * "+i.height_shape+";\n        ivec4 new_oPos = transferFromNHWCtoNCHW(\n            sumVal,\n            "+n.channel+",\n            "+n.width_shape+",\n            "+n.height_shape+",\n            "+n.total_shape+"\n        );\n        float o = getValueFromTensorPos_origin(new_oPos.r, new_oPos.g, new_oPos.b, new_oPos.a);\n        setOutput(float(o));\n    }\n    "},params:[],textureFuncConf:{origin:["getValueFromTensorPos"]},commonFuncConf:["transferFromNHWCtoNCHW"]}},V=["length_shape","length_unformatted_shape","width_shape","height_shape","width_texture","height_texture","offset_x","offset_y","limit","channel","total_shape","numbers_shape"],k=["total_shape","width_shape","height_shape","width_texture","height_texture","channel","limit"],N={float:["multi_value","bias_value"],bool:["fuse_relu"]};const L="\nivec4 transferFromNHWCtoNCHW(\n    int sumVal,\n    const int channel,\n    const int width_shape,\n    const int height_shape,\n    const int total_shape) {\n\n    int n_origin = int(total_shape/(channel * width_shape * height_shape));\n    int new_a = int(mod(float(sumVal), float(width_shape)));\n    sumVal = int((sumVal - new_a) / width_shape);\n    int new_b = int(mod(float(sumVal), float(height_shape)));\n    sumVal = int((sumVal - new_b) / height_shape);\n    int new_g = int(mod(float(sumVal), float(channel)));\n    sumVal = int((sumVal - new_g) / channel);\n    int new_r = int(mod(float(sumVal), float(n_origin)));\n    return ivec4(new_r,new_g,new_b,new_a);\n}\n";var U="\nfloat prelu(float x, float p, float b) {\n    float result = x;\n    if (x < 0.0) {\n        result = x * p;\n    }\n\n    return result;\n}",F="\nfloat relu6(float x, float threshold, float b) {\n    float result = max(0.0, x);\n    result = min(result, threshold);\n    return result;\n}",j="\nfloat leakyRelu(float x, float p, float b) {\n    float result = 0.0\n    if (x > 0.0) {\n        result = x;\n    }\n    else {\n        result = p * x;\n    }\n    return result;\n}",B="\nfloat scale(float x, float p, float b) {\n    float result = p * x + b;\n    return result;\n}",H="\nfloat scaleWidthBias(float x, float p, float b) {\n    float result = p * (x + b);\n    return result;\n}",$="\nfloat sigmoid(float x, float y, float z) {\n    float result = 1.0 / (1.0 + exp(-x));\n    return result;\n}",q="\n    float hardSigmoid(float x, float slope, float offset) {\n        float result = max(0.0, min(1.0, slope * x + offset));\n        return result;\n    }\n",W="\n    float sqrt(float x, float slope, float offset) {\n        return sqrt(x);\n    }\n",G="\n    float pow_func(float x, float factor, float offset) {\n        return pow(x, factor);\n    }\n",K="\nfloat tanh_func(float x, float y, float z) {\n    return tanh(x);\n}";function z(e,t){return t.limit?function(e,t){var n=t.width_shape,i=t.height_shape;return"\n    // 超限布局根据tensor坐标获取这个tensor位置的值\n    float getValueFromTensorPos_"+e+"(int r, int g, int b, int a) {\n        float pieceW = ceil(float("+n+") / 4.0);\n        int x = int(mod(float(a), pieceW));\n        int offsetY = 0;\n\n        if ((float(a) / pieceW) >= 3.0) {\n            offsetY = 3 * "+i+";\n        }\n        else if (float(a) / pieceW >= 2.0) {\n            offsetY = 2 * "+i+";\n        }\n        else if (float(a) >= pieceW) {\n            offsetY = "+i+";\n        }\n        vec4 pixels = TEXTURE2D(texture_"+e+",\n            vec2(\n                (float(x * "+t.channel+" + g) + 0.5) / float("+t.width_texture+"),\n                (float(r * 4 * "+i+" + b + offsetY) + 0.5) / float("+t.height_texture+")\n            )\n        );\n        return pixels.r;\n    }"}(e,t):function(e,t){var n=t.channel,i=t.height_shape;return"\n    // 根据tensor坐标获取这个tensor位置的值\n    float getValueFromTensorPos_"+e+"(int r, int g, int b, int a) {\n        vec4 pixels = TEXTURE2D(texture_"+e+",\n            vec2(\n                (float(a * "+n+" + g) + 0.5) / float("+t.width_texture+"),\n                (float(r * "+i+" + b) + 0.5) / float("+t.height_texture+")\n            )\n        );\n        // 只用了r通道\n        return pixels.r;\n    }"}(e,t)}function Q(e,t){return t.limit?function(e,t){var n=t.width_shape,i=t.height_shape;return"\n    // 超限布局根据tensor坐标获取这个tensor位置的值\n    float getValueFromTensorPosPacking_"+e+"(int r, int g, int b, int a) {\n        float pieceW = ceil(float("+n+") / 4.0);\n        int x = int(mod(float(a), pieceW));\n        int offsetY = 0;\n\n        if ((float(a) / pieceW) >= 3.0) {\n            offsetY = 3 * "+i+";\n        }\n        else if (float(a) / pieceW >= 2.0) {\n            offsetY = 2 * "+i+";\n        }\n        else if (float(a) >= pieceW) {\n            offsetY = "+i+";\n        }\n        vec4 pixels = TEXTURE2D(texture_"+e+",\n            vec2(\n                (float(x * "+t.channel+" + g) + 0.5) / float("+t.width_texture+"),\n                (float(r * 4 * "+i+" + b + offsetY) + 0.5) / float("+t.height_texture+")\n            )\n        );\n        return pixels;\n    }"}(e,t):function(e,t){var n=t.channel,i=t.height_shape;return"\n    // 根据tensor坐标获取这个tensor位置的值\n    vec4 getValueFromTensorPosPacking_"+e+"(int r, int g, int b, int a) {\n        vec4 pixels = TEXTURE2D(texture_"+e+",\n            vec2(\n                (float(a * "+n+" + g) + 0.5) / float("+t.width_texture+"),\n                (float(r * "+i+" + b) + 0.5) / float("+t.height_texture+")\n            )\n        );\n        return pixels;\n    }"}(e,t)}function J(e,t){var n=t.offset_y;return"\n    // 超限布局根据tensor坐标获取这个tensor位置的值\n    float getValueFromTensorPosPacked_"+e+"(int r, int g, int b, int a) {\n        int y = b / 2;\n        int yOffset = int(mod(float(b), 2.0));\n        int x = a / 2;\n        int xOffset = int(mod(float(a), 2.0));\n        int height = "+t.height_shape+" + "+n+";\n        vec4 pixels = TEXTURE2D(\n            texture_"+e+",\n            vec2((float(x) + 0.5) / float("+t.width_texture+"),\n            (float(g * height / 2 + y) + 0.5) / float("+t.height_texture+"))\n        );\n        int index = 0;\n        if (xOffset == 0 && yOffset == 0) {\n            return pixels[0];\n        }\n        else if (xOffset == 1 && yOffset == 0) {\n            return pixels[1];\n        }\n        else if (xOffset == 0 && yOffset == 1) {\n            return pixels[2];\n        }\n        return pixels[3];\n    }"}function X(e,t){var n=t.numbers_shape,i=t.length_shape;return 1===i?"\n            int getTensorPosFromArrayIndex_"+e+"(int n) {\n                return int(mod(float(n), float("+n[0]+")));\n            }\n        ":"\n    ivec"+i+" shapeVec_"+e+" = ivec"+i+"("+n.join(", ")+");\n    ivec"+i+" getTensorPosFromArrayIndex_"+e+"(int n) {\n        ivec"+i+" pos;\n        pos[0] = n / shapeVec_"+e+"[0];\n        for (int i = 1; i < "+i+"; i++) {\n            n = int(mod(float(n), float(shapeVec_"+e+"[i - 1])));\n            pos[i] = n / shapeVec_"+e+"[i];\n        }\n        return pos;\n    }\n    "}function Y(e){return"\n    #define getPixelsFromTexturePos_"+e+"(pos) TEXTURE2D(texture_"+e+", pos)\n    "}function Z(e,t){return"\n    vec2 moveTexture2PosToReal_"+e+"(vec2 v) {\n        vec2 v2;\n        v2.x = v.x * float("+t.width_texture+");\n        v2.y = v.y * float("+t.height_texture+");\n        return v2;\n    }\n    "}function ee(e){return"uniform sampler2D texture_"+e+";"}const te=function(){function e(e,t,n,i){var r=e;this.vShader=t;try{this.fShader=this.initShader(r,n,"fragment"),this.shape=i&&i.shape;var o=this.program=r.createProgram();r.attachShader(o,this.vShader),r.attachShader(o,this.fShader),r.linkProgram(o)}catch(e){console.error(e)}}return e.prototype.initShader=function(e,t,n){void 0===n&&(n="vertex");var i,r="vertex"===n?e.VERTEX_SHADER:e.FRAGMENT_SHADER;if("vertex"===n&&this.vShader)i=this.vShader;else if(i=e.createShader(r),"vertex"===n&&(this.vShader=i),e.shaderSource(i,t),e.compileShader(i),!e.getShaderParameter(i,e.COMPILE_STATUS))throw new Error("compile: "+e.getShaderInfoLog(i));return i},e.prototype.setProgram=function(e,t,n){e.useProgram(this.program),n||this.runVertexShader(e,t)},e.prototype.runVertexShader=function(e,t){var n=e.getAttribLocation(this.program,"position");e.enableVertexAttribArray(n),e.bindBuffer(e.ARRAY_BUFFER,t),e.vertexAttribPointer(n,2,e.FLOAT,!1,0,0)},e.Sampler="uSampler",e}();var ne,ie=(ne=function(e,t){return(ne=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}ne(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),re=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))},oe=function(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},se=new(function(e){function t(){var t=e.call(this)||this;return t.gl=_.getWebGLRenderingContext(),t.textureConf=p.getTextureConfig(t.gl),t.glVersion=_.getWebglVersion(),t.MAX_TEXTURE_SIZE=t.gl.getParameter(t.gl.MAX_TEXTURE_SIZE),t.cacheTextures={},t.uniformLocations={},t.texturesMap={},t.queryList=[],t.prevTexture=null,t.currentTexture=null,t.width_shape_out=1,t.height_shape_out=1,t.width_texture_out=1,t.height_texture_out=1,t.channel=0,t.total_shape=0,t}return ie(t,e),t.prototype.init=function(){return re(this,void 0,void 0,(function(){var e;return oe(this,(function(t){return(e=this.gl).disable(e.DEPTH_TEST),e.disable(e.STENCIL_TEST),e.disable(e.BLEND),e.disable(e.DITHER),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SAMPLE_COVERAGE),e.enable(e.SCISSOR_TEST),e.enable(e.CULL_FACE),e.cullFace(e.BACK),this.vertexBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bufferData(e.ARRAY_BUFFER,g,e.STATIC_DRAW),this.vShader=_.initShader(e,l.VS_SHADER,C[this.glVersion-1]),this.frameBuffer=e.createFramebuffer(),e.bindFramebuffer(e.FRAMEBUFFER,this.frameBuffer),this.pbo=e.createBuffer(),[2]}))}))},t.prototype.createProgram=function(e){var t=e.name,n=e.outTensor,o=e.inputTensors,s=e.shaderParams,a=e.runtime,l=e.isFinalOp,d=e.isPacked,u=function(e,t,n,o,s,a){void 0===a&&(a=!1);var l,d,u="",h=function(e,t){return e.indexOf("conv2d-elementwise_add")>-1?"conv2d_elementwise_add":t?e+"_packing":e}(t,a);try{var f=A[h],_=f.params,p=void 0===_?{}:_,C=f.mainFunc,g=f.textureFuncConf,m=void 0===g?{}:g,R=f.commonFuncConf,v=function(e,t,n,i){for(var r={},o={},s=[],a=0,c=e;a<c.length;a++){for(var l=c[a],d=l.name,u={},h=0,f=V;h<f.length;h++)void 0!==l[E=f[h]]&&(u[E]=l[E]);r[d]=u,s.push(d)}if(t)for(var _=0,p=t;_<p.length;_++)void 0!==n[E=p[_]]&&(o[E]=n[E]);for(var C=0,g=Object.keys(N);C<g.length;C++)for(var m=g[C],R=0,v=N[m];R<v.length;R++)void 0!==n[E=v[R]]&&(o[E]=m+"("+n[E]+")");for(var I={},y=0,S=k;y<S.length;y++){var E;void 0!==n[(E=S[y])+"_out"]&&(I[E]=n[E+"_out"])}return r.out=I,n.active_function&&(o.active_function=n.active_function),o.runtime=i,{textureParams:r,opParams:o,active_function:n.active_function}}(n,p,o,s),I=v.textureParams,y=v.opParams,S=v.active_function,E=function(e){var t=e.isFrameBufferSupportFloat,n=e.isFinalOp,i=e.isFloatTextureReadPixelsEnabled;return 2===c.get("webglVersion")?"   #version 300 es\n    #ifdef GL_FRAGMENT_PRECISION_HIGH\n        precision highp float;\n        precision highp int;\n    #else\n        precision mediump float;\n        precision mediump int;\n    #endif\n\n    // 顶点shader透传的材质坐标\n    in vec2 vCoord;\n    out vec4 outColor;\n    void setOutput(float result) {\n        outColor.r = result;\n    }\n    void setPackedOutput(vec4 result) {\n        outColor = result;\n    }\n":t?"   #ifdef GL_FRAGMENT_PRECISION_HIGH\n        precision highp float;\n        precision highp int;\n    #else\n        precision highp float;\n        precision highp int;\n    #endif\n        varying vec2 vCoord;\n        varying vec4 outColor;\n        void setOutput(float result) {\n            gl_FragColor.r = result;\n        }\n        void setPackedOutput(vec4 result) {\n            gl_FragColor = result;\n        }\n":n&&!i?"\nprecision highp float;\nprecision highp int;\n\nvarying vec2 vCoord;\nvarying vec4 outColor;\n\nconst float FLOAT_MAX = 1.70141184e38;\nconst float FLOAT_MIN = 1.17549435e-38;\n\n#define isnan(value) isnan_custom(value)\nbool isnan_custom(float val) {\n    return (val > 0. || val < 1. || val == 0.) ? false : true;\n}\n\nlowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n}\n\nvoid setOutput(float result) {\n        gl_FragColor = encode_float(result);\n}\n":"\n#ifdef GL_FRAGMENT_PRECISION_HIGH\n    precision highp float;\n    precision highp int;\n#else\n    precision highp float;\n    precision highp int;\n#endif\n\n    #define isnan(value) isnan_custom(value)\n    bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n    }\n\n    varying vec2 vCoord;\n    varying vec4 outColor;\n    void setOutput(float result) {\n        if(isnan(result)) {\n            gl_FragColor.r = 0.0;\n        }else {\n            gl_FragColor.r = result;\n        }\n    }\n\n    void setPackedOutput(vec4 result) {\n        gl_FragColor = result;\n    }\n"}(e),b=function(e,t,n){if(!e)return"";for(var i="",o="",s=0,a=Object.keys(e);s<a.length;s++){var c=a[s];if(t[c]){o+=ee(c);for(var l=0,d=e[c];l<d.length;l++){var u=d[l];if(r[u])try{i+=r[u](c,t[c],n)}catch(e){console.error(e)}}}}return"\n    "+o+"\n    "+i+"\n    "}(m,I,y),w=function(e){return void 0===e?"":"\n        int layer_run_time = "+e+";\n    "}(s),P=function(e){var t,n,i,r;return"\n        \n    vec2 _2d_shape_texture_out = vec2(float("+e.width_texture+"), float("+e.height_texture+"));\n    \n        "+(e.limit?(n=(t=e).height_shape,i=t.width_shape,"\n    ivec4 getOutputTensorPos() {\n        // 获取原始长度\n        vec2 outCoord = vCoord.xy * _2d_shape_texture_out;\n        float offsetY = floor(outCoord.y / float("+n+"));\n        int x = int(outCoord.x / float("+(r=t.channel)+"));\n        if (mod(offsetY, 4.0) > 0.0) {\n            x += int(mod(offsetY, 4.0)) * int(ceil(float("+i+") / 4.0));\n        }\n        int y = int(mod(outCoord.y, float("+n+")));\n        int c = int(mod(outCoord.x, float("+r+")));\n        int b = int(outCoord.y / float(4 * "+n+"));\n        return ivec4(b, c, y, x);\n    }\n    "):function(e){var t=e.height_shape,n=e.channel;return"\n    ivec4 getOutputTensorPos() {\n        vec2 outCoord = vCoord.xy * _2d_shape_texture_out;\n        int x = int(outCoord.x / float("+n+"));\n        int c = int(mod(outCoord.x, float("+n+")));\n        int y = int(mod(outCoord.y, float("+t+")));\n        int b = int(outCoord.y / float("+t+"));\n        return ivec4(b, c, y, x);\n    }\n    "}(e))+"\n    "}(I.out);l=u="   "+E+"\n            "+function(e){if(!e)return"";for(var t="",n=0,r=e;n<r.length;n++){var o=r[n];i[o]&&(t+=i[o])}return t}(R)+"\n            "+(S?i[S]:"")+"\n            "+b+"\n            "+w+"\n            "+P+"\n            "+C(I,y)+"\n        ",d=1===c.get("webglVersion")?"texture2D":"texture",u=l.replace(/\bTEXTURE2D\b/g,d)}catch(e){console.error("["+h+"]: "+e)}return u}(this.textureConf,t,o,s,a,d),h=new te(this.gl,this.vShader,u,n);h.fsCode=u;var f=p.genOutputTexture(this.gl,this.textureConf,n,l);return this.texturesMap[n.tensorId]=f,this.program=h,h},t.prototype.runProgram=function(e,t){var n=this,i=function(e,t){if(2===t){var n=e.getExtension("EXT_disjoint_timer_query_webgl2");if(!n)return;var i=e.createQuery();return e.beginQuery(n.TIME_ELAPSED_EXT,i),i}return null}(this.gl,this.glVersion),r=e.isPackedOp;e.program.forEach((function(i,o){var s=e.outputTensors[o],a=s.tensorId;n.setOutProps(s),n.attachFrameBuffer(a),i.setProgram(n.gl,n.vertexBuffer,t),n.program=i,n.render(e.inputTensors,e.iLayer,t,o,r,e.modelName)})),i&&!t&&(this.queryListInitLen=this.queryList.length),i&&this.queryList.length>2e3&&(this.queryList=this.queryList.slice(0,this.queryListInitLen)),i&&(this.queryList.push({name:e.name,query:i,count:1}),i=function(e,t,n){if(2===t){var i=e.getExtension("EXT_disjoint_timer_query_webgl2");if(!i)return;e.endQuery(i.TIME_ELAPSED_EXT)}return n}(this.gl,this.glVersion,i))},t.prototype.read=function(e){return re(this,void 0,void 0,(function(){var t,n,i,r,o,s,a;return oe(this,(function(l){switch(l.label){case 0:return t=this.createPBO(),[4,this.createAndWaitForFence()];case 1:return l.sent(),n=this.downloadFloat32TensorFromBuffer(t),i=e?e.shape:[],c.get("webgl_pack_output")?[2,n.slice(0,I(i))]:(i=c.get("debug")&&c.get("shape")?c.get("shape"):this.program.shape,r=i[0],o=i[1],s=i[2],a=i[3],[2,R(n,[r,s,a,o])])}}))}))},t.prototype.createPBO=function(){var e,t=this.textureConf;if(2===this.glVersion){var n=this.gl,i=this.pbo;n.bindBuffer(n.PIXEL_PACK_BUFFER,i);var r=16*this.width_texture_out*this.height_texture_out;return n.bufferData(n.PIXEL_PACK_BUFFER,r,n.STREAM_READ),n.readPixels(0,0,this.width_texture_out,this.height_texture_out,n.RGBA,n.FLOAT,0),n.bindBuffer(n.PIXEL_PACK_BUFFER,null),i}var o=this.gl,s=o.FLOAT;return t.isFloatTextureReadPixelsEnabled?e=new Float32Array(this.width_texture_out*this.height_texture_out*4):(e=new Uint8Array(this.width_texture_out*this.height_texture_out*4),s=o.UNSIGNED_BYTE),o.readPixels(0,0,this.width_texture_out,this.height_texture_out,o.RGBA,s,e),t.isFloatTextureReadPixelsEnabled?e:new Float32Array(e.buffer)},t.prototype.createAndWaitForFence=function(){return re(this,void 0,void 0,(function(){var e,t,n,i,r=this;return oe(this,(function(o){return e=this.gl,t=null!=e.fenceSync,n=function(){return!0},t&&(i=e.fenceSync(e.SYNC_GPU_COMMANDS_COMPLETE,0),e.flush(),n=function(){var t=e.clientWaitSync(i,0,0);return t===e.ALREADY_SIGNALED||t===e.CONDITION_SATISFIED}),[2,new Promise((function(e){r.pollItem(n,e)}))]}))}))},t.prototype.pollItem=function(e,t){var n=function(){e()?t():setTimeout(n,1)};n()},t.prototype.downloadFloat32TensorFromBuffer=function(e){var t=this.gl,n=4*this.width_texture_out*this.height_texture_out;if(2===this.glVersion){var i=new Float32Array(n);t.bindBuffer(t.PIXEL_PACK_BUFFER,e),t.getBufferSubData(t.PIXEL_PACK_BUFFER,0,i),t.bindBuffer(t.PIXEL_PACK_BUFFER,null);var r=[];if(c.get("webgl_pack_output"))return Array.from(i);for(var o=0;o<this.width_texture_out*this.height_texture_out;o++)r.push(i[4*o]);return r}var s=e,a=[];for(o=0;o<this.width_texture_out*this.height_texture_out;o++){var l=this.textureConf.isFloatTextureReadPixelsEnabled?4*o:o;a.push(s[l])}return a},t.prototype.setOutProps=function(e){var t=e.width_shape,n=void 0===t?1:t,i=e.height_shape,r=void 0===i?1:i,o=e.width_texture,s=void 0===o?1:o,a=e.height_texture,c=void 0===a?1:a,l=e.channel,d=void 0===l?0:l,u=e.total_shape,h=void 0===u?0:u;this.width_shape_out=n,this.height_shape_out=r,this.width_texture_out=s,this.height_texture_out=c,this.channel=d,this.total_shape=h},t.prototype.attachFrameBuffer=function(e){this.prevTexture=this.currentTexture,this.currentTexture=this.texturesMap[e];var t=this.gl;return t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.currentTexture,0),t.viewport(0,0,this.width_texture_out,this.height_texture_out),t.scissor(0,0,this.width_texture_out,this.height_texture_out),this.frameBuffer},t.prototype.render=function(e,t,n,i,r,o){void 0===e&&(e=[]),void 0===t&&(t=0),void 0===n&&(n=!1),void 0===r&&(r=!1);var s=this.gl,a=this,c=0;e.forEach((function(e){var l=a.getUniformLoc("texture_"+e.name,t,n,i,o);l&&(a.initTexture(c,e,t,n,r,o),s.uniform1i(l,c++))})),s.drawArrays(s.TRIANGLE_STRIP,0,4)},t.prototype.initTexture=function(e,t,n,i,r,o){var s,a=this.gl,c=this.textureConf,l=t.opts.type,d=o+"_";if(t.data?i&&(n>1||1===n&&!l.endsWith("_image"))?s=this.cacheTextures[d+n]["texture_"+l]:(s=a.createTexture(),this.cacheTextures[d+n]=this.cacheTextures[d+n]||{},this.cacheTextures[d+n]["texture_"+l]=s):s=this.texturesMap[t.opts.type],a.activeTexture(a["TEXTURE"+e]),a.bindTexture(a.TEXTURE_2D,s),t.data&&(!i||i&&1===n&&l.endsWith("_image")))if(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),2===this.glVersion){var u=r?a.RGBA16F:c.internalFormat,h=r?a.RGBA:c.textureFormat;a.texImage2D(a.TEXTURE_2D,0,u,t.width_texture,t.height_texture,0,h,a.FLOAT,t.data)}else{for(var f=new Float32Array(t.width_texture*t.height_texture*4),_=0;_<t.data.length;_++)r?f[_]=t.data[_]:(f[4*_]=t.data[_],f[4*_+1]=0,f[4*_+2]=0,f[4*_+3]=0);a.texImage2D(a.TEXTURE_2D,0,a.RGBA,t.width_texture,t.height_texture,0,a.RGBA,a.FLOAT,f)}},t.prototype.getUniformLoc=function(e,t,n,i,r){var o=r+"_";if(n)return this.uniformLocations[o+t][e+i];var s=this.gl.getUniformLocation(this.program.program,e);return this.uniformLocations[o+t]=this.uniformLocations[o+t]||{},this.uniformLocations[o+t][e+i]=s,s},t.prototype.dispose=function(){},t}((function(){})));!function(e,t,n){a.backend="webgl",t&&(a.backendInstance=t),n&&Object.keys(n).forEach((function(e){!function(e,t){var n=e.conf,i=e.params,r=e.main,o=e.main_packed,s=void 0===o?"":o,c=e.behaviors,l=void 0===c?[]:c,d=a.backend+"_"+t;a.opRegistry.ops[d]||(a.opRegistry.ops[d]={name:t,conf:n,params:i,main:r,main_packed:s,behaviors:l})}(n[e],e)}))}(0,se,A)}},t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={exports:{}};return e[i](r,r.exports,n),r.exports}return n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(740)})()},function(e,t,n){"use strict";n.r(t),n.d(t,"load",(function(){return _})),n.d(t,"preheat",(function(){return p})),n.d(t,"getGrayValue",(function(){return C})),n.d(t,"drawHumanSeg",(function(){return g})),n.d(t,"blurBackground",(function(){return m})),n.d(t,"drawMask",(function(){return R}));var i=n(0),r=(n(2),function(e,t,n){var i=function(e,t,n){var i=new RegExp("\\b"+t+" \\w+ (\\w+)","ig");e.replace(i,(function(e,t){return n[t]=0,e}))},r=function(e,t,n){var i=e.createShader(n);return e.shaderSource(i,t),e.compileShader(i),e.getShaderParameter(i,e.COMPILE_STATUS)?i:(console.log(e.getShaderInfoLog(i)),null)};this.uniform={},this.attribute={};var o=r(e,t,e.VERTEX_SHADER),s=r(e,n,e.FRAGMENT_SHADER);for(var a in this.id=e.createProgram(),e.attachShader(this.id,o),e.attachShader(this.id,s),e.linkProgram(this.id),e.getProgramParameter(this.id,e.LINK_STATUS)||console.log(e.getProgramInfoLog(this.id)),e.useProgram(this.id),i(t,"attribute",this.attribute),this.attribute)this.attribute[a]=e.getAttribLocation(this.id,a);for(var c in i(t,"uniform",this.uniform),i(n,"uniform",this.uniform),this.uniform)this.uniform[c]=e.getUniformLocation(this.id,c)}),o=window.WebGLImageFilter=function(e){e||(e={});var t=null,n=0,i=null,o=!1,s=-1,a=[null,null],c=[],l=-1,d=-1,u=null,h=null,f=e.canvas||document.createElement("canvas"),_={};if(!(t=f.getContext("webgl")||f.getContext("experimental-webgl")))throw"Couldn't get WebGL context";this.addFilter=function(e){var t=Array.prototype.slice.call(arguments,1),n=S[e];c.push({func:n,args:t})},this.reset=function(){c=[]};var p=!1;this.dispose=function(){t.deleteTexture(i),i=null,p=!1},this.apply=function(e){if(C(e.width,e.height),n=0,i||(i=t.createTexture()),t.bindTexture(t.TEXTURE_2D,i),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),p?t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,e):(t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e),p=!0),0==c.length)return v(y.FRAGMENT_IDENTITY),R(),f;for(var r=0;r<c.length;r++){o=r==c.length-1;var s=c[r];s.func.apply(this,s.args||[])}return f};var C=function(e,n){if(e!=l||n!=d){if(f.width=l=e,f.height=d=n,!u){var i=new Float32Array([-1,-1,0,1,1,-1,1,1,-1,1,0,0,-1,1,0,0,1,-1,1,1,1,1,1,0]);u=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,u),t.bufferData(t.ARRAY_BUFFER,i,t.STATIC_DRAW),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0)}t.viewport(0,0,l,d),a=[null,null]}},g=function(e){return a[e]=a[e]||m(l,d),a[e]},m=function(e,n){var i=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,i);var r=t.createRenderbuffer();t.bindRenderbuffer(t.RENDERBUFFER,r);var o=t.createTexture();return t.bindTexture(t.TEXTURE_2D,o),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e,n,0,t.RGBA,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,o,0),t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),{fbo:i,texture:o}},R=function(e){var r,a=null,c=!1;r=0==n?i:g(s).texture,n++,!o||e&I.INTERMEDIATE?a=g(s=(s+1)%2).fbo:(a=null,c=n%2==0),t.bindTexture(t.TEXTURE_2D,r),t.bindFramebuffer(t.FRAMEBUFFER,a),t.uniform1f(h.uniform.flipY,c?-1:1),t.drawArrays(t.TRIANGLES,0,6)},v=function(e){if(_[e])return h=_[e],t.useProgram(h.id),h;h=new r(t,y.VERTEX_IDENTITY,e);var n=Float32Array.BYTES_PER_ELEMENT,i=4*n;return t.enableVertexAttribArray(h.attribute.pos),t.vertexAttribPointer(h.attribute.pos,2,t.FLOAT,!1,i,0*n),t.enableVertexAttribArray(h.attribute.uv),t.vertexAttribPointer(h.attribute.uv,2,t.FLOAT,!1,i,2*n),_[e]=h,h},I={INTERMEDIATE:1},y={};y.VERTEX_IDENTITY=["precision highp float;","attribute vec2 pos;","attribute vec2 uv;","varying vec2 vUv;","uniform float flipY;","void main(void) {","vUv = uv;","gl_Position = vec4(pos.x, pos.y*flipY, 0.0, 1.);","}"].join("\n"),y.FRAGMENT_IDENTITY=["precision highp float;","varying vec2 vUv;","uniform sampler2D texture;","void main(void) {","gl_FragColor = texture2D(texture, vUv);","}"].join("\n");var S={colorMatrix:function(e){var n=new Float32Array(e);n[4]/=255,n[9]/=255,n[14]/=255,n[19]/=255;var i=1==n[18]&&0==n[3]&&0==n[8]&&0==n[13]&&0==n[15]&&0==n[16]&&0==n[17]&&0==n[19]?S.colorMatrix.SHADER.WITHOUT_ALPHA:S.colorMatrix.SHADER.WITH_ALPHA,r=v(i);t.uniform1fv(r.uniform.m,n),R()}};S.colorMatrix.SHADER={},S.colorMatrix.SHADER.WITH_ALPHA=["precision highp float;","varying vec2 vUv;","uniform sampler2D texture;","uniform float m[20];","void main(void) {","vec4 c = texture2D(texture, vUv);","gl_FragColor.r = m[0] * c.r + m[1] * c.g + m[2] * c.b + m[3] * c.a + m[4];","gl_FragColor.g = m[5] * c.r + m[6] * c.g + m[7] * c.b + m[8] * c.a + m[9];","gl_FragColor.b = m[10] * c.r + m[11] * c.g + m[12] * c.b + m[13] * c.a + m[14];","gl_FragColor.a = m[15] * c.r + m[16] * c.g + m[17] * c.b + m[18] * c.a + m[19];","}"].join("\n"),S.colorMatrix.SHADER.WITHOUT_ALPHA=["precision highp float;","varying vec2 vUv;","uniform sampler2D texture;","uniform float m[20];","void main(void) {","vec4 c = texture2D(texture, vUv);","gl_FragColor.r = m[0] * c.r + m[1] * c.g + m[2] * c.b + m[4];","gl_FragColor.g = m[5] * c.r + m[6] * c.g + m[7] * c.b + m[9];","gl_FragColor.b = m[10] * c.r + m[11] * c.g + m[12] * c.b + m[14];","gl_FragColor.a = c.a;","}"].join("\n"),S.brightness=function(e){var t=(e||0)+1;S.colorMatrix([t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0])},S.saturation=function(e){var t=2*(e||0)/3+1,n=-.5*(t-1);S.colorMatrix([t,n,n,0,0,n,t,n,0,0,n,n,t,0,0,0,0,0,1,0])},S.desaturate=function(){S.saturation(-1)},S.contrast=function(e){var t=(e||0)+1,n=-128*(t-1);S.colorMatrix([t,0,0,0,n,0,t,0,0,n,0,0,t,0,n,0,0,0,1,0])},S.negative=function(){S.contrast(-2)},S.hue=function(e){e=(e||0)/180*Math.PI;var t=Math.cos(e),n=Math.sin(e);S.colorMatrix([.213+.787*t+-.213*n,.715+-.715*t+-.715*n,.072+-.072*t+.928*n,0,0,.213+-.213*t+.143*n,.715+t*(1-.715)+.14*n,.072+-.072*t+-.283*n,0,0,.213+-.213*t+-.787*n,.715+-.715*t+.715*n,.072+.928*t+.072*n,0,0,0,0,0,1,0])},S.desaturateLuminance=function(){S.colorMatrix([.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,0,0,0,1,0])},S.sepia=function(){S.colorMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0])},S.brownie=function(){S.colorMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0])},S.vintagePinhole=function(){S.colorMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0])},S.kodachrome=function(){S.colorMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0])},S.technicolor=function(){S.colorMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0])},S.polaroid=function(){S.colorMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0])},S.shiftToBGR=function(){S.colorMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0])},S.convolution=function(e){var n=new Float32Array(e),i=1/l,r=1/d,o=v(S.convolution.SHADER);t.uniform1fv(o.uniform.m,n),t.uniform2f(o.uniform.px,i,r),R()},S.convolution.SHADER=["precision highp float;","varying vec2 vUv;","uniform sampler2D texture;","uniform vec2 px;","uniform float m[9];","void main(void) {","vec4 c11 = texture2D(texture, vUv - px);","vec4 c12 = texture2D(texture, vec2(vUv.x, vUv.y - px.y));","vec4 c13 = texture2D(texture, vec2(vUv.x + px.x, vUv.y - px.y));","vec4 c21 = texture2D(texture, vec2(vUv.x - px.x, vUv.y) );","vec4 c22 = texture2D(texture, vUv);","vec4 c23 = texture2D(texture, vec2(vUv.x + px.x, vUv.y) );","vec4 c31 = texture2D(texture, vec2(vUv.x - px.x, vUv.y + px.y) );","vec4 c32 = texture2D(texture, vec2(vUv.x, vUv.y + px.y) );","vec4 c33 = texture2D(texture, vUv + px );","gl_FragColor = ","c11 * m[0] + c12 * m[1] + c22 * m[2] +","c21 * m[3] + c22 * m[4] + c23 * m[5] +","c31 * m[6] + c32 * m[7] + c33 * m[8];","gl_FragColor.a = c22.a;","}"].join("\n"),S.detectEdges=function(){S.convolution.call(this,[0,1,0,1,-4,1,0,1,0])},S.sobelX=function(){S.convolution.call(this,[-1,0,1,-2,0,2,-1,0,1])},S.sobelY=function(){S.convolution.call(this,[-1,-2,-1,0,0,0,1,2,1])},S.sharpen=function(e){var t=e||1;S.convolution.call(this,[0,-1*t,0,-1*t,1+4*t,-1*t,0,-1*t,0])},S.emboss=function(e){var t=e||1;S.convolution.call(this,[-2*t,-1*t,0,-1*t,1,1*t,0,1*t,2*t])},S.blur=function(e){var n=e/7/l,i=e/7/d,r=v(S.blur.SHADER);t.uniform2f(r.uniform.px,0,i),R(I.INTERMEDIATE),t.uniform2f(r.uniform.px,n,0),R()},S.blur.SHADER=["precision highp float;","varying vec2 vUv;","uniform sampler2D texture;","uniform vec2 px;","void main(void) {","gl_FragColor = vec4(0.0);","gl_FragColor += texture2D(texture, vUv + vec2(-7.0*px.x, -7.0*px.y))*0.0044299121055113265;","gl_FragColor += texture2D(texture, vUv + vec2(-6.0*px.x, -6.0*px.y))*0.00895781211794;","gl_FragColor += texture2D(texture, vUv + vec2(-5.0*px.x, -5.0*px.y))*0.0215963866053;","gl_FragColor += texture2D(texture, vUv + vec2(-4.0*px.x, -4.0*px.y))*0.0443683338718;","gl_FragColor += texture2D(texture, vUv + vec2(-3.0*px.x, -3.0*px.y))*0.0776744219933;","gl_FragColor += texture2D(texture, vUv + vec2(-2.0*px.x, -2.0*px.y))*0.115876621105;","gl_FragColor += texture2D(texture, vUv + vec2(-1.0*px.x, -1.0*px.y))*0.147308056121;","gl_FragColor += texture2D(texture, vUv                             )*0.159576912161;","gl_FragColor += texture2D(texture, vUv + vec2( 1.0*px.x,  1.0*px.y))*0.147308056121;","gl_FragColor += texture2D(texture, vUv + vec2( 2.0*px.x,  2.0*px.y))*0.115876621105;","gl_FragColor += texture2D(texture, vUv + vec2( 3.0*px.x,  3.0*px.y))*0.0776744219933;","gl_FragColor += texture2D(texture, vUv + vec2( 4.0*px.x,  4.0*px.y))*0.0443683338718;","gl_FragColor += texture2D(texture, vUv + vec2( 5.0*px.x,  5.0*px.y))*0.0215963866053;","gl_FragColor += texture2D(texture, vUv + vec2( 6.0*px.x,  6.0*px.y))*0.00895781211794;","gl_FragColor += texture2D(texture, vUv + vec2( 7.0*px.x,  7.0*px.y))*0.0044299121055113265;","}"].join("\n"),S.pixelate=function(e){var n=e/l,i=e/d,r=v(S.pixelate.SHADER);t.uniform2f(r.uniform.size,n,i),R()},S.pixelate.SHADER=["precision highp float;","varying vec2 vUv;","uniform vec2 size;","uniform sampler2D texture;","vec2 pixelate(vec2 coord, vec2 size) {","return floor( coord / size ) * size;","}","void main(void) {","gl_FragColor = vec4(0.0);","vec2 coord = pixelate(vUv, size);","gl_FragColor += texture2D(texture, coord);","}"].join("\n")},s=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))},a=function(e,t){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},c=null,l=null,d=398,u=224,h=null,f=new o;function _(e,t){return void 0===e&&(e=!0),void 0===t&&(t=!1),s(this,void 0,void 0,(function(){var n;return a(this,(function(r){switch(r.label){case 0:return CRVideo.LANHumansegModel?(CRVideo.webServerAddr,CRVideo.webServerAddr,n=t?`https://${CRVideo.webServerAddr}/web/resource/models/shufflenetv2_humanseg_288x160/model.json`:`https://${CRVideo.webServerAddr}/web/resource/models/shufflenetv2_humanseg_398x224/model.json`,t&&(d=288,u=160),c=new i.Runner({modelPath:n,needPreheat:void 0===e||e,feedShape:{fw:d,fh:u},fill:"#fff",targetSize:{height:u,width:d},mean:[.5,.5,.5],std:[.5,.5,.5]}),i.env.set("webgl_pack_channel",!0),i.env.set("webgl_pack_output",!0),i.env.set("webgl_feed_process",!0),i.env.set("webgl_force_half_float_texture",!0),[4,c.init()]):(n=t?"https://paddlejs.cdn.bcebos.com/models/shufflenetv2_humanseg_288x160/model.json":"https://paddlejs.cdn.bcebos.com/models/shufflenetv2_humanseg_398x224/model.json",t&&(d=288,u=160),c=new i.Runner({modelPath:n,needPreheat:void 0===e||e,feedShape:{fw:d,fh:u},fill:"#fff",targetSize:{height:u,width:d},mean:[.5,.5,.5],std:[.5,.5,.5]}),i.env.set("webgl_pack_channel",!0),i.env.set("webgl_pack_output",!0),i.env.set("webgl_feed_process",!0),i.env.set("webgl_force_half_float_texture",!0),[4,c.init()]);case 1:return r.sent(),[2]}}))}))}function p(){return s(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return[4,c.preheat()];case 1:return[2,e.sent()]}}))}))}function C(e){return s(this,void 0,void 0,(function(){var t;return a(this,(function(n){switch(n.label){case 0:return l=e,[4,c.predict(e)];case 1:return t=n.sent(),h=function(){var e=d,t=u,n=e/t,i=l.naturalWidth||l.width,r=l.naturalHeight||l.height,o=0,s=0,a=0,c=0,h=r,f=i,_=i/r;return n/_>=1?(e=t*_,o=Math.floor((d-e)/2),f=h*n,a=Math.floor((f-i)/2)):(t=e/_,s=Math.floor((u-t)/2),h=f/n,c=Math.floor((h-r)/2)),{x:o,y:s,sw:e,sh:t,bx:a,by:c,bw:f,bh:h}}(),[2,{width:d,height:u,data:t}]}}))}))}function g(e,t,n){var i=l.naturalWidth||l.width,r=l.naturalHeight||l.height,o=t.getContext("2d");t.width=d,t.height=u;var s=document.createElement("canvas"),a=s.getContext("2d");s.width=d,s.height=u;var c=o.getImageData(0,0,d,u);a.drawImage(l,h.x,h.y,h.sw,h.sh);for(var f=a.getImageData(0,0,d,u),_=0;_<d*u;_++)255*e[_+d*u]>100&&(c.data[4*_]=f.data[4*_],c.data[4*_+1]=f.data[4*_+1],c.data[4*_+2]=f.data[4*_+2],c.data[4*_+3]=255*e[_+d*u]);a.putImageData(c,0,0),t.width=i,t.height=r,n&&o.drawImage(n,-h.bx,-h.by,h.bw,h.bh),o.drawImage(s,-h.bx,-h.by,h.bw,h.bh)}function m(e,t){var n=l.naturalWidth||l.width,i=l.naturalHeight||l.height,r=document.createElement("canvas"),o=r.getContext("2d");r.width=d,r.height=u;var s=t.getContext("2d");t.width=n,t.height=i;var a=o.getImageData(0,0,d,u);o.drawImage(l,h.x,h.y,h.sw,h.sh);var c=o.getImageData(0,0,d,u);f.dispose();for(var _=f.apply(r),p=0;p<d*u;p++)255*e[p+d*u]>150&&(a.data[4*p]=c.data[4*p],a.data[4*p+1]=c.data[4*p+1],a.data[4*p+2]=c.data[4*p+2],a.data[4*p+3]=255*e[p+d*u]);o.putImageData(a,0,0),s.drawImage(_,-h.bx,-h.by,h.bw,h.bh),s.drawImage(r,-h.bx,-h.by,h.bw,h.bh)}function R(e,t,n){var i=document.createElement("canvas"),r=i.getContext("2d");i.width=d,i.height=u,r.drawImage(t,0,0,d,u);var o=n.getContext("2d");n.width=d,n.height=u;for(var s=r.getImageData(0,0,d,u),a=0;a<d*u;a++)255*e[a+d*u]>150&&(s.data[4*a+3]=255*e[a]);r.putImageData(s,0,0),o.drawImage(i,0,0,d,u)}f.reset(),f.addFilter("blur",10)}])},e.exports=t(),window.humanseg=t()},3412:function(e,t,n){var i;
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */e=n.nmd(e),function(){var r,o="Expected a function",s="__lodash_hash_undefined__",a="__lodash_placeholder__",c=16,l=32,d=64,u=128,h=256,f=1/0,_=9007199254740991,p=NaN,C=4294967295,g=[["ary",u],["bind",1],["bindKey",2],["curry",8],["curryRight",c],["flip",512],["partial",l],["partialRight",d],["rearg",h]],m="[object Arguments]",R="[object Array]",v="[object Boolean]",I="[object Date]",y="[object Error]",S="[object Function]",E="[object GeneratorFunction]",b="[object Map]",w="[object Number]",P="[object Object]",x="[object Promise]",T="[object RegExp]",M="[object Set]",D="[object String]",O="[object Symbol]",A="[object WeakMap]",V="[object ArrayBuffer]",k="[object DataView]",N="[object Float32Array]",L="[object Float64Array]",U="[object Int8Array]",F="[object Int16Array]",j="[object Int32Array]",B="[object Uint8Array]",H="[object Uint8ClampedArray]",$="[object Uint16Array]",q="[object Uint32Array]",W=/\b__p \+= '';/g,G=/\b(__p \+=) '' \+/g,K=/(__e\(.*?\)|\b__t\)) \+\n'';/g,z=/&(?:amp|lt|gt|quot|#39);/g,Q=/[&<>"']/g,J=RegExp(z.source),X=RegExp(Q.source),Y=/<%-([\s\S]+?)%>/g,Z=/<%([\s\S]+?)%>/g,ee=/<%=([\s\S]+?)%>/g,te=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ne=/^\w*$/,ie=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,re=/[\\^$.*+?()[\]{}|]/g,oe=RegExp(re.source),se=/^\s+/,ae=/\s/,ce=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,le=/\{\n\/\* \[wrapped with (.+)\] \*/,de=/,? & /,ue=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,he=/[()=,{}\[\]\/\s]/,fe=/\\(\\)?/g,_e=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,pe=/\w*$/,Ce=/^[-+]0x[0-9a-f]+$/i,ge=/^0b[01]+$/i,me=/^\[object .+?Constructor\]$/,Re=/^0o[0-7]+$/i,ve=/^(?:0|[1-9]\d*)$/,Ie=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ye=/($^)/,Se=/['\n\r\u2028\u2029\\]/g,Ee="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",be="\\u2700-\\u27bf",we="a-z\\xdf-\\xf6\\xf8-\\xff",Pe="A-Z\\xc0-\\xd6\\xd8-\\xde",xe="\\ufe0e\\ufe0f",Te="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Me="['’]",De="[\\ud800-\\udfff]",Oe="["+Te+"]",Ae="["+Ee+"]",Ve="\\d+",ke="[\\u2700-\\u27bf]",Ne="["+we+"]",Le="[^\\ud800-\\udfff"+Te+Ve+be+we+Pe+"]",Ue="\\ud83c[\\udffb-\\udfff]",Fe="[^\\ud800-\\udfff]",je="(?:\\ud83c[\\udde6-\\uddff]){2}",Be="[\\ud800-\\udbff][\\udc00-\\udfff]",He="["+Pe+"]",$e="(?:"+Ne+"|"+Le+")",qe="(?:"+He+"|"+Le+")",We="(?:['’](?:d|ll|m|re|s|t|ve))?",Ge="(?:['’](?:D|LL|M|RE|S|T|VE))?",Ke="(?:"+Ae+"|"+Ue+")"+"?",ze="[\\ufe0e\\ufe0f]?",Qe=ze+Ke+("(?:\\u200d(?:"+[Fe,je,Be].join("|")+")"+ze+Ke+")*"),Je="(?:"+[ke,je,Be].join("|")+")"+Qe,Xe="(?:"+[Fe+Ae+"?",Ae,je,Be,De].join("|")+")",Ye=RegExp(Me,"g"),Ze=RegExp(Ae,"g"),et=RegExp(Ue+"(?="+Ue+")|"+Xe+Qe,"g"),tt=RegExp([He+"?"+Ne+"+"+We+"(?="+[Oe,He,"$"].join("|")+")",qe+"+"+Ge+"(?="+[Oe,He+$e,"$"].join("|")+")",He+"?"+$e+"+"+We,He+"+"+Ge,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ve,Je].join("|"),"g"),nt=RegExp("[\\u200d\\ud800-\\udfff"+Ee+xe+"]"),it=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,rt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ot=-1,st={};st[N]=st[L]=st[U]=st[F]=st[j]=st[B]=st[H]=st[$]=st[q]=!0,st[m]=st[R]=st[V]=st[v]=st[k]=st[I]=st[y]=st[S]=st[b]=st[w]=st[P]=st[T]=st[M]=st[D]=st[A]=!1;var at={};at[m]=at[R]=at[V]=at[k]=at[v]=at[I]=at[N]=at[L]=at[U]=at[F]=at[j]=at[b]=at[w]=at[P]=at[T]=at[M]=at[D]=at[O]=at[B]=at[H]=at[$]=at[q]=!0,at[y]=at[S]=at[A]=!1;var ct={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},lt=parseFloat,dt=parseInt,ut="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,ht="object"==typeof self&&self&&self.Object===Object&&self,ft=ut||ht||Function("return this")(),_t=t&&!t.nodeType&&t,pt=_t&&e&&!e.nodeType&&e,Ct=pt&&pt.exports===_t,gt=Ct&&ut.process,mt=function(){try{var e=pt&&pt.require&&pt.require("util").types;return e||gt&&gt.binding&&gt.binding("util")}catch(e){}}(),Rt=mt&&mt.isArrayBuffer,vt=mt&&mt.isDate,It=mt&&mt.isMap,yt=mt&&mt.isRegExp,St=mt&&mt.isSet,Et=mt&&mt.isTypedArray;function bt(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function wt(e,t,n,i){for(var r=-1,o=null==e?0:e.length;++r<o;){var s=e[r];t(i,s,n(s),e)}return i}function Pt(e,t){for(var n=-1,i=null==e?0:e.length;++n<i&&!1!==t(e[n],n,e););return e}function xt(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function Tt(e,t){for(var n=-1,i=null==e?0:e.length;++n<i;)if(!t(e[n],n,e))return!1;return!0}function Mt(e,t){for(var n=-1,i=null==e?0:e.length,r=0,o=[];++n<i;){var s=e[n];t(s,n,e)&&(o[r++]=s)}return o}function Dt(e,t){return!!(null==e?0:e.length)&&Bt(e,t,0)>-1}function Ot(e,t,n){for(var i=-1,r=null==e?0:e.length;++i<r;)if(n(t,e[i]))return!0;return!1}function At(e,t){for(var n=-1,i=null==e?0:e.length,r=Array(i);++n<i;)r[n]=t(e[n],n,e);return r}function Vt(e,t){for(var n=-1,i=t.length,r=e.length;++n<i;)e[r+n]=t[n];return e}function kt(e,t,n,i){var r=-1,o=null==e?0:e.length;for(i&&o&&(n=e[++r]);++r<o;)n=t(n,e[r],r,e);return n}function Nt(e,t,n,i){var r=null==e?0:e.length;for(i&&r&&(n=e[--r]);r--;)n=t(n,e[r],r,e);return n}function Lt(e,t){for(var n=-1,i=null==e?0:e.length;++n<i;)if(t(e[n],n,e))return!0;return!1}var Ut=Wt("length");function Ft(e,t,n){var i;return n(e,(function(e,n,r){if(t(e,n,r))return i=n,!1})),i}function jt(e,t,n,i){for(var r=e.length,o=n+(i?1:-1);i?o--:++o<r;)if(t(e[o],o,e))return o;return-1}function Bt(e,t,n){return t==t?function(e,t,n){var i=n-1,r=e.length;for(;++i<r;)if(e[i]===t)return i;return-1}(e,t,n):jt(e,$t,n)}function Ht(e,t,n,i){for(var r=n-1,o=e.length;++r<o;)if(i(e[r],t))return r;return-1}function $t(e){return e!=e}function qt(e,t){var n=null==e?0:e.length;return n?zt(e,t)/n:p}function Wt(e){return function(t){return null==t?r:t[e]}}function Gt(e){return function(t){return null==e?r:e[t]}}function Kt(e,t,n,i,r){return r(e,(function(e,r,o){n=i?(i=!1,e):t(n,e,r,o)})),n}function zt(e,t){for(var n,i=-1,o=e.length;++i<o;){var s=t(e[i]);s!==r&&(n=n===r?s:n+s)}return n}function Qt(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}function Jt(e){return e?e.slice(0,pn(e)+1).replace(se,""):e}function Xt(e){return function(t){return e(t)}}function Yt(e,t){return At(t,(function(t){return e[t]}))}function Zt(e,t){return e.has(t)}function en(e,t){for(var n=-1,i=e.length;++n<i&&Bt(t,e[n],0)>-1;);return n}function tn(e,t){for(var n=e.length;n--&&Bt(t,e[n],0)>-1;);return n}function nn(e,t){for(var n=e.length,i=0;n--;)e[n]===t&&++i;return i}var rn=Gt({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"}),on=Gt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function sn(e){return"\\"+ct[e]}function an(e){return nt.test(e)}function cn(e){var t=-1,n=Array(e.size);return e.forEach((function(e,i){n[++t]=[i,e]})),n}function ln(e,t){return function(n){return e(t(n))}}function dn(e,t){for(var n=-1,i=e.length,r=0,o=[];++n<i;){var s=e[n];s!==t&&s!==a||(e[n]=a,o[r++]=n)}return o}function un(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function hn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}function fn(e){return an(e)?function(e){var t=et.lastIndex=0;for(;et.test(e);)++t;return t}(e):Ut(e)}function _n(e){return an(e)?function(e){return e.match(et)||[]}(e):function(e){return e.split("")}(e)}function pn(e){for(var t=e.length;t--&&ae.test(e.charAt(t)););return t}var Cn=Gt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var gn=function e(t){var n,i=(t=null==t?ft:gn.defaults(ft.Object(),t,gn.pick(ft,rt))).Array,ae=t.Date,Ee=t.Error,be=t.Function,we=t.Math,Pe=t.Object,xe=t.RegExp,Te=t.String,Me=t.TypeError,De=i.prototype,Oe=be.prototype,Ae=Pe.prototype,Ve=t["__core-js_shared__"],ke=Oe.toString,Ne=Ae.hasOwnProperty,Le=0,Ue=(n=/[^.]+$/.exec(Ve&&Ve.keys&&Ve.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",Fe=Ae.toString,je=ke.call(Pe),Be=ft._,He=xe("^"+ke.call(Ne).replace(re,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),$e=Ct?t.Buffer:r,qe=t.Symbol,We=t.Uint8Array,Ge=$e?$e.allocUnsafe:r,Ke=ln(Pe.getPrototypeOf,Pe),ze=Pe.create,Qe=Ae.propertyIsEnumerable,Je=De.splice,Xe=qe?qe.isConcatSpreadable:r,et=qe?qe.iterator:r,nt=qe?qe.toStringTag:r,ct=function(){try{var e=_o(Pe,"defineProperty");return e({},"",{}),e}catch(e){}}(),ut=t.clearTimeout!==ft.clearTimeout&&t.clearTimeout,ht=ae&&ae.now!==ft.Date.now&&ae.now,_t=t.setTimeout!==ft.setTimeout&&t.setTimeout,pt=we.ceil,gt=we.floor,mt=Pe.getOwnPropertySymbols,Ut=$e?$e.isBuffer:r,Gt=t.isFinite,mn=De.join,Rn=ln(Pe.keys,Pe),vn=we.max,In=we.min,yn=ae.now,Sn=t.parseInt,En=we.random,bn=De.reverse,wn=_o(t,"DataView"),Pn=_o(t,"Map"),xn=_o(t,"Promise"),Tn=_o(t,"Set"),Mn=_o(t,"WeakMap"),Dn=_o(Pe,"create"),On=Mn&&new Mn,An={},Vn=Bo(wn),kn=Bo(Pn),Nn=Bo(xn),Ln=Bo(Tn),Un=Bo(Mn),Fn=qe?qe.prototype:r,jn=Fn?Fn.valueOf:r,Bn=Fn?Fn.toString:r;function Hn(e){if(ra(e)&&!Ks(e)&&!(e instanceof Gn)){if(e instanceof Wn)return e;if(Ne.call(e,"__wrapped__"))return Ho(e)}return new Wn(e)}var $n=function(){function e(){}return function(t){if(!ia(t))return{};if(ze)return ze(t);e.prototype=t;var n=new e;return e.prototype=r,n}}();function qn(){}function Wn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=r}function Gn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=C,this.__views__=[]}function Kn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function zn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function Qn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function Jn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Qn;++t<n;)this.add(e[t])}function Xn(e){var t=this.__data__=new zn(e);this.size=t.size}function Yn(e,t){var n=Ks(e),i=!n&&Gs(e),r=!n&&!i&&Xs(e),o=!n&&!i&&!r&&ha(e),s=n||i||r||o,a=s?Qt(e.length,Te):[],c=a.length;for(var l in e)!t&&!Ne.call(e,l)||s&&("length"==l||r&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Io(l,c))||a.push(l);return a}function Zn(e){var t=e.length;return t?e[Ji(0,t-1)]:r}function ei(e,t){return Uo(Dr(e),li(t,0,e.length))}function ti(e){return Uo(Dr(e))}function ni(e,t,n){(n!==r&&!$s(e[t],n)||n===r&&!(t in e))&&ai(e,t,n)}function ii(e,t,n){var i=e[t];Ne.call(e,t)&&$s(i,n)&&(n!==r||t in e)||ai(e,t,n)}function ri(e,t){for(var n=e.length;n--;)if($s(e[n][0],t))return n;return-1}function oi(e,t,n,i){return _i(e,(function(e,r,o){t(i,e,n(e),o)})),i}function si(e,t){return e&&Or(t,Va(t),e)}function ai(e,t,n){"__proto__"==t&&ct?ct(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function ci(e,t){for(var n=-1,o=t.length,s=i(o),a=null==e;++n<o;)s[n]=a?r:Ta(e,t[n]);return s}function li(e,t,n){return e==e&&(n!==r&&(e=e<=n?e:n),t!==r&&(e=e>=t?e:t)),e}function di(e,t,n,i,o,s){var a,c=1&t,l=2&t,d=4&t;if(n&&(a=o?n(e,i,o,s):n(e)),a!==r)return a;if(!ia(e))return e;var u=Ks(e);if(u){if(a=function(e){var t=e.length,n=new e.constructor(t);t&&"string"==typeof e[0]&&Ne.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(e),!c)return Dr(e,a)}else{var h=go(e),f=h==S||h==E;if(Xs(e))return br(e,c);if(h==P||h==m||f&&!o){if(a=l||f?{}:Ro(e),!c)return l?function(e,t){return Or(e,Co(e),t)}(e,function(e,t){return e&&Or(t,ka(t),e)}(a,e)):function(e,t){return Or(e,po(e),t)}(e,si(a,e))}else{if(!at[h])return o?e:{};a=function(e,t,n){var i=e.constructor;switch(t){case V:return wr(e);case v:case I:return new i(+e);case k:return function(e,t){var n=t?wr(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case N:case L:case U:case F:case j:case B:case H:case $:case q:return Pr(e,n);case b:return new i;case w:case D:return new i(e);case T:return function(e){var t=new e.constructor(e.source,pe.exec(e));return t.lastIndex=e.lastIndex,t}(e);case M:return new i;case O:return r=e,jn?Pe(jn.call(r)):{}}var r}(e,h,c)}}s||(s=new Xn);var _=s.get(e);if(_)return _;s.set(e,a),la(e)?e.forEach((function(i){a.add(di(i,t,n,i,e,s))})):oa(e)&&e.forEach((function(i,r){a.set(r,di(i,t,n,r,e,s))}));var p=u?r:(d?l?so:oo:l?ka:Va)(e);return Pt(p||e,(function(i,r){p&&(i=e[r=i]),ii(a,r,di(i,t,n,r,e,s))})),a}function ui(e,t,n){var i=n.length;if(null==e)return!i;for(e=Pe(e);i--;){var o=n[i],s=t[o],a=e[o];if(a===r&&!(o in e)||!s(a))return!1}return!0}function hi(e,t,n){if("function"!=typeof e)throw new Me(o);return Vo((function(){e.apply(r,n)}),t)}function fi(e,t,n,i){var r=-1,o=Dt,s=!0,a=e.length,c=[],l=t.length;if(!a)return c;n&&(t=At(t,Xt(n))),i?(o=Ot,s=!1):t.length>=200&&(o=Zt,s=!1,t=new Jn(t));e:for(;++r<a;){var d=e[r],u=null==n?d:n(d);if(d=i||0!==d?d:0,s&&u==u){for(var h=l;h--;)if(t[h]===u)continue e;c.push(d)}else o(t,u,i)||c.push(d)}return c}Hn.templateSettings={escape:Y,evaluate:Z,interpolate:ee,variable:"",imports:{_:Hn}},Hn.prototype=qn.prototype,Hn.prototype.constructor=Hn,Wn.prototype=$n(qn.prototype),Wn.prototype.constructor=Wn,Gn.prototype=$n(qn.prototype),Gn.prototype.constructor=Gn,Kn.prototype.clear=function(){this.__data__=Dn?Dn(null):{},this.size=0},Kn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Kn.prototype.get=function(e){var t=this.__data__;if(Dn){var n=t[e];return n===s?r:n}return Ne.call(t,e)?t[e]:r},Kn.prototype.has=function(e){var t=this.__data__;return Dn?t[e]!==r:Ne.call(t,e)},Kn.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Dn&&t===r?s:t,this},zn.prototype.clear=function(){this.__data__=[],this.size=0},zn.prototype.delete=function(e){var t=this.__data__,n=ri(t,e);return!(n<0)&&(n==t.length-1?t.pop():Je.call(t,n,1),--this.size,!0)},zn.prototype.get=function(e){var t=this.__data__,n=ri(t,e);return n<0?r:t[n][1]},zn.prototype.has=function(e){return ri(this.__data__,e)>-1},zn.prototype.set=function(e,t){var n=this.__data__,i=ri(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this},Qn.prototype.clear=function(){this.size=0,this.__data__={hash:new Kn,map:new(Pn||zn),string:new Kn}},Qn.prototype.delete=function(e){var t=ho(this,e).delete(e);return this.size-=t?1:0,t},Qn.prototype.get=function(e){return ho(this,e).get(e)},Qn.prototype.has=function(e){return ho(this,e).has(e)},Qn.prototype.set=function(e,t){var n=ho(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this},Jn.prototype.add=Jn.prototype.push=function(e){return this.__data__.set(e,s),this},Jn.prototype.has=function(e){return this.__data__.has(e)},Xn.prototype.clear=function(){this.__data__=new zn,this.size=0},Xn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Xn.prototype.get=function(e){return this.__data__.get(e)},Xn.prototype.has=function(e){return this.__data__.has(e)},Xn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof zn){var i=n.__data__;if(!Pn||i.length<199)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new Qn(i)}return n.set(e,t),this.size=n.size,this};var _i=kr(yi),pi=kr(Si,!0);function Ci(e,t){var n=!0;return _i(e,(function(e,i,r){return n=!!t(e,i,r)})),n}function gi(e,t,n){for(var i=-1,o=e.length;++i<o;){var s=e[i],a=t(s);if(null!=a&&(c===r?a==a&&!ua(a):n(a,c)))var c=a,l=s}return l}function mi(e,t){var n=[];return _i(e,(function(e,i,r){t(e,i,r)&&n.push(e)})),n}function Ri(e,t,n,i,r){var o=-1,s=e.length;for(n||(n=vo),r||(r=[]);++o<s;){var a=e[o];t>0&&n(a)?t>1?Ri(a,t-1,n,i,r):Vt(r,a):i||(r[r.length]=a)}return r}var vi=Nr(),Ii=Nr(!0);function yi(e,t){return e&&vi(e,t,Va)}function Si(e,t){return e&&Ii(e,t,Va)}function Ei(e,t){return Mt(t,(function(t){return ea(e[t])}))}function bi(e,t){for(var n=0,i=(t=Ir(t,e)).length;null!=e&&n<i;)e=e[jo(t[n++])];return n&&n==i?e:r}function wi(e,t,n){var i=t(e);return Ks(e)?i:Vt(i,n(e))}function Pi(e){return null==e?e===r?"[object Undefined]":"[object Null]":nt&&nt in Pe(e)?function(e){var t=Ne.call(e,nt),n=e[nt];try{e[nt]=r;var i=!0}catch(e){}var o=Fe.call(e);i&&(t?e[nt]=n:delete e[nt]);return o}(e):function(e){return Fe.call(e)}(e)}function xi(e,t){return e>t}function Ti(e,t){return null!=e&&Ne.call(e,t)}function Mi(e,t){return null!=e&&t in Pe(e)}function Di(e,t,n){for(var o=n?Ot:Dt,s=e[0].length,a=e.length,c=a,l=i(a),d=1/0,u=[];c--;){var h=e[c];c&&t&&(h=At(h,Xt(t))),d=In(h.length,d),l[c]=!n&&(t||s>=120&&h.length>=120)?new Jn(c&&h):r}h=e[0];var f=-1,_=l[0];e:for(;++f<s&&u.length<d;){var p=h[f],C=t?t(p):p;if(p=n||0!==p?p:0,!(_?Zt(_,C):o(u,C,n))){for(c=a;--c;){var g=l[c];if(!(g?Zt(g,C):o(e[c],C,n)))continue e}_&&_.push(C),u.push(p)}}return u}function Oi(e,t,n){var i=null==(e=Mo(e,t=Ir(t,e)))?e:e[jo(Zo(t))];return null==i?r:bt(i,e,n)}function Ai(e){return ra(e)&&Pi(e)==m}function Vi(e,t,n,i,o){return e===t||(null==e||null==t||!ra(e)&&!ra(t)?e!=e&&t!=t:function(e,t,n,i,o,s){var a=Ks(e),c=Ks(t),l=a?R:go(e),d=c?R:go(t),u=(l=l==m?P:l)==P,h=(d=d==m?P:d)==P,f=l==d;if(f&&Xs(e)){if(!Xs(t))return!1;a=!0,u=!1}if(f&&!u)return s||(s=new Xn),a||ha(e)?io(e,t,n,i,o,s):function(e,t,n,i,r,o,s){switch(n){case k:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case V:return!(e.byteLength!=t.byteLength||!o(new We(e),new We(t)));case v:case I:case w:return $s(+e,+t);case y:return e.name==t.name&&e.message==t.message;case T:case D:return e==t+"";case b:var a=cn;case M:var c=1&i;if(a||(a=un),e.size!=t.size&&!c)return!1;var l=s.get(e);if(l)return l==t;i|=2,s.set(e,t);var d=io(a(e),a(t),i,r,o,s);return s.delete(e),d;case O:if(jn)return jn.call(e)==jn.call(t)}return!1}(e,t,l,n,i,o,s);if(!(1&n)){var _=u&&Ne.call(e,"__wrapped__"),p=h&&Ne.call(t,"__wrapped__");if(_||p){var C=_?e.value():e,g=p?t.value():t;return s||(s=new Xn),o(C,g,n,i,s)}}if(!f)return!1;return s||(s=new Xn),function(e,t,n,i,o,s){var a=1&n,c=oo(e),l=c.length,d=oo(t).length;if(l!=d&&!a)return!1;var u=l;for(;u--;){var h=c[u];if(!(a?h in t:Ne.call(t,h)))return!1}var f=s.get(e),_=s.get(t);if(f&&_)return f==t&&_==e;var p=!0;s.set(e,t),s.set(t,e);var C=a;for(;++u<l;){var g=e[h=c[u]],m=t[h];if(i)var R=a?i(m,g,h,t,e,s):i(g,m,h,e,t,s);if(!(R===r?g===m||o(g,m,n,i,s):R)){p=!1;break}C||(C="constructor"==h)}if(p&&!C){var v=e.constructor,I=t.constructor;v==I||!("constructor"in e)||!("constructor"in t)||"function"==typeof v&&v instanceof v&&"function"==typeof I&&I instanceof I||(p=!1)}return s.delete(e),s.delete(t),p}(e,t,n,i,o,s)}(e,t,n,i,Vi,o))}function ki(e,t,n,i){var o=n.length,s=o,a=!i;if(null==e)return!s;for(e=Pe(e);o--;){var c=n[o];if(a&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++o<s;){var l=(c=n[o])[0],d=e[l],u=c[1];if(a&&c[2]){if(d===r&&!(l in e))return!1}else{var h=new Xn;if(i)var f=i(d,u,l,e,t,h);if(!(f===r?Vi(u,d,3,i,h):f))return!1}}return!0}function Ni(e){return!(!ia(e)||(t=e,Ue&&Ue in t))&&(ea(e)?He:me).test(Bo(e));var t}function Li(e){return"function"==typeof e?e:null==e?sc:"object"==typeof e?Ks(e)?$i(e[0],e[1]):Hi(e):pc(e)}function Ui(e){if(!wo(e))return Rn(e);var t=[];for(var n in Pe(e))Ne.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Fi(e){if(!ia(e))return function(e){var t=[];if(null!=e)for(var n in Pe(e))t.push(n);return t}(e);var t=wo(e),n=[];for(var i in e)("constructor"!=i||!t&&Ne.call(e,i))&&n.push(i);return n}function ji(e,t){return e<t}function Bi(e,t){var n=-1,r=Qs(e)?i(e.length):[];return _i(e,(function(e,i,o){r[++n]=t(e,i,o)})),r}function Hi(e){var t=fo(e);return 1==t.length&&t[0][2]?xo(t[0][0],t[0][1]):function(n){return n===e||ki(n,e,t)}}function $i(e,t){return So(e)&&Po(t)?xo(jo(e),t):function(n){var i=Ta(n,e);return i===r&&i===t?Ma(n,e):Vi(t,i,3)}}function qi(e,t,n,i,o){e!==t&&vi(t,(function(s,a){if(o||(o=new Xn),ia(s))!function(e,t,n,i,o,s,a){var c=Oo(e,n),l=Oo(t,n),d=a.get(l);if(d)return void ni(e,n,d);var u=s?s(c,l,n+"",e,t,a):r,h=u===r;if(h){var f=Ks(l),_=!f&&Xs(l),p=!f&&!_&&ha(l);u=l,f||_||p?Ks(c)?u=c:Js(c)?u=Dr(c):_?(h=!1,u=br(l,!0)):p?(h=!1,u=Pr(l,!0)):u=[]:aa(l)||Gs(l)?(u=c,Gs(c)?u=va(c):ia(c)&&!ea(c)||(u=Ro(l))):h=!1}h&&(a.set(l,u),o(u,l,i,s,a),a.delete(l));ni(e,n,u)}(e,t,a,n,qi,i,o);else{var c=i?i(Oo(e,a),s,a+"",e,t,o):r;c===r&&(c=s),ni(e,a,c)}}),ka)}function Wi(e,t){var n=e.length;if(n)return Io(t+=t<0?n:0,n)?e[t]:r}function Gi(e,t,n){t=t.length?At(t,(function(e){return Ks(e)?function(t){return bi(t,1===e.length?e[0]:e)}:e})):[sc];var i=-1;t=At(t,Xt(uo()));var r=Bi(e,(function(e,n,r){var o=At(t,(function(t){return t(e)}));return{criteria:o,index:++i,value:e}}));return function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(r,(function(e,t){return function(e,t,n){var i=-1,r=e.criteria,o=t.criteria,s=r.length,a=n.length;for(;++i<s;){var c=xr(r[i],o[i]);if(c)return i>=a?c:c*("desc"==n[i]?-1:1)}return e.index-t.index}(e,t,n)}))}function Ki(e,t,n){for(var i=-1,r=t.length,o={};++i<r;){var s=t[i],a=bi(e,s);n(a,s)&&tr(o,Ir(s,e),a)}return o}function zi(e,t,n,i){var r=i?Ht:Bt,o=-1,s=t.length,a=e;for(e===t&&(t=Dr(t)),n&&(a=At(e,Xt(n)));++o<s;)for(var c=0,l=t[o],d=n?n(l):l;(c=r(a,d,c,i))>-1;)a!==e&&Je.call(a,c,1),Je.call(e,c,1);return e}function Qi(e,t){for(var n=e?t.length:0,i=n-1;n--;){var r=t[n];if(n==i||r!==o){var o=r;Io(r)?Je.call(e,r,1):fr(e,r)}}return e}function Ji(e,t){return e+gt(En()*(t-e+1))}function Xi(e,t){var n="";if(!e||t<1||t>_)return n;do{t%2&&(n+=e),(t=gt(t/2))&&(e+=e)}while(t);return n}function Yi(e,t){return ko(To(e,t,sc),e+"")}function Zi(e){return Zn($a(e))}function er(e,t){var n=$a(e);return Uo(n,li(t,0,n.length))}function tr(e,t,n,i){if(!ia(e))return e;for(var o=-1,s=(t=Ir(t,e)).length,a=s-1,c=e;null!=c&&++o<s;){var l=jo(t[o]),d=n;if("__proto__"===l||"constructor"===l||"prototype"===l)return e;if(o!=a){var u=c[l];(d=i?i(u,l,c):r)===r&&(d=ia(u)?u:Io(t[o+1])?[]:{})}ii(c,l,d),c=c[l]}return e}var nr=On?function(e,t){return On.set(e,t),e}:sc,ir=ct?function(e,t){return ct(e,"toString",{configurable:!0,enumerable:!1,value:ic(t),writable:!0})}:sc;function rr(e){return Uo($a(e))}function or(e,t,n){var r=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(n=n>o?o:n)<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var s=i(o);++r<o;)s[r]=e[r+t];return s}function sr(e,t){var n;return _i(e,(function(e,i,r){return!(n=t(e,i,r))})),!!n}function ar(e,t,n){var i=0,r=null==e?i:e.length;if("number"==typeof t&&t==t&&r<=2147483647){for(;i<r;){var o=i+r>>>1,s=e[o];null!==s&&!ua(s)&&(n?s<=t:s<t)?i=o+1:r=o}return r}return cr(e,t,sc,n)}function cr(e,t,n,i){var o=0,s=null==e?0:e.length;if(0===s)return 0;for(var a=(t=n(t))!=t,c=null===t,l=ua(t),d=t===r;o<s;){var u=gt((o+s)/2),h=n(e[u]),f=h!==r,_=null===h,p=h==h,C=ua(h);if(a)var g=i||p;else g=d?p&&(i||f):c?p&&f&&(i||!_):l?p&&f&&!_&&(i||!C):!_&&!C&&(i?h<=t:h<t);g?o=u+1:s=u}return In(s,4294967294)}function lr(e,t){for(var n=-1,i=e.length,r=0,o=[];++n<i;){var s=e[n],a=t?t(s):s;if(!n||!$s(a,c)){var c=a;o[r++]=0===s?0:s}}return o}function dr(e){return"number"==typeof e?e:ua(e)?p:+e}function ur(e){if("string"==typeof e)return e;if(Ks(e))return At(e,ur)+"";if(ua(e))return Bn?Bn.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function hr(e,t,n){var i=-1,r=Dt,o=e.length,s=!0,a=[],c=a;if(n)s=!1,r=Ot;else if(o>=200){var l=t?null:Xr(e);if(l)return un(l);s=!1,r=Zt,c=new Jn}else c=t?[]:a;e:for(;++i<o;){var d=e[i],u=t?t(d):d;if(d=n||0!==d?d:0,s&&u==u){for(var h=c.length;h--;)if(c[h]===u)continue e;t&&c.push(u),a.push(d)}else r(c,u,n)||(c!==a&&c.push(u),a.push(d))}return a}function fr(e,t){return null==(e=Mo(e,t=Ir(t,e)))||delete e[jo(Zo(t))]}function _r(e,t,n,i){return tr(e,t,n(bi(e,t)),i)}function pr(e,t,n,i){for(var r=e.length,o=i?r:-1;(i?o--:++o<r)&&t(e[o],o,e););return n?or(e,i?0:o,i?o+1:r):or(e,i?o+1:0,i?r:o)}function Cr(e,t){var n=e;return n instanceof Gn&&(n=n.value()),kt(t,(function(e,t){return t.func.apply(t.thisArg,Vt([e],t.args))}),n)}function gr(e,t,n){var r=e.length;if(r<2)return r?hr(e[0]):[];for(var o=-1,s=i(r);++o<r;)for(var a=e[o],c=-1;++c<r;)c!=o&&(s[o]=fi(s[o]||a,e[c],t,n));return hr(Ri(s,1),t,n)}function mr(e,t,n){for(var i=-1,o=e.length,s=t.length,a={};++i<o;){var c=i<s?t[i]:r;n(a,e[i],c)}return a}function Rr(e){return Js(e)?e:[]}function vr(e){return"function"==typeof e?e:sc}function Ir(e,t){return Ks(e)?e:So(e,t)?[e]:Fo(Ia(e))}var yr=Yi;function Sr(e,t,n){var i=e.length;return n=n===r?i:n,!t&&n>=i?e:or(e,t,n)}var Er=ut||function(e){return ft.clearTimeout(e)};function br(e,t){if(t)return e.slice();var n=e.length,i=Ge?Ge(n):new e.constructor(n);return e.copy(i),i}function wr(e){var t=new e.constructor(e.byteLength);return new We(t).set(new We(e)),t}function Pr(e,t){var n=t?wr(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function xr(e,t){if(e!==t){var n=e!==r,i=null===e,o=e==e,s=ua(e),a=t!==r,c=null===t,l=t==t,d=ua(t);if(!c&&!d&&!s&&e>t||s&&a&&l&&!c&&!d||i&&a&&l||!n&&l||!o)return 1;if(!i&&!s&&!d&&e<t||d&&n&&o&&!i&&!s||c&&n&&o||!a&&o||!l)return-1}return 0}function Tr(e,t,n,r){for(var o=-1,s=e.length,a=n.length,c=-1,l=t.length,d=vn(s-a,0),u=i(l+d),h=!r;++c<l;)u[c]=t[c];for(;++o<a;)(h||o<s)&&(u[n[o]]=e[o]);for(;d--;)u[c++]=e[o++];return u}function Mr(e,t,n,r){for(var o=-1,s=e.length,a=-1,c=n.length,l=-1,d=t.length,u=vn(s-c,0),h=i(u+d),f=!r;++o<u;)h[o]=e[o];for(var _=o;++l<d;)h[_+l]=t[l];for(;++a<c;)(f||o<s)&&(h[_+n[a]]=e[o++]);return h}function Dr(e,t){var n=-1,r=e.length;for(t||(t=i(r));++n<r;)t[n]=e[n];return t}function Or(e,t,n,i){var o=!n;n||(n={});for(var s=-1,a=t.length;++s<a;){var c=t[s],l=i?i(n[c],e[c],c,n,e):r;l===r&&(l=e[c]),o?ai(n,c,l):ii(n,c,l)}return n}function Ar(e,t){return function(n,i){var r=Ks(n)?wt:oi,o=t?t():{};return r(n,e,uo(i,2),o)}}function Vr(e){return Yi((function(t,n){var i=-1,o=n.length,s=o>1?n[o-1]:r,a=o>2?n[2]:r;for(s=e.length>3&&"function"==typeof s?(o--,s):r,a&&yo(n[0],n[1],a)&&(s=o<3?r:s,o=1),t=Pe(t);++i<o;){var c=n[i];c&&e(t,c,i,s)}return t}))}function kr(e,t){return function(n,i){if(null==n)return n;if(!Qs(n))return e(n,i);for(var r=n.length,o=t?r:-1,s=Pe(n);(t?o--:++o<r)&&!1!==i(s[o],o,s););return n}}function Nr(e){return function(t,n,i){for(var r=-1,o=Pe(t),s=i(t),a=s.length;a--;){var c=s[e?a:++r];if(!1===n(o[c],c,o))break}return t}}function Lr(e){return function(t){var n=an(t=Ia(t))?_n(t):r,i=n?n[0]:t.charAt(0),o=n?Sr(n,1).join(""):t.slice(1);return i[e]()+o}}function Ur(e){return function(t){return kt(ec(Ga(t).replace(Ye,"")),e,"")}}function Fr(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=$n(e.prototype),i=e.apply(n,t);return ia(i)?i:n}}function jr(e){return function(t,n,i){var o=Pe(t);if(!Qs(t)){var s=uo(n,3);t=Va(t),n=function(e){return s(o[e],e,o)}}var a=e(t,n,i);return a>-1?o[s?t[a]:a]:r}}function Br(e){return ro((function(t){var n=t.length,i=n,s=Wn.prototype.thru;for(e&&t.reverse();i--;){var a=t[i];if("function"!=typeof a)throw new Me(o);if(s&&!c&&"wrapper"==co(a))var c=new Wn([],!0)}for(i=c?i:n;++i<n;){var l=co(a=t[i]),d="wrapper"==l?ao(a):r;c=d&&Eo(d[0])&&424==d[1]&&!d[4].length&&1==d[9]?c[co(d[0])].apply(c,d[3]):1==a.length&&Eo(a)?c[l]():c.thru(a)}return function(){var e=arguments,i=e[0];if(c&&1==e.length&&Ks(i))return c.plant(i).value();for(var r=0,o=n?t[r].apply(this,e):i;++r<n;)o=t[r].call(this,o);return o}}))}function Hr(e,t,n,o,s,a,c,l,d,h){var f=t&u,_=1&t,p=2&t,C=24&t,g=512&t,m=p?r:Fr(e);return function r(){for(var u=arguments.length,R=i(u),v=u;v--;)R[v]=arguments[v];if(C)var I=lo(r),y=nn(R,I);if(o&&(R=Tr(R,o,s,C)),a&&(R=Mr(R,a,c,C)),u-=y,C&&u<h){var S=dn(R,I);return Qr(e,t,Hr,r.placeholder,n,R,S,l,d,h-u)}var E=_?n:this,b=p?E[e]:e;return u=R.length,l?R=Do(R,l):g&&u>1&&R.reverse(),f&&d<u&&(R.length=d),this&&this!==ft&&this instanceof r&&(b=m||Fr(b)),b.apply(E,R)}}function $r(e,t){return function(n,i){return function(e,t,n,i){return yi(e,(function(e,r,o){t(i,n(e),r,o)})),i}(n,e,t(i),{})}}function qr(e,t){return function(n,i){var o;if(n===r&&i===r)return t;if(n!==r&&(o=n),i!==r){if(o===r)return i;"string"==typeof n||"string"==typeof i?(n=ur(n),i=ur(i)):(n=dr(n),i=dr(i)),o=e(n,i)}return o}}function Wr(e){return ro((function(t){return t=At(t,Xt(uo())),Yi((function(n){var i=this;return e(t,(function(e){return bt(e,i,n)}))}))}))}function Gr(e,t){var n=(t=t===r?" ":ur(t)).length;if(n<2)return n?Xi(t,e):t;var i=Xi(t,pt(e/fn(t)));return an(t)?Sr(_n(i),0,e).join(""):i.slice(0,e)}function Kr(e){return function(t,n,o){return o&&"number"!=typeof o&&yo(t,n,o)&&(n=o=r),t=Ca(t),n===r?(n=t,t=0):n=Ca(n),function(e,t,n,r){for(var o=-1,s=vn(pt((t-e)/(n||1)),0),a=i(s);s--;)a[r?s:++o]=e,e+=n;return a}(t,n,o=o===r?t<n?1:-1:Ca(o),e)}}function zr(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=Ra(t),n=Ra(n)),e(t,n)}}function Qr(e,t,n,i,o,s,a,c,u,h){var f=8&t;t|=f?l:d,4&(t&=~(f?d:l))||(t&=-4);var _=[e,t,o,f?s:r,f?a:r,f?r:s,f?r:a,c,u,h],p=n.apply(r,_);return Eo(e)&&Ao(p,_),p.placeholder=i,No(p,e,t)}function Jr(e){var t=we[e];return function(e,n){if(e=Ra(e),(n=null==n?0:In(ga(n),292))&&Gt(e)){var i=(Ia(e)+"e").split("e");return+((i=(Ia(t(i[0]+"e"+(+i[1]+n)))+"e").split("e"))[0]+"e"+(+i[1]-n))}return t(e)}}var Xr=Tn&&1/un(new Tn([,-0]))[1]==f?function(e){return new Tn(e)}:uc;function Yr(e){return function(t){var n=go(t);return n==b?cn(t):n==M?hn(t):function(e,t){return At(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Zr(e,t,n,s,f,_,p,C){var g=2&t;if(!g&&"function"!=typeof e)throw new Me(o);var m=s?s.length:0;if(m||(t&=-97,s=f=r),p=p===r?p:vn(ga(p),0),C=C===r?C:ga(C),m-=f?f.length:0,t&d){var R=s,v=f;s=f=r}var I=g?r:ao(e),y=[e,t,n,s,f,R,v,_,p,C];if(I&&function(e,t){var n=e[1],i=t[1],r=n|i,o=r<131,s=i==u&&8==n||i==u&&n==h&&e[7].length<=t[8]||384==i&&t[7].length<=t[8]&&8==n;if(!o&&!s)return e;1&i&&(e[2]=t[2],r|=1&n?0:4);var c=t[3];if(c){var l=e[3];e[3]=l?Tr(l,c,t[4]):c,e[4]=l?dn(e[3],a):t[4]}(c=t[5])&&(l=e[5],e[5]=l?Mr(l,c,t[6]):c,e[6]=l?dn(e[5],a):t[6]);(c=t[7])&&(e[7]=c);i&u&&(e[8]=null==e[8]?t[8]:In(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=r}(y,I),e=y[0],t=y[1],n=y[2],s=y[3],f=y[4],!(C=y[9]=y[9]===r?g?0:e.length:vn(y[9]-m,0))&&24&t&&(t&=-25),t&&1!=t)S=8==t||t==c?function(e,t,n){var o=Fr(e);return function s(){for(var a=arguments.length,c=i(a),l=a,d=lo(s);l--;)c[l]=arguments[l];var u=a<3&&c[0]!==d&&c[a-1]!==d?[]:dn(c,d);return(a-=u.length)<n?Qr(e,t,Hr,s.placeholder,r,c,u,r,r,n-a):bt(this&&this!==ft&&this instanceof s?o:e,this,c)}}(e,t,C):t!=l&&33!=t||f.length?Hr.apply(r,y):function(e,t,n,r){var o=1&t,s=Fr(e);return function t(){for(var a=-1,c=arguments.length,l=-1,d=r.length,u=i(d+c),h=this&&this!==ft&&this instanceof t?s:e;++l<d;)u[l]=r[l];for(;c--;)u[l++]=arguments[++a];return bt(h,o?n:this,u)}}(e,t,n,s);else var S=function(e,t,n){var i=1&t,r=Fr(e);return function t(){return(this&&this!==ft&&this instanceof t?r:e).apply(i?n:this,arguments)}}(e,t,n);return No((I?nr:Ao)(S,y),e,t)}function eo(e,t,n,i){return e===r||$s(e,Ae[n])&&!Ne.call(i,n)?t:e}function to(e,t,n,i,o,s){return ia(e)&&ia(t)&&(s.set(t,e),qi(e,t,r,to,s),s.delete(t)),e}function no(e){return aa(e)?r:e}function io(e,t,n,i,o,s){var a=1&n,c=e.length,l=t.length;if(c!=l&&!(a&&l>c))return!1;var d=s.get(e),u=s.get(t);if(d&&u)return d==t&&u==e;var h=-1,f=!0,_=2&n?new Jn:r;for(s.set(e,t),s.set(t,e);++h<c;){var p=e[h],C=t[h];if(i)var g=a?i(C,p,h,t,e,s):i(p,C,h,e,t,s);if(g!==r){if(g)continue;f=!1;break}if(_){if(!Lt(t,(function(e,t){if(!Zt(_,t)&&(p===e||o(p,e,n,i,s)))return _.push(t)}))){f=!1;break}}else if(p!==C&&!o(p,C,n,i,s)){f=!1;break}}return s.delete(e),s.delete(t),f}function ro(e){return ko(To(e,r,zo),e+"")}function oo(e){return wi(e,Va,po)}function so(e){return wi(e,ka,Co)}var ao=On?function(e){return On.get(e)}:uc;function co(e){for(var t=e.name+"",n=An[t],i=Ne.call(An,t)?n.length:0;i--;){var r=n[i],o=r.func;if(null==o||o==e)return r.name}return t}function lo(e){return(Ne.call(Hn,"placeholder")?Hn:e).placeholder}function uo(){var e=Hn.iteratee||ac;return e=e===ac?Li:e,arguments.length?e(arguments[0],arguments[1]):e}function ho(e,t){var n,i,r=e.__data__;return("string"==(i=typeof(n=t))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?r["string"==typeof t?"string":"hash"]:r.map}function fo(e){for(var t=Va(e),n=t.length;n--;){var i=t[n],r=e[i];t[n]=[i,r,Po(r)]}return t}function _o(e,t){var n=function(e,t){return null==e?r:e[t]}(e,t);return Ni(n)?n:r}var po=mt?function(e){return null==e?[]:(e=Pe(e),Mt(mt(e),(function(t){return Qe.call(e,t)})))}:mc,Co=mt?function(e){for(var t=[];e;)Vt(t,po(e)),e=Ke(e);return t}:mc,go=Pi;function mo(e,t,n){for(var i=-1,r=(t=Ir(t,e)).length,o=!1;++i<r;){var s=jo(t[i]);if(!(o=null!=e&&n(e,s)))break;e=e[s]}return o||++i!=r?o:!!(r=null==e?0:e.length)&&na(r)&&Io(s,r)&&(Ks(e)||Gs(e))}function Ro(e){return"function"!=typeof e.constructor||wo(e)?{}:$n(Ke(e))}function vo(e){return Ks(e)||Gs(e)||!!(Xe&&e&&e[Xe])}function Io(e,t){var n=typeof e;return!!(t=null==t?_:t)&&("number"==n||"symbol"!=n&&ve.test(e))&&e>-1&&e%1==0&&e<t}function yo(e,t,n){if(!ia(n))return!1;var i=typeof t;return!!("number"==i?Qs(n)&&Io(t,n.length):"string"==i&&t in n)&&$s(n[t],e)}function So(e,t){if(Ks(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!ua(e))||(ne.test(e)||!te.test(e)||null!=t&&e in Pe(t))}function Eo(e){var t=co(e),n=Hn[t];if("function"!=typeof n||!(t in Gn.prototype))return!1;if(e===n)return!0;var i=ao(n);return!!i&&e===i[0]}(wn&&go(new wn(new ArrayBuffer(1)))!=k||Pn&&go(new Pn)!=b||xn&&go(xn.resolve())!=x||Tn&&go(new Tn)!=M||Mn&&go(new Mn)!=A)&&(go=function(e){var t=Pi(e),n=t==P?e.constructor:r,i=n?Bo(n):"";if(i)switch(i){case Vn:return k;case kn:return b;case Nn:return x;case Ln:return M;case Un:return A}return t});var bo=Ve?ea:Rc;function wo(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Ae)}function Po(e){return e==e&&!ia(e)}function xo(e,t){return function(n){return null!=n&&(n[e]===t&&(t!==r||e in Pe(n)))}}function To(e,t,n){return t=vn(t===r?e.length-1:t,0),function(){for(var r=arguments,o=-1,s=vn(r.length-t,0),a=i(s);++o<s;)a[o]=r[t+o];o=-1;for(var c=i(t+1);++o<t;)c[o]=r[o];return c[t]=n(a),bt(e,this,c)}}function Mo(e,t){return t.length<2?e:bi(e,or(t,0,-1))}function Do(e,t){for(var n=e.length,i=In(t.length,n),o=Dr(e);i--;){var s=t[i];e[i]=Io(s,n)?o[s]:r}return e}function Oo(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var Ao=Lo(nr),Vo=_t||function(e,t){return ft.setTimeout(e,t)},ko=Lo(ir);function No(e,t,n){var i=t+"";return ko(e,function(e,t){var n=t.length;if(!n)return e;var i=n-1;return t[i]=(n>1?"& ":"")+t[i],t=t.join(n>2?", ":" "),e.replace(ce,"{\n/* [wrapped with "+t+"] */\n")}(i,function(e,t){return Pt(g,(function(n){var i="_."+n[0];t&n[1]&&!Dt(e,i)&&e.push(i)})),e.sort()}(function(e){var t=e.match(le);return t?t[1].split(de):[]}(i),n)))}function Lo(e){var t=0,n=0;return function(){var i=yn(),o=16-(i-n);if(n=i,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(r,arguments)}}function Uo(e,t){var n=-1,i=e.length,o=i-1;for(t=t===r?i:t;++n<t;){var s=Ji(n,o),a=e[s];e[s]=e[n],e[n]=a}return e.length=t,e}var Fo=function(e){var t=Ls(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(ie,(function(e,n,i,r){t.push(i?r.replace(fe,"$1"):n||e)})),t}));function jo(e){if("string"==typeof e||ua(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Bo(e){if(null!=e){try{return ke.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Ho(e){if(e instanceof Gn)return e.clone();var t=new Wn(e.__wrapped__,e.__chain__);return t.__actions__=Dr(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var $o=Yi((function(e,t){return Js(e)?fi(e,Ri(t,1,Js,!0)):[]})),qo=Yi((function(e,t){var n=Zo(t);return Js(n)&&(n=r),Js(e)?fi(e,Ri(t,1,Js,!0),uo(n,2)):[]})),Wo=Yi((function(e,t){var n=Zo(t);return Js(n)&&(n=r),Js(e)?fi(e,Ri(t,1,Js,!0),r,n):[]}));function Go(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var r=null==n?0:ga(n);return r<0&&(r=vn(i+r,0)),jt(e,uo(t,3),r)}function Ko(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var o=i-1;return n!==r&&(o=ga(n),o=n<0?vn(i+o,0):In(o,i-1)),jt(e,uo(t,3),o,!0)}function zo(e){return(null==e?0:e.length)?Ri(e,1):[]}function Qo(e){return e&&e.length?e[0]:r}var Jo=Yi((function(e){var t=At(e,Rr);return t.length&&t[0]===e[0]?Di(t):[]})),Xo=Yi((function(e){var t=Zo(e),n=At(e,Rr);return t===Zo(n)?t=r:n.pop(),n.length&&n[0]===e[0]?Di(n,uo(t,2)):[]})),Yo=Yi((function(e){var t=Zo(e),n=At(e,Rr);return(t="function"==typeof t?t:r)&&n.pop(),n.length&&n[0]===e[0]?Di(n,r,t):[]}));function Zo(e){var t=null==e?0:e.length;return t?e[t-1]:r}var es=Yi(ts);function ts(e,t){return e&&e.length&&t&&t.length?zi(e,t):e}var ns=ro((function(e,t){var n=null==e?0:e.length,i=ci(e,t);return Qi(e,At(t,(function(e){return Io(e,n)?+e:e})).sort(xr)),i}));function is(e){return null==e?e:bn.call(e)}var rs=Yi((function(e){return hr(Ri(e,1,Js,!0))})),os=Yi((function(e){var t=Zo(e);return Js(t)&&(t=r),hr(Ri(e,1,Js,!0),uo(t,2))})),ss=Yi((function(e){var t=Zo(e);return t="function"==typeof t?t:r,hr(Ri(e,1,Js,!0),r,t)}));function as(e){if(!e||!e.length)return[];var t=0;return e=Mt(e,(function(e){if(Js(e))return t=vn(e.length,t),!0})),Qt(t,(function(t){return At(e,Wt(t))}))}function cs(e,t){if(!e||!e.length)return[];var n=as(e);return null==t?n:At(n,(function(e){return bt(t,r,e)}))}var ls=Yi((function(e,t){return Js(e)?fi(e,t):[]})),ds=Yi((function(e){return gr(Mt(e,Js))})),us=Yi((function(e){var t=Zo(e);return Js(t)&&(t=r),gr(Mt(e,Js),uo(t,2))})),hs=Yi((function(e){var t=Zo(e);return t="function"==typeof t?t:r,gr(Mt(e,Js),r,t)})),fs=Yi(as);var _s=Yi((function(e){var t=e.length,n=t>1?e[t-1]:r;return n="function"==typeof n?(e.pop(),n):r,cs(e,n)}));function ps(e){var t=Hn(e);return t.__chain__=!0,t}function Cs(e,t){return t(e)}var gs=ro((function(e){var t=e.length,n=t?e[0]:0,i=this.__wrapped__,o=function(t){return ci(t,e)};return!(t>1||this.__actions__.length)&&i instanceof Gn&&Io(n)?((i=i.slice(n,+n+(t?1:0))).__actions__.push({func:Cs,args:[o],thisArg:r}),new Wn(i,this.__chain__).thru((function(e){return t&&!e.length&&e.push(r),e}))):this.thru(o)}));var ms=Ar((function(e,t,n){Ne.call(e,n)?++e[n]:ai(e,n,1)}));var Rs=jr(Go),vs=jr(Ko);function Is(e,t){return(Ks(e)?Pt:_i)(e,uo(t,3))}function ys(e,t){return(Ks(e)?xt:pi)(e,uo(t,3))}var Ss=Ar((function(e,t,n){Ne.call(e,n)?e[n].push(t):ai(e,n,[t])}));var Es=Yi((function(e,t,n){var r=-1,o="function"==typeof t,s=Qs(e)?i(e.length):[];return _i(e,(function(e){s[++r]=o?bt(t,e,n):Oi(e,t,n)})),s})),bs=Ar((function(e,t,n){ai(e,n,t)}));function ws(e,t){return(Ks(e)?At:Bi)(e,uo(t,3))}var Ps=Ar((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]}));var xs=Yi((function(e,t){if(null==e)return[];var n=t.length;return n>1&&yo(e,t[0],t[1])?t=[]:n>2&&yo(t[0],t[1],t[2])&&(t=[t[0]]),Gi(e,Ri(t,1),[])})),Ts=ht||function(){return ft.Date.now()};function Ms(e,t,n){return t=n?r:t,t=e&&null==t?e.length:t,Zr(e,u,r,r,r,r,t)}function Ds(e,t){var n;if("function"!=typeof t)throw new Me(o);return e=ga(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=r),n}}var Os=Yi((function(e,t,n){var i=1;if(n.length){var r=dn(n,lo(Os));i|=l}return Zr(e,i,t,n,r)})),As=Yi((function(e,t,n){var i=3;if(n.length){var r=dn(n,lo(As));i|=l}return Zr(t,i,e,n,r)}));function Vs(e,t,n){var i,s,a,c,l,d,u=0,h=!1,f=!1,_=!0;if("function"!=typeof e)throw new Me(o);function p(t){var n=i,o=s;return i=s=r,u=t,c=e.apply(o,n)}function C(e){return u=e,l=Vo(m,t),h?p(e):c}function g(e){var n=e-d;return d===r||n>=t||n<0||f&&e-u>=a}function m(){var e=Ts();if(g(e))return R(e);l=Vo(m,function(e){var n=t-(e-d);return f?In(n,a-(e-u)):n}(e))}function R(e){return l=r,_&&i?p(e):(i=s=r,c)}function v(){var e=Ts(),n=g(e);if(i=arguments,s=this,d=e,n){if(l===r)return C(d);if(f)return Er(l),l=Vo(m,t),p(d)}return l===r&&(l=Vo(m,t)),c}return t=Ra(t)||0,ia(n)&&(h=!!n.leading,a=(f="maxWait"in n)?vn(Ra(n.maxWait)||0,t):a,_="trailing"in n?!!n.trailing:_),v.cancel=function(){l!==r&&Er(l),u=0,i=d=s=l=r},v.flush=function(){return l===r?c:R(Ts())},v}var ks=Yi((function(e,t){return hi(e,1,t)})),Ns=Yi((function(e,t,n){return hi(e,Ra(t)||0,n)}));function Ls(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Me(o);var n=function(){var i=arguments,r=t?t.apply(this,i):i[0],o=n.cache;if(o.has(r))return o.get(r);var s=e.apply(this,i);return n.cache=o.set(r,s)||o,s};return n.cache=new(Ls.Cache||Qn),n}function Us(e){if("function"!=typeof e)throw new Me(o);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Ls.Cache=Qn;var Fs=yr((function(e,t){var n=(t=1==t.length&&Ks(t[0])?At(t[0],Xt(uo())):At(Ri(t,1),Xt(uo()))).length;return Yi((function(i){for(var r=-1,o=In(i.length,n);++r<o;)i[r]=t[r].call(this,i[r]);return bt(e,this,i)}))})),js=Yi((function(e,t){var n=dn(t,lo(js));return Zr(e,l,r,t,n)})),Bs=Yi((function(e,t){var n=dn(t,lo(Bs));return Zr(e,d,r,t,n)})),Hs=ro((function(e,t){return Zr(e,h,r,r,r,t)}));function $s(e,t){return e===t||e!=e&&t!=t}var qs=zr(xi),Ws=zr((function(e,t){return e>=t})),Gs=Ai(function(){return arguments}())?Ai:function(e){return ra(e)&&Ne.call(e,"callee")&&!Qe.call(e,"callee")},Ks=i.isArray,zs=Rt?Xt(Rt):function(e){return ra(e)&&Pi(e)==V};function Qs(e){return null!=e&&na(e.length)&&!ea(e)}function Js(e){return ra(e)&&Qs(e)}var Xs=Ut||Rc,Ys=vt?Xt(vt):function(e){return ra(e)&&Pi(e)==I};function Zs(e){if(!ra(e))return!1;var t=Pi(e);return t==y||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!aa(e)}function ea(e){if(!ia(e))return!1;var t=Pi(e);return t==S||t==E||"[object AsyncFunction]"==t||"[object Proxy]"==t}function ta(e){return"number"==typeof e&&e==ga(e)}function na(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=_}function ia(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function ra(e){return null!=e&&"object"==typeof e}var oa=It?Xt(It):function(e){return ra(e)&&go(e)==b};function sa(e){return"number"==typeof e||ra(e)&&Pi(e)==w}function aa(e){if(!ra(e)||Pi(e)!=P)return!1;var t=Ke(e);if(null===t)return!0;var n=Ne.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&ke.call(n)==je}var ca=yt?Xt(yt):function(e){return ra(e)&&Pi(e)==T};var la=St?Xt(St):function(e){return ra(e)&&go(e)==M};function da(e){return"string"==typeof e||!Ks(e)&&ra(e)&&Pi(e)==D}function ua(e){return"symbol"==typeof e||ra(e)&&Pi(e)==O}var ha=Et?Xt(Et):function(e){return ra(e)&&na(e.length)&&!!st[Pi(e)]};var fa=zr(ji),_a=zr((function(e,t){return e<=t}));function pa(e){if(!e)return[];if(Qs(e))return da(e)?_n(e):Dr(e);if(et&&e[et])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[et]());var t=go(e);return(t==b?cn:t==M?un:$a)(e)}function Ca(e){return e?(e=Ra(e))===f||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function ga(e){var t=Ca(e),n=t%1;return t==t?n?t-n:t:0}function ma(e){return e?li(ga(e),0,C):0}function Ra(e){if("number"==typeof e)return e;if(ua(e))return p;if(ia(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=ia(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Jt(e);var n=ge.test(e);return n||Re.test(e)?dt(e.slice(2),n?2:8):Ce.test(e)?p:+e}function va(e){return Or(e,ka(e))}function Ia(e){return null==e?"":ur(e)}var ya=Vr((function(e,t){if(wo(t)||Qs(t))Or(t,Va(t),e);else for(var n in t)Ne.call(t,n)&&ii(e,n,t[n])})),Sa=Vr((function(e,t){Or(t,ka(t),e)})),Ea=Vr((function(e,t,n,i){Or(t,ka(t),e,i)})),ba=Vr((function(e,t,n,i){Or(t,Va(t),e,i)})),wa=ro(ci);var Pa=Yi((function(e,t){e=Pe(e);var n=-1,i=t.length,o=i>2?t[2]:r;for(o&&yo(t[0],t[1],o)&&(i=1);++n<i;)for(var s=t[n],a=ka(s),c=-1,l=a.length;++c<l;){var d=a[c],u=e[d];(u===r||$s(u,Ae[d])&&!Ne.call(e,d))&&(e[d]=s[d])}return e})),xa=Yi((function(e){return e.push(r,to),bt(La,r,e)}));function Ta(e,t,n){var i=null==e?r:bi(e,t);return i===r?n:i}function Ma(e,t){return null!=e&&mo(e,t,Mi)}var Da=$r((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Fe.call(t)),e[t]=n}),ic(sc)),Oa=$r((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Fe.call(t)),Ne.call(e,t)?e[t].push(n):e[t]=[n]}),uo),Aa=Yi(Oi);function Va(e){return Qs(e)?Yn(e):Ui(e)}function ka(e){return Qs(e)?Yn(e,!0):Fi(e)}var Na=Vr((function(e,t,n){qi(e,t,n)})),La=Vr((function(e,t,n,i){qi(e,t,n,i)})),Ua=ro((function(e,t){var n={};if(null==e)return n;var i=!1;t=At(t,(function(t){return t=Ir(t,e),i||(i=t.length>1),t})),Or(e,so(e),n),i&&(n=di(n,7,no));for(var r=t.length;r--;)fr(n,t[r]);return n}));var Fa=ro((function(e,t){return null==e?{}:function(e,t){return Ki(e,t,(function(t,n){return Ma(e,n)}))}(e,t)}));function ja(e,t){if(null==e)return{};var n=At(so(e),(function(e){return[e]}));return t=uo(t),Ki(e,n,(function(e,n){return t(e,n[0])}))}var Ba=Yr(Va),Ha=Yr(ka);function $a(e){return null==e?[]:Yt(e,Va(e))}var qa=Ur((function(e,t,n){return t=t.toLowerCase(),e+(n?Wa(t):t)}));function Wa(e){return Za(Ia(e).toLowerCase())}function Ga(e){return(e=Ia(e))&&e.replace(Ie,rn).replace(Ze,"")}var Ka=Ur((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),za=Ur((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),Qa=Lr("toLowerCase");var Ja=Ur((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}));var Xa=Ur((function(e,t,n){return e+(n?" ":"")+Za(t)}));var Ya=Ur((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),Za=Lr("toUpperCase");function ec(e,t,n){return e=Ia(e),(t=n?r:t)===r?function(e){return it.test(e)}(e)?function(e){return e.match(tt)||[]}(e):function(e){return e.match(ue)||[]}(e):e.match(t)||[]}var tc=Yi((function(e,t){try{return bt(e,r,t)}catch(e){return Zs(e)?e:new Ee(e)}})),nc=ro((function(e,t){return Pt(t,(function(t){t=jo(t),ai(e,t,Os(e[t],e))})),e}));function ic(e){return function(){return e}}var rc=Br(),oc=Br(!0);function sc(e){return e}function ac(e){return Li("function"==typeof e?e:di(e,1))}var cc=Yi((function(e,t){return function(n){return Oi(n,e,t)}})),lc=Yi((function(e,t){return function(n){return Oi(e,n,t)}}));function dc(e,t,n){var i=Va(t),r=Ei(t,i);null!=n||ia(t)&&(r.length||!i.length)||(n=t,t=e,e=this,r=Ei(t,Va(t)));var o=!(ia(n)&&"chain"in n&&!n.chain),s=ea(e);return Pt(r,(function(n){var i=t[n];e[n]=i,s&&(e.prototype[n]=function(){var t=this.__chain__;if(o||t){var n=e(this.__wrapped__),r=n.__actions__=Dr(this.__actions__);return r.push({func:i,args:arguments,thisArg:e}),n.__chain__=t,n}return i.apply(e,Vt([this.value()],arguments))})})),e}function uc(){}var hc=Wr(At),fc=Wr(Tt),_c=Wr(Lt);function pc(e){return So(e)?Wt(jo(e)):function(e){return function(t){return bi(t,e)}}(e)}var Cc=Kr(),gc=Kr(!0);function mc(){return[]}function Rc(){return!1}var vc=qr((function(e,t){return e+t}),0),Ic=Jr("ceil"),yc=qr((function(e,t){return e/t}),1),Sc=Jr("floor");var Ec,bc=qr((function(e,t){return e*t}),1),wc=Jr("round"),Pc=qr((function(e,t){return e-t}),0);return Hn.after=function(e,t){if("function"!=typeof t)throw new Me(o);return e=ga(e),function(){if(--e<1)return t.apply(this,arguments)}},Hn.ary=Ms,Hn.assign=ya,Hn.assignIn=Sa,Hn.assignInWith=Ea,Hn.assignWith=ba,Hn.at=wa,Hn.before=Ds,Hn.bind=Os,Hn.bindAll=nc,Hn.bindKey=As,Hn.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Ks(e)?e:[e]},Hn.chain=ps,Hn.chunk=function(e,t,n){t=(n?yo(e,t,n):t===r)?1:vn(ga(t),0);var o=null==e?0:e.length;if(!o||t<1)return[];for(var s=0,a=0,c=i(pt(o/t));s<o;)c[a++]=or(e,s,s+=t);return c},Hn.compact=function(e){for(var t=-1,n=null==e?0:e.length,i=0,r=[];++t<n;){var o=e[t];o&&(r[i++]=o)}return r},Hn.concat=function(){var e=arguments.length;if(!e)return[];for(var t=i(e-1),n=arguments[0],r=e;r--;)t[r-1]=arguments[r];return Vt(Ks(n)?Dr(n):[n],Ri(t,1))},Hn.cond=function(e){var t=null==e?0:e.length,n=uo();return e=t?At(e,(function(e){if("function"!=typeof e[1])throw new Me(o);return[n(e[0]),e[1]]})):[],Yi((function(n){for(var i=-1;++i<t;){var r=e[i];if(bt(r[0],this,n))return bt(r[1],this,n)}}))},Hn.conforms=function(e){return function(e){var t=Va(e);return function(n){return ui(n,e,t)}}(di(e,1))},Hn.constant=ic,Hn.countBy=ms,Hn.create=function(e,t){var n=$n(e);return null==t?n:si(n,t)},Hn.curry=function e(t,n,i){var o=Zr(t,8,r,r,r,r,r,n=i?r:n);return o.placeholder=e.placeholder,o},Hn.curryRight=function e(t,n,i){var o=Zr(t,c,r,r,r,r,r,n=i?r:n);return o.placeholder=e.placeholder,o},Hn.debounce=Vs,Hn.defaults=Pa,Hn.defaultsDeep=xa,Hn.defer=ks,Hn.delay=Ns,Hn.difference=$o,Hn.differenceBy=qo,Hn.differenceWith=Wo,Hn.drop=function(e,t,n){var i=null==e?0:e.length;return i?or(e,(t=n||t===r?1:ga(t))<0?0:t,i):[]},Hn.dropRight=function(e,t,n){var i=null==e?0:e.length;return i?or(e,0,(t=i-(t=n||t===r?1:ga(t)))<0?0:t):[]},Hn.dropRightWhile=function(e,t){return e&&e.length?pr(e,uo(t,3),!0,!0):[]},Hn.dropWhile=function(e,t){return e&&e.length?pr(e,uo(t,3),!0):[]},Hn.fill=function(e,t,n,i){var o=null==e?0:e.length;return o?(n&&"number"!=typeof n&&yo(e,t,n)&&(n=0,i=o),function(e,t,n,i){var o=e.length;for((n=ga(n))<0&&(n=-n>o?0:o+n),(i=i===r||i>o?o:ga(i))<0&&(i+=o),i=n>i?0:ma(i);n<i;)e[n++]=t;return e}(e,t,n,i)):[]},Hn.filter=function(e,t){return(Ks(e)?Mt:mi)(e,uo(t,3))},Hn.flatMap=function(e,t){return Ri(ws(e,t),1)},Hn.flatMapDeep=function(e,t){return Ri(ws(e,t),f)},Hn.flatMapDepth=function(e,t,n){return n=n===r?1:ga(n),Ri(ws(e,t),n)},Hn.flatten=zo,Hn.flattenDeep=function(e){return(null==e?0:e.length)?Ri(e,f):[]},Hn.flattenDepth=function(e,t){return(null==e?0:e.length)?Ri(e,t=t===r?1:ga(t)):[]},Hn.flip=function(e){return Zr(e,512)},Hn.flow=rc,Hn.flowRight=oc,Hn.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,i={};++t<n;){var r=e[t];i[r[0]]=r[1]}return i},Hn.functions=function(e){return null==e?[]:Ei(e,Va(e))},Hn.functionsIn=function(e){return null==e?[]:Ei(e,ka(e))},Hn.groupBy=Ss,Hn.initial=function(e){return(null==e?0:e.length)?or(e,0,-1):[]},Hn.intersection=Jo,Hn.intersectionBy=Xo,Hn.intersectionWith=Yo,Hn.invert=Da,Hn.invertBy=Oa,Hn.invokeMap=Es,Hn.iteratee=ac,Hn.keyBy=bs,Hn.keys=Va,Hn.keysIn=ka,Hn.map=ws,Hn.mapKeys=function(e,t){var n={};return t=uo(t,3),yi(e,(function(e,i,r){ai(n,t(e,i,r),e)})),n},Hn.mapValues=function(e,t){var n={};return t=uo(t,3),yi(e,(function(e,i,r){ai(n,i,t(e,i,r))})),n},Hn.matches=function(e){return Hi(di(e,1))},Hn.matchesProperty=function(e,t){return $i(e,di(t,1))},Hn.memoize=Ls,Hn.merge=Na,Hn.mergeWith=La,Hn.method=cc,Hn.methodOf=lc,Hn.mixin=dc,Hn.negate=Us,Hn.nthArg=function(e){return e=ga(e),Yi((function(t){return Wi(t,e)}))},Hn.omit=Ua,Hn.omitBy=function(e,t){return ja(e,Us(uo(t)))},Hn.once=function(e){return Ds(2,e)},Hn.orderBy=function(e,t,n,i){return null==e?[]:(Ks(t)||(t=null==t?[]:[t]),Ks(n=i?r:n)||(n=null==n?[]:[n]),Gi(e,t,n))},Hn.over=hc,Hn.overArgs=Fs,Hn.overEvery=fc,Hn.overSome=_c,Hn.partial=js,Hn.partialRight=Bs,Hn.partition=Ps,Hn.pick=Fa,Hn.pickBy=ja,Hn.property=pc,Hn.propertyOf=function(e){return function(t){return null==e?r:bi(e,t)}},Hn.pull=es,Hn.pullAll=ts,Hn.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?zi(e,t,uo(n,2)):e},Hn.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?zi(e,t,r,n):e},Hn.pullAt=ns,Hn.range=Cc,Hn.rangeRight=gc,Hn.rearg=Hs,Hn.reject=function(e,t){return(Ks(e)?Mt:mi)(e,Us(uo(t,3)))},Hn.remove=function(e,t){var n=[];if(!e||!e.length)return n;var i=-1,r=[],o=e.length;for(t=uo(t,3);++i<o;){var s=e[i];t(s,i,e)&&(n.push(s),r.push(i))}return Qi(e,r),n},Hn.rest=function(e,t){if("function"!=typeof e)throw new Me(o);return Yi(e,t=t===r?t:ga(t))},Hn.reverse=is,Hn.sampleSize=function(e,t,n){return t=(n?yo(e,t,n):t===r)?1:ga(t),(Ks(e)?ei:er)(e,t)},Hn.set=function(e,t,n){return null==e?e:tr(e,t,n)},Hn.setWith=function(e,t,n,i){return i="function"==typeof i?i:r,null==e?e:tr(e,t,n,i)},Hn.shuffle=function(e){return(Ks(e)?ti:rr)(e)},Hn.slice=function(e,t,n){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&yo(e,t,n)?(t=0,n=i):(t=null==t?0:ga(t),n=n===r?i:ga(n)),or(e,t,n)):[]},Hn.sortBy=xs,Hn.sortedUniq=function(e){return e&&e.length?lr(e):[]},Hn.sortedUniqBy=function(e,t){return e&&e.length?lr(e,uo(t,2)):[]},Hn.split=function(e,t,n){return n&&"number"!=typeof n&&yo(e,t,n)&&(t=n=r),(n=n===r?C:n>>>0)?(e=Ia(e))&&("string"==typeof t||null!=t&&!ca(t))&&!(t=ur(t))&&an(e)?Sr(_n(e),0,n):e.split(t,n):[]},Hn.spread=function(e,t){if("function"!=typeof e)throw new Me(o);return t=null==t?0:vn(ga(t),0),Yi((function(n){var i=n[t],r=Sr(n,0,t);return i&&Vt(r,i),bt(e,this,r)}))},Hn.tail=function(e){var t=null==e?0:e.length;return t?or(e,1,t):[]},Hn.take=function(e,t,n){return e&&e.length?or(e,0,(t=n||t===r?1:ga(t))<0?0:t):[]},Hn.takeRight=function(e,t,n){var i=null==e?0:e.length;return i?or(e,(t=i-(t=n||t===r?1:ga(t)))<0?0:t,i):[]},Hn.takeRightWhile=function(e,t){return e&&e.length?pr(e,uo(t,3),!1,!0):[]},Hn.takeWhile=function(e,t){return e&&e.length?pr(e,uo(t,3)):[]},Hn.tap=function(e,t){return t(e),e},Hn.throttle=function(e,t,n){var i=!0,r=!0;if("function"!=typeof e)throw new Me(o);return ia(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),Vs(e,t,{leading:i,maxWait:t,trailing:r})},Hn.thru=Cs,Hn.toArray=pa,Hn.toPairs=Ba,Hn.toPairsIn=Ha,Hn.toPath=function(e){return Ks(e)?At(e,jo):ua(e)?[e]:Dr(Fo(Ia(e)))},Hn.toPlainObject=va,Hn.transform=function(e,t,n){var i=Ks(e),r=i||Xs(e)||ha(e);if(t=uo(t,4),null==n){var o=e&&e.constructor;n=r?i?new o:[]:ia(e)&&ea(o)?$n(Ke(e)):{}}return(r?Pt:yi)(e,(function(e,i,r){return t(n,e,i,r)})),n},Hn.unary=function(e){return Ms(e,1)},Hn.union=rs,Hn.unionBy=os,Hn.unionWith=ss,Hn.uniq=function(e){return e&&e.length?hr(e):[]},Hn.uniqBy=function(e,t){return e&&e.length?hr(e,uo(t,2)):[]},Hn.uniqWith=function(e,t){return t="function"==typeof t?t:r,e&&e.length?hr(e,r,t):[]},Hn.unset=function(e,t){return null==e||fr(e,t)},Hn.unzip=as,Hn.unzipWith=cs,Hn.update=function(e,t,n){return null==e?e:_r(e,t,vr(n))},Hn.updateWith=function(e,t,n,i){return i="function"==typeof i?i:r,null==e?e:_r(e,t,vr(n),i)},Hn.values=$a,Hn.valuesIn=function(e){return null==e?[]:Yt(e,ka(e))},Hn.without=ls,Hn.words=ec,Hn.wrap=function(e,t){return js(vr(t),e)},Hn.xor=ds,Hn.xorBy=us,Hn.xorWith=hs,Hn.zip=fs,Hn.zipObject=function(e,t){return mr(e||[],t||[],ii)},Hn.zipObjectDeep=function(e,t){return mr(e||[],t||[],tr)},Hn.zipWith=_s,Hn.entries=Ba,Hn.entriesIn=Ha,Hn.extend=Sa,Hn.extendWith=Ea,dc(Hn,Hn),Hn.add=vc,Hn.attempt=tc,Hn.camelCase=qa,Hn.capitalize=Wa,Hn.ceil=Ic,Hn.clamp=function(e,t,n){return n===r&&(n=t,t=r),n!==r&&(n=(n=Ra(n))==n?n:0),t!==r&&(t=(t=Ra(t))==t?t:0),li(Ra(e),t,n)},Hn.clone=function(e){return di(e,4)},Hn.cloneDeep=function(e){return di(e,5)},Hn.cloneDeepWith=function(e,t){return di(e,5,t="function"==typeof t?t:r)},Hn.cloneWith=function(e,t){return di(e,4,t="function"==typeof t?t:r)},Hn.conformsTo=function(e,t){return null==t||ui(e,t,Va(t))},Hn.deburr=Ga,Hn.defaultTo=function(e,t){return null==e||e!=e?t:e},Hn.divide=yc,Hn.endsWith=function(e,t,n){e=Ia(e),t=ur(t);var i=e.length,o=n=n===r?i:li(ga(n),0,i);return(n-=t.length)>=0&&e.slice(n,o)==t},Hn.eq=$s,Hn.escape=function(e){return(e=Ia(e))&&X.test(e)?e.replace(Q,on):e},Hn.escapeRegExp=function(e){return(e=Ia(e))&&oe.test(e)?e.replace(re,"\\$&"):e},Hn.every=function(e,t,n){var i=Ks(e)?Tt:Ci;return n&&yo(e,t,n)&&(t=r),i(e,uo(t,3))},Hn.find=Rs,Hn.findIndex=Go,Hn.findKey=function(e,t){return Ft(e,uo(t,3),yi)},Hn.findLast=vs,Hn.findLastIndex=Ko,Hn.findLastKey=function(e,t){return Ft(e,uo(t,3),Si)},Hn.floor=Sc,Hn.forEach=Is,Hn.forEachRight=ys,Hn.forIn=function(e,t){return null==e?e:vi(e,uo(t,3),ka)},Hn.forInRight=function(e,t){return null==e?e:Ii(e,uo(t,3),ka)},Hn.forOwn=function(e,t){return e&&yi(e,uo(t,3))},Hn.forOwnRight=function(e,t){return e&&Si(e,uo(t,3))},Hn.get=Ta,Hn.gt=qs,Hn.gte=Ws,Hn.has=function(e,t){return null!=e&&mo(e,t,Ti)},Hn.hasIn=Ma,Hn.head=Qo,Hn.identity=sc,Hn.includes=function(e,t,n,i){e=Qs(e)?e:$a(e),n=n&&!i?ga(n):0;var r=e.length;return n<0&&(n=vn(r+n,0)),da(e)?n<=r&&e.indexOf(t,n)>-1:!!r&&Bt(e,t,n)>-1},Hn.indexOf=function(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var r=null==n?0:ga(n);return r<0&&(r=vn(i+r,0)),Bt(e,t,r)},Hn.inRange=function(e,t,n){return t=Ca(t),n===r?(n=t,t=0):n=Ca(n),function(e,t,n){return e>=In(t,n)&&e<vn(t,n)}(e=Ra(e),t,n)},Hn.invoke=Aa,Hn.isArguments=Gs,Hn.isArray=Ks,Hn.isArrayBuffer=zs,Hn.isArrayLike=Qs,Hn.isArrayLikeObject=Js,Hn.isBoolean=function(e){return!0===e||!1===e||ra(e)&&Pi(e)==v},Hn.isBuffer=Xs,Hn.isDate=Ys,Hn.isElement=function(e){return ra(e)&&1===e.nodeType&&!aa(e)},Hn.isEmpty=function(e){if(null==e)return!0;if(Qs(e)&&(Ks(e)||"string"==typeof e||"function"==typeof e.splice||Xs(e)||ha(e)||Gs(e)))return!e.length;var t=go(e);if(t==b||t==M)return!e.size;if(wo(e))return!Ui(e).length;for(var n in e)if(Ne.call(e,n))return!1;return!0},Hn.isEqual=function(e,t){return Vi(e,t)},Hn.isEqualWith=function(e,t,n){var i=(n="function"==typeof n?n:r)?n(e,t):r;return i===r?Vi(e,t,r,n):!!i},Hn.isError=Zs,Hn.isFinite=function(e){return"number"==typeof e&&Gt(e)},Hn.isFunction=ea,Hn.isInteger=ta,Hn.isLength=na,Hn.isMap=oa,Hn.isMatch=function(e,t){return e===t||ki(e,t,fo(t))},Hn.isMatchWith=function(e,t,n){return n="function"==typeof n?n:r,ki(e,t,fo(t),n)},Hn.isNaN=function(e){return sa(e)&&e!=+e},Hn.isNative=function(e){if(bo(e))throw new Ee("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Ni(e)},Hn.isNil=function(e){return null==e},Hn.isNull=function(e){return null===e},Hn.isNumber=sa,Hn.isObject=ia,Hn.isObjectLike=ra,Hn.isPlainObject=aa,Hn.isRegExp=ca,Hn.isSafeInteger=function(e){return ta(e)&&e>=-9007199254740991&&e<=_},Hn.isSet=la,Hn.isString=da,Hn.isSymbol=ua,Hn.isTypedArray=ha,Hn.isUndefined=function(e){return e===r},Hn.isWeakMap=function(e){return ra(e)&&go(e)==A},Hn.isWeakSet=function(e){return ra(e)&&"[object WeakSet]"==Pi(e)},Hn.join=function(e,t){return null==e?"":mn.call(e,t)},Hn.kebabCase=Ka,Hn.last=Zo,Hn.lastIndexOf=function(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var o=i;return n!==r&&(o=(o=ga(n))<0?vn(i+o,0):In(o,i-1)),t==t?function(e,t,n){for(var i=n+1;i--;)if(e[i]===t)return i;return i}(e,t,o):jt(e,$t,o,!0)},Hn.lowerCase=za,Hn.lowerFirst=Qa,Hn.lt=fa,Hn.lte=_a,Hn.max=function(e){return e&&e.length?gi(e,sc,xi):r},Hn.maxBy=function(e,t){return e&&e.length?gi(e,uo(t,2),xi):r},Hn.mean=function(e){return qt(e,sc)},Hn.meanBy=function(e,t){return qt(e,uo(t,2))},Hn.min=function(e){return e&&e.length?gi(e,sc,ji):r},Hn.minBy=function(e,t){return e&&e.length?gi(e,uo(t,2),ji):r},Hn.stubArray=mc,Hn.stubFalse=Rc,Hn.stubObject=function(){return{}},Hn.stubString=function(){return""},Hn.stubTrue=function(){return!0},Hn.multiply=bc,Hn.nth=function(e,t){return e&&e.length?Wi(e,ga(t)):r},Hn.noConflict=function(){return ft._===this&&(ft._=Be),this},Hn.noop=uc,Hn.now=Ts,Hn.pad=function(e,t,n){e=Ia(e);var i=(t=ga(t))?fn(e):0;if(!t||i>=t)return e;var r=(t-i)/2;return Gr(gt(r),n)+e+Gr(pt(r),n)},Hn.padEnd=function(e,t,n){e=Ia(e);var i=(t=ga(t))?fn(e):0;return t&&i<t?e+Gr(t-i,n):e},Hn.padStart=function(e,t,n){e=Ia(e);var i=(t=ga(t))?fn(e):0;return t&&i<t?Gr(t-i,n)+e:e},Hn.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),Sn(Ia(e).replace(se,""),t||0)},Hn.random=function(e,t,n){if(n&&"boolean"!=typeof n&&yo(e,t,n)&&(t=n=r),n===r&&("boolean"==typeof t?(n=t,t=r):"boolean"==typeof e&&(n=e,e=r)),e===r&&t===r?(e=0,t=1):(e=Ca(e),t===r?(t=e,e=0):t=Ca(t)),e>t){var i=e;e=t,t=i}if(n||e%1||t%1){var o=En();return In(e+o*(t-e+lt("1e-"+((o+"").length-1))),t)}return Ji(e,t)},Hn.reduce=function(e,t,n){var i=Ks(e)?kt:Kt,r=arguments.length<3;return i(e,uo(t,4),n,r,_i)},Hn.reduceRight=function(e,t,n){var i=Ks(e)?Nt:Kt,r=arguments.length<3;return i(e,uo(t,4),n,r,pi)},Hn.repeat=function(e,t,n){return t=(n?yo(e,t,n):t===r)?1:ga(t),Xi(Ia(e),t)},Hn.replace=function(){var e=arguments,t=Ia(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Hn.result=function(e,t,n){var i=-1,o=(t=Ir(t,e)).length;for(o||(o=1,e=r);++i<o;){var s=null==e?r:e[jo(t[i])];s===r&&(i=o,s=n),e=ea(s)?s.call(e):s}return e},Hn.round=wc,Hn.runInContext=e,Hn.sample=function(e){return(Ks(e)?Zn:Zi)(e)},Hn.size=function(e){if(null==e)return 0;if(Qs(e))return da(e)?fn(e):e.length;var t=go(e);return t==b||t==M?e.size:Ui(e).length},Hn.snakeCase=Ja,Hn.some=function(e,t,n){var i=Ks(e)?Lt:sr;return n&&yo(e,t,n)&&(t=r),i(e,uo(t,3))},Hn.sortedIndex=function(e,t){return ar(e,t)},Hn.sortedIndexBy=function(e,t,n){return cr(e,t,uo(n,2))},Hn.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var i=ar(e,t);if(i<n&&$s(e[i],t))return i}return-1},Hn.sortedLastIndex=function(e,t){return ar(e,t,!0)},Hn.sortedLastIndexBy=function(e,t,n){return cr(e,t,uo(n,2),!0)},Hn.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var n=ar(e,t,!0)-1;if($s(e[n],t))return n}return-1},Hn.startCase=Xa,Hn.startsWith=function(e,t,n){return e=Ia(e),n=null==n?0:li(ga(n),0,e.length),t=ur(t),e.slice(n,n+t.length)==t},Hn.subtract=Pc,Hn.sum=function(e){return e&&e.length?zt(e,sc):0},Hn.sumBy=function(e,t){return e&&e.length?zt(e,uo(t,2)):0},Hn.template=function(e,t,n){var i=Hn.templateSettings;n&&yo(e,t,n)&&(t=r),e=Ia(e),t=Ea({},t,i,eo);var o,s,a=Ea({},t.imports,i.imports,eo),c=Va(a),l=Yt(a,c),d=0,u=t.interpolate||ye,h="__p += '",f=xe((t.escape||ye).source+"|"+u.source+"|"+(u===ee?_e:ye).source+"|"+(t.evaluate||ye).source+"|$","g"),_="//# sourceURL="+(Ne.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ot+"]")+"\n";e.replace(f,(function(t,n,i,r,a,c){return i||(i=r),h+=e.slice(d,c).replace(Se,sn),n&&(o=!0,h+="' +\n__e("+n+") +\n'"),a&&(s=!0,h+="';\n"+a+";\n__p += '"),i&&(h+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),d=c+t.length,t})),h+="';\n";var p=Ne.call(t,"variable")&&t.variable;if(p){if(he.test(p))throw new Ee("Invalid `variable` option passed into `_.template`")}else h="with (obj) {\n"+h+"\n}\n";h=(s?h.replace(W,""):h).replace(G,"$1").replace(K,"$1;"),h="function("+(p||"obj")+") {\n"+(p?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var C=tc((function(){return be(c,_+"return "+h).apply(r,l)}));if(C.source=h,Zs(C))throw C;return C},Hn.times=function(e,t){if((e=ga(e))<1||e>_)return[];var n=C,i=In(e,C);t=uo(t),e-=C;for(var r=Qt(i,t);++n<e;)t(n);return r},Hn.toFinite=Ca,Hn.toInteger=ga,Hn.toLength=ma,Hn.toLower=function(e){return Ia(e).toLowerCase()},Hn.toNumber=Ra,Hn.toSafeInteger=function(e){return e?li(ga(e),-9007199254740991,_):0===e?e:0},Hn.toString=Ia,Hn.toUpper=function(e){return Ia(e).toUpperCase()},Hn.trim=function(e,t,n){if((e=Ia(e))&&(n||t===r))return Jt(e);if(!e||!(t=ur(t)))return e;var i=_n(e),o=_n(t);return Sr(i,en(i,o),tn(i,o)+1).join("")},Hn.trimEnd=function(e,t,n){if((e=Ia(e))&&(n||t===r))return e.slice(0,pn(e)+1);if(!e||!(t=ur(t)))return e;var i=_n(e);return Sr(i,0,tn(i,_n(t))+1).join("")},Hn.trimStart=function(e,t,n){if((e=Ia(e))&&(n||t===r))return e.replace(se,"");if(!e||!(t=ur(t)))return e;var i=_n(e);return Sr(i,en(i,_n(t))).join("")},Hn.truncate=function(e,t){var n=30,i="...";if(ia(t)){var o="separator"in t?t.separator:o;n="length"in t?ga(t.length):n,i="omission"in t?ur(t.omission):i}var s=(e=Ia(e)).length;if(an(e)){var a=_n(e);s=a.length}if(n>=s)return e;var c=n-fn(i);if(c<1)return i;var l=a?Sr(a,0,c).join(""):e.slice(0,c);if(o===r)return l+i;if(a&&(c+=l.length-c),ca(o)){if(e.slice(c).search(o)){var d,u=l;for(o.global||(o=xe(o.source,Ia(pe.exec(o))+"g")),o.lastIndex=0;d=o.exec(u);)var h=d.index;l=l.slice(0,h===r?c:h)}}else if(e.indexOf(ur(o),c)!=c){var f=l.lastIndexOf(o);f>-1&&(l=l.slice(0,f))}return l+i},Hn.unescape=function(e){return(e=Ia(e))&&J.test(e)?e.replace(z,Cn):e},Hn.uniqueId=function(e){var t=++Le;return Ia(e)+t},Hn.upperCase=Ya,Hn.upperFirst=Za,Hn.each=Is,Hn.eachRight=ys,Hn.first=Qo,dc(Hn,(Ec={},yi(Hn,(function(e,t){Ne.call(Hn.prototype,t)||(Ec[t]=e)})),Ec),{chain:!1}),Hn.VERSION="4.17.21",Pt(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Hn[e].placeholder=Hn})),Pt(["drop","take"],(function(e,t){Gn.prototype[e]=function(n){n=n===r?1:vn(ga(n),0);var i=this.__filtered__&&!t?new Gn(this):this.clone();return i.__filtered__?i.__takeCount__=In(n,i.__takeCount__):i.__views__.push({size:In(n,C),type:e+(i.__dir__<0?"Right":"")}),i},Gn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),Pt(["filter","map","takeWhile"],(function(e,t){var n=t+1,i=1==n||3==n;Gn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:uo(e,3),type:n}),t.__filtered__=t.__filtered__||i,t}})),Pt(["head","last"],(function(e,t){var n="take"+(t?"Right":"");Gn.prototype[e]=function(){return this[n](1).value()[0]}})),Pt(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");Gn.prototype[e]=function(){return this.__filtered__?new Gn(this):this[n](1)}})),Gn.prototype.compact=function(){return this.filter(sc)},Gn.prototype.find=function(e){return this.filter(e).head()},Gn.prototype.findLast=function(e){return this.reverse().find(e)},Gn.prototype.invokeMap=Yi((function(e,t){return"function"==typeof e?new Gn(this):this.map((function(n){return Oi(n,e,t)}))})),Gn.prototype.reject=function(e){return this.filter(Us(uo(e)))},Gn.prototype.slice=function(e,t){e=ga(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Gn(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==r&&(n=(t=ga(t))<0?n.dropRight(-t):n.take(t-e)),n)},Gn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Gn.prototype.toArray=function(){return this.take(C)},yi(Gn.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),i=/^(?:head|last)$/.test(t),o=Hn[i?"take"+("last"==t?"Right":""):t],s=i||/^find/.test(t);o&&(Hn.prototype[t]=function(){var t=this.__wrapped__,a=i?[1]:arguments,c=t instanceof Gn,l=a[0],d=c||Ks(t),u=function(e){var t=o.apply(Hn,Vt([e],a));return i&&h?t[0]:t};d&&n&&"function"==typeof l&&1!=l.length&&(c=d=!1);var h=this.__chain__,f=!!this.__actions__.length,_=s&&!h,p=c&&!f;if(!s&&d){t=p?t:new Gn(this);var C=e.apply(t,a);return C.__actions__.push({func:Cs,args:[u],thisArg:r}),new Wn(C,h)}return _&&p?e.apply(this,a):(C=this.thru(u),_?i?C.value()[0]:C.value():C)})})),Pt(["pop","push","shift","sort","splice","unshift"],(function(e){var t=De[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",i=/^(?:pop|shift)$/.test(e);Hn.prototype[e]=function(){var e=arguments;if(i&&!this.__chain__){var r=this.value();return t.apply(Ks(r)?r:[],e)}return this[n]((function(n){return t.apply(Ks(n)?n:[],e)}))}})),yi(Gn.prototype,(function(e,t){var n=Hn[t];if(n){var i=n.name+"";Ne.call(An,i)||(An[i]=[]),An[i].push({name:t,func:n})}})),An[Hr(r,2).name]=[{name:"wrapper",func:r}],Gn.prototype.clone=function(){var e=new Gn(this.__wrapped__);return e.__actions__=Dr(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Dr(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Dr(this.__views__),e},Gn.prototype.reverse=function(){if(this.__filtered__){var e=new Gn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Gn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Ks(e),i=t<0,r=n?e.length:0,o=function(e,t,n){var i=-1,r=n.length;for(;++i<r;){var o=n[i],s=o.size;switch(o.type){case"drop":e+=s;break;case"dropRight":t-=s;break;case"take":t=In(t,e+s);break;case"takeRight":e=vn(e,t-s)}}return{start:e,end:t}}(0,r,this.__views__),s=o.start,a=o.end,c=a-s,l=i?a:s-1,d=this.__iteratees__,u=d.length,h=0,f=In(c,this.__takeCount__);if(!n||!i&&r==c&&f==c)return Cr(e,this.__actions__);var _=[];e:for(;c--&&h<f;){for(var p=-1,C=e[l+=t];++p<u;){var g=d[p],m=g.iteratee,R=g.type,v=m(C);if(2==R)C=v;else if(!v){if(1==R)continue e;break e}}_[h++]=C}return _},Hn.prototype.at=gs,Hn.prototype.chain=function(){return ps(this)},Hn.prototype.commit=function(){return new Wn(this.value(),this.__chain__)},Hn.prototype.next=function(){this.__values__===r&&(this.__values__=pa(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?r:this.__values__[this.__index__++]}},Hn.prototype.plant=function(e){for(var t,n=this;n instanceof qn;){var i=Ho(n);i.__index__=0,i.__values__=r,t?o.__wrapped__=i:t=i;var o=i;n=n.__wrapped__}return o.__wrapped__=e,t},Hn.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Gn){var t=e;return this.__actions__.length&&(t=new Gn(this)),(t=t.reverse()).__actions__.push({func:Cs,args:[is],thisArg:r}),new Wn(t,this.__chain__)}return this.thru(is)},Hn.prototype.toJSON=Hn.prototype.valueOf=Hn.prototype.value=function(){return Cr(this.__wrapped__,this.__actions__)},Hn.prototype.first=Hn.prototype.head,et&&(Hn.prototype[et]=function(){return this}),Hn}();ft._=gn,(i=function(){return gn}.call(t,n,t,e))===r||(e.exports=i)}.call(this)},5484:()=>{(e=>{e.CRUtils=new class{constructor(){}Uint8ArrToChar(e){var t,n,i,r,o,s;for(t="",i=e.length,n=0;n<i;)switch((r=e[n++])>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:t+=String.fromCharCode(r);break;case 12:case 13:o=e[n++],t+=String.fromCharCode((31&r)<<6|63&o);break;case 14:o=e[n++],s=e[n++],t+=String.fromCharCode((15&r)<<12|(63&o)<<6|(63&s)<<0)}return t}charToUint8Arr(e){for(var t,n=[],i=0;i<e.length;i++)if((t=e.charCodeAt(i))<128)n.push(t);else if(t<2048)n.push(192|t>>6&31),n.push(128|t>>0&63);else{if(!(t<65536))throw"不是UCS-2字符集";n.push(224|t>>12&15),n.push(128|t>>6&63),n.push(128|t>>0&63)}return new Uint8Array(n)}splitCutArr(e,t){let n=0,i=[];for(;n<e.length;)i.push(e.slice(n,n+=t));return i}getFileType(e){return/\.([^\.]+)$/.exec(e)[1].toLocaleLowerCase()}findMemberInfo(e,t){const n=CRVideo.allMemberInfo.find((t=>t.userId==e));if(n)return n[t]}}})(window)},7282:()=>{
/** @license zlib.js 2012 - imaya [ https://github.com/imaya/zlib.js ] The MIT License */(function(){"use strict";function e(e){throw e}var t=void 0,n=!0,i=this;function r(e,n){var r,o=e.split("."),s=i;!(o[0]in s)&&s.execScript&&s.execScript("var "+o[0]);for(;o.length&&(r=o.shift());)o.length||n===t?s=s[r]?s[r]:s[r]={}:s[r]=n}var o="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array&&"undefined"!=typeof DataView;function s(t,n){this.index="number"==typeof n?n:0,this.i=0,this.buffer=t instanceof(o?Uint8Array:Array)?t:new(o?Uint8Array:Array)(32768),2*this.buffer.length<=this.index&&e(Error("invalid index")),this.buffer.length<=this.index&&this.f()}s.prototype.f=function(){var e,t=this.buffer,n=t.length,i=new(o?Uint8Array:Array)(n<<1);if(o)i.set(t);else for(e=0;e<n;++e)i[e]=t[e];return this.buffer=i},s.prototype.d=function(e,t,n){var i,r=this.buffer,o=this.index,s=this.i,a=r[o];if(n&&1<t&&(e=8<t?(h[255&e]<<24|h[e>>>8&255]<<16|h[e>>>16&255]<<8|h[e>>>24&255])>>32-t:h[e]>>8-t),8>t+s)a=a<<t|e,s+=t;else for(i=0;i<t;++i)a=a<<1|e>>t-i-1&1,8==++s&&(s=0,r[o++]=h[a],a=0,o===r.length&&(r=this.f()));r[o]=a,this.buffer=r,this.i=s,this.index=o},s.prototype.finish=function(){var e,t=this.buffer,n=this.index;return 0<this.i&&(t[n]<<=8-this.i,t[n]=h[t[n]],n++),o?e=t.subarray(0,n):(t.length=n,e=t),e};var a,c=new(o?Uint8Array:Array)(256);for(a=0;256>a;++a){for(var l=u=a,d=7,u=u>>>1;u;u>>>=1)l<<=1,l|=1&u,--d;c[a]=(l<<d&255)>>>0}var h=c;function f(e){this.buffer=new(o?Uint16Array:Array)(2*e),this.length=0}function _(e){var t,n,i,r,s,a,c,l,d,u,h=e.length,f=0,_=Number.POSITIVE_INFINITY;for(l=0;l<h;++l)e[l]>f&&(f=e[l]),e[l]<_&&(_=e[l]);for(t=1<<f,n=new(o?Uint32Array:Array)(t),i=1,r=0,s=2;i<=f;){for(l=0;l<h;++l)if(e[l]===i){for(a=0,c=r,d=0;d<i;++d)a=a<<1|1&c,c>>=1;for(u=i<<16|l,d=a;d<t;d+=s)n[d]=u;++r}++i,r<<=1,s<<=1}return[n,f,_]}function p(e,t){this.h=g,this.w=0,this.input=o&&e instanceof Array?new Uint8Array(e):e,this.b=0,t&&(t.lazy&&(this.w=t.lazy),"number"==typeof t.compressionType&&(this.h=t.compressionType),t.outputBuffer&&(this.a=o&&t.outputBuffer instanceof Array?new Uint8Array(t.outputBuffer):t.outputBuffer),"number"==typeof t.outputIndex&&(this.b=t.outputIndex)),this.a||(this.a=new(o?Uint8Array:Array)(32768))}f.prototype.getParent=function(e){return 2*((e-2)/4|0)},f.prototype.push=function(e,t){var n,i,r,o=this.buffer;for(n=this.length,o[this.length++]=t,o[this.length++]=e;0<n&&(i=this.getParent(n),o[n]>o[i]);)r=o[n],o[n]=o[i],o[i]=r,r=o[n+1],o[n+1]=o[i+1],o[i+1]=r,n=i;return this.length},f.prototype.pop=function(){var e,t,n,i,r,o=this.buffer;for(t=o[0],e=o[1],this.length-=2,o[0]=o[this.length],o[1]=o[this.length+1],r=0;!((i=2*r+2)>=this.length)&&(i+2<this.length&&o[i+2]>o[i]&&(i+=2),o[i]>o[r]);)n=o[r],o[r]=o[i],o[i]=n,n=o[r+1],o[r+1]=o[i+1],o[i+1]=n,r=i;return{index:e,value:t,length:this.length}};var C,g=2,m={NONE:0,r:1,k:g,N:3},R=[];for(C=0;288>C;C++)switch(n){case 143>=C:R.push([C+48,8]);break;case 255>=C:R.push([C-144+400,9]);break;case 279>=C:R.push([C-256+0,7]);break;case 287>=C:R.push([C-280+192,8]);break;default:e("invalid literal: "+C)}function v(e,t){this.length=e,this.G=t}p.prototype.j=function(){var i,r,a,c,l=this.input;switch(this.h){case 0:for(a=0,c=l.length;a<c;){var d,u,h,f=r=o?l.subarray(a,a+65535):l.slice(a,a+65535),_=(a+=r.length)===c,p=t,C=t,m=this.a,v=this.b;if(o){for(m=new Uint8Array(this.a.buffer);m.length<=v+f.length+5;)m=new Uint8Array(m.length<<1);m.set(this.a)}if(d=_?1:0,m[v++]=0|d,h=65536+~(u=f.length)&65535,m[v++]=255&u,m[v++]=u>>>8&255,m[v++]=255&h,m[v++]=h>>>8&255,o)m.set(f,v),v+=f.length,m=m.subarray(0,v);else{for(p=0,C=f.length;p<C;++p)m[v++]=f[p];m.length=v}this.b=v,this.a=m}break;case 1:var I=new s(o?new Uint8Array(this.a.buffer):this.a,this.b);I.d(1,1,n),I.d(1,2,n);var y,E,P,x=S(this,l);for(y=0,E=x.length;y<E;y++)if(P=x[y],s.prototype.d.apply(I,R[P]),256<P)I.d(x[++y],x[++y],n),I.d(x[++y],5),I.d(x[++y],x[++y],n);else if(256===P)break;this.a=I.finish(),this.b=this.a.length;break;case g:var T,M,D,O,A,V,k,N,L,U,F,j,B,H,$,q=new s(o?new Uint8Array(this.a.buffer):this.a,this.b),W=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],G=Array(19);for(T=g,q.d(1,1,n),q.d(T,2,n),M=S(this,l),k=w(V=b(this.L,15)),L=w(N=b(this.K,7)),D=286;257<D&&0===V[D-1];D--);for(O=30;1<O&&0===N[O-1];O--);var K,z,Q,J,X,Y,Z=D,ee=O,te=new(o?Uint32Array:Array)(Z+ee),ne=new(o?Uint32Array:Array)(316),ie=new(o?Uint8Array:Array)(19);for(K=z=0;K<Z;K++)te[z++]=V[K];for(K=0;K<ee;K++)te[z++]=N[K];if(!o)for(K=0,J=ie.length;K<J;++K)ie[K]=0;for(K=X=0,J=te.length;K<J;K+=z){for(z=1;K+z<J&&te[K+z]===te[K];++z);if(Q=z,0===te[K])if(3>Q)for(;0<Q--;)ne[X++]=0,ie[0]++;else for(;0<Q;)(Y=138>Q?Q:138)>Q-3&&Y<Q&&(Y=Q-3),10>=Y?(ne[X++]=17,ne[X++]=Y-3,ie[17]++):(ne[X++]=18,ne[X++]=Y-11,ie[18]++),Q-=Y;else if(ne[X++]=te[K],ie[te[K]]++,3>--Q)for(;0<Q--;)ne[X++]=te[K],ie[te[K]]++;else for(;0<Q;)(Y=6>Q?Q:6)>Q-3&&Y<Q&&(Y=Q-3),ne[X++]=16,ne[X++]=Y-3,ie[16]++,Q-=Y}for(i=o?ne.subarray(0,X):ne.slice(0,X),U=b(ie,7),H=0;19>H;H++)G[H]=U[W[H]];for(A=19;4<A&&0===G[A-1];A--);for(F=w(U),q.d(D-257,5,n),q.d(O-1,5,n),q.d(A-4,4,n),H=0;H<A;H++)q.d(G[H],3,n);for(H=0,$=i.length;H<$;H++)if(j=i[H],q.d(F[j],U[j],n),16<=j){switch(H++,j){case 16:B=2;break;case 17:B=3;break;case 18:B=7;break;default:e("invalid code: "+j)}q.d(i[H],B,n)}var re,oe,se,ae,ce,le,de,ue,he=[k,V],fe=[L,N];for(ce=he[0],le=he[1],de=fe[0],ue=fe[1],re=0,oe=M.length;re<oe;++re)if(se=M[re],q.d(ce[se],le[se],n),256<se)q.d(M[++re],M[++re],n),ae=M[++re],q.d(de[ae],ue[ae],n),q.d(M[++re],M[++re],n);else if(256===se)break;this.a=q.finish(),this.b=this.a.length;break;default:e("invalid compression type")}return this.a};var I=function(){function t(t){switch(n){case 3===t:return[257,t-3,0];case 4===t:return[258,t-4,0];case 5===t:return[259,t-5,0];case 6===t:return[260,t-6,0];case 7===t:return[261,t-7,0];case 8===t:return[262,t-8,0];case 9===t:return[263,t-9,0];case 10===t:return[264,t-10,0];case 12>=t:return[265,t-11,1];case 14>=t:return[266,t-13,1];case 16>=t:return[267,t-15,1];case 18>=t:return[268,t-17,1];case 22>=t:return[269,t-19,2];case 26>=t:return[270,t-23,2];case 30>=t:return[271,t-27,2];case 34>=t:return[272,t-31,2];case 42>=t:return[273,t-35,3];case 50>=t:return[274,t-43,3];case 58>=t:return[275,t-51,3];case 66>=t:return[276,t-59,3];case 82>=t:return[277,t-67,4];case 98>=t:return[278,t-83,4];case 114>=t:return[279,t-99,4];case 130>=t:return[280,t-115,4];case 162>=t:return[281,t-131,5];case 194>=t:return[282,t-163,5];case 226>=t:return[283,t-195,5];case 257>=t:return[284,t-227,5];case 258===t:return[285,t-258,0];default:e("invalid length: "+t)}}var i,r,o=[];for(i=3;258>=i;i++)r=t(i),o[i]=r[2]<<24|r[1]<<16|r[0];return o}(),y=o?new Uint32Array(I):I;function S(i,r){function s(t,i){var r,o,s,a,c=t.G,l=[],d=0;switch(r=y[t.length],l[d++]=65535&r,l[d++]=r>>16&255,l[d++]=r>>24,n){case 1===c:o=[0,c-1,0];break;case 2===c:o=[1,c-2,0];break;case 3===c:o=[2,c-3,0];break;case 4===c:o=[3,c-4,0];break;case 6>=c:o=[4,c-5,1];break;case 8>=c:o=[5,c-7,1];break;case 12>=c:o=[6,c-9,2];break;case 16>=c:o=[7,c-13,2];break;case 24>=c:o=[8,c-17,3];break;case 32>=c:o=[9,c-25,3];break;case 48>=c:o=[10,c-33,4];break;case 64>=c:o=[11,c-49,4];break;case 96>=c:o=[12,c-65,5];break;case 128>=c:o=[13,c-97,5];break;case 192>=c:o=[14,c-129,6];break;case 256>=c:o=[15,c-193,6];break;case 384>=c:o=[16,c-257,7];break;case 512>=c:o=[17,c-385,7];break;case 768>=c:o=[18,c-513,8];break;case 1024>=c:o=[19,c-769,8];break;case 1536>=c:o=[20,c-1025,9];break;case 2048>=c:o=[21,c-1537,9];break;case 3072>=c:o=[22,c-2049,10];break;case 4096>=c:o=[23,c-3073,10];break;case 6144>=c:o=[24,c-4097,11];break;case 8192>=c:o=[25,c-6145,11];break;case 12288>=c:o=[26,c-8193,12];break;case 16384>=c:o=[27,c-12289,12];break;case 24576>=c:o=[28,c-16385,13];break;case 32768>=c:o=[29,c-24577,13];break;default:e("invalid distance")}for(r=o,l[d++]=r[0],l[d++]=r[1],l[d++]=r[2],s=0,a=l.length;s<a;++s)g[m++]=l[s];v[l[0]]++,I[l[3]]++,R=t.length+i-1,_=null}var a,c,l,d,u,h,f,_,p,C={},g=o?new Uint16Array(2*r.length):[],m=0,R=0,v=new(o?Uint32Array:Array)(286),I=new(o?Uint32Array:Array)(30),S=i.w;if(!o){for(l=0;285>=l;)v[l++]=0;for(l=0;29>=l;)I[l++]=0}for(v[256]=1,a=0,c=r.length;a<c;++a){for(l=u=0,d=3;l<d&&a+l!==c;++l)u=u<<8|r[a+l];if(C[u]===t&&(C[u]=[]),h=C[u],!(0<R--)){for(;0<h.length&&32768<a-h[0];)h.shift();if(a+3>=c){for(_&&s(_,-1),l=0,d=c-a;l<d;++l)p=r[a+l],g[m++]=p,++v[p];break}0<h.length?(f=E(r,a,h),_?_.length<f.length?(p=r[a-1],g[m++]=p,++v[p],s(f,0)):s(_,-1):f.length<S?_=f:s(f,0)):_?s(_,-1):(p=r[a],g[m++]=p,++v[p])}h.push(a)}return g[m++]=256,v[256]++,i.L=v,i.K=I,o?g.subarray(0,m):g}function E(e,t,n){var i,r,o,s,a,c,l=0,d=e.length;s=0,c=n.length;e:for(;s<c;s++){if(i=n[c-s-1],o=3,3<l){for(a=l;3<a;a--)if(e[i+a-1]!==e[t+a-1])continue e;o=l}for(;258>o&&t+o<d&&e[i+o]===e[t+o];)++o;if(o>l&&(r=i,l=o),258===o)break}return new v(l,t-r)}function b(e,t){var n,i,r,s,a,c=e.length,l=new f(572),d=new(o?Uint8Array:Array)(c);if(!o)for(s=0;s<c;s++)d[s]=0;for(s=0;s<c;++s)0<e[s]&&l.push(s,e[s]);if(n=Array(l.length/2),i=new(o?Uint32Array:Array)(l.length/2),1===n.length)return d[l.pop().index]=1,d;for(s=0,a=l.length/2;s<a;++s)n[s]=l.pop(),i[s]=n[s].value;for(r=function(e,t,n){function i(e){var n=_[e][p[e]];n===t?(i(e+1),i(e+1)):--h[n],++p[e]}var r,s,a,c,l,d=new(o?Uint16Array:Array)(n),u=new(o?Uint8Array:Array)(n),h=new(o?Uint8Array:Array)(t),f=Array(n),_=Array(n),p=Array(n),C=(1<<n)-t,g=1<<n-1;for(d[n-1]=t,s=0;s<n;++s)C<g?u[s]=0:(u[s]=1,C-=g),C<<=1,d[n-2-s]=(d[n-1-s]/2|0)+t;for(d[0]=u[0],f[0]=Array(d[0]),_[0]=Array(d[0]),s=1;s<n;++s)d[s]>2*d[s-1]+u[s]&&(d[s]=2*d[s-1]+u[s]),f[s]=Array(d[s]),_[s]=Array(d[s]);for(r=0;r<t;++r)h[r]=n;for(a=0;a<d[n-1];++a)f[n-1][a]=e[a],_[n-1][a]=a;for(r=0;r<n;++r)p[r]=0;for(1===u[n-1]&&(--h[0],++p[n-1]),s=n-2;0<=s;--s){for(c=r=0,l=p[s+1],a=0;a<d[s];a++)(c=f[s+1][l]+f[s+1][l+1])>e[r]?(f[s][a]=c,_[s][a]=t,l+=2):(f[s][a]=e[r],_[s][a]=r,++r);p[s]=0,1===u[s]&&i(s)}return h}(i,i.length,t),s=0,a=n.length;s<a;++s)d[n[s].index]=r[s];return d}function w(e){var t,n,i,r,s=new(o?Uint16Array:Array)(e.length),a=[],c=[],l=0;for(t=0,n=e.length;t<n;t++)a[e[t]]=1+(0|a[e[t]]);for(t=1,n=16;t<=n;t++)c[t]=l,l+=0|a[t],l<<=1;for(t=0,n=e.length;t<n;t++)for(l=c[e[t]],c[e[t]]+=1,i=s[t]=0,r=e[t];i<r;i++)s[t]=s[t]<<1|1&l,l>>>=1;return s}function P(t,n){switch(this.l=[],this.m=32768,this.e=this.g=this.c=this.q=0,this.input=o?new Uint8Array(t):t,this.s=!1,this.n=T,this.B=!1,!n&&(n={})||(n.index&&(this.c=n.index),n.bufferSize&&(this.m=n.bufferSize),n.bufferType&&(this.n=n.bufferType),n.resize&&(this.B=n.resize)),this.n){case x:this.b=32768,this.a=new(o?Uint8Array:Array)(32768+this.m+258);break;case T:this.b=0,this.a=new(o?Uint8Array:Array)(this.m),this.f=this.J,this.t=this.H,this.o=this.I;break;default:e(Error("invalid inflate mode"))}}var x=0,T=1,M={D:x,C:T};P.prototype.p=function(){for(;!this.s;){var i=Q(this,3);switch(1&i&&(this.s=n),i>>>=1){case 0:var r=this.input,s=this.c,a=this.a,c=this.b,l=r.length,d=t,u=a.length,h=t;switch(this.e=this.g=0,s+1>=l&&e(Error("invalid uncompressed block header: LEN")),d=r[s++]|r[s++]<<8,s+1>=l&&e(Error("invalid uncompressed block header: NLEN")),d===~(r[s++]|r[s++]<<8)&&e(Error("invalid uncompressed block header: length verify")),s+d>r.length&&e(Error("input buffer is broken")),this.n){case x:for(;c+d>a.length;){if(d-=h=u-c,o)a.set(r.subarray(s,s+h),c),c+=h,s+=h;else for(;h--;)a[c++]=r[s++];this.b=c,a=this.f(),c=this.b}break;case T:for(;c+d>a.length;)a=this.f({v:2});break;default:e(Error("invalid inflate mode"))}if(o)a.set(r.subarray(s,s+d),c),c+=d,s+=d;else for(;d--;)a[c++]=r[s++];this.c=s,this.b=c,this.a=a;break;case 1:this.o(G,z);break;case 2:var f,p,C,g,m=Q(this,5)+257,R=Q(this,5)+1,v=Q(this,4)+4,I=new(o?Uint8Array:Array)(V.length),y=t,S=t,E=t,b=t,w=t;for(w=0;w<v;++w)I[V[w]]=Q(this,3);if(!o)for(w=v,v=I.length;w<v;++w)I[V[w]]=0;for(f=_(I),y=new(o?Uint8Array:Array)(m+R),w=0,g=m+R;w<g;)switch(S=J(this,f),S){case 16:for(b=3+Q(this,2);b--;)y[w++]=E;break;case 17:for(b=3+Q(this,3);b--;)y[w++]=0;E=0;break;case 18:for(b=11+Q(this,7);b--;)y[w++]=0;E=0;break;default:E=y[w++]=S}p=_(o?y.subarray(0,m):y.slice(0,m)),C=_(o?y.subarray(m):y.slice(m)),this.o(p,C);break;default:e(Error("unknown BTYPE: "+i))}}return this.t()};var D,O,A=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],V=o?new Uint16Array(A):A,k=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],N=o?new Uint16Array(k):k,L=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],U=o?new Uint8Array(L):L,F=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],j=o?new Uint16Array(F):F,B=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],H=o?new Uint8Array(B):B,$=new(o?Uint8Array:Array)(288);for(D=0,O=$.length;D<O;++D)$[D]=143>=D?8:255>=D?9:279>=D?7:8;var q,W,G=_($),K=new(o?Uint8Array:Array)(30);for(q=0,W=K.length;q<W;++q)K[q]=5;var z=_(K);function Q(t,n){for(var i,r=t.g,o=t.e,s=t.input,a=t.c,c=s.length;o<n;)a>=c&&e(Error("input buffer is broken")),r|=s[a++]<<o,o+=8;return i=r&(1<<n)-1,t.g=r>>>n,t.e=o-n,t.c=a,i}function J(t,n){for(var i,r,o=t.g,s=t.e,a=t.input,c=t.c,l=a.length,d=n[0],u=n[1];s<u&&!(c>=l);)o|=a[c++]<<s,s+=8;return(r=(i=d[o&(1<<u)-1])>>>16)>s&&e(Error("invalid code length: "+r)),t.g=o>>r,t.e=s-r,t.c=c,65535&i}function X(e){if("string"==typeof e){var t,n,i=e.split("");for(t=0,n=i.length;t<n;t++)i[t]=(255&i[t].charCodeAt(0))>>>0;e=i}for(var r,o=1,s=0,a=e.length,c=0;0<a;){a-=r=1024<a?1024:a;do{s+=o+=e[c++]}while(--r);o%=65521,s%=65521}return(s<<16|o)>>>0}function Y(t,n){var i,r;if(this.input=t,this.c=0,!n&&(n={})||(n.index&&(this.c=n.index),n.verify&&(this.M=n.verify)),i=t[this.c++],r=t[this.c++],(15&i)===Z)this.method=Z;else e(Error("unsupported compression method"));0!=((i<<8)+r)%31&&e(Error("invalid fcheck flag:"+((i<<8)+r)%31)),32&r&&e(Error("fdict flag is not supported")),this.A=new P(t,{index:this.c,bufferSize:n.bufferSize,bufferType:n.bufferType,resize:n.resize})}P.prototype.o=function(e,t){var n=this.a,i=this.b;this.u=e;for(var r,o,s,a,c=n.length-258;256!==(r=J(this,e));)if(256>r)i>=c&&(this.b=i,n=this.f(),i=this.b),n[i++]=r;else for(a=N[o=r-257],0<U[o]&&(a+=Q(this,U[o])),r=J(this,t),s=j[r],0<H[r]&&(s+=Q(this,H[r])),i>=c&&(this.b=i,n=this.f(),i=this.b);a--;)n[i]=n[i++-s];for(;8<=this.e;)this.e-=8,this.c--;this.b=i},P.prototype.I=function(e,t){var n=this.a,i=this.b;this.u=e;for(var r,o,s,a,c=n.length;256!==(r=J(this,e));)if(256>r)i>=c&&(c=(n=this.f()).length),n[i++]=r;else for(a=N[o=r-257],0<U[o]&&(a+=Q(this,U[o])),r=J(this,t),s=j[r],0<H[r]&&(s+=Q(this,H[r])),i+a>c&&(c=(n=this.f()).length);a--;)n[i]=n[i++-s];for(;8<=this.e;)this.e-=8,this.c--;this.b=i},P.prototype.f=function(){var e,t,n=new(o?Uint8Array:Array)(this.b-32768),i=this.b-32768,r=this.a;if(o)n.set(r.subarray(32768,n.length));else for(e=0,t=n.length;e<t;++e)n[e]=r[e+32768];if(this.l.push(n),this.q+=n.length,o)r.set(r.subarray(i,i+32768));else for(e=0;32768>e;++e)r[e]=r[i+e];return this.b=32768,r},P.prototype.J=function(e){var t,n,i,r=this.input.length/this.c+1|0,s=this.input,a=this.a;return e&&("number"==typeof e.v&&(r=e.v),"number"==typeof e.F&&(r+=e.F)),2>r?n=(i=(s.length-this.c)/this.u[2]/2*258|0)<a.length?a.length+i:a.length<<1:n=a.length*r,o?(t=new Uint8Array(n)).set(a):t=a,this.a=t},P.prototype.t=function(){var e,t,n,i,r,s=0,a=this.a,c=this.l,l=new(o?Uint8Array:Array)(this.q+(this.b-32768));if(0===c.length)return o?this.a.subarray(32768,this.b):this.a.slice(32768,this.b);for(t=0,n=c.length;t<n;++t)for(i=0,r=(e=c[t]).length;i<r;++i)l[s++]=e[i];for(t=32768,n=this.b;t<n;++t)l[s++]=a[t];return this.l=[],this.buffer=l},P.prototype.H=function(){var e,t=this.b;return o?this.B?(e=new Uint8Array(t)).set(this.a.subarray(0,t)):e=this.a.subarray(0,t):(this.a.length>t&&(this.a.length=t),e=this.a),this.buffer=e},Y.prototype.p=function(){var t,n=this.input;return t=this.A.p(),this.c=this.A.c,this.M&&((n[this.c++]<<24|n[this.c++]<<16|n[this.c++]<<8|n[this.c++])>>>0!==X(t)&&e(Error("invalid adler-32 checksum"))),t};var Z=8;function ee(e,t){this.input=e,this.a=new(o?Uint8Array:Array)(32768),this.h=te.k;var n,i={};for(n in!t&&(t={})||"number"!=typeof t.compressionType||(this.h=t.compressionType),t)i[n]=t[n];i.outputBuffer=this.a,this.z=new p(this.input,i)}var te=m;function ne(e,t){var n,i,o,s;if(Object.keys)n=Object.keys(t);else for(i in n=[],o=0,t)n[o++]=i;for(o=0,s=n.length;o<s;++o)r(e+"."+(i=n[o]),t[i])}ee.prototype.j=function(){var t,n,i,r,s,a,c,l=0;if(c=this.a,(t=Z)===Z)n=Math.LOG2E*Math.log(32768)-8;else e(Error("invalid compression method"));if(i=n<<4|t,c[l++]=i,t===Z)switch(this.h){case te.NONE:s=0;break;case te.r:s=1;break;case te.k:s=2;break;default:e(Error("unsupported compression type"))}else e(Error("invalid compression method"));return r=s<<6|0,c[l++]=r|31-(256*i+r)%31,a=X(this.input),this.z.b=l,l=(c=this.z.j()).length,o&&((c=new Uint8Array(c.buffer)).length<=l+4&&(this.a=new Uint8Array(c.length+4),this.a.set(c),c=this.a),c=c.subarray(0,l+4)),c[l++]=a>>24&255,c[l++]=a>>16&255,c[l++]=a>>8&255,c[l++]=255&a,c},r("Zlib.Inflate",Y),r("Zlib.Inflate.prototype.decompress",Y.prototype.p),ne("Zlib.Inflate.BufferType",{ADAPTIVE:M.C,BLOCK:M.D}),r("Zlib.Deflate",ee),r("Zlib.Deflate.compress",(function(e,t){return new ee(e,t).j()})),r("Zlib.Deflate.prototype.compress",ee.prototype.j),ne("Zlib.Deflate.CompressionType",{NONE:te.NONE,FIXED:te.r,DYNAMIC:te.k})}).call(window)},9586:function(e,t,n){e=n.nmd(e),function(e,t,n){var i=t("ice").Ice,r=i.__M,o=i.Slice,s=r.module("whiteBoard");o.defineSequence(s,"ByteListHelper","Ice.ByteHelper",!0),o.defineDictionary(s,"StringStringMap","StringStringMapHelper","Ice.StringHelper","Ice.StringHelper",!1,void 0,void 0),o.defineSequence(s,"stringSeqHelper","Ice.StringHelper",!1),s.ConferenceError=o.defineUserException((function(e,t,n){i.UserException.call(this,n),this.error=void 0!==e?e:0,this.reason=void 0!==t?t:""}),i.UserException,"whiteBoard::ConferenceError",(function(e){e.writeInt(this.error),e.writeString(this.reason)}),(function(e){this.error=e.readInt(),this.reason=e.readString()}),!1,!1),s.WBDesc=o.defineStruct((function(e,t,n,i,r,o,s,a,c,l,d,u,h,f){this.wId=void 0!==e?e:"",this.order=void 0!==t?t:0,this.owner=void 0!==n?n:"",this.wType=void 0!==i?i:0,this.imgType=void 0!==r?r:0,this.name=void 0!==o?o:"",this.width=void 0!==s?s:0,this.height=void 0!==a?a:0,this.pageCount=void 0!==c?c:0,this.xPos=void 0!==l?l:0,this.yPos=void 0!==d?d:0,this.scale=void 0!==u?u:0,this.extInfo=void 0!==h?h:"",this.extProperty=void 0!==f?f:null}),!1,(function(e){e.writeString(this.wId),e.writeInt(this.order),e.writeString(this.owner),e.writeInt(this.wType),e.writeInt(this.imgType),e.writeString(this.name),e.writeInt(this.width),e.writeInt(this.height),e.writeInt(this.pageCount),e.writeFloat(this.xPos),e.writeFloat(this.yPos),e.writeInt(this.scale),e.writeString(this.extInfo),s.StringStringMapHelper.write(e,this.extProperty)}),(function(e){this.wId=e.readString(),this.order=e.readInt(),this.owner=e.readString(),this.wType=e.readInt(),this.imgType=e.readInt(),this.name=e.readString(),this.width=e.readInt(),this.height=e.readInt(),this.pageCount=e.readInt(),this.xPos=e.readFloat(),this.yPos=e.readFloat(),this.scale=e.readInt(),this.extInfo=e.readString(),this.extProperty=s.StringStringMapHelper.read(e)}),41,!1),o.defineSequence(s,"WBDescSeqHelper","whiteBoard.WBDesc",!1),s.WBDescs=o.defineStruct((function(e,t){this.wbDescList=void 0!==e?e:null,this.curWB=void 0!==t?t:""}),!1,(function(e){s.WBDescSeqHelper.write(e,this.wbDescList),e.writeString(this.curWB)}),(function(e){this.wbDescList=s.WBDescSeqHelper.read(e),this.curWB=e.readString()}),2,!1),s.WBHotspot=o.defineStruct((function(e,t,n,i){this.wId=void 0!==e?e:"",this.owner=void 0!==t?t:"",this.xPos=void 0!==n?n:0,this.yPos=void 0!==i?i:0}),!1,(function(e){e.writeString(this.wId),e.writeString(this.owner),e.writeFloat(this.xPos),e.writeFloat(this.yPos)}),(function(e){this.wId=e.readString(),this.owner=e.readString(),this.xPos=e.readFloat(),this.yPos=e.readFloat()}),10,!1),s.WBShapeData=o.defineStruct((function(e,t,n,i,r,o,s,a){this.sId=void 0!==e?e:"",this.order=void 0!==t?t:0,this.owner=void 0!==n?n:"",this.left=void 0!==i?i:0,this.top=void 0!==r?r:0,this.type=void 0!==o?o:0,this.attr=void 0!==s?s:"",this.dat=void 0!==a?a:null}),!0,(function(e){e.writeString(this.sId),e.writeInt(this.order),e.writeString(this.owner),e.writeInt(this.left),e.writeInt(this.top),e.writeInt(this.type),e.writeString(this.attr),s.ByteListHelper.write(e,this.dat)}),(function(e){this.sId=e.readString(),this.order=e.readInt(),this.owner=e.readString(),this.left=e.readInt(),this.top=e.readInt(),this.type=e.readInt(),this.attr=e.readString(),this.dat=s.ByteListHelper.read(e)}),20,!1),o.defineSequence(s,"WBShapeSeqHelper","whiteBoard.WBShapeData",!1),s.WBShapePos=o.defineStruct((function(e,t,n){this.sId=void 0!==e?e:"",this.left=void 0!==t?t:0,this.top=void 0!==n?n:0}),!0,(function(e){e.writeString(this.sId),e.writeInt(this.left),e.writeInt(this.top)}),(function(e){this.sId=e.readString(),this.left=e.readInt(),this.top=e.readInt()}),9,!1),o.defineSequence(s,"WBShapePosSeqHelper","whiteBoard.WBShapePos",!1),s.WBPageData=o.defineStruct((function(e,t,n){this.pageId=void 0!==e?e:0,this.fileId=void 0!==t?t:"",this.shapes=void 0!==n?n:null}),!0,(function(e){e.writeInt(this.pageId),e.writeString(this.fileId),s.WBShapeSeqHelper.write(e,this.shapes)}),(function(e){this.pageId=e.readInt(),this.fileId=e.readString(),this.shapes=s.WBShapeSeqHelper.read(e)}),6,!1),o.defineSequence(s,"PageDataSeqHelper","whiteBoard.WBPageData",!1),s.WhiteBoardCallback2=o.defineObject(void 0,i.Object,void 0,1,["::Ice::Object","::whiteBoard::WhiteBoardCallback2"],-1,void 0,void 0,!1),s.WhiteBoardCallback2Prx=o.defineProxy(i.ObjectPrx,s.WhiteBoardCallback2.ice_staticId,void 0),o.defineOperations(s.WhiteBoardCallback2,s.WhiteBoardCallback2Prx,{notifyCreate:[,,,,,,[[s.WBDesc],[7]],,,,],notifySetPageDat:[,,,,,,[[7],["whiteBoard.PageDataSeqHelper"],[7]],,,,],notifyDelete:[,,,,,,[[7],[7]],,,,],notifySetExtInfo:[,,,,,,[[7],[7],[7]],,,,],notifySetScale:[,,,,,,[[7],[3],[7]],,,,],notifyCurrentPos:[,,,,,,[[7],[5],[5],[7]],,,,],notifyAddShape:[,,,,,,[[7],[3],[s.WBShapeData],[7]],,,,],notifyAppendShapeDat:[,,,,,,[[7],[3],[7],["whiteBoard.ByteListHelper"]],,,,],notifyMoveShape:[,,,,,,[[7],[3],["whiteBoard.WBShapePosSeqHelper"],[7]],,,,],notifyModifyShape:[,,,,,,[[7],[3],[s.WBShapeData],[7]],,,,],notifyDelShape:[,,,,,,[[7],[3],["whiteBoard.stringSeqHelper"],[7]],,,,],notifySetHotspot:[,,,,,,[[s.WBHotspot]],,,,]}),s.WhiteBoardCtrl2=o.defineObject(void 0,i.Object,void 0,1,["::Ice::Object","::whiteBoard::WhiteBoardCtrl2"],-1,void 0,void 0,!1),s.WhiteBoardCtrl2Prx=o.defineProxy(i.ObjectPrx,s.WhiteBoardCtrl2.ice_staticId,void 0),o.defineOperations(s.WhiteBoardCtrl2,s.WhiteBoardCtrl2Prx,{login:[,,,,,[7],[[4],[7]],,,,],logout:[,,,,,[1],[[7]],,,,],heartBeat:[,,,,,[1],[[7]],,,,],create:[,,,,,,[[s.WBDesc],[7]],,[s.ConferenceError],,],setPageDat:[,,,,,,[[7],["whiteBoard.PageDataSeqHelper"],[7]],,[s.ConferenceError],,],delete:["_delete",,,,,,[[7],[7]],,[s.ConferenceError],,],queryAllBoardList:[,,,,,[s.WBDescs],[[7]],,[s.ConferenceError],,],setExtInfo:[,,,,,,[[7],[7],[7]],,[s.ConferenceError],,],setScale:[,,,,,,[[7],[3],[7]],,[s.ConferenceError],,],setCurrentPos:[,,,,,,[[7],[5],[5],[7]],,[s.ConferenceError],,],addShape:[,,,,,,[[7],[3],[s.WBShapeData],[7]],,[s.ConferenceError],,],appendShapeDat:[,,,,,,[[7],[3],[7],["whiteBoard.ByteListHelper"],[7]],,[s.ConferenceError],,],moveShape:[,,,,,,[[7],[3],["whiteBoard.WBShapePosSeqHelper"],[7]],,[s.ConferenceError],,],modifyShape:[,,,,,,[[7],[3],[s.WBShapeData],[7]],,[s.ConferenceError],,],delShape:[,,,,,,[[7],[3],["whiteBoard.stringSeqHelper"],[7]],,[s.ConferenceError],,],setHotspot:[,,,,,,[[s.WBHotspot],[7]],,[s.ConferenceError],,],queryShapeByIds:[,,,,,["whiteBoard.PageDataSeqHelper"],[[7],["Ice.IntSeqHelper"],[7]],,[s.ConferenceError],,],getHotspot:[,,,,,[s.WBHotspot],[[7]],,[s.ConferenceError],,]}),n.whiteBoard=s}(void 0!==n.g&&n.g.process,void 0!==n.g&&void 0!==n.g.process?n(4611):window.Ice.__require,void 0!==n.g&&void 0!==n.g.process?t:this)},4611:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=4611,e.exports=t}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.loaded=!0,n.exports}__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),__webpack_require__(3412),__webpack_require__(5484),__webpack_require__(1638),__webpack_require__(6740),__webpack_require__(7282),__webpack_require__(1046),__webpack_require__(2770),__webpack_require__(2382),__webpack_require__(1369),__webpack_require__(7900),__webpack_require__(3239),__webpack_require__(5898),__webpack_require__(7511),__webpack_require__(1821),__webpack_require__(1086),__webpack_require__(270),__webpack_require__(4060),__webpack_require__(4750),__webpack_require__(4870),__webpack_require__(7576),__webpack_require__(8036),__webpack_require__(4859),__webpack_require__(1798),__webpack_require__(7342),__webpack_require__(4270),__webpack_require__(2034),__webpack_require__(3351),__webpack_require__(9946),__webpack_require__(9586),__webpack_require__(1287),__webpack_require__(5796),__webpack_require__(3130),__webpack_require__(3085),__webpack_require__(158),__webpack_require__(3207),__webpack_require__(9406),__webpack_require__(1602),__webpack_require__(2058),__webpack_require__(4567),__webpack_require__(3961),__webpack_require__(8525),__webpack_require__(7830),__webpack_require__(2803),__webpack_require__(5829),__webpack_require__(6533),__webpack_require__(894),__webpack_require__(8883),__webpack_require__(3301),__webpack_require__(9327),__webpack_require__(724),__webpack_require__(5974),__webpack_require__(7957),__webpack_require__(1954),__webpack_require__(9087),__webpack_require__(137),__webpack_require__(5296),__webpack_require__(702),__webpack_require__(5043),__webpack_require__(7331),__webpack_require__(1955),__webpack_require__(2039);var __webpack_exports__=__webpack_require__(2767)})();