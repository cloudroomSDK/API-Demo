!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(self,(()=>(()=>{var __webpack_modules__={2591:()=>{!function(){var e="undefined"!=typeof window?window:self;e.Glacier2=e.Glacier2||{};var t=Ice.Slice;IceMX.SessionMetrics=t.defineObject((function(e,t,n,r,i,o,a,c,s,l,u,d){IceMX.Metrics.call(this,e,t,n,r,i),this.forwardedClient=void 0!==o?o:0,this.forwardedServer=void 0!==a?a:0,this.routingTableSize=void 0!==c?c:0,this.queuedClient=void 0!==s?s:0,this.queuedServer=void 0!==l?l:0,this.overriddenClient=void 0!==u?u:0,this.overriddenServer=void 0!==d?d:0}),IceMX.Metrics,void 0,2,["::Ice::Object","::IceMX::Metrics","::IceMX::SessionMetrics"],-1,(function(e){e.writeInt(this.forwardedClient),e.writeInt(this.forwardedServer),e.writeInt(this.routingTableSize),e.writeInt(this.queuedClient),e.writeInt(this.queuedServer),e.writeInt(this.overriddenClient),e.writeInt(this.overriddenServer)}),(function(e){this.forwardedClient=e.readInt(),this.forwardedServer=e.readInt(),this.routingTableSize=e.readInt(),this.queuedClient=e.readInt(),this.queuedServer=e.readInt(),this.overriddenClient=e.readInt(),this.overriddenServer=e.readInt()}),!1),IceMX.SessionMetricsPrx=t.defineProxy(IceMX.MetricsPrx,IceMX.SessionMetrics.ice_staticId,void 0),t.defineOperations(IceMX.SessionMetrics,IceMX.SessionMetricsPrx),Glacier2.SSLInfo=t.defineStruct((function(e,t,n,r,i,o){this.remoteHost=void 0!==e?e:"",this.remotePort=void 0!==t?t:0,this.localHost=void 0!==n?n:"",this.localPort=void 0!==r?r:0,this.cipher=void 0!==i?i:"",this.certs=void 0!==o?o:null}),!0,(function(e){e.writeString(this.remoteHost),e.writeInt(this.remotePort),e.writeString(this.localHost),e.writeInt(this.localPort),e.writeString(this.cipher),Ice.StringSeqHelper.write(e,this.certs)}),(function(e){this.remoteHost=e.readString(),this.remotePort=e.readInt(),this.localHost=e.readString(),this.localPort=e.readInt(),this.cipher=e.readString(),this.certs=Ice.StringSeqHelper.read(e)}),12,!1),Glacier2.CannotCreateSessionException=t.defineUserException((function(e,t){Ice.UserException.call(this,t),this.reason=void 0!==e?e:""}),Ice.UserException,"Glacier2::CannotCreateSessionException",(function(e){e.writeString(this.reason)}),(function(e){this.reason=e.readString()}),!0,!1),Glacier2.Session=t.defineObject(void 0,Ice.Object,void 0,0,["::Glacier2::Session","::Ice::Object"],-1,void 0,void 0,!1),Glacier2.SessionPrx=t.defineProxy(Ice.ObjectPrx,Glacier2.Session.ice_staticId,void 0),t.defineOperations(Glacier2.Session,Glacier2.SessionPrx,{destroy:[,,,,,,,,,,]}),Glacier2.StringSet=t.defineObject(void 0,Ice.Object,void 0,0,["::Glacier2::StringSet","::Ice::Object"],-1,void 0,void 0,!1),Glacier2.StringSetPrx=t.defineProxy(Ice.ObjectPrx,Glacier2.StringSet.ice_staticId,void 0),t.defineOperations(Glacier2.StringSet,Glacier2.StringSetPrx,{add:[,2,2,,,,[["Ice.StringSeqHelper"]],,,,],remove:[,2,2,,,,[["Ice.StringSeqHelper"]],,,,],get:[,2,2,,,["Ice.StringSeqHelper"],,,,,]}),Glacier2.IdentitySet=t.defineObject(void 0,Ice.Object,void 0,0,["::Glacier2::IdentitySet","::Ice::Object"],-1,void 0,void 0,!1),Glacier2.IdentitySetPrx=t.defineProxy(Ice.ObjectPrx,Glacier2.IdentitySet.ice_staticId,void 0),t.defineOperations(Glacier2.IdentitySet,Glacier2.IdentitySetPrx,{add:[,2,2,,,,[["Ice.IdentitySeqHelper"]],,,,],remove:[,2,2,,,,[["Ice.IdentitySeqHelper"]],,,,],get:[,2,2,,,["Ice.IdentitySeqHelper"],,,,,]}),Glacier2.SessionControl=t.defineObject(void 0,Ice.Object,void 0,0,["::Glacier2::SessionControl","::Ice::Object"],-1,void 0,void 0,!1),Glacier2.SessionControlPrx=t.defineProxy(Ice.ObjectPrx,Glacier2.SessionControl.ice_staticId,void 0),t.defineOperations(Glacier2.SessionControl,Glacier2.SessionControlPrx,{categories:[,,,,,["Glacier2.StringSetPrx"],,,,,],adapterIds:[,,,,,["Glacier2.StringSetPrx"],,,,,],identities:[,,,,,["Glacier2.IdentitySetPrx"],,,,,],getSessionTimeout:[,2,2,,,[3],,,,,],destroy:[,,,,,,,,,,]}),Glacier2.SessionManager=t.defineObject(void 0,Ice.Object,void 0,0,["::Glacier2::SessionManager","::Ice::Object"],-1,void 0,void 0,!1),Glacier2.SessionManagerPrx=t.defineProxy(Ice.ObjectPrx,Glacier2.SessionManager.ice_staticId,void 0),t.defineOperations(Glacier2.SessionManager,Glacier2.SessionManagerPrx,{create:[,,,,2,["Glacier2.SessionPrx"],[[7],["Glacier2.SessionControlPrx"]],,[Glacier2.CannotCreateSessionException],,]}),Glacier2.SSLSessionManager=t.defineObject(void 0,Ice.Object,void 0,0,["::Glacier2::SSLSessionManager","::Ice::Object"],-1,void 0,void 0,!1),Glacier2.SSLSessionManagerPrx=t.defineProxy(Ice.ObjectPrx,Glacier2.SSLSessionManager.ice_staticId,void 0),t.defineOperations(Glacier2.SSLSessionManager,Glacier2.SSLSessionManagerPrx,{create:[,,,,2,["Glacier2.SessionPrx"],[[Glacier2.SSLInfo],["Glacier2.SessionControlPrx"]],,[Glacier2.CannotCreateSessionException],,]}),Glacier2.PermissionDeniedException=t.defineUserException((function(e,t){Ice.UserException.call(this,t),this.reason=void 0!==e?e:""}),Ice.UserException,"Glacier2::PermissionDeniedException",(function(e){e.writeString(this.reason)}),(function(e){this.reason=e.readString()}),!0,!1),Glacier2.PermissionsVerifier=t.defineObject(void 0,Ice.Object,void 0,0,["::Glacier2::PermissionsVerifier","::Ice::Object"],-1,void 0,void 0,!1),Glacier2.PermissionsVerifierPrx=t.defineProxy(Ice.ObjectPrx,Glacier2.PermissionsVerifier.ice_staticId,void 0),t.defineOperations(Glacier2.PermissionsVerifier,Glacier2.PermissionsVerifierPrx,{checkPermissions:[,2,1,,2,[1],[[7],[7]],[[7]],[Glacier2.PermissionDeniedException],,]}),Glacier2.SSLPermissionsVerifier=t.defineObject(void 0,Ice.Object,void 0,0,["::Glacier2::SSLPermissionsVerifier","::Ice::Object"],-1,void 0,void 0,!1),Glacier2.SSLPermissionsVerifierPrx=t.defineProxy(Ice.ObjectPrx,Glacier2.SSLPermissionsVerifier.ice_staticId,void 0),t.defineOperations(Glacier2.SSLPermissionsVerifier,Glacier2.SSLPermissionsVerifierPrx,{authorize:[,2,1,,2,[1],[[Glacier2.SSLInfo]],[[7]],[Glacier2.PermissionDeniedException],,]}),Glacier2.SessionNotExistException=t.defineUserException((function(e){Ice.UserException.call(this,e)}),Ice.UserException,"Glacier2::SessionNotExistException",void 0,void 0,!1,!1),Glacier2.Router=t.defineObject(void 0,Ice.Object,[Ice.Router],0,["::Glacier2::Router","::Ice::Object","::Ice::Router"],-1,void 0,void 0,!1),Glacier2.RouterPrx=t.defineProxy(Ice.ObjectPrx,Glacier2.Router.ice_staticId,[Ice.RouterPrx]),t.defineOperations(Glacier2.Router,Glacier2.RouterPrx,{getCategoryForClient:[,2,1,,,[7],,,,,],createSession:[,,,1,2,["Glacier2.SessionPrx"],[[7],[7]],,[Glacier2.CannotCreateSessionException,Glacier2.PermissionDeniedException],,],createSessionFromSecureConnection:[,,,1,2,["Glacier2.SessionPrx"],,,[Glacier2.CannotCreateSessionException,Glacier2.PermissionDeniedException],,],refreshSession:[,,,1,,,,,[Glacier2.SessionNotExistException],,],destroySession:[,,,,,,,,[Glacier2.SessionNotExistException],,],getSessionTimeout:[,2,1,,,[4],,,,,],getACMTimeout:[,2,1,,,[3],,,,,]}),e.Glacier2=Glacier2}()},5214:()=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}!function(){var t="undefined"!=typeof window?window:self;t.Ice=t.Ice||{},Ice.Slice=Ice.Slice||{},t.IceMX=t.IceMX||{},t.IceSSL=t.IceSSL||{};var n,r,i,o,a,c,s,l,u,d,f,h,p,_,g,C,v,m,y,S,I,R,w,b,E,D,P,T,x,M,A,O,k,V,N,L=Ice.Slice;!function(){var e="undefined"!=typeof window?window:self,t={module:function(t){var n=e[t];return void 0===n&&(n={},e[t]=n),n},require:function(t){return e},type:function(t){if(void 0!==t){for(var n=t.split("."),r=e,i=0,o=n.length;i<o;++i)if(void 0===(r=r[n[i]]))return;return r}}};Ice.__require=function(){return e},Ice.Slice=Ice.Slice||{},Ice.__M=t}(),function(){var e=Ice.__M,t=Ice.Slice,n=function e(t,n){return t===n||null!=t&&null!=n&&(t.prototype===n.prototype&&("function"==typeof t.equals?t.equals(n):t instanceof Array&&r.equals(t,n,e)))},r={clone:function(e){return void 0===e?e:null===e?[]:e.slice()},equals:function(e,t,r){if(e.length!=t.length)return!1;var i,o,a=r||n;for(i=0,o=e.length;i<o;++i)if(!a.call(a,e[i],t[i]))return!1;return!0},shuffle:function(e){for(var t=e.length;t>1;--t){var n=e[t-1],r=Math.floor(Math.random()*t);e[t-1]=e[r],e[r]=n}},indexOf:function(e,t,n){if(null==n)return e.indexOf(t);for(var r=0;r<e.length;++r)if(n.call(n,e[r],t))return r;return-1},filter:function(e,t,n){n=void 0===n?t:n;for(var r=[],i=0;i<e.length;++i)t.call(n,e[i],i,e)&&r.push(e[i]);return r}};r.eq=n,t.defineSequence=function(t,n,r,i,o){var a=null;Object.defineProperty(t,n,{get:function(){return null===a&&(a=Ice.StreamHelpers.generateSeqHelper(e.type(r),i,e.type(o))),a}})},Ice.ArrayUtil=r}(),Ice.Class=function(){var e,t,n;1==arguments.length?t=arguments[0]:2==arguments.length&&(e=arguments[0],t=arguments[1]),void 0!==t&&(n=t.__init__)&&delete t.__init__;var r=n||function(){};if(void 0!==e&&(r.prototype=new e,r.prototype.constructor=r),void 0!==t)for(var i in t)r.prototype[i]=t[i];return r},function(){var t=Ice.Class,n=function(t,r,i,o){if(o+="  ",null===r)return"\n"+o+t+": (null)";if(void 0===r)return"\n"+o+t+": (undefined)";if("stack"==t||"function"==typeof r)return"";if("object"!=e(r))return"\n"+o+t+': "'+r+'"';if(-1!=i.indexOf(r))return"\n"+o+t+": (recursive)";i.push(r);var a="\n"+o+t+":";for(var c in r)0!==t.indexOf("_")&&"function"!=typeof r[c]&&(a+=o+n(c,r[c],i,o));return a},r=t(Error,{__init__:function(e){e&&(this.ice_cause=e)},ice_name:function(){return"Ice::Exception"},toString:function(){if(this._inToStringAlready)return"";this._inToStringAlready=!0;var e=this.ice_name();for(var t in this)"_inToStringAlready"!=t&&(e+=n(t,this[t],[],""));return!0===Ice.__printStackTraces&&this.stack&&(e+="\n"+this.stack),this._inToStringAlready=!1,e}});r.captureStackTrace=function(e){var t=(new Error).stack;void 0!==t&&Object.defineProperty(e,"stack",{get:function(){return t}})},Ice.Exception=r;var i=t(r,{__init__:function(e){r.call(this,e),r.captureStackTrace(this)},ice_name:function(){return"Ice::LocalException"}});Ice.LocalException=i;var o=Ice.Slice;o.defineLocalException=function(e,t,n){var r=e;return r.prototype=new t,r.prototype.constructor=r,r.prototype.ice_name=function(){return n},r};var a=t(r,{__init__:function(e){r.call(this,e),r.captureStackTrace(this)},ice_name:function(){return"Ice::UserException"},__write:function(e){e.startWriteException(null),c(this,e,this.__mostDerivedType()),e.endWriteException()},__read:function(e){e.startReadException(),s(this,e,this.__mostDerivedType()),e.endReadException(!1)},__usesClasses:function(){return!1}});Ice.UserException=a;var c=function e(t,n,r){void 0!==r&&r!==a&&(n.startWriteSlice(r.__id,-1,r.__parent===a),r.prototype.__writeMemberImpl&&r.prototype.__writeMemberImpl.call(t,n),n.endWriteSlice(),e(t,n,r.__parent))},s=function e(t,n,r){void 0!==r&&r!==a&&(n.startReadSlice(),r.prototype.__readMemberImpl&&r.prototype.__readMemberImpl.call(t,n),n.endReadSlice(),e(t,n,r.__parent))},l=function(e){e.startWriteException(this.__slicedData),c(this,e,this.__mostDerivedType()),e.endWriteException()},u=function(e){e.startReadException(),s(this,e,this.__mostDerivedType()),this.__slicedData=e.endReadException(!0)};o.defineUserException=function(e,t,n,r,i,o,a){var c=e;return c.__parent=t,c.prototype=new t,c.__id="::"+n,c.prototype.ice_name=function(){return n},c.prototype.constructor=c,c.prototype.__mostDerivedType=function(){return c},o&&(c.prototype.__write=l,c.prototype.__read=u),c.prototype.__writeMemberImpl=r,c.prototype.__readMemberImpl=i,a&&(c.prototype.__usesClasses=function(){return!0}),c}}(),Ice.AsyncStatus={Queued:0,Sent:1},(n=Ice.Class({__init__:function(e,t){if(t<0||t>n.MAX_UINT32)throw new RangeError("Low word must be between 0 and 0xFFFFFFFF");if(e<0||e>n.MAX_UINT32)throw new RangeError("High word must be between 0 and 0xFFFFFFFF");this.high=e,this.low=t},hashCode:function(){return this.low},equals:function(e){return this===e||e instanceof n&&this.high===e.high&&this.low===e.low},toString:function(){return this.high+":"+this.low},toNumber:function(){if(0!=(this.high&n.SIGN_MASK)){if(this.high===n.MAX_UINT32&&0!==this.low)return-(1+~this.low);var e=1+~this.high;return e>n.HIGH_MAX?Number.NEGATIVE_INFINITY:e*n.HIGH_MASK*-1+this.low}return this.high>n.HIGH_MAX?Number.POSITIVE_INFINITY:this.high*n.HIGH_MASK+this.low}})).MAX_UINT32=4294967295,n.SIGN_MASK=2147483648,n.HIGH_MASK=4294967296,n.HIGH_MAX=2097151,Ice.Long=n,Ice.AssertionFailedException=Ice.Class(Error,{__init__:function(e){Error.call(this),Ice.Exception.captureStackTrace(this),this.message=e}}),Ice.Debug={assert:function(e,t){if(!e)throw console.crlog&&console.crlog(void 0===t?"assertion failed":t),console.crlog&&console.crlog(Error().stack),new Ice.AssertionFailedException(void 0===t?"assertion failed":t)}},Ice.DispatchStatus={DispatchOK:0,DispatchUserException:1,DispatchAsync:2},function(){var e=Ice.Class({__init__:function(e,t){this._name=e,this._value=t},equals:function(e){return this===e||e instanceof Object.getPrototypeOf(this).constructor&&this._value==e._value},hashCode:function(){return this._value},toString:function(){return this._name}});Ice.EnumBase=e;var t=e.prototype;try{Object.defineProperty(t,"name",{enumerable:!0,get:function(){return this._name}}),Object.defineProperty(t,"value",{enumerable:!0,get:function(){return this._value}})}catch(e){}var n=Ice.Class({__init__:function(e){this._enumType=e},write:function(e,t){this._enumType.__write(e,t)},writeOpt:function(e,t,n){this._enumType.__writeOpt(e,t,n)},read:function(e){return this._enumType.__read(e)},readOpt:function(e,t){return this._enumType.__readOpt(e,t)}});Ice.EnumHelper=n,Ice.Slice.defineEnum=function(t){var r=function(t,n){e.call(this,t,n)};(r.prototype=new e).constructor=r;var i=[],o=0,a=null;for(var c in t){var s=t[c][0],l=t[c][1],u=new r(s,l);i[l]=u,a||(a=u),Object.defineProperty(r,s,{enumerable:!0,value:u}),l>o&&(o=l)}return Object.defineProperty(r,"minWireSize",{get:function(){return 1}}),r.__write=function(e,t){t?e.writeEnum(t):e.writeEnum(a)},r.__read=function(e){return e.readEnum(r)},r.__writeOpt=function(e,t,n){void 0!==n&&e.writeOpt(t,Ice.OptionalFormat.Size)&&r.__write(e,n)},r.__readOpt=function(e,t){return e.readOptEnum(t,r)},r.__helper=new n(r),Object.defineProperty(r,"valueOf",{value:function(e){return void 0===e?r:i[e]}}),Object.defineProperty(r,"maxValue",{value:o}),Object.defineProperty(r.prototype,"maxValue",{value:o}),r}}(),Ice.generateUUID=function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?n:7&n|8).toString(16)}))},Ice.FormatType=Ice.Slice.defineEnum([["DefaultFormat",0],["CompactFormat",1],["SlicedFormat",2]]),function(){var e=Ice.Debug;function t(e,t,n){switch(e){case 92:t.push("\\\\");break;case 39:t.push("\\'");break;case 34:t.push('\\"');break;case 8:t.push("\\b");break;case 12:t.push("\\f");break;case 10:t.push("\\n");break;case 13:t.push("\\r");break;case 9:t.push("\\t");break;default:if(e>=32&&e<=126){var r=String.fromCharCode(e);null!==n&&-1!==n.indexOf(r)?(t.push("\\"),t.push(r)):t.push(r)}else{t.push("\\");for(var i=e.toString(8),o=i.length;o<3;o++)t.push("0");t.push(i)}}}function n(e,t){var n,r=e.charCodeAt(t);if(!(r>=32&&r<=126))throw n=t>0?"character after `"+e.substring(0,t)+"'":"first character",n+=" is not a printable ASCII character (ordinal "+r+")",new Error(n);return r}function r(t,r,i,o){if(e.assert(r>=0),e.assert(i<=t.length),r>=i)throw new Error("EOF while decoding string");var a;if("\\"!=t.charAt(r))a=n(t,r++);else{if(r+1==i)throw new Error("trailing backslash");switch(t.charAt(++r)){case"\\":case"'":case'"':a=t.charCodeAt(r++);break;case"b":++r,a="\b".charCodeAt(0);break;case"f":++r,a="\f".charCodeAt(0);break;case"n":++r,a="\n".charCodeAt(0);break;case"r":++r,a="\r".charCodeAt(0);break;case"t":++r,a="\t".charCodeAt(0);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":for(var c=0,s=0;s<3&&r<i;++s){var l=t.charAt(r++);if(-1=="01234567".indexOf(l)){--r;break}c=8*c+parseInt(l)}if(c>255){var u="octal value \\"+c.toString(8)+" ("+c+") is out of range";throw new Error(u)}a=c;break;default:a=n(t,r++)}}return o.value=r,a}Ice.StringUtil={findFirstOf:function(e,t,n){n=void 0===n?0:n;for(var r=e.length,i=n;i<r;i++){var o=e.charAt(i);if(-1!=t.indexOf(o))return i}return-1},findFirstNotOf:function(e,t,n){n=void 0===n?0:n;for(var r=e.length,i=n;i<r;i++){var o=e.charAt(i);if(-1==t.indexOf(o))return i}return-1},escapeString:function(e,n){var r,i;if(null!==(n=void 0===n?null:n))for(r=0,i=n.length;r<i;++r)if(n.charCodeAt(r)<32||n.charCodeAt(r)>126)throw new Error("special characters must be in ASCII range 32-126");var o,a=[];for(r=0,i=e.length;r<i;++r)(o=e.charCodeAt(r))<128?t(o,a,n):o>127&&o<2048?(t(o>>6|192,a,n),t(63&o|128,a,n)):(t(o>>12|224,a,n),t(o>>6&63|128,a,n),t(63&o|128,a,n));return a.join("")},unescapeString:function(t,n,i){n=void 0===n?0:n,i=void 0===i?t.length:i,e.assert(n>=0&&n<=i&&i<=t.length);var o=[];return function(e,t,n,i){var o,a,c,s={value:0};for(;t<n;)o=r(e,t,n,s),t=s.value,o<128?i.push(String.fromCharCode(o)):o>191&&o<224?(a=r(e,t,n,s),t=s.value,i.push(String.fromCharCode((31&o)<<6|63&a))):(a=r(e,t,n,s),c=r(e,t=s.value,n,s),t=s.value,i.push(String.fromCharCode((15&o)<<12|(63&a)<<6|63&c)))}(t,n,i,o),o.join("")},splitString:function(e,t){for(var n=[],r="",i=0,o=null;i<e.length;)if(null!==o||'"'!==e.charAt(i)&&"'"!==e.charAt(i)){if(null===o&&"\\"===e.charAt(i)&&i+1<e.length&&('"'===e.charAt(i+1)||"'"===e.charAt(i+1)))++i;else if(null!==o&&"\\"===e.charAt(i)&&i+1<e.length&&e.charAt(i+1)===o)++i;else{if(null!==o&&e.charAt(i)===o){++i,o=null;continue}if(-1!==t.indexOf(e.charAt(i))&&null===o){++i,r.length>0&&(n.push(r),r="");continue}}i<e.length&&(r+=e.charAt(i++))}else o=e.charAt(i++);return r.length>0&&n.push(r),null!==o?null:n},checkQuote:function(e,t){t=void 0===t?0:t;var n=e.charAt(t);if('"'==n||"'"==n){t++;for(var r,i=e.length;t<i&&-1!=(r=e.indexOf(n,t));){if("\\"!=e.charAt(r-1))return r;t=r+1}return-1}return 0},hashCode:function(e){for(var t=0,n=e.length,r=0;r<n;r++)t=31*t+e.charCodeAt(r);return t},toInt:function(e){var t=parseInt(e,10);if(isNaN(t))throw new Error("conversion of `"+e+"' to int failed");return t}}}(),function(){var t=Ice.__M,n=Ice.StringUtil;function r(e,t,n,r,i){for(var o=e._table[i];null!==o;o=o._nextInBucket)if(o._hash===r&&e.keysEqual(t,o._key))return void(o._value=n);e.add(t,n,r,i)}function i(e,t){return e===t}var o=Ice.Class({__init__:function(e,t){var n,r,a,c,s;if("function"==typeof e?(r=e,a=t):e instanceof o&&(r=(n=e).keyComparator,a=n.valueComparator),this._size=0,this._head=null,this._initialCapacity=32,this._loadFactor=.75,this._table=[],this._keyComparator="function"==typeof r?r:i,this._valueComparator="function"==typeof a?a:i,n instanceof o&&n._size>0){for(this._threshold=n._threshold,s=n._table.length,this._table.length=s,c=0;c<s;c++)this._table[c]=null;this.merge(n)}else for(this._threshold=this._initialCapacity*this._loadFactor,c=0;c<this._initialCapacity;c++)this._table[c]=null},set:function(e,t){var n=this.computeHash(e),i=this.hashIndex(n.hash,this._table.length);return r(this,n.key,t,n.hash,i)},get:function(e){var t=this.computeHash(e),n=this.findEntry(t.key,t.hash);return void 0!==n?n._value:void 0},has:function(e){var t=this.computeHash(e);return void 0!==this.findEntry(t.key,t.hash)},del:function(e){for(var t=this.computeHash(e),n=this.hashIndex(t.hash,this._table.length),r=null,i=this._table[n];null!==i;i=i._nextInBucket){if(i._hash===t.hash&&this.keysEqual(t.key,i._key))return this._size--,null!==r?r._nextInBucket=i._nextInBucket:this._table[n]=i._nextInBucket,null!==i._prev&&(i._prev._next=i._next),null!==i._next&&(i._next._prev=i._prev),this._head===i&&(this._head=i._next),i._value;r=i}},clear:function(){for(var e=0;e<this._table.length;++e)this._table[e]=null;this._head=null,this._size=0},forEach:function(e,t){t=void 0===t?e:t;for(var n=this._head;null!==n;n=n._next)e.call(t,n._key,n._value)},keys:function(){for(var e=[],t=0,n=this._head;null!==n;n=n._next)e[t++]=n._key;return e},values:function(){for(var e=[],t=0,n=this._head;null!==n;n=n._next)e[t++]=n._value;return e},equals:function(e,t){if(null===e||!(e instanceof o)||this._size!==e._size)return!1;for(var n=this,r=t||function(e,t){return n._valueComparator.call(n._valueComparator,e,t)},i=this._head;null!==i;i=i._next){var a=e.findEntry(i._key,i._hash);if(void 0===a||!r(i._value,a._value))return!1}return!0},clone:function(){return new o(this)},merge:function(e){for(var t=e._head;null!==t;t=t._next)r(this,t._key,t._value,t._hash,this.hashIndex(t._hash,this._table.length))},add:function(e,t,n,r){var i=Object.create(null,{key:{enumerable:!0,get:function(){return this._key}},value:{enumerable:!0,get:function(){return this._value}},next:{enumerable:!0,get:function(){return this._next}},_key:{enumerable:!1,writable:!0,value:e},_value:{enumerable:!1,writable:!0,value:t},_prev:{enumerable:!1,writable:!0,value:null},_next:{enumerable:!1,writable:!0,value:null},_nextInBucket:{enumerable:!1,writable:!0,value:null},_hash:{enumerable:!1,writable:!0,value:n}});i._nextInBucket=this._table[r],this._table[r]=i,i._next=this._head,null!==this._head&&(this._head._prev=i),this._head=i,this._size++,this._size>=this._threshold&&this.resize(2*this._table.length)},resize:function(e){this._table;for(var t=[],n=0;n<e;n++)t[n]=null;for(var r=this._head;null!==r;r=r._next){var i=this.hashIndex(r._hash,e);r._nextInBucket=t[i],t[i]=r}this._table=t,this._threshold=e*this._loadFactor},findEntry:function(e,t){for(var n=this.hashIndex(t,this._table.length),r=this._table[n];null!==r;r=r._nextInBucket)if(r._hash===t&&this.keysEqual(e,r._key))return r},hashIndex:function(e,t){return e&t-1},computeHash:function(t){var r;if(0===t||-0===t)return{key:0,hash:0};if(null===t)return null===o._null&&(r=Ice.generateUUID(),o._null={key:r,hash:n.hashCode(r)}),o._null;if(void 0===t)throw new Error("cannot compute hash for undefined value");if("function"==typeof t.hashCode)return{key:t,hash:t.hashCode()};var i=e(t);if("string"===i||t instanceof String)return{key:t,hash:n.hashCode(t)};if("number"===i||t instanceof Number)return isNaN(t)?(null===o._nan&&(r=Ice.generateUUID(),o._nan={key:r,hash:n.hashCode(r)}),o._nan):{key:t,hash:t.toFixed(0)};if("boolean"===i||t instanceof Boolean)return{key:t,hash:t?1:0};throw new Error("cannot compute hash for value of type "+i)},keysEqual:function(e,t){return this._keyComparator.call(this._keyComparator,e,t)}});Ice.HashMap=o,o.compareEquals=function(e,t){return e===t||null!=e&&null!=t&&e.equals(t)},o.compareIdentity=i,o._null=null,o._nan=null;var a=o.prototype;Object.defineProperty(a,"size",{get:function(){return this._size}}),Object.defineProperty(a,"entries",{get:function(){return this._head}}),Ice.Slice.defineDictionary=function(e,n,r,i,a,c,s,l,u){e[n]=void 0!==s||void 0!==u?function(e){return new o(e||s,u)}:o;var d=null;Object.defineProperty(e,r,{get:function(){return null===d&&(d=Ice.StreamHelpers.generateDictHelper(t.type(i),t.type(a),c,t.type(l),e[n])),d}})}}(),Ice.OptionalFormat=Ice.Slice.defineEnum([["F1",0],["F2",1],["F4",2],["F8",3],["Size",4],["VSize",5],["FSize",6],["Class",7]]),function(){var e=Ice.Class,t=Object.defineProperty,n=(Ice.HashMap,Ice.OptionalFormat),r={FSizeOptHelper:function(){this.writeOpt=function(e,t,r){if(void 0!==r&&e.writeOpt(t,n.FSize)){var i=e.startSize();this.write(e,r),e.endSize(i)}},this.readOpt=function(e,t){var r;return e.readOpt(t,n.FSize)&&(e.skip(4),r=this.read(e)),r}},VSizeOptHelper:function(){this.writeOpt=function(e,t,r){void 0!==r&&e.writeOpt(t,n.VSize)&&(e.writeSize(this.minWireSize),this.write(e,r))},this.readOpt=function(e,t){var r;return e.readOpt(t,n.VSize)&&(e.skipSize(),r=this.read(e)),r}},VSizeContainerOptHelper:function(e){this.writeOpt=function(t,r,i){if(void 0!==i&&t.writeOpt(r,n.VSize)){var o=this.size(i);t.writeSize(o>254?o*e+5:o*e+1),this.write(t,i)}},this.readOpt=function(e,t){var r;return e.readOpt(t,n.VSize)&&(e.skipSize(),r=this.read(e)),r}},VSizeContainer1OptHelper:function(){this.writeOpt=function(e,t,r){void 0!==r&&e.writeOpt(t,n.VSize)&&this.write(e,r)},this.readOpt=function(e,t){var r;return e.readOpt(t,n.VSize)&&(r=this.read(e)),r}}},i=e({write:function(e,t){if(null===t||0===t.length)e.writeSize(0);else{var n=this.elementHelper;e.writeSize(t.length);for(var r=0;r<t.length;++r)n.write(e,t[r])}},read:function(e){var t=this.elementHelper,n=e.readAndCheckSeqSize(t.minWireSize),r=[];r.length=n;for(var i=0;i<n;++i)r[i]=t.read(e);return r},size:function(e){return null==e?0:e.length}});t(i.prototype,"minWireSize",{get:function(){return 1}});var o=new i;o.write=function(e,t){return e.writeByteSeq(t)},o.read=function(e){return e.readByteSeq()},t(o,"elementHelper",{get:function(){return Ice.ByteHelper}}),r.VSizeContainer1OptHelper.call(o);var a=function(e){var t=e.readAndCheckSeqSize(1),n=[];n.length=t;for(var r=this.elementType,i=function(t){e.readObject((function(e){n[t]=e}),r)},o=0;o<t;++o)i(o);return n};r.generateSeqHelper=function(e,n,c){if(e===Ice.ByteHelper)return o;var s=new i;return n?1===e.minWireSize?r.VSizeContainer1OptHelper.call(s):r.VSizeContainerOptHelper.call(s,e.minWireSize):r.FSizeOptHelper.call(s),t(s,"elementHelper",{get:function(){return e}}),e==Ice.ObjectHelper&&(t(s,"elementType",{get:function(){return c}}),s.read=a),s};var c=e({write:function(e,t){if(null==t||0===t.size)e.writeSize(0);else{var n=this.keyHelper,r=this.valueHelper;e.writeSize(t.size);for(var i=t.entries;null!==i;i=i.next)n.write(e,i.key),r.write(e,i.value)}},read:function(e){for(var t=new(0,this.mapType),n=e.readSize(),r=this.keyHelper,i=this.valueHelper,o=0;o<n;++o)t.set(r.read(e),i.read(e));return t},size:function(e){return null==e?0:e.size}});Object.defineProperty(c.prototype,"minWireSize",{get:function(){return 1}});var s=function(e){for(var t=e.readSize(),n=new(0,this.mapType),r=this.valueType,i=function(t){e.readObject((function(e){n.set(t,e)}),r)},o=this.keyHelper,a=0;a<t;++a)i(o.read(e));return n};r.generateDictHelper=function(e,n,i,o,a){var l=new c;return i?r.VSizeContainerOptHelper.call(l,e.minWireSize+n.minWireSize):r.FSizeOptHelper.call(l),t(l,"mapType",{get:function(){return a}}),t(l,"keyHelper",{get:function(){return e}}),t(l,"valueHelper",{get:function(){return n}}),n==Ice.ObjectHelper&&(t(l,"valueType",{get:function(){return o}}),l.read=s),l},Ice.StreamHelpers=r}(),function(){var e,t=Ice.HashMap,n=Number.MAX_SAFE_INTEGER||9007199254740991,r=new t,i={},o=0,a=function(){return o==n&&(o=0),o++};i.setTimeout=function(t,n){var i=a();return r.set(i,t),e.postMessage({type:0,id:i,ms:n}),i},i.clearTimeout=function(t){r.del(t),e.postMessage({type:3,id:t})},i.setInterval=function(t,n){var i=a();return r.set(i,t),e.postMessage({type:1,id:i,ms:n}),i},i.clearInterval=function(t){r.del(t),e.postMessage({type:4,id:t})},i.setImmediate=function(t){var n=a();return r.set(n,t),e.postMessage({type:2,id:n}),n},i.onmessage=function(e){var t;void 0!==(t=1===e.data.type?r.get(e.data.id):r.del(e.data.id))&&t.call()};var c;if(void 0===e)try{c=URL.createObjectURL(new Blob(["("+function(){var e={};self.onmessage=function(t){0==t.data.type?e[t.data.id]=setTimeout((function(){self.postMessage(t.data)}),t.data.ms):1==t.data.type?e[t.data.id]=setInterval((function(){self.postMessage(t.data)}),t.data.ms):2==t.data.type?self.postMessage(t.data):3==t.data.type?(clearTimeout(e[t.data.id]),delete e[t.data.id]):4==t.data.type&&(clearInterval(e[t.data.id]),delete e[t.data.id])}}.toString()+"());"],{type:"text/javascript"})),(e=new Worker(c)).onmessage=i.onmessage,Ice.Timer=i}catch(e){URL.revokeObjectURL(c),Ice.Timer=function(){var e={setTimeout:function(){setTimeout.apply(null,arguments)},clearTimeout:function(){clearTimeout.apply(null,arguments)},setInterval:function(){setInterval.apply(null,arguments)},clearInterval:function(){clearInterval.apply(null,arguments)}};return e.setImmediate="function"==typeof setImmediate?function(){setImmediate.apply(null,arguments)}:function(){setTimeout.apply(null,arguments)},e}()}}(),function(){var e=Ice.Class,t=0,n=e({__init__:function(){this.__address=t++},hashCode:function(){return this.__address},ice_isA:function(e,t){return this.__mostDerivedType().__ids.indexOf(e)>=0},ice_ping:function(e){},ice_ids:function(e){return this.__mostDerivedType().__ids},ice_id:function(e){return this.__mostDerivedType().__id},toString:function(){return"[object "+this.ice_id()+"]"},ice_preMarshal:function(){},ice_postUnmarshal:function(){},__write:function(e){e.startWriteObject(null),r(this,e,this.__mostDerivedType()),e.endWriteObject()},__read:function(e){e.startReadObject(),i(this,e,this.__mostDerivedType()),e.endReadObject(!1)},ice_instanceof:function(e){return!!e&&(this instanceof e||this.__mostDerivedType().__instanceof(e))},__mostDerivedType:function(){return n},equals:function(e){return this===e}});n.write=function(e,t){e.writeObject(t)},n.writeOpt=function(e,t,n){e.writeOptObject(t,n)},n.read=function(e){var t={value:null};return e.readObject((function(e){t.value=e}),n),t},n.readOpt=function(e,t){var r={value:void 0};return e.readOptObject(t,(function(e){r.value=e}),n),r},n.ice_staticId=function(){return n.__id},n.__instanceof=function(e){if(e===this)return!0;for(var t in this.__implements)if(this.__implements[t].__instanceof(e))return!0;return!!this.__parent&&this.__parent.__instanceof(e)},n.__ids=["::Ice::Object"],n.__id=n.__ids[0],n.__compactId=-1,n.__preserved=!1;var r=function e(t,r,i){void 0!==i&&i!==n&&(r.startWriteSlice(i.__id,i.__compactId,i.__parent===n),i.prototype.__writeMemberImpl&&i.prototype.__writeMemberImpl.call(t,r),r.endWriteSlice(),e(t,r,i.__parent))},i=function e(t,r,i){void 0!==i&&i!==n&&(r.startReadSlice(),i.prototype.__readMemberImpl&&i.prototype.__readMemberImpl.call(t,r),r.endReadSlice(),e(t,r,i.__parent))},o=function(e){e.startWriteObject(this.__slicedData),r(this,e,this.__mostDerivedType()),e.endWriteObject()},a=function(e){e.startReadObject(),i(this,e,this.__mostDerivedType()),this.__slicedData=e.endReadObject(!0)};Ice.Object=n;var c=Ice.Slice;c.defineLocalObject=function(e,t){var n=e||function(){};return void 0!==t&&(n.prototype=new t,n.__parent=t,n.prototype.constructor=e),n},c.defineObject=function(e,t,r,i,c,s,l,u,d){var f=e||function(){};return f.prototype=new t,f.__parent=t,f.__ids=c,f.__id=c[i],f.__compactId=s,f.__instanceof=n.__instanceof,f.__implements=r,f.write=function(e,t){e.writeObject(t)},f.writeOpt=function(e,t,n){e.writeOptObject(t,n)},f.read=function(e){var t={value:null};return e.readObject((function(e){t.value=e}),f),t},f.readOpt=function(e,t){var n={value:void 0};return e.readOptObject(t,(function(e){n.value=e}),f),n},f.ice_staticId=function(){return c[i]},f.prototype.constructor=f,f.prototype.__mostDerivedType=function(){return f},d&&(f.prototype.__write=o,f.prototype.__read=a),f.prototype.__writeMemberImpl=l,f.prototype.__readMemberImpl=u,f}}(),r=Ice.StringUtil,Ice.HashUtil={addBoolean:function(e,t){return(e<<5)+e^(t?0:1)},addString:function(e,t){return null!=t&&(e=(e<<5)+e^r.hashCode(t)),e},addNumber:function(e,t){return(e<<5)+e^t},addHashable:function(e,t){return null!=t&&(e=(e<<5)+e^t.hashCode()),e},addArray:function(e,t,n){if(null!=t)for(var r=0;r<t.length;++r)e=n(e,t[r]);return e}},i=Ice.ArrayUtil,o=i.eq,a=function(e){if(this===e)return!0;if(null==e)return!1;if(this.prototype!==e.prototype)return!1;var t,n;for(var r in this)if(t=this[r],n=e[r],"function"!=typeof t&&!o(t,n))return!1;return!0},c=function(){var e,t=new this.constructor;for(var n in this)if(null==(e=this[n]))t[n]=e;else{if("function"==typeof e)continue;"function"==typeof e.clone?t[n]=e.clone():t[n]=e instanceof Array?i.clone(e):e}return t},s=function t(n,r){if("function"==typeof r.hashCode)return Ice.HashUtil.addHashable(n,r);if(r instanceof Array)return Ice.HashUtil.addArray(n,r,t);var i=e(r);return r instanceof String||"string"==i?Ice.HashUtil.addString(n,r):r instanceof Number||"number"==i?Ice.HashUtil.addNumber(n,r):r instanceof Boolean||"boolean"==i?Ice.HashUtil.addBoolean(n,r):void 0},l=function(){var e,t=5381;for(var n in this)null!=(e=this[n])&&"function"!=typeof e&&(t=s(t,e));return t},Ice.Slice.defineStruct=function(e,t,n,r,i,o){var s=e;return s.prototype.clone=c,s.prototype.equals=a,t&&(s.prototype.hashCode=l),r&&n&&(s.prototype.__write=n,s.prototype.__read=r,s.write=function(e,t){t||(s.prototype._nullMarshalValue||(s.prototype._nullMarshalValue=new this),t=s.prototype._nullMarshalValue),t.__write(e)},s.read=function(e,t){return t&&t instanceof this||(t=new this),t.__read(e),t},Object.defineProperty(s,"minWireSize",{get:function(){return i}}),o?Ice.StreamHelpers.VSizeOptHelper.call(s):Ice.StreamHelpers.FSizeOptHelper.call(s)),s},Ice.CompactIdRegistry=new Ice.HashMap,L.defineSequence(Ice,"BoolSeqHelper","Ice.BoolHelper",!0),L.defineSequence(Ice,"ByteSeqHelper","Ice.ByteHelper",!0),L.defineSequence(Ice,"ShortSeqHelper","Ice.ShortHelper",!0),L.defineSequence(Ice,"IntSeqHelper","Ice.IntHelper",!0),L.defineSequence(Ice,"LongSeqHelper","Ice.LongHelper",!0),L.defineSequence(Ice,"FloatSeqHelper","Ice.FloatHelper",!0),L.defineSequence(Ice,"DoubleSeqHelper","Ice.DoubleHelper",!0),L.defineSequence(Ice,"StringSeqHelper","Ice.StringHelper",!1),L.defineSequence(Ice,"ObjectSeqHelper","Ice.ObjectHelper",!1,"Ice.Object"),L.defineSequence(Ice,"ObjectProxySeqHelper","Ice.ObjectPrx",!1),Ice.ReferenceMode={ModeTwoway:0,ModeOneway:1,ModeBatchOneway:2,ModeDatagram:3,ModeBatchDatagram:4,ModeLast:4},function(){var e=Ice.Long;ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=function(e,t){var n=new Uint8Array(this);t=void 0===t?n.length:t;for(var r=new Uint8Array(new ArrayBuffer(t-e)),i=0,o=r.length;i<o;i++)r[i]=n[i+e];return r.buffer});var t="BufferOverflowException",n="BufferUnderflowException",r="IndexOutOfBoundsException",i=Ice.Class({__init__:function(e){void 0!==e?(this.b=e,this.v=new DataView(this.b)):(this.b=null,this.v=null),this._position=0,this._limit=0,this._shrinkCounter=0},empty:function(){return 0===this._limit},resize:function(e){0===e?this.clear():e>this.capacity&&this.reserve(e),this._limit=e},clear:function(){this.b=null,this.v=null,this._position=0,this._limit=0},expand:function(e){var t=0===this.capacity?e:this._position+e;t>this._limit&&this.resize(t)},reset:function(){this._limit>0&&2*this._limit<this.capacity?++this._shrinkCounter>2&&(this.reserve(this._limit),this._shrinkCounter=0):this._shrinkCounter=0,this._limit=0,this._position=0},reserve:function(e){if(e>this.capacity){var t=Math.max(e,2*this.capacity);if(t=Math.max(1024,t),this.b){var n=new Uint8Array(t);n.set(new Uint8Array(this.b)),this.b=n.buffer}else this.b=new ArrayBuffer(t);this.v=new DataView(this.b)}else{if(!(e<this.capacity))return;this.b=this.b.slice(0,this.capacity),this.v=new DataView(this.b)}},put:function(e){if(this._position===this._limit)throw new Error(t);this.v.setUint8(this._position,e),this._position++},putAt:function(e,t){if(e>=this._limit)throw new Error(r);this.v.setUint8(e,t)},putArray:function(e){if(!(e instanceof Uint8Array))throw new TypeError("argument is not a Uint8Array");if(e.byteLength>0){if(this._position+e.length>this._limit)throw new Error(t);new Uint8Array(this.b,0,this.b.byteLength).set(e,this._position),this._position+=e.byteLength}},putShort:function(e){if(this._position+2>this._limit)throw new Error(t);this.v.setInt16(this._position,e,!0),this._position+=2},putInt:function(e){if(this._position+4>this._limit)throw new Error(t);this.v.setInt32(this._position,e,!0),this._position+=4},putIntAt:function(e,t){if(e+4>this._limit||e<0)throw new Error(r);this.v.setInt32(e,t,!0)},putFloat:function(e){if(this._position+4>this._limit)throw new Error(t);this.v.setFloat32(this._position,e,!0),this._position+=4},putDouble:function(e){if(this._position+8>this._limit)throw new Error(t);this.v.setFloat64(this._position,e,!0),this._position+=8},putLong:function(e){if(this._position+8>this._limit)throw new Error(t);this.v.setInt32(this._position,e.low,!0),this._position+=4,this.v.setInt32(this._position,e.high,!0),this._position+=4},writeString:function(e,t){var n=unescape(encodeURIComponent(t));e.writeSize(n.length),e.expand(n.length),this.putString(n,n.length)},putString:function(e,n){if(this._position+n>this._limit)throw new Error(t);for(var r=0;r<n;++r)this.v.setUint8(this._position,e.charCodeAt(r)),this._position++},get:function(){if(this._position>=this._limit)throw new Error(n);var e=this.v.getUint8(this._position);return this._position++,e},getAt:function(e){if(e<0||e>=this._limit)throw new Error(r);return this.v.getUint8(e)},getArray:function(e){if(this._position+e>this._limit)throw new Error(n);var t=this.b.slice(this._position,this._position+e);return this._position+=e,new Uint8Array(t)},getArrayAt:function(e,t){if(e+t>this._limit)throw new Error(n);return t=void 0===t?this.b.byteLength-e:t,new Uint8Array(this.b.slice(e,e+t))},getShort:function(){if(this._limit-this._position<2)throw new Error(n);var e=this.v.getInt16(this._position,!0);return this._position+=2,e},getInt:function(){if(this._limit-this._position<4)throw new Error(n);var e=this.v.getInt32(this._position,!0);return this._position+=4,e},getFloat:function(){if(this._limit-this._position<4)throw new Error(n);var e=this.v.getFloat32(this._position,!0);return this._position+=4,e},getDouble:function(){if(this._limit-this._position<8)throw new Error(n);var e=this.v.getFloat64(this._position,!0);return this._position+=8,e},getLong:function(){if(this._limit-this._position<8)throw new Error(n);var t=new e;return t.low=this.v.getUint32(this._position,!0),this._position+=4,t.high=this.v.getUint32(this._position,!0),this._position+=4,t},getString:function(e){if(this._position+e>this._limit)throw new Error(n);for(var t=new DataView(this.b,this._position,e),r="",i=0;i<e;++i)r+=String.fromCharCode(t.getUint8(i));return this._position+=e,r=decodeURIComponent(escape(r))}}),o=i.prototype;Object.defineProperty(o,"position",{get:function(){return this._position},set:function(e){e>=0&&e<=this._limit&&(this._position=e)}}),Object.defineProperty(o,"limit",{get:function(){return this._limit},set:function(e){e<=this.capacity&&(this._limit=e,this._position>e&&(this._position=e))}}),Object.defineProperty(o,"capacity",{get:function(){return null===this.b?0:this.b.byteLength}}),Object.defineProperty(o,"remaining",{get:function(){return this._limit-this._position}}),i.createNative=function(e){return void 0===e?new Uint8Array(0):new Uint8Array(e)},Ice.Buffer=i}(),function(){var e=Ice.Buffer,t={},n="A".charCodeAt(0),r="a".charCodeAt(0),i="0".charCodeAt(0);function o(e){return e<26?String.fromCharCode(n+e):e<52?String.fromCharCode(r+(e-26)):e<62?String.fromCharCode(i+(e-52)):62==e?"+":"/"}function a(e){return e>="A"&&e<="Z"?e.charCodeAt(0)-n:e>="a"&&e<="z"?e.charCodeAt(0)-r+26:e>="0"&&e<="9"?e.charCodeAt(0)-i+52:"+"==e?62:63}t.encode=function(e){if(null===e||0===e.length)return"";e.length;for(var t,n,r,i,a,c,s,l=[],u=0;u<e.length;u+=3)t=255&e[u],n=0,r=0,u+1<e.length&&(n=255&e[u+1]),u+2<e.length&&(r=255&e[u+2]),i=t>>2&255,a=255&((3&t)<<4|n>>4),c=255&((15&n)<<2|r>>6),s=63&r,l.push(o(i)),l.push(o(a)),u+1<e.length?l.push(o(c)):l.push("="),u+2<e.length?l.push(o(s)):l.push("=");for(var d=l.join(""),f=[],h=0;d.length-h>76;)f.push(d.substring(h,h+76)),f.push("\r\n"),h+=76;return f.push(d.substring(h)),f.join("")},t.decode=function(n){for(var r=[],i=0;i<n.length;i++){var o=n.charAt(i);t.isBase64(o)&&r.push(o)}if(0===r.length)return null;var c,s,l,u,d,f,h,p,_=3*r.length/4+1,g=new e;g.resize(_);for(var C=0;C<r.length;C+=4)"A",f="A",h="A",p="A",d=r[C],C+1<r.length&&(f=r[C+1]),C+2<r.length&&(h=r[C+2]),C+3<r.length&&(p=r[C+3]),c=255&a(d),s=255&a(f),l=255&a(h),u=255&a(p),g.put(c<<2|s>>4),"="!=h&&g.put((15&s)<<4|l>>2),"="!=p&&g.put((3&l)<<6|u);return g.remaining>0?g.getArrayAt(0,g.position):g.getArrayAt(0)},t.isBase64=function(e){return e>="A"&&e<="Z"||(e>="a"&&e<="z"||(e>="0"&&e<="9"||("+"==e||("/"==e||"="==e))))},Ice.Base64=t}(),Ice.Identity=L.defineStruct((function(e,t){this.name=void 0!==e?e:"",this.category=void 0!==t?t:""}),!0,(function(e){e.writeString(this.name),e.writeString(this.category)}),(function(e){this.name=e.readString(),this.category=e.readString()}),2,!1),L.defineDictionary(Ice,"ObjectDict","ObjectDictHelper","Ice.Identity","Ice.ObjectHelper",!1,Ice.HashMap.compareEquals,"Ice.Object"),L.defineSequence(Ice,"IdentitySeqHelper","Ice.Identity",!1),Ice.ProtocolVersion=L.defineStruct((function(e,t){this.major=void 0!==e?e:0,this.minor=void 0!==t?t:0}),!0,(function(e){e.writeByte(this.major),e.writeByte(this.minor)}),(function(e){this.major=e.readByte(),this.minor=e.readByte()}),2,!0),Ice.EncodingVersion=L.defineStruct((function(e,t){this.major=void 0!==e?e:0,this.minor=void 0!==t?t:0}),!0,(function(e){e.writeByte(this.major),e.writeByte(this.minor)}),(function(e){this.major=e.readByte(),this.minor=e.readByte()}),2,!0),function(){Ice.SliceInfo=function(){this.typeId="",this.compactId=-1,this.bytes=[],this.objects=[],this.hasOptionalMembers=!1,this.isLastSlice=!1};Ice.SlicedData=function(e){this.slices=e};var e=Ice.Class(Ice.Object,{__init__:function(e){this._unknownTypeId=e},getUnknownTypeId:function(){return this._unknownTypeId},__write:function(e){e.startWriteObject(this._slicedData),e.endWriteObject()},__read:function(e){e.startReadObject(),this._slicedData=e.endReadObject(!0)}});Ice.UnknownSlicedObject=e}(),function(){var e=Ice.HashMap,t=Ice.Debug,n=Ice.Class({__init__:function(){this._adapterEndpointsTable=new e,this._objectTable=new e(e.compareEquals)},clear:function(){this._adapterEndpointsTable.clear(),this._objectTable.clear()},getAdapterEndpoints:function(e,t,n){if(0===t)return n.value=!1,null;var r=this._adapterEndpointsTable.get(e);return void 0!==r?(n.value=this.checkTTL(r.time,t),r.endpoints):(n.value=!1,null)},addAdapterEndpoints:function(e,t){this._adapterEndpointsTable.set(e,new r(Date.now(),t))},removeAdapterEndpoints:function(e){var t=this._adapterEndpointsTable.get(e);return this._adapterEndpointsTable.del(e),void 0!==t?t.endpoints:null},getObjectReference:function(e,t,n){if(0===t)return n.value=!1,null;var r=this._objectTable.get(e);return void 0!==r?(n.value=this.checkTTL(r.time,t),r.reference):(n.value=!1,null)},addObjectReference:function(e,t){this._objectTable.set(e,new i(Date.now(),t))},removeObjectReference:function(e){var t=this._objectTable.get(e);return this._objectTable.del(e),void 0!==t?t.reference:null},checkTTL:function(e,n){return t.assert(0!==n),n<0||Date.now()-e<=1e3*n}});Ice.LocatorTable=n;var r=function(e,t){this.time=e,this.endpoints=t},i=function(e,t){this.time=e,this.reference=t}}(),function(){var e=Ice.Timer,t=0,n=1,r=2,i=function(e,t){var r=e.__state===n?t.onResponse:t.onException;try{if("function"!=typeof r)t.promise.setState(e.__state,e._args);else{var i=r.apply(null,e._args);i&&"function"==typeof i.then?i.then((function(){var e=arguments;t.promise.succeed.apply(t.promise,e)}),(function(){var e=arguments;t.promise.fail.apply(t.promise,e)})):t.promise.succeed(i)}}catch(e){t.promise.fail.call(t.promise,e)}},o=Ice.Class({__init__:function(){this.__state=t,this.__listeners=[]},then:function(t,n){var r=new o,i=this;return e.setImmediate((function(){i.__listeners.push({promise:r,onResponse:t,onException:n}),i.resolve()})),r},exception:function(e){return this.then(null,e)},finally2:function(t){var n=new o,r=this,i=function(e){return function(){var r=arguments;try{var i=t.apply(null,r);if(i&&"function"==typeof i.then){var o=function(){e.apply(n,r)};i.then(o).exception(o)}else e.apply(n,r)}catch(t){e.apply(n,r)}}};return e.setImmediate((function(){r.then(i(n.succeed),i(n.fail))})),n},delay:function(t){var n=new o,r=this,i=function(n,r){return function(){var i=arguments;e.setTimeout((function(){r.apply(n,i)}),t)}};return e.setImmediate((function(){r.then(i(n,n.succeed),i(n,n.fail))})),n},resolve:function(){if(this.__state!==t)for(var e;e=this.__listeners.pop();)i(this,e)},setState:function(e,n){this.__state===t&&e!==t&&(this.__state=e,this._args=n,this.resolve())},succeed:function(){var e=arguments;return this.setState(n,e),this},fail:function(){var e=arguments;return this.setState(r,e),this},succeeded:function(){return this.__state===n},failed:function(){return this.__state===r},completed:function(){return this.__state!==t}});o.all=function(){if(1===arguments.length&&arguments[0]instanceof Array)return o.all.apply(this,arguments[0]);var e=new o,t=Array.prototype.slice.call(arguments),n=new Array(arguments.length),r=t.length;0===r&&e.succeed.apply(e,n);for(var i=0;i<t.length;++i)!function(i){t[i]&&"function"==typeof t[i].then?t[i].then((function(){n[i]=arguments,0===--r&&e.succeed.apply(e,n)}),(function(){e.fail.apply(e,arguments)})):(n[i]=t[i],0===--r&&e.succeed.apply(e,n))}(i);return e},o.try2=function(e){return(new o).succeed().then(e)},o.delay=function(e){if(arguments.length>1){var t=new o,n=Array.prototype.slice.call(arguments);return e=n.pop(),t.succeed.apply(t,n).delay(e)}return(new o).succeed().delay(e)},Ice.Promise=o}(),u=Ice.Class({__init__:function(e){void 0!==e&&e.length>0?this._prefix=e+": ":this._prefix="",this._dateformat={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!1}},print:function(e){this.write(e,!1)},trace:function(e,t){var n=[];new Date,n.push("-- "),n.push(this.timestamp()),n.push(" "),n.push(this._prefix),n.push(e),n.push(": "),n.push(t),this.write(n.join(""),!0)},warning:function(e){var t=[];new Date,t.push("-! "),t.push(this.timestamp()),t.push(" "),t.push(this._prefix),t.push("warning: "),t.push(e),this.write(t.join(""),!0)},error:function(e){var t=[];new Date,t.push("!! "),t.push(this.timestamp()),t.push(" "),t.push(this._prefix),t.push("error: "),t.push(e),this.write(t.join(""),!0)},cloneWithPrefix:function(e){return new u(e)},write:function(e,t){t&&(e=e.replace(/\n/g,"\n   ")),console.crlog&&console.crlog(e)},timestamp:function(){var e=new Date;return e.toLocaleString("en-US",this._dateformat)+"."+e.getMilliseconds()}}),Ice.Logger=u,Ice.InitializationException=L.defineLocalException((function(e,t){Ice.LocalException.call(this,t),this.reason=void 0!==e?e:""}),Ice.LocalException,"Ice::InitializationException"),Ice.PluginInitializationException=L.defineLocalException((function(e,t){Ice.LocalException.call(this,t),this.reason=void 0!==e?e:""}),Ice.LocalException,"Ice::PluginInitializationException"),Ice.CollocationOptimizationException=L.defineLocalException((function(e){Ice.LocalException.call(this,e)}),Ice.LocalException,"Ice::CollocationOptimizationException"),Ice.AlreadyRegisteredException=L.defineLocalException((function(e,t,n){Ice.LocalException.call(this,n),this.kindOfObject=void 0!==e?e:"",this.id=void 0!==t?t:""}),Ice.LocalException,"Ice::AlreadyRegisteredException"),Ice.NotRegisteredException=L.defineLocalException((function(e,t,n){Ice.LocalException.call(this,n),this.kindOfObject=void 0!==e?e:"",this.id=void 0!==t?t:""}),Ice.LocalException,"Ice::NotRegisteredException"),Ice.TwowayOnlyException=L.defineLocalException((function(e,t){Ice.LocalException.call(this,t),this.operation=void 0!==e?e:""}),Ice.LocalException,"Ice::TwowayOnlyException"),Ice.CloneNotImplementedException=L.defineLocalException((function(e){Ice.LocalException.call(this,e)}),Ice.LocalException,"Ice::CloneNotImplementedException"),Ice.UnknownException=L.defineLocalException((function(e,t){Ice.LocalException.call(this,t),this.unknown=void 0!==e?e:""}),Ice.LocalException,"Ice::UnknownException"),Ice.UnknownLocalException=L.defineLocalException((function(e,t){Ice.UnknownException.call(this,e,t)}),Ice.UnknownException,"Ice::UnknownLocalException"),Ice.UnknownUserException=L.defineLocalException((function(e,t){Ice.UnknownException.call(this,e,t)}),Ice.UnknownException,"Ice::UnknownUserException"),Ice.VersionMismatchException=L.defineLocalException((function(e){Ice.LocalException.call(this,e)}),Ice.LocalException,"Ice::VersionMismatchException"),Ice.CommunicatorDestroyedException=L.defineLocalException((function(e){Ice.LocalException.call(this,e)}),Ice.LocalException,"Ice::CommunicatorDestroyedException"),Ice.ObjectAdapterDeactivatedException=L.defineLocalException((function(e,t){Ice.LocalException.call(this,t),this.name=void 0!==e?e:""}),Ice.LocalException,"Ice::ObjectAdapterDeactivatedException"),Ice.ObjectAdapterIdInUseException=L.defineLocalException((function(e,t){Ice.LocalException.call(this,t),this.id=void 0!==e?e:""}),Ice.LocalException,"Ice::ObjectAdapterIdInUseException"),Ice.NoEndpointException=L.defineLocalException((function(e,t){Ice.LocalException.call(this,t),this.proxy=void 0!==e?e:""}),Ice.LocalException,"Ice::NoEndpointException"),Ice.EndpointParseException=L.defineLocalException((function(e,t){Ice.LocalException.call(this,t),this.str=void 0!==e?e:""}),Ice.LocalException,"Ice::EndpointParseException"),Ice.EndpointSelectionTypeParseException=L.defineLocalException((function(e,t){Ice.LocalException.call(this,t),this.str=void 0!==e?e:""}),Ice.LocalException,"Ice::EndpointSelectionTypeParseException"),Ice.VersionParseException=L.defineLocalException((function(e,t){Ice.LocalException.call(this,t),this.str=void 0!==e?e:""}),Ice.LocalException,"Ice::VersionParseException"),Ice.IdentityParseException=L.defineLocalException((function(e,t){Ice.LocalException.call(this,t),this.str=void 0!==e?e:""}),Ice.LocalException,"Ice::IdentityParseException"),Ice.ProxyParseException=L.defineLocalException((function(e,t){Ice.LocalException.call(this,t),this.str=void 0!==e?e:""}),Ice.LocalException,"Ice::ProxyParseException"),Ice.IllegalIdentityException=L.defineLocalException((function(e,t){Ice.LocalException.call(this,t),this.id=void 0!==e?e:new Ice.Identity}),Ice.LocalException,"Ice::IllegalIdentityException"),Ice.IllegalServantException=L.defineLocalException((function(e,t){Ice.LocalException.call(this,t),this.reason=void 0!==e?e:""}),Ice.LocalException,"Ice::IllegalServantException"),Ice.RequestFailedException=L.defineLocalException((function(e,t,n,r){Ice.LocalException.call(this,r),this.id=void 0!==e?e:new Ice.Identity,this.facet=void 0!==t?t:"",this.operation=void 0!==n?n:""}),Ice.LocalException,"Ice::RequestFailedException"),Ice.ObjectNotExistException=L.defineLocalException((function(e,t,n,r){Ice.RequestFailedException.call(this,e,t,n,r)}),Ice.RequestFailedException,"Ice::ObjectNotExistException"),Ice.FacetNotExistException=L.defineLocalException((function(e,t,n,r){Ice.RequestFailedException.call(this,e,t,n,r)}),Ice.RequestFailedException,"Ice::FacetNotExistException"),Ice.OperationNotExistException=L.defineLocalException((function(e,t,n,r){Ice.RequestFailedException.call(this,e,t,n,r)}),Ice.RequestFailedException,"Ice::OperationNotExistException"),Ice.SyscallException=L.defineLocalException((function(e,t){Ice.LocalException.call(this,t),this.error=void 0!==e?e:0}),Ice.LocalException,"Ice::SyscallException"),Ice.SocketException=L.defineLocalException((function(e,t){Ice.SyscallException.call(this,e,t)}),Ice.SyscallException,"Ice::SocketException"),Ice.FileException=L.defineLocalException((function(e,t,n){Ice.SyscallException.call(this,e,n),this.path=void 0!==t?t:""}),Ice.SyscallException,"Ice::FileException"),Ice.ConnectFailedException=L.defineLocalException((function(e,t){Ice.SocketException.call(this,e,t)}),Ice.SocketException,"Ice::ConnectFailedException"),Ice.ConnectionRefusedException=L.defineLocalException((function(e,t){Ice.ConnectFailedException.call(this,e,t)}),Ice.ConnectFailedException,"Ice::ConnectionRefusedException"),Ice.ConnectionLostException=L.defineLocalException((function(e,t){Ice.SocketException.call(this,e,t)}),Ice.SocketException,"Ice::ConnectionLostException"),Ice.DNSException=L.defineLocalException((function(e,t,n){Ice.LocalException.call(this,n),this.error=void 0!==e?e:0,this.host=void 0!==t?t:""}),Ice.LocalException,"Ice::DNSException"),Ice.OperationInterruptedException=L.defineLocalException((function(e){Ice.LocalException.call(this,e)}),Ice.LocalException,"Ice::OperationInterruptedException"),Ice.TimeoutException=L.defineLocalException((function(e){Ice.LocalException.call(this,e)}),Ice.LocalException,"Ice::TimeoutException"),Ice.ConnectTimeoutException=L.defineLocalException((function(e){Ice.TimeoutException.call(this,e)}),Ice.TimeoutException,"Ice::ConnectTimeoutException"),Ice.CloseTimeoutException=L.defineLocalException((function(e){Ice.TimeoutException.call(this,e)}),Ice.TimeoutException,"Ice::CloseTimeoutException"),Ice.ConnectionTimeoutException=L.defineLocalException((function(e){Ice.TimeoutException.call(this,e)}),Ice.TimeoutException,"Ice::ConnectionTimeoutException"),Ice.InvocationTimeoutException=L.defineLocalException((function(e){Ice.TimeoutException.call(this,e)}),Ice.TimeoutException,"Ice::InvocationTimeoutException"),Ice.InvocationCanceledException=L.defineLocalException((function(e){Ice.LocalException.call(this,e)}),Ice.LocalException,"Ice::InvocationCanceledException"),Ice.ProtocolException=L.defineLocalException((function(e,t){Ice.LocalException.call(this,t),this.reason=void 0!==e?e:""}),Ice.LocalException,"Ice::ProtocolException"),Ice.BadMagicException=L.defineLocalException((function(e,t,n){Ice.ProtocolException.call(this,e,n),this.badMagic=void 0!==t?t:null}),Ice.ProtocolException,"Ice::BadMagicException"),Ice.UnsupportedProtocolException=L.defineLocalException((function(e,t,n,r){Ice.ProtocolException.call(this,e,r),this.bad=void 0!==t?t:new Ice.ProtocolVersion,this.supported=void 0!==n?n:new Ice.ProtocolVersion}),Ice.ProtocolException,"Ice::UnsupportedProtocolException"),Ice.UnsupportedEncodingException=L.defineLocalException((function(e,t,n,r){Ice.ProtocolException.call(this,e,r),this.bad=void 0!==t?t:new Ice.EncodingVersion,this.supported=void 0!==n?n:new Ice.EncodingVersion}),Ice.ProtocolException,"Ice::UnsupportedEncodingException"),Ice.UnknownMessageException=L.defineLocalException((function(e,t){Ice.ProtocolException.call(this,e,t)}),Ice.ProtocolException,"Ice::UnknownMessageException"),Ice.ConnectionNotValidatedException=L.defineLocalException((function(e,t){Ice.ProtocolException.call(this,e,t)}),Ice.ProtocolException,"Ice::ConnectionNotValidatedException"),Ice.UnknownRequestIdException=L.defineLocalException((function(e,t){Ice.ProtocolException.call(this,e,t)}),Ice.ProtocolException,"Ice::UnknownRequestIdException"),Ice.UnknownReplyStatusException=L.defineLocalException((function(e,t){Ice.ProtocolException.call(this,e,t)}),Ice.ProtocolException,"Ice::UnknownReplyStatusException"),Ice.CloseConnectionException=L.defineLocalException((function(e,t){Ice.ProtocolException.call(this,e,t)}),Ice.ProtocolException,"Ice::CloseConnectionException"),Ice.ForcedCloseConnectionException=L.defineLocalException((function(e,t){Ice.ProtocolException.call(this,e,t)}),Ice.ProtocolException,"Ice::ForcedCloseConnectionException"),Ice.IllegalMessageSizeException=L.defineLocalException((function(e,t){Ice.ProtocolException.call(this,e,t)}),Ice.ProtocolException,"Ice::IllegalMessageSizeException"),Ice.CompressionException=L.defineLocalException((function(e,t){Ice.ProtocolException.call(this,e,t)}),Ice.ProtocolException,"Ice::CompressionException"),Ice.DatagramLimitException=L.defineLocalException((function(e,t){Ice.ProtocolException.call(this,e,t)}),Ice.ProtocolException,"Ice::DatagramLimitException"),Ice.MarshalException=L.defineLocalException((function(e,t){Ice.ProtocolException.call(this,e,t)}),Ice.ProtocolException,"Ice::MarshalException"),Ice.ProxyUnmarshalException=L.defineLocalException((function(e,t){Ice.MarshalException.call(this,e,t)}),Ice.MarshalException,"Ice::ProxyUnmarshalException"),Ice.UnmarshalOutOfBoundsException=L.defineLocalException((function(e,t){Ice.MarshalException.call(this,e,t)}),Ice.MarshalException,"Ice::UnmarshalOutOfBoundsException"),Ice.NoObjectFactoryException=L.defineLocalException((function(e,t,n){Ice.MarshalException.call(this,e,n),this.type=void 0!==t?t:""}),Ice.MarshalException,"Ice::NoObjectFactoryException"),Ice.UnexpectedObjectException=L.defineLocalException((function(e,t,n,r){Ice.MarshalException.call(this,e,r),this.type=void 0!==t?t:"",this.expectedType=void 0!==n?n:""}),Ice.MarshalException,"Ice::UnexpectedObjectException"),Ice.MemoryLimitException=L.defineLocalException((function(e,t){Ice.MarshalException.call(this,e,t)}),Ice.MarshalException,"Ice::MemoryLimitException"),Ice.StringConversionException=L.defineLocalException((function(e,t){Ice.MarshalException.call(this,e,t)}),Ice.MarshalException,"Ice::StringConversionException"),Ice.EncapsulationException=L.defineLocalException((function(e,t){Ice.MarshalException.call(this,e,t)}),Ice.MarshalException,"Ice::EncapsulationException"),Ice.FeatureNotSupportedException=L.defineLocalException((function(e,t){Ice.LocalException.call(this,t),this.unsupportedFeature=void 0!==e?e:""}),Ice.LocalException,"Ice::FeatureNotSupportedException"),Ice.SecurityException=L.defineLocalException((function(e,t){Ice.LocalException.call(this,t),this.reason=void 0!==e?e:""}),Ice.LocalException,"Ice::SecurityException"),Ice.FixedProxyException=L.defineLocalException((function(e){Ice.LocalException.call(this,e)}),Ice.LocalException,"Ice::FixedProxyException"),Ice.ResponseSentException=L.defineLocalException((function(e){Ice.LocalException.call(this,e)}),Ice.LocalException,"Ice::ResponseSentException"),function(){var e=Ice.StringUtil,t={};function n(t){var n=t.indexOf(".");if(-1===n)throw new Ice.VersionParseException("malformed version value `"+t+"'");var r,i=t.substring(0,n);try{r=e.toInt(i)}catch(e){throw new Ice.VersionParseException("invalid version value `"+t+"'")}if(r<1||r>255)throw new Ice.VersionParseException("range error in version `"+t+"'");return r}function r(t){var n=t.indexOf(".");if(-1===n)throw new Ice.VersionParseException("malformed version value `"+t+"'");var r,i=t.substring(n+1);try{r=e.toInt(i)}catch(e){throw new Ice.VersionParseException("invalid version value `"+t+"'")}if(r<0||r>255)throw new Ice.VersionParseException("range error in version `"+t+"'");return r}function i(e,t){return e+"."+t}Ice.Encoding_1_0=new Ice.EncodingVersion(1,0),Ice.Encoding_1_1=new Ice.EncodingVersion(1,1),Ice.Protocol_1_0=new Ice.ProtocolVersion(1,0),t.headerSize=14,t.magic=Ice.Buffer.createNative([73,99,101,80]),t.protocolMajor=1,t.protocolMinor=0,t.protocolEncodingMajor=1,t.protocolEncodingMinor=0,t.encodingMajor=1,t.encodingMinor=1,t.requestMsg=0,t.requestBatchMsg=1,t.replyMsg=2,t.validateConnectionMsg=3,t.closeConnectionMsg=4,t.replyOK=0,t.replyUserException=1,t.replyObjectNotExist=2,t.replyFacetNotExist=3,t.replyOperationNotExist=4,t.replyUnknownLocalException=5,t.replyUnknownUserException=6,t.replyUnknownException=7,t.requestHdr=Ice.Buffer.createNative([t.magic[0],t.magic[1],t.magic[2],t.magic[3],t.protocolMajor,t.protocolMinor,t.protocolEncodingMajor,t.protocolEncodingMinor,t.requestMsg,0,0,0,0,0,0,0,0,0]),t.requestBatchHdr=Ice.Buffer.createNative([t.magic[0],t.magic[1],t.magic[2],t.magic[3],t.protocolMajor,t.protocolMinor,t.protocolEncodingMajor,t.protocolEncodingMinor,t.requestBatchMsg,0,0,0,0,0,0,0,0,0]),t.replyHdr=Ice.Buffer.createNative([t.magic[0],t.magic[1],t.magic[2],t.magic[3],t.protocolMajor,t.protocolMinor,t.protocolEncodingMajor,t.protocolEncodingMinor,t.replyMsg,0,0,0,0,0]),t.currentProtocol=new Ice.ProtocolVersion(t.protocolMajor,t.protocolMinor),t.currentProtocolEncoding=new Ice.EncodingVersion(t.protocolEncodingMajor,t.protocolEncodingMinor),t.currentEncoding=new Ice.EncodingVersion(t.encodingMajor,t.encodingMinor),t.checkSupportedProtocol=function(e){if(e.major!==t.currentProtocol.major||e.minor>t.currentProtocol.minor)throw new Ice.UnsupportedProtocolException("",e,t.currentProtocol)},t.checkSupportedProtocolEncoding=function(e){if(e.major!==t.currentProtocolEncoding.major||e.minor>t.currentProtocolEncoding.minor)throw new Ice.UnsupportedEncodingException("",e,t.currentProtocolEncoding)},t.checkSupportedEncoding=function(e){if(e.major!==t.currentEncoding.major||e.minor>t.currentEncoding.minor)throw new Ice.UnsupportedEncodingException("",e,t.currentEncoding)},t.getCompatibleProtocol=function(e){return e.major!==t.currentProtocol.major||e.minor<t.currentProtocol.minor?e:t.currentProtocol},t.getCompatibleEncoding=function(e){return e.major!==t.currentEncoding.major||e.minor<t.currentEncoding.minor?e:t.currentEncoding},t.isSupported=function(e,t){return e.major===t.major&&e.minor<=t.minor},Ice.stringToProtocolVersion=function(e){return new Ice.ProtocolVersion(n(e),r(e))},Ice.stringToEncodingVersion=function(e){return new Ice.EncodingVersion(n(e),r(e))},Ice.protocolVersionToString=function(e){return i(e.major,e.minor)},Ice.encodingVersionToString=function(e){return i(e.major,e.minor)},Ice.Protocol=t}(),d=function(e,t,n){this._pattern=e,this._deprecated=t,this._deprecatedBy=n},Object.defineProperty(d.prototype,"pattern",{get:function(){return this._pattern}}),Object.defineProperty(d.prototype,"deprecated",{get:function(){return this._deprecated}}),Object.defineProperty(d.prototype,"deprecatedBy",{get:function(){return this._deprecatedBy}}),Ice.Property=d,function(){var e={},t=Ice.Property;e.IceProps=[new t("/^Ice.ACM.Client/",!0,null),new t("/^Ice.ACM.Server/",!0,null),new t("/^Ice.ACM.Timeout/",!1,null),new t("/^Ice.ACM.Heartbeat/",!1,null),new t("/^Ice.ACM.Close/",!1,null),new t("/^Ice.ACM/",!1,null),new t("/^Ice.ACM.Client.Timeout/",!1,null),new t("/^Ice.ACM.Client.Heartbeat/",!1,null),new t("/^Ice.ACM.Client.Close/",!1,null),new t("/^Ice.ACM.Client/",!1,null),new t("/^Ice.ACM.Server.Timeout/",!1,null),new t("/^Ice.ACM.Server.Heartbeat/",!1,null),new t("/^Ice.ACM.Server.Close/",!1,null),new t("/^Ice.ACM.Server/",!1,null),new t("/^Ice.Admin.ACM.Timeout/",!1,null),new t("/^Ice.Admin.ACM.Heartbeat/",!1,null),new t("/^Ice.Admin.ACM.Close/",!1,null),new t("/^Ice.Admin.ACM/",!1,null),new t("/^Ice.Admin.AdapterId/",!1,null),new t("/^Ice.Admin.Endpoints/",!1,null),new t("/^Ice.Admin.Locator.EndpointSelection/",!1,null),new t("/^Ice.Admin.Locator.ConnectionCached/",!1,null),new t("/^Ice.Admin.Locator.PreferSecure/",!1,null),new t("/^Ice.Admin.Locator.LocatorCacheTimeout/",!1,null),new t("/^Ice.Admin.Locator.InvocationTimeout/",!1,null),new t("/^Ice.Admin.Locator.Locator/",!1,null),new t("/^Ice.Admin.Locator.Router/",!1,null),new t("/^Ice.Admin.Locator.CollocationOptimized/",!1,null),new t("/^Ice.Admin.Locator.Context../",!1,null),new t("/^Ice.Admin.Locator/",!1,null),new t("/^Ice.Admin.PublishedEndpoints/",!1,null),new t("/^Ice.Admin.ReplicaGroupId/",!1,null),new t("/^Ice.Admin.Router.EndpointSelection/",!1,null),new t("/^Ice.Admin.Router.ConnectionCached/",!1,null),new t("/^Ice.Admin.Router.PreferSecure/",!1,null),new t("/^Ice.Admin.Router.LocatorCacheTimeout/",!1,null),new t("/^Ice.Admin.Router.InvocationTimeout/",!1,null),new t("/^Ice.Admin.Router.Locator/",!1,null),new t("/^Ice.Admin.Router.Router/",!1,null),new t("/^Ice.Admin.Router.CollocationOptimized/",!1,null),new t("/^Ice.Admin.Router.Context../",!1,null),new t("/^Ice.Admin.Router/",!1,null),new t("/^Ice.Admin.ProxyOptions/",!1,null),new t("/^Ice.Admin.ThreadPool.Size/",!1,null),new t("/^Ice.Admin.ThreadPool.SizeMax/",!1,null),new t("/^Ice.Admin.ThreadPool.SizeWarn/",!1,null),new t("/^Ice.Admin.ThreadPool.StackSize/",!1,null),new t("/^Ice.Admin.ThreadPool.Serialize/",!1,null),new t("/^Ice.Admin.ThreadPool.ThreadIdleTime/",!1,null),new t("/^Ice.Admin.ThreadPool.ThreadPriority/",!1,null),new t("/^Ice.Admin.MessageSizeMax/",!1,null),new t("/^Ice.Admin.DelayCreation/",!1,null),new t("/^Ice.Admin.Enabled/",!1,null),new t("/^Ice.Admin.Facets/",!1,null),new t("/^Ice.Admin.InstanceName/",!1,null),new t("/^Ice.Admin.Logger.KeepLogs/",!1,null),new t("/^Ice.Admin.Logger.KeepTraces/",!1,null),new t("/^Ice.Admin.Logger.Properties/",!1,null),new t("/^Ice.Admin.ServerId/",!1,null),new t("/^Ice.BackgroundLocatorCacheUpdates/",!1,null),new t("/^Ice.BatchAutoFlush/",!0,null),new t("/^Ice.BatchAutoFlushSize/",!1,null),new t("/^Ice.ChangeUser/",!1,null),new t("/^Ice.ClientAccessPolicyProtocol/",!1,null),new t("/^Ice.Compression.Level/",!1,null),new t("/^Ice.CollectObjects/",!1,null),new t("/^Ice.Config/",!1,null),new t("/^Ice.ConsoleListener/",!1,null),new t("/^Ice.Default.CollocationOptimized/",!1,null),new t("/^Ice.Default.EncodingVersion/",!1,null),new t("/^Ice.Default.EndpointSelection/",!1,null),new t("/^Ice.Default.Host/",!1,null),new t("/^Ice.Default.Locator.EndpointSelection/",!1,null),new t("/^Ice.Default.Locator.ConnectionCached/",!1,null),new t("/^Ice.Default.Locator.PreferSecure/",!1,null),new t("/^Ice.Default.Locator.LocatorCacheTimeout/",!1,null),new t("/^Ice.Default.Locator.InvocationTimeout/",!1,null),new t("/^Ice.Default.Locator.Locator/",!1,null),new t("/^Ice.Default.Locator.Router/",!1,null),new t("/^Ice.Default.Locator.CollocationOptimized/",!1,null),new t("/^Ice.Default.Locator.Context../",!1,null),new t("/^Ice.Default.Locator/",!1,null),new t("/^Ice.Default.LocatorCacheTimeout/",!1,null),new t("/^Ice.Default.InvocationTimeout/",!1,null),new t("/^Ice.Default.Package/",!1,null),new t("/^Ice.Default.PreferSecure/",!1,null),new t("/^Ice.Default.Protocol/",!1,null),new t("/^Ice.Default.Router.EndpointSelection/",!1,null),new t("/^Ice.Default.Router.ConnectionCached/",!1,null),new t("/^Ice.Default.Router.PreferSecure/",!1,null),new t("/^Ice.Default.Router.LocatorCacheTimeout/",!1,null),new t("/^Ice.Default.Router.InvocationTimeout/",!1,null),new t("/^Ice.Default.Router.Locator/",!1,null),new t("/^Ice.Default.Router.Router/",!1,null),new t("/^Ice.Default.Router.CollocationOptimized/",!1,null),new t("/^Ice.Default.Router.Context../",!1,null),new t("/^Ice.Default.Router/",!1,null),new t("/^Ice.Default.SlicedFormat/",!1,null),new t("/^Ice.Default.SourceAddress/",!1,null),new t("/^Ice.Default.Timeout/",!1,null),new t("/^Ice.EventLog.Source/",!1,null),new t("/^Ice.FactoryAssemblies/",!1,null),new t("/^Ice.HTTPProxyHost/",!1,null),new t("/^Ice.HTTPProxyPort/",!1,null),new t("/^Ice.ImplicitContext/",!1,null),new t("/^Ice.InitPlugins/",!1,null),new t("/^Ice.IPv4/",!1,null),new t("/^Ice.IPv6/",!1,null),new t("/^Ice.LogFile/",!1,null),new t("/^Ice.LogStdErr.Convert/",!1,null),new t("/^Ice.MessageSizeMax/",!1,null),new t("/^Ice.Nohup/",!1,null),new t("/^Ice.NullHandleAbort/",!1,null),new t("/^Ice.Override.CloseTimeout/",!1,null),new t("/^Ice.Override.Compress/",!1,null),new t("/^Ice.Override.ConnectTimeout/",!1,null),new t("/^Ice.Override.Timeout/",!1,null),new t("/^Ice.Override.Secure/",!1,null),new t("/^Ice.Package../",!1,null),new t("/^Ice.Plugin../",!1,null),new t("/^Ice.PluginLoadOrder/",!1,null),new t("/^Ice.PreferIPv6Address/",!1,null),new t("/^Ice.PrintAdapterReady/",!1,null),new t("/^Ice.PrintProcessId/",!1,null),new t("/^Ice.PrintStackTraces/",!1,null),new t("/^Ice.ProgramName/",!1,null),new t("/^Ice.RetryIntervals/",!1,null),new t("/^Ice.ServerIdleTime/",!1,null),new t("/^Ice.SOCKSProxyHost/",!1,null),new t("/^Ice.SOCKSProxyPort/",!1,null),new t("/^Ice.StdErr/",!1,null),new t("/^Ice.StdOut/",!1,null),new t("/^Ice.SyslogFacility/",!1,null),new t("/^Ice.ThreadPool.Client.Size/",!1,null),new t("/^Ice.ThreadPool.Client.SizeMax/",!1,null),new t("/^Ice.ThreadPool.Client.SizeWarn/",!1,null),new t("/^Ice.ThreadPool.Client.StackSize/",!1,null),new t("/^Ice.ThreadPool.Client.Serialize/",!1,null),new t("/^Ice.ThreadPool.Client.ThreadIdleTime/",!1,null),new t("/^Ice.ThreadPool.Client.ThreadPriority/",!1,null),new t("/^Ice.ThreadPool.Server.Size/",!1,null),new t("/^Ice.ThreadPool.Server.SizeMax/",!1,null),new t("/^Ice.ThreadPool.Server.SizeWarn/",!1,null),new t("/^Ice.ThreadPool.Server.StackSize/",!1,null),new t("/^Ice.ThreadPool.Server.Serialize/",!1,null),new t("/^Ice.ThreadPool.Server.ThreadIdleTime/",!1,null),new t("/^Ice.ThreadPool.Server.ThreadPriority/",!1,null),new t("/^Ice.ThreadPriority/",!1,null),new t("/^Ice.Trace.Admin.Properties/",!1,null),new t("/^Ice.Trace.Admin.Logger/",!1,null),new t("/^Ice.Trace.Locator/",!1,null),new t("/^Ice.Trace.Network/",!1,null),new t("/^Ice.Trace.Protocol/",!1,null),new t("/^Ice.Trace.Retry/",!1,null),new t("/^Ice.Trace.Slicing/",!1,null),new t("/^Ice.Trace.ThreadPool/",!1,null),new t("/^Ice.UDP.RcvSize/",!1,null),new t("/^Ice.UDP.SndSize/",!1,null),new t("/^Ice.TCP.Backlog/",!1,null),new t("/^Ice.TCP.RcvSize/",!1,null),new t("/^Ice.TCP.SndSize/",!1,null),new t("/^Ice.UseApplicationClassLoader/",!1,null),new t("/^Ice.UseSyslog/",!1,null),new t("/^Ice.Warn.AMICallback/",!1,null),new t("/^Ice.Warn.Connections/",!1,null),new t("/^Ice.Warn.Datagrams/",!1,null),new t("/^Ice.Warn.Dispatch/",!1,null),new t("/^Ice.Warn.Endpoints/",!1,null),new t("/^Ice.Warn.UnknownProperties/",!1,null),new t("/^Ice.Warn.UnusedProperties/",!1,null),new t("/^Ice.CacheMessageBuffers/",!1,null),new t("/^Ice.ThreadInterruptSafe/",!1,null),new t("/^Ice.Voip/",!1,null)],e.validProps=[e.IceProps],e.clPropNames=["Ice"],Ice.PropertyNames=e}(),f=Ice.HashMap,h=Ice.AlreadyRegisteredException,p=Ice.NotRegisteredException,_=Ice.Class({__init__:function(){this._factoryMap=new f},add:function(e,t){var n;if(void 0!==this._factoryMap.get(t))throw(n=new h).id=t,n.kindOfObject="object factory",n;this._factoryMap.set(t,e)},remove:function(e){var t,n;if(void 0===(t=this._factoryMap.get(e)))throw(n=new p).id=e,n.kindOfObject="object factory",n;this._factoryMap.del(e),t.destroy()},find:function(e){return this._factoryMap.get(e)},destroy:function(){var e=this._factoryMap.entries;for(this._factoryMap=new f;null!==e;)e.value.destroy(),e=e.next}}),Ice.ObjectFactoryManager=_,function(){var e=Ice.Promise,t=Ice.Class(e,{__init__:function(t,n,r,i,o){e.call(this),void 0!==t&&(this._communicator=t,this._instance=null!==t?t.instance:null,this._operation=n,this._connection=r,this._proxy=i,this._adapter=o)}}),n=t.prototype,r=Object.defineProperty;r(n,"communicator",{get:function(){return this._communicator}}),r(n,"connection",{get:function(){return this._connection}}),r(n,"proxy",{get:function(){return this._proxy}}),r(n,"adapter",{get:function(){return this._adapter}}),r(n,"operation",{get:function(){return this._operation}}),Ice.AsyncResultBase=t}(),L.defineDictionary(Ice,"Context","ContextHelper","Ice.StringHelper","Ice.StringHelper",!1,void 0,void 0),Ice.OperationMode=L.defineEnum([["Normal",0],["Nonmutating",1],["Idempotent",2]]),Ice.Current=L.defineStruct((function(e,t,n,r,i,o,a,c,s){this.adapter=void 0!==e?e:null,this.con=void 0!==t?t:null,this.id=void 0!==n?n:new Ice.Identity,this.facet=void 0!==r?r:"",this.operation=void 0!==i?i:"",this.mode=void 0!==o?o:Ice.OperationMode.Normal,this.ctx=void 0!==a?a:null,this.requestId=void 0!==c?c:0,this.encoding=void 0!==s?s:new Ice.EncodingVersion}),!1),Ice.ObjectFactory=Ice.Class({create:function(e){throw new Error("not implemented")},destroy:function(){throw new Error("not implemented")}}),g=Ice.Class(Error,{__init__:function(e){e instanceof Ice.LocalException?this._ex=e:(Ice.Debug.assert(e instanceof g),this._ex=e._ex)}}),C=g.prototype,Object.defineProperty(C,"inner",{get:function(){return this._ex}}),Ice.RetryException=g,Ice.EndpointSelectionType=L.defineEnum([["Random",0],["Ordered",1]]),function(){Ice.Promise;var e=Ice.ReferenceMode,t=Ice.Class({__init__:function(t,n,r){this._reference=t,this._response=t.getMode()==e.ModeTwoway,this._connection=n,this._compress=r},update:function(e,t){try{if(e===this)return t;if(e.getConnection()===this._connection)return t}catch(e){}return this},sendAsyncRequest:function(e){return e.__invokeRemote(this._connection,this._compress,this._response)},asyncRequestCanceled:function(e){return this._connection.asyncRequestCanceled(e)},getReference:function(){return this._reference},getConnection:function(){return this._connection}});Ice.ConnectionRequestHandler=t}(),function(){var e=Ice.Debug,t=Ice.HashMap,n=Ice.Protocol,r=Ice.StringUtil,i=Ice.OperationMode,o=Ice.Identity,a={traceSend:function(e,t,n){if(n.protocol>=1){var r=e.pos;e.pos=0;var i=[],o=l(i,e);t.trace(n.protocolCat,"sending "+u(o)+" "+i.join("")),e.pos=r}},traceRecv:function(e,t,n){if(n.protocol>=1){var r=e.pos;e.pos=0;var i=[],o=l(i,e);t.trace(n.protocolCat,"received "+u(o)+" "+i.join("")),e.pos=r}},trace:function(e,t,n,r){if(r.protocol>=1){var i=t.pos;t.pos=0;var o=[];o.push(e),l(o,t),n.trace(r.protocolCat,o.join("")),t.pos=i}}};new t;function c(e,t){var n=new o;n.__read(t),e.push("\nidentity = "+t.instance.identityToString(n));var i=Ice.StringSeqHelper.read(t);e.push("\nfacet = "),i.length>0&&e.push(r.escapeString(i[0],""));var a=t.readString();e.push("\noperation = "+a)}function s(e,t){c(e,t);var n=t.readByte();switch(e.push("\nmode = "+n+" "),i.valueOf(n)){case i.Normal:e.push("(normal)");break;case i.Nonmutating:e.push("(nonmutating)");break;case i.Idempotent:e.push("(idempotent)");break;default:e.push("(unknown)")}var r=t.readSize();for(e.push("\ncontext = ");r-- >0;){var o=t.readString(),a=t.readString();e.push(o+"/"+a),r>0&&e.push(", ")}var s=t.skipEncaps();s.equals(Ice.Encoding_1_0)||(e.push("\nencoding = "),e.push(Ice.encodingVersionToString(s)))}function l(t,r){var i=function(e,t){t.readByte(),t.readByte(),t.readByte(),t.readByte(),t.readByte(),t.readByte(),t.readByte(),t.readByte();var n=t.readByte();e.push("\nmessage type = "+n+" ("+u(n)+")");var r=t.readByte();switch(e.push("\ncompression status = "+r+" "),r){case 0:e.push("(not compressed; do not compress response, if any)");break;case 1:e.push("(not compressed; compress response, if any)");break;case 2:e.push("(compressed; compress response, if any)");break;default:e.push("(unknown)")}var i=t.readInt();return e.push("\nmessage size = "+i),n}(t,r);switch(i){case n.closeConnectionMsg:case n.validateConnectionMsg:break;case n.requestMsg:!function(e,t){var n=t.readInt();e.push("\nrequest id = "+n),0===n&&e.push(" (oneway)"),s(e,t)}(t,r);break;case n.requestBatchMsg:!function(e,t){var n=t.readInt();e.push("\nnumber of requests = "+n);for(var r=0;r<n;++r)e.push("\nrequest #"+r+":"),s(e,t)}(t,r);break;case n.replyMsg:!function(t,r){var i=r.readInt();t.push("\nrequest id = "+i);var o=r.readByte();switch(t.push("\nreply status = "+o+" "),o){case n.replyOK:t.push("(ok)");break;case n.replyUserException:t.push("(user exception)");break;case n.replyObjectNotExist:case n.replyFacetNotExist:case n.replyOperationNotExist:switch(o){case n.replyObjectNotExist:t.push("(object not exist)");break;case n.replyFacetNotExist:t.push("(facet not exist)");break;case n.replyOperationNotExist:t.push("(operation not exist)");break;default:e.assert(!1)}c(t,r);break;case n.replyUnknownException:case n.replyUnknownLocalException:case n.replyUnknownUserException:switch(o){case n.replyUnknownException:t.push("(unknown exception)");break;case n.replyUnknownLocalException:t.push("(unknown local exception)");break;case n.replyUnknownUserException:t.push("(unknown user exception)");break;default:e.assert(!1)}var a=r.readString();t.push("\nunknown = "+a);break;default:t.push("(unknown)")}if(o===n.replyOK||o===n.replyUserException){var s=r.skipEncaps();s.equals(Ice.Encoding_1_0)||(t.push("\nencoding = "),t.push(Ice.encodingVersionToString(s)))}}(t,r)}return i}function u(e){switch(e){case n.requestMsg:return"request";case n.requestBatchMsg:return"batch request";case n.replyMsg:return"reply";case n.closeConnectionMsg:return"close connection";case n.validateConnectionMsg:return"validate connection";default:return"unknown"}}a.dumpStream=function(e){var t=e.pos;e.pos=0;var n=e.readBlob(e.size());a.dumpOctets(n),e.pos=t},a.dumpOctets=function(e){for(var t=[],n=0;n<e.length;n+=8){var r;for(r=n;r-n<8;r++)if(r<e.length){var i,o=e[r];o<0&&(o+=256),i=o<10?"  "+o:o<100?" "+o:""+o,t.push(i+" ")}else t.push("    ");for(t.push('"'),r=n;r<e.length&&r-n<8;r++)e[r]>=32&&e[r]<127?t.push(String.fromCharCode(e[r])):t.push(".");t.push('"\n')}console.crlog&&console.crlog(t.join(""))},Ice.TraceUtil=a}(),function(){var e=Ice.Logger,t=null;Ice.getProcessLogger=function(){return null===t&&(t=new e("","")),t},Ice.setProcessLogger=function(e){t=e}}(),v=Ice.UnexpectedObjectException,m=Ice.MemoryLimitException,Ice.ExUtil={throwUOE:function(e,t){var n=t.ice_id();throw new v("expected element of type `"+e+"' but received '"+n,n,e)},throwMemoryLimitException:function(e,t){throw new m("requested "+e+" bytes, maximum allowed is "+t+" bytes (see Ice.MessageSizeMax)")}},function(){var e=Ice.StringUtil,t=Ice.HashMap,n=(Ice.Promise,Ice.PropertyNames),r=Ice.Debug,i=(Ice.ProcessLogger,Ice.getProcessLogger),o=Ice.InitializationException,a=Ice.Class({__init__:function(e,n){if(this._properties=new t,null!=n)for(var r=n._properties.entries;null!==r;r=r.next)this._properties.set(r.key,{value:r.value.value,used:!1});if(null!=e){var i=this.parseIceCommandLineOptions(e);e.length=0;for(var o=0;o<i.length;++o)e.push(i[o])}},getProperty:function(e){return this.getPropertyWithDefault(e,"")},getPropertyWithDefault:function(e,t){var n=this._properties.get(e);return void 0!==n?(n.used=!0,n.value):t},getPropertyAsInt:function(e){return this.getPropertyAsIntWithDefault(e,0)},getPropertyAsIntWithDefault:function(e,t){var n=this._properties.get(e);return void 0!==n?(n.used=!0,parseInt(n.value)):t},getPropertyAsList:function(e){return this.getPropertyAsListWithDefault(e,0)},getPropertyAsListWithDefault:function(t,n){null==n&&(n=[]);var r=this._properties.get(t);if(void 0!==r){r.used=!0;var o=e.splitString(r.value,", \t\r\n");return null===o?(i().warning("mismatched quotes in property "+t+"'s value, returning default value"),n):(0===o.length&&(o=n),o)}return n},getPropertiesForPrefix:function(e){for(var n=new t,r=this._properties.entries;null!==r;r=r.next)null!=e&&0!==r.key.indexOf(e)||(r.value.used=!0,n.set(r.key,r.value.value));return n},setProperty:function(e,t){null!=e&&(e=e.trim());var a=i();if(null==e||0===e.length)throw new o("Attempt to set property with empty key");var c=e.indexOf(".");if(-1!==c)for(var s=e.substr(0,c),l=0;l<n.validProps.length;++l){var u=n.validProps[l][0].pattern;if(c=u.indexOf("."),r.assert(-1!=c),u.substring(0,c-1)==s){for(var d,f=!1,h=!1,p=0;p<n.validProps[l][p].length&&!f;++p){u=n.validProps[l][p].pattern();var _=new RegExp(u);if((f=_.test(e))&&n.validProps[l][p].deprecated&&(a.warning("deprecated property: "+e),null!==n.validProps[l][p].deprecatedBy&&(e=n.validProps[l][p].deprecatedBy)),f)break;if(f=(_=new RegExp(u.toUpperCase())).test(e.toUpperCase())){h=!0,d=(d=(d=u.substr(2)).substr(0,d.length-1)).replace(/\\/g,"");break}}f?h&&a.warning("unknown property: `"+e+"'; did you mean `"+d+"'"):a.warning("unknown property: "+e)}}if(null!=t&&t.length>0){var g=this._properties.get(e);void 0!==g?g.value=t:this._properties.set(e,{value:t,used:!1})}else this._properties.del(e)},getCommandLineOptions:function(){for(var e=[],t=this._properties.entries;null!==t;t=t.next)e.push("--"+t.key+"="+t.pv.value);return e},parseCommandLineOptions:function(e,t){e.length>0&&"."!=e.charAt(e.length-1)&&(e+="."),e="--"+e;var n=[],r=this;return t.forEach((function(t){0===t.indexOf(e)?(-1===t.indexOf("=")&&(t+="=1"),r.parseLine(t.substring(2))):n.push(t)})),n},parseIceCommandLineOptions:function(e){for(var t=e.slice(),r=0;r<n.clPropNames.length;++r)t=this.parseCommandLineOptions(n.clPropNames[r],t);return t},parse:function(e){for(var t,n=e.match(/[^\r\n]+/g);t=n.shift();)this.parseLine(t)},parseLine:function(e){for(var t="",n="",r=0,o="",a="",c=!1,s=0;s<e.length;++s){var l=e.charAt(s);switch(r){case 0:switch(l){case"\\":if(s<e.length-1)switch(l=e.charAt(++s)){case"\\":case"#":case"=":t+=o,o="",t+=l;break;case" ":0!==t.length&&(o+=l);break;default:t+=o,o="",t+="\\",t+=l}else t+=o,t+=l;break;case" ":case"\t":case"\r":case"\n":0!==t.length&&(o+=l);break;case"=":o="",r=1;break;case"#":c=!0;break;default:t+=o,o="",t+=l}break;case 1:switch(l){case"\\":if(s<e.length-1)switch(l=e.charAt(++s)){case"\\":case"#":case"=":n+=0===n.length?a:o,o="",a="",n+=l;break;case" ":o+=l,a+=l;break;default:n+=0===n.length?a:o,o="",a="",n+="\\",n+=l}else n+=0===n.length?a:o,n+=l;break;case" ":case"\t":case"\r":case"\n":0!==n.length&&(o+=l);break;case"#":c=!0;break;default:n+=0===n.length?a:o,o="",a="",n+=l}}if(c)break}n+=a,0===r&&0!==t.length||1==r&&0===t.length?i().warning('invalid config file entry: "'+e+'"'):0!==t.length&&this.setProperty(t,n)},clone:function(){return new a(null,this)},getUnusedProperties:function(){for(var e=[],t=this._properties.entries;null!==t;t=t.next)t.pv.used||e.push(t.key);return e}});a.createProperties=function(e,t){return new a(e,t)},Ice.Properties=a}(),function(){var e=Ice.Debug,t=Ice.HashMap,n=Ice.StringUtil,r=Ice.Class({__init__:function(e,n){this._instance=e,this._adapterName=n,this._servantMapMap=new t(t.compareEquals),this._defaultServantMap=new t,this._locatorMap=new t},addServant:function(r,i,o){e.assert(null!==this._instance),null===o&&(o="");var a=this._servantMapMap.get(i);if(void 0===a)a=new t,this._servantMapMap.set(i,a);else if(a.has(o)){var c=new Ice.AlreadyRegisteredException;throw c.id=this._instance.identityToString(i),c.kindOfObject="servant",o.length>0&&(c.id+=" -f "+n.escapeString(o,"")),c}a.set(o,r)},addDefaultServant:function(t,n){if(e.assert(null!==this._instance),void 0!==this._defaultServantMap.get(n)){var r=new Ice.AlreadyRegisteredException;throw r.kindOfObject="default servant",r.id=n,r}this._defaultServantMap.set(n,t)},removeServant:function(t,r){e.assert(null!==this._instance),null===r&&(r="");var i=this._servantMapMap.get(t);if(void 0===i||!i.has(r)){var o=new Ice.NotRegisteredException;throw o.id=this._instance.identityToString(t),o.kindOfObject="servant",r.length>0&&(o.id+=" -f "+n.escapeString(r,"")),o}var a=i.get(r);return i.del(r),0===i.size&&this._servantMapMap.del(t),a},removeDefaultServant:function(t){e.assert(null!==this._instance);var n=this._defaultServantMap.get(t);if(void 0===n){var r=new Ice.NotRegisteredException;throw r.kindOfObject="default servant",r.id=t,r}return this._defaultServantMap.del(t),n},removeAllFacets:function(t){e.assert(null!==this._instance);var n=this._servantMapMap.get(t);if(void 0===n){var r=new Ice.NotRegisteredException;throw r.id=this._instance.identityToString(t),r.kindOfObject="servant",r}return this._servantMapMap.del(t),n},findServant:function(e,t){null===t&&(t="");var n=this._servantMapMap.get(e),r=null;return void 0===n?void 0===(r=this._defaultServantMap.get(e.category))&&(r=this._defaultServantMap.get("")):r=n.get(t),void 0===r?null:r},findDefaultServant:function(t){e.assert(null!==this._instance);var n=this._defaultServantMap.get(t);return void 0===n?null:n},findAllFacets:function(n){e.assert(null!==this._instance);var r=this._servantMapMap.get(n);return void 0!==r?r.clone():new t},hasServant:function(t){var n=this._servantMapMap.get(t);return void 0!==n&&(e.assert(n.size>0),!0)},addServantLocator:function(t,r){if(e.assert(null!==this._instance),void 0!==this._locatorMap.get(r)){var i=new Ice.AlreadyRegisteredException;throw i.id=n.escapeString(r,""),i.kindOfObject="servant locator",i}this._locatorMap.set(r,t)},removeServantLocator:function(t){e.assert(null!==this._instance);var r=this._locatorMap.get(t);if(void 0===r){var i=new Ice.NotRegisteredException;throw i.id=n.escapeString(t,""),i.kindOfObject="servant locator",i}return this._locatorMap.del(t),r},findServantLocator:function(e){var t=this._locatorMap.get(e);return void 0===t?null:t},destroy:function(){e.assert(null!==this._instance);var t=this._instance.initializationData().logger;this._servantMapMap.clear(),this._defaultServantMap.clear();var n=this._locatorMap.clone();this._locatorMap.clear(),this._instance=null;for(var r=n.entries;null!==r;r=r.next){var i=r.value;try{i.deactivate(r.key)}catch(e){var o="exception during locator deactivation:\nobject adapter: `"+this._adapterName+"'\nlocator category: `"+r.key+"'\n"+e.toString();t.error(o)}}}});Ice.ServantManager=r}(),function(){var e=Ice.__M,t=Ice.Debug,n=Ice.ExUtil,r=Ice.FormatType,i=Ice.HashMap,o=Ice.Object,a=Ice.OptionalFormat,c=Ice.Protocol,s=Ice.TraceUtil,l=Ice.ArrayUtil,u=Ice.SlicedData,d={NoSlice:0,ObjectSlice:1,ExceptionSlice:2};Number.isNaN=Number.isNaN||function(e){return"number"==typeof e&&isNaN(e)};var f=function(e,t){this.index=e,this.patcher=t},h=Ice.Class,p=h({__init__:function(e,t,n,r){this._stream=e,this._encaps=t,this._sliceObjects=n,this._servantFactoryManager=r,this._patchMap=null,this._unmarshaledMap=new i,this._typeIdMap=null,this._typeIdIndex=0,this._objectList=null},readOpt:function(){return!1},readPendingObjects:function(){},readTypeId:function(e){var t,n;if(null===this._typeIdMap&&(this._typeIdMap=new i),e){if(n=this._stream.readSize(),void 0===(t=this._typeIdMap.get(n)))throw new Ice.UnmarshalOutOfBoundsException}else t=this._stream.readString(),this._typeIdMap.set(++this._typeIdIndex,t);return t},newInstance:function(e){var t=this._servantFactoryManager.find(e),n=null;return void 0!==t&&(n=t.create(e)),null==n&&void 0!==(t=this._servantFactoryManager.find(""))&&(n=t.create(e)),null==n&&(n=this._stream.createObject(e)),n},addPatchEntry:function(e,n){t.assert(e>0);var r=this._unmarshaledMap.get(e);if(null==r){null===this._patchMap&&(this._patchMap=new i);var o=this._patchMap.get(e);void 0===o&&(o=[],this._patchMap.set(e,o)),o.push(n)}else n.call(null,r)},unmarshal:function(e,n){var r,i,o;if(this._unmarshaledMap.set(e,n),n.__read(this._stream),null!==this._patchMap&&void 0!==(o=this._patchMap.get(e))){for(t.assert(o.length>0),r=0,i=o.length;r<i;++r)o[r](n);this._patchMap.del(e)}if(null!==this._patchMap&&0!==this._patchMap.size||null!==this._objectList){if(null===this._objectList&&(this._objectList=[]),this._objectList.push(n),null===this._patchMap||0===this._patchMap.size){for(r=0,i=this._objectList.length;r<i;r++)try{this._objectList[r].ice_postUnmarshal()}catch(e){this._stream.instance.initializationData().logger.warning("exception raised by ice_postUnmarshal:\n"+e.toString())}this._objectList=[]}}else try{n.ice_postUnmarshal()}catch(e){this._stream.instance.initializationData().logger.warning("exception raised by ice_postUnmarshal:\n"+e.toString())}}}),_=h(p,{__init__:function(e,t,n,r){p.call(this,e,t,n,r),this._sliceType=d.NoSlice},readObject:function(e){t.assert(null!==e);var n=this._stream.readInt();if(n>0)throw new Ice.MarshalException("invalid object id");0===(n=-n)?e.call(null,null):this.addPatchEntry(n,e)},throwException:function(){t.assert(this._sliceType===d.NoSlice);var e=this._stream.readBool();this._sliceType=d.ExceptionSlice,this._skipFirstSlice=!1,this.startSlice();for(var n=this._typeId;;){var r=this._stream.createUserException(this._typeId);if(null!==r)throw r.__read(this._stream),e&&this.readPendingObjects(),r;this.skipSlice();try{this.startSlice()}catch(e){throw e instanceof Ice.UnmarshalOutOfBoundsException&&(e.reason="unknown exception type `"+n+"'"),e}}},startInstance:function(e){t.assert(this._sliceType===e),this._skipFirstSlice=!0},endInstance:function(){if(this._sliceType===d.ObjectSlice){if(this.startSlice(),0!==this._stream.readSize())throw new Ice.MarshalException("invalid Object slice");this.endSlice()}return this._sliceType=d.NoSlice,null},startSlice:function(){var e;if(this._skipFirstSlice)return this._skipFirstSlice=!1,this._typeId;if(this._sliceType===d.ObjectSlice?(e=this._stream.readBool(),this._typeId=this.readTypeId(e)):this._typeId=this._stream.readString(),this._sliceSize=this._stream.readInt(),this._sliceSize<4)throw new Ice.UnmarshalOutOfBoundsException;return this._typeId},endSlice:function(){},skipSlice:function(){if(this._stream.instance.traceLevels().slicing>0){var e=this._stream.instance.initializationData().logger;this._sliceType===d.ObjectSlice?s.traceSlicing("object",this._typeId,this._stream.instance.traceLevels().slicingCat,e):s.traceSlicing("exception",this._typeId,this._stream.instance.traceLevels().slicingCat,e)}t.assert(this._sliceSize>=4),this._stream.skip(this._sliceSize-4)},readPendingObjects:function(){var e,t;do{for(e=t=this._stream.readSize();e>0;--e)this.readInstance()}while(t>0);if(null!==this._patchMap&&0!==this._patchMap.size)throw new Ice.MarshalException("index for class received, but no instance")},readInstance:function(){var e,t=this._stream.readInt(),n=null;if(t<=0)throw new Ice.MarshalException("invalid object id");for(this._sliceType=d.ObjectSlice,this._skipFirstSlice=!1,this.startSlice(),e=this._typeId;;){if(this._typeId==o.ice_staticId())throw new Ice.NoObjectFactoryException("",e);if(n=this.newInstance(this._typeId))break;if(!this._sliceObjects)throw new Ice.NoObjectFactoryException("no object factory found and object slicing is disabled",this._typeId);this.skipSlice(),this.startSlice()}this.unmarshal(t,n)}}),g=h(p,{__init__:function(e,t,n,r){p.call(this,e,t,n,r),this._current=null,this._objectIdIndex=1},readObject:function(e){t.assert(void 0!==e);var n=this._stream.readSize();if(n<0)throw new Ice.MarshalException("invalid object id");if(0===n)null!==e&&e.call(null,null);else if(null!==this._current&&0!=(8&this._current.sliceFlags)){if(null!==e){null===this._current.indirectPatchList&&(this._current.indirectPatchList=[]);var r=new f;r.index=n-1,r.patcher=e,this._current.indirectPatchList.push(r)}}else this.readInstance(n,e)},throwException:function(){t.assert(null===this._current),this.push(d.ExceptionSlice),this.startSlice();for(var e=this._current.typeId;;){var n=this._stream.createUserException(this._current.typeId);if(null!==n)throw n.__read(this._stream),n;if(this.skipSlice(),0!=(32&this._current.sliceFlags)){if(0===e.indexOf("::"))throw new Ice.UnknownUserException(e.substr(2));throw new Ice.UnknownUserException(e)}this.startSlice()}},startInstance:function(e){t.assert(void 0!==e),t.assert(null!==this._current.sliceType&&this._current.sliceType===e),this._current.skipFirstSlice=!0},endInstance:function(e){var t=null;return e&&(t=this.readSlicedData()),null!==this._current.slices&&(this._current.slices.length=0,this._current.indirectionTables.length=0),this._current=this._current.previous,t},startSlice:function(){if(this._current.skipFirstSlice)return this._current.skipFirstSlice=!1,this._current.typeId;if(this._current.sliceFlags=this._stream.readByte(),this._current.sliceType===d.ObjectSlice?3==(3&this._current.sliceFlags)?(this._current.typeId="",this._current.compactId=this._stream.readSize()):0!=(3&this._current.sliceFlags)?(this._current.typeId=this.readTypeId(0!=(2&this._current.sliceFlags)),this._current.compactId=-1):(this._current.typeId="",this._current.compactId=-1):(this._current.typeId=this._stream.readString(),this._current.compactId=-1),0!=(16&this._current.sliceFlags)){if(this._current.sliceSize=this._stream.readInt(),this._current.sliceSize<4)throw new Ice.UnmarshalOutOfBoundsException}else this._current.sliceSize=0;return this._current.typeId},endSlice:function(){var e,n,r,i=[];if(0!=(4&this._current.sliceFlags)&&this._stream.skipOpts(),0!=(8&this._current.sliceFlags)){for(r=this._stream.readAndCheckSeqSize(1),n=0;n<r;++n)i[n]=this.readInstance(this._stream.readSize(),null);if(0===i.length)throw new Ice.MarshalException("empty indirection table");if((null===this._current.indirectPatchList||0===this._current.indirectPatchList.length)&&0==(4&this._current.sliceFlags))throw new Ice.MarshalException("no references to indirection table");if(null!==this._current.indirectPatchList){for(n=0,r=this._current.indirectPatchList.length;n<r;++n){if(e=this._current.indirectPatchList[n],t.assert(e.index>=0),e.index>=i.length)throw new Ice.MarshalException("indirection out of range");this.addPatchEntry(i[e.index],e.patcher)}this._current.indirectPatchList.length=0}}},skipSlice:function(){if(this._stream.instance.traceLevels().slicing>0){var e=this._stream.instance.initializationData().logger,n=this._stream.instance.traceLevels().slicingCat;this._current.sliceType===d.ExceptionSlice?s.traceSlicing("exception",this._current.typeId,n,e):s.traceSlicing("object",this._current.typeId,n,e)}var r=this._stream.pos;if(0==(16&this._current.sliceFlags)){if(this._current.sliceType===d.ObjectSlice)throw new Ice.NoObjectFactoryException("no object factory found and compact format prevents slicing (the sender should use the sliced format instead)",this._current.typeId);if(0===this._current.typeId.indexOf("::"))throw new Ice.UnknownUserException(this._current.typeId.substring(2));throw new Ice.UnknownUserException(this._current.typeId)}t.assert(this._current.sliceSize>=4),this._stream.skip(this._current.sliceSize-4);var i=new Ice.SliceInfo;i.typeId=this._current.typeId,i.compactId=this._current.compactId,i.hasOptionalMembers=0!=(4&this._current.sliceFlags),i.isLastSlice=0!=(32&this._current.sliceFlags);var o=this._stream._buf,a=o.position,c=a;if(i.hasOptionalMembers&&--c,o.position=r,i.bytes=o.getArray(c-r),o.position=a,null===this._current.slices&&(this._current.slices=[],this._current.indirectionTables=[]),0!=(8&this._current.sliceFlags)){for(var l=this._stream.readAndCheckSeqSize(1),u=[],f=0;f<l;++f)u[f]=this.readInstance(this._stream.readSize(),null);this._current.indirectionTables.push(u)}else this._current.indirectionTables.push(null);this._current.slices.push(i)},readOpt:function(e,t){return(null===this._current||0!=(4&this._current.sliceFlags))&&this._stream.readOptImpl(e,t)},readInstance:function(e,n){t.assert(e>0);var r,i=null;if(e>1)return null!==n&&this.addPatchEntry(e,n),e;for(this.push(d.ObjectSlice),e=++this._objectIdIndex,this.startSlice(),r=this._current.typeId;this._current.compactId>=0&&(this._current.typeId="",0===this._current.typeId.length&&(this._current.typeId=this._stream.getTypeId(this._current.compactId))),!(this._current.typeId.length>0&&null!=(i=this.newInstance(this._current.typeId)));){if(!this._sliceObjects)throw new Ice.NoObjectFactoryException("no object factory found and object slicing is disabled",this._current.typeId);if(this.skipSlice(),0!=(32&this._current.sliceFlags)){i=new Ice.UnknownSlicedObject(r);break}this.startSlice()}if(this.unmarshal(e,i),null===this._current&&null!==this._patchMap&&0!==this._patchMap.size)throw new Ice.MarshalException("index for class received, but no instance");return null!==n&&n.call(null,i),e},readSlicedData:function(){var e,n,r,i,a,c;if(null===this._current.slices)return null;for(t.assert(this._current.slices.length===this._current.indirectionTables.length),e=0,n=this._current.slices.length;e<n;++e)for(r=this._current.indirectionTables[e],(i=this._current.slices[e]).objects=[],c=r?r.length:0,a=0;a<c;++a)this.addPatchEntry(r[a],C(i.objects,a,o));return new u(l.clone(this._current.slices))},push:function(e){null===this._current?this._current=new g.InstanceData(null):this._current=this._current.next?this._current.next:new g.InstanceData(this._current),this._current.sliceType=e,this._current.skipFirstSlice=!1}});g.InstanceData=function(e){null!==e&&(e.next=this),this.previous=e,this.next=null,this.sliceType=null,this.skipFirstSlice=!1,this.slices=null,this.indirectionTables=null,this.sliceFlags=0,this.sliceSize=0,this.typeId=null,this.compactId=0,this.indirectPatchList=null};var C=function(e,t,r){return function(i){null===i||i instanceof r||n.throwUOE(r.ice_staticId(),i),e[t]=i}},v=h({__init__:function(e,t){this._stream=e,this._encaps=t,this._marshaledMap=new i,this._typeIdMap=null,this._typeIdIndex=0},writeOpt:function(){return!1},writePendingObjects:function(){},registerTypeId:function(e){null===this._typeIdMap&&(this._typeIdMap=new i);var t=this._typeIdMap.get(e);return void 0!==t?t:(this._typeIdMap.set(e,++this._typeIdIndex),-1)}}),m=h(v,{__init__:function(e,t){v.call(this,e,t),this._sliceType=d.NoSlice,this._writeSlice=0,this._objectIdIndex=0,this._toBeMarshaledMap=new i},writeObject:function(e){t.assert(void 0!==e),null!==e?this._stream.writeInt(-this.registerObject(e)):this._stream.writeInt(0)},writeUserException:function(e){t.assert(null!=e);var n=e.__usesClasses();this._stream.writeBool(n),e.__write(this._stream),n&&this.writePendingObjects()},startInstance:function(e){this._sliceType=e},endInstance:function(){this._sliceType===d.ObjectSlice&&(this.startSlice(o.ice_staticId(),-1,!0),this._stream.writeSize(0),this.endSlice()),this._sliceType=d.NoSlice},startSlice:function(e){if(this._sliceType===d.ObjectSlice){var t=this.registerTypeId(e);t<0?(this._stream.writeBool(!1),this._stream.writeString(e)):(this._stream.writeBool(!0),this._stream.writeSize(t))}else this._stream.writeString(e);this._stream.writeInt(0),this._writeSlice=this._stream.pos},endSlice:function(){var e=this._stream.pos-this._writeSlice+4;this._stream.rewriteInt(e,this._writeSlice-4)},writePendingObjects:function(){for(var e,t=this,n=function(e,n){t._stream.writeInt(n);try{e.ice_preMarshal()}catch(e){t._stream.instance.initializationData().logger.warning("exception raised by ice_preMarshal:\n"+e.toString())}e.__write(t._stream)};this._toBeMarshaledMap.size>0;)this._marshaledMap.merge(this._toBeMarshaledMap),e=this._toBeMarshaledMap,this._toBeMarshaledMap=new i,this._stream.writeSize(e.size),e.forEach(n);this._stream.writeSize(0)},registerObject:function(e){t.assert(null!==e);var n=this._toBeMarshaledMap.get(e);return void 0!==n||void 0!==(n=this._marshaledMap.get(e))?n:(this._toBeMarshaledMap.set(e,++this._objectIdIndex),this._objectIdIndex)}}),y=h(v,{__init__:function(e,t){v.call(this,e,t),this._current=null,this._objectIdIndex=1},writeObject:function(e){var n,o;t.assert(void 0!==e),null===e?this._stream.writeSize(0):null!==this._current&&this._encaps.format===r.SlicedFormat?(null===this._current.indirectionTable&&(this._current.indirectionTable=[],this._current.indirectionMap=new i),void 0===(n=this._current.indirectionMap.get(e))?(this._current.indirectionTable.push(e),o=this._current.indirectionTable.length,this._current.indirectionMap.set(e,o),this._stream.writeSize(o)):this._stream.writeSize(n)):this.writeInstance(e)},writePendingObjects:function(){},writeUserException:function(e){t.assert(null!=e),e.__write(this._stream)},startInstance:function(e,t){null===this._current?this._current=new y.InstanceData(null):this._current=null===this._current.next?new y.InstanceData(this._current):this._current.next,this._current.sliceType=e,this._current.firstSlice=!0,null!=t&&this.writeSlicedData(t)},endInstance:function(){this._current=this._current.previous},startSlice:function(e,n,i){if(t.assert(!(null!==this._current.indirectionTable&&0!==this._current.indirectionTable.length||null!==this._current.indirectionMap&&0!==this._current.indirectionMap.size)),this._current.sliceFlagsPos=this._stream.pos,this._current.sliceFlags=0,this._encaps.format===r.SlicedFormat&&(this._current.sliceFlags|=16),i&&(this._current.sliceFlags|=32),this._stream.writeByte(0),this._current.sliceType===d.ObjectSlice){if(this._encaps.format===r.SlicedFormat||this._current.firstSlice)if(n>=0)this._current.sliceFlags|=3,this._stream.writeSize(n);else{var o=this.registerTypeId(e);o<0?(this._current.sliceFlags|=1,this._stream.writeString(e)):(this._current.sliceFlags|=2,this._stream.writeSize(o))}}else this._stream.writeString(e);0!=(16&this._current.sliceFlags)&&this._stream.writeInt(0),this._current.writeSlice=this._stream.pos,this._current.firstSlice=!1},endSlice:function(){var e,n,i;if(0!=(4&this._current.sliceFlags)&&this._stream.writeByte(255),0!=(16&this._current.sliceFlags)&&(e=this._stream.pos-this._current.writeSlice+4,this._stream.rewriteInt(e,this._current.writeSlice-4)),null!==this._current.indirectionTable&&0!==this._current.indirectionTable.length){for(t.assert(this._encaps.format===r.SlicedFormat),this._current.sliceFlags|=8,this._stream.writeSize(this._current.indirectionTable.length),n=0,i=this._current.indirectionTable.length;n<i;++n)this.writeInstance(this._current.indirectionTable[n]);this._current.indirectionTable.length=0,this._current.indirectionMap.clear()}this._stream.rewriteByte(this._current.sliceFlags,this._current.sliceFlagsPos)},writeOpt:function(e,t){return null===this._current?this._stream.writeOptImpl(e,t):!!this._stream.writeOptImpl(e,t)&&(this._current.sliceFlags|=4,!0)},writeSlicedData:function(e){var n,o,a,c,s;if(t.assert(null!=e),this._encaps.format===r.SlicedFormat)for(n=0,o=e.slices.length;n<o;++n){if(a=e.slices[n],this.startSlice(a.typeId,a.compactId,a.isLastSlice),this._stream.writeBlob(a.bytes),a.hasOptionalMembers&&(this._current.sliceFlags|=4),null!==a.objects&&a.objects.length>0)for(null===this._current.indirectionTable&&(this._current.indirectionTable=[],this._current.indirectionMap=new i),c=0,s=a.objects.length;c<s;++c)this._current.indirectionTable.push(a.objects[c]);this.endSlice()}},writeInstance:function(e){t.assert(null!=e);var n=this._marshaledMap.get(e);if(void 0===n){this._marshaledMap.set(e,++this._objectIdIndex);try{e.ice_preMarshal()}catch(e){this._stream.instance.initializationData().logger.warning("exception raised by ice_preMarshal:\n"+e.toString())}this._stream.writeSize(1),e.__write(this._stream)}else this._stream.writeSize(n)}});y.InstanceData=function(e){t.assert(void 0!==e),null!==e&&(e.next=this),this.previous=e,this.next=null,this.sliceType=null,this.firstSlice=!1,this.sliceFlags=0,this.writeSlice=0,this.sliceFlagsPos=0,this.indirectionTable=null,this.indirectionMap=null};var S=h({__init__:function(){this.start=0,this.sz=0,this.encoding=null,this.encoding_1_0=!1,this.decoder=null,this.next=null},reset:function(){this.decoder=null},setEncoding:function(e){this.encoding=e,this.encoding_1_0=e.equals(Ice.Encoding_1_0)}}),I=h({__init__:function(){this.start=0,this.format=r.DefaultFormat,this.encoding=null,this.encoding_1_0=!1,this.encoder=null,this.next=null},reset:function(){this.encoder=null},setEncoding:function(e){this.encoding=e,this.encoding_1_0=e.equals(Ice.Encoding_1_0)}}),R=h({__init__:function(e,t,n){this._instance=e,this._closure=null,this._encoding=t,this._readEncapsStack=null,this._writeEncapsStack=null,this._readEncapsCache=null,this._writeEncapsCache=null,this._sliceObjects=!0,this._startSeq=-1,this._sizePos=-1,this._buf=void 0!==n?new Ice.Buffer(n):new Ice.Buffer},reset:function(){this._buf.reset(),this.clear()},clear:function(){null!==this._readEncapsStack&&(t.assert(this._readEncapsStack.next),this._readEncapsStack.next=this._readEncapsCache,this._readEncapsCache=this._readEncapsStack,this._readEncapsCache.reset(),this._readEncapsStack=null),null!==this._writeEncapsStack&&(t.assert(this._writeEncapsStack.next),this._writeEncapsStack.next=this._writeEncapsCache,this._writeEncapsCache=this._writeEncapsStack,this._writeEncapsCache.reset(),this._writeEncapsStack=null),this._startSeq=-1,this._sliceObjects=!0},swap:function(e){var n,r,i,o,a;t.assert(this._instance===e._instance),n=e._buf,e._buf=this._buf,this._buf=n,r=e._closure,e._closure=this._closure,this._closure=r,this.resetEncaps(),e.resetEncaps(),i=e._startSeq,e._startSeq=this._startSeq,this._startSeq=i,o=e._minSeqSize,e._minSeqSize=this._minSeqSize,this._minSeqSize=o,a=e._sizePos,e._sizePos=this._sizePos,this._sizePos=a},resetEncaps:function(){this._readEncapsStack=null,this._writeEncapsStack=null},resize:function(e){this._buf.resize(e),this._buf.position=e},prepareWrite:function(){return this._buf.position=0,this._buf},startWriteObject:function(e){t.assert(null!==this._writeEncapsStack&&null!==this._writeEncapsStack.encoder),this._writeEncapsStack.encoder.startInstance(d.ObjectSlice,e)},endWriteObject:function(){t.assert(null!==this._writeEncapsStack&&null!==this._writeEncapsStack.encoder),this._writeEncapsStack.encoder.endInstance()},startReadObject:function(){t.assert(null!==this._readEncapsStack&&null!==this._readEncapsStack.decoder),this._readEncapsStack.decoder.startInstance(d.ObjectSlice)},endReadObject:function(e){return t.assert(null!==this._readEncapsStack&&null!==this._readEncapsStack.decoder),this._readEncapsStack.decoder.endInstance(e)},startWriteException:function(e){t.assert(null!==this._writeEncapsStack&&null!==this._writeEncapsStack.encoder),this._writeEncapsStack.encoder.startInstance(d.ExceptionSlice,e)},endWriteException:function(){t.assert(null!==this._writeEncapsStack&&null!==this._writeEncapsStack.encoder),this._writeEncapsStack.encoder.endInstance()},startReadException:function(){t.assert(null!==this._readEncapsStack&&null!==this._readEncapsStack.decoder),this._readEncapsStack.decoder.startInstance(d.ExceptionSlice)},endReadException:function(e){return t.assert(null!==this._readEncapsStack&&null!==this._readEncapsStack.decoder),this._readEncapsStack.decoder.endInstance(e)},startWriteEncaps:function(e,t){void 0===e&&(null!==this._writeEncapsStack?(e=this._writeEncapsStack.encoding,t=this._writeEncapsStack.format):(e=this._encoding,t=r.DefaultFormat)),c.checkSupportedEncoding(e);var n=this._writeEncapsCache;null!==n?(n.reset(),this._writeEncapsCache=this._writeEncapsCache.next):n=new I,n.next=this._writeEncapsStack,this._writeEncapsStack=n,this._writeEncapsStack.format=t,this._writeEncapsStack.setEncoding(e),this._writeEncapsStack.start=this._buf.limit,this.writeInt(0),this._writeEncapsStack.encoding.__write(this)},endWriteEncaps:function(){t.assert(this._writeEncapsStack);var e=this._writeEncapsStack.start,n=this._buf.limit-e;this._buf.putIntAt(e,n);var r=this._writeEncapsStack;this._writeEncapsStack=r.next,r.next=this._writeEncapsCache,this._writeEncapsCache=r,this._writeEncapsCache.reset()},endWriteEncapsChecked:function(){if(null===this._writeEncapsStack)throw new Ice.EncapsulationException("not in an encapsulation");this.endWriteEncaps()},writeEmptyEncaps:function(e){c.checkSupportedEncoding(e),this.writeInt(6),e.__write(this)},writeEncaps:function(e){if(e.length<6)throw new Ice.EncapsulationException;this.expand(e.length),this._buf.putArray(e)},getWriteEncoding:function(){return null!==this._writeEncapsStack?this._writeEncapsStack.encoding:this._encoding},startReadEncaps:function(){var e=this._readEncapsCache;null!==e?(e.reset(),this._readEncapsCache=this._readEncapsCache.next):e=new S,e.next=this._readEncapsStack,this._readEncapsStack=e,this._readEncapsStack.start=this._buf.position;var t=this.readInt();if(t<6)throw new Ice.UnmarshalOutOfBoundsException;if(t-4>this._buf.remaining)throw new Ice.UnmarshalOutOfBoundsException;this._readEncapsStack.sz=t;var n=new Ice.EncodingVersion;return n.__read(this),c.checkSupportedEncoding(n),this._readEncapsStack.setEncoding(n),n},endReadEncaps:function(){if(t.assert(null!==this._readEncapsStack),this._readEncapsStack.encoding_1_0){if(this._buf.position!==this._readEncapsStack.start+this._readEncapsStack.sz){if(this._buf.position+1!==this._readEncapsStack.start+this._readEncapsStack.sz)throw new Ice.EncapsulationException;try{this._buf.get()}catch(e){throw new Ice.UnmarshalOutOfBoundsException}}}else if(this.skipOpts(),this._buf.position!==this._readEncapsStack.start+this._readEncapsStack.sz)throw new Ice.EncapsulationException;var e=this._readEncapsStack;this._readEncapsStack=e.next,e.next=this._readEncapsCache,this._readEncapsCache=e,this._readEncapsCache.reset()},skipEmptyEncaps:function(e){if(t.assert(void 0!==e),6!==this.readInt())throw new Ice.EncapsulationException;var n=this._buf.position;if(n+2>this._buf.limit)throw new Ice.UnmarshalOutOfBoundsException;null!==e?e.__read(this):this._buf.position=n+2},endReadEncapsChecked:function(){if(null===this._readEncapsStack)throw new Ice.EncapsulationException("not in an encapsulation");this.endReadEncaps()},readEncaps:function(e){t.assert(void 0!==e);var n=this.readInt();if(n<6)throw new Ice.UnmarshalOutOfBoundsException;if(n-4>this._buf.remaining)throw new Ice.UnmarshalOutOfBoundsException;null!==e?(e.__read(this),this._buf.position=this._buf.position-6):this._buf.position=this._buf.position-4;try{return this._buf.getArray(n)}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},getReadEncoding:function(){return null!==this._readEncapsStack?this._readEncapsStack.encoding:this._encoding},getReadEncapsSize:function(){return t.assert(null!==this._readEncapsStack),this._readEncapsStack.sz-6},skipEncaps:function(){var e=this.readInt();if(e<6)throw new Ice.UnmarshalOutOfBoundsException;var t=new Ice.EncodingVersion;t.__read(this);try{this._buf.position=this._buf.position+e-6}catch(e){throw new Ice.UnmarshalOutOfBoundsException}return t},startWriteSlice:function(e,n,r){t.assert(null!==this._writeEncapsStack&&null!==this._writeEncapsStack.encoder),this._writeEncapsStack.encoder.startSlice(e,n,r)},endWriteSlice:function(){t.assert(null!==this._writeEncapsStack&&null!==this._writeEncapsStack.encoder),this._writeEncapsStack.encoder.endSlice()},startReadSlice:function(){return t.assert(null!==this._readEncapsStack&&null!==this._readEncapsStack.decoder),this._readEncapsStack.decoder.startSlice()},endReadSlice:function(){t.assert(null!==this._readEncapsStack&&null!==this._readEncapsStack.decoder),this._readEncapsStack.decoder.endSlice()},skipSlice:function(){t.assert(null!==this._readEncapsStack&&null!==this._readEncapsStack.decoder),this._readEncapsStack.decoder.skipSlice()},readPendingObjects:function(){null!==this._readEncapsStack&&null!==this._readEncapsStack.decoder?this._readEncapsStack.decoder.readPendingObjects():(null!==this._readEncapsStack&&this._readEncapsStack.encoding_1_0||null===this._readEncapsStack&&this._encoding.equals(Ice.Encoding_1_0))&&this.skipSize()},writePendingObjects:function(){null!==this._writeEncapsStack&&null!==this._writeEncapsStack.encoder?this._writeEncapsStack.encoder.writePendingObjects():(null!==this._writeEncapsStack&&this._writeEncapsStack.encoding_1_0||null===this._writeEncapsStack&&this._encoding.equals(Ice.Encoding_1_0))&&this.writeSize(0)},writeSize:function(e){e>254?(this.expand(5),this._buf.put(255),this._buf.putInt(e)):(this.expand(1),this._buf.put(e))},readSize:function(){try{var e=this._buf.get();if(255===e){var t=this._buf.getInt();if(t<0)throw new Ice.UnmarshalOutOfBoundsException;return t}return e}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},readAndCheckSeqSize:function(e){var t=this.readSize();if(0===t)return t;if(-1===this._startSeq||this._buf.position>this._startSeq+this._minSeqSize?(this._startSeq=this._buf.position,this._minSeqSize=t*e):this._minSeqSize+=t*e,this._startSeq+this._minSeqSize>this._buf.limit)throw new Ice.UnmarshalOutOfBoundsException;return t},startSize:function(){var e=this._buf.position;return this.writeInt(0),e},endSize:function(e){t.assert(e>=0),this.rewriteInt(this._buf.position-e-4,e)},writeBlob:function(e){null!==e&&(this.expand(e.length),this._buf.putArray(e))},readBlob:function(e){if(this._buf.remaining<e)throw new Ice.UnmarshalOutOfBoundsException;try{return this._buf.getArray(e)}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},writeOpt:function(e,n){return t.assert(null!==this._writeEncapsStack),null!==this._writeEncapsStack.encoder?this._writeEncapsStack.encoder.writeOpt(e,n):this.writeOptImpl(e,n)},readOpt:function(e,n){return t.assert(null!==this._readEncapsStack),null!==this._readEncapsStack.decoder?this._readEncapsStack.decoder.readOpt(e,n):this.readOptImpl(e,n)},writeOptValue:function(e,t,n,r){void 0!==r&&this.writeOpt(e,t)&&n.call(this,r)},readOptValue:function(e,t,n){return this.readOpt(e,t)?n.call(this):void 0},writeByte:function(e){this.expand(1),this._buf.put(e)},rewriteByte:function(e,t){this._buf.putAt(t,e)},readByte:function(){try{return this._buf.get()}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},writeByteSeq:function(e){null===e||0===e.length?this.writeSize(0):(this.writeSize(e.length),this.expand(e.length),this._buf.putArray(e))},readByteSeq:function(){return this._buf.getArray(this.readAndCheckSeqSize(1))},writeBool:function(e){this.expand(1),this._buf.put(e?1:0)},rewriteBool:function(e,t){this._buf.putAt(t,e?1:0)},readBool:function(){try{return 1===this._buf.get()}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},writeShort:function(e){this.expand(2),this._buf.putShort(e)},readShort:function(){try{return this._buf.getShort()}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},writeInt:function(e){this.expand(4),this._buf.putInt(e)},rewriteInt:function(e,t){this._buf.putIntAt(t,e)},readInt:function(){try{return this._buf.getInt()}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},writeLong:function(e){this.expand(8),this._buf.putLong(e)},readLong:function(){try{return this._buf.getLong()}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},writeFloat:function(e){this.expand(4),this._buf.putFloat(e)},readFloat:function(){try{return this._buf.getFloat()}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},writeDouble:function(e){this.expand(8),this._buf.putDouble(e)},readDouble:function(){try{return this._buf.getDouble()}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},writeString:function(e){null==e||0===e.length?this.writeSize(0):this._buf.writeString(this,e)},readString:function(){var e=this.readSize();if(0===e)return"";if(this._buf.remaining<e)throw new Ice.UnmarshalOutOfBoundsException;try{return this._buf.getString(e)}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},writeProxy:function(e){this._instance.proxyFactory().proxyToStream(e,this)},writeOptProxy:function(e,t){if(void 0!==t&&this.writeOpt(e,a.FSize)){var n=this.startSize();this.writeProxy(t),this.endSize(n)}},readProxy:function(e){return this._instance.proxyFactory().streamToProxy(this,e)},readOptProxy:function(e,t){return this.readOpt(e,a.FSize)?(this.skip(4),this.readProxy(t)):void 0},writeEnum:function(e){this.isWriteEncoding_1_0()?e.maxValue<127?this.writeByte(e.value):e.maxValue<32767?this.writeShort(e.value):this.writeInt(e.value):this.writeSize(e.value)},readEnum:function(e){var t;t=this.getReadEncoding().equals(Ice.Encoding_1_0)?e.maxValue<127?this.readByte():e.maxValue<32767?this.readShort():this.readInt():this.readSize();var n=e.valueOf(t);if(void 0===n)throw new Ice.MarshalException("enumerator value "+t+" is out of range");return n},readOptEnum:function(e,t){return this.readOpt(e,a.Size)?this.readEnum(t):void 0},writeObject:function(e){this.initWriteEncaps(),this._writeEncapsStack.encoder.writeObject(e)},writeOptObject:function(e,t){void 0!==t&&this.writeOpt(e,a.Class)&&this.writeObject(t)},readObject:function(e,t){this.initReadEncaps(),this._readEncapsStack.decoder.readObject.call(this._readEncapsStack.decoder,(function(r){null===r||r.ice_instanceof(t)||n.throwUOE(t.ice_staticId(),r),e(r)}))},readOptObject:function(e,t,n){this.readOpt(e,a.Class)?this.readObject(t,n):t(void 0)},writeUserException:function(e){this.initWriteEncaps(),this._writeEncapsStack.encoder.writeUserException(e)},throwException:function(){this.initReadEncaps(),this._readEncapsStack.decoder.throwException()},sliceObjects:function(e){this._sliceObjects=e},readOptImpl:function(e,t){var n,r,i,o;if(this.isReadEncoding_1_0())return!1;for(;;){if(this._buf.position>=this._readEncapsStack.start+this._readEncapsStack.sz)return!1;if(255===(n=this.readByte()))return this._buf.position-=1,!1;if(r=a.valueOf(7&n),30===(i=n>>3)&&(i=this.readSize()),i>e)return o=i<30?1:i<255?2:6,this._buf.position-=o,!1;if(!(i<e)){if(r!==t)throw new Ice.MarshalException("invalid optional data member `"+i+"': unexpected format");return!0}this.skipOpt(r)}},writeOptImpl:function(e,t){if(this.isWriteEncoding_1_0())return!1;var n=t.value;return e<30?(n|=e<<3,this.writeByte(n)):(n|=240,this.writeByte(n),this.writeSize(e)),!0},skipOpt:function(e){switch(e){case a.F1:this.skip(1);break;case a.F2:this.skip(2);break;case a.F4:this.skip(4);break;case a.F8:this.skip(8);break;case a.Size:this.skipSize();break;case a.VSize:this.skip(this.readSize());break;case a.FSize:this.skip(this.readInt());break;case a.Class:this.readObject(null,Ice.Object)}},skipOpts:function(){for(var e,t,n;;){if(this._buf.position>=this._readEncapsStack.start+this._readEncapsStack.sz)return;if(255===(t=(e=this.readByte())<0?e+256:e))return;n=a.valueOf(7&t),t>>3==30&&this.skipSize(),this.skipOpt(n)}},skip:function(e){if(e>this._buf.remaining)throw new Ice.UnmarshalOutOfBoundsException;this._buf.position+=e},skipSize:function(){255===this.readByte()&&this.skip(4)},isEmpty:function(){return this._buf.empty()},expand:function(e){this._buf.expand(e)},createObject:function(t){var n,r=null;try{var i=t.length>2?t.substr(2).replace(/::/g,"."):"";void 0!==(n=e.type(i))&&(r=new n)}catch(e){throw new Ice.NoObjectFactoryException("no object factory",t,e)}return r},getTypeId:function(e){var t=Ice.CompactIdRegistry.get(e);return void 0===t?"":t},isReadEncoding_1_0:function(){return null!==this._readEncapsStack?this._readEncapsStack.encoding_1_0:this._encoding.equals(Ice.Encoding_1_0)},isWriteEncoding_1_0:function(){return this._writeEncapsStack?this._writeEncapsStack.encoding_1_0:this._encoding.equals(Ice.Encoding_1_0)},initReadEncaps:function(){if(null===this._readEncapsStack&&(this._readEncapsStack=this._readEncapsCache,null!==this._readEncapsStack?this._readEncapsCache=this._readEncapsCache.next:this._readEncapsStack=new S,this._readEncapsStack.setEncoding(this._encoding),this._readEncapsStack.sz=this._buf.limit),null===this._readEncapsStack.decoder){var e=this._instance.servantFactoryManager();this._readEncapsStack.encoding_1_0?this._readEncapsStack.decoder=new _(this,this._readEncapsStack,this._sliceObjects,e):this._readEncapsStack.decoder=new g(this,this._readEncapsStack,this._sliceObjects,e)}},initWriteEncaps:function(){this._writeEncapsStack||(this._writeEncapsStack=this._writeEncapsCache,this._writeEncapsStack?this._writeEncapsCache=this._writeEncapsCache.next:this._writeEncapsStack=new I,this._writeEncapsStack.setEncoding(this._encoding)),this._writeEncapsStack.format===r.DefaultFormat&&(this._writeEncapsStack.format=this._instance.defaultsAndOverrides().defaultFormat),this._writeEncapsStack.encoder||(this._writeEncapsStack.encoding_1_0?this._writeEncapsStack.encoder=new m(this,this._writeEncapsStack):this._writeEncapsStack.encoder=new y(this,this._writeEncapsStack))},createUserException:function(t){var n,r=null;try{var i=t.length>2?t.substr(2).replace(/::/g,"."):"";void 0!==(n=e.type(i))&&(r=new n)}catch(e){throw new Ice.MarshalException(e)}return r}}),w=Object.defineProperty;w(R.prototype,"pos",{get:function(){return this._buf.position},set:function(e){this._buf.position=e}}),w(R.prototype,"size",{get:function(){return this._buf.limit}}),w(R.prototype,"instance",{get:function(){return this._instance}}),w(R.prototype,"closure",{get:function(){return this._type},set:function(e){this._type=e}}),w(R.prototype,"buffer",{get:function(){return this._buf}});var b=function(e,t,n,r,i,o){var a={write:function(t,n){return e.call(t,n)},read:function(e){return t.call(e)},writeOpt:function(t,n,i){t.writeOptValue(n,r,e,i)},readOpt:function(e,n){return e.readOptValue(n,r,t)}};return void 0!==i&&void 0!==o&&(a.validate=function(e){return e>=i&&e<=o}),w(a,"minWireSize",{get:function(){return n}}),a},E=R.prototype,D=4294967295,P=-34028234664e28,T=34028234664e28;Ice.ByteHelper=b(E.writeByte,E.readByte,1,Ice.OptionalFormat.F1,0,255),Ice.ShortHelper=b(E.writeShort,E.readShort,2,Ice.OptionalFormat.F2,-32768,32767),Ice.IntHelper=b(E.writeInt,E.readInt,4,Ice.OptionalFormat.F4,-2147483648,2147483647),Ice.FloatHelper=b(E.writeFloat,E.readFloat,4,Ice.OptionalFormat.F4,P,T),Ice.FloatHelper.validate=function(e){return Number.isNaN(e)||e==Number.POSITIVE_INFINITY||e==Number.NEGATIVE_INFINITY||e>=P&&e<=T},Ice.DoubleHelper=b(E.writeDouble,E.readDouble,8,Ice.OptionalFormat.F8,-Number.MAX_VALUE,Number.MAX_VALUE),Ice.DoubleHelper.validate=function(e){return Number.isNaN(e)||e==Number.POSITIVE_INFINITY||e==Number.NEGATIVE_INFINITY||e>=-Number.MAX_VALUE&&e<=Number.MAX_VALUE},Ice.BoolHelper=b(E.writeBool,E.readBool,1,Ice.OptionalFormat.F1),Ice.LongHelper=b(E.writeLong,E.readLong,8,Ice.OptionalFormat.F8),Ice.LongHelper.validate=function(e){return e.low>=0&&e.low<=D&&e.high>=0&&e.high<=D},Ice.StringHelper=b(E.writeString,E.readString,1,Ice.OptionalFormat.VSize),Ice.ObjectHelper={write:function(e,t){e.writeObject(t)},read:function(e){var t;return e.readObject((function(e){t=e}),Ice.Object),t},writeOpt:function(e,t,n){e.writeOptValue(t,Ice.OptionalFormat.Class,E.writeObject,n)},readOpt:function(e,t){var n;return e.readOptObject(t,(function(e){n=e}),Ice.Object),n}},w(Ice.ObjectHelper,"minWireSize",{get:function(){return 1}}),Ice.BasicStream=R}(),Ice.SocketOperation={None:0,Read:1,Write:2,Connect:2},y=Ice.Class({__init__:function(e,t,n,r){this._instance=e,this._traceLevel=e.traceLevels().network,this._traceCategory=e.traceLevels().networkCat,this._logger=e.initializationData().logger,this._properties=e.initializationData().properties,this._type=t,this._protocol=n,this._secure=r},traceLevel:function(){return this._traceLevel},traceCategory:function(){return this._traceCategory},logger:function(){return this._logger},protocol:function(){return this._protocol},type:function(){return this._type},secure:function(){return this._secure},properties:function(){return this._properties},defaultHost:function(){return this._instance.defaultsAndOverrides().defaultHost},defaultSourceAddress:function(){return this._instance.defaultsAndOverrides().defaultSourceAddress},defaultEncoding:function(){return this._instance.defaultsAndOverrides().defaultEncoding},defaultTimeout:function(){return this._instance.defaultsAndOverrides().defaultTimeout},messageSizeMax:function(){return this._instance.messageSizeMax()}}),Ice.ProtocolInstance=y,L.defineSequence(Ice,"EndpointSeqHelper","Ice.ObjectHelper",!1,"Ice.Endpoint"),S=Ice.AsyncResultBase,I=Ice.Debug,Ice.Promise,R=Ice.Protocol,w=Ice.UserException,b=Ice.BasicStream,(E=Ice.Class(S,{__init__:function(e,t,n,r,i,o){S.call(this,e,t,n,r,i),void 0!==e&&(this._completed=o,this._is=null,this._os=null!==e?new b(this._instance,R.currentProtocolEncoding):null,this._state=0,this._exception=null,this._sentSynchronously=!1)},cancel:function(){this.__cancel(new Ice.InvocationCanceledException)},isCompleted:function(){return(this._state&E.Done)>0},isSent:function(){return(this._state&E.Sent)>0},throwLocalException:function(){if(null!==this._exception)throw this._exception},sentSynchronously:function(){return this._sentSynchronously},__markSent:function(e){I.assert(0==(this._state&E.Done)),this._state|=E.Sent,e&&(this._state|=E.Done|E.OK,this._cancellationHandler=null,this.succeed(this))},__markFinished:function(e,t){I.assert(0==(this._state&E.Done)),this._state|=E.Done,e&&(this._state|=E.OK),this._cancellationHandler=null,t?t(this):this.succeed(this)},__markFinishedEx:function(e){I.assert(0==(this._state&E.Done)),this._exception=e,this._state|=E.Done,this._cancellationHandler=null,this.fail(e,this)},__cancel:function(e){this._cancellationException=e,this._cancellationHandler&&this._cancellationHandler.asyncRequestCanceled(this,e)},__cancelable:function(e){if(this._cancellationException)try{throw this._cancellationException}finally{this._cancellationException=null}this._cancellationHandler=e},__os:function(){return this._os},__is:function(){return this._is},__startReadParams:function(){return this._is.startReadEncaps(),this._is},__endReadParams:function(){this._is.endReadEncaps()},__readEmptyParams:function(){this._is.skipEmptyEncaps(null)},__readParamEncaps:function(){return this._is.readEncaps(null)},__throwUserException:function(){if(I.assert(0!=(this._state&E.Done)),0==(this._state&E.OK))try{this._is.startReadEncaps(),this._is.throwException()}catch(e){throw e instanceof w&&this._is.endReadEncaps(),e}}})).OK=1,E.Done=2,E.Sent=4,Ice.AsyncResult=E,Ice.Address=function(e,t){this.host=e,this.port=t},function(){var e=Ice.BasicStream,t=Ice.Debug,n=(Ice.ExUtil,Ice.Class),r=Ice.Protocol,i=n({__init__:function(t,n){if(this._batchStreamInUse=!1,this._batchRequestNum=0,this._batchStream=new e(t,r.currentProtocolEncoding),this._batchStream.writeBlob(r.requestBatchHdr),this._batchMarker=this._batchStream.size,this._exception=null,this._maxSize=t.batchAutoFlushSize(),this._maxSize>0&&n){var i=t.initializationData().properties.getPropertyAsIntWithDefault("Ice.UDP.SndSize",65507);i<this._maxSize&&(this._maxSize=i)}},prepareBatchRequest:function(e){if(this._exception)throw this._exception;this._batchStream.swap(e)},finishBatchRequest:function(e,n,r){this._batchStream.swap(e);try{this._maxSize>0&&this._batchStream.size>=this._maxSize&&n.ice_flushBatchRequests(),t.assert(this._batchMarker<this._batchStream.size),this._batchMarker=this._batchStream.size,++this._batchRequestNum}finally{this._batchStream.resize(this._batchMarker)}},abortBatchRequest:function(e){this._batchStream.swap(e),this._batchStream.resize(this._batchMarker)},swap:function(e){if(0===this._batchRequestNum)return 0;var t=null;if(this._batchMarker<this._batchStream.size){var n=this._batchStream.size-this._batchMarker;this._batchStream.pos=this._batchMarker,t=this._batchStream.buffer.getArray(n),this._batchStream.resize(this._batchMarker)}var i=this._batchRequestNum;return this._batchStream.swap(e),this._batchRequestNum=0,this._batchStream.writeBlob(r.requestBatchHdr),this._batchMarker=this._batchStream.size,null!==t&&this._batchStream.writeBlob(t),i},destroy:function(e){this._exception=e},isEmpty:function(){return this._batchStream.size===r.requestBatchHdr.length}});Ice.BatchRequestQueue=i}(),function(){var e=Ice.HashMap,t=Ice.CommunicatorDestroyedException,n=Ice.Class({__init__:function(t){this._logger=t,this._destroyed=!1,this._tokenId=0,this._tokens=new e},destroy:function(){var e=this;this._tokens.forEach((function(t,n){e.cancel(t)})),this._destroyed=!0,this._tokens.clear()},schedule:function(e,r){if(this._destroyed)throw new t;var i=this._tokenId++,o=this,a=n.setTimeout((function(){o.handleTimeout(i)}),r);return this._tokens.set(i,{callback:e,id:a,isInterval:!1}),i},scheduleRepeated:function(e,r){if(this._destroyed)throw new t;var i=this._tokenId++,o=this,a=n.setInterval((function(){o.handleInterval(i)}),r);return this._tokens.set(i,{callback:e,id:a,isInterval:!0}),i},cancel:function(e){if(this._destroyed)return!1;var t=this._tokens.get(e);return void 0!==t&&(this._tokens.del(e),t.isInterval?n.clearInterval(t.id):n.clearTimeout(t.id),!0)},handleTimeout:function(e){if(!this._destroyed){var t=this._tokens.get(e);if(void 0!==t){this._tokens.del(e);try{t.callback()}catch(e){this._logger.warning("uncaught exception while executing timer:\n"+e)}}}},handleInterval:function(e){if(!this._destroyed){var t=this._tokens.get(e);if(void 0!==t)try{t.callback()}catch(e){this._logger.warning("uncaught exception while executing timer:\n"+e)}}}});n.setTimeout=Ice.Timer.setTimeout,n.clearTimeout=Ice.Timer.clearTimeout,n.setInterval=Ice.Timer.setInterval,n.clearInterval=Ice.Timer.clearInterval,n.setImmediate=Ice.Timer.setImmediate,Ice.Timer=n}(),function(){var e=Ice.Class,t=e({__init__:function(e){this._instance=e,this._requests=[]},add:function(e,t){if(null===this._instance)throw new Ice.CommunicatorDestroyedException;var r=new n(this._instance,this,e);e.__cancelable(r),r.token=this._instance.timer().schedule((function(){r.run()}),t),this._requests.push(r)},destroy:function(){for(var e=0;e<this._requests.length;++e)this._instance.timer().cancel(this._requests[e].token),this._requests[e].destroy();this._requests=[],this._instance=null},remove:function(e){var t=this._requests.indexOf(e);t>=0&&this._requests.splice(t,1)},cancel:function(e){var t=this._requests.indexOf(e);return t>=0&&(this._requests.splice(t,1),this._instance.timer().cancel(e.token))}});Ice.RetryQueue=t;var n=e({__init__:function(e,t,n,r){this._instance=e,this._queue=t,this._outAsync=n},run:function(){this._outAsync.__retry(),this._queue.remove(this)},destroy:function(){try{this._outAsync.__abort(new Ice.CommunicatorDestroyedException)}catch(e){}},asyncRequestCanceled:function(e,t){this._queue.cancel(this)&&(this._instance.traceLevels().retry>=1&&this._instance.initializationData().logger.trace(this._instance.traceLevels().retryCat,"operation retry canceled\n"+t.toString()),this._outAsync.__completedEx(t))}})}(),function(){var e=Ice.ArrayUtil,t=Ice.Debug,n=Ice.HashMap,r=Ice.Promise,i=Ice.Class({__init__:function(e){this._router=e,t.assert(null!==this._router),this._clientEndpoints=null,this._serverEndpoints=null,this._adapter=null,this._identities=new n(n.compareEquals),this._evictedIdentities=[]},destroy:function(){this._clientEndpoints=[],this._serverEndpoints=[],this._adapter=null,this._identities.clear()},equals:function(e){return this===e||e instanceof i&&this._router.equals(e._router)},hashCode:function(){return this._router.hashCode()},getRouter:function(){return this._router},getClientEndpoints:function(){var e=new r;if(null!==this._clientEndpoints)e.succeed(this._clientEndpoints);else{var t=this;this._router.getClientProxy().then((function(n){t.setClientEndpoints(n,e)})).exception((function(t){e.fail(t)}))}return e},getServerEndpoints:function(){if(null!==this._serverEndpoints)return(new r).succeed(this._serverEndpoints);var e=this;return this._router.getServerProxy().then((function(t){return e.setServerEndpoints(t)}))},addProxy:function(e){if(t.assert(null!==e),this._identities.has(e.ice_getIdentity()))return(new r).succeed();var n=this;return this._router.addProxies([e]).then((function(t){n.addAndEvictProxies(e,t)}))},setAdapter:function(e){this._adapter=e},getAdapter:function(){return this._adapter},clearCache:function(e){this._identities.del(e.getIdentity())},setClientEndpoints:function(e,t){if(null===this._clientEndpoints)if(null===e)this._clientEndpoints=this._router.__reference().getEndpoints(),t.succeed(this._clientEndpoints);else{e=e.ice_router(null);var n=this;this._router.ice_getConnection().then((function(r){var i=e.ice_timeout(r.timeout());n._clientEndpoints=i.__reference().getEndpoints(),t.succeed(n._clientEndpoints)})).exception((function(e){t.fail(e)}))}else t.succeed(this._clientEndpoints)},setServerEndpoints:function(e){if(null===e)throw new Ice.NoEndpointException;return e=e.ice_router(null),this._serverEndpoints=e.__reference().getEndpoints(),this._serverEndpoints},addAndEvictProxies:function(t,n){var r=e.indexOf(this._evictedIdentities,t.ice_getIdentity(),(function(e,t){return e.equals(t)}));r>=0?this._evictedIdentities.splice(r,1):this._identities.set(t.ice_getIdentity(),1);for(var i=0;i<n.length;++i)this._identities.del(n[i].ice_getIdentity())}});Ice.RouterInfo=i}(),function(){var e=Ice.AsyncStatus,t=Ice.AsyncResult,n=Ice.BasicStream,r=Ice.Debug,i=Ice.HashMap,o=Ice.RetryException,a=(Ice.OperationMode,Ice.Protocol),c=Ice.Identity,s=Ice.Class(t,{__init__:function(e,r,i,o,c){void 0!==e?(t.call(this,e,r,i,o,c),this._os=new n(this._instance,a.currentProtocolEncoding)):t.call(this)},__os:function(){return this._os},__sent:function(){this.__markSent(!0)},__completedEx:function(e){this.__markFinishedEx(e)}}),l=Ice.Class(s,{__init__:function(e,n){void 0!==e?(s.call(this,e.ice_getCommunicator(),n,null,e,null),this._mode=null,this._cnt=0,this._sent=!1,this._handler=null):t.call(this)},__completedEx:function(e){try{this._instance.retryQueue().add(this,this.__handleException(e))}catch(e){this.__markFinishedEx(e)}},__retryException:function(e){try{this._proxy.__updateRequestHandler(this._handler,null),this._instance.retryQueue().add(this,0)}catch(e){this.__completedEx(e)}},__retry:function(){this.__invokeImpl(!1)},__abort:function(e){this.__markFinishedEx(e)},__invokeImpl:function(t){try{if(t){var n=this._proxy.__reference().getInvocationTimeout();if(n>0){var r=this;this._timeoutToken=this._instance.timer().schedule((function(){r.__cancel(new Ice.InvocationTimeoutException)}),n)}}for(;;)try{return this._sent=!1,this._handler=this._proxy.__getRequestHandler(),void((this._handler.sendAsyncRequest(this)&e.Sent)>0&&t&&(this._sentSynchronously=!0))}catch(e){if(e instanceof o)this._proxy.__updateRequestHandler(this._handler,null);else{var i=this.__handleException(e);if(i>0)return void this._instance.retryQueue().add(this,i)}}}catch(e){this.__markFinishedEx(e)}},__markSent:function(e){this._sent=!0,e&&this._timeoutToken&&this._instance.timer().cancel(this._timeoutToken),s.prototype.__markSent.call(this,e)},__markFinishedEx:function(e){this._timeoutToken&&this._instance.timer().cancel(this._timeoutToken),s.prototype.__markFinishedEx.call(this,e)},__handleException:function(e){var t={value:0};return this._cnt=this._proxy.__handleException(e,this._handler,this._mode,this._sent,t,this._cnt),t.value}}),u=Ice.Class(l,{__init__:function(e,t,n){void 0!==e?(l.call(this,e,t),this._encoding=a.getCompatibleEncoding(this._proxy.__reference().getEncoding()),this._completed=n):l.call(this)},__prepare:function(e,t,n){a.checkSupportedProtocol(a.getCompatibleProtocol(this._proxy.__reference().getProtocol())),this._mode=t,null===n&&(n=u._emptyContext),this._proxy.ice_isBatchOneway()||this._proxy.ice_isBatchDatagram()?this._proxy.__getBatchRequestQueue().prepareBatchRequest(this._os):this._os.writeBlob(a.requestHdr);var r=this._proxy.__reference();r.getIdentity().__write(this._os);var o=r.getFacet();if(null===o||0===o.length?Ice.StringSeqHelper.write(this._os,null):Ice.StringSeqHelper.write(this._os,[o]),this._os.writeString(this._operation),this._os.writeByte(t.value),void 0!==n){if(null!==n&&!(n instanceof i))throw new Error("illegal context value, expecting null or HashMap");Ice.ContextHelper.write(this._os,n)}else{var c=r.getInstance().getImplicitContext(),s=r.getContext();null===c?Ice.ContextHelper.write(this._os,s):c.write(s,this._os)}},__sent:function(){this.__markSent(!this._proxy.ice_isTwoway())},__invokeRemote:function(e,t,n){return e.sendAsyncRequest(this,t,n,0)},__abort:function(e){(this._proxy.ice_isBatchOneway()||this._proxy.ice_isBatchDatagram())&&this._proxy.__getBatchRequestQueue().abortBatchRequest(this._os),l.prototype.__abort.call(this,e)},__invoke:function(){if(this._proxy.ice_isBatchOneway()||this._proxy.ice_isBatchDatagram())return this._sentSynchronously=!0,this._proxy.__getBatchRequestQueue().finishBatchRequest(this._os,this._proxy,this._operation),void this.__markFinished(!0);this.__invokeImpl(!0)},__completed:function(e){var t;r.assert(this._proxy.ice_isTwoway());try{switch(null===this._is&&(this._is=new n(this._instance,a.currentProtocolEncoding)),this._is.swap(e),t=this._is.readByte()){case a.replyOK:case a.replyUserException:break;case a.replyObjectNotExist:case a.replyFacetNotExist:case a.replyOperationNotExist:var i=new c;i.__read(this._is);var o,s=Ice.StringSeqHelper.read(this._is);if(s.length>0){if(s.length>1)throw new Ice.MarshalException;o=s[0]}else o="";var l=this._is.readString(),u=null;switch(t){case a.replyObjectNotExist:u=new Ice.ObjectNotExistException;break;case a.replyFacetNotExist:u=new Ice.FacetNotExistException;break;case a.replyOperationNotExist:u=new Ice.OperationNotExistException;break;default:r.assert(!1)}throw u.id=i,u.facet=o,u.operation=l,u;case a.replyUnknownException:case a.replyUnknownLocalException:case a.replyUnknownUserException:var d=this._is.readString(),f=null;switch(t){case a.replyUnknownException:f=new Ice.UnknownException;break;case a.replyUnknownLocalException:f=new Ice.UnknownLocalException;break;case a.replyUnknownUserException:f=new Ice.UnknownUserException;break;default:r.assert(!1)}throw f.unknown=d,f;default:throw new Ice.UnknownReplyStatusException}this.__markFinished(t==a.replyOK,this._completed)}catch(e){this.__completedEx(e)}},__startWriteParams:function(e){return this._os.startWriteEncaps(this._encoding,e),this._os},__endWriteParams:function(){this._os.endWriteEncaps()},__writeEmptyParams:function(){this._os.writeEmptyEncaps(this._encoding)},__writeParamEncaps:function(e){null===e||0===e.length?this._os.writeEmptyEncaps(this._encoding):this._os.writeEncaps(e)},__is:function(){return this._is},__startReadParams:function(){return this._is.startReadEncaps(),this._is},__endReadParams:function(){this._is.endReadEncaps()},__readEmptyParams:function(){this._is.skipEmptyEncaps(null)},__readParamEncaps:function(){return this._is.readEncaps(null)},__throwUserException:function(){if(r.assert(0!=(this._state&t.Done)),0==(this._state&t.OK))try{this._is.startReadEncaps(),this._is.throwException()}catch(e){throw e instanceof Ice.UserException&&this._is.endReadEncaps(),e}}});u._emptyContext=new i;var d=Ice.Class(l,{__init__:function(e,t){l.call(this,e,t),this._batchRequestNum=e.__getBatchRequestQueue().swap(this._os)},__invokeRemote:function(t,n,r){return 0===this._batchRequestNum?(this.__sent(),e.Sent):t.sendAsyncRequest(this,n,r,this._batchRequestNum)},__invoke:function(){a.checkSupportedProtocol(a.getCompatibleProtocol(this._proxy.__reference().getProtocol())),this.__invokeImpl(!0)}}),f=Ice.Class(l,{__init__:function(e,t){l.call(this,e,t)},__invokeRemote:function(t,n,r){return this.__markFinished(!0,(function(e){e.succeed(t)})),e.Sent},__invoke:function(){this.__invokeImpl(!0)}}),h=Ice.Class(s,{__init__:function(e,t,n){s.call(this,t,n,e,null,null)},__invoke:function(){try{var t,n=this._connection.getBatchRequestQueue().swap(this._os);0===n?(this.__sent(),t=e.Sent):t=this._connection.sendAsyncRequest(this,!1,!1,n),(t&e.Sent)>0&&(this._sentSynchronously=!0)}catch(e){this.__completedEx(e)}}});Ice.OutgoingAsync=u,Ice.ProxyFlushBatch=d,Ice.ProxyGetConnection=f,Ice.ConnectionFlushBatch=h}(),function(){var e=Ice.ArrayUtil,t=Ice.AsyncResultBase,n=(Ice.AsyncResult,Ice.Debug),r=(Ice.FormatType,Ice.HashMap),i=Ice.OutgoingAsync,o=Ice.ProxyFlushBatch,a=Ice.ProxyGetConnection,c=Ice.ReferenceMode,s=Ice.OperationMode,l=Ice.Class({__init__:function(){this._reference=null,this._requestHandler=null},hashCode:function(e){return this._reference.hashCode()},ice_getCommunicator:function(){return this._reference.getCommunicator()},toString:function(){return this._reference.toString()},ice_getIdentity:function(){return this._reference.getIdentity().clone()},ice_identity:function(e){if(null==e||0===e.name.length)throw new Ice.IllegalIdentityException;if(e.equals(this._reference.getIdentity()))return this;var t=new l;return t.__setup(this._reference.changeIdentity(e)),t},ice_getContext:function(){return new r(this._reference.getContext())},ice_context:function(e){return this.__newInstance(this._reference.changeContext(e))},ice_getFacet:function(){return this._reference.getFacet()},ice_facet:function(e){if(null==e&&(e=""),e===this._reference.getFacet())return this;var t=new l;return t.__setup(this._reference.changeFacet(e)),t},ice_getAdapterId:function(){return this._reference.getAdapterId()},ice_adapterId:function(e){return null==e&&(e=""),e===this._reference.getAdapterId()?this:this.__newInstance(this._reference.changeAdapterId(e))},ice_getEndpoints:function(){return e.clone(this._reference.getEndpoints())},ice_endpoints:function(t){return null==t&&(t=[]),e.equals(t,this._reference.getEndpoints())?this:this.__newInstance(this._reference.changeEndpoints(t))},ice_getLocatorCacheTimeout:function(){return this._reference.getLocatorCacheTimeout()},ice_locatorCacheTimeout:function(e){if(e<-1)throw new Error("invalid value passed to ice_locatorCacheTimeout: "+e);return e===this._reference.getLocatorCacheTimeout()?this:this.__newInstance(this._reference.changeLocatorCacheTimeout(e))},ice_getInvocationTimeout:function(){return this._reference.getInvocationTimeout()},ice_invocationTimeout:function(e){if(e<1&&-1!==e)throw new Error("invalid value passed to ice_invocationTimeout: "+e);return e===this._reference.getInvocationTimeout()?this:this.__newInstance(this._reference.changeInvocationTimeout(e))},ice_isConnectionCached:function(){return this._reference.getCacheConnection()},ice_connectionCached:function(e){return e===this._reference.getCacheConnection()?this:this.__newInstance(this._reference.changeCacheConnection(e))},ice_getEndpointSelection:function(){return this._reference.getEndpointSelection()},ice_endpointSelection:function(e){return e===this._reference.getEndpointSelection()?this:this.__newInstance(this._reference.changeEndpointSelection(e))},ice_isSecure:function(){return this._reference.getSecure()},ice_secure:function(e){return e===this._reference.getSecure()?this:this.__newInstance(this._reference.changeSecure(e))},ice_getEncodingVersion:function(){return this._reference.getEncoding().clone()},ice_encodingVersion:function(e){return e.equals(this._reference.getEncoding())?this:this.__newInstance(this._reference.changeEncoding(e))},ice_isPreferSecure:function(){return this._reference.getPreferSecure()},ice_preferSecure:function(e){return e===this._reference.getPreferSecure()?this:this.__newInstance(this._reference.changePreferSecure(e))},ice_getRouter:function(){var e=this._reference.getRouterInfo();return null!==e?e.getRouter():null},ice_router:function(e){var t=this._reference.changeRouter(e);return t.equals(this._reference)?this:this.__newInstance(t)},ice_getLocator:function(){var e=this._reference.getLocatorInfo();return null!==e?e.getLocator():null},ice_locator:function(e){var t=this._reference.changeLocator(e);return t.equals(this._reference)?this:this.__newInstance(t)},ice_isTwoway:function(){return this._reference.getMode()===c.ModeTwoway},ice_twoway:function(){return this._reference.getMode()===c.ModeTwoway?this:this.__newInstance(this._reference.changeMode(c.ModeTwoway))},ice_isOneway:function(){return this._reference.getMode()===c.ModeOneway},ice_oneway:function(){return this._reference.getMode()===c.ModeOneway?this:this.__newInstance(this._reference.changeMode(c.ModeOneway))},ice_isBatchOneway:function(){return this._reference.getMode()===c.ModeBatchOneway},ice_batchOneway:function(){return this._reference.getMode()===c.ModeBatchOneway?this:this.__newInstance(this._reference.changeMode(c.ModeBatchOneway))},ice_isDatagram:function(){return this._reference.getMode()===c.ModeDatagram},ice_datagram:function(){return this._reference.getMode()===c.ModeDatagram?this:this.__newInstance(this._reference.changeMode(c.ModeDatagram))},ice_isBatchDatagram:function(){return this._reference.getMode()===c.ModeBatchDatagram},ice_batchDatagram:function(){return this._reference.getMode()===c.ModeBatchDatagram?this:this.__newInstance(this._reference.changeMode(c.ModeBatchDatagram))},ice_compress:function(e){var t=this._reference.changeCompress(e);return t.equals(this._reference)?this:this.__newInstance(t)},ice_timeout:function(e){if(e<1&&-1!==e)throw new Error("invalid value passed to ice_timeout: "+e);var t=this._reference.changeTimeout(e);return t.equals(this._reference)?this:this.__newInstance(t)},ice_getConnectionId:function(){return this._reference.getConnectionId()},ice_connectionId:function(e){var t=this._reference.changeConnectionId(e);return t.equals(this._reference)?this:this.__newInstance(t)},ice_getConnection:function(){var e=new a(this,"ice_getConnection");try{e.__invoke()}catch(t){e.__abort(t)}return e},ice_getCachedConnection:function(){return this._requestHandler?this._requestHandler.getConnection():null},ice_flushBatchRequests:function(){var e=new o(this,"ice_flushBatchRequests");try{e.__invoke()}catch(t){e.__abort(t)}return e},equals:function(e){return this===e||e instanceof l&&this._reference.equals(e._reference)},__reference:function(){return this._reference},__copyFrom:function(e){n.assert(null===this._reference),n.assert(null===this._requestHandler),this._reference=e._reference,this._requestHandler=e._requestHandler},__handleException:function(e,t,n,r,i,o){if(this.__updateRequestHandler(t,null),!(e instanceof Ice.LocalException&&(!r||n==s.Nonmutating||n==s.Idempotent||e instanceof Ice.CloseConnectionException||e instanceof Ice.ObjectNotExistException)))throw e;try{return this._reference.getInstance().proxyFactory().checkRetryAfterException(e,this._reference,i,o)}catch(t){throw t instanceof Ice.CommunicatorDestroyedException?e:t}},__checkAsyncTwowayOnly:function(e){if(!this.ice_isTwoway())throw new Error("`"+e+"' can only be called with a twoway proxy")},__getRequestHandler:function(){return this._reference.getCacheConnection()&&this._requestHandler?this._requestHandler:this._reference.getRequestHandler(this)},__getBatchRequestQueue:function(){return this._batchRequestQueue||(this._batchRequestQueue=this._reference.getBatchRequestQueue()),this._batchRequestQueue},__setRequestHandler:function(e){return this._reference.getCacheConnection()?(this._requestHandler||(this._requestHandler=e),this._requestHandler):e},__updateRequestHandler:function(e,t){this._reference.getCacheConnection()&&null!==e&&this._requestHandler&&this._requestHandler!==t&&(this._requestHandler=this._requestHandler.update(e,t))},__setup:function(e){n.assert(null===this._reference),this._reference=e},__newInstance:function(e){var t=new this.constructor;return t.__setup(e),t},ice_instanceof:function(e){return!!e&&(this instanceof e||this.constructor.__instanceof(e))}});l.__invoke=function(e,t,n,r,o,a,c,s,u){(null!==c||s.length>0)&&e.__checkAsyncTwowayOnly(t);var d=new i(e,t,(function(e){l.__completed(e,c,s)}));try{if(d.__prepare(t,n,o),null===a)d.__writeEmptyParams();else{var f=d.__startWriteParams(r);a.call(null,f,u),d.__endWriteParams()}d.__invoke()}catch(e){d.__abort(e)}return d},l.__completed=function(e,t,n){if(l.__check(e,n))try{if(null===t)e.__readEmptyParams(),e.succeed(e);else{var r=t(e);e.succeed.apply(e,r)}}catch(t){return void l.__dispatchLocalException(e,t)}},l.__returns_bool=function(e,t){t.push(e.readBool())},l.__returns_byte=function(e,t){t.push(e.readByte())},l.__returns_short=function(e,t){t.push(e.readShort())},l.__returns_int=function(e,t){t.push(e.readInt())},l.__returns_long=function(e,t){t.push(e.readLong())},l.__returns_float=function(e,t){t.push(e.readFloat())},l.__returns_double=function(e,t){t.push(e.readDouble())},l.__returns_string=function(e,t){t.push(e.readString())},l.__returns_ObjectPrx=function(e,t){t.push(e.readProxy())},l.__returns_Object=function(e,t){e.readObject((function(e){t.push(e)}),Ice.Object),e.readPendingObjects()},l.__check=function(e,t){try{e.__throwUserException()}catch(r){if(r instanceof Ice.UserException){if(null!==t)for(var n=0;n<t.length;++n)if(r instanceof t[n])return e.fail(r,e),!1;return e.fail(new Ice.UnknownUserException(r.ice_name()),e),!1}return e.fail(r,e),!1}return!0},l.__dispatchLocalException=function(e,t){e.fail(t,e)},l.ice_staticId=Ice.Object.ice_staticId,l.checkedCast=function(e,n,r){var i=null;if(null==e)(i=new t(null,"checkedCast",null,null,null)).succeed(null,i);else{void 0!==n&&(e=e.ice_facet(n));var o=this;i=new t(e.ice_getCommunicator(),"checkedCast",null,e,null),e.ice_isA(this.ice_staticId(),r).then((function(t,n){if(n){var r=new o;r.__copyFrom(e),i.succeed(r,i)}else i.succeed(null,i)})).exception((function(e){e instanceof Ice.FacetNotExistException?i.succeed(null,i):i.fail(e,i)}))}return i},l.uncheckedCast=function(e,t){var n=null;return null!=e&&(n=new this,void 0!==t&&(e=e.ice_facet(t)),n.__copyFrom(e)),n},Object.defineProperty(l,"minWireSize",{get:function(){return 2}}),l.write=function(e,t){e.writeProxy(t)},l.read=function(e){return e.readProxy(this)},l.writeOpt=function(e,t,n){e.writeOptProxy(t,n)},l.readOpt=function(e,t){return e.readOptProxy(t,this)},l.__instanceof=function(e){if(e===this)return!0;for(var t in this.__implements)if(this.__implements[t].__instanceof(e))return!0;return!!this.__parent&&this.__parent.__instanceof(e)},Ice.Slice.defineProxy=function(e,t,n){var r=function(){e.call(this)};return r.__parent=e,r.__implements=n,(r.prototype=new e).constructor=r,r.ice_staticId=t,r.checkedCast=l.checkedCast,r.uncheckedCast=l.uncheckedCast,r.write=l.write,r.writeOpt=l.writeOpt,r.read=l.read,r.readOpt=l.readOpt,r.__instanceof=l.__instanceof,Object.defineProperty(r,"minWireSize",{get:function(){return 2}}),r},Ice.ObjectPrx=l}(),Object.defineProperty(Ice,"TCPEndpointType",{value:1}),Object.defineProperty(Ice,"SSLEndpointType",{value:2}),Object.defineProperty(Ice,"UDPEndpointType",{value:3}),Object.defineProperty(Ice,"WSEndpointType",{value:4}),Object.defineProperty(Ice,"WSSEndpointType",{value:5}),Ice.EndpointInfo=L.defineLocalObject((function(e,t){this.timeout=void 0!==e?e:0,this.compress=void 0!==t&&t})),Ice.Endpoint=L.defineLocalObject(),Ice.IPEndpointInfo=L.defineLocalObject((function(e,t,n,r,i){Ice.EndpointInfo.call(this,e,t),this.host=void 0!==n?n:"",this.port=void 0!==r?r:0,this.sourceAddress=void 0!==i?i:""}),Ice.EndpointInfo),Ice.TCPEndpointInfo=L.defineLocalObject((function(e,t,n,r,i){Ice.IPEndpointInfo.call(this,e,t,n,r,i)}),Ice.IPEndpointInfo),Ice.UDPEndpointInfo=L.defineLocalObject((function(e,t,n,r,i,o,a){Ice.IPEndpointInfo.call(this,e,t,n,r,i),this.mcastInterface=void 0!==o?o:"",this.mcastTtl=void 0!==a?a:0}),Ice.IPEndpointInfo),Ice.WSEndpointInfo=L.defineLocalObject((function(e,t,n,r,i,o){Ice.TCPEndpointInfo.call(this,e,t,n,r,i),this.resource=void 0!==o?o:""}),Ice.TCPEndpointInfo),Ice.OpaqueEndpointInfo=L.defineLocalObject((function(e,t,n,r){Ice.EndpointInfo.call(this,e,t),this.rawEncoding=void 0!==n?n:new Ice.EncodingVersion,this.rawBytes=void 0!==r?r:null}),Ice.EndpointInfo),D=(0,Ice.Class)(Ice.Endpoint,{toString:function(){return this.protocol()+this.options()},initWithOptions:function(e){var t,n=[],r="`"+this.protocol();for(t=0;t<e.length;++t)-1!==e[t].search(/[ \t\n\r]+/)?r+=' "'+e[t]+'"':r+=" "+e[t];for(r+="'",t=0;t<e.length;){var i=e[t++];if(i.length<2||"-"!=i.charAt(0))n.push(i);else{var o=null;t<e.length&&"-"!=e[t].charAt(0)&&(o=e[t++]),this.checkOption(i,o,r)||(n.push(i),null!==o&&n.push(o))}}for(e.length=0,t=0;t<n.length;t++)e.push(n[t])},equals:function(e){return e instanceof D&&0===this.compareTo(e)},checkOption:function(){return!1}}),Ice.EndpointI=D,function(){var t=Ice.__M,n=Ice.Class,r=[Ice.ByteHelper,Ice.BoolHelper,Ice.ShortHelper,Ice.IntHelper,Ice.LongHelper,Ice.FloatHelper,Ice.DoubleHelper,Ice.StringHelper,Ice.Object,Ice.ObjectPrx];function i(n){var i=n[0],o=e(i);return"number"===o?i=r[n[0]]:"string"===o&&(i=t.type(i)),{type:i,isObject:!0===n[1],tag:n[2]}}function o(e,t){var n,r,o,a={};a.name=e,a.mode=t[1]?Ice.OperationMode.valueOf(t[1]):Ice.OperationMode.Normal,a.sendMode=t[2]?Ice.OperationMode.valueOf(t[2]):Ice.OperationMode.Normal,a.amd=!!t[3],a.format=t[4]?Ice.FormatType.valueOf(t[4]):Ice.FormatType.DefaultFormat,a.amd?a.servantMethod=e+"_async":a.servantMethod=t[0]?t[0]:e,t[5]&&((o=i(t[5])).pos=0),a.returns=o;var c=[],s=[];if(t[6])for(n=0;n<t[6].length;++n)(r=i(t[6][n])).pos=n,c.push(r),r.tag&&s.push(r);s.sort((function(e,t){return e.tag-t.tag})),a.inParams=c,a.inParamsOpt=s;var l=[],u=[];if(t[7]){var d=o?1:0;for(n=0;n<t[7].length;++n)(r=i(t[7][n])).pos=n+d,l.push(r),r.tag&&u.push(r)}o&&o.tag&&u.push(o),u.sort((function(e,t){return e.tag-t.tag})),a.outParams=l,a.outParamsOpt=u;var f=[];if(t[8])for(n=0;n<t[8].length;++n)f.push(t[8][n]);return a.exceptions=f,a.sendsClasses=!0===t[9],a.returnsClasses=!0===t[10],a}var a=n({__init__:function(e){this.raw=e,this.parsed={}},find:function(e){var t=this.parsed[e];return void 0===t&&void 0!==this.raw[e]&&(t=o(e,this.raw[e]),this.parsed[e]=t),t}});function c(e,t,n,r,i,o,a){var c,s,l;for(c=0;c<n.length;++c)(s=n[c]).tag||(l=s.type.read(e),o[s.pos+a]=l);for(t&&(l=t.type.read(e),o[t.pos+a]=l),c=0;c<r.length;++c)l=(s=r[c]).type.readOpt(e,s.tag),o[s.pos+a]=l;i&&e.readPendingObjects()}function s(e,t,n,r,i,o){var a,c;for(a=0;a<r.length;++a)(c=r[a]).tag||c.type.write(e,t[c.pos]);for(n&&n.type.write(e,t[n.pos]),a=0;a<i.length;++a)(c=i[a]).type.writeOpt(e,c.tag,t[c.pos]);o&&e.writePendingObjects()}var l=n({__init__:function(e,t){this.incomingAsync=e,this.op=t},ice_response:function(){var e=arguments;if(this.incomingAsync.__validateResponse(!0))try{this.__sendResponse(e),this.incomingAsync.__response()}catch(e){this.incomingAsync.__exception(e)}},ice_exception:function(e){this.__checkException(e)?this.incomingAsync.__validateResponse(!1)&&(this.__sendException(e),this.incomingAsync.__response()):this.incomingAsync.ice_exception(e)},__sendResponse:function(e){if(void 0===this.op.returns&&0===this.op.outParams.length){if(e&&e.length>0)throw new Error("ice_response called with invalid arguments");this.incomingAsync.__writeEmptyParams()}else{var t,n=this.incomingAsync.__startWriteParams(this.op.format);this.op.returns&&!this.op.returns.tag&&(t=this.op.returns),s(n,e,t,this.op.outParams,this.op.outParamsOpt,this.op.returnsClasses),this.incomingAsync.__endWriteParams(!0)}},__checkException:function(e){for(var t=0;t<this.op.exceptions.length;++t)if(e instanceof this.op.exceptions[t])return!0;return!1},__sendException:function(e){this.incomingAsync.__writeUserException(e,this.op.format)}});function u(e,t,n){for(var r,i=0;void 0===r&&i<e.length;++i){var o=e[i];void 0===(r=o[t])&&(-1===n.indexOf(o)&&n.push(o),o.__implements&&(r=u(o.__implements,t,n)))}return r}function d(e,t){var n,r="__op_"+t,i=e[r];if(void 0===i){n=[];for(var o=e;o&&void 0===i;)o.__implements&&(i=u(o.__implements,r,n)),o=o.__parent;void 0!==i&&(e[r]=i)}if(void 0===i){var a,s;if(e.__ops&&(a=e.__ops.find(t)),void 0===a){for(var d=e.__parent;void 0===a&&d;)d.__ops&&void 0!==(a=d.__ops.find(t))&&(s=d),d=d.__parent;for(var f=0;void 0===a&&f<n.length;++f){var h=n[f];h.__ops&&void 0!==(a=h.__ops.find(t))&&(s=h)}}void 0!==a&&(i=function(e,t,n){return function(e,t,n,r){var i=e[t.servantMethod];if(void 0===i||"function"!=typeof i){var o="servant for identity "+r.adapter.getCommunicator().identityToString(r.id)+" does not define operation `"+t.servantMethod+"'";throw new Ice.UnknownException(o)}var a=new l(n,t);try{var s=t.amd?[null]:[];if(0===t.inParams.length)n.readEmptyParams();else{var u=n.startReadParams(),d=t.amd?1:0;if(c(u,void 0,t.inParams,t.inParamsOpt,t.sendsClasses,s,d),n.endReadParams(),t.inParams.length>0&&(t.sendsClasses||t.inParamsOpt.length>0))for(var f=0;f<t.inParams.length;++f){var h=t.inParams[f];h.isObject&&void 0!==s[h.pos+d]&&(s[h.pos+d]=s[h.pos+d].value)}}if(s.push(r),t.amd){s[0]=a;try{i.apply(e,s)}catch(e){a.ice_exception(e)}return Ice.DispatchStatus.DispatchAsync}var p=t.outParams.length;t.returns&&++p;var _=i.apply(e,s);if(p>1&&!(_ instanceof Array))throw new Ice.MarshalException("operation `"+t.servantMethod+"' should return an array of length "+p);return 1===p&&(_=[_]),a.__sendResponse(_),Ice.DispatchStatus.DispatchOK}catch(e){if(a.__checkException(e))return a.__sendException(e),Ice.DispatchStatus.DispatchUserException;throw e}}(e,a,t,n)},e[r]=i,s&&(s[r]=i))}return i}function f(e,t,n){var r=n[0]?n[0]:t,i=null;e.prototype[r]=function(){var e=arguments;null===i&&(i=o(t,n));var r=e[i.inParams.length],a=null;i.inParams.length>0&&(a=function(e,t){var n,r,o;for(n=0;n<i.inParams.length;++n)if(o=t[(r=i.inParams[n]).pos],!(r.tag&&void 0===o||"function"!=typeof r.type.validate||r.type.validate(o)))throw new Ice.MarshalException("invalid value for argument "+(n+1)+" in operation `"+i.servantMethod+"'");s(e,t,void 0,i.inParams,i.inParamsOpt,i.sendsClasses)});var l=null;return(i.returns||i.outParams.length>0)&&(l=function(e){var t,n=[],r=e.__startReadParams();if(i.returns&&!i.returns.tag&&(t=i.returns),c(r,t,i.outParams,i.outParamsOpt,i.returnsClasses,n,0),e.__endReadParams(),i.returnsClasses||i.outParamsOpt.length>0){i.returns&&i.returns.isObject&&void 0!==n[i.returns.pos+0]&&(n[i.returns.pos+0]=n[i.returns.pos+0].value);for(var o=0;o<i.outParams.length;++o){var a=i.outParams[o];a.isObject&&void 0!==n[a.pos+0]&&(n[a.pos+0]=n[a.pos+0].value)}}return n.push(e),n}),Ice.ObjectPrx.__invoke(this,i.name,i.sendMode,i.format,r,a,l,i.exceptions,Array.prototype.slice.call(e))}}var h=Ice.Slice;h.defineOperations=function(e,t,n){if(n&&(e.__ops=new a(n)),e.prototype.__dispatch=function(t,n){var r=d(e,n.operation);if(void 0===r||"function"!=typeof r)throw new Ice.OperationNotExistException(n.id,n.facet,n.operation);return r.call(r,this,t,n)},n)for(var r in n)f(t,r,n[r]);if(t.__implements)for(var i in t.__implements){var o=t.__implements[i].prototype;for(var c in o)"function"==typeof o[c]&&void 0===t.prototype[c]&&(t.prototype[c]=o[c])}},h.defineOperations(Ice.Object,Ice.ObjectPrx,{ice_ping:[,1,1,,,,,,],ice_isA:[,1,1,,,[1],[[7]],,],ice_id:[,1,1,,,[7],,,],ice_ids:[,1,1,,,["Ice.StringSeqHelper"],,,]})}(),function(){var e=Ice.Address,t=Ice.HashUtil,n=Ice.StringUtil,r=Ice.Class,i=Ice.EndpointParseException,o=r(Ice.EndpointI,{__init__:function(e,t,n,r,i){this._instance=e,this._host=void 0===t?null:t,this._port=void 0===n?null:n,this._sourceAddr=void 0===r?null:r,this._connectionId=void 0===i?"":i},streamWrite:function(e){e.startWriteEncaps(),this.streamWriteImpl(e),e.endWriteEncaps()},getInfo:function(){var e=new Ice.IPEndpointInfo;return this.fillEndpointInfo(e),e},type:function(){return this._instance.type()},protocol:function(){return this._instance.protocol()},secure:function(){return this._instance.secure()},connectionId:function(){return this._connectionId},changeConnectionId:function(e){return e===this._connectionId?this:this.createEndpoint(this._host,this._port,e)},hashCode:function(){return void 0===this._hashCode&&(this._hashCode=this.hashInit(5381)),this._hashCode},options:function(){var e="";if(null!==this._host&&this._host.length>0){e+=" -h ";var t=-1!=this._host.indexOf(":");t&&(e+='"'),e+=this._host,t&&(e+='"')}return e+=" -p "+this._port,null!==this._sourceAddr&&this._sourceAddr.length>0&&(e+=" --sourceAddr "+this._sourceAddr),e},compareTo:function(e){return this===e?0:null===e?1:e instanceof o?this._port<e._port?-1:e._port<this._port?1:this._host!=e._host?this._host<e._host?-1:1:this._sourceAddr!=e._sourceAddr?this._sourceAddr<e._sourceAddr?-1:1:this._connectionId!=e._connectionId?this._connectionId<e._connectionId?-1:1:0:this.type()<e.type()?-1:1},getAddress:function(){return new e(this._host,this._port)},toConnectorString:function(){return this._host+":"+this._port},streamWriteImpl:function(e){e.writeString(this._host),e.writeInt(this._port)},hashInit:function(e){return e=t.addNumber(e,this.type()),e=t.addString(e,this._host),e=t.addNumber(e,this._port),e=t.addString(e,this._sourceAddr),e=t.addString(e,this._connectionId)},fillEndpointInfo:function(e){var t=this;e.type=function(){return t.type()},e.datagram=function(){return t.datagram()},e.secure=function(){return t.secure()},e.host=this._host,e.port=this._port,e.sourceAddress=this._sourceAddr},initWithOptions:function(e,t){if(Ice.EndpointI.prototype.initWithOptions.call(this,e),null===this._host||0===this._host.length)this._host=this._instance.defaultHost();else if("*"==this._host){if(!t)throw new i("`-h *' not valid for proxy endpoint `"+this+"'");this._host=""}if(null===this._host&&(this._host=""),null===this._sourceAddr)t||(this._sourceAddr=this._instance.defaultSourceAddress());else if(t)throw new i("`--sourceAddress not valid for object adapter endpoint `"+this+"'")},initWithStream:function(e){this._host=e.readString(),this._port=e.readInt()},checkOption:function(e,t,r){if("-h"===e){if(null===t)throw new i("no argument provided for -h option in endpoint "+r);this._host=t}else if("-p"===e){if(null===t)throw new i("no argument provided for -p option in endpoint "+r);try{this._port=n.toInt(t)}catch(e){throw new i("invalid port value `"+t+"' in endpoint "+r)}if(this._port<0||this._port>65535)throw new i("port value `"+t+"' out of range in endpoint "+r)}else{if("--sourceAddress"!==e)return!1;if(null===t)throw new i("no argument provided for --sourceAddress option in endpoint "+r);this._sourceAddr=t}return!0}});Ice.IPEndpointI=o}(),Object.defineProperty(IceSSL,"EndpointType",{value:Ice.SSLEndpointType}),IceSSL.EndpointInfo=L.defineLocalObject((function(e,t,n,r,i){Ice.IPEndpointInfo.call(this,e,t,n,r,i)}),Ice.IPEndpointInfo),IceSSL.WSSEndpointInfo=L.defineLocalObject((function(e,t,n,r,i,o){IceSSL.EndpointInfo.call(this,e,t,n,r,i),this.resource=void 0!==o?o:""}),IceSSL.EndpointInfo),Ice.ConnectionInfo=L.defineLocalObject((function(e,t,n,r,i){this.incoming=void 0!==e&&e,this.adapterName=void 0!==t?t:"",this.connectionId=void 0!==n?n:"",this.rcvSize=void 0!==r?r:0,this.sndSize=void 0!==i?i:0})),Ice.ConnectionCallback=L.defineLocalObject(),Ice.ACMClose=L.defineEnum([["CloseOff",0],["CloseOnIdle",1],["CloseOnInvocation",2],["CloseOnInvocationAndIdle",3],["CloseOnIdleForceful",4]]),Ice.ACMHeartbeat=L.defineEnum([["HeartbeatOff",0],["HeartbeatOnInvocation",1],["HeartbeatOnIdle",2],["HeartbeatAlways",3]]),Ice.ACM=L.defineStruct((function(e,t,n){this.timeout=void 0!==e?e:0,this.close=void 0!==t?t:Ice.ACMClose.CloseOff,this.heartbeat=void 0!==n?n:Ice.ACMHeartbeat.HeartbeatOff}),!0),Ice.Connection=L.defineLocalObject(),Ice.IPConnectionInfo=L.defineLocalObject((function(e,t,n,r,i,o,a,c,s){Ice.ConnectionInfo.call(this,e,t,n,r,i),this.localAddress=void 0!==o?o:"",this.localPort=void 0!==a?a:-1,this.remoteAddress=void 0!==c?c:"",this.remotePort=void 0!==s?s:-1}),Ice.ConnectionInfo),Ice.TCPConnectionInfo=L.defineLocalObject((function(e,t,n,r,i,o,a,c,s){Ice.IPConnectionInfo.call(this,e,t,n,r,i,o,a,c,s)}),Ice.IPConnectionInfo),Ice.UDPConnectionInfo=L.defineLocalObject((function(e,t,n,r,i,o,a,c,s,l,u){Ice.IPConnectionInfo.call(this,e,t,n,r,i,o,a,c,s),this.mcastAddress=void 0!==l?l:"",this.mcastPort=void 0!==u?u:-1}),Ice.IPConnectionInfo),L.defineDictionary(Ice,"HeaderDict","HeaderDictHelper","Ice.StringHelper","Ice.StringHelper",!1,void 0,void 0),Ice.WSConnectionInfo=L.defineLocalObject((function(e,t,n,r,i,o,a,c,s,l){Ice.TCPConnectionInfo.call(this,e,t,n,r,i,o,a,c,s),this.headers=void 0!==l?l:null}),Ice.TCPConnectionInfo),Ice.TraceLevels=function(e){var t="Network",n="Protocol",r="Retry",i="Locator",o="Slicing",a="Ice.Trace.",c=e.getPropertyAsInt(a+t),s=e.getPropertyAsInt(a+n),l=e.getPropertyAsInt(a+r),u=e.getPropertyAsInt(a+i),d=e.getPropertyAsInt(a+o);return e.getPropertyAsInt(a+"ThreadPool"),Object.create(null,{network:{get:function(){return c}},networkCat:{get:function(){return t}},protocol:{get:function(){return s}},protocolCat:{get:function(){return n}},retry:{get:function(){return l}},retryCat:{get:function(){return r}},location:{get:function(){return u}},locationCat:{get:function(){return i}},slicing:{get:function(){return d}},slicingCat:{get:function(){return o}}})},function(){var e=Ice.Base64,t=Ice.Debug,n=Ice.HashUtil,r=(Ice.Protocol,Ice.StringUtil),i=Ice.EndpointParseException,o=Ice.Class,a=o(Ice.EndpointI,{__init__:function(e){this._rawEncoding=Ice.Encoding_1_0,this._type=void 0===e?-1:e,this._rawBytes=null},streamWrite:function(e){e.startWriteEncaps(this._rawEncoding,Ice.FormatType.DefaultFormat),e.writeBlob(this._rawBytes),e.endWriteEncaps()},getInfo:function(){return new c(-1,!1,this._rawEncoding,this._rawBytes,this._type)},type:function(){return this._type},protocol:function(){return"opaque"},timeout:function(){return-1},changeTimeout:function(e){return this},changeConnectionId:function(e){return this},compress:function(){return!1},changeCompress:function(e){return this},datagram:function(){return!1},secure:function(){return!1},rawBytes:function(){return this._rawBytes},transceiver:function(e){return e.value=null,null},acceptor:function(e,t){return e.value=this,null},connect:function(){return null},hashCode:function(){if(void 0===this._hashCode){var e=5381;e=n.addNumber(e,this._type),e=n.addHashable(e,this._rawEncoding),e=n.addArray(e,this._rawBytes,n.addNumber),this._hashCode=e}return this._hashCode},options:function(){var t="";return t+=" -t "+this._type,t+=" -e "+Ice.encodingVersionToString(this._rawEncoding),t+=" -v "+e.encode(this._rawBytes)},equals:function(e){if(!(e instanceof a))return!1;if(this===e)return!0;if(this._type!==e._type)return!1;if(!this._rawEncoding.equals(e._rawEncoding))return!1;if(this._rawBytes.length!==e._rawBytes.length)return!1;for(var t=0;t<this._rawBytes.length;t++)if(this._rawBytes[t]!==e._rawBytes[t])return!1;return!0},compareTo:function(e){if(this===e)return 0;if(null===e)return 1;if(!(e instanceof a))return this.type()<e.type()?-1:1;if(this._type<e._type)return-1;if(e._type<this._type)return 1;if(this._rawEncoding.major<e._rawEncoding.major)return-1;if(e._rawEncoding.major<this._rawEncoding.major)return 1;if(this._rawEncoding.minor<e._rawEncoding.minor)return-1;if(e._rawEncoding.minor<this._rawEncoding.minor)return 1;if(this._rawBytes.length<e._rawBytes.length)return-1;if(e._rawBytes.length<this._rawBytes.length)return 1;for(var t=0;t<this._rawBytes.length;t++){if(this._rawBytes[t]<e._rawBytes[t])return-1;if(e._rawBytes[t]<this._rawBytes[t])return 1}return 0},checkOption:function(t,n,o){switch(t.charAt(1)){case"t":if(this._type>-1)throw new i("multiple -t options in endpoint "+o);if(null===n)throw new i("no argument provided for -t option in endpoint "+o);var a;try{a=r.toInt(n)}catch(e){throw new i("invalid type value `"+n+"' in endpoint "+o)}if(a<0||a>65535)throw new i("type value `"+n+"' out of range in endpoint "+o);return this._type=a,!0;case"v":if(this._rawBytes)throw new i("multiple -v options in endpoint "+o);if(null===n||0===n.length)throw new i("no argument provided for -v option in endpoint "+o);for(var c=0;c<n.length;++c)if(!e.isBase64(n.charAt(c)))throw new i("invalid base64 character `"+n.charAt(c)+"' (ordinal "+n.charCodeAt(c)+") in endpoint "+o);return this._rawBytes=e.decode(n),!0;case"e":if(null===n)throw new i("no argument provided for -e option in endpoint "+o);try{this._rawEncoding=Ice.stringToEncodingVersion(n)}catch(e){throw new i("invalid encoding version `"+n+"' in endpoint "+o+":\n"+e.str)}return!0;default:return!1}},initWithOptions:function(e){if(Ice.EndpointI.prototype.initWithOptions.call(this,e),t.assert(this._rawEncoding),this._type<0)throw new i("no -t option in endpoint `"+this+"'");if(null===this._rawBytes||0===this._rawBytes.length)throw new i("no -v option in endpoint `"+this+"'")},initWithStream:function(e){this._rawEncoding=e.getReadEncoding();var t=e.getReadEncapsSize();this._rawBytes=e.readBlob(t)}}),c=o(Ice.OpaqueEndpointInfo,{__init__:function(e,t,n,r,i){Ice.OpaqueEndpointInfo.call(this,-1,!1,n,r),this._type=i},type:function(){return this._type},datagram:function(){return!1},secure:function(){return!1}});Ice.OpaqueEndpointI=a}(),function(){var e=Ice.BasicStream,t=Ice.Current,n=Ice.Debug,r=Ice.FormatType,i=Ice.Context,o=Ice.Identity,a=Ice.Protocol,c=Ice.StringUtil,s=Ice.Class({__init__:function(n,r,i,c,s,l){this._instance=n,this._response=c,this._compress=s,this._response&&(this._os=new e(n,a.currentProtocolEncoding)),this._connection=r,this._current=new t,this._current.id=new o,this._current.adapter=i,this._current.con=this._connection,this._current.requestId=l,this._servant=null,this._locator=null,this._cookie={value:null},c&&(this._os.writeBlob(a.replyHdr),this._os.writeInt(l)),this._is=null,this._cb=null,this._active=!0},__startWriteParams:function(e){if(!this._response)throw new Ice.MarshalException("can't marshal out parameters for oneway dispatch");return n.assert(this._os.size==a.headerSize+4),n.assert(null!==this._current.encoding),this._os.writeByte(0),this._os.startWriteEncaps(this._current.encoding,e),this._os},__endWriteParams:function(e){if(this._response){var t=this._os.pos;this._os.pos=a.headerSize+4,this._os.writeByte(e?a.replyOK:a.replyUserException),this._os.pos=t,this._os.endWriteEncaps()}},__writeEmptyParams:function(){this._response&&(n.assert(this._os.size===a.headerSize+4),n.assert(null!==this._current.encoding),this._os.writeByte(a.replyOK),this._os.writeEmptyEncaps(this._current.encoding))},__writeParamEncaps:function(e,t){this._response&&(n.assert(this._os.size===a.headerSize+4),n.assert(null!==this._current.encoding),this._os.writeByte(t?a.replyOK:a.replyUserException),null===e||0===e.length?this._os.writeEmptyEncaps(this._current.encoding):this._os.writeEncaps(e))},__writeUserException:function(e,t){this.__startWriteParams(t).writeUserException(e),this.__endWriteParams(!1)},__warning:function(e){n.assert(null!==this._instance);var t=[];if(t.push("dispatch exception:"),t.push("\nidentity: "+this._instance.identityToString(this._current.id)),t.push("\nfacet: "+c.escapeString(this._current.facet,"")),t.push("\noperation: "+this._current.operation),null!==this._connection){var r=this._connection.getInfo();if(r instanceof Ice.IPConnectionInfo){var i=r;t.push("\nremote host: "+i.remoteAddress+" remote port: "+i.remotePort)}}e.stack&&(t.push("\n"),t.push(e.stack)),this._instance.initializationData().logger.warning(t.join(""))},__servantLocatorFinished:function(){n.assert(null!==this._locator&&null!==this._servant);try{return this._locator.finished(this._current,this._servant,this._cookie.value),!0}catch(e){return e instanceof Ice.UserException?(n.assert(null!==this._connection),this._response?(this._os.resize(a.headerSize+4),this._os.writeByte(a.replyUserException),this._os.startWriteEncaps(),this._os.writeUserException(e),this._os.endWriteEncaps(),this._connection.sendResponse(this._os,this._compress)):this._connection.sendNoResponse(),this._connection=null):this.__handleException(e),!1}},__handleException:function(e){n.assert(null!==this._connection);var t,r=this._instance.initializationData().properties;e instanceof Ice.RequestFailedException?(null===e.id&&(e.id=this._current.id),null===e.facet&&(e.facet=this._current.facet),null!==e.operation&&0!==e.operation.length||(e.operation=this._current.operation),r.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)>1&&this.__warning(e),this._response?(this._os.resize(a.headerSize+4),e instanceof Ice.ObjectNotExistException?this._os.writeByte(a.replyObjectNotExist):e instanceof Ice.FacetNotExistException?this._os.writeByte(a.replyFacetNotExist):e instanceof Ice.OperationNotExistException?this._os.writeByte(a.replyOperationNotExist):n.assert(!1),e.id.__write(this._os),null===e.facet||0===e.facet.length?Ice.StringSeqHelper.write(this._os,null):Ice.StringSeqHelper.write(this._os,[e.facet]),this._os.writeString(e.operation),this._connection.sendResponse(this._os,this._compress)):this._connection.sendNoResponse()):e instanceof Ice.UnknownLocalException?(r.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)>0&&this.__warning(e),this._response?(this._os.resize(a.headerSize+4),this._os.writeByte(a.replyUnknownLocalException),this._os.writeString(e.unknown),this._connection.sendResponse(this._os,this._compress)):this._connection.sendNoResponse()):e instanceof Ice.UnknownUserException?(r.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)>0&&this.__warning(e),this._response?(this._os.resize(a.headerSize+4),this._os.writeByte(a.replyUnknownUserException),this._os.writeString(e.unknown),this._connection.sendResponse(this._os,this._compress)):this._connection.sendNoResponse()):e instanceof Ice.UnknownException?(r.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)>0&&this.__warning(e),this._response?(this._os.resize(a.headerSize+4),this._os.writeByte(a.replyUnknownException),this._os.writeString(e.unknown),this._connection.sendResponse(this._os,this._compress)):this._connection.sendNoResponse()):e instanceof Ice.LocalException?(r.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)>0&&this.__warning(e),this._response?(this._os.resize(a.headerSize+4),this._os.writeByte(a.replyUnknownLocalException),t=[e.ice_name()],e.stack&&(t.push("\n"),t.push(e.stack)),this._os.writeString(t.join("")),this._connection.sendResponse(this._os,this._compress)):this._connection.sendNoResponse()):e instanceof Ice.UserException?(r.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)>0&&this.__warning(e),this._response?(this._os.resize(a.headerSize+4),this._os.writeByte(a.replyUnknownUserException),t=[e.ice_name()],e.stack&&(t.push("\n"),t.push(e.stack)),this._os.writeString(t.join("")),this._connection.sendResponse(this._os,this._compress)):this._connection.sendNoResponse()):(r.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)>0&&this.__warning(e),this._response?(this._os.resize(a.headerSize+4),this._os.writeByte(a.replyUnknownException),this._os.writeString(e.stack?e.stack:""),this._connection.sendResponse(this._os,this._compress)):this._connection.sendNoResponse()),this._connection=null},invoke:function(e,t){this._is=t;this._is.pos;this._current.id.__read(this._is);var o=Ice.StringSeqHelper.read(this._is);if(o.length>0){if(o.length>1)throw new Ice.MarshalException;this._current.facet=o[0]}else this._current.facet="";this._current.operation=this._is.readString(),this._current.mode=Ice.OperationMode.valueOf(this._is.readByte()),this._current.ctx=new i;for(var c=this._is.readSize();c-- >0;){var s=this._is.readString(),l=this._is.readString();this._current.ctx.set(s,l)}if(null!==e&&(this._servant=e.findServant(this._current.id,this._current.facet),null===this._servant&&(this._locator=e.findServantLocator(this._current.id.category),null===this._locator&&this._current.id.category.length>0&&(this._locator=e.findServantLocator("")),null!==this._locator)))try{this._servant=this._locator.locate(this._current,this._cookie)}catch(e){if(e instanceof Ice.UserException){var u=this._is.skipEncaps();return this._response?(this._os.writeByte(a.replyUserException),this._os.startWriteEncaps(u,r.DefaultFormat),this._os.writeUserException(e),this._os.endWriteEncaps(),this._connection.sendResponse(this._os,this._compress)):this._connection.sendNoResponse(),void(this._connection=null)}return this._is.skipEncaps(),void this.__handleException(e)}try{if(null===this._servant)throw this._is.skipEncaps(),null!==e&&e.hasServant(this._current.id)?new Ice.FacetNotExistException(this._current.id,this._current.facet,this._current.operation):new Ice.ObjectNotExistException(this._current.id,this._current.facet,this._current.operation);if(this._servant.__dispatch(this,this._current)===Ice.DispatchStatus.DispatchAsync)return;if(null!==this._locator&&!this.__servantLocatorFinished())return}catch(e){if(null!==this._servant&&null!==this._locator&&!this.__servantLocatorFinished())return;return void this.__handleException(e)}n.assert(null!==this._connection),this._response?this._connection.sendResponse(this._os,this._compress):this._connection.sendNoResponse(),this._connection=null},startReadParams:function(){return this._current.encoding=this._is.startReadEncaps(),this._is},endReadParams:function(){this._is.endReadEncaps()},readEmptyParams:function(){this._current.encoding=new Ice.EncodingVersion,this._is.skipEmptyEncaps(this._current.encoding)},readParamEncaps:function(){return this._current.encoding=new Ice.EncodingVersion,this._is.readEncaps(this._current.encoding)},__response:function(){try{if(null!==this._locator&&!this.__servantLocatorFinished())return;n.assert(null!==this._connection),this._response?this._connection.sendResponse(this._os,this._compress):this._connection.sendNoResponse(),this._connection=null}catch(e){this._connection.invokeException(e,1)}},__exception:function(e){try{if(null!==this._locator&&!this.__servantLocatorFinished())return;this.__handleException(e)}catch(e){this._connection.invokeException(e,1)}},__validateResponse:function(e){return!!this._active&&(this._active=!1,!0)},ice_exception:function(e){this._active&&(this._active=!1,null!==this._connection?this.__exception(e):this._instance.initializationData().properties.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)>0&&this.__warning(e))}});Ice.IncomingAsync=s}(),function(){Ice.AsyncResult;var e=Ice.AsyncStatus,t=(Ice.BasicStream,Ice.ConnectionRequestHandler),n=Ice.Debug,r=(Ice.ExUtil,Ice.RetryException),i=(Ice.OutgoingAsync,Ice.Protocol,Ice.ReferenceMode),o=Ice.LocalException,a=(Ice.Promise,Ice.Class({__init__:function(e,t){this._reference=e,this._response=e.getMode()===i.ModeTwoway,this._proxy=t,this._proxies=[],this._initialized=!1,this._connection=null,this._compress=!1,this._exception=null,this._requests=[]},connect:function(e){return this.initialized()||this._proxies.push(e),this._requestHandler?this._requestHandler:this},update:function(e,t){return e===this?t:this},sendAsyncRequest:function(t){return this._initialized||t.__cancelable(this),this.initialized()?t.__invokeRemote(this._connection,this._compress,this._response):(this._requests.push(t),e.Queued)},asyncRequestCanceled:function(e,t){if(null===this._exception){if(!this.initialized()){for(var r=0;r<this._requests.length;r++)if(this._requests[r]===e)return e.__completedEx(t),void this._requests.splice(r,1);n.assert(!1)}this._connection.asyncRequestCanceled(e,t)}},getReference:function(){return this._reference},getConnection:function(){if(null!==this._exception)throw this._exception;return this._connection},setConnection:function(e,t){n.assert(null===this._exception&&null===this._connection),this._connection=e,this._compress=t;var r=this._reference.getRouterInfo();if(null===r)this.flushRequests();else{var i=this;r.addProxy(this._proxy).then((function(){i.flushRequests()}),(function(e){i.setException(e)}))}},setException:function(e){n.assert(!this._initialized&&null===this._exception),this._exception=e,this._proxies.length=0,this._proxy=null;try{this._reference.getInstance().requestHandlerFactory().removeRequestHandler(this._reference,this)}catch(e){}for(var t=0;t<this._requests.length;++t){var r=this._requests[t];null!==r&&r.__completedEx(this._exception)}this._requests.length=0},initialized:function(){if(this._initialized)return n.assert(null!==this._connection),!0;if(null!==this._exception){if(null!==this._connection)return!0;throw this._exception}return this._initialized},flushRequests:function(){n.assert(null!==this._connection&&!this._initialized);for(var e=null,i=0;i<this._requests.length;++i){var a=this._requests[i];try{a.__invokeRemote(this._connection,this._compress,this._response)}catch(t){t instanceof r?(e=t.inner,this._reference.getInstance().requestHandlerFactory().removeRequestHandler(this._reference,this),a.__retryException(t.inner)):(n.assert(t instanceof o),e=t,a.out.__completedEx(t))}}if(this._requests.length=0,this._reference.getCacheConnection()&&null===e){this._requestHandler=new t(this._reference,this._connection,this._compress);for(var c=0;c<this._proxies.length;++c)this._proxies[c].__updateRequestHandler(this,this._requestHandler)}n.assert(!this._initialized),this._exception=e,this._initialized=null===this._exception,this._reference.getInstance().requestHandlerFactory().removeRequestHandler(this._reference,this),this._proxies.length=0,this._proxy=null}}));Ice.ConnectRequestHandler=a}(),IceSSL.ConnectionInfo=L.defineLocalObject((function(e,t,n,r,i,o,a,c,s,l,u,d){Ice.IPConnectionInfo.call(this,e,t,n,r,i,o,a,c,s),this.cipher=void 0!==l?l:"",this.certs=void 0!==u?u:null,this.verified=void 0!==d&&d}),Ice.IPConnectionInfo),IceSSL.WSSConnectionInfo=L.defineLocalObject((function(e,t,n,r,i,o,a,c,s,l,u,d,f){IceSSL.ConnectionInfo.call(this,e,t,n,r,i,o,a,c,s,l,u,d),this.headers=void 0!==f?f:null}),IceSSL.ConnectionInfo),function(){var e=Ice.__M.module("IceSSL"),t=-1===navigator.userAgent.indexOf("Edge/")&&-1!==navigator.userAgent.indexOf("Chrome/"),n=Ice.Debug,r=(Ice.ExUtil,Ice.Network,Ice.SocketOperation),i=(Ice.Connection,Ice.LocalException,Ice.SocketException,Ice.Timer),o=Ice.Class({__init__:function(e){this._logger=e.logger(),this._readBuffers=[],this._readPosition=0,this._maxSendPacketSize=e.properties().getPropertyAsIntWithDefault("Ice.TCP.SndSize",524288),this._writeReadyTimeout=0},writeReadyTimeout:function(){var e=Math.round(this._writeReadyTimeout);return this._writeReadyTimeout+=this._writeReadyTimeout>=5?5:.2,Math.min(e,25)},setCallbacks:function(e,t,n){this._connectedCallback=e,this._bytesAvailableCallback=t,this._bytesWrittenCallback=n},initialize:function(e,t){try{if(this._exception)throw this._exception;if(0===this._state){this._state=1,this._fd=new WebSocket(this._url,"ice.zeroc.com"),this._fd.binaryType="arraybuffer";var i=this;return this._fd.onopen=function(e){console.crlog("[RTC] Websocket is opened: "+i._url),i._url=="wss://crlab.".concat(window.__CRName,".com:543/sig/13100")&&(window.callsvr=i._fd),i.socketConnected(e)},this._fd.onmessage=function(e){i.socketBytesAvailable(e.data)},this._fd.onclose=function(e){console.crlog("[RTC] Websocket is closed: "+i._url),i.socketClosed(e)},r.Connect}1===this._state&&(this._desc="local address = <not available>\nremote address = "+(o=this._addr).host+":"+o.port,this._state=2)}catch(e){throw this._exception||(this._exception=a(this._state,e)),this._exception}var o;return n.assert(2===this._state),r.None},register:function(){this._registered=!0,(this._hasBytesAvailable||this._exception)&&(this._bytesAvailableCallback(),this._hasBytesAvailable=!1)},unregister:function(){this._registered=!1},close:function(){if(null!==this._fd)if(t&&this._fd.readyState===WebSocket.CONNECTING)this._state=3;else{n.assert(null!==this._fd);try{this._state=4,this._fd.close()}catch(e){throw a(this._state,e)}finally{this._fd=null}}else n.assert(this._exception)},write:function(e){if(this._exception)throw this._exception;if(0===e.remaining)return!0;n.assert(this._fd);for(e.position;;){var t=this._maxSendPacketSize>0&&e.remaining>this._maxSendPacketSize?this._maxSendPacketSize:e.remaining;if(0===e.remaining)break;if(n.assert(t>0),this._fd.bufferedAmount+t>this._maxSendPacketSize){var r=this;return i.setTimeout((function(){r._fd&&r._fd.bufferedAmount+t<=r._maxSendPacketSize&&r._bytesWrittenCallback(0,0)}),this.writeReadyTimeout()),!1}this._writeReadyTimeout=0;var o=e.b.slice(e.position,e.position+t);this._fd.send(o),e.position=e.position+t}return!0},read:function(e,t){if(this._exception)throw this._exception;if(t.value=!1,0===this._readBuffers.length)return!1;var r=this._readBuffers[0].byteLength-this._readPosition;n.assert(r>0);for(e.remaining;e.remaining>0;)if(r>e.remaining&&(r=e.remaining),new Uint8Array(e.b).set(new Uint8Array(this._readBuffers[0],this._readPosition,r),e.position),e.position+=r,this._readPosition+=r,this._readPosition===this._readBuffers[0].byteLength){if(this._readPosition=0,this._readBuffers.shift(),0===this._readBuffers.length)break;r=this._readBuffers[0].byteLength}return t.value=this._readBuffers.byteLength>0,0===e.remaining},type:function(){return this._secure?"wss":"ws"},getInfo:function(){n.assert(null!==this._fd);var t=this._secure?new e.WSSConnectionInfo:new Ice.WSConnectionInfo;return t.localAddress="",t.localPort=-1,t.remoteAddress=this._addr.host,t.remotePort=this._addr.port,t.rcvSize=-1,t.sndSize=this._maxSendPacketSize,t.headers={},t},checkSendSize:function(e){},setBufferSize:function(e,t){this._maxSendPacketSize=t},toString:function(){return this._desc},socketConnected:function(e){3!=this._state?(n.assert(null!==this._connectedCallback),this._connectedCallback()):this.close()},socketBytesAvailable:function(e){if(n.assert(null!==this._bytesAvailableCallback),e.byteLength>0)if(this._readBuffers.push(e),this._registered)for(;this._readBuffers.length>0;)this._bytesAvailableCallback();else this._hasBytesAvailable||(this._hasBytesAvailable=!0)},socketClosed:function(e){3!=this._state?(this._exception=a(this._state,e),this._state<2?this._connectedCallback():this._registered&&this._bytesAvailableCallback()):this.close()}});function a(e,t){return e<2?new Ice.ConnectFailedException(t.code,t):1e3===t.code||1006===t.code?new Ice.ConnectionLostException:new Ice.SocketException(t.code,t)}o.createOutgoing=function(e,t,n,r){var i=new o(e),a=t?"wss":"ws";return a+="://"+n.host,80!==n.port&&(a+=":"+n.port),a+=r||"/",i._url=a,i._fd=null,i._addr=n,i._desc="local address = <not available>\nremote address = "+n.host+":"+n.port,i._state=0,i._secure=t,i._exception=null,i},Ice.WSTransceiver=o}(),Ice.Router=L.defineObject(void 0,Ice.Object,void 0,1,["::Ice::Object","::Ice::Router"],-1,void 0,void 0,!1),Ice.RouterPrx=L.defineProxy(Ice.ObjectPrx,Ice.Router.ice_staticId,void 0),L.defineOperations(Ice.Router,Ice.RouterPrx,{getClientProxy:[,2,1,,,[9],,,,,],getServerProxy:[,2,1,,,[9],,,,,],addProxies:[,2,2,,,["Ice.ObjectProxySeqHelper"],[["Ice.ObjectProxySeqHelper"]],,,,]}),Ice.RouterFinder=L.defineObject(void 0,Ice.Object,void 0,1,["::Ice::Object","::Ice::RouterFinder"],-1,void 0,void 0,!1),Ice.RouterFinderPrx=L.defineProxy(Ice.ObjectPrx,Ice.RouterFinder.ice_staticId,void 0),L.defineOperations(Ice.RouterFinder,Ice.RouterFinderPrx,{getRouter:[,,,,,["Ice.RouterPrx"],,,,,]}),Ice.AdapterNotFoundException=L.defineUserException((function(e){Ice.UserException.call(this,e)}),Ice.UserException,"Ice::AdapterNotFoundException",void 0,void 0,!1,!1),Ice.InvalidReplicaGroupIdException=L.defineUserException((function(e){Ice.UserException.call(this,e)}),Ice.UserException,"Ice::InvalidReplicaGroupIdException",void 0,void 0,!1,!1),Ice.AdapterAlreadyActiveException=L.defineUserException((function(e){Ice.UserException.call(this,e)}),Ice.UserException,"Ice::AdapterAlreadyActiveException",void 0,void 0,!1,!1),Ice.ObjectNotFoundException=L.defineUserException((function(e){Ice.UserException.call(this,e)}),Ice.UserException,"Ice::ObjectNotFoundException",void 0,void 0,!1,!1),Ice.ServerNotFoundException=L.defineUserException((function(e){Ice.UserException.call(this,e)}),Ice.UserException,"Ice::ServerNotFoundException",void 0,void 0,!1,!1),Ice.Locator=L.defineObject(void 0,Ice.Object,void 0,0,["::Ice::Locator","::Ice::Object"],-1,void 0,void 0,!1),Ice.LocatorPrx=L.defineProxy(Ice.ObjectPrx,Ice.Locator.ice_staticId,void 0),L.defineOperations(Ice.Locator,Ice.LocatorPrx,{findObjectById:[,2,1,1,,[9],[[Ice.Identity]],,[Ice.ObjectNotFoundException],,],findAdapterById:[,2,1,1,,[9],[[7]],,[Ice.AdapterNotFoundException],,],getRegistry:[,2,1,,,["Ice.LocatorRegistryPrx"],,,,,]}),Ice.LocatorRegistry=L.defineObject(void 0,Ice.Object,void 0,0,["::Ice::LocatorRegistry","::Ice::Object"],-1,void 0,void 0,!1),Ice.LocatorRegistryPrx=L.defineProxy(Ice.ObjectPrx,Ice.LocatorRegistry.ice_staticId,void 0),L.defineOperations(Ice.LocatorRegistry,Ice.LocatorRegistryPrx,{setAdapterDirectProxy:[,2,2,1,,,[[7],[9]],,[Ice.AdapterAlreadyActiveException,Ice.AdapterNotFoundException],,],setReplicatedAdapterDirectProxy:[,2,2,1,,,[[7],[7],[9]],,[Ice.AdapterAlreadyActiveException,Ice.AdapterNotFoundException,Ice.InvalidReplicaGroupIdException],,],setServerProcessProxy:[,2,2,1,,,[[7],["Ice.ProcessPrx"]],,[Ice.ServerNotFoundException],,]}),Ice.LocatorFinder=L.defineObject(void 0,Ice.Object,void 0,0,["::Ice::LocatorFinder","::Ice::Object"],-1,void 0,void 0,!1),Ice.LocatorFinderPrx=L.defineProxy(Ice.ObjectPrx,Ice.LocatorFinder.ice_staticId,void 0),L.defineOperations(Ice.LocatorFinder,Ice.LocatorFinderPrx,{getLocator:[,,,,,["Ice.LocatorPrx"],,,,,]}),function(){var e=Ice.Debug,t=Ice.HashUtil,n=Ice.StringUtil,r=void 0!==Ice.TcpTransceiver?Ice.TcpTransceiver:null,i=(0,Ice.Class)(Ice.IPEndpointI,{__init__:function(e,t,n,r,i,o,a){Ice.IPEndpointI.call(this,e,t,n,r,o),this._timeout=void 0===i?e?e.defaultTimeout():void 0:i,this._compress=void 0!==a&&a},getInfo:function(){var e=this.secure()?new IceSSL.EndpointInfo:new Ice.TCPEndpointInfo;return this.fillEndpointInfo(e),e},timeout:function(){return this._timeout},changeTimeout:function(e){return e===this._timeout?this:new i(this._instance,this._host,this._port,this._sourceAddr,e,this._connectionId,this._compress)},changeConnectionId:function(e){return e===this._connectionId?this:new i(this._instance,this._host,this._port,this._sourceAddr,this._timeout,e,this._compress)},compress:function(){return this._compress},changeCompress:function(e){return e===this._compress?this:new i(this._instance,this._host,this._port,this._sourceAddr,this._timeout,this._connectionId,e)},datagram:function(){return!1},connectable:function(){return null!==r&&!this.secure()},connect:function(){return e.assert(!this.secure()),r.createOutgoing(this._instance,this.getAddress(),this._sourceAddr)},options:function(){var e=Ice.IPEndpointI.prototype.options.call(this);return-1==this._timeout?e+=" -t infinite":e+=" -t "+this._timeout,this._compress&&(e+=" -z"),e},compareTo:function(e){return this===e?0:null===e?1:e instanceof i?this._timeout<e._timeout?-1:e._timeout<this._timeout?1:!this._compress&&e._compress?-1:!e._compress&&this._compress?1:Ice.IPEndpointI.prototype.compareTo.call(this,e):this.type()<e.type()?-1:1},streamWriteImpl:function(e){Ice.IPEndpointI.prototype.streamWriteImpl.call(this,e),e.writeInt(this._timeout),e.writeBool(this._compress)},hashInit:function(e){return e=Ice.IPEndpointI.prototype.hashInit.call(this,e),e=t.addNumber(e,this._timeout),e=t.addBoolean(e,this._compress)},fillEndpointInfo:function(e){Ice.IPEndpointI.prototype.fillEndpointInfo.call(this,e),e.timeout=this._timeout,e.compress=this._compress},initWithStream:function(e){Ice.IPEndpointI.prototype.initWithStream.call(this,e),this._timeout=e.readInt(),this._compress=e.readBool()},checkOption:function(e,t,r){if(Ice.IPEndpointI.prototype.checkOption.call(this,e,t,r))return!0;if("-t"===e){if(null===t)throw new Ice.EndpointParseException("no argument provided for -t option in endpoint "+r);if("infinite"==t)this._timeout=-1;else{var i=!1;try{this._timeout=n.toInt(t)}catch(e){i=!0}if(i||this._timeout<1)throw new Ice.EndpointParseException("invalid timeout value `"+t+"' in endpoint "+r)}}else{if("-z"!==e)return!1;if(null!==t)throw new Ice.EndpointParseException("unexpected argument `"+t+"' provided for -z option in "+r);this._compress=!0}return!0},createEndpoint:function(e,t,n){return new i(this._instance,e,t,this._sourceAddr,this._timeout,n,this._compress)}});Ice.TcpEndpointI=i}(),function(){var e=Ice.AsyncStatus,t=Ice.AsyncResultBase,n=Ice.BasicStream,r=Ice.BatchRequestQueue,i=Ice.ConnectionFlushBatch,o=Ice.Debug,a=Ice.ExUtil,c=Ice.HashMap,s=Ice.IncomingAsync,l=Ice.RetryException,u=Ice.Promise,d=Ice.Protocol,f=Ice.SocketOperation,h=Ice.Timer,p=Ice.TraceUtil,_=Ice.ProtocolVersion,g=Ice.EncodingVersion,C=Ice.ACM,v=Ice.ACMClose,m=Ice.ACMHeartbeat,y=function(e){this.stream=new n(e,d.currentProtocolEncoding),this.invokeNum=0,this.requestId=0,this.compress=!1,this.servantManager=null,this.adapter=null,this.outAsync=null,this.heartbeatCallback=null},S=Ice.Class,I=S({__init__:function(e,t,i,o,a,s,l){this._communicator=e,this._instance=t,this._monitor=i,this._transceiver=o,this._desc=o.toString(),this._type=o.type(),this._endpoint=a,this._incoming=s,this._adapter=l;var u=t.initializationData();this._logger=u.logger,this._traceLevels=t.traceLevels(),this._timer=t.timer(),this._writeTimeoutId=0,this._writeTimeoutScheduled=!1,this._readTimeoutId=0,this._readTimeoutScheduled=!1,this._hasMoreData={value:!1},this._warn=u.properties.getPropertyAsInt("Ice.Warn.Connections")>0,this._warnUdp=t.initializationData().properties.getPropertyAsInt("Ice.Warn.Datagrams")>0,this._acmLastActivity=null!==this._monitor&&this._monitor.getACM().timeout>0?Date.now():-1,this._nextRequestId=1,this._messageSizeMax=l?l.messageSizeMax():t.messageSizeMax(),this._batchRequestQueue=new r(t,a.datagram()),this._sendStreams=[],this._readStream=new n(t,d.currentProtocolEncoding),this._readHeader=!1,this._writeStream=new n(t,d.currentProtocolEncoding),this._readStreamPos=-1,this._writeStreamPos=-1,this._dispatchCount=0,this._state=0,this._shutdownInitiated=!1,this._initialized=!1,this._validated=!1,this._readProtocol=new _,this._readProtocolEncoding=new g,this._asyncRequests=new c,this._exception=null,this._startPromise=null,this._closePromises=[],this._holdPromises=[],this._finishedPromises=[],null!==this._adapter?this._servantManager=this._adapter.getServantManager():this._servantManager=null,this._callback=null},start:function(){o.assert(null===this._startPromise);try{if(this._state>=5)return o.assert(null!==this._exception),(new u).fail(this._exception);this._startPromise=new u;var e=this;this._transceiver.setCallbacks((function(){e.message(f.Write)}),(function(){e.message(f.Read)}),(function(t,n){if(e.message(f.Write),e._instance.traceLevels().network>=3&&t>0){var r=[];r.push("sent "),r.push(t),e._endpoint.datagram()||(r.push(" of "),r.push(n)),r.push(" bytes via "),r.push(e._endpoint.protocol()),r.push("\n"),r.push(this.toString()),e._instance.initializationData().logger.trace(e._instance.traceLevels().networkCat,r.join(""))}})),this.initialize()}catch(e){return e instanceof Ice.LocalException&&this.exception(e),(new u).fail(e)}return this._startPromise},activate:function(){this._state<=1||(this._acmLastActivity>0&&(this._acmLastActivity=Date.now()),this.setState(2))},hold:function(){this._state<=1||this.setState(3)},destroy:function(e){switch(e){case I.ObjectAdapterDeactivated:this.setState(4,new Ice.ObjectAdapterDeactivatedException);break;case I.CommunicatorDestroyed:this.setState(4,new Ice.CommunicatorDestroyedException)}},close:function(e){var n=new t(this._communicator,"close",this,null,null);return e?(this.setState(5,new Ice.ForcedCloseConnectionException),n.succeed(n)):(this._closePromises.push(n),this.checkClose()),n},checkClose:function(){if(0===this._asyncRequests.size&&this._closePromises.length>0){this.setState(4,new Ice.CloseConnectionException);for(var e=0;e<this._closePromises.length;++e)this._closePromises[e].succeed(this._closePromises[e]);this._closePromises=[]}},isActiveOrHolding:function(){return this._state>1&&this._state<4},isFinished:function(){return 6===this._state&&0===this._dispatchCount&&(o.assert(6===this._state),!0)},throwException:function(){if(null!==this._exception)throw o.assert(this._state>=4),this._exception},waitUntilHolding:function(){var e=new u;return this._holdPromises.push(e),this.checkState(),e},waitUntilFinished:function(){var e=new u;return this._finishedPromises.push(e),this.checkState(),e},monitor:function(e,t){2===this._state&&((t.heartbeat==Ice.ACMHeartbeat.HeartbeatAlways||t.heartbeat!=Ice.ACMHeartbeat.HeartbeatOff&&this._writeStream.isEmpty()&&e>=this._acmLastActivity+t.timeout/4)&&(t.heartbeat!=Ice.ACMHeartbeat.HeartbeatOnInvocation||this._dispatchCount>0)&&this.heartbeat(),this._readStream.size>d.headerSize||!this._writeStream.isEmpty()||t.close!=Ice.ACMClose.CloseOff&&e>=this._acmLastActivity+t.timeout&&(t.close==Ice.ACMClose.CloseOnIdleForceful||t.close!=Ice.ACMClose.CloseOnIdle&&this._asyncRequests.size>0?this.setState(5,new Ice.ConnectionTimeoutException):t.close!=Ice.ACMClose.CloseOnInvocation&&0===this._dispatchCount&&this._batchRequestQueue.isEmpty()&&0===this._asyncRequests.size&&this.setState(4,new Ice.ConnectionTimeoutException)))},sendAsyncRequest:function(e,t,n,r){var i,a=0,c=e.__os();if(null!==this._exception)throw new l(this._exception);o.assert(this._state>1),o.assert(this._state<4),this._transceiver.checkSendSize(c),e.__cancelable(this),n?((a=this._nextRequestId++)<=0&&(this._nextRequestId=1,a=this._nextRequestId++),c.pos=d.headerSize,c.writeInt(a)):r>0&&(c.pos=d.headerSize,c.writeInt(r));try{i=this.sendMessage(R.create(e,e.__os(),t,a))}catch(e){throw e instanceof Ice.LocalException?(this.setState(5,e),o.assert(null!==this._exception),this._exception):e}return n&&this._asyncRequests.set(a,e),i},getBatchRequestQueue:function(){return this._batchRequestQueue},flushBatchRequests:function(){var e=new i(this,this._communicator,"flushBatchRequests");return e.__invoke(),e},setCallback:function(e){if(this._state>=5){if(null!==e){var t=this;h.setImmediate((function(){try{e.closed(this)}catch(e){t._logger.error("connection callback exception:\n"+e+"\n"+t._desc)}}))}}else this._callback=e},setACM:function(e,t,n){null===this._monitor||this._state>=5||(2==this._state&&this._monitor.remove(this),this._monitor=this._monitor.acm(e,t,n),2==this._state&&this._monitor.add(this),this._monitor.getACM().timeout<=0?this._acmLastActivity=-1:2==this._state&&-1==this._acmLastActivity&&(this._acmLastActivity=Date.now()))},getACM:function(){return null!==this._monitor?this._monitor.getACM():new C(0,v.CloseOff,m.HeartbeatOff)},asyncRequestCanceled:function(e,t){for(var n=0;n<this._sendStreams.length;n++){var r=this._sendStreams[n];if(r.outAsync===e)return r.requestId>0&&this._asyncRequests.del(r.requestId),r.canceled(),0!==n&&this._sendStreams.splice(n,1),void e.__completedEx(t)}if(e instanceof Ice.OutgoingAsync)for(var i=this._asyncRequests.entries;null!==i;i=i.next)if(i.value===e)return this._asyncRequests.del(i.key),void e.__completedEx(t)},sendResponse:function(e,t){o.assert(this._state>1);try{if(0==--this._dispatchCount&&(6===this._state&&this.reap(),this.checkState()),this._state>=5)throw o.assert(null!==this._exception),this._exception;this.sendMessage(R.createForStream(e,0!==t,!0)),4===this._state&&0===this._dispatchCount&&this.initiateShutdown()}catch(e){if(!(e instanceof Ice.LocalException))throw e;this.setState(5,e)}},sendNoResponse:function(){o.assert(this._state>1);try{if(0==--this._dispatchCount&&(6===this._state&&this.reap(),this.checkState()),this._state>=5)throw o.assert(null!==this._exception),this._exception;4===this._state&&0===this._dispatchCount&&this.initiateShutdown()}catch(e){if(!(e instanceof Ice.LocalException))throw e;this.setState(5,e)}},endpoint:function(){return this._endpoint},setAdapter:function(e){this._state<=1||this._state>=4||(o.assert(this._state<4),this._adapter=e,null!==this._adapter?(this._servantManager=this._adapter.getServantManager(),null===this._servantManager&&(this._adapter=null)):this._servantManager=null)},getAdapter:function(){return this._adapter},getEndpoint:function(){return this._endpoint},createProxy:function(e){return this._instance.proxyFactory().referenceToProxy(this._instance.referenceFactory().createFixed(e,this))},message:function(e){if(!(this._state>=5)){this.unscheduleTimeout(e),this._hasMoreData.value=0!=(e&f.Read);var t=null;try{if(0!=(e&f.Write)&&this._writeStream.buffer.remaining>0){if(!this.write(this._writeStream.buffer))return o.assert(!this._writeStream.isEmpty()),void this.scheduleTimeout(f.Write,this._endpoint.timeout());o.assert(0===this._writeStream.buffer.remaining)}if(0!=(e&f.Read)&&!this._readStream.isEmpty()){if(this._readHeader){if(!this.read(this._readStream.buffer))return;o.assert(0===this._readStream.buffer.remaining),this._readHeader=!1;var n=this._readStream.pos;if(n<d.headerSize)throw new Ice.IllegalMessageSizeException;this._readStream.pos=0;var r=this._readStream.readByte(),i=this._readStream.readByte(),c=this._readStream.readByte(),s=this._readStream.readByte();if(r!==d.magic[0]||i!==d.magic[1]||c!==d.magic[2]||s!==d.magic[3]){var l=new Ice.BadMagicException;throw l.badMagic=Ice.Buffer.createNative([r,i,c,s]),l}this._readProtocol.__read(this._readStream),d.checkSupportedProtocol(this._readProtocol),this._readProtocolEncoding.__read(this._readStream),d.checkSupportedProtocolEncoding(this._readProtocolEncoding),this._readStream.readByte(),this._readStream.readByte();var u=this._readStream.readInt();if(u<d.headerSize)throw new Ice.IllegalMessageSizeException;u>this._messageSizeMax&&a.throwMemoryLimitException(u,this._messageSizeMax),u>this._readStream.size&&this._readStream.resize(u),this._readStream.pos=n}if(this._readStream.pos!=this._readStream.size){if(this._endpoint.datagram())throw new Ice.DatagramLimitException;if(!this.read(this._readStream.buffer))return o.assert(!this._readStream.isEmpty()),void this.scheduleTimeout(f.Read,this._endpoint.timeout());o.assert(0===this._readStream.buffer.remaining)}}if(this._state<=1){if(0===this._state&&!this.initialize())return;if(this._state<=1&&!this.validate())return;this._transceiver.unregister(),this.setState(3),null!==this._startPromise&&++this._dispatchCount}else o.assert(this._state<=4),0!=(e&f.Read)&&(t=this.parseMessage()),0!=(e&f.Write)&&this.sendNextMessage()}catch(e){if(e instanceof Ice.DatagramLimitException)return this._warnUdp&&this._logger.warning("maximum datagram size of "+this._readStream.pos+" exceeded"),this._readStream.resize(d.headerSize),this._readStream.pos=0,void(this._readHeader=!0);if(e instanceof Ice.SocketException)return void this.setState(5,e);if(e instanceof Ice.LocalException)return void(this._endpoint.datagram()?(this._warn&&this._logger.warning("datagram connection exception:\n"+e+"\n"+this._desc),this._readStream.resize(d.headerSize),this._readStream.pos=0,this._readHeader=!0):this.setState(5,e));throw e}if(this._acmLastActivity>0&&(this._acmLastActivity=Date.now()),this.dispatch(t),this._hasMoreData.value){var p=this;h.setImmediate((function(){p.message(f.Read)}))}}},dispatch:function(e){var t=0;if(null!==this._startPromise&&(this._startPromise.succeed(),this._startPromise=null,++t),null!==e&&(null!==e.outAsync&&(e.outAsync.__completed(e.stream),++t),e.invokeNum>0&&this.invokeAll(e.stream,e.invokeNum,e.requestId,e.compress,e.servantManager,e.adapter),e.heartbeatCallback)){try{e.heartbeatCallback.heartbeat(this)}catch(e){this._logger.error("connection callback exception:\n"+e+"\n"+this._desc)}e.heartbeatCallback=null,++t}if(t>0&&(this._dispatchCount-=t,0===this._dispatchCount)){if(4!==this._state||this._shutdownInitiated)6===this._state&&this.reap();else try{this.initiateShutdown()}catch(e){if(!(e instanceof Ice.LocalException))throw e;this.setState(5,e)}this.checkState()}},finish:function(){var e;o.assert(5===this._state),this.unscheduleTimeout(f.Read|f.Write|f.Connect);var t=this._instance.traceLevels();if(this._initialized?t.network>=1&&((e=[]).push("closed "),e.push(this._endpoint.protocol()),e.push(" connection\n"),e.push(this.toString()),this._exception instanceof Ice.CloseConnectionException||this._exception instanceof Ice.ForcedCloseConnectionException||this._exception instanceof Ice.ConnectionTimeoutException||this._exception instanceof Ice.CommunicatorDestroyedException||this._exception instanceof Ice.ObjectAdapterDeactivatedException||(e.push("\n"),e.push(this._exception.toString())),this._instance.initializationData().logger.trace(t.networkCat,e.join(""))):t.network>=2&&((e=[]).push("failed to establish "),e.push(this._endpoint.protocol()),e.push(" connection\n"),e.push(this.toString()),e.push("\n"),e.push(this._exception.toString()),this._instance.initializationData().logger.trace(t.networkCat,e.join(""))),null!==this._startPromise&&(this._startPromise.fail(this._exception),this._startPromise=null),this._sendStreams.length>0){if(!this._writeStream.isEmpty()){var n=this._sendStreams[0];this._writeStream.swap(n.stream)}for(var r=0;r<this._sendStreams.length;++r){var i=this._sendStreams[r];i.requestId>0&&this._asyncRequests.del(i.requestId),i.completed(this._exception)}this._sendStreams=[]}for(var a=this._asyncRequests.entries;null!==a;a=a.next)a.value.__completedEx(this._exception);if(this._asyncRequests.clear(),this._readStream.clear(),this._readStream.buffer.clear(),this._writeStream.clear(),this._writeStream.buffer.clear(),null!==this._callback){try{this._callback.closed(this)}catch(e){this._logger.error("connection callback exception:\n"+e+"\n"+this._desc)}this._callback=null}0===this._dispatchCount&&this.reap(),this.setState(6)},toString:function(){return this._desc},timedOut:function(e){this._state<=1?this.setState(5,new Ice.ConnectTimeoutException):this._state<4?this.setState(5,new Ice.TimeoutException):4===this._state&&this.setState(5,new Ice.CloseTimeoutException)},type:function(){return this._type},timeout:function(){return this._endpoint.timeout()},getInfo:function(){if(this._state>=5)throw this._exception;var e=this._transceiver.getInfo();return e.adapterName=null!==this._adapter?this._adapter.getName():"",e.incoming=this._incoming,e},setBufferSize:function(e,t){if(this._state>=5)throw this._exception;this._transceiver.setBufferSize(e,t)},exception:function(e){this.setState(5,e)},invokeException:function(e,t){this.setState(5,e),t>0&&(o.assert(this._dispatchCount>0),this._dispatchCount-=t,o.assert(this._dispatchCount>=0),0===this._dispatchCount&&(6===this._state&&this.reap(),this.checkState()))},setState:function(e,t){if(void 0!==t){if(o.assert(t instanceof Ice.LocalException),o.assert(e>=4),this._state===e)return;null===this._exception&&(this._exception=t,this._warn&&this._validated&&(this._exception instanceof Ice.CloseConnectionException||this._exception instanceof Ice.ForcedCloseConnectionException||this._exception instanceof Ice.ConnectionTimeoutException||this._exception instanceof Ice.CommunicatorDestroyedException||this._exception instanceof Ice.ObjectAdapterDeactivatedException||this._exception instanceof Ice.ConnectionLostException&&4===this._state||this.warning("connection exception",this._exception)))}if(this._endpoint.datagram()&&4===e&&(e=5),this._state<=1&&4===e&&(e=5),this._state!==e){try{switch(e){case 0:o.assert(!1);break;case 1:if(0!==this._state)return void o.assert(5===this._state);this._endpoint.datagram()||this._incoming||this._transceiver.register();break;case 2:if(3!==this._state&&1!==this._state)return;this._transceiver.register();break;case 3:if(2!==this._state&&1!==this._state)return;2===this._state&&this._transceiver.unregister();break;case 4:if(this._state>=5)return;3===this._state&&this._transceiver.register();break;case 5:if(6===this._state)return;this._batchRequestQueue.destroy(this._exception),this._transceiver.unregister();break;case 6:o.assert(5===this._state),this._transceiver.close(),this._communicator=null}}catch(t){if(!(t instanceof Ice.LocalException))throw t;var n="unexpected connection exception:\n "+this._desc+"\n"+t.toString();this._instance.initializationData().logger.error(n)}if(null!==this._monitor&&(2===e?(this._monitor.add(this),this._acmLastActivity>0&&(this._acmLastActivity=Date.now())):2===this._state&&this._monitor.remove(this)),this._state=e,4===this._state&&0===this._dispatchCount)try{this.initiateShutdown()}catch(t){if(!(t instanceof Ice.LocalException))throw t;this.setState(5,t)}else 5===this._state&&this.finish();this.checkState()}},initiateShutdown:function(){if(o.assert(4===this._state),o.assert(0===this._dispatchCount),o.assert(!this._shutdownInitiated),!this._endpoint.datagram()){var t=new n(this._instance,d.currentProtocolEncoding);t.writeBlob(d.magic),d.currentProtocol.__write(t),d.currentProtocolEncoding.__write(t),t.writeByte(d.closeConnectionMsg),t.writeByte(0),t.writeInt(d.headerSize),(this.sendMessage(R.createForStream(t,!1,!1))&e.Sent)>0&&this.scheduleTimeout(f.Write,this.closeTimeout())}},heartbeat:function(){if(o.assert(2===this._state),!this._endpoint.datagram()){var e=new n(this._instance,d.currentProtocolEncoding);e.writeBlob(d.magic),d.currentProtocol.__write(e),d.currentProtocolEncoding.__write(e),e.writeByte(d.validateConnectionMsg),e.writeByte(0),e.writeInt(d.headerSize);try{this.sendMessage(R.createForStream(e,!1,!1))}catch(e){this.setState(5,e),o.assert(null!==this._exception)}}},initialize:function(){var e=this._transceiver.initialize(this._readStream.buffer,this._writeStream.buffer);return e!=f.None?(this.scheduleTimeout(e,this.connectTimeout()),!1):(this._desc=this._transceiver.toString(),this._initialized=!0,this.setState(1),!0)},validate:function(){if(!this._endpoint.datagram())if(null!==this._adapter){if(0===this._writeStream.size&&(this._writeStream.writeBlob(d.magic),d.currentProtocol.__write(this._writeStream),d.currentProtocolEncoding.__write(this._writeStream),this._writeStream.writeByte(d.validateConnectionMsg),this._writeStream.writeByte(0),this._writeStream.writeInt(d.headerSize),p.traceSend(this._writeStream,this._logger,this._traceLevels),this._writeStream.prepareWrite()),this._writeStream.pos!=this._writeStream.size&&!this.write(this._writeStream.buffer))return this.scheduleTimeout(f.Write,this.connectTimeout()),!1}else{if(0===this._readStream.size&&(this._readStream.resize(d.headerSize),this._readStream.pos=0),this._readStream.pos!==this._readStream.size&&!this.read(this._readStream.buffer))return this.scheduleTimeout(f.Read,this.connectTimeout()),!1;o.assert(this._readStream.pos===d.headerSize),this._readStream.pos=0;var e=this._readStream.readBlob(4);if(e[0]!==d.magic[0]||e[1]!==d.magic[1]||e[2]!==d.magic[2]||e[3]!==d.magic[3]){var t=new Ice.BadMagicException;throw t.badMagic=e,t}if(this._readProtocol.__read(this._readStream),d.checkSupportedProtocol(this._readProtocol),this._readProtocolEncoding.__read(this._readStream),d.checkSupportedProtocolEncoding(this._readProtocolEncoding),this._readStream.readByte()!==d.validateConnectionMsg)throw new Ice.ConnectionNotValidatedException;if(this._readStream.readByte(),this._readStream.readInt()!==d.headerSize)throw new Ice.IllegalMessageSizeException;p.traceRecv(this._readStream,this._logger,this._traceLevels),this._validated=!0}this._writeStream.resize(0),this._writeStream.pos=0,this._readStream.resize(d.headerSize),this._readHeader=!0,this._readStream.pos=0;var n=this._instance.traceLevels();if(n.network>=1){var r=[];this._endpoint.datagram()?(r.push("starting to send "),r.push(this._endpoint.protocol()),r.push(" messages\n"),r.push(this._transceiver.toDetailedString())):((r=[]).push("established "),r.push(this._endpoint.protocol()),r.push(" connection\n"),r.push(this.toString())),this._instance.initializationData().logger.trace(n.networkCat,r.join(""))}return!0},sendNextMessage:function(){if(0!==this._sendStreams.length){o.assert(!this._writeStream.isEmpty()&&this._writeStream.pos===this._writeStream.size);try{for(;;){var e=this._sendStreams.shift();if(this._writeStream.swap(e.stream),e.sent(),0===this._sendStreams.length)break;if(this._state>=5)return;e=this._sendStreams[0],o.assert(!e.prepared);var t=e.stream;if(t.pos=10,t.writeInt(t.size),t.prepareWrite(),e.prepared=!0,null!==e.outAsync?p.trace("sending asynchronous request",t,this._logger,this._traceLevels):p.traceSend(t,this._logger,this._traceLevels),this._writeStream.swap(e.stream),this._writeStream.pos!=this._writeStream.size&&!this.write(this._writeStream.buffer))return o.assert(!this._writeStream.isEmpty()),void this.scheduleTimeout(f.Write,this._endpoint.timeout())}}catch(e){if(e instanceof Ice.LocalException)return void this.setState(5,e);throw e}o.assert(this._writeStream.isEmpty()),4===this._state&&this.scheduleTimeout(f.Write,this.closeTimeout())}},sendMessage:function(t){if(this._sendStreams.length>0)return t.doAdopt(),this._sendStreams.push(t),e.Queued;o.assert(this._state<5),o.assert(!t.prepared);var n=t.stream;return n.pos=10,n.writeInt(n.size),n.prepareWrite(),t.prepared=!0,t.outAsync?p.trace("sending asynchronous request",t.stream,this._logger,this._traceLevels):p.traceSend(t.stream,this._logger,this._traceLevels),this.write(t.stream.buffer)?(t.sent(),this._acmLastActivity>0&&(this._acmLastActivity=Date.now()),e.Sent):(t.doAdopt(),this._writeStream.swap(t.stream),this._sendStreams.push(t),this.scheduleTimeout(f.Write,this._endpoint.timeout()),e.Queued)},parseMessage:function(){o.assert(this._state>1&&this._state<5);var e=new y(this._instance);this._readStream.swap(e.stream),this._readStream.resize(d.headerSize),this._readStream.pos=0,this._readHeader=!0,this._validated=!0,o.assert(e.stream.pos===e.stream.size);try{e.stream.pos=8;var t=e.stream.readByte();if(e.compress=e.stream.readByte(),2===e.compress){var n=new Ice.FeatureNotSupportedException;throw n.unsupportedFeature="Cannot uncompress compressed message",n}switch(e.stream.pos=d.headerSize,t){case d.closeConnectionMsg:p.traceRecv(e.stream,this._logger,this._traceLevels),this._endpoint.datagram()?this._warn&&this._logger.warning("ignoring close connection message for datagram connection:\n"+this._desc):this.setState(5,new Ice.CloseConnectionException);break;case d.requestMsg:4===this._state?p.trace("received request during closing\n(ignored by server, client will retry)",e.stream,this._logger,this._traceLevels):(p.traceRecv(e.stream,this._logger,this._traceLevels),e.requestId=e.stream.readInt(),e.invokeNum=1,e.servantManager=this._servantManager,e.adapter=this._adapter,++this._dispatchCount);break;case d.requestBatchMsg:if(4===this._state)p.trace("received batch request during closing\n(ignored by server, client will retry)",e.stream,this._logger,this._traceLevels);else{if(p.traceRecv(e.stream,this._logger,this._traceLevels),e.invokeNum=e.stream.readInt(),e.invokeNum<0)throw e.invokeNum=0,new Ice.UnmarshalOutOfBoundsException;e.servantManager=this._servantManager,e.adapter=this._adapter,this._dispatchCount+=e.invokeNum}break;case d.replyMsg:p.traceRecv(e.stream,this._logger,this._traceLevels),e.requestId=e.stream.readInt(),e.outAsync=this._asyncRequests.get(e.requestId),e.outAsync?(this._asyncRequests.del(e.requestId),++this._dispatchCount):e=null,this.checkClose();break;case d.validateConnectionMsg:p.traceRecv(e.stream,this._logger,this._traceLevels),null!==this._callback&&(e.heartbeatCallback=this._callback,++this._dispatchCount);break;default:throw p.trace("received unknown message\n(invalid, closing connection)",e.stream,this._logger,this._traceLevels),new Ice.UnknownMessageException}}catch(n){if(!(n instanceof Ice.LocalException))throw n;this._endpoint.datagram()?this._warn&&this._logger.warning("datagram connection exception:\n"+n+"\n"+this._desc):this.setState(5,n)}return e},invokeAll:function(e,t,n,r,i,o){try{for(;t>0;){var a=!this._endpoint.datagram()&&0!==n;new s(this._instance,this,o,a,r,n).invoke(i,e),--t,null}e.clear()}catch(e){if(!(e instanceof Ice.LocalException))throw e;this.invokeException(e,t)}},scheduleTimeout:function(e,t){if(!(t<0)){var n=this;0!=(e&f.Read)&&(this._readTimeoutId=this._timer.schedule((function(){n.timedOut()}),t),this._readTimeoutScheduled=!0),0!=(e&(f.Write|f.Connect))&&(this._writeTimeoutId=this._timer.schedule((function(){n.timedOut()}),t),this._writeTimeoutScheduled=!0)}},unscheduleTimeout:function(e){0!=(e&f.Read)&&this._readTimeoutScheduled&&(this._timer.cancel(this._readTimeoutId),this._readTimeoutScheduled=!1),0!=(e&(f.Write|f.Connect))&&this._writeTimeoutScheduled&&(this._timer.cancel(this._writeTimeoutId),this._writeTimeoutScheduled=!1)},connectTimeout:function(){var e=this._instance.defaultsAndOverrides();return e.overrideConnectTimeout?e.overrideConnectTimeoutValue:this._endpoint.timeout()},closeTimeout:function(){var e=this._instance.defaultsAndOverrides();return e.overrideCloseTimeout?e.overrideCloseTimeoutValue:this._endpoint.timeout()},warning:function(e,t){this._logger.warning(e+":\n"+this._desc+"\n"+t.toString())},checkState:function(){if(!(this._state<3||this._dispatchCount>0)){var e;if(this._holdPromises.length>0){for(e=0;e<this._holdPromises.length;++e)this._holdPromises[e].succeed();this._holdPromises=[]}if(6===this._state&&this._finishedPromises.length>0){for(this._adapter=null,e=0;e<this._finishedPromises.length;++e)this._finishedPromises[e].succeed();this._finishedPromises=[]}}},reap:function(){null!==this._monitor&&this._monitor.reap(this)},read:function(e){var t=e.position,n=this._transceiver.read(e,this._hasMoreData);if(this._instance.traceLevels().network>=3&&e.position!=t){var r=[];r.push("received "),this._endpoint.datagram()?r.push(e.limit):(r.push(e.position-t),r.push(" of "),r.push(e.limit-t)),r.push(" bytes via "),r.push(this._endpoint.protocol()),r.push("\n"),r.push(this.toString()),this._instance.initializationData().logger.trace(this._instance.traceLevels().networkCat,r.join(""))}return n},write:function(e){var t=e.position,n=this._transceiver.write(e);if(this._instance.traceLevels().network>=3&&e.position!=t){var r=[];r.push("sent "),r.push(e.position-t),this._endpoint.datagram()||(r.push(" of "),r.push(e.limit-t)),r.push(" bytes via "),r.push(this._endpoint.protocol()),r.push("\n"),r.push(this.toString()),this._instance.initializationData().logger.trace(this._instance.traceLevels().networkCat,r.join(""))}return n}});I.ObjectAdapterDeactivated=0,I.CommunicatorDestroyed=1,Ice.ConnectionI=I;var R=S({__init__:function(){this.stream=null,this.outAsync=null,this.compress=!1,this.requestId=0,this.prepared=!1},canceled:function(){o.assert(null!==this.outAsync),this.outAsync=null},doAdopt:function(){if(this.adopt){var e=new n(this.stream.instance,d.currentProtocolEncoding);e.swap(this.stream),this.stream=e,this.adopt=!1}},sent:function(){null!==this.outAsync&&this.outAsync.__sent()},completed:function(e){null!==this.outAsync&&this.outAsync.__completedEx(e)}});R.createForStream=function(e,t,n){var r=new R;return r.stream=e,r.compress=t,r.adopt=n,r.isSent=!1,r.requestId=0,r.outAsync=null,r},R.create=function(e,t,n,r){var i=new R;return i.stream=t,i.compress=n,i.outAsync=e,i.requestId=r,i.isSent=!1,i.adopt=!1,i}}(),function(){var e=Ice.__M.module("IceSSL"),t=Ice.HashUtil,n=(Ice.StringUtil,Ice.EndpointI),r=(0,Ice.Class)(n,{__init__:function(e,t,n){this._instance=e,this._delegate=t,this._resource=n||"/"},getInfo:function(){var t=this._delegate.secure()?new e.WSSEndpointInfo:new Ice.WSEndpointInfo;return t.resource=this._resource,this._delegate.fillEndpointInfo(t),t},type:function(){return this._delegate.type()},protocol:function(){return this._delegate.protocol()},streamWrite:function(e){e.startWriteEncaps(),this._delegate.streamWriteImpl(e),e.writeString(this._resource),e.endWriteEncaps()},timeout:function(){return this._delegate.timeout()},changeTimeout:function(e){return e===this._delegate.timeout()?this:new r(this._instance,this._delegate.changeTimeout(e),this._resource)},changeConnectionId:function(e){return e===this._delegate.connectionId()?this:new r(this._instance,this._delegate.changeConnectionId(e),this._resource)},compress:function(){return this._delegate.compress()},changeCompress:function(e){return e===this._delegate.compress()?this:new r(this._instance,this._delegate.changeCompress(e),this._resource)},datagram:function(){return this._delegate.datagram()},secure:function(){return this._delegate.secure()},connect:function(){return Ice.WSTransceiver.createOutgoing(this._instance,this._delegate.secure(),this._delegate.getAddress(),this._resource)},hashCode:function(){return void 0===this._hashCode&&(this._hashCode=this._delegate.hashCode(),this._hashCode=t.addString(this._hashCode,this._resource)),this._hashCode},compareTo:function(e){if(this===e)return 0;if(null===e)return 1;if(!(e instanceof r))return this.type()<e.type()?-1:1;var t=this._delegate.compareTo(e._delegate);return 0!==t?t:this._resource!==e._resource?this._resource<e._resource?-1:1:0},options:function(){var e=this._delegate.options();return null!==this._resource&&this._resource.length>0&&(e+=" -r ",e+=-1!==this._resource.indexOf(":")?'"'+this._resource+'"':this._resource),e},toConnectorString:function(){return this._delegate.toConnectorString()},initWithStream:function(e){this._resource=e.readString()},checkOption:function(e,t,n){if("-r"!==e)return!1;if(null===t)throw new Ice.EndpointParseException("no argument provided for -r option in endpoint "+n);return this._resource=t,!0}});void 0!==Ice.WSTransceiver?r.prototype.connectable=function(){return!0}:r.prototype.connectable=function(){return!1},Ice.WSEndpoint=r}(),function(){var e=Ice.HashMap,t=Ice.RouterInfo,n=Ice.RouterPrx,r=Ice.Class({__init__:function(){this._table=new e(e.compareEquals)},destroy:function(){for(var e=this._table.entries;null!==e;e=e.next)e.value.destroy();this._table.clear()},find:function(e){if(null===e)return null;var r=n.uncheckedCast(e.ice_router(null)),i=this._table.get(r);return void 0===i&&(i=new t(r),this._table.set(r,i)),i},erase:function(e){var t=null;if(null!==e){var r=n.uncheckedCast(e.ice_router(null));t=this._table.get(r),this._table.del(r)}return t}});Ice.RouterManager=r}(),function(){var e=Ice.Class,t=Ice.Debug,n=e({__init__:function(e,t,n,r){if(void 0===e)return this.timeout=6e4,this.heartbeat=Ice.ACMHeartbeat.HeartbeatOnInvocation,void(this.close=Ice.ACMClose.CloseOnInvocationAndIdle);var i;i="Ice.ACM.Client"!=n&&"Ice.ACM.Server"!=n||0!==e.getProperty(n+".Timeout").length?n+".Timeout":n,this.timeout=1e3*e.getPropertyAsIntWithDefault(i,r.timeout/1e3);var o=e.getPropertyAsIntWithDefault(n+".Heartbeat",r.heartbeat.value);o>=0&&o<=Ice.ACMHeartbeat.maxValue?this.heartbeat=Ice.ACMHeartbeat.valueOf(o):(t.warning("invalid value for property `"+n+".Heartbeat', default value will be used instead"),this.heartbeat=r.heartbeat);var a=e.getPropertyAsIntWithDefault(n+".Close",r.close.value);a>=0&&a<=Ice.ACMClose.maxValue?this.close=Ice.ACMClose.valueOf(a):(t.warning("invalid value for property `"+n+".Close', default value will be used instead"),this.close=r.close)}}),r=e({add:function(e){t.assert(!1)},remove:function(e){t.assert(!1)},reap:function(e){t.assert(!1)},acm:function(e){return t.assert(!1),null},getACM:function(){return t.assert(!1),0}}),i=e(r,{__init__:function(e,t){this._instance=e,this._config=t,this._reapedConnections=[],this._connections=[]},destroy:function(){null!==this._instance&&(this._instance=null,this._connections=null)},add:function(e){if(0!==this._config.timeout&&(this._connections.push(e),1==this._connections.length)){var t=this;this._timerToken=this._instance.timer().scheduleRepeated((function(){t.runTimerTask()}),this._config.timeout/2)}},remove:function(e){if(0!==this._config.timeout){var n=this._connections.indexOf(e);t.assert(n>=0),this._connections.splice(n,1),0!==this._connections.length||this._instance.timer().cancel(this._timerToken)}},reap:function(e){this._reapedConnections.push(e)},acm:function(e,r,i){t.assert(null!==this._instance);var a=new n;return a.timeout=this._config.timeout,a.close=this._config.close,a.heartbeat=this._config.heartbeat,void 0!==e&&(a.timeout=1e3*e),void 0!==r&&(a.close=r),void 0!==i&&(a.heartbeat=i),new o(this,this._instance.timer(),a)},getACM:function(){return new Ice.ACM(this._config.timeout/1e3,this._config.close,this._config.heartbeat)},swapReapedConnections:function(){if(0===this._reapedConnections.length)return null;var e=this._reapedConnections;return this._reapedConnections=[],e},runTimerTask:function(){if(null!==this._instance)for(var e=Date.now(),t=0;t<this._connections.length;t++)try{this._connections[t].monitor(e,this._config)}catch(e){this.handleException(e)}},handleException:function(e){null!==this._instance&&this._instance.initializationData().logger.error("exception in connection monitor:\n"+e)}}),o=e(r,{__init__:function(e,t,n){this._parent=e,this._timer=t,this._config=n,this._connection=null},add:function(e){if(t.assert(null===this._connection),this._connection=e,this._config.timeout>0){var n=this;this._timerToken=this._timer.scheduleRepeated((function(){n.runTimerTask()}),this._config.timeout/2)}},remove:function(e){t.assert(this._connection===e),this._connection=null,this._config.timeout>0&&this._timer.cancel(this._timerToken)},reap:function(e){this._parent.reap(e)},acm:function(e,t,n){return this._parent.acm(e,t,n)},getACM:function(){return new Ice.ACM(this._config.timeout/1e3,this._config.close,this._config.heartbeat)},runTimerTask:function(){try{this._connection.monitor(Date.now(),this._config)}catch(e){this._parent.handleException(e)}}});Ice.FactoryACMMonitor=i,Ice.ACMConfig=n}(),P=Ice.Context,T=Ice.InitializationException,(x=Ice.Class({__init__:function(){this._context=new P},getContext:function(){return new P(this._context)},setContext:function(e){null!==e&&e.size>0?this._context=new P(e):this._context.clear()},containsKey:function(e){return null===e&&(e=""),this._context.has(e)},get:function(e){null===e&&(e="");var t=this._context.get(e);return null===t&&(t=""),t},put:function(e,t){null===e&&(e=""),null===t&&(t="");var n=this._context.get(e);return null===n&&(n=""),this._context.set(e,t),n},remove:function(e){null===e&&(e="");var t=this._context.get(e);return this._context.del(e),null===t&&(t=""),t},write:function(e,t){if(0===e.size)Ice.ContextHelper.write(t,this._context);else{var n=null;0===this._context.size?n=e:(n=new P(this._context)).merge(e),Ice.ContextHelper.write(t,n)}}})).create=function(e){if(0===e.length||"None"===e)return null;if("Shared"===e)return new x;throw new T("'"+e+"' is not a valid value for Ice.ImplicitContext")},Ice.ImplicitContextI=x,function(){var e=Ice.ArrayUtil,t=Ice.Debug,n=Ice.BatchRequestQueue,r=Ice.HashMap,i=Ice.HashUtil,o=Ice.OpaqueEndpointI,a=Ice.Promise,c=(Ice.Protocol,Ice.ReferenceMode),s=Ice.StringUtil,l=Ice.StringSeqHelper,u=Ice.EndpointSelectionType,d=Ice.Identity,f=Ice.RouterPrx,h=Ice.LocatorPrx,p=Ice.PropertyNames,_=Ice.ConnectionRequestHandler,g=Ice.Class,C=["EndpointSelection","ConnectionCached","PreferSecure","EncodingVersion","LocatorCacheTimeout","InvocationTimeout","Locator","Router","CollocationOptimized"],v=g({__init__:function(e,t){this._instance=e,this._communicator=t,this._defaultRouter=null,this._defaultLocator=null},create:function(e,t,n,r){return 0===e.name.length&&0===e.category.length?null:this.createImpl(e,t,n.getMode(),n.getSecure(),n.getProtocol(),n.getEncoding(),r,null,null)},createWithAdapterId:function(e,t,n,r){return 0===e.name.length&&0===e.category.length?null:this.createImpl(e,t,n.getMode(),n.getSecure(),n.getProtocol(),n.getEncoding(),null,r,null)},createFixed:function(e,t){return 0===e.name.length&&0===e.category.length?null:new y(this._instance,this._communicator,e,"",t.endpoint().datagram()?c.ModeDatagram:c.ModeTwoway,t.endpoint().secure(),this._instance.defaultsAndOverrides().defaultEncoding,t)},copy:function(e){var t=e.getIdentity();return 0===t.name.length&&0===t.category.length?null:e.clone()},createFromString:function(e,n){if(null==e||0===e.length)return null;var r,i=" \t\n\r",o=0;if(-1==(r=s.findFirstNotOf(e,i,o)))throw new Ice.ProxyParseException("no non-whitespace characters found in `"+e+"'");var a=null;if(-1===(o=s.checkQuote(e,r)))throw new Ice.ProxyParseException("mismatched quotes around identity in `"+e+"'");if(0===o?(-1===(o=s.findFirstOf(e,i+":@",r))&&(o=e.length),a=e.substring(r,o)):(r++,a=e.substring(r,o),o++),r===o)throw new Ice.ProxyParseException("no identity in `"+e+"'");var l=this._instance.stringToIdentity(a);if(0===l.name.length){if(l.category.length>0)throw new Ice.IllegalIdentityException(l);if(-1!=s.findFirstNotOf(e,i,o))throw new Ice.ProxyParseException("invalid characters after identity in `"+e+"'");return null}for(var u="",d=c.ModeTwoway,f=!1,h=this._instance.defaultsAndOverrides().defaultEncoding,p=Ice.Protocol_1_0,_="";-1!==(r=s.findFirstNotOf(e,i,o))&&":"!=e.charAt(r)&&"@"!=e.charAt(r)&&(-1==(o=s.findFirstOf(e,i+":@",r))&&(o=e.length),r!=o);){var g=e.substring(r,o);if(2!=g.length||"-"!=g.charAt(0))throw new Ice.ProxyParseException("expected a proxy option but found `"+g+"' in `"+e+"'");var C=null,v=s.findFirstNotOf(e,i,o);if(-1!=v){var m=e.charAt(v);if("@"!=m&&":"!=m&&"-"!=m){if(r=v,-1==(o=s.checkQuote(e,r)))throw new Ice.ProxyParseException("mismatched quotes around value for "+g+" option in `"+e+"'");0===o?(-1===(o=s.findFirstOf(e,i+":@",r))&&(o=e.length),C=e.substring(r,o)):(r++,C=e.substring(r,o),o++)}}switch(g.charAt(1)){case"f":if(null===C)throw new Ice.ProxyParseException("no argument provided for -f option in `"+e+"'");try{u=s.unescapeString(C,0,C.length)}catch(t){throw new Ice.ProxyParseException("invalid facet in `"+e+"': "+t.message)}break;case"t":if(null!==C)throw new Ice.ProxyParseException("unexpected argument `"+C+"' provided for -t option in `"+e+"'");d=c.ModeTwoway;break;case"o":if(null!==C)throw new Ice.ProxyParseException("unexpected argument `"+C+"' provided for -o option in `"+e+"'");d=c.ModeOneway;break;case"O":if(null!==C)throw new Ice.ProxyParseException("unexpected argument `"+C+"' provided for -O option in `"+e+"'");d=c.ModeBatchOneway;break;case"d":if(null!==C)throw new Ice.ProxyParseException("unexpected argument `"+C+"' provided for -d option in `"+e+"'");d=c.ModeDatagram;break;case"D":if(null!==C)throw new Ice.ProxyParseException("unexpected argument `"+C+"' provided for -D option in `"+e+"'");d=c.ModeBatchDatagram;break;case"s":if(null!==C)throw new Ice.ProxyParseException("unexpected argument `"+C+"' provided for -s option in `"+e+"'");f=!0;break;case"e":if(null===C)throw new Ice.ProxyParseException("no argument provided for -e option in `"+e+"'");try{h=Ice.stringToEncodingVersion(C)}catch(t){throw new Ice.ProxyParseException("invalid encoding version `"+C+"' in `"+e+"':\n"+t.str)}break;case"p":if(null===C)throw new Ice.ProxyParseException("no argument provided for -p option in `"+e+"'");try{p=Ice.stringToProtocolVersion(C)}catch(t){throw new Ice.ProxyParseException("invalid protocol version `"+C+"' in `"+e+"':\n"+t.str)}break;default:throw new Ice.ProxyParseException("unknown option `"+g+"' in `"+e+"'")}}if(-1===r)return this.createImpl(l,u,d,f,p,h,null,null,n);var y=[];if(":"==e.charAt(r)){var S=[];for(o=r;o<e.length&&":"==e.charAt(o);){for(o=r=o+1;;){if(-1==(o=e.indexOf(":",o))){o=e.length;break}for(var I=!1,R=r;!(-1==(R=e.indexOf('"',R))||o<R)&&-1!=(R=e.indexOf('"',++R));){if(o<R){I=!0;break}++R}if(!I)break;++o}var w=e.substring(r,o),b=this._instance.endpointFactoryManager().create(w,!1);null!==b?y.push(b):S.push(w)}if(0===y.length)throw t.assert(S.length>0),new Ice.EndpointParseException("invalid endpoint `"+S[0]+"' in `"+e+"'");if(0!==S.length&&this._instance.initializationData().properties.getPropertyAsIntWithDefault("Ice.Warn.Endpoints",1)>0){var E=[];E.push("Proxy contains unknown endpoints:");for(var D=0;D<S.length;++D)E.push(" `"),E.push(S[D]),E.push("'");this._instance.initializationData().logger.warning(E.join(""))}return this.createImpl(l,u,d,f,p,h,y,null,n)}if("@"==e.charAt(r)){if(-1==(r=s.findFirstNotOf(e,i,r+1)))throw new Ice.ProxyParseException("missing adapter id in `"+e+"'");var P=null;if(-1===(o=s.checkQuote(e,r)))throw new Ice.ProxyParseException("mismatched quotes around adapter id in `"+e+"'");if(0===o?(-1===(o=s.findFirstOf(e,i,r))&&(o=e.length),P=e.substring(r,o)):(r++,P=e.substring(r,o),o++),o!==e.length&&-1!==s.findFirstNotOf(e,i,o))throw new Ice.ProxyParseException("invalid trailing characters after `"+e.substring(0,o+1)+"' in `"+e+"'");try{_=s.unescapeString(P,0,P.length)}catch(t){throw new Ice.ProxyParseException("invalid adapter id in `"+e+"': "+t.message)}if(0===_.length)throw new Ice.ProxyParseException("empty adapter id in `"+e+"'");return this.createImpl(l,u,d,f,p,h,null,_,n)}throw new Ice.ProxyParseException("malformed proxy `"+e+"'")},createFromStream:function(e,t){if(0===e.name.length&&0===e.category.length)return null;var n,r=l.read(t);if(r.length>0){if(r.length>1)throw new Ice.ProxyUnmarshalException;n=r[0]}else n="";var i=t.readByte();if(i<0||i>c.ModeLast)throw new Ice.ProxyUnmarshalException;var o=t.readBool(),a=null,s=null;t.getReadEncoding().equals(Ice.Encoding_1_0)?(a=Ice.Protocol_1_0,s=Ice.Encoding_1_0):((a=new Ice.ProtocolVersion).__read(t),(s=new Ice.EncodingVersion).__read(t));var u=null,d=null,f=t.readSize();if(f>0){u=[];for(var h=0;h<f;h++)u[h]=this._instance.endpointFactoryManager().read(t)}else d=t.readString();return this.createImpl(e,n,i,o,a,s,u,d,null)},setDefaultRouter:function(e){if(null===this._defaultRouter?null===e:this._defaultRouter.equals(e))return this;var t=new v(this._instance,this._communicator);return t._defaultLocator=this._defaultLocator,t._defaultRouter=e,t},getDefaultRouter:function(){return this._defaultRouter},setDefaultLocator:function(e){if(null===this._defaultLocator?null===e:this._defaultLocator.equals(e))return this;var t=new v(this._instance,this._communicator);return t._defaultRouter=this._defaultRouter,t._defaultLocator=e,t},getDefaultLocator:function(){return this._defaultLocator},checkForUnknownProperties:function(e){var t,n,r=[];for(t=0;t<p.clPropNames.length;++t)if(0===e.indexOf(p.clPropNames[t]+"."))return;for(var i=this._instance.initializationData().properties.getPropertiesForPrefix(e+".").entries;null!==i;i=i.next){var o=!1;for(t=0,n=C.length;t<n;++t)if(i.key===e+"."+C[t]){o=!0;break}o||r.push(i.key)}if(r.length>0){var a=[];for(a.push("found unknown properties for proxy '"),a.push(e),a.push("':"),t=0,n=r.length;t<n;++t)a.push("\n    "),a.push(r[t]);this._instance.initializationData().logger.warning(a.join(""))}},createImpl:function(e,t,n,r,i,o,a,c,s){var l=this._instance.defaultsAndOverrides(),d=null;null!==this._defaultLocator&&(d=this._defaultLocator.__reference().getEncoding().equals(o)?this._instance.locatorManager().find(this._defaultLocator):this._instance.locatorManager().find(this._defaultLocator.ice_encodingVersion(o)));var p=this._instance.routerManager().find(this._defaultRouter),_=!0,g=l.defaultPreferSecure,C=l.defaultEndpointSelection,v=l.defaultLocatorCacheTimeout,m=l.defaultInvocationTimeout;if(null!==s&&s.length>0){var y,I=this._instance.initializationData().properties;I.getPropertyAsIntWithDefault("Ice.Warn.UnknownProperties",1)>0&&this.checkForUnknownProperties(s),y=s+".Locator";var R=h.uncheckedCast(this._communicator.propertyToProxy(y));null!==R&&(d=R.__reference().getEncoding().equals(o)?this._instance.locatorManager().find(R):this._instance.locatorManager().find(R.ice_encodingVersion(o))),y=s+".Router";var w=f.uncheckedCast(this._communicator.propertyToProxy(y));if(null!==w){var b=".Router";if(s.lastIndexOf(b)==s.length-7){var E="`"+y+"="+I.getProperty(y)+"': cannot set a router on a router; setting ignored";this._instance.initializationData().logger.warning(E)}else p=this._instance.routerManager().find(w)}if(y=s+".ConnectionCached",_=I.getPropertyAsIntWithDefault(y,_?1:0)>0,y=s+".PreferSecure",g=I.getPropertyAsIntWithDefault(y,g?1:0)>0,y=s+".EndpointSelection",I.getProperty(y).length>0){var D=I.getProperty(y);if("Random"==D)C=u.Random;else{if("Ordered"!=D)throw new Ice.EndpointSelectionTypeParseException("illegal value `"+D+"'; expected `Random' or `Ordered'");C=u.Ordered}}y=s+".LocatorCacheTimeout";var P=I.getProperty(y);0!==P.length&&(v=I.getPropertyAsIntWithDefault(y,v))<-1&&(v=-1,this._instance.initializationData().logger.warning("invalid value for"+y+"`"+I.getProperty(y)+"': defaulting to -1")),y=s+".InvocationTimeout",0!==(P=I.getProperty(y)).length&&(m=I.getPropertyAsIntWithDefault(y,m))<1&&-1!==m&&(m=-1,this._instance.initializationData().logger.warning("invalid value for"+y+"`"+I.getProperty(y)+"': defaulting to -1"))}return new S(this._instance,this._communicator,e,t,n,r,i,o,a,c,d,p,_,g,C,v,m)}});Ice.ReferenceFactory=v;var m=g({__init__:function(e,n,r,i,o,a,c,s,l){t.assert(void 0===r||null!==r.name),t.assert(void 0===r||null!==r.category),t.assert(void 0===i||null!==i),this._instance=e,this._communicator=n,this._mode=o,this._secure=a,this._identity=r,this._context=m._emptyContext,this._facet=i,this._protocol=c,this._encoding=s,this._invocationTimeout=l,this._hashInitialized=!1,this._overrideCompress=!1,this._compress=!1},getMode:function(){return this._mode},getSecure:function(){return this._secure},getProtocol:function(){return this._protocol},getEncoding:function(){return this._encoding},getIdentity:function(){return this._identity},getFacet:function(){return this._facet},getInstance:function(){return this._instance},getContext:function(){return this._context},getInvocationTimeout:function(){return this._invocationTimeout},getCommunicator:function(){return this._communicator},getEndpoints:function(){return t.assert(!1),null},getAdapterId:function(){return t.assert(!1),""},getRouterInfo:function(){return t.assert(!1),null},getLocatorInfo:function(){return t.assert(!1),null},getCacheConnection:function(){return t.assert(!1),!1},getPreferSecure:function(){return t.assert(!1),!1},getEndpointSelection:function(){return t.assert(!1),null},getLocatorCacheTimeout:function(){return t.assert(!1),0},getConnectionId:function(){return t.assert(!1),""},changeContext:function(e){null==e&&(e=m._emptyContext);var t=this._instance.referenceFactory().copy(this);return 0===e.size?t._context=m._emptyContext:t._context=new r(e),t},changeMode:function(e){if(e===this._mode)return this;var t=this._instance.referenceFactory().copy(this);return t._mode=e,t},changeSecure:function(e){if(e===this._secure)return this;var t=this._instance.referenceFactory().copy(this);return t._secure=e,t},changeIdentity:function(e){if(e.equals(this._identity))return this;var t=this._instance.referenceFactory().copy(this);return t._identity=new d(e.name,e.category),t},changeFacet:function(e){if(e===this._facet)return this;var t=this._instance.referenceFactory().copy(this);return t._facet=e,t},changeInvocationTimeout:function(e){if(e===this._invocationTimeout)return this;var t=this._instance.referenceFactory().copy(this);return t._invocationTimeout=e,t},changeEncoding:function(e){if(e.equals(this._encoding))return this;var t=this._instance.referenceFactory().copy(this);return t._encoding=e,t},changeCompress:function(e){if(this._overrideCompress&&this._compress===e)return this;var t=this._instance.referenceFactory().copy(this);return t._compress=e,t._overrideCompress=!0,t},changeAdapterId:function(e){return t.assert(!1),null},changeEndpoints:function(e){return t.assert(!1),null},changeLocator:function(e){return t.assert(!1),null},changeRouter:function(e){return t.assert(!1),null},changeCacheConnection:function(e){return t.assert(!1),null},changePreferSecure:function(e){return t.assert(!1),null},changeEndpointSelection:function(e){return t.assert(!1),null},changeLocatorCacheTimeout:function(e){return t.assert(!1),null},changeTimeout:function(e){return t.assert(!1),null},changeConnectionId:function(e){return t.assert(!1),null},hashCode:function(){if(this._hashInitialized)return this._hashValue;var e=5381;if(e=i.addNumber(e,this._mode),e=i.addBoolean(e,this._secure),e=i.addHashable(e,this._identity),null!==this._context&&void 0!==this._context)for(var t=this._context.entries;null!==t;t=t.next)e=i.addString(e,t.key),e=i.addString(e,t.value);return e=i.addString(e,this._facet),e=i.addBoolean(e,this._overrideCompress),this._overrideCompress&&(e=i.addBoolean(e,this._compress)),e=i.addHashable(e,this._protocol),e=i.addHashable(e,this._encoding),e=i.addNumber(e,this._invocationTimeout),this._hashValue=e,this._hashInitialized=!0,this._hashValue},isIndirect:function(){return t.assert(!1),!1},isWellKnown:function(){return t.assert(!1),!1},streamWrite:function(e){0===this._facet.length?e.writeSize(0):(e.writeSize(1),e.writeString(this._facet)),e.writeByte(this._mode),e.writeBool(this._secure),e.getWriteEncoding().equals(Ice.Encoding_1_0)||(this._protocol.__write(e),this._encoding.__write(e))},toString:function(){var e=[],t=this._instance.identityToString(this._identity);if(-1!=t.search(/[ :@]/)?(e.push('"'),e.push(t),e.push('"')):e.push(t),this._facet.length>0){e.push(" -f ");var n=s.escapeString(this._facet,"");-1!=n.search(/[ :@]/)?(e.push('"'),e.push(n),e.push('"')):e.push(n)}switch(this._mode){case c.ModeTwoway:e.push(" -t");break;case c.ModeOneway:e.push(" -o");break;case c.ModeBatchOneway:e.push(" -O");break;case c.ModeDatagram:e.push(" -d");break;case c.ModeBatchDatagram:e.push(" -D")}return this._secure&&e.push(" -s"),this._protocol.equals(Ice.Protocol_1_0)||(e.push(" -p "),e.push(Ice.protocolVersionToString(this._protocol))),e.push(" -e "),e.push(Ice.encodingVersionToString(this._encoding)),e.join("")},toProperty:function(e){return t.assert(!1),null},getRequestHandler:function(e){t.assert(!1)},getBatchRequestQueue:function(){t.assert(!1)},equals:function(e){return this._mode===e._mode&&(this._secure===e._secure&&(!!this._identity.equals(e._identity)&&(!!this._context.equals(e._context)&&(this._facet===e._facet&&(this._overrideCompress===e._overrideCompress&&((!this._overrideCompress||this._compress===e._compress)&&(!!this._protocol.equals(e._protocol)&&(!!this._encoding.equals(e._encoding)&&this._invocationTimeout===e._invocationTimeout))))))))},clone:function(){return t.assert(!1),null},copyMembers:function(e){e._context=this._context,e._overrideCompress=this._overrideCompress,e._compress=this._compress}});m._emptyContext=new r,m._emptyEndpoints=[],Ice.Reference=m;var y=g(m,{__init__:function(e,t,n,r,i,o,a,c){m.call(this,e,t,n,r,i,o,Ice.Protocol_1_0,a),this._fixedConnection=c},getEndpoints:function(){return m._emptyEndpoints},getAdapterId:function(){return""},getRouterInfo:function(){return null},getLocatorInfo:function(){return null},getCacheConnection:function(){return!0},getPreferSecure:function(){return!1},getEndpointSelection:function(){return u.Random},getLocatorCacheTimeout:function(){return 0},getConnectionId:function(){return""},changeAdapterId:function(e){throw new Ice.FixedProxyException},changeEndpoints:function(e){throw new Ice.FixedProxyException},changeLocator:function(e){throw new Ice.FixedProxyException},changeRouter:function(e){throw new Ice.FixedProxyException},changeCacheConnection:function(e){throw new Ice.FixedProxyException},changePreferSecure:function(e){throw new Ice.FixedProxyException},changeEndpointSelection:function(e){throw new Ice.FixedProxyException},changeLocatorCacheTimeout:function(e){throw new Ice.FixedProxyException},changeTimeout:function(e){throw new Ice.FixedProxyException},changeConnectionId:function(e){throw new Ice.FixedProxyException},isIndirect:function(){return!1},isWellKnown:function(){return!1},streamWrite:function(e){throw new Ice.FixedProxyException},toString:function(){throw new Ice.FixedProxyException},toProperty:function(e){throw new Ice.FixedProxyException},clone:function(){var e=new y(this.getInstance(),this.getCommunicator(),this.getIdentity(),this.getFacet(),this.getMode(),this.getSecure(),this.getEncoding(),this._fixedConnection);return this.copyMembers(e),e},getRequestHandler:function(e){switch(this.getMode()){case c.ModeTwoway:case c.ModeOneway:case c.ModeBatchOneway:if(this._fixedConnection.endpoint().datagram())throw new Ice.NoEndpointException("");break;case c.ModeDatagram:case c.ModeBatchDatagram:if(!this._fixedConnection.endpoint().datagram())throw new Ice.NoEndpointException("")}var t,n=this.getInstance().defaultsAndOverrides();if((n.overrideSecure?n.overrideSecureValue:this.getSecure())&&!this._fixedConnection.endpoint().secure())throw new Ice.NoEndpointException("");return this._fixedConnection.throwException(),t=n.overrideCompress?n.overrideCompressValue:this._overrideCompress?this._compress:this._fixedConnection.endpoint().compress(),e.__setRequestHandler(new _(this,this._fixedConnection,t))},getBatchRequestQueue:function(){return this._fixedConnection.getBatchRequestQueue()},equals:function(e){return this===e||e instanceof y&&(!!m.prototype.equals.call(this,e)&&this._fixedConnection.equals(e._fixedConnection))}});Ice.FixedReference=y;var S=g(m,{__init__:function(e,n,r,i,o,a,c,s,l,u,d,f,h,p,_,g,C){m.call(this,e,n,r,i,o,a,c,s,C),this._endpoints=l,this._adapterId=u,this._locatorInfo=d,this._routerInfo=f,this._cacheConnection=h,this._preferSecure=p,this._endpointSelection=_,this._locatorCacheTimeout=g,this._overrideTimeout=!1,this._timeout=-1,null===this._endpoints&&(this._endpoints=m._emptyEndpoints),null===this._adapterId&&(this._adapterId=""),this._connectionId="",t.assert(0===this._adapterId.length||0===this._endpoints.length)},getEndpoints:function(){return this._endpoints},getAdapterId:function(){return this._adapterId},getRouterInfo:function(){return this._routerInfo},getLocatorInfo:function(){return this._locatorInfo},getCacheConnection:function(){return this._cacheConnection},getPreferSecure:function(){return this._preferSecure},getEndpointSelection:function(){return this._endpointSelection},getLocatorCacheTimeout:function(){return this._locatorCacheTimeout},getConnectionId:function(){return this._connectionId},changeEncoding:function(e){var t=m.prototype.changeEncoding.call(this,e);if(t!==this){var n=t._locatorInfo;null===n||n.getLocator().ice_getEncodingVersion().equals(e)||(t._locatorInfo=this.getInstance().locatorManager().find(n.getLocator().ice_encodingVersion(e)))}return t},changeCompress:function(e){var t=m.prototype.changeCompress.call(this,e);if(t!==this&&this._endpoints.length>0){for(var n=[],r=0;r<this._endpoints.length;r++)n[r]=this._endpoints[r].changeCompress(e);t._endpoints=n}return t},changeAdapterId:function(e){if(this._adapterId===e)return this;var t=this.getInstance().referenceFactory().copy(this);return t._adapterId=e,t._endpoints=m._emptyEndpoints,t},changeEndpoints:function(t){if(e.equals(t,this._endpoints,(function(e,t){return e.equals(t)})))return this;var n=this.getInstance().referenceFactory().copy(this);return n._endpoints=t,n._adapterId="",n.applyOverrides(n._endpoints),n},changeLocator:function(e){var t=this.getInstance().locatorManager().find(e);if(null!==t&&null!==this._locatorInfo&&t.equals(this._locatorInfo))return this;var n=this.getInstance().referenceFactory().copy(this);return n._locatorInfo=t,n},changeRouter:function(e){var t=this.getInstance().routerManager().find(e);if(null!==t&&null!==this._routerInfo&&t.equals(this._routerInfo))return this;var n=this.getInstance().referenceFactory().copy(this);return n._routerInfo=t,n},changeCacheConnection:function(e){if(e===this._cacheConnection)return this;var t=this.getInstance().referenceFactory().copy(this);return t._cacheConnection=e,t},changePreferSecure:function(e){if(e===this._preferSecure)return this;var t=this.getInstance().referenceFactory().copy(this);return t._preferSecure=e,t},changeEndpointSelection:function(e){if(e===this._endpointSelection)return this;var t=this.getInstance().referenceFactory().copy(this);return t._endpointSelection=e,t},changeLocatorCacheTimeout:function(e){if(this._locatorCacheTimeout===e)return this;var t=this.getInstance().referenceFactory().copy(this);return t._locatorCacheTimeout=e,t},changeTimeout:function(e){if(this._overrideTimeout&&this._timeout===e)return this;var t=this.getInstance().referenceFactory().copy(this);if(t._timeout=e,t._overrideTimeout=!0,this._endpoints.length>0){for(var n=[],r=0;r<this._endpoints.length;r++)n[r]=this._endpoints[r].changeTimeout(e);t._endpoints=n}return t},changeConnectionId:function(e){if(this._connectionId===e)return this;var t=this.getInstance().referenceFactory().copy(this);if(t._connectionId=e,this._endpoints.length>0){for(var n=[],r=0;r<this._endpoints.length;r++)n[r]=this._endpoints[r].changeConnectionId(e);t._endpoints=n}return t},isIndirect:function(){return 0===this._endpoints.length},isWellKnown:function(){return 0===this._endpoints.length&&0===this._adapterId.length},streamWrite:function(e){if(m.prototype.streamWrite.call(this,e),e.writeSize(this._endpoints.length),this._endpoints.length>0){t.assert(0===this._adapterId.length);for(var n=0;n<this._endpoints.length;++n)e.writeShort(this._endpoints[n].type()),this._endpoints[n].streamWrite(e)}else e.writeString(this._adapterId)},toString:function(){var e=[];if(e.push(m.prototype.toString.call(this)),this._endpoints.length>0)for(var t=0;t<this._endpoints.length;++t){var n=this._endpoints[t].toString();null!==n&&n.length>0&&(e.push(":"),e.push(n))}else if(this._adapterId.length>0){e.push(" @ ");var r=s.escapeString(this._adapterId,null);-1!=r.search(/[ :@]/)?(e.push('"'),e.push(r),e.push('"')):e.push(r)}return e.join("")},toProperty:function(e){var t,n=new r;if(n.set(e,this.toString()),n.set(e+".CollocationOptimized","0"),n.set(e+".ConnectionCached",this._cacheConnection?"1":"0"),n.set(e+".PreferSecure",this._preferSecure?"1":"0"),n.set(e+".EndpointSelection",this._endpointSelection===u.Random?"Random":"Ordered"),n.set(e+".LocatorCacheTimeout",""+this._locatorCacheTimeout),n.set(e+".InvocationTimeout",""+this.getInvocationTimeout()),null!==this._routerInfo)for(t=this._routerInfo.getRouter().__reference().toProperty(e+".Router").entries;null!==t;t=t.next)n.set(t.key,t.value);if(null!==this._locatorInfo)for(t=this._locatorInfo.getLocator().__reference().toProperty(e+".Locator").entries;null!==t;t=t.next)n.set(t.key,t.value);return n},hashCode:function(){return this._hashInitialized||(m.prototype.hashCode.call(this),this._hashValue=i.addString(this._hashValue,this._adapterId)),this._hashValue},equals:function(t){return this===t||t instanceof S&&(!!m.prototype.equals.call(this,t)&&(!!(null===this._locatorInfo?null===t._locatorInfo:this._locatorInfo.equals(t._locatorInfo))&&(!!(null===this._routerInfo?null===t._routerInfo:this._routerInfo.equals(t._routerInfo))&&(this._cacheConnection===t._cacheConnection&&(this._preferSecure===t._preferSecure&&(this._endpointSelection===t._endpointSelection&&(this._locatorCacheTimeout===t._locatorCacheTimeout&&(this._connectionId===t._connectionId&&(this._overrideTimeout===t._overrideTimeout&&((!this._overrideTimeout||this._timeout===t._timeout)&&(!!e.equals(this._endpoints,t._endpoints,(function(e,t){return e.equals(t)}))&&this._adapterId===t._adapterId)))))))))))},getRequestHandler:function(e){return this._instance.requestHandlerFactory().getRequestHandler(this,e)},getBatchRequestQueue:function(){return new n(this._instance,this._mode===c.ModeBatchDatagram)},getConnection:function(){var e=new a;if(null!==this._routerInfo){var t=this;this._routerInfo.getClientEndpoints().then((function(n){n.length>0?(t.applyOverrides(n),t.createConnection(n).then((function(t,n){e.succeed(t,n)}),(function(t){e.fail(t)}))):t.getConnectionNoRouterInfo(e)})).exception((function(t){e.fail(t)}))}else this.getConnectionNoRouterInfo(e);return e},getConnectionNoRouterInfo:function(e){if(this._endpoints.length>0)this.createConnection(this._endpoints).then((function(t,n){e.succeed(t,n)})).exception((function(t){e.fail(t)}));else{var n=this;null!==this._locatorInfo?this._locatorInfo.getEndpoints(this,null,this._locatorCacheTimeout).then((function(r,i){0!==r.length?(n.applyOverrides(r),n.createConnection(r).then((function(t,n){e.succeed(t,n)}),(function(r){if(r instanceof Ice.NoEndpointException)e.fail(r);else{if(t.assert(null!==n._locatorInfo),n.getLocatorInfo().clearCache(n),i){var o=n.getInstance().traceLevels();if(o.retry>=2){var a="connection to cached endpoints failed\nremoving endpoints from cache and trying one more time\n"+r.toString();n.getInstance().initializationData().logger.trace(o.retryCat,a)}return void n.getConnectionNoRouterInfo(e)}e.fail(r)}}))):e.fail(new Ice.NoEndpointException(n.toString()))})).exception((function(t){e.fail(t)})):e.fail(new Ice.NoEndpointException(this.toString()))}},clone:function(){var e=new S(this.getInstance(),this.getCommunicator(),this.getIdentity(),this.getFacet(),this.getMode(),this.getSecure(),this.getProtocol(),this.getEncoding(),this._endpoints,this._adapterId,this._locatorInfo,this._routerInfo,this._cacheConnection,this._preferSecure,this._endpointSelection,this._locatorCacheTimeout,this._invocationTimeout);return this.copyMembers(e),e},copyMembers:function(e){m.prototype.copyMembers.call(this,e),e._overrideTimeout=this._overrideTimeout,e._timeout=this._timeout,e._connectionId=this._connectionId},applyOverrides:function(e){for(var t=0;t<e.length;++t)e[t]=e[t].changeConnectionId(this._connectionId),this._overrideCompress&&(e[t]=e[t].changeCompress(this._compress)),this._overrideTimeout&&(e[t]=e[t].changeTimeout(this._timeout))},filterEndpoints:function(n){for(var r=[],i=0;i<n.length;++i)n[i]instanceof o||!n[i].connectable()||r.push(n[i]);switch(this.getMode()){case c.ModeTwoway:case c.ModeOneway:case c.ModeBatchOneway:r=e.filter(r,(function(e,t,n){return!e.datagram()}));break;case c.ModeDatagram:case c.ModeBatchDatagram:r=e.filter(r,(function(e,t,n){return e.datagram()}))}switch(this.getEndpointSelection()){case u.Random:e.shuffle(r);break;case u.Ordered:break;default:t.assert(!1)}var a=this.getInstance().defaultsAndOverrides();if(a.overrideSecure?a.overrideSecureValue:this.getSecure())r=e.filter(r,(function(e,t,n){return e.secure()}));else{var s=this.getPreferSecure();r.sort((function(e,t){var n=e.secure(),r=t.secure();return n&&r||!n&&!r?0:!n&&r?s?1:-1:s?-1:1}))}return r},createConnection:function(e){var t=this.filterEndpoints(e);if(0===t.length)return(new a).fail(new Ice.NoEndpointException(this.toString()));var n,r=new a,i=this.getInstance().outgoingConnectionFactory();if(this.getCacheConnection()||1==t.length)n=new I(this,null,r),i.create(t,!1,this.getEndpointSelection()).then((function(e,t){n.setConnection(e,t)})).exception((function(e){n.setException(e)}));else{var o=[t[0]];n=new I(this,t,r),i.create(o,!0,this.getEndpointSelection()).then((function(e,t){n.setConnection(e,t)})).exception((function(e){n.setException(e)}))}return r}});Ice.RoutableReference=S;var I=g({__init__:function(e,t,n){this.ref=e,this.endpoints=t,this.promise=n,this.i=0,this.exception=null},setConnection:function(e,t){null!==this.ref.getRouterInfo()&&null!==this.ref.getRouterInfo().getAdapter()&&e.setAdapter(this.ref.getRouterInfo().getAdapter()),this.promise.succeed(e,t)},setException:function(e){if(null===this.exception&&(this.exception=e),null!==this.endpoints&&++this.i!==this.endpoints.length){var t=this.i!=this.endpoints.length-1,n=[this.endpoints[this.i]],r=this;this.ref.getInstance().outgoingConnectionFactory().create(n,t,this.ref.getEndpointSelection()).then((function(e,t){r.setConnection(e,t)})).exception((function(e){r.setException(e)}))}else this.promise.fail(this.exception)}})}(),function(){var e=Ice.Debug,t=Ice.BasicStream,n=Ice.EndpointParseException,r=Ice.OpaqueEndpointI,i=Ice.Protocol,o=Ice.StringUtil,a=Ice.Class({__init__:function(e){this._instance=e,this._factories=[]},add:function(t){for(var n=0;n<this._factories.length;++n)e.assert(this._factories[n].type()!=t.type());this._factories.push(t)},get:function(e){for(var t=0;t<this._factories.length;++t)if(this._factories[t].type()===e)return this._factories[t];return null},create:function(e,a){var c=e.trim();if(0===c.length)throw new n("value has no non-whitespace characters");var s=o.splitString(c," \t\n\r");if(0===s.length)throw new n("value has no non-whitespace characters");var l=s[0];s.splice(0,1),"default"===l&&(l=this._instance.defaultsAndOverrides().defaultProtocol);for(var u=0,d=this._factories.length;u<d;++u)if(this._factories[u].protocol()===l){var f=this._factories[u].create(s,a);if(s.length>0)throw new n("unrecognized argument `"+s[0]+"' in endpoint `"+e+"'");return f}if("opaque"===l){var h=new r;if(h.initWithOptions(s),s.length>0)throw new n("unrecognized argument `"+s[0]+"' in endpoint `"+e+"'");for(u=0,d=this._factories.length;u<d;++u)if(this._factories[u].type()==h.type()){var p=new t(this._instance,i.currentProtocolEncoding);p.writeShort(h.type()),h.streamWrite(p),p.pos=0,p.readShort(),p.startReadEncaps();var _=this._factories[u].read(p);return p.endReadEncaps(),_}return h}return null},read:function(e){for(var t,n=e.readShort(),i=0;i<this._factories.length;++i)if(this._factories[i].type()==n)return e.startReadEncaps(),t=this._factories[i].read(e),e.endReadEncaps(),t;return e.startReadEncaps(),(t=new r(n)).initWithStream(e),e.endReadEncaps(),t},destroy:function(){for(var e=0;e<this._factories.length;++e)this._factories[e].destroy();this._factories=[]}});Ice.EndpointFactoryManager=a}(),function(){var e=Ice.Debug,t=Ice.HashMap,n=Ice.ObjectPrx,r=Ice.StringUtil,i=Ice.Identity,o=Ice.Class({__init__:function(e){this._instance=e;var t=this._instance.initializationData().properties.getPropertyAsList("Ice.RetryIntervals");if(t.length>0){this._retryIntervals=[];for(var n=0;n<t.length;n++){var i;try{i=r.toInt(t[n])}catch(e){i=0}if(0===n&&-1===i)break;this._retryIntervals[n]=i>0?i:0}}else this._retryIntervals=[0]},stringToProxy:function(e){var t=this._instance.referenceFactory().createFromString(e,null);return this.referenceToProxy(t)},proxyToString:function(e){return null!==e?e.__reference().toString():""},propertyToProxy:function(e){var t=this._instance.initializationData().properties.getProperty(e),n=this._instance.referenceFactory().createFromString(t,e);return this.referenceToProxy(n)},proxyToProperty:function(e,n){return null!==e?e.__reference().toProperty(n):new t},streamToProxy:function(e,t){var n=new i;n.__read(e);var r=this._instance.referenceFactory().createFromStream(n,e);return this.referenceToProxy(r,t)},referenceToProxy:function(e,t){if(null!==e){var r=t?new t:new n;return r.__setup(e),r}return null},proxyToStream:function(e,t){if(null!==e){var n=e.__reference();n.getIdentity().__write(t),n.streamWrite(t)}else{new i("","").__write(t)}},checkRetryAfterException:function(t,n,r,i){var o,a=this._instance.traceLevels(),c=this._instance.initializationData().logger;if(n.getMode()===Ice.Reference.ModeBatchOneway||n.getMode()===Ice.Reference.ModeBatchDatagram)throw t;if(t instanceof Ice.ObjectNotExistException){var s=t;if(null!==n.getRouterInfo()&&"ice_add_proxy"===s.operation)return n.getRouterInfo().clearCache(n),a.retry>=1&&c.trace(a.retryCat,"retrying operation call to add proxy to router\n"+t.toString()),null!==r&&(r.value=0),i;if(!n.isIndirect())throw t;if(n.isWellKnown()){var l=n.getLocatorInfo();null!==l&&l.clearCache(n)}}else if(t instanceof Ice.RequestFailedException)throw t;if(t instanceof Ice.MarshalException)throw t;if(t instanceof Ice.CommunicatorDestroyedException||t instanceof Ice.ObjectAdapterDeactivatedException)throw t;if(t instanceof Ice.InvocationTimeoutException||t instanceof Ice.InvocationCanceledException)throw t;if(++i,e.assert(i>0),i===this._retryIntervals.length+1&&t instanceof Ice.CloseConnectionException)o=0;else{if(i>this._retryIntervals.length)throw a.retry>=1&&c.trace(a.retryCat,"cannot retry operation call because retry limit has been exceeded\n"+t.toString()),t;o=this._retryIntervals[i-1]}if(a.retry>=1){var u="retrying operation call";o>0&&(u+=" in "+o+"ms"),u+=" because of exception\n"+t.toString(),c.trace(a.retryCat,u)}return e.assert(null!==r),r.value=o,i}});Ice.ProxyFactory=o}(),function(){var e=Ice.FormatType,t=Ice.EndpointSelectionType,n=Ice.Protocol;Ice.DefaultsAndOverrides=function(r,i){this.defaultProtocol=r.getPropertyWithDefault("Ice.Default.Protocol",void 0!==Ice.TcpEndpointFactory?"tcp":"ws");var o=r.getProperty("Ice.Default.Host");if(this.defaultHost=o.length>0?o:null,o=r.getProperty("Ice.Default.SourceAddress"),this.defaultSourceAddress=o.length>0?o:null,(o=r.getProperty("Ice.Override.Timeout")).length>0?(this.overrideTimeout=!0,this.overrideTimeoutValue=r.getPropertyAsInt("Ice.Override.Timeout"),this.overrideTimeoutValue<1&&-1!==this.overrideTimeoutValue&&(this.overrideTimeoutValue=-1,i.warning("invalid value for Ice.Override.Timeout `"+r.getProperty("Ice.Override.Timeout")+"': defaulting to -1"))):(this.overrideTimeout=!1,this.overrideTimeoutValue=-1),(o=r.getProperty("Ice.Override.ConnectTimeout")).length>0?(this.overrideConnectTimeout=!0,this.overrideConnectTimeoutValue=r.getPropertyAsInt("Ice.Override.ConnectTimeout"),this.overrideConnectTimeoutValue<1&&-1!==this.overrideConnectTimeoutValue&&(this.overrideConnectTimeoutValue=-1,i.warning("invalid value for Ice.Override.ConnectTimeout `"+r.getProperty("Ice.Override.ConnectTimeout")+"': defaulting to -1"))):(this.overrideConnectTimeout=!1,this.overrideConnectTimeoutValue=-1),(o=r.getProperty("Ice.Override.CloseTimeout")).length>0?(this.overrideCloseTimeout=!0,this.overrideCloseTimeoutValue=r.getPropertyAsInt("Ice.Override.CloseTimeout"),this.overrideCloseTimeoutValue<1&&-1!==this.overrideCloseTimeoutValue&&(this.overrideCloseTimeoutValue=-1,i.warning("invalid value for Ice.Override.CloseTimeout `"+r.getProperty("Ice.Override.CloseTimeout")+"': defaulting to -1"))):(this.overrideCloseTimeout=!1,this.overrideCloseTimeoutValue=-1),this.overrideCompress=!1,this.overrideSecure=!1,"Random"===(o=r.getPropertyWithDefault("Ice.Default.EndpointSelection","Random")))this.defaultEndpointSelection=t.Random;else{if("Ordered"!==o){var a=new Ice.EndpointSelectionTypeParseException;throw a.str="illegal value `"+o+"'; expected `Random' or `Ordered'",a}this.defaultEndpointSelection=t.Ordered}this.defaultTimeout=r.getPropertyAsIntWithDefault("Ice.Default.Timeout",6e4),this.defaultTimeout<1&&-1!==this.defaultTimeout&&(this.defaultTimeout=6e4,i.warning("invalid value for Ice.Default.Timeout `"+r.getProperty("Ice.Default.Timeout")+"': defaulting to 60000")),this.defaultLocatorCacheTimeout=r.getPropertyAsIntWithDefault("Ice.Default.LocatorCacheTimeout",-1),this.defaultLocatorCacheTimeout<-1&&(this.defaultLocatorCacheTimeout=-1,i.warning("invalid value for Ice.Default.LocatorCacheTimeout `"+r.getProperty("Ice.Default.LocatorCacheTimeout")+"': defaulting to -1")),this.defaultInvocationTimeout=r.getPropertyAsIntWithDefault("Ice.Default.InvocationTimeout",-1),this.defaultInvocationTimeout<1&&-1!==this.defaultInvocationTimeout&&(this.defaultInvocationTimeout=-1,i.warning("invalid value for Ice.Default.InvocationTimeout `"+r.getProperty("Ice.Default.InvocationTimeout")+"': defaulting to -1")),this.defaultPreferSecure=r.getPropertyAsIntWithDefault("Ice.Default.PreferSecure",0)>0,o=r.getPropertyWithDefault("Ice.Default.EncodingVersion",Ice.encodingVersionToString(n.currentEncoding)),this.defaultEncoding=Ice.stringToEncodingVersion(o),n.checkSupportedEncoding(this.defaultEncoding);var c=r.getPropertyAsIntWithDefault("Ice.Default.SlicedFormat",0)>0;this.defaultFormat=c?e.SlicedFormat:e.CompactFormat}}(),function(){var e=Ice.StringUtil,t=Ice.Identity,n=Ice.IdentityParseException;Ice.stringToIdentity=function(r){for(var i=new t,o=-1,a=0;-1!==(a=r.indexOf("/",a));){for(var c=0;a-c>0&&"\\"==r.charAt(a-c-1);)c++;if(c%2==0){if(-1!=o)throw(s=new n).str="unescaped backslash in identity `"+r+"'",s;o=a}a++}if(-1==o){i.category="";try{i.name=e.unescapeString(r)}catch(e){throw(s=new n).str="invalid identity name `"+r+"': "+s.toString(),s}}else{try{i.category=e.unescapeString(r,0,o)}catch(e){throw(s=new n).str="invalid category in identity `"+r+"': "+s.toString(),s}if(o+1<r.length)try{i.name=e.unescapeString(r,o+1,r.length)}catch(e){var s;throw(s=new n).str="invalid name in identity `"+r+"': "+s.toString(),s}else i.name=""}return i},Ice.identityToString=function(t){return null===t.category||0===t.category.length?e.escapeString(t.name,"/"):e.escapeString(t.category,"/")+"/"+e.escapeString(t.name,"/")},Ice.proxyIdentityCompare=function(e,t){if(e===t)return 0;if(null===e&&null!==t)return-1;if(null!==e&&null===t)return 1;var n,r=e.ice_getIdentity(),i=t.ice_getIdentity();return 0!==(n=r.name.localeCompare(i.name))?n:r.category.localeCompare(i.category)},Ice.proxyIdentityAndFacetCompare=function(e,t){if(e===t)return 0;if(null===e&&null!==t)return-1;if(null!==e&&null===t)return 1;var n,r=e.ice_getIdentity(),i=t.ice_getIdentity();if(0!==(n=r.name.localeCompare(i.name)))return n;if(0!==(n=r.category.localeCompare(i.category)))return n;var o=e.ice_getFacet(),a=t.ice_getFacet();return null===o&&null===a?0:null===o?-1:null===a?1:o.localeCompare(a)}}(),function(){Ice.ArrayUtil;var e=Ice.AsyncResultBase,t=Ice.ConnectionI,n=(Ice.ConnectionReaper,Ice.Debug),r=Ice.HashMap,i=Ice.Promise,o=(Ice.EndpointSelectionType,Ice.FactoryACMMonitor),a=Ice.Class,c=a({__init__:function(e,t){this._communicator=e,this._instance=t,this._destroyed=!1,this._monitor=new o(this._instance,this._instance.clientACM()),this._connectionsByEndpoint=new s,this._pending=new r(r.compareEquals),this._pendingConnectCount=0,this._waitPromise=null},destroy:function(){this._destroyed||(this._connectionsByEndpoint.forEach((function(e){e.destroy(t.CommunicatorDestroyed)})),this._destroyed=!0,this._communicator=null,this.checkFinished())},waitUntilFinished:function(){return this._waitPromise=new i,this.checkFinished(),this._waitPromise},create:function(e,t,r){n.assert(e.length>0);var o=this.applyOverrides(e);try{var a={value:!1},c=this.findConnectionByEndpoint(o,a);if(null!==c)return(new i).succeed(c,a.value)}catch(e){return(new i).fail(e)}return new l(this,o,t,r).start()},setRouterInfo:function(e){var t=this;return Ice.Promise.try2((function(){if(t._destroyed)throw new Ice.CommunicatorDestroyedException;return e.getClientEndpoints()})).then((function(n){for(var r=e.getAdapter(),i=t._instance.defaultsAndOverrides(),o=0;o<n.length;++o){var a=n[o];i.overrideTimeout&&(a=a.changeTimeout(i.overrideTimeoutValue)),a=a.changeCompress(!1);for(var c=0;c<t._connectionsByEndpoint.length;++c){var s=t._connectionsByEndpoint[c];s.endpoint().equals(a)&&s.setAdapter(r)}}}))},removeAdapter:function(e){this._destroyed||this._connectionsByEndpoint.forEach((function(t){t.getAdapter()===e&&t.setAdapter(null)}))},flushAsyncBatchRequests:function(){var t=new e(this._communicator,"flushBatchRequests",null,null,null);if(!this._destroyed)return i.all(this._connectionsByEndpoint.map((function(e){if(e.isActiveOrHolding())return e.flushBatchRequests().exception((function(e){if(!(e instanceof Ice.LocalException))throw e}))}))).then((function(){t.succeed(t)}),(function(e){t.fail(e,t)})),t;t.succeed()},applyOverrides:function(e){for(var t=this._instance.defaultsAndOverrides(),n=[],r=0;r<e.length;++r){var i=e[r];t.overrideTimeout?n.push(i.changeTimeout(t.overrideTimeoutValue)):n.push(i)}return n},findConnectionByEndpoint:function(e,t){if(this._destroyed)throw new Ice.CommunicatorDestroyedException;var r=this._instance.defaultsAndOverrides();n.assert(e.length>0);for(var i=0;i<e.length;++i){var o=e[i];if(!this._pending.has(o)){var a=this._connectionsByEndpoint.get(o);if(void 0!==a)for(var c=0;c<a.length;++c)if(a[c].isActiveOrHolding())return r.overrideCompress?t.value=r.overrideCompressValue:t.value=o.compress(),a[c]}}return null},incPendingConnectCount:function(){if(this._destroyed)throw new Ice.CommunicatorDestroyedException;++this._pendingConnectCount},decPendingConnectCount:function(){--this._pendingConnectCount,n.assert(this._pendingConnectCount>=0),this._destroyed&&0===this._pendingConnectCount&&this.checkFinished()},getConnection:function(e,t,n){if(this._destroyed)throw new Ice.CommunicatorDestroyedException;var r=this._monitor.swapReapedConnections();if(null!==r)for(var i=0;i<r.length;++i){var o=r[i];this._connectionsByEndpoint.removeConnection(o.endpoint(),o),this._connectionsByEndpoint.removeConnection(o.endpoint().changeCompress(!0),o)}for(;;){if(this._destroyed)throw new Ice.CommunicatorDestroyedException;var a=this.findConnectionByEndpoint(e,n);if(null!==a)return a;if(this.addToPending(t,e))return null;break}return t.nextEndpoint(),null},createConnection:function(e,r){n.assert(this._pending.has(r)&&null!==e);var i=null;try{if(this._destroyed)throw new Ice.CommunicatorDestroyedException;i=new t(this._communicator,this._instance,this._monitor,e,r.changeCompress(!1),!1,null)}catch(t){if(t instanceof Ice.LocalException)try{e.close()}catch(e){}throw t}return this._connectionsByEndpoint.set(i.endpoint(),i),this._connectionsByEndpoint.set(i.endpoint().changeCompress(!0),i),i},finishGetConnection:function(e,t,n,r){var i,o,a=[];null!==r&&a.push(r);var c,s=[];for(i=0;i<e.length;++i){var l=e[i],u=this._pending.get(l);if(void 0!==u){this._pending.del(l);for(var d=0;d<u.length;++d)(o=u[d]).hasEndpoint(t)?-1===a.indexOf(o)&&a.push(o):-1===s.indexOf(o)&&s.push(o)}}for(i=0;i<a.length;++i){(o=a[i]).removeFromPending();var f=s.indexOf(o);-1!==f&&s.splice(f,1)}for(i=0;i<s.length;++i)(o=s[i]).removeFromPending();var h=this._instance.defaultsAndOverrides();for(c=h.overrideCompress?h.overrideCompressValue:t.compress(),i=0;i<s.length;++i)(o=s[i]).getConnection();for(i=0;i<a.length;++i)(o=a[i]).setConnection(n,c);this.checkFinished()},finishGetConnectionEx:function(e,t,r){var i,o,a=[];null!==r&&a.push(r);var c=[];for(i=0;i<e.length;++i){var s=e[i],l=this._pending.get(s);if(void 0!==l){this._pending.del(s);for(var u=0;u<l.length;++u)(o=l[u]).removeEndpoints(e)?-1===a.indexOf(o)&&a.push(o):-1===c.indexOf(o)&&c.push(o)}}for(i=0;i<c.length;++i)o=c[i],n.assert(-1===a.indexOf(o)),o.removeFromPending();for(this.checkFinished(),i=0;i<c.length;++i)(o=c[i]).getConnection();for(i=0;i<a.length;++i)(o=a[i]).setException(t)},addToPending:function(e,t){var n,r,i=!1;if(null!==e)for(r=0;r<t.length;++r){n=t[r];var o=this._pending.get(n);void 0!==o&&(i=!0,-1===o.indexOf(e)&&o.push(e))}if(i)return!0;for(r=0;r<t.length;++r)n=t[r],this._pending.has(n)||this._pending.set(n,[]);return!1},removeFromPending:function(e,t){for(var n=0;n<t.length;++n){var r=t[n],i=this._pending.get(r);if(void 0!==i){var o=i.indexOf(e);-1!==o&&i.splice(o,1)}}},handleConnectionException:function(e,t){var n=this._instance.traceLevels();if(n.retry>=2){var r=[];r.push("connection to endpoint failed"),e instanceof Ice.CommunicatorDestroyedException?r.push("\n"):t?r.push(", trying next endpoint\n"):r.push(" and no more endpoints to try\n"),r.push(e.toString()),this._instance.initializationData().logger.trace(n.retryCat,r.join(""))}},handleException:function(e,t){var n=this._instance.traceLevels();if(n.retry>=2){var r=[];r.push("couldn't resolve endpoint host"),e instanceof Ice.CommunicatorDestroyedException?r.push("\n"):t?r.push(", trying next endpoint\n"):r.push(" and no more endpoints to try\n"),r.push(e.toString()),this._instance.initializationData().logger.trace(n.retryCat,r.join(""))}},checkFinished:function(){if(!(!this._waitPromise||!this._destroyed||this._pending.size>0||this._pendingConnectCount>0)){var e=this;i.all(e._connectionsByEndpoint.map((function(e){return e.waitUntilFinished().exception((function(e){n.assert(!1)}))}))).then((function(){var t=e._monitor.swapReapedConnections();if(null!==t){for(var r=[],i=e._connectionsByEndpoint.entries;null!==i;i=i.next)for(var o=i.value,a=0;a<o.length;++a)-1===r.indexOf(o[a])&&r.push(o[a]);n.assert(t.length===r.length),e._connectionsByEndpoint.clear()}else n.assert(0===e._connectionsByEndpoint.size);n.assert(null!==e._waitPromise),e._waitPromise.succeed(),e._monitor.destroy()}))}}});Ice.OutgoingConnectionFactory=c;var s=a(r,{__init__:function(e){r.call(this,e||r.compareEquals)},set:function(e,i){var o=this.get(e);void 0===o&&(o=[],r.prototype.set.call(this,e,o)),n.assert(i instanceof t),o.push(i)},removeConnection:function(e,t){var r=this.get(e);n.assert(null!==r);var i=r.indexOf(t);n.assert(-1!==i),r.splice(i,1),0===r.length&&this.del(e)},map:function(e){var t=[];return this.forEach((function(n){t.push(e(n))})),t},forEach:function(e){for(var t=this._head;null!==t;t=t._next)for(var n=0;n<t.value.length;++n)e(t.value[n])}}),l=a({__init__:function(e,t,n,r){this._factory=e,this._endpoints=t,this._hasMore=n,this._selType=r,this._promise=new i,this._index=0,this._current=null},connectionStartCompleted:function(e){e.activate(),this._factory.finishGetConnection(this._endpoints,this._current,e,this)},connectionStartFailed:function(e,t){n.assert(null!==this._current),t instanceof Ice.LocalException?(this._factory.handleConnectionException(t,this._hasMore||this._index<this._endpoints.length),t instanceof Ice.CommunicatorDestroyedException?this._factory.finishGetConnectionEx(this._endpoints,t,this):this._index<this._endpoints.length?this.nextEndpoint():this._factory.finishGetConnectionEx(this._endpoints,t,this)):this._factory.finishGetConnectionEx(this._endpoints,t,this)},setConnection:function(e,t){this._promise.succeed(e,t),this._factory.decPendingConnectCount()},setException:function(e){this._promise.fail(e),this._factory.decPendingConnectCount()},hasEndpoint:function(e){return-1!==this.findEndpoint(e)},findEndpoint:function(e){for(var t=0;t<this._endpoints.length;++t)if(e.equals(this._endpoints[t]))return t;return-1},removeEndpoints:function(e){for(var t=0;t<e.length;++t){var n=this.findEndpoint(e[t]);-1!==n&&this._endpoints.splice(n,1)}return this._index=0,0===this._endpoints.length},removeFromPending:function(){this._factory.removeFromPending(this,this._endpoints)},start:function(){try{this._factory.incPendingConnectCount()}catch(e){return void this._promise.fail(e)}return this.getConnection(),this._promise},getConnection:function(){try{var e={value:!1},t=this._factory.getConnection(this._endpoints,this,e);if(null===t)return;this._promise.succeed(t,e.value),this._factory.decPendingConnectCount()}catch(e){this._promise.fail(e),this._factory.decPendingConnectCount()}},nextEndpoint:function(){var e=null,t=this._factory._instance.traceLevels();try{if(n.assert(this._index<this._endpoints.length),this._current=this._endpoints[this._index++],t.network>=2)(i=[]).push("trying to establish "),i.push(this._current.protocol()),i.push(" connection to "),i.push(this._current.toConnectorString()),this._factory._instance.initializationData().logger.trace(t.networkCat,i.join(""));e=this._factory.createConnection(this._current.connect(),this._current);var r=this;e.start().then((function(){r.connectionStartCompleted(e)}),(function(t){r.connectionStartFailed(e,t)}))}catch(n){var i;if(t.network>=2)(i=[]).push("failed to establish "),i.push(this._current.protocol()),i.push(" connection to "),i.push(this._current.toString()),i.push("\n"),i.push(n.toString()),this._factory._instance.initializationData().logger.trace(t.networkCat,i.join(""));this.connectionStartFailed(e,n)}}})}(),function(){var e=Ice.Debug,t=Ice.HashMap,n=Ice.Promise,r=Ice.Protocol,i=Ice.LocatorRegisterPrx,o=Ice.Class,a=o({__init__:function(e,n,r){this._locator=e,this._locatorRegistry=null,this._table=n,this._background=r,this._adapterRequests=new t,this._objectRequests=new t(t.compareEquals)},destroy:function(){this._locatorRegistry=null,this._table.clear()},equals:function(e){return this===e||e instanceof a&&this._locator.equals(e._locator)},hashCode:function(){return this._locator.hashCode()},getLocator:function(){return this._locator},getLocatorRegistry:function(){if(null!==this._locatorRegistry)return(new n).succeed(this._locatorRegistry);var e=this;return this._locator.getRegistry().then((function(t){return e._locatorRegistry=i.uncheckedCast(t.ice_locator(null).ice_endpointSelection(Ice.EndpointSelectionType.Ordered)),e._locatorRegistry}))},getEndpoints:function(t,r,i,o){var a=o||new n;e.assert(t.isIndirect());var c=null,s={value:!1};if(t.isWellKnown()){var l=this._table.getObjectReference(t.getIdentity(),i,s);if(!s.value){if(!this._background||null===l)return this.getObjectRequest(t).addCallback(t,null,i,a),a;this.getObjectRequest(t).addCallback(t,null,i,null)}if(l.isIndirect()){if(!l.isWellKnown())return this.getEndpoints(l,t,i,a),a}else c=l.getEndpoints()}else if(c=this._table.getAdapterEndpoints(t.getAdapterId(),i,s),!s.value){if(!this._background||null===c)return this.getAdapterRequest(t).addCallback(t,r,i,a),a;this.getAdapterRequest(t).addCallback(t,r,i,null)}return e.assert(null!==c),t.getInstance().traceLevels().location>=1&&this.getEndpointsTrace(t,c,!0),a.succeed(c,!0),a},clearCache:function(t){if(e.assert(t.isIndirect()),t.isWellKnown()){var n=this._table.removeObjectReference(t.getIdentity());null!==n&&(n.isIndirect()?n.isWellKnown()||this.clearCache(n):t.getInstance().traceLevels().location>=2&&this.trace("removed endpoints from locator table",t,n.getEndpoints()))}else{var r=this._table.removeAdapterEndpoints(t.getAdapterId());null!==r&&t.getInstance().traceLevels().location>=2&&this.trace("removed endpoints from locator table\n",t,r)}},trace:function(t,n,r){e.assert(n.isIndirect());var i=[];i.push(t),i.push("\n"),n.isWellKnown()?(i.push("object = "),i.push(n.getInstance().identityToString(n.getIdentity())),i.push("\n")):(i.push("adapter = "),i.push(n.getAdapterId()),i.push("\n")),i.push("endpoints = ");for(var o=0;o<r.length;o++)i.push(r[o].toString()),o+1<r.length&&i.push(":");n.getInstance().initializationData().logger.trace(n.getInstance().traceLevels().locationCat,i.join(""))},getEndpointsException:function(t,n){e.assert(t.isIndirect());var r,i,o=t.getInstance();try{throw n}catch(n){if(n instanceof Ice.AdapterNotFoundException)throw o.traceLevels().location>=1&&((r=[]).push("adapter not found\n"),r.push("adapter = "),r.push(t.getAdapterId()),o.initializationData().logger.trace(o.traceLevels().locationCat,r.join(""))),(i=new Ice.NotRegisteredException).kindOfObject="object adapter",i.id=t.getAdapterId(),i;if(n instanceof Ice.ObjectNotFoundException)throw o.traceLevels().location>=1&&((r=[]).push("object not found\n"),r.push("object = "),r.push(o.identityToString(t.getIdentity())),o.initializationData().logger.trace(o.traceLevels().locationCat,r.join(""))),(i=new Ice.NotRegisteredException).kindOfObject="object",i.id=o.identityToString(t.getIdentity()),i;if(n instanceof Ice.NotRegisteredException)throw n;if(n instanceof Ice.LocalException)throw o.traceLevels().location>=1&&((r=[]).push("couldn't contact the locator to retrieve adapter endpoints\n"),t.getAdapterId().length>0?(r.push("adapter = "),r.push(t.getAdapterId()),r.push("\n")):(r.push("object = "),r.push(o.identityToString(t.getIdentity())),r.push("\n")),r.push("reason = "+n.toString()),o.initializationData().logger.trace(o.traceLevels().locationCat,r.join(""))),n;e.assert(!1)}},getEndpointsTrace:function(e,t,n){if(null!==t&&t.length>0)n?this.trace("found endpoints in locator table",e,t):this.trace("retrieved endpoints from locator, adding to locator table",e,t);else{var r=e.getInstance(),i=[];i.push("no endpoints configured for "),e.getAdapterId().length>0?(i.push("adapter\n"),i.push("adapter = "),i.push(e.getAdapterId()),i.push("\n")):(i.push("object\n"),i.push("object = "),i.push(r.identityToString(e.getIdentity())),i.push("\n")),r.initializationData().logger.trace(r.traceLevels().locationCat,i.join(""))}},getAdapterRequest:function(e){if(e.getInstance().traceLevels().location>=1){var t=e.getInstance(),n=[];n.push("searching for adapter by id\n"),n.push("adapter = "),n.push(e.getAdapterId()),t.initializationData().logger.trace(t.traceLevels().locationCat,n.join(""))}var r=this._adapterRequests.get(e.getAdapterId());return void 0!==r||(r=new u(this,e),this._adapterRequests.set(e.getAdapterId(),r)),r},getObjectRequest:function(e){if(e.getInstance().traceLevels().location>=1){var t=e.getInstance(),n=[];n.push("searching for object by id\n"),n.push("object = "),n.push(t.identityToString(e.getIdentity())),t.initializationData().logger.trace(t.traceLevels().locationCat,n.join(""))}var r=this._objectRequests.get(e.getIdentity());return void 0!==r||(r=new l(this,e),this._objectRequests.set(e.getIdentity(),r)),r},finishRequest:function(t,n,r,i){if(null===r||r.__reference().isIndirect())for(var o=0;o<n.length;++o)this._table.removeObjectReference(n[o].getIdentity());t.isWellKnown()?(null===r||r.__reference().isWellKnown()?i&&this._table.removeObjectReference(t.getIdentity()):this._table.addObjectReference(t.getIdentity(),r.__reference()),e.assert(this._objectRequests.has(t.getIdentity())),this._objectRequests.del(t.getIdentity())):(null===r||r.__reference().isIndirect()?i&&this._table.removeAdapterEndpoints(t.getAdapterId()):this._table.addAdapterEndpoints(t.getAdapterId(),r.__reference().getEndpoints()),e.assert(this._adapterRequests.has(t.getAdapterId())),this._adapterRequests.del(t.getAdapterId()))}});Ice.LocatorInfo=a;var c=o({__init__:function(e,t,n){this._ref=e,this._ttl=t,this._promise=n},response:function(e,t){var n=null;if(null!==t){var i=t.__reference();if(this._ref.isWellKnown()&&!r.isSupported(this._ref.getEncoding(),i.getEncoding()));else if(i.isIndirect()){if(this._ref.isWellKnown()&&!i.isWellKnown()){var o=this;return void e.getEndpoints(i,this._ref,this._ttl).then((function(e,t){null!==o._promise&&o._promise.succeed(e,t)}),(function(e){null!==o._promise&&o._promise.fail(e)}))}}else n=i.getEndpoints()}this._ref.getInstance().traceLevels().location>=1&&e.getEndpointsTrace(this._ref,n,!1),null!==this._promise&&this._promise.succeed(null===n?[]:n,!1)},exception:function(e,t){try{e.getEndpointsException(this._ref,t)}catch(e){null!==this._promise&&this._promise.fail(e)}}}),s=o({__init__:function(e,t){this._locatorInfo=e,this._ref=t,this._callbacks=[],this._wellKnownRefs=[],this._sent=!1,this._response=!1,this._proxy=null,this._exception=null},addCallback:function(e,t,n,r){var i=new c(e,n,r);this._response?i.response(this._locatorInfo,this._proxy):null!==this._exception?i.exception(this._locatorInfo,this._exception):(this._callbacks.push(i),null!==t&&this._wellKnownRefs.push(t),this._sent||(this._sent=!0,this.send()))},response:function(e){this._locatorInfo.finishRequest(this._ref,this._wellKnownRefs,e,!1),this._response=!0,this._proxy=e;for(var t=0;t<this._callbacks.length;++t)this._callbacks[t].response(this._locatorInfo,e)},exception:function(e){this._locatorInfo.finishRequest(this._ref,this._wellKnownRefs,null,e instanceof Ice.UserException),this._exception=e;for(var t=0;t<this._callbacks.length;++t)this._callbacks[t].exception(this._locatorInfo,e)}}),l=o(s,{__init__:function(t,n){s.call(this,t,n),e.assert(n.isWellKnown())},send:function(){try{var e=this;this._locatorInfo.getLocator().findObjectById(this._ref.getIdentity()).then((function(t){e.response(t)}),(function(t){e.exception(t)}))}catch(e){this.exception(e)}}}),u=o(s,{__init__:function(t,n){s.call(this,t,n),e.assert(n.isIndirect())},send:function(){try{var e=this;this._locatorInfo.getLocator().findAdapterById(this._ref.getAdapterId()).then((function(t){e.response(t)}),(function(t){e.exception(t)}))}catch(e){this.exception(e)}}})}(),function(){var e=Ice.AsyncResultBase,t=Ice.Debug,n=Ice.Identity,r=(Ice.Promise,Ice.PropertyNames),i=Ice.ServantManager,o=(Ice.StringUtil,["ACM","AdapterId","Endpoints","Locator","Locator.EncodingVersion","Locator.EndpointSelection","Locator.ConnectionCached","Locator.PreferSecure","Locator.CollocationOptimized","Locator.Router","MessageSizeMax","PublishedEndpoints","ReplicaGroupId","Router","Router.EncodingVersion","Router.EndpointSelection","Router.ConnectionCached","Router.PreferSecure","Router.CollocationOptimized","Router.Locator","Router.Locator.EndpointSelection","Router.Locator.ConnectionCached","Router.Locator.PreferSecure","Router.Locator.CollocationOptimized","Router.Locator.LocatorCacheTimeout","Router.Locator.InvocationTimeout","Router.LocatorCacheTimeout","Router.InvocationTimeout","ProxyOptions","ThreadPool.Size","ThreadPool.SizeMax","ThreadPool.SizeWarn","ThreadPool.StackSize","ThreadPool.Serialize"]),a=Ice.Class({__init__:function(e,n,r,o,a,c,s){if(this._instance=e,this._communicator=n,this._objectAdapterFactory=r,this._servantManager=new i(e,o),this._name=o,this._routerEndpoints=[],this._routerInfo=null,this._state=0,this._noConfig=c,this._noConfig)return this._reference=this._instance.referenceFactory().createFromString("dummy -t",""),this._messageSizeMax=this._instance.messageSizeMax(),void s.succeed(this,s);var l=this._instance.initializationData().properties,u=[],d=this.filterProperties(u);if(0!==u.length&&l.getPropertyAsIntWithDefault("Ice.Warn.UnknownProperties",1)>0){for(var f=["found unknown properties for object adapter `"+o+"':"],h=0;h<u.length;++h)f.push("\n    "+u[h]);this._instance.initializationData().logger.warning(f.join(""))}if(null===a&&d)throw(_=new Ice.InitializationException).reason="object adapter `"+this._name+"' requires configuration",_;var p=l.getPropertyWithDefault(this._name+".ProxyOptions","-t");try{this._reference=this._instance.referenceFactory().createFromString("dummy "+p,"")}catch(e){var _;if(e instanceof Ice.ProxyParseException)throw(_=new Ice.InitializationException).reason="invalid proxy options `"+p+"' for object adapter `"+o+"'",_;throw e}var g=this._instance.messageSizeMax()/1024,C=l.getPropertyAsIntWithDefault(this._name+".MessageSizeMax",g);this._messageSizeMax=C<1||C>2147483647/1024?2147483647:1024*C;try{if(null===a&&(a=Ice.RouterPrx.uncheckedCast(this._instance.proxyFactory().propertyToProxy(this._name+".Router"))),null!==a){if(this._routerInfo=this._instance.routerManager().find(a),t.assert(null!==this._routerInfo),null!==this._routerInfo.getAdapter())throw new Ice.AlreadyRegisteredException("object adapter with router",this._instance.identityToString(a.ice_getIdentity()));var v=this;this._routerInfo.getServerEndpoints().then((function(e){var t;for(t=0;t<e.length;++t)v._routerEndpoints.push(e[t]);for(v._routerEndpoints.sort((function(e,t){return e.compareTo(t)})),t=0;t<v._routerEndpoints.length-1;){var n=v._routerEndpoints[t],r=v._routerEndpoints[t+1];n.equals(r)?v._routerEndpoints.splice(t,1):++t}return v._routerInfo.setAdapter(v),v._instance.outgoingConnectionFactory().setRouterInfo(v._routerInfo)})).then((function(){s.succeed(v,s)}),(function(e){s.fail(e,s)}))}else{if(l.getProperty(this._name+".Endpoints").length>0)throw new Ice.FeatureNotSupportedException("object adapter endpoints not supported");s.succeed(this,s)}}catch(_){throw this.destroy(),_}},getName:function(){return this._noConfig?"":this._name},getCommunicator:function(){return this._communicator},activate:function(){},hold:function(){this.checkForDeactivation()},waitForHold:function(){var t=new e(this._communicator,"waitForHold",null,null,this);return this.checkForDeactivation(t)?t:t.succeed(t)},deactivate:function(){var t=new e(this._communicator,"deactivate",null,null,this);return this._state<5&&(this._state=5,this._instance.outgoingConnectionFactory().removeAdapter(this)),t.succeed(t)},waitForDeactivate:function(){var t=new e(this._communicator,"deactivate",null,null,this);return t.succeed(t)},isDeactivated:function(){return this._state>=5},destroy:function(){var t=new e(this._communicator,"destroy",null,null,this),n=this,r=function(){return n._state<6&&(n._state=6,n._servantManager.destroy(),n._objectAdapterFactory.removeObjectAdapter(n)),t.succeed(t)};return this._state<5?this.deactivate().then(r):r()},add:function(e,t){return this.addFacet(e,t,"")},addFacet:function(e,t,n){this.checkForDeactivation(),this.checkIdentity(t),this.checkServant(e);var r=t.clone();return this._servantManager.addServant(e,r,n),this.newProxy(r,n)},addWithUUID:function(e){return this.addFacetWithUUID(e,"")},addFacetWithUUID:function(e,t){return this.addFacet(e,new n(Ice.generateUUID(),""),t)},addDefaultServant:function(e,t){this.checkServant(e),this.checkForDeactivation(),this._servantManager.addDefaultServant(e,t)},remove:function(e){return this.removeFacet(e,"")},removeFacet:function(e,t){return this.checkForDeactivation(),this.checkIdentity(e),this._servantManager.removeServant(e,t)},removeAllFacets:function(e){return this.checkForDeactivation(),this.checkIdentity(e),this._servantManager.removeAllFacets(e)},removeDefaultServant:function(e){return this.checkForDeactivation(),this._servantManager.removeDefaultServant(e)},find:function(e){return this.findFacet(e,"")},findFacet:function(e,t){return this.checkForDeactivation(),this.checkIdentity(e),this._servantManager.findServant(e,t)},findAllFacets:function(e){return this.checkForDeactivation(),this.checkIdentity(e),this._servantManager.findAllFacets(e)},findByProxy:function(e){this.checkForDeactivation();var t=e.__reference();return this.findFacet(t.getIdentity(),t.getFacet())},findDefaultServant:function(e){return this.checkForDeactivation(),this._servantManager.findDefaultServant(e)},addServantLocator:function(e,t){this.checkForDeactivation(),this._servantManager.addServantLocator(e,t)},removeServantLocator:function(e){return this.checkForDeactivation(),this._servantManager.removeServantLocator(e)},findServantLocator:function(e){return this.checkForDeactivation(),this._servantManager.findServantLocator(e)},createProxy:function(e){return this.checkForDeactivation(),this.checkIdentity(e),this.newProxy(e,"")},createDirectProxy:function(e){return this.createProxy(e)},createIndirectProxy:function(e){throw new Ice.FeatureNotSupportedException("setLocator not supported")},setLocator:function(e){throw new Ice.FeatureNotSupportedException("setLocator not supported")},refreshPublishedEndpoints:function(){throw new Ice.FeatureNotSupportedException("refreshPublishedEndpoints not supported")},getEndpoints:function(){return[]},getPublishedEndpoints:function(){return[]},getServantManager:function(){return this._servantManager},messageSizeMax:function(){return this._messageSizeMax},newProxy:function(e,t){for(var n=[],r=0;r<this._routerEndpoints.length;++r)n.push(this._routerEndpoints[r]);var i=this._instance.referenceFactory().create(e,t,this._reference,n);return this._instance.proxyFactory().referenceToProxy(i)},checkForDeactivation:function(e){if(this._state>=5){var t=new Ice.ObjectAdapterDeactivatedException;if(t.name=this.getName(),void 0!==e)return e.fail(t,e),!0;throw t}return!1},checkIdentity:function(e){if(void 0===e.name||null===e.name||0===e.name.length)throw new Ice.IllegalIdentityException(e);void 0!==e.category&&null!==e.category||(e.category="")},checkServant:function(e){if(null==e)throw new Ice.IllegalServantException("cannot add null servant to Object Adapter")},filterProperties:function(e){var t,n=!0,i=this._name+".";for(t=0;t<r.clPropNames.length;++t)if(0===i.indexOf(r.clPropNames[t]+".")){n=!1;break}for(var a=!0,c=this._instance.initializationData().properties.getPropertiesForPrefix(i).entries;null!==c;c=c.next){var s=!1;for(t=0;t<o.length;++t)if(c.key===i+o[t]){a=!1,s=!0;break}!s&&n&&e.push(c.key)}return a}});Ice.ObjectAdapterI=a}(),function(){var e=Ice.HashMap,t=Ice.LocatorInfo,n=Ice.LocatorTable,r=Ice.LocatorPrx,i=Ice.Class({__init__:function(t){this._background=t.getPropertyAsInt("Ice.BackgroundLocatorCacheUpdates")>0,this._table=new e(e.compareEquals),this._locatorTables=new e(e.compareEquals)},destroy:function(){for(var e=this._table.entries;null!==e;e=e.next)e.value.destroy();this._table.clear(),this._locatorTables.clear()},find:function(e){if(null===e)return null;var i=r.uncheckedCast(e.ice_locator(null)),o=this._table.get(i);if(void 0===o){var a=this._locatorTables.get(i.ice_getIdentity());void 0===a&&(a=new n,this._locatorTables.set(i.ice_getIdentity(),a)),o=new t(i,a,this._background),this._table.set(i,o)}return o}});Ice.LocatorManager=i}(),function(){Ice.AsyncResultBase;var e=Ice.ObjectAdapterI,t=Ice.Promise,n=Ice.Class({__init__:function(e,n){this._instance=e,this._communicator=n,this._adapters=[],this._adapterNamesInUse=[],this._shutdownPromise=new t},shutdown:function(){return null===this._instance||(this._instance=null,this._communicator=null,this._shutdownPromise=t.all(this._adapters.map((function(e){return e.deactivate()})))),this._shutdownPromise},waitForShutdown:function(){var e=this;return this._shutdownPromise.then((function(){return t.all(e._adapters.map((function(e){return e.waitForDeactivate()})))}))},isShutdown:function(){return null===this._instance},destroy:function(){var e=this;return this.waitForShutdown().then((function(){return t.all(e._adapters.map((function(e){return e.destroy()})))}))},createObjectAdapter:function(t,n,r){if(null===this._instance)throw new Ice.ObjectAdapterDeactivatedException;var i=null;try{if(0===t.length){var o=Ice.generateUUID();i=new e(this._instance,this._communicator,this,o,null,!0,r)}else{if(-1!==this._adapterNamesInUse.indexOf(t))throw new Ice.AlreadyRegisteredException("object adapter",t);i=new e(this._instance,this._communicator,this,t,n,!1,r),this._adapterNamesInUse.push(t)}this._adapters.push(i)}catch(e){r.fail(e,r)}},removeObjectAdapter:function(e){if(null!==this._instance){var t=this._adapters.indexOf(e);-1!==t&&this._adapters.splice(t,1),-1!==(t=this._adapterNamesInUse.indexOf(e.getName()))&&this._adapterNamesInUse.splice(t,1)}}});Ice.ObjectAdapterFactory=n}(),L.defineDictionary(IceMX,"StringIntDict","StringIntDictHelper","Ice.StringHelper","Ice.IntHelper",!1,void 0,void 0),IceMX.Metrics=L.defineObject((function(e,t,n,r,i){Ice.Object.call(this),this.id=void 0!==e?e:"",this.total=void 0!==t?t:new Ice.Long(0,0),this.current=void 0!==n?n:0,this.totalLifetime=void 0!==r?r:new Ice.Long(0,0),this.failures=void 0!==i?i:0}),Ice.Object,void 0,1,["::Ice::Object","::IceMX::Metrics"],-1,(function(e){e.writeString(this.id),e.writeLong(this.total),e.writeInt(this.current),e.writeLong(this.totalLifetime),e.writeInt(this.failures)}),(function(e){this.id=e.readString(),this.total=e.readLong(),this.current=e.readInt(),this.totalLifetime=e.readLong(),this.failures=e.readInt()}),!1),IceMX.MetricsPrx=L.defineProxy(Ice.ObjectPrx,IceMX.Metrics.ice_staticId,void 0),L.defineOperations(IceMX.Metrics,IceMX.MetricsPrx),IceMX.MetricsFailures=L.defineStruct((function(e,t){this.id=void 0!==e?e:"",this.failures=void 0!==t?t:null}),!1,(function(e){e.writeString(this.id),IceMX.StringIntDictHelper.write(e,this.failures)}),(function(e){this.id=e.readString(),this.failures=IceMX.StringIntDictHelper.read(e)}),2,!1),L.defineSequence(IceMX,"MetricsFailuresSeqHelper","IceMX.MetricsFailures",!1),L.defineSequence(IceMX,"MetricsMapHelper","Ice.ObjectHelper",!1,"IceMX.Metrics"),L.defineDictionary(IceMX,"MetricsView","MetricsViewHelper","Ice.StringHelper","IceMX.MetricsMapHelper",!1,void 0,void 0,Ice.ArrayUtil.equals),IceMX.UnknownMetricsView=L.defineUserException((function(e){Ice.UserException.call(this,e)}),Ice.UserException,"IceMX::UnknownMetricsView",void 0,void 0,!1,!1),IceMX.MetricsAdmin=L.defineObject(void 0,Ice.Object,void 0,1,["::Ice::Object","::IceMX::MetricsAdmin"],-1,void 0,void 0,!1),IceMX.MetricsAdminPrx=L.defineProxy(Ice.ObjectPrx,IceMX.MetricsAdmin.ice_staticId,void 0),L.defineOperations(IceMX.MetricsAdmin,IceMX.MetricsAdminPrx,{getMetricsViewNames:[,,,,2,["Ice.StringSeqHelper"],,[["Ice.StringSeqHelper"]],,,],enableMetricsView:[,,,,2,,[[7]],,[IceMX.UnknownMetricsView],,],disableMetricsView:[,,,,2,,[[7]],,[IceMX.UnknownMetricsView],,],getMetricsView:[,,,,2,["IceMX.MetricsViewHelper"],[[7]],[[4]],[IceMX.UnknownMetricsView],,!0],getMapMetricsFailures:[,,,,2,["IceMX.MetricsFailuresSeqHelper"],[[7],[7]],,[IceMX.UnknownMetricsView],,],getMetricsFailures:[,,,,2,[IceMX.MetricsFailures],[[7],[7],[7]],,[IceMX.UnknownMetricsView],,]}),IceMX.ThreadMetrics=L.defineObject((function(e,t,n,r,i,o,a,c){IceMX.Metrics.call(this,e,t,n,r,i),this.inUseForIO=void 0!==o?o:0,this.inUseForUser=void 0!==a?a:0,this.inUseForOther=void 0!==c?c:0}),IceMX.Metrics,void 0,2,["::Ice::Object","::IceMX::Metrics","::IceMX::ThreadMetrics"],-1,(function(e){e.writeInt(this.inUseForIO),e.writeInt(this.inUseForUser),e.writeInt(this.inUseForOther)}),(function(e){this.inUseForIO=e.readInt(),this.inUseForUser=e.readInt(),this.inUseForOther=e.readInt()}),!1),IceMX.ThreadMetricsPrx=L.defineProxy(IceMX.MetricsPrx,IceMX.ThreadMetrics.ice_staticId,void 0),L.defineOperations(IceMX.ThreadMetrics,IceMX.ThreadMetricsPrx),IceMX.DispatchMetrics=L.defineObject((function(e,t,n,r,i,o,a,c){IceMX.Metrics.call(this,e,t,n,r,i),this.userException=void 0!==o?o:0,this.size=void 0!==a?a:new Ice.Long(0,0),this.replySize=void 0!==c?c:new Ice.Long(0,0)}),IceMX.Metrics,void 0,1,["::Ice::Object","::IceMX::DispatchMetrics","::IceMX::Metrics"],-1,(function(e){e.writeInt(this.userException),e.writeLong(this.size),e.writeLong(this.replySize)}),(function(e){this.userException=e.readInt(),this.size=e.readLong(),this.replySize=e.readLong()}),!1),IceMX.DispatchMetricsPrx=L.defineProxy(IceMX.MetricsPrx,IceMX.DispatchMetrics.ice_staticId,void 0),L.defineOperations(IceMX.DispatchMetrics,IceMX.DispatchMetricsPrx),IceMX.ChildInvocationMetrics=L.defineObject((function(e,t,n,r,i,o,a){IceMX.Metrics.call(this,e,t,n,r,i),this.size=void 0!==o?o:new Ice.Long(0,0),this.replySize=void 0!==a?a:new Ice.Long(0,0)}),IceMX.Metrics,void 0,1,["::Ice::Object","::IceMX::ChildInvocationMetrics","::IceMX::Metrics"],-1,(function(e){e.writeLong(this.size),e.writeLong(this.replySize)}),(function(e){this.size=e.readLong(),this.replySize=e.readLong()}),!1),IceMX.ChildInvocationMetricsPrx=L.defineProxy(IceMX.MetricsPrx,IceMX.ChildInvocationMetrics.ice_staticId,void 0),L.defineOperations(IceMX.ChildInvocationMetrics,IceMX.ChildInvocationMetricsPrx),IceMX.CollocatedMetrics=L.defineObject((function(e,t,n,r,i,o,a){IceMX.ChildInvocationMetrics.call(this,e,t,n,r,i,o,a)}),IceMX.ChildInvocationMetrics,void 0,2,["::Ice::Object","::IceMX::ChildInvocationMetrics","::IceMX::CollocatedMetrics","::IceMX::Metrics"],-1,void 0,void 0,!1),IceMX.CollocatedMetricsPrx=L.defineProxy(IceMX.ChildInvocationMetricsPrx,IceMX.CollocatedMetrics.ice_staticId,void 0),L.defineOperations(IceMX.CollocatedMetrics,IceMX.CollocatedMetricsPrx),IceMX.RemoteMetrics=L.defineObject((function(e,t,n,r,i,o,a){IceMX.ChildInvocationMetrics.call(this,e,t,n,r,i,o,a)}),IceMX.ChildInvocationMetrics,void 0,3,["::Ice::Object","::IceMX::ChildInvocationMetrics","::IceMX::Metrics","::IceMX::RemoteMetrics"],-1,void 0,void 0,!1),IceMX.RemoteMetricsPrx=L.defineProxy(IceMX.ChildInvocationMetricsPrx,IceMX.RemoteMetrics.ice_staticId,void 0),L.defineOperations(IceMX.RemoteMetrics,IceMX.RemoteMetricsPrx),IceMX.InvocationMetrics=L.defineObject((function(e,t,n,r,i,o,a,c,s){IceMX.Metrics.call(this,e,t,n,r,i),this.retry=void 0!==o?o:0,this.userException=void 0!==a?a:0,this.remotes=void 0!==c?c:null,this.collocated=void 0!==s?s:null}),IceMX.Metrics,void 0,1,["::Ice::Object","::IceMX::InvocationMetrics","::IceMX::Metrics"],-1,(function(e){e.writeInt(this.retry),e.writeInt(this.userException),IceMX.MetricsMapHelper.write(e,this.remotes),IceMX.MetricsMapHelper.write(e,this.collocated)}),(function(e){this.retry=e.readInt(),this.userException=e.readInt(),this.remotes=IceMX.MetricsMapHelper.read(e),this.collocated=IceMX.MetricsMapHelper.read(e)}),!1),IceMX.InvocationMetricsPrx=L.defineProxy(IceMX.MetricsPrx,IceMX.InvocationMetrics.ice_staticId,void 0),L.defineOperations(IceMX.InvocationMetrics,IceMX.InvocationMetricsPrx),IceMX.ConnectionMetrics=L.defineObject((function(e,t,n,r,i,o,a){IceMX.Metrics.call(this,e,t,n,r,i),this.receivedBytes=void 0!==o?o:new Ice.Long(0,0),this.sentBytes=void 0!==a?a:new Ice.Long(0,0)}),IceMX.Metrics,void 0,1,["::Ice::Object","::IceMX::ConnectionMetrics","::IceMX::Metrics"],-1,(function(e){e.writeLong(this.receivedBytes),e.writeLong(this.sentBytes)}),(function(e){this.receivedBytes=e.readLong(),this.sentBytes=e.readLong()}),!1),IceMX.ConnectionMetricsPrx=L.defineProxy(IceMX.MetricsPrx,IceMX.ConnectionMetrics.ice_staticId,void 0),L.defineOperations(IceMX.ConnectionMetrics,IceMX.ConnectionMetricsPrx),function(){Ice.Debug;var e=Ice.HashMap,t=Ice.ConnectRequestHandler,n=Ice.Class({__init__:function(t){this._instance=t,this._handlers=new e(e.compareEquals)},getRequestHandler:function(e,n){var r,i=!1;return e.getCacheConnection()?(r=this._handlers.get(e))||(r=new t(e,n),this._handlers.set(e,r),i=!0):(i=!0,r=new t(e,n)),i&&e.getConnection().then((function(e,t){r.setConnection(e,t)}),(function(e){r.setException(e)})),n.__setRequestHandler(r.connect(n))},removeRequestHandler:function(e,t){e.getCacheConnection()&&this._handlers.get(e)===t&&this._handlers.del(e)}});Ice.RequestHandlerFactory=n}(),Ice.Process=L.defineObject(void 0,Ice.Object,void 0,1,["::Ice::Object","::Ice::Process"],-1,void 0,void 0,!1),Ice.ProcessPrx=L.defineProxy(Ice.ObjectPrx,Ice.Process.ice_staticId,void 0),L.defineOperations(Ice.Process,Ice.ProcessPrx,{shutdown:[,,,,,,,,,,],writeMessage:[,,,,,,[[7],[3]],,,,]}),M=Ice.TcpEndpointI,A=Ice.Class({__init__:function(e){this._instance=e},type:function(){return this._instance.type()},protocol:function(){return this._instance.protocol()},create:function(e,t){var n=new M(this._instance);return n.initWithOptions(e,t),n},read:function(e){var t=new M(this._instance);return t.initWithStream(e),t},destroy:function(){this._instance=null},clone:function(e){return new A(e)}}),Ice.TcpEndpointFactory=A,L.defineDictionary(Ice,"PropertyDict","PropertyDictHelper","Ice.StringHelper","Ice.StringHelper",!1,void 0,void 0),Ice.PropertiesAdmin=L.defineObject(void 0,Ice.Object,void 0,1,["::Ice::Object","::Ice::PropertiesAdmin"],-1,void 0,void 0,!1),Ice.PropertiesAdminPrx=L.defineProxy(Ice.ObjectPrx,Ice.PropertiesAdmin.ice_staticId,void 0),L.defineOperations(Ice.PropertiesAdmin,Ice.PropertiesAdminPrx,{getProperty:[,,,,,[7],[[7]],,,,],getPropertiesForPrefix:[,,,,,["Ice.PropertyDictHelper"],[[7]],,,,],setProperties:[,,,1,,,[["Ice.PropertyDictHelper"]],,,,]}),Ice.LogMessageType=L.defineEnum([["PrintMessage",0],["TraceMessage",1],["WarningMessage",2],["ErrorMessage",3]]),L.defineSequence(Ice,"LogMessageTypeSeqHelper","Ice.LogMessageType.__helper",!1),Ice.LogMessage=L.defineStruct((function(e,t,n,r){this.type=void 0!==e?e:Ice.LogMessageType.PrintMessage,this.timestamp=void 0!==t?t:0,this.traceCategory=void 0!==n?n:"",this.message=void 0!==r?r:""}),!0,(function(e){Ice.LogMessageType.__write(e,this.type),e.writeLong(this.timestamp),e.writeString(this.traceCategory),e.writeString(this.message)}),(function(e){this.type=Ice.LogMessageType.__read(e),this.timestamp=e.readLong(),this.traceCategory=e.readString(),this.message=e.readString()}),11,!1),L.defineSequence(Ice,"LogMessageSeqHelper","Ice.LogMessage",!1),Ice.RemoteLogger=L.defineObject(void 0,Ice.Object,void 0,1,["::Ice::Object","::Ice::RemoteLogger"],-1,void 0,void 0,!1),Ice.RemoteLoggerPrx=L.defineProxy(Ice.ObjectPrx,Ice.RemoteLogger.ice_staticId,void 0),L.defineOperations(Ice.RemoteLogger,Ice.RemoteLoggerPrx,{init:[,,,,,,[[7],["Ice.LogMessageSeqHelper"]],,,,],log:[,,,,,,[[Ice.LogMessage]],,,,]}),Ice.RemoteLoggerAlreadyAttachedException=L.defineUserException((function(e){Ice.UserException.call(this,e)}),Ice.UserException,"Ice::RemoteLoggerAlreadyAttachedException",void 0,void 0,!1,!1),Ice.LoggerAdmin=L.defineObject(void 0,Ice.Object,void 0,0,["::Ice::LoggerAdmin","::Ice::Object"],-1,void 0,void 0,!1),Ice.LoggerAdminPrx=L.defineProxy(Ice.ObjectPrx,Ice.LoggerAdmin.ice_staticId,void 0),L.defineOperations(Ice.LoggerAdmin,Ice.LoggerAdminPrx,{attachRemoteLogger:[,,,,,,[["Ice.RemoteLoggerPrx"],["Ice.LogMessageTypeSeqHelper"],["Ice.StringSeqHelper"],[3]],,[Ice.RemoteLoggerAlreadyAttachedException],,],detachRemoteLogger:[,,,,,[1],[["Ice.RemoteLoggerPrx"]],,,,],getLog:[,,,,,["Ice.LogMessageSeqHelper"],[["Ice.LogMessageTypeSeqHelper"],["Ice.StringSeqHelper"],[3]],[[7]],,,]}),O=Ice.WSEndpoint,k=Ice.Class({__init__:function(e,t){this._instance=e,this._delegate=t},type:function(){return this._instance.type()},protocol:function(){return this._instance.protocol()},create:function(e,t){var n=new O(this._instance,this._delegate.create(e,t));return n.initWithOptions(e),n},read:function(e){var t=new O(this._instance,this._delegate.read(e));return t.initWithStream(e),t},destroy:function(){this._delegate.destroy(),this._instance=null}}),Ice.WSEndpointFactory=k,L.defineDictionary(Ice,"SliceChecksumDict","SliceChecksumDictHelper","Ice.StringHelper","Ice.StringHelper",!1,void 0,void 0),function(){var e=Ice.AsyncResultBase,t=Ice.Debug,n=Ice.DefaultsAndOverrides,r=Ice.EndpointFactoryManager,i=(Ice.HashMap,Ice.ImplicitContextI),o=Ice.LocatorManager,a=(Ice.Logger,Ice.ObjectAdapterFactory),c=Ice.ObjectFactoryManager,s=Ice.OutgoingConnectionFactory,l=(Ice.Promise,Ice.Properties),u=Ice.ProxyFactory,d=Ice.RetryQueue,f=Ice.RouterManager,h=Ice.Timer,p=Ice.TraceLevels,_=Ice.ReferenceFactory,g=Ice.RequestHandlerFactory,C=Ice.ACMConfig,v=Ice.Class({__init__:function(e){this._state=0,this._initData=e,this._traceLevels=null,this._defaultsAndOverrides=null,this._messageSizeMax=0,this._batchAutoFlushSize=0,this._clientACM=null,this._implicitContext=null,this._routerManager=null,this._locatorManager=null,this._referenceFactory=null,this._requestHandlerFactory=null,this._proxyFactory=null,this._outgoingConnectionFactory=null,this._servantFactoryManager=null,this._objectAdapterFactory=null,this._retryQueue=null,this._endpointHostResolver=null,this._endpointFactoryManager=null},initializationData:function(){return this._initData},traceLevels:function(){return t.assert(null!==this._traceLevels),this._traceLevels},defaultsAndOverrides:function(){return t.assert(null!==this._defaultsAndOverrides),this._defaultsAndOverrides},routerManager:function(){if(2===this._state)throw new Ice.CommunicatorDestroyedException;return t.assert(null!==this._routerManager),this._routerManager},locatorManager:function(){if(2===this._state)throw new Ice.CommunicatorDestroyedException;return t.assert(null!==this._locatorManager),this._locatorManager},referenceFactory:function(){if(2===this._state)throw new Ice.CommunicatorDestroyedException;return t.assert(null!==this._referenceFactory),this._referenceFactory},requestHandlerFactory:function(){if(2===this._state)throw new Ice.CommunicatorDestroyedException;return t.assert(null!==this._requestHandlerFactory),this._requestHandlerFactory},proxyFactory:function(){if(2===this._state)throw new Ice.CommunicatorDestroyedException;return t.assert(null!==this._proxyFactory),this._proxyFactory},outgoingConnectionFactory:function(){if(2===this._state)throw new Ice.CommunicatorDestroyedException;return t.assert(null!==this._outgoingConnectionFactory),this._outgoingConnectionFactory},servantFactoryManager:function(){if(2===this._state)throw new Ice.CommunicatorDestroyedException;return t.assert(null!==this._servantFactoryManager),this._servantFactoryManager},objectAdapterFactory:function(){if(2===this._state)throw new Ice.CommunicatorDestroyedException;return t.assert(null!==this._objectAdapterFactory),this._objectAdapterFactory},retryQueue:function(){if(2===this._state)throw new Ice.CommunicatorDestroyedException;return t.assert(null!==this._retryQueue),this._retryQueue},timer:function(){if(2===this._state)throw new Ice.CommunicatorDestroyedException;return t.assert(null!==this._timer),this._timer},endpointFactoryManager:function(){if(2===this._state)throw new Ice.CommunicatorDestroyedException;return t.assert(null!==this._endpointFactoryManager),this._endpointFactoryManager},messageSizeMax:function(){return this._messageSizeMax},batchAutoFlushSize:function(){return this._batchAutoFlushSize},clientACM:function(){return this._clientACM},getImplicitContext:function(){return this._implicitContext},stringToIdentity:function(e){return Ice.stringToIdentity(e)},identityToString:function(e){return Ice.identityToString(e)},setDefaultLocator:function(e){if(2==this._state)throw new Ice.CommunicatorDestroyedException;this._referenceFactory=this._referenceFactory.setDefaultLocator(e)},setDefaultRouter:function(e){if(2==this._state)throw new Ice.CommunicatorDestroyedException;this._referenceFactory=this._referenceFactory.setDefaultRouter(e)},setLogger:function(e){this._initData.logger=e},finishSetup:function(e,t){try{null===this._initData.properties&&(this._initData.properties=l.createProperties()),void 0===Ice.__oneOfDone&&(Ice.__printStackTraces=this._initData.properties.getPropertyAsIntWithDefault("Ice.PrintStackTraces",0)>0,Ice.__oneOfDone=!0),null===this._initData.logger&&(this._initData.logger=Ice.getProcessLogger()),this._traceLevels=new p(this._initData.properties),this._defaultsAndOverrides=new n(this._initData.properties,this._initData.logger);var v=this._initData.properties.getPropertyAsIntWithDefault("Ice.MessageSizeMax",1024);this._messageSizeMax=v<1||v>2147483647/1024?2147483647:1024*v,0===this._initData.properties.getProperty("Ice.BatchAutoFlushSize").length&&this._initData.properties.getProperty("Ice.BatchAutoFlush").length>0?this._initData.properties.getPropertyAsInt("Ice.BatchAutoFlush")>0&&(this._batchAutoFlushSize=this._messageSizeMax):(v=this._initData.properties.getPropertyAsIntWithDefault("Ice.BatchAutoFlushSize",1024),this._batchAutoFlushSize=v<1?v:v>2147483647/1024?2147483647:1024*v),this._clientACM=new C(this._initData.properties,this._initData.logger,"Ice.ACM.Client",new C(this._initData.properties,this._initData.logger,"Ice.ACM",new C)),this._implicitContext=i.create(this._initData.properties.getProperty("Ice.ImplicitContext")),this._routerManager=new f,this._locatorManager=new o(this._initData.properties),this._referenceFactory=new _(this,e),this._requestHandlerFactory=new g(this,e),this._proxyFactory=new u(this),this._endpointFactoryManager=new r(this);var m=new Ice.ProtocolInstance(this,Ice.TCPEndpointType,"tcp",!1),y=new Ice.TcpEndpointFactory(m);this._endpointFactoryManager.add(y);var S=new Ice.ProtocolInstance(this,Ice.WSEndpointType,"ws",!1),I=new Ice.WSEndpointFactory(S,y.clone(S));this._endpointFactoryManager.add(I);var R=new Ice.ProtocolInstance(this,IceSSL.EndpointType,"ssl",!0),w=new Ice.TcpEndpointFactory(R);this._endpointFactoryManager.add(w);var b=new Ice.ProtocolInstance(this,Ice.WSSEndpointType,"wss",!0),E=new Ice.WSEndpointFactory(b,w.clone(b));this._endpointFactoryManager.add(E),this._outgoingConnectionFactory=new s(e,this),this._servantFactoryManager=new c,this._objectAdapterFactory=new a(this,e),this._retryQueue=new d(this),this._timer=new h(this._initData.logger);var D=Ice.RouterPrx.uncheckedCast(this._proxyFactory.propertyToProxy("Ice.Default.Router"));null!==D&&(this._referenceFactory=this._referenceFactory.setDefaultRouter(D));var P=Ice.LocatorPrx.uncheckedCast(this._proxyFactory.propertyToProxy("Ice.Default.Locator"));null!==P&&(this._referenceFactory=this._referenceFactory.setDefaultLocator(P)),null!==t&&t.succeed(e)}catch(e){if(null===t)throw e instanceof Ice.LocalException&&this.destroy(),e;e instanceof Ice.LocalException?this.destroy().finally2((function(){t.fail(e)})):t.fail(e)}},destroy:function(){var t=new e(null,"destroy",null,this,null);if(1==this._state)return this._destroyPromises||(this._destroyPromises=[]),this._destroyPromises.push(t),t;this._state=1;var n=this;return Ice.Promise.try2((function(){if(n._objectAdapterFactory)return n._objectAdapterFactory.shutdown()})).then((function(){if(null!==n._outgoingConnectionFactory&&n._outgoingConnectionFactory.destroy(),null!==n._objectAdapterFactory)return n._objectAdapterFactory.destroy()})).then((function(){if(null!==n._outgoingConnectionFactory)return n._outgoingConnectionFactory.waitUntilFinished()})).then((function(){var e;if(n._retryQueue&&n._retryQueue.destroy(),n._timer&&n._timer.destroy(),n._servantFactoryManager&&n._servantFactoryManager.destroy(),n._routerManager&&n._routerManager.destroy(),n._locatorManager&&n._locatorManager.destroy(),n._endpointFactoryManager&&n._endpointFactoryManager.destroy(),n._initData.properties.getPropertyAsInt("Ice.Warn.UnusedProperties")>0){var r=n._initData.properties.getUnusedProperties();if(r.length>0){var i=[];for(i.push("The following properties were set but never read:"),e=0;e<r.length;++e)i.push("\n    "),i.push(r[e]);n._initData.logger.warning(i.join(""))}}if(n._objectAdapterFactory=null,n._outgoingConnectionFactory=null,n._retryQueue=null,n._timer=null,n._servantFactoryManager=null,n._referenceFactory=null,n._requestHandlerFactory=null,n._proxyFactory=null,n._routerManager=null,n._locatorManager=null,n._endpointFactoryManager=null,n._state=2,this._destroyPromises)for(e=0;e<this._destroyPromises.length;++e)this._destroyPromises[e].succeed(this._destroyPromises[e]);t.succeed(t)})).exception((function(e){if(this._destroyPromises)for(var n=0;n<this._destroyPromises.length;++n)this._destroyPromises[n].fail(e,this._destroyPromises[n]);t.fail(e,t)})),t}});Ice.Instance=v}(),V=Ice.Instance,Ice.Promise,N=Ice.Class({__init__:function(e){this._instance=new V(e)},finishSetup:function(e){this._instance.finishSetup(this,e)},destroy:function(){return this._instance.destroy()},shutdown:function(){this._instance.objectAdapterFactory().shutdown()},waitForShutdown:function(){return this._instance.objectAdapterFactory().waitForShutdown()},isShutdown:function(){return this._instance.objectAdapterFactory().isShutdown()},stringToProxy:function(e){return this._instance.proxyFactory().stringToProxy(e)},proxyToString:function(e){return this._instance.proxyFactory().proxyToString(e)},propertyToProxy:function(e){return this._instance.proxyFactory().propertyToProxy(e)},proxyToProperty:function(e,t){return this._instance.proxyFactory().proxyToProperty(e,t)},stringToIdentity:function(e){return this._instance.stringToIdentity(e)},identityToString:function(e){return this._instance.identityToString(e)},createObjectAdapter:function(e){var t=new Ice.AsyncResultBase(this,"createObjectAdapter",this,null,null);return this._instance.objectAdapterFactory().createObjectAdapter(e,null,t),t},createObjectAdapterWithEndpoints:function(e,t){0===e.length&&(e=Ice.generateUUID()),this.getProperties().setProperty(e+".Endpoints",t);var n=new Ice.AsyncResultBase(this,"createObjectAdapterWithEndpoints",this,null,null);return this._instance.objectAdapterFactory().createObjectAdapter(e,null,n),n},createObjectAdapterWithRouter:function(e,t){0===e.length&&(e=Ice.generateUUID());for(var n=new Ice.AsyncResultBase(this,"createObjectAdapterWithRouter",this,null,null),r=this.proxyToProperty(t,e+".Router").entries;null!==r;r=r.next)this.getProperties().setProperty(r.key,r.value);return this._instance.objectAdapterFactory().createObjectAdapter(e,t,n),n},addObjectFactory:function(e,t){this._instance.servantFactoryManager().add(e,t)},findObjectFactory:function(e){return this._instance.servantFactoryManager().find(e)},getImplicitContext:function(){return this._instance.getImplicitContext()},getProperties:function(){return this._instance.initializationData().properties},getLogger:function(){return this._instance.initializationData().logger},getDefaultRouter:function(){return this._instance.referenceFactory().getDefaultRouter()},setDefaultRouter:function(e){this._instance.setDefaultRouter(e)},getDefaultLocator:function(){return this._instance.referenceFactory().getDefaultLocator()},setDefaultLocator:function(e){this._instance.setDefaultLocator(e)},flushBatchRequests:function(){return this._instance.outgoingConnectionFactory().flushAsyncBatchRequests()}}),Object.defineProperty(N.prototype,"instance",{get:function(){return this._instance}}),Ice.Communicator=N,function(){var e=Ice.Protocol;Ice.InitializationData=function(){this.properties=null,this.logger=null},Ice.InitializationData.prototype.clone=function(){var e=new Ice.InitializationData;return e.properties=this.properties,e.logger=this.logger,e},Ice.initialize=function(e,t){var n=null,r=null;if(e instanceof Array)n=e;else if(e instanceof Ice.InitializationData)r=e;else if(null!=e)throw new Ice.InitializationException("invalid argument to initialize");if(null!=t){if(!(t instanceof Ice.InitializationData&&null===r))throw new Ice.InitializationException("invalid argument to initialize");r=t}(r=null===r?new Ice.InitializationData:r.clone()).properties=Ice.createProperties(n,r.properties);var i=new Ice.Communicator(r);return i.finishSetup(null),i},Ice.createProperties=function(e,t){return new Ice.Properties(e,t)},Ice.currentProtocol=function(){return e.currentProtocol.clone()},Ice.currentEncoding=function(){return e.currentEncoding.clone()}}(),t.Ice=Ice,t.IceMX=IceMX,t.IceSSL=IceSSL}()},5417:function(e,t,n){e=n.nmd(e),function(e,t,n){var r=t("ice").Ice,i=r.__M,o=r.Slice,a=i.module("Common");a.ConferenceError=o.defineUserException((function(e,t,n){r.UserException.call(this,n),this.error=void 0!==e?e:0,this.reason=void 0!==t?t:""}),r.UserException,"Common::ConferenceError",(function(e){e.writeInt(this.error),e.writeString(this.reason)}),(function(e){this.error=e.readInt(),this.reason=e.readString()}),!1,!1),n.Common=a}("undefined"!=typeof global&&global.process,"undefined"!=typeof global&&void 0!==global.process?n(3760):window.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?t:this)},7571:function(e,t,n){e=n.nmd(e),function(e,t,n){var r=t("ice").Ice,i=(r.__M,t("Common/Exception").Common),o=t("Control/PublicTypes").Conference,a=r.Slice;a.defineSequence(o,"MusicListHelper","Ice.StringHelper",!1),a.defineDictionary(o,"TerminalEnergy","TerminalEnergyHelper","Ice.ShortHelper","Ice.IntHelper",!0,void 0,void 0),a.defineSequence(o,"deviceLstHelper","Ice.StringHelper",!1),o.remoteAudio=a.defineStruct((function(e,t,n,r,i,o,a,c){this.inputDevice=void 0!==e?e:"",this.outputDevice=void 0!==t?t:"",this.bMicBoost=void 0!==n&&n,this.hiLevelEC=void 0!==r?r:0,this.outputDType=void 0!==i?i:0,this.echoDelay=void 0!==o?o:0,this.outputVolume=void 0!==a?a:0,this.inputVolume=void 0!==c?c:0}),!0,(function(e){e.writeString(this.inputDevice),e.writeString(this.outputDevice),e.writeBool(this.bMicBoost),e.writeInt(this.hiLevelEC),e.writeInt(this.outputDType),e.writeInt(this.echoDelay),e.writeInt(this.outputVolume),e.writeInt(this.inputVolume)}),(function(e){this.inputDevice=e.readString(),this.outputDevice=e.readString(),this.bMicBoost=e.readBool(),this.hiLevelEC=e.readInt(),this.outputDType=e.readInt(),this.echoDelay=e.readInt(),this.outputVolume=e.readInt(),this.inputVolume=e.readInt()}),23,!1),o.remoteAudioInf=a.defineStruct((function(e,t,n){this.inputDLst=void 0!==e?e:null,this.outputDLst=void 0!==t?t:null,this.remoteInf=void 0!==n?n:new o.remoteAudio}),!0,(function(e){o.deviceLstHelper.write(e,this.inputDLst),o.deviceLstHelper.write(e,this.outputDLst),o.remoteAudio.write(e,this.remoteInf)}),(function(e){this.inputDLst=o.deviceLstHelper.read(e),this.outputDLst=o.deviceLstHelper.read(e),this.remoteInf=o.remoteAudio.read(e,this.remoteInf)}),25,!1),o.AudioCallback=a.defineObject(void 0,r.Object,void 0,0,["::Conference::AudioCallback","::Ice::Object"],-1,void 0,void 0,!1),o.AudioCallbackPrx=a.defineProxy(r.ObjectPrx,o.AudioCallback.ice_staticId,void 0),a.defineOperations(o.AudioCallback,o.AudioCallbackPrx,{updateStatus:[,,,,,,[[2],[2],[o.ASTATUS.__helper]],,,,],updateVoiceEnergy:[,,,,,,[["Conference.TerminalEnergyHelper"]],,,,],updateSpeaker:[,,,,,,[[2]],,,,],closeAll:[,,,,,,[[2]],,,,],playBackgroundMusic:[,,,,,,[[2],[1]],,,,],notifyVoiceHowling:[,,,,,,[[2],[1]],,,,],notifyVoiceNoise:[,,,,,,[[2],[1]],,,,],getRemoteAudioInfNotify:[,,,1,,[o.remoteAudioInf],[[2]],,[i.ConferenceError],,],remoteAudioSetNotify:[,,,,,,[[2],[o.remoteAudio]],,[i.ConferenceError],,],notifyLanLessMicOpen:[,,,,,,,,,,],notifySetVoiceChange:[,,,,,,[[2],[2],[3]],,,,]}),o.AudioCtrl=a.defineObject(void 0,r.Object,void 0,0,["::Conference::AudioCtrl","::Ice::Object"],-1,void 0,void 0,!1),o.AudioCtrlPrx=a.defineProxy(r.ObjectPrx,o.AudioCtrl.ice_staticId,void 0),a.defineOperations(o.AudioCtrl,o.AudioCtrlPrx,{setDeviceStatus:[,,,1,,,[[1]],,[i.ConferenceError],,],askForMic:[,,,1,,,,,[i.ConferenceError],,],openMicEx:[,,,1,,,[[2]],,[i.ConferenceError],,],closeMicEx:[,,,1,,,[[2]],,[i.ConferenceError],,],closeAll:[,,,1,,,,,[i.ConferenceError],,],setVoiceEnergy:[,,,1,,,[[3]],,[i.ConferenceError],,],pstnSwitchMicStatus:[,,,1,,,,,[i.ConferenceError],,],startRecord:[,,,1,,,,,[i.ConferenceError],,],isRecording:[,,,1,,[1],,,[i.ConferenceError],,],stopRecord:[,,,1,,,,,[i.ConferenceError],,],playApplause:[,,,1,,,,,[i.ConferenceError],,],getMusicList:[,,,1,,["Conference.MusicListHelper"],,,[i.ConferenceError],,],getPlayBGMusic:[,,,1,,[7],,,[i.ConferenceError],,],startBGMusic:[,,,1,,,[[7],[3]],,[i.ConferenceError],,],stopPlayBGMusic:[,,,1,,,,,[i.ConferenceError],,],setPlayBGMusicVolumn:[,,,1,,,[[3]],,[i.ConferenceError],,],getPlayBGMusicVolumn:[,,,1,,[3],,,[i.ConferenceError],,],voiceHowling:[,,,1,,,[[1]],,,,],voiceNoise:[,,,1,,,[[1]],,,,],remoteAudioSet:[,,,1,,,[[2],[o.remoteAudio]],,[i.ConferenceError],,],getRemoteAudioInf:[,,,1,,[o.remoteAudioInf],[[2]],,[i.ConferenceError],,],setMediaAudioState:[,,,1,,,[[7]],,,,],batchSubscribeAudio:[,,,1,,,[[7]],,[i.ConferenceError],,],setVoiceChange:[,,,1,,,[[2],[3]],,[i.ConferenceError],,]}),n.Conference=o}("undefined"!=typeof global&&global.process,"undefined"!=typeof global&&void 0!==global.process?n(1457):window.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?t:this)},736:function(e,t,n){e=n.nmd(e),function(e,t,n){var r=t("ice").Ice,i=r.__M,o=t("Common/Exception").Common,a=i.require(e,["Control/Member","Control/Contact","Control/PublicTypes","Control/Notice","Control/ConferenceV4"]).Conference,c=r.Slice;a.LoginResponse=c.defineStruct((function(e,t,n,r,i,o,c,s,l,u,d,f,h,p,_,g,C,v,m,y,S,I,R){this.termId=void 0!==e?e:0,this.option=void 0!==t?t:0,this.myDetail=void 0!==n?n:new a.Contact,this.modules=void 0!==r?r:null,this.activeMembers=void 0!==i?i:null,this.ServerUTCTime=void 0!==o?o:0,this.bRoomLocked=void 0!==c&&c,this.confInfo=void 0!==s?s:null,this.isBegan=void 0!==l&&l,this.countdown=void 0!==u?u:0,this.fileServers=void 0!==d?d:null,this.vqs=void 0!==f?f:null,this.windowMode=void 0!==h?h:a.WINDOW_MODE.VMANAGER_LOCK,this.mainVideoTermID=void 0!==p?p:0,this.vlo=void 0!==_?_:a.VIDEOLAYOUTMODE.VLO_1v1_M,this.bAllowWall=void 0!==g&&g,this.curMainTab=void 0!==C?C:new a.TabID,this.curSubTab=void 0!==v?v:new a.TabID,this.bFull=void 0!==m&&m,this.sm=void 0!==y?y:a.SYNCMODE.SYNC_FORCE,this.lastTabValue=void 0!==S?S:0,this.lastElemValue=void 0!==I?I:0,this.wbDescibes=void 0!==R?R:null}),!1,(function(e){e.writeShort(this.termId),e.writeInt(this.option),a.Contact.write(e,this.myDetail),a.ModuleDictHelper.write(e,this.modules),a.MemberSeqHelper.write(e,this.activeMembers),e.writeInt(this.ServerUTCTime),e.writeBool(this.bRoomLocked),a.StringStringMapHelper.write(e,this.confInfo),e.writeBool(this.isBegan),e.writeInt(this.countdown),a.FileServerSeqHelper.write(e,this.fileServers),a.VideoQualitySeqHelper.write(e,this.vqs),a.WINDOW_MODE.__write(e,this.windowMode),e.writeShort(this.mainVideoTermID),a.VIDEOLAYOUTMODE.__write(e,this.vlo),e.writeBool(this.bAllowWall),a.TabID.write(e,this.curMainTab),a.TabID.write(e,this.curSubTab),e.writeBool(this.bFull),a.SYNCMODE.__write(e,this.sm),e.writeShort(this.lastTabValue),e.writeShort(this.lastElemValue),a.WhiteBoardDescribeSeqHelper.write(e,this.wbDescibes)}),(function(e){this.termId=e.readShort(),this.option=e.readInt(),this.myDetail=a.Contact.read(e,this.myDetail),this.modules=a.ModuleDictHelper.read(e),this.activeMembers=a.MemberSeqHelper.read(e),this.ServerUTCTime=e.readInt(),this.bRoomLocked=e.readBool(),this.confInfo=a.StringStringMapHelper.read(e),this.isBegan=e.readBool(),this.countdown=e.readInt(),this.fileServers=a.FileServerSeqHelper.read(e),this.vqs=a.VideoQualitySeqHelper.read(e),this.windowMode=a.WINDOW_MODE.__read(e),this.mainVideoTermID=e.readShort(),this.vlo=a.VIDEOLAYOUTMODE.__read(e),this.bAllowWall=e.readBool(),this.curMainTab=a.TabID.read(e,this.curMainTab),this.curSubTab=a.TabID.read(e,this.curSubTab),this.bFull=e.readBool(),this.sm=a.SYNCMODE.__read(e),this.lastTabValue=e.readShort(),this.lastElemValue=e.readShort(),this.wbDescibes=a.WhiteBoardDescribeSeqHelper.read(e)}),50,!1),a.ConferenceRoom=c.defineObject(void 0,r.Object,[a.ConferenceSessionV4],0,["::Conference::ConferenceRoom","::Conference::ConferenceSessionV4","::Ice::Object"],-1,void 0,void 0,!1),a.ConferenceRoomPrx=c.defineProxy(r.ObjectPrx,a.ConferenceRoom.ice_staticId,[a.ConferenceSessionV4Prx]),c.defineOperations(a.ConferenceRoom,a.ConferenceRoomPrx,{login:[,,,1,,[a.LoginResponse],[[a.LoginRequest]],,[o.ConferenceError],,]}),a.SSLoginRequest=c.defineStruct((function(e,t,n,r,i,o,a,c){this.confKey=void 0!==e?e:"",this.memberId=void 0!==t?t:0,this.memberType=void 0!==n?n:0,this.phoneNum=void 0!==r?r:"",this.callbacks=void 0!==i?i:null,this.accessNo=void 0!==o?o:0,this.PIN=void 0!==a?a:"",this.sessionId=void 0!==c?c:""}),!1,(function(e){e.writeString(this.confKey),e.writeInt(this.memberId),e.writeByte(this.memberType),e.writeString(this.phoneNum),a.ModuleDictHelper.write(e,this.callbacks),e.writeInt(this.accessNo),e.writeString(this.PIN),e.writeString(this.sessionId)}),(function(e){this.confKey=e.readString(),this.memberId=e.readInt(),this.memberType=e.readByte(),this.phoneNum=e.readString(),this.callbacks=a.ModuleDictHelper.read(e),this.accessNo=e.readInt(),this.PIN=e.readString(),this.sessionId=e.readString()}),14,!1),a.SSLoginResponse=c.defineStruct((function(e,t,n,r,i,o,c,s){this.termId=void 0!==e?e:0,this.modules=void 0!==t?t:null,this.actor=void 0!==n?n:0,this.needPIN=void 0!==r&&r,this.PINLen=void 0!==i?i:0,this.currentTermNum=void 0!==o?o:0,this.isBegan=void 0!==c&&c,this.audioStatus=void 0!==s?s:a.ASTATUS.AUNKNOWN}),!1,(function(e){e.writeShort(this.termId),a.ModuleDictHelper.write(e,this.modules),e.writeByte(this.actor),e.writeBool(this.needPIN),e.writeByte(this.PINLen),e.writeInt(this.currentTermNum),e.writeBool(this.isBegan),a.ASTATUS.__write(e,this.audioStatus)}),(function(e){this.termId=e.readShort(),this.modules=a.ModuleDictHelper.read(e),this.actor=e.readByte(),this.needPIN=e.readBool(),this.PINLen=e.readByte(),this.currentTermNum=e.readInt(),this.isBegan=e.readBool(),this.audioStatus=a.ASTATUS.__read(e)}),12,!1),Object.defineProperty(a,"PHASE_ALERTING",{value:0}),Object.defineProperty(a,"PHASE_CONNECT",{value:1}),Object.defineProperty(a,"PHASE_END",{value:2}),Object.defineProperty(a,"END_REASON_NORMAL",{value:0}),Object.defineProperty(a,"END_REASON_NO_ANSWER",{value:1}),Object.defineProperty(a,"END_REASON_REJECT",{value:2}),Object.defineProperty(a,"END_REASON_CONNECT_ERR",{value:3}),Object.defineProperty(a,"END_REASON_USER_BUSY",{value:4}),Object.defineProperty(a,"END_REASON_BALANCE_LESS",{value:5}),a.SoftSwitchUser=c.defineObject(void 0,r.Object,void 0,0,["::Conference::SoftSwitchUser","::Ice::Object"],-1,void 0,void 0,!1),a.SoftSwitchUserPrx=c.defineProxy(r.ObjectPrx,a.SoftSwitchUser.ice_staticId,void 0),c.defineOperations(a.SoftSwitchUser,a.SoftSwitchUserPrx,{login:[,,,1,,[a.SSLoginResponse],[[a.SSLoginRequest]],,[o.ConferenceError],,],callProgress:[,,,1,,,[[3],[3],[7]],,,,]}),a.AAAReport=c.defineObject(void 0,r.Object,void 0,0,["::Conference::AAAReport","::Ice::Object"],-1,void 0,void 0,!1),a.AAAReportPrx=c.defineProxy(r.ObjectPrx,a.AAAReport.ice_staticId,void 0),c.defineOperations(a.AAAReport,a.AAAReportPrx,{callBalanceLess:[,,,1,,,[[7],[7]],,[o.ConferenceError],,]}),c.defineDictionary(a,"IntMemberMap","IntMemberMapHelper","Ice.IntHelper","Conference.Member",!1,void 0,void 0,r.HashMap.compareEquals),a.AllMembersInfo=c.defineStruct((function(e,t){this.sn=void 0!==e?e:0,this.memberMap=void 0!==t?t:null}),!1,(function(e){e.writeLong(this.sn),a.IntMemberMapHelper.write(e,this.memberMap)}),(function(e){this.sn=e.readLong(),this.memberMap=a.IntMemberMapHelper.read(e)}),9,!1),a.ConfDataCenter=c.defineObject(void 0,r.Object,void 0,0,["::Conference::ConfDataCenter","::Ice::Object"],-1,void 0,void 0,!1),a.ConfDataCenterPrx=c.defineProxy(r.ObjectPrx,a.ConfDataCenter.ice_staticId,void 0),c.defineOperations(a.ConfDataCenter,a.ConfDataCenterPrx,{getActiveMembers:[,,,1,,[a.AllMembersInfo],[[7]],,[o.ConferenceError],,]}),a.WebAdmin=c.defineObject(void 0,r.Object,void 0,0,["::Conference::WebAdmin","::Ice::Object"],-1,void 0,void 0,!1),a.WebAdminPrx=c.defineProxy(r.ObjectPrx,a.WebAdmin.ice_staticId,void 0),c.defineOperations(a.WebAdmin,a.WebAdminPrx,{refresInvitees:[,,,1,,,,,[o.ConferenceError],,],refreshOptions:[,,,1,,,,,[o.ConferenceError],,],getConfStatus:[,,,1,,[7],,,,,],callInvite:[,,,1,,,[[7],[7],[1]],,[o.ConferenceError],,],getLiveStream:[,,,1,,["Conference.StringStringMapHelper"],,,[o.ConferenceError],,],requestThirdPartyLiveStreamUrl:[,,,1,,[7],[[3]],,,,],notifyLiveStreamStatus:[,,,1,,,[[3],[3]],,,,],refreshThirdPublishStatus:[,,,1,,,,,,,],startListLive:[,,,1,,[3],[[7]],,[o.ConferenceError],,],stopListLive:[,,,1,,[3],,,,,],notifyRedStatus:[,,,1,,,[[3],[7],[3],[3],[7],[7],[7],[7]],,,,],notifyThumbUp:[,,,1,,,[[3],[3],[3],[7]],,,,],notifypayback:[,,,1,,,[[3],[7]],,,,],swtichLiveAppElements:[,,,1,,,[[3],[2]],,,,],getActiveMembers:[,,,1,,["Conference.MemberSeqHelper"],,,[o.ConferenceError],,],startRtsp:[,,,1,,[7],[[3],[3],[3],[3]],,[o.ConferenceError],,],stopRtsp:[,,,1,,,,,[o.ConferenceError],,],getRtspInfo:[,,,1,,["Conference.StringStringMapHelper"],,,[o.ConferenceError],,],updateRtspContent:[,,,1,,,[[3],[3]],,[o.ConferenceError],,],startNoticeMsg:[,,,1,,,[[a.NoticeInfo]],,,,],kickout:[,,,1,,,[[7]],,[o.ConferenceError],,],sendMsg:[,,,1,,,[[7],[7]],,[o.ConferenceError],,],sendVoteMsg:[,,,1,,,[[7]],,[o.ConferenceError],,],sendVoteMsg2Host:[,,,1,,,[[7]],,[o.ConferenceError],,]}),c.defineDictionary(a,"MemberRights","MemberRightsHelper","Ice.ShortHelper","Conference.ByteListHelper",!1,void 0,void 0,r.ArrayUtil.equals),a.ChangedRights=c.defineStruct((function(e,t,n){this.termId=void 0!==e?e:0,this.addedRights=void 0!==t?t:null,this.reducedRights=void 0!==n?n:null}),!0,(function(e){e.writeShort(this.termId),a.ByteListHelper.write(e,this.addedRights),a.ByteListHelper.write(e,this.reducedRights)}),(function(e){this.termId=e.readShort(),this.addedRights=a.ByteListHelper.read(e),this.reducedRights=a.ByteListHelper.read(e)}),4,!1),c.defineSequence(a,"ChangedRightsSeqHelper","Conference.ChangedRights",!1),Object.defineProperty(a,"INVITE_PREPARE",{value:0}),Object.defineProperty(a,"PSTN_CALLING",{value:1}),Object.defineProperty(a,"PSTN_RING",{value:2}),Object.defineProperty(a,"PSTN_CONNECTED",{value:3}),Object.defineProperty(a,"PSTN_HUNG",{value:4}),Object.defineProperty(a,"PSTN_NO_ANSWER",{value:5}),Object.defineProperty(a,"PSTN_REJECT",{value:6}),Object.defineProperty(a,"PSTN_CONNECT_ERR",{value:7}),Object.defineProperty(a,"PSTN_BUSY",{value:8}),Object.defineProperty(a,"AAA_ACCOUNT_NOT_EXIST",{value:100}),Object.defineProperty(a,"AAA_NO_PERMIT",{value:101}),Object.defineProperty(a,"AAA_BALANCE_NOT_ENOUGH",{value:102}),Object.defineProperty(a,"INV_SMS_FAILED",{value:2}),Object.defineProperty(a,"INV_SMS_SUCCESS",{value:1}),Object.defineProperty(a,"INV_EMAIL_FAILED",{value:2}),Object.defineProperty(a,"INV_EMAIL_SUCCESS",{value:1}),Object.defineProperty(a,"INV_EMAIL_READED",{value:3}),Object.defineProperty(a,"WDT_1V1SUBMT_MONITOR",{value:0}),Object.defineProperty(a,"WDT_1v1SUBMT_CHAT",{value:1}),a.InvitedMember=c.defineStruct((function(e,t,n){this.member=void 0!==e?e:new a.Contact,this.pstnNotice=void 0!==t&&t,this.state=void 0!==n?n:0}),!0,(function(e){a.Contact.write(e,this.member),e.writeBool(this.pstnNotice),e.writeInt(this.state)}),(function(e){this.member=a.Contact.read(e,this.member),this.pstnNotice=e.readBool(),this.state=e.readInt()}),14,!1),c.defineSequence(a,"InvitedMembersHelper","Conference.InvitedMember",!1),a.INVITE_TYPE=c.defineEnum([["TP_CALL",0],["TP_SMS",1],["TP_EMAIL",2]]),c.defineDictionary(a,"InvitedMembersDict","InvitedMembersDictHelper","Conference.INVITE_TYPE.__helper","Conference.InvitedMembersHelper",!1,void 0,void 0,r.ArrayUtil.equals),c.defineDictionary(a,"HistoryMembers","HistoryMembersHelper","Ice.ShortHelper","Conference.Member",!1,void 0,void 0,r.HashMap.compareEquals),c.defineDictionary(a,"HistoryMemberNames","HistoryMemberNamesHelper","Ice.ShortHelper","Ice.StringHelper",!1,void 0,void 0),c.defineDictionary(a,"StatusDict","StatusDictHelper","Ice.StringHelper","Ice.StringHelper",!1,void 0,void 0),c.defineDictionary(a,"BroadCastDict","BroadCastDictHelper","Ice.StringHelper","Ice.StringHelper",!1,void 0,void 0),Object.defineProperty(a,"LD_MEMBER_LOCAL",{value:1}),Object.defineProperty(a,"LD_MEMBER_VIEWER",{value:2}),Object.defineProperty(a,"LD_MEMBER_ALL",{value:3}),a.LDPrize=c.defineStruct((function(e,t){this.prizeName=void 0!==e?e:"",this.prizeCnt=void 0!==t?t:0}),!0,(function(e){e.writeString(this.prizeName),e.writeInt(this.prizeCnt)}),(function(e){this.prizeName=e.readString(),this.prizeCnt=e.readInt()}),5,!1),a.LuckyDrawCfg=c.defineStruct((function(e,t,n,r){this.memberType=void 0!==e?e:0,this.cdTime=void 0!==t?t:0,this.isAutoDraw=void 0!==n&&n,this.prizes=void 0!==r?r:new a.LDPrize}),!0,(function(e){e.writeInt(this.memberType),e.writeInt(this.cdTime),e.writeBool(this.isAutoDraw),a.LDPrize.write(e,this.prizes)}),(function(e){this.memberType=e.readInt(),this.cdTime=e.readInt(),this.isAutoDraw=e.readBool(),this.prizes=a.LDPrize.read(e,this.prizes)}),14,!1),a.LuckyDrawMember=c.defineStruct((function(e,t,n){this.name=void 0!==e?e:"",this.contact=void 0!==t?t:"",this.memberType=void 0!==n?n:0}),!0,(function(e){e.writeString(this.name),e.writeString(this.contact),e.writeInt(this.memberType)}),(function(e){this.name=e.readString(),this.contact=e.readString(),this.memberType=e.readInt()}),6,!1),c.defineSequence(a,"LuckyDrawMembersHelper","Conference.LuckyDrawMember",!1),a.LDMembersCNT=c.defineStruct((function(e,t){this.memberLocalCnt=void 0!==e?e:0,this.memberViewerCnt=void 0!==t?t:0}),!0,(function(e){e.writeInt(this.memberLocalCnt),e.writeInt(this.memberViewerCnt)}),(function(e){this.memberLocalCnt=e.readInt(),this.memberViewerCnt=e.readInt()}),8,!0),a.LuckyResult=c.defineStruct((function(e,t,n){this.prize=void 0!==e?e:new a.LDPrize,this.annouceTime=void 0!==t?t:0,this.res=void 0!==n?n:null}),!0,(function(e){a.LDPrize.write(e,this.prize),e.writeInt(this.annouceTime),a.LuckyDrawMembersHelper.write(e,this.res)}),(function(e){this.prize=a.LDPrize.read(e,this.prize),this.annouceTime=e.readInt(),this.res=a.LuckyDrawMembersHelper.read(e)}),10,!1),a.VoteState=c.defineStruct((function(e,t,n,r,i){this.id=void 0!==e?e:"",this.voteOwner=void 0!==t?t:0,this.state=void 0!==n?n:0,this.voteInfo=void 0!==r?r:"",this.memberVotes=void 0!==i?i:null}),!1,(function(e){e.writeString(this.id),e.writeShort(this.voteOwner),e.writeInt(this.state),e.writeString(this.voteInfo),a.StringStringMapHelper.write(e,this.memberVotes)}),(function(e){this.id=e.readString(),this.voteOwner=e.readShort(),this.state=e.readInt(),this.voteInfo=e.readString(),this.memberVotes=a.StringStringMapHelper.read(e)}),9,!1),a.meetingAttr=c.defineStruct((function(e,t,n){this.value=void 0!==e?e:"",this.lastModifyUserID=void 0!==t?t:"",this.lastModifyTs=void 0!==n?n:0}),!0,(function(e){e.writeString(this.value),e.writeString(this.lastModifyUserID),e.writeInt(this.lastModifyTs)}),(function(e){this.value=e.readString(),this.lastModifyUserID=e.readString(),this.lastModifyTs=e.readInt()}),6,!1),c.defineDictionary(a,"MeetingAttrsMap","MeetingAttrsMapHelper","Ice.StringHelper","Conference.meetingAttr",!1,void 0,void 0,r.HashMap.compareEquals),c.defineDictionary(a,"UserAttrsMap","UserAttrsMapHelper","Ice.StringHelper","Conference.MeetingAttrsMapHelper",!1,void 0,void 0,r.HashMap.compareEquals),c.defineSequence(a,"stringSeqHelper","Ice.StringHelper",!1),a.ConferenceSession=c.defineObject(void 0,r.Object,void 0,0,["::Conference::ConferenceSession","::Ice::Object"],-1,void 0,void 0,!1),a.ConferenceSessionPrx=c.defineProxy(r.ObjectPrx,a.ConferenceSession.ice_staticId,void 0),c.defineOperations(a.ConferenceSession,a.ConferenceSessionPrx,{keepAlive:[,,,1,,,[["Conference.StatusDictHelper"]],,[o.ConferenceError],,],exit:[,,,1,,,[[7]],,,,],setAppStatus:[,,,1,,,[[1]],,[o.ConferenceError],,],changeNickname:[,,,1,,[7],[[2],[7]],,[o.ConferenceError],,],getActiveMembers:[,,,1,,["Conference.MemberSeqHelper"],,,[o.ConferenceError],,],getContacts:[,,,1,,["Conference.ContactTreeHelper"],,,[o.ConferenceError],,],applyDemoActor:[,,,1,,,,,[o.ConferenceError],,],applyAssistantActor:[,,,1,,,,,[o.ConferenceError],,],getOption:[,,,1,,[3],,,[o.ConferenceError],,],getMyDetail:[,,,1,,[a.Contact],,,[o.ConferenceError],,],getInfo:[,,,1,,["Conference.StringStringMapHelper"],,,[o.ConferenceError],,],setAgenda:[,,,1,,,[[7]],,[o.ConferenceError],,],setSubject:[,,,1,,,[[7]],,[o.ConferenceError],,],getPSTNNumber:[,,,1,,[7],,,[o.ConferenceError],,],setPSTNNumber:[,,,1,,,[[7],[1]],,[o.ConferenceError],,],generatePIN:[,,,1,,[7],,,,,],cancelPIN:[,,,1,,,,,,,],changeMemberRights:[,,,1,,,[["Conference.ChangedRightsSeqHelper"]],,[o.ConferenceError],,],getAllMemberRights:[,,,1,,["Conference.MemberRightsHelper"],,,[o.ConferenceError],,],changeOption:[,,,1,,,[[3]],,[o.ConferenceError],,],setDemoActor:[,,,1,,,[[2]],,[o.ConferenceError],,],setHostActor:[,,,1,,,[[2],[7]],,[o.ConferenceError],,],setPSTNHostActor:[,,,1,,,[[a.ContactIdType]],,[o.ConferenceError],,],getPSTNHostActor:[,,,1,,[a.ContactIdType],,,[o.ConferenceError],,],allowDemoActor:[,,,1,,,[[2],[1]],,[o.ConferenceError],,],setAssistantActor:[,,,1,,,[[2],[1]],,[o.ConferenceError],,],getInviteMembers:[,,,1,,["Conference.InvitedMembersDictHelper"],,,[o.ConferenceError],,],getSelfInviteInfo:[,,,1,,[a.InvitedMember],,,[o.ConferenceError],,],addPSTNInvite:[,,,1,,["Conference.ContactIdSeqHelper"],[["Conference.ContactSeqHelper"],[1]],,[o.ConferenceError],,],modifyPSTNInvitee:[,,,1,,,[[a.INVITE_TYPE.__helper],[a.Contact]],,,,],smsInvite:[,,,1,,["Conference.ContactIdSeqHelper"],[["Conference.ContactSeqHelper"]],,[o.ConferenceError],,],callInvite:[,,,1,,["Conference.ContactIdSeqHelper"],[["Conference.ContactSeqHelper"],[1]],,[o.ConferenceError],,],emailInvite:[,,,1,,["Conference.ContactIdSeqHelper"],[["Conference.ContactSeqHelper"]],,[o.ConferenceError],,],removeInvitee:[,,,1,,,[[a.INVITE_TYPE.__helper],[a.Contact]],,[o.ConferenceError],,],cancelCall:[,,,1,,,[[a.ContactIdType]],,,,],callCustomerService:[,,,1,,,,,[o.ConferenceError],,],sendFeedback:[,,,1,,,[[7],[7]],,[o.ConferenceError],,],kickout:[,,,1,,,[[2]],,[o.ConferenceError],,],lockRoom:[,,,1,,,[[1]],,[o.ConferenceError],,],beginConference:[,,,1,,[a.ContactIdType],[[a.Contact]],,[o.ConferenceError],,],endConference:[,,,1,,,,,[o.ConferenceError],,],toggleRoomLock:[,,,1,,,,,[o.ConferenceError],,],broadcastMemberCount:[,,,1,,,,,[o.ConferenceError],,],getMemberCount:[,,,1,,[3],,,[o.ConferenceError],,],getBalance:[,,,1,,,,,[o.ConferenceError],,],cancelCountdown:[,,,1,,,,,[o.ConferenceError],,],getHistoryMembers:[,,,1,,["Conference.HistoryMembersHelper"],[["Ice.ShortSeqHelper"]],,[o.ConferenceError],,],getHistoryMemberNames:[,,,1,,["Conference.HistoryMemberNamesHelper"],,,[o.ConferenceError],,],cancelAutoEnd:[,,,1,,,,,[o.ConferenceError],,],netDetectResults:[,,,1,,,[[3],[1]],,[o.ConferenceError],,],getUserStatus:[,,,1,,["Conference.StringStringMapHelper"],[[2],[3]],,[o.ConferenceError],,],start1v1SubMeeting:[,,,1,,,[[2]],,[o.ConferenceError],,],stop1v1SubMeeting:[,,,1,,,[[2]],,[o.ConferenceError],,],setWDT1v1SubMeetingMode:[,,,1,,,[[3]],,,,],reportIVRStatus:[,,,1,,,[[1]],,,,],startSvrBroadcast:[,,,1,,,[[7]],,[o.ConferenceError],,],startBroadCast:[,,,1,,,,,[o.ConferenceError],,],stopBroadCast:[,,,1,,,,,[o.ConferenceError],,],getBroadCastCfg:[,,,1,,[7],,,[o.ConferenceError],,],getBroadCastUrl:[,,,1,,["Conference.BroadCastDictHelper"],,,,,],enableBroadCastPlayback:[,,,1,,,,,[o.ConferenceError],,],disableBroadCastPlayback:[,,,1,,,[[3]],,[o.ConferenceError],,],setLuckyDrawCfg:[,,,1,,,[[a.LuckyDrawCfg]],,[o.ConferenceError],,],joinLuckyDrawMembers:[,,,1,,,[["Conference.LuckyDrawMembersHelper"],[3]],,[o.ConferenceError],,],clearLuckyDrawMembers:[,,,1,,,[[3]],,[o.ConferenceError],,],queryLuckyDrawMembers:[,,,1,,["Conference.LuckyDrawMembersHelper"],[[3],[2],[3]],,,,],announceLuckyDrawResult:[,,,1,,,,,[o.ConferenceError],,],getLuckyDrawCfg:[,,,1,,[a.LuckyDrawCfg],,,[o.ConferenceError],,],getLuckyDrawMembersStatus:[,,,1,,[a.LDMembersCNT],,,[o.ConferenceError],,],startSvrRecord:[,,,1,,,[[7]],,[o.ConferenceError],,],updateSvrRecCfg:[,,,1,,,[[7]],,[o.ConferenceError],,],stopSvrRecord:[,,,1,,,,,[o.ConferenceError],,],setSvrRecordState:[,,,1,,,[[a.REC_STATE.__helper],[3]],,[o.ConferenceError],,],setSvrRecordFileState:[,,,1,,,[[7]],,,,],setAppUILocked:[,,,1,,,[[3]],,[o.ConferenceError],,],setMcuPrivTaskState:[,,,1,,,[[3]],,[o.ConferenceError],,],beginVote:[,,,1,,,[[7]],,[o.ConferenceError],,],endVote:[,,,1,,,,,[o.ConferenceError],,],publishVoteResult:[,,,1,,,[[7]],,[o.ConferenceError],,],commitVote:[,,,1,,,[[7]],,[o.ConferenceError],,],getVoteState:[,,,1,,[a.VoteState],,,[o.ConferenceError],,],terminalMsg:[,,,1,,,[[7],[7],[3],[1]],,,,],updateSCEP:[,,,1,,,[[7]],,,,],updateSDKToken:[,,,1,,[3],[[7]],,,,],getMeetingAllAttrs:[,,,1,,["Conference.MeetingAttrsMapHelper"],,,[o.ConferenceError],,],getMeetingAttrs:[,,,1,,["Conference.MeetingAttrsMapHelper"],[["Conference.stringSeqHelper"]],,[o.ConferenceError],,],setMeetingAttrs:[,,,1,,,[["Conference.StringStringMapHelper"],[7]],,[o.ConferenceError],,],addOrUpdateMeetingAttrs:[,,,1,,,[["Conference.StringStringMapHelper"],[7]],,[o.ConferenceError],,],delMeetingAttrs:[,,,1,,,[["Conference.stringSeqHelper"],[7]],,[o.ConferenceError],,],clearMeetingAttrs:[,,,1,,,[[7]],,[o.ConferenceError],,],getUserAttrs:[,,,1,,["Conference.UserAttrsMapHelper"],[["Conference.stringSeqHelper"]],,[o.ConferenceError],,],getUserAttrsWithKey:[,,,1,,["Conference.UserAttrsMapHelper"],[["Conference.stringSeqHelper"],["Conference.stringSeqHelper"]],,[o.ConferenceError],,],setUserAttrs:[,,,1,,,[[7],["Conference.StringStringMapHelper"],[7]],,[o.ConferenceError],,],addOrUpdateUserAttrs:[,,,1,,,[[7],["Conference.StringStringMapHelper"],[7]],,[o.ConferenceError],,],delUserAttrs:[,,,1,,,[[7],["Conference.stringSeqHelper"],[7]],,[o.ConferenceError],,],clearAllUserAttrs:[,,,1,,,[[7]],,[o.ConferenceError],,],clearUserAttrs:[,,,1,,,[["Conference.stringSeqHelper"],[7]],,[o.ConferenceError],,],startShare:[,,,1,,,[[7]],,[o.ConferenceError],,],stopShare:[,,,1,,,[[7]],,[o.ConferenceError],,],getWaitingMembers:[,,,1,,["Conference.WaitingMemberSeqHelper"],[[7]],,[o.ConferenceError],,],kickoutFromWaitRoom:[,,,1,,,[[7]],,[o.ConferenceError],,],acceptFromWaitRoom:[,,,1,,,[[7]],,[o.ConferenceError],,],gobackToWaitRoom:[,,,1,,,[[2]],,[o.ConferenceError],,],startCloudRecord:[,,,1,,,[[7],[7]],,,,],stopCloudRecord:[,,,1,,,[[7]],,,,],updateCloudRecord:[,,,1,,,[[7],[7]],,,,],setClodudRecordState:[,,,1,,,[[a.REC_STATE.__helper],[7]],,,,],setClodudRecordFileState:[,,,1,,,[[7]],,,,]}),Object.defineProperty(a,"SVR_NOTIFY_BALANCE_LESS",{value:1}),a.ConferenceCallback=c.defineObject(void 0,r.Object,void 0,0,["::Conference::ConferenceCallback","::Ice::Object"],-1,void 0,void 0,!1),a.ConferenceCallbackPrx=c.defineProxy(r.ObjectPrx,a.ConferenceCallback.ice_staticId,void 0),c.defineOperations(a.ConferenceCallback,a.ConferenceCallbackPrx,{entered:[,,,,,,[[a.Member]],,,,],left:[,,,,,,[[2],[2],[7],[7]],,,,],actorChanged:[,,,,,,[[2],[2],[0]],,,,],nicknameChanged:[,,,,,,[[2],[2],[7]],,,,],optionChanged:[,,,,,,[[3]],,,,],rightChanged:[,,,,,,[[a.ChangedRights]],,,,],roomStateChanged:[,,,,,,[[1]],,,,],inviteStateChanged:[,,,,,,[[a.INVITE_TYPE.__helper],[a.InvitedMember]],,,,],conferenceBegan:[,,,,,,,,,,],conferenceEnded:[,,,,,,[[a.Contact],[7]],,,,],memberCount:[,,,,,,[[3]],,,,],confirmAutoEnd:[,,,,,,[[3]],,,,],autoEndCancelled:[,,,,,,,,,,],roomKnocked:[,,,,,,[[a.Contact],[7]],,,,],agendaUpdated:[,,,,,,[[7]],,,,],subjectUpdated:[,,,,,,[[7]],,,,],notifyApplyDemo:[,,,,,,[[2]],,,,],notifyApplyRejected:[,,,,,,[[2],[2]],,,,],serverNotify:[,,,,,,[[3]],,,,],serverNotifyMsg:[,,,,,,[[7]],,,,],updateAppStatus:[,,,,,,[["Ice.ShortSeqHelper"],["Ice.ShortSeqHelper"]],,,,],notifyAssistantChanged:[,,,,,,[[2],[2],[1]],,,,],notifyNetDetectResults:[,,,,,,[[2],[3],[1]],,,,],notifyReportStatus:[,,,1,,["Conference.StringStringMapHelper"],[[2],[3]],,,,],exeCmd:[,,,1,,[7],[[7]],,,,],notifyStart1v1SubMeeting:[,,,1,,,[[2]],,[o.ConferenceError],,],notifyStop1v1SubMeeting:[,,,,,,[[2]],,,,],notifyStart1v1SubMeetingRslt:[,,,,,,[[2],[1]],,,,],setWDT1v1SubMeetingMode:[,,,,,,[[2],[3]],,,,],notifyIVRStatus:[,,,,,,[[2],[1]],,,,],notifyStartSvrBroadcast:[,,,,,,[[2],[7]],,,,],notifyStartBroadCast:[,,,,,,[[2]],,,,],notifyStopBroadCast:[,,,,,,[[2]],,,,],notifyWebViewerNum:[,,,,,,[[3]],,,,],notifyBroadCastStartPush:[,,,,,,[["Conference.BroadCastDictHelper"]],,,,],notifyBroadCastStopPush:[,,,,,,,,,,],notifyBroadCastPlayback:[,,,,,,[[7]],,,,],notifyBroadCastPlaybackStop:[,,,,,,[[7]],,,,],notifypayback:[,,,,,,,,,,],notifySwtichLiveAppElements:[,,,,,,[[3],[2]],,,,],notifyThumbUp:[,,,,,,[[3],[3],[7]],,,,],notifyLuckyDrawCfg:[,,,,,,[[a.LuckyDrawCfg]],,,,],notifyLDMembersStatus:[,,,,,,[[a.LDMembersCNT]],,,,],notifyLuckyDrawResult:[,,,,,,[[a.LuckyResult]],,,,],notifySvrRecordStateChanged:[,,,,,,[[2],[a.REC_STATE.__helper],[3]],,,,],notifySvrRecordCfgChanged:[,,,,,,[[2],[7]],,,,],notifySvrRecordFileState:[,,,,,,[[7]],,,,],notifySvrBroadcastCfgChanged:[,,,,,,[[2],[7]],,,,],notifyAppUILocked:[,,,,,,[[3]],,,,],notifyBeginVote:[,,,,,,[[2],[7],[7]],,,,],notifyEndVote:[,,,,,,[[2]],,,,],notifyPublishVoteResult:[,,,,,,[[2],[7]],,,,],notifyCommitVote:[,,,,,,[[2],[7]],,,,],notifyTerminalMsg:[,,,,,,[[7],[7],[3],[3]],,,,],notifySCEPChanged:[,,,,,,[[2],[7]],,,,],notifyMeetingAttrsChanged:[,,,,,,[["Conference.MeetingAttrsMapHelper"],["Conference.MeetingAttrsMapHelper"],["Conference.stringSeqHelper"]],,,,],notifyUserAttrsChanged:[,,,,,,[[7],["Conference.MeetingAttrsMapHelper"],["Conference.MeetingAttrsMapHelper"],["Conference.stringSeqHelper"]],,,,],notifyShareStateChanged:[,,,,,,[[7]],,,,],notifyEnterWaitingRoom:[,,,,,,[[a.WaitingMember]],,,,],notifyLeftWaitingRoom:[,,,,,,[[7],[7]],,,,],notifyJoinSubMeeting:[,,,,,,[[2],[7]],,,,],notifyClodudRecordStateChanged:[,,,,,,[[2],[7],[a.REC_STATE.__helper],[7]],,,,],notifyClodudRecordCfgChanged:[,,,,,,[[2],[7],[7]],,,,],notifyClodudRecordFileState:[,,,,,,[[7],[7]],,,,]}),n.Conference=a}("undefined"!=typeof global&&void 0!==global.process?e:void 0,"undefined"!=typeof global&&void 0!==global.process?n(1457):window.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?t:this)},6480:function(e,t,n){e=n.nmd(e),function(e,t,n){var r=t("ice").Ice,i=(r.__M,t("Common/Exception").Common),o=t("Control/PublicTypes").Conference,a=r.Slice;o.ConferenceSessionV4=a.defineObject(void 0,r.Object,void 0,0,["::Conference::ConferenceSessionV4","::Ice::Object"],-1,void 0,void 0,!1),o.ConferenceSessionV4Prx=a.defineProxy(r.ObjectPrx,o.ConferenceSessionV4.ice_staticId,void 0),a.defineOperations(o.ConferenceSessionV4,o.ConferenceSessionV4Prx,{sendCmd:[,,,1,,,[[7],[7],[7],["Ice.ByteSeqHelper"]],[[7],["Ice.ByteSeqHelper"]],[i.ConferenceError],,]}),n.Conference=o}("undefined"!=typeof global&&global.process,"undefined"!=typeof global&&void 0!==global.process?n(1457):window.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?t:this)},8870:function(e,t,n){e=n.nmd(e),function(e,t,n){var r=t("ice").Ice,i=r.__M,o=r.Slice,a=i.module("Conference");Object.defineProperty(a,"CT_USER",{value:1}),Object.defineProperty(a,"CT_CONTACT",{value:2}),Object.defineProperty(a,"CT_TMP",{value:3}),Object.defineProperty(a,"CT_CLIENT",{value:6}),Object.defineProperty(a,"CT_VIRTUAL",{value:7}),a.Contact=o.defineStruct((function(e,t,n,r,i,o){this.id=void 0!==e?e:0,this.type=void 0!==t?t:0,this.nickname=void 0!==n?n:"",this.email=void 0!==r?r:"",this.mobile=void 0!==i?i:"",this.confPhone=void 0!==o?o:""}),!0,(function(e){e.writeInt(this.id),e.writeByte(this.type),e.writeString(this.nickname),e.writeString(this.email),e.writeString(this.mobile),e.writeString(this.confPhone)}),(function(e){this.id=e.readInt(),this.type=e.readByte(),this.nickname=e.readString(),this.email=e.readString(),this.mobile=e.readString(),this.confPhone=e.readString()}),9,!1),a.ContactIdType=o.defineStruct((function(e,t){this.id=void 0!==e?e:0,this.type=void 0!==t?t:0}),!0,(function(e){e.writeInt(this.id),e.writeByte(this.type)}),(function(e){this.id=e.readInt(),this.type=e.readByte()}),5,!0),o.defineSequence(a,"ContactSeqHelper","Conference.Contact",!1),o.defineSequence(a,"ContactIdSeqHelper","Conference.ContactIdType",!0),o.defineDictionary(a,"ContactTree","ContactTreeHelper","Ice.StringHelper","Conference.ContactSeqHelper",!1,void 0,void 0,r.ArrayUtil.equals),n.Conference=a}("undefined"!=typeof global&&global.process,"undefined"!=typeof global&&void 0!==global.process?n(1457):window.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?t:this)},5368:function(e,t,n){e=n.nmd(e),function(e,t,n){var r=t("ice").Ice,i=(r.__M,t("Common/Exception").Common),o=t("Control/Conference").Conference,a=t("FileServer/FSCommon").FileServer,c=r.Slice;o.FileTransferCallback=c.defineObject(void 0,r.Object,void 0,0,["::Conference::FileTransferCallback","::Ice::Object"],-1,void 0,void 0,!1),o.FileTransferCallbackPrx=c.defineProxy(r.ObjectPrx,o.FileTransferCallback.ice_staticId,void 0),c.defineOperations(o.FileTransferCallback,o.FileTransferCallbackPrx,{OnFileTransferFinished:[,,,,,,[[3],[7],[a.FileType.__helper]],,,,],OnDelFileNotify:[,,,,,,[[2],[3],[7],[a.FileType.__helper]],,,,],onEndpointChanged:[,,,,,,[["Conference.FileServerSeqHelper"]],,,,]}),o.FileTransferSession=c.defineObject(void 0,r.Object,void 0,0,["::Conference::FileTransferSession","::Ice::Object"],-1,void 0,void 0,!1),o.FileTransferSessionPrx=c.defineProxy(r.ObjectPrx,o.FileTransferSession.ice_staticId,void 0),c.defineOperations(o.FileTransferSession,o.FileTransferSessionPrx,{fileTransferFinished:[,,,1,,,[[3],[7],[a.FileType.__helper]],,[i.ConferenceError],,],delFileNotify:[,,,1,,,[[3],[7],[a.FileType.__helper]],,[i.ConferenceError],,]}),n.Conference=o}("undefined"!=typeof global&&global.process,"undefined"!=typeof global&&void 0!==global.process?n(1457):window.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?t:this)},4033:function(e,t,n){e=n.nmd(e),function(e,t,n){var r=t("ice").Ice,i=(r.__M,t("Common/Exception").Common),o=t("Control/Conference").Conference,a=r.Slice;o.IMFont=a.defineStruct((function(e,t){this.color=void 0!==e?e:0,this.size=void 0!==t?t:0}),!0,(function(e){e.writeInt(this.color),e.writeByte(this.size)}),(function(e){this.color=e.readInt(),this.size=e.readByte()}),5,!0),o.InIMMsgInfo=a.defineStruct((function(e,t,n,r,i){this.targetTermId=void 0!==e?e:0,this.targetNickname=void 0!==t?t:"",this.font=void 0!==n?n:new o.IMFont,this.msg=void 0!==r?r:"",this.sendTime=void 0!==i?i:0}),!0,(function(e){e.writeShort(this.targetTermId),e.writeString(this.targetNickname),o.IMFont.write(e,this.font),e.writeString(this.msg),e.writeInt(this.sendTime)}),(function(e){this.targetTermId=e.readShort(),this.targetNickname=e.readString(),this.font=o.IMFont.read(e,this.font),this.msg=e.readString(),this.sendTime=e.readInt()}),13,!1),o.OutIMMsgInfo=a.defineStruct((function(e,t,n,r){this.index=void 0!==e?e:0,this.srcTermId=void 0!==t?t:0,this.srcNickname=void 0!==n?n:"",this.inMsg=void 0!==r?r:new o.InIMMsgInfo}),!0,(function(e){e.writeInt(this.index),e.writeShort(this.srcTermId),e.writeString(this.srcNickname),o.InIMMsgInfo.write(e,this.inMsg)}),(function(e){this.index=e.readInt(),this.srcTermId=e.readShort(),this.srcNickname=e.readString(),this.inMsg=o.InIMMsgInfo.read(e,this.inMsg)}),20,!1),a.defineSequence(o,"outMsgListHelper","Conference.OutIMMsgInfo",!1),a.defineSequence(o,"termIDListHelper","Ice.ShortHelper",!0),o.IMCallback=a.defineObject(void 0,r.Object,void 0,0,["::Conference::IMCallback","::Ice::Object"],-1,void 0,void 0,!1),o.IMCallbackPrx=a.defineProxy(r.ObjectPrx,o.IMCallback.ice_staticId,void 0),a.defineOperations(o.IMCallback,o.IMCallbackPrx,{receiveIMMsg:[,,,,,,[[o.OutIMMsgInfo]],,,,],receiveMultiIMMsg:[,,,,,,[["Conference.outMsgListHelper"]],,,,],notifyIMForbidStatus:[,,,,,,[[2],[2],[1]],,,,],notifyClearIMMsg:[,,,,,,[[2]],,,,],notifyDeleteIMMsg:[,,,,,,[[3]],,,,]}),o.IMSession=a.defineObject(void 0,r.Object,void 0,0,["::Conference::IMSession","::Ice::Object"],-1,void 0,void 0,!1),o.IMSessionPrx=a.defineProxy(r.ObjectPrx,o.IMSession.ice_staticId,void 0),a.defineOperations(o.IMSession,o.IMSessionPrx,{getIMMsgCount:[,,,1,,[3],,,,,],getLastMsg:[,,,1,,["Conference.outMsgListHelper"],[[3]],,[i.ConferenceError],,],getLastNMsg:[,,,1,,["Conference.outMsgListHelper"],[[3],[3]],,[i.ConferenceError],,],sendIMMsg:[,,,1,,,[[o.InIMMsgInfo]],,[i.ConferenceError],,],deleteIMMsg:[,,,1,,,[[3]],,[i.ConferenceError],,],getIMForbidList:[,,,1,,["Conference.termIDListHelper"],,,[i.ConferenceError],,],setIMForbidStatus:[,,,1,,,[[2],[1]],,[i.ConferenceError],,],clearIMMsg:[,,,1,,,,,[i.ConferenceError],,],passIMMsg:[,,,1,,[1],[[3]],,[i.ConferenceError],,]}),n.Conference=o}("undefined"!=typeof global&&global.process,"undefined"!=typeof global&&void 0!==global.process?n(1457):window.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?t:this)},4508:function(e,t,n){e=n.nmd(e),function(e,t,n){var r=t("ice").Ice,i=r.__M,o=t("Common/Exception").Common,a=r.Slice,c=i.module("Conference");c.MEDIA_STATE=a.defineEnum([["MEDIA_START",0],["MEDIA_PAUSE",1],["MEDIA_STOP",2]]),c.MediaInfo=a.defineStruct((function(e,t,n){this.termid=void 0!==e?e:0,this.state=void 0!==t?t:c.MEDIA_STATE.MEDIA_START,this.mediaName=void 0!==n?n:""}),!0,(function(e){e.writeShort(this.termid),c.MEDIA_STATE.__write(e,this.state),e.writeString(this.mediaName)}),(function(e){this.termid=e.readShort(),this.state=c.MEDIA_STATE.__read(e),this.mediaName=e.readString()}),4,!1),c.MediaCallback=a.defineObject(void 0,r.Object,void 0,0,["::Conference::MediaCallback","::Ice::Object"],-1,void 0,void 0,!1),c.MediaCallbackPrx=a.defineProxy(r.ObjectPrx,c.MediaCallback.ice_staticId,void 0),a.defineOperations(c.MediaCallback,c.MediaCallbackPrx,{notifyStartPlayMedia:[,,,,,,[[c.MediaInfo]],,,,],notifyStopPlayMedia:[,,,,,,[[2]],,,,],notifyPausePlayMedia:[,,,,,,[[2],[1]],,,,],notifyMakeIFrame:[,,,,,,,,,,],notifySubscribeMedia:[,,,,,,[[1]],,,,]}),c.MediaCtrl=a.defineObject(void 0,r.Object,void 0,0,["::Conference::MediaCtrl","::Ice::Object"],-1,void 0,void 0,!1),c.MediaCtrlPrx=a.defineProxy(r.ObjectPrx,c.MediaCtrl.ice_staticId,void 0),a.defineOperations(c.MediaCtrl,c.MediaCtrlPrx,{getMediaInfo:[,,,1,,[c.MediaInfo],,,[o.ConferenceError],,],startPlayMedia:[,,,1,,,[[7]],,[o.ConferenceError],,],stopPlayMedia:[,,,1,,,,,[o.ConferenceError],,],pausePlayMedia:[,,,1,,,[[1]],,[o.ConferenceError],,],subscribeMedia:[,,,1,,,[[1]],,[o.ConferenceError],,]}),n.Conference=c}("undefined"!=typeof global&&global.process,"undefined"!=typeof global&&void 0!==global.process?n(1457):window.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?t:this)},7710:function(e,t,n){e=n.nmd(e),function(e,t,n){var r=t("ice").Ice,i=r.__M,o=(t("Common/Exception").Common,i.require(e,["Control/PublicTypes","Control/Contact"]).Conference),a=r.Slice;Object.defineProperty(o,"ACNT_ADMIN",{value:0}),Object.defineProperty(o,"ACNT_MEETCREATOR",{value:1}),Object.defineProperty(o,"ACNT_PARTICIPANTS",{value:2}),Object.defineProperty(o,"MINFO_ALLCAMS",{value:"allCams"}),Object.defineProperty(o,"MINFO_OPENEDCAMIDS",{value:"openedCamIDs"}),Object.defineProperty(o,"MINFO_ACNTTYPE",{value:"anctType"}),Object.defineProperty(o,"MINFO_WDTXDTYPE",{value:"WDTXDType"}),Object.defineProperty(o,"WDTXDTYPE_ADMIN",{value:"1"}),Object.defineProperty(o,"WDTXDTYPE_USER",{value:"2"}),Object.defineProperty(o,"MINFO_PSTNIVR",{value:"ivr"}),Object.defineProperty(o,"PSTNIVR_YES",{value:"1"}),Object.defineProperty(o,"MINFO_YDYUSERID",{value:"ydyuserid"}),Object.defineProperty(o,"MINFO_SCEP",{value:"scep"}),Object.defineProperty(o,"MINFO_VOICECHANGETYPE",{value:"voiceChangeType"}),o.Member=a.defineStruct((function(e,t,n,r,i,a,c,s,l,u,d,f){this.termId=void 0!==e?e:0,this.bindId=void 0!==t?t:0,this.termType=void 0!==n?n:0,this.nickname=void 0!==r?r:"",this.actor=void 0!==i?i:0,this.audioStatus=void 0!==a?a:o.ASTATUS.AUNKNOWN,this.videoStatus=void 0!==c?c:o.VSTATUS.VUNKNOWN,this.bEnableVideo=void 0!==s&&s,this.rights=void 0!==l?l:null,this.contactId=void 0!==u?u:new o.ContactIdType,this.phone=void 0!==d?d:"",this.extProperty=void 0!==f?f:null}),!1,(function(e){e.writeShort(this.termId),e.writeShort(this.bindId),e.writeByte(this.termType),e.writeString(this.nickname),e.writeByte(this.actor),o.ASTATUS.__write(e,this.audioStatus),o.VSTATUS.__write(e,this.videoStatus),e.writeBool(this.bEnableVideo),o.ByteListHelper.write(e,this.rights),o.ContactIdType.write(e,this.contactId),e.writeString(this.phone),o.StringStringMapHelper.write(e,this.extProperty)}),(function(e){this.termId=e.readShort(),this.bindId=e.readShort(),this.termType=e.readByte(),this.nickname=e.readString(),this.actor=e.readByte(),this.audioStatus=o.ASTATUS.__read(e),this.videoStatus=o.VSTATUS.__read(e),this.bEnableVideo=e.readBool(),this.rights=o.ByteListHelper.read(e),this.contactId=o.ContactIdType.read(e,this.contactId),this.phone=e.readString(),this.extProperty=o.StringStringMapHelper.read(e)}),18,!1),a.defineSequence(o,"MemberSeqHelper","Conference.Member",!1),o.WaitingMember=a.defineStruct((function(e,t,n){this.pcid=void 0!==e?e:"",this.name=void 0!==t?t:"",this.extProperty=void 0!==n?n:null}),!1,(function(e){e.writeString(this.pcid),e.writeString(this.name),o.StringStringMapHelper.write(e,this.extProperty)}),(function(e){this.pcid=e.readString(),this.name=e.readString(),this.extProperty=o.StringStringMapHelper.read(e)}),3,!1),a.defineSequence(o,"WaitingMemberSeqHelper","Conference.WaitingMember",!1),n.Conference=o}("undefined"!=typeof global&&void 0!==global.process?e:void 0,"undefined"!=typeof global&&void 0!==global.process?n(1457):window.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?t:this)},1361:function(e,t,n){e=n.nmd(e),function(e,t,n){var r=t("ice").Ice,i=r.__M,o=t("Common/Exception").Common,a=r.Slice,c=i.module("Conference");Object.defineProperty(c,"SLICE_VER",{value:"1.9"}),Object.defineProperty(c,"ANON_TERMID",{value:0}),Object.defineProperty(c,"ALL_TERMID",{value:32767}),Object.defineProperty(c,"ANON_MEMBER_ID",{value:0}),Object.defineProperty(c,"TERM_PC",{value:1}),Object.defineProperty(c,"TERM_PHONE",{value:2}),Object.defineProperty(c,"NORMAL_AT",{value:0}),Object.defineProperty(c,"DEMO_AT",{value:1}),Object.defineProperty(c,"HOST_AT",{value:2}),Object.defineProperty(c,"PSTN_HOST_AT",{value:4}),Object.defineProperty(c,"ASSISTANT_AT",{value:8}),Object.defineProperty(c,"OPT_VIDEO",{value:1}),Object.defineProperty(c,"OPT_AUTO_MUTE",{value:2}),Object.defineProperty(c,"OPT_AUTO_AUDIO",{value:4}),Object.defineProperty(c,"OPT_PSTN_CALL",{value:8}),Object.defineProperty(c,"OPT_END_WHEN_HOST_EXIT",{value:16}),Object.defineProperty(c,"OPT_ONLY_INVITE_CAN_LOGIN",{value:32}),Object.defineProperty(c,"OPT_ALLOW_PLAY_APPLAUSE",{value:64}),Object.defineProperty(c,"OPT_PLAY_ENTRANCEANDEXITTONE",{value:128}),Object.defineProperty(c,"OPT_ALLOW_MODIFY_NICKNAME",{value:256}),Object.defineProperty(c,"OPT_NOT_SEE_EACH_OTHER",{value:512}),Object.defineProperty(c,"OPT_IM_FORBID_PIC",{value:1024}),Object.defineProperty(c,"OPT_IM_FORBID_URL",{value:2048}),Object.defineProperty(c,"OPT_FORBID_OPEN_CAMERA",{value:4096}),Object.defineProperty(c,"OPT_AUTO_MUTE_HOST",{value:8192}),Object.defineProperty(c,"OPT_REVIEW_CHAT",{value:16384}),Object.defineProperty(c,"OPT_AUTO_OPEN_CAMERA",{value:32768}),Object.defineProperty(c,"OPT_MIC_USE_LOCAL",{value:65536}),Object.defineProperty(c,"OPT_CAMERA_USE_LOCAL",{value:131072}),Object.defineProperty(c,"OPT_FORBID_MARK",{value:262144}),Object.defineProperty(c,"OPT_ALLOW_SHARE",{value:524288}),Object.defineProperty(c,"OPT_SCREENSHARE_WATERMARK",{value:1048576}),Object.defineProperty(c,"OPT_START_WAITINGROOM",{value:2097152}),a.defineSequence(c,"ByteListHelper","Ice.ByteHelper",!0),a.defineDictionary(c,"StringStringMap","StringStringMapHelper","Ice.StringHelper","Ice.StringHelper",!1,void 0,void 0),c.ASTATUS=a.defineEnum([["AUNKNOWN",0],["ANULL",1],["ACLOSE",2],["AOPEN",3],["AOPENING",4]]),c.WINDOW_MODE=a.defineEnum([["VMANAGER_LOCK",0],["VSPEAKER_TRACK",1],["VPRESENTER_LOCK",2]]),c.VSTATUS=a.defineEnum([["VUNKNOWN",0],["VNULL",1],["VCLOSE",2],["VOPEN",3],["VOPENING",4]]),c.VIDEOLEVEL=a.defineEnum([["VL_HIGH_HD",0],["VL_HIGH_HDL",1],["VL_HIGH_H",2],["VL_HIGH_M",3],["VL_HIGH_L",4],["VL_MID",5],["VL_LOW",6]]),c.VideoSize=a.defineStruct((function(e,t){this.w=void 0!==e?e:0,this.h=void 0!==t?t:0}),!0,(function(e){e.writeShort(this.w),e.writeShort(this.h)}),(function(e){this.w=e.readShort(),this.h=e.readShort()}),4,!0),c.VideoQuality=a.defineStruct((function(e,t,n,r,i,o){this.vl=void 0!==e?e:c.VIDEOLEVEL.VL_HIGH_HD,this.vs=void 0!==t?t:new c.VideoSize,this.isec=void 0!==n?n:0,this.fps=void 0!==r?r:null,this.crf=void 0!==i?i:null,this.cost=void 0!==o?o:""}),!0,(function(e){c.VIDEOLEVEL.__write(e,this.vl),c.VideoSize.write(e,this.vs),e.writeByte(this.isec),c.ByteListHelper.write(e,this.fps),c.ByteListHelper.write(e,this.crf),e.writeString(this.cost)}),(function(e){this.vl=c.VIDEOLEVEL.__read(e),this.vs=c.VideoSize.read(e,this.vs),this.isec=e.readByte(),this.fps=c.ByteListHelper.read(e),this.crf=c.ByteListHelper.read(e),this.cost=e.readString()}),9,!1),c.VIDEOLAYOUTMODE=a.defineEnum([["VLO_1v1_M",0],["VLO_WALL1_M",1],["VLO_WALL2",2],["VLO_WALL4",3],["VLO_WALL5_M",4],["VLO_WALL6_M",5],["VLO_WALL9",6],["VLO_WALL13_M",7],["VLO_WALL16",8],["VLO_WALL25",9]]),Object.defineProperty(c,"MVM_1MAIN",{value:0}),Object.defineProperty(c,"MVM_1v1",{value:1}),Object.defineProperty(c,"MVM_2VIDEO",{value:2}),Object.defineProperty(c,"MVM_4VIDEO",{value:3}),Object.defineProperty(c,"MVM_6VIDEO",{value:4}),Object.defineProperty(c,"VIDEO_SS_1M",{value:0}),Object.defineProperty(c,"VIDEO_SS_5M",{value:1}),Object.defineProperty(c,"VIDEO_SS_13M",{value:2}),Object.defineProperty(c,"VIDEO_SS_2",{value:3}),Object.defineProperty(c,"VIDEO_SS_4",{value:4}),Object.defineProperty(c,"VIDEO_SS_9",{value:5}),Object.defineProperty(c,"VIDEO_SS_16",{value:6}),Object.defineProperty(c,"VIDEO_SS_25",{value:7}),Object.defineProperty(c,"VIDEO_SS_36",{value:8}),Object.defineProperty(c,"VIDEO_SS_NULL",{value:255}),a.defineSequence(c,"VideoQualitySeqHelper","Conference.VideoQuality",!1),c.SYNCMODE=a.defineEnum([["SYNC_FORCE",0],["SYNC_FREE",1]]),c.TabID=a.defineStruct((function(e,t){this.termID=void 0!==e?e:0,this.localID=void 0!==t?t:0}),!0,(function(e){e.writeShort(this.termID),e.writeShort(this.localID)}),(function(e){this.termID=e.readShort(),this.localID=e.readShort()}),4,!0),a.defineSequence(c,"TabIDSeqHelper","Conference.TabID",!0),c.WBBOARD_TYPE=a.defineEnum([["WB_WHITE",0],["WB_DOC",1]]),c.WBBOARD_DOCTYPE=a.defineEnum([["WD_IMG",0],["WD_PPTANIM",1],["WD_PPT",2]]),c.WB_SCALE_TYPE=a.defineEnum([["WB_SCALE_50",0],["WB_SCALE_100",1],["WB_SCALE_150",2],["WB_SCALE_200",3],["WB_SCALE_SADP",4],["WB_SCALE_WIDTH",5]]),c.WB_ROTATE_TYPE=a.defineEnum([["WB_ROTATE_0",0],["WB_ROTATE_90",1],["WB_ROTATE_180",2],["WB_ROTATE_270",3]]),c.WhiteBoardDescribe=a.defineStruct((function(e,t,n,r,i,o,a,s,l,u,d,f,h,p,_,g){this.wID=void 0!==e?e:new c.TabID,this.wType=void 0!==t?t:c.WBBOARD_TYPE.WB_WHITE,this.docType=void 0!==n?n:c.WBBOARD_DOCTYPE.WD_IMG,this.name=void 0!==r?r:"",this.docName=void 0!==i?i:"",this.width=void 0!==o?o:0,this.height=void 0!==a?a:0,this.scaleType=void 0!==s?s:c.WB_SCALE_TYPE.WB_SCALE_50,this.rotation=void 0!==l?l:c.WB_ROTATE_TYPE.WB_ROTATE_0,this.pageCount=void 0!==u?u:0,this.curPage=void 0!==d?d:0,this.animID=void 0!==f?f:0,this.animFrames=void 0!==h?h:0,this.showThum=void 0!==p&&p,this.bAll=void 0!==_&&_,this.allowTerms=void 0!==g?g:null}),!0,(function(e){c.TabID.write(e,this.wID),c.WBBOARD_TYPE.__write(e,this.wType),c.WBBOARD_DOCTYPE.__write(e,this.docType),e.writeString(this.name),e.writeString(this.docName),e.writeInt(this.width),e.writeInt(this.height),c.WB_SCALE_TYPE.__write(e,this.scaleType),c.WB_ROTATE_TYPE.__write(e,this.rotation),e.writeInt(this.pageCount),e.writeInt(this.curPage),e.writeInt(this.animID),e.writeInt(this.animFrames),e.writeBool(this.showThum),e.writeBool(this.bAll),r.ShortSeqHelper.write(e,this.allowTerms)}),(function(e){this.wID=c.TabID.read(e,this.wID),this.wType=c.WBBOARD_TYPE.__read(e),this.docType=c.WBBOARD_DOCTYPE.__read(e),this.name=e.readString(),this.docName=e.readString(),this.width=e.readInt(),this.height=e.readInt(),this.scaleType=c.WB_SCALE_TYPE.__read(e),this.rotation=c.WB_ROTATE_TYPE.__read(e),this.pageCount=e.readInt(),this.curPage=e.readInt(),this.animID=e.readInt(),this.animFrames=e.readInt(),this.showThum=e.readBool(),this.bAll=e.readBool(),this.allowTerms=r.ShortSeqHelper.read(e)}),37,!1),Object.defineProperty(c,"SubMeetType_MainRoom",{value:"main"}),Object.defineProperty(c,"SubMeetType_WaitRoom",{value:"wait"}),c.SubMeetInfo=a.defineStruct((function(e,t,n){this.type=void 0!==e?e:"",this.id=void 0!==t?t:0,this.key=void 0!==n?n:""}),!0,(function(e){e.writeString(this.type),e.writeInt(this.id),e.writeString(this.key)}),(function(e){this.type=e.readString(),this.id=e.readInt(),this.key=e.readString()}),6,!1),a.defineSequence(c,"WhiteBoardDescribeSeqHelper","Conference.WhiteBoardDescribe",!1),c.ConfIdError=a.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::ConfIdError",void 0,void 0,!1,!1),c.AuthError=a.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::AuthError",void 0,void 0,!1,!1),c.ReenterError=a.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::ReenterError",void 0,void 0,!1,!1),c.RoomLockedError=a.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::RoomLockedError",void 0,void 0,!1,!1),c.NicknameError=a.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::NicknameError",void 0,void 0,!1,!1),c.NicknameDuplicatedError=a.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::NicknameDuplicatedError",void 0,void 0,!1,!1),c.NotPermitError=a.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::NotPermitError",void 0,void 0,!1,!1),c.MemberDeactivedError=a.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::MemberDeactivedError",void 0,void 0,!1,!1),c.MemberOverflowError=a.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::MemberOverflowError",void 0,void 0,!1,!1),c.ConfMemberOverflowError=a.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::ConfMemberOverflowError",void 0,void 0,!1,!1),c.BalanceLessError=a.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::BalanceLessError",void 0,void 0,!1,!1),c.KickoutSelfError=a.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::KickoutSelfError",void 0,void 0,!1,!1),c.ConferenceEndError=a.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::ConferenceEndError",void 0,void 0,!1,!1),c.ConferenceBeginError=a.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::ConferenceBeginError",void 0,void 0,!1,!1),c.PINError=a.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::PINError",void 0,void 0,!1,!1),c.FieldDuplicatedError=a.defineUserException((function(e,t,n,r,i){o.ConferenceError.call(this,e,t,i),this.name=void 0!==n?n:"",this.value=void 0!==r?r:""}),o.ConferenceError,"Conference::FieldDuplicatedError",(function(e){e.writeString(this.name),e.writeString(this.value)}),(function(e){this.name=e.readString(),this.value=e.readString()}),!1,!1),c.InviteeNotFoundError=a.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::InviteeNotFoundError",void 0,void 0,!1,!1),c.InviteeDuplicatedError=a.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::InviteeDuplicatedError",void 0,void 0,!1,!1),c.InvalidTermTypeError=a.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::InvalidTermTypeError",void 0,void 0,!1,!1),c.NoPSTNHostError=a.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::NoPSTNHostError",void 0,void 0,!1,!1),c.ConferencePrepareError=a.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::ConferencePrepareError",void 0,void 0,!1,!1),c.ConferenceLoginRetry=a.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::ConferenceLoginRetry",void 0,void 0,!1,!1),c.ResourceAllocateError=a.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::ResourceAllocateError",void 0,void 0,!1,!1),c.OnlyInviteeCanLogin=a.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::OnlyInviteeCanLogin",void 0,void 0,!1,!1),c.MemberAlreadyInMeet=a.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::MemberAlreadyInMeet",void 0,void 0,!1,!1),c.MemberAlreadyInCanTryVisitor=a.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::MemberAlreadyInCanTryVisitor",void 0,void 0,!1,!1),c.MismatchClientVersion=a.defineUserException((function(e,t,n,r){o.ConferenceError.call(this,e,t,r),this.newVer=void 0!==n?n:""}),o.ConferenceError,"Conference::MismatchClientVersion",(function(e){e.writeString(this.newVer)}),(function(e){this.newVer=e.readString()}),!1,!1),c.PeerHasBeen1v1SubMeeting=a.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::PeerHasBeen1v1SubMeeting",void 0,void 0,!1,!1),c.LiveStreamNotStart=a.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::LiveStreamNotStart",void 0,void 0,!1,!1),c.PstnHostCantLoginInWeb=a.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::PstnHostCantLoginInWeb",void 0,void 0,!1,!1),c.CannotBoradcast=a.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::CannotBoradcast",void 0,void 0,!1,!1),c.CannotInteractBoradcast=a.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::CannotInteractBoradcast",void 0,void 0,!1,!1),c.ConfCannotInteractBoradcast=a.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::ConfCannotInteractBoradcast",void 0,void 0,!1,!1),c.ContainsSensitiveWords=a.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::ContainsSensitiveWords",void 0,void 0,!1,!1),c.ThirdPartyLiveIsOn=a.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::ThirdPartyLiveIsOn",void 0,void 0,!1,!1),c.ListLiveIsOn=a.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::ListLiveIsOn",void 0,void 0,!1,!1),c.ClientLiveIsOn=a.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::ClientLiveIsOn",void 0,void 0,!1,!1),c.LuckyDrawNotExists=a.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::LuckyDrawNotExists",void 0,void 0,!1,!1),c.LuckyDrawCfgFails=a.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::LuckyDrawCfgFails",void 0,void 0,!1,!1),c.JoinLuckyDrawFails=a.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::JoinLuckyDrawFails",void 0,void 0,!1,!1),c.AnnouceLuckyDrawFails=a.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::AnnouceLuckyDrawFails",void 0,void 0,!1,!1),c.AnnouceLuckyDrawNoMember=a.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::AnnouceLuckyDrawNoMember",void 0,void 0,!1,!1),c.SeviceNotEnabled=a.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::SeviceNotEnabled",void 0,void 0,!1,!1),c.SrvRecordStarted=a.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::SrvRecordStarted",void 0,void 0,!1,!1),c.NoResourceForMIC=a.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::NoResourceForMIC",void 0,void 0,!1,!1),c.StartRecordError=a.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::StartRecordError",void 0,void 0,!1,!1),c.PlayBackGroundMusicFail=a.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::PlayBackGroundMusicFail",void 0,void 0,!1,!1),c.SameTimeStartMediaError=a.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::SameTimeStartMediaError",void 0,void 0,!1,!1),c.lockQuesError=a.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::lockQuesError",void 0,void 0,!1,!1),c.delQuesError=a.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::delQuesError",void 0,void 0,!1,!1),c.quesNotExistError=a.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::quesNotExistError",void 0,void 0,!1,!1),c.modifyQuesTypeError=a.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::modifyQuesTypeError",void 0,void 0,!1,!1),c.AlreadyRollCallError=a.defineUserException((function(e,t,n,r){o.ConferenceError.call(this,e,t,r),this.rollCaller=void 0!==n?n:0}),o.ConferenceError,"Conference::AlreadyRollCallError",(function(e){e.writeShort(this.rollCaller)}),(function(e){this.rollCaller=e.readShort()}),!1,!1),c.AlreadySharedException=a.defineUserException((function(e,t,n,r){o.ConferenceError.call(this,e,t,r),this.sharer=void 0!==n?n:0}),o.ConferenceError,"Conference::AlreadySharedException",(function(e){e.writeShort(this.sharer)}),(function(e){this.sharer=e.readShort()}),!1,!1),c.WBMaxError=a.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::WBMaxError",void 0,void 0,!1,!1),c.WBNotExistError=a.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::WBNotExistError",void 0,void 0,!1,!1),c.WBElementNoExistError=a.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::WBElementNoExistError",void 0,void 0,!1,!1),c.ExceedTheCapacityLimit=a.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::ExceedTheCapacityLimit",void 0,void 0,!1,!1),c.ConferenceBusy=a.defineUserException((function(e,t,n,r){o.ConferenceError.call(this,e,t,r),this.retry_delay=void 0!==n?n:0}),o.ConferenceError,"Conference::ConferenceBusy",(function(e){e.writeInt(this.retry_delay)}),(function(e){this.retry_delay=e.readInt()}),!1,!1),c.EnterWaitingRoom=a.defineUserException((function(e,t,n,r){o.ConferenceError.call(this,e,t,r),this.subMeetInfo=void 0!==n?n:""}),o.ConferenceError,"Conference::EnterWaitingRoom",(function(e){e.writeString(this.subMeetInfo)}),(function(e){this.subMeetInfo=e.readString()}),!1,!1),c.NosuchPersonInWaitingRoom=a.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::NosuchPersonInWaitingRoom",void 0,void 0,!1,!1),Object.defineProperty(c,"SET_PSTN_NUM",{value:1}),Object.defineProperty(c,"CALLED_PSTN_NUM",{value:2}),Object.defineProperty(c,"BIND_PSTN_NUM",{value:4}),a.defineDictionary(c,"ModuleDict","ModuleDictHelper","Ice.StringHelper","Ice.ObjectPrx",!1,void 0,void 0),Object.defineProperty(c,"CLIENT_SLICE_VER",{value:"slice_ver"}),Object.defineProperty(c,"CLINET_PCID",{value:"client_pcid"}),Object.defineProperty(c,"CLINET_MACADDR",{value:"client_macaddr"}),Object.defineProperty(c,"CLINET_LANGUAGE",{value:"client_lang"}),Object.defineProperty(c,"CLINET_VER",{value:"client_ver"}),Object.defineProperty(c,"CLINET_SDK_VER",{value:"sdk_ver"}),Object.defineProperty(c,"CLINET_H5SDK_VER",{value:"h5sdk_ver"}),Object.defineProperty(c,"CLINET_ISWIFI",{value:"client_iswifi"}),Object.defineProperty(c,"CLINET_PLATFORM",{value:"client_platform"}),Object.defineProperty(c,"CLINET_PRODUCTTYPE",{value:"client_pdType"}),Object.defineProperty(c,"CLINET_DEVICETYPE",{value:"client_device"}),Object.defineProperty(c,"CLIENT_BRIDGETYPE",{value:"bridgeType"}),Object.defineProperty(c,"CLIENT_INVITECODE",{value:"invite_code"}),Object.defineProperty(c,"CLIENT_PHONENUM",{value:"phone_num"}),Object.defineProperty(c,"CLIENT_ISCUSTOMERSERVICE",{value:"is_cs"}),Object.defineProperty(c,"CLIENT_PRIV_ID",{value:"priv_id"}),Object.defineProperty(c,"CLIETN_PRIV_DAT",{value:"priv_dat"}),Object.defineProperty(c,"CLIETN_PRIV_ROLE",{value:"priv_role"}),Object.defineProperty(c,"CLINET_LOGIN_TIMESTAMP",{value:"client_time"}),Object.defineProperty(c,"CLINET_IS_WEB_VIEWER",{value:"webview"}),Object.defineProperty(c,"CLINET_LIVEAUDIO",{value:"liveAudio"}),Object.defineProperty(c,"CLINET_OPENID",{value:"openId"}),Object.defineProperty(c,"CLIENT_ACODEC",{value:"acodec"}),Object.defineProperty(c,"CLIENT_LIVE_TYPE",{value:"livetype"}),Object.defineProperty(c,"CLIENT_LIVE_MOBILE",{value:"livemobile"}),Object.defineProperty(c,"CLINET_BROWSER_INFO",{value:"browser"}),Object.defineProperty(c,"CLINET_VP8_SUPPORT",{value:"vp8"}),Object.defineProperty(c,"CLINET_WEBRTC_CODECS",{value:"rtc_codecs"}),Object.defineProperty(c,"CLIENT_TIME_OUT",{value:"time_out"}),Object.defineProperty(c,"CLINET_SUPPORT_NEWCONFID",{value:"spt_newconf"}),Object.defineProperty(c,"CLIENT_SDK_USRTOKEN",{value:"token"}),Object.defineProperty(c,"CLIENT_MCUID",{value:"mcuID"}),Object.defineProperty(c,"CLIENT_VER",{value:"client_ver"}),Object.defineProperty(c,"CLIENT_SIP_VIDEO_REENCODE",{value:"video_reencode"}),Object.defineProperty(c,"CLIENT_PROJECT_CODE",{value:"pjcode"}),Object.defineProperty(c,"CLIENT_PROJECT_FOR",{value:"pjfor"}),Object.defineProperty(c,"CLIENT_SUPPORT_DATA_CENTER",{value:"dcenter_enable"}),Object.defineProperty(c,"CLIENT_MCU_SESSION_ID",{value:"mcu_session_id"}),Object.defineProperty(c,"CLIENT_SDK_TYPE",{value:"sdktype"}),Object.defineProperty(c,"CLIENT_SDK_TYPE_VIDEO",{value:"video"}),Object.defineProperty(c,"CLIENT_SDK_TYPE_LIVE",{value:"live"}),Object.defineProperty(c,"PLATFORMTYPE_WIN32",{value:"win32"}),Object.defineProperty(c,"PLATFORMTYPE_IOS",{value:"ios"}),Object.defineProperty(c,"PLATFORMTYPE_ANDROID",{value:"android"}),Object.defineProperty(c,"PLATFORMTYPE_LINUX",{value:"linux"}),Object.defineProperty(c,"PLATFORMTYPE_MAC",{value:"mac"}),Object.defineProperty(c,"PDTYPE_TVNETMEETING",{value:"net_tv"}),Object.defineProperty(c,"PDTYPE_NETMEETING",{value:"net"}),Object.defineProperty(c,"PDTYPE_PSTNMEETING",{value:"pstn"}),Object.defineProperty(c,"PDTYPE_LIVE",{value:"live"}),Object.defineProperty(c,"PDTYPE_MCU",{value:"mcu"}),Object.defineProperty(c,"DEVICETYPE_PC",{value:"pc"}),Object.defineProperty(c,"DEVICETYPE_PAD",{value:"pad"}),Object.defineProperty(c,"DEVICETYPE_PHONE",{value:"phone"}),Object.defineProperty(c,"DEVICETYPE_FLASH",{value:"flash"}),Object.defineProperty(c,"DEVICETYPE_MCU",{value:"mcu"}),Object.defineProperty(c,"DEVICETYPE_BOX",{value:"box"}),Object.defineProperty(c,"DEVICETYPE_SIPGATEWAY",{value:"sipgateway"}),Object.defineProperty(c,"DEVICETYPE_WEBRTC",{value:"webrtc"}),Object.defineProperty(c,"DEVICETYPE_WXMINI",{value:"wxmini"}),Object.defineProperty(c,"BRIDGETYPE_MONITOR",{value:"monitor"}),Object.defineProperty(c,"BRIDGETYPE_MEETING",{value:"meeting"}),Object.defineProperty(c,"MEETINGMODE_NORMAL",{value:"normal"}),Object.defineProperty(c,"MEETINGMODE_CONSULTATION",{value:"consultation"}),Object.defineProperty(c,"ACODEC_ISAC",{value:"isac"}),Object.defineProperty(c,"LIVETYPE_WEIXIN",{value:"0"}),Object.defineProperty(c,"LIVETYPE_USER",{value:"1"}),Object.defineProperty(c,"LIVETYPE_OTHER",{value:"2"}),c.LoginRequest=a.defineStruct((function(e,t,n,r,i,o,a,c,s,l,u,d){this.confId=void 0!==e?e:0,this.confKey=void 0!==t?t:"",this.termId=void 0!==n?n:0,this.memberId=void 0!==r?r:0,this.memberType=void 0!==i?i:0,this.nickname=void 0!==o?o:"",this.callbacks=void 0!==a?a:null,this.accessNo=void 0!==c?c:0,this.publicIP=void 0!==s?s:"",this.localIP=void 0!==l?l:"",this.localMask=void 0!==u?u:"",this.extProperty=void 0!==d?d:null}),!1,(function(e){e.writeInt(this.confId),e.writeString(this.confKey),e.writeShort(this.termId),e.writeInt(this.memberId),e.writeByte(this.memberType),e.writeString(this.nickname),c.ModuleDictHelper.write(e,this.callbacks),e.writeInt(this.accessNo),e.writeString(this.publicIP),e.writeString(this.localIP),e.writeString(this.localMask),c.StringStringMapHelper.write(e,this.extProperty)}),(function(e){this.confId=e.readInt(),this.confKey=e.readString(),this.termId=e.readShort(),this.memberId=e.readInt(),this.memberType=e.readByte(),this.nickname=e.readString(),this.callbacks=c.ModuleDictHelper.read(e),this.accessNo=e.readInt(),this.publicIP=e.readString(),this.localIP=e.readString(),this.localMask=e.readString(),this.extProperty=c.StringStringMapHelper.read(e)}),22,!1),c.FileServerInfo=a.defineStruct((function(e,t){this.fsProxy=void 0!==e?e:"",this.key=void 0!==t?t:""}),!0,(function(e){e.writeString(this.fsProxy),e.writeString(this.key)}),(function(e){this.fsProxy=e.readString(),this.key=e.readString()}),2,!1),c.REC_STATE=a.defineEnum([["NO_RECORD",0],["STARTING",1],["RECORDING",2],["PAUSED",3],["STOPPING",4]]),a.defineSequence(c,"FileServerSeqHelper","Conference.FileServerInfo",!1),Object.defineProperty(c,"INVALID_COUNTDOWN",{value:-1}),Object.defineProperty(c,"CONFINFO_HOSTPWD",{value:"hostpwd"}),Object.defineProperty(c,"CONFINFO_CONFPWD",{value:"confpwd"}),Object.defineProperty(c,"CONFINFO_SCHEDULETIME",{value:"scheduletime"}),Object.defineProperty(c,"CONFINFO_SUBJECT",{value:"subject"}),Object.defineProperty(c,"CONFINFO_URL",{value:"url"}),Object.defineProperty(c,"CONFINFO_URLPIC",{value:"urlpic"}),Object.defineProperty(c,"CONFINFO_PSTNNUM",{value:"pstnnum"}),Object.defineProperty(c,"CONFINFO_PSTNPWD",{value:"pstnpwd"}),Object.defineProperty(c,"CONFINFO_AGENDA",{value:"agenda"}),Object.defineProperty(c,"CONFINFO_SUPPORT_VLIST",{value:"vlist"}),Object.defineProperty(c,"CONFINFO_ROOM_SIZETYPE",{value:"roomsizetype"}),Object.defineProperty(c,"CONFINFO_ISTEST",{value:"istest"}),Object.defineProperty(c,"CONFINFO_ISDEMO",{value:"isdemo"}),Object.defineProperty(c,"CONFINFO_HOTLINE",{value:"hotline"}),Object.defineProperty(c,"CONFINFO_ISFIX",{value:"isfixed"}),Object.defineProperty(c,"CONFINFO_HD",{value:"hd"}),Object.defineProperty(c,"CONFINFO_PSTNNOTICE",{value:"pstnnotice"}),Object.defineProperty(c,"CONFINFO_FUNC_VIDEOWALL",{value:"videowall"}),Object.defineProperty(c,"CONFINFO_VIDEO_ENABLE",{value:"video"}),Object.defineProperty(c,"CONFINFO_SHOW_MAIN_AD",{value:"main_ad"}),Object.defineProperty(c,"CONFINFO_VIDEO_MONITOR",{value:"vmonitor"}),Object.defineProperty(c,"CONFINFO_USE_PHONE",{value:"use_phone"}),Object.defineProperty(c,"CONFINFO_INVITE",{value:"invite"}),Object.defineProperty(c,"CONFINFO_VIDEO_LUBO",{value:"lubo"}),Object.defineProperty(c,"CONFINFO_MEDIA_PLAY",{value:"media_play"}),Object.defineProperty(c,"CONFINFO_MULTI_CAMERAS",{value:"multiple_cameras"}),Object.defineProperty(c,"CONFINFO_SUPPORT_BRIDGE",{value:"bridge"}),Object.defineProperty(c,"CONFINFO_SCREEN_SHARE",{value:"screen_share"}),Object.defineProperty(c,"CONFINFO_DOCUMENT_SHOW",{value:"document_show"}),Object.defineProperty(c,"CONFINFO_WHITE_BOARD",{value:"whiteboard"}),Object.defineProperty(c,"CONFINFO_ANSWER_QUESTION",{value:"answer_question"}),Object.defineProperty(c,"CONFINFO_FILE_SHARE",{value:"file_share"}),Object.defineProperty(c,"CONFINFO_MEETING_INFO",{value:"meeting_info"}),Object.defineProperty(c,"CONFINFO_OMNIDIRECTIONAL_MIC",{value:"omnidirectional_mic"}),Object.defineProperty(c,"CONFINFO_MEET_MODE",{value:"meeting_mode"}),Object.defineProperty(c,"CONFINFO_USER_ROLE",{value:"user_role"}),Object.defineProperty(c,"CONFINFO_COMPANY_ID",{value:"compid"}),Object.defineProperty(c,"CONFINFO_USER_NETDISK_ENABLE",{value:"user_net_disk"}),Object.defineProperty(c,"CONFINFO_COMP_NETDISK_ENABLE",{value:"comp_net_disk"}),Object.defineProperty(c,"CONFINFO_FREECONF",{value:"freeconf"}),Object.defineProperty(c,"CONFINFO_MAINVIDEO_SHOWMODE",{value:"main_svm"}),Object.defineProperty(c,"CONFINFO_IS_BROADCATING",{value:"rtmpliveon"}),Object.defineProperty(c,"CONFINFO_WEBVIEWER_NUM",{value:"webviewer_num"}),Object.defineProperty(c,"CONFINFO_WEBVIEWER_RIGHTS",{value:"webviewer_rights"}),Object.defineProperty(c,"CONFINFO_WEBVIEWER_QUES",{value:"webviewer_ques"}),Object.defineProperty(c,"CONFINFO_BROADCAST_DURATION",{value:"rtmplivetm"}),Object.defineProperty(c,"CONFINFO_WB_CONTAINERSIZE",{value:"wb_container"}),Object.defineProperty(c,"CONFINFO_H264_PROFILE",{value:"h264profile"}),Object.defineProperty(c,"CONFINFO_H264_NOCABAC",{value:"h264nocabac"}),Object.defineProperty(c,"CONFINFO_H264_SLICEMAXSZ",{value:"h264slicemaxsz"}),Object.defineProperty(c,"CONFINFO_H264_IFRAME",{value:"h264iframe"}),Object.defineProperty(c,"CONFINFO_H264_NOHARDCODING",{value:"h264nohardcoding"}),Object.defineProperty(c,"CONFINFO_SCREEN_ENCTYPE",{value:"screenenctype"}),Object.defineProperty(c,"CONFINFO_HIFPS_VALUE",{value:"hi_fps"}),Object.defineProperty(c,"CONFINFO_H264_PICMAXSIZE",{value:"h264picmaxsize"}),Object.defineProperty(c,"CONFINFO_SUPPORT_SIP",{value:"is_sip"}),Object.defineProperty(c,"CONFINFO_MS_MODE",{value:"ms_mode"}),Object.defineProperty(c,"CONFINFO_H264_ENCFIXEDSZ",{value:"h264encfixedsz"}),Object.defineProperty(c,"CONFINFO_HD_FOR_MOBILE",{value:"hd_for_mobile"}),Object.defineProperty(c,"CONFINFO_LOG_LEVEL",{value:"log_level"}),Object.defineProperty(c,"CONFINFO_LIVE_CONFIG",{value:"livecfg"}),Object.defineProperty(c,"CONFINFO_SRV_RECORDSTATE",{value:"srv_record_state"}),Object.defineProperty(c,"CONFINFO_SRV_RECORDCFG",{value:"srv_record_cfg"}),Object.defineProperty(c,"CONFINFO_SVR_RECORDOWNER",{value:"svr_record_owner"}),Object.defineProperty(c,"CONFINFO_VIDEO_VPU_SUPPORT_ENC",{value:"vpu_support_enc"}),Object.defineProperty(c,"CONFINFO_VIDEO_VPU_SUPPORT_DEC",{value:"vpu_supportd_dec"}),Object.defineProperty(c,"CONFINFO_VIDEO_VPU_UNSUPPORT_ENC_DEV",{value:"vpu_unsupport_enc_dev"}),Object.defineProperty(c,"CONFINFO_VIDEO_VPU_UNSUPPORT_DEC_DEV",{value:"vpu_unsupport_dec_dev"}),Object.defineProperty(c,"CONFINFO_VIDEOLIST_MODE",{value:"vlistmode"}),Object.defineProperty(c,"CONFINFO_VIDEOLIST_CAMS",{value:"vlistcams"}),Object.defineProperty(c,"CONFINFO_MAX_VIDEOUIS",{value:"maxvuis"}),Object.defineProperty(c,"CONFINFO_VIDEOWALL_LAYOUT",{value:"vwalllo"}),Object.defineProperty(c,"CONFINFO_UI_LOCKSTATUS",{value:"uilock"}),Object.defineProperty(c,"CONFINFO_SRV_RECORD",{value:"srv_record"}),Object.defineProperty(c,"CONFINFO_SHOW_LIVE",{value:"show_live"}),Object.defineProperty(c,"CONFINFO_SIGNIN",{value:"signinurl"}),Object.defineProperty(c,"CONFINFO_EXTTAB_URL",{value:"exttaburl"}),Object.defineProperty(c,"CONFINFO_PRIVTAB_INFO",{value:"privtabinfo"}),Object.defineProperty(c,"CONFINFO_PRIVATE_FILE_SERVER",{value:"privfs"}),Object.defineProperty(c,"CONFINFO_DOC_BACKUP_COMP_NDD",{value:"doc_backup_comp_ndd"}),Object.defineProperty(c,"CONFINFO_OEMKEY",{value:"oem_key"}),Object.defineProperty(c,"CONFINFO_VIDEOCUSTOMBPS",{value:"video_custom_bps"}),Object.defineProperty(c,"CONFINFO_CONFIRM_AUTOEND_TYPE",{value:"autoend"}),Object.defineProperty(c,"CONFINFO_RECORD_ALL_MEMBER",{value:"record_all"}),Object.defineProperty(c,"CONFINFO_ACCESS_KEEPALIVE_TIME",{value:"kp_time_a"}),Object.defineProperty(c,"CONFINFO_CONTROL_KEEPALIVE_TIME",{value:"kp_time_c"}),Object.defineProperty(c,"CONFINFO_NEW_CONFID",{value:"new_confid"}),Object.defineProperty(c,"CONFINFO_FS_HTTP",{value:"fs_http"}),Object.defineProperty(c,"CONFINFO_SHARE_CFG",{value:"share_cfg"}),Object.defineProperty(c,"CONFINFO_MCU_MAX_VIDEOUIS",{value:"mcu_maxvuis"}),Object.defineProperty(c,"CONFINFO_MEETING_CHECK",{value:"meeting_check"}),Object.defineProperty(c,"CONFINFO_DATA_CENTER_PROXY",{value:"dcenter_prxy"}),Object.defineProperty(c,"CONFINFO_DATA_CENTER_KEY",{value:"dcenter_key"}),Object.defineProperty(c,"CONFINFO_MCU_RECORD_ID",{value:"mcu_recid"}),Object.defineProperty(c,"CONFINFO_IS_SDKMEETING",{value:"is_sdkmeeting"}),Object.defineProperty(c,"CONF_END_REASON_UNKOWN",{value:"unkown"}),Object.defineProperty(c,"CONF_END_REASON_TERM",{value:"term"}),Object.defineProperty(c,"CONF_END_REASON_AUTO",{value:"auto"}),Object.defineProperty(c,"CONF_END_REASON_WEB",{value:"web"}),Object.defineProperty(c,"CONF_END_REASON_AAA",{value:"aaa"}),Object.defineProperty(c,"CONF_END_REASON_HOST_OFFLINE",{value:"host_offline"}),Object.defineProperty(c,"LEFT_REASON_KICK",{value:"kick"}),Object.defineProperty(c,"LEFT_REASON_REFRESH",{value:"refresh"}),Object.defineProperty(c,"LEFT_REASON_EXTRUDE",{value:"extrude"}),Object.defineProperty(c,"LEFT_REASON_TIMEOUT",{value:"timeout"}),Object.defineProperty(c,"LEFT_REASON_SEAT",{value:"seat"}),Object.defineProperty(c,"LEFT_REASON_EXIT",{value:"exit"}),Object.defineProperty(c,"LEFT_REASON_BUSY",{value:"busy"}),Object.defineProperty(c,"LEFT_REASON_BALANCE_LESS",{value:"balance_less"}),Object.defineProperty(c,"LEFT_REASON_TOKENTIMEOUT",{value:"token_timeout"}),Object.defineProperty(c,"LEFT_REASON_SUBMEETING",{value:"sub_meeting"}),Object.defineProperty(c,"KNOCKED_REASON_ROOMLOCKED",{value:"room_locked"}),Object.defineProperty(c,"KNOCKED_REASON_SEATLESS",{value:"seat_less"}),Object.defineProperty(c,"KNOCKED_REASON_BALANCELESS",{value:"balance_less"}),Object.defineProperty(c,"BOARDCAST_RTMP",{value:"rtmp"}),Object.defineProperty(c,"BOARDCAST_RTMP2",{value:"rtmp2"}),Object.defineProperty(c,"BOARDCAST_SCREEN_RTMP",{value:"rtmp_screen"}),Object.defineProperty(c,"BOARDCAST_HLS",{value:"hls"}),Object.defineProperty(c,"BOARDCAST_HLS2",{value:"hls2"}),Object.defineProperty(c,"BOARDCAST_SCREEN_HLS",{value:"hls_screen"}),Object.defineProperty(c,"BROADCAST_FLV",{value:"flv"}),n.Conference=c}("undefined"!=typeof global&&global.process,"undefined"!=typeof global&&void 0!==global.process?n(1457):window.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?t:this)},7738:function(e,t,n){e=n.nmd(e),function(e,t,n){var r=t("ice").Ice,i=r.__M,o=t("Common/Exception").Common,a=i.require(e,["Control/Conference","Control/PublicTypes"]).Conference,c=r.Slice;a.QuesType=c.defineStruct((function(e,t,n){this.typeID=void 0!==e?e:"",this.name=void 0!==t?t:"",this.deleted=void 0!==n&&n}),!0,(function(e){e.writeString(this.typeID),e.writeString(this.name),e.writeBool(this.deleted)}),(function(e){this.typeID=e.readString(),this.name=e.readString(),this.deleted=e.readBool()}),3,!1),a.QuesState=c.defineEnum([["Question_NotReply",0],["Question_Replying",1],["Question_NotPublic",2],["Question_Publiced",3],["Question_Deleted",4]]),a.QuesAsk=c.defineStruct((function(e,t,n,r,i){this.typeID=void 0!==e?e:"",this.asktime=void 0!==t?t:0,this.termID=void 0!==n?n:0,this.content=void 0!==r?r:"",this.nickname=void 0!==i?i:""}),!0,(function(e){e.writeString(this.typeID),e.writeInt(this.asktime),e.writeShort(this.termID),e.writeString(this.content),e.writeString(this.nickname)}),(function(e){this.typeID=e.readString(),this.asktime=e.readInt(),this.termID=e.readShort(),this.content=e.readString(),this.nickname=e.readString()}),9,!1),a.QuesDeal=c.defineStruct((function(e,t,n,r,i,o,c,s){this.state=void 0!==e?e:a.QuesState.Question_NotReply,this.replyCon=void 0!==t?t:"",this.replyTermId=void 0!==n?n:0,this.replyTime=void 0!==r?r:0,this.publishTermID=void 0!==i?i:0,this.publishTime=void 0!==o?o:0,this.delTermID=void 0!==c?c:0,this.delTime=void 0!==s?s:0}),!0,(function(e){a.QuesState.__write(e,this.state),e.writeString(this.replyCon),e.writeShort(this.replyTermId),e.writeInt(this.replyTime),e.writeShort(this.publishTermID),e.writeInt(this.publishTime),e.writeShort(this.delTermID),e.writeInt(this.delTime)}),(function(e){this.state=a.QuesState.__read(e),this.replyCon=e.readString(),this.replyTermId=e.readShort(),this.replyTime=e.readInt(),this.publishTermID=e.readShort(),this.publishTime=e.readInt(),this.delTermID=e.readShort(),this.delTime=e.readInt()}),20,!1),a.QuesInf=c.defineStruct((function(e,t,n){this.quesID=void 0!==e?e:0,this.ask=void 0!==t?t:new a.QuesAsk,this.deal=void 0!==n?n:new a.QuesDeal}),!0,(function(e){e.writeInt(this.quesID),a.QuesAsk.write(e,this.ask),a.QuesDeal.write(e,this.deal)}),(function(e){this.quesID=e.readInt(),this.ask=a.QuesAsk.read(e,this.ask),this.deal=a.QuesDeal.read(e,this.deal)}),33,!1),c.defineSequence(a,"QuesListHelper","Conference.QuesInf",!1),c.defineSequence(a,"QuesTypeListHelper","Conference.QuesType",!1),a.AnsQueCallback=c.defineObject(void 0,r.Object,void 0,0,["::Conference::AnsQueCallback","::Ice::Object"],-1,void 0,void 0,!1),a.AnsQueCallbackPrx=c.defineProxy(r.ObjectPrx,a.AnsQueCallback.ice_staticId,void 0),c.defineOperations(a.AnsQueCallback,a.AnsQueCallbackPrx,{askQuesNotify:[,,,,,,[[3],[a.QuesAsk]],,[o.ConferenceError],,],lockQuesNotify:[,,,,,,[[3],[a.QuesDeal]],,[o.ConferenceError],,],replyQuesNotify:[,,,,,,[[3],[a.QuesDeal]],,[o.ConferenceError],,],modifyQuesNotify:[,,,,,,[[3],[a.QuesDeal]],,[o.ConferenceError],,],delQuesNotify:[,,,,,,[[3],[2]],,[o.ConferenceError],,],delAllQuesNotify:[,,,,,,[[2]],,[o.ConferenceError],,],publicQuesNotify:[,,,,,,[[3],[1],[2]],,[o.ConferenceError],,],quesTypeChangeNotify:[,,,,,,[[3],[7]],,[o.ConferenceError],,],modifyQuesTypeNotify:[,,,,,,[[2],["Conference.QuesTypeListHelper"]],,[o.ConferenceError],,],setBroadCastQuesNotify:[,,,,,,[[1]],,[o.ConferenceError],,]}),a.AnsQuesCtrl=c.defineObject(void 0,r.Object,void 0,0,["::Conference::AnsQuesCtrl","::Ice::Object"],-1,void 0,void 0,!1),a.AnsQuesCtrlPrx=c.defineProxy(r.ObjectPrx,a.AnsQuesCtrl.ice_staticId,void 0),c.defineOperations(a.AnsQuesCtrl,a.AnsQuesCtrlPrx,{askQues:[,,,1,,[3],[[a.QuesAsk]],,[o.ConferenceError],,],lockQues:[,,,1,,,[[3],[1]],,[o.ConferenceError],,],replyQues:[,,,1,,,[[3],[a.QuesDeal]],,[o.ConferenceError],,],publicQues:[,,,1,,,[[3],[1]],,[o.ConferenceError],,],modifyQues:[,,,1,,,[[3],[a.QuesDeal]],,[o.ConferenceError],,],delQues:[,,,1,,,[[3]],,[o.ConferenceError],,],delAllQues:[,,,1,,,,,[o.ConferenceError],,],quesTypeChange:[,,,1,,,[[3],[7]],,[o.ConferenceError],,],getQuesList:[,,,1,,["Conference.QuesListHelper"],,,[o.ConferenceError],,],getQuesType:[,,,1,,["Conference.QuesTypeListHelper"],,,[o.ConferenceError],,],modifyQuesType:[,,,1,,,[["Conference.QuesTypeListHelper"]],,[o.ConferenceError],,],setBoradCastQues:[,,,1,,,[[1]],,[o.ConferenceError],,]}),n.Conference=a}("undefined"!=typeof global&&void 0!==global.process?e:void 0,"undefined"!=typeof global&&void 0!==global.process?n(1457):window.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?t:this)},873:function(e,t,n){e=n.nmd(e),function(e,t,n){var r=t("ice").Ice,i=r.__M,o=(r.Slice,i.module("Conference"));Object.defineProperty(o,"PUBLIC_CHAT",{value:1}),Object.defineProperty(o,"PRIVATE_HOST_CHAT",{value:2}),Object.defineProperty(o,"PRIVATE_DEMO_CHAT",{value:3}),Object.defineProperty(o,"PRIVATE_OTHER_CHAT",{value:4}),Object.defineProperty(o,"SCREEN_RECORD",{value:11}),Object.defineProperty(o,"FILE_SHARE",{value:5}),Object.defineProperty(o,"WB_VIEW_PAGE",{value:9}),Object.defineProperty(o,"WB_VIEW_ANY",{value:10}),Object.defineProperty(o,"DEMO_RIGHT_MANAGE",{value:50}),Object.defineProperty(o,"DEMO_ACTOR_MANAGE",{value:51}),Object.defineProperty(o,"OPTION_MANAGE",{value:60}),Object.defineProperty(o,"HOST_ACTOR_MANAGE",{value:70}),Object.defineProperty(o,"LOCK_RIGHT",{value:71}),Object.defineProperty(o,"KICKOUT_RIGHT",{value:72}),Object.defineProperty(o,"END_CONFERENCE_RIGHT",{value:73}),Object.defineProperty(o,"MEMBER_INFO_MANAGE",{value:74}),Object.defineProperty(o,"INVITE_RIGHT",{value:75}),Object.defineProperty(o,"BEGIN_CONFERENCE_RIGHT",{value:76}),Object.defineProperty(o,"UPLOAD_FILE",{value:80}),Object.defineProperty(o,"DEL_OTHERS_FILE",{value:81}),Object.defineProperty(o,"START_NOTICE",{value:85}),Object.defineProperty(o,"STOP_NOTICE",{value:86}),Object.defineProperty(o,"START_ROLL_CALL",{value:90}),Object.defineProperty(o,"STOP_ROLL_CALL",{value:91}),Object.defineProperty(o,"OPEN_OTHERS_MIC",{value:95}),Object.defineProperty(o,"CLOSE_OTHERS_MIC",{value:96}),Object.defineProperty(o,"ALL_SILENCE",{value:97}),Object.defineProperty(o,"CHANGE_VIDEO_FOCUS_WINDOW_MODE",{value:100}),Object.defineProperty(o,"CHANGE_VIDEO_LAYOUT_MODE",{value:101}),Object.defineProperty(o,"SET_CURRENT_TAB",{value:105}),Object.defineProperty(o,"SET_FULLSCREEN",{value:106}),Object.defineProperty(o,"SET_FRAME_LAYOUT",{value:107}),Object.defineProperty(o,"FORCE_SYNC",{value:108}),Object.defineProperty(o,"WB_CREATE",{value:110}),Object.defineProperty(o,"WB_CLOSE",{value:111}),Object.defineProperty(o,"WB_CHANGE_NAME",{value:112}),Object.defineProperty(o,"WB_MARK",{value:113}),Object.defineProperty(o,"WB_SAVE",{value:114}),Object.defineProperty(o,"WB_PAGE_IMPORT",{value:115}),Object.defineProperty(o,"WB_CHANGE_SCALE",{value:116}),Object.defineProperty(o,"WB_ROTATE",{value:117}),Object.defineProperty(o,"WB_SET_CURRENT_PAGE",{value:118}),Object.defineProperty(o,"WB_SET_HOTSPOT",{value:119}),Object.defineProperty(o,"WB_SET_MARK_TERMS",{value:120}),Object.defineProperty(o,"SCREEN_SHARE_OPERATE",{value:130}),n.Conference=o}("undefined"!=typeof global&&global.process,"undefined"!=typeof global&&void 0!==global.process?n(1457):window.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?t:this)},4826:function(e,t,n){e=n.nmd(e),function(e,t,n){var r=t("ice").Ice,i=(r.__M,t("Common/Exception").Common),o=t("Control/Conference").Conference,a=r.Slice;o.RollCallInfo=a.defineStruct((function(e,t,n){this.bRollCall=void 0!==e&&e,this.rollCaller=void 0!==t?t:0,this.duration=void 0!==n?n:0}),!0,(function(e){e.writeBool(this.bRollCall),e.writeShort(this.rollCaller),e.writeShort(this.duration)}),(function(e){this.bRollCall=e.readBool(),this.rollCaller=e.readShort(),this.duration=e.readShort()}),5,!0),o.RollCallCallback=a.defineObject(void 0,r.Object,void 0,0,["::Conference::RollCallCallback","::Ice::Object"],-1,void 0,void 0,!1),o.RollCallCallbackPrx=a.defineProxy(r.ObjectPrx,o.RollCallCallback.ice_staticId,void 0),a.defineOperations(o.RollCallCallback,o.RollCallCallbackPrx,{rollCallStarted:[,,,,,,[[2]],,,,],rollCallStoped:[,,,,,,[[2]],,,,],rollCallConfirmed:[,,,,,,[[2]],,,,],rollCallConfirmed2:[,,,,,,[[2],[7]],,,,]}),o.RollCallSession=a.defineObject(void 0,r.Object,void 0,0,["::Conference::RollCallSession","::Ice::Object"],-1,void 0,void 0,!1),o.RollCallSessionPrx=a.defineProxy(r.ObjectPrx,o.RollCallSession.ice_staticId,void 0),a.defineOperations(o.RollCallSession,o.RollCallSessionPrx,{getRollCallInfo:[,,,1,,[o.RollCallInfo],,,,,],startRollCall:[,,,1,,,,,[i.ConferenceError],,],stopRollCall:[,,,1,,,,,[i.ConferenceError],,],confirmRollCall:[,,,1,,,,,[o.MemberDeactivedError],,]}),n.Conference=o}("undefined"!=typeof global&&global.process,"undefined"!=typeof global&&void 0!==global.process?n(1457):window.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?t:this)},8604:function(e,t,n){e=n.nmd(e),function(e,t,n){var r=t("ice").Ice,i=(r.__M,t("Common/Exception").Common),o=t("Control/PublicTypes").Conference,a=r.Slice;Object.defineProperty(o,"SSST_SHARING",{value:1}),Object.defineProperty(o,"SSST_MARKING",{value:2}),Object.defineProperty(o,"SSST_PAUSECTRL",{value:4}),Object.defineProperty(o,"SSRE_SOMEONE_REQ",{value:1}),Object.defineProperty(o,"SSRE_REJECT",{value:2}),o.ScreenShareInfo=a.defineStruct((function(e,t,n,r,i,o,a){this.scrSviceProxy=void 0!==e?e:"",this.authKey=void 0!==t?t:"",this.allowCtrlReq=void 0!==n&&n,this.state=void 0!==r?r:0,this.sharer=void 0!==i?i:0,this.controller=void 0!==o?o:0,this.allowOtherMark=void 0!==a&&a}),!0,(function(e){e.writeString(this.scrSviceProxy),e.writeString(this.authKey),e.writeBool(this.allowCtrlReq),e.writeByte(this.state),e.writeShort(this.sharer),e.writeShort(this.controller),e.writeBool(this.allowOtherMark)}),(function(e){this.scrSviceProxy=e.readString(),this.authKey=e.readString(),this.allowCtrlReq=e.readBool(),this.state=e.readByte(),this.sharer=e.readShort(),this.controller=e.readShort(),this.allowOtherMark=e.readBool()}),9,!1),o.MarkData=a.defineStruct((function(e,t,n){this.termid=void 0!==e?e:0,this.color=void 0!==t?t:0,this.mousePosSeq=void 0!==n?n:null}),!0,(function(e){e.writeShort(this.termid),e.writeInt(this.color),o.ByteListHelper.write(e,this.mousePosSeq)}),(function(e){this.termid=e.readShort(),this.color=e.readInt(),this.mousePosSeq=o.ByteListHelper.read(e)}),7,!1),o.MarkDataV4=a.defineStruct((function(e,t,n,r){this.termid=void 0!==e?e:0,this.markid=void 0!==t?t:"",this.type=void 0!==n?n:0,this.mousePosSeq=void 0!==r?r:null}),!0,(function(e){e.writeShort(this.termid),e.writeString(this.markid),e.writeByte(this.type),o.ByteListHelper.write(e,this.mousePosSeq)}),(function(e){this.termid=e.readShort(),this.markid=e.readString(),this.type=e.readByte(),this.mousePosSeq=o.ByteListHelper.read(e)}),5,!1),a.defineSequence(o,"MarkDataSeqHelper","Conference.MarkData",!1),a.defineSequence(o,"MarkDataSeqV4Helper","Conference.MarkDataV4",!1),a.defineSequence(o,"MarkIdSeqHelper","Ice.StringHelper",!1),o.ScreenShareCtrl=a.defineObject(void 0,r.Object,void 0,0,["::Conference::ScreenShareCtrl","::Ice::Object"],-1,void 0,void 0,!1),o.ScreenShareCtrlPrx=a.defineProxy(r.ObjectPrx,o.ScreenShareCtrl.ice_staticId,void 0),a.defineOperations(o.ScreenShareCtrl,o.ScreenShareCtrlPrx,{getScreenShareInfo:[,,,1,,[o.ScreenShareInfo],,,[i.ConferenceError],,],startScreenShare:[,,,1,,,,,[i.ConferenceError],,],stopScreenShare:[,,,1,,,,,[i.ConferenceError],,],setCtrlReqState:[,,,1,,,[[1]],,[i.ConferenceError],,],requestCtrlRight:[,,,1,,,,,[i.ConferenceError],,],cancelCtrlReq:[,,,1,,,,,[i.ConferenceError],,],rejectCtrlReq:[,,,1,,,[[2],[0]],,[i.ConferenceError],,],giveCtrlRight:[,,,1,,,[[2]],,[i.ConferenceError],,],releaseCtrlRight:[,,,1,,,,,[i.ConferenceError],,],ctrlMsg:[,,,1,,,[["Conference.ByteListHelper"]],,[i.ConferenceError],,],tmpSetRemoteCtrlState:[,,,1,,,[[1]],,[i.ConferenceError],,],requestMarked:[,,,1,,,,,[i.ConferenceError],,],cancelMarkedReq:[,,,1,,,,,[i.ConferenceError],,],startMarked:[,,,1,,,,,[i.ConferenceError],,],stopMarked:[,,,1,,,,,[i.ConferenceError],,],enableOtherMarked:[,,,1,,,[[1]],,[i.ConferenceError],,],askForNewIFrame:[,,,1,,,[[3]],,[i.ConferenceError],,],getAllMarkData:[,,,1,,["Conference.MarkDataSeqHelper"],,,[i.ConferenceError],,],sendMarkData:[,,,1,,,[[o.MarkData]],,[i.ConferenceError],,],clearAllMarks:[,,,1,,,,,[i.ConferenceError],,],setIndicator:[,,,1,,,[["Conference.StringStringMapHelper"]],,,,],getAllMarkDataV4:[,,,1,,["Conference.MarkDataSeqV4Helper"],,,[i.ConferenceError],,],sendMarkDataV4:[,,,1,,,[[o.MarkDataV4]],,[i.ConferenceError],,],clearAllMarksV4:[,,,1,,,,,[i.ConferenceError],,],delMarkDataV4:[,,,1,,,[["Conference.MarkIdSeqHelper"]],,[i.ConferenceError],,]}),o.ScreenShareClient=a.defineObject(void 0,r.Object,void 0,0,["::Conference::ScreenShareClient","::Ice::Object"],-1,void 0,void 0,!1),o.ScreenShareClientPrx=a.defineProxy(r.ObjectPrx,o.ScreenShareClient.ice_staticId,void 0),a.defineOperations(o.ScreenShareClient,o.ScreenShareClientPrx,{notifyStartScreenShare:[,,,,,,[[o.ScreenShareInfo]],,,,],notifyStopScreenShare:[,,,,,,[[2]],,,,],notifyCtrlReqState:[,,,,,,[[2],[1]],,[i.ConferenceError],,],notifyRequestCtrlRight:[,,,,,,[[2]],,,,],notifyCancelCtrlReq:[,,,,,,[[2]],,,,],notifyRejectCtrlReq:[,,,,,,[[2],[2],[0]],,,,],notifyGiveCtrlRight:[,,,,,,[[2],[2]],,,,],notifyReleaseCtrlRight:[,,,,,,[[2]],,,,],notifyCtrlMsg:[,,,,,,[[2],["Conference.ByteListHelper"]],,,,],notifyTmpSetRemoteCtrlState:[,,,,,,[[2],[1]],,,,],notifyRequestMarked:[,,,,,,[[2]],,,,],notifyCancelMarkedReq:[,,,,,,[[2]],,,,],notifyStartMarked:[,,,,,,[[2]],,,,],notifyStopMarked:[,,,,,,[[2]],,,,],notifyEnableOtherMarked:[,,,,,,[[2],[1]],,,,],notifyMakeIFrame:[,,,,,,[[3]],,,,],notifyMarkData:[,,,,,,[[o.MarkData]],,,,],notifyClearAllMarks:[,,,,,,,,,,],notifyIndicator:[,,,,,,[[2],["Conference.StringStringMapHelper"]],,,,],notifyClearAllMarksV4:[,,,,,,,,,,],notifyMarkDataV4:[,,,,,,[[o.MarkDataV4]],,,,],notifyDelMarkDataV4:[,,,,,,[["Conference.MarkIdSeqHelper"],[2]],,,,]}),n.Conference=o}("undefined"!=typeof global&&global.process,"undefined"!=typeof global&&void 0!==global.process?n(1457):window.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?t:this)},6005:function(e,t,n){e=n.nmd(e),function(e,t,n){var r=t("ice").Ice,i=(r.__M,t("Common/Exception").Common),o=t("Control/PublicTypes").Conference,a=r.Slice;o.SyncCtrlCallback=a.defineObject(void 0,r.Object,void 0,0,["::Conference::SyncCtrlCallback","::Ice::Object"],-1,void 0,void 0,!1),o.SyncCtrlCallbackPrx=a.defineProxy(r.ObjectPrx,o.SyncCtrlCallback.ice_staticId,void 0),a.defineOperations(o.SyncCtrlCallback,o.SyncCtrlCallbackPrx,{notifySetCurrentTab:[,,,,,,[[o.TabID],[o.TabID],[2]],,,,],notifySetFullScreen:[,,,,,,[[1],[2]],,,,],notifySetPrivTabInfo:[,,,,,,[[7],[2]],,,,],notifySetSyncMode:[,,,,,,[[o.SYNCMODE.__helper],[2]],,,,]}),o.SyncCtrl=a.defineObject(void 0,r.Object,void 0,0,["::Conference::SyncCtrl","::Ice::Object"],-1,void 0,void 0,!1),o.SyncCtrlPrx=a.defineProxy(r.ObjectPrx,o.SyncCtrl.ice_staticId,void 0),a.defineOperations(o.SyncCtrl,o.SyncCtrlPrx,{setCurrentTab:[,,,1,,,[[o.TabID],[o.TabID]],,[i.ConferenceError],,],setFullScreen:[,,,1,,,[[1]],,[i.ConferenceError],,],setPrivTabInfo:[,,,1,,,[[7]],,[i.ConferenceError],,],setSyncMode:[,,,1,,,[[o.SYNCMODE.__helper]],,[i.ConferenceError],,],saveLastTabValue:[,,,1,,,[[2]],,[i.ConferenceError],,]}),n.Conference=o}("undefined"!=typeof global&&global.process,"undefined"!=typeof global&&void 0!==global.process?n(1457):window.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?t:this)},1603:function(e,t,n){e=n.nmd(e),function(e,t,n){var r=t("ice").Ice,i=(r.__M,t("Common/Exception").Common),o=t("Control/PublicTypes").Conference,a=r.Slice;Object.defineProperty(o,"FPS_LOW",{value:-1}),Object.defineProperty(o,"FPS_NOR",{value:0}),Object.defineProperty(o,"FPS_HI",{value:1}),Object.defineProperty(o,"VEDIO_LD",{value:-1}),Object.defineProperty(o,"VEDIO_SD",{value:0}),Object.defineProperty(o,"VEDIO_HD",{value:1}),Object.defineProperty(o,"VEDIO_UD",{value:2}),o.VideoSetting=a.defineStruct((function(e,t,n,r,i,o){this.mutiCam=void 0!==e&&e,this.openCamIDs=void 0!==t?t:null,this.denoise=void 0!==n&&n,this.deinterlace=void 0!==r&&r,this.fpsType=void 0!==i?i:0,this.videType=void 0!==o?o:0}),!0,(function(e){e.writeBool(this.mutiCam),r.ShortSeqHelper.write(e,this.openCamIDs),e.writeBool(this.denoise),e.writeBool(this.deinterlace),e.writeInt(this.fpsType),e.writeInt(this.videType)}),(function(e){this.mutiCam=e.readBool(),this.openCamIDs=r.ShortSeqHelper.read(e),this.denoise=e.readBool(),this.deinterlace=e.readBool(),this.fpsType=e.readInt(),this.videType=e.readInt()}),12,!1),o.UsrCamID=a.defineStruct((function(e,t){this.termID=void 0!==e?e:0,this.camID=void 0!==t?t:0}),!0,(function(e){e.writeShort(this.termID),e.writeShort(this.camID)}),(function(e){this.termID=e.readShort(),this.camID=e.readShort()}),4,!0),a.defineSequence(o,"UsrCamIDListHelper","Conference.UsrCamID",!0),o.UsrCamSize=a.defineStruct((function(e,t,n){this.termID=void 0!==e?e:0,this.camID=void 0!==t?t:0,this.VIDEO_SS_value=void 0!==n?n:0}),!0,(function(e){e.writeShort(this.termID),e.writeShort(this.camID),e.writeInt(this.VIDEO_SS_value)}),(function(e){this.termID=e.readShort(),this.camID=e.readShort(),this.VIDEO_SS_value=e.readInt()}),8,!0),a.defineSequence(o,"UsrCamSizeListHelper","Conference.UsrCamSize",!0),Object.defineProperty(o,"ZOOM_TELE",{value:2}),Object.defineProperty(o,"ZOOM_WIDE",{value:3}),Object.defineProperty(o,"ZOOM_STOP",{value:0}),Object.defineProperty(o,"PAN_TILT_DIR_UP",{value:1}),Object.defineProperty(o,"PAN_TILT_DIR_DOWN",{value:2}),Object.defineProperty(o,"PAN_TILT_DIR_LEFT",{value:3}),Object.defineProperty(o,"PAN_TILT_DIR_RIGHT",{value:4}),Object.defineProperty(o,"PAN_TILT_DIR_STOP",{value:5}),o.VideoCallback=a.defineObject(void 0,r.Object,void 0,0,["::Conference::VideoCallback","::Ice::Object"],-1,void 0,void 0,!1),o.VideoCallbackPrx=a.defineProxy(r.ObjectPrx,o.VideoCallback.ice_staticId,void 0),a.defineOperations(o.VideoCallback,o.VideoCallbackPrx,{notifyAllowVideoWall:[,,,,,,[[1],[2]],,,,],updateStatus:[,,,,,,[[2],[o.VSTATUS.__helper],[2]],,,,],notifyOpenVideo:[,,,,,,[[2]],,,,],startVideoByManager:[,,,,,,,,[i.ConferenceError],,],notifyEnableVideo:[,,,,,,[[2],[1],[2]],,,,],updateFocusWindow:[,,,,,,[[o.WINDOW_MODE.__helper],[2]],,,,],updateVLayout:[,,,,,,[[o.VIDEOLAYOUTMODE.__helper],[2]],,,,],updateVLayout2:[,,,,,,[[3],[2]],,,,],updateMainVideoShowMode:[,,,,,,[[3],[2]],,,,],updateVideoListMode:[,,,,,,[[7],[2]],,,,],enableUpload:[,,,,,,[[2],[1]],,,,],enableUpload2:[,,,,,,[[2],[3]],,,,],generateIFrame:[,,,,,,[[2]],,,,],notifyRefuseOpenVideo:[,,,,,,[[2]],,,,],getVideoSetting:[,,,1,,[o.VideoSetting],,,[i.ConferenceError],,],setCamera:[,,,,,,[[o.VideoSetting],[2]],,[i.ConferenceError],,],setCameraById:[,,,,,,[[o.UsrCamID],[2]],,[i.ConferenceError],,],notifyVideoPolling:[,,,,,,[[2],[1],[3]],,[i.ConferenceError],,],notifyPollingVideo:[,,,,,,[[2],["Conference.UsrCamIDListHelper"]],,[i.ConferenceError],,],notifyPollingVideo2:[,,,,,,[[2],["Conference.UsrCamIDListHelper"],[7]],,[i.ConferenceError],,],notifyVideoList:[,,,,,,[[2],[7]],,[i.ConferenceError],,],notifyUpdateAllCameraInfos:[,,,,,,[[2],[7]],,[i.ConferenceError],,],notifySetOpenedCameraNumber:[,,,,,,[[2],["Ice.ShortSeqHelper"]],,[i.ConferenceError],,],notifyStartAdjustDirection:[,,,,,,[[o.UsrCamID],[3]],,,,],notifyStartAdjustZoom:[,,,,,,[[o.UsrCamID],[3]],,,,],notifyStopAdjustDirection:[,,,,,,[[o.UsrCamID]],,,,],notifyStopAdjustZoom:[,,,,,,[[o.UsrCamID]],,,,]}),o.VideoCtrl=a.defineObject(void 0,r.Object,void 0,0,["::Conference::VideoCtrl","::Ice::Object"],-1,void 0,void 0,!1),o.VideoCtrlPrx=a.defineProxy(r.ObjectPrx,o.VideoCtrl.ice_staticId,void 0),a.defineOperations(o.VideoCtrl,o.VideoCtrlPrx,{setDeviceStatus:[,,,1,,,[[1]],,[i.ConferenceError],,],allowVideoWall:[,,,1,,,[[1]],,[i.ConferenceError],,],startVideo:[,,,1,,,,,[i.ConferenceError],,],stopVideo:[,,,1,,,,,[i.ConferenceError],,],reqOpenVideo:[,,,1,,,[[2]],,[i.ConferenceError],,],startVideoEx:[,,,1,,,[[2]],,[i.ConferenceError],,],stopVideoEx:[,,,1,,,[[2]],,[i.ConferenceError],,],enableVideo:[,,,1,,,[[1]],,[i.ConferenceError],,],setFocusWindow:[,,,1,,,[[o.WINDOW_MODE.__helper],[2]],,[i.ConferenceError],,],batchSubscribeVideo:[,,,1,,,[["Conference.UsrCamIDListHelper"],[1]],,[i.ConferenceError],,],batchSubscribeVideo2:[,,,1,,,[["Conference.UsrCamSizeListHelper"]],,[i.ConferenceError],,],subscribeFocusWindow:[,,,1,,,[[1]],,[i.ConferenceError],,],subscribeFocusWindow2:[,,,1,,,[[3]],,[i.ConferenceError],,],setVLayout:[,,,1,,,[[o.VIDEOLAYOUTMODE.__helper]],,[i.ConferenceError],,],setVLayout2:[,,,1,,,[[3]],,[i.ConferenceError],,],setMainVideoShowMode:[,,,1,,,[[3]],,[i.ConferenceError],,],setVideoListMode:[,,,1,,,[[7]],,,,],refuseOpenVideo:[,,,1,,,[[2]],,,,],getVideoSetting:[,,,1,,[o.VideoSetting],[[2]],,[i.ConferenceError],,],setCamera:[,,,1,,,[[2],[o.VideoSetting]],,[i.ConferenceError],,],setCameraById:[,,,1,,,[[o.UsrCamID]],,[i.ConferenceError],,],setVideoPolling:[,,,1,,,[[1],[3]],,[i.ConferenceError],,],updatePollingVideo:[,,,1,,,[["Conference.UsrCamIDListHelper"]],,[i.ConferenceError],,],updatePollingVideo2:[,,,1,,,[["Conference.UsrCamIDListHelper"],[7]],,[i.ConferenceError],,],updateVideoList:[,,,1,,,[[7]],,[i.ConferenceError],,],getVideoPollingState:[,,,1,,[1],,[["Conference.UsrCamIDListHelper"],[3]],[i.ConferenceError],,],updateAllCameraInfos:[,,,1,,,[[7]],,[i.ConferenceError],,],setOpenedCameraNumber:[,,,1,,,[["Ice.ShortSeqHelper"]],,[i.ConferenceError],,],startAdjustDirection:[,,,1,,,[[o.UsrCamID],[3]],,[i.ConferenceError],,],startAdjustZoom:[,,,1,,,[[o.UsrCamID],[3]],,[i.ConferenceError],,],stopAdjustDirection:[,,,1,,,[[o.UsrCamID]],,[i.ConferenceError],,],stopAdjustZoom:[,,,1,,,[[o.UsrCamID]],,[i.ConferenceError],,]}),n.Conference=o}("undefined"!=typeof global&&global.process,"undefined"!=typeof global&&void 0!==global.process?n(1457):window.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?t:this)},7083:function(e,t,n){e=n.nmd(e),function(e,t,n){var r=t("ice").Ice,i=(r.__M,t("Common/Exception").Common),o=t("Control/PublicTypes").Conference,a=r.Slice;o.WB_BAKIMG_TYPE=a.defineEnum([["WB_BAKIMG_NULL",0],["WB_BAKIMG_EMF",1],["WB_BAKIMG_JPG",2],["WB_BAKIMG_HTML",3]]),o.WB_ELEMENT_ZPOS=a.defineEnum([["WB_ELEMENT_ZTOP",0],["WB_ELEMENT_ZBOTTOM",1]]),o.ElementID=a.defineStruct((function(e,t){this.ownerID=void 0!==e?e:0,this.ID=void 0!==t?t:0}),!0,(function(e){e.writeShort(this.ownerID),e.writeShort(this.ID)}),(function(e){this.ownerID=e.readShort(),this.ID=e.readShort()}),4,!0),a.defineSequence(o,"ElementIDSeqHelper","Conference.ElementID",!0),o.ElementPos=a.defineStruct((function(e,t,n){this.eID=void 0!==e?e:new o.ElementID,this.left=void 0!==t?t:0,this.top=void 0!==n?n:0}),!0,(function(e){o.ElementID.write(e,this.eID),e.writeInt(this.left),e.writeInt(this.top)}),(function(e){this.eID=o.ElementID.read(e,this.eID),this.left=e.readInt(),this.top=e.readInt()}),12,!0),a.defineSequence(o,"ElementPosSeqHelper","Conference.ElementPos",!0),o.ElementData=a.defineStruct((function(e,t,n,r,i,a,c){this.eID=void 0!==e?e:new o.ElementID,this.orderId=void 0!==t?t:0,this.left=void 0!==n?n:0,this.top=void 0!==r?r:0,this.type=void 0!==i?i:0,this.noused=void 0!==a?a:0,this.data=void 0!==c?c:null}),!0,(function(e){o.ElementID.write(e,this.eID),e.writeInt(this.orderId),e.writeInt(this.left),e.writeInt(this.top),e.writeInt(this.type),e.writeInt(this.noused),o.ByteListHelper.write(e,this.data)}),(function(e){this.eID=o.ElementID.read(e,this.eID),this.orderId=e.readInt(),this.left=e.readInt(),this.top=e.readInt(),this.type=e.readInt(),this.noused=e.readInt(),this.data=o.ByteListHelper.read(e)}),25,!1),a.defineSequence(o,"ElementSeqHelper","Conference.ElementData",!1),o.IndicatorData=a.defineStruct((function(e,t,n,r,i,o){this.termId=void 0!==e?e:0,this.pageNo=void 0!==t?t:0,this.x=void 0!==n?n:0,this.y=void 0!==r?r:0,this.msg=void 0!==i?i:"",this.lifeSec=void 0!==o?o:0}),!0,(function(e){e.writeInt(this.termId),e.writeInt(this.pageNo),e.writeInt(this.x),e.writeInt(this.y),e.writeString(this.msg),e.writeByte(this.lifeSec)}),(function(e){this.termId=e.readInt(),this.pageNo=e.readInt(),this.x=e.readInt(),this.y=e.readInt(),this.msg=e.readString(),this.lifeSec=e.readByte()}),18,!1),a.defineSequence(o,"IndicatorDataSeqHelper","Conference.IndicatorData",!1),o.PageData=a.defineStruct((function(e,t,n,r){this.pageNo=void 0!==e?e:0,this.imgType=void 0!==t?t:o.WB_BAKIMG_TYPE.WB_BAKIMG_NULL,this.imgResourceID=void 0!==n?n:"",this.elementList=void 0!==r?r:null}),!0,(function(e){e.writeInt(this.pageNo),o.WB_BAKIMG_TYPE.__write(e,this.imgType),e.writeString(this.imgResourceID),o.ElementSeqHelper.write(e,this.elementList)}),(function(e){this.pageNo=e.readInt(),this.imgType=o.WB_BAKIMG_TYPE.__read(e),this.imgResourceID=e.readString(),this.elementList=o.ElementSeqHelper.read(e)}),7,!1),a.defineSequence(o,"PageDataSeqHelper","Conference.PageData",!1),o.WhiteBoardData=a.defineStruct((function(e,t){this.descData=void 0!==e?e:new o.WhiteBoardDescribe,this.pageDataList=void 0!==t?t:null}),!0,(function(e){o.WhiteBoardDescribe.write(e,this.descData),o.PageDataSeqHelper.write(e,this.pageDataList)}),(function(e){this.descData=o.WhiteBoardDescribe.read(e,this.descData),this.pageDataList=o.PageDataSeqHelper.read(e)}),38,!1),a.defineSequence(o,"WhiteBoardDataSeqHelper","Conference.WhiteBoardData",!1),a.defineDictionary(o,"PageToDatas","PageToDatasHelper","Ice.IntHelper","Conference.PageData",!1,void 0,void 0,r.HashMap.compareEquals),o.WhiteBoardCtrl=a.defineObject(void 0,r.Object,void 0,0,["::Conference::WhiteBoardCtrl","::Ice::Object"],-1,void 0,void 0,!1),o.WhiteBoardCtrlPrx=a.defineProxy(r.ObjectPrx,o.WhiteBoardCtrl.ice_staticId,void 0),a.defineOperations(o.WhiteBoardCtrl,o.WhiteBoardCtrlPrx,{setContainerSize:[,,,1,,,[[3],[3]],,[i.ConferenceError],,],create:[,,,1,,,[[o.WhiteBoardDescribe]],,[i.ConferenceError],,],importPage:[,,,1,,,[[o.TabID],["Conference.PageDataSeqHelper"]],,[i.ConferenceError],,],close:[,,,1,,,[[o.TabID]],,[i.ConferenceError],,],changeName:[,,,1,,,[[o.TabID],[7]],,[i.ConferenceError],,],changeScale:[,,,1,,,[[o.TabID],[o.WB_SCALE_TYPE.__helper]],,[i.ConferenceError],,],changeRatote:[,,,1,,,[[o.TabID],[o.WB_ROTATE_TYPE.__helper]],,[i.ConferenceError],,],setCurrentPage:[,,,1,,,[[o.TabID],[3],[3],[3]],,[i.ConferenceError],,],showThumPage:[,,,1,,,[[o.TabID],[1]],,[i.ConferenceError],,],addElement:[,,,1,,,[[o.TabID],[3],[o.ElementData]],,[i.ConferenceError],,],addElementEx:[,,,1,,,[[o.TabID],[3],["Conference.ElementSeqHelper"]],,[i.ConferenceError],,],moveElement:[,,,1,,,[[o.TabID],[3],["Conference.ElementPosSeqHelper"]],,[i.ConferenceError],,],modifyElement:[,,,1,,,[[o.TabID],[3],[o.ElementData]],,[i.ConferenceError],,],delElement:[,,,1,,,[[o.TabID],[3],["Conference.ElementIDSeqHelper"]],,[i.ConferenceError],,],setElementZPos:[,,,1,,,[[o.TabID],[3],[o.WB_ELEMENT_ZPOS.__helper]],,[i.ConferenceError],,],setIndicator:[,,,1,,,[[o.TabID],[o.IndicatorData]],,[i.ConferenceError],,],setHotspot:[,,,1,,,[[o.TabID],[3],[3],[3]],,[i.ConferenceError],,],queryIndicator:[,,,1,,["Conference.IndicatorDataSeqHelper"],[[o.TabID]],,[i.ConferenceError],,],queryAllBoardList:[,,,1,,["Conference.WhiteBoardDescribeSeqHelper"],,,[i.ConferenceError],,],queryElementByIDs:[,,,1,,["Conference.PageToDatasHelper"],[[o.TabID],["Ice.IntSeqHelper"]],,[i.ConferenceError],,],queryPageElementByIDs:[,,,1,,["Conference.ElementSeqHelper"],[[o.TabID],[3],["Conference.ElementIDSeqHelper"]],,[i.ConferenceError],,],setMarkTerms:[,,,1,,,[[o.TabID],[1],["Ice.ShortSeqHelper"]],,[i.ConferenceError],,]}),o.WhiteBoardCallback=a.defineObject(void 0,r.Object,void 0,0,["::Conference::WhiteBoardCallback","::Ice::Object"],-1,void 0,void 0,!1),o.WhiteBoardCallbackPrx=a.defineProxy(r.ObjectPrx,o.WhiteBoardCallback.ice_staticId,void 0),a.defineOperations(o.WhiteBoardCallback,o.WhiteBoardCallbackPrx,{notifySetContainerSize:[,,,,,,[[3],[3],[2]],,,,],notifyCreate:[,,,,,,[[o.WhiteBoardDescribe],[2]],,,,],notifyImportPage:[,,,,,,[[o.TabID],["Conference.PageDataSeqHelper"],[2]],,,,],notifyClose:[,,,,,,[[o.TabID],[2]],,,,],notifyChangeName:[,,,,,,[[o.TabID],[7],[2]],,,,],notifyChangeScale:[,,,,,,[[o.TabID],[o.WB_SCALE_TYPE.__helper],[2]],,,,],notifyChangeRotate:[,,,,,,[[o.TabID],[o.WB_ROTATE_TYPE.__helper],[2]],,,,],notifySetCurrentPage:[,,,,,,[[o.TabID],[3],[3],[3],[2]],,,,],notifyShowThumPage:[,,,,,,[[o.TabID],[1],[2]],,,,],notifyAddElement:[,,,,,,[[o.TabID],[3],[o.ElementData],[2]],,,,],notifyAddElementEx:[,,,,,,[[o.TabID],[3],["Conference.ElementSeqHelper"],[2]],,,,],notifyMoveElement:[,,,,,,[[o.TabID],[3],["Conference.ElementPosSeqHelper"],[2]],,,,],notifyModifyElement:[,,,,,,[[o.TabID],[3],[o.ElementData],[2]],,,,],notifyDelElement:[,,,,,,[[o.TabID],[3],["Conference.ElementIDSeqHelper"],[2]],,,,],notifySetElementZPos:[,,,,,,[[o.TabID],[3],[o.WB_ELEMENT_ZPOS.__helper],[2]],,,,],notifySetIndicator:[,,,,,,[[o.TabID],[o.IndicatorData],[2]],,,,],notifySetHotspot:[,,,,,,[[o.TabID],[3],[3],[3],[2]],,,,],notifySetMarkTerms:[,,,,,,[[o.TabID],[1],["Ice.ShortSeqHelper"]],,,,]}),n.Conference=o}("undefined"!=typeof global&&global.process,"undefined"!=typeof global&&void 0!==global.process?n(1457):window.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?t:this)},382:function(e,t,n){e=n.nmd(e),function(e,t,n){var r=t("ice").Ice,i=r.__M,o=t("FileServer/FSCommon").FileServer,a=t("NetDisk/NDFilesystem").NetDiskService,c=r.Slice,s=i.module("DocConverter");c.defineSequence(s,"StringListHelper","Ice.StringHelper",!1),s.DocConverterException=c.defineUserException((function(e,t,n){r.UserException.call(this,n),this.error=void 0!==e?e:0,this.reason=void 0!==t?t:""}),r.UserException,"DocConverter::DocConverterException",(function(e){e.writeInt(this.error),e.writeString(this.reason)}),(function(e){this.error=e.readInt(),this.reason=e.readString()}),!1,!1),s.TaskNotExistException=c.defineUserException((function(e,t,n){s.DocConverterException.call(this,e,t,n)}),s.DocConverterException,"DocConverter::TaskNotExistException",void 0,void 0,!1,!1),s.ConversionException=c.defineUserException((function(e,t,n){s.DocConverterException.call(this,e,t,n)}),s.DocConverterException,"DocConverter::ConversionException",void 0,void 0,!1,!1),s.ConversionModuleException=c.defineUserException((function(e,t,n){s.DocConverterException.call(this,e,t,n)}),s.DocConverterException,"DocConverter::ConversionModuleException",void 0,void 0,!1,!1),s.TaskState=c.defineEnum([["PENDING",0],["DOWNLOADING",1],["CONVERTING",2],["UPLOADING",3],["DONE",4]]),c.defineDictionary(s,"ParamDict","ParamDictHelper","Ice.StringHelper","Ice.StringHelper",!1,void 0,void 0),s.DocConvertRequest=c.defineStruct((function(e,t,n,r,i,a,c,s){this.confId=void 0!==e?e:0,this.ownerId=void 0!==t?t:0,this.fileName=void 0!==n?n:"",this.md5=void 0!==r?r:"",this.fType=void 0!==i?i:o.FileType.FT_NORMAL,this.size=void 0!==a?a:0,this.originSize=void 0!==c?c:0,this.param=void 0!==s?s:null}),!1,(function(e){e.writeInt(this.confId),e.writeShort(this.ownerId),e.writeString(this.fileName),e.writeString(this.md5),o.FileType.__write(e,this.fType),e.writeLong(this.size),e.writeLong(this.originSize),s.ParamDictHelper.write(e,this.param)}),(function(e){this.confId=e.readInt(),this.ownerId=e.readShort(),this.fileName=e.readString(),this.md5=e.readString(),this.fType=o.FileType.__read(e),this.size=e.readLong(),this.originSize=e.readLong(),this.param=s.ParamDictHelper.read(e)}),26,!1),s.DocConvertResponse=c.defineStruct((function(e,t,n,r){this.rsltType=void 0!==e?e:0,this.width=void 0!==t?t:0,this.height=void 0!==n?n:0,this.fileList=void 0!==r?r:null}),!0,(function(e){e.writeInt(this.rsltType),e.writeInt(this.width),e.writeInt(this.height),s.StringListHelper.write(e,this.fileList)}),(function(e){this.rsltType=e.readInt(),this.width=e.readInt(),this.height=e.readInt(),this.fileList=s.StringListHelper.read(e)}),13,!1),s.FSConverter=c.defineObject(void 0,r.Object,void 0,0,["::DocConverter::FSConverter","::Ice::Object"],-1,void 0,void 0,!1),s.FSConverterPrx=c.defineProxy(r.ObjectPrx,s.FSConverter.ice_staticId,void 0),c.defineOperations(s.FSConverter,s.FSConverterPrx,{convert:[,,,1,,[7],[[s.DocConvertRequest]],,[s.DocConverterException],,],getTaskState:[,,,1,,[s.TaskState.__helper],[[7]],[[s.DocConvertResponse]],[s.DocConverterException],,],cancelTask:[,,,1,,,[[7]],,[s.DocConverterException],,]}),s.NDConverter=c.defineObject(void 0,r.Object,void 0,0,["::DocConverter::NDConverter","::Ice::Object"],-1,void 0,void 0,!1),s.NDConverterPrx=c.defineProxy(r.ObjectPrx,s.NDConverter.ice_staticId,void 0),c.defineOperations(s.NDConverter,s.NDConverterPrx,{convert:[,,,1,,[7],[[a.StatInfo]],,[s.DocConverterException],,],cancelTask:[,,,1,,,[[7]],,[s.DocConverterException],,]}),n.DocConverter=s}("undefined"!=typeof global&&global.process,"undefined"!=typeof global&&void 0!==global.process?n(6995):window.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?t:this)},9585:function(e,t,n){e=n.nmd(e),function(e,t,n){var r=t("ice").Ice,i=r.__M,o=r.Slice,a=i.module("FileServer");o.defineSequence(a,"DataSeqHelper","Ice.ByteHelper",!0),o.defineSequence(a,"LongIntArrayHelper","Ice.LongHelper",!0),o.defineSequence(a,"StringListHelper","Ice.StringHelper",!1),o.defineDictionary(a,"OptField","OptFieldHelper","Ice.StringHelper","Ice.StringHelper",!1,void 0,void 0),a.FileType=o.defineEnum([["FT_NORMAL",0],["FT_PROGRAM",1]]),a.FileStatus=o.defineEnum([["FS_UPLOADING",0],["FS_COMPLETE",1]]),a.ConferenceType=o.defineEnum([["CONF_PROVISIONAL",0],["CONF_PERIODIC",1],["CONF_FIXED",2]]),a.PrivilegeAuth=o.defineStruct((function(e,t){this.challengeStr=void 0!==e?e:"",this.accessSecret=void 0!==t?t:""}),!0,(function(e){e.writeString(this.challengeStr),e.writeString(this.accessSecret)}),(function(e){this.challengeStr=e.readString(),this.accessSecret=e.readString()}),2,!1),a.LoginRequest=o.defineStruct((function(e,t,n){this.confId=void 0!==e?e:0,this.termId=void 0!==t?t:0,this.auth=void 0!==n?n:new a.PrivilegeAuth}),!0,(function(e){e.writeLong(this.confId),e.writeShort(this.termId),a.PrivilegeAuth.write(e,this.auth)}),(function(e){this.confId=e.readLong(),this.termId=e.readShort(),this.auth=a.PrivilegeAuth.read(e,this.auth)}),12,!1),a.SessionBase=o.defineObject(void 0,r.Object,void 0,0,["::FileServer::SessionBase","::Ice::Object"],-1,void 0,void 0,!1),a.SessionBasePrx=o.defineProxy(r.ObjectPrx,a.SessionBase.ice_staticId,void 0),o.defineOperations(a.SessionBase,a.SessionBasePrx,{refresh:[,,,,,,,,,,],destroy:[,,,,,,,,,,]}),a.FSExcept=o.defineUserException((function(e,t,n){r.UserException.call(this,n),this.errNo=void 0!==e?e:0,this.errMsg=void 0!==t?t:""}),r.UserException,"FileServer::FSExcept",(function(e){e.writeInt(this.errNo),e.writeString(this.errMsg)}),(function(e){this.errNo=e.readInt(),this.errMsg=e.readString()}),!1,!1),Object.defineProperty(a,"FS_ERROR_UNKNOWN",{value:-1}),a.FSError=o.defineEnum([["FS_OK",0],["FS_REQUEST_TOO_FREQUENT",1],["FS_INVALID_CHALLENGE_STRING",2],["FS_AUTH_FAILED",3],["FS_INVALID_CONFID",4],["FS_INSUFFICIENT_PRIVILEGE",5],["FS_PERMISSION_DENIED",6],["FS_ACCESS_DENIED",7],["FS_DEPLOYMENT_ERROR",8],["FS_APPLICATION_NOT_REGISTRY",9],["FS_FILE_ALREADY_EXISTS",10],["FS_CONFERENCE_NOT_EXISTS",11],["FS_NO_ENOUGH_DISK_SPACE",12],["FS_INVALID_TERMID",13],["FS_PUSHTASK_ALREADY_EXISTS",14],["FS_INVALID_PUSHID",15],["FS_PUSHTASK_ALREADY_CANCEL",16],["FS_CONF_DISK_SPACE_LIMIT_EXCEEDED",17],["FS_INCONSISTENT_DATA_VALIDATION",18],["FS_FILE_NOT_EXISTS",19],["FS_FILE_ALREADY_DELETE",20],["FS_FILE_ALREADY_UPDATE",21],["FS_REJECT_BY_FLOW_CONTROL",22],["FS_CONVERT_TASK_NOT_EXISTS",23],["FS_CONVERT_TASK_ERROR",24]]),a.DocConversionException=o.defineUserException((function(e,t,n){a.FSExcept.call(this,e,t,n)}),a.FSExcept,"FileServer::DocConversionException",void 0,void 0,!1,!1),Object.defineProperty(a,"FS_FC_LEVEL_0",{value:0}),Object.defineProperty(a,"FS_FC_LEVEL_MAX",{value:50}),a.FSFlowCtrlData=o.defineStruct((function(e,t,n,r,i){this.lv=void 0!==e?e:0,this.confTotal=void 0!==t?t:0,this.clientTotal=void 0!==n?n:0,this.bandwith=void 0!==r?r:0,this.requestPerSec=void 0!==i?i:0}),!0,(function(e){e.writeInt(this.lv),e.writeInt(this.confTotal),e.writeInt(this.clientTotal),e.writeInt(this.bandwith),e.writeInt(this.requestPerSec)}),(function(e){this.lv=e.readInt(),this.confTotal=e.readInt(),this.clientTotal=e.readInt(),this.bandwith=e.readInt(),this.requestPerSec=e.readInt()}),20,!0),n.FileServer=a}("undefined"!=typeof global&&global.process,"undefined"!=typeof global&&void 0!==global.process?n(1482):window.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?t:this)},2966:function(e,t,n){e=n.nmd(e),function(e,t,n){var r=t("ice").Ice,i=r.__M,o=r.Slice,a=i.module("LogSpace");a.LogLevel=o.defineEnum([["debug",0],["info",1],["warning",2],["error",3]]),a.FatalLogInfo=o.defineStruct((function(e,t,n,r,i,o,a,c){this.version=void 0!==e?e:"",this.conferenceID=void 0!==t?t:0,this.userID=void 0!==n?n:0,this.client=void 0!==r?r:"",this.clientIP=void 0!==i?i:"",this.logDate=void 0!==o?o:"",this.content=void 0!==a?a:"",this.dumpData=void 0!==c?c:null}),!0,(function(e){e.writeString(this.version),e.writeInt(this.conferenceID),e.writeInt(this.userID),e.writeString(this.client),e.writeString(this.clientIP),e.writeString(this.logDate),e.writeString(this.content),r.ByteSeqHelper.write(e,this.dumpData)}),(function(e){this.version=e.readString(),this.conferenceID=e.readInt(),this.userID=e.readInt(),this.client=e.readString(),this.clientIP=e.readString(),this.logDate=e.readString(),this.content=e.readString(),this.dumpData=r.ByteSeqHelper.read(e)}),14,!1),a.AppendData=o.defineStruct((function(e,t,n){this.uuid=void 0!==e?e:"",this.type=void 0!==t?t:"",this.data=void 0!==n?n:null}),!0,(function(e){e.writeString(this.uuid),e.writeString(this.type),r.ByteSeqHelper.write(e,this.data)}),(function(e){this.uuid=e.readString(),this.type=e.readString(),this.data=r.ByteSeqHelper.read(e)}),3,!1),o.defineSequence(a,"AppendDataSeqHelper","LogSpace.AppendData",!1),a.UsrReportInfo=o.defineStruct((function(e,t,n,r,i,o,a,c,s){this.version=void 0!==e?e:"",this.conferenceID=void 0!==t?t:0,this.userID=void 0!==n?n:0,this.client=void 0!==r?r:"",this.clientIP=void 0!==i?i:"",this.reportDate=void 0!==o?o:"",this.contact=void 0!==a?a:"",this.content=void 0!==c?c:"",this.appendDatas=void 0!==s?s:null}),!0,(function(e){e.writeString(this.version),e.writeInt(this.conferenceID),e.writeInt(this.userID),e.writeString(this.client),e.writeString(this.clientIP),e.writeString(this.reportDate),e.writeString(this.contact),e.writeString(this.content),a.AppendDataSeqHelper.write(e,this.appendDatas)}),(function(e){this.version=e.readString(),this.conferenceID=e.readInt(),this.userID=e.readInt(),this.client=e.readString(),this.clientIP=e.readString(),this.reportDate=e.readString(),this.contact=e.readString(),this.content=e.readString(),this.appendDatas=a.AppendDataSeqHelper.read(e)}),15,!1),a.ClientLogServer=o.defineObject(void 0,r.Object,void 0,1,["::Ice::Object","::LogSpace::ClientLogServer"],-1,void 0,void 0,!1),a.ClientLogServerPrx=o.defineProxy(r.ObjectPrx,a.ClientLogServer.ice_staticId,void 0),o.defineOperations(a.ClientLogServer,a.ClientLogServerPrx,{log:[,,,,,,[["Ice.ByteSeqHelper"]],,,,],logFatal:[,,,,,,[[a.FatalLogInfo]],,,,],usrReport:[,,,,,,[[a.UsrReportInfo]],,,,],logDetail:[,,,,,,[[3],[7],["Ice.ByteSeqHelper"]],,,,],sendCmd:[,,,,,,[[7],[7],[7],["Ice.ByteSeqHelper"]],[[7],["Ice.ByteSeqHelper"]],,,]}),n.LogSpace=a}("undefined"!=typeof global&&global.process,"undefined"!=typeof global&&void 0!==global.process?n(535):window.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?t:this)},6504:function(e,t,n){e=n.nmd(e),function(e,t,n){var r=t("ice").Ice,i=r.__M,o=r.Slice,a=i.module("SendCmd");a.CmdError=o.defineUserException((function(e,t,n){r.UserException.call(this,n),this.error=void 0!==e?e:0,this.reason=void 0!==t?t:""}),r.UserException,"SendCmd::CmdError",(function(e){e.writeInt(this.error),e.writeString(this.reason)}),(function(e){this.error=e.readInt(),this.reason=e.readString()}),!1,!1),a.UnknowErr=o.defineUserException((function(e,t,n){a.CmdError.call(this,e,t,n)}),a.CmdError,"SendCmd::UnknowErr",void 0,void 0,!1,!1),a.CmdNotFound=o.defineUserException((function(e,t,n){a.CmdError.call(this,e,t,n)}),a.CmdError,"SendCmd::CmdNotFound",void 0,void 0,!1,!1),a.CmdNotImplement=o.defineUserException((function(e,t,n){a.CmdError.call(this,e,t,n)}),a.CmdError,"SendCmd::CmdNotImplement",void 0,void 0,!1,!1),a.AppException=o.defineUserException((function(e,t,n){a.CmdError.call(this,e,t,n)}),a.CmdError,"SendCmd::AppException",void 0,void 0,!1,!1),a.AppReturnInvalid=o.defineUserException((function(e,t,n){a.CmdError.call(this,e,t,n)}),a.CmdError,"SendCmd::AppReturnInvalid",void 0,void 0,!1,!1),a.SessionInvalid=o.defineUserException((function(e,t,n){a.CmdError.call(this,e,t,n)}),a.CmdError,"SendCmd::SessionInvalid",void 0,void 0,!1,!1),a.TargetInvalid=o.defineUserException((function(e,t,n){a.CmdError.call(this,e,t,n)}),a.CmdError,"SendCmd::TargetInvalid",void 0,void 0,!1,!1),Object.defineProperty(a,"DATATYPE_ALPHA",{value:1}),a.Cmd=o.defineObject(void 0,r.Object,void 0,1,["::Ice::Object","::SendCmd::Cmd"],-1,void 0,void 0,!1),a.CmdPrx=o.defineProxy(r.ObjectPrx,a.Cmd.ice_staticId,void 0),o.defineOperations(a.Cmd,a.CmdPrx,{sendCmd:[,,,1,,[7],[[7]],,[a.CmdError],,],sendBuffer:[,,,1,,[7],[[7],["Ice.ByteSeqHelper"]],,[a.CmdError],,]}),n.SendCmd=a}("undefined"!=typeof global&&global.process,"undefined"!=typeof global&&void 0!==global.process?n(8649):window.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?t:this)},9715:function(e,t,n){e=n.nmd(e),function(e,t,n){var r=t("ice").Ice,i=(r.__M,t("NetDisk/NDCommon").NetDiskService),o=r.Slice;i.FSIOSession=o.defineObject(void 0,r.Object,[i.NDSessionBase],1,["::Ice::Object","::NetDiskService::FSIOSession","::NetDiskService::JsonNetDisk","::NetDiskService::NDSessionBase"],-1,void 0,void 0,!1),i.FSIOSessionPrx=o.defineProxy(r.ObjectPrx,i.FSIOSession.ice_staticId,[i.NDSessionBasePrx]),o.defineOperations(i.FSIOSession,i.FSIOSessionPrx,{write:[,,,1,,,[[4],["NetDiskService.DataSeqHelper"]],,[i.NetDiskException],,],read:[,,,1,,,[[4],[4]],[["NetDiskService.DataSeqHelper"]],[i.NetDiskException],,],getFileSize:[,,,1,,[4],,,[i.NetDiskException],,],getServerNo:[,,,1,,[3],,,[i.NetDiskException],,]}),o.defineSequence(i,"FSIOSessionProxySeqHelper","NetDiskService.FSIOSessionPrx",!1),i.FileStorageGateway=o.defineObject(void 0,r.Object,[i.JsonNetDisk],1,["::Ice::Object","::NetDiskService::FileStorageGateway","::NetDiskService::JsonNetDisk"],-1,void 0,void 0,!1),i.FileStorageGatewayPrx=o.defineProxy(r.ObjectPrx,i.FileStorageGateway.ice_staticId,[i.JsonNetDiskPrx]),o.defineOperations(i.FileStorageGateway,i.FileStorageGatewayPrx,{createFSIOSession:[,,,1,,["NetDiskService.FSIOSessionPrx"],[[7],[7],[7]],,[i.NetDiskException],,],fileUploadCompleted:[,,,1,,[7],[[7],[1]],,[i.NetDiskException],,],cacheFile:[,,,1,,,[[7],[7]],,[i.NetDiskException],,],deleteFileList:[,,,1,,,[["NetDiskService.StringSeqHelper"]],,[i.NetDiskException],,]}),o.defineSequence(i,"FSGatewayProxySeqHelper","NetDiskService.FileStorageGatewayPrx",!1),i.FileStorageGatewayStat=o.defineStruct((function(e,t,n){this.servNo=void 0!==e?e:0,this.id=void 0!==t?t:"",this.proxy=void 0!==n?n:null}),!1,(function(e){e.writeInt(this.servNo),e.writeString(this.id),i.FileStorageGatewayPrx.write(e,this.proxy)}),(function(e){this.servNo=e.readInt(),this.id=e.readString(),this.proxy=i.FileStorageGatewayPrx.read(e,this.proxy)}),7,!1),i.FileStorageGatewayKeepAliveSession=o.defineObject(void 0,r.Object,[i.NDSessionBase],1,["::Ice::Object","::NetDiskService::FileStorageGatewayKeepAliveSession","::NetDiskService::JsonNetDisk","::NetDiskService::NDSessionBase"],-1,void 0,void 0,!1),i.FileStorageGatewayKeepAliveSessionPrx=o.defineProxy(r.ObjectPrx,i.FileStorageGatewayKeepAliveSession.ice_staticId,[i.NDSessionBasePrx]),o.defineOperations(i.FileStorageGatewayKeepAliveSession,i.FileStorageGatewayKeepAliveSessionPrx,{updateStat:[,,,1,,,[[i.FileStorageGatewayStat]],,[i.NetDiskException],,]}),i.NDFileStorageGateway=o.defineObject(void 0,r.Object,void 0,1,["::Ice::Object","::NetDiskService::NDFileStorageGateway"],-1,void 0,void 0,!1),i.NDFileStorageGatewayPrx=o.defineProxy(r.ObjectPrx,i.NDFileStorageGateway.ice_staticId,void 0),o.defineOperations(i.NDFileStorageGateway,i.NDFileStorageGatewayPrx,{registerFSGW:[,,,1,,["NetDiskService.FileStorageGatewayKeepAliveSessionPrx"],[[i.FileStorageGatewayStat]],,[i.NetDiskException],,]}),n.NetDiskService=i}("undefined"!=typeof global&&global.process,"undefined"!=typeof global&&void 0!==global.process?n(7119):window.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?t:this)},6403:function(e,t,n){e=n.nmd(e),function(e,t,n){var r=t("ice").Ice,i=r.__M,o=r.Slice,a=i.module("NetDiskService");o.defineSequence(a,"DataSeqHelper","Ice.ByteHelper",!0),o.defineSequence(a,"StringSeqHelper","Ice.StringHelper",!1),o.defineDictionary(a,"DataDict","DataDictHelper","Ice.StringHelper","Ice.StringHelper",!1,void 0,void 0),o.defineSequence(a,"DataDictSeqHelper","NetDiskService.DataDictHelper",!1),a.NetDiskException=o.defineUserException((function(e,t,n){r.UserException.call(this,n),this.error=void 0!==e?e:0,this.reason=void 0!==t?t:""}),r.UserException,"NetDiskService::NetDiskException",(function(e){e.writeInt(this.error),e.writeString(this.reason)}),(function(e){this.error=e.readInt(),this.reason=e.readString()}),!1,!1),a.JsonNetDisk=o.defineObject(void 0,r.Object,void 0,1,["::Ice::Object","::NetDiskService::JsonNetDisk"],-1,void 0,void 0,!1),a.JsonNetDiskPrx=o.defineProxy(r.ObjectPrx,a.JsonNetDisk.ice_staticId,void 0),o.defineOperations(a.JsonNetDisk,a.JsonNetDiskPrx,{sendCmd:[,,,1,,,[[7],[7],[7],["Ice.ByteSeqHelper"]],[[7],["Ice.ByteSeqHelper"]],[a.NetDiskException],,]}),a.NDSessionBase=o.defineObject(void 0,r.Object,[a.JsonNetDisk],2,["::Ice::Object","::NetDiskService::JsonNetDisk","::NetDiskService::NDSessionBase"],-1,void 0,void 0,!1),a.NDSessionBasePrx=o.defineProxy(r.ObjectPrx,a.NDSessionBase.ice_staticId,[a.JsonNetDiskPrx]),o.defineOperations(a.NDSessionBase,a.NDSessionBasePrx,{getSessionTimeout:[,2,2,1,,[3],,,,,],keepAlive:[,2,2,1,,,,,[a.NetDiskException],,],destroy:[,,,1,,,,,,,]}),a.InvalidFileDescriptor=o.defineUserException((function(e,t,n){a.NetDiskException.call(this,e,t,n)}),a.NetDiskException,"NetDiskService::InvalidFileDescriptor",void 0,void 0,!1,!1),a.InvalidUserId=o.defineUserException((function(e,t,n){a.NetDiskException.call(this,e,t,n)}),a.NetDiskException,"NetDiskService::InvalidUserId",void 0,void 0,!1,!1),a.InvalidCompanyId=o.defineUserException((function(e,t,n){a.NetDiskException.call(this,e,t,n)}),a.NetDiskException,"NetDiskService::InvalidCompanyId",void 0,void 0,!1,!1),a.InvalidConfId=o.defineUserException((function(e,t,n){a.NetDiskException.call(this,e,t,n)}),a.NetDiskException,"NetDiskService::InvalidConfId",void 0,void 0,!1,!1),a.InvalidTaskId=o.defineUserException((function(e,t,n){a.NetDiskException.call(this,e,t,n)}),a.NetDiskException,"NetDiskService::InvalidTaskId",void 0,void 0,!1,!1),a.PermissionDenied=o.defineUserException((function(e,t,n){a.NetDiskException.call(this,e,t,n)}),a.NetDiskException,"NetDiskService::PermissionDenied",void 0,void 0,!1,!1),a.InvalidAccessMode=o.defineUserException((function(e,t,n){a.NetDiskException.call(this,e,t,n)}),a.NetDiskException,"NetDiskService::InvalidAccessMode",void 0,void 0,!1,!1),a.TaskIdAlreadyExists=o.defineUserException((function(e,t,n){a.NetDiskException.call(this,e,t,n)}),a.NetDiskException,"NetDiskService::TaskIdAlreadyExists",void 0,void 0,!1,!1),a.InvalidFileName=o.defineUserException((function(e,t,n){a.NetDiskException.call(this,e,t,n)}),a.NetDiskException,"NetDiskService::InvalidFileName",void 0,void 0,!1,!1),a.FileAlreadyExists=o.defineUserException((function(e,t,n){a.NetDiskException.call(this,e,t,n)}),a.NetDiskException,"NetDiskService::FileAlreadyExists",void 0,void 0,!1,!1),a.FdfsFileAlreadyExists=o.defineUserException((function(e,t,n){a.NetDiskException.call(this,e,t,n)}),a.NetDiskException,"NetDiskService::FdfsFileAlreadyExists",void 0,void 0,!1,!1),a.FileBuffering=o.defineUserException((function(e,t,n){a.NetDiskException.call(this,e,t,n)}),a.NetDiskException,"NetDiskService::FileBuffering",void 0,void 0,!1,!1),a.FileOrDirectoryNotExists=o.defineUserException((function(e,t,n){a.NetDiskException.call(this,e,t,n)}),a.NetDiskException,"NetDiskService::FileOrDirectoryNotExists",void 0,void 0,!1,!1),a.InconsistentDataValidation=o.defineUserException((function(e,t,n){a.NetDiskException.call(this,e,t,n)}),a.NetDiskException,"NetDiskService::InconsistentDataValidation",void 0,void 0,!1,!1),a.TransformNotRecord=o.defineUserException((function(e,t,n){a.NetDiskException.call(this,e,t,n)}),a.NetDiskException,"NetDiskService::TransformNotRecord",void 0,void 0,!1,!1),a.TransformNotComplete=o.defineUserException((function(e,t,n){a.NetDiskException.call(this,e,t,n)}),a.NetDiskException,"NetDiskService::TransformNotComplete",void 0,void 0,!1,!1),a.AlreadyTransformExcept=o.defineUserException((function(e,t,n){a.NetDiskException.call(this,e,t,n)}),a.NetDiskException,"NetDiskService::AlreadyTransformExcept",void 0,void 0,!1,!1),a.ProgressTransformExcept=o.defineUserException((function(e,t,n){a.NetDiskException.call(this,e,t,n)}),a.NetDiskException,"NetDiskService::ProgressTransformExcept",void 0,void 0,!1,!1),a.TimeoutTransformExcept=o.defineUserException((function(e,t,n){a.NetDiskException.call(this,e,t,n)}),a.NetDiskException,"NetDiskService::TimeoutTransformExcept",void 0,void 0,!1,!1),a.FSNodeAlreadyExists=o.defineUserException((function(e,t,n){a.NetDiskException.call(this,e,t,n)}),a.NetDiskException,"NetDiskService::FSNodeAlreadyExists",void 0,void 0,!1,!1),a.AlreadyImportExcept=o.defineUserException((function(e,t,n){a.NetDiskException.call(this,e,t,n)}),a.NetDiskException,"NetDiskService::AlreadyImportExcept",void 0,void 0,!1,!1),a.notTransformServer=o.defineUserException((function(e,t,n){a.NetDiskException.call(this,e,t,n)}),a.NetDiskException,"NetDiskService::notTransformServer",void 0,void 0,!1,!1),a.notAvailableTransformServer=o.defineUserException((function(e,t,n){a.NetDiskException.call(this,e,t,n)}),a.NetDiskException,"NetDiskService::notAvailableTransformServer",void 0,void 0,!1,!1),a.ImportSameMd5=o.defineUserException((function(e,t,n){a.NetDiskException.call(this,e,t,n)}),a.NetDiskException,"NetDiskService::ImportSameMd5",void 0,void 0,!1,!1),a.ExceedTheCapacityLimit=o.defineUserException((function(e,t,n){a.NetDiskException.call(this,e,t,n)}),a.NetDiskException,"NetDiskService::ExceedTheCapacityLimit",void 0,void 0,!1,!1),a.NotSupportExcept=o.defineUserException((function(e,t,n){a.NetDiskException.call(this,e,t,n)}),a.NetDiskException,"NetDiskService::NotSupportExcept",void 0,void 0,!1,!1),a.ServerInternalError=o.defineUserException((function(e,t,n){a.NetDiskException.call(this,e,t,n)}),a.NetDiskException,"NetDiskService::ServerInternalError",void 0,void 0,!1,!1),n.NetDiskService=a}("undefined"!=typeof global&&global.process,"undefined"!=typeof global&&void 0!==global.process?n(7119):window.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?t:this)},8005:function(e,t,n){e=n.nmd(e),function(e,t,n){var r=t("ice").Ice,i=(r.__M,t("NetDisk/NDCommon").NetDiskService),o=r.Slice;i.StatInfo=o.defineStruct((function(e,t,n,r,i,o){this.name=void 0!==e?e:"",this.path=void 0!==t?t:"",this.md5=void 0!==n?n:"",this.size=void 0!==r?r:0,this.ctime=void 0!==i?i:"",this.attributes=void 0!==o?o:null}),!1,(function(e){e.writeString(this.name),e.writeString(this.path),e.writeString(this.md5),e.writeLong(this.size),e.writeString(this.ctime),i.DataDictHelper.write(e,this.attributes)}),(function(e){this.name=e.readString(),this.path=e.readString(),this.md5=e.readString(),this.size=e.readLong(),this.ctime=e.readString(),this.attributes=i.DataDictHelper.read(e)}),13,!1),o.defineSequence(i,"FileNodeSeqHelper","NetDiskService.StatInfo",!1),o.defineSequence(i,"DirNodeSeqHelper","Ice.ObjectHelper",!1,"NetDiskService.DirNode"),i.DirNode=o.defineObject((function(e,t,n,i,o){r.Object.call(this),this.name=void 0!==e?e:"",this.path=void 0!==t?t:"/",this.attributes=void 0!==n?n:null,this.subDirs=void 0!==i?i:null,this.files=void 0!==o?o:null}),r.Object,void 0,1,["::Ice::Object","::NetDiskService::DirNode"],-1,(function(e){e.writeString(this.name),e.writeString(this.path),i.DataDictHelper.write(e,this.attributes),i.DirNodeSeqHelper.write(e,this.subDirs),i.FileNodeSeqHelper.write(e,this.files)}),(function(e){this.name=e.readString(),this.path=e.readString(),this.attributes=i.DataDictHelper.read(e),this.subDirs=i.DirNodeSeqHelper.read(e),this.files=i.FileNodeSeqHelper.read(e)}),!1),i.DirNodePrx=o.defineProxy(r.ObjectPrx,i.DirNode.ice_staticId,void 0),o.defineOperations(i.DirNode,i.DirNodePrx),i.ConvertStauts=o.defineStruct((function(e,t,n){this.status=void 0!==e?e:0,this.fileList=void 0!==t?t:null,this.attributes=void 0!==n?n:null}),!1,(function(e){e.writeInt(this.status),i.StringSeqHelper.write(e,this.fileList),i.DataDictHelper.write(e,this.attributes)}),(function(e){this.status=e.readInt(),this.fileList=i.StringSeqHelper.read(e),this.attributes=i.DataDictHelper.read(e)}),6,!1),i.DocData=o.defineStruct((function(e,t,n,r,i){this.owern_id=void 0!==e?e:0,this.owner_type=void 0!==t?t:"",this.name=void 0!==n?n:"",this.attributes=void 0!==r?r:null,this.pageDataList=void 0!==i?i:null}),!1,(function(e){e.writeInt(this.owern_id),e.writeString(this.owner_type),e.writeString(this.name),i.DataDictHelper.write(e,this.attributes),i.FileNodeSeqHelper.write(e,this.pageDataList)}),(function(e){this.owern_id=e.readInt(),this.owner_type=e.readString(),this.name=e.readString(),this.attributes=i.DataDictHelper.read(e),this.pageDataList=i.FileNodeSeqHelper.read(e)}),8,!1),o.defineSequence(i,"DocDataSeqHelper","NetDiskService.DocData",!1),n.NetDiskService=i}("undefined"!=typeof global&&global.process,"undefined"!=typeof global&&void 0!==global.process?n(7119):window.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?t:this)},6009:function(e,t,n){e=n.nmd(e),function(e,t,n){var r=t("ice").Ice,i=r.__M,o=t("DocConverter/DocConverter").DocConverter,a=(t("FileServer/FSCommon").FileServer,i.require(e,["NetDisk/FileStorageGateway","NetDisk/NDFilesystem","NetDisk/NDCommon"]).NetDiskService),c=r.Slice;a.NDSession=c.defineObject(void 0,r.Object,[a.NDSessionBase],2,["::Ice::Object","::NetDiskService::JsonNetDisk","::NetDiskService::NDSession","::NetDiskService::NDSessionBase"],-1,void 0,void 0,!1),a.NDSessionPrx=c.defineProxy(r.ObjectPrx,a.NDSession.ice_staticId,[a.NDSessionBasePrx]),c.defineOperations(a.NDSession,a.NDSessionPrx,{listDirTree:[,2,2,1,,["NetDiskService.DirNode",!0],[[7]],,[a.NetDiskException],,!0],listDir:[,2,2,1,,["NetDiskService.DirNode",!0],[[7]],,[a.NetDiskException],,!0],mkdir:[,,,1,,,[[7]],,[a.NetDiskException],,],renameFile:[,,,1,,,[[7],[7]],,[a.NetDiskException],,],renameDir:[,,,1,,,[[7],[7]],,[a.NetDiskException],,],deleteFile:[,,,1,,,[[7]],,[a.NetDiskException],,],deleteDir:[,,,1,,,[[7]],,[a.NetDiskException],,],stat:[,,,1,,[a.StatInfo],[[7]],,[a.NetDiskException],,],getSummary:[,,,1,,,,[["NetDiskService.DataDictHelper"]],[a.NetDiskException],,],beginUpload:[,,,1,,,[[a.StatInfo]],[[7],["NetDiskService.FSGatewayProxySeqHelper"]],[a.NetDiskException],,],endUpload:[,,,1,,,[[7],[7]],,[a.NetDiskException],,],beginDownload:[,,,1,,,[[7]],[["NetDiskService.FSGatewayProxySeqHelper"]],[a.NetDiskException],,],convert:[,,,1,,[7],[[7],["NetDiskService.DataDictHelper"],["NetDiskService.FSIOSessionPrx"]],,[o.DocConverterException,a.NetDiskException],,],getConvertStatus:[,,,1,,[a.ConvertStauts],[[7]],,[o.DocConverterException,a.NetDiskException],,],updateFileAttr:[,,,1,,,[[7],["NetDiskService.DataDictHelper"]],,[a.NetDiskException],,],getHttpUrl:[,2,2,1,,["NetDiskService.StringSeqHelper"],[[7]],,[a.NetDiskException],,]}),a.NDUserSession=c.defineObject(void 0,r.Object,[a.NDSession],4,["::Ice::Object","::NetDiskService::JsonNetDisk","::NetDiskService::NDSession","::NetDiskService::NDSessionBase","::NetDiskService::NDUserSession"],-1,void 0,void 0,!1),a.NDUserSessionPrx=c.defineProxy(r.ObjectPrx,a.NDUserSession.ice_staticId,[a.NDSessionPrx]),c.defineOperations(a.NDUserSession,a.NDUserSessionPrx,{import2Conf:[,,,1,,,[[7],[3],["NetDiskService.DataDictHelper"]],,[a.NetDiskException],,],import2ConfDD:[,,,1,,["NetDiskService.DataDictHelper"],[[7],[3],["NetDiskService.DataDictHelper"]],,[a.NetDiskException],,],save2CompanyNetDisk:[,,,1,,,[[7],[7],["NetDiskService.DataDictHelper"]],,[a.NetDiskException],,]}),a.NDCompanySession=c.defineObject(void 0,r.Object,[a.NDSession],2,["::Ice::Object","::NetDiskService::JsonNetDisk","::NetDiskService::NDCompanySession","::NetDiskService::NDSession","::NetDiskService::NDSessionBase"],-1,void 0,void 0,!1),a.NDCompanySessionPrx=c.defineProxy(r.ObjectPrx,a.NDCompanySession.ice_staticId,[a.NDSessionPrx]),c.defineOperations(a.NDCompanySession,a.NDCompanySessionPrx,{import2Conf:[,,,1,,,[[7],[3],["NetDiskService.DataDictHelper"]],,[a.NetDiskException],,],import2ConfDD:[,,,1,,["NetDiskService.DataDictHelper"],[[7],[3],["NetDiskService.DataDictHelper"]],,[a.NetDiskException],,],save2UserNetDisk:[,,,1,,,[[3],[7],[7],["NetDiskService.DataDictHelper"]],,[a.NetDiskException],,]}),a.NDConfSession=c.defineObject(void 0,r.Object,[a.NDSession],2,["::Ice::Object","::NetDiskService::JsonNetDisk","::NetDiskService::NDConfSession","::NetDiskService::NDSession","::NetDiskService::NDSessionBase"],-1,void 0,void 0,!1),a.NDConfSessionPrx=c.defineProxy(r.ObjectPrx,a.NDConfSession.ice_staticId,[a.NDSessionPrx]),c.defineOperations(a.NDConfSession,a.NDConfSessionPrx,{getConvertList:[,,,1,,["NetDiskService.DocDataSeqHelper"],,,[a.NetDiskException],,]}),a.NDConvertSession=c.defineObject(void 0,r.Object,[a.NDSession],2,["::Ice::Object","::NetDiskService::JsonNetDisk","::NetDiskService::NDConvertSession","::NetDiskService::NDSession","::NetDiskService::NDSessionBase"],-1,void 0,void 0,!1),a.NDConvertSessionPrx=c.defineProxy(r.ObjectPrx,a.NDConvertSession.ice_staticId,[a.NDSessionPrx]),c.defineOperations(a.NDConvertSession,a.NDConvertSessionPrx,{docConvertStateNotice:[,2,2,1,,,[[7],[3],["NetDiskService.DataDictHelper"]],,[a.NetDiskException],,]}),a.NDClient=c.defineObject(void 0,r.Object,[a.JsonNetDisk],2,["::Ice::Object","::NetDiskService::JsonNetDisk","::NetDiskService::NDClient"],-1,void 0,void 0,!1),a.NDClientPrx=c.defineProxy(r.ObjectPrx,a.NDClient.ice_staticId,[a.JsonNetDiskPrx]),c.defineOperations(a.NDClient,a.NDClientPrx,{createUserSession:[,,,1,,["NetDiskService.NDUserSessionPrx"],[[3],[7]],,[a.NetDiskException],,],createCompanySession:[,,,1,,["NetDiskService.NDCompanySessionPrx"],[[3],[7]],,[a.NetDiskException],,],createConfSession:[,,,1,,["NetDiskService.NDConfSessionPrx"],[[3],[7]],,[a.NetDiskException],,],createConvertSession:[,,,1,,["NetDiskService.NDConvertSessionPrx"],[[3],[7]],,[a.NetDiskException],,]}),a.NetDisk=c.defineObject(void 0,r.Object,[a.JsonNetDisk],2,["::Ice::Object","::NetDiskService::JsonNetDisk","::NetDiskService::NetDisk"],-1,void 0,void 0,!1),a.NetDiskPrx=c.defineProxy(r.ObjectPrx,a.NetDisk.ice_staticId,[a.JsonNetDiskPrx]),c.defineOperations(a.NetDisk,a.NetDiskPrx,{createUserNetDisk:[,,,1,,,[[3]],,[a.NetDiskException],,],deleteUserNetDisk:[,2,2,1,,,[[3]],,[a.NetDiskException],,],createCompanyNetDisk:[,,,1,,,[[3],[7]],,[a.NetDiskException],,],deleteCompanyNetDisk:[,2,2,1,,,[[3]],,[a.NetDiskException],,],setCompanyNDAuthToken:[,2,2,1,,,[[3],[7]],,[a.NetDiskException],,],createConfNetDisk:[,,,1,,,[[3],[7]],,[a.NetDiskException],,],deleteConfNetDisk:[,2,2,1,,,[[3]],,[a.NetDiskException],,],setConfNDAuthToken:[,2,2,1,,,[[3],[7]],,[a.NetDiskException],,],clean:[,2,2,1,,,,,[a.NetDiskException],,]}),n.NetDiskService=a}("undefined"!=typeof global&&void 0!==global.process?e:void 0,"undefined"!=typeof global&&void 0!==global.process?n(7119):window.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?t:this)},8357:function(e,t,n){e=n.nmd(e),function(e,t,n){var r=t("ice").Ice,i=r.__M.require(e,["Trans/MSPub","Trans/MSRtp"]).MS,o=r.Slice;i.RtcError=o.defineUserException((function(e,t,n){r.UserException.call(this,n),this.error=void 0!==e?e:0,this.reason=void 0!==t?t:""}),r.UserException,"MS::RtcError",(function(e){e.writeInt(this.error),e.writeString(this.reason)}),(function(e){this.error=e.readInt(),this.reason=e.readString()}),!1,!1),i.UnknowErr=o.defineUserException((function(e,t,n){i.RtcError.call(this,e,t,n)}),i.RtcError,"MS::UnknowErr",void 0,void 0,!1,!1),i.RtcSrv=o.defineObject(void 0,r.Object,void 0,1,["::Ice::Object","::MS::RtcSrv"],-1,void 0,void 0,!1),i.RtcSrvPrx=o.defineProxy(r.ObjectPrx,i.RtcSrv.ice_staticId,void 0),o.defineOperations(i.RtcSrv,i.RtcSrvPrx,{GwAudioAlloc:[,,,1,,[3],[[i.ConferenceInfo],[i.RtpAudioParam],["MS.DictStrParamsHelper"]],[[i.RtpAddress],[2],[7]],,,],GwAudioAlloc2:[,,,1,,[3],[[i.ConferenceInfo],[i.AudioStreamParam],["MS.DictStrParamsHelper"]],[[7],[7]],,,],GwVideoAlloc:[,,,1,,[3],[[i.ConferenceInfo],[i.RtpVideoParam],["MS.DictStrParamsHelper"]],[[i.RtpAddress],[2],[7]],,,],GwVideoAlloc2:[,,,1,,[3],[[i.ConferenceInfo],[i.VideoStreamParam],["MS.DictStrParamsHelper"]],[[7]],,,],GwFree:[,,,1,,,[[3]],,[i.RtcError],,]}),n.MS=i}("undefined"!=typeof global&&void 0!==global.process?e:void 0,"undefined"!=typeof global&&void 0!==global.process?n(6519):window.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?t:this)},554:function(e,t,n){e=n.nmd(e),function(e,t,n){var r=t("ice").Ice,i=r.__M,o=r.Slice,a=i.module("Resm");a.ResmError=o.defineUserException((function(e,t,n){r.UserException.call(this,n),this.error=void 0!==e?e:0,this.reason=void 0!==t?t:""}),r.UserException,"Resm::ResmError",(function(e){e.writeInt(this.error),e.writeString(this.reason)}),(function(e){this.error=e.readInt(),this.reason=e.readString()}),!1,!1),a.ServerIdNotConfiger=o.defineUserException((function(e,t,n){a.ResmError.call(this,e,t,n)}),a.ResmError,"Resm::ServerIdNotConfiger",void 0,void 0,!1,!1),a.ServerNotEnable=o.defineUserException((function(e,t,n){a.ResmError.call(this,e,t,n)}),a.ResmError,"Resm::ServerNotEnable",void 0,void 0,!1,!1),a.NotAddedToService=o.defineUserException((function(e,t,n){a.ResmError.call(this,e,t,n)}),a.ResmError,"Resm::NotAddedToService",void 0,void 0,!1,!1),a.NoServerAvailable=o.defineUserException((function(e,t,n){a.ResmError.call(this,e,t,n)}),a.ResmError,"Resm::NoServerAvailable",void 0,void 0,!1,!1),a.NotConnected2Db=o.defineUserException((function(e,t,n){a.ResmError.call(this,e,t,n)}),a.ResmError,"Resm::NotConnected2Db",void 0,void 0,!1,!1),a.ResSessionBase=o.defineObject(void 0,r.Object,void 0,1,["::Ice::Object","::Resm::ResSessionBase"],-1,void 0,void 0,!1),a.ResSessionBasePrx=o.defineProxy(r.ObjectPrx,a.ResSessionBase.ice_staticId,void 0),o.defineOperations(a.ResSessionBase,a.ResSessionBasePrx,{nouse:[,,,,,,,,,,]}),a.InfoResponse=o.defineStruct((function(e,t,n,r){this.serverNo=void 0!==e?e:0,this.domain=void 0!==t?t:0,this.registerInverval=void 0!==n?n:0,this.reportInverval=void 0!==r?r:0}),!0,(function(e){e.writeInt(this.serverNo),e.writeInt(this.domain),e.writeInt(this.registerInverval),e.writeInt(this.reportInverval)}),(function(e){this.serverNo=e.readInt(),this.domain=e.readInt(),this.registerInverval=e.readInt(),this.reportInverval=e.readInt()}),16,!0),Object.defineProperty(a,"SERVER_ACCESS",{value:0}),Object.defineProperty(a,"SERVER_SS",{value:1}),Object.defineProperty(a,"SERVER_CONTROL",{value:2}),Object.defineProperty(a,"SERVER_FILE",{value:3}),Object.defineProperty(a,"SERVER_MIX",{value:4}),Object.defineProperty(a,"SERVER_FN",{value:5}),Object.defineProperty(a,"SERVER_MCU",{value:6}),a.ResmCommon=o.defineObject(void 0,r.Object,void 0,1,["::Ice::Object","::Resm::ResmCommon"],-1,void 0,void 0,!1),a.ResmCommonPrx=o.defineProxy(r.ObjectPrx,a.ResmCommon.ice_staticId,void 0),o.defineOperations(a.ResmCommon,a.ResmCommonPrx,{getSelfInfo:[,,,,,[a.InfoResponse],[[7],[3]],,[a.ResmError],,],getActiveConference:[,,,,,["Ice.IntSeqHelper"],,,[a.ResmError],,]}),o.defineDictionary(a,"ReportDict","ReportDictHelper","Ice.StringHelper","Ice.IntHelper",!1,void 0,void 0),o.defineDictionary(a,"DataDict","DataDictHelper","Ice.StringHelper","Ice.IntHelper",!1,void 0,void 0),o.defineSequence(a,"IpAddressSeqHelper","Ice.StringHelper",!1),a.NetworkStatus=o.defineStruct((function(e,t){this.latency=void 0!==e?e:0,this.lostRate=void 0!==t?t:0}),!0,(function(e){e.writeInt(this.latency),e.writeInt(this.lostRate)}),(function(e){this.latency=e.readInt(),this.lostRate=e.readInt()}),8,!0),a.NetworkReport=o.defineStruct((function(e,t,n,r,i,o,a,c){this.avgLatency=void 0!==e?e:0,this.maxLatency=void 0!==t?t:0,this.minLatency=void 0!==n?n:0,this.lostRate=void 0!==r?r:0,this.singleLost=void 0!==i?i:0,this.contLostCnt=void 0!==o?o:0,this.contLostPkt=void 0!==a?a:0,this.statisTime=void 0!==c?c:""}),!0,(function(e){e.writeInt(this.avgLatency),e.writeInt(this.maxLatency),e.writeInt(this.minLatency),e.writeInt(this.lostRate),e.writeInt(this.singleLost),e.writeInt(this.contLostCnt),e.writeInt(this.contLostPkt),e.writeString(this.statisTime)}),(function(e){this.avgLatency=e.readInt(),this.maxLatency=e.readInt(),this.minLatency=e.readInt(),this.lostRate=e.readInt(),this.singleLost=e.readInt(),this.contLostCnt=e.readInt(),this.contLostPkt=e.readInt(),this.statisTime=e.readString()}),29,!1),a.PathStatus=o.defineStruct((function(e,t,n,r){this.remoteServerNo=void 0!==e?e:0,this.remoteIP=void 0!==t?t:"",this.netReport=void 0!==n?n:new a.NetworkReport,this.weight=void 0!==r?r:0}),!0,(function(e){e.writeInt(this.remoteServerNo),e.writeString(this.remoteIP),a.NetworkReport.write(e,this.netReport),e.writeInt(this.weight)}),(function(e){this.remoteServerNo=e.readInt(),this.remoteIP=e.readString(),this.netReport=a.NetworkReport.read(e,this.netReport),this.weight=e.readInt()}),38,!1),o.defineSequence(a,"PathStatusSeqHelper","Resm.PathStatus",!1),o.defineDictionary(a,"PathStatusDict","PathStatusDictHelper","Ice.StringHelper","Resm.PathStatusSeqHelper",!1,void 0,void 0,r.ArrayUtil.equals),a.MixSession=o.defineObject(void 0,r.Object,[a.ResSessionBase],1,["::Ice::Object","::Resm::MixSession","::Resm::ResSessionBase"],-1,void 0,void 0,!1),a.MixSessionPrx=o.defineProxy(r.ObjectPrx,a.MixSession.ice_staticId,[a.ResSessionBasePrx]),o.defineOperations(a.MixSession,a.MixSessionPrx,{abilityReport:[,,,,,,[["Resm.ReportDictHelper"]],,[a.ResmError],,]}),a.NetworkProperty=o.defineEnum([["TELECOM",0],["UNICOM",1],["TELEUNI",2],["UNKNOW",3]]),a.MixM=o.defineObject(void 0,r.Object,void 0,1,["::Ice::Object","::Resm::MixM"],-1,void 0,void 0,!1),a.MixMPrx=o.defineProxy(r.ObjectPrx,a.MixM.ice_staticId,void 0),o.defineOperations(a.MixM,a.MixMPrx,{register:[,,,,,["Resm.MixSessionPrx"],[[3],[7],[7],["Resm.IpAddressSeqHelper"]],[["Resm.DataDictHelper"]],[a.ResmError],,],locate:[,,,,,[3],[[3],[3],[a.NetworkProperty.__helper]],,[a.ResmError],,],locateMixAndSs:[,,,,,["Resm.DataDictHelper"],[[3],[3],[3]],,[a.ResmError],,]}),a.SsSession=o.defineObject(void 0,r.Object,[a.ResSessionBase],2,["::Ice::Object","::Resm::ResSessionBase","::Resm::SsSession"],-1,void 0,void 0,!1),a.SsSessionPrx=o.defineProxy(r.ObjectPrx,a.SsSession.ice_staticId,[a.ResSessionBasePrx]),o.defineOperations(a.SsSession,a.SsSessionPrx,{abilityReport:[,,,,,,[["Resm.ReportDictHelper"]],,,,]}),a.SsM=o.defineObject(void 0,r.Object,void 0,1,["::Ice::Object","::Resm::SsM"],-1,void 0,void 0,!1),a.SsMPrx=o.defineProxy(r.ObjectPrx,a.SsM.ice_staticId,void 0),o.defineOperations(a.SsM,a.SsMPrx,{register:[,,,,,["Resm.SsSessionPrx"],[[3],[7],[7]],[["Resm.DataDictHelper"]],[a.ResmError],,],locate:[,,,,,[3],[[3],[3]],,[a.ResmError],,]}),a.ControlSession=o.defineObject(void 0,r.Object,[a.ResSessionBase],1,["::Ice::Object","::Resm::ControlSession","::Resm::ResSessionBase"],-1,void 0,void 0,!1),a.ControlSessionPrx=o.defineProxy(r.ObjectPrx,a.ControlSession.ice_staticId,[a.ResSessionBasePrx]),o.defineOperations(a.ControlSession,a.ControlSessionPrx,{abilityReport:[,,,,,,[["Resm.ReportDictHelper"]],,,,]}),a.ControlM=o.defineObject(void 0,r.Object,void 0,1,["::Ice::Object","::Resm::ControlM"],-1,void 0,void 0,!1),a.ControlMPrx=o.defineProxy(r.ObjectPrx,a.ControlM.ice_staticId,void 0),o.defineOperations(a.ControlM,a.ControlMPrx,{register:[,,,,,["Resm.ControlSessionPrx"],[[3],[7],[7]],,[a.ResmError],,],locate:[,,,,,["Resm.DataDictHelper"],[[3],[3],[3],[3]],,[a.ResmError],,]}),a.FileCallback=o.defineObject(void 0,r.Object,void 0,1,["::Ice::Object","::Resm::FileCallback"],-1,void 0,void 0,!1),a.FileCallbackPrx=o.defineProxy(r.ObjectPrx,a.FileCallback.ice_staticId,void 0),o.defineOperations(a.FileCallback,a.FileCallbackPrx,{setFileData:[,,,,,,[["Resm.DataDictHelper"]],,,,]}),a.FileSession=o.defineObject(void 0,r.Object,[a.ResSessionBase],1,["::Ice::Object","::Resm::FileSession","::Resm::ResSessionBase"],-1,void 0,void 0,!1),a.FileSessionPrx=o.defineProxy(r.ObjectPrx,a.FileSession.ice_staticId,[a.ResSessionBasePrx]),o.defineOperations(a.FileSession,a.FileSessionPrx,{abilityReport:[,,,,,,[["Resm.ReportDictHelper"]],,,,]}),a.FileM=o.defineObject(void 0,r.Object,void 0,1,["::Ice::Object","::Resm::FileM"],-1,void 0,void 0,!1),a.FileMPrx=o.defineProxy(r.ObjectPrx,a.FileM.ice_staticId,void 0),o.defineOperations(a.FileM,a.FileMPrx,{register:[,,,,,["Resm.FileSessionPrx"],[[3],[7],[7],["Resm.FileCallbackPrx"]],[["Resm.DataDictHelper"]],[a.ResmError],,],locate:[,,,,,["Resm.DataDictHelper"],[[3],[3]],,[a.ResmError],,]}),o.defineDictionary(a,"ConfMemberDict","ConfMemberDictHelper","Ice.IntHelper","Ice.IntHelper",!0,void 0,void 0),a.AccessSession=o.defineObject(void 0,r.Object,[a.ResSessionBase],1,["::Ice::Object","::Resm::AccessSession","::Resm::ResSessionBase"],-1,void 0,void 0,!1),a.AccessSessionPrx=o.defineProxy(r.ObjectPrx,a.AccessSession.ice_staticId,[a.ResSessionBasePrx]),o.defineOperations(a.AccessSession,a.AccessSessionPrx,{abilityReport:[,,,,,,[["Resm.ReportDictHelper"],["Resm.ConfMemberDictHelper"]],,,,]}),o.defineDictionary(a,"NetworkResult","NetworkResultHelper","Ice.IntHelper","Resm.NetworkStatus",!0,void 0,void 0,r.HashMap.compareEquals),a.NetworkAddress=o.defineStruct((function(e,t,n){this.ip=void 0!==e?e:"",this.port=void 0!==t?t:0,this.glacier2Port=void 0!==n?n:0}),!0,(function(e){e.writeString(this.ip),e.writeShort(this.port),e.writeShort(this.glacier2Port)}),(function(e){this.ip=e.readString(),this.port=e.readShort(),this.glacier2Port=e.readShort()}),5,!1),o.defineDictionary(a,"AccessAddrDict","AccessAddrDictHelper","Ice.IntHelper","Resm.NetworkAddress",!1,void 0,void 0,r.HashMap.compareEquals),a.AccessM=o.defineObject(void 0,r.Object,void 0,1,["::Ice::Object","::Resm::AccessM"],-1,void 0,void 0,!1),a.AccessMPrx=o.defineProxy(r.ObjectPrx,a.AccessM.ice_staticId,void 0),o.defineOperations(a.AccessM,a.AccessMPrx,{register:[,,,,,["Resm.AccessSessionPrx"],[[3],[7],[7],["Resm.IpAddressSeqHelper"]],[["Resm.DataDictHelper"]],[a.ResmError],,],locate:[,,,,,[3],[[3],[3],["Resm.NetworkResultHelper"],[7],[7]],,[a.ResmError],,],getAccessList:[,,,,,["Resm.AccessAddrDictHelper"],[[3]],,,,],sendCmd:[,,,,,,[[7],[7],[7],["Ice.ByteSeqHelper"]],[[7],["Ice.ByteSeqHelper"]],[a.ResmError],,]}),a.NetworkBandwidth=o.defineStruct((function(e,t){this.sendBandWidth=void 0!==e?e:0,this.recvBandWidth=void 0!==t?t:0}),!0,(function(e){e.writeInt(this.sendBandWidth),e.writeInt(this.recvBandWidth)}),(function(e){this.sendBandWidth=e.readInt(),this.recvBandWidth=e.readInt()}),8,!0),o.defineDictionary(a,"FNBandwidthDict","FNBandwidthDictHelper","Ice.StringHelper","Resm.NetworkBandwidth",!1,void 0,void 0,r.HashMap.compareEquals),a.FnSession=o.defineObject(void 0,r.Object,[a.ResSessionBase],1,["::Ice::Object","::Resm::FnSession","::Resm::ResSessionBase"],-1,void 0,void 0,!1),a.FnSessionPrx=o.defineProxy(r.ObjectPrx,a.FnSession.ice_staticId,[a.ResSessionBasePrx]),o.defineOperations(a.FnSession,a.FnSessionPrx,{abilityReport:[,,,,,,[["Resm.ReportDictHelper"],["Resm.FNBandwidthDictHelper"]],,,,]}),a.FnM=o.defineObject(void 0,r.Object,void 0,1,["::Ice::Object","::Resm::FnM"],-1,void 0,void 0,!1),a.FnMPrx=o.defineProxy(r.ObjectPrx,a.FnM.ice_staticId,void 0),o.defineOperations(a.FnM,a.FnMPrx,{register:[,,,,,["Resm.FnSessionPrx"],[[3],[7],[7],["Resm.IpAddressSeqHelper"]],[["Resm.DataDictHelper"]],[a.ResmError],,]}),a.RouteType=o.defineEnum([["UNREACHABLE",0],["DIRECT",1],["FORWARD",2]]),a.RouteScore=o.defineEnum([["BROKEN",0],["BAD",1],["AVAILABLE",2],["PERFECT",3]]),o.defineSequence(a,"IntSeqHelper","Ice.IntHelper",!0),a.Route=o.defineStruct((function(e,t,n,r,i,o,c){this.type=void 0!==e?e:a.RouteType.UNREACHABLE,this.score=void 0!==t?t:a.RouteScore.BROKEN,this.srcIP=void 0!==n?n:"",this.dstIP=void 0!==r?r:"",this.fnNo=void 0!==i?i:0,this.srcFnIP=void 0!==o?o:"",this.dstFnIP=void 0!==c?c:""}),!0,(function(e){a.RouteType.__write(e,this.type),a.RouteScore.__write(e,this.score),e.writeString(this.srcIP),e.writeString(this.dstIP),e.writeInt(this.fnNo),e.writeString(this.srcFnIP),e.writeString(this.dstFnIP)}),(function(e){this.type=a.RouteType.__read(e),this.score=a.RouteScore.__read(e),this.srcIP=e.readString(),this.dstIP=e.readString(),this.fnNo=e.readInt(),this.srcFnIP=e.readString(),this.dstFnIP=e.readString()}),10,!1),o.defineDictionary(a,"RouteMap","RouteMapHelper","Ice.IntHelper","Resm.Route",!1,void 0,void 0,r.HashMap.compareEquals),a.RouteM=o.defineObject(void 0,r.Object,void 0,1,["::Ice::Object","::Resm::RouteM"],-1,void 0,void 0,!1),a.RouteMPrx=o.defineProxy(r.ObjectPrx,a.RouteM.ice_staticId,void 0),o.defineOperations(a.RouteM,a.RouteMPrx,{RouteAllocBatch:[,,,,,["Resm.RouteMapHelper"],[[3],[3],["Resm.IntSeqHelper"]],,,,],RouteAlloc:[,,,,,[a.Route],[[3],[3],[3],["Resm.IntSeqHelper"]],,,,],PathReport:[,,,,,,[[3],["Resm.PathStatusDictHelper"]],,,,],RouteMapGet:[,,,,,["Resm.RouteMapHelper"],[[3],[3]],,,,]}),a.McuSession=o.defineObject(void 0,r.Object,[a.ResSessionBase],1,["::Ice::Object","::Resm::McuSession","::Resm::ResSessionBase"],-1,void 0,void 0,!1),a.McuSessionPrx=o.defineProxy(r.ObjectPrx,a.McuSession.ice_staticId,[a.ResSessionBasePrx]),o.defineOperations(a.McuSession,a.McuSessionPrx,{abilityReport:[,,,,,,[["Resm.ReportDictHelper"]],,,,]}),a.McuM=o.defineObject(void 0,r.Object,void 0,1,["::Ice::Object","::Resm::McuM"],-1,void 0,void 0,!1),a.McuMPrx=o.defineProxy(r.ObjectPrx,a.McuM.ice_staticId,void 0),o.defineOperations(a.McuM,a.McuMPrx,{register:[,,,,,["Resm.McuSessionPrx"],[[3],[7],[7]],[["Resm.DataDictHelper"]],[a.ResmError],,],locate:[,,,,,[3],[[3]],,[a.ResmError],,]}),n.Resm=a}("undefined"!=typeof global&&global.process,"undefined"!=typeof global&&void 0!==global.process?n(4860):window.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?t:this)},3945:function(e,t,n){e=n.nmd(e),function(e,t,n){var r=t("ice").Ice,i=(r.__M,t("Trans/MSPub").MS),o=r.Slice;i.LanTerm=o.defineStruct((function(e,t){this.hostIP=void 0!==e?e:"",this.termID=void 0!==t?t:0}),!0,(function(e){e.writeString(this.hostIP),e.writeShort(this.termID)}),(function(e){this.hostIP=e.readString(),this.termID=e.readShort()}),3,!1),o.defineSequence(i,"TermSeqHelper","MS.LanTerm",!1),i.MSClient=o.defineObject(void 0,r.Object,void 0,1,["::Ice::Object","::MS::MSClient"],-1,void 0,void 0,!1),i.MSClientPrx=o.defineProxy(r.ObjectPrx,i.MSClient.ice_staticId,void 0),o.defineOperations(i.MSClient,i.MSClientPrx,{AudioAllocRaw:[,,,1,,[3],[[i.AudioStreamParam]],,,,],AudioAlloc:[,,,1,,[3],[[i.AudioStreamParam],[i.MediaStreamAddr]],,,,],VideoAllocRaw:[,,,1,,[3],[[i.VideoStreamParam],[1]],,,,],VideoAlloc:[,,,1,,[3],[[i.VideoStreamParam],[1],[i.MediaStreamAddr]],,,,],AudioAllocRawExt:[,,,1,,[3],[[i.AudioStreamParam],["MS.DictStrParamsHelper"]],,,,],AudioAllocRawExt2:[,,,1,,[3],[[i.AudioStreamParam],["MS.DictStrParamsHelper"]],[["MS.DictStrParamsHelper"]],,,],AudioAllocExt:[,,,1,,[3],[[i.AudioStreamParam],[i.MediaStreamAddr],["MS.DictStrParamsHelper"]],,,,],VideoAllocRawExt:[,,,1,,[3],[[i.VideoStreamParam],[1],["MS.DictStrParamsHelper"]],,,,],VideoAllocRawExt2:[,,,1,,[3],[[i.VideoStreamParam],[1],["MS.DictStrParamsHelper"]],[["MS.DictStrParamsHelper"]],,,],VideoAllocExt:[,,,1,,[3],[[i.VideoStreamParam],[1],[i.MediaStreamAddr],["MS.DictStrParamsHelper"]],,,,],Free:[,,,1,,,[[3]],,,,],ModifyPeerAddr:[,,,1,,,[[3],[i.MediaStreamAddr]],,,,],ModifyPeerAddrExt:[,,,1,,,[[3],["MS.DictStrParamsHelper"]],,,,],ModifyIOMode:[,,,1,,,[[3],[i.MediaStreamIOMode.__helper]],,,,],NotifyRTMPStreamPublishFinished:[,,,1,,,[[3]],,,,],StartLanThrough:[,,,1,,,[[3],[3],[7]],,,,],StopLanThrough:[,,,1,,,[[3]],,,,],LanDetect:[,,,1,,,[["MS.TermSeqHelper"]],,,,],EnableSendVideo2Internet:[,,,1,,,[[2]],,,,],DisableSendVideo2Internet:[,,,1,,,[[2]],,,,],EnableSendScreen2Internet:[,,,1,,,,,,,],DisableSendScreen2Internet:[,,,1,,,,,,,],EnableSendFilm2Internet:[,,,1,,,,,,,],DisableSendFilm2Internet:[,,,1,,,,,,,],EnableSendLive2Internet:[,,,1,,,,,,,],DisableSendLive2Internet:[,,,1,,,,,,,]}),i.ClientReport=o.defineObject(void 0,r.Object,void 0,1,["::Ice::Object","::MS::ClientReport"],-1,void 0,void 0,!1),i.ClientReportPrx=o.defineProxy(r.ObjectPrx,i.ClientReport.ice_staticId,void 0),o.defineOperations(i.ClientReport,i.ClientReportPrx,{UpdateClientIP:[,,,1,,,[[7],[3],[7]],,,,],ReportLanNeighbor:[,,,1,,,[["MS.TermSeqHelper"]],,,,],LanMediaStreamFail:[,,,1,,,[[3],[3],[7]],,,,],VideoResolutionReport:[,,,1,,,[[3],[3],[3]],,,,],MediaConnectionBreakReport:[,,,1,,,[[3]],,,,]}),n.MS=i}("undefined"!=typeof global&&global.process,"undefined"!=typeof global&&void 0!==global.process?n(3375):window.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?t:this)},4951:function(e,t,n){e=n.nmd(e),function(e,t,n){var r=t("ice").Ice,i=r.__M,o=r.Slice,a=i.module("MS");a.AudioTransType=o.defineEnum([["ATT_CORP_PRIV",0],["ATT_EIS_ENCRYPT",1],["ATT_RTP_STD",2],["ATT_RTMP",3]]),a.AudioCodecType=o.defineEnum([["ACT_PCMU",0],["ACT_PCMA",1],["ACT_G723",2],["ACT_G729",3],["ACT_AMRWB",4],["ACT_SPEEX",5],["ACT_AAC",6],["ACT_ISAC",7],["ACT_AAC_48K",8],["ACT_OPUS",9],["ACT_RESERV10",10],["ACT_RESERV11",11],["ACT_RESERV12",12],["ACT_RESERV13",13],["ACT_RESERV14",14],["ACT_NULL",15]]),a.MediaStreamIOMode=o.defineEnum([["MSIO_INACTIVE",0],["MSIO_SEND",1],["MSIO_RECV",2],["MSIO_SEND_RECV",3]]),a.AudioStreamParam=o.defineStruct((function(e,t,n,r,i){this.codecType=void 0!==e?e:a.AudioCodecType.ACT_PCMU,this.transType=void 0!==t?t:a.AudioTransType.ATT_CORP_PRIV,this.ioMode=void 0!==n?n:a.MediaStreamIOMode.MSIO_INACTIVE,this.mixerID=void 0!==r?r:0,this.shareListen=void 0!==i&&i}),!0,(function(e){a.AudioCodecType.__write(e,this.codecType),a.AudioTransType.__write(e,this.transType),a.MediaStreamIOMode.__write(e,this.ioMode),e.writeInt(this.mixerID),e.writeBool(this.shareListen)}),(function(e){this.codecType=a.AudioCodecType.__read(e),this.transType=a.AudioTransType.__read(e),this.ioMode=a.MediaStreamIOMode.__read(e),this.mixerID=e.readInt(),this.shareListen=e.readBool()}),8,!1),a.VideoContentType=o.defineEnum([["VCT_CAMERA",0],["VCT_SCREEN",1],["VCT_FILM",2],["VCT_LIVE",3]]),a.VideoStreamParam=o.defineStruct((function(e,t,n,r,i,o,c,s){this.contentType=void 0!==e?e:a.VideoContentType.VCT_CAMERA,this.srcTermID=void 0!==t?t:0,this.cameraID=void 0!==n?n:0,this.ioMode=void 0!==r?r:a.MediaStreamIOMode.MSIO_INACTIVE,this.attachToMSID=void 0!==i?i:0,this.subscribeFlag=void 0!==o&&o,this.isPeerSourceTerm=void 0!==c&&c,this.screenAuthKey=void 0!==s?s:""}),!0,(function(e){a.VideoContentType.__write(e,this.contentType),e.writeShort(this.srcTermID),e.writeShort(this.cameraID),a.MediaStreamIOMode.__write(e,this.ioMode),e.writeInt(this.attachToMSID),e.writeBool(this.subscribeFlag),e.writeBool(this.isPeerSourceTerm),e.writeString(this.screenAuthKey)}),(function(e){this.contentType=a.VideoContentType.__read(e),this.srcTermID=e.readShort(),this.cameraID=e.readShort(),this.ioMode=a.MediaStreamIOMode.__read(e),this.attachToMSID=e.readInt(),this.subscribeFlag=e.readBool(),this.isPeerSourceTerm=e.readBool(),this.screenAuthKey=e.readString()}),13,!1),a.NetworkAddress=o.defineStruct((function(e,t){this.ip=void 0!==e?e:"",this.port=void 0!==t?t:0}),!0,(function(e){e.writeString(this.ip),e.writeShort(this.port)}),(function(e){this.ip=e.readString(),this.port=e.readShort()}),3,!1),a.MediaStreamAddr=o.defineStruct((function(e,t){this.netAddr=void 0!==e?e:new a.NetworkAddress,this.MSID=void 0!==t?t:0}),!0,(function(e){a.NetworkAddress.write(e,this.netAddr),e.writeInt(this.MSID)}),(function(e){this.netAddr=a.NetworkAddress.read(e,this.netAddr),this.MSID=e.readInt()}),7,!1),a.ConferenceInfo=o.defineStruct((function(e,t,n,r){this.confId=void 0!==e?e:0,this.isPeerTerminal=void 0!==t&&t,this.peerTermId=void 0!==n?n:0,this.peerTermName=void 0!==r?r:""}),!0,(function(e){e.writeInt(this.confId),e.writeBool(this.isPeerTerminal),e.writeShort(this.peerTermId),e.writeString(this.peerTermName)}),(function(e){this.confId=e.readInt(),this.isPeerTerminal=e.readBool(),this.peerTermId=e.readShort(),this.peerTermName=e.readString()}),8,!1),o.defineDictionary(a,"DictStrParams","DictStrParamsHelper","Ice.StringHelper","Ice.StringHelper",!1,void 0,void 0),n.MS=a}("undefined"!=typeof global&&global.process,"undefined"!=typeof global&&void 0!==global.process?n(3375):window.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?t:this)},5481:function(e,t,n){e=n.nmd(e),function(e,t,n){var r=t("ice").Ice,i=r.__M,o=r.Slice,a=i.module("WhiteBoard");a.WBConferenceError=o.defineUserException((function(e,t,n){r.UserException.call(this,n),this.error=void 0!==e?e:0,this.reason=void 0!==t?t:""}),r.UserException,"WhiteBoard::WBConferenceError",(function(e){e.writeInt(this.error),e.writeString(this.reason)}),(function(e){this.error=e.readInt(),this.reason=e.readString()}),!1,!1),a.WhiteBoardCtrl2_V4=o.defineObject(void 0,r.Object,void 0,1,["::Ice::Object","::WhiteBoard::WhiteBoardCtrl2_V4"],-1,void 0,void 0,!1),a.WhiteBoardCtrl2_V4Prx=o.defineProxy(r.ObjectPrx,a.WhiteBoardCtrl2_V4.ice_staticId,void 0),o.defineOperations(a.WhiteBoardCtrl2_V4,a.WhiteBoardCtrl2_V4Prx,{sendCmd:[,,,1,,,[[7],[7],[7],["Ice.ByteSeqHelper"]],[[7],["Ice.ByteSeqHelper"]],[a.WBConferenceError],,]}),n.WhiteBoard=a}("undefined"!=typeof global&&global.process,"undefined"!=typeof global&&void 0!==global.process?n(2598):window.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?t:this)},3623:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,c(r.key),r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}n.d(t,{Z:()=>f});var s=function(){return a((function e(){i(this,e),this.serverAddr="",this.wbServer=""}),[{key:"setServerAddr",value:function(e){this.serverAddr=e}},{key:"getServerAddr",value:function(){return this.serverAddr}}])}(),l=function(){return a((function e(){i(this,e),this.UserName="",this.UserPswd=""}),[{key:"setAuth",value:function(e){e.UserName&&(this.UserName=e.UserName),e.UserPswd&&(this.UserPswd=e.UserPswd)}},{key:"getAuth",value:function(){return{UserName:this.UserName,UserPswd:this.UserPswd}}}])}(),u=function(){return a((function e(){i(this,e),this.initData()}),[{key:"initData",value:function(){this.storageKey="CRRTCSDK_UserInfoHistory",this.historyList=JSON.parse(this.getStorage(this.storageKey)||"[]")}},{key:"getUserHistory",value:function(e,t,n,r){var i=this.historyList.find((function(n){return n.meetID==e&&n.userID==t}));return!!i&&i.myDetail}},{key:"setUserHistory",value:function(e,t,n,r,i){if(null==this.historyList.find((function(n){return n.meetID==e&&n.userID==t}))){var o={meetID:e,userID:t,memberID:n,memberType:r,myDetail:i};this.historyList.push(o),this.setStorage(this.storageKey,JSON.stringify(this.historyList))}}},{key:"setStorage",value:function(e,t){window.localStorage.setItem(e,t)}},{key:"getStorage",value:function(e){return window.localStorage.getItem(e)}}])}(),d=function(){return a((function e(){i(this,e)}),[{key:"setUserInfo",value:function(e,t){var n=JSON.parse(localStorage.getItem("CRRTCSDK_UserInfo"))||[],r=n.find((function(t){return t.nickname==e}));r?r.userID=t:n.push({nickname:e,userID:t}),localStorage.setItem("CRRTCSDK_UserInfo",JSON.stringify(n))}},{key:"getUserInfo",value:function(e){var t=(JSON.parse(localStorage.getItem("CRRTCSDK_UserInfo"))||[]).find((function(t){return t.nickname==e}));return t?t.userID:""}}])}();const f={server:new s,auth:new l,userInfoHistory:new u,userInfo:new d}},2091:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(4536);function i(e){var t=e.dataType||"json",n=e.type||"get",i=e.data||{};if("jsonp"==t){var o=document.getElementsByTagName("body")[0],a=e.url||"",c="CRjsonp".concat(r.Z.generate_uuid().replace(/-/g,""));e.jsonp?i[e.jsonp]=c:i.callback=c;var s="";for(var l in i)s+=encodeURIComponent(l)+"="+encodeURIComponent(i[l])+"&";a+="?"+s;var u=document.createElement("script");u.src=a,o.appendChild(u),window[c]=function(){e.success&&e.success.apply(this,arguments),o.removeChild(u),window[c]=null,delete window[c]},u.onerror=function(t){e.error&&e.error.apply(this,arguments),console.error("[Callsvr] server error:"+a),console.error(t),o.removeChild(u),window[c]=null,delete window[c]}}else{var d;if((d=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")).timeout=e.timeout?e.timeout:5e3,"GET"==n||"get"==n){var f=function(e){if("string"==typeof e)return e;var t=[];for(var n in e){var r=encodeURIComponent(e[n]);t.push(n+"="+r)}return t.join("&")}(i);a=e.url+"?"+f;try{if(d.open(n,a,null==e.async||e.async),e.header)for(var h in e.header)d.setRequestHeader(h,e.header[h]);d.send(null)}catch(t){e.error&&e.error(d)}}else if("POST"==n||"post"==n){f=function(e){if("string"==typeof e)return e;var t=[];for(var n in e)t.push(n+"="+e[n]);return t.join("&")}(i);try{if(d.open(n,e.url,null==e.async||e.async),"json"===t?d.setRequestHeader("Content-Type","application/json;charset=UTF-8"):d.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8"),e.header)for(var h in e.header)d.setRequestHeader(h,e.header[h]);d.send(f)}catch(t){e.error&&e.error(d)}}d.onreadystatechange=function(){if(4==d.readyState)if(200==d.status&&e.success)if("text"==t)e.success(d.responseText,"success");else{try{var n=JSON.parse(d.responseText)}catch(e){CRVideo_LoginFail.target(202,CRVideo.LoginParam.cookie),CRVideo_UploadingLog(),console.error(e)}e.success(n||d.responseText)}else e.error&&e.error(d)}}}},4491:()=>{window.CRVideo_ERR_DEF={NOERR:0,UNKNOWERR:1,OUTOF_MEM:2,INNER_ERR:3,MISMATCHCLIENTVER:4,MEETPARAM_ERR:5,ERR_DATA:6,ANCTPSWD_ERR:7,SERVER_EXCEPTION:8,LOGINSTATE_ERROR:9,SDK_USER_BEEN_KICKOUT:10,SDK_NOT_INIT:11,SDK_NOT_LOGIN:12,SDK_BASE64_COV_ERR:13,SDK_CUSTOMAUTH_NOINFO:14,SDK_CUSTOMAUTH_NOTSUPPORT:15,SDK_CUSTOMAUTH_EXCEPTION:16,SDK_CUSTOMAUTH_FAILED:17,SDK_TOKEN_TIMEOUT:18,SDK_TOKEN_AUTHINFOERR:19,SDK_TOKEN_APPIDNOTEXIST:20,SDK_TOKEN_AUTH_FAILED:21,SDK_TOKEN_NOTTOKENTYPE:22,NETWORK_INITFAILED:200,NO_SERVERINFO:201,NOSERVER_RSP:202,CREATE_CONN_FAILED:203,SOCKETEXCEPTION:204,SOCKETTIMEOUT:205,FORCEDCLOSECONNECTION:206,CONNECTIONLOST:207,VOICEENG_INITFAILED:208,SDK_SSL_ERR:209,QUE_ID_INVALID:400,QUE_NOUSER:401,QUE_USER_CANCELLED:402,QUE_SERVICE_NOT_START:403,ALREADY_OTHERQUE:404,INVALID_CALLID:600,ERR_CALL_EXIST:601,ERR_BUSY:602,ERR_OFFLINE:603,ERR_NOANSWER:604,ERR_USER_NOT_FOUND:605,ERR_REFUSE:606,MEETNOTEXIST:800,AUTHERROR:801,MEMBEROVERFLOWERROR:802,RESOURCEALLOCATEERROR:803,MEETROOMLOCKED:804,BALANCELESSERROR:805,SEVICE_NOTENABLED:806,ALREADYLOGIN:807,SDK_MIC_NORIGHT:808,SDK_MIC_BEING_USED:809,SDK_MIC_UNKNOWERR:810,SDK_SPK_NORIGHT:811,SDK_SPK_BEING_USED:812,SDK_SPK_UNKNOWERR:813,CATCH_SCREEN_ERR:900,RECORD_MAX:901,RECORD_NO_DISK:902,RECORD_SIZE_ERR:903,SDK_CFG_RESTRICTED:904,SDK_FILE_ERR:905,SDK_RECORDSTARTED:906,SENDFAIL:1e3,CONTAIN_SENSITIVEWORDS:1001,SENDCMD_LARGE:1100,SENDBUFFER_LARGE:1101,SENDDATA_TARGETINVALID:1102,SENDFILE_FILEINERROR:1103,TRANSID_INVALID:1104,RECORDFILE_STATE_ERR:1200,RECORDFILE_NOT_EXIST:1201,IPCAM_URLERR:1300,IPCAM_ALREADYEXIST:1301,IPCAM_TOOMUCH:1302,SDK_FILE_NOT_EXIST:1400,SDK_FILE_READ_ERR:1401,SDK_FILE_WRITE_ERR:1402,SDK_FILE_OPERATOR_ERR:1403,WEB_OCX_NOTINSTALLED:2001,WEB_BROWER_NOTUPPORTED:2002,OCX_VERSION_NOTUPPORTED:2003,DEVICE_UNKNOW_ERR:8001,DEVICE_NOTALLOWED_ERR:8002,DEVICE_UPDATELIST_ERR:8003,DEVICE_HAVENOTAPI_ERR:8004,DEVICE_LOWVER_ERR:8006,DEVICE_OPEN_DEVICE_ERR:8007},window.CRVideo_ASTATUS={AUNKNOWN:0,ANULL:1,ACLOSE:2,AOPEN:3,AOPENING:4},window.CRVideo_VSTATUS={VUNKNOWN:0,VNULL:1,VCLOSE:2,VOPEN:3,VOPENING:4},window.CRVideo_VIDEO_SHOW_SIZE={VIDEO_SZ_80:1,VSIZE_SZ_128:2,VSIZE_SZ_160:3,VSIZE_SZ_192:4,VSIZE_SZ_256:5,VSIZE_SZ_288:6,VSIZE_SZ_320:7,VSIZE_SZ_360:8,VSIZE_SZ_400:9,VSIZE_SZ_480:10,VSIZE_SZ_576:11,VSIZE_SZ_720:12,VSIZE_SZ_1080:13},window.CRVideo_VIDEO_FORMAT={VFMT_YUV420P:0,VFMT_ARGB32:1},window.CRVideo_REC_VCONTENT_TYPE={RECVTP_VIDEO:0,RECVTP_PIC:1,RECVTP_SCREEN:2,RECVTP_MEDIA:3,RECVTP_TIMESTAMP:4,RECVTP_REMOTE_SCREEN:5},window.CRVideo_RECORD_STATE={NO_RECORD:0,STARTING:1,RECORDING:2,PAUSED:3,STOPPING:4},window.CRVideo_RECORD_AUDIO_TYPE={REC_AUDIO_TYPE_NULL:0,REC_AUDIO_TYPE_LOC:1,REC_AUDIO_TYPE_OTHER:2,REC_AUDIO_TYPE_ALL:3},window.CRVideo_RECORD_VIDEO_TYPE={REC_VCONTENT_NULL:0,RECORD_VIDEO_TYPE_SCREEN:1,REC_VCONTENT_VIDEOS:3},window.CRVideo_RECORD_VLAYOUT={REC_VLAYOUT_GRID:0,REC_VLAYOUT_PIP:1},window.CRVideo_ENCODE_TYPE={ENC_H264:1},window.CRVideo_ENCODE_TYPE["ENC_".concat(window.__CRNameUP)]=0,window.CRVideo_MOUSE_MSG_TYPE={MOUSE_MOVE:0,MOUSE_DOWN:1,MOUSE_UP:2,MOUSE_DBCLICK:3},window.CRVideo_MOUSE_KEY_TYPE={MOUSEKEY_NULL:0,MOUSEKEY_L:1,MOUSEKEY_M:2,MOUSEKEY_R:3,MOUSEKEY_WHEEL:4,MOUSEKEY_X:5},window.CRVideo_KEY_MSG_TYPE={KEYT_DWON:0,KEYT_UP:1},window.CRVideo_MAIN_PAGE_TYPE={MAINPAGE_VIDEOWALL:0,MAINPAGE_SHARE:1,MAINPAGE_WHITEBOARD:2},window.CRVideo_VIDEOLAYOUTMODE={VLO_1v1_M:0,VLO_WALL1_M:1,VLO_WALL2:2,VLO_WALL4:3,VLO_WALL5_M:4,VLO_WALL6_M:5,VLO_WALL9:6,VLO_WALL13_M:7,VLO_WALL16:8,VLO_WALL25:9},window.CRVideo_HTTP_TRANSFER_STAT={HTTPFS_NULL:0,HTTPFS_QUEUE:1,HTTPFS_TRANSFERING:2,HTTPFS_FINISHED:3},window.CRVideo_HTTP_TRANSFER_RESULT={HTTPR_Success:0,HTTPR_InnerErr:1,HTTPR_ParamErr:2,HTTPR_NetworkFail:3,HTTPR_NetworkTimeout:4,HTTPR_FileOperationFail:5,HTTPR_PathNotSupprot:6,HTTPR_FileTransfering:7,HTTPR_HTTPERR_BEGIN:1e3,HTTPR_HTTPERR_END:1999},window.CRVideo_ToolBarUI={BTN_Pause:0,BTN_Stop:1},window.CRVideo_REC_DATATYPE={REC_AV_DEFAULT:0,REC_AUDIO_LOC:1,REC_AUDIO_OTHER:2,REC_VIDEO:3}},5089:()=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,n(i.key),i)}}function n(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,n||"default");if("object"!=e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==e(n)?n:n+""}var r={0:"SDK_SUCCESS",1:"SDK_UNSUPPORT",2:"SDK_ANCT_NOTEXIST",3:"SDK_USR_PSWD_ERR",4:"SDK_MEET_PSWD_ERR",5:"SDK_UNKNOW_ERR",6:"SDK_MEET_NOTEXIST",7:"SDK_MEET_START_ERR",8:"SDK_CREATEMEETINGFAILED",9:"SDK_THEME_EMPTY_ERR",10:"SDK_NOUSED",11:"SDK_CMEET_NO_PERMISSION",12:"SDK_FIXMEET_NOBALANCE",13:"SDK_FIXMEETING_TOOMANY",14:"SDK_CONFERENCELINK_ERR",15:"SDK_NICKNAMEEMPTY_ERR",16:"SDK_CONTINUOUSFAILURE",17:"SDK_MEETINGNOTSTART",18:"SDK_MEETINGOVER",19:"SDK_MEETID_INVALID",21:"SDK_ACCOUNT_INVALID",22:"SDK_MEET_BUS_USED",23:"SDK_VIN_NO_PERMISSION",26:"SDK_MEET_NO_TV_MEETING",27:"SDK_OEM_ANCT_MISMATCH",30:"SDK_VERSION_NOTMATCH",31:"SDK_USER_EXISTS",32:"SDK_USER_NOT_EXISTS",33:"SDK_LOGINSTATE_ERROR",34:"SDK_USER_BEEN_KICKOUT",38:"SDK_ONLY_INVITER",40:"WEB_ACCOUNT_EXPIRED",71:"SDK_CUSTOMAUTH_NOINFO",72:"SDK_CUSTOMAUTH_NOTSUPPORT",73:"SDK_CUSTOMAUTH_EXCEPTION",74:"SDK_CUSTOMAUTH_FAILED",81:"SDK_TOKEN_AUTHINFOERR",83:"SDK_TOKEN_AUTHCHECKERR",84:"SDK_TOKEN_AUTHEXCEPTION",85:"SDK_TOKEN_AUTHINFOTIMEOUT",86:"SDK_TOKEN_APPIDNOTEXIST",87:"SDK_TOKEN_NOTTOKENTYPE",500:"SDK_NOT_LOGIN",1e4:"HTTP_ERR_BEGIN",10999:"HTTP_ERR_END",11e3:"SDK_SND_DATA_ERR",11001:"SDK_RSP_DATA_ERR",2e4:"CALL_ERR_BEGIN",20001:"CALL_ERR_UNKNOW",20002:"CALL_ERR_CALL_NOT_FOUND",20003:"CALL_ERR_CALL_EXIST",20004:"CALL_ERR_BUSY",20005:"CALL_ERR_OFFLINE",20006:"CALL_ERR_NOANSWER",20007:"CALL_ERR_PARAM_INVALID",20008:"CALL_ERR_USER_NOT_FOUND",20009:"CALL_ERR_PWD_INVALID",20010:"CALL_ERR_BUSY_MEETING",20011:"CALL_ERR_REFUSE",20012:"CALL_SEND_FAILED",20013:"CALL_RSP_DATA_ERR",20014:"CALL_ERR_SESSIONERR",20015:"CALL_ERR_ICEPRXNULL",20016:"CALL_SENDDATA_TARGETINVALID",20100:"RSP_CODE_QUE_ID_INVALID",20101:"RSP_CODE_QUE_NOUSER",20102:"RSP_CODE_QUE_USER_CANCELLED",20103:"RSP_CODE_QUE_SERVICE_NOT_START",20104:"RSP_CODE_QUE_QUEUING",3e4:"CALL_SENDCMD_LARGE",30001:"CALL_SENDBUFFER_LARGE",30002:"CALL_SENDFILE_FILEINERROR",30003:"CALL_TRANSID_INVALID"},i={CRVIDEOSDK_NOERR:0,CRVIDEOSDK_UNKNOWERR:1,CRVIDEOSDK_OUTOF_MEM:2,CRVIDEOSDK_INNER_ERR:3,CRVIDEOSDK_MISMATCHCLIENTVER:4,CRVIDEOSDK_MEETPARAM_ERR:5,CRVIDEOSDK_ERR_DATA:6,CRVIDEOSDK_ANCTPSWD_ERR:7,CRVIDEOSDK_SERVER_EXCEPTION:8,CRVIDEOSDK_LOGINSTATE_ERROR:9,CRVIDEOSDK_USER_BEEN_KICKOUT:10,CRVIDEOSDK_NOT_INIT:11,CRVIDEOSDK_NOT_LOGIN:12,CRVIDEOSDK_BASE64_COV_ERR:13,WEB_ACCOUNT_EXPIRED:23,CRVIDEOSDK_CUSTOMAUTH_NOINFO:14,CRVIDEOSDK_CUSTOMAUTH_NOTSUPPORT:15,CRVIDEOSDK_CUSTOMAUTH_EXCEPTION:16,CRVIDEOSDK_CUSTOMAUTH_FAILED:17,CRVIDEOSDK_TOKEN_TIMEOUT:18,CRVIDEOSDK_TOKEN_AUTHINFOERR:19,CRVIDEOSDK_TOKEN_APPIDNOTEXIST:20,CRVIDEOSDK_TOKEN_AUTH_FAILED:21,CRVIDEOSDK_TOKEN_NOTTOKENTYPE:22,CRVIDEOSDK_API_NO_PERMISSION:23,CRVIDEOSDK_NETWORK_INITFAILED:200,CRVIDEOSDK_NO_SERVERINFO:201,CRVIDEOSDK_NOSERVER_RSP:202,CRVIDEOSDK_CREATE_CONN_FAILED:203,CRVIDEOSDK_SOCKETEXCEPTION:204,CRVIDEOSDK_SOCKETTIMEOUT:205,CRVIDEOSDK_FORCEDCLOSECONNECTION:206,CRVIDEOSDK_CONNECTIONLOST:207,CRVIDEOSDK_VOICEENG_INITFAILED:208,CRVIDEOSDK_SSL_ERR:209,CRVIDEOSDK_QUE_ID_INVALID:400,CRVIDEOSDK_QUE_NOUSER:401,CRVIDEOSDK_QUE_USER_CANCELLED:402,CRVIDEOSDK_QUE_SERVICE_NOT_START:403,CRVIDEOSDK_ALREADY_OTHERQUE:404,CRVIDEOSDK_INVALID_CALLID:600,CRVIDEOSDK_ERR_CALL_EXIST:601,CRVIDEOSDK_ERR_BUSY:602,CRVIDEOSDK_ERR_OFFLINE:603,CRVIDEOSDK_ERR_NOANSWER:604,CRVIDEOSDK_ERR_USER_NOT_FOUND:605,CRVIDEOSDK_ERR_REFUSE:606,CRVIDEOSDK_MEETNOTEXIST:800,CRVIDEOSDK_AUTHERROR:801,CRVIDEOSDK_MEMBEROVERFLOWERROR:802,CRVIDEOSDK_RESOURCEALLOCATEERROR:803,CRVIDEOSDK_MEETROOMLOCKED:804,CRVIDEOSDK_BALANCELESSERROR:805,CRVIDEOSDK_SEVICE_NOTENABLED:806,CRVIDEOSDK_ALREADYLOGIN:807,CRVIDEOSDK_MIC_NORIGHT:808,CRVIDEOSDK_MIC_BEING_USED:809,CRVIDEOSDK_MIC_UNKNOWERR:810,CRVIDEOSDK_SPK_NORIGHT:811,CRVIDEOSDK_SPK_BEING_USED:812,CRVIDEOSDK_SPK_UNKNOWERR:813,CRVIDEOSDK_PIC_ISNULL:814,CRVIDEOSDK_CATCH_SCREEN_ERR:900,CRVIDEOSDK_RECORD_MAX:901,CRVIDEOSDK_RECORD_NO_DISK:902,CRVIDEOSDK_RECORD_SIZE_ERR:903,CRVIDEOSDK_CFG_RESTRICTED:904,CRVIDEOSDK_FILE_ERR:905,CRVIDEOSDK_RECORDSTARTED:906,CRVIDEOSDK_NOMORE_MCU:907,CRVIDEOSDK_SENDFAIL:1e3,CRVIDEOSDK_CONTAIN_SENSITIVEWORDS:1001,CRVIDEOSDK_NO_CHAT_PERMISSION:1002,CRVIDEOSDK_SENDCMD_LARGE:1100,CRVIDEOSDK_SENDBUFFER_LARGE:1101,CRVIDEOSDK_SENDDATA_TARGETINVALI:1102,CRVIDEOSDK_SENDFILE_FILEINERRO:1103,CRVIDEOSDK_TRANSID_INVALI:1104,CRVIDEOSDK_RECORDFILE_STATE_ERR:1200,CRVIDEOSDK_RECORDFILE_NOT_EXIST:1201,CRVIDEOSDK_RECORDFILE_UPLOAD_FAILED:1202,CRVIDEOSDK_RECORDFILE_DEL_FAILED:1203,CRVIDEOSDK_IPCAM_URLERR:1300,CRVIDEOSDK_IPCAM_ALREADYEXIST:1301,CRVIDEOSDK_IPCAM_TOOMANYCAM:1302,CRVIDEOSDK_FILE_NOT_EXIST:1400,CRVIDEOSDK_FILE_READ_ERR:1401,CRVIDEOSDK_FILE_WRITE_ERR:1402,CRVIDEOSDK_FILE_ALREADY_EXIST:1403,CRVIDEOSDK_FILE_OPERATOR_ERR:1404,CRVIDEOSDK_NETDISK_NOT_EXIST:1500,CRVIDEOSDK_NETDISK_PERMISSIONDENIED:1501,CRVIDEOSDK_NETDISK_INVALIDFILENAME:1502,CRVIDEOSDK_NETDISK_FILEALREADYEXISTS:1503,CRVIDEOSDK_NETDISK_FILEORDIRECTORYNOTEXISTS:1504,CRVIDEOSDK_NETDISK_FILENOTTRANSFORM:1505,CRVIDEOSDK_NETDISK_TRANSFORMFAILED:1506,CRVIDEOSDK_NETDISK_NOSPACE:1507,SDK_CMEET_NO_PERMISSION:70001,SDK_MEET_BUS_USED:70002,SDK_MEETINGNOTSTART:70003,SDK_ONLY_INVITER:70004};window.Err_Cover=function(e){switch(e){case"SDK_SUCCESS":return"CRVIDEOSDK_NOERR";case"SDK_UNKNOW_ERR":default:return"CRVIDEOSDK_UNKNOWERR";case"SDK_NOT_LOGIN":return"CRVIDEOSDK_NOT_LOGIN";case"SDK_UNSUPPORT":return"CRVIDEOSDK_MISMATCHCLIENTVER";case"SDK_ACCOUNT_INVALID":case"SDK_ANCT_NOTEXIST":case"SDK_USER_NOT_EXISTS":case"SDK_USR_PSWD_ERR":case"CALL_ERR_PWD_INVALID":return"CRVIDEOSDK_ANCTPSWD_ERR";case"SDK_LOGINSTATE_ERROR":return"CRVIDEOSDK_LOGINSTATE_ERROR";case"SDK_USER_BEEN_KICKOUT":return"CRVIDEOSDK_USER_BEEN_KICKOUT";case"SDK_CUSTOMAUTH_NOINFO":return"CRVIDEOSDK_CUSTOMAUTH_NOINFO";case"SDK_CUSTOMAUTH_NOTSUPPORT":return"CRVIDEOSDK_CUSTOMAUTH_NOTSUPPORT";case"SDK_CUSTOMAUTH_EXCEPTION":return"CRVIDEOSDK_CUSTOMAUTH_EXCEPTION";case"SDK_CUSTOMAUTH_FAILED":return"CRVIDEOSDK_CUSTOMAUTH_FAILED";case"SDK_MEET_PSWD_ERR":return"CRVIDEOSDK_AUTHERROR";case"SDK_MEETINGOVER":case"SDK_MEETID_INVALID":case"SDK_MEET_NO_TV_MEETING":case"SDK_MEET_NOTEXIST":return"CRVIDEOSDK_MEETNOTEXIST";case"SDK_CMEET_NO_PERMISSION":return"SDK_CMEET_NO_PERMISSION";case"SDK_MEETINGNOTSTART":return"SDK_MEETINGNOTSTART";case"SDK_ONLY_INVITER":return"SDK_ONLY_INVITER";case"SDK_VIN_NO_PERMISSION":return"CRVIDEOSDK_API_NO_PERMISSION";case"SDK_MEET_BUS_USED":return"SDK_MEET_BUS_USED";case"SDK_SND_DATA_ERR":return"CRVIDEOSDK_NOSERVER_RSP";case"SDK_RSP_DATA_ERR":case"CALL_RSP_DATA_ERR":return"CRVIDEOSDK_ERR_DATA";case"SDK_TOKEN_AUTHINFOERR":case"SDK_TOKEN_AUTHEXCEPTION":return"CRVIDEOSDK_TOKEN_AUTHINFOERR";case"SDK_TOKEN_AUTHCHECKERR":return"CRVIDEOSDK_TOKEN_AUTH_FAILED";case"SDK_TOKEN_AUTHINFOTIMEOUT":return"CRVIDEOSDK_TOKEN_TIMEOUT";case"SDK_TOKEN_APPIDNOTEXIST":return"CRVIDEOSDK_TOKEN_APPIDNOTEXIST";case"SDK_TOKEN_NOTTOKENTYPE":return"CRVIDEOSDK_TOKEN_NOTTOKENTYPE";case"CALL_ERR_CALL_NOT_FOUND":return"CRVIDEOSDK_INVALID_CALLID";case"CALL_ERR_CALL_EXIST":return"CRVIDEOSDK_ERR_CALL_EXIST";case"CALL_ERR_BUSY":case"CALL_ERR_BUSY_MEETING":return"CRVIDEOSDK_ERR_BUSY";case"CALL_ERR_OFFLINE":return"CRVIDEOSDK_ERR_OFFLINE";case"CALL_ERR_NOANSWER":return"CRVIDEOSDK_ERR_NOANSWER";case"CALL_ERR_PARAM_INVALID":return"CRVIDEOSDK_MEETPARAM_ERR";case"CALL_ERR_USER_NOT_FOUND":return"CRVIDEOSDK_ERR_USER_NOT_FOUND";case"CALL_ERR_REFUSE":return"CRVIDEOSDK_ERR_REFUSE";case"CALL_ERR_ICEPRXNULL":return"CRVIDEOSDK_CREATE_CONN_FAILED";case"CALL_SENDDATA_TARGETINVALID":return"CRVIDEOSDK_SENDDATA_TARGETINVALID";case"CALL_SENDCMD_LARGE":return"CRVIDEOSDK_SENDCMD_LARGE";case"CALL_SENDBUFFER_LARGE":return"CRVIDEOSDK_SENDBUFFER_LARGE";case"CALL_TRANSID_INVALID":return"CRVIDEOSDK_TRANSID_INVALID";case"CALL_SENDFILE_FILEINERROR":return"CRVIDEOSDK_SENDFILE_FILEINERROR";case"CALL_ERR_SESSIONERR":return"CRVIDEOSDK_CONNECTIONLOST";case"CALL_SEND_FAILED":return"CRVIDEOSDK_SOCKETTIMEOUT";case"RSP_CODE_QUE_ID_INVALID":return"CRVIDEOSDK_QUE_ID_INVALID";case"RSP_CODE_QUE_NOUSER":return"CRVIDEOSDK_QUE_NOUSER";case"RSP_CODE_QUE_USER_CANCELLED":return"CRVIDEOSDK_QUE_USER_CANCELLED";case"RSP_CODE_QUE_SERVICE_NOT_START":return"CRVIDEOSDK_QUE_SERVICE_NOT_START";case"RSP_CODE_QUE_QUEUING":return"CRVIDEOSDK_ALREADY_OTHERQUE";case"WEB_ACCOUNT_EXPIRED":return"WEB_ACCOUNT_EXPIRED"}},window.ICE_SDK_ERR=function(e){return 0==e?0:i[Err_Cover(r[2e4+e])]},window.WEB_SDK_ERR=function(e){return 0==e?0:i[Err_Cover(r[e])]};var o=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},(n=[{key:"Parse",value:function(e){var t={err:e.toString(),errCode:1,errDesc:"未知错误"};return e instanceof Conference.RoomLockedError&&(t.errCode=804,t.errDesc="房间已加锁"),e instanceof Conference.SeviceNotEnabled&&(t.errCode=806,t.errDesc="业务权限未开启"),e instanceof Conference.NoResourceForMIC&&(t.errCode=808,t.errDesc="没有开麦权限"),e instanceof Conference.NoResourceForMIC&&(t.errCode=816,t.errDesc="开麦数达到上限"),e instanceof Conference.SrvRecordStarted&&(t.errCode=906,t.errDesc="录制已开启"),t}}])&&t(e.prototype,n),r&&t(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n,r}();window.__Rtc.CRCONFERR=new o},7143:()=>{window.__Rtc={},function(){for(var e=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,n){var r=(new Date).getTime(),i=Math.max(0,16.7-(r-e)),o=window.setTimeout((function(){t(r+i)}),i);return e=r+i,o}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}(),Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),n=this,r=function(){},i=function(){return n.apply(this instanceof r&&e?this:e,t.concat(Array.prototype.slice.call(arguments)))};return r.prototype=this.prototype,i.prototype=new r,i}),window.Cr={},window.CRVideo={},Cr.CbProxy=function(e){this.name=e,this.callback=null},Cr.CbProxy.prototype.call=function(e){try{this.callback&&"function"==typeof this.callback&&this.callback.apply(null,e)}catch(e){console.error(e)}},Cr.MsgInfo=function(e){this.type=e.type,this.index=e.index,this.msg=e.msg,this.head=e.head,this.sendTime=e.sendTime,this.targetNickname=e.targetNickname,this.targetTermId=e.targetTermId,this.srcNickname=e.srcNickname,this.srcTermId=e.srcTermId,this.ishost=e.ishost},Cr.MeetInfo=function(e){this.termId=e.termId,this.nickname=e.nickname,this.userId=e.userId,this.bindId=e.bindId,this.openedCamIDs=e.openedCamIDs,this.activeMembers=e.activeMembers,this.myDetail=e.myDetail,this.serverTime=e.serverTime,this.isBegan=e.isBegan,this.countdown=e.countdown,this.mainVideoTermID=e.mainVideoTermID,this.wbDescibes=e.wbDescibes,this.ServerUTCTime=e.ServerUTCTime,this.bAllowWall=e.bAllowWall,this.bFull=e.bFull,this.bRoomLocked=e.bRoomLocked,this.curMainTab=e.curMainTab,this.curSubTab=e.curSubTab,this.option=e.option,this.lastElemValue=e.lastElemValue,this.lastTabValue=e.lastTabValue,this.confInfo=e.confInfo,this.windowMode=e.windowMode,this.meetID=e.meetID},Cr.Quesask=function(e){this.typeID=e.typeID,this.asktime=e.asktime,this.termID=e.termID,this.content=e.content,this.nickname=e.nickname},Cr.QuesDeal=function(e){this.state=e.state._value,this.replyCon=e.replyCon,this.replyTermId=e.replyTermId,this.replyTime=e.replyTime,this.publishTermID=e.publishTermID,this.publishTime=e.publishTime,this.delTermID=e.delTermID,this.delTime=e.delTime},Cr.QuesInf=function(e){this.quesID=e.quesID,this.ask=new Cr.Quesask(e.ask),this.deal=new Cr.QuesDeal(e.deal)},Cr.ScreenShareInfo=function(e){this.scrSviceProxy=e.scrSviceProxy,this.authKey=e.authKey,this.allowCtrlReq=e.allowCtrlReq,this.state=e.state,this.sharer=e.sharer,this.controller=e.controller,this.allowOtherMark=e.allowOtherMark},Cr.MediaInfo=function(e){this.termid=e.termid,this.MEDIA_STATE=e.MEDIA_STATE,this.mediaName=e.mediaName},Cr.ElementID=function(e){this.ownerID=e.ownerID,this.ID=e.ID},Cr.ElementData=function(e){this.eID=e.eID,this.orderId=e.orderId,this.left=e.left,this.top=e.top,this.type=e.type,this.noused=e.noused,this.data=e.data},Cr.AsyncResult=function(){},Cr.AsyncResult.prototype.then=function(e){return this.__child=new Cr.AsyncResult,this.__complete=e,this.__child},Cr.AsyncResult.prototype.complete=function(e){var t=function(){this.next(e),this.__parent&&"function"==typeof this.__parent.next&&this.__parent.next(e)}.bind(this);setTimeout(t,0)},Cr.AsyncResult.prototype.next=function(e){if(this.__complete&&"function"==typeof this.__complete){var t=this.__complete.apply(this,e);t&&this.__child&&(t.__parent=this.__child)}},Cr.AsyncResult2As=function(e,t){this.id=e,this.proxy=t},Cr.AsyncResult2As.prototype.complete=function(e){e.unshift(this.id),this.proxy.callback.apply(this.proxy,e)},Cr.Swf={__callbackId_generator:0,__generateCallbackId:function(){return Cr.Swf.__callbackId_generator++},__callbackAsyncDict:{},__registerCallbackAsync:function(e,t){if(Cr.Swf.__callbackAsyncDict[e])throw"register swf callback error:duplicate id";Cr.Swf.__callbackAsyncDict[e]=t},asyncAsCallback:function(){if(!(arguments.length>=1))throw"swf callback error:arguments deficient";for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];var n=e.shift(),r=Cr.Swf.__callbackAsyncDict[n];if(!r)throw"swf callback error:async not exist";r.complete(e)},callJs:function(){if(arguments.length>=2){for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];if(cmd=e.shift(),id=e.shift(),cmdObj=Cr.Swf.__asCallbackCmdDict[cmd],cmdObj){var n=cmdObj.fun;cmdObj.proxy;n.call(null,e)}}},__asCallbackCmdDict:{},addAsCallback:function(e,t,n){if(Cr.Swf.__asCallbackCmdDict[e])throw"register swf callback error:duplicate id";Cr.Swf.__asCallbackCmdDict[e]={fun:t,proxy:n}}}},2408:()=>{},6111:()=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}CRVideo.logAry=[],CRVideo.browserInfo="";var t=new function(){var n=this;n.logFilename="sdkDebug.log",n.output="",this.getLog=function(){return n.output},this.clear=function(){n.output=""},this.downloadLog=function(){var e="data:text/plain;charset=utf-8,",t=n.getLog();e+=encodeURIComponent(t);var r=document.createElement("a");r.href=e,r.target="_blank",r.download=n.logFilename,document.body.appendChild(r),r.click(),r.remove()},this.log=function(r,i,o){var a="";i=i||"INF";if(null!=r)if("object"==("undefined"==typeof object?"undefined":e(object)))var c=JSON.stringify(r);else c=r;var s=new Date;a+=n.formatTimestamp(s),a+="["+i+"] ",a+=c,n.output+=a+"\n",(n.output.length/1024).toFixed(2)>500&&CRVideo_UploadingLog(),(n.output.length/1024).toFixed(2)>1e4&&t.clear()},this.formatTimestamp=function(e){e.getFullYear();var t=e.getDate();return"["+("0"+(e.getMonth()+1)).slice(-2)+"-"+t+" "+Number(e.getHours())+":"+("0"+e.getMinutes()).slice(-2)+":"+("0"+e.getSeconds()).slice(-2)+":"+e.getMilliseconds()+"] "}};window.console.crlog=function(e,n,r){return function(e,n,r){console.log(e),t.log(e,n,r)}},window.CRVideo_EnableLog2File=function(e,n,r){CRVideo.isUploadLog=e,window.console.crlog=e&&n?function(e,n,r){window.console.log(e),t.log(e,n,r)}:e?t.log:n?console.log:function(){},r||(console.crlog("[LOG] Enable upload log: "+e),console.crlog("[LOG] Enable console log debug: "+n))},window.CRVideo_EnableLog2File(!0,!0,1),CRVideo.browserInfo=function(){var e="";if(navigator.userAgent.match(/AppleWebKit.*Mobile.*/)){e=/(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent)?"ios":/(Android)/i.test(navigator.userAgent)?"android":"mobile";var t=navigator.userAgent.toLowerCase();if("micromessenger"==t.match(/MicroMessenger/i))return e+"_WX";if("qq"==t.match(/QQ/i))return e+"_qq";if(t.indexOf("liebao")>0)return e+"_leibao";if(null!=t.match(/ubrowser/))return e+"_uc";if(t.indexOf("chrome")>0||t.indexOf("crios")>0)return e+"_chrome";if(t.indexOf("safari")>0)return e+"_safari"}else{var n=navigator.userAgent,r=n.indexOf("Opera")>-1,i=n.indexOf("compatible")>-1&&n.indexOf("MSIE")>-1&&!r,o=n.indexOf("Firefox")>-1,a=n.indexOf("Safari")>-1,c=n.indexOf("Chrome")>-1;if(o)return"PC_FF";if(r)return"PC_Opera";if(c){return function(e,t){var n=navigator.mimeTypes;for(var r in n)if(n[r][e]==t)return!0;return!1}("type","application/vnd.chromium.remoting-viewer")?"PC_360":"pc_chrome"}if(a)return"PC_Safari";if(i)return"IE"}}(),window.CRVideo_StartLogReport=function(){CRVideo.isUploadLog=1,CRVideo_UploadingReport()},window.CRVideo_StopLogReport=function(){CRVideo.isUploadLog=0},window.CRVideo_UploadingReport=function(){CRVideo_UploadingLog(),CRVideo.logReportTimer&&clearTimeout(CRVideo.logReportTimer),CRVideo.logReportTimer=setTimeout((function(){CRVideo_UploadingReport()}),3e4)},window.CRVideo_UploadingLog=function(){if(!CRVideo.logproxy)return __Rtc.postCmd.IceLogCreate();var e=t.getLog();t.clear();var n=new TextEncoder("utf-8").encode(e),r=new Zlib.Deflate(n).compress(),i=new Date,o=i.getFullYear(),a=i.getMonth()+1;a=String(a<10?"0"+a:a);var c=i.getDate();c=String(c<10?"0"+c:c);var s="/".concat(o,"-").concat(a,"-").concat(c,"/");if(CRVideo.isUploadLog&&CRVideo.LoginParam&&CRVideo.LoginParam.user_id){var l=JSON.parse(window.sessionStorage.getItem("CRVideo.LOCAL_KEY_logName"));if(l&&l.account==CRVideo.LoginParam.account&&l.user_id==CRVideo.LoginParam.user_id&&l.logMonth==a&&l.logDay==c&&l.browserInfo==CRVideo.browserInfo)var u="".concat(CRVideo.LoginParam.account).concat(s).concat(CRVideo.LoginParam.user_id,"_").concat(l.logUUID,"_webrtc_").concat(CRVideo.browserInfo,"_").concat(a).concat(c,".log");else u="".concat(CRVideo.LoginParam.account).concat(s).concat(CRVideo.LoginParam.user_id,"_").concat(CRVideo.logUUID,"_webrtc_").concat(CRVideo.browserInfo,"_").concat(a).concat(c,".log");console.crlog("[LOG] Log uploading =====> "+u),CRVideo.webLogDetail(0,u,r);var d={account:CRVideo.LoginParam.account,user_id:CRVideo.LoginParam.user_id,logUUID:CRVideo.logUUID,browserInfo:CRVideo.browserInfo,logMonth:a,logDay:c};window.sessionStorage.setItem("CRVideo.LOCAL_KEY_logName",JSON.stringify(d))}if(CRVideo.isUploadLog&&window.rtcProxy.crmt&&window.rtcProxy.crmt.WEBLOGCFG){var f="".concat(rtcProxy.crmt.MEET[0],"/").concat(rtcProxy.crmt.ACNT[3],"_").concat(localStorage.getItem("CRRTCSDK_Client_PC_ID")||Ice.generateUUID(),"_webrtc_").concat(CRVideo.browserInfo,"_").concat(a).concat(c,".log");console.crlog("[LOG] Log uploading =====> "+f),CRVideo.webLogDetail(0,f,r)}}},1911:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r={getJsCallServerInfo:"/servlet/getJsCallServerInfo",HandToken:"/servlet/HandToken",ClientCreateNetMeet:"/servlet/ClientCreateNetMeet",joinMeetingAPI:"/servlet/joinMeetingAPI",closeConf:"/api/servlet/closeConf",getWebrtcAccKey:"/servlet/getWebrtcAccKey",ArrangeConfAPI:"/servlet/ArrangeConfAPI"}},4536:(e,t,n)=>{"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,c(r.key),r)}}function o(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==s(t)?t:t+""}function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}n.d(t,{Z:()=>p});var l=function(e){var t=new RegExp("(^| )"+e+"=([^;]*)(;|$)"),n=document.cookie.match(t);return n?unescape(n[2]):void 0},u=function(e){for(var t="",n=0;n<e.length;){var r=e[n],i=0;r>>>7==0?(t+=String.fromCharCode(e[n]),n+=1):252==(252&r)?(i=(3&e[n])<<30,i|=(63&e[n+1])<<24,i|=(63&e[n+2])<<18,i|=(63&e[n+3])<<12,i|=(63&e[n+4])<<6,i|=63&e[n+5],t+=String.fromCharCode(i),n+=6):248==(248&r)?(i=(7&e[n])<<24,i|=(63&e[n+1])<<18,i|=(63&e[n+2])<<12,i|=(63&e[n+3])<<6,i|=63&e[n+4],t+=String.fromCharCode(i),n+=5):240==(240&r)?(i=(15&e[n])<<18,i|=(63&e[n+1])<<12,i|=(63&e[n+2])<<6,i|=63&e[n+3],t+=String.fromCharCode(i),n+=4):224==(224&r)?(i=(31&e[n])<<12,i|=(63&e[n+1])<<6,i|=63&e[n+2],t+=String.fromCharCode(i),n+=3):192==(192&r)?(i=(63&e[n])<<6,i|=63&e[n+1],t+=String.fromCharCode(i),n+=2):(t+=String.fromCharCode(e[n]),n+=1)}return t},d=new(function(){return o((function e(){r(this,e),this.hexIn=!1,this.hexOut=!1,this.base64EncodeChars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",this.base64DecodeChars=new Array(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1)}),[{key:"base64encode",value:function(e){var t,n,r,i,o,a;for(r=e.length,n=0,t="";n<r;){if(i=255&(this.hexIn?e[n++]:e.charCodeAt(n++)),n==r){t+=this.base64EncodeChars.charAt(i>>2),t+=this.base64EncodeChars.charAt((3&i)<<4),t+="==";break}if(o=this.hexIn?e[n++]:e.charCodeAt(n++),n==r){t+=this.base64EncodeChars.charAt(i>>2),t+=this.base64EncodeChars.charAt((3&i)<<4|(240&o)>>4),t+=this.base64EncodeChars.charAt((15&o)<<2),t+="=";break}a=this.hexIn?e[n++]:e.charCodeAt(n++),t+=this.base64EncodeChars.charAt(i>>2),t+=this.base64EncodeChars.charAt((3&i)<<4|(240&o)>>4),t+=this.base64EncodeChars.charAt((15&o)<<2|(192&a)>>6),t+=this.base64EncodeChars.charAt(63&a)}return t}},{key:"base64decode",value:function(e){var t,n,r,i,o,a,c,s;a=e.length,o=0,c=this.hexOut?[]:"";try{for(;o<a;){do{t=this.base64DecodeChars[255&e.charCodeAt(o++)]}while(o<a&&-1==t);if(-1==t)break;do{n=this.base64DecodeChars[255&e.charCodeAt(o++)]}while(o<a&&-1==n);if(-1==n)break;s=t<<2|(48&n)>>4,this.hexOut?c.push(s):c+=String.fromCharCode(s);do{if(61==(r=255&e.charCodeAt(o++)))return c;r=this.base64DecodeChars[r]}while(o<a&&-1==r);if(-1==r)break;s=(15&n)<<4|(60&r)>>2,this.hexOut?c.push(s):c+=String.fromCharCode(s);do{if(61==(i=255&e.charCodeAt(o++)))return c;i=this.base64DecodeChars[i]}while(o<a&&-1==i);if(-1==i)break;s=(3&r)<<6|i,this.hexOut?c.push(s):c+=String.fromCharCode(s)}}catch(e){console.error(e)}return c}},{key:"base64ToUint8Array",value:function(e){for(var t=this.base64decode(e),n=new Uint8Array(t.length),r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}},{key:"uint8ArrayToBase64",value:function(e){for(var t,n=0,r=e.length,i="";n<r;)t=e.subarray(n,Math.min(n+32768,r)),i+=String.fromCharCode.apply(null,t),n+=32768;return this.base64encode(i)}}])}()),f=new(function(){return o((function e(){r(this,e)}),[{key:"chat2html",value:function(e,t,n){var r="",i="",o="";if(e.indexOf("0x10x4")>=0)(r=e.split("0x10x4")[1]).indexOf("0x1")>=0&&(r=r.split("0x1")[0]),i=(r=JSON.parse(r)).opt,o=r.headerUrl;else if(e.indexOf("0x10x5")>=0){(r=e.split("0x10x5")[1]).indexOf("0x1")>=0&&(r=r.split("0x1")[0]),i=(r=JSON.parse(r)).opt,o=r.headerUrl}else if(e.indexOf("0x10x6")>=0){(r=e.split("0x10x6")[1]).indexOf("0x1")>=0&&(r=r.split("0x1")[0]),i=(r=JSON.parse(r)).opt,o=r.headerUrl}else{null==this._imgRegExp&&(this._sign=u([1]),this._signB=u([2]),this._signA=u([3]),this._imgRegExp=new RegExp(this._sign+this._sign+":*/*([^"+this._sign+"]+?)"+this._sign,"g"),this._headimgRegExp=new RegExp(this._sign+this._signA+":*/*([^"+this._sign+"]+?)"+this._sign,"g"),this._captureRegExp=new RegExp(this._sign+this._signB+":*/*([^"+this._sign+"]+?)"+this._sign,"g")),r=(r=(r=(r=(r=(r=(r=(r=(r=(r=e.replace(/<br\/>/g,"\n")).replace(/&quot;/g,'"')).replace(/&lt;/g,"<")).replace(/&gt;/g,">")).replace(/\&/g,"&amp;")).replace(/\"/g,"&quot;")).replace(/\</g,"&lt;")).replace(/\>/g,"&gt;")).replace(this._imgRegExp,'<img  src="$1"></img>')).replace(this._captureRegExp,"");var a=this._headimgRegExp.exec(r);if(a)o=a[1];r=r.replace(this._headimgRegExp,"");for(var c=(16777215&t).toString(16),s=6-c.length,l=0;l<s;l++)c="0"+c;r='<p style="color:#'+c+";font-size:"+n+'">'+r+"</p>",i=0}return[i,o,r]}},{key:"html2chat",value:function(e){return null==this._imgRegExp&&(this._sign=u([1]),this._signB=u([2]),this._signA=u([3]),this._imgRegExp=new RegExp(this._sign+this._sign+":*/*([^"+this._sign+"]+?)"+this._sign,"g"),this._headimgRegExp=new RegExp(this._sign+this._signA+":*/*([^"+this._sign+"]+?)"+this._sign,"g"),this._captureRegExp=new RegExp(this._sign+this._signB+":*/*([^"+this._sign+"]+?)"+this._sign,"g")),[e=(e=(e=(e=e.replace(/\<headimg\s+src=[\"\']([^\"\']*?)[\"\']\s*\/\>/gi,this._sign+this._signA+":$1"+this._sign)).replace(/\<headimg\s+src=[\"\']([^\"\']*?)[\"\']\s*\>.*?\<\/s*imgs*\>/gi,this._sign+this._signA+":$1"+this._sign)).replace(/\<img\s+[^>]*?src=[\"\']([\w\/\.\:]*)[\"\'][^>]*\/\>/gi,this._sign+this._sign+":/$1"+this._sign)).replace(/\<img\s+[^>]*?src=[\"\']([\w\/\.\:]*)[\"\'][^>]*\>.*?\<\/s*imgs*\>/gi,this._sign+this._sign+":/$1"+this._sign)]}},{key:"ask2html",value:function(e){null==this._imgRegExp&&(this._sign=u([1]),this._signA=u([3]),this._imgRegExp=new RegExp(this._sign+this._sign+":*/*([^"+this._sign+"]+?)"+this._sign,"g"),this._headimgRegExp=new RegExp(this._sign+this._signA+":*/*([^"+this._sign+"]+?)"+this._sign,"g"));var t=e.replace(/<br\/>/g,"\n");t=(t=(t=(t=(t=t.replace(/\&/g,"&amp;")).replace(/\"/g,"&quot;")).replace(/\</g,"&lt;")).replace(/\>/g,"&gt;")).replace(this._imgRegExp,'<img  src="$1"></img>');var n=this._headimgRegExp.exec(t);if(n)var r=n[1];return[r,t=t.replace(this._headimgRegExp,"")]}}])}()),h=function(){return o((function e(){r(this,e),this.eventObject={}}),[{key:"addEventListener",value:function(e,t){return Array.isArray(this.eventObject[e])||(this.eventObject[e]=[]),this.eventObject[e].push(t),this}},{key:"emitEventListener",value:function(e){var t=this.eventObject[e];if(t)for(var n=Array.prototype.slice.call(arguments,1),r=0;r<t.length;r++)try{t[r].apply(this,n)}catch(e){console.log(e)}return this}},{key:"removeEventListener",value:function(e,t){var n=this.eventObject[e];if(n)for(var r=n.length-1;r>=0;r--)n[r]==t&&(n[r]=null,n.splice(r,1));return this}},{key:"removeAllEvent",value:function(e){var t=this.eventObject[e];if(t)for(var n=t.length-1;n>=0;n--)t[n]=null;return this.eventObject[e]=null,this}}])}();const p={base64encode:d.base64encode.bind(d),base64decode:d.base64decode.bind(d),base64ToUint8Array:d.base64ToUint8Array.bind(d),uint8ArrayToBase64:d.uint8ArrayToBase64.bind(d),chat2html:f.chat2html.bind(f),html2chat:f.html2chat.bind(f),ask2html:f.ask2html.bind(f),SDK_Event:new h,PrefixInteger:function(e,t){return(Array(t).join(0)+e).slice(-t)},Uint8ArrToChar:function(e){var t,n,r,i,o,a;for(t="",r=e.length,n=0;n<r;)switch((i=e[n++])>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:t+=String.fromCharCode(i);break;case 12:case 13:o=e[n++],t+=String.fromCharCode((31&i)<<6|63&o);break;case 14:o=e[n++],a=e[n++],t+=String.fromCharCode((15&i)<<12|(63&o)<<6|(63&a)<<0)}return t},charToUint8Arr:function(e){for(var t,n=[],r=0;r<e.length;r++)if((t=e.charCodeAt(r))<128)n.push(t);else if(t<2048)n.push(192|t>>6&31),n.push(128|t>>0&63);else{if(!(t<65536))throw"不是UCS-2字符集";n.push(224|t>>12&15),n.push(128|t>>6&63),n.push(128|t>>0&63)}return new Uint8Array(n)},splitCutArr:function(e,t){for(var n=0,r=[];n<e.length;)r.push(e.slice(n,n+=t));return r},getFileType:function(e){return/\.([^\.]+)$/.exec(e)[1].toLocaleLowerCase()},findUserInfoByID:function(e,t){var n=CRVideo.allMemberInfo.find((function(t){return t.userId==e}));return n?n[t]:null},termIDtoUserID:function(e){var t=CRVideo.allMemberInfo.find((function(t){return t.termId==e}));return!!t&&t.userId},userIDtoTermID:function(e){var t=CRVideo.allMemberInfo.find((function(t){return t.userId==e}));return!!t&&t.termId},generate_uuid:function(){for(var e=[],t="0123456789abcdef",n=0;n<36;n++)e[n]=t.substr(Math.floor(16*Math.random()),1);return e[14]="4",e[19]=t.substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-",e.join("")},setCookie:function(e,t){var n=new Date;n.setTime(n.getTime()+2592e6),document.cookie=e+"="+escape(t)+";expires="+n.toGMTString()},getCookie:l,delCookie:function(e){var t=new Date;t.setTime(t.getTime()-1);var n=l(e);null!=n&&(document.cookie=e+"="+n+";expires="+t.toGMTString())},Uint8ToString:function(e){for(var t=[],n=0;n<e.length;n+=32768)t.push(String.fromCharCode.apply(null,e.subarray(n,n+32768)));return t.join("")},Uint8ToBase64:function(e){for(var t,n=0,r=e.length,i="";n<r;)t=e.subarray(n,Math.min(n+32768,r)),i+=String.fromCharCode.apply(null,t),n+=32768;return btoa(i)},compare:function(e){return function(t,n){var r=t[e],i=n[e];return i>r?-1:i<r?1:0}},deepCopy:function(e){var t={};for(var n in e)t[n]="object"===s(e[n])?deepCoyp(e[n]):e[n];return t},utf8ByteToUnicodeStr:u,parse_url:function(e,t){for(var n=["source","scheme","authority","userInfo","user","pass","host","port","relative","path","directory","file","query","fragment"],r=this.php_js&&this.php_js.ini||{},i=r["phpjs.parse_url.mode"]&&r["phpjs.parse_url.mode"].local_value||"php",o={php:/^(?:([^:\/?#]+):)?(?:\/\/()(?:(?:()(?:([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?()(?:(()(?:(?:[^?#\/]*\/)*)()(?:[^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/\/?)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/},a=o[i].exec(e),c={},s=14;s--;)a[s]&&(c[n[s]]=a[s]);if(t)return c[t.replace("PHP_URL_","").toLowerCase()];if("php"!==i){var l=r["phpjs.parse_url.queryKey"]&&r["phpjs.parse_url.queryKey"].local_value||"queryKey";o=/(?:^|&)([^&=]*)=?([^&]*)/g,c[l]={},c[n[12]].replace(o,(function(e,t,n){t&&(c[l][t]=n)}))}return delete c.source,c},colorRGBToHex:function(e,t,n){return e=Math.round(e),t=Math.round(t),n=Math.round(n),a=Math.round(255*a),"#"+((e<16?"0":"")+e.toString(16))+((t<16?"0":"")+t.toString(16))+((n<16?"0":"")+n.toString(16))},colorHexToRGBA:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=parseInt(e.substring(1,3),16),r=parseInt(e.substring(3,5),16),i=parseInt(e.substring(5,7),16),o=t;return{red:n,green:r,blue:i,alpha:o,rgba:"rgba(".concat(n,",").concat(r,",").concat(i,",").concat(o,")")}},hexWithAlphaToRGBA:function(e){var t=e.substring(0,7),n=parseInt(e.substring(7),16)/255,r=parseInt(t.substring(1,3),16),i=parseInt(t.substring(3,5),16),o=parseInt(t.substring(5,7),16);return{red:r,green:i,blue:o,alpha:n,rgba:"rgba(".concat(r,",").concat(i,",").concat(o,",").concat(n,")")}},colorArrToRGBAStr:function(e){return"rgba(".concat(e[0],",").concat(e[1],",").concat(e[2],",").concat(e[3],")")},colorRGBAToArr:function(e){return e.replace(/\s/g,"").substring(5,e.length-1).split(",").map((function(e){return parseFloat(e)}))},getDate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=e.getFullYear(),n=e.getMonth()+1,r=e.getDate(),i=e.getHours(),o=e.getMinutes(),a=e.getSeconds();return{year:t,month:n=n<10?"0"+n:n,day:r=r<10?"0"+r:r,hour:i=i<10?"0"+i:i,minute:o=o<10?"0"+o:o,second:a=a<10?"0"+a:a}},fileNameParse:function(e){var t=e.split(".").pop().toLowerCase(),n="unknown";return"pdf"===t?n="pdf":"doc"===t||"docx"===t?n="word":"xls"===t||"xlsx"===t?n="excel":"ppt"===t||"pptx"===t?n="ppt":"txt"===t||"log"===t?n="text":["jpg","jpeg","png","gif","bmp"].includes(t)&&(n="image"),{fileName:e,fileExtension:t,fileType:n,isDoc:["pdf","word","excel","ppt","text"].includes(n)}},debounce:function(e,t){var n;t=t||200;return function(){var r=this,i=arguments;n&&clearTimeout(n),n=setTimeout((function(){n=null,e.apply(r,i)}),t)}},throttle:function(e,t){var n,r;t=t||200;return function(){var i=this,o=arguments,a=+new Date;n&&a-n<t?(clearTimeout(r),r=setTimeout((function(){n=a,e.apply(i,o)}),t)):(n=a,e.apply(i,o))}}}},7177:()=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,n(i.key),i)}}function n(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,n||"default");if("object"!=e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==e(n)?n:n+""}!function(n,r,i){var o=function(){return r=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initIceCallback(),this.initSDKInterface()},(i=[{key:"initIceCallback",value:function(){var e=this;this.ICECallback={notifyMeetingAttrsChanged:function(t,n,r){console.crlog("[Attr] notifyMeetingAttrsChanged");var i=e.ConferenceToData(t),o=e.ConferenceToData(n);CRVideo_NotifyMeetingAttrsChanged.target(i,o,r)},notifyUserAttrsChanged:function(t,n,r,i){console.crlog("[Attr] notifyUserAttrsChanged: "+t);var o=e.ConferenceToData(n),a=e.ConferenceToData(r);CRVideo_NotifyUserAttrsChanged.target(t,o,a,i)}}}},{key:"initSDKInterface",value:function(){var t=this;n.CRVideo_GetMeetingAttrs=function(e,r){if(console.crlog("[Attr] CRVideo_GetMeetingAttrs start..."),!(e instanceof Array))return console.crlog("[Attr] CRVideo_GetMeetingAttrsFail parameter error"),void n.CRVideo_GetMeetingAttrsFail.target(n.CRVideo_ERR_DEF.MEETPARAM_ERR,r);Cr.conferenceRequest("getMeetingAttrs",e).then((function(e){var i=t.ConferenceToData(e[0]);console.crlog("[Attr] CRVideo_GetMeetingAttrsSuccess"),n.CRVideo_GetMeetingAttrsSuccess.target(i,r)})).catch((function(e){console.crlog("[Attr] CRVideo_GetMeetingAttrsFail"),n.CRVideo_GetMeetingAttrsFail.target(e,r)}))},n.CRVideo_GetMeetingAllAttrs=function(e){console.crlog("[Attr] CRVideo_GetMeetingAllAttrs start..."),Cr.conferenceRequest("getMeetingAllAttrs").then((function(r){var i=t.ConferenceToData(r[0]);console.crlog("[Attr] CRVideo_GetMeetingAllAttrsSuccess"),n.CRVideo_GetMeetingAllAttrsSuccess.target(i,e)})).catch((function(t){console.crlog("[Attr] CRVideo_GetMeetingAllAttrsFail"),n.CRVideo_GetMeetingAllAttrsFail.target(t,e)}))},n.CRVideo_SetMeetingAttrs=function(r,i,o){console.crlog("[Attr] CRVideo_SetMeetingAttrs start");try{var a=JSON.parse(r);if("object"!==e(a))throw"[Attr] attrs not is object";var c=t.checkLength(a);if(c)throw c;var s=t.createStringMap(a);Cr.conferenceRequest("setMeetingAttrs",s,i).then((function(){console.crlog("[Attr] CRVideo_SetMeetingAttrsSuccess"),n.CRVideo_SetMeetingAttrsRslt.target(n.CRVideo_ERR_DEF.NOERR,o)})).catch((function(e){console.crlog("[Attr] CRVideo_SetMeetingAttrsFail"),n.CRVideo_SetMeetingAttrsRslt.target(e,o)}))}catch(e){return console.crlog("[Attr] SetMeetingAttrs fail: ".concat(e)),void n.CRVideo_SetMeetingAttrsRslt.target(n.CRVideo_ERR_DEF.UNKNOWERR,o)}},n.CRVideo_AddOrUpdateMeetingAttrs=function(r,i,o){console.crlog("[Attr] AddOrUpdateMeetingAttrs start");try{var a=JSON.parse(r);if("object"!==e(a))throw"[Attr] attrs not is object";var c=t.checkLength(a);if(c)throw c;var s=t.createStringMap(a);Cr.conferenceRequest("addOrUpdateMeetingAttrs",s,i).then((function(){console.crlog("[Attr] CRVideo_AddOrUpdateMeetingAttrs Success"),n.CRVideo_AddOrUpdateMeetingAttrsRslt.target(n.CRVideo_ERR_DEF.NOERR,o)})).catch((function(e){console.crlog("[Attr] CRVideo_AddOrUpdateMeetingAttrs Fail"),n.CRVideo_AddOrUpdateMeetingAttrsRslt.target(e,o)}))}catch(e){return console.crlog("[Attr] CRVideo_AddOrUpdateMeetingAttrs fail: ".concat(e)),void n.CRVideo_AddOrUpdateMeetingAttrsRslt.target(n.CRVideo_ERR_DEF.UNKNOWERR,o)}},n.CRVideo_DelMeetingAttrs=function(e,t,r){console.crlog("[Attr] CRVideo_DelMeetingAttrs start"),e instanceof Array?Cr.conferenceRequest("delMeetingAttrs",e,t).then((function(){console.crlog("[Attr] CRVideo_DelMeetingAttrs Success"),n.CRVideo_DelMeetingAttrsRslt.target(n.CRVideo_ERR_DEF.NOERR,r)})).catch((function(e){console.crlog("[Attr] CRVideo_DelMeetingAttrs Fail"),n.CRVideo_DelMeetingAttrsRslt.target(e,r)})):n.CRVideo_DelMeetingAttrsRslt.target(n.CRVideo_ERR_DEF.MEETPARAM_ERR,r)},n.CRVideo_ClearMeetingAttrs=function(e,t){console.crlog("[Attr] CRVideo_ClearMeetingAttrs start..."),Cr.conferenceRequest("clearMeetingAttrs",e).then((function(){console.crlog("[Attr] CRVideo_ClearMeetingAttrsRslt Success"),n.CRVideo_ClearMeetingAttrsRslt.target(n.CRVideo_ERR_DEF.NOERR,t)})).catch((function(e){console.crlog("[Attr] CRVideo_ClearMeetingAttrsRslt Fail"),n.CRVideo_ClearMeetingAttrsRslt.target(e,t)}))},n.CRVideo_GetUserAttrs=function(e,r,i){if(console.crlog("[Attr] CRVideo_GetUserAttrs start..."),!(e instanceof Array&&e.length<=50&&(!r||r&&r instanceof Array)))return console.crlog("[Attr] CRVideo_GetUserAttrsFail parameter error"),void n.CRVideo_GetUserAttrsFail.target(n.CRVideo_ERR_DEF.MEETPARAM_ERR,i);var o="getUserAttrs",a=void 0;r&&r.length>0&&(o="getUserAttrsWithKey",a=r),Cr.conferenceRequest(o,e,a).then((function(e){var r=t.getUserData(e[0]);console.crlog("[Attr] CRVideo_GetUserAttrsSuccess"),n.CRVideo_GetUserAttrsSuccess.target(r,i)})).catch((function(e){console.crlog("[Attr] CRVideo_GetUserAttrsFail"),n.CRVideo_GetUserAttrsFail.target(e,i)}))},n.CRVideo_SetUserAttrs=function(r,i,o,a){console.crlog("[Attr] CRVideo_SetUserAttrs start");try{var c=JSON.parse(i);if("object"!==e(c))throw"attrs is not object";var s=t.checkLength(c);if(s)throw s;var l=new Conference.StringStringMap;for(var u in c)l.set(u,c[u]);Cr.conferenceRequest("setUserAttrs",r,l,o).then((function(){console.crlog("[Attr] CRVideo_SetUserAttrsRslt Success"),n.CRVideo_SetUserAttrsRslt.target(n.CRVideo_ERR_DEF.NOERR,a)})).catch((function(e){console.crlog("[Attr] CRVideo_SetUserAttrsRslt Fail: ".concat(error)),n.CRVideo_SetUserAttrsRslt.target(e,a)}))}catch(e){return console.crlog("[Attr] CRVideo_SetUserAttrsRslt fail: ".concat(e)),void n.CRVideo_SetUserAttrsRslt.target(n.CRVideo_ERR_DEF.UNKNOWERR,a)}},n.CRVideo_AddOrUpdateUserAttrs=function(r,i,o,a){console.crlog("[Attr] CRVideo_AddOrUpdateUserAttrs start");try{var c=JSON.parse(i);if("object"!==e(c))throw"attrs not is object";var s=t.checkLength(c);if(s)throw s;var l=new Conference.StringStringMap;for(var u in c)l.set(u,c[u]);Cr.conferenceRequest("addOrUpdateUserAttrs",r,l,o).then((function(){console.crlog("[Attr] CRVideo_AddOrUpdateUserAttrsRslt Success"),n.CRVideo_AddOrUpdateUserAttrsRslt.target(n.CRVideo_ERR_DEF.NOERR,a)})).catch((function(e){console.crlog("[Attr] CRVideo_AddOrUpdateUserAttrsRslt Fail"),n.CRVideo_AddOrUpdateUserAttrsRslt.target(e,a)}))}catch(e){return console.crlog("[Attr] CRVideo_AddOrUpdateUserAttrsRslt fail: ".concat(e)),void n.CRVideo_AddOrUpdateUserAttrsRslt.target(n.CRVideo_ERR_DEF.UNKNOWERR,a)}},n.CRVideo_DelUserAttrs=function(e,t,r,i){console.crlog("[Attr] CRVideo_DelUserAttrs start"),t instanceof Array?Cr.conferenceRequest("delUserAttrs",e,t,r).then((function(){console.crlog("[Attr] CRVideo_DelUserAttrs Success"),n.CRVideo_DelUserAttrsRslt.target(n.CRVideo_ERR_DEF.NOERR,i)})).catch((function(e){console.crlog("[Attr] CRVideo_DelUserAttrs Fail"),n.CRVideo_DelUserAttrsRslt.target(e,i)})):n.CRVideo_DelUserAttrsRslt.target(CONSTANT.CRVideo_MEETPARAM_ERR,i)},n.CRVideo_ClearUserAttrs=function(e,t,r){console.crlog("[Attr] CRVideo_ClearUserAttrs start..."),"string"==typeof e&&(e=[e]),e instanceof Array?Cr.conferenceRequest("clearUserAttrs",e,t).then((function(){console.crlog("[Attr] CRVideo_ClearUserAttrsRslt Success"),n.CRVideo_ClearUserAttrsRslt.target(n.CRVideo_ERR_DEF.NOERR,r)})).catch((function(e){console.crlog("[Attr] CRVideo_ClearUserAttrsRslt Fail"),n.CRVideo_ClearUserAttrsRslt.target(e,r)})):n.CRVideo_ClearUserAttrsRslt.target(CONSTANT.CRVideo_MEETPARAM_ERR,r)},n.CRVideo_ClearAllUserAttrs=function(e,t){console.crlog("[Attr] CRVideo_ClearAllUserAttrs start..."),Cr.conferenceRequest("clearAllUserAttrs",e).then((function(){console.crlog("[Attr] CRVideo_ClearAllUserAttrsRslt Success"),n.CRVideo_ClearAllUserAttrsRslt.target(n.CRVideo_ERR_DEF.NOERR,t)})).catch((function(e){console.crlog("[Attr] CRVideo_ClearAllUserAttrsRslt Fail"),n.CRVideo_ClearAllUserAttrsRslt.target(e,t)}))}}},{key:"checkLength",value:function(e){for(var t in e){if(t.length>64)return"[MeetingAttr] key Exceed maximum length";if(e[t].length>8192)return"[MeetingAttr] value Exceed maximum length"}return!1}},{key:"ConferenceToData",value:function(e){var t={};return e.forEach((function(e,n){t[e]=n})),t}},{key:"getUserData",value:function(e){var t={};return e.forEach((function(e,n){t[e]={},n.forEach((function(n,r){t[e][n]=r}))})),t}},{key:"createStringMap",value:function(e){var t=new Conference.StringStringMap;for(var n in e)t.set(n,e[n]);return t}}])&&t(r.prototype,i),o&&t(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,i,o}();n.__crAttrClass=o,n.__Rtc.CRRTCAttr=new n.__crAttrClass,n.CRVideo_GetMeetingAttrsSuccess=new i.CbProxy("CRVideo_GetMeetingAttrsSuccess"),n.CRVideo_GetMeetingAttrsFail=new i.CbProxy("CRVideo_GetMeetingAttrsFail"),n.CRVideo_GetMeetingAllAttrsSuccess=new i.CbProxy("CRVideo_GetMeetingAllAttrsSuccess"),n.CRVideo_GetMeetingAllAttrsFail=new i.CbProxy("CRVideo_GetMeetingAllAttrsFail"),n.CRVideo_SetMeetingAttrsRslt=new i.CbProxy("CRVideo_SetMeetingAttrsRslt"),n.CRVideo_AddOrUpdateMeetingAttrsRslt=new i.CbProxy("CRVideo_AddOrUpdateMeetingAttrsRslt"),n.CRVideo_DelMeetingAttrsRslt=new i.CbProxy("CRVideo_DelMeetingAttrsRslt"),n.CRVideo_ClearMeetingAttrsRslt=new i.CbProxy("CRVideo_ClearMeetingAttrsRslt"),n.CRVideo_GetUserAttrsSuccess=new i.CbProxy("CRVideo_GetUserAttrsSuccess"),n.CRVideo_GetUserAttrsFail=new i.CbProxy("CRVideo_GetUserAttrsFail"),n.CRVideo_SetUserAttrsRslt=new i.CbProxy("CRVideo_SetUserAttrsRslt"),n.CRVideo_AddOrUpdateUserAttrsRslt=new i.CbProxy("CRVideo_AddOrUpdateUserAttrsRslt"),n.CRVideo_DelUserAttrsRslt=new i.CbProxy("CRVideo_DelUserAttrsRslt"),n.CRVideo_ClearUserAttrsRslt=new i.CbProxy("CRVideo_ClearUserAttrsRslt"),n.CRVideo_ClearAllUserAttrsRslt=new i.CbProxy("CRVideo_ClearAllUserAttrsRslt"),n.CRVideo_NotifyMeetingAttrsChanged=new i.CbProxy("CRVideo_NotifyMeetingAttrsChanged"),n.CRVideo_NotifyUserAttrsChanged=new i.CbProxy("CRVideo_NotifyUserAttrsChanged")}(window,Ice,CRVideo)},2181:()=>{function e(e,r,i){return r=n(r),function(e,t){if(t&&("object"==o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,t()?Reflect.construct(r,i||[],n(e).constructor):r.apply(e,i))}function t(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(t=function(){return!!e})()}function n(e){return n=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},n(e)}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}function i(e,t){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},i(e,t)}function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,l(r.key),r)}}function s(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function l(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}var u=window.CRVideo,d=window.Ice,f=function(){return s((function e(t){a(this,e),this.initData(),this.initDOM(t)}),[{key:"initData",value:function(){this._id=d.generateUUID(),this._height="100%",this._width="100%",this._left="0px",this._top="0px",this._handler=null,this._nicknameEle=null,this._videoEle=null,this._playIcon=null,this._isPlaying=!1}},{key:"initDOM",value:function(e){var t=this;this._handler=document.createElement("div"),this._handler.style.width="100%",this._handler.style.height="100%",this._handler.style.position="relative",this._handler.style.overflow="hidden",this._nicknameEle=document.createElement("div"),this._nicknameEle.style.position="absolute",this._nicknameEle.style.left="20px",this._nicknameEle.style.top="20px",this._nicknameEle.style.padding="0 10px",this._nicknameEle.style.height="30px",this._nicknameEle.style.lineHeight="30px",this._nicknameEle.style.color="#fff",this._nicknameEle.style.fontSize="12px",this._nicknameEle.style.zIndex="2",this._nicknameEle.style.fontWeight="800",this._nicknameEle.style.backgroundColor="rgb(0, 0, 0)",this._nicknameEle.style.borderRadius="15px",this._nicknameEle.style.filter="alpha(opacity:50)",this._nicknameEle.style.display="none",this._handler.appendChild(this._nicknameEle),this._videoEle=document.createElement("video"),this._videoEle.style.width="100%",this._videoEle.style.height="100%",this._videoEle.autoplay=!0,this._videoEle.muted=!0,this._videoEle.playsInline=!0,this._videoEle.playsinline=!0,this._handler.appendChild(this._videoEle),"iOS"!=__Rtc.CRBrowser.curBrowserCfg.platform&&"media"!=e||(this._videoEle.controls=!0);var n=!!__Rtc.CRBrowser.weixin.isWeixin&&__Rtc.CRBrowser.weixin.weixinVer.split(".");n&&+"".concat(n[0]).concat(n[1]).concat(n[2])>=8014&&(this._playIcon=document.createElement("img"),this._playIcon.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAACWCAYAAAA8AXHiAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAA6TSURBVHhe7Z0JcFXVGccTIWoVk3fvOee+BAJhiYDYgkqnWrdalVLrYEEdKy5oXREwiBUruOAy2lFQAWlJ3SibA6NMBATFSUBZSyKC1Q4FAoqhFAIaAgRCEkK/793zxLwcwkvylnvO/f4zv3F59917zvn+uWd5Z0nxsdratp1t285FthA3Ag8yJp6xOZ9iczEbWAAU2YyvgH9+1gD3/xUBeA1cy6eEvgv3CN0L7wn3xme4jyIZqV69ep3KOe9u2+J6MMETwAybieVgiuKQUeJDMTzjU8b5dHjeWHw2pgHTIpNF0lBt0oXoxphzK7xJJkGQC4GSHwU9WWAaCi0mJkLabsE0YlrdJJO8qjR4I/QFIz0CwXtfBlEVXC+BaSzANEPaz4c8UNXpFWH1YnH+MFQ7iyKCph+hPPBRkKezZfZIiVRWVtYZ0EAeBMGY2Sg4hsC4Mx2qy4GYV5ltUrwkhMiEv+g8KHjskSkDYiCF0NMc4ThOUBYDKVYKBAI52JuDHtYqRcH7AsYg7zYfi2Uhi4XUUkFbI8s1lFitKmw/4pYFH4tvb1lMpGgVDAbPxNe/cnCScGFiORNiOJaVLDZSEzolwPm18Nr/SFmYRCOgrD6EXvE1WHZuEZIaCBqnXaGg8iMLjoiaqRnBYGdZnCRQmm2LO6DaW6koLKI5YNMByhLK1N8DrZbVviNj4i1lIREth4k35I/gvlMq9PiugUJY1qhQiFixzBKiP5a1W+SGKycn53TsLkPGdfgtT3dKoGock5ube5osfjOF41KM838oCoCII1Dm04wduQ84Tm9oXNIwQrLAYQkr+FMZDjPEGLuKBjs9AA6qMnalDIvesji/iXHxT2VGiYQTioUQN8rw6Ckw1T2QGWqkew9o1PO7ZJj0EmPO0FAG1Bkjkk8JxkiGSwulWozdjwmPyAjhPUowVhgzN3TeVSq+YjHBERkgvAuOdd2JsXND6EGF1tTFd0kVER+Kcaq3DKO3BN3YX1PvT18wdpzzX8lwekOWFTwXx0hUCSY0golPbTvzHBnW5CozM1NAgvRfekW4MPFBu6wsLsObLPVNo2kvBsLEGxDcNDfGSZDFxGhlwgjtwUXAMsyJFWPOVZAAGlYwlxLskMlwJ0busixfLRr1K4WJnG7Txub8b4pEECZi8ykYczf0cRTOVlAmgDAWjLkMf3xk23YH6DF8ono4YTTLsPkjbRB74YZhiocSfoCJl6UNYiuceah8IOEb4K11ubRDbOSurBHzIx9E+A1ekBLLFT84rUL9IMJ32GKItEXrlJ6eDT1OsbTRAwi/UpSRkWFJe7Rc8Pp7SHFzws/YYoS0R8vUzp25QNNhiIaAJ9Ab0ibNF72tiBPS0rcW1KMBuAFt2kGciGWWZWVIu0QvW5jVE7zwoou/HD9+QtmiRYu+W7r0k4q5c+eW540cubVjp86fq64noqAFPcS2UI9+oLyZZnTI7vj5jBkzdx05cqT+mEK7du068tCoUduEE1R+n2iSBegV1zJRSM61Ut1IK8BU69asWVMpPdSk1q1bt7/fb/r/W3Uf4sQwxq6Qtjm5oNGOR6spb6QTU/Pzd0rfRKWampr62e+8s7tHj57rVfcjGsMYnyxt07TkJD7t1wZ279Fzw4EDB+qkZ5qlvXv31jz22Jivg5nt16nuTRyHcbE2qj3n4W2FK5mVN9GJ+4c+UCp90mJt2PDFgQEDrtuouj/xI9wNdZvUKdBon6P8sma8+NJLZdIfrRJWj+++9155z3N6bVA9hwgxG73jWkgheKV1g4uMWCAx4ZVXdkhvxEQVFRW1T40b940TzKTqsTElTe4xD+2rexVf0pJYGyusjRs3Hhx0/Q3/UT3T35x4v61UuMCY8//iZSxUbW1t/fz5C/b27nPeF6pn+xHctFj6qKFwmY9Jm3rE01hhVVZW1j7//Avftu+Q7fvqEbyzJku1NN/i/HeqL+hKIowV1ubNm6tuunnwJi4cZVr8gmWFDixoKIuJp1UX60oijYU6evToscWLF3933gV9fVw98ielnX4Qtq+MmtOeaGOFVVVVVTdhwstl+HOSKl2GU4Beci0FwtF2HEFVXKgtyTJWWFu3bj08ZMgdm/1UPWIbPRgMOtJW7m58qgt1JtnGQmH1WFhY9D1O2VGl0UTgJXV8V0DGxDDVRTrjBWOFhdXj5Nde25HdsZPxc78abPENxpqkukhnvGSssL4tKzt81z33blGl1xSgE/iKtFVKiimT+n6MF40V1ooVKyouufQyU6tHnPwHprLtdBzcUlygNV42Furw4cNH8/Nf39m5S1ejqkf0khCiHfYIu6su0B2vGyusnTt3Vg8bPrzUpKnR4KmzjZmGHIkuxkLV19cfW7VqdeUVV171lSovuhGarhxg7BbVh7qjk7HCqq6urn972rRdXbp203pqtMX5zcYuStXRWGHt3l1eo/fKIZ6HQw3PqT/UG52NhcLq8bPP1u3v3/8a7VYOgaeeTmHcmaz6UHd0N1ZYuB5y1uzZu3Nzu2tTPYKxJoKxzDxV3hRjhbV9+/bDv7jwl/9S5dVrMMbfxsHRd1Qf6o5pxkKVlpYe0mRLgNn4xnpX8YH2mGgs1IsvvlSmyq+nYGIuGus95YeaY6qxNm/ZcsjrU3HQU2QszYQ/BXl9nIuMpaHq6urqc7v38PTiWTKWhtqzZ0+N11cFhY1FjXeNtHDhwr2q/HoKbLzTcIM+qq6uPqrJD9Wh4QYaINVAOH/+qafGfaPKq9ewmHgLjEU/6XhduF9XXt7Irap8ehH3Jx0mnlV9qDsmGCv0O+GsWbt79DxHqy2UOHfG0bQZj2rt2rWVV1/dT889UYUYQRP9PKYdO3ZUPzBseKnOC11DE/0YCxq3WBXRzVgHDx6smzxlyn87de6i/eKK0KJVWkyRXOFI+pIlS77TZUpMFJQIIXLhjcXOouVfydGmTZuqBg++ZZMq/boCXlodDAbPdNcW0oLVhGrfvn21zzz77HZDt/ueHzIVymLiVcUFWuNFY+EOzHPmzN1t+A7ME6StQkecDFVcoDVeMhYujCgpKdFyYURzgTb7fdJWoW2MrlBdpDNeMRaudB456uGtfjkEKsD5ZdJW5m1siyTbWIcOHTo6dWr+Tt0XnzYH7ARmRpy8iltFFkReqDPJMhZWe0VFRRUXXXyJbzZbC8O4M0/66bhwY1LVxbqSDGNtKS09dNvtQzar0uMP+OPSTsdlCfFb9cV6kkhj4fDBCy/8hfZ7t51+0k7HhXWjSQOliTBWTW1t/bx58/b8rHcf359QgQOjZ7Vvz6SdGopxPl31JR2Jp7GwHbV+/foDA677PR05J2FCvCVt1FhQRxpxViESL2OVl5cf+dMjo7+mU8AiaOrMwoxgsAtcRMfKKYTzzd98883/+Wn4oBk0fawcCA/CNGJxRawOwsRqb/ny5RWXXna574YPoofPRO+4FjqBbCHuVH9ZL4Y+MKzVR/du27bt0B/vumeL3w9fOhmMidulfU4sPDgaWvjaH3+C88QPVlW16LDx/fv3140fP6HMDxv+txb8xabBMSdNCY+8V91EN96ANpH0SlSqq6s7tmDhwr19zruADriMEnhbvSptc3KZcrYOvnGKi4srpW+a1JdffnVw4MBBNHzQTDjnl0vbRKW20IhfqLqRbuAc8jlz5pbjXCjpoQYqLy+vGTNmLA0ftAyc1NfGtUyUsm0xRHEjbYFe3VcTJ03a8fHHH3+/YuXKfQUFBXtGP/ro16adDJFIGHNulXaJXpZlZcCXl0XejCAkRXhcjrRL82Rznqe4IUFgo324tEnz1S4zU0Bba7nqxoSvWZaenm5Lm7RM9NYiImnV2yqs9PRsG262NPLmhG8pzMjICEh7tE7QQzTiZx6i9UT18020ysnJOR1uOj/yIYTf4AUpubmnSVvERqZuHkJET3NH2aOWxcRE1QMJH8DEy9IGsZdt2x3gAZ8qH0yYCxOfwNsqS9ogPoIHDFY+nDAWi/ObZPjjqrbwsKmRDydMhf8VYt68H5pbqlCVSGNbfqAQJ37KsCdGtuP0gwcbsfCCUFLCGLtShjuhSmVM/FmRIMIALCZGY4zdUCdavXqdyhifpkoYoS+ho3dT+qbJKCdHWAfbjH+oSiChIUwsjnpxRLwVcJzeYK6VyoQS+sD4CisYPFeG1RuCnuLVJiwb8yu4jAsX0chweksW53+ARBZHJprwPMWJGgRtqVIhgfcpEk54lxKb87sxdm4IvatUmzujFBkgvIgtRmDM3NB5X6mcczKXt8E3VR7Gyg2ZPkq1mHO/mwFlxojkUYJNFhknLZWKx9ZRb9E7YCzAVINlfPSWJUR/m/FVqowSCQTHGlUb0OosaHOdzxhfoswwEXcsKPuAEH1kOMySnG4zKzLTRLzhMxhj7WUYzFR2dvZPIKPj1AVAxBjs+T2Bq6xk8RuvVPgLGkDz5+OIO0/9Wixrt8h9pEBmZg5Nu4k9OO3FsrI6yWL2rdLgL+tumh0RA0K9vtB+68mdS+UlCSG6wev7dWWBESeHib87jtNVFicpQqdg24uGJaIHyuqjgNuWanqfdVJoc92zbCEexIlnqsIkACwbIUb8cGI8KXrh2At0l59kXKxWFq4PccuCPw7t0viuTPaDAoFAjmswx7c/CzHOV9k2fxzLQhYLKVbCv1Iw2Ego6KLIgjeYQmwWJHzhqB+VlZV1hm07g6DQZ0YEwRjg7TydMWcg5lVmm5RIQTush8X5w9DdXqQKkFaE8sBHwZu5u8weyQNKA5P9nDExGoL0PqDDBENM4/uQ5kfATOdDHtq6WSF5VW2gTZILVcltELRJEDxsk3nBaJiGIkwTnuqQLkQ3TKubZJJ2ys3NPQ2rTGgE34C9SwjuLDlGFk+zlUDVhnvkQzuQP4HPxjRgWmSySIYqDX+otYS4BNfUYW8T3iTP408jwBz498XwT5x9oVonWRz6DNtEcC38d37ou3APvFfonu6PwD79zS4l5f+L9kY9CrI2iQAAAABJRU5ErkJggg==",this._playIcon.style.position="absolute",this._playIcon.style.width="20%",this._playIcon.style.left="50%",this._playIcon.style.top="50%",this._playIcon.style.transform="translate(-50%, -50%)",this._playIcon.style.transition="all 0.8s ease",this._playIcon.style.zIndex="3",this._playBtnImg=this._playIcon,this._handler.appendChild(this._playIcon),this._playIcon.onclick=function(e){e.stopPropagation(),console.crlog("[UI] ".concat(t._id," videoPlayImg onclick")),t._isPlaying||t._videoEle.play()}),this._videoEle.onplaying=function(e){if(console.crlog("[UI] ".concat(t._id," onplaying... ").concat(t._videoEle.videoWidth," x ").concat(t._videoEle.videoHeight)),t._playBtnImg&&(t._playBtnImg.style.opacity=0),t._isPlaying=!0,"MeetSDK"==u.SDKKey&&t._videoEle.videoWidth&&t._videoEle.videoHeight){var n=t._videoEle.videoWidth/t._videoEle.videoHeight;clearInterval(t._videoInfoTimer||-1),t._videoInfoTimer=setInterval((function(){t._videoEle&&n>1.7&&n<1.86&&(t._videoEle.style.objectFit="cover")}),3e3)}t.onplaying&&t.onplaying()},this._videoEle.onplay=function(e){console.crlog("[UI] ".concat(t._id," onplay")),t._playBtnImg&&(t._playBtnImg.style.opacity=0),t._isPlaying=!0,t.onplay&&t.onplay()},this._videoEle.onpause=function(e){console.crlog("[UI] ".concat(t._id," onpause")),t._playBtnImg&&(t._playBtnImg.style.opacity=1),t._isPlaying=!1,t.onpause&&t.onpause()},this._videoEle.onload=function(e){console.crlog("[UI] ".concat(t._id," onload")),t.onload&&t.onload()},this._videoEle.onerror=function(e){console.crlog("[UI] ".concat(t._id," onerror")),t._isPlaying=!1,t.onerror&&t.onerror()},this._videoEle.onended=function(e){console.crlog("[UI] ".concat(t._id," onended")),t._isPlaying=!1,t.onended&&t.onended()},this._videoEle.onclick=function(e){e.stopPropagation(),__Rtc.CRBrowser.curBrowserCfg.isMobile&&t._videoEle.srcObject&&t._videoEle.srcObject.active&&t._videoEle.play()}}},{key:"id",value:function(e){if(void 0===e)return this._id;this._id=e}},{key:"height",value:function(e){if(void 0===e)return this._handler.style.height;this._handler.style.height=e}},{key:"width",value:function(e){if(void 0===e)return this._handler.style.width;this._handler.style.width=e}},{key:"left",value:function(e){if(void 0===e)return this._handler.style.left;this._handler.style.left=e}},{key:"top",value:function(e){if(void 0===e)return this._handler.style.top;this._handler.style.top=e}},{key:"handler",value:function(){return this._handler}},{key:"show",value:function(){try{console.crlog("[UI] Container:".concat(this._id,", show()"))}catch(e){console.error(e)}this._handler.style.display="block","video"==this.type&&__Rtc.CRRTCRemoteVideo.updateSubscribeVideo()}},{key:"hide",value:function(){try{console.crlog("[UI] Container:".concat(this._id,", hide()"))}catch(e){console.error(e)}this._handler.style.display="none","video"==this.type&&__Rtc.CRRTCRemoteVideo.updateSubscribeVideo()}},{key:"isPicEmpty",value:function(){return this._videoEle.srcObject?1:0}},{key:"setNickNameStyle",value:function(e){try{console.crlog("[UI] Container:".concat(this._id,", setNickNameStyle(").concat(JSON.stringify(e),")"))}catch(e){console.error(e)}this.nickNameStyle=e;var t=this._nicknameEle;if(null!=t&&e&&"object"==o(e))for(var n in e)t.style[n]=e[n]}},{key:"setNickNameContent",value:function(e){console.crlog("[UI] Container:".concat(this._id,", setNickNameContent(").concat(e,")"));var t=this._nicknameEle;null!=t&&(t.innerHTML=e),this.nickNameContent=e}},{key:"setVisibleNickName",value:function(e){try{console.crlog("[UI] Container:".concat(this._id,", setVisibleNickName(").concat(e,")"))}catch(e){console.error(e)}var t=this._nicknameEle;t.style.display=e?"block":"none"}},{key:"setVideoProp",value:function(e){try{console.crlog("[UI] Container:".concat(this._id,", setVideoProp(").concat(JSON.stringify(e),")"))}catch(e){console.error(e)}try{var t=this._videoEle;if(e)for(var n in e)if("style"==n)for(var r in e[n])t.style[r]=e[n][r];else t[n]=e[n]}catch(e){console.error(e)}}},{key:"dblClickFullScreen",value:function(e){try{console.crlog("[UI] Container:".concat(this._id,", dblClickFullScreen(").concat(e,")"))}catch(e){console.error(e)}var t=this._videoEle,n=!1;return void 0!==e?e&&0==t.controls?(t.ondblclick=function(){this.webkitRequestFullScreen&&0==t.controls?this.webkitRequestFullScreen():this.mozRequestFullScreen&&0==t.controls?this.mozRequestFullScreen():this.msRequestFullScreen&&0==t.controls&&this.msRequestFullScreen()},n=!0):e?t.controls&&(n=!1):(t.ondblclick=null,n=!1):n=!!t.ondblclick,n}},{key:"savePic",value:function(e){try{console.crlog("[UI] Container:".concat(this._id,", savePic(").concat(e,")"))}catch(e){console.error(e)}var t="png";if(e){switch(e){case e.indexOf(".png")>-1:t="png";break;case e.indexOf(".jpg")>-1:t="jpg";break;case e.indexOf(".jpeg")>-1:t="jpeg";break;case e.indexOf(".bmp")>-1:t="bmp";break;case e.indexOf(".gif")>-1:t="gif";break;default:t="png"}var n=this._videoEle;if(null==n.srcObject||0==n.srcObject.active)return console.crlog("[UI] Container:".concat(this._id,", savePic fail, this video have not videoStream!"));var r=window.canvas=document.createElement("canvas");r.width=n.videoWidth,r.height=n.videoHeight,r.getContext("2d").drawImage(n,0,0,r.width,r.height);for(var i=r.toDataURL("image/"+t).split(","),o=i[0].match(/:(.*?);/)[1],a=atob(i[1]),c=a.length,s=new Uint8Array(c);c--;)s[c]=a.charCodeAt(c);var l=new Blob([s],{type:o}),u=window.URL.createObjectURL(l),d=document.createElement("a");d.style.display="none",d.href=u,d.download=e,document.body.appendChild(d),d.click(),setTimeout((function(){document.body.removeChild(d),window.URL.revokeObjectURL(u)}),1e3)}}},{key:"savePicToBase64",value:function(e,t){try{console.crlog("[UI] Container:".concat(this._id,", savePicToBase64(").concat(e,",").concat(JSON.stringify(t),")"))}catch(e){console.error(e)}var n=this._videoEle;if(null==n.srcObject||0==n.srcObject.active)return console.crlog("[UI] Container:".concat(this._id,", savePic fail, this video have not videoStream!"));var r=window.canvas=document.createElement("canvas");return r.width=t&&t.width?t.width:n.videoWidth,r.height=t&&t.height?t.height:n.videoHeight,r.getContext("2d").drawImage(n,0,0,r.width,r.height),r.toDataURL("image/"+e)}},{key:"keepAspectRatio",value:function(e){}},{key:"requestFullScreen",value:function(){var e=this._videoEle;e.webkitRequestFullScreen?e.webkitRequestFullScreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullScreen&&e.msRequestFullScreen()}}])}(),h=function(t){function n(t){var r;return a(this,n),(r=e(this,n))._videoID=-1,r.type="video",r}return r(n,t),s(n,[{key:"getVideoID",value:function(){return this._videoID}},{key:"clear",value:function(){console.crlog("[UI] Container:".concat(this._id,", clear()")),this._videoEle&&(this._videoEle.srcObject=null)}},{key:"setVideo",value:function(e,t,n){var r=this;t=null==t?-1:t,n=null==n?0:n,console.crlog("[UI] Video Container:".concat(this._id,", setVideo(").concat(e,",").concat(t,",").concat(n,")"));var i=this._videoID,o=this._userID||"";if(this._userID=e,this._videoID=t,this._ssVal=n,0==t&&e!==CRVideo.userInfo.userId&&-1!=i)return __Rtc.CRRTCRemoteVideo.unSubscibevideo(o,i),void this.clear();var a=CRVideo.allMemberInfo.find((function(t){return t.userId==e}));this.nickNameContent?this._nicknameEle.innerHTML=this.nickNameContent:this._nicknameEle.innerHTML=a?a.nickname:e,__Rtc.CRRTCUI.videoContainerList.find((function(e){return e._id==r._id}))||__Rtc.CRRTCUI.videoContainerList.push(this),e==CRVideo.userInfo.userId?__Rtc.CRRTCLocalVideo.refreshLocalContainerSrc(this):(a&&a.defaultCam&&(-1===t?__Rtc.CRRTCRemoteVideo.updateConnectList(a.termId,a.defaultCam,this):__Rtc.CRRTCRemoteVideo.updateConnectList(a.termId,t,this),__Rtc.CRRTCRemoteVideo.updateSubscribeVideo()),__Rtc.CRRTCRemoteVideo.refreshContainerSrc(this))}},{key:"destroy",value:function(){var e=this;console.crlog("[UI] Video Container:".concat(this._id,", destroy()")),clearInterval(this._videoInfoTimer),this._videoInfoTimer=null,this._videoEle.srcObject=null,this._videoEle.poster="",this._videoEle.onplaying=null,this._videoEle.onplay=null,this._videoEle.onpause=null,this._videoEle.onload=null,this._videoEle.onerror=null,this._videoEle.onended=null,this._videoEle.onclick=null,this._videoEle.ondblclick=null,this._playIcon&&this._playIcon.onclick&&(this._playIcon.onclick=null),this._videoEle&&this._videoEle.remove(),this._nicknameEle&&this._nicknameEle.remove(),this._handler&&this._handler.remove(),this._playIcon&&this._playIcon.remove(),this._videoEle=null,this._nicknameEle=null,this._handler=null,this._playIcon=null;var t=__Rtc.CRRTCUI.videoContainerList.findIndex((function(t){return t._id==e._id}));-1!==t&&(console.crlog("[UI] UserID:".concat(this._userID,", container:").concat(this._id," be destroyed...")),__Rtc.CRRTCUI.videoContainerList.splice(t,1),__Rtc.CRRTCRemoteVideo.updateSubscribeVideo()),this.initData()}}])}(f),p=function(){return s((function e(t){a(this,e),this._penType={1:"Pencil"},this._init(t)}),[{key:"_init",value:function(e){var t=this,n=document.createElement("canvas"),r=n.getContext("2d");this._screenContainer=e.screenContainer,this._parentNode=e.screenContainer._handler,this._parentNode.appendChild(n),n.style.position="absolute",n.style.top=0,n.style.left=0,n.style.width="100%",n.style.height="100%",n.style.display="none",this._lastStyle={parentStyle:{width:0,height:0},canvasStyle:{width:0,height:0}},this._canvas=n,this._ctx=r,this._markDataList=[],this._lineWidth=e.lineWidth,this._strokeStyle=e.strokeStyle,this._type=e.type,this._allowMark=e.allowMark,this._cursor=e.cursor,this._canvas.style.cursor=this._cursor,console.crlog("[UI] ContainerID:".concat(this._screenContainer._id,", canvasContainer init...")),new ResizeObserver((function(e){t.resize()})).observe(this._canvas)}},{key:"_loadEvent",value:function(){var e=this,t=this._ctx,n=this._canvas;n.onmousedown=function(r){if(e._allowMark){t.lineWidth=e._lineWidth;var i=n.width/n.offsetWidth,o=[{x:parseInt(r.offsetX*i),y:parseInt(r.offsetY*i)}];n.onmousemove=function(e){var n=parseInt(e.offsetX*i),r=parseInt(e.offsetY*i);t.beginPath();var a=o[o.length-1],c=a.x,s=a.y;t.moveTo(c,s),t.lineTo(n,r),o.push({x:n,y:r}),t.stroke()},document.onmouseup=function(){var t=e._encode(o);e._sendData(t),n.onmousemove=null,document.onmouseup=null}}}}},{key:"_loadImg",value:function(e){var t=this,n=new Image;n.src=e,n.onload=function(){t._canvas.style.position="absolute",t._canvas.style.width="100%",t._canvas.style.height="100%",t._canvas.style.top="0px",t._canvas.style.left="0px",t._canvas.width=n.width,t._canvas.height=n.height,t._ctx.strokeStyle=t._strokeStyle,t._ctx.lineWidth=t._lineWidth,t._loadEvent(),t.resize()},this._img=n,console.crlog("[UI] ContainerID:".concat(this._screenContainer._id,", canvasContainer loadImg..."))}},{key:"_setCursor",value:function(e){this._canvas.style.cursor=e}},{key:"_encode",value:function(e){var t=this._ctx,n=t.lineWidth,r=t.strokeStyle,i=d.generateUUID(),o=e.length,a=this._type||1,c=parseInt(r.substr(1,2),16),s=parseInt(r.substr(3,2),16),l=parseInt(r.substr(5,2),16),u=new ArrayBuffer(4*o+8),f=new Uint8Array(u);f.set([0,l,s,c,n>>8,255&n,o>>8,255&o]);for(var h=[];e.length>0;){var p=e.shift();h.push(p.x>>8),h.push(255&p.x),h.push(p.y>>8),h.push(255&p.y)}return f.set(h,8),console.crlog("[UI] ContainerID:".concat(this._screenContainer._id,", canvasContainer encode markData...")),{mousePosSeq:f,markid:i,type:a}}},{key:"_sendData",value:function(e){console.crlog("[UI] ContainerID:".concat(this._screenContainer._id,", canvasContainer send mark data...")),e.termid=CRVideo.userInfo.termId,__Rtc.CRICEAPI.SendMarkDataV4(e)}},{key:"_drawAllMarkData",value:function(e){var t=this;console.crlog("[UI] ContainerID:".concat(this._screenContainer._id,", canvasContainer drawAllMarkData...")),e.length>0&&(this._markDataList=[]),e.forEach((function(e){var n=__Rtc.CRRTCScreen.parseMarkData(e);t._markDataList.push(n),n.data.length&&t._drawData(n)}))}},{key:"_drawData",value:function(e){if(!this._penType[e.type])return console.crlog("[UI][Error] 画笔未定义,类型: "+e.type);this._ctx.save(),e.data.length&&(this["_draw"+this._penType[e.type]](e),this._ctx.restore())}},{key:"_drawPencil",value:function(e){var t=this._ctx,n=e.data;t.strokeStyle=e.color,t.lineWidth=e.width,t.beginPath(),t.moveTo(n[0].x,n[0].y);for(var r=3;r<n.length;r++)t.lineTo(n[r].x,n[r].y);t.stroke()}},{key:"set",value:function(e,t){console.crlog("[UI] ContainerID:".concat(this._screenContainer._id,", canvasContainer set, ").concat(e,":").concat(t));var n=this._ctx,r=this._canvas;"strokeStyle"===e||"lineWidth"===e?n[e]=t:"cursor"===e?r.style.cursor=t:"allowMark"===e&&(this._allowMark=!!t)}},{key:"resize",value:function(){var e=this;console.crlog("[UI] ContainerID:".concat(this._screenContainer._id,", canvasContainer resize..."));var t=this._canvas,n=(this._ctx,this._img,this._parentNode),r=t.width,i=t.height,o=t.clientWidth,a=t.clientHeight,c=n.offsetWidth,s=n.offsetHeight;if(this._lastStyle.parentStyle.width=c,this._lastStyle.parentStyle.height=s,this._lastStyle.canvasStyle.width=o,this._lastStyle.canvasStyle.height=a,t.style.width="100%",t.style.height="100%",t.style.position="absolute",t.style.top="0px",t.style.left="0px",r/i>(o=t.clientWidth)/(a=t.clientHeight)){var l=i/(r/o),u=(a-l)/2;t.style.height=l+"px",t.style.top=u+"px"}else{var d=r/(i/a),f=(o-d)/2;t.style.width=d+"px",t.style.left=f+"px"}this._markDataList.forEach((function(t){e._drawData(t)}))}},{key:"clearAllMark",value:function(){console.crlog("[UI] ContainerID:".concat(this._screenContainer._id,", canvasContainer clearAllMark..."));var e=this._canvas,t=e.width,n=e.height;e.width=t,e.height=n,this._markDataList=[]}},{key:"savePic",value:function(e){var t="png";switch(e){case e.indexOf("png")>-1:t="png";break;case e.indexOf("jpg")>-1:t="jpg";break;case e.indexOf("jpeg")>-1:t="jpeg";break;case e.indexOf("bmp")>-1:t="bmp";break;case e.indexOf("gif")>-1:t="gif";break;default:t="png"}for(var n=this._canvas.toDataURL("image/"+t).split(","),r=n[0].match(/:(.*?);/)[1],i=atob(n[1]),o=i.length,a=new Uint8Array(o);o--;)a[o]=i.charCodeAt(o);var c=new Blob([a],{type:r}),s=window.URL.createObjectURL(c),l=document.createElement("a");l.style.display="none",l.href=s,l.download=e,document.body.appendChild(l),l.click(),setTimeout((function(){document.body.removeChild(l),window.URL.revokeObjectURL(s)}),1e3)}},{key:"savePicToBase64",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"png";return this._canvas.toDataURL("image/"+e)}}])}(),_=function(){return s((function e(t){a(this,e),this.nickname=t.nickname,this.div=null,this._initDom()}),[{key:"_initDom",value:function(){var e=document.createElement("div");e.className="screenMask",e.style.position="absolute",e.style.left="50%",e.style.top="50%",e.style.transform="translate(-50%, -50%) rotate(-45deg)",e.style.height="".concat(2*window.screen.height,"px"),e.style.width="".concat(2*window.screen.width,"px"),e.style.zIndex="2",e.style.display=__Rtc.CRRTCConf.curOption&Conference.OPT_SCREENSHARE_WATERMARK?"block":"none",this.div=e;for(var t=250,n=2*window.screen.width,r=2*window.screen.height,i=Math.floor(n/350),o=Math.floor(r/270),a=(n-350*i+t)/2,c=a,s=(r-270*o+t)/2,l=0;l<i*o;l++){c+=350,(l+1)%i==0&&(c=a+10*l,s+=270);var u=document.createElement("div");u.className="watermark",u.style.position="absolute",u.style.left=c+"px",u.style.top=s+"px",u.style.fontSize="20px",u.style.color="rgba(69,69,70,0.3)",u.innerHTML="".concat(this.nickname),this.div.appendChild(u)}}}])}(),g=function(t){function n(){var t;return a(this,n),(t=e(this,n)).type="screen",t.canvasContainer=new p({type:1,strokeStyle:"#000000",cursor:"default",lineWidth:2,allowMark:!1,screenContainer:t}),t.maskContainer=new _({nickname:CRVideo.userInfo.nickname}),t._handler.appendChild(t.maskContainer.div),t._videoEle.onplaying=function(){console.crlog("[UI] Screen Container:".concat(t._id," onplaying... ").concat(t._videoEle.videoWidth," x ").concat(t._videoEle.videoHeight)),t.canvasContainer._canvas.height=t._videoEle.videoHeight,t.canvasContainer._canvas.width=t._videoEle.videoWidth,t.canvasContainer._drawAllMarkData(__Rtc.CRRTCScreen.allMarkDataList);var e=t.savePicToBase64();e&&t.canvasContainer._loadImg(e),t.onplaying&&t.onplaying()},t}return r(n,t),s(n,[{key:"setVideo",value:function(e){var t=this;console.crlog("[UI] Screen Container:".concat(this._id,", setVideo(").concat(e,")")),this._userID=e||"";var n=CRVideo.allMemberInfo.find((function(t){return t.userId==e}));this.nickNameContent?this._nicknameEle.innerHTML=this.nickNameContent:this._nicknameEle.innerHTML=n?n.nickname:e,__Rtc.CRRTCUI.screenContainerList.find((function(e){return e._id==t._id}))||__Rtc.CRRTCUI.screenContainerList.push(this),__Rtc.CRRTCScreen.refreshContainerSrc()}},{key:"setMark",value:function(e){try{console.crlog("[UI] Screen Container:".concat(this._id,", setMark(").concat(JSON.stringify(e),")"))}catch(e){console.error(e)}this.canvasContainer._allowMark=void 0===e.allowMark?this.canvasContainer._allowMark:e.allowMark,this.canvasContainer._type=void 0===e.type?this.canvasContainer._type:e.type,this.canvasContainer._strokeStyle=void 0===e.strokeStyle?this.canvasContainer._strokeStyle:e.strokeStyle,this.canvasContainer._lineWidth=void 0===e.lineWidth?this.canvasContainer._lineWidth:e.lineWidth,this.canvasContainer._cursor=void 0===e.cursor?this.canvasContainer._cursor:e.cursor,this.canvasContainer.set("strokeStyle",this.canvasContainer._strokeStyle),this.canvasContainer.set("lineWidth",this.canvasContainer._lineWidth),this.canvasContainer.set("cursor",this.canvasContainer._cursor),"true"==this.canvasContainer._allowMark&&__Rtc.CRRTCScreen.isMarking?this.canvasContainer._canvas.style.display="block":"false"!=this.canvasContainer._allowMark||__Rtc.CRRTCScreen.isMarking||(this.canvasContainer._canvas.style.display="none")}},{key:"markResize",value:function(){console.crlog("[UI] Screen Container:".concat(this._id,", markResize()")),this.canvasContainer.resize()}},{key:"showMask",value:function(e){this.maskContainer.div.display=e?"block":"none"}},{key:"destroy",value:function(){var e=this;console.crlog("[UI] Screen Container:".concat(this._id,", destroy()"));var t=__Rtc.CRRTCUI.screenContainerList.findIndex((function(t){return t._id==e._id}));-1!==t&&(__Rtc.CRRTCUI.screenContainerList[t]._videoEle.srcObject=null,__Rtc.CRRTCUI.screenContainerList[t]._videoEle.poster="",__Rtc.CRRTCUI.screenContainerList[t]._videoEle.onplaying=null,__Rtc.CRRTCUI.screenContainerList[t]._videoEle.remove(),__Rtc.CRRTCUI.screenContainerList[t]._videoEle=null,__Rtc.CRRTCUI.screenContainerList[t]._handler.remove(),__Rtc.CRRTCUI.screenContainerList[t]._handler=null,console.crlog("[UI] Screen Container:".concat(this._id," be destroyed...")),__Rtc.CRRTCUI.screenContainerList.splice(t,1))}}])}(f),C=function(t){function n(){var t;return a(this,n),(t=e(this,n,["media"])).type="media",t}return r(n,t),s(n,[{key:"setVideo",value:function(e){console.crlog("[UI] Media Container:".concat(this._id,", setVideo(").concat(e,")")),this._userID=e;var t=CRVideo.allMemberInfo.find((function(t){return t.userId==e}));this.nickNameContent?this._nicknameEle.innerHTML=this.nickNameContent:this._nicknameEle.innerHTML=t?t.nickname:e,__Rtc.CRRTCMedia.refreshContainerSrc()}},{key:"destroy",value:function(){this._videoEle.srcObject=null,this._videoEle.poster="",this._videoEle.onplaying=null,this._videoEle.remove(),this._videoEle=null,this._handler.remove(),this._handler=null}}])}(f),v=function(){return s((function e(){a(this,e),this.initData(),this.initSDKInterface()}),[{key:"initData",value:function(){console.crlog("[UI] UIModule initData..."),this.videoContainerList=[],this.screenContainerList=[]}},{key:"initSDKInterface",value:function(){window.CRVideo_CreatVideoObj=function(e){try{console.crlog("[UI] CRVideo_CreatVideoObj(".concat(JSON.stringify(e),")"))}catch(e){console.error(e)}var t=new h,n=t._videoEle;try{if(e)for(var r in e)if("style"==r)for(var i in e[r])n.style[i]=e[r][i];else n[r]=e[r]}catch(e){console.error(e)}return t},window.CRVideo_CreateVideoContainer=function(e){try{console.crlog("[UI] CRVideo_CreateVideoContainer(".concat(JSON.stringify(e),")"))}catch(e){console.error(e)}var t=new h;try{if(e)for(var n in e)if("videoProp"==n)for(var r in e.videoProp)if("style"==r)for(var i in e.videoProp.style)t._videoEle.style[i]=e.videoProp.style[i];else t._videoEle[r]=e.videoProp[r];else if("containerProp"==n)for(var o in e.containerProp)if("style"==o)for(var a in e.containerProp.style)t._handler.style[a]=e.containerProp.style[a];else t._handler[o]=e.containerProp[o]}catch(e){console.error(e)}return t},window.CRVideo_CreatScreenShareObj=function(e){try{console.crlog("[UI] CRVideo_CreatScreenShareObj(".concat(JSON.stringify(e),")"))}catch(e){console.error(e)}var t=new g,n=t._videoEle;try{if(e)for(var r in e)if("style"==r)for(var i in e[r])n.style[i]=e[r][i];else n[r]=e[r]}catch(e){console.error(e)}return t.setVideo(),t},window.CRVideo_CreatMediaObj=function(e){try{console.crlog("[UI] CRVideo_CreatMediaObj(".concat(JSON.stringify(e),")"))}catch(e){console.error(e)}var t=new C;__Rtc.CRRTCMedia.container=t;var n=t._videoEle;n.muted=!1,n.volume=.001;try{if(e)for(var r in e)if("style"==r)for(var i in e[r])n.style[i]=e[r][i];else n[r]=e[r]}catch(e){console.error(e)}return t}}}])}();window.__crUIClass=v,window.__Rtc.CRRTCUI=new __crUIClass},9716:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(5766);var i=window.Conference,o=window.Ice,a=window.__Rtc;a.VideoReceptor=o.Class(i.VideoCallback,{setProxy:function(e){this.proxy=e},notifyAllowVideoWall:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log("===== notifyAllowVideoWall =====",t)},updateStatus:function(){var e;a.CRRTCVideo&&(e=a.CRRTCVideo).updateStatus.apply(e,arguments)},notifyOpenVideo:function(){var e;a.CRRTCVideo&&(e=a.CRRTCVideo).notifyOpenVideo.apply(e,arguments)},startVideoByManager:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log("===== startVideoByManager =====",t)},notifyEnableVideo:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log("===== notifyEnableVideo =====",t)},updateFocusWindow:function(){var e;a.CRRTCVideo&&(e=a.CRRTCVideo).updateFocusWindow.apply(e,arguments)},updateVLayout:function(){},updateVLayout2:function(){var e;a.CRRTCVideo&&(e=a.CRRTCVideo).updateVLayout2.apply(e,arguments)},updateMainVideoShowMode:function(){var e;a.CRRTCVideo&&(e=a.CRRTCVideo).updateMainVideoShowMode.apply(e,arguments)},updateVideoListMode:function(){var e;a.CRRTCVideo&&(e=a.CRRTCVideo).updateVideoListMode.apply(e,arguments)},enableUpload:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log("===== enableUpload =====",t)},enableUpload2:function(){var e;a.CRRTCVideo&&(e=a.CRRTCVideo).enableUpload2.apply(e,arguments)},generateIFrame:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log("===== generateIFrame =====",t)},notifyRefuseOpenVideo:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log("===== notifyRefuseOpenVideo =====",t)},getVideoSetting_async:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];console.log("===== getVideoSetting_async =====",n),a.CRRTCVideo&&(e=a.CRRTCVideo).getVideoSetting_async.apply(e,n)},setCamera:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log("===== setCamera =====",t)},setCameraById:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log("===== setCameraById =====",t)},notifyVideoPolling:function(){var e;a.CRRTCVideo&&(e=a.CRRTCVideo).notifyVideoPolling.apply(e,arguments)},notifyPollingVideo:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log("===== notifyPollingVideo =====",t)},notifyPollingVideo2:function(){var e;a.CRRTCVideo&&(e=a.CRRTCVideo).notifyPollingVideo2.apply(e,arguments)},notifyVideoList:function(){var e;a.CRRTCVideo&&(e=a.CRRTCVideo).notifyVideoList.apply(e,arguments)},notifyUpdateAllCameraInfos:function(){var e;a.CRRTCVideo&&(e=a.CRRTCVideo).notifyUpdateAllCameraInfos.apply(e,arguments)},notifySetOpenedCameraNumber:function(){var e;a.CRRTCVideo&&(e=a.CRRTCVideo).notifySetOpenedCameraNumber.apply(e,arguments)},notifyMultiCameras:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log("===== notifyMultiCameras =====",t)},notifyStartAdjustDirection:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log("===== notifyStartAdjustDirection =====",t)},notifyStartAdjustZoom:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log("===== notifyStartAdjustZoom =====",t)},notifyStopAdjustDirection:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log("===== notifyStopAdjustDirection =====",t)},notifyStopAdjustZoom:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log("===== notifyStopAdjustZoom =====",t)}});var c={setVideoDeviceStatus:function(e){(0,r.V)("_videoCtrl","setDeviceStatus",e).then((function(e){a.CRRTCVideo&&a.CRRTCVideo.ICECallback.setVideoDeviceStatusRslt.apply(a.CRRTCVideo,e)})).catch((function(e){a.CRRTCVideo&&a.CRRTCVideo.ICECallback.setVideoDeviceStatusRslt.apply(a.CRRTCVideo,[e])}))},allowVideoWall:function(e){return new Promise((function(t,n){(0,r.V)("_videoCtrl","allowVideoWall",e).then((function(e){return t(e)})).catch((function(e){return n(e)}))}))},startVideo:function(){(0,r.V)("_videoCtrl","startVideo").then((function(e){a.CRRTCVideo&&a.CRRTCVideo.ICECallback.startVideoRslt.apply(a.CRRTCVideo,e)})).catch((function(e){a.CRRTCVideo&&a.CRRTCVideo.ICECallback.startVideoRslt.apply(a.CRRTCVideo,[e])}))},stopVideo:function(){(0,r.V)("_videoCtrl","stopVideo").then((function(e){a.CRRTCVideo&&a.CRRTCVideo.ICECallback.stopVideoRslt.apply(a.CRRTCVideo,e)})).catch((function(e){a.CRRTCVideo&&a.CRRTCVideo.ICECallback.stopVideoRslt.apply(a.CRRTCVideo,[e])}))},reqOpenVideo:function(e){(0,r.V)("_videoCtrl","reqOpenVideo",e).then((function(e){a.CRRTCVideo&&a.CRRTCVideo.ICECallback.reqOpenVideoRslt.apply(a.CRRTCVideo,e)})).catch((function(e){a.CRRTCVideo&&a.CRRTCVideo.ICECallback.reqOpenVideoRslt.apply(a.CRRTCVideo,[e])}))},startVideoEx:function(e){(0,r.V)("_videoCtrl","startVideoEx",e).then((function(e){a.CRRTCVideo&&a.CRRTCVideo.ICECallback.startVideoExRslt.apply(a.CRRTCVideo,e)})).catch((function(e){a.CRRTCVideo&&a.CRRTCVideo.ICECallback.startVideoExRslt.apply(a.CRRTCVideo,[e])}))},stopVideoEx:function(e){(0,r.V)("_videoCtrl","stopVideoEx",e).then((function(e){a.CRRTCVideo&&a.CRRTCVideo.ICECallback.stopVideoExRslt.apply(a.CRRTCVideo,e)})).catch((function(e){a.CRRTCVideo&&a.CRRTCVideo.ICECallback.stopVideoExRslt.apply(a.CRRTCVideo,[e])}))},enableVideo:function(e){return new Promise((function(t,n){(0,r.V)("_videoCtrl","enableVideo",e).then((function(e){return t(e)})).catch((function(e){return n(e)}))}))},setFocusWindow:function(e,t){return console.crlog("[Video] _videoCtrl.setFocusWindow(".concat(e,",").concat(t,")")),new Promise((function(n,o){var a=i.WINDOW_MODE[e];(0,r.V)("_videoCtrl","setFocusWindow",a,t).then((function(e){return n(e)})).catch((function(e){return o(e)}))}))},batchSubscribeVideo2:function(e,t,n){var c=[new i.UsrCamSize(Number(e),Number(t),Number(n))],s=new o.Context;s._fwd="z",(0,r.V)("_videoCtrl","batchSubscribeVideo2",c,s).then((function(e){a.CRRTCVideo&&a.CRRTCVideo.ICECallback.batchSubscribeVideo2Rslt.apply(a.CRRTCVideo,e)})).catch((function(e){a.CRRTCVideo&&a.CRRTCVideo.ICECallback.batchSubscribeVideo2Rslt.apply(a.CRRTCVideo,[e])}))},subscribeFocusWindow2:function(e){return new Promise((function(t,n){(0,r.V)("_videoCtrl","subscribeFocusWindow2",e).then((function(e){return t(e)})).catch((function(e){return n(e)}))}))},setVLayout2:function(e){return new Promise((function(t,n){(0,r.V)("_videoCtrl","setVLayout2",e).then((function(e){return t(e)})).catch((function(e){return n(e)}))}))},setMainVideoShowMode:function(e){return new Promise((function(t,n){(0,r.V)("_videoCtrl","setMainVideoShowMode",e).then((function(e){return t(e)})).catch((function(e){return n(e)}))}))},setVideoListMode:function(e){return new Promise((function(t,n){(0,r.V)("_videoCtrl","setVideoListMode",e).then((function(e){return t(e)})).catch((function(e){return n(e)}))}))},refuseOpenVideo:function(e){return new Promise((function(t,n){(0,r.V)("_videoCtrl","refuseOpenVideo",e).then((function(e){return t(e)})).catch((function(e){return n(e)}))}))},getVideoSetting:function(e){return new Promise((function(t,n){(0,r.V)("_videoCtrl","getVideoSetting",e).then((function(e){return t(e)})).catch((function(e){return n(e)}))}))},setCamera:function(e,t){var n=new Promise((function(n,o){var a=t.mutiCam,c=t.openCamIDs,s=t.denoise,l=t.deinterlace,u=t.fpsType,d=t.videType,f=new i.VideoSetting({mutiCam:a,openCamIDs:c,denoise:s,deinterlace:l,fpsType:u,videType:d});(0,r.V)("_videoCtrl","setCamera",e,f).then((function(e){return n(e)})).catch((function(e){return o(e)}))}));return n},setCameraById:function(e){var t=new Promise((function(t,n){var o=e.termID,a=e.camID,c=new i.UsrCamID({termID:o,camID:a});(0,r.V)("_videoCtrl","setCameraById",c).then((function(e){return t(e)})).catch((function(e){return n(e)}))}));return t},setVideoPolling:function(e,t){return new Promise((function(n,i){(0,r.V)("_videoCtrl","setVideoPolling",e,t).then((function(e){return n(e)})).catch((function(e){return i(e)}))}))},updatePollingVideo2:function(e,t){return new Promise((function(n,o){var a=[];e.forEach((function(e){a.push(new i.UsrCamID({termID:e.termID,camID:e.camID}))})),(0,r.V)("_videoCtrl","updatePollingVideo2",a,t).then((function(e){return n(e)})).catch((function(e){return o(e)}))}))},updateVideoList:function(e){return new Promise((function(t,n){(0,r.V)("_videoCtrl","updateVideoList",e).then((function(e){return t(e)})).catch((function(e){return n(e)}))}))},getVideoPollingState:function(){return new Promise((function(e,t){(0,r.V)("_videoCtrl","getVideoPollingState").then((function(t){return e(t)})).catch((function(e){return t(e)}))}))},updateAllCameraInfos:function(e){(0,r.V)("_videoCtrl","updateAllCameraInfos",e).then((function(e){a.CRRTCVideo&&a.CRRTCVideo.ICECallback.updateAllCameraInfosRlst.apply(a.CRRTCVideo,e)})).catch((function(e){a.CRRTCVideo&&a.CRRTCVideo.ICECallback.updateAllCameraInfosRlst.apply(a.CRRTCVideo,[e])}))},setOpenedCameraNumber:function(e){(0,r.V)("_videoCtrl","setOpenedCameraNumber",e).then((function(e){a.CRRTCVideo&&a.CRRTCVideo.ICECallback.setOpenedCameraNumberRslt.apply(a.CRRTCVideo,e)})).catch((function(e){a.CRRTCVideo&&a.CRRTCVideo.ICECallback.setOpenedCameraNumberRslt.apply(a.CRRTCVideo,[e])}))},setMultiCameras:function(e,t){return new Promise((function(n,i){(0,r.V)("_videoCtrl","getVideoPollingState",e,t).then((function(e){return n(e)})).catch((function(e){return i(e)}))}))},startAdjustDirection:function(e,t){var n=new Promise((function(n,o){var a=e.termID,c=e.camID,s=new i.UsrCamID({termID:a,camID:c});(0,r.V)("_videoCtrl","startAdjustDirection",s,t).then((function(e){return n(e)})).catch((function(e){return o(e)}))}));return n},startAdjustZoom:function(e,t){var n=new Promise((function(n,o){var a=e.termID,c=e.camID,s=new i.UsrCamID({termID:a,camID:c});(0,r.V)("_videoCtrl","startAdjustZoom",s,t).then((function(e){return n(e)})).catch((function(e){return o(e)}))}));return n},stopAdjustDirection:function(e){var t=new Promise((function(t,n){var o=e.termID,a=e.camID,c=new i.UsrCamID({termID:o,camID:a});(0,r.V)("_videoCtrl","stopAdjustDirection",c).then((function(e){return t(e)})).catch((function(e){return n(e)}))}));return t},stopAdjustZoom:function(e){var t=new Promise((function(t,n){var o=e.termID,a=e.camID,c=new i.UsrCamID({termID:o,camID:a});(0,r.V)("_videoCtrl","stopAdjustZoom",c).then((function(e){return t(e)})).catch((function(e){return n(e)}))}));return t}};const s=c},5766:(e,t,n)=>{"use strict";n.d(t,{V:()=>o});var r=window.Cr,i=window.CRVideo;function o(e,t){for(var n=arguments.length,o=new Array(n>2?n-2:0),a=2;a<n;a++)o[a-2]=arguments[a];var c=!1,s=!0;return"addElement"!=t&&"netDetectResults"!=t&&"startCloudRecord"!=t||(s=!1),"netDetectResults"!=t&&"batchSubscribeVideo2"!=t||(c=!0),new Promise((function(n,a){try{var l;if(!i.isMeeting)return;try{!c&&s&&console.crlog("[ICE] Ice Request [".concat(e,":").concat(t,"],").concat(JSON.stringify(o))),!c&&!s&&console.crlog("[ICE] Ice Request [".concat(e,":").concat(t,"],args..."))}catch(e){console.error(e)}(l=r._proxy[e])[t].apply(l,o).then((function(){!c&&console.crlog("[ICE] Ice Request [".concat(e,":").concat(t,"] success!"));for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return i.unshift(0),n(i)})).exception((function(n){return!c&&console.crlog("[ICE][Error] Ice Request [".concat(e,":").concat(t,"] fail,").concat(n.toString())),a(n)}))}catch(e){return!c&&console.crlog("[ICE][Error] Conference Request error: ".concat(e)),a(e)}}))}},365:()=>{var e=window.__Rtc;e.CR_InitRslt=new Cr.CbProxy("CR_InitRslt"),e.CR__LoginRslt=new Cr.CbProxy("CR__LoginRslt"),e.CR__RefreshSessionRslt=new Cr.CbProxy("CR__RefreshSessionRslt"),e.CR__KeepAliveRslt=new Cr.CbProxy("CR__KeepAliveRslt"),e.CR__ExitRslt=new Cr.CbProxy("CR__ExitRslt"),e.CR__GetActiveMembersRslt=new Cr.CbProxy("CR__GetActiveMembersRslt"),e.CR__VideoAllocRawExt2=new Cr.CbProxy("CR__VideoAllocRawExt2"),e.CR__ModifyPeerAddr=new Cr.CbProxy("CR__ModifyPeerAddr"),e.CR__ModifyPeerAddrExt=new Cr.CbProxy("CR__ModifyPeerAddrExt"),e.CR__Free=new Cr.CbProxy("CR__Free"),e.CR__VideoResolutionReportRslt=new Cr.CbProxy("CR__VideoResolutionReportRslt")},4079:()=>{__Rtc.MSClientI=Ice.Class(MS.MSClient,{setProxy:function(e){this.proxy=e},VideoAllocRaw_async:function(e,t,n){console.crlog&&console.crlog("[RTC] VideoAllocRaw"),this.proxy.callCallback("VideoAllocRaw",[e,t,n])},VideoAllocRawExt_async:function(e,t,n,r,i){console.crlog&&console.crlog("[RTC] VideoAllocRawExt_async"),this.proxy.callCallback("VideoAllocRawExt",[e,t,n,r])},VideoAllocRawExt2_async:function(e,t,n,r,i){console.crlog&&console.crlog("[RTC] VideoAllocRawExt2_async"),this.proxy.callCallback("VideoAllocRawExt2",[e,t,n,r])},AudioAllocRaw_async:function(e,t){console.crlog&&console.crlog("[RTC] AudioAllocRaw"),this.proxy.callCallback("AudioAllocRaw",[e,t])},AudioAllocRawExt_async:function(e,t,n,r){console.crlog&&console.crlog("[RTC] AudioAllocRawExt"),this.proxy.callCallback("AudioAllocRawExt",[e,t,n])},AudioAllocRawExt2_async:function(){var e;(e=__Rtc.CRRTCAudio.ICECallback).AudioAllocRawExt2_async.apply(e,arguments)},ModifyPeerAddr_async:function(e,t,n){console.crlog&&console.crlog("[RTC] ModifyPeerAddr"),this.proxy.callCallback("ModifyPeerAddr",[e,asParam,strParams])},ModifyPeerAddrExt_async:function(e,t,n){e.ice_response(),console.crlog&&console.crlog("[RTC] ModifyPeerAddrExt"),this.proxy.callCallback("ModifyPeerAddrExt",[e,t,n])},NotifyRTMPStreamPublishFinished_async:function(e,t,n,r,i,o,a,c){console.crlog&&console.crlog("[RTC] NotifyRTMPStreamPublishFinished_async"),this.proxy.callCallback("NotifyRTMPStreamPublishFinished",[e,t,n])},EnableSendScreen2Internet_async:function(e){e.ice_response(),console.crlog&&console.crlog("[RTC] EnableSendScreen2Internet"),this.proxy.callCallback("EnableSendScreen2Internet",[e])},DisableSendScreen2Internet_async:function(e){e.ice_response(),console.crlog&&console.crlog("[RTC] DisableSendScreen2Internet"),this.proxy.callCallback("DisableSendScreen2Internet",[e])},EnableSendFilm2Internet_async:function(e){e.ice_response(),console.crlog&&console.crlog("[RTC] EnableSendFilm2Internet"),this.proxy.callCallback("EnableSendFilm2Internet",[e])},DisableSendFilm2Internet_async:function(e){e.ice_response(),console.crlog&&console.crlog("[RTC] DisableSendFilm2Internet"),this.proxy.callCallback("DisableSendFilm2Internet",[e])},EnableSendVideo2Internet_async:function(e,t){e.ice_response(),__Rtc.CRRTCVideo&&__Rtc.CRRTCVideo.ICECallback.enableSendVideo2Internet(t)},DisableSendVideo2Internet_async:function(e,t){e.ice_response(),__Rtc.CRRTCVideo&&__Rtc.CRRTCVideo.ICECallback.disableSendVideo2Internet(t)},Free_async:function(e,t){e.ice_response(),this.proxy.callCallback("Free",[t])}}),__Rtc.ChatReceptor=Ice.Class(Conference.IMCallback,{setProxy:function(e){this.proxy=e},receiveIMMsg:function(){var e;(e=__Rtc.CRRTCIMMsg.ICECallback).receiveIMMsg.apply(e,arguments)},notifyIMForbidStatus:function(){var e;(e=__Rtc.CRRTCIMMsg.ICECallback).notifyIMForbidStatus.apply(e,arguments)},notifyClearIMMsg:function(){var e;(e=__Rtc.CRRTCIMMsg.ICECallback).notifyClearIMMsg.apply(e,arguments)},notifyDeleteIMMsg:function(){var e;(e=__Rtc.CRRTCIMMsg.ICECallback).notifyDeleteIMMsg.apply(e,arguments)}}),__Rtc.FileTransferReceptor=Ice.Class(Conference.FileTransferCallback,{setProxy:function(e){this.proxy=e},OnFileTransferFinished:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log(t)}}),__Rtc.ScreenShareReceptor=Ice.Class(Conference.ScreenShareClient,{setProxy:function(e){this.proxy=e},notifyStartScreenShare:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];__Rtc.CRRTCScreen&&(e=__Rtc.CRRTCScreen.ICECallback.notifyStartScreenShare).call.apply(e,[__Rtc.CRRTCScreen].concat(n))},notifyStopScreenShare:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];__Rtc.CRRTCScreen&&(e=__Rtc.CRRTCScreen.ICECallback.notifyStopScreenShare).call.apply(e,[__Rtc.CRRTCScreen].concat(n))},notifyStartMarked:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];__Rtc.CRRTCScreen&&(e=__Rtc.CRRTCScreen.ICECallback.notifyStartMarked).call.apply(e,[__Rtc.CRRTCScreen].concat(n))},notifyStopMarked:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];__Rtc.CRRTCScreen&&(e=__Rtc.CRRTCScreen.ICECallback.notifyStopMarked).call.apply(e,[__Rtc.CRRTCScreen].concat(n))},notifyMakeIFrame:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];__Rtc.CRRTCScreen&&(e=__Rtc.CRRTCScreen.ICECallback.notifyScMakeIFrame).call.apply(e,[__Rtc.CRRTCScreen].concat(n))},notifyMarkData:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];__Rtc.CRRTCScreen&&(e=__Rtc.CRRTCScreen.ICECallback.notifyMarkData).call.apply(e,[__Rtc.CRRTCScreen].concat(n))},notifyClearAllMarks:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];__Rtc.CRRTCScreen&&(e=__Rtc.CRRTCScreen.ICECallback.notifyClearAllMarks).call.apply(e,[__Rtc.CRRTCScreen].concat(n))},notifyMarkDataV4:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];__Rtc.CRRTCScreen&&(e=__Rtc.CRRTCScreen.ICECallback.notifyMarkDataV4).call.apply(e,[__Rtc.CRRTCScreen].concat(n))},notifyClearAllMarksV4:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];__Rtc.CRRTCScreen&&(e=__Rtc.CRRTCScreen.ICECallback.notifyClearAllMarksV4).call.apply(e,[__Rtc.CRRTCScreen].concat(n))},notifyCtrlReqState:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];__Rtc.CRRTCScreen&&(e=__Rtc.CRRTCScreen.ICECallback.notifyCtrlReqState).call.apply(e,[__Rtc.CRRTCScreen].concat(n))},notifyEnableOtherMarked:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];__Rtc.CRRTCScreen&&(e=__Rtc.CRRTCScreen.ICECallback.notifyEnableOtherMarked).call.apply(e,[__Rtc.CRRTCScreen].concat(n))},notifyRequestMarked:function(e){console.crlog&&console.crlog("[RTC] notifyRequestMarked",e),this.proxy.callCallback("notifyRequestMarked",[e])},notifyCancelMarkedReq:function(e){console.crlog&&console.crlog("[RTC] notifyCancelMarkedReq",e),this.proxy.callCallback("notifyCancelMarkedReq",[e])},notifyRequestCtrlRight:function(e){console.crlog&&console.crlog("[RTC] notifyRequestCtrlRight",e),this.proxy.callCallback("notifyRequestCtrlRight",[e])},notifyCancelCtrlReq:function(e){console.crlog&&console.crlog("[RTC] notifyCancelCtrlReq",e),this.proxy.callCallback("notifyCancelCtrlReq",[e])},notifyRejectCtrlReq:function(e,t,n){console.crlog&&console.crlog("[RTC] notifyRejectCtrlReq",e,t,n),this.proxy.callCallback("notifyRejectCtrlReq",[e,t,n])},notifyGiveCtrlRight:function(e,t){console.crlog&&console.crlog("[RTC] notifyGiveCtrlRight",e,t),this.proxy.callCallback("notifyGiveCtrlRight",[e,t])},notifyReleaseCtrlRight:function(e){console.crlog&&console.crlog("[RTC] notifyReleaseCtrlRight",e),this.proxy.callCallback("notifyReleaseCtrlRight",[e])},notifyCtrlMsg:function(e,t){console.crlog&&console.crlog("[RTC] notifyCtrlMsg",e,t),this.proxy.callCallback("notifyCtrlMsg",[e,t])},notifyTmpSetRemoteCtrlState:function(e,t){console.crlog&&console.crlog("[RTC] notifyTmpSetRemoteCtrlState",e,t),this.proxy.callCallback("notifyTmpSetRemoteCtrlState",[e,t])},notifyIndicator:function(e,t){console.crlog&&console.crlog("[RTC] notifyIndicator",e,t),this.proxy.callCallback("notifyIndicator",[e,t])}}),__Rtc.MediaReceptor=Ice.Class(Conference.MediaCallback,{setProxy:function(e){this.proxy=e},notifyStartPlayMedia:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];__Rtc.CRRTCMedia&&(e=__Rtc.CRRTCMedia.ICECallback.notifyStartPlayMedia).call.apply(e,[__Rtc.CRRTCMedia].concat(n))},notifyStopPlayMedia:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];__Rtc.CRRTCMedia&&(e=__Rtc.CRRTCMedia.ICECallback.notifyStopPlayMedia).call.apply(e,[__Rtc.CRRTCMedia].concat(n))},notifyPausePlayMedia:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];__Rtc.CRRTCMedia&&(e=__Rtc.CRRTCMedia.ICECallback.notifyPausePlayMedia).call.apply(e,[__Rtc.CRRTCMedia].concat(n))},notifyMakeIFrame:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];__Rtc.CRRTCMedia&&(e=__Rtc.CRRTCMedia.ICECallback.notifyMakeIFrame).call.apply(e,[__Rtc.CRRTCMedia].concat(n))},notifySubscribeMedia:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];__Rtc.CRRTCMedia&&(e=__Rtc.CRRTCMedia.ICECallback.notifySubscribeMedia).call.apply(e,[__Rtc.CRRTCMedia].concat(n))}}),__Rtc.AnsQueReceptor=Ice.Class(Conference.AnsQueCallback,{setProxy:function(e){this.proxy=e},askQuesNotify:function(e,t){console.crlog&&console.crlog("[RTC] askQuesNotify(id:%s)",e),this.proxy.callCallback("askQuesNotify",[e,t])},lockQuesNotify:function(e,t){console.crlog&&console.crlog("[RTC] lockQuesNotify(id:%s)",e),this.proxy.callCallback("lockQuesNotify",[e,t])},replyQuesNotify:function(e,t){console.crlog&&console.crlog("[RTC] replyQuesNotify(id:%s)",e),this.proxy.callCallback("replyQuesNotify",[e,t])},modifyQuesNotify:function(e,t){console.crlog&&console.crlog("[RTC] modifyQuesNotify(id:%s)",e),this.proxy.callCallback("modifyQuesNotify",[e,t])},delQuesNotify:function(e,t){console.crlog&&console.crlog("[RTC] delQuesNotify(id:%s)",e),this.proxy.callCallback("delQuesNotify",[e,t])},delAllQuesNotify:function(e){console.crlog&&console.crlog("[RTC] delAllQuesNotify(termId:%s)",e),this.proxy.callCallback("delAllQuesNotify",[e])},publicQuesNotify:function(e,t,n){console.crlog&&console.crlog("[RTC] publicQuesNotify(id:%s)",e),this.proxy.callCallback("publicQuesNotify",[e,t,n])},quesTypeChangeNotify:function(e,t){console.crlog&&console.crlog("[RTC] quesTypeChangeNotify(id:%s)",e),this.proxy.callCallback("quesTypeChangeNotify",[e,t])},modifyQuesTypeNotify:function(e,t){console.crlog&&console.crlog("[RTC] modifyQuesTypeNotify(termId:%s)",e),this.proxy.callCallback("modifyQuesTypeNotify",[e,t])},setBroadCastQuesNotify:function(e){console.crlog&&console.crlog("[RTC] setBroadCastQuesNotify(bEnable:%s)",e),this.proxy.callCallback("setBroadCastQuesNotify",[e])}}),__Rtc.SyncCtrlReceptor=Ice.Class(Conference.SyncCtrlCallback,{setProxy:function(e){this.proxy=e},notifySetCurrentTab:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];__Rtc.CRRTCSync&&(e=__Rtc.CRRTCSync.ICECallback.notifySetCurrentTab).call.apply(e,[__Rtc.CRRTCSync].concat(n))},notifySetFullScreen:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];__Rtc.CRRTCSync&&(e=__Rtc.CRRTCSync.ICECallback.notifySetFullScreen).call.apply(e,[__Rtc.CRRTCSync].concat(n))},notifySetPrivTabInfo:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];__Rtc.CRRTCSync&&(e=__Rtc.CRRTCSync.ICECallback.notifySetPrivTabInfo).call.apply(e,[__Rtc.CRRTCSync].concat(n))},notifySetSyncMode:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];__Rtc.CRRTCSync&&(e=__Rtc.CRRTCSync.ICECallback.notifySetSyncMode).call.apply(e,[__Rtc.CRRTCSync].concat(n))}})},7649:()=>{__Rtc.CR__Init=function(e,t){try{Cr._proxy=new Cr.LHProxy(t),Cr._proxy.initIce().then((function(e,t){Cr._proxy.registeredCallback("ModifyPeerAddr",(function(e){__Rtc.CR__ModifyPeerAddr.call(e)})),Cr._proxy.registeredCallback("ModifyPeerAddrExt",(function(e){__Rtc.CR__ModifyPeerAddrExt.call(e)})),Cr._proxy.registeredCallback("VideoAllocRawExt2",(function(e){__Rtc.CR__VideoAllocRawExt2.call(e)})),Cr._proxy.registeredCallback("Free",(function(e){__Rtc.CR__Free.call(e)})),window.__Rtc.CR_InitRslt.call([e,t])}))}catch(e){console.crlog&&console.crlog(e),window.__Rtc.CR_InitRslt.call([3,"sdk内部错误"])}},__Rtc.CR__UnInit=function(){try{Cr.communicator&&Cr.communicator.shutdown(),Cr.communicator=null,Cr._connection&&Cr._connection.destroy(0),Cr._connection=null,Cr._adapter&&Cr._adapter.destroy(),Cr._adapter=null,Cr._routerPrx&&Cr._routerPrx.destroySession(),Cr._routerPrx=null}catch(e){return 3}},__Rtc.CR__RefreshSession=function(e){Cr._proxy&&Cr._proxy.refreshSession().then((function(t,n){__Rtc.CR__RefreshSessionRslt.call([t,n,e])}))},__Rtc.CR__KeepAlive=function(e,t){void 0===e&&(e=0),Cr._proxy&&Cr._proxy.keepAlive(e).then((function(e,n){__Rtc.CR__KeepAliveRslt.call([e,n,t])}))},__Rtc.CR__Exit=function(e){void 0===e&&(e=""),Cr._proxy&&Cr._proxy.exit(e).then((function(e,t){__Rtc.CR__ExitRslt.call([e,t])}))},__Rtc.CR__GetActiveMembers=function(){Cr._proxy.getActiveMembers().then((function(e,t,n){0==e?__Rtc.CR__GetActiveMembersRslt.call([e,t,n]):__Rtc.CR__GetActiveMembersRslt.call([e,t])}))},__Rtc.CR__SendIMMsg=function(e,t,n,r,i,o,a){Cr._proxy.SendIMMsg(e,t,n,r,i).then((function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=__Rtc.CRRTCIMMsg.ICECallback).sendIMMsgRslt.apply(e,n.concat([a]))}))},__Rtc.CR__TerminalMsg=function(e,t,n,r,i){Cr._proxy.terminalMsg(e,t,n,r).then((function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=__Rtc.CRRTCTermMsg.ICECallback).terminalMsgRslt.apply(e,n.concat([i]))}))},__Rtc.CR__VideoResolutionReport=function(e,t,n){Cr._proxy.VideoResolutionReport(e,t,n).then((function(e,t){__Rtc.CR__VideoResolutionReportRslt.call([e,t])}))},Cr.iceReq=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var o=!0,a=!0;return"addElement"!=t&&"netDetectResults"!=t&&"startCloudRecord"!=t||(a=!1),"netDetectResults"==t&&(o=!1),new Promise((function(n,i){try{var c;if(!CRVideo.isMeeting)return;try{o&&a&&console.crlog("[ICE] Ice Request [".concat(e,":").concat(t,"],").concat(JSON.stringify(r))),o&&!a&&console.crlog("[ICE] Ice Request [".concat(e,":").concat(t,"],args..."))}catch(e){console.error(e)}(c=Cr._proxy[e])[t].apply(c,r).then((function(){o&&console.crlog("[ICE] Ice Request [".concat(e,":").concat(t,"] success!"));for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return i.unshift(0),n(i)})).exception((function(n){return o&&console.crlog("[ICE][Error] Ice Request [".concat(e,":").concat(t,"] fail,").concat(n.toString())),i(n)}))}catch(e){return o&&console.crlog("[ICE][Error] Conference Request error: ".concat(e)),i(e)}}))}},600:(e,t,n)=>{"use strict";n.d(t,{Z:()=>v});var r=n(1911),i=n(2091),o=n(3623),a=n(3854),c=n(4536),s=n(3618);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,d(r.key),r)}}function d(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==l(t)?t:t+""}var f=window.Ice,h=window.CRVideo,p=window.Cr,_=window.Conference,g=window.Resm,C=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initData()},(t=[{key:"initData",value:function(){console.crlog("[Proxy] ProxyModule initData..."),this.crmtStr="",this.userDetail=null,this.startPingTime=0,this.acssvrs=[],this.bestNetworkAccessSvr=null,this.AccessLoginStartTime=null,this.crmt=null,this.waitAvailableTimer=-1,this.curAccessServer=null,this.loginRequest=null,this.availableSvrs=[]}},{key:"loginControl",value:function(e,t){var n=this;this.AccessLoginStartTime=(new Date).getTime(),this.crmtStr=e,this.userDetail=t,p._proxy._logining=!0,p._proxy.initCon(),this.getWebrtcAccKey(e).then((function(e){n.parseCrmt(e),console.crlog("[Proxy] Control login begain..."),n.probeAcssvr().then((function(){n.connectToAccess(n.bestNetworkAccessSvr).then((function(e){return console.crlog("[Proxy] Access ".concat(n.curAccessServer.acssvr[0]," connected.. do login control..")),p._proxy._adapter=e,n.serverLogin()}))})).catch((function(e){return __Rtc.CR__LoginRslt.callback(e[0],e[1].toString())}))})).catch((function(e){return __Rtc.CR__LoginRslt.callback(e[0],e[1].toString())}))}},{key:"serverLogin",value:function(e){var t=this;console.crlog("[Proxy] Server login...");var n="c"+this.crmt.MEET[0]+"/ConferenceRoom  @ c"+this.crmt.MEET[0]+"-ReplicaConfCtrlAdapters";e=e||_.ConferenceRoomPrx.uncheckedCast(p._proxy._communicator.stringToProxy(n)),this.loginRequest||(this.loginRequest=this.getLoginRequest()),e.login(this.loginRequest).then((function(e){s.Z.init(t.curAccessServer.acssvr[0],t.crmt.MEET[0]);var n=t.parseLoginResponse(e);return c.Z.SDK_Event.emitEventListener("startNetDiskService",p._proxy._communicator,NetDiskService,t.crmt.MEET[0],+t.crmt.ACNT[0]),console.crlog("[Proxy] Access & control login consuming: ".concat((new Date).getTime()-t.AccessLoginStartTime,"ms")),__Rtc.CR__LoginRslt.callback(0,"",n)})).exception((function(n){p._proxy._logining=!1,t.handlerLoginException(n,e).then((function(e){return __Rtc.CR__LoginRslt.callback(e[0],e[1])}))}))}},{key:"getWebrtcAccKey",value:function(e){return new Promise((function(t,n){var o="https://".concat(h.webServerAddr).concat(r.Z.getWebrtcAccKey),s=c.Z.base64decode(e);s="".concat(s,"\r\n-PRODUCT=win32_net"),s="".concat(s,"\r\n-JSCLIENT=webrtc");var l="crmt:".concat(c.Z.base64encode(s).replace(/\r\n/g,""));console.crlog("[Proxy] WebAPI request url: ".concat(o,", data: crmt:******")),(0,i.Z)({type:"POST",url:o,data:l,dataType:"text",success:function(e,r){return"success"==r?-1!=e.indexOf("erro:")?(p._proxy._logining=!1,-1!=e.indexOf("erro:2")?n([800,e]):n([3,e])):(console.crlog("[Proxy] WebAPI request url: ".concat(o,", success!")),t(e)):(p._proxy._logining=!1,n([202,"服务器没有响应"]))},error:function(e){return"MeetSDK"==h.SDKKey?(console.crlog("[Proxy] MeetSDK.enterMeetingRslt.target(202, '', '', ".concat(h.enterMeetingCookie,")")),a.Z.enterMeetingRslt.target(202,"","",h.enterMeetingCookie)):(console.crlog("[Proxy] CRVideo_EnterMeetingRslt.target(202, ".concat(h.enterMeetingCookie,")")),CRVideo_EnterMeetingRslt.target(202,h.enterMeetingCookie)),CRVideo_UploadingLog(),console.crlog("[Proxy][Error] Web api getWebrtcAccKey fail! ".concat(e)),console.error(e),p._proxy._logining=!1,n([1,"未知错误"])}})}))}},{key:"parseCrmt",value:function(e){this.crmt={};for(var t=c.Z.base64decode(e.substr(5)).split("\n"),n=0;n<t.length;n++){var r=t[n].match(/-(\w+?)=(\S+)/);null!=r&&3==r.length&&(this.crmt[r[1]]=r[2],console.crlog("[Proxy] parseCrmt>".concat(n,": ").concat(r[1]," ").concat(r[2])))}for(var i=this.crmt.ACNT.split(";"),a=i[3].match(/../g),s=new ArrayBuffer(a.length),l=new DataView(s),u=[],d=0;d<a.length;d++)l.setUint8(d,parseInt(a[d],16)),u[d]=l.getUint8(d);var h=c.Z.utf8ByteToUnicodeStr(u);i[3]=h,this.userDetail.nickname=""==this.userDetail.nickname?h:this.userDetail.nickname,this.userDetail.userId=""==this.userDetail.userId?o.Z.userInfo.getUserInfo(h)?o.Z.userInfo.getUserInfo(h):f.generateUUID():this.userDetail.userId,this.crmt.ACNT=i,this.crmt.ACNT[1]=4==this.crmt.ACNT[1]?6:this.crmt.ACNT[1],this.crmt.WEBID=i[0],this.crmt.MEET=this.crmt.MEET.split(";");for(var p=this.crmt.ACSSVR.split(";"),_=[],g=0;g<p.length;g++)""!=p[g]&&_.push(p[g].split(":"));this.crmt.ACSSVR=_}},{key:"probeAcssvr",value:function(){var e=this;return new Promise((function(t,n){p._proxy._communicator=f.initialize(p._proxy._initData),h.communicatorIc=p._proxy._communicator,e.getFastestNetSvr().then((function(r){return r.forEach((function(t){e.bestNetworkAccessSvr||-1==t.delay?e.bestNetworkAccessSvr.delay>t.delay&&-1!=t.delay&&(e.bestNetworkAccessSvr=t):e.bestNetworkAccessSvr=t})),e.bestNetworkAccessSvr?t():(console.crlog("[Resm][Error] Login to access fail, have not available access server!"),n([205,"没有可用服务器"]))})).catch((function(){return console.crlog("[Resm][Error] Login to access fail, have not available access server!"),n([205,"没有可用服务器"])}))}))}},{key:"getFastestNetSvr",value:function(){var e=this;return new Promise((function(t,n){var r=e.crmt.ACSSVR;e.availableSvrs=[],r.forEach((function(n,i){e.accessPing(n,i).then((function(n){if(e.availableSvrs.push(n),e.availableSvrs.length==r.length)return clearInterval(e.waitAvailableTimer),t(e.availableSvrs)}))}));var i=200;!function r(){e.waitAvailableTimer=setTimeout((function(){return e.availableSvrs.length>0?t(e.availableSvrs):i<=15e3?(i+=200,clearTimeout(e.waitAvailableTimer),void r()):n()}),200)}()}))}},{key:"accessPing",value:function(e,t){var n=this;return console.crlog("[Resm] Ping 第 ".concat(t+1," 台服务器：").concat(JSON.stringify(e))),new Promise((function(t,r){var i=e[3];if(i.indexOf("sig")>-1){var o=parseInt(i.split("/sig/")[0]);i="/sig/"+i.split("/sig/")[1];var a="s"+e[0]+"/Access:"+p._proxy._protocol+" -r "+i+" -h "+e[1]+" -p "+o+" -t 5000";console.crlog("[Resm] StringToProxy: ".concat(a));var c=Glacier2.RouterPrx.uncheckedCast(p._proxy._communicator.stringToProxy(a))}else{o=parseInt(e[3])+4;var s="s"+e[0]+"/Access:"+p._proxy._protocol+" -h "+e[1]+" -p "+o+" -t 5000";console.crlog("[Resm] StringToProxy: ".concat(s)),c=Glacier2.RouterPrx.uncheckedCast(p._proxy._communicator.stringToProxy(s))}n.startPingTime=(new Date).getTime(),c.ice_ping().then(function(){var n=(new Date).getTime()-this.startPingTime,r=p._proxy._protocol+"://"+e[1]+":"+o;return console.crlog("[Resm] Finish ping(".concat(e[1],") 耗时：").concat(n,"ms, report:").concat(Math.floor(n/4))),t({url:r,delay:n,routerPrx:c,acssvr:e})}.bind(n)).exception(function(t){return console.crlog("[Resm][Error] Finish ping(".concat(e[1],") Bad Network!")),r({url,delay:-1,acssvr:e})}.bind(n))}))}},{key:"connectToAccess",value:function(e,t){var n=this;return new Promise((function(r,i){console.crlog("[Access] Connect to access server: ".concat(e.acssvr[0],", isResmAccess: ").concat(t||!1)),h.accessSvr=e.acssvr[1],h.accessNo=e.acssvr[0],n.curAccessServer=e,p._proxy._routerPrx=e.routerPrx,p._proxy._routerPrx.createSession("N"+n.crmt.MEET[0],"").then((function(e){p._proxy._session=e})).then((function(){p._proxy._routerPrx.getCategoryForClient().then((function(e){if(p._proxy._category=e,p._proxy._communicator.setDefaultRouter(p._proxy._routerPrx),t)p._proxy._communicator.createObjectAdapterWithRouter("CallbackAdapter",p._proxy._routerPrx).then((function(e){return r(e)})).exception((function(e){return i(e)}));else{var o=g.AccessMPrx.uncheckedCast(p._proxy._communicator.stringToProxy("d0/AccessM")),a=n.crmt.DOMAIN.split(";")[0],c=n.crmt.MEET[0],s=n.crmt.MYPUBIP.split(";")[0],l=f.generateUUID(),u=new g.NetworkResult;s=s.split(":")[0],h.myPublicIP=s,n.availableSvrs.forEach((function(e){var t=new g.NetworkStatus;t.latency=Math.floor(e.delay/4),window.__Rtc.__acssvr&&window.__Rtc.__acssvr==e.acssvr[0]&&(t.latency=1),t.lostRate=0,u.set(e.acssvr[0],t)})),console.crlog("[Resm] NetworkResult: ".concat(JSON.stringify(u))),console.crlog("[Resm] Resm locate".concat(JSON.stringify({domain:a,confID:c,publicIP:s,uuid:l}))),o.locate(a,c,u,s,l).then((function(e){if(console.crlog("[Resm] Got resm accessNo: ".concat(e)),h.resmAccessNo=e,+e!=+n.bestNetworkAccessSvr.acssvr[0]){var t=!1;n.availableSvrs.forEach((function(o){o.acssvr[0]==e&&(t=!0,n.connectToAccess(o,!0).then((function(e){return r(e)})).catch((function(e){return i(e)})))})),t||n.connectToAccess(n.bestNetworkAccessSvr,!0).then((function(e){return r(e)})).catch((function(e){return i(e)}))}else p._proxy._communicator.createObjectAdapterWithRouter("CallbackAdapter",p._proxy._routerPrx).then((function(e){return r(e)})).exception((function(e){return i(e)}))})).exception((function(e){return console.crlog("[Resm][Error] Resm locate fail! ".concat(e)),console.error(e),p._proxy._communicator.createObjectAdapterWithRouter("CallbackAdapter",p._proxy._routerPrx).then((function(e){return r(e)})).exception((function(e){return i(e)}))}))}})).exception((function(e){console.crlog("[Resm][Error] Resm getCategoryForClient fail! ".concat(e)),console.error(e)}))}))}))}},{key:"getLoginRequest",value:function(){var e=new _.LoginRequest,t=o.Z.userInfoHistory.getUserHistory(this.crmt.MEET[0],this.userDetail.userId,this.crmt.ACNT[0],this.crmt.ACNT[1]),n=t?t.memberID:this.crmt.ACNT[0],r=t?t.memberType:this.crmt.ACNT[1],i=t?t.termId:"",a=this.userDetail.nickname,c=this.userDetail.userId,s=window.localStorage.getItem("CRRTCSDK_Client_PC_ID")||f.generateUUID();window.localStorage.setItem("CRRTCSDK_Client_PC_ID",s);var l="",u=/macintosh|mac os x/i.test(navigator.userAgent),d=/windows|win32/i.test(navigator.userAgent),g=/linux/i.test(navigator.userAgent),C=navigator.userAgent.indexOf("Android")>-1||navigator.userAgent.indexOf("Adr")>-1;navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)?l=_.PLATFORMTYPE_IOS:u?l=_.PLATFORMTYPE_MAC:d?l=_.PLATFORMTYPE_WIN32:C?l=_.PLATFORMTYPE_ANDROID:g&&(l=_.PLATFORMTYPE_LINUX),e.memberId=n,e.memberType=r,e.nickname=a,e.termId=i,e.priv_dat=c,e.confId=this.crmt.MEET[0],e.confKey=this.crmt.MEET[1],e.accessNo=this.curAccessServer.acssvr[0],e.callbacks=new f.HashMap,e.extProperty=new f.HashMap,e.publicIP=this.crmt.MYPUBIP,e.extProperty.set("sdktype","video"),e.extProperty.set("client_platform",l),e.extProperty.set("priv_dat",c),e.extProperty.set("h5sdk_ver",h.sdkver),e.extProperty.set("sdk_ver",h.sdkver),e.extProperty.set("client_pcid",s),e.extProperty.set("browser",__Rtc.CRBrowser.curBrowserCfg.platform),e.extProperty.set("rtc_codecs",window.__Rtc.rtc_codecs),e.extProperty.set("client_device",_.DEVICETYPE_WEBRTC),e.extProperty.set("slice_ver",_.SLICE_VER),"MeetSDK"==h.SDKKey&&e.extProperty.set("client_ver",CRMeetAppVer);var v=new f.Identity;v.name="ConferenceCallback",v.category=p._proxy._category,p._proxy._conferenceReceptor=new __Rtc.ConferenceReceptor,p._proxy._conferenceReceptor.setProxy(p._proxy),p._proxy._adapter.add(p._proxy._conferenceReceptor,v);var m=_.ConferenceCallbackPrx.uncheckedCast(p._proxy._adapter.createDirectProxy(v));e.callbacks.set("ConferenceCallback",m);var y=new f.Identity;y.name="IMCallback",y.category=p._proxy._category,p._proxy._chatReceptor=new __Rtc.ChatReceptor,p._proxy._chatReceptor.setProxy(p._proxy),p._proxy._adapter.add(p._proxy._chatReceptor,y);var S=_.IMCallbackPrx.uncheckedCast(p._proxy._adapter.createDirectProxy(y));e.callbacks.set("IMCallback",S);var I=new f.Identity;I.name="FileTransferCallback",I.category=p._proxy._category,p._proxy._fileTransferReceptor=new __Rtc.FileTransferReceptor,p._proxy._fileTransferReceptor.setProxy(p._proxy),p._proxy._adapter.add(p._proxy._fileTransferReceptor,I);var R=_.FileTransferCallbackPrx.uncheckedCast(p._proxy._adapter.createDirectProxy(I));e.callbacks.set("FileTransferCallback",R);var w=new f.Identity;w.name="AnsQueCallback",w.category=p._proxy._category,p._proxy._ansQueReceptor=new __Rtc.AnsQueReceptor,p._proxy._ansQueReceptor.setProxy(p._proxy),p._proxy._adapter.add(p._proxy._ansQueReceptor,w);var b=_.AnsQueCallbackPrx.uncheckedCast(p._proxy._adapter.createDirectProxy(w));e.callbacks.set("AnsQueCallback",b);var E=new f.Identity;E.name="VideoCallback",E.category=p._proxy._category,p._proxy._videoReceptor=new __Rtc.VideoReceptor,p._proxy._videoReceptor.setProxy(p._proxy),p._proxy._adapter.add(p._proxy._videoReceptor,E);var D=_.VideoCallbackPrx.uncheckedCast(p._proxy._adapter.createDirectProxy(E));e.callbacks.set("VideoCallback",D);var P=new f.Identity;P.name="AudioCallback",P.category=p._proxy._category,p._proxy._audioReceptor=new __Rtc.AudioReceptor,p._proxy._audioReceptor.setProxy(p._proxy),p._proxy._adapter.add(p._proxy._audioReceptor,P);var T=_.AudioCallbackPrx.uncheckedCast(p._proxy._adapter.createDirectProxy(P));e.callbacks.set("AudioCallback",T);var x=new f.Identity;x.name="MS.MSClient",x.category=p._proxy._category,p._proxy._mSClientI=new __Rtc.MSClientI,p._proxy._mSClientI.setProxy(p._proxy),p._proxy._adapter.add(p._proxy._mSClientI,x);var M=MS.MSClientPrx.uncheckedCast(p._proxy._adapter.createDirectProxy(x));e.callbacks.set("MS.MSClient",M);var A=new f.Identity;A.name="ScreenShareClient",A.category=p._proxy._category,p._proxy._screenShareReceptor=new __Rtc.ScreenShareReceptor,p._proxy._screenShareReceptor.setProxy(p._proxy),p._proxy._adapter.add(p._proxy._screenShareReceptor,A);var O=_.ScreenShareClientPrx.uncheckedCast(p._proxy._adapter.createDirectProxy(A));e.callbacks.set("ScreenShareClient",O);var k=new f.Identity;k.name="MediaCallback",k.category=p._proxy._category,p._proxy._mediaReceptor=new __Rtc.MediaReceptor,p._proxy._mediaReceptor.setProxy(p._proxy),p._proxy._adapter.add(p._proxy._mediaReceptor,k);var V=_.MediaCallbackPrx.uncheckedCast(p._proxy._adapter.createDirectProxy(k));e.callbacks.set("MediaCallback",V);var N=new f.Identity;N.name="WhiteBoardCallback",N.category=p._proxy._category,p._proxy._whiteBoardReceptor=new __Rtc.WhiteBoardReceptor,p._proxy._whiteBoardReceptor.setProxy(p._proxy),p._proxy._adapter.add(p._proxy._whiteBoardReceptor,N);var L=_.WhiteBoardCallbackPrx.uncheckedCast(p._proxy._adapter.createDirectProxy(N));e.callbacks.set("WhiteBoardCallback",L);var U=new f.Identity;U.name="SyncCtrlCallback",U.category=p._proxy._category,p._proxy._syncCtrlReceptor=new __Rtc.SyncCtrlReceptor,p._proxy._syncCtrlReceptor.setProxy(p._proxy),p._proxy._adapter.add(p._proxy._syncCtrlReceptor,U);var j=_.SyncCtrlCallbackPrx.uncheckedCast(p._proxy._adapter.createDirectProxy(U));e.callbacks.set("SyncCtrlCallback",j);var B=new f.Identity;B.name="RollCallCallback",B.category=p._proxy._category,p._proxy._rollCallReceptor=new __Rtc.RollCallReceptor,p._proxy._rollCallReceptor.setProxy(p._proxy),p._proxy._adapter.add(p._proxy._rollCallReceptor,B);var F=_.RollCallCallbackPrx.uncheckedCast(p._proxy._adapter.createDirectProxy(B));return e.callbacks.set("RollCallCallback",F),e}},{key:"parseLoginResponse",value:function(e){var t=this;this.crmt.WEBLOGCFG&&!h.logproxy&&__Rtc.postCmd.IceLogCreate();var n={};n.termId=e.termId,n.activeMembers=e.activeMembers,n.myDetail=e.myDetail,n.serverTime=1e3*e.ServerUTCTime-(new Date).getTime(),n.isBegan=e.isBegan,n.countdown=e.countdown,n.mainVideoTermID=e.mainVideoTermID,n.wbDescibes=e.wbDescibes||[],n.ServerUTCTime=e.ServerUTCTime,n.bAllowWall=e.bAllowWall,n.bFull=e.bFull,n.bRoomLocked=e.bRoomLocked,n.curMainTab=e.curMainTab,n.curSubTab=e.curSubTab,n.option=e.option,n.lastElemValue=e.lastElemValue,n.lastTabValue=e.lastTabValue,n.windowMode=e.windowMode,n.meetID=this.crmt.MEET[0];for(var r=e.confInfo.keys(),i={},a=0;a<r.length;a++)i[r[a]]=e.confInfo.get(r[a]);i.confid=this.crmt.MEET[0],n.confInfo=i,o.Z.server.wbServer=i.ccfg_wbv2_h5||"",console.crlog("[[Board]]WBServer:".concat(o.Z.server.wbServer));for(var c=0;c<n.activeMembers.length;c++){var s=n.activeMembers[c];window.__Rtc.CRRTCConf.parseMemberInfo(s),s.termId==n.termId&&(n.nickname=s.nickname,n.userId=s.userId,n.bindId=s.bindId,n.openedCamIDs=s.openedCamIDs)}return p._proxy._screenShareCtrl=_.ScreenShareCtrlPrx.uncheckedCast(e.modules.get("ScreenShareCtrl")),p._proxy._whiteBoardCtrl=_.WhiteBoardCtrlPrx.uncheckedCast(e.modules.get("WhiteBoardCtrl")),p._proxy._chatRequest=_.IMSessionPrx.uncheckedCast(e.modules.get("IMSession")),p._proxy._mediaCtrl=_.MediaCtrlPrx.uncheckedCast(e.modules.get("MediaCtrl")),p._proxy._ansQuesCtrl=_.AnsQuesCtrlPrx.uncheckedCast(e.modules.get("AnsQuesCtrl")),p._proxy._rollCallSession=_.RollCallSessionPrx.uncheckedCast(e.modules.get("RollCallSession")),p._proxy._syncCtrl=_.SyncCtrlPrx.uncheckedCast(e.modules.get("SyncCtrl")),p._proxy._audioCtrl=_.AudioCtrlPrx.uncheckedCast(e.modules.get("AudioCtrl")),p._proxy._conferenceRequest=_.ConferenceSessionPrx.uncheckedCast(e.modules.get("ConferenceSession")),p._proxy._clientReport=MS.ClientReportPrx.uncheckedCast(e.modules.get("MS.ClientReport")),p._proxy._videoCtrl=_.VideoCtrlPrx.uncheckedCast(e.modules.get("VideoCtrl")),p._proxy._logining=!1,o.Z.userInfoHistory.setUserHistory(+this.crmt.MEET[0],n.userId,+e.myDetail.id,+e.myDetail.type,{termId:e.termId,memberType:e.myDetail.type,memberID:e.myDetail.id}),setTimeout((function(){console.crlog("[Resm] Finally using accessNo: ".concat(h.accessNo)),t.availableSvrs.forEach((function(e){+e.acssvr[0]!=+h.accessNo&&e.routerPrx.ice_getConnection().then((function(t){console.crlog("[Resm] Close access connection: ".concat(e.acssvr[0])),t.close()}))}))}),5e3),new p.MeetInfo(n)}},{key:"handlerLoginException",value:function(e){var t=this;return new Promise((function(n,o){var a=e.toString();if(console.crlog(a),e instanceof f.SocketException)return n([204,"websocket错误"]);if(e instanceof _.MemberOverflowError||e instanceof Glacier2.CannotCreateSessionException){var c={"-1":{code:24,desc:"账号已过期"},"-2":{code:25,desc:"所有终端未授权"},"-3":{code:26,desc:"sip/h323终端未授权"},"-4":{code:27,desc:"IPC终端未授权"},"-5":{code:28,desc:"webrtc/小程序未授权"},"-6":{code:819,desc:"直播观众用户数量已满（购买的直播观众用户数不够)"},"-7":{code:820,desc:"sip用户数量已满（购买的sip用户数不够)"},"-8":{code:821,desc:"IPC用户数量已满（购买的IPC用户数不够)"}},s=null==c[e.error]?802:c[e.error].code,l=null==c[e.error]?"超出并发数或授权到期":c[e.error].desc;return n([s,l])}if(e instanceof _.RoomLockedError)return n([804,"房间已加锁"]);if(e instanceof _.OnlyInviteeCanLogin)return n([70004,"只有被邀请的用户才能入会"]);if(e instanceof _.BalanceLessError)return n([805,"账户余额不足"]);if(e instanceof _.MemberAlreadyInMeet)return n([807,"用户已存在"]);if(e instanceof _.MemberAlreadyInCanTryVisitor)return h.reEnterMeetTimes||(h.reEnterMeetTimes=1),h.reEnterMeetTimes<5?void setTimeout((function(){return console.crlog("[ICE] ReEnter meeting:".concat(h.reEnterMeetTimes)),h.reEnterMeetTimes++,t.crmt.ACNT[0]=0,t.crmt.ACNT[1]=6,t.loginRequest&&(t.loginRequest.memberId=0,t.loginRequest.memberType=6,t.loginRequest.termId=""),t.serverLogin()}),1e3):n([808,"身份重复，需要用临时身份重新入会"]);if(e instanceof f.ObjectNotExistException||e instanceof _.ConferenceEndError)return h.reEnterMeetTimes||(h.reEnterMeetTimes=1),h.reEnterMeetTimes<5?void setTimeout((function(){console.crlog("[ICE] ReEnter meeting:".concat(h.reEnterMeetTimes)),h.reEnterMeetTimes++,console.crlog("[Proxy] Arrange conf with webApi: /servlet/ArrangeConfAPI");var e="https://".concat(h.webServerAddr).concat(r.Z.ArrangeConfAPI);(0,i.Z)({type:"POST",url:e,dataType:"jsonp",jsonp:"jsoncallback",data:{MeetID:Number(t.crmt.MEET[0]),RequestId:f.generateUUID()},success:function(e){setTimeout((function(){console.crlog("[ICE] ReLogin control after arrange conference..."),t.serverLogin()}),500)},error:function(e){return console.crlog("[Proxy] /servlet/ArrangeConfAPI request fail! ".concat(e)),n([803,e.toString()])}})}),1e3):n([803,e.toString()]);if(e instanceof _.ConferencePrepareError||e instanceof _.ConferenceLoginRetry||e instanceof f.FacetNotExistException)if(h.reEnterMeetTimes||(h.reEnterMeetTimes=1),h.reEnterMeetTimes<=10)setTimeout((function(){console.crlog("[ICE] ReEnter meeting:".concat(h.reEnterMeetTimes)),h.reEnterMeetTimes++,t.serverLogin()}),200);else{if(!(h.reEnterMeetTimes<=15))return n([800,e.toString()]);setTimeout((function(){console.crlog("[ICE] ReEnter meeting:".concat(h.reEnterMeetTimes)),h.reEnterMeetTimes++,t.serverLogin()}),1e3)}else{if(!(e instanceof _.ConferenceBusy))return e instanceof _.EnterWaitingRoom?n([70005,"请等待主持人邀请进入会议"]):n([1,e.toString()]);setTimeout((function(){console.crlog("[ICE] Waited ".concat(e.retry_delay," secend, reEnter meeting...")),t.serverLogin()}),1e3*e.retry_delay)}}))}}])&&u(e.prototype,t),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();const v=window.rtcProxy=new C},3618:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,o(r.key),r)}}function o(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}n.d(t,{Z:()=>a});const a=new(function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initData()},(t=[{key:"initData",value:function(){this.serverNo=null,this.confID=null,this.proxy=null}},{key:"init",value:function(e,t){this.serverNo=e,this.confID=+t,this.proxy=MS.RtcSrvPrx.uncheckedCast(Cr._proxy._communicator.stringToProxy("s".concat(e,"/RTCGateway")))}},{key:"GwAudioAlloc2",value:function(e,t){var n=this;return new Promise((function(r,i){var o=new MS.ConferenceInfo;o.confId=n.confID,n.proxy.GwAudioAlloc2(o,e,t).then((function(e,t,n){return r({answerSdp:t,answerSdp2:n})})).exception((function(e){return i(e)}))}))}},{key:"GwVideoAlloc2",value:function(e,t){var n=this;return new Promise((function(r,i){var o=new MS.ConferenceInfo;o.confId=n.confID,n.proxy.GwVideoAlloc2(o,e,t).then((function(e,t){return r({answerSdp:t})})).exception((function(e){return i(e)}))}))}}])&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}())},2495:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=function(e){this.name=e,this.target=function(){try{if("[object Function]"===Object.prototype.toString.call(this.callback)){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];!this.noLogArr.includes(this.name)&&console.crlog("[MeetSDK][Callback] ".concat(this.name,".target(").concat(n,")")),this.callback.apply(null,n)}else!this.noLogArr.includes(this.name)&&console.crlog("[MeetSDK][Callback] Undefined callback: "+e)}catch(e){console.crlog("[MeetSDK] ".concat(e)),console.error(e)}},this.noLogArr=["notifyVideoWallVideos"]}},3854:(e,t,n)=>{"use strict";n.d(t,{Z:()=>P});var r=n(3623),i=n(2495),o=n(2091),a=n(8567),c=n.n(a);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function l(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */l=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function d(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(e){d=function(e,t,n){return e[t]=n}}function f(e,t,n,r){var o=t&&t.prototype instanceof m?t:m,a=Object.create(o.prototype),c=new A(r||[]);return i(a,"_invoke",{value:P(e,n,c)}),a}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=f;var p="suspendedStart",_="suspendedYield",g="executing",C="completed",v={};function m(){}function y(){}function S(){}var I={};d(I,a,(function(){return this}));var R=Object.getPrototypeOf,w=R&&R(R(O([])));w&&w!==n&&r.call(w,a)&&(I=w);var b=S.prototype=m.prototype=Object.create(I);function E(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function D(e,t){function n(i,o,a,c){var l=h(e[i],e,o);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==s(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,a,c)}),(function(e){n("throw",e,a,c)})):t.resolve(d).then((function(e){u.value=e,a(u)}),(function(e){return n("throw",e,a,c)}))}c(l.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function P(t,n,r){var i=p;return function(o,a){if(i===g)throw Error("Generator is already running");if(i===C){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var c=r.delegate;if(c){var s=T(c,r);if(s){if(s===v)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===p)throw i=C,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=g;var l=h(t,n,r);if("normal"===l.type){if(i=r.done?C:_,l.arg===v)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(i=C,r.method="throw",r.arg=l.arg)}}}function T(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var o=h(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,v;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function M(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function O(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(s(t)+" is not iterable")}return y.prototype=S,i(b,"constructor",{value:S,configurable:!0}),i(S,"constructor",{value:y,configurable:!0}),y.displayName=d(S,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,S):(e.__proto__=S,d(e,u,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},E(D.prototype),d(D.prototype,c,(function(){return this})),t.AsyncIterator=D,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new D(f(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(b),d(b,u,"Generator"),d(b,a,(function(){return this})),d(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(M),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return c.type="throw",c.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],c=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(s&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),M(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;M(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:O(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}function u(e,t,n,r,i,o,a){try{var c=e[o](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,i)}function d(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){u(o,r,i,a,c,"next",e)}function c(e){u(o,r,i,a,c,"throw",e)}a(void 0)}))}}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,h(r.key),r)}}function h(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==s(t)?t:t+""}var p=0;function _(){var e=r.Z.auth.getAuth(),t=e.UserName,n=e.UserPswd,i=parseInt((new Date).getTime()/1e3)+p;return{secretId:t,timestamp:i,signature:c()(t+"&"+i+"&"+n)}}const g=new(function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},t=[{key:"getServerTime",value:function(){return new Promise((function(e,t){var n="https://"+r.Z.server.getServerAddr()+"/servlet/httpping";(0,o.Z)({url:n,timeout:2e3,authentication:!1,success:function(t){if(0===t.RspCode){var n=t.Data.curTime;p=n-parseInt((new Date).getTime()/1e3),e()}},error:function(t){console.error(t),e()}})}))}},{key:"createConf",value:function(e){var t=this;return new Promise(function(){var n=d(l().mark((function n(i,a){var c,s,u,d,f,h,g;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(c="/".concat(window.__CRNameUP,"-SERVER/v2/conference"),s="https://"+r.Z.server.getServerAddr()+c,0!==p){n.next=5;break}return n.next=5,t.getServerTime();case 5:g=_(),u=g.secretId,d=g.timestamp,f=g.signature,h={"X-CR-OEMKey":"".concat(window.__CRNameUP),"X-CR-RequestId":Ice.generateUUID(),"X-CR-SecretId":u,"X-CR-Timestamp":d,"X-CR-Signature":f,"X-CR-Type":"terminal"},console.crlog("[WebApi] WebApi: ".concat(c," begain, data: ").concat(e)),(0,o.Z)({url:s,data:e,header:h,timeout:1e4,type:"post",success:function(e){return console.crlog("[WebApi] WebApi: ".concat(c," success! ").concat(JSON.stringify(e))),i(e)},error:function(e){return console.crlog("[WebApi] WebApi: ".concat(c," fail! ").concat(e)),console.error(e),502==e.status?a(502):e.response?a(JSON.parse(e.response)):a(e)}});case 12:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())}},{key:"clientStartMeet",value:function(e){var t=this;return new Promise(function(){var n=d(l().mark((function n(i,a){var c,s;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(c="/servlet/ClientStartMeet",s="https://"+r.Z.server.getServerAddr()+c,0!==p){n.next=5;break}return n.next=5,t.getServerTime();case 5:console.crlog("[WebApi] WebApi: ".concat(c," begain, data: ").concat(e)),(0,o.Z)({url:s,data:e,timeout:2e3,type:"post",success:function(e){return console.crlog("[WebApi] WebAPI ".concat(c," success! ").concat(JSON.stringify(e))),i(e)},error:function(e){return console.crlog("[WebApi] WebApi: ".concat(c," fail! ").concat(e)),console.error(e),a(e)}});case 7:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())}},{key:"getVoteInfo",value:function(e){return new Promise(function(){var t=d(l().mark((function t(n,i){var a,c;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a="/".concat(window.__CRNameUP,"-SERVER/v2/vote/"),c="https://"+r.Z.server.getServerAddr()+a+e,console.crlog("[WebApi] WebApi: ".concat(a)),(0,o.Z)({url:c,timeout:5e3,type:"get",success:function(e){return console.crlog("[WebApi] WebAPI ".concat(a," success! len: ").concat(e.data.length)),n(e)},error:function(e){return console.crlog("[WebApi] WebApi: ".concat(a," fail! ").concat(e)),console.error(e),i(e)}});case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())}}],t&&f(e.prototype,t),n&&f(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}());n(600);function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=C(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=C(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==C(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function S(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */S=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof v?t:v,a=Object.create(o.prototype),c=new A(r||[]);return i(a,"_invoke",{value:P(e,n,c)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var f="suspendedStart",h="suspendedYield",p="executing",_="completed",g={};function v(){}function m(){}function y(){}var I={};l(I,a,(function(){return this}));var R=Object.getPrototypeOf,w=R&&R(R(O([])));w&&w!==n&&r.call(w,a)&&(I=w);var b=y.prototype=v.prototype=Object.create(I);function E(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function D(e,t){function n(i,o,a,c){var s=d(e[i],e,o);if("throw"!==s.type){var l=s.arg,u=l.value;return u&&"object"==C(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,c)}),(function(e){n("throw",e,a,c)})):t.resolve(u).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,c)}))}c(s.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function P(t,n,r){var i=f;return function(o,a){if(i===p)throw Error("Generator is already running");if(i===_){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var c=r.delegate;if(c){var s=T(c,r);if(s){if(s===g)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=_,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var l=d(t,n,r);if("normal"===l.type){if(i=r.done?_:h,l.arg===g)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(i=_,r.method="throw",r.arg=l.arg)}}}function T(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var o=d(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function M(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function O(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(C(t)+" is not iterable")}return m.prototype=y,i(b,"constructor",{value:y,configurable:!0}),i(y,"constructor",{value:m,configurable:!0}),m.displayName=l(y,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,s,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},E(D.prototype),l(D.prototype,c,(function(){return this})),t.AsyncIterator=D,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new D(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(b),l(b,s,"Generator"),l(b,a,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=O,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(M),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return c.type="throw",c.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],c=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(s&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),M(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;M(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:O(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function I(e,t,n,r,i,o,a){try{var c=e[o](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,i)}function R(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){I(o,r,i,a,c,"next",e)}function c(e){I(o,r,i,a,c,"throw",e)}a(void 0)}))}}var w=window.CRVideo,b=(window.__Rtc,window.Ice),E={enterMeetingRslt:new i.Z("enterMeetingRslt")},D=function(e){return new Promise(function(){var t=R(S().mark((function t(n,r){return S().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return w.startEnterTimestamp=(new Date).getTime(),w.enterMeetingCookie=e,w.destroyMeetingConnect(),t.next=5,w.leftMeetingFun();case 5:if(!w.isWebRTC){t.next=16;break}if(window.__Rtc.CRRTCAudio.createAudioElement(),!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices){t.next=12;break}console.crlog("[MeetSDK] EnumerateDevices on enterConf..."),navigator.mediaDevices.enumerateDevices().then((function(e){return console.crlog("[MeetSDK] EnumerateDevices success:".concat(JSON.stringify(e))),w.updateDevicesList(e),n()})).catch((function(e){return console.crlog("navigator.mediaDevices.enumerateDevices error: ".concat(e)),console.error(e),r(8003)})),t.next=14;break;case 12:return console.crlog("[MeetSDK] navigator.mediaDevices is undefined!!! protocal: ".concat(window.location.protocol)),t.abrupt("return",r(8004));case 14:t.next=17;break;case 16:return t.abrupt("return",n());case 17:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())};const P=m(m({},E),{},{createConf:function(e,t){return console.crlog("[MeetSDK] MeetSDK.createConf(".concat(JSON.stringify(e),",").concat(t,")")),new Promise((function(t,n){g.createConf(JSON.stringify(Object.assign(e,{RequestId:b.generateUUID()}))).then((function(e){return console.crlog("[MeetSDK] CreateMeeting success: ".concat(JSON.stringify(e.meetInfo))),t(e.meetInfo)})).catch((function(e){return console.crlog("[MeetSDK] CreateMeeting fail!"),e.code&&22010==e.code&&(e=70001),n(e)}))}))},enterMeeting:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3?arguments[3]:void 0;if(console.crlog("[MeetSDK] MeetSDK.enterMeeting(".concat(e,",***,").concat(n,",").concat(r,")")),!n){var i=0;do{i=Math.floor(1e4*Math.random())}while(i<1e3);n="临时用户".concat(i)}var o=b.generateUUID();window.CRVideo_EnterMeeting(e,t,o,n,r)},enterConf:function(e,t){return R(S().mark((function n(){var i;return S().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:i=function(){var n=r.Z.auth.getAuth(),i=n.UserName,o=n.UserPswd;g.clientStartMeet(JSON.stringify(Object.assign(e,{RequestId:b.generateUUID(),IsNewClient:1,UserName:i,UserPswd:o}))).then((function(e){void 0!==e.RspCode&&0==e.RspCode?(w.crmtStr=e.CRMTStr.replace(/CRMT[\.|\w]{0,}:/,""),w.initweb()):E.enterMeetingRslt.target(window.WEB_SDK_ERR(e.RspCode),"","",t)})).catch((function(e){E.enterMeetingRslt.target(202,"","",t)}))},console.crlog("[MeetSDK] MeetSDK.enterConf(".concat(JSON.stringify(e),",").concat(t,")")),D(t).then((function(){i()})).catch((function(e){console.crlog("[MeetSDK] MeetSDK.enterMeetingRslt.target(".concat(e,", '', '', ").concat(t,")")),MeetSDK.enterMeetingRslt.target(e,"","",t),CRVideo_UploadingLog()}));case 3:case"end":return n.stop()}}),n)})))()},enterMeetByCrmt:function(e,t){console.crlog("[MeetSDK] MeetSDK.enterMeetByCrmt(".concat(e,"), ").concat(t)),D(t).then((function(){w.crmtStr=e,w.initweb()})).catch((function(e){console.crlog("[MeetSDK] MeetSDK.enterMeetingRslt.target(".concat(e,", '', '', ").concat(t,")")),MeetSDK.enterMeetingRslt.target(e,"","",t),CRVideo_UploadingLog()}))},getVoteInfo:g.getVoteInfo})},8973:(__unused_webpack_module,__unused_webpack___webpack_exports__,__webpack_require__)=>{"use strict";var _src_inMeeting_ice_IceApi_videoCtrl__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(9716),_src_common_utils_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(4536),_src_utils_VirtualBackgroundSource_selfie_segmentation__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(7532),_src_utils_VirtualBackgroundSource_selfie_segmentation__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_src_utils_VirtualBackgroundSource_selfie_segmentation__WEBPACK_IMPORTED_MODULE_2__),_src_inMeeting_meetSDK_meet_sdk_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(3854),_src_inMeeting_meetSDK_callback_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(2495),_src_inMeeting_videoSizeDef_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(9967),_src_inMeeting_ice_rtcGateway_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(3618);function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _regeneratorRuntime(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_regeneratorRuntime=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof C?t:C,a=Object.create(o.prototype),c=new x(r||[]);return i(a,"_invoke",{value:E(e,n,c)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var f="suspendedStart",h="suspendedYield",p="executing",_="completed",g={};function C(){}function v(){}function m(){}var y={};l(y,a,(function(){return this}));var S=Object.getPrototypeOf,I=S&&S(S(M([])));I&&I!==n&&r.call(I,a)&&(y=I);var R=m.prototype=C.prototype=Object.create(y);function w(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function n(i,o,a,c){var s=d(e[i],e,o);if("throw"!==s.type){var l=s.arg,u=l.value;return u&&"object"==_typeof(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,c)}),(function(e){n("throw",e,a,c)})):t.resolve(u).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,c)}))}c(s.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function E(t,n,r){var i=f;return function(o,a){if(i===p)throw Error("Generator is already running");if(i===_){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var c=r.delegate;if(c){var s=D(c,r);if(s){if(s===g)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=_,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var l=d(t,n,r);if("normal"===l.type){if(i=r.done?_:h,l.arg===g)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(i=_,r.method="throw",r.arg=l.arg)}}}function D(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,D(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var o=d(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function M(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(_typeof(t)+" is not iterable")}return v.prototype=m,i(R,"constructor",{value:m,configurable:!0}),i(m,"constructor",{value:v,configurable:!0}),v.displayName=l(m,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,s,"GeneratorFunction")),e.prototype=Object.create(R),e},t.awrap=function(e){return{__await:e}},w(b.prototype),l(b.prototype,c,(function(){return this})),t.AsyncIterator=b,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new b(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(R),l(R,s,"Generator"),l(R,a,(function(){return this})),l(R,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=M,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return c.type="throw",c.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],c=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(s&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;T(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:M(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function asyncGeneratorStep(e,t,n,r,i,o,a){try{var c=e[o](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,i)}function _asyncToGenerator(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){asyncGeneratorStep(o,r,i,a,c,"next",e)}function c(e){asyncGeneratorStep(o,r,i,a,c,"throw",e)}a(void 0)}))}}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_toPropertyKey(r.key),r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==_typeof(t)?t:t+""}function _toPrimitive(e,t){if("object"!=_typeof(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=_typeof(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var CR=window.CRVideo,Ice=window.Ice,CRVideo_VideoInfoObj=_createClass((function e(t,n,r){_classCallCheck(this,e),this.userID=t,this.videoID=n,this.videoName=r})),_ConnectItem=_createClass((function e(t,n){_classCallCheck(this,e),this.camID=t,this.ssValue=0,this.msid=n,this.offer=null,this.answer=null,this.offer_cb=null,this.answer_cb=null,this.connection=null,this.candidates=[],this.stream=null,this.rtpLogTimer=-1}));window._ConnectItemClass=_ConnectItem;var _UserConnectList=_createClass((function e(t){_classCallCheck(this,e),this.termID=t,this.list=[]})),VideoClass=function(){return _createClass((function e(){_classCallCheck(this,e),this.initData(),this.initIceCallback(),this.initIceNotify(),this.initSDKInterface()}),[{key:"initData",value:function(){console.crlog("[Video] VideoModule initData..."),this.VSTATUS={VUNKNOWN:0,VNULL:1,VCLOSE:2,VOPEN:3,VOPENING:4},this.vwalllo=0,this.videoWallList=[],this.mainVideoTermID=0,this.windowMode=""}},{key:"initIceCallback",value:function(){this.ICECallback={enableSendVideo2Internet:this.enableSendVideo2Internet,disableSendVideo2Internet:this.disableSendVideo2Internet,updateAllCameraInfosRlst:function(e){console.crlog("[Video] ICE Callback --\x3e updateAllCameraInfosRlst, params:".concat(JSON.stringify({errCode:e})))},startVideoRslt:function(e){console.crlog("[Video] ICE Callback --\x3e startVideoRslt, params:".concat(JSON.stringify({errCode:e})))},stopVideoRslt:function(e){console.crlog("[Video] ICE Callback --\x3e stopVideoRslt, params:".concat(JSON.stringify({errCode:e})))},reqOpenVideoRslt:function(e){console.crlog("[Video] ICE Callback --\x3e reqOpenVideoRslt, params:".concat(JSON.stringify({errCode:e})))},startVideoExRslt:function(e){console.crlog("[Video] ICE Callback --\x3e startVideoExRslt, params:".concat(JSON.stringify({errCode:e})))},stopVideoExRslt:function(e){console.crlog("[Video] ICE Callback --\x3e stopVideoExRslt, params:".concat(JSON.stringify({errCode:e})))},setVideoDeviceStatusRslt:function(e){console.crlog("[Video] ICE Callback --\x3e setVideoDeviceStatusRslt, params:".concat(JSON.stringify({errCode:e})))},setOpenedCameraNumberRslt:function(e){console.crlog("[Video] ICE Callback --\x3e setOpenedCameraNumberRslt, params:".concat(JSON.stringify({errCode:e})))},batchSubscribeVideo2Rslt:function(e){console.crlog("[Video] ICE Callback --\x3e batchSubscribeVideo2Rslt, params:".concat(JSON.stringify({errCode:e})))}}}},{key:"initIceNotify",value:function(){var e=this;this.notifyAllowVideoWall=function(e,t){console.crlog("[Video] ICE Notify --\x3e notifyAllowVideoWall, params:".concat(JSON.stringify({bool:e,opID:t})))},this.updateStatus=function(e,t,n){console.crlog("[Video] ICE Notify --\x3e updateStatus, params:".concat(JSON.stringify({termID:e,status:t,opID:n})));var r=CR.allMemberInfo.find((function(t){return t.termId==e}));if(r){try{console.crlog("[Video] Video updateStatus, termID:".concat(e,", userID:").concat(r.userId,", status:").concat(t,", opID:").concat(n))}catch(e){console.error(e)}var i=r.videoStatus||"VUNKNOWN";r.videoStatus=t.name,r.termId==CR.userInfo.termId&&("VOPEN"==t.name?(__Rtc.CRRTCLocalVideo.uploadCurOpenedCamNumber(),__Rtc.CRRTCLocalVideo.getLocalCamStream()):"VCLOSE"==t.name&&__Rtc.CRRTCLocalVideo.stopAllLocalVideoAndConnect()),i!==t.name&&CRVideo_VideoStatusChanged.target(r.userId,CRVideo_VSTATUS[i],CRVideo_VSTATUS[t.name])}},this.notifyOpenVideo=function(e){console.crlog("[Video] ICE Notify: notifyOpenVideo, params:".concat(JSON.stringify({opID:e}))),window.CRVideo_OpenVideo(CR.userInfo.userId)},this.updateFocusWindow=function(t,n){var r;console.crlog("[Video] ICE Notify: updateFocusWindow, params: ".concat(JSON.stringify({mode:t,termID:n}))),r="VSPEAKER_TRACK"==t?1:"VPRESENTER_LOCK"==t?2:"VMANAGER_LOCK"==t?3:0,e.windowMode!=t&&(console.crlog("[Video] Notify mainVideoModeChanged, oldMode:".concat(e.windowMode,", newMode:").concat(t)),e.windowMode=t,CRVideo_NotifyMainVideoModeChanged.target(r));var i=_src_common_utils_js__WEBPACK_IMPORTED_MODULE_1__.Z.termIDtoUserID(n);console.crlog("[Video] Notify updateFocusWindow, mode:".concat(t,", termId:").concat(n,", userId:").concat(i)),e.mainVideoTermID=n,i&&CRVideo_NotifyMainVideoChanged.target(i)},this.updateVLayout2=function(t,n){console.crlog("[Video] ICE Notify: updateVLayout2, params:".concat(JSON.stringify({lo:t,opID:n}))),e.vwalllo=t,__Rtc.CRRTCRemoteVideo.updateSubscribeVideo(),console.crlog("[Video] notifyVideoWallMode.target(".concat(t,")")),_src_inMeeting_meetSDK_meet_sdk_js__WEBPACK_IMPORTED_MODULE_3__.Z.notifyVideoWallMode.target(t)},this.updateMainVideoShowMode=function(e,t){console.crlog("[Video] ICE Notify: updateMainVideoShowMode, params:".concat(JSON.stringify({MVM_value:e,opID:t})))},this.updateVideoListMode=function(e,t){console.crlog("[Video] ICE Notify: updateVideoListMode, params:".concat(JSON.stringify({jsonMode:e,opID:t})))},this.enableUpload2=function(e,t){console.crlog("[Video] ICE Notify: enableUpload2, params:".concat(JSON.stringify({camID:e,ssVal:t}))),e<50&&__Rtc.CRRTCLocalVideo.setUploadSize(e,t)},this.getVideoSetting_async=function(e){console.crlog("[Video] ICE Notify: getVideoSetting_async"),e.ice_response()},this.notifyVideoPolling=function(e,t,n){console.crlog("[Video] ICE Notify: notifyPollingVideo2, params:".concat(JSON.stringify({opID:e,bStart:t,interval:n}))),_src_inMeeting_meetSDK_meet_sdk_js__WEBPACK_IMPORTED_MODULE_3__.Z.notifyVideoPolling.target(t,n)},this.notifyPollingVideo2=function(t,n,r){console.crlog("[Video] ICE Notify: notifyPollingVideo2, params:".concat(JSON.stringify({opID:t,watchIDs:n,jsonDat:r})));var i=[];e.videoWallList=n,n.forEach((function(e){var t=_src_common_utils_js__WEBPACK_IMPORTED_MODULE_1__.Z.termIDtoUserID(e.termID);i.push({userID:t,camID:+e.camID})})),_src_inMeeting_meetSDK_meet_sdk_js__WEBPACK_IMPORTED_MODULE_3__.Z.notifyVideoWallVideos.target(i,r)},this.notifyVideoList=function(e,t){console.crlog("[Video] ICE Notify: notifyVideoList, params:".concat(JSON.stringify({opID:e,jsonDat:t})))},this.notifyUpdateAllCameraInfos=function(e,t){console.crlog("[Video] ICE Notify: notifyUpdateAllCameraInfos, params:".concat(JSON.stringify({termID:e,camInfos:t}))),CR.allMemberInfo.forEach((function(n){if(n.termId==e){var r=new RegExp("\n","g");console.crlog("[Video] TermID:".concat(e,", userID:").concat(n.userId,", updateAllCameraInfos: ").concat(t.replace(r,"|")));var i=t.split("\n").slice(0,-1);n.allCams=i,window.CRVideo_VideoDevChanged.target(n.userId)}}))},this.notifySetOpenedCameraNumber=function(e,t){console.crlog("[Video] ICE Notify --\x3e notifySetOpenedCameraNumber, params:".concat(JSON.stringify({termID:e,camID:t})));var n=[];t.forEach((function(e){return n.push(parseInt(e))})),CR.allMemberInfo.forEach((function(t){if(t.termId==e){console.crlog("[Video] NotifySetOpenedCameraNumber, termID:".concat(t.termId,", userID:").concat(t.userId,", camIDs:").concat(JSON.stringify(n)));var r=t.defaultCam||0,i=n[0],o=t.openedCamIDs||[],a=n.slice(1),c=!1;console.crlog("[Video] Old OpenedCams: ".concat(o)),console.crlog("[Video] Now OpenedCams: ".concat(a)),console.crlog("[Video] Old DefaultCam: ".concat(r)),console.crlog("[Video] Now DefaultCam: ".concat(i)),t.defaultCam=i,t.openedCamIDs=a;for(var s=[],l=[],u=0;u<a.length;u++)o.includes(a[u])||l.push(a[u]),o[u]!=a[u]&&(c=!0);for(var d=0;d<o.length;d++)a.includes(o[d])||s.push(o[d]);return(s.length>0||l.length>0)&&(c=!0),t.userId!==CR.userInfo.userId&&s.forEach((function(t){__Rtc.CRRTCRemoteVideo.connectList.forEach((function(n){n.termID==e&&n.list.forEach((function(n){n.camID%1e4==t&&(console.crlog("[Video] MSID:".concat(n.msid,", termID:").concat(e,", camID:").concat(n.camID," video RTCConnection closed...")),n.connection&&n.connection.close(),n.connection&&(n.connection=null))}))}))})),c&&(console.crlog("[Video] TermID:".concat(t.termId,", userID:").concat(t.userId,", opened cams changed, stoppedCams:").concat(JSON.stringify(s),", addedCams:").concat(JSON.stringify(l))),window.CRVideo_VideoDevChanged.target(t.userId)),i!==r&&(console.crlog("[Video] TermID:".concat(t.termId,", userID:").concat(t.userId,", default camId changed:").concat(r," ----\x3e ").concat(i)),window.CRVideo_DefVideoChanged.target(t.userId,i)),void(e!==CR.userInfo.termId&&__Rtc.CRRTCRemoteVideo.updateSubscribeVideo())}}))}}},{key:"initSDKInterface",value:function(){var e=this;window.CRVideo_SetVideoCfg=function(e){console.crlog("[Video] CRVideo_SetVideoCfg(".concat(JSON.stringify(e),")")),__Rtc.CRRTCLocalVideo.setVideoCfg(e)},window.CRVideo_GetVideoCfg=function(){var e={};for(var t in __Rtc.CRRTCLocalVideo.videoCfg)e[t]=__Rtc.CRRTCLocalVideo.videoCfg[t];return console.crlog("[Video] CRVideo_GetVideoCfg(), return: ".concat(JSON.stringify(e))),e},window.CRVideo_GetVideoStatus=function(t){var n=_src_common_utils_js__WEBPACK_IMPORTED_MODULE_1__.Z.findUserInfoByID(t,"videoStatus")||"VUNKNOWN";return e.VSTATUS[n]},window.CRVideo_GetDefaultVideo=function(e){var t;if(e==CR.userInfo.userId)t=__Rtc.CRRTCLocalVideo.defaultCamID;else{var n=null;CR.allMemberInfo.forEach((function(t){t.userId==e&&(n=null==t.defaultCam?-1:+t.defaultCam)})),t=null!=n?n:0}return+t},window.CRVideo_SetDefaultVideo=function(e,t){try{console.crlog("[Video] CRVideo_SetDefaultVideo(".concat(e,",").concat(t,")")),t=+t}catch(e){console.error(e)}e==CR.userInfo.userId&&__Rtc.CRRTCLocalVideo.setDefaultVideo(t)},window.CRVideo_GetAllVideoInfo=function(e){var t=+_src_common_utils_js__WEBPACK_IMPORTED_MODULE_1__.Z.userIDtoTermID(e),n=[];return t&&t===+CR.userInfo.termId?__Rtc.CRRTCLocalVideo.videoInput.forEach((function(t){n.push(new CRVideo_VideoInfoObj(e,t.id,t.name))})):CR.allMemberInfo.forEach((function(r){r.termId==t&&r.allCams&&r.allCams.forEach((function(t){var r=t.split(";");n.push(new CRVideo_VideoInfoObj(e,+r[0],r[1]))}))})),n},window.CRVideo_OpenVideo=function(e){if(console.crlog("[Video] CRVideo_OpenVideo(".concat(e,")")),e==CR.userInfo.userId)__Rtc.CRRTCLocalVideo.openMyVideo();else{var t=_src_common_utils_js__WEBPACK_IMPORTED_MODULE_1__.Z.userIDtoTermID(e);t&&_src_inMeeting_ice_IceApi_videoCtrl__WEBPACK_IMPORTED_MODULE_0__.Z.reqOpenVideo(t)}},window.CRVideo_CloseVideo=function(e){if(console.crlog("[Video] CRVideo_CloseVideo(".concat(e,")")),e==CR.userInfo.userId)__Rtc.CRRTCLocalVideo.closeMyVideo();else{var t=_src_common_utils_js__WEBPACK_IMPORTED_MODULE_1__.Z.userIDtoTermID(e);_src_inMeeting_ice_IceApi_videoCtrl__WEBPACK_IMPORTED_MODULE_0__.Z.stopVideoEx(t)}},window.CRVideo_AddStreamCam=function(e,t,n){return console.crlog("[Video] CRVideo_AddStreamCam(".concat(e,",").concat(t,",").concat(JSON.stringify(n),")")),__Rtc.CRRTCLocalVideo.addStreamCam(e,t,n)},window.CRVideo_RemoveStreamVideo=function(e){return console.crlog("[Video] CRVideo_RemoveStreamVideo(".concat(e,")")),__Rtc.CRRTCLocalVideo.removeStreamCam(e)},window.CRVideo_AddCanvasVCam=function(e,t,n){console.crlog("[Video] CRVideo_AddCanvasVCam(".concat(e,",").concat(t,",").concat(JSON.stringify(n),")"));var r=n&&n.fps?n.fps:__Rtc.CRRTCLocalVideo.videoCfg.fps;void 0===t&&(t=Ice.generateUUID());var i=e.getContext("2d"),o={type:"canvasStreamCam",canvas:e,ctx:i,putImageFun:function(){i.putImageData(i.getImageData(0,0,e.width,e.height),0,0)}};o.putImageFun();var a=e.captureStream(r||15),c=window.CRVideo_AddStreamCam(a,t,o);return!!c&&new CRVideo_VideoInfoObj(CR.userInfo.userId,c,t)},window.CRVideo_RemoveCanvasVCam=function(e){console.crlog("[Video] CRVideo_RemoveCanvasVCam(".concat(e,")")),window.CRVideo_RemoveStreamVideo(e)},window.CRVideo_GetOpenedVideoIDs=function(e){return _src_common_utils_js__WEBPACK_IMPORTED_MODULE_1__.Z.findUserInfoByID(e,"openedCamIDs")||[]},window.CRVideo_SetEnableMutiVideo=function(e,t){console.crlog("[Video] CRVideo_SetEnableMutiVideo(".concat(e,",").concat(t,")")),__Rtc.CRRTCLocalVideo.VBGConfig.type&&t||e==CR.userInfo.userId&&__Rtc.CRRTCLocalVideo.setEnableMutiVideo(t)},window.CRVideo_GetEnableMutiVideo=function(e){var t=null;return e==CR.userInfo.userId&&(t=__Rtc.CRRTCLocalVideo.multipleCams),console.crlog("[Video] CRVideo_GetEnableMutiVideo(".concat(e,"), return:").concat(t)),t},window.CRVideo_SetVirtualBackground=function(e){console.crlog("[Video] CRVideo_SetVirtualBackground(".concat(JSON.stringify(e),")"));var t=e.type,n=e.color,r=e.image,i=e.destroy,o=e.debuggerStyle;return __Rtc.CRRTCLocalVideo.setVirtualBackground(t,n,r,i,o)},window.CRVideo_SetMainVideo=function(e){return console.crlog("[Video] CRVideo_SetMainVideo(".concat(e,")")),new Promise((function(t,n){var r=_src_common_utils_js__WEBPACK_IMPORTED_MODULE_1__.Z.userIDtoTermID(e);r&&_src_inMeeting_ice_IceApi_videoCtrl__WEBPACK_IMPORTED_MODULE_0__.Z.setFocusWindow("VMANAGER_LOCK",r).then((function(e){return t({errCode:0,errDesc:"success"})}),(function(e){return console.error(e),n(__Rtc.CRCONFERR.Parse(e))}))}))},window.CRVideo_SetMainVideoMode=function(e,t){return console.crlog("[Video] CRVideo_SetMainVideoMode(".concat(e,",").concat(t,")")),new Promise((function(n,r){var i;1==e?i="VSPEAKER_TRACK":2==e?i="VPRESENTER_LOCK":3==e&&(i="VMANAGER_LOCK");var o=_src_common_utils_js__WEBPACK_IMPORTED_MODULE_1__.Z.userIDtoTermID(t);o&&_src_inMeeting_ice_IceApi_videoCtrl__WEBPACK_IMPORTED_MODULE_0__.Z.setFocusWindow(i,o).then((function(e){return n({errCode:0,errDesc:"success"})}),(function(e){return console.error(e),r(__Rtc.CRCONFERR.Parse(e))}))}))},window.CRVideo_GetMainVideo=function(){var t=_src_common_utils_js__WEBPACK_IMPORTED_MODULE_1__.Z.termIDtoUserID(e.mainVideoTermID);return console.crlog("[Video] CRVideo_GetMainVideo(), return: ".concat(t)),t},window.CRVideo_GetMainVideoMode=function(){return e.windowMode},_src_inMeeting_meetSDK_meet_sdk_js__WEBPACK_IMPORTED_MODULE_3__.Z.setVideoWallMode=function(e){return console.crlog("[MeetSDK][Video] MeetSDK.setVideoWallMode(".concat(e,")")),new Promise((function(t,n){_src_inMeeting_ice_IceApi_videoCtrl__WEBPACK_IMPORTED_MODULE_0__.Z.setVLayout2(e).then((function(e){return t({errCode:0,errDesc:"success"})}),(function(e){return console.error(e),n(__Rtc.CRCONFERR.Parse(e))}))}))},_src_inMeeting_meetSDK_meet_sdk_js__WEBPACK_IMPORTED_MODULE_3__.Z.getVideoWallMode=function(){return console.crlog("[MeetSDK][Video] MeetSDK.getVideoWallMode(), return: ".concat(e.vwalllo)),e.vwalllo},_src_inMeeting_meetSDK_meet_sdk_js__WEBPACK_IMPORTED_MODULE_3__.Z.getVideoWallVideoList=function(){return console.crlog("[MeetSDK][Video] MeetSDK.getVideoWallVideoList()"),e.getVideoWallVideoList()},_src_inMeeting_meetSDK_meet_sdk_js__WEBPACK_IMPORTED_MODULE_3__.Z.updatePollingVideo2=function(e){return console.crlog("[MeetSDK][Video] MeetSDK.updatePollingVideo2(".concat(JSON.stringify(e),")")),new Promise((function(t,n){_src_inMeeting_ice_IceApi_videoCtrl__WEBPACK_IMPORTED_MODULE_0__.Z.updatePollingVideo2(e).then((function(e){return t({errCode:0,errDesc:"success"})}),(function(e){return console.error(e),n(__Rtc.CRCONFERR.Parse(e))}))}))},window.CRVideo_DisableCamera=function(e,t){console.crlog("[Video] CRVideo_DisableCamera(".concat(e,",").concat(t,")"));var n=__Rtc.CRRTCLocalVideo.videoInput.find((function(t){return t.id==e}));n&&(n.disabled=t)},window.CRVideo_SetLocVideoAttributes=function(e,t){console.crlog("[Video] CRVideo_SetLocVideoAttributes(".concat(e,", ").concat(JSON.stringify(t),")"));var n=__Rtc.CRRTCLocalVideo.videoInput.find((function(t){return t.id==e}));if(n)for(var r in t)n.locAttr[r]=t[r];null!=t.constraints&&3==CRVideo_GetVideoStatus(CR.userInfo.userId)&&(__Rtc.CRRTCLocalVideo.closeMyVideo(),setTimeout((function(){__Rtc.CRRTCLocalVideo.openMyVideo()}),1e3))},window.CRVideo_GetLocVideoAttributes=function(e){var t=__Rtc.CRRTCLocalVideo.videoInput.find((function(t){return t.id==e}));return t?t.locAttr:{}},window.CRVideo_GetVideoTrackCapabilities=function(e){var t=__Rtc.CRRTCLocalVideo.videoInput.find((function(t){return t.id==e})),n={};return t&&t.stream&&t.stream.active&&((n=t.stream.getVideoTracks()[0].getCapabilities()).pan&&0==n.pan.step&&(n.pan.step=(n.pan.max-n.pan.min)/500),n.tilt&&0==n.tilt.step&&(n.tilt.step=(n.tilt.max-n.tilt.min)/500),n.zoom&&0==n.zoom.step&&(n.zoom.step=(n.zoom.max-n.zoom.min)/500)),console.crlog("[Video] CRVideo_GetVideoTrackCapabilities(".concat(e,"), return: ").concat(JSON.stringify(n))),n},window.CRVideo_GetVideoTrackSettings=function(e){var t=__Rtc.CRRTCLocalVideo.videoInput.find((function(t){return t.id==e})),n={};return t&&t.stream&&t.stream.active&&(n=t.stream.getVideoTracks()[0].getSettings()),console.crlog("[Video] CRVideo_GetVideoTrackSettings(".concat(e,"), return: ").concat(JSON.stringify(n))),n},window.CRVideo_SetVideoPanTiltZoom=function(){var e=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,n){return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:__Rtc.CRRTCLocalVideo.setVideoPanTiltZoom(t,n);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}},{key:"enableSendVideo2Internet",value:function(e){console.crlog("[Video] ICE Notify: enableSendVideo2Internet, params:".concat(JSON.stringify({camID:e})))}},{key:"disableSendVideo2Internet",value:function(e){console.crlog("[Video] ICE Notify: disableSendVideo2Internet, params:".concat(JSON.stringify({camID:e})))}},{key:"videoAllocRawExt2",value:function(e,t,n,r){var i=+t.cameraID,o=+t.srcTermID;console.crlog("[Video] TermID:".concat(o,", camID:").concat(i,", isSelf:").concat(n,",  videoAllocRawExt2... (liteice:").concat(r.get("liteice")||"0",", rtc_streamid:").concat(r.get("rtc_streamid")||null,")")),setTimeout((function(){e.isResponsed||(console.crlog("[Video] TermID:".concat(o,", camID:").concat(i,", isSelf:").concat(n,", waited more than 10s, do cb.ice_response()")),e.ice_response(),e.isResponsed=!0)}),1e4),n?__Rtc.CRRTCLocalVideo.videoAllocRawExt2(e,t,r):__Rtc.CRRTCRemoteVideo.videoAllocRawExt2(e,t,r)}},{key:"modifyPeerAddrExt",value:function(e,t,n,r){if(setTimeout((function(){t.isResponsed||(t.ice_response(),t.isResponsed=!0)}),2e4),"localVideo"==e){var i={type:"answer",sdp:this.modifyAnswerSDP(r.get("sdp"),"sendonly")};__Rtc.CRRTCLocalVideo.modifyPeerAddrExt(i,t,n)}else if("remoteVideo"==e){var o={type:"answer",sdp:this.modifyAnswerSDP(r.get("sdp"),"recvonly")};__Rtc.CRRTCRemoteVideo.modifyPeerAddrExt(o,t,n)}}},{key:"RtcGwVideoAlloc2",value:function(e){var t=this,n=e.logStr;console.crlog("".concat(n," request GwVideoAlloc2(vsParam, HashMap)")),_src_inMeeting_ice_rtcGateway_js__WEBPACK_IMPORTED_MODULE_5__.Z.GwVideoAlloc2(e.vsParam,e.HashMap).then((function(r){if(r.answerSdp){console.crlog("".concat(n," request GwVideoAlloc2 success..."));var i={type:"answer",sdp:t.modifyAnswerSDP(r.answerSdp,e.type)};e.answer=i;var o=" ";i.sdp.includes("VP8")&&(o+="VP8"),i.sdp.includes("H264")&&(o+=" H264"),console.crlog("".concat(n," received answer, length:").concat(i.sdp.length,", codecs:").concat(o)),console.crlog("".concat(i.sdp)),console.crlog("".concat(n," setRemoteDescription(answer)")),e.connection.setRemoteDescription(new RTCSessionDescription(i)).then((function(){console.crlog("".concat(n," setRemoteDescription success!"))})).catch((function(e){console.crlog("".concat(n," setRemoteDescription fail! ").concat(e)),console.error(e)}))}})).catch((function(e){console.error(e)}))}},{key:"modifyOfferSDP",value:function(e,t){var n=t.type,r=t.camID>=1e4?"VP8":"H264",i=[],o=e.split("\r\n");e.match(new RegExp("(\\d+)(?=\\s+".concat(r,")"),"g")).forEach((function(e){return i.push(e.replace(" ".concat(r),""))})),o=o.filter((function(e){return!((e.includes("a=rtcp-fb")||e.includes("a=rtpmap")||e.includes("a=fmtp"))&&!i.includes(e.split(" ")[0].split(":")[1]))}));var a=o.findIndex((function(e){return e.includes("m=video")})),c=[];o[a].split(" ").forEach((function(e,t){t<3&&c.push(e),t>=3&&!isNaN(e)&&i.includes(e)&&c.push(e)})),o[a]=c.join(" ");for(var s=0;s<o.length;s++){o[s].includes("http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01")&&delete o[s]}var l=o.join("\r\n");return l=l.replace("\r\n\r\n","\r\n"),n&&(l=l.replace("a=sendrecv","a=".concat(n))),l}},{key:"modifyAnswerSDP",value:function(e,t){for(var n=e.split("\r\n"),r=0;r<n.length;r++){n[r].includes("http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01")&&delete n[r]}var i=(e=(e=n.join("\r\n")).replace("\r\n\r\n","\r\n")).match(/c=IN IP4(.*?)\r\n/)?e.match(/c=IN IP4(.*?)\r\n/)[0]:"",o=e.match(/b=AS:(.*?)\r\n/)?e.match(/b=AS:(.*?)\r\n/)[0]:"";return i&&e.split(i).length>2&&(e=e.replace("".concat(i).concat(o),"")),"sendonly"==t&&(e=e.replace(";profile-level-id=42001f","")),"recvonly"==t&&(e=e.replace("a=sendrecv","a=sendonly")),e}}])}(),LocalVideoClass=function(){function LocalVideoClass(){_classCallCheck(this,LocalVideoClass),this.selfieSegmentation=null,this.VBGConfig={type:0,videoEle:null,videoCanvas:null,color:"",img:null,style:null},this.initData()}return _createClass(LocalVideoClass,[{key:"initData",value:function(){console.crlog("[Video] LocalVideoModule initData..."),this.lastLocalVideoMSID=12e4,this.defaultCamID=0,this.opendCamsArr=[],this.videoCfg={size:1,fps:15,ratio:1},__Rtc.CRBrowser.curBrowserCfg.isMobile&&(this.videoCfg.ratio=3),this.multipleCams=!1,this.videoInput=[],this.streamCamID=50,this.selfieSegmentationPermission=!1,this.originalTrack=null,this.VBGWorker=null,this.ptzWaitingFlag=!0,this.ptzLastConstraints=null}},{key:"openMyVideo",value:function(){console.crlog("[Video] Open my video..."),__Rtc.CRRTCLocalVideo.videoInput.length>0?_src_inMeeting_ice_IceApi_videoCtrl__WEBPACK_IMPORTED_MODULE_0__.Z.startVideo():(console.crlog("[Video] Open video failed, no video devices!"),console.crlog("[Video] CRVideo_OpenVideoFailed.target(-1, 'No cameras.')"),CRVideo_OpenVideoFailed.target(-1,"No cameras."))}},{key:"closeMyVideo",value:function(){console.crlog("[Video] Close my video..."),__Rtc.CRRTCLocalVideo.stopAllLocalVideoAndConnect(),_src_inMeeting_ice_IceApi_videoCtrl__WEBPACK_IMPORTED_MODULE_0__.Z.stopVideo()}},{key:"virtualBackgroundInit",value:function(){var e=this,t=document.createElement("video");t.autoplay=!0;var n=document.createElement("canvas"),r=n.getContext("2d"),i=new _src_utils_VirtualBackgroundSource_selfie_segmentation__WEBPACK_IMPORTED_MODULE_2__.SelfieSegmentation({locateFile:function(e){return"".concat(CRVideo.virtualBackgroundAssets,"/").concat(e)}});i.setOptions({modelSelection:1}),i.onResults((function(t){var i=e.VBGConfig,o=i.type,a=i.img,c=i.color;if(0==o)return r.clearRect(0,0,n.width,n.height),void r.drawImage(t.image,0,0,n.width,n.height);r.save(),r.clearRect(0,0,n.width,n.height),r.drawImage(t.segmentationMask,0,0,n.width,n.height),r.globalCompositeOperation="source-in",r.drawImage(t.image,0,0,n.width,n.height),1==o&&c?(r.globalCompositeOperation="destination-atop",r.fillStyle=c,r.fillRect(0,0,n.width,n.height)):2==o&&a&&a.complete&&(r.globalCompositeOperation="destination-atop",r.drawImage(a,0,0,n.width,n.height)),r.restore()}));var o=URL.createObjectURL(new Blob([(console.crlog("[Video] Get canvas stream:new Worker..."),"("+function(){var e;self.onmessage=function(t){var n=t.data,r=n.cmd,i=n.fps;"start"===r?(clearTimeout(e),function t(){self.postMessage("draw"),e=setTimeout(t,1e3/i)}()):"stop"===r&&(clearTimeout(e),e=null)}}.toString()+"());")],{type:"text/javascript"})),a=new Worker(o),c=!0;a.onmessage=function(t){"draw"===t.data&&c&&(c=!1,e.selfieSegmentation.send({image:e.VBGConfig.videoEle}).then((function(){c=!0})))},this.VBGConfig.videoCanvas=n,this.VBGConfig.videoEle=t,this.VBGWorker=a,this.selfieSegmentation=i}},{key:"virtualBackgroundUninit",value:function(){this.VBGConfig.style&&document.body.removeChild(this.VBGConfig.videoEle),this.VBGWorker.postMessage({cmd:"stop"}),this.VBGWorker.terminate&&this.VBGWorker.terminate(),this.VBGConfig.videoCanvas=null,this.VBGConfig.videoEle=null,this.VBGWorker=null,this.selfieSegmentation=null}},{key:"setVirtualBackground",value:function(e,t,n){var r=this,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4?arguments[4]:void 0;if(!this.selfieSegmentationPermission)return console.crlog("[Video][Error] Virtual Backgrounds No Permission!"),806;this.VBGConfig.type=e,this.VBGConfig.color=t,this.VBGConfig.img=n,this.VBGConfig.style=o,n&&n.setAttribute("crossOrigin","anonymous");var a,c=_src_common_utils_js__WEBPACK_IMPORTED_MODULE_1__.Z.findUserInfoByID(CR.userInfo.userId,"videoStatus")||"VUNKNOWN";if(3!==__Rtc.CRRTCVideo.VSTATUS[c])return 0;if(this.videoInput.forEach((function(e){e.disabled||!r.multipleCams&&(r.multipleCams||e.id!=r.defaultCamID)||"streamCam"!==e.kind&&e.stream&&"canvasStreamCam"!==e.kind&&(a=e)})),!a)return 0;switch(e){case 0:if(!this.selfieSegmentation)return 0;if(i){var s=this.VBGConfig.videoEle.srcObject;if(a.connect.connection)a.connect.connection.getSenders()[0].replaceTrack(this.originalTrack);if(a.connect2.connection)a.connect2.connection.getSenders()[0].replaceTrack(this.originalTrack);this.originalTrack=null,a.stream=s,a.connect.stream=s,a.connect2.stream=s,this.refreshLocalContainerSrc("",a),this.virtualBackgroundUninit()}break;case 1:case 2:if(!this.selfieSegmentation){this.virtualBackgroundInit(),this.originalTrack=a.stream.getTracks()[0];var l=this.VBGConfig.videoEle;l.srcObject=a.stream,l.onplay=function(){r.VBGConfig.videoCanvas.width=l.videoWidth,r.VBGConfig.videoCanvas.height=l.videoHeight,r.VBGWorker.postMessage({cmd:"start",fps:r.videoCfg.fps});var e=r.VBGConfig.videoEle;o&&(Object.keys(o).forEach((function(t){e.style[t]=o[t]})),document.body.appendChild(e))};var u=this.VBGConfig.videoCanvas.captureStream(1e3/this.videoCfg.fps);if(a.connect.connection)a.connect.connection.getSenders()[0].replaceTrack(u.getTracks()[0]);if(a.connect2.connection)a.connect2.connection.getSenders()[0].replaceTrack(u.getTracks()[0]);a.stream=u,a.connect.stream=u,a.connect2.stream=u,this.refreshLocalContainerSrc("",a)}break;default:reject({errCode:5,errDesc:"type不正确"})}return 0}},{key:"getVirtualBackgroundStream",value:function(e,t){var n=this;this.selfieSegmentation||this.virtualBackgroundInit(),this.originalTrack=e.getTracks()[0];var r=this.VBGConfig,i=r.style,o=r.videoEle;o.srcObject=e,o.onplay=function(){n.VBGConfig.videoCanvas.width=o.videoWidth,n.VBGConfig.videoCanvas.height=o.videoHeight,n.VBGWorker.postMessage({cmd:"start",fps:n.videoCfg.fps}),i&&(Object.keys(i).forEach((function(e){o.style[e]=i[e]})),document.body.appendChild(o))},this.VBGConfig.videoCanvas.width=1920,this.VBGConfig.videoCanvas.height=1080,setTimeout((function(){var e=n.VBGConfig.videoCanvas.captureStream(30);t.stream=e,t.connect.stream=e,t.connect2.stream=e,n.refreshLocalContainerSrc("",t),CRVideo_NotifyVideoStream.target(CR.userInfo.userId,e),CRVideo_NotifyCameraStream.target(CR.userInfo.userId,t.id,e)}),500)}},{key:"parseVideoRatio",value:function(e){var t=null;switch(e){case 1:t={exact:16/9};break;case 2:t={exact:4/3};break;case 3:t={exact:1};break;case 4:t={exact:3/4};break;case 5:t={exact:9/16}}return t}},{key:"parseVideoConstraints",value:function parseVideoConstraints(videoCfg,device){if(!videoCfg||null==videoCfg.size||0!=videoCfg.size){var videoConstraints={};null==videoCfg&&(videoCfg=this.videoCfg),null==videoCfg.ratio&&(videoCfg.ratio=this.videoCfg.ratio);var sdkRatio=this.parseVideoRatio(videoCfg.ratio);null!==sdkRatio&&(videoConstraints.aspectRatio=sdkRatio),videoCfg.aspectRatio&&(videoConstraints.aspectRatio={exact:eval(videoCfg.aspectRatio)}),null==videoCfg.size&&(videoCfg.size=this.videoCfg.size);var width=_src_inMeeting_videoSizeDef_js__WEBPACK_IMPORTED_MODULE_4__.Z.get(videoCfg.size).width||null,height=_src_inMeeting_videoSizeDef_js__WEBPACK_IMPORTED_MODULE_4__.Z.get(videoCfg.size).height||null;return null!==height&&videoConstraints.aspectRatio&&videoConstraints.aspectRatio.exact<=1?videoConstraints.height={ideal:height}:null!==width&&(videoConstraints.width={ideal:width}),null==videoCfg.fps&&(videoCfg.fps=this.videoCfg.fps),videoConstraints.frameRate={ideal:videoCfg.fps},void 0!==device&&(__Rtc.CRBrowser.curBrowserCfg.isMobile?videoConstraints.facingMode={exact:device.includes("user")?"user":"environment"}:videoConstraints.deviceId={exact:device}),1==device&&Reflect.deleteProperty(videoConstraints,"deviceId"),videoConstraints}}},{key:"getCurVideoCfg",value:function(e){var t=this;return new Promise((function(n,r){var i=e.getVideoTracks()[0];if(i&&i.getSettings){var o,a;!function e(){(o=i.getSettings()).height&&o.width?(clearTimeout(a),n(o)):a=setTimeout((function(){e()}),100)}()}else{var c={width:{ideal:_src_inMeeting_videoSizeDef_js__WEBPACK_IMPORTED_MODULE_4__.Z.get(t.videoCfg.size).width},height:{ideal:_src_inMeeting_videoSizeDef_js__WEBPACK_IMPORTED_MODULE_4__.Z.get(t.videoCfg.size).height}};n(c)}}))}},{key:"getMaxbps",value:function(){var e=16e5;switch(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.videoCfg.size){case 5:e=75e3;break;case 6:e=1e5;break;case 7:e=125e3;break;case 8:e=16e4;break;case 9:e=23e4;break;case 10:e=26e4;break;case 11:e=31e4;break;case 1:e=4e5;break;case 12:e=48e4;break;case 2:e=6e5;break;case 13:e=8e5;break;case 3:e=12e5;break;case 4:e=2e6;break;case 14:e=4e6;break;case 15:e=6e6;break;default:e=16e5}return e}},{key:"setMaxbps",value:function(e,t){try{var n,r=e.getSenders()[0];if(!r)return console.crlog("[Video][Error] connection.getSenders()[0] is undefind! setMaxbps fail!");n=t>0?this.getMaxbps(t):163840,n=this.videoCfg.maxbps?this.videoCfg.maxbps:n,this.setVideoSenderParams(r,null,n).then((function(e){console.crlog("[Video] LocalVideoConnection sender setParameters:".concat(JSON.stringify(e),", success!"))})).catch((function(e,t){console.crlog("[Video][Error] LocalVideoConnection sender setParameters:".concat(JSON.stringify(e),", fail! ").concat(t))}))}catch(e){console.crlog("[Video][Error] ".concat(e)),console.error(e)}}},{key:"setVideoCfg",value:function(e){var t=this,n={};if(void 0!==e.size&&(n.size=+e.size),void 0!==e.fps&&(n.fps=+e.fps),void 0!==e.ratio&&(n.ratio=+e.ratio),void 0!==e.aspectRatio&&(n.aspectRatio=e.aspectRatio),void 0!==e.maxbps&&(n.maxbps=+e.maxbps),0!==Object.keys(n).length){for(var r in n)this.videoCfg[r]=n[r];var i=this.parseVideoConstraints(n);this.originalTrack?this.originalTrack.applyConstraints(i).then((function(){console.crlog("[Video] Local applyConstraints success! Current settings:".concat(JSON.stringify(t.originalTrack.getSettings()))),e.size&&setTimeout((function(){t.VBGConfig.videoCanvas.width=t.VBGConfig.videoEle.videoWidth,t.VBGConfig.videoCanvas.height=t.VBGConfig.videoEle.videoHeight}),500),n.fps>0&&t.VBGWorker.postMessage({cmd:"start",fps:n.fps})})).catch((function(e){console.crlog("[Video] Local applyConstraints fail! ".concat(e)),console.error(e)})):this.videoInput.forEach((function(r){if("canvasStreamCam"!=r.kind&&(null!=n.size&&r.ssVal&&(n.size=_src_inMeeting_videoSizeDef_js__WEBPACK_IMPORTED_MODULE_4__.Z.getUploadSize(+e.size,r.ssVal)),i=t.parseVideoConstraints(n),r.stream&&r.stream.active&&!r.locAttr.constraints)){var o=r.stream.getVideoTracks()[0];console.crlog("[Video] Local camID:".concat(r.id," applyConstraints:").concat(JSON.stringify(i))),o.applyConstraints(i).then((function(){console.crlog("[Video] Local camID:".concat(r.id," applyConstraints success! Current settings:").concat(JSON.stringify(o.getSettings()))),r.connect&&r.connect.connection&&"connected"==r.connect.connection.connectionState&&(t.setMaxbps(r.connect.connection,n.size),t.getCurVideoCfg(r.connect.stream).then((function(e){e.width&&e.height&&window.videoResolutionReport(r.connect.msid,"video",e.width,e.height)}))),r.connect2&&r.connect2.connection&&"connected"==r.connect2.connection.connectionState&&(t.setMaxbps(r.connect2.connection,n.size),t.getCurVideoCfg(r.connect2.stream).then((function(e){e.width&&e.height&&window.videoResolutionReport(r.connect2.msid,"video",e.width,e.height)})))})).catch((function(e){console.crlog("[Video] Local camID:".concat(r.id," applyConstraints fail! ").concat(e)),console.error(e)}))}}))}}},{key:"setVideoPanTiltZoom",value:(_setVideoPanTiltZoom=_asyncToGenerator(_regeneratorRuntime().mark((function e(t,n){var r,i,o,a;return _regeneratorRuntime().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.ptzLastConstraints||{advanced:[n]},!this.ptzWaitingFlag){e.next=20;break}if(this.ptzWaitingFlag=!1,!((i=this.videoInput.find((function(e){return e.id==t})))&&i.stream&&i.stream.active)){e.next=18;break}return o=i.stream.getVideoTracks()[0],e.prev=6,e.next=9,o.applyConstraints(r);case 9:this.ptzWaitingFlag=!0,this.ptzLastConstraints&&(a=this.ptzLastConstraints.advanced[0],this.ptzLastConstraints=null,this.setVideoPanTiltZoom(t,a)),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(6),this.ptzWaitingFlag=!0,console.error("setVideoPanTiltZoom failed: ",e.t0),console.crlog("[Video] Control ptz camera error: ".concat(e.t0.toString()));case 18:e.next=21;break;case 20:this.ptzLastConstraints=r;case 21:case"end":return e.stop()}}),e,this,[[6,13]])}))),function(e,t){return _setVideoPanTiltZoom.apply(this,arguments)})},{key:"setDefaultVideo",value:function(e){var t=this.videoInput.find((function(t){return t.id==e})),n=_src_common_utils_js__WEBPACK_IMPORTED_MODULE_1__.Z.findUserInfoByID(CR.userInfo.userId,"videoStatus");t&&(this.defaultCamID=e,this.multipleCams||"VOPEN"!=n||(this.stopAllLocalVideoAndConnect(),this.getLocalCamStream()),this.uploadCurOpenedCamNumber())}},{key:"stopAllLocalVideoAndConnect",value:function(e){var t=this;console.crlog("[Video] Do stop all local video track and connect..."),this.originalTrack&&(this.originalTrack.stop(),this.originalTrack=null),this.selfieSegmentation&&this.virtualBackgroundUninit(),__Rtc.CRRTCUI.videoContainerList.forEach((function(e){e._userID==CR.userInfo.userId&&e.clear()})),this.videoInput.forEach((function(e){e.connect.connection&&e.connect.connection.close(),e.connect2.connection&&e.connect2.connection.close(),e.connect.answer=null,e.connect.answer_cb=null,e.connect.candidates=[],e.connect.connection=null,e.connect.offer=null,e.connect.offer_cb=null,clearInterval(e.connect.rtpLogTimer),e.connect.rtpLogTimer=-1,e.connect2.answer=null,e.connect2.answer_cb=null,e.connect2.candidates=[],e.connect2.connection=null,e.connect2.offer=null,e.connect2.offer_cb=null,clearInterval(e.connect2.rtpLogTimer),e.connect2.rtpLogTimer=-1,window.videoResolutionReport(e.connect.msid,"video",0,0),window.videoResolutionReport(e.connect2.msid,"video",0,0),t.selfieSegmentation&&t.virtualBackgroundUninit(),"streamCam"!==e.kind&&"canvasStreamCam"!==e.kind&&(e.stream&&e.stream.getVideoTracks()[0].stop(),e.connect.stream=null,e.connect2.stream=null,e.stream=null),"canvasStreamCam"==e.kind&&e.exData&&e.exData.putImageTimer&&clearInterval(e.exData.putImageTimer)}))}},{key:"uploadAllCamInfo",value:function(){var e="";this.videoInput.forEach((function(t){e=e+t.id+";"+t.name+";0;0\n"})),e&&console.crlog("[Video] UploadAllCamInfos... ".concat(e)),e&&_src_inMeeting_ice_IceApi_videoCtrl__WEBPACK_IMPORTED_MODULE_0__.Z.updateAllCameraInfos(e)}},{key:"uploadVideoDeviceStatus",value:function(){var e=this.videoInput.length>0;this.videoDeviceStatus=e,console.crlog("[Video] UploadVideoDeviceStatus... ".concat(e)),_src_inMeeting_ice_IceApi_videoCtrl__WEBPACK_IMPORTED_MODULE_0__.Z.setVideoDeviceStatus(e)}},{key:"uploadCurOpenedCamNumber",value:function(){var e=this;if(0===this.defaultCamID){var t=this.videoInput.find((function(e){return!e.disabled}));if(!t)return!1;this.defaultCamID=t.id}var n=[this.defaultCamID];this.videoInput.forEach((function(t){t.disabled||!e.multipleCams&&(e.multipleCams||t.id!=e.defaultCamID)||n.push(t.id)}));for(var r=!1,i=n.length>this.opendCamsArr.length?n.length:this.opendCamsArr.length,o=0;o<i;o++)null!=this.opendCamsArr[o]&&null!=n[o]&&this.opendCamsArr[o]==n[o]||(r=!0);r&&(console.crlog("[Video] UploadCurOpenedCamNumber... ".concat(JSON.stringify(n))),_src_inMeeting_ice_IceApi_videoCtrl__WEBPACK_IMPORTED_MODULE_0__.Z.setOpenedCameraNumber(n),this.opendCamsArr=n)}},{key:"getLocalCamStream",value:function(e){var t=this;console.crlog("[Video] getLocalCamStream..."),this.videoInput.forEach((function(n){if(!n.disabled&&(t.multipleCams||!t.multipleCams&&n.id==t.defaultCamID))if(console.crlog("[Video] Open cam：".concat(n.id)),"streamCam"===n.kind||n.stream&&n.stream.active||"canvasStreamCam"===n.kind)if("streamCam"==n.kind)n.connect.stream=n.stream,n.connect2.stream=n.stream,t.refreshLocalContainerSrc("",n);else if("canvasStreamCam"==n.kind){if(n.connect.stream=n.stream,n.connect2.stream=n.stream,t.refreshLocalContainerSrc("",n),n.exData){n.exData.putImageTimer&&clearInterval(n.exData.putImageTimer),n.exData.putImageTimer=setInterval((function(){n.exData.putImageFun()}),2e3);var r=0,i=setInterval((function(){r>10?(clearInterval(i),r=0):(n.exData.putImageFun(),r++)}),300)}}else n.stream&&n.stream.active&&t.refreshLocalContainerSrc("",n);else{var o={audio:!1,video:__Rtc.CRBrowser.curBrowserCfg.isMobile?t.parseVideoConstraints(null,n.facingMode):t.parseVideoConstraints(null,n.deviceId)};if(null!=e&&(o=e),n.locAttr.constraints){var a=o.video.deviceId;o.video=n.locAttr.constraints,o.video.deviceId=a}n.locAttr.panTiltZoom&&(o.video.pan=!0,o.video.tilt=!0,o.video.zoom=!0),console.crlog("[Video] local video camID:".concat(n.id," getUserMedia:").concat(JSON.stringify(o))),navigator.mediaDevices.getUserMedia(o).then((function(e){n.deviceId&&console.crlog("[Video] Local video camID:".concat(n.id,", deviceID:").concat(n.deviceId," getUserMedia success! stream:").concat(e.id)),n.facingMode&&console.crlog("[Video] Local video camID:".concat(n.id,", facingMode:").concat(n.facingMode," getUserMedia success! stream:").concat(e.id)),console.crlog("[Video] Local video camID:".concat(n.id," current settings:").concat(JSON.stringify(e.getVideoTracks()[0].getSettings()))),0==t.VBGConfig.type||t.multipleCams?(n.stream=e,n.connect.stream=e,n.connect2.stream=e,t.refreshLocalContainerSrc("",n),CRVideo_NotifyVideoStream.target(CR.userInfo.userId,e),CRVideo_NotifyCameraStream.target(CR.userInfo.userId,n.id,e)):t.getVirtualBackgroundStream(e,n)})).catch((function(e){if(n.deviceId&&console.crlog("[Video] Local video camID:".concat(n.id,", deviceID:").concat(n.deviceId," getUserMedia fail! ").concat(e.name)),n.facingMode&&console.crlog("[Video] Local video camID:".concat(n.id,", deviceID:").concat(n.facingMode," getUserMedia fail! ").concat(e.name)),console.error(e),!__Rtc.CRBrowser.curBrowserCfg.isMobile||null==o.video.height&&null==o.video.width)if(null!=o.video.facingMode){console.crlog("[Video] This device can not support facingMode, try to open video without facingMode..."),t.getLocalCamStream({audio:!1,video:!0})}else console.crlog("[Video] CRVideo_OpenVideoFailed.target(".concat(n.id,",").concat(e.name,")")),CRVideo_OpenVideoFailed.target(n.id,e.name),3==CRVideo_GetVideoStatus(CRVideo.userInfo.userId)&&_src_inMeeting_ice_IceApi_videoCtrl__WEBPACK_IMPORTED_MODULE_0__.Z.stopVideo();else{var r={audio:!1,video:!0};o.video.deviceId&&(r.video={deviceId:o.video.deviceId}),o.video.facingMode&&(r.video={facingMode:o.video.facingMode}),console.crlog("[Video] Some mobile phone can not readable size 1(360p), change the video cfg to size 2(480p)"),1==t.videoCfg.size&&(t.videoCfg.size=2),t.getLocalCamStream(r)}}))}}))}},{key:"refreshLocalContainerSrc",value:function(e,t){var n=this;if(3!=CRVideo_GetVideoStatus(CRVideo.userInfo.userId))return!1;var r=function(e,t){if(e._userID==CR.userInfo.userId&&(t.id==e._videoID||-1==e._videoID&&t.id==n.defaultCamID)){console.crlog("[Video] Refresh local videoContainer src..., containerID:".concat(e._id,", camID:").concat(t.id));var r=t.stream||null,i=r?r.id:null,o=r?r.active:null;console.crlog("[Video] Local video camID:".concat(t.id,", containerID:").concat(e._id,", set srcObject, stream:").concat(i,", active:").concat(o)),e._videoEle.srcObject=r,setTimeout((function(){o&&e&&e._videoEle&&e._videoEle.srcObject&&e._videoEle.click()}),1e3)}};e?this.videoInput.forEach((function(t){r(e,t)})):t?__Rtc.CRRTCUI.videoContainerList.forEach((function(e){r(e,t)})):(console.crlog("[Video] Refresh all local videoContainer src..."),__Rtc.CRRTCUI.videoContainerList.forEach((function(e){e._userID==CR.userInfo.userId&&n.videoInput.forEach((function(t){r(e,t)}))})))}},{key:"videoAllocRawExt2",value:function(e,t,n){var r=+t.cameraID,i=this.videoInput.find((function(e){return e.id==r%1e4}));if(!i)return console.crlog("[Video] LocalVideoConnection, can not find camItem with camID:".concat(r,", do offer_cb.ice_response()")),e.ice_response(),void(e.isResponsed=!0);r<=1e4?(i.connect.offer_cb=e,i.connect.type="sendonly",i.connect.liteice=n.get("liteice")||"0",i.connect.vsParam=t,i.connect.rtc_streamid=n.get("rtc_streamid")||null,i.connect.rtc_eid=n.get("rtc_eid")||null,i.connect.rtc_mode="push",i.connect.HashMap=new Ice.HashMap,i.connect.caComplete=!1,this.setLocalVideoConnection(i.connect)):r>1e4&&(i.connect2.offer_cb=e,i.connect2.liteice=n.get("liteice")||"0",i.connect2.type="sendonly",i.connect2.vsParam=t,i.connect2.rtc_streamid=n.get("rtc_streamid")||null,i.connect2.rtc_eid=n.get("rtc_eid")||null,i.connect2.rtc_mode="push",i.connect2.HashMap=new Ice.HashMap,i.connect2.caComplete=!1,this.setLocalVideoConnection(i.connect2))}},{key:"setLocalVideoConnection",value:function(e){var t=this,n="[Video] MSID:".concat(e.msid,", camID:").concat(e.camID,", localVideoConnection");console.crlog("".concat(n," new RTCPeerConnection..."));var r="1"===e.liteice?new RTCPeerConnection:new RTCPeerConnection(CR.rtcCfg);e.connection=r,e.logStr=n;var i=0;!function t(){if(i>1e4)return console.crlog("".concat(n," After waited more than 10 seconds, the camera video stream is not obtained, do offer_cb.ice_response()")),console.crlog("".concat(n," CRVideo_OpenVideoTimeout.target(10000)")),CRVideo_OpenVideoTimeout.target(1e4),e.offer_cb&&e.offer_cb.ice_response()&&(e.offer_cb.isResponsed=!0),void(3==CRVideo_GetVideoStatus(CRVideo.userInfo.userId)&&_src_inMeeting_ice_IceApi_videoCtrl__WEBPACK_IMPORTED_MODULE_0__.Z.stopVideo());if(!e.stream||!e.stream.active)return void setTimeout((function(){i+=50,t()}),50);var o=e.stream,a=e.stream.getVideoTracks()[0];r.addTrack&&"closed"!==r.signalingState?(console.crlog("".concat(n," addTrack(videoTrack, stream)")),r.addTrack(a,o)):setTimeout((function(){r.dispatchEvent(new Event("negotiationneeded"))}),100);console.crlog("".concat(n," createOffer()")),r.createOffer().then((function(t){console.crlog("".concat(n," createOffer success!")),t.sdp=__Rtc.CRRTCVideo.modifyOfferSDP(t.sdp,e),e.offer=t;var i=" ";t.sdp.includes("VP8")&&(i+="VP8"),t.sdp.includes("H264")&&(i+=" H264"),console.crlog("".concat(n," offer.sdp - length:").concat(t.sdp.length,", codecs:").concat(i)),console.crlog("".concat(t.sdp)),console.crlog("".concat(n," setLocalDescription(offer)")),r.setLocalDescription(t).then((function(t){console.crlog("".concat(n," setLocalDescription success!")),e.rtc_streamid&&(!e.offer_cb.isResponsed&&console.crlog("".concat(n," ice_response(").concat(e.msid,", new Ice.HashMap())")),!e.offer_cb.isResponsed&&e.offer_cb.ice_response(e.msid,new Ice.HashMap),!e.offer_cb.isResponsed&&(e.offer_cb.isResponsed=!0),e.HashMap.set("sdp",e.offer.sdp),e.HashMap.set("rtc_streamid",e.rtc_streamid),e.HashMap.set("rtc_mode","push"),e.HashMap.set("rtc_eid",e.rtc_eid)),window.__Rtc.CRRTCVideo.RtcGwVideoAlloc2(e)})).catch((function(e){console.crlog("".concat(n," setLocalDescription fail! ").concat(e)),console.error(e)}))})).catch((function(e){console.crlog("".concat(n," createOffer fail! ").concat(e)),console.error(e)}))}(),r.onicecandidate=function(r){"1"==e.liteice||e.rtc_streamid||e.caComplete||(console.crlog("".concat(n," onicecandidate: ").concat(JSON.stringify(r.candidate))),r.candidate?e.candidates.push(r.candidate):e.caComplete=!0,e.caComplete&&t.iceResponse(e),setTimeout((function(){e.caComplete||(e.caComplete=!0,t.iceResponse(e))}),300))},r.oniceconnectionstatechange=function(t){console.crlog("".concat(n," oniceconnectionstatechange, iceConnectionState: ").concat(t.currentTarget.iceConnectionState)),e&&e.iceConnectionState&&"completed"==e.iceConnectionState&&setTimeout((function(){e.answer_cb.isResponsed||(console.crlog("".concat(n," answer_cb ice_response()...")),e.answer_cb.ice_response(),e.answer_cb.isResponsed=!0)}),500)},r.onicegatheringstatechange=function(e){console.crlog("".concat(n," onicegatheringstatechange, iceConnectionState: ").concat(e.target.iceGatheringState))},r.onconnectionstatechange=function(t){var i=t.currentTarget.connectionState;if(console.crlog("".concat(n," onconnectionstatechange, connectionState: ").concat(i)),"connected"==i){e.lastBytesSent=0;var o=0;clearInterval(e.rtpLogTimer);var a=function(){r.getStats().then((function(t){t.forEach((function(t){if("outbound-rtp"==t.type){e.width=t.frameWidth,e.height=t.frameHeight,e.frameRate=t.framesPerSecond,e.codeRate=(t.bytesSent-e.lastBytesSent)/2e3,e.lastBytesSent=t.bytesSent;var r={bytesSent:t.bytesSent,packetsSent:t.packetsSent,frameWidth:t.frameWidth,frameHeight:t.frameHeight,framesPerSecond:t.framesPerSecond,firCount:t.firCount,pliCount:t.pliCount,nackCount:t.nackCount,qpSum:t.qpSum,keyFramesEncoded:t.keyFramesEncoded,framesEncoded:t.framesEncoded,framesSent:t.framesSent,headerBytesSent:t.headerBytesSent,hugeFramesSent:t.hugeFramesSent,targetBitrate:t.targetBitrate,retransmittedBytesSent:t.retransmittedBytesSent,retransmittedPacketsSent:t.retransmittedPacketsSent,totalEncodeTime:t.totalEncodeTime,totalEncodedBytesTarget:t.totalEncodedBytesTarget,totalPacketSendDelay:t.totalPacketSendDelay,encoderImplementation:t.encoderImplementation,qualityLimitationDurations:t.qualityLimitationDurations,qualityLimitationReason:t.qualityLimitationReason,qualityLimitationResolutionChanges:t.qualityLimitationResolutionChanges};++o>=5&&(o=0,CR.isRtcLog&&console.crlog("".concat(n," outbound-rtp: ").concat(JSON.stringify(r))))}"ssrc"==t.type&&console.crlog("".concat(n," ssrc: ").concat(JSON.stringify(t)))}))}))};a(),e.rtpLogTimer=setInterval(a,2e3)}else"disconnected"==i?clearInterval(e.rtpLogTimer):"failed"==i&&__Rtc.CRICEAPI.MediaConnectionBreakReport(e.msid)},r.onsignalingstatechange=function(e){console.crlog("".concat(n," onsignalingstatechange, signalingState: ").concat(e.currentTarget.signalingState))}}},{key:"modifyPeerAddrExt",value:function(e,t,n){var r;if(this.videoInput.forEach((function(e){e.connect.msid==n&&(r=e.connect),e.connect2.msid==n&&(r=e.connect2)})),r){var i="[Video] MSID:".concat(r.msid,", camID:").concat(r.camID,", localVideoConnection"),o=" ";e.sdp.includes("VP8")&&(o+="VP8"),e.sdp.includes("H264")&&(o+=" H264"),console.crlog("".concat(i," modifyPeerAddrExt, length:").concat(e.sdp.length,", codecs:").concat(o)),r.answer_cb=t,r.answer=e,this.setRemoteDescription(r.camID),setTimeout((function(){r.answer_cb&&!r.answer_cb.isResponsed&&(console.crlog("".concat(i," answer_cb ice_response()...")),r.answer_cb.ice_response(),r.answer_cb.isResponsed=!0)}),500)}}},{key:"setRemoteDescription",value:function(e){var t,n=this;if(this.videoInput.forEach((function(n){n.connect.camID===e&&(t=n.connect),n.connect2.camID===e&&(t=n.connect2)})),t){if(t&&"stable"==t.connection.signalingState)return;var r="[Video] MSID:".concat(t.msid,", camID:").concat(t.camID,", localVideoConnection");console.crlog("".concat(r," answer sdp:\r\n").concat(t.answer.sdp)),console.crlog("".concat(r," setRemoteDescription(answer)")),t.connection.setRemoteDescription(new RTCSessionDescription(t.answer)).then((function(){if(console.crlog("".concat(r," setRemoteDescription success!")),e<50){var i=t.connection.getSenders()[0],o=n.getMaxbps(_src_inMeeting_videoSizeDef_js__WEBPACK_IMPORTED_MODULE_4__.Z.getUploadSize(n.videoCfg.size,n.videoInput.find((function(t){return t.id==e%1e4})).ssVal));n.setVideoSenderParams(i,null,o).then((function(e){console.crlog("".concat(r," sender setParameters:").concat(JSON.stringify(e),", success!"))})).catch((function(e,t){console.crlog("".concat(r," sender setParameters:").concat(JSON.stringify(e),", fail! ").concat(t))}))}n.getCurVideoCfg(t.stream).then((function(e){e.width&&e.height&&window.videoResolutionReport(t.msid,"video",e.width,e.height)}))})).catch((function(e){console.crlog("".concat(r," setRemoteDescription fail! ").concat(e)),console.error(e)}))}}},{key:"iceResponse",value:function(e){var t=e.logStr;"1"===e.liteice?(console.crlog("".concat(t," response without candidates when liteice === '1'")),e.rtc_streamid?window.__Rtc.CRRTCVideo.RtcGwVideoAlloc2(e):(e.HashMap.set("sdp",e.offer.sdp),!e.offer_cb.isResponsed&&console.crlog("".concat(t," offer_cb ice_response(").concat(e.msid,", HashMap)")),!e.offer_cb.isResponsed&&e.offer_cb.ice_response(e.msid,e.HashMap),!e.offer_cb.isResponsed&&(e.offer_cb.isResponsed=!0)),e.candidates=[]):(e.HashMap.set("icecandidate",JSON.stringify(e.candidates)),console.crlog("".concat(t," response candidates(").concat(e.candidates.length,"): ").concat(JSON.stringify(e.candidates))),e.rtc_streamid?window.__Rtc.CRRTCVideo.RtcGwVideoAlloc2(e):(e.HashMap.set("sdp",e.offer.sdp),!e.offer_cb.isResponsed&&console.crlog("".concat(t," offer_cb ice_response(").concat(e.msid,", HashMap)")),!e.offer_cb.isResponsed&&e.offer_cb.ice_response(e.msid,e.HashMap),!e.offer_cb.isResponsed&&(e.offer_cb.isResponsed=!0)),e.candidates=[])}},{key:"setVideoSenderParams",value:function(e,t,n){return new Promise((function(r,i){var o=e.getParameters();if(null!=o.encodings&&o.encodings!=[]||(o.encodings=[],o.encodings[0]={}),n&&(o.encodings[0].maxBitrate=n),t){var a=e.track.getSettings().height/t;o.encodings[0].scaleResolutionDownBy=Math.max(a,1)}e.setParameters(o).then((function(e){return r(o.encodings[0])})).catch((function(e){return console.error(e),i(o.encodings[0],e)}))}))}},{key:"setEnableMutiVideo",value:function(e){var t=this,n=this.multipleCams;if(n!=e){this.multipleCams=e;var r=CR.allMemberInfo.find((function(e){return e.userId==CR.userInfo.userId}));1==n?(r&&"VOPEN"==r.videoStatus&&this.uploadCurOpenedCamNumber(),this.videoInput.forEach((function(e){e.id!==t.defaultCamID&&e.stream&&e.stream.active&&("streamCam"!==e.kind&&"canvasStreamCam"!==e.kind?(e.stream.getVideoTracks()[0].stop(),e.stream=null):"canvasStreamCam"==e.kind&&e.exData&&e.exData.putImageTimer&&clearInterval(e.exData.putImageTimer),e.connect.stream=null,e.connect2.stream=null)}))):r&&"VOPEN"==r.videoStatus&&(this.getLocalCamStream(),this.uploadCurOpenedCamNumber())}}},{key:"stopAllLocalVideoTrack",value:function(){console.crlog("[Video] Do stop all local video track..."),this.videoInput.forEach((function(e){e.stream&&"streamCam"!==e.kind&&"canvasStreamCam"!==e.kind?(e.stream.getVideoTracks()[0].stop(),e.stream=null):"canvasStreamCam"==e.kind&&e.exData&&e.exData.putImageTimer&&clearInterval(e.exData.putImageTimer)}))}},{key:"addStreamCam",value:function(e,t,n){try{console.crlog("[Video] AddStreamCam -- stream --\x3e id:".concat(e.id,", active: ").concat(e.active))}catch(e){console.error(e)}var r=this.streamCamID++,i=Ice.generateUUID(),o={};o.deviceId=i,o.name=t||i,o.kind=n&&"canvasStreamCam"==n.type?"canvasStreamCam":"streamCam",o.id=r,o.disabled=!1,o.locAttr={},o.stream=e,o.ssVal=0,o.connect=new _ConnectItemClass(r,++__Rtc.CRRTCLocalVideo.lastLocalVideoMSID),o.connect2=new _ConnectItemClass(r+1e4,__Rtc.CRRTCLocalVideo.lastLocalVideoMSID+1e3),o.connect.stream=e,o.connect2.stream=e,n&&(o.exData=n),this.videoInput.push(o),this.uploadAllCamInfo(),this.uploadCurOpenedCamNumber(),this.videoDeviceStatus||this.uploadVideoDeviceStatus();var a=CR.allMemberInfo.find((function(e){return e.userId==CR.userInfo.userId}));return a&&"VOPEN"==a.videoStatus&&this.multipleCams&&(this.getLocalCamStream(),this.uploadCurOpenedCamNumber()),r}},{key:"removeStreamCam",value:function(e){var t=this.videoInput.findIndex((function(t){return t.id===e&&("streamCam"==t.kind||"canvasStreamCam"==t.kind)}));-1!=t&&this.videoInput.splice(t,1),this.uploadAllCamInfo(),this.uploadCurOpenedCamNumber()}},{key:"videoMSIDFree",value:function(e){this.videoInput.forEach((function(t){t.connect.msid==e&&t.connect.connection&&t.connect.connection.close(),t.connect2.msid==e&&t.connect2.connection&&t.connect2.connection.close()}))}},{key:"setUploadSize",value:function(e,t){var n=this;console.crlog("[Video] Set upload size... camID:".concat(e,", ssVal:").concat(t));var r=_src_inMeeting_videoSizeDef_js__WEBPACK_IMPORTED_MODULE_4__.Z.getUploadSize(this.videoCfg.size,t);255==t&&(r=0),this.videoInput.forEach((function(i){if(i.id==e&&i.stream&&i.stream.active&&!i.locAttr.constraints){i.ssVal=t;var o=n.parseVideoConstraints({size:r});console.crlog("[Video] Local camID:".concat(e," applyConstraints(").concat(JSON.stringify(o),") when set upload size...")),i.stream.getVideoTracks()[0].applyConstraints(o).then((function(){console.crlog("[Video] Local camID:".concat(e," applyConstraints success! Current settings:").concat(JSON.stringify(i.stream.getVideoTracks()[0].getSettings())))})),i.connect&&i.connect.connection&&"connected"==i.connect.connection.connectionState&&n.setMaxbps(i.connect.connection,r),i.connect2&&i.connect2.connection&&"connected"==i.connect2.connection.connectionState&&n.setMaxbps(i.connect2.connection,r)}}))}}]);var _setVideoPanTiltZoom}(),RemoteVideoClass=function(){return _createClass((function e(){_classCallCheck(this,e),this.initData()}),[{key:"initData",value:function(){console.crlog("[Video] RemoteVideoModule initData..."),this.lastRemoteVideoMSID=22e4,this.remoteVideoSSVal=0,this.connectList=[],this.subscribedCamList=[]}},{key:"subscribeVideo",value:function(e,t,n){if(-1==t){var r=_src_common_utils_js__WEBPACK_IMPORTED_MODULE_1__.Z.termIDtoUserID(e);t=_src_common_utils_js__WEBPACK_IMPORTED_MODULE_1__.Z.findUserInfoByID(r,"defaultCam")}if(console.crlog("[Video] _videoCtrl.batchSubscribeVideo2(".concat(e,", ").concat(t,", ").concat(n,")")),_src_inMeeting_ice_IceApi_videoCtrl__WEBPACK_IMPORTED_MODULE_0__.Z.batchSubscribeVideo2(e,t,n),255==n){var i=null,o=null,a=!1;this.subscribedCamList.forEach((function(n,r){n.list.forEach((function(c,s){n.termID==e&&c.id==t&&(i=r,o=s,1==n.list.length&&(a=!0))}))})),a?null!==i&&this.subscribedCamList.splice(i,1):null!==i&&null!==o&&this.subscribedCamList[i].list.splice(o,1)}}},{key:"videoAllocRawExt2",value:function(e,t,n){var r=+t.cameraID,i=+t.srcTermID,o=this.connectList.find((function(e){return e.termID==i}));if(o){var a=o.list.find((function(e){return e.camID==r}));a||(a=new _ConnectItem(r,++this.lastRemoteVideoMSID),o.list.push(a)),a.offer_cb=e,a.type="recvonly",a.liteice=n.get("liteice")||"0",a.vsParam=t,a.rtc_streamid=n.get("rtc_streamid")||null,a.rtc_mode="play",a.rtc_eid=n.get("rtc_eid")||null,a.HashMap=new Ice.HashMap,a.caComplete=!1,this.setRemoteVideoConnection(i,a)}else{var c=new _UserConnectList(i),s=new _ConnectItem(r,++this.lastRemoteVideoMSID);c.list.push(s),this.connectList.push(c),s.offer_cb=e,s.type="recvonly",s.liteice=n.get("liteice")||"0",s.vsParam=t,s.rtc_streamid=n.get("rtc_streamid")||null,s.rtc_mode="play",s.rtc_eid=n.get("rtc_eid")||null,s.HashMap=new Ice.HashMap,s.caComplete=!1,this.setRemoteVideoConnection(i,s)}}},{key:"modifyPeerAddrExt",value:function(e,t,n){console.crlog("[Video] MSID:".concat(n," modifyPeerAddrExt...")),this.connectList.forEach((function(r){var i=r.list.find((function(e){return e.msid==n}));if(i){i.answer_cb=t,i.answer=e;var o=r.termID,a=CR.allMemberInfo.find((function(e){return e.termId==o})),c="[Video] MSID:".concat(i.msid,", termID:").concat(o,", userID:").concat(a.userId,", camID:").concat(-1==i.camID?a.defaultCam:i.camID,", remoteVideoConnection"),s=" ";e.sdp.includes("VP8")&&(s+="VP8"),e.sdp.includes("H264")&&(s+=" H264"),console.crlog("".concat(c," received answer, length:").concat(e.sdp.length,", codecs:").concat(s)),console.crlog("".concat(e.sdp)),console.crlog("".concat(c," setRemoteDescription(answer)")),i.connection.setRemoteDescription(new RTCSessionDescription(e)).then((function(){console.crlog("".concat(c," setRemoteDescription success!"))})).catch((function(e){console.crlog("".concat(c," setRemoteDescription fail! ").concat(e)),console.error(e)})),setTimeout((function(){i.answer_cb.isResponsed||(console.crlog("".concat(c," answer_cb ice_response()...")),i.answer_cb.ice_response(),i.answer_cb.isResponsed=!0)}),500)}}))}},{key:"setRemoteVideoConnection",value:function(e,t){var n=this,r=CR.allMemberInfo.find((function(t){return t.termId==e})),i="[Video] MSID:".concat(t.msid,", termID:").concat(e,", userID:").concat(r.userId,", camID:").concat(t.camID,", remoteVideoConnection");console.crlog("".concat(i," new RTCPeerConnection..."));var o="1"===t.liteice?new RTCPeerConnection:new RTCPeerConnection(CR.rtcCfg);t.connection=o,t.logStr=i;var a={offerToReceiveAudio:!1,offerToReceiveVideo:!0,voiceActivityDetection:!1};console.crlog("".concat(i," createOffer(").concat(JSON.stringify(a),")")),o.createOffer(a).then((function(e){console.crlog("".concat(i," createOffer success!")),e.sdp=__Rtc.CRRTCVideo.modifyOfferSDP(e.sdp,t);var n="";e.sdp.includes("VP8")&&(n+="VP8 "),e.sdp.includes("H264")&&(n+="H264 "),console.crlog("".concat(i," offer.sdp - length:").concat(e.sdp.length,", codecs:").concat(n)),console.crlog(e.sdp),t.offer=e,console.crlog("".concat(i," setLocalDescription(offer)")),o.setLocalDescription(e).then((function(){console.crlog("".concat(i," offer setLocalDescription success!")),t.rtc_streamid&&(!t.offer_cb.isResponsed&&console.crlog("".concat(i," ice_response(").concat(t.msid,", new Ice.HashMap())")),!t.offer_cb.isResponsed&&t.offer_cb.ice_response(t.msid,new Ice.HashMap),!t.offer_cb.isResponsed&&(t.offer_cb.isResponsed=!0),t.HashMap.set("sdp",t.offer.sdp),t.HashMap.set("rtc_streamid",t.rtc_streamid),t.HashMap.set("rtc_mode","play"),t.HashMap.set("rtc_eid",t.rtc_eid),window.__Rtc.CRRTCVideo.RtcGwVideoAlloc2(t))})).catch((function(e){console.error("".concat(i," offer setLocalDescription fail! ").concat(e)),console.error(e)}))})).catch((function(e){console.crlog("".concat(i," createOffer fail! ").concat(e)),console.error(e)})),o.onicecandidate=function(e){"1"===t.liteice||t.caComplete||t.rtc_streamid||(console.crlog("".concat(i," onicecandidate: ").concat(JSON.stringify(e.candidate))),e.candidate?t.candidates.push(e.candidate):t.caComplete=!0,t.caComplete&&n.iceResponse(t),setTimeout((function(){t.caComplete||(t.caComplete=!0,n.iceResponse(t))}),300))},o.oniceconnectionstatechange=function(e){console.crlog("".concat(i," oniceconnectionstatechange, iceConnectionState: ").concat(e.currentTarget.iceConnectionState)),t&&t.iceConnectionState&&"completed"==t.iceConnectionState&&setTimeout((function(){t.answer_cb.isResponsed||(console.crlog("".concat(i," answer_cb ice_response()...")),t.answer_cb.ice_response(),t.answer_cb.isResponsed=!0)}),500)},o.ontrack=function(e){console.crlog("".concat(i," ontrack!")),console.crlog("".concat(i," video stream:").concat(e.streams[0].id)),t.stream=e.streams[0],console.crlog("[Video] CRVideo_NotifyVideoStream.target(".concat(r.userId,", ").concat(e.streams[0],")")),CRVideo_NotifyVideoStream.target(r.userId,e.streams[0]),CRVideo_NotifyCameraStream.target(r.userId,t.camID%1e4,e.streams[0]);try{return void __Rtc.CRRTCUI.videoContainerList.forEach((function(e){e._userID==r.userId&&(e._videoID==t.camID%1e4||-1==e._videoID&&t.camID%1e4==r.defaultCam)&&(console.crlog("".concat(i," containerID:").concat(e._id,", videoEle set srcObject...")),e._videoEle.srcObject=t.stream,setTimeout((function(){t.stream&&t.stream.active&&e&&e._videoEle&&e._videoEle.srcObject&&e._videoEle.click()}),1e3))}))}catch(e){console.error(e)}},o.onconnectionstatechange=function(e){var n=e.currentTarget.connectionState;if(console.crlog("".concat(i," onconnectionstatechange, connectionState: ").concat(n)),"connected"==n){t.lastBytesReceived=0,t.codeRate=0,t.width=0,t.height=0,t.frameRate=0,t.lastPacketsLost=0,t.lastPacketsReceived=0,t.packetsLostRate=0;var r=0;clearInterval(t.rtpLogTimer),t.rtpLogTimer=setInterval((function(){o.getStats().then((function(e){e.forEach((function(e){if("inbound-rtp"==e.type){t.codeRate=(e.bytesReceived-t.lastBytesReceived)/2e3,t.lastBytesReceived=e.bytesReceived,t.width=e.frameWidth,t.height=e.frameHeight,t.frameRate=e.framesPerSecond;var n=e.packetsLost-t.lastPacketsLost,o=e.packetsReceived-t.lastPacketsReceived;t.packetsLostRate=n<0?0:parseInt(n/(o+n)*1e4)/1e4,t.lastPacketsLost=e.packetsLost,t.lastPacketsReceived=e.packetsReceived;var a={jitter:e.jitter,packetsLost:e.packetsLost,packetsReceived:e.packetsReceived,dbPacketsLostRate:2*t.packetsLostRate,bytesReceived:e.bytesReceived,headerBytesReceived:e.headerBytesReceived,jitterBufferDelay:e.jitterBufferDelay,jitterBufferEmittedCount:e.jitterBufferEmittedCount,framesReceived:e.framesReceived,frameWidth:e.frameWidth,frameHeight:e.frameHeight,framesPerSecond:e.framesPerSecond,framesDecoded:e.framesDecoded,keyFramesDecoded:e.keyFramesDecoded,framesDropped:e.framesDropped,totalDecodeTime:e.totalDecodeTime,totalInterFrameDelay:parseInt(1e4*e.totalInterFrameDelay)/1e4,totalSquaredInterFrameDelay:parseInt(1e4*e.totalSquaredInterFrameDelay)/1e4,firCount:e.firCount,pliCount:e.pliCount,nackCount:e.nackCount};++r>=5&&(r=0,CR.isRtcLog&&console.crlog("".concat(i," inbound-rtp: ").concat(JSON.stringify(a))))}"ssrc"==e.type&&CR.isRtcLog&&console.crlog("".concat(i," ssrc: ").concat(JSON.stringify(e)))}))}))}),2e3)}else"disconnected"==n?clearInterval(t.rtpLogTimer):"failed"==n&&__Rtc.CRICEAPI.MediaConnectionBreakReport(t.msid)},o.onsignalingstatechange=function(e){console.crlog("".concat(i," onsignalingstatechange, signalingState: ").concat(e.currentTarget.signalingState))}}},{key:"iceResponse",value:function(e){var t=e.logStr;"1"===e.liteice?(console.crlog("".concat(t," response without candidates when liteice === '1'")),e.rtc_streamid?window.__Rtc.CRRTCVideo.RtcGwVideoAlloc2(e):(e.HashMap.set("sdp",e.offer.sdp),!e.offer_cb.isResponsed&&console.crlog("".concat(t," offer_cb ice_response(").concat(e.msid,", HashMap)")),!e.offer_cb.isResponsed&&e.offer_cb.ice_response(e.msid,e.HashMap),!e.offer_cb.isResponsed&&(e.offer_cb.isResponsed=!0))):(e.HashMap.set("icecandidate",JSON.stringify(e.candidates)),console.crlog("".concat(t," response candidates(").concat(e.candidates.length,"): ").concat(JSON.stringify(e.candidates))),e.rtc_streamid?window.__Rtc.CRRTCVideo.RtcGwVideoAlloc2(e):(e.HashMap.set("sdp",e.offer.sdp),!e.offer_cb.isResponsed&&console.crlog("".concat(t," offer_cb ice_response(").concat(e.msid,", HashMap)")),!e.offer_cb.isResponsed&&e.offer_cb.ice_response(e.msid,e.HashMap),!e.offer_cb.isResponsed&&(e.offer_cb.isResponsed=!0)))}},{key:"videoMSIDFree",value:function(e){this.connectList.forEach((function(t){t.list.forEach((function(n,r){if(n.msid==e){clearInterval(n.rtpLogTimer),n.connection&&n.connection.close(),n.connection&&(n.connection=null),n.stream=null;var i=CR.allMemberInfo.find((function(e){return e.termId==t.termID}));__Rtc.CRRTCUI.videoContainerList.forEach((function(e){if(e._userID==i.userId&&(e._videoID==n.camID%1e4||-1==e._videoID&&n.camID%1e4==i.defaultCam))try{e._videoEle.srcObject=null}catch(e){}})),t.list.splice(r,1)}}))}))}},{key:"updateSubscribeVideo",value:function(){var e=this;this.subcribeTimer&&clearTimeout(this.subcribeTimer),this.subcribeTimer=setTimeout((function(){console.crlog("[Video] UpdateSubscribeVideo...");var t=[],n=[];__Rtc.CRRTCUI.videoContainerList.forEach((function(e){var n=CR.allMemberInfo.find((function(t){return t.userId==e._userID}));if(n&&n.defaultCam&&n.termId!=CR.userInfo.termId&&e._handler.parentNode){var r=t.find((function(e){return e.termID==n.termId}));r||(r={termID:n.termId,list:[]},t.push(r));var i=-1==e._videoID?n.defaultCam:e._videoID;null==r.list.find((function(e){return e.ID==i}))&&n.openedCamIDs.includes(i)&&r.list.push({id:i,ssVal:e._ssVal||0})}})),console.crlog("[Video] oldSubscribeList: ".concat(JSON.stringify(e.subscribedCamList))),console.crlog("[Video] newSubscribeList: ".concat(JSON.stringify(t))),t.forEach((function(t){var r=e.subscribedCamList.find((function(e){return e.termID==t.termID})),i=CR.allMemberInfo.find((function(e){return e.termId==t.termID}));if(i)if(r){var o=[];t.list.forEach((function(e){null==r.list.find((function(t){return t.id==e.id&&t.ssVal==e.ssVal}))&&o.push(e)})),o.forEach((function(e){var t={termID:i.termId,camID:e.id,ssVal:e.ssVal};n.push(t)}))}else t.list.forEach((function(e){var t={termID:i.termId,camID:e.id,ssVal:e.ssVal};n.push(t)}))})),e.subscribedCamList.forEach((function(e){var r=t.find((function(t){return t.termID==e.termID})),i=CR.allMemberInfo.find((function(t){return t.termId==e.termID}));if(i)if(r){var o=[];e.list.forEach((function(e){null==r.list.find((function(t){return e.id==t.id}))&&o.push(e)})),o.forEach((function(e){var t={termID:i.termId,camID:e.id,ssVal:255};n.push(t)}))}else e.list.forEach((function(e){var t={termID:i.termId,camID:e.id,ssVal:255};n.push(t)}))})),e.subscribedCamList=t,console.crlog("[Video] resSubscribeList: ".concat(JSON.stringify(n))),n.forEach((function(t){e.subscribeVideo(t.termID,t.camID,t.ssVal)}))}),100)}},{key:"unSubscibevideo",value:function(e,t){var n=this,r=CR.allMemberInfo.find((function(t){return t.userId==e}));r&&this.subscribedCamList.forEach((function(e){e.termID==r.termId&&e.list.forEach((function(e){e.id==t&&n.subscribeVideo(r.termId,t,255)}))}))}},{key:"updateConnectList",value:function(e,t,n){var r=this.connectList.find((function(t){return t.termID==e}));if(r){r.list.find((function(e){return e.camID==t}))||r.list.push(new _ConnectItem(t,++this.lastRemoteVideoMSID))}else{var i=new _UserConnectList(e);i.list.push(new _ConnectItem(t,++this.lastRemoteVideoMSID)),this.connectList.push(i)}}},{key:"refreshContainerSrc",value:function(e){e?this.connectList.forEach((function(t){var n=CR.allMemberInfo.find((function(e){return e.termId==t.termID}));n&&t.list.forEach((function(t){!function(e,t,n){e._userID==n.userId&&(e._videoID==t.camID%1e4||-1==e._videoID&&t.camID%1e4==n.defaultCam)&&(t.stream&&t.stream.active&&console.crlog("[Video] TermID:".concat(n.termId,", userID:").concat(n.userId,", containerID:").concat(e._id," video set srcObject, stream:").concat(t.stream.id)),t.stream&&t.stream.active&&(e._videoEle.srcObject=t.stream),setTimeout((function(){e&&e._videoEle&&e._videoEle.srcObject&&e._videoEle.click()}),1e3))}(e,t,n)}))})):(console.crlog("[Video] Do refresh all remote video container src..."),this.connectList.forEach((function(e){var t=CR.allMemberInfo.find((function(t){return t.termId==e.termID}));t&&e.list.forEach((function(e){__Rtc.CRRTCUI.videoContainerList.forEach((function(n){n._userID==t.userId&&(n._videoID==e.camID%1e4||-1==n._videoID&&e.camID%1e4==t.defaultCam)&&(e.stream&&e.stream.active&&console.crlog("[Video] TermID:".concat(t.termId,", userID:").concat(t.userId,", containerID:").concat(n._id," video set srcObject, stream:").concat(e.stream.id)),e.stream&&e.stream.active&&(n._videoEle.srcObject=e.stream),setTimeout((function(){n&&n._videoEle&&n._videoEle.srcObject&&n._videoEle.click()}),1e3))}))}))})))}},{key:"userLeftHandler",value:function(e){console.crlog("[Video] Do user left meet video handler...");var t=this.subscribedCamList.findIndex((function(t){return t.termID==e}));-1!=t&&this.subscribedCamList.splice(t,1);var n=this.connectList.findIndex((function(t){return t.termID==e}));-1!=n&&this.connectList.splice(n,1),console.crlog("[Video] curSubscribeList: ".concat(JSON.stringify(this.subscribedCamList)))}},{key:"closeAllRTCConnection",value:function(){console.crlog("[Video] Do close all remote video RTC connection..."),this.connectList.forEach((function(e){e.list.forEach((function(e){clearInterval(e.rtpLogTimer),e.connection&&(e.connection.close(),e.connection=null)}))}))}}])}();window.__crVideoClass=VideoClass,window.__crLocalVideoClass=LocalVideoClass,window.__crRemoteVideoClass=RemoteVideoClass,window.__Rtc.CRRTCVideo=new window.__crVideoClass,window.__Rtc.CRRTCLocalVideo=new window.__crLocalVideoClass,window.__Rtc.CRRTCRemoteVideo=new window.__crRemoteVideoClass,window.CRVideo_VideoStatusChanged=new CR.CbProxy("CRVideo_VideoStatusChanged"),window.CRVideo_DefVideoChanged=new CR.CbProxy("CRVideo_DefVideoChanged"),window.CRVideo_VideoDevChanged=new CR.CbProxy("CRVideo_VideoDevChanged"),window.CRVideo_NotifyOpenVideo=new CR.CbProxy("CRVideo_NotifyOpenVideo"),window.CRVideo_NotifyVideoStream=new CR.CbProxy("CRVideo_NotifyVideoStream"),window.CRVideo_NotifyCameraStream=new CR.CbProxy("CRVideo_NotifyCameraStream"),window.CRVideo_SetVideoCfgRslt=new CR.CbProxy("CRVideo_SetVideoCfgRslt"),window.CRVideo_OpenVideoFailed=new CR.CbProxy("CRVideo_OpenVideoFailed"),window.CRVideo_OpenVideoTimeout=new CR.CbProxy("CRVideo_OpenVideoTimeout"),window.CRVideo_PeerConnectionError=new CR.CbProxy("CRVideo_PeerConnectionError"),window.CRVideo_NotifyMainVideoModeChanged=new CR.CbProxy("CRVideo_NotifyMainVideoModeChanged"),window.CRVideo_NotifyMainVideoChanged=new CR.CbProxy("CRVideo_NotifyMainVideoChanged"),_src_inMeeting_meetSDK_meet_sdk_js__WEBPACK_IMPORTED_MODULE_3__.Z.notifyVideoWallMode=new _src_inMeeting_meetSDK_callback_js__WEBPACK_IMPORTED_MODULE_6__.Z("notifyVideoWallMode"),_src_inMeeting_meetSDK_meet_sdk_js__WEBPACK_IMPORTED_MODULE_3__.Z.notifyVideoWallVideos=new _src_inMeeting_meetSDK_callback_js__WEBPACK_IMPORTED_MODULE_6__.Z("notifyVideoWallVideos"),_src_inMeeting_meetSDK_meet_sdk_js__WEBPACK_IMPORTED_MODULE_3__.Z.notifyVideoPolling=new _src_inMeeting_meetSDK_callback_js__WEBPACK_IMPORTED_MODULE_6__.Z("notifyVideoPolling")},9967:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r={VSIZE_96:{value:5,width:160,height:96},VSIZE_128:{value:6,width:224,height:128},VSIZE_160:{value:7,width:288,height:160},VSIZE_192:{value:8,width:352,height:192},VSIZE_256:{value:9,width:448,height:256},VSIZE_288:{value:10,width:512,height:288},VSIZE_320:{value:11,width:576,height:320},VSIZE_360:{value:1,width:640,height:360},VSIZE_400:{value:12,width:704,height:400},VSIZE_480:{value:2,width:848,height:480},VSIZE_576:{value:13,width:1024,height:576},VSIZE_720:{value:3,width:1280,height:720},VSIZE_1080:{value:4,width:1920,height:1080},VSIZE_2K:{value:14,width:2160,height:1440},VSIZE_4K:{value:15,width:3840,height:2160}};const i={get:function(e){var t={};for(var n in r)r[n].value==e&&(t=r[n]);return t},getUploadSize:function(e,t){var n=e;if(1==e)switch(t){case 0:case 1:case 2:case 3:case 4:n=1;break;case 5:n=9;break;case 6:n=8;break;case 7:n=7;break;case 8:n=6;break;case 255:n=5}else if(2==e)switch(t){case 0:case 1:n=2;break;case 2:case 3:case 4:n=1;break;case 5:n=9;break;case 6:n=8;break;case 7:n=7;break;case 8:n=6;break;case 255:n=5}else if(3==e)switch(t){case 0:n=3;break;case 1:n=13;break;case 2:case 3:case 4:n=2;break;case 5:n=10;break;case 6:n=9;break;case 7:n=8;break;case 8:n=6;break;case 255:n=5}else if(4==e)switch(t){case 0:n=4;break;case 1:n=3;break;case 2:case 3:case 4:n=2;break;case 5:n=10;break;case 6:n=9;break;case 7:n=7;break;case 8:n=6;break;case 255:n=5}else if(14==e)switch(t){case 0:n=r.VSIZE_2K.value;break;case 1:n=r.VSIZE_1080.value;break;case 2:n=r.VSIZE_720.value;break;case 3:n=r.VSIZE_576.value;break;case 4:n=r.VSIZE_480.value;break;case 5:n=r.VSIZE_288.value;break;case 6:n=r.VSIZE_256.value;break;case 7:n=r.VSIZE_192.value;break;case 8:n=r.VSIZE_128.value;break;case 255:n=r.VSIZE_96.value}else if(15==e)switch(t){case 0:n=r.VSIZE_4K.value;break;case 1:n=r.VSIZE_1080.value;break;case 2:n=r.VSIZE_720.value;break;case 3:n=r.VSIZE_576.value;break;case 4:n=r.VSIZE_480.value;break;case 5:n=r.VSIZE_288.value;break;case 6:n=r.VSIZE_256.value;break;case 7:n=r.VSIZE_192.value;break;case 8:n=r.VSIZE_128.value;break;case 255:n=r.VSIZE_96.value}return console.crlog("[Video] Config size to upload size -- ssVal:".concat(t,", sizeType:").concat(e,", uploadSize:").concat(n)),n}}},7959:()=>{!function(e,t,n){e.CRVideo_SetDNDStatus=function(e,n){try{console.crlog("[CallMgr] CRVideo_SetDNDStatus(".concat(+e,",").concat(n,")"))}catch(e){}var r={cmd:"ClientCustomStatusUpdate",module:"CallServer",customStatus:+e,sessionID:t.sessionID};try{console.crlog("[CallMgr] WebCMD:".concat(JSON.stringify(r),",cookie:").concat(n))}catch(e){}t.webSendcmd(r,n)},e.CRVideo_StartUserStatusNotify=function(e){try{console.crlog("[CallMgr] CRVideo_StartUserStatusNotify(".concat(e,")"))}catch(e){}var n={cmd:"StartStatusPush",module:"CallServer",sessionID:t.sessionID};try{console.crlog("[CallMgr] WebCMD:".concat(JSON.stringify(n),",cookie:").concat(e))}catch(e){}t.webSendcmd(n,e)},e.CRVideo_StopUserStatusNotify=function(e){try{console.crlog("[CallMgr] CRVideo_StartUserStatusNotify(".concat(e,")"))}catch(e){}var n={cmd:"StopStatusPush",module:"CallServer",sessionID:t.sessionID};try{console.crlog("[CallMgr] WebCMD:".concat(JSON.stringify(n),",cookie:").concat(e))}catch(e){}t.webSendcmd(n,e)},e.CRVideo_GetUserStatus=function(e){try{console.crlog("[CallMgr] CRVideo_GetUserStatus()")}catch(e){}var n={cmd:"GetUserStatus",module:"CallServer",sessionID:t.sessionID};try{console.crlog("[CallMgr] WebCMD:".concat(JSON.stringify(n),",cookie:").concat(e))}catch(e){}t.webSendcmd(n,e)},e.CRVideo_GetOneUserStatus=function(e,n){try{console.crlog("[CallMgr] CRVideo_GetOneUserStatus(".concat(e,",").concat(n,")"))}catch(e){}var r={cmd:"GetUserStatus",module:"CallServer",userID:String(e),sessionID:t.sessionID};try{console.crlog("[CallMgr] WebCMD:".concat(JSON.stringify(r),",cookie:").concat(n))}catch(e){}t.webSendcmd(r,n)},e.CRVideo_Call=function(e,r,i,o){try{console.crlog("[CallMgr] CRVideo_Call(".concat(e,",").concat(JSON.stringify(r),",").concat(i,",").concat(o))}catch(e){}var a={callID:n.generateUUID(),called:String(e),calledOEMKey:"".concat(window.__CRNameUP),calledType:0,cmd:"ClientCall",meeting:{ID:r.ID,pswd:r.pswd,pubMeetUrl:r.pubMeetUrl,subject:r.subject},module:"CallServer",sessionID:t.sessionID,usrExDat:i||""};try{console.crlog("[CallMgr] WebCMD:".concat(JSON.stringify(a),",cookie:").concat(o))}catch(e){}t.webSendcmd(a,o)},e.CRVideo_AcceptCall=function(e,n,r,i){try{console.crlog("[CallMgr] CRVideo_AcceptCall(".concat(e,",").concat(JSON.stringify(n),",").concat(r,",").concat(i,")"))}catch(e){}console.crlog("[CallMgr] Meet ID："+n.ID),console.crlog("[CallMgr] Meet pubMeetUrl:"+n.pubMeetUrl),t.pubMeetUrl=n.pubMeetUrl,t.CallID=e;var o={callID:e,cmd:"ClientAccept",meeting:n,module:"CallServer",sessionID:t.sessionID,usrExDat:r||""};try{console.crlog("[CallMgr] WebCMD:".concat(JSON.stringify(o),",cookie:").concat(i))}catch(e){}t.webSendcmd(o,i)},e.CRVideo_RejectCall=function(e,n,r){try{console.crlog("[CallMgr] CRVideo_RejectCall(".concat(JSON.stringify(e,n,r),")"))}catch(e){}var i={callID:e,sessionID:t.sessionID,cmd:"ClientDecline",module:"CallServer",declineReason:"ClientDecline"};try{console.crlog("[CallMgr] WebCMD:".concat(JSON.stringify(i),",cookie:").concat(r))}catch(e){}t.webSendcmd(i,r)},e.CRVideo_HangupCall=function(e,n,r){try{console.crlog("[CallMgr] CRVideo_HangupCall(".concat(e,",").concat(n,",").concat(r,")"))}catch(e){}var i={callID:e,sessionID:t.sessionID,cmd:"ClientReleaseCall",module:"CallServer",usrExDat:n||""};try{console.crlog("[CallMgr] WebCMD:".concat(JSON.stringify(i),",cookie:").concat(r))}catch(e){throw e}t.webSendcmd(i,r)},e.CRVideo_HungupCall=function(e,t,n){CRVideo_HangupCall(e,t,n)},t.callSvrCallback={ClientCustomStatusUpdate:function(t,n,r){try{console.crlog("[Queue] CRVideo_SetDNDStatus -- CMDCallback --\x3e ClientCustomStatusUpdate: ".concat(JSON.stringify(t)))}catch(e){}if(0===t.RspCode){try{console.crlog("[CallMgr] CRVideo_SetDNDStatusSuccess.target(".concat(r,")"))}catch(e){}e.CRVideo_SetDNDStatusSuccess.target(r)}else{try{console.crlog("[CallMgr] CRVideo_SetDNDStatusFail.target(".concat(ICE_SDK_ERR(t.RspCode),",").concat(r,")"))}catch(e){}e.CRVideo_SetDNDStatusFail.target(ICE_SDK_ERR(t.RspCode),r)}},StartStatusPush:function(e,t,n){try{console.crlog("[Queue] CRVideo_StartUserStatusNotify -- CMDCallback --\x3e StartStatusPush: ".concat(JSON.stringify(e)))}catch(e){}try{console.crlog("[CallMgr] CRVideo_StartUserStatusNotifyRslt.target(".concat(ICE_SDK_ERR(e.RspCode),", ").concat(n,")"))}catch(e){}CRVideo_StartUserStatusNotifyRslt.target(ICE_SDK_ERR(e.RspCode),n)},StopStatusPush:function(e,t,n){try{console.crlog("[Queue] CRVideo_StopUserStatusNotify -- CMDCallback --\x3e StopStatusPush: ".concat(JSON.stringify(e)))}catch(e){}try{console.crlog("[CallMgr] CRVideo_StopUserStatusNotifyRslt.target(".concat(ICE_SDK_ERR(e.RspCode),", ").concat(n,")"))}catch(e){}CRVideo_StopUserStatusNotifyRslt.target(ICE_SDK_ERR(e.RspCode),n)},GetUserStatus:function(e,t,n){try{console.crlog("[Queue] CRVideo_GetUserStatus -- CMDCallback --\x3e GetUserStatus: ".concat(JSON.stringify(e)))}catch(e){}if(0===e.RspCode){var r=JSON.parse(JSON.stringify(e.userStatus));try{console.crlog("[CallMgr] CRVideo_GetUserStatusSuccess.target(".concat(JSON.stringify(r),", ").concat(n,")"))}catch(e){}CRVideo_GetUserStatusSuccess.target(r,n)}else{try{console.crlog("[CallMgr] CRVideo_GetUserStatusFail.target(".concat(ICE_SDK_ERR(e.RspCode),", ").concat(n,")"))}catch(e){}CRVideo_GetUserStatusFail.target(ICE_SDK_ERR(e.RspCode),n)}},ClientCall:function(e,t,n){var r=t.callID;try{console.crlog("[CallMgr] CRVideo_Call -- CMDCallback --\x3e ClientCall: ".concat(JSON.stringify(e)))}catch(e){}if(0==e.RspCode){try{console.crlog("[CallMgr] CRVideo_CallSuccess.target(".concat(r,", ").concat(n,");"))}catch(e){}CRVideo_CallSuccess.target(r,n)}else{try{console.crlog("[CallMgr] CRVideo_CallFail.target(".concat(r," ").concat(ICE_SDK_ERR(e.RspCode),", ").concat(n,");"))}catch(e){}CRVideo_CallFail.target(r,ICE_SDK_ERR(e.RspCode),n)}},ClientAccept:function(e,t,n){try{console.crlog("[CallMgr] CRVideo_AcceptCall -- CMDCallback --\x3e AcceptCall: ".concat(JSON.stringify(e)))}catch(e){}var r=t.callID;if(0==e.RspCode){try{console.crlog("[CallMgr] CRVideo_AcceptCallSuccess.target(".concat(r,",").concat(n,")"))}catch(e){}CRVideo_AcceptCallSuccess.target(r,n)}else{try{console.crlog("[CallMgr] CRVideo_AcceptCallFail.target(".concat(r,",").concat(ICE_SDK_ERR(e.RspCode),",").concat(n,")"))}catch(e){}CRVideo_AcceptCallFail.target(r,ICE_SDK_ERR(e.RspCode),n)}},ClientDecline:function(e,t,n){try{console.crlog("[CallMgr] CRVideo_RejectCall -- CMDCallback --\x3e ClientDecline: ".concat(JSON.stringify(e)))}catch(e){}var r=t.callID;if(0==e.RspCode){try{console.crlog("[CallMgr] CRVideo_RejectCallSuccess.target(".concat(r,",").concat(n,")"))}catch(e){}CRVideo_RejectCallSuccess.target(r,n)}else{try{console.crlog("[CallMgr] CRVideo_RejectCallFail.target(".concat(r,",").concat(ICE_SDK_ERR(e.RspCode),",").concat(n,")"))}catch(e){}CRVideo_RejectCallFail.target(r,ICE_SDK_ERR(e.RspCode),n)}},ClientReleaseCall:function(e,t,n){try{console.crlog("[CallMgr] CRVideo_HangupCall -- CMDCallback --\x3e ClientReleaseCall: ".concat(JSON.stringify(e)))}catch(e){}var r=t.callID;if(0==e.RspCode){try{console.crlog("[CallMgr] CRVideo_HangupCallSuccess.target(".concat(r,",").concat(n,")"))}catch(e){}CRVideo_HangupCallSuccess.target(r,n)}else{try{console.crlog("[CallMgr] CRVideo_HangupCallFail.target(".concat(r,",").concat(ICE_SDK_ERR(e.RspCode),",").concat(n,")"))}catch(e){}CRVideo_HangupCallFail.target(r,ICE_SDK_ERR(e.RspCode),n)}},ServerPushUserStatus:function(e){var t={userID:e.usersStatus.userID,userStatus:e.usersStatus.userStatus,DNDType:e.usersStatus.isDND};try{console.crlog("[CallMgr] CRVideo_NotifyUserStatus.target(".concat(JSON.stringify(t),")"))}catch(e){}CRVideo_NotifyUserStatus.target(t)},ServerAccept:function(e){var n={ID:e.meeting.ID,pswd:e.meeting.pswd,subject:e.meeting.subject,pubMeetUrl:e.meeting.pubMeetUrl},r=e.callID,i=e.usrExDat;t.CallID=r;try{console.crlog("[CallMgr] CRVideo_NotifyCallAccepted.target(".concat(r,",").concat(n,",").concat(i,")"))}catch(e){}CRVideo_NotifyCallAccepted.target(r,n,i)},ServerDecline:function(e){var t=e.callID,n=e.usrExDat,r=1;switch(e.declineReason){case"NoAnswer":r=604;break;case"UserNotFound":r=605;break;case"Refuse":case"ClientDecline":r=606}try{console.crlog("[CallMgr] CRVideo_NotifyCallRejected.target(".concat(t,",").concat(r,",").concat(n,")"))}catch(e){}CRVideo_NotifyCallRejected.target(t,r,n)},ServerCall:function(e){var n="";e.meeting&&(n={ID:e.meeting.ID,pswd:e.meeting.pswd,subject:e.meeting.subject,pubMeetUrl:e.meeting.pubMeetUrl});var r=e.callID,i=e.caller,o=e.usrExDat;t.CallID=r;try{console.crlog("[CallMgr] CRVideo_NotifyCallIn.target(".concat(r,",").concat(JSON.stringify(n),",").concat(i,",").concat(o,")"))}catch(e){}CRVideo_NotifyCallIn.target(e.callID,n,e.caller,e.usrExDat)},ServerReleaseCall:function(e){var n=e.callID,r=e.usrExDat;t.CallID="";try{console.crlog("[CallMgr] CRVideo_NotifyCallHangup.target(".concat(n,",").concat(r,")"))}catch(e){}CRVideo_NotifyCallHangup.target(n,r),CRVideo_NotifyCallHungup.target(n,r)},ServerCancelCall:function(e){var n=e.callID,r=e.usrExDat;t.CallID="";try{console.crlog("[CallMgr] CRVideo_NotifyCallHangup.target(".concat(n,",").concat(r,")"))}catch(e){}CRVideo_NotifyCallHangup.target(n,r),CRVideo_NotifyCallHungup.target(n,r)}},e.CRVideo_SetDNDStatusSuccess=new t.CbProxy("CRVideo_SetDNDStatusSuccess"),e.CRVideo_SetDNDStatusFail=new t.CbProxy("CRVideo_SetDNDStatusFail"),e.CRVideo_StartUserStatusNotifyRslt=new t.CbProxy("CRVideo_StartUserStatusNotifyRslt"),e.CRVideo_StopUserStatusNotifyRslt=new t.CbProxy("CRVideo_StopUserStatusNotifyRslt"),e.CRVideo_GetUserStatusSuccess=new t.CbProxy("CRVideo_GetUserStatusSuccess"),e.CRVideo_GetUserStatusFail=new t.CbProxy("CRVideo_GetUserStatusFail"),e.CRVideo_CallSuccess=new t.CbProxy("CRVideo_CallSuccess"),e.CRVideo_CallFail=new t.CbProxy("CRVideo_CallFail"),e.CRVideo_AcceptCallSuccess=new CRVideo.CbProxy("CRVideo_AcceptCallSuccess"),e.CRVideo_AcceptCallFail=new CRVideo.CbProxy("CRVideo_AcceptCallFail"),e.CRVideo_RejectCallSuccess=new CRVideo.CbProxy("CRVideo_RejectCallSuccess"),e.CRVideo_RejectCallFail=new CRVideo.CbProxy("CRVideo_RejectCallFail"),e.CRVideo_HangupCallSuccess=new CRVideo.CbProxy("CRVideo_HangupCallSuccess"),e.CRVideo_HangupCallFail=new CRVideo.CbProxy("CRVideo_HangupCallFail"),e.CRVideo_NotifyUserStatus=new t.CbProxy("CRVideo_NotifyUserStatus"),e.CRVideo_NotifyCallIn=new CRVideo.CbProxy("CRVideo_NotifyCallIn"),e.CRVideo_NotifyCallAccepted=new t.CbProxy("CRVideo_NotifyCallAccepted"),e.CRVideo_NotifyCallHangup=new CRVideo.CbProxy("CRVideo_NotifyCallHangup"),e.CRVideo_NotifyCallHungup=new CRVideo.CbProxy("CRVideo_NotifyCallHungup"),e.CRVideo_NotifyCallRejected=new CRVideo.CbProxy("CRVideo_NotifyCallRejected")}(window,CRVideo,Ice)},9474:()=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,n(i.key),i)}}function n(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,n||"default");if("object"!=e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==e(n)?n:n+""}var r=window.CRVideo,i=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initData(),this.initIceCallback(),this.initSDKInterface()},n=[{key:"initData",value:function(){}},{key:"initIceCallback",value:function(){var e=this;this.ICECallback={invite:function(){e.notifyInviteIn.apply(e,arguments)},cancelInvite:function(){e.notifyInviteCanceled.apply(e,arguments)},acceptInvite:function(){e.notifyInviteAccepted.apply(e,arguments)},rejectInvite:function(){e.notifyInviteRejected.apply(e,arguments)},inviteResult:function(){console.log(JSON.stringify.apply(JSON,arguments))}}}},{key:"initSDKInterface",value:function(){var e=this;window.CRVideo_Invite=function(t,n,r){try{console.crlog("[Invite] CRVideo_Invite(".concat(JSON.stringify({invitedUserID:t,userExtDat:n,cookie:r}),")"))}catch(e){console.error(e)}return e.invite(t,n,r)},window.CRVideo_AcceptInvite=function(t,n,r){try{console.crlog("[Invite] CRVideo_AcceptInvite(".concat(JSON.stringify({inviteID:t,userExtDat:n,cookie:r}),")"))}catch(e){console.error(e)}return e.acceptInvite(t,n,r)},window.CRVideo_RejectInvite=function(t,n,r){try{console.crlog("[Invite] CRVideo_RejectInvite(".concat(JSON.stringify({inviteID:t,userExtDat:n,cookie:r}),")"))}catch(e){console.error(e)}return e.rejectInvite(t,n,r)},window.CRVideo_CancelInvite=function(t,n,r){try{console.crlog("[Invite] CRVideo_CancelInvite(".concat(JSON.stringify({inviteID:t,userExtDat:n,cookie:r}),")"))}catch(e){console.error(e)}return e.cancelInvite(t,n,r)}}},{key:"invite",value:function(e,t,n){var i=Ice.generateUUID(),o={module:"CallServer",cmd:"invite",inviteID:i,invitedUserID:e,usrExtDat:t||""};try{console.crlog("[Invite] WebCMD:".concat(JSON.stringify(o),",cookie:").concat(n))}catch(e){}return r.callServerSendCMD(o).then((function(e){try{console.crlog("[Invite] CRVideo_Invite -- CMDRslt --\x3e invite: ".concat(JSON.stringify(e)))}catch(e){}if(0!==e.RspCode)return console.crlog("[Invite] CRVideo_InviteFail.target(".concat(i,",").concat(ICE_SDK_ERR(e.RspCode),",").concat(n,")")),void window.CRVideo_InviteFail.target(i,ICE_SDK_ERR(e.RspCode),n);console.crlog("[Invite] CRVideo_InviteSuccess.target(".concat(i,",").concat(n,")")),window.CRVideo_InviteSuccess.target(i,n)})),i}},{key:"acceptInvite",value:function(e,t,n){var i={module:"CallServer",cmd:"acceptInvite",inviteID:e,usrExtDat:t||""};try{console.crlog("[Invite] WebCMD:".concat(JSON.stringify(i),",cookie:").concat(n))}catch(e){}r.callServerSendCMD(i).then((function(t){try{console.crlog("[Invite] CRVideo_AcceptInvite -- CMDRslt --\x3e acceptInvite: ".concat(JSON.stringify(t)))}catch(e){}if(0!==t.RspCode)return console.crlog("[Invite] CRVideo_AcceptInviteFail.target(".concat(e,",").concat(ICE_SDK_ERR(t.RspCode),",").concat(n,")")),void window.CRVideo_AcceptInviteFail.target(e,ICE_SDK_ERR(t.RspCode),n);console.crlog("[Invite] CRVideo_AcceptInviteSuccess.target(".concat(e,",").concat(n,")")),window.CRVideo_AcceptInviteSuccess.target(e,n)}))}},{key:"rejectInvite",value:function(e,t,n){var i={module:"CallServer",cmd:"rejectInvite",inviteID:e,usrExtDat:t||""};try{console.crlog("[Invite] WebCMD:".concat(JSON.stringify(i),",cookie:").concat(n))}catch(e){}r.callServerSendCMD(i).then((function(t){try{console.crlog("[Invite] CRVideo_RejectInvite -- CMDRslt --\x3e rejectInvite: ".concat(JSON.stringify(t)))}catch(e){}if(0!==t.RspCode)return console.crlog("[Invite] CRVideo_RejectInviteFail.target(".concat(e,",").concat(ICE_SDK_ERR(t.RspCode),",").concat(n,")")),void window.CRVideo_RejectInviteFail.target(e,ICE_SDK_ERR(t.RspCode),n);console.crlog("[Invite] CRVideo_RejectInviteSuccess.target(".concat(e,",").concat(n,")")),window.CRVideo_RejectInviteSuccess.target(e,n)}))}},{key:"cancelInvite",value:function(e,t,n){var i={module:"CallServer",cmd:"cancelInvite",inviteID:e,usrExtDat:t||""};try{console.crlog("[Invite] WebCMD:".concat(JSON.stringify(i),",cookie:").concat(n))}catch(e){}r.callServerSendCMD(i).then((function(t){try{console.crlog("[Invite] CRVideo_CancelInvite -- CMDRslt --\x3e cancelInvite: ".concat(JSON.stringify(t)))}catch(e){}if(0!==t.RspCode)return console.crlog("[Invite] CRVideo_CancelInviteFail.target(".concat(e,",").concat(ICE_SDK_ERR(t.RspCode),",").concat(n,")")),void window.CRVideo_CancelInviteFail.target(e,ICE_SDK_ERR(t.RspCode),n);console.crlog("[Invite] CRVideo_CancelInviteSuccess.target(".concat(e,",").concat(n,")")),window.CRVideo_CancelInviteSuccess.target(e,n)}))}},{key:"notifyInviteIn",value:function(e){var t=e.inviteID,n=e.inviterUserID,r=e.usrExtDat;console.crlog("[Invite] CRVideo_NotifyInviteIn.target(".concat(t,",").concat(n,",").concat(r,")")),window.CRVideo_NotifyInviteIn.target(t,n,r)}},{key:"notifyInviteCanceled",value:function(e){var t=e.inviteID,n=ICE_SDK_ERR(e.failCode),r=e.usrExtDat;console.crlog("[Invite] CRVideo_NotifyInviteCanceled.target(".concat(t,",").concat(n,",").concat(r,")")),window.CRVideo_NotifyInviteCanceled.target(t,n,r)}},{key:"notifyInviteAccepted",value:function(e){var t=e.inviteID,n=e.usrExtDat;console.crlog("[Invite] CRVideo_NotifyInviteAccepted.target(".concat(t,",").concat(n,")")),window.CRVideo_NotifyInviteAccepted.target(t,n)}},{key:"notifyInviteRejected",value:function(e){var t=e.inviteID,n=ICE_SDK_ERR(e.failCode),r=e.usrExtDat;console.crlog("[Invite] CRVideo_NotifyInviteRejected.target(".concat(t,",").concat(n,",").concat(r,")")),window.CRVideo_NotifyInviteRejected.target(t,n,r)}}],n&&t(e.prototype,n),i&&t(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n,i}();window._crInviteClass=i,window.__Rtc.CRRTCInvite=new window._crInviteClass,window.CRVideo_InviteSuccess=new r.CbProxy("CRVideo_InviteSuccess"),window.CRVideo_InviteFail=new r.CbProxy("CRVideo_InviteFail"),window.CRVideo_AcceptInviteSuccess=new r.CbProxy("CRVideo_AcceptInviteSuccess"),window.CRVideo_AcceptInviteFail=new r.CbProxy("CRVideo_AcceptInviteFail"),window.CRVideo_RejectInviteSuccess=new r.CbProxy("CRVideo_RejectInviteSuccess"),window.CRVideo_RejectInviteFail=new r.CbProxy("CRVideo_RejectInviteFail"),window.CRVideo_CancelInviteSuccess=new r.CbProxy("CRVideo_CancelInviteSuccess"),window.CRVideo_CancelInviteFail=new r.CbProxy("CRVideo_CancelInviteFail"),window.CRVideo_NotifyInviteIn=new r.CbProxy("CRVideo_NotifyInviteIn"),window.CRVideo_NotifyInviteAccepted=new r.CbProxy("CRVideo_NotifyInviteAccepted"),window.CRVideo_NotifyInviteRejected=new r.CbProxy("CRVideo_NotifyInviteRejected"),window.CRVideo_NotifyInviteCanceled=new r.CbProxy("CRVideo_NotifyInviteCanceled")},967:()=>{var e,t;e=window,(t=CRVideo).QueList=[],t.queStateList=[],t.queuingID=null,t.queuingInfo={},t.queuingTimer=null,t.queServiceArr=[],t.mycallInfo={},t.queUserList=[],e.CRVideo_InitQueueDat=function(e){try{console.crlog("[QueueMgr] CRVideo_InitQueueDat(".concat(e,")"))}catch(e){}var n={cmd:"GetServiceData",module:"Queue",sessionID:t.sessionID};try{console.crlog("[QueueMgr] WebCMD: ".concat(JSON.stringify(n),", cookie:").concat(e))}catch(e){}t.webSendcmd(n,e)},e.CRVideo_GetAllQueueInfo=function(){try{console.crlog("[QueueMgr] CRVideo_GetAllQueueInfo()")}catch(e){}var e=[];return t.QueList.forEach((function(t){e.push({queID:+t.queID,prio:+t.prio,name:t.name,desc:t.desc})})),e},e.CRVideo_RefreshAllQueueStatus=function(n){try{!n&&console.crlog("[QueueMgr] CRVideo_RefreshAllQueueStatus(".concat(n,")"))}catch(e){}var r=t.QueList.length;try{!n&&console.crlog("[QueueMgr] All queue list length: ".concat(r))}catch(e){}for(var i=0;i<r;i++){var o=t.QueList[i];e.CRVideo_GetQueueStatus(o.queID,"RefreshAllQueueStatus",n)}},e.CRVideo_GetQueueStatus=function(e,n,r){try{!r&&console.crlog("[QueueMgr] CRVideo_GetQueueStatus(".concat(e,",").concat(n,",").concat(r,")"))}catch(e){}var i={cmd:"GetQueueStatus",module:"Queue",queID:e=parseInt(e),sessionID:t.sessionID};try{!r&&console.crlog("[QueueMgr] WebCMD: ".concat(JSON.stringify(i)))}catch(e){}t.webSendcmd(i,n,r)},e.CRVideo_StartService=function(e,n,r){try{console.crlog("[QueueMgr] CRVideo_StartService(".concat(e,",").concat(n,",").concat(r,")"))}catch(e){}n=null==n?0:n;var i={cmd:"AgentEnter",module:"Queue",queID:e=parseInt(e),priority:n,sessionID:t.sessionID};try{console.crlog("[QueueMgr] WebCMD: ".concat(JSON.stringify(i),", cookie: ").concat(r))}catch(e){}t.webSendcmd(i,r)},e.CRVideo_StopService=function(e,n){try{console.crlog("[QueueMgr] CRVideo_StopService(".concat(e,",").concat(n,")"))}catch(e){}var r={cmd:"AgentLeave",module:"Queue",queID:e=parseInt(e),sessionID:t.sessionID};try{console.crlog("[QueueMgr] WebCMD: ".concat(JSON.stringify(r),", cookie: ").concat(n))}catch(e){}t.webSendcmd(r,n)},e.CRVideo_AcceptAssignUser=function(e,n,r){try{console.crlog("[QueueMgr] CRVideo_AcceptAssignUser(".concat(e,",").concat(n,",").concat(r,")"))}catch(e){}var i={accept:1,cmd:"AssignResponse",module:"Queue",queID:+e,userID:n,sessionID:t.sessionID};try{console.crlog("[QueueMgr] WebCMD: ".concat(JSON.stringify(i),", cookie: ").concat(r))}catch(e){}t.webSendcmd(i,r)},e.CRVideo_RejectAssignUser=function(e,n,r){try{console.crlog("[QueueMgr] CRVideo_RejectAssignUser(".concat(e,",").concat(n,",").concat(r,")"))}catch(e){}var i={accept:0,cmd:"AssignResponse",module:"Queue",queID:+e,userID:n,sessionID:t.sessionID};try{console.crlog("[QueueMgr] WebCMD: ".concat(JSON.stringify(i),", cookie: ").concat(r))}catch(e){}t.webSendcmd(i,r)},e.CRVideo_ReqAssignUser=function(e,n,r){try{console.crlog("[QueueMgr] CRVideo_ReqAssignUser(".concat(e,",").concat(n,",").concat(r,")"))}catch(e){}var i={cmd:"RequestUser",module:"Queue",sessionID:t.sessionID};n&&(i.queID=+n),r&&(i.userID=r);try{console.crlog("[QueueMgr] WebCMD: ".concat(JSON.stringify(i),", cookie: ").concat(e))}catch(e){}t.webSendcmd(i,e)},e.CRVideo_GetServingQueues=function(){var e=[];return t.queServiceArr.forEach((function(t){e.push(t)})),e},e.CRVideo_GetQueueUsers=function(e,n){try{console.crlog("[QueueMgr] CRVideo_GetQueueUsers(".concat(e,",").concat(n,")"))}catch(e){}var r={cmd:"GetQueueUsers",module:"Queue",queID:+e,sessionID:t.sessionID};try{console.crlog("[QueueMgr] WebCMD: ".concat(JSON.stringify(r),", cookie: ").concat(n))}catch(e){}t.webSendcmd(r,n)},e.CRVideo_StartQueuing=function(e,n,r){try{console.crlog("[QueueMgr] CRVideo_StartQueuing(".concat(e,",").concat(JSON.stringify(n),",").concat(r,")"))}catch(e){}t.queuingID=parseInt(e);var i={cmd:"UserEnter",module:"Queue",queID:parseInt(e),sessionID:t.sessionID,usrExDat:n};try{console.crlog("[QueueMgr] WebCMD:".concat(JSON.stringify(i),",cookie:").concat(r))}catch(e){}t.webSendcmd(i,r)},e.CRVideo_StopQueuing=function(e){try{console.crlog("[QueueMgr] CRVideo_StopQueuing(".concat(e,")"))}catch(e){}var n={cmd:"UserLeave",module:"Queue",queID:+t.queuingID,sessionID:t.sessionID};try{console.crlog("[QueueMgr] WebCMD:".concat(JSON.stringify(n),",cookie:").concat(e))}catch(e){}t.webSendcmd(n,e),t.queuingID=null},e.CRVideo_GetUserServiceStatus=function(){console.crlog("[QueueMgr] CRVideo_GetUserServiceStatus()");var e={cmd:"GetUserServiceStatus",module:"Queue",sessionID:t.sessionID};try{console.crlog("[QueueMgr] WebCMD:".concat(JSON.stringify(e)))}catch(e){}t.webSendcmd(e)},e.CRVideo_GetAgentServiceStatus=function(){console.crlog("[QueueMgr] CRVideo_GetAgentServiceStatus()");var e={cmd:"GetAgentServiceStatus",module:"Queue",sessionID:t.sessionID};try{console.crlog("[QueueMgr] WebCMD:".concat(JSON.stringify(e)))}catch(e){}t.webSendcmd(e)},e.CRVideo_GetQueuingInfo=function(){var e=t.queuingInfo;return console.crlog("[QueueMgr] CRVideo_GetQueuingInfo(), returnVal: ".concat(JSON.stringify(e))),e},e.CRVideo_GetSessionInfo=function(){var e={callID:t.mycallInfo.callID||"",peerID:t.mycallInfo.peerID||"",peerName:t.mycallInfo.peerName||"",bCallAccepted:t.mycallInfo.bCallAccepted||0,duration:t.mycallInfo.duration||0,meetingID:t.mycallInfo.meetingID||null,meetingPswd:t.mycallInfo.meetingPswd||""};return console.crlog("[QueueMgr] CRVideo_GetSessionInfo(), returnVal: ".concat(JSON.stringify(e))),e},t.queCallback={GetServiceData:function(n,r,i){try{console.crlog("[QueueMgr] CRVideo_InitQueueDat -- CMDCallback --\x3e GetServiceData: ".concat(JSON.stringify(n)))}catch(e){}0===n.RspCode&&(t.QueList=n.ques,e.CRVideo_GetUserServiceStatus(),e.CRVideo_GetAgentServiceStatus());try{console.crlog("[QueueMgr] CRVideo_InitQueueDatRslt.target(".concat(ICE_SDK_ERR(n.RspCode),",").concat(i,")"))}catch(e){}e.CRVideo_InitQueueDatRslt.target(ICE_SDK_ERR(n.RspCode),i)},GetQueueStatus:function(n,r,i,o){try{!o&&console.crlog("[QueueMgr] CRVideo_GetQueueStatus -- CMDCallback --\x3e GetQueueStatus: ".concat(JSON.stringify(n)))}catch(e){}if(0===n.RspCode){t.queStateList.length;for(var a=!1,c=n.status,s=0;s<t.queStateList.length;s++)t.queStateList[s].queID!=c.queID||(t.queStateList[s]=c,a=!0);a||t.queStateList.push(c)}try{!o&&console.crlog("[QueueMgr] CRVideo_GetQueueStatusRslt.target(".concat(JSON.stringify(n.status),",").concat(ICE_SDK_ERR(n.RspCode),",").concat(i,")"))}catch(e){}e.CRVideo_GetQueueStatusRslt.target(n.status,ICE_SDK_ERR(n.RspCode),i)},AgentEnter:function(e,n,r){try{console.crlog("[QueueMgr] CRVideo_StartService -- CMDCallback --\x3e AgentEnter: ".concat(JSON.stringify(e)))}catch(e){}0===e.RspCode&&(t.queServiceArr.push(n.queID),console.crlog("[QueueMgr] queServiceArr: ".concat(JSON.stringify(t.queServiceArr))));try{console.crlog("[QueueMgr] CRVideo_StartServiceRslt.target(".concat(n.queID,",").concat(ICE_SDK_ERR(e.RspCode),",").concat(r,")"))}catch(e){}CRVideo_StartServiceRslt.target(n.queID,ICE_SDK_ERR(e.RspCode),r)},AgentLeave:function(e,n,r){try{console.crlog("[QueueMgr] CRVideo_StopService -- CMDCallback --\x3e AgentLeave: ".concat(JSON.stringify(e)))}catch(e){}0===e.RspCode&&(t.queServiceArr.splice(t.queServiceArr.findIndex((function(e){return e==n.queID})),1),console.crlog("[QueueMgr] queServiceArr: ".concat(JSON.stringify(t.queServiceArr))));try{console.crlog("[QueueMgr] CRVideo_StopServiceRslt.target(".concat(n.queID,",").concat(ICE_SDK_ERR(e.RspCode),",").concat(r,")"))}catch(e){}CRVideo_StopServiceRslt.target(n.queID,ICE_SDK_ERR(e.RspCode),r)},AssignResponse:function(e,t,n){try{console.crlog("[QueueMgr] CRVideo_AcceptAssignUser、CRVideo_RejectAssignUser -- CMDCallback --\x3e AssignResponse: ".concat(JSON.stringify(e)))}catch(e){}try{console.crlog("[QueueMgr] CRVideo_ResponseAssignUserRslt.target(".concat(ICE_SDK_ERR(e.RspCode),",").concat(n,")"))}catch(e){}CRVideo_ResponseAssignUserRslt.target(ICE_SDK_ERR(e.RspCode),n)},RequestUser:function(e,t,n){try{console.crlog("[QueueMgr] CRVideo_ReqAssignUser -- CMDCallback --\x3e RequestUser: ".concat(JSON.stringify(e)))}catch(e){}var r={queID:e.queID,userID:e.userID,nickname:e.userName,queuingTime:e.wait_time,usrExDat:e.usrExDat};try{console.crlog("[QueueMgr] CRVideo_ReqAssignUserRslt.target(".concat(ICE_SDK_ERR(e.RspCode),",").concat(JSON.stringify(r),",").concat(n,")"))}catch(e){}CRVideo_ReqAssignUserRslt.target(ICE_SDK_ERR(e.RspCode),r,n)},GetQueueUsers:function(e,n,r){try{console.crlog("[QueueMgr] CRVideo_GetQueueUsers -- CMDCallback --\x3e GetQueueUsers: ".concat(JSON.stringify(e)))}catch(e){}var i=[];e.users.forEach((function(e){i.push({queID:n.queID,userID:e.userID,nickname:e.userName,queuingTime:e.wait_time,usrExDat:e.usrExDat})})),t.queUserList=i;try{console.crlog("[QueueMgr] CRVideo_GetQueueUsersRslt.target(".concat(ICE_SDK_ERR(e.RspCode),",").concat(JSON.stringify(i),",").concat(r,")"))}catch(e){}CRVideo_GetQueueUsersRslt.target(ICE_SDK_ERR(e.RspCode),JSON.parse(JSON.stringify(i)),r)},UserEnter:function(n,r,i){try{console.crlog("[QueueMgr] CRVideo_StartQueuing -- CMDCallback --\x3e UserEnter: ".concat(JSON.stringify(n)))}catch(e){}var o=n.RspCode;0==o&&(t.queuingInfo={queID:r.queID,position:+n.position,queuingTime:0},t.queuingTimer=setInterval((function(){t.queuingInfo.queuingTime++}),1e3));try{console.crlog("[QueueMgr] CRVideo_StartQueuingRslt.target(".concat(ICE_SDK_ERR(o),",").concat(i,")"))}catch(e){}e.CRVideo_StartQueuingRslt.target(ICE_SDK_ERR(o),i);try{console.crlog("[QueueMgr] CRVideo_QueuingInfoChanged.target(".concat(JSON.stringify(t.queuingInfo),")"))}catch(e){}e.CRVideo_QueuingInfoChanged.target(t.queuingInfo)},UserLeave:function(e,n,r){try{console.crlog("[QueueMgr] CRVideo_StopQueuing -- CMDCallback --\x3e UserLeave: ".concat(JSON.stringify(e)))}catch(e){}var i=e.RspCode;if(0==i){t.queuingInfo={queID:n.queID,position:-1,queuingTime:0};try{console.crlog("[QueueMgr] Clear Interval: queuingTimer")}catch(e){}clearInterval(t.queuingTimer)}try{console.crlog("[QueueMgr] CRVideo_StopQueuingRslt.target(".concat(ICE_SDK_ERR(i),",").concat(r,")"))}catch(e){}CRVideo_StopQueuingRslt.target(ICE_SDK_ERR(i),r)},GetUserServiceStatus:function(e,n,r){try{console.crlog("[QueueMgr] CRVideo_GetUserServiceStatus -- CMDCallback --\x3e GetUserServiceStatus: ".concat(JSON.stringify(e)))}catch(e){}0==e.RspCode&&(t.mycallInfo.callID=e.callInfo.callID,t.mycallInfo.peerID=e.callInfo.peerID,t.mycallInfo.peerName=e.callInfo.peerName,t.mycallInfo.bCallAccepted=e.callInfo.callState,t.mycallInfo.duration=e.callInfo.duration,t.mycallInfo.meetingID=void 0!==e.callInfo.meetInfo?e.callInfo.meetInfo.ID:null,t.mycallInfo.meetingPswd=void 0!==e.callInfo.meetInfo?e.callInfo.meetInfo.pswd:null,t.mycallInfo.position=void 0!==e.position?e.position:null,t.mycallInfo.queID=void 0!==e.queID?e.queID:null,t.mycallInfo.wait_time=void 0!==e.wait_time?e.wait_time:null)},GetAgentServiceStatus:function(e,n,r){try{console.crlog("[QueueMgr] CRVideo_GetAgentServiceStatus -- CMDCallback --\x3e GetAgentServiceStatus: ".concat(JSON.stringify(e)))}catch(e){}0==e.RspCode&&(t.mycallInfo.callID=e.callInfo.callID,t.mycallInfo.peerID=e.callInfo.peerID,t.mycallInfo.peerName=e.callInfo.peerName,t.mycallInfo.bCallAccepted=e.callInfo.callState,t.mycallInfo.duration=e.callInfo.duration,t.mycallInfo.meetingID=void 0!==e.callInfo.meetInfo?e.callInfo.meetInfo.ID:null,t.mycallInfo.meetingPswd=void 0!==e.callInfo.meetInfo?e.callInfo.meetInfo.pswd:null,t.mycallInfo.queIDs=void 0!==e.queIDs?e.queIDs:null)},NotifyQueueStatus:function(e){try{console.crlog("[QueueMgr] CRVideo_QueueStatusChanged.target(".concat(JSON.stringify(e.status),")"))}catch(e){}CRVideo_QueueStatusChanged.target(e.status)},AssignUser:function(e){var t={queID:e.queID,userID:e.userID,nickname:e.userName,queuingTime:e.wait_time,usrExDat:e.usrExDat};try{console.crlog("[QueueMgr] CRVideo_AutoAssignUser.target(".concat(JSON.stringify(t),")"))}catch(e){}CRVideo_AutoAssignUser.target(t)},AssignCancel:function(e){try{console.crlog("[QueueMgr] CRVideo_CancelAssignUser.target(".concat(e.queID,",").concat(e.userID,")"))}catch(e){}CRVideo_CancelAssignUser.target(e.queID,e.userID)},NotifyUserEnter:function(e){var n={queID:e.queID,userID:e.user.userID,nickname:e.user.userName,queuingTime:e.user.wait_time,usrExDat:e.user.usrExDat};t.queUserList.find((function(t){return t.userID==e.user.userID}))||t.queUserList.push(n),console.crlog("[QueueMgr] CRVideo_NotifyUserEnter.target(".concat(e.queID,", ").concat(JSON.stringify(n),")")),CRVideo_NotifyUserEnter.target(e.queID,JSON.parse(JSON.stringify(n)))},NotifyUserLeave:function(e){var n=t.queUserList.findIndex((function(t){return t.userID==e.userID&&t.queID==e.queID}));n>-1&&t.queUserList.splice(n,1),console.crlog("[QueueMgr] CRVideo_NotifyUserLeave.target(".concat(e.queID,",").concat(e.userID,",").concat(e.inService,")")),CRVideo_NotifyUserLeave.target(e.queID,e.userID,e.inService)},NotifyPosition:function(e){var t={queID:e.status.queID,agent_num:e.status.agent_num,wait_num:e.status.wait_num,srv_num:e.status.srv_num},n={queID:e.status.queID,position:e.position,queuingTime:e.wait_time};try{console.crlog("[QueueMgr] CRVideo_QueueStatusChanged.target(".concat(JSON.stringify(t),")"))}catch(e){}CRVideo_QueueStatusChanged.target(t);try{console.crlog("[QueueMgr] CRVideo_QueuingInfoChanged.target(".concat(JSON.stringify(n),")"))}catch(e){}CRVideo_QueuingInfoChanged.target(n)}},e.CRVideo_InitQueueDatRslt=new t.CbProxy("CRVideo_InitQueueDatRslt"),e.CRVideo_GetQueueStatusRslt=new t.CbProxy("CRVideo_GetQueueStatusRslt"),e.CRVideo_StartServiceRslt=new t.CbProxy("CRVideo_StartServiceRslt"),e.CRVideo_StopServiceRslt=new t.CbProxy("CRVideo_StopServiceRslt"),e.CRVideo_ResponseAssignUserRslt=new t.CbProxy("CRVideo_ResponseAssignUserRslt"),e.CRVideo_ReqAssignUserRslt=new CRVideo.CbProxy("CRVideo_ReqAssignUserRslt"),e.CRVideo_GetQueueUsersRslt=new CRVideo.CbProxy("CRVideo_GetQueueUsersRslt"),e.CRVideo_StartQueuingRslt=new t.CbProxy("CRVideo_StartQueuingRslt"),e.CRVideo_StopQueuingRslt=new t.CbProxy("CRVideo_StopQueuingRslt"),e.CRVideo_AutoAssignUser=new t.CbProxy("CRVideo_AutoAssignUser"),e.CRVideo_CancelAssignUser=new t.CbProxy("CRVideo_CancelAssignUser"),e.CRVideo_NotifyUserEnter=new t.CbProxy("CRVideo_NotifyUserEnter"),e.CRVideo_NotifyUserLeave=new t.CbProxy("CRVideo_NotifyUserLeave"),e.CRVideo_QueueStatusChanged=new t.CbProxy("CRVideo_QueueStatusChanged"),e.CRVideo_QueuingInfoChanged=new t.CbProxy("CRVideo_QueuingInfoChanged")},3169:(e,t)=>{var n;function r(e,t){var n;n="undefined"!=typeof global?global:null,"undefined"==typeof RecordRTC&&n&&"undefined"==typeof window&&"undefined"!=typeof global&&(global.navigator={userAgent:"Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45",getUserMedia:function(){}},global.console||(global.console={}),void 0!==global.console.log&&void 0!==global.console.error||(global.console.error=global.console.log=global.console.log||function(){console.log(arguments)}),"undefined"==typeof document&&(n.document={documentElement:{appendChild:function(){return""}}},document.createElement=document.captureStream=document.mozCaptureStream=function(){var e={getContext:function(){return e},play:function(){},pause:function(){},drawImage:function(){},toDataURL:function(){return""},style:{}};return e},n.HTMLVideoElement=function(){}),"undefined"==typeof location&&(n.location={protocol:"file:",href:"",hash:""}),"undefined"==typeof screen&&(n.screen={width:0,height:0}),void 0===l&&(n.URL={createObjectURL:function(){return""},revokeObjectURL:function(){return""}}),n.window=global),t=t||"multi-streams-mixer";var r=[],i=!1,o=document.createElement("canvas"),a=o.getContext("2d");o.style.opacity=0,o.style.position="absolute",o.style.zIndex=-1,o.style.top="-1000em",o.style.left="-1000em",o.className=t,(document.body||document.documentElement).appendChild(o),this.disableLogs=!1,this.frameInterval=10,this.width=360,this.height=240,this.useGainNode=!0;var c=this,s=window.AudioContext;void 0===s&&("undefined"!=typeof webkitAudioContext&&(s=webkitAudioContext),"undefined"!=typeof mozAudioContext&&(s=mozAudioContext));var l=window.URL;void 0===l&&"undefined"!=typeof webkitURL&&(l=webkitURL),"undefined"!=typeof navigator&&void 0===navigator.getUserMedia&&(void 0!==navigator.webkitGetUserMedia&&(navigator.getUserMedia=navigator.webkitGetUserMedia),void 0!==navigator.mozGetUserMedia&&(navigator.getUserMedia=navigator.mozGetUserMedia));var u=window.MediaStream;void 0===u&&"undefined"!=typeof webkitMediaStream&&(u=webkitMediaStream),void 0!==u&&void 0===u.prototype.stop&&(u.prototype.stop=function(){this.getTracks().forEach((function(e){e.stop()}))});var d={};function f(){if(!i){var e=r.length,t=!1,n=[];if(r.forEach((function(e){e.stream||(e.stream={}),e.stream.fullcanvas?t=e:n.push(e)})),t)o.width=t.stream.width,o.height=t.stream.height;else if(n.length){o.width=e>1?2*n[0].width:n[0].width;var a=1;3!==e&&4!==e||(a=2),5!==e&&6!==e||(a=3),7!==e&&8!==e||(a=4),9!==e&&10!==e||(a=5),o.height=n[0].height*a}else o.width=c.width||360,o.height=c.height||240;t&&t instanceof HTMLVideoElement&&h(t),n.forEach((function(e,t){h(e,t)})),setTimeout(f,c.frameInterval)}}function h(e,t){if(!i){var n=0,r=0,o=e.width,c=e.height;1===t&&(n=e.width),2===t&&(r=e.height),3===t&&(n=e.width,r=e.height),4===t&&(r=2*e.height),5===t&&(n=e.width,r=2*e.height),6===t&&(r=3*e.height),7===t&&(n=e.width,r=3*e.height),void 0!==e.stream.left&&(n=e.stream.left),void 0!==e.stream.top&&(r=e.stream.top),void 0!==e.stream.width&&(o=e.stream.width),void 0!==e.stream.height&&(c=e.stream.height),a.drawImage(e,n,r,o,c),"function"==typeof e.stream.onRender&&e.stream.onRender(a,n,r,o,c,t)}}function p(){d.AudioContextConstructor||(d.AudioContextConstructor=new d.AudioContext),c.audioContext=d.AudioContextConstructor,c.audioSources=[],!0===c.useGainNode&&(c.gainNode=c.audioContext.createGain(),c.gainNode.connect(c.audioContext.destination),c.gainNode.gain.value=0);var t=0;if(e.forEach((function(e){if(e.getTracks().filter((function(e){return"audio"===e.kind})).length){t++;var n=c.audioContext.createMediaStreamSource(e);!0===c.useGainNode&&n.connect(c.gainNode),c.audioSources.push(n)}})),t)return c.audioDestination=c.audioContext.createMediaStreamDestination(),c.audioSources.forEach((function(e){e.connect(c.audioDestination)})),c.audioDestination.stream}function _(e){var n=document.createElement("video");return function(e,t){"srcObject"in t?t.srcObject=e:"mozSrcObject"in t?t.mozSrcObject=e:t.srcObject=e}(e,n),n.className=t,n.muted=!0,n.volume=0,n.width=e.width||c.width||360,n.height=e.height||c.height||240,n.click(),n.play(),n}function g(t){r=[],(t=t||e).forEach((function(e){if(e.getTracks().filter((function(e){return"video"===e.kind})).length){var t=_(e);t.stream=e,r.push(t)}}))}void 0!==s?d.AudioContext=s:"undefined"!=typeof webkitAudioContext&&(d.AudioContext=webkitAudioContext),this.startDrawingFrames=function(){f()},this.appendStreams=function(t){if(!t)throw"First parameter is required.";t instanceof Array||(t=[t]),t.forEach((function(t){var n=new u;if(t.getTracks().filter((function(e){return"video"===e.kind})).length){var i=_(t);i.stream=t,r.push(i),n.addTrack(t.getTracks().filter((function(e){return"video"===e.kind}))[0])}if(t.getTracks().filter((function(e){return"audio"===e.kind})).length){var o=c.audioContext.createMediaStreamSource(t);c.audioDestination=c.audioContext.createMediaStreamDestination(),o.connect(c.audioDestination),n.addTrack(c.audioDestination.stream.getTracks().filter((function(e){return"audio"===e.kind}))[0])}e.push(n)}))},this.releaseStreams=function(){r=[],i=!0,c.gainNode&&(c.gainNode.disconnect(),c.gainNode=null),c.audioSources.length&&(c.audioSources.forEach((function(e){e.disconnect()})),c.audioSources=[]),c.audioDestination&&(c.audioDestination.disconnect(),c.audioDestination=null),c.audioContext&&c.audioContext.close(),c.audioContext=null,a.clearRect(0,0,o.width,o.height),o.stream&&(o.stream.stop(),o.stream=null)},this.resetVideoStreams=function(e){!e||e instanceof Array||(e=[e]),g(e)},this.name="MultiStreamsMixer",this.toString=function(){return this.name},this.getMixedStream=function(){i=!1;var t=function(){var e;g(),"captureStream"in o?e=o.captureStream():"mozCaptureStream"in o?e=o.mozCaptureStream():c.disableLogs||console.error("Upgrade to latest Chrome or otherwise enable this flag: chrome://flags/#enable-experimental-web-platform-features");var t=new u;return e.getTracks().filter((function(e){return"video"===e.kind})).forEach((function(e){t.addTrack(e)})),o.stream=t,t}(),n=p();return n&&n.getTracks().filter((function(e){return"audio"===e.kind})).forEach((function(e){t.addTrack(e)})),e.forEach((function(e){e.fullcanvas&&!0})),t},this.getMixedAudioStream=p}"undefined"==typeof RecordRTC&&(e.exports=r,void 0===(n=function(){return r}.apply(t,[]))||(e.exports=n))},7532:function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}(function(){"use strict";var t;function n(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var r="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var i=function(t){t=["object"==("undefined"==typeof globalThis?"undefined":e(globalThis))&&globalThis,t,"object"==("undefined"==typeof window?"undefined":e(window))&&window,"object"==("undefined"==typeof self?"undefined":e(self))&&self,"object"==("undefined"==typeof global?"undefined":e(global))&&global];for(var n=0;n<t.length;++n){var r=t[n];if(r&&r.Math==Math)return r}throw Error("Cannot find global object")}(this);function o(e,t){if(t)e:{var n=i;e=e.split(".");for(var o=0;o<e.length-1;o++){var a=e[o];if(!(a in n))break e;n=n[a]}(t=t(o=n[e=e[e.length-1]]))!=o&&null!=t&&r(n,e,{configurable:!0,writable:!0,value:t})}}function a(e){return(e={next:e})[Symbol.iterator]=function(){return this},e}function c(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:n(e)}}function s(e){if(!(e instanceof Array)){e=c(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}o("Symbol",(function(e){function t(e,t){this.h=e,r(this,"description",{configurable:!0,writable:!0,value:t})}if(e)return e;t.prototype.toString=function(){return this.h};var n="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",i=0;return function e(r){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new t(n+(r||"")+"_"+i++,r)}})),o("Symbol.iterator",(function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var t="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),o=0;o<t.length;o++){var c=i[t[o]];"function"==typeof c&&"function"!=typeof c.prototype[e]&&r(c.prototype,e,{configurable:!0,writable:!0,value:function(){return a(n(this))}})}return e}));var l="function"==typeof Object.assign?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e};o("Object.assign",(function(e){return e||l}));var u,d="function"==typeof Object.create?Object.create:function(e){function t(){}return t.prototype=e,new t};if("function"==typeof Object.setPrototypeOf)u=Object.setPrototypeOf;else{var f;e:{var h={};try{h.__proto__={a:!0},f=h.a;break e}catch(e){}f=!1}u=f?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var p=u;function _(e,t){if(e.prototype=d(t.prototype),e.prototype.constructor=e,p)p(e,t);else for(var n in t)if("prototype"!=n)if(Object.defineProperties){var r=Object.getOwnPropertyDescriptor(t,n);r&&Object.defineProperty(e,n,r)}else e[n]=t[n];e.za=t.prototype}function g(){this.m=!1,this.j=null,this.i=void 0,this.h=1,this.v=this.s=0,this.l=null}function C(e){if(e.m)throw new TypeError("Generator is already running");e.m=!0}function v(e,t){e.l={ma:t,na:!0},e.h=e.s||e.v}function m(e,t,n){return e.h=n,{value:t}}function y(e){this.h=new g,this.i=e}function S(e,t,n,r){try{var i=t.call(e.h.j,n);if(!(i instanceof Object))throw new TypeError("Iterator result "+i+" is not an object");if(!i.done)return e.h.m=!1,i;var o=i.value}catch(t){return e.h.j=null,v(e.h,t),I(e)}return e.h.j=null,r.call(e.h,o),I(e)}function I(e){for(;e.h.h;)try{var t=e.i(e.h);if(t)return e.h.m=!1,{value:t.value,done:!1}}catch(t){e.h.i=void 0,v(e.h,t)}if(e.h.m=!1,e.h.l){if(t=e.h.l,e.h.l=null,t.na)throw t.ma;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function R(e){this.next=function(t){return C(e.h),e.h.j?t=S(e,e.h.j.next,t,e.h.u):(e.h.u(t),t=I(e)),t},this.throw=function(t){return C(e.h),e.h.j?t=S(e,e.h.j.throw,t,e.h.u):(v(e.h,t),t=I(e)),t},this.return=function(t){return function(e,t){C(e.h);var n=e.h.j;return n?S(e,"return"in n?n.return:function(e){return{value:e,done:!0}},t,e.h.return):(e.h.return(t),I(e))}(e,t)},this[Symbol.iterator]=function(){return this}}function w(e){return function(e){function t(t){return e.next(t)}function n(t){return e.throw(t)}return new Promise((function(r,i){!function e(o){o.done?r(o.value):Promise.resolve(o.value).then(t,n).then(e,i)}(e.next())}))}(new R(new y(e)))}function b(e){return e||Array.prototype.fill}g.prototype.u=function(e){this.i=e},g.prototype.return=function(e){this.l={return:e},this.h=this.v},o("Promise",(function(t){function n(e){this.i=0,this.j=void 0,this.h=[],this.u=!1;var t=this.l();try{e(t.resolve,t.reject)}catch(e){t.reject(e)}}function r(){this.h=null}function o(e){return e instanceof n?e:new n((function(t){t(e)}))}if(t)return t;r.prototype.i=function(e){if(null==this.h){this.h=[];var t=this;this.j((function(){t.m()}))}this.h.push(e)};var a=i.setTimeout;r.prototype.j=function(e){a(e,0)},r.prototype.m=function(){for(;this.h&&this.h.length;){var e=this.h;this.h=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(e){this.l(e)}}}this.h=null},r.prototype.l=function(e){this.j((function(){throw e}))},n.prototype.l=function(){function e(e){return function(r){n||(n=!0,e.call(t,r))}}var t=this,n=!1;return{resolve:e(this.I),reject:e(this.m)}},n.prototype.I=function(t){if(t===this)this.m(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof n)this.L(t);else{e:switch(e(t)){case"object":var r=null!=t;break e;case"function":r=!0;break e;default:r=!1}r?this.F(t):this.s(t)}},n.prototype.F=function(e){var t=void 0;try{t=e.then}catch(e){return void this.m(e)}"function"==typeof t?this.M(t,e):this.s(e)},n.prototype.m=function(e){this.v(2,e)},n.prototype.s=function(e){this.v(1,e)},n.prototype.v=function(e,t){if(0!=this.i)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.i);this.i=e,this.j=t,2===this.i&&this.K(),this.H()},n.prototype.K=function(){var e=this;a((function(){if(e.D()){var t=i.console;void 0!==t&&t.error(e.j)}}),1)},n.prototype.D=function(){if(this.u)return!1;var e=i.CustomEvent,t=i.Event,n=i.dispatchEvent;return void 0===n||("function"==typeof e?e=new e("unhandledrejection",{cancelable:!0}):"function"==typeof t?e=new t("unhandledrejection",{cancelable:!0}):(e=i.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,e),e.promise=this,e.reason=this.j,n(e))},n.prototype.H=function(){if(null!=this.h){for(var e=0;e<this.h.length;++e)s.i(this.h[e]);this.h=null}};var s=new r;return n.prototype.L=function(e){var t=this.l();e.T(t.resolve,t.reject)},n.prototype.M=function(e,t){var n=this.l();try{e.call(t,n.resolve,n.reject)}catch(e){n.reject(e)}},n.prototype.then=function(e,t){function r(e,t){return"function"==typeof e?function(t){try{i(e(t))}catch(e){o(e)}}:t}var i,o,a=new n((function(e,t){i=e,o=t}));return this.T(r(e,i),r(t,o)),a},n.prototype.catch=function(e){return this.then(void 0,e)},n.prototype.T=function(e,t){function n(){switch(r.i){case 1:e(r.j);break;case 2:t(r.j);break;default:throw Error("Unexpected state: "+r.i)}}var r=this;null==this.h?s.i(n):this.h.push(n),this.u=!0},n.resolve=o,n.reject=function(e){return new n((function(t,n){n(e)}))},n.race=function(e){return new n((function(t,n){for(var r=c(e),i=r.next();!i.done;i=r.next())o(i.value).T(t,n)}))},n.all=function(e){var t=c(e),r=t.next();return r.done?o([]):new n((function(e,n){function i(t){return function(n){a[t]=n,0==--c&&e(a)}}var a=[],c=0;do{a.push(void 0),c++,o(r.value).T(i(a.length-1),n),r=t.next()}while(!r.done)}))},n})),o("Array.prototype.keys",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,(function(e){return e}))}})),o("Array.prototype.fill",(function(e){return e||function(e,t,n){var r=this.length||0;for(0>t&&(t=Math.max(0,r+t)),(null==n||n>r)&&(n=r),0>(n=Number(n))&&(n=Math.max(0,r+n)),t=Number(t||0);t<n;t++)this[t]=e;return this}})),o("Int8Array.prototype.fill",b),o("Uint8Array.prototype.fill",b),o("Uint8ClampedArray.prototype.fill",b),o("Int16Array.prototype.fill",b),o("Uint16Array.prototype.fill",b),o("Int32Array.prototype.fill",b),o("Uint32Array.prototype.fill",b),o("Float32Array.prototype.fill",b),o("Float64Array.prototype.fill",b),o("Object.is",(function(e){return e||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}})),o("Array.prototype.includes",(function(e){return e||function(e,t){var n=this;n instanceof String&&(n=String(n));var r=n.length;for(0>(t=t||0)&&(t=Math.max(t+r,0));t<r;t++){var i=n[t];if(i===e||Object.is(i,e))return!0}return!1}})),o("String.prototype.includes",(function(e){return e||function(e,t){if(null==this)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(e instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return-1!==this.indexOf(e,t||0)}}));var E=this||self;function D(e,t){e=e.split(".");var n,r=E;e[0]in r||void 0===r.execScript||r.execScript("var "+e[0]);for(;e.length&&(n=e.shift());)e.length||void 0===t?r=r[n]&&r[n]!==Object.prototype[n]?r[n]:r[n]={}:r[n]=t}function P(e){var t;return(t=E.navigator)&&(t=t.userAgent)||(t=""),-1!=t.indexOf(e)}var T=Array.prototype.map?function(e,t){return Array.prototype.map.call(e,t,void 0)}:function(e,t){for(var n=e.length,r=Array(n),i="string"==typeof e?e.split(""):e,o=0;o<n;o++)o in i&&(r[o]=t.call(void 0,i[o],o,e));return r},x={},M=null;function A(e){var t=e.length,n=3*t/4;n%3?n=Math.floor(n):-1!="=.".indexOf(e[t-1])&&(n=-1!="=.".indexOf(e[t-2])?n-2:n-1);var r=new Uint8Array(n),i=0;return function(e,t){function n(t){for(;r<e.length;){var n=e.charAt(r++),i=M[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return t}O();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),c=n(64);if(64===c&&-1===i)break;t(i<<2|o>>4),64!=a&&(t(o<<4&240|a>>2),64!=c&&t(a<<6&192|c))}}(e,(function(e){r[i++]=e})),i!==n?r.subarray(0,i):r}function O(){if(!M){M={};for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),t=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++){var r=e.concat(t[n].split(""));x[n]=r;for(var i=0;i<r.length;i++){var o=r[i];void 0===M[o]&&(M[o]=i)}}}}var k="undefined"!=typeof Uint8Array,V=!(P("Trident")||P("MSIE"))&&"function"==typeof E.btoa;function N(e){if(!V){var t;void 0===t&&(t=0),O(),t=x[t];for(var n=Array(Math.floor(e.length/3)),r=t[64]||"",i=0,o=0;i<e.length-2;i+=3){var a=e[i],c=e[i+1],s=e[i+2],l=t[a>>2];a=t[(3&a)<<4|c>>4],c=t[(15&c)<<2|s>>6],s=t[63&s],n[o++]=l+a+c+s}switch(l=0,s=r,e.length-i){case 2:s=t[(15&(l=e[i+1]))<<2]||r;case 1:e=e[i],n[o]=t[e>>2]+t[(3&e)<<4|l>>4]+s+r}return n.join("")}for(t="";10240<e.length;)t+=String.fromCharCode.apply(null,e.subarray(0,10240)),e=e.subarray(10240);return t+=String.fromCharCode.apply(null,e),btoa(t)}var L,U=RegExp("[-_.]","g");function j(e){switch(e){case"-":return"+";case"_":return"/";case".":return"=";default:return""}}function B(e){if(!V)return A(e);U.test(e)&&(e=e.replace(U,j)),e=atob(e);for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}function F(){return L||(L=new Uint8Array(0))}var H={},q="function"==typeof Uint8Array.prototype.slice,K=0,W=0;function G(e){var t=0>e,n=(e=Math.abs(e))>>>0;e=Math.floor((e-n)/4294967296),t&&(t=(n=c(Z(n,e))).next().value,e=n.next().value,n=t),K=n>>>0,W=e>>>0}var z,J="function"==typeof BigInt;function Z(e,t){return t=~t,e?e=1+~e:t+=1,[e,t]}function Q(e,t){this.i=e>>>0,this.h=t>>>0}function Y(e){if(!e)return z||(z=new Q(0,0));if(!/^-?\d+$/.test(e))return null;if(16>e.length)G(Number(e));else if(J)e=BigInt(e),K=Number(e&BigInt(4294967295))>>>0,W=Number(e>>BigInt(32)&BigInt(4294967295));else{var t=+("-"===e[0]);W=K=0;for(var n=e.length,r=t,i=(n-t)%6+t;i<=n;r=i,i+=6)r=Number(e.slice(r,i)),W*=1e6,4294967296<=(K=1e6*K+r)&&(W+=K/4294967296|0,K%=4294967296);t&&(e=(t=c(Z(K,W))).next().value,t=t.next().value,K=e,W=t)}return new Q(K,W)}function X(e,t){return Error("Invalid wire type: "+e+" (at position "+t+")")}function $(){return Error("Failed to read varint, encoding is invalid.")}function ee(e,t){return Error("Tried to read past the end of the data "+t+" > "+e)}function te(){throw Error("Invalid UTF8")}function ne(e,t){return t=String.fromCharCode.apply(null,t),null==e?t:e+t}var re,ie,oe,ae=void 0,ce="undefined"!=typeof TextDecoder,se="undefined"!=typeof TextEncoder;function le(e){if(e!==H)throw Error("illegal external caller")}function ue(e,t){if(le(t),this.V=e,null!=e&&0===e.length)throw Error("ByteString should be constructed with non-empty values")}function de(){return oe||(oe=new ue(null,H))}function fe(e){le(H);var t=e.V;return null==(t=null==t||k&&null!=t&&t instanceof Uint8Array?t:"string"==typeof t?B(t):null)?t:e.V=t}function he(e,t){this.i=null,this.m=!1,this.h=this.j=this.l=0,pe(this,e,t)}function pe(e,t,n){n=void 0===n?{}:n,e.S=void 0!==n.S&&n.S,t&&(t=function(e){if("string"==typeof e)return{buffer:B(e),C:!1};if(Array.isArray(e))return{buffer:new Uint8Array(e),C:!1};if(e.constructor===Uint8Array)return{buffer:e,C:!1};if(e.constructor===ArrayBuffer)return{buffer:new Uint8Array(e),C:!1};if(e.constructor===ue)return{buffer:fe(e)||F(),C:!0};if(e instanceof Uint8Array)return{buffer:new Uint8Array(e.buffer,e.byteOffset,e.byteLength),C:!1};throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, a ByteString or an Array of numbers")}(t),e.i=t.buffer,e.m=t.C,e.l=0,e.j=e.i.length,e.h=e.l)}function _e(e,t){if(e.h=t,t>e.j)throw ee(e.j,t)}function ge(e){var t=e.i,n=e.h,r=t[n++],i=127&r;if(128&r&&(i|=(127&(r=t[n++]))<<7,128&r&&(i|=(127&(r=t[n++]))<<14,128&r&&(i|=(127&(r=t[n++]))<<21,128&r&&(i|=(r=t[n++])<<28,128&r&&128&t[n++]&&128&t[n++]&&128&t[n++]&&128&t[n++]&&128&t[n++])))))throw $();return _e(e,n),i}function Ce(e,t){if(0>t)throw Error("Tried to read a negative byte length: "+t);var n=e.h,r=n+t;if(r>e.j)throw ee(t,e.j-n);return e.h=r,n}he.prototype.reset=function(){this.h=this.l};var ve=[];function me(){this.h=[]}function ye(e,t,n){for(;0<n||127<t;)e.h.push(127&t|128),t=(t>>>7|n<<25)>>>0,n>>>=7;e.h.push(t)}function Se(e,t){for(;127<t;)e.h.push(127&t|128),t>>>=7;e.h.push(t)}function Ie(e,t){if(ve.length){var n=ve.pop();pe(n,e,t),e=n}else e=new he(e,t);this.h=e,this.j=this.h.h,this.i=this.l=-1,this.setOptions(t)}function Re(e){var t=e.h;if(t.h==t.j)return!1;e.j=e.h.h;var n=ge(e.h)>>>0;if(t=n>>>3,!(0<=(n&=7)&&5>=n))throw X(n,e.j);if(1>t)throw Error("Invalid field number: "+t+" (at position "+e.j+")");return e.l=t,e.i=n,!0}function we(e){switch(e.i){case 0:if(0!=e.i)we(e);else e:{for(var t=(e=e.h).h,n=t+10,r=e.i;t<n;)if(0==(128&r[t++])){_e(e,t);break e}throw $()}break;case 1:_e(e=e.h,e.h+8);break;case 2:2!=e.i?we(e):(t=ge(e.h)>>>0,_e(e=e.h,e.h+t));break;case 5:_e(e=e.h,e.h+4);break;case 3:for(t=e.l;;){if(!Re(e))throw Error("Unmatched start-group tag: stream EOF");if(4==e.i){if(e.l!=t)throw Error("Unmatched end-group tag");break}we(e)}break;default:throw X(e.i,e.j)}}me.prototype.length=function(){return this.h.length},me.prototype.end=function(){var e=this.h;return this.h=[],e},Ie.prototype.setOptions=function(e){e=void 0===e?{}:e,this.ca=void 0!==e.ca&&e.ca},Ie.prototype.reset=function(){this.h.reset(),this.j=this.h.h,this.i=this.l=-1};var be=[];function Ee(){this.j=[],this.i=0,this.h=new me}function De(e,t){0!==t.length&&(e.j.push(t),e.i+=t.length)}var Pe="function"==typeof Symbol&&"symbol"===e(Symbol())?Symbol():void 0;function Te(e,t){return Pe?e[Pe]|=t:void 0!==e.A?e.A|=t:(Object.defineProperties(e,{A:{value:t,configurable:!0,writable:!0,enumerable:!1}}),t)}function xe(e,t){Pe?e[Pe]&&(e[Pe]&=~t):void 0!==e.A&&(e.A&=~t)}function Me(e){var t;return null==(t=Pe?e[Pe]:e.A)?0:t}function Ae(e,t){Pe?e[Pe]=t:void 0!==e.A?e.A=t:Object.defineProperties(e,{A:{value:t,configurable:!0,writable:!0,enumerable:!1}})}function Oe(e){return Te(e,1),e}function ke(e,t){Ae(t,-51&(0|e))}function Ve(e,t){Ae(t,-41&(18|e))}var Ne={};function Le(t){return null!==t&&"object"===e(t)&&!Array.isArray(t)&&t.constructor===Object}var Ue,je,Be=[];function Fe(e){if(2&Me(e.o))throw Error("Cannot mutate an immutable Message")}function He(e){var t=e.length;(t=t?e[t-1]:void 0)&&Le(t)?t.g=1:(t={},e.push((t.g=1,t)))}function qe(e){var t=e.i+e.G;return e.B||(e.B=e.o[t]={})}function Ke(e,t){return-1===t?null:t>=e.i?e.B?e.B[t]:void 0:e.o[t+e.G]}function We(e,t,n,r){Fe(e),Ge(e,t,n,r)}function Ge(e,t,n,r){e.j&&(e.j=void 0),t>=e.i||r?qe(e)[t]=n:(e.o[t+e.G]=n,(e=e.B)&&t in e&&delete e[t])}function ze(e,t,n,r){var i=Ke(e,t);Array.isArray(i)||(i=Ue);var o=Me(i);if(1&o||Oe(i),r)2&o||Te(i,2),1&n||Object.freeze(i);else{r=!(2&n);var a=2&o;1&n||!a?r&&16&o&&!a&&xe(i,16):Ge(e,t,i=Oe(Array.prototype.slice.call(i)))}return i}function Je(e,t){var n=Ke(e,t),r=null==n?n:"number"==typeof n||"NaN"===n||"Infinity"===n||"-Infinity"===n?Number(n):void 0;return null!=r&&r!==n&&Ge(e,t,r),r}function Ze(e,t,n,r,i){e.h||(e.h={});var o=e.h[n],a=ze(e,n,3,i);if(!o){var c=a;o=[];var s=!!(16&Me(e.o));a=!!(2&Me(c));var l=c;!i&&a&&(c=Array.prototype.slice.call(c));for(var u=a,d=0;d<c.length;d++){var f=c[d],h=t,p=!1;if(p=void 0!==p&&p,void 0!==(f=Array.isArray(f)?new h(f):p?new h:void 0)){var _=p=Me(h=f.o);a&&(_|=2),s&&(_|=16),_!=p&&Ae(h,_),h=_,u=u||!!(2&h),o.push(f)}}return e.h[n]=o,t=33|(s=Me(c)),s!=(t=u?-9&t:8|t)&&(u=c,Object.isFrozen(u)&&(u=Array.prototype.slice.call(u)),Ae(u,t),c=u),l!==c&&Ge(e,n,c),(i||r&&a)&&Te(o,2),r&&Object.freeze(o),o}return i||(i=Object.isFrozen(o),r&&!i?Object.freeze(o):!r&&i&&(o=Array.prototype.slice.call(o),e.h[n]=o)),o}function Qe(e,t,n){var r=!!(2&Me(e.o));if(t=Ze(e,t,n,r,r),e=ze(e,n,3,r),!(r||8&Me(e))){for(r=0;r<t.length;r++){if(2&Me((n=t[r]).o)){var i=st(n,!1);i.j=n}else i=n;n!==i&&(t[r]=i,e[r]=i.o)}Te(e,8)}return t}function Ye(t,n,r){if(null!=r&&"number"!=typeof r)throw Error("Value of float/double field must be a number|null|undefined, found "+e(r)+": "+r);We(t,n,r)}function Xe(e,t,n,r,i){Fe(e);var o=Ze(e,n,t,!1,!1);return n=null!=r?r:new n,e=ze(e,t,2,!1),null!=i?(o.splice(i,0,n),e.splice(i,0,n.o)):(o.push(n),e.push(n.o)),n.C()&&xe(e,8),n}function $e(e,t){return null==e?t:e}function et(e,t,n){return n=void 0===n?0:n,$e(Je(e,t),n)}function tt(e,t,n,r){if(null!=e){if(Array.isArray(e))e=nt(e,t,n,void 0!==r);else if(Le(e)){var i,o={};for(i in e)o[i]=tt(e[i],t,n,r);e=o}else e=t(e,r);return e}}function nt(e,t,n,r){var i=Me(e);r=r?!!(16&i):void 0,e=Array.prototype.slice.call(e);for(var o=0;o<e.length;o++)e[o]=tt(e[o],t,n,r);return n(i,e),e}function rt(t){return t.ja===Ne?t.toJSON():function(t){switch(e(t)){case"number":return isFinite(t)?t:String(t);case"object":if(t)if(Array.isArray(t)){if(0!=(128&Me(t)))return He(t=Array.prototype.slice.call(t)),t}else{if(k&&null!=t&&t instanceof Uint8Array)return N(t);if(t instanceof ue){var n=t.V;return null==n?"":"string"==typeof n?n:t.V=N(n)}}}return t}(t)}function it(e,t){128&e&&He(t)}function ot(e,t,n){if(n=void 0===n?Ve:n,null!=e){if(k&&e instanceof Uint8Array)return e.length?new ue(new Uint8Array(e),H):de();if(Array.isArray(e)){var r=Me(e);return 2&r?e:!t||32&r||!(16&r||0===r)?(4&(t=Me(e=nt(e,ot,4&r?Ve:n,!0)))&&2&t&&Object.freeze(e),e):(Ae(e,2|r),e)}return e.ja===Ne?ct(e):e}}function at(e,t,n,r,i,o,a){if(e=e.h&&e.h[n]){if(2&(r=Me(e))?r=e:(Ve(r,o=T(e,ct)),Object.freeze(o),r=o),Fe(t),a=null==r?Ue:Oe([]),null!=r){for(o=!!r.length,e=0;e<r.length;e++){var c=r[e];o=o&&!(2&Me(c.o)),a[e]=c.o}o=1|(o?8:0),((e=Me(a))&o)!==o&&(Object.isFrozen(a)&&(a=Array.prototype.slice.call(a)),Ae(a,e|o)),t.h||(t.h={}),t.h[n]=r}else t.h&&(t.h[n]=void 0);Ge(t,n,a,i)}else We(t,n,ot(r,o,a),i)}function ct(e){return 2&Me(e.o)||Te((e=st(e,!0)).o,2),e}function st(e,t){var n=e.o,r=[];Te(r,16);var i=e.constructor.h;if(i&&r.push(i),i=e.B){r.length=n.length,r.fill(void 0,r.length,n.length);var o={};r[r.length-1]=o}0!=(128&Me(n))&&He(r),t=t||e.C()?Ve:ke,o=e.constructor,je=r,r=new o(r),je=void 0,e.R&&(r.R=e.R.slice()),o=!!(16&Me(n));for(var a=i?n.length-1:n.length,c=0;c<a;c++)at(e,r,c-e.G,n[c],!1,o,t);if(i)for(var s in i)at(e,r,+s,i[s],!0,o,t);return r}function lt(e,t,n){null==e&&(e=je),je=void 0;var r,i=this.constructor.i||0,o=0<i,a=this.constructor.h,c=!1;if(null==e){var s=48,l=!0;o&&(i=0,s|=128),Ae(e=a?[a]:[],s)}else{if(!Array.isArray(e))throw Error();if(a&&a!==e[0])throw Error();var u=s=Te(e,0);if((l=0!=(16&u))&&((c=0!=(32&u))||(u|=32)),o){if(128&u)i=0;else if(0<e.length){var d=e[e.length-1];if(Le(d)&&"g"in d){i=0,u|=128,delete d.g;var f,h=!0;for(f in d){h=!1;break}h&&e.pop()}}}else if(128&u)throw Error();s!==u&&Ae(e,u)}if(this.G=(a?0:-1)-i,this.h=void 0,this.o=e,i=(a=this.o.length)-1,a&&Le(a=this.o[i])?(this.B=a,this.i=i-this.G):void 0!==t&&-1<t?(this.i=Math.max(t,i+1-this.G),this.B=void 0):this.i=Number.MAX_VALUE,!o&&this.B&&"g"in this.B)throw Error('Unexpected "g" flag in sparse object of message that is not a group type.');if(n)for(t=l&&!c&&!0,o=this.i,l=0;l<n.length;l++)(c=n[l])<o?(i=e[c+=this.G])?ut(i,t):e[c]=Ue:(r||(r=qe(this)),(i=r[c])?ut(i,t):r[c]=Ue)}function ut(e,t){if(Array.isArray(e)){var n=Me(e),r=1;!t||2&n||(r|=16),(n&r)!==r&&Ae(e,n|r)}}function dt(e,t,n){if(n){var r,i={};for(r in n){var o=n[r],a=o.ra;a||(i.J=o.xa||o.oa.W,o.ia?(i.aa=mt(o.ia),a=function(e){return function(t,n,r){return e.J(t,n,r,e.aa)}}(i)):o.ka?(i.Z=yt(o.da.P,o.ka),a=function(e){return function(t,n,r){return e.J(t,n,r,e.Z)}}(i)):a=i.J,o.ra=a),a(t,e,o.da),i={J:i.J,aa:i.aa,Z:i.Z}}}!function(e,t){if(t=t.R){De(e,e.h.end());for(var n=0;n<t.length;n++)De(e,fe(t[n])||F())}}(t,e)}Ae(Be,23),Ue=Object.freeze(Be),lt.prototype.toJSON=function(){return nt(this.o,rt,it)},lt.prototype.C=function(){return!!(2&Me(this.o))},lt.prototype.ja=Ne,lt.prototype.toString=function(){return this.o.toString()};var ft=Symbol();function ht(e,t,n){return e[ft]||(e[ft]=function(e,r){return t(e,r,n)})}function pt(e){var t=e[ft];if(!t){var n=At(e);t=function(e,t){return Ot(e,t,n)},e[ft]=t}return t}function _t(e){var t=function(e){var t=e.ia;return t?pt(t):(t=e.wa)?ht(e.da.P,t,e.ka):void 0}(e),n=e.da,r=e.oa.U;return t?function(e,i){return r(e,i,n,t)}:function(e,t){return r(e,t,n)}}function gt(e,t){var n=e[t];return"function"==typeof n&&0===n.length&&(n=n(),e[t]=n),Array.isArray(n)&&(Dt in n||St in n||0<n.length&&"function"==typeof n[0])?n:void 0}function Ct(e,t,n,r,i,o){t.P=e[0];var a=1;if(e.length>a&&"number"!=typeof e[a]){var c=e[a++];n(t,c)}for(;a<e.length;){n=e[a++];for(var s=a+1;s<e.length&&"number"!=typeof e[s];)s++;switch(c=e[a++],s-=a){case 0:r(t,n,c);break;case 1:(s=gt(e,a))?(a++,i(t,n,c,s)):r(t,n,c,e[a++]);break;case 2:i(t,n,c,s=gt(e,s=a++),e[a++]);break;case 3:o(t,n,c,e[a++],e[a++],e[a++]);break;case 4:o(t,n,c,e[a++],e[a++],e[a++],e[a++]);break;default:throw Error("unexpected number of binary field arguments: "+s)}}return t}var vt=Symbol();function mt(e){var t=e[vt];if(!t){var n=Et(e);t=function(e,t){return kt(e,t,n)},e[vt]=t}return t}function yt(e,t){var n=e[vt];return n||(n=function(e,n){return dt(e,n,t)},e[vt]=n),n}var St=Symbol();function It(e,t){e.push(t)}function Rt(e,t,n){e.push(t,n.W)}function wt(e,t,n,r){var i=mt(r),o=Et(r).P,a=n.W;e.push(t,(function(e,t,n){return a(e,t,n,o,i)}))}function bt(e,t,n,r,i,o){var a=yt(r,o),c=n.W;e.push(t,(function(e,t,n){return c(e,t,n,r,a)}))}function Et(e){var t=e[St];return t||(t=Ct(e,e[St]=[],It,Rt,wt,bt),Dt in e&&St in e&&(e.length=0),t)}var Dt=Symbol();function Pt(e,t){e[0]=t}function Tt(e,t,n,r){var i=n.U;e[t]=r?function(e,t,n){return i(e,t,n,r)}:i}function xt(e,t,n,r,i){var o=n.U,a=pt(r),c=At(r).P;e[t]=function(e,t,n){return o(e,t,n,c,a,i)}}function Mt(e,t,n,r,i,o,a){var c=n.U,s=ht(r,i,o);e[t]=function(e,t,n){return c(e,t,n,r,s,a)}}function At(e){var t=e[Dt];return t||(t=Ct(e,e[Dt]={},Pt,Tt,xt,Mt),Dt in e&&St in e&&(e.length=0),t)}function Ot(e,t,n){for(;Re(t)&&4!=t.i;){var r=t.l,i=n[r];if(!i){var o=n[0];o&&(o=o[r])&&(i=n[r]=_t(o))}if(!i||!i(t,e,r)){r=e,o=(i=t).j,we(i);var a=i;if(!a.ca){if(i=a.h.h-o,a.h.h=o,a=a.h,0==i)i=de();else{if(o=Ce(a,i),a.S&&a.m)i=a.i.subarray(o,o+i);else{a=a.i;var c=o;i=c===(i=o+i)?F():q?a.slice(c,i):new Uint8Array(a.subarray(c,i))}i=0==i.length?de():new ue(i,H)}(o=r.R)?o.push(i):r.R=[i]}}}return e}function kt(e,t,n){for(var r=n.length,i=1==r%2,o=i?1:0;o<r;o+=2)(0,n[o+1])(t,e,n[o]);dt(e,t,i?n[0]:void 0)}function Vt(e,t){return{U:e,W:t}}var Nt=Vt((function(e,t,n){if(5!==e.i)return!1;var r=(e=e.h).i,i=e.h,o=r[i],a=r[i+1],c=r[i+2];return r=r[i+3],_e(e,e.h+4),e=2*((a=(o<<0|a<<8|c<<16|r<<24)>>>0)>>31)+1,o=a>>>23&255,a&=8388607,We(t,n,255==o?a?NaN:1/0*e:0==o?e*Math.pow(2,-149)*a:e*Math.pow(2,o-150)*(a+Math.pow(2,23))),!0}),(function(e,t,n){if(null!=(t=Je(t,n))){Se(e.h,8*n+5),e=e.h;var r=+t;0===r?0<1/r?K=W=0:(W=0,K=2147483648):isNaN(r)?(W=0,K=2147483647):34028234663852886e22<(r=(n=0>r?-2147483648:0)?-r:r)?(W=0,K=(2139095040|n)>>>0):11754943508222875e-54>r?(r=Math.round(r/Math.pow(2,-149)),W=0,K=(n|r)>>>0):(t=Math.floor(Math.log(r)/Math.LN2),r*=Math.pow(2,-t),16777216<=(r=Math.round(8388608*r))&&++t,W=0,K=(n|t+127<<23|8388607&r)>>>0),n=K,e.h.push(n>>>0&255),e.h.push(n>>>8&255),e.h.push(n>>>16&255),e.h.push(n>>>24&255)}})),Lt=Vt((function(e,t,n){if(0!==e.i)return!1;var r=e.h,i=0,o=e=0,a=r.i,c=r.h;do{var s=a[c++];i|=(127&s)<<o,o+=7}while(32>o&&128&s);for(32<o&&(e|=(127&s)>>4),o=3;32>o&&128&s;o+=7)e|=(127&(s=a[c++]))<<o;if(_e(r,c),!(128>s))throw $();return r=i>>>0,(e=2147483648&(s=e>>>0))&&(s=~s>>>0,0==(r=1+~r>>>0)&&(s=s+1>>>0)),r=4294967296*s+(r>>>0),We(t,n,e?-r:r),!0}),(function(e,t,n){null!=(t=Ke(t,n))&&("string"==typeof t&&Y(t),null!=t&&(Se(e.h,8*n),"number"==typeof t?(e=e.h,G(t),ye(e,K,W)):(n=Y(t),ye(e.h,n.i,n.h))))})),Ut=Vt((function(e,t,n){return 0===e.i&&(We(t,n,ge(e.h)),!0)}),(function(e,t,n){if(null!=(t=Ke(t,n))&&null!=t)if(Se(e.h,8*n),e=e.h,0<=(n=t))Se(e,n);else{for(t=0;9>t;t++)e.h.push(127&n|128),n>>=7;e.h.push(1)}})),jt=Vt((function(e,t,n){if(2!==e.i)return!1;var r=ge(e.h)>>>0,i=Ce(e=e.h,r);if(e=e.i,ce){var o,a=e;(o=re)||(o=re=new TextDecoder("utf-8",{fatal:!0})),e=i+r,a=0===i&&e===a.length?a:a.subarray(i,e);try{var c=o.decode(a)}catch(e){if(void 0===ae){try{o.decode(new Uint8Array([128]))}catch(e){}try{o.decode(new Uint8Array([97])),ae=!0}catch(e){ae=!1}}throw!ae&&(re=void 0),e}}else{r=(c=i)+r,i=[];for(var s,l,u=null;c<r;)128>(s=e[c++])?i.push(s):224>s?c>=r?te():(l=e[c++],194>s||128!=(192&l)?(c--,te()):i.push((31&s)<<6|63&l)):240>s?c>=r-1?te():128!=(192&(l=e[c++]))||224===s&&160>l||237===s&&160<=l||128!=(192&(a=e[c++]))?(c--,te()):i.push((15&s)<<12|(63&l)<<6|63&a):244>=s?c>=r-2?te():128!=(192&(l=e[c++]))||0!=l-144+(s<<28)>>30||128!=(192&(a=e[c++]))||128!=(192&(o=e[c++]))?(c--,te()):(s=(7&s)<<18|(63&l)<<12|(63&a)<<6|63&o,s-=65536,i.push(55296+(s>>10&1023),56320+(1023&s))):te(),8192<=i.length&&(u=ne(u,i),i.length=0);c=ne(u,i)}return We(t,n,c),!0}),(function(e,t,n){if(null!=(t=Ke(t,n))){var r=!1;if(r=void 0!==r&&r,se){if(r&&/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/.test(t))throw Error("Found an unpaired surrogate");t=(ie||(ie=new TextEncoder)).encode(t)}else{for(var i=0,o=new Uint8Array(3*t.length),a=0;a<t.length;a++){var c=t.charCodeAt(a);if(128>c)o[i++]=c;else{if(2048>c)o[i++]=c>>6|192;else{if(55296<=c&&57343>=c){if(56319>=c&&a<t.length){var s=t.charCodeAt(++a);if(56320<=s&&57343>=s){c=1024*(c-55296)+s-56320+65536,o[i++]=c>>18|240,o[i++]=c>>12&63|128,o[i++]=c>>6&63|128,o[i++]=63&c|128;continue}a--}if(r)throw Error("Found an unpaired surrogate");c=65533}o[i++]=c>>12|224,o[i++]=c>>6&63|128}o[i++]=63&c|128}}t=i===o.length?o:o.subarray(0,i)}Se(e.h,8*n+2),Se(e.h,t.length),De(e,e.h.end()),De(e,t)}})),Bt=Vt((function(e,t,n,r,i){if(2!==e.i)return!1;t=Xe(t,n,r),n=e.h.j,r=ge(e.h)>>>0;var o=e.h.h+r,a=o-n;if(0>=a&&(e.h.j=o,i(t,e,void 0,void 0,void 0),a=o-e.h.h),a)throw Error("Message parsing ended unexpectedly. Expected to read "+r+" bytes, instead read "+(r-a)+" bytes, either the data ended unexpectedly or the message misreported its own length");return e.h.h=o,e.h.j=n,!0}),(function(e,t,n,r,i){if(null!=(t=Qe(t,r,n)))for(r=0;r<t.length;r++){var o=e;Se(o.h,8*n+2);var a=o.h.end();De(o,a),a.push(o.i),o=a,i(t[r],e),a=e;var c=o.pop();for(c=a.i+a.h.length()-c;127<c;)o.push(127&c|128),c>>>=7,a.i++;o.push(c),a.i++}}));function Ft(e){return function(t,n){e:{if(be.length){var r=be.pop();r.setOptions(n),pe(r.h,t,n),t=r}else t=new Ie(t,n);try{var i=At(e),o=Ot(new i.P,t,i);break e}finally{(i=t.h).i=null,i.m=!1,i.l=0,i.j=0,i.h=0,i.S=!1,t.l=-1,t.i=-1,100>be.length&&be.push(t)}o=void 0}return o}}function Ht(e){return function(){var t=new Ee;kt(this,t,Et(e)),De(t,t.h.end());for(var n=new Uint8Array(t.i),r=t.j,i=r.length,o=0,a=0;a<i;a++){var c=r[a];n.set(c,o),o+=c.length}return t.j=[n],n}}function qt(e){lt.call(this,e)}_(qt,lt);var Kt=[qt,1,Ut,2,Nt,3,jt,4,jt];function Wt(e){lt.call(this,e,-1,Gt)}qt.prototype.l=Ht(Kt),_(Wt,lt),Wt.prototype.addClassification=function(e,t){return Xe(this,1,qt,e,t),this};var Gt=[1],zt=Ft([Wt,1,Bt,Kt]);function Jt(e){lt.call(this,e)}_(Jt,lt);var Zt=[Jt,1,Nt,2,Nt,3,Nt,4,Nt,5,Nt];function Qt(e){lt.call(this,e,-1,Yt)}Jt.prototype.l=Ht(Zt),_(Qt,lt);var Yt=[1],Xt=Ft([Qt,1,Bt,Zt]);function $t(e){lt.call(this,e)}_($t,lt);var en=[$t,1,Nt,2,Nt,3,Nt,4,Nt,5,Nt,6,Lt],tn=Ft(en);function nn(e,t,n){if(n=e.createShader(0===n?e.VERTEX_SHADER:e.FRAGMENT_SHADER),e.shaderSource(n,t),e.compileShader(n),!e.getShaderParameter(n,e.COMPILE_STATUS))throw Error("Could not compile WebGL shader.\n\n"+e.getShaderInfoLog(n));return n}function rn(e){return Qe(e,qt,1).map((function(e){var t=Ke(e,1);return{index:null==t?0:t,qa:et(e,2),label:null!=Ke(e,3)?$e(Ke(e,3),""):void 0,displayName:null!=Ke(e,4)?$e(Ke(e,4),""):void 0}}))}function on(e){return{x:et(e,1),y:et(e,2),z:et(e,3),visibility:null!=Je(e,4)?et(e,4):void 0}}function an(e,t){this.i=e,this.h=t,this.m=0}function cn(e,t,n){return function(e,t){var n=e.h;if(void 0===e.s){var r=nn(n,"\n  attribute vec2 aVertex;\n  attribute vec2 aTex;\n  varying vec2 vTex;\n  void main(void) {\n    gl_Position = vec4(aVertex, 0.0, 1.0);\n    vTex = aTex;\n  }",0),i=nn(n,"\n  precision mediump float;\n  varying vec2 vTex;\n  uniform sampler2D sampler0;\n  void main(){\n    gl_FragColor = texture2D(sampler0, vTex);\n  }",1),o=n.createProgram();if(n.attachShader(o,r),n.attachShader(o,i),n.linkProgram(o),!n.getProgramParameter(o,n.LINK_STATUS))throw Error("Could not compile WebGL program.\n\n"+n.getProgramInfoLog(o));r=e.s=o,n.useProgram(r),i=n.getUniformLocation(r,"sampler0"),e.l={O:n.getAttribLocation(r,"aVertex"),N:n.getAttribLocation(r,"aTex"),ya:i},e.v=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,e.v),n.enableVertexAttribArray(e.l.O),n.vertexAttribPointer(e.l.O,2,n.FLOAT,!1,0,0),n.bufferData(n.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),e.u=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,e.u),n.enableVertexAttribArray(e.l.N),n.vertexAttribPointer(e.l.N,2,n.FLOAT,!1,0,0),n.bufferData(n.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),n.uniform1i(i,0)}r=e.l,n.useProgram(e.s),n.canvas.width=t.width,n.canvas.height=t.height,n.viewport(0,0,t.width,t.height),n.activeTexture(n.TEXTURE0),e.i.bindTexture2d(t.glName),n.enableVertexAttribArray(r.O),n.bindBuffer(n.ARRAY_BUFFER,e.v),n.vertexAttribPointer(r.O,2,n.FLOAT,!1,0,0),n.enableVertexAttribArray(r.N),n.bindBuffer(n.ARRAY_BUFFER,e.u),n.vertexAttribPointer(r.N,2,n.FLOAT,!1,0,0),n.bindFramebuffer(n.DRAW_FRAMEBUFFER?n.DRAW_FRAMEBUFFER:n.FRAMEBUFFER,null),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),n.colorMask(!0,!0,!0,!0),n.drawArrays(n.TRIANGLE_FAN,0,4),n.disableVertexAttribArray(r.O),n.disableVertexAttribArray(r.N),n.bindBuffer(n.ARRAY_BUFFER,null),e.i.bindTexture2d(0)}(e,t),"function"==typeof e.h.canvas.transferToImageBitmap?Promise.resolve(e.h.canvas.transferToImageBitmap()):n?Promise.resolve(e.h.canvas):"function"==typeof createImageBitmap?createImageBitmap(e.h.canvas):(void 0===e.j&&(e.j=document.createElement("canvas")),new Promise((function(t){e.j.height=e.h.canvas.height,e.j.width=e.h.canvas.width,e.j.getContext("2d",{}).drawImage(e.h.canvas,0,0,e.h.canvas.width,e.h.canvas.height),t(e.j)})))}function sn(e){this.h=e}$t.prototype.l=Ht(en);var ln=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function un(e,t){return t+e}function dn(e,t){window[e]=t}function fn(t){if(this.h=t,this.listeners={},this.l={},this.L={},this.s={},this.v={},this.M=this.u=this.ga=!0,this.I=Promise.resolve(),this.fa="",this.D={},this.locateFile=t&&t.locateFile||un,"object"===("undefined"==typeof window?"undefined":e(window)))var n=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else{if("undefined"==typeof location)throw Error("solutions can only be loaded on a web page or in a web worker");n=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/"}if(this.ha=n,t.options)for(var r=(n=c(Object.keys(t.options))).next();!r.done;r=n.next()){r=r.value;var i=t.options[r].default;void 0!==i&&(this.l[r]="function"==typeof i?i():i)}}function hn(t){var n,r,i,o,a,c,l,u,d,f,h;return w((function(p){switch(p.h){case 1:return t.ga?(n=void 0===t.h.files?[]:"function"==typeof t.h.files?t.h.files(t.l):t.h.files,m(p,w((function(e){switch(e.h){case 1:return e.s=2,m(e,WebAssembly.instantiate(ln),4);case 4:e.h=3,e.s=0;break;case 2:return e.s=0,e.l=null,e.return(!1);case 3:return e.return(!0)}})),2)):p.return();case 2:if(r=p.i,"object"===("undefined"==typeof window?"undefined":e(window)))return dn("createMediapipeSolutionsWasm",{locateFile:t.locateFile}),dn("createMediapipeSolutionsPackedAssets",{locateFile:t.locateFile}),c=n.filter((function(e){return void 0!==e.data})),l=n.filter((function(e){return void 0===e.data})),u=Promise.all(c.map((function(e){var n=pn(t,e.url);if(void 0!==e.path){var r=e.path;n=n.then((function(e){return t.overrideFile(r,e),Promise.resolve(e)}))}return n}))),d=Promise.all(l.map((function(e){return void 0===e.simd||e.simd&&r||!e.simd&&!r?function(e){var t=document.createElement("script");return t.setAttribute("src",e),t.setAttribute("crossorigin","anonymous"),new Promise((function(e){t.addEventListener("load",(function(){e()}),!1),t.addEventListener("error",(function(){e()}),!1),document.body.appendChild(t)}))}(t.locateFile(e.url,t.ha)):Promise.resolve()}))).then((function(){var e,n,r;return w((function(i){if(1==i.h)return e=window.createMediapipeSolutionsWasm,n=window.createMediapipeSolutionsPackedAssets,r=t,m(i,e(n),2);r.i=i.i,i.h=0}))})),f=w((function(e){return t.h.graph&&t.h.graph.url?e=m(e,pn(t,t.h.graph.url),0):(e.h=0,e=void 0),e})),m(p,Promise.all([d,u,f]),7);if("function"!=typeof importScripts)throw Error("solutions can only be loaded on a web page or in a web worker");return i=n.filter((function(e){return void 0===e.simd||e.simd&&r||!e.simd&&!r})).map((function(e){return t.locateFile(e.url,t.ha)})),importScripts.apply(null,s(i)),o=t,m(p,createMediapipeSolutionsWasm(Module),6);case 6:o.i=p.i,t.m=new OffscreenCanvas(1,1),t.i.canvas=t.m,a=t.i.GL.createContext(t.m,{antialias:!1,alpha:!1,va:"undefined"!=typeof WebGL2RenderingContext?2:1}),t.i.GL.makeContextCurrent(a),p.h=4;break;case 7:if(t.m=document.createElement("canvas"),!(h=t.m.getContext("webgl2",{}))&&!(h=t.m.getContext("webgl",{})))return alert("Failed to create WebGL canvas context when passing video frame."),p.return();t.K=h,t.i.canvas=t.m,t.i.createContext(t.m,!0,!0,{});case 4:t.j=new t.i.SolutionWasm,t.ga=!1,p.h=0}}))}function pn(e,t){var n,r;return w((function(i){return t in e.L?i.return(e.L[t]):(n=e.locateFile(t,""),r=fetch(n).then((function(e){return e.arrayBuffer()})),e.L[t]=r,i.return(r))}))}function _n(e,t,n){var r,i,o,a,s,l,u,d,f,h,p,_,g,C;return w((function(v){switch(v.h){case 1:if(!n)return v.return(t);for(r={},i=0,o=c(Object.keys(n)),a=o.next();!a.done;a=o.next())s=a.value,"string"!=typeof(l=n[s])&&"texture"===l.type&&void 0!==t[l.stream]&&++i;1<i&&(e.M=!1),u=c(Object.keys(n)),a=u.next();case 2:if(a.done){v.h=4;break}if(d=a.value,"string"==typeof(f=n[d]))return g=r,C=d,m(v,function(e,t,n){var r;return w((function(i){return"number"==typeof n||n instanceof Uint8Array||n instanceof e.i.Uint8BlobList?i.return(n):n instanceof e.i.Texture2dDataOut?((r=e.v[t])||(r=new an(e.i,e.K),e.v[t]=r),i.return(cn(r,n,e.M))):i.return(void 0)}))}(e,d,t[f]),14);if(h=t[f.stream],"detection_list"===f.type){if(h){for(var y=h.getRectList(),S=h.getLandmarksList(),I=h.getClassificationsList(),R=[],b=0;b<y.size();++b){var E=tn(y.get(b)),D=void 0;D=void 0===D?0:D,E={la:{sa:et(E,1),ta:et(E,2),height:et(E,3),width:et(E,4),rotation:et(E,5,0),pa:$e(Ke(E,6),D)},ea:Qe(Xt(S.get(b)),Jt,1).map(on),ba:rn(zt(I.get(b)))},R.push(E)}y=R}else y=[];r[d]=y,v.h=7;break}if("proto_list"===f.type){if(h){for(y=Array(h.size()),S=0;S<h.size();S++)y[S]=h.get(S);h.delete()}else y=[];r[d]=y,v.h=7;break}if(void 0===h){v.h=3;break}if("float_list"===f.type){r[d]=h,v.h=7;break}if("proto"===f.type){r[d]=h,v.h=7;break}if("texture"!==f.type)throw Error("Unknown output config type: '"+f.type+"'");return(p=e.v[d])||(p=new an(e.i,e.K),e.v[d]=p),m(v,cn(p,h,e.M),13);case 13:_=v.i,r[d]=_;case 7:f.transform&&r[d]&&(r[d]=f.transform(r[d])),v.h=3;break;case 14:g[C]=v.i;case 3:a=u.next(),v.h=2;break;case 4:return v.return(r)}}))}function gn(t,n){for(var r=n.name||"$",i=[].concat(s(n.wants)),o=new t.i.StringList,a=c(n.wants),l=a.next();!l.done;l=a.next())o.push_back(l.value);a=t.i.PacketListener.implement({onResults:function(o){for(var a={},c=0;c<n.wants.length;++c)a[i[c]]=o.get(c);var s=t.listeners[r];s&&(t.I=_n(t,a,n.outs).then((function(r){r=s(r);for(var o=0;o<n.wants.length;++o){var c=a[i[o]];"object"===e(c)&&c.hasOwnProperty&&c.hasOwnProperty("delete")&&c.delete()}r&&(t.I=r)})))}}),t.j.attachMultiListener(o,a),o.delete()}function Cn(e){return void 0===e&&(e=0),1===e?"selfie_segmentation_landscape.tflite":"selfie_segmentation.tflite"}function vn(t){var n=this;t=t||{},this.h=new fn({locateFile:t.locateFile,files:function(e){return[{simd:!0,url:"selfie_segmentation_solution_simd_wasm_bin.js"},{simd:!1,url:"selfie_segmentation_solution_wasm_bin.js"},{data:!0,url:Cn(e.modelSelection)}]},graph:{url:"selfie_segmentation.binarypb"},listeners:[{wants:["segmentation_mask","image_transformed"],outs:{image:{type:"texture",stream:"image_transformed"},segmentationMask:{type:"texture",stream:"segmentation_mask"}}}],inputs:{image:{type:"video",stream:"input_frames_gpu"}},options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:"object"===("undefined"==typeof window?"undefined":e(window))&&void 0!==window.navigator&&("iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document)},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},modelSelection:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorModelSelection",fieldName:"int_value"},onChange:function(e){var t,r,i;return w((function(o){return 1==o.h?(t=Cn(e),r="third_party/mediapipe/modules/selfie_segmentation/"+t,m(o,pn(n.h,t),2)):(i=o.i,n.h.overrideFile(r,i),o.return(!0))}))}}}})}(t=fn.prototype).close=function(){return this.j&&this.j.delete(),Promise.resolve()},t.reset=function(){var e=this;return w((function(t){e.j&&(e.j.reset(),e.s={},e.v={}),t.h=0}))},t.setOptions=function(e,t){var n=this;if(t=t||this.h.options){for(var r=[],i=[],o={},a=c(Object.keys(e)),s=a.next();!s.done;o={X:o.X,Y:o.Y},s=a.next())if(!((s=s.value)in this.l)||this.l[s]!==e[s]){this.l[s]=e[s];var l=t[s];void 0!==l&&(l.onChange&&(o.X=l.onChange,o.Y=e[s],r.push(function(e){return function(){return w((function(t){if(1==t.h)return m(t,e.X(e.Y),2);!0===t.i&&(n.u=!0),t.h=0}))}}(o))),l.graphOptionXref&&(s=Object.assign({},{calculatorName:"",calculatorIndex:0},l.graphOptionXref,{valueNumber:1===l.type?e[s]:0,valueBoolean:0===l.type&&e[s],valueString:2===l.type?e[s]:""}),i.push(s)))}0===r.length&&0===i.length||(this.u=!0,this.H=(void 0===this.H?[]:this.H).concat(i),this.F=(void 0===this.F?[]:this.F).concat(r))}},t.initialize=function(){var e=this;return w((function(t){return 1==t.h?m(t,hn(e),2):3!=t.h?m(t,function(e){var t,n,r,i,o,a,s,l;return w((function(u){if(1==u.h)return e.h.graph&&e.h.graph.url&&e.fa===e.h.graph.url?u.return():(e.u=!0,e.h.graph&&e.h.graph.url?(e.fa=e.h.graph.url,m(u,pn(e,e.h.graph.url),3)):void(u.h=2));for(2!=u.h&&(t=u.i,e.j.loadGraph(t)),n=c(Object.keys(e.D)),r=n.next();!r.done;r=n.next())i=r.value,e.j.overrideFile(i,e.D[i]);if(e.D={},e.h.listeners)for(o=c(e.h.listeners),a=o.next();!a.done;a=o.next())s=a.value,gn(e,s);l=e.l,e.l={},e.setOptions(l),u.h=0}))}(e),3):m(t,function(e){var t,n,r,i,o,a;return w((function(s){switch(s.h){case 1:if(!e.u)return s.return();if(!e.F){s.h=2;break}t=c(e.F),n=t.next();case 3:if(n.done){s.h=5;break}return m(s,(0,n.value)(),4);case 4:n=t.next(),s.h=3;break;case 5:e.F=void 0;case 2:if(e.H){for(r=new e.i.GraphOptionChangeRequestList,i=c(e.H),o=i.next();!o.done;o=i.next())a=o.value,r.push_back(a);e.j.changeOptions(r),r.delete(),e.H=void 0}e.u=!1,s.h=0}}))}(e),0)}))},t.overrideFile=function(e,t){this.j?this.j.overrideFile(e,t):this.D[e]=t},t.clearOverriddenFiles=function(){this.D={},this.j&&this.j.clearOverriddenFiles()},t.send=function(e,t){var n,r,i,o,a,s,l,u,d,f=this;return w((function(h){switch(h.h){case 1:return f.h.inputs?(n=1e3*(null==t?performance.now():t),m(h,f.I,2)):h.return();case 2:return m(h,f.initialize(),3);case 3:for(r=new f.i.PacketDataList,i=c(Object.keys(e)),o=i.next();!o.done;o=i.next())if(a=o.value,s=f.h.inputs[a]){e:{var p=e[a];switch(s.type){case"video":var _=f.s[s.stream];if(_||(_=new an(f.i,f.K),f.s[s.stream]=_),0===_.m&&(_.m=_.i.createTexture()),"undefined"!=typeof HTMLVideoElement&&p instanceof HTMLVideoElement)var g=p.videoWidth,C=p.videoHeight;else"undefined"!=typeof HTMLImageElement&&p instanceof HTMLImageElement?(g=p.naturalWidth,C=p.naturalHeight):(g=p.width,C=p.height);C={glName:_.m,width:g,height:C},(g=_.h).canvas.width=C.width,g.canvas.height=C.height,g.activeTexture(g.TEXTURE0),_.i.bindTexture2d(_.m),g.texImage2D(g.TEXTURE_2D,0,g.RGBA,g.RGBA,g.UNSIGNED_BYTE,p),_.i.bindTexture2d(0),_=C;break e;case"detections":for((_=f.s[s.stream])||(_=new sn(f.i),f.s[s.stream]=_),_.data||(_.data=new _.h.DetectionListData),_.data.reset(p.length),C=0;C<p.length;++C){g=p[C];var v=_.data,y=v.setBoundingBox,S=C,I=g.la,R=new $t;if(Ye(R,1,I.sa),Ye(R,2,I.ta),Ye(R,3,I.height),Ye(R,4,I.width),Ye(R,5,I.rotation),We(R,6,I.pa),I=R.l(),y.call(v,S,I),g.ea)for(v=0;v<g.ea.length;++v){R=g.ea[v],S=(y=_.data).addNormalizedLandmark,I=C,R=Object.assign({},R,{visibility:R.visibility?R.visibility:0});var w=new Jt;Ye(w,1,R.x),Ye(w,2,R.y),Ye(w,3,R.z),R.visibility&&Ye(w,4,R.visibility),R=w.l(),S.call(y,I,R)}if(g.ba)for(v=0;v<g.ba.length;++v)S=(y=_.data).addClassification,I=C,R=g.ba[v],Ye(w=new qt,2,R.qa),R.index&&We(w,1,R.index),R.label&&We(w,3,R.label),R.displayName&&We(w,4,R.displayName),R=w.l(),S.call(y,I,R)}_=_.data;break e;default:_={}}}switch(l=_,u=s.stream,s.type){case"video":r.pushTexture2d(Object.assign({},l,{stream:u,timestamp:n}));break;case"detections":(d=l).stream=u,d.timestamp=n,r.pushDetectionList(d);break;default:throw Error("Unknown input config type: '"+s.type+"'")}}return f.j.send(r),m(h,f.I,4);case 4:r.delete(),h.h=0}}))},t.onResults=function(e,t){this.listeners[t||"$"]=e},D("Solution",fn),D("OptionType",{BOOL:0,NUMBER:1,ua:2,0:"BOOL",1:"NUMBER",2:"STRING"}),(t=vn.prototype).close=function(){return this.h.close(),Promise.resolve()},t.onResults=function(e){this.h.onResults(e)},t.initialize=function(){var e=this;return w((function(t){return m(t,e.h.initialize(),0)}))},t.reset=function(){this.h.reset()},t.send=function(e){var t=this;return w((function(n){return m(n,t.h.send(e),0)}))},t.setOptions=function(e){this.h.setOptions(e)},D("SelfieSegmentation",vn),D("VERSION","0.1.1675465747")}).call(this)},4556:(e,t)=>{var n,r,i,o;function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}o=function(){return function e(t,n,r){function i(a,c){if(!n[a]){if(!t[a]){if(o)return o(a,!0);var s=new Error("Cannot find module '"+a+"'");throw s.code="MODULE_NOT_FOUND",s}var l=n[a]={exports:{}};t[a][0].call(l.exports,(function(e){return i(t[a][1][e]||e)}),l,l.exports,e,t,n,r)}return n[a].exports}for(var o=void 0,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,t,n){"use strict";var r=(0,e("./adapter_factory.js").adapterFactory)({window:"undefined"==typeof window?void 0:window});t.exports=r},{"./adapter_factory.js":2}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.adapterFactory=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.window,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0},l=r.log,u=r.detectBrowser(t),d={browserDetails:u,commonShim:c,extractVersion:r.extractVersion,disableLog:r.disableLog,disableWarnings:r.disableWarnings,sdp:s};switch(u.browser){case"chrome":if(!i||!i.shimPeerConnection||!n.shimChrome)return l("Chrome shim is not included in this adapter release."),d;if(null===u.version)return l("Chrome shim can not determine version, not shimming."),d;l("adapter.js shimming chrome."),d.browserShim=i,c.shimAddIceCandidateNullOrEmpty(t,u),i.shimGetUserMedia(t,u),i.shimMediaStream(t,u),i.shimPeerConnection(t,u),i.shimOnTrack(t,u),i.shimAddTrackRemoveTrack(t,u),i.shimGetSendersWithDtmf(t,u),i.shimGetStats(t,u),i.shimSenderReceiverGetStats(t,u),i.fixNegotiationNeeded(t,u),c.shimRTCIceCandidate(t,u),c.shimConnectionState(t,u),c.shimMaxMessageSize(t,u),c.shimSendThrowTypeError(t,u),c.removeExtmapAllowMixed(t,u);break;case"firefox":if(!o||!o.shimPeerConnection||!n.shimFirefox)return l("Firefox shim is not included in this adapter release."),d;l("adapter.js shimming firefox."),d.browserShim=o,c.shimAddIceCandidateNullOrEmpty(t,u),o.shimGetUserMedia(t,u),o.shimPeerConnection(t,u),o.shimOnTrack(t,u),o.shimRemoveStream(t,u),o.shimSenderGetStats(t,u),o.shimReceiverGetStats(t,u),o.shimRTCDataChannel(t,u),o.shimAddTransceiver(t,u),o.shimGetParameters(t,u),o.shimCreateOffer(t,u),o.shimCreateAnswer(t,u),c.shimRTCIceCandidate(t,u),c.shimConnectionState(t,u),c.shimMaxMessageSize(t,u),c.shimSendThrowTypeError(t,u);break;case"safari":if(!a||!n.shimSafari)return l("Safari shim is not included in this adapter release."),d;l("adapter.js shimming safari."),d.browserShim=a,c.shimAddIceCandidateNullOrEmpty(t,u),a.shimRTCIceServerUrls(t,u),a.shimCreateOfferLegacy(t,u),a.shimCallbacksAPI(t,u),a.shimLocalStreamsAPI(t,u),a.shimRemoteStreamsAPI(t,u),a.shimTrackEventTransceiver(t,u),a.shimGetUserMedia(t,u),a.shimAudioContext(t,u),c.shimRTCIceCandidate(t,u),c.shimMaxMessageSize(t,u),c.shimSendThrowTypeError(t,u),c.removeExtmapAllowMixed(t,u);break;default:l("Unsupported browser!")}return d};var r=l(e("./utils")),i=l(e("./chrome/chrome_shim")),o=l(e("./firefox/firefox_shim")),a=l(e("./safari/safari_shim")),c=l(e("./common_shim")),s=l(e("sdp"));function l(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}},{"./chrome/chrome_shim":3,"./common_shim":6,"./firefox/firefox_shim":7,"./safari/safari_shim":10,"./utils":11,sdp:12}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetDisplayMedia=n.shimGetUserMedia=void 0;var r="function"==typeof Symbol&&"symbol"===a(Symbol.iterator)?function(e){return a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":a(e)},i=e("./getusermedia");Object.defineProperty(n,"shimGetUserMedia",{enumerable:!0,get:function(){return i.shimGetUserMedia}});var o=e("./getdisplaymedia");Object.defineProperty(n,"shimGetDisplayMedia",{enumerable:!0,get:function(){return o.shimGetDisplayMedia}}),n.shimMediaStream=function(e){e.MediaStream=e.MediaStream||e.webkitMediaStream},n.shimOnTrack=function(e){if("object"===(void 0===e?"undefined":r(e))&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var n=this;return this._ontrackpoly||(this._ontrackpoly=function(t){t.stream.addEventListener("addtrack",(function(r){var i=void 0;i=e.RTCPeerConnection.prototype.getReceivers?n.getReceivers().find((function(e){return e.track&&e.track.id===r.track.id})):{track:r.track};var o=new Event("track");o.track=r.track,o.receiver=i,o.transceiver={receiver:i},o.streams=[t.stream],n.dispatchEvent(o)})),t.stream.getTracks().forEach((function(r){var i=void 0;i=e.RTCPeerConnection.prototype.getReceivers?n.getReceivers().find((function(e){return e.track&&e.track.id===r.id})):{track:r};var o=new Event("track");o.track=r,o.receiver=i,o.transceiver={receiver:i},o.streams=[t.stream],n.dispatchEvent(o)}))},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else c.wrapPeerConnectionEvent(e,"track",(function(e){return e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e}))},n.shimGetSendersWithDtmf=function(e){if("object"===(void 0===e?"undefined":r(e))&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){var t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,r){var i=n.apply(this,arguments);return i||(i=t(this,e),this._senders.push(i)),i};var i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){i.apply(this,arguments);var t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}var o=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var n=this;this._senders=this._senders||[],o.apply(this,[e]),e.getTracks().forEach((function(e){n._senders.push(t(n,e))}))};var a=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._senders=this._senders||[],a.apply(this,[e]),e.getTracks().forEach((function(e){var n=t._senders.find((function(t){return t.track===e}));n&&t._senders.splice(t._senders.indexOf(n),1)}))}}else if("object"===(void 0===e?"undefined":r(e))&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){var c=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){var e=this,t=c.apply(this,[]);return t.forEach((function(t){return t._pc=e})),t},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}},n.shimGetStats=function(e){if(e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var e=this,n=Array.prototype.slice.call(arguments),r=n[0],i=n[1],o=n[2];if(arguments.length>0&&"function"==typeof r)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!=typeof r))return t.apply(this,[]);var a=function(e){var t={};return e.result().forEach((function(e){var n={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach((function(t){n[t]=e.stat(t)})),t[n.id]=n})),t},c=function(e){return new Map(Object.keys(e).map((function(t){return[t,e[t]]})))};return arguments.length>=2?t.apply(this,[function(e){i(c(a(e)))},r]):new Promise((function(n,r){t.apply(e,[function(e){n(c(a(e)))},r])})).then(i,o)}}},n.shimSenderReceiverGetStats=function(e){if("object"===(void 0===e?"undefined":r(e))&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver){if(!("getStats"in e.RTCRtpSender.prototype)){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,n=t.apply(this,[]);return n.forEach((function(t){return t._pc=e})),n});var n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){var e=this;return this._pc.getStats().then((function(t){return c.filterStats(t,e.track,!0)}))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){var i=e.RTCPeerConnection.prototype.getReceivers;i&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,t=i.apply(this,[]);return t.forEach((function(t){return t._pc=e})),t}),c.wrapPeerConnectionEvent(e,"track",(function(e){return e.receiver._pc=e.srcElement,e})),e.RTCRtpReceiver.prototype.getStats=function(){var e=this;return this._pc.getStats().then((function(t){return c.filterStats(t,e.track,!1)}))}}if("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype){var o=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){var t=arguments[0],n=void 0,r=void 0,i=void 0;return this.getSenders().forEach((function(e){e.track===t&&(n?i=!0:n=e)})),this.getReceivers().forEach((function(e){return e.track===t&&(r?i=!0:r=e),e.track===t})),i||n&&r?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):n?n.getStats():r?r.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return o.apply(this,arguments)}}}},n.shimAddTrackRemoveTrackWithNative=l,n.shimAddTrackRemoveTrack=function(e,t){if(e.RTCPeerConnection){if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return l(e);var n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this,t=n.apply(this);return this._reverseStreams=this._reverseStreams||{},t.map((function(t){return e._reverseStreams[t.id]}))};var r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){var n=this;if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach((function(e){if(n.getSenders().find((function(t){return t.track===e})))throw new DOMException("Track already exists.","InvalidAccessError")})),!this._reverseStreams[t.id]){var i=new e.MediaStream(t.getTracks());this._streams[t.id]=i,this._reverseStreams[i.id]=t,t=i}r.apply(this,[t])};var i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,n){var r=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var i=[].slice.call(arguments,1);if(1!==i.length||!i[0].getTracks().find((function(e){return e===t})))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find((function(e){return e.track===t})))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};var o=this._streams[n.id];if(o)o.addTrack(t),Promise.resolve().then((function(){r.dispatchEvent(new Event("negotiationneeded"))}));else{var a=new e.MediaStream([t]);this._streams[n.id]=a,this._reverseStreams[a.id]=n,this.addStream(a)}return this.getSenders().find((function(e){return e.track===t}))},["createOffer","createAnswer"].forEach((function(t){var n=e.RTCPeerConnection.prototype[t],r=s({},t,(function(){var e=this,t=arguments;return arguments.length&&"function"==typeof arguments[0]?n.apply(this,[function(n){var r=c(e,n);t[0].apply(null,[r])},function(e){t[1]&&t[1].apply(null,e)},arguments[2]]):n.apply(this,arguments).then((function(t){return c(e,t)}))}));e.RTCPeerConnection.prototype[t]=r[t]}));var o=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=(e=this,n=(t=arguments[0]).sdp,Object.keys(e._reverseStreams||[]).forEach((function(t){var r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(r.id,"g"),i.id)})),new RTCSessionDescription({type:t.type,sdp:n})),o.apply(this,arguments)):o.apply(this,arguments);var e,t,n};var a=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get:function(){var e=a.get.apply(this);return""===e.type?e:c(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(e._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};var n=void 0;Object.keys(this._streams).forEach((function(r){t._streams[r].getTracks().find((function(t){return e.track===t}))&&(n=t._streams[r])})),n&&(1===n.getTracks().length?this.removeStream(this._reverseStreams[n.id]):n.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function c(e,t){var n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((function(t){var r=e._reverseStreams[t],i=e._streams[r.id];n=n.replace(new RegExp(i.id,"g"),r.id)})),new RTCSessionDescription({type:t.type,sdp:n})}},n.shimPeerConnection=function(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var n=e.RTCPeerConnection.prototype[t],r=s({},t,(function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}));e.RTCPeerConnection.prototype[t]=r[t]}))},n.fixNegotiationNeeded=function(e,t){c.wrapPeerConnectionEvent(e,"negotiationneeded",(function(e){var n=e.target;if(!(t.version<72||n.getConfiguration&&"plan-b"===n.getConfiguration().sdpSemantics)||"stable"===n.signalingState)return e}))};var c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../utils.js"));function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map((function(t){return e._shimmedLocalStreams[t][0]}))};var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){if(!n)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var r=t.apply(this,arguments);return this._shimmedLocalStreams[n.id]?-1===this._shimmedLocalStreams[n.id].indexOf(r)&&this._shimmedLocalStreams[n.id].push(r):this._shimmedLocalStreams[n.id]=[n,r],r};var n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var t=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach((function(e){if(t.getSenders().find((function(t){return t.track===e})))throw new DOMException("Track already exists.","InvalidAccessError")}));var r=this.getSenders();n.apply(this,arguments);var i=this.getSenders().filter((function(e){return-1===r.indexOf(e)}));this._shimmedLocalStreams[e.id]=[e].concat(i)};var r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],r.apply(this,arguments)};var i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach((function(n){var r=t._shimmedLocalStreams[n].indexOf(e);-1!==r&&t._shimmedLocalStreams[n].splice(r,1),1===t._shimmedLocalStreams[n].length&&delete t._shimmedLocalStreams[n]})),i.apply(this,arguments)}}},{"../utils.js":11,"./getdisplaymedia":4,"./getusermedia":5}],4:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetDisplayMedia=function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"==typeof t?e.navigator.mediaDevices.getDisplayMedia=function(n){return t(n).then((function(t){var r=n.video&&n.video.width,i=n.video&&n.video.height,o=n.video&&n.video.frameRate;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:o||3}},r&&(n.video.mandatory.maxWidth=r),i&&(n.video.mandatory.maxHeight=i),e.navigator.mediaDevices.getUserMedia(n)}))}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}},{}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"===a(Symbol.iterator)?function(e){return a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":a(e)};n.shimGetUserMedia=function(e,t){var n=e&&e.navigator;if(n.mediaDevices){var o=function(e){if("object"!==(void 0===e?"undefined":r(e))||e.mandatory||e.optional)return e;var t={};return Object.keys(e).forEach((function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var i="object"===r(e[n])?e[n]:{ideal:e[n]};void 0!==i.exact&&"number"==typeof i.exact&&(i.min=i.max=i.exact);var o=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==i.ideal){t.optional=t.optional||[];var a={};"number"==typeof i.ideal?(a[o("min",n)]=i.ideal,t.optional.push(a),(a={})[o("max",n)]=i.ideal,t.optional.push(a)):(a[o("",n)]=i.ideal,t.optional.push(a))}void 0!==i.exact&&"number"!=typeof i.exact?(t.mandatory=t.mandatory||{},t.mandatory[o("",n)]=i.exact):["min","max"].forEach((function(e){void 0!==i[e]&&(t.mandatory=t.mandatory||{},t.mandatory[o(e,n)]=i[e])}))}})),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},a=function(e,a){if(t.version>=61)return a(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"===r(e.audio)){var c=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])};c((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),c(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=o(e.audio)}if(e&&"object"===r(e.video)){var s=e.video.facingMode;s=s&&("object"===(void 0===s?"undefined":r(s))?s:{ideal:s});var l=t.version<66;if(s&&("user"===s.exact||"environment"===s.exact||"user"===s.ideal||"environment"===s.ideal)&&(!n.mediaDevices.getSupportedConstraints||!n.mediaDevices.getSupportedConstraints().facingMode||l)){delete e.video.facingMode;var u=void 0;if("environment"===s.exact||"environment"===s.ideal?u=["back","rear"]:"user"!==s.exact&&"user"!==s.ideal||(u=["front"]),u)return n.mediaDevices.enumerateDevices().then((function(t){var n=(t=t.filter((function(e){return"videoinput"===e.kind}))).find((function(e){return u.some((function(t){return e.label.toLowerCase().includes(t)}))}));return!n&&t.length&&u.includes("back")&&(n=t[t.length-1]),n&&(e.video.deviceId=s.exact?{exact:n.deviceId}:{ideal:n.deviceId}),e.video=o(e.video),i("chrome: "+JSON.stringify(e)),a(e)}))}e.video=o(e.video)}return i("chrome: "+JSON.stringify(e)),a(e)},c=function(e){return t.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}};if(n.getUserMedia=function(e,t,r){a(e,(function(e){n.webkitGetUserMedia(e,t,(function(e){r&&r(c(e))}))}))}.bind(n),n.mediaDevices.getUserMedia){var s=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(e){return a(e,(function(e){return s(e).then((function(t){if(e.audio&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length)throw t.getTracks().forEach((function(e){e.stop()})),new DOMException("","NotFoundError");return t}),(function(e){return Promise.reject(c(e))}))}))}}}};var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../utils.js")).log},{"../utils.js":11}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"===a(Symbol.iterator)?function(e){return a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":a(e)};n.shimRTCIceCandidate=function(e){if(!(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)){var t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"===(void 0===e?"undefined":r(e))&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){var n=new t(e),i=c.default.parseCandidate(e.candidate),o=Object.assign(n,i);return o.toJSON=function(){return{candidate:o.candidate,sdpMid:o.sdpMid,sdpMLineIndex:o.sdpMLineIndex,usernameFragment:o.usernameFragment}},o}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,s.wrapPeerConnectionEvent(e,"icecandidate",(function(t){return t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t}))}},n.shimMaxMessageSize=function(e,t){if(e.RTCPeerConnection){"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp}});var n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var e,r;if(this._sctp=null,"chrome"===t.browser&&t.version>=76&&"plan-b"===this.getConfiguration().sdpSemantics&&Object.defineProperty(this,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0}),function(e){if(!e||!e.sdp)return!1;var t=c.default.splitSections(e.sdp);return t.shift(),t.some((function(e){var t=c.default.parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")}))}(arguments[0])){var i=function(e){var t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;var n=parseInt(t[1],10);return n!=n?-1:n}(arguments[0]),o=(e=i,r=65536,"firefox"===t.browser&&(r=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),r),a=function(e,n){var r=65536;"firefox"===t.browser&&57===t.version&&(r=65535);var i=c.default.matchPrefix(e.sdp,"a=max-message-size:");return i.length>0?r=parseInt(i[0].substr(19),10):"firefox"===t.browser&&-1!==n&&(r=2147483637),r}(arguments[0],i),s=void 0;s=0===o&&0===a?Number.POSITIVE_INFINITY:0===o||0===a?Math.max(o,a):Math.min(o,a);var l={};Object.defineProperty(l,"maxMessageSize",{get:function(){return s}}),this._sctp=l}return n.apply(this,arguments)}}},n.shimSendThrowTypeError=function(e){if(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype){var t=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){var e=t.apply(this,arguments);return n(e,this),e},s.wrapPeerConnectionEvent(e,"datachannel",(function(e){return n(e.channel,e.target),e}))}function n(e,t){var n=e.send;e.send=function(){var r=arguments[0],i=r.length||r.size||r.byteLength;if("open"===e.readyState&&t.sctp&&i>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return n.apply(e,arguments)}}},n.shimConnectionState=function(e){if(e.RTCPeerConnection&&!("connectionState"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get:function(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get:function(){return this._onconnectionstatechange||null},set:function(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach((function(e){var n=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=function(e){var t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;var n=new Event("connectionstatechange",e);t.dispatchEvent(n)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}}))}},n.removeExtmapAllowMixed=function(e,t){if(e.RTCPeerConnection&&!("chrome"===t.browser&&t.version>=71||"safari"===t.browser&&t.version>=605)){var n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(t){if(t&&t.sdp&&-1!==t.sdp.indexOf("\na=extmap-allow-mixed")){var r=t.sdp.split("\n").filter((function(e){return"a=extmap-allow-mixed"!==e.trim()})).join("\n");e.RTCSessionDescription&&t instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:t.type,sdp:r}):t.sdp=r}return n.apply(this,arguments)}}},n.shimAddIceCandidateNullOrEmpty=function(e,t){if(e.RTCPeerConnection&&e.RTCPeerConnection.prototype){var n=e.RTCPeerConnection.prototype.addIceCandidate;n&&0!==n.length&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===t.browser&&t.version<78||"firefox"===t.browser&&t.version<68||"safari"===t.browser)&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}};var i,o=e("sdp"),c=(i=o)&&i.__esModule?i:{default:i},s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("./utils"))},{"./utils":11,sdp:12}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetDisplayMedia=n.shimGetUserMedia=void 0;var r="function"==typeof Symbol&&"symbol"===a(Symbol.iterator)?function(e){return a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":a(e)},i=e("./getusermedia");Object.defineProperty(n,"shimGetUserMedia",{enumerable:!0,get:function(){return i.shimGetUserMedia}});var o=e("./getdisplaymedia");Object.defineProperty(n,"shimGetDisplayMedia",{enumerable:!0,get:function(){return o.shimGetDisplayMedia}}),n.shimOnTrack=function(e){"object"===(void 0===e?"undefined":r(e))&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})},n.shimPeerConnection=function(e,t){if("object"===(void 0===e?"undefined":r(e))&&(e.RTCPeerConnection||e.mozRTCPeerConnection)){!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var n,r,i,o=e.RTCPeerConnection.prototype[t],a=(i=function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),o.apply(this,arguments)},(r=t)in(n={})?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,n);e.RTCPeerConnection.prototype[t]=a[t]}));var n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},i=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var e=Array.prototype.slice.call(arguments),r=e[0],o=e[1],a=e[2];return i.apply(this,[r||null]).then((function(e){if(t.version<53&&!o)try{e.forEach((function(e){e.type=n[e.type]||e.type}))}catch(t){if("TypeError"!==t.name)throw t;e.forEach((function(t,r){e.set(r,Object.assign({},t,{type:n[t.type]||t.type}))}))}return e})).then(o,a)}}},n.shimSenderGetStats=function(e){if("object"===(void 0===e?"undefined":r(e))&&e.RTCPeerConnection&&e.RTCRtpSender&&(!e.RTCRtpSender||!("getStats"in e.RTCRtpSender.prototype))){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,n=t.apply(this,[]);return n.forEach((function(t){return t._pc=e})),n});var n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}},n.shimReceiverGetStats=function(e){if("object"===(void 0===e?"undefined":r(e))&&e.RTCPeerConnection&&e.RTCRtpSender&&(!e.RTCRtpSender||!("getStats"in e.RTCRtpReceiver.prototype))){var t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,n=t.apply(this,[]);return n.forEach((function(t){return t._pc=e})),n}),c.wrapPeerConnectionEvent(e,"track",(function(e){return e.receiver._pc=e.srcElement,e})),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}},n.shimRemoveStream=function(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;c.deprecated("removeStream","removeTrack"),this.getSenders().forEach((function(n){n.track&&e.getTracks().includes(n.track)&&t.removeTrack(n)}))})},n.shimRTCDataChannel=function(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)},n.shimAddTransceiver=function(e){if("object"===(void 0===e?"undefined":r(e))&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];var e=arguments[1],n=e&&"sendEncodings"in e;n&&e.sendEncodings.forEach((function(e){if("rid"in e&&!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")}));var r=t.apply(this,arguments);if(n){var i=r.sender,o=i.getParameters();(!("encodings"in o)||1===o.encodings.length&&0===Object.keys(o.encodings[0]).length)&&(o.encodings=e.sendEncodings,i.sendEncodings=e.sendEncodings,this.setParametersPromises.push(i.setParameters(o).then((function(){delete i.sendEncodings})).catch((function(){delete i.sendEncodings}))))}return r})}},n.shimGetParameters=function(e){if("object"===(void 0===e?"undefined":r(e))&&e.RTCRtpSender){var t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){var e=t.apply(this,arguments);return"encodings"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}},n.shimCreateOffer=function(e){if("object"===(void 0===e?"undefined":r(e))&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){var e=this,n=arguments;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((function(){return t.apply(e,n)})).finally((function(){e.setParametersPromises=[]})):t.apply(this,arguments)}}},n.shimCreateAnswer=function(e){if("object"===(void 0===e?"undefined":r(e))&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){var e=this,n=arguments;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((function(){return t.apply(e,n)})).finally((function(){e.setParametersPromises=[]})):t.apply(this,arguments)}}};var c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../utils"))},{"../utils":11,"./getdisplaymedia":8,"./getusermedia":9}],8:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetDisplayMedia=function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(n){if(!n||!n.video){var r=new DOMException("getDisplayMedia without video constraints is undefined");return r.name="NotFoundError",r.code=8,Promise.reject(r)}return!0===n.video?n.video={mediaSource:t}:n.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(n)})}},{}],9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"===a(Symbol.iterator)?function(e){return a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":a(e)};n.shimGetUserMedia=function(e,t){var n=e&&e.navigator,o=e&&e.MediaStreamTrack;if(n.getUserMedia=function(e,t,r){i.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(e).then(t,r)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){var a=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])},c=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(e){return"object"===(void 0===e?"undefined":r(e))&&"object"===r(e.audio)&&(e=JSON.parse(JSON.stringify(e)),a(e.audio,"autoGainControl","mozAutoGainControl"),a(e.audio,"noiseSuppression","mozNoiseSuppression")),c(e)},o&&o.prototype.getSettings){var s=o.prototype.getSettings;o.prototype.getSettings=function(){var e=s.apply(this,arguments);return a(e,"mozAutoGainControl","autoGainControl"),a(e,"mozNoiseSuppression","noiseSuppression"),e}}if(o&&o.prototype.applyConstraints){var l=o.prototype.applyConstraints;o.prototype.applyConstraints=function(e){return"audio"===this.kind&&"object"===(void 0===e?"undefined":r(e))&&(e=JSON.parse(JSON.stringify(e)),a(e,"autoGainControl","mozAutoGainControl"),a(e,"noiseSuppression","mozNoiseSuppression")),l.apply(this,[e])}}}};var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../utils"))},{"../utils":11}],10:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"===a(Symbol.iterator)?function(e){return a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":a(e)};n.shimLocalStreamsAPI=function(e){if("object"===(void 0===e?"undefined":r(e))&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){var n=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach((function(r){return t.call(n,r,e)})),e.getVideoTracks().forEach((function(r){return t.call(n,r,e)}))},e.RTCPeerConnection.prototype.addTrack=function(e){for(var n=this,r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return i&&i.forEach((function(e){n._localStreams?n._localStreams.includes(e)||n._localStreams.push(e):n._localStreams=[e]})),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._localStreams||(this._localStreams=[]);var n=this._localStreams.indexOf(e);if(-1!==n){this._localStreams.splice(n,1);var r=e.getTracks();this.getSenders().forEach((function(e){r.includes(e.track)&&t.removeTrack(e)}))}})}},n.shimRemoteStreamsAPI=function(e){if("object"===(void 0===e?"undefined":r(e))&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(e){var t=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=function(e){e.streams.forEach((function(e){if(t._remoteStreams||(t._remoteStreams=[]),!t._remoteStreams.includes(e)){t._remoteStreams.push(e);var n=new Event("addstream");n.stream=e,t.dispatchEvent(n)}}))})}});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach((function(t){if(e._remoteStreams||(e._remoteStreams=[]),!(e._remoteStreams.indexOf(t)>=0)){e._remoteStreams.push(t);var n=new Event("addstream");n.stream=t,e.dispatchEvent(n)}}))}),t.apply(e,arguments)}}},n.shimCallbacksAPI=function(e){if("object"===(void 0===e?"undefined":r(e))&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype,n=t.createOffer,i=t.createAnswer,o=t.setLocalDescription,a=t.setRemoteDescription,c=t.addIceCandidate;t.createOffer=function(e,t){var r=arguments.length>=2?arguments[2]:arguments[0],i=n.apply(this,[r]);return t?(i.then(e,t),Promise.resolve()):i},t.createAnswer=function(e,t){var n=arguments.length>=2?arguments[2]:arguments[0],r=i.apply(this,[n]);return t?(r.then(e,t),Promise.resolve()):r};var s=function(e,t,n){var r=o.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r};t.setLocalDescription=s,s=function(e,t,n){var r=a.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.setRemoteDescription=s,s=function(e,t,n){var r=c.apply(this,[e]);return n?(r.then(t,n),Promise.resolve()):r},t.addIceCandidate=s}},n.shimGetUserMedia=function(e){var t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){var n=t.mediaDevices,r=n.getUserMedia.bind(n);t.mediaDevices.getUserMedia=function(e){return r(o(e))}}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,n,r){t.mediaDevices.getUserMedia(e).then(n,r)}.bind(t))},n.shimConstraints=o,n.shimRTCIceServerUrls=function(e){if(e.RTCPeerConnection){var t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,n){if(e&&e.iceServers){for(var r=[],o=0;o<e.iceServers.length;o++){var a=e.iceServers[o];!a.hasOwnProperty("urls")&&a.hasOwnProperty("url")?(i.deprecated("RTCIceServer.url","RTCIceServer.urls"),(a=JSON.parse(JSON.stringify(a))).urls=a.url,delete a.url,r.push(a)):r.push(e.iceServers[o])}e.iceServers=r}return new t(e,n)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return t.generateCertificate}})}},n.shimTrackEventTransceiver=function(e){"object"===(void 0===e?"undefined":r(e))&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})},n.shimCreateOfferLegacy=function(e){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);var n=this.getTransceivers().find((function(e){return"audio"===e.receiver.track.kind}));!1===e.offerToReceiveAudio&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==e.offerToReceiveAudio||n||this.addTransceiver("audio"),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);var r=this.getTransceivers().find((function(e){return"video"===e.receiver.track.kind}));!1===e.offerToReceiveVideo&&r?"sendrecv"===r.direction?r.setDirection?r.setDirection("sendonly"):r.direction="sendonly":"recvonly"===r.direction&&(r.setDirection?r.setDirection("inactive"):r.direction="inactive"):!0!==e.offerToReceiveVideo||r||this.addTransceiver("video")}return t.apply(this,arguments)}},n.shimAudioContext=function(e){"object"!==(void 0===e?"undefined":r(e))||e.AudioContext||(e.AudioContext=e.webkitAudioContext)};var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(e("../utils"));function o(e){return e&&void 0!==e.video?Object.assign({},e,{video:i.compactObject(e.video)}):e}},{"../utils":11}],11:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"===a(Symbol.iterator)?function(e){return a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":a(e)};n.extractVersion=c,n.wrapPeerConnectionEvent=function(e,t,n){if(e.RTCPeerConnection){var r=e.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(e,r){if(e!==t)return i.apply(this,arguments);var o=function(e){var t=n(e);t&&(r.handleEvent?r.handleEvent(t):r(t))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(r,o),i.apply(this,[e,o])};var o=r.removeEventListener;r.removeEventListener=function(e,n){if(e!==t||!this._eventMap||!this._eventMap[t])return o.apply(this,arguments);if(!this._eventMap[t].has(n))return o.apply(this,arguments);var r=this._eventMap[t].get(n);return this._eventMap[t].delete(n),0===this._eventMap[t].size&&delete this._eventMap[t],0===Object.keys(this._eventMap).length&&delete this._eventMap,o.apply(this,[e,r])},Object.defineProperty(r,"on"+t,{get:function(){return this["_on"+t]},set:function(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}},n.disableLog=function(e){return"boolean"!=typeof e?new Error("Argument type: "+(void 0===e?"undefined":r(e))+". Please use a boolean."):(i=e,e?"adapter.js logging disabled":"adapter.js logging enabled")},n.disableWarnings=function(e){return"boolean"!=typeof e?new Error("Argument type: "+(void 0===e?"undefined":r(e))+". Please use a boolean."):(o=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))},n.log=function(){if("object"===("undefined"==typeof window?"undefined":r(window))){if(i)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}},n.deprecated=function(e,t){o&&console.warn(e+" is deprecated, please use "+t+" instead.")},n.detectBrowser=function(e){var t={browser:null,version:null};if(void 0===e||!e.navigator)return t.browser="Not a browser.",t;var n=e.navigator;if(n.mozGetUserMedia)t.browser="firefox",t.version=c(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)t.browser="chrome",t.version=c(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else{if(!e.RTCPeerConnection||!n.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=c(n.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return t},n.compactObject=function e(t){return s(t)?Object.keys(t).reduce((function(n,r){var i=s(t[r]),o=i?e(t[r]):t[r],a=i&&!Object.keys(o).length;return void 0===o||a?n:Object.assign(n,function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},r,o))}),{}):t},n.walkStats=l,n.filterStats=function(e,t,n){var r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(null===t)return i;var o=[];return e.forEach((function(e){"track"===e.type&&e.trackIdentifier===t.id&&o.push(e)})),o.forEach((function(t){e.forEach((function(n){n.type===r&&n.trackId===t.id&&l(e,n,i)}))})),i};var i=!0,o=!0;function c(e,t,n){var r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)}function s(e){return"[object Object]"===Object.prototype.toString.call(e)}function l(e,t,n){t&&!n.has(t.id)&&(n.set(t.id,t),Object.keys(t).forEach((function(r){r.endsWith("Id")?l(e,e.get(t[r]),n):r.endsWith("Ids")&&t[r].forEach((function(t){l(e,e.get(t),n)}))})))}},{}],12:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"===a(Symbol.iterator)?function(e){return a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":a(e)},i={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};i.localCName=i.generateIdentifier(),i.splitLines=function(e){return e.trim().split("\n").map((function(e){return e.trim()}))},i.splitSections=function(e){return e.split("\nm=").map((function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"}))},i.getDescription=function(e){var t=i.splitSections(e);return t&&t[0]},i.getMediaSections=function(e){var t=i.splitSections(e);return t.shift(),t},i.matchPrefix=function(e,t){return i.splitLines(e).filter((function(e){return 0===e.indexOf(t)}))},i.parseCandidate=function(e){for(var t=void 0,n={foundation:(t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" "))[0],component:{1:"rtp",2:"rtcp"}[t[1]],protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]},r=8;r<t.length;r+=2)switch(t[r]){case"raddr":n.relatedAddress=t[r+1];break;case"rport":n.relatedPort=parseInt(t[r+1],10);break;case"tcptype":n.tcpType=t[r+1];break;case"ufrag":n.ufrag=t[r+1],n.usernameFragment=t[r+1];break;default:void 0===n[t[r]]&&(n[t[r]]=t[r+1])}return n},i.writeCandidate=function(e){var t=[];t.push(e.foundation);var n=e.component;"rtp"===n?t.push(1):"rtcp"===n?t.push(2):t.push(n),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);var r=e.type;return t.push("typ"),t.push(r),"host"!==r&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},i.parseIceOptions=function(e){return e.substr(14).split(" ")},i.parseRtpMap=function(e){var t=e.substr(9).split(" "),n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.channels=3===t.length?parseInt(t[2],10):1,n.numChannels=n.channels,n},i.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var n=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==n?"/"+n:"")+"\r\n"},i.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},i.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},i.parseFmtp=function(e){for(var t={},n=void 0,r=e.substr(e.indexOf(" ")+1).split(";"),i=0;i<r.length;i++)t[(n=r[i].trim().split("="))[0].trim()]=n[1];return t},i.writeFmtp=function(e){var t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var r=[];Object.keys(e.parameters).forEach((function(t){e.parameters[t]?r.push(t+"="+e.parameters[t]):r.push(t)})),t+="a=fmtp:"+n+" "+r.join(";")+"\r\n"}return t},i.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},i.writeRtcpFb=function(e){var t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((function(e){t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),t},i.parseSsrcMedia=function(e){var t=e.indexOf(" "),n={ssrc:parseInt(e.substr(7,t-7),10)},r=e.indexOf(":",t);return r>-1?(n.attribute=e.substr(t+1,r-t-1),n.value=e.substr(r+1)):n.attribute=e.substr(t+1),n},i.parseSsrcGroup=function(e){var t=e.substr(13).split(" ");return{semantics:t.shift(),ssrcs:t.map((function(e){return parseInt(e,10)}))}},i.getMid=function(e){var t=i.matchPrefix(e,"a=mid:")[0];if(t)return t.substr(6)},i.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1]}},i.getDtlsParameters=function(e,t){return{role:"auto",fingerprints:i.matchPrefix(e+t,"a=fingerprint:").map(i.parseFingerprint)}},i.writeDtlsParameters=function(e,t){var n="a=setup:"+t+"\r\n";return e.fingerprints.forEach((function(e){n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),n},i.parseCryptoLine=function(e){var t=e.substr(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},i.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"===r(e.keyParams)?i.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},i.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;var t=e.substr(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},i.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},i.getCryptoParameters=function(e,t){return i.matchPrefix(e+t,"a=crypto:").map(i.parseCryptoLine)},i.getIceParameters=function(e,t){var n=i.matchPrefix(e+t,"a=ice-ufrag:")[0],r=i.matchPrefix(e+t,"a=ice-pwd:")[0];return n&&r?{usernameFragment:n.substr(12),password:r.substr(10)}:null},i.writeIceParameters=function(e){var t="a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n";return e.iceLite&&(t+="a=ice-lite\r\n"),t},i.parseRtpParameters=function(e){for(var t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},n=i.splitLines(e)[0].split(" "),r=3;r<n.length;r++){var o=n[r],a=i.matchPrefix(e,"a=rtpmap:"+o+" ")[0];if(a){var c=i.parseRtpMap(a),s=i.matchPrefix(e,"a=fmtp:"+o+" ");switch(c.parameters=s.length?i.parseFmtp(s[0]):{},c.rtcpFeedback=i.matchPrefix(e,"a=rtcp-fb:"+o+" ").map(i.parseRtcpFb),t.codecs.push(c),c.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(c.name.toUpperCase())}}}return i.matchPrefix(e,"a=extmap:").forEach((function(e){t.headerExtensions.push(i.parseExtmap(e))})),t},i.writeRtpDescription=function(e,t){var n="";n+="m="+e+" ",n+=t.codecs.length>0?"9":"0",n+=" UDP/TLS/RTP/SAVPF ",n+=t.codecs.map((function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType})).join(" ")+"\r\n",n+="c=IN IP4 0.0.0.0\r\n",n+="a=rtcp:9 IN IP4 0.0.0.0\r\n",t.codecs.forEach((function(e){n+=i.writeRtpMap(e),n+=i.writeFmtp(e),n+=i.writeRtcpFb(e)}));var r=0;return t.codecs.forEach((function(e){e.maxptime>r&&(r=e.maxptime)})),r>0&&(n+="a=maxptime:"+r+"\r\n"),t.headerExtensions&&t.headerExtensions.forEach((function(e){n+=i.writeExtmap(e)})),n},i.parseRtpEncodingParameters=function(e){var t=[],n=i.parseRtpParameters(e),r=-1!==n.fecMechanisms.indexOf("RED"),o=-1!==n.fecMechanisms.indexOf("ULPFEC"),a=i.matchPrefix(e,"a=ssrc:").map((function(e){return i.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute})),c=a.length>0&&a[0].ssrc,s=void 0,l=i.matchPrefix(e,"a=ssrc-group:FID").map((function(e){return e.substr(17).split(" ").map((function(e){return parseInt(e,10)}))}));l.length>0&&l[0].length>1&&l[0][0]===c&&(s=l[0][1]),n.codecs.forEach((function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var n={ssrc:c,codecPayloadType:parseInt(e.parameters.apt,10)};c&&s&&(n.rtx={ssrc:s}),t.push(n),r&&((n=JSON.parse(JSON.stringify(n))).fec={ssrc:c,mechanism:o?"red+ulpfec":"red"},t.push(n))}})),0===t.length&&c&&t.push({ssrc:c});var u=i.matchPrefix(e,"b=");return u.length&&(u=0===u[0].indexOf("b=TIAS:")?parseInt(u[0].substr(7),10):0===u[0].indexOf("b=AS:")?1e3*parseInt(u[0].substr(5),10)*.95-16e3:void 0,t.forEach((function(e){e.maxBitrate=u}))),t},i.parseRtcpParameters=function(e){var t={},n=i.matchPrefix(e,"a=ssrc:").map((function(e){return i.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute}))[0];n&&(t.cname=n.value,t.ssrc=n.ssrc);var r=i.matchPrefix(e,"a=rtcp-rsize");t.reducedSize=r.length>0,t.compound=0===r.length;var o=i.matchPrefix(e,"a=rtcp-mux");return t.mux=o.length>0,t},i.writeRtcpParameters=function(e){var t="";return e.reducedSize&&(t+="a=rtcp-rsize\r\n"),e.mux&&(t+="a=rtcp-mux\r\n"),void 0!==e.ssrc&&e.cname&&(t+="a=ssrc:"+e.ssrc+" cname:"+e.cname+"\r\n"),t},i.parseMsid=function(e){var t=void 0,n=i.matchPrefix(e,"a=msid:");if(1===n.length)return{stream:(t=n[0].substr(7).split(" "))[0],track:t[1]};var r=i.matchPrefix(e,"a=ssrc:").map((function(e){return i.parseSsrcMedia(e)})).filter((function(e){return"msid"===e.attribute}));return r.length>0?{stream:(t=r[0].value.split(" "))[0],track:t[1]}:void 0},i.parseSctpDescription=function(e){var t=i.parseMLine(e),n=i.matchPrefix(e,"a=max-message-size:"),r=void 0;n.length>0&&(r=parseInt(n[0].substr(19),10)),isNaN(r)&&(r=65536);var o=i.matchPrefix(e,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substr(12),10),protocol:t.fmt,maxMessageSize:r};var a=i.matchPrefix(e,"a=sctpmap:");if(a.length>0){var c=a[0].substr(10).split(" ");return{port:parseInt(c[0],10),protocol:c[1],maxMessageSize:r}}},i.writeSctpDescription=function(e,t){var n=[];return n="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&n.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),n.join("")},i.generateSessionId=function(){return Math.random().toString().substr(2,21)},i.writeSessionBoilerplate=function(e,t,n){var r=void 0!==t?t:2;return"v=0\r\no="+(n||"thisisadapterortc")+" "+(e||i.generateSessionId())+" "+r+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},i.getDirection=function(e,t){for(var n=i.splitLines(e),r=0;r<n.length;r++)switch(n[r]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return n[r].substr(2)}return t?i.getDirection(t):"sendrecv"},i.getKind=function(e){return i.splitLines(e)[0].split(" ")[0].substr(2)},i.isRejected=function(e){return"0"===e.split(" ",2)[1]},i.parseMLine=function(e){var t=i.splitLines(e)[0].substr(2).split(" ");return{kind:t[0],port:parseInt(t[1],10),protocol:t[2],fmt:t.slice(3).join(" ")}},i.parseOLine=function(e){var t=i.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:t[0],sessionId:t[1],sessionVersion:parseInt(t[2],10),netType:t[3],addressType:t[4],address:t[5]}},i.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;for(var t=i.splitLines(e),n=0;n<t.length;n++)if(t[n].length<2||"="!==t[n].charAt(1))return!1;return!0},"object"===(void 0===t?"undefined":r(t))&&(t.exports=i)},{}]},{},[1])(1)},"object"===a(t)?e.exports=o():(r=[],void 0===(i="function"==typeof(n=o)?n.apply(t,r):n)||(e.exports=i))},6902:function(e,t,n){var r,i,o,a;function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}a=function(){var e=e||function(e,t){var r;if("undefined"!=typeof window&&window.crypto&&(r=window.crypto),"undefined"!=typeof self&&self.crypto&&(r=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(r=globalThis.crypto),!r&&"undefined"!=typeof window&&window.msCrypto&&(r=window.msCrypto),!r&&"undefined"!=typeof global&&global.crypto&&(r=global.crypto),!r)try{r=n(7860)}catch(e){}var i=function(){if(r){if("function"==typeof r.getRandomValues)try{return r.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof r.randomBytes)try{return r.randomBytes(4).readInt32LE()}catch(e){}}throw new Error("Native crypto module could not be used to get secure random number.")},o=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),a={},c=a.lib={},s=c.Base={extend:function(e){var t=o(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},l=c.WordArray=s.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||d).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes,i=e.sigBytes;if(this.clamp(),r%4)for(var o=0;o<i;o++){var a=n[o>>>2]>>>24-o%4*8&255;t[r+o>>>2]|=a<<24-(r+o)%4*8}else for(var c=0;c<i;c+=4)t[r+c>>>2]=n[c>>>2];return this.sigBytes+=i,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=s.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],n=0;n<e;n+=4)t.push(i());return new l.init(t,e)}}),u=a.enc={},d=u.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var o=t[i>>>2]>>>24-i%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new l.init(n,t/2)}},f=u.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,r=[],i=0;i<n;i++){var o=t[i>>>2]>>>24-i%4*8&255;r.push(String.fromCharCode(o))}return r.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new l.init(n,t)}},h=u.Utf8={stringify:function(e){try{return decodeURIComponent(escape(f.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return f.parse(unescape(encodeURIComponent(e)))}},p=c.BufferedBlockAlgorithm=s.extend({reset:function(){this._data=new l.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=h.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n,r=this._data,i=r.words,o=r.sigBytes,a=this.blockSize,c=o/(4*a),s=(c=t?e.ceil(c):e.max((0|c)-this._minBufferSize,0))*a,u=e.min(4*s,o);if(s){for(var d=0;d<s;d+=a)this._doProcessBlock(i,d);n=i.splice(0,s),r.sigBytes-=u}return new l.init(n,u)},clone:function(){var e=s.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),_=(c.Hasher=p.extend({cfg:s.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){p.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new _.HMAC.init(e,n).finalize(t)}}}),a.algo={});return a}(Math);return e},"object"===c(t)?e.exports=t=a():(i=[],void 0===(o="function"==typeof(r=a)?r.apply(t,i):r)||(e.exports=o))},8567:function(e,t,n){var r,i,o,a;function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}a=function(e){return function(t){var n=e,r=n.lib,i=r.WordArray,o=r.Hasher,a=n.algo,c=[],s=[];!function(){function e(e){for(var n=t.sqrt(e),r=2;r<=n;r++)if(!(e%r))return!1;return!0}function n(e){return 4294967296*(e-(0|e))|0}for(var r=2,i=0;i<64;)e(r)&&(i<8&&(c[i]=n(t.pow(r,.5))),s[i]=n(t.pow(r,1/3)),i++),r++}();var l=[],u=a.SHA256=o.extend({_doReset:function(){this._hash=new i.init(c.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],a=n[3],c=n[4],u=n[5],d=n[6],f=n[7],h=0;h<64;h++){if(h<16)l[h]=0|e[t+h];else{var p=l[h-15],_=(p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3,g=l[h-2],C=(g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10;l[h]=_+l[h-7]+C+l[h-16]}var v=r&i^r&o^i&o,m=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),y=f+((c<<26|c>>>6)^(c<<21|c>>>11)^(c<<7|c>>>25))+(c&u^~c&d)+s[h]+l[h];f=d,d=u,u=c,c=a+y|0,a=o,o=i,i=r,r=y+(m+v)|0}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+a|0,n[4]=n[4]+c|0,n[5]=n[5]+u|0,n[6]=n[6]+d|0,n[7]=n[7]+f|0},_doFinalize:function(){var e=this._data,n=e.words,r=8*this._nDataBytes,i=8*e.sigBytes;return n[i>>>5]|=128<<24-i%32,n[14+(i+64>>>9<<4)]=t.floor(r/4294967296),n[15+(i+64>>>9<<4)]=r,e.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});n.SHA256=o._createHelper(u),n.HmacSHA256=o._createHmacHelper(u)}(Math),e.SHA256},"object"===c(t)?e.exports=t=a(n(6902)):(i=[n(6902)],void 0===(o="function"==typeof(r=a)?r.apply(t,i):r)||(e.exports=o))},8403:function(e,t,n){var r;function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */}e=n.nmd(e),function(){var o,a="Expected a function",c="__lodash_hash_undefined__",s="__lodash_placeholder__",l=16,u=32,d=64,f=128,h=256,p=1/0,_=9007199254740991,g=NaN,C=4294967295,v=[["ary",f],["bind",1],["bindKey",2],["curry",8],["curryRight",l],["flip",512],["partial",u],["partialRight",d],["rearg",h]],m="[object Arguments]",y="[object Array]",S="[object Boolean]",I="[object Date]",R="[object Error]",w="[object Function]",b="[object GeneratorFunction]",E="[object Map]",D="[object Number]",P="[object Object]",T="[object Promise]",x="[object RegExp]",M="[object Set]",A="[object String]",O="[object Symbol]",k="[object WeakMap]",V="[object ArrayBuffer]",N="[object DataView]",L="[object Float32Array]",U="[object Float64Array]",j="[object Int8Array]",B="[object Int16Array]",F="[object Int32Array]",H="[object Uint8Array]",q="[object Uint8ClampedArray]",K="[object Uint16Array]",W="[object Uint32Array]",G=/\b__p \+= '';/g,z=/\b(__p \+=) '' \+/g,J=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Z=/&(?:amp|lt|gt|quot|#39);/g,Q=/[&<>"']/g,Y=RegExp(Z.source),X=RegExp(Q.source),$=/<%-([\s\S]+?)%>/g,ee=/<%([\s\S]+?)%>/g,te=/<%=([\s\S]+?)%>/g,ne=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,re=/^\w*$/,ie=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,oe=/[\\^$.*+?()[\]{}|]/g,ae=RegExp(oe.source),ce=/^\s+/,se=/\s/,le=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ue=/\{\n\/\* \[wrapped with (.+)\] \*/,de=/,? & /,fe=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,he=/[()=,{}\[\]\/\s]/,pe=/\\(\\)?/g,_e=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ge=/\w*$/,Ce=/^[-+]0x[0-9a-f]+$/i,ve=/^0b[01]+$/i,me=/^\[object .+?Constructor\]$/,ye=/^0o[0-7]+$/i,Se=/^(?:0|[1-9]\d*)$/,Ie=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Re=/($^)/,we=/['\n\r\u2028\u2029\\]/g,be="\\ud800-\\udfff",Ee="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",De="\\u2700-\\u27bf",Pe="a-z\\xdf-\\xf6\\xf8-\\xff",Te="A-Z\\xc0-\\xd6\\xd8-\\xde",xe="\\ufe0e\\ufe0f",Me="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ae="['’]",Oe="["+be+"]",ke="["+Me+"]",Ve="["+Ee+"]",Ne="\\d+",Le="["+De+"]",Ue="["+Pe+"]",je="[^"+be+Me+Ne+De+Pe+Te+"]",Be="\\ud83c[\\udffb-\\udfff]",Fe="[^"+be+"]",He="(?:\\ud83c[\\udde6-\\uddff]){2}",qe="[\\ud800-\\udbff][\\udc00-\\udfff]",Ke="["+Te+"]",We="\\u200d",Ge="(?:"+Ue+"|"+je+")",ze="(?:"+Ke+"|"+je+")",Je="(?:['’](?:d|ll|m|re|s|t|ve))?",Ze="(?:['’](?:D|LL|M|RE|S|T|VE))?",Qe="(?:"+Ve+"|"+Be+")"+"?",Ye="["+xe+"]?",Xe=Ye+Qe+("(?:"+We+"(?:"+[Fe,He,qe].join("|")+")"+Ye+Qe+")*"),$e="(?:"+[Le,He,qe].join("|")+")"+Xe,et="(?:"+[Fe+Ve+"?",Ve,He,qe,Oe].join("|")+")",tt=RegExp(Ae,"g"),nt=RegExp(Ve,"g"),rt=RegExp(Be+"(?="+Be+")|"+et+Xe,"g"),it=RegExp([Ke+"?"+Ue+"+"+Je+"(?="+[ke,Ke,"$"].join("|")+")",ze+"+"+Ze+"(?="+[ke,Ke+Ge,"$"].join("|")+")",Ke+"?"+Ge+"+"+Je,Ke+"+"+Ze,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ne,$e].join("|"),"g"),ot=RegExp("["+We+be+Ee+xe+"]"),at=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ct=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],st=-1,lt={};lt[L]=lt[U]=lt[j]=lt[B]=lt[F]=lt[H]=lt[q]=lt[K]=lt[W]=!0,lt[m]=lt[y]=lt[V]=lt[S]=lt[N]=lt[I]=lt[R]=lt[w]=lt[E]=lt[D]=lt[P]=lt[x]=lt[M]=lt[A]=lt[k]=!1;var ut={};ut[m]=ut[y]=ut[V]=ut[N]=ut[S]=ut[I]=ut[L]=ut[U]=ut[j]=ut[B]=ut[F]=ut[E]=ut[D]=ut[P]=ut[x]=ut[M]=ut[A]=ut[O]=ut[H]=ut[q]=ut[K]=ut[W]=!0,ut[R]=ut[w]=ut[k]=!1;var dt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ft=parseFloat,ht=parseInt,pt="object"==("undefined"==typeof global?"undefined":i(global))&&global&&global.Object===Object&&global,_t="object"==("undefined"==typeof self?"undefined":i(self))&&self&&self.Object===Object&&self,gt=pt||_t||Function("return this")(),Ct="object"==i(t)&&t&&!t.nodeType&&t,vt=Ct&&"object"==i(e)&&e&&!e.nodeType&&e,mt=vt&&vt.exports===Ct,yt=mt&&pt.process,St=function(){try{var e=vt&&vt.require&&vt.require("util").types;return e||yt&&yt.binding&&yt.binding("util")}catch(e){}}(),It=St&&St.isArrayBuffer,Rt=St&&St.isDate,wt=St&&St.isMap,bt=St&&St.isRegExp,Et=St&&St.isSet,Dt=St&&St.isTypedArray;function Pt(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function Tt(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var a=e[i];t(r,a,n(a),e)}return r}function xt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function Mt(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function At(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function Ot(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}function kt(e,t){return!!(null==e?0:e.length)&&Kt(e,t,0)>-1}function Vt(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function Nt(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function Lt(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function Ut(e,t,n,r){var i=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function jt(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function Bt(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var Ft=Jt("length");function Ht(e,t,n){var r;return n(e,(function(e,n,i){if(t(e,n,i))return r=n,!1})),r}function qt(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function Kt(e,t,n){return t==t?function(e,t,n){var r=n-1,i=e.length;for(;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):qt(e,Gt,n)}function Wt(e,t,n,r){for(var i=n-1,o=e.length;++i<o;)if(r(e[i],t))return i;return-1}function Gt(e){return e!=e}function zt(e,t){var n=null==e?0:e.length;return n?Yt(e,t)/n:g}function Jt(e){return function(t){return null==t?o:t[e]}}function Zt(e){return function(t){return null==e?o:e[t]}}function Qt(e,t,n,r,i){return i(e,(function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)})),n}function Yt(e,t){for(var n,r=-1,i=e.length;++r<i;){var a=t(e[r]);a!==o&&(n=n===o?a:n+a)}return n}function Xt(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function $t(e){return e?e.slice(0,Cn(e)+1).replace(ce,""):e}function en(e){return function(t){return e(t)}}function tn(e,t){return Nt(t,(function(t){return e[t]}))}function nn(e,t){return e.has(t)}function rn(e,t){for(var n=-1,r=e.length;++n<r&&Kt(t,e[n],0)>-1;);return n}function on(e,t){for(var n=e.length;n--&&Kt(t,e[n],0)>-1;);return n}var an=Zt({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"}),cn=Zt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function sn(e){return"\\"+dt[e]}function ln(e){return ot.test(e)}function un(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function dn(e,t){return function(n){return e(t(n))}}function fn(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n];a!==t&&a!==s||(e[n]=s,o[i++]=n)}return o}function hn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function pn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}function _n(e){return ln(e)?function(e){var t=rt.lastIndex=0;for(;rt.test(e);)++t;return t}(e):Ft(e)}function gn(e){return ln(e)?function(e){return e.match(rt)||[]}(e):function(e){return e.split("")}(e)}function Cn(e){for(var t=e.length;t--&&se.test(e.charAt(t)););return t}var vn=Zt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var mn=function e(t){var n,r=(t=null==t?gt:mn.defaults(gt.Object(),t,mn.pick(gt,ct))).Array,se=t.Date,be=t.Error,Ee=t.Function,De=t.Math,Pe=t.Object,Te=t.RegExp,xe=t.String,Me=t.TypeError,Ae=r.prototype,Oe=Ee.prototype,ke=Pe.prototype,Ve=t["__core-js_shared__"],Ne=Oe.toString,Le=ke.hasOwnProperty,Ue=0,je=(n=/[^.]+$/.exec(Ve&&Ve.keys&&Ve.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",Be=ke.toString,Fe=Ne.call(Pe),He=gt._,qe=Te("^"+Ne.call(Le).replace(oe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ke=mt?t.Buffer:o,We=t.Symbol,Ge=t.Uint8Array,ze=Ke?Ke.allocUnsafe:o,Je=dn(Pe.getPrototypeOf,Pe),Ze=Pe.create,Qe=ke.propertyIsEnumerable,Ye=Ae.splice,Xe=We?We.isConcatSpreadable:o,$e=We?We.iterator:o,et=We?We.toStringTag:o,rt=function(){try{var e=po(Pe,"defineProperty");return e({},"",{}),e}catch(e){}}(),ot=t.clearTimeout!==gt.clearTimeout&&t.clearTimeout,dt=se&&se.now!==gt.Date.now&&se.now,pt=t.setTimeout!==gt.setTimeout&&t.setTimeout,_t=De.ceil,Ct=De.floor,vt=Pe.getOwnPropertySymbols,yt=Ke?Ke.isBuffer:o,St=t.isFinite,Ft=Ae.join,Zt=dn(Pe.keys,Pe),yn=De.max,Sn=De.min,In=se.now,Rn=t.parseInt,wn=De.random,bn=Ae.reverse,En=po(t,"DataView"),Dn=po(t,"Map"),Pn=po(t,"Promise"),Tn=po(t,"Set"),xn=po(t,"WeakMap"),Mn=po(Pe,"create"),An=xn&&new xn,On={},kn=Bo(En),Vn=Bo(Dn),Nn=Bo(Pn),Ln=Bo(Tn),Un=Bo(xn),jn=We?We.prototype:o,Bn=jn?jn.valueOf:o,Fn=jn?jn.toString:o;function Hn(e){if(rc(e)&&!Ga(e)&&!(e instanceof Gn)){if(e instanceof Wn)return e;if(Le.call(e,"__wrapped__"))return Fo(e)}return new Wn(e)}var qn=function(){function e(){}return function(t){if(!nc(t))return{};if(Ze)return Ze(t);e.prototype=t;var n=new e;return e.prototype=o,n}}();function Kn(){}function Wn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=o}function Gn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=C,this.__views__=[]}function zn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Jn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Zn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Qn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Zn;++t<n;)this.add(e[t])}function Yn(e){var t=this.__data__=new Jn(e);this.size=t.size}function Xn(e,t){var n=Ga(e),r=!n&&Wa(e),i=!n&&!r&&Qa(e),o=!n&&!r&&!i&&dc(e),a=n||r||i||o,c=a?Xt(e.length,xe):[],s=c.length;for(var l in e)!t&&!Le.call(e,l)||a&&("length"==l||i&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||So(l,s))||c.push(l);return c}function $n(e){var t=e.length;return t?e[Qr(0,t-1)]:o}function er(e,t){return Lo(Mi(e),lr(t,0,e.length))}function tr(e){return Lo(Mi(e))}function nr(e,t,n){(n!==o&&!Ha(e[t],n)||n===o&&!(t in e))&&cr(e,t,n)}function rr(e,t,n){var r=e[t];Le.call(e,t)&&Ha(r,n)&&(n!==o||t in e)||cr(e,t,n)}function ir(e,t){for(var n=e.length;n--;)if(Ha(e[n][0],t))return n;return-1}function or(e,t,n,r){return pr(e,(function(e,i,o){t(r,e,n(e),o)})),r}function ar(e,t){return e&&Ai(t,Oc(t),e)}function cr(e,t,n){"__proto__"==t&&rt?rt(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function sr(e,t){for(var n=-1,i=t.length,a=r(i),c=null==e;++n<i;)a[n]=c?o:Pc(e,t[n]);return a}function lr(e,t,n){return e==e&&(n!==o&&(e=e<=n?e:n),t!==o&&(e=e>=t?e:t)),e}function ur(e,t,n,r,i,a){var c,s=1&t,l=2&t,u=4&t;if(n&&(c=i?n(e,r,i,a):n(e)),c!==o)return c;if(!nc(e))return e;var d=Ga(e);if(d){if(c=function(e){var t=e.length,n=new e.constructor(t);t&&"string"==typeof e[0]&&Le.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(e),!s)return Mi(e,c)}else{var f=Co(e),h=f==w||f==b;if(Qa(e))return bi(e,s);if(f==P||f==m||h&&!i){if(c=l||h?{}:mo(e),!s)return l?function(e,t){return Ai(e,go(e),t)}(e,function(e,t){return e&&Ai(t,kc(t),e)}(c,e)):function(e,t){return Ai(e,_o(e),t)}(e,ar(c,e))}else{if(!ut[f])return i?e:{};c=function(e,t,n){var r=e.constructor;switch(t){case V:return Ei(e);case S:case I:return new r(+e);case N:return function(e,t){var n=t?Ei(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case L:case U:case j:case B:case F:case H:case q:case K:case W:return Di(e,n);case E:return new r;case D:case A:return new r(e);case x:return function(e){var t=new e.constructor(e.source,ge.exec(e));return t.lastIndex=e.lastIndex,t}(e);case M:return new r;case O:return i=e,Bn?Pe(Bn.call(i)):{}}var i}(e,f,s)}}a||(a=new Yn);var p=a.get(e);if(p)return p;a.set(e,c),sc(e)?e.forEach((function(r){c.add(ur(r,t,n,r,e,a))})):ic(e)&&e.forEach((function(r,i){c.set(i,ur(r,t,n,i,e,a))}));var _=d?o:(u?l?ao:oo:l?kc:Oc)(e);return xt(_||e,(function(r,i){_&&(r=e[i=r]),rr(c,i,ur(r,t,n,i,e,a))})),c}function dr(e,t,n){var r=n.length;if(null==e)return!r;for(e=Pe(e);r--;){var i=n[r],a=t[i],c=e[i];if(c===o&&!(i in e)||!a(c))return!1}return!0}function fr(e,t,n){if("function"!=typeof e)throw new Me(a);return Oo((function(){e.apply(o,n)}),t)}function hr(e,t,n,r){var i=-1,o=kt,a=!0,c=e.length,s=[],l=t.length;if(!c)return s;n&&(t=Nt(t,en(n))),r?(o=Vt,a=!1):t.length>=200&&(o=nn,a=!1,t=new Qn(t));e:for(;++i<c;){var u=e[i],d=null==n?u:n(u);if(u=r||0!==u?u:0,a&&d==d){for(var f=l;f--;)if(t[f]===d)continue e;s.push(u)}else o(t,d,r)||s.push(u)}return s}Hn.templateSettings={escape:$,evaluate:ee,interpolate:te,variable:"",imports:{_:Hn}},Hn.prototype=Kn.prototype,Hn.prototype.constructor=Hn,Wn.prototype=qn(Kn.prototype),Wn.prototype.constructor=Wn,Gn.prototype=qn(Kn.prototype),Gn.prototype.constructor=Gn,zn.prototype.clear=function(){this.__data__=Mn?Mn(null):{},this.size=0},zn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},zn.prototype.get=function(e){var t=this.__data__;if(Mn){var n=t[e];return n===c?o:n}return Le.call(t,e)?t[e]:o},zn.prototype.has=function(e){var t=this.__data__;return Mn?t[e]!==o:Le.call(t,e)},zn.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Mn&&t===o?c:t,this},Jn.prototype.clear=function(){this.__data__=[],this.size=0},Jn.prototype.delete=function(e){var t=this.__data__,n=ir(t,e);return!(n<0)&&(n==t.length-1?t.pop():Ye.call(t,n,1),--this.size,!0)},Jn.prototype.get=function(e){var t=this.__data__,n=ir(t,e);return n<0?o:t[n][1]},Jn.prototype.has=function(e){return ir(this.__data__,e)>-1},Jn.prototype.set=function(e,t){var n=this.__data__,r=ir(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},Zn.prototype.clear=function(){this.size=0,this.__data__={hash:new zn,map:new(Dn||Jn),string:new zn}},Zn.prototype.delete=function(e){var t=fo(this,e).delete(e);return this.size-=t?1:0,t},Zn.prototype.get=function(e){return fo(this,e).get(e)},Zn.prototype.has=function(e){return fo(this,e).has(e)},Zn.prototype.set=function(e,t){var n=fo(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},Qn.prototype.add=Qn.prototype.push=function(e){return this.__data__.set(e,c),this},Qn.prototype.has=function(e){return this.__data__.has(e)},Yn.prototype.clear=function(){this.__data__=new Jn,this.size=0},Yn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Yn.prototype.get=function(e){return this.__data__.get(e)},Yn.prototype.has=function(e){return this.__data__.has(e)},Yn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Jn){var r=n.__data__;if(!Dn||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Zn(r)}return n.set(e,t),this.size=n.size,this};var pr=Vi(Ir),_r=Vi(Rr,!0);function gr(e,t){var n=!0;return pr(e,(function(e,r,i){return n=!!t(e,r,i)})),n}function Cr(e,t,n){for(var r=-1,i=e.length;++r<i;){var a=e[r],c=t(a);if(null!=c&&(s===o?c==c&&!uc(c):n(c,s)))var s=c,l=a}return l}function vr(e,t){var n=[];return pr(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n}function mr(e,t,n,r,i){var o=-1,a=e.length;for(n||(n=yo),i||(i=[]);++o<a;){var c=e[o];t>0&&n(c)?t>1?mr(c,t-1,n,r,i):Lt(i,c):r||(i[i.length]=c)}return i}var yr=Ni(),Sr=Ni(!0);function Ir(e,t){return e&&yr(e,t,Oc)}function Rr(e,t){return e&&Sr(e,t,Oc)}function wr(e,t){return Ot(t,(function(t){return $a(e[t])}))}function br(e,t){for(var n=0,r=(t=Si(t,e)).length;null!=e&&n<r;)e=e[jo(t[n++])];return n&&n==r?e:o}function Er(e,t,n){var r=t(e);return Ga(e)?r:Lt(r,n(e))}function Dr(e){return null==e?e===o?"[object Undefined]":"[object Null]":et&&et in Pe(e)?function(e){var t=Le.call(e,et),n=e[et];try{e[et]=o;var r=!0}catch(e){}var i=Be.call(e);r&&(t?e[et]=n:delete e[et]);return i}(e):function(e){return Be.call(e)}(e)}function Pr(e,t){return e>t}function Tr(e,t){return null!=e&&Le.call(e,t)}function xr(e,t){return null!=e&&t in Pe(e)}function Mr(e,t,n){for(var i=n?Vt:kt,a=e[0].length,c=e.length,s=c,l=r(c),u=1/0,d=[];s--;){var f=e[s];s&&t&&(f=Nt(f,en(t))),u=Sn(f.length,u),l[s]=!n&&(t||a>=120&&f.length>=120)?new Qn(s&&f):o}f=e[0];var h=-1,p=l[0];e:for(;++h<a&&d.length<u;){var _=f[h],g=t?t(_):_;if(_=n||0!==_?_:0,!(p?nn(p,g):i(d,g,n))){for(s=c;--s;){var C=l[s];if(!(C?nn(C,g):i(e[s],g,n)))continue e}p&&p.push(g),d.push(_)}}return d}function Ar(e,t,n){var r=null==(e=xo(e,t=Si(t,e)))?e:e[jo(Xo(t))];return null==r?o:Pt(r,e,n)}function Or(e){return rc(e)&&Dr(e)==m}function kr(e,t,n,r,i){return e===t||(null==e||null==t||!rc(e)&&!rc(t)?e!=e&&t!=t:function(e,t,n,r,i,a){var c=Ga(e),s=Ga(t),l=c?y:Co(e),u=s?y:Co(t),d=(l=l==m?P:l)==P,f=(u=u==m?P:u)==P,h=l==u;if(h&&Qa(e)){if(!Qa(t))return!1;c=!0,d=!1}if(h&&!d)return a||(a=new Yn),c||dc(e)?ro(e,t,n,r,i,a):function(e,t,n,r,i,o,a){switch(n){case N:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case V:return!(e.byteLength!=t.byteLength||!o(new Ge(e),new Ge(t)));case S:case I:case D:return Ha(+e,+t);case R:return e.name==t.name&&e.message==t.message;case x:case A:return e==t+"";case E:var c=un;case M:var s=1&r;if(c||(c=hn),e.size!=t.size&&!s)return!1;var l=a.get(e);if(l)return l==t;r|=2,a.set(e,t);var u=ro(c(e),c(t),r,i,o,a);return a.delete(e),u;case O:if(Bn)return Bn.call(e)==Bn.call(t)}return!1}(e,t,l,n,r,i,a);if(!(1&n)){var p=d&&Le.call(e,"__wrapped__"),_=f&&Le.call(t,"__wrapped__");if(p||_){var g=p?e.value():e,C=_?t.value():t;return a||(a=new Yn),i(g,C,n,r,a)}}if(!h)return!1;return a||(a=new Yn),function(e,t,n,r,i,a){var c=1&n,s=oo(e),l=s.length,u=oo(t),d=u.length;if(l!=d&&!c)return!1;var f=l;for(;f--;){var h=s[f];if(!(c?h in t:Le.call(t,h)))return!1}var p=a.get(e),_=a.get(t);if(p&&_)return p==t&&_==e;var g=!0;a.set(e,t),a.set(t,e);var C=c;for(;++f<l;){var v=e[h=s[f]],m=t[h];if(r)var y=c?r(m,v,h,t,e,a):r(v,m,h,e,t,a);if(!(y===o?v===m||i(v,m,n,r,a):y)){g=!1;break}C||(C="constructor"==h)}if(g&&!C){var S=e.constructor,I=t.constructor;S==I||!("constructor"in e)||!("constructor"in t)||"function"==typeof S&&S instanceof S&&"function"==typeof I&&I instanceof I||(g=!1)}return a.delete(e),a.delete(t),g}(e,t,n,r,i,a)}(e,t,n,r,kr,i))}function Vr(e,t,n,r){var i=n.length,a=i,c=!r;if(null==e)return!a;for(e=Pe(e);i--;){var s=n[i];if(c&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<a;){var l=(s=n[i])[0],u=e[l],d=s[1];if(c&&s[2]){if(u===o&&!(l in e))return!1}else{var f=new Yn;if(r)var h=r(u,d,l,e,t,f);if(!(h===o?kr(d,u,3,r,f):h))return!1}}return!0}function Nr(e){return!(!nc(e)||(t=e,je&&je in t))&&($a(e)?qe:me).test(Bo(e));var t}function Lr(e){return"function"==typeof e?e:null==e?os:"object"==i(e)?Ga(e)?qr(e[0],e[1]):Hr(e):ps(e)}function Ur(e){if(!Eo(e))return Zt(e);var t=[];for(var n in Pe(e))Le.call(e,n)&&"constructor"!=n&&t.push(n);return t}function jr(e){if(!nc(e))return function(e){var t=[];if(null!=e)for(var n in Pe(e))t.push(n);return t}(e);var t=Eo(e),n=[];for(var r in e)("constructor"!=r||!t&&Le.call(e,r))&&n.push(r);return n}function Br(e,t){return e<t}function Fr(e,t){var n=-1,i=Ja(e)?r(e.length):[];return pr(e,(function(e,r,o){i[++n]=t(e,r,o)})),i}function Hr(e){var t=ho(e);return 1==t.length&&t[0][2]?Po(t[0][0],t[0][1]):function(n){return n===e||Vr(n,e,t)}}function qr(e,t){return Ro(e)&&Do(t)?Po(jo(e),t):function(n){var r=Pc(n,e);return r===o&&r===t?Tc(n,e):kr(t,r,3)}}function Kr(e,t,n,r,i){e!==t&&yr(t,(function(a,c){if(i||(i=new Yn),nc(a))!function(e,t,n,r,i,a,c){var s=Mo(e,n),l=Mo(t,n),u=c.get(l);if(u)return void nr(e,n,u);var d=a?a(s,l,n+"",e,t,c):o,f=d===o;if(f){var h=Ga(l),p=!h&&Qa(l),_=!h&&!p&&dc(l);d=l,h||p||_?Ga(s)?d=s:Za(s)?d=Mi(s):p?(f=!1,d=bi(l,!0)):_?(f=!1,d=Di(l,!0)):d=[]:ac(l)||Wa(l)?(d=s,Wa(s)?d=mc(s):nc(s)&&!$a(s)||(d=mo(l))):f=!1}f&&(c.set(l,d),i(d,l,r,a,c),c.delete(l));nr(e,n,d)}(e,t,c,n,Kr,r,i);else{var s=r?r(Mo(e,c),a,c+"",e,t,i):o;s===o&&(s=a),nr(e,c,s)}}),kc)}function Wr(e,t){var n=e.length;if(n)return So(t+=t<0?n:0,n)?e[t]:o}function Gr(e,t,n){t=t.length?Nt(t,(function(e){return Ga(e)?function(t){return br(t,1===e.length?e[0]:e)}:e})):[os];var r=-1;t=Nt(t,en(uo()));var i=Fr(e,(function(e,n,i){var o=Nt(t,(function(t){return t(e)}));return{criteria:o,index:++r,value:e}}));return function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(i,(function(e,t){return function(e,t,n){var r=-1,i=e.criteria,o=t.criteria,a=i.length,c=n.length;for(;++r<a;){var s=Pi(i[r],o[r]);if(s)return r>=c?s:s*("desc"==n[r]?-1:1)}return e.index-t.index}(e,t,n)}))}function zr(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var a=t[r],c=br(e,a);n(c,a)&&ti(o,Si(a,e),c)}return o}function Jr(e,t,n,r){var i=r?Wt:Kt,o=-1,a=t.length,c=e;for(e===t&&(t=Mi(t)),n&&(c=Nt(e,en(n)));++o<a;)for(var s=0,l=t[o],u=n?n(l):l;(s=i(c,u,s,r))>-1;)c!==e&&Ye.call(c,s,1),Ye.call(e,s,1);return e}function Zr(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==o){var o=i;So(i)?Ye.call(e,i,1):hi(e,i)}}return e}function Qr(e,t){return e+Ct(wn()*(t-e+1))}function Yr(e,t){var n="";if(!e||t<1||t>_)return n;do{t%2&&(n+=e),(t=Ct(t/2))&&(e+=e)}while(t);return n}function Xr(e,t){return ko(To(e,t,os),e+"")}function $r(e){return $n(Hc(e))}function ei(e,t){var n=Hc(e);return Lo(n,lr(t,0,n.length))}function ti(e,t,n,r){if(!nc(e))return e;for(var i=-1,a=(t=Si(t,e)).length,c=a-1,s=e;null!=s&&++i<a;){var l=jo(t[i]),u=n;if("__proto__"===l||"constructor"===l||"prototype"===l)return e;if(i!=c){var d=s[l];(u=r?r(d,l,s):o)===o&&(u=nc(d)?d:So(t[i+1])?[]:{})}rr(s,l,u),s=s[l]}return e}var ni=An?function(e,t){return An.set(e,t),e}:os,ri=rt?function(e,t){return rt(e,"toString",{configurable:!0,enumerable:!1,value:ns(t),writable:!0})}:os;function ii(e){return Lo(Hc(e))}function oi(e,t,n){var i=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(n=n>o?o:n)<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var a=r(o);++i<o;)a[i]=e[i+t];return a}function ai(e,t){var n;return pr(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n}function ci(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t==t&&i<=2147483647){for(;r<i;){var o=r+i>>>1,a=e[o];null!==a&&!uc(a)&&(n?a<=t:a<t)?r=o+1:i=o}return i}return si(e,t,os,n)}function si(e,t,n,r){var i=0,a=null==e?0:e.length;if(0===a)return 0;for(var c=(t=n(t))!=t,s=null===t,l=uc(t),u=t===o;i<a;){var d=Ct((i+a)/2),f=n(e[d]),h=f!==o,p=null===f,_=f==f,g=uc(f);if(c)var C=r||_;else C=u?_&&(r||h):s?_&&h&&(r||!p):l?_&&h&&!p&&(r||!g):!p&&!g&&(r?f<=t:f<t);C?i=d+1:a=d}return Sn(a,4294967294)}function li(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n],c=t?t(a):a;if(!n||!Ha(c,s)){var s=c;o[i++]=0===a?0:a}}return o}function ui(e){return"number"==typeof e?e:uc(e)?g:+e}function di(e){if("string"==typeof e)return e;if(Ga(e))return Nt(e,di)+"";if(uc(e))return Fn?Fn.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function fi(e,t,n){var r=-1,i=kt,o=e.length,a=!0,c=[],s=c;if(n)a=!1,i=Vt;else if(o>=200){var l=t?null:Yi(e);if(l)return hn(l);a=!1,i=nn,s=new Qn}else s=t?[]:c;e:for(;++r<o;){var u=e[r],d=t?t(u):u;if(u=n||0!==u?u:0,a&&d==d){for(var f=s.length;f--;)if(s[f]===d)continue e;t&&s.push(d),c.push(u)}else i(s,d,n)||(s!==c&&s.push(d),c.push(u))}return c}function hi(e,t){return null==(e=xo(e,t=Si(t,e)))||delete e[jo(Xo(t))]}function pi(e,t,n,r){return ti(e,t,n(br(e,t)),r)}function _i(e,t,n,r){for(var i=e.length,o=r?i:-1;(r?o--:++o<i)&&t(e[o],o,e););return n?oi(e,r?0:o,r?o+1:i):oi(e,r?o+1:0,r?i:o)}function gi(e,t){var n=e;return n instanceof Gn&&(n=n.value()),Ut(t,(function(e,t){return t.func.apply(t.thisArg,Lt([e],t.args))}),n)}function Ci(e,t,n){var i=e.length;if(i<2)return i?fi(e[0]):[];for(var o=-1,a=r(i);++o<i;)for(var c=e[o],s=-1;++s<i;)s!=o&&(a[o]=hr(a[o]||c,e[s],t,n));return fi(mr(a,1),t,n)}function vi(e,t,n){for(var r=-1,i=e.length,a=t.length,c={};++r<i;){var s=r<a?t[r]:o;n(c,e[r],s)}return c}function mi(e){return Za(e)?e:[]}function yi(e){return"function"==typeof e?e:os}function Si(e,t){return Ga(e)?e:Ro(e,t)?[e]:Uo(yc(e))}var Ii=Xr;function Ri(e,t,n){var r=e.length;return n=n===o?r:n,!t&&n>=r?e:oi(e,t,n)}var wi=ot||function(e){return gt.clearTimeout(e)};function bi(e,t){if(t)return e.slice();var n=e.length,r=ze?ze(n):new e.constructor(n);return e.copy(r),r}function Ei(e){var t=new e.constructor(e.byteLength);return new Ge(t).set(new Ge(e)),t}function Di(e,t){var n=t?Ei(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Pi(e,t){if(e!==t){var n=e!==o,r=null===e,i=e==e,a=uc(e),c=t!==o,s=null===t,l=t==t,u=uc(t);if(!s&&!u&&!a&&e>t||a&&c&&l&&!s&&!u||r&&c&&l||!n&&l||!i)return 1;if(!r&&!a&&!u&&e<t||u&&n&&i&&!r&&!a||s&&n&&i||!c&&i||!l)return-1}return 0}function Ti(e,t,n,i){for(var o=-1,a=e.length,c=n.length,s=-1,l=t.length,u=yn(a-c,0),d=r(l+u),f=!i;++s<l;)d[s]=t[s];for(;++o<c;)(f||o<a)&&(d[n[o]]=e[o]);for(;u--;)d[s++]=e[o++];return d}function xi(e,t,n,i){for(var o=-1,a=e.length,c=-1,s=n.length,l=-1,u=t.length,d=yn(a-s,0),f=r(d+u),h=!i;++o<d;)f[o]=e[o];for(var p=o;++l<u;)f[p+l]=t[l];for(;++c<s;)(h||o<a)&&(f[p+n[c]]=e[o++]);return f}function Mi(e,t){var n=-1,i=e.length;for(t||(t=r(i));++n<i;)t[n]=e[n];return t}function Ai(e,t,n,r){var i=!n;n||(n={});for(var a=-1,c=t.length;++a<c;){var s=t[a],l=r?r(n[s],e[s],s,n,e):o;l===o&&(l=e[s]),i?cr(n,s,l):rr(n,s,l)}return n}function Oi(e,t){return function(n,r){var i=Ga(n)?Tt:or,o=t?t():{};return i(n,e,uo(r,2),o)}}function ki(e){return Xr((function(t,n){var r=-1,i=n.length,a=i>1?n[i-1]:o,c=i>2?n[2]:o;for(a=e.length>3&&"function"==typeof a?(i--,a):o,c&&Io(n[0],n[1],c)&&(a=i<3?o:a,i=1),t=Pe(t);++r<i;){var s=n[r];s&&e(t,s,r,a)}return t}))}function Vi(e,t){return function(n,r){if(null==n)return n;if(!Ja(n))return e(n,r);for(var i=n.length,o=t?i:-1,a=Pe(n);(t?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function Ni(e){return function(t,n,r){for(var i=-1,o=Pe(t),a=r(t),c=a.length;c--;){var s=a[e?c:++i];if(!1===n(o[s],s,o))break}return t}}function Li(e){return function(t){var n=ln(t=yc(t))?gn(t):o,r=n?n[0]:t.charAt(0),i=n?Ri(n,1).join(""):t.slice(1);return r[e]()+i}}function Ui(e){return function(t){return Ut($c(Wc(t).replace(tt,"")),e,"")}}function ji(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=qn(e.prototype),r=e.apply(n,t);return nc(r)?r:n}}function Bi(e){return function(t,n,r){var i=Pe(t);if(!Ja(t)){var a=uo(n,3);t=Oc(t),n=function(e){return a(i[e],e,i)}}var c=e(t,n,r);return c>-1?i[a?t[c]:c]:o}}function Fi(e){return io((function(t){var n=t.length,r=n,i=Wn.prototype.thru;for(e&&t.reverse();r--;){var c=t[r];if("function"!=typeof c)throw new Me(a);if(i&&!s&&"wrapper"==so(c))var s=new Wn([],!0)}for(r=s?r:n;++r<n;){var l=so(c=t[r]),u="wrapper"==l?co(c):o;s=u&&wo(u[0])&&424==u[1]&&!u[4].length&&1==u[9]?s[so(u[0])].apply(s,u[3]):1==c.length&&wo(c)?s[l]():s.thru(c)}return function(){var e=arguments,r=e[0];if(s&&1==e.length&&Ga(r))return s.plant(r).value();for(var i=0,o=n?t[i].apply(this,e):r;++i<n;)o=t[i].call(this,o);return o}}))}function Hi(e,t,n,i,a,c,s,l,u,d){var h=t&f,p=1&t,_=2&t,g=24&t,C=512&t,v=_?o:ji(e);return function f(){for(var m=arguments.length,y=r(m),S=m;S--;)y[S]=arguments[S];if(g)var I=lo(f),R=function(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}(y,I);if(i&&(y=Ti(y,i,a,g)),c&&(y=xi(y,c,s,g)),m-=R,g&&m<d){var w=fn(y,I);return Zi(e,t,Hi,f.placeholder,n,y,w,l,u,d-m)}var b=p?n:this,E=_?b[e]:e;return m=y.length,l?y=function(e,t){var n=e.length,r=Sn(t.length,n),i=Mi(e);for(;r--;){var a=t[r];e[r]=So(a,n)?i[a]:o}return e}(y,l):C&&m>1&&y.reverse(),h&&u<m&&(y.length=u),this&&this!==gt&&this instanceof f&&(E=v||ji(E)),E.apply(b,y)}}function qi(e,t){return function(n,r){return function(e,t,n,r){return Ir(e,(function(e,i,o){t(r,n(e),i,o)})),r}(n,e,t(r),{})}}function Ki(e,t){return function(n,r){var i;if(n===o&&r===o)return t;if(n!==o&&(i=n),r!==o){if(i===o)return r;"string"==typeof n||"string"==typeof r?(n=di(n),r=di(r)):(n=ui(n),r=ui(r)),i=e(n,r)}return i}}function Wi(e){return io((function(t){return t=Nt(t,en(uo())),Xr((function(n){var r=this;return e(t,(function(e){return Pt(e,r,n)}))}))}))}function Gi(e,t){var n=(t=t===o?" ":di(t)).length;if(n<2)return n?Yr(t,e):t;var r=Yr(t,_t(e/_n(t)));return ln(t)?Ri(gn(r),0,e).join(""):r.slice(0,e)}function zi(e){return function(t,n,i){return i&&"number"!=typeof i&&Io(t,n,i)&&(n=i=o),t=_c(t),n===o?(n=t,t=0):n=_c(n),function(e,t,n,i){for(var o=-1,a=yn(_t((t-e)/(n||1)),0),c=r(a);a--;)c[i?a:++o]=e,e+=n;return c}(t,n,i=i===o?t<n?1:-1:_c(i),e)}}function Ji(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=vc(t),n=vc(n)),e(t,n)}}function Zi(e,t,n,r,i,a,c,s,l,f){var h=8&t;t|=h?u:d,4&(t&=~(h?d:u))||(t&=-4);var p=[e,t,i,h?a:o,h?c:o,h?o:a,h?o:c,s,l,f],_=n.apply(o,p);return wo(e)&&Ao(_,p),_.placeholder=r,Vo(_,e,t)}function Qi(e){var t=De[e];return function(e,n){if(e=vc(e),(n=null==n?0:Sn(gc(n),292))&&St(e)){var r=(yc(e)+"e").split("e");return+((r=(yc(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}var Yi=Tn&&1/hn(new Tn([,-0]))[1]==p?function(e){return new Tn(e)}:us;function Xi(e){return function(t){var n=Co(t);return n==E?un(t):n==M?pn(t):function(e,t){return Nt(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function $i(e,t,n,i,c,p,_,g){var C=2&t;if(!C&&"function"!=typeof e)throw new Me(a);var v=i?i.length:0;if(v||(t&=-97,i=c=o),_=_===o?_:yn(gc(_),0),g=g===o?g:gc(g),v-=c?c.length:0,t&d){var m=i,y=c;i=c=o}var S=C?o:co(e),I=[e,t,n,i,c,m,y,p,_,g];if(S&&function(e,t){var n=e[1],r=t[1],i=n|r,o=i<131,a=r==f&&8==n||r==f&&n==h&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!o&&!a)return e;1&r&&(e[2]=t[2],i|=1&n?0:4);var c=t[3];if(c){var l=e[3];e[3]=l?Ti(l,c,t[4]):c,e[4]=l?fn(e[3],s):t[4]}(c=t[5])&&(l=e[5],e[5]=l?xi(l,c,t[6]):c,e[6]=l?fn(e[5],s):t[6]);(c=t[7])&&(e[7]=c);r&f&&(e[8]=null==e[8]?t[8]:Sn(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=i}(I,S),e=I[0],t=I[1],n=I[2],i=I[3],c=I[4],!(g=I[9]=I[9]===o?C?0:e.length:yn(I[9]-v,0))&&24&t&&(t&=-25),t&&1!=t)R=8==t||t==l?function(e,t,n){var i=ji(e);return function a(){for(var c=arguments.length,s=r(c),l=c,u=lo(a);l--;)s[l]=arguments[l];var d=c<3&&s[0]!==u&&s[c-1]!==u?[]:fn(s,u);return(c-=d.length)<n?Zi(e,t,Hi,a.placeholder,o,s,d,o,o,n-c):Pt(this&&this!==gt&&this instanceof a?i:e,this,s)}}(e,t,g):t!=u&&33!=t||c.length?Hi.apply(o,I):function(e,t,n,i){var o=1&t,a=ji(e);return function t(){for(var c=-1,s=arguments.length,l=-1,u=i.length,d=r(u+s),f=this&&this!==gt&&this instanceof t?a:e;++l<u;)d[l]=i[l];for(;s--;)d[l++]=arguments[++c];return Pt(f,o?n:this,d)}}(e,t,n,i);else var R=function(e,t,n){var r=1&t,i=ji(e);return function t(){return(this&&this!==gt&&this instanceof t?i:e).apply(r?n:this,arguments)}}(e,t,n);return Vo((S?ni:Ao)(R,I),e,t)}function eo(e,t,n,r){return e===o||Ha(e,ke[n])&&!Le.call(r,n)?t:e}function to(e,t,n,r,i,a){return nc(e)&&nc(t)&&(a.set(t,e),Kr(e,t,o,to,a),a.delete(t)),e}function no(e){return ac(e)?o:e}function ro(e,t,n,r,i,a){var c=1&n,s=e.length,l=t.length;if(s!=l&&!(c&&l>s))return!1;var u=a.get(e),d=a.get(t);if(u&&d)return u==t&&d==e;var f=-1,h=!0,p=2&n?new Qn:o;for(a.set(e,t),a.set(t,e);++f<s;){var _=e[f],g=t[f];if(r)var C=c?r(g,_,f,t,e,a):r(_,g,f,e,t,a);if(C!==o){if(C)continue;h=!1;break}if(p){if(!Bt(t,(function(e,t){if(!nn(p,t)&&(_===e||i(_,e,n,r,a)))return p.push(t)}))){h=!1;break}}else if(_!==g&&!i(_,g,n,r,a)){h=!1;break}}return a.delete(e),a.delete(t),h}function io(e){return ko(To(e,o,zo),e+"")}function oo(e){return Er(e,Oc,_o)}function ao(e){return Er(e,kc,go)}var co=An?function(e){return An.get(e)}:us;function so(e){for(var t=e.name+"",n=On[t],r=Le.call(On,t)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==e)return i.name}return t}function lo(e){return(Le.call(Hn,"placeholder")?Hn:e).placeholder}function uo(){var e=Hn.iteratee||as;return e=e===as?Lr:e,arguments.length?e(arguments[0],arguments[1]):e}function fo(e,t){var n,r,o=e.__data__;return("string"==(r=i(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?o["string"==typeof t?"string":"hash"]:o.map}function ho(e){for(var t=Oc(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,Do(i)]}return t}function po(e,t){var n=function(e,t){return null==e?o:e[t]}(e,t);return Nr(n)?n:o}var _o=vt?function(e){return null==e?[]:(e=Pe(e),Ot(vt(e),(function(t){return Qe.call(e,t)})))}:Cs,go=vt?function(e){for(var t=[];e;)Lt(t,_o(e)),e=Je(e);return t}:Cs,Co=Dr;function vo(e,t,n){for(var r=-1,i=(t=Si(t,e)).length,o=!1;++r<i;){var a=jo(t[r]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&tc(i)&&So(a,i)&&(Ga(e)||Wa(e))}function mo(e){return"function"!=typeof e.constructor||Eo(e)?{}:qn(Je(e))}function yo(e){return Ga(e)||Wa(e)||!!(Xe&&e&&e[Xe])}function So(e,t){var n=i(e);return!!(t=null==t?_:t)&&("number"==n||"symbol"!=n&&Se.test(e))&&e>-1&&e%1==0&&e<t}function Io(e,t,n){if(!nc(n))return!1;var r=i(t);return!!("number"==r?Ja(n)&&So(t,n.length):"string"==r&&t in n)&&Ha(n[t],e)}function Ro(e,t){if(Ga(e))return!1;var n=i(e);return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!uc(e))||(re.test(e)||!ne.test(e)||null!=t&&e in Pe(t))}function wo(e){var t=so(e),n=Hn[t];if("function"!=typeof n||!(t in Gn.prototype))return!1;if(e===n)return!0;var r=co(n);return!!r&&e===r[0]}(En&&Co(new En(new ArrayBuffer(1)))!=N||Dn&&Co(new Dn)!=E||Pn&&Co(Pn.resolve())!=T||Tn&&Co(new Tn)!=M||xn&&Co(new xn)!=k)&&(Co=function(e){var t=Dr(e),n=t==P?e.constructor:o,r=n?Bo(n):"";if(r)switch(r){case kn:return N;case Vn:return E;case Nn:return T;case Ln:return M;case Un:return k}return t});var bo=Ve?$a:vs;function Eo(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||ke)}function Do(e){return e==e&&!nc(e)}function Po(e,t){return function(n){return null!=n&&(n[e]===t&&(t!==o||e in Pe(n)))}}function To(e,t,n){return t=yn(t===o?e.length-1:t,0),function(){for(var i=arguments,o=-1,a=yn(i.length-t,0),c=r(a);++o<a;)c[o]=i[t+o];o=-1;for(var s=r(t+1);++o<t;)s[o]=i[o];return s[t]=n(c),Pt(e,this,s)}}function xo(e,t){return t.length<2?e:br(e,oi(t,0,-1))}function Mo(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var Ao=No(ni),Oo=pt||function(e,t){return gt.setTimeout(e,t)},ko=No(ri);function Vo(e,t,n){var r=t+"";return ko(e,function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(le,"{\n/* [wrapped with "+t+"] */\n")}(r,function(e,t){return xt(v,(function(n){var r="_."+n[0];t&n[1]&&!kt(e,r)&&e.push(r)})),e.sort()}(function(e){var t=e.match(ue);return t?t[1].split(de):[]}(r),n)))}function No(e){var t=0,n=0;return function(){var r=In(),i=16-(r-n);if(n=r,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(o,arguments)}}function Lo(e,t){var n=-1,r=e.length,i=r-1;for(t=t===o?r:t;++n<t;){var a=Qr(n,i),c=e[a];e[a]=e[n],e[n]=c}return e.length=t,e}var Uo=function(e){var t=Na(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(ie,(function(e,n,r,i){t.push(r?i.replace(pe,"$1"):n||e)})),t}));function jo(e){if("string"==typeof e||uc(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Bo(e){if(null!=e){try{return Ne.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Fo(e){if(e instanceof Gn)return e.clone();var t=new Wn(e.__wrapped__,e.__chain__);return t.__actions__=Mi(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Ho=Xr((function(e,t){return Za(e)?hr(e,mr(t,1,Za,!0)):[]})),qo=Xr((function(e,t){var n=Xo(t);return Za(n)&&(n=o),Za(e)?hr(e,mr(t,1,Za,!0),uo(n,2)):[]})),Ko=Xr((function(e,t){var n=Xo(t);return Za(n)&&(n=o),Za(e)?hr(e,mr(t,1,Za,!0),o,n):[]}));function Wo(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:gc(n);return i<0&&(i=yn(r+i,0)),qt(e,uo(t,3),i)}function Go(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r-1;return n!==o&&(i=gc(n),i=n<0?yn(r+i,0):Sn(i,r-1)),qt(e,uo(t,3),i,!0)}function zo(e){return(null==e?0:e.length)?mr(e,1):[]}function Jo(e){return e&&e.length?e[0]:o}var Zo=Xr((function(e){var t=Nt(e,mi);return t.length&&t[0]===e[0]?Mr(t):[]})),Qo=Xr((function(e){var t=Xo(e),n=Nt(e,mi);return t===Xo(n)?t=o:n.pop(),n.length&&n[0]===e[0]?Mr(n,uo(t,2)):[]})),Yo=Xr((function(e){var t=Xo(e),n=Nt(e,mi);return(t="function"==typeof t?t:o)&&n.pop(),n.length&&n[0]===e[0]?Mr(n,o,t):[]}));function Xo(e){var t=null==e?0:e.length;return t?e[t-1]:o}var $o=Xr(ea);function ea(e,t){return e&&e.length&&t&&t.length?Jr(e,t):e}var ta=io((function(e,t){var n=null==e?0:e.length,r=sr(e,t);return Zr(e,Nt(t,(function(e){return So(e,n)?+e:e})).sort(Pi)),r}));function na(e){return null==e?e:bn.call(e)}var ra=Xr((function(e){return fi(mr(e,1,Za,!0))})),ia=Xr((function(e){var t=Xo(e);return Za(t)&&(t=o),fi(mr(e,1,Za,!0),uo(t,2))})),oa=Xr((function(e){var t=Xo(e);return t="function"==typeof t?t:o,fi(mr(e,1,Za,!0),o,t)}));function aa(e){if(!e||!e.length)return[];var t=0;return e=Ot(e,(function(e){if(Za(e))return t=yn(e.length,t),!0})),Xt(t,(function(t){return Nt(e,Jt(t))}))}function ca(e,t){if(!e||!e.length)return[];var n=aa(e);return null==t?n:Nt(n,(function(e){return Pt(t,o,e)}))}var sa=Xr((function(e,t){return Za(e)?hr(e,t):[]})),la=Xr((function(e){return Ci(Ot(e,Za))})),ua=Xr((function(e){var t=Xo(e);return Za(t)&&(t=o),Ci(Ot(e,Za),uo(t,2))})),da=Xr((function(e){var t=Xo(e);return t="function"==typeof t?t:o,Ci(Ot(e,Za),o,t)})),fa=Xr(aa);var ha=Xr((function(e){var t=e.length,n=t>1?e[t-1]:o;return n="function"==typeof n?(e.pop(),n):o,ca(e,n)}));function pa(e){var t=Hn(e);return t.__chain__=!0,t}function _a(e,t){return t(e)}var ga=io((function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,i=function(t){return sr(t,e)};return!(t>1||this.__actions__.length)&&r instanceof Gn&&So(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:_a,args:[i],thisArg:o}),new Wn(r,this.__chain__).thru((function(e){return t&&!e.length&&e.push(o),e}))):this.thru(i)}));var Ca=Oi((function(e,t,n){Le.call(e,n)?++e[n]:cr(e,n,1)}));var va=Bi(Wo),ma=Bi(Go);function ya(e,t){return(Ga(e)?xt:pr)(e,uo(t,3))}function Sa(e,t){return(Ga(e)?Mt:_r)(e,uo(t,3))}var Ia=Oi((function(e,t,n){Le.call(e,n)?e[n].push(t):cr(e,n,[t])}));var Ra=Xr((function(e,t,n){var i=-1,o="function"==typeof t,a=Ja(e)?r(e.length):[];return pr(e,(function(e){a[++i]=o?Pt(t,e,n):Ar(e,t,n)})),a})),wa=Oi((function(e,t,n){cr(e,n,t)}));function ba(e,t){return(Ga(e)?Nt:Fr)(e,uo(t,3))}var Ea=Oi((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]}));var Da=Xr((function(e,t){if(null==e)return[];var n=t.length;return n>1&&Io(e,t[0],t[1])?t=[]:n>2&&Io(t[0],t[1],t[2])&&(t=[t[0]]),Gr(e,mr(t,1),[])})),Pa=dt||function(){return gt.Date.now()};function Ta(e,t,n){return t=n?o:t,t=e&&null==t?e.length:t,$i(e,f,o,o,o,o,t)}function xa(e,t){var n;if("function"!=typeof t)throw new Me(a);return e=gc(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=o),n}}var Ma=Xr((function(e,t,n){var r=1;if(n.length){var i=fn(n,lo(Ma));r|=u}return $i(e,r,t,n,i)})),Aa=Xr((function(e,t,n){var r=3;if(n.length){var i=fn(n,lo(Aa));r|=u}return $i(t,r,e,n,i)}));function Oa(e,t,n){var r,i,c,s,l,u,d=0,f=!1,h=!1,p=!0;if("function"!=typeof e)throw new Me(a);function _(t){var n=r,a=i;return r=i=o,d=t,s=e.apply(a,n)}function g(e){var n=e-u;return u===o||n>=t||n<0||h&&e-d>=c}function C(){var e=Pa();if(g(e))return v(e);l=Oo(C,function(e){var n=t-(e-u);return h?Sn(n,c-(e-d)):n}(e))}function v(e){return l=o,p&&r?_(e):(r=i=o,s)}function m(){var e=Pa(),n=g(e);if(r=arguments,i=this,u=e,n){if(l===o)return function(e){return d=e,l=Oo(C,t),f?_(e):s}(u);if(h)return wi(l),l=Oo(C,t),_(u)}return l===o&&(l=Oo(C,t)),s}return t=vc(t)||0,nc(n)&&(f=!!n.leading,c=(h="maxWait"in n)?yn(vc(n.maxWait)||0,t):c,p="trailing"in n?!!n.trailing:p),m.cancel=function(){l!==o&&wi(l),d=0,r=u=i=l=o},m.flush=function(){return l===o?s:v(Pa())},m}var ka=Xr((function(e,t){return fr(e,1,t)})),Va=Xr((function(e,t,n){return fr(e,vc(t)||0,n)}));function Na(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Me(a);var n=function n(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Na.Cache||Zn),n}function La(e){if("function"!=typeof e)throw new Me(a);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Na.Cache=Zn;var Ua=Ii((function(e,t){var n=(t=1==t.length&&Ga(t[0])?Nt(t[0],en(uo())):Nt(mr(t,1),en(uo()))).length;return Xr((function(r){for(var i=-1,o=Sn(r.length,n);++i<o;)r[i]=t[i].call(this,r[i]);return Pt(e,this,r)}))})),ja=Xr((function(e,t){var n=fn(t,lo(ja));return $i(e,u,o,t,n)})),Ba=Xr((function(e,t){var n=fn(t,lo(Ba));return $i(e,d,o,t,n)})),Fa=io((function(e,t){return $i(e,h,o,o,o,t)}));function Ha(e,t){return e===t||e!=e&&t!=t}var qa=Ji(Pr),Ka=Ji((function(e,t){return e>=t})),Wa=Or(function(){return arguments}())?Or:function(e){return rc(e)&&Le.call(e,"callee")&&!Qe.call(e,"callee")},Ga=r.isArray,za=It?en(It):function(e){return rc(e)&&Dr(e)==V};function Ja(e){return null!=e&&tc(e.length)&&!$a(e)}function Za(e){return rc(e)&&Ja(e)}var Qa=yt||vs,Ya=Rt?en(Rt):function(e){return rc(e)&&Dr(e)==I};function Xa(e){if(!rc(e))return!1;var t=Dr(e);return t==R||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!ac(e)}function $a(e){if(!nc(e))return!1;var t=Dr(e);return t==w||t==b||"[object AsyncFunction]"==t||"[object Proxy]"==t}function ec(e){return"number"==typeof e&&e==gc(e)}function tc(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=_}function nc(e){var t=i(e);return null!=e&&("object"==t||"function"==t)}function rc(e){return null!=e&&"object"==i(e)}var ic=wt?en(wt):function(e){return rc(e)&&Co(e)==E};function oc(e){return"number"==typeof e||rc(e)&&Dr(e)==D}function ac(e){if(!rc(e)||Dr(e)!=P)return!1;var t=Je(e);if(null===t)return!0;var n=Le.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Ne.call(n)==Fe}var cc=bt?en(bt):function(e){return rc(e)&&Dr(e)==x};var sc=Et?en(Et):function(e){return rc(e)&&Co(e)==M};function lc(e){return"string"==typeof e||!Ga(e)&&rc(e)&&Dr(e)==A}function uc(e){return"symbol"==i(e)||rc(e)&&Dr(e)==O}var dc=Dt?en(Dt):function(e){return rc(e)&&tc(e.length)&&!!lt[Dr(e)]};var fc=Ji(Br),hc=Ji((function(e,t){return e<=t}));function pc(e){if(!e)return[];if(Ja(e))return lc(e)?gn(e):Mi(e);if($e&&e[$e])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[$e]());var t=Co(e);return(t==E?un:t==M?hn:Hc)(e)}function _c(e){return e?(e=vc(e))===p||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function gc(e){var t=_c(e),n=t%1;return t==t?n?t-n:t:0}function Cc(e){return e?lr(gc(e),0,C):0}function vc(e){if("number"==typeof e)return e;if(uc(e))return g;if(nc(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=nc(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=$t(e);var n=ve.test(e);return n||ye.test(e)?ht(e.slice(2),n?2:8):Ce.test(e)?g:+e}function mc(e){return Ai(e,kc(e))}function yc(e){return null==e?"":di(e)}var Sc=ki((function(e,t){if(Eo(t)||Ja(t))Ai(t,Oc(t),e);else for(var n in t)Le.call(t,n)&&rr(e,n,t[n])})),Ic=ki((function(e,t){Ai(t,kc(t),e)})),Rc=ki((function(e,t,n,r){Ai(t,kc(t),e,r)})),wc=ki((function(e,t,n,r){Ai(t,Oc(t),e,r)})),bc=io(sr);var Ec=Xr((function(e,t){e=Pe(e);var n=-1,r=t.length,i=r>2?t[2]:o;for(i&&Io(t[0],t[1],i)&&(r=1);++n<r;)for(var a=t[n],c=kc(a),s=-1,l=c.length;++s<l;){var u=c[s],d=e[u];(d===o||Ha(d,ke[u])&&!Le.call(e,u))&&(e[u]=a[u])}return e})),Dc=Xr((function(e){return e.push(o,to),Pt(Nc,o,e)}));function Pc(e,t,n){var r=null==e?o:br(e,t);return r===o?n:r}function Tc(e,t){return null!=e&&vo(e,t,xr)}var xc=qi((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Be.call(t)),e[t]=n}),ns(os)),Mc=qi((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Be.call(t)),Le.call(e,t)?e[t].push(n):e[t]=[n]}),uo),Ac=Xr(Ar);function Oc(e){return Ja(e)?Xn(e):Ur(e)}function kc(e){return Ja(e)?Xn(e,!0):jr(e)}var Vc=ki((function(e,t,n){Kr(e,t,n)})),Nc=ki((function(e,t,n,r){Kr(e,t,n,r)})),Lc=io((function(e,t){var n={};if(null==e)return n;var r=!1;t=Nt(t,(function(t){return t=Si(t,e),r||(r=t.length>1),t})),Ai(e,ao(e),n),r&&(n=ur(n,7,no));for(var i=t.length;i--;)hi(n,t[i]);return n}));var Uc=io((function(e,t){return null==e?{}:function(e,t){return zr(e,t,(function(t,n){return Tc(e,n)}))}(e,t)}));function jc(e,t){if(null==e)return{};var n=Nt(ao(e),(function(e){return[e]}));return t=uo(t),zr(e,n,(function(e,n){return t(e,n[0])}))}var Bc=Xi(Oc),Fc=Xi(kc);function Hc(e){return null==e?[]:tn(e,Oc(e))}var qc=Ui((function(e,t,n){return t=t.toLowerCase(),e+(n?Kc(t):t)}));function Kc(e){return Xc(yc(e).toLowerCase())}function Wc(e){return(e=yc(e))&&e.replace(Ie,an).replace(nt,"")}var Gc=Ui((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),zc=Ui((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),Jc=Li("toLowerCase");var Zc=Ui((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}));var Qc=Ui((function(e,t,n){return e+(n?" ":"")+Xc(t)}));var Yc=Ui((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),Xc=Li("toUpperCase");function $c(e,t,n){return e=yc(e),(t=n?o:t)===o?function(e){return at.test(e)}(e)?function(e){return e.match(it)||[]}(e):function(e){return e.match(fe)||[]}(e):e.match(t)||[]}var es=Xr((function(e,t){try{return Pt(e,o,t)}catch(e){return Xa(e)?e:new be(e)}})),ts=io((function(e,t){return xt(t,(function(t){t=jo(t),cr(e,t,Ma(e[t],e))})),e}));function ns(e){return function(){return e}}var rs=Fi(),is=Fi(!0);function os(e){return e}function as(e){return Lr("function"==typeof e?e:ur(e,1))}var cs=Xr((function(e,t){return function(n){return Ar(n,e,t)}})),ss=Xr((function(e,t){return function(n){return Ar(e,n,t)}}));function ls(e,t,n){var r=Oc(t),i=wr(t,r);null!=n||nc(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=wr(t,Oc(t)));var o=!(nc(n)&&"chain"in n&&!n.chain),a=$a(e);return xt(i,(function(n){var r=t[n];e[n]=r,a&&(e.prototype[n]=function(){var t=this.__chain__;if(o||t){var n=e(this.__wrapped__);return(n.__actions__=Mi(this.__actions__)).push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,Lt([this.value()],arguments))})})),e}function us(){}var ds=Wi(Nt),fs=Wi(At),hs=Wi(Bt);function ps(e){return Ro(e)?Jt(jo(e)):function(e){return function(t){return br(t,e)}}(e)}var _s=zi(),gs=zi(!0);function Cs(){return[]}function vs(){return!1}var ms=Ki((function(e,t){return e+t}),0),ys=Qi("ceil"),Ss=Ki((function(e,t){return e/t}),1),Is=Qi("floor");var Rs,ws=Ki((function(e,t){return e*t}),1),bs=Qi("round"),Es=Ki((function(e,t){return e-t}),0);return Hn.after=function(e,t){if("function"!=typeof t)throw new Me(a);return e=gc(e),function(){if(--e<1)return t.apply(this,arguments)}},Hn.ary=Ta,Hn.assign=Sc,Hn.assignIn=Ic,Hn.assignInWith=Rc,Hn.assignWith=wc,Hn.at=bc,Hn.before=xa,Hn.bind=Ma,Hn.bindAll=ts,Hn.bindKey=Aa,Hn.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return Ga(e)?e:[e]},Hn.chain=pa,Hn.chunk=function(e,t,n){t=(n?Io(e,t,n):t===o)?1:yn(gc(t),0);var i=null==e?0:e.length;if(!i||t<1)return[];for(var a=0,c=0,s=r(_t(i/t));a<i;)s[c++]=oi(e,a,a+=t);return s},Hn.compact=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var o=e[t];o&&(i[r++]=o)}return i},Hn.concat=function(){var e=arguments.length;if(!e)return[];for(var t=r(e-1),n=arguments[0],i=e;i--;)t[i-1]=arguments[i];return Lt(Ga(n)?Mi(n):[n],mr(t,1))},Hn.cond=function(e){var t=null==e?0:e.length,n=uo();return e=t?Nt(e,(function(e){if("function"!=typeof e[1])throw new Me(a);return[n(e[0]),e[1]]})):[],Xr((function(n){for(var r=-1;++r<t;){var i=e[r];if(Pt(i[0],this,n))return Pt(i[1],this,n)}}))},Hn.conforms=function(e){return function(e){var t=Oc(e);return function(n){return dr(n,e,t)}}(ur(e,1))},Hn.constant=ns,Hn.countBy=Ca,Hn.create=function(e,t){var n=qn(e);return null==t?n:ar(n,t)},Hn.curry=function e(t,n,r){var i=$i(t,8,o,o,o,o,o,n=r?o:n);return i.placeholder=e.placeholder,i},Hn.curryRight=function e(t,n,r){var i=$i(t,l,o,o,o,o,o,n=r?o:n);return i.placeholder=e.placeholder,i},Hn.debounce=Oa,Hn.defaults=Ec,Hn.defaultsDeep=Dc,Hn.defer=ka,Hn.delay=Va,Hn.difference=Ho,Hn.differenceBy=qo,Hn.differenceWith=Ko,Hn.drop=function(e,t,n){var r=null==e?0:e.length;return r?oi(e,(t=n||t===o?1:gc(t))<0?0:t,r):[]},Hn.dropRight=function(e,t,n){var r=null==e?0:e.length;return r?oi(e,0,(t=r-(t=n||t===o?1:gc(t)))<0?0:t):[]},Hn.dropRightWhile=function(e,t){return e&&e.length?_i(e,uo(t,3),!0,!0):[]},Hn.dropWhile=function(e,t){return e&&e.length?_i(e,uo(t,3),!0):[]},Hn.fill=function(e,t,n,r){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&Io(e,t,n)&&(n=0,r=i),function(e,t,n,r){var i=e.length;for((n=gc(n))<0&&(n=-n>i?0:i+n),(r=r===o||r>i?i:gc(r))<0&&(r+=i),r=n>r?0:Cc(r);n<r;)e[n++]=t;return e}(e,t,n,r)):[]},Hn.filter=function(e,t){return(Ga(e)?Ot:vr)(e,uo(t,3))},Hn.flatMap=function(e,t){return mr(ba(e,t),1)},Hn.flatMapDeep=function(e,t){return mr(ba(e,t),p)},Hn.flatMapDepth=function(e,t,n){return n=n===o?1:gc(n),mr(ba(e,t),n)},Hn.flatten=zo,Hn.flattenDeep=function(e){return(null==e?0:e.length)?mr(e,p):[]},Hn.flattenDepth=function(e,t){return(null==e?0:e.length)?mr(e,t=t===o?1:gc(t)):[]},Hn.flip=function(e){return $i(e,512)},Hn.flow=rs,Hn.flowRight=is,Hn.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},Hn.functions=function(e){return null==e?[]:wr(e,Oc(e))},Hn.functionsIn=function(e){return null==e?[]:wr(e,kc(e))},Hn.groupBy=Ia,Hn.initial=function(e){return(null==e?0:e.length)?oi(e,0,-1):[]},Hn.intersection=Zo,Hn.intersectionBy=Qo,Hn.intersectionWith=Yo,Hn.invert=xc,Hn.invertBy=Mc,Hn.invokeMap=Ra,Hn.iteratee=as,Hn.keyBy=wa,Hn.keys=Oc,Hn.keysIn=kc,Hn.map=ba,Hn.mapKeys=function(e,t){var n={};return t=uo(t,3),Ir(e,(function(e,r,i){cr(n,t(e,r,i),e)})),n},Hn.mapValues=function(e,t){var n={};return t=uo(t,3),Ir(e,(function(e,r,i){cr(n,r,t(e,r,i))})),n},Hn.matches=function(e){return Hr(ur(e,1))},Hn.matchesProperty=function(e,t){return qr(e,ur(t,1))},Hn.memoize=Na,Hn.merge=Vc,Hn.mergeWith=Nc,Hn.method=cs,Hn.methodOf=ss,Hn.mixin=ls,Hn.negate=La,Hn.nthArg=function(e){return e=gc(e),Xr((function(t){return Wr(t,e)}))},Hn.omit=Lc,Hn.omitBy=function(e,t){return jc(e,La(uo(t)))},Hn.once=function(e){return xa(2,e)},Hn.orderBy=function(e,t,n,r){return null==e?[]:(Ga(t)||(t=null==t?[]:[t]),Ga(n=r?o:n)||(n=null==n?[]:[n]),Gr(e,t,n))},Hn.over=ds,Hn.overArgs=Ua,Hn.overEvery=fs,Hn.overSome=hs,Hn.partial=ja,Hn.partialRight=Ba,Hn.partition=Ea,Hn.pick=Uc,Hn.pickBy=jc,Hn.property=ps,Hn.propertyOf=function(e){return function(t){return null==e?o:br(e,t)}},Hn.pull=$o,Hn.pullAll=ea,Hn.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Jr(e,t,uo(n,2)):e},Hn.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?Jr(e,t,o,n):e},Hn.pullAt=ta,Hn.range=_s,Hn.rangeRight=gs,Hn.rearg=Fa,Hn.reject=function(e,t){return(Ga(e)?Ot:vr)(e,La(uo(t,3)))},Hn.remove=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],o=e.length;for(t=uo(t,3);++r<o;){var a=e[r];t(a,r,e)&&(n.push(a),i.push(r))}return Zr(e,i),n},Hn.rest=function(e,t){if("function"!=typeof e)throw new Me(a);return Xr(e,t=t===o?t:gc(t))},Hn.reverse=na,Hn.sampleSize=function(e,t,n){return t=(n?Io(e,t,n):t===o)?1:gc(t),(Ga(e)?er:ei)(e,t)},Hn.set=function(e,t,n){return null==e?e:ti(e,t,n)},Hn.setWith=function(e,t,n,r){return r="function"==typeof r?r:o,null==e?e:ti(e,t,n,r)},Hn.shuffle=function(e){return(Ga(e)?tr:ii)(e)},Hn.slice=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&Io(e,t,n)?(t=0,n=r):(t=null==t?0:gc(t),n=n===o?r:gc(n)),oi(e,t,n)):[]},Hn.sortBy=Da,Hn.sortedUniq=function(e){return e&&e.length?li(e):[]},Hn.sortedUniqBy=function(e,t){return e&&e.length?li(e,uo(t,2)):[]},Hn.split=function(e,t,n){return n&&"number"!=typeof n&&Io(e,t,n)&&(t=n=o),(n=n===o?C:n>>>0)?(e=yc(e))&&("string"==typeof t||null!=t&&!cc(t))&&!(t=di(t))&&ln(e)?Ri(gn(e),0,n):e.split(t,n):[]},Hn.spread=function(e,t){if("function"!=typeof e)throw new Me(a);return t=null==t?0:yn(gc(t),0),Xr((function(n){var r=n[t],i=Ri(n,0,t);return r&&Lt(i,r),Pt(e,this,i)}))},Hn.tail=function(e){var t=null==e?0:e.length;return t?oi(e,1,t):[]},Hn.take=function(e,t,n){return e&&e.length?oi(e,0,(t=n||t===o?1:gc(t))<0?0:t):[]},Hn.takeRight=function(e,t,n){var r=null==e?0:e.length;return r?oi(e,(t=r-(t=n||t===o?1:gc(t)))<0?0:t,r):[]},Hn.takeRightWhile=function(e,t){return e&&e.length?_i(e,uo(t,3),!1,!0):[]},Hn.takeWhile=function(e,t){return e&&e.length?_i(e,uo(t,3)):[]},Hn.tap=function(e,t){return t(e),e},Hn.throttle=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new Me(a);return nc(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Oa(e,t,{leading:r,maxWait:t,trailing:i})},Hn.thru=_a,Hn.toArray=pc,Hn.toPairs=Bc,Hn.toPairsIn=Fc,Hn.toPath=function(e){return Ga(e)?Nt(e,jo):uc(e)?[e]:Mi(Uo(yc(e)))},Hn.toPlainObject=mc,Hn.transform=function(e,t,n){var r=Ga(e),i=r||Qa(e)||dc(e);if(t=uo(t,4),null==n){var o=e&&e.constructor;n=i?r?new o:[]:nc(e)&&$a(o)?qn(Je(e)):{}}return(i?xt:Ir)(e,(function(e,r,i){return t(n,e,r,i)})),n},Hn.unary=function(e){return Ta(e,1)},Hn.union=ra,Hn.unionBy=ia,Hn.unionWith=oa,Hn.uniq=function(e){return e&&e.length?fi(e):[]},Hn.uniqBy=function(e,t){return e&&e.length?fi(e,uo(t,2)):[]},Hn.uniqWith=function(e,t){return t="function"==typeof t?t:o,e&&e.length?fi(e,o,t):[]},Hn.unset=function(e,t){return null==e||hi(e,t)},Hn.unzip=aa,Hn.unzipWith=ca,Hn.update=function(e,t,n){return null==e?e:pi(e,t,yi(n))},Hn.updateWith=function(e,t,n,r){return r="function"==typeof r?r:o,null==e?e:pi(e,t,yi(n),r)},Hn.values=Hc,Hn.valuesIn=function(e){return null==e?[]:tn(e,kc(e))},Hn.without=sa,Hn.words=$c,Hn.wrap=function(e,t){return ja(yi(t),e)},Hn.xor=la,Hn.xorBy=ua,Hn.xorWith=da,Hn.zip=fa,Hn.zipObject=function(e,t){return vi(e||[],t||[],rr)},Hn.zipObjectDeep=function(e,t){return vi(e||[],t||[],ti)},Hn.zipWith=ha,Hn.entries=Bc,Hn.entriesIn=Fc,Hn.extend=Ic,Hn.extendWith=Rc,ls(Hn,Hn),Hn.add=ms,Hn.attempt=es,Hn.camelCase=qc,Hn.capitalize=Kc,Hn.ceil=ys,Hn.clamp=function(e,t,n){return n===o&&(n=t,t=o),n!==o&&(n=(n=vc(n))==n?n:0),t!==o&&(t=(t=vc(t))==t?t:0),lr(vc(e),t,n)},Hn.clone=function(e){return ur(e,4)},Hn.cloneDeep=function(e){return ur(e,5)},Hn.cloneDeepWith=function(e,t){return ur(e,5,t="function"==typeof t?t:o)},Hn.cloneWith=function(e,t){return ur(e,4,t="function"==typeof t?t:o)},Hn.conformsTo=function(e,t){return null==t||dr(e,t,Oc(t))},Hn.deburr=Wc,Hn.defaultTo=function(e,t){return null==e||e!=e?t:e},Hn.divide=Ss,Hn.endsWith=function(e,t,n){e=yc(e),t=di(t);var r=e.length,i=n=n===o?r:lr(gc(n),0,r);return(n-=t.length)>=0&&e.slice(n,i)==t},Hn.eq=Ha,Hn.escape=function(e){return(e=yc(e))&&X.test(e)?e.replace(Q,cn):e},Hn.escapeRegExp=function(e){return(e=yc(e))&&ae.test(e)?e.replace(oe,"\\$&"):e},Hn.every=function(e,t,n){var r=Ga(e)?At:gr;return n&&Io(e,t,n)&&(t=o),r(e,uo(t,3))},Hn.find=va,Hn.findIndex=Wo,Hn.findKey=function(e,t){return Ht(e,uo(t,3),Ir)},Hn.findLast=ma,Hn.findLastIndex=Go,Hn.findLastKey=function(e,t){return Ht(e,uo(t,3),Rr)},Hn.floor=Is,Hn.forEach=ya,Hn.forEachRight=Sa,Hn.forIn=function(e,t){return null==e?e:yr(e,uo(t,3),kc)},Hn.forInRight=function(e,t){return null==e?e:Sr(e,uo(t,3),kc)},Hn.forOwn=function(e,t){return e&&Ir(e,uo(t,3))},Hn.forOwnRight=function(e,t){return e&&Rr(e,uo(t,3))},Hn.get=Pc,Hn.gt=qa,Hn.gte=Ka,Hn.has=function(e,t){return null!=e&&vo(e,t,Tr)},Hn.hasIn=Tc,Hn.head=Jo,Hn.identity=os,Hn.includes=function(e,t,n,r){e=Ja(e)?e:Hc(e),n=n&&!r?gc(n):0;var i=e.length;return n<0&&(n=yn(i+n,0)),lc(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&Kt(e,t,n)>-1},Hn.indexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:gc(n);return i<0&&(i=yn(r+i,0)),Kt(e,t,i)},Hn.inRange=function(e,t,n){return t=_c(t),n===o?(n=t,t=0):n=_c(n),function(e,t,n){return e>=Sn(t,n)&&e<yn(t,n)}(e=vc(e),t,n)},Hn.invoke=Ac,Hn.isArguments=Wa,Hn.isArray=Ga,Hn.isArrayBuffer=za,Hn.isArrayLike=Ja,Hn.isArrayLikeObject=Za,Hn.isBoolean=function(e){return!0===e||!1===e||rc(e)&&Dr(e)==S},Hn.isBuffer=Qa,Hn.isDate=Ya,Hn.isElement=function(e){return rc(e)&&1===e.nodeType&&!ac(e)},Hn.isEmpty=function(e){if(null==e)return!0;if(Ja(e)&&(Ga(e)||"string"==typeof e||"function"==typeof e.splice||Qa(e)||dc(e)||Wa(e)))return!e.length;var t=Co(e);if(t==E||t==M)return!e.size;if(Eo(e))return!Ur(e).length;for(var n in e)if(Le.call(e,n))return!1;return!0},Hn.isEqual=function(e,t){return kr(e,t)},Hn.isEqualWith=function(e,t,n){var r=(n="function"==typeof n?n:o)?n(e,t):o;return r===o?kr(e,t,o,n):!!r},Hn.isError=Xa,Hn.isFinite=function(e){return"number"==typeof e&&St(e)},Hn.isFunction=$a,Hn.isInteger=ec,Hn.isLength=tc,Hn.isMap=ic,Hn.isMatch=function(e,t){return e===t||Vr(e,t,ho(t))},Hn.isMatchWith=function(e,t,n){return n="function"==typeof n?n:o,Vr(e,t,ho(t),n)},Hn.isNaN=function(e){return oc(e)&&e!=+e},Hn.isNative=function(e){if(bo(e))throw new be("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Nr(e)},Hn.isNil=function(e){return null==e},Hn.isNull=function(e){return null===e},Hn.isNumber=oc,Hn.isObject=nc,Hn.isObjectLike=rc,Hn.isPlainObject=ac,Hn.isRegExp=cc,Hn.isSafeInteger=function(e){return ec(e)&&e>=-9007199254740991&&e<=_},Hn.isSet=sc,Hn.isString=lc,Hn.isSymbol=uc,Hn.isTypedArray=dc,Hn.isUndefined=function(e){return e===o},Hn.isWeakMap=function(e){return rc(e)&&Co(e)==k},Hn.isWeakSet=function(e){return rc(e)&&"[object WeakSet]"==Dr(e)},Hn.join=function(e,t){return null==e?"":Ft.call(e,t)},Hn.kebabCase=Gc,Hn.last=Xo,Hn.lastIndexOf=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r;return n!==o&&(i=(i=gc(n))<0?yn(r+i,0):Sn(i,r-1)),t==t?function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}(e,t,i):qt(e,Gt,i,!0)},Hn.lowerCase=zc,Hn.lowerFirst=Jc,Hn.lt=fc,Hn.lte=hc,Hn.max=function(e){return e&&e.length?Cr(e,os,Pr):o},Hn.maxBy=function(e,t){return e&&e.length?Cr(e,uo(t,2),Pr):o},Hn.mean=function(e){return zt(e,os)},Hn.meanBy=function(e,t){return zt(e,uo(t,2))},Hn.min=function(e){return e&&e.length?Cr(e,os,Br):o},Hn.minBy=function(e,t){return e&&e.length?Cr(e,uo(t,2),Br):o},Hn.stubArray=Cs,Hn.stubFalse=vs,Hn.stubObject=function(){return{}},Hn.stubString=function(){return""},Hn.stubTrue=function(){return!0},Hn.multiply=ws,Hn.nth=function(e,t){return e&&e.length?Wr(e,gc(t)):o},Hn.noConflict=function(){return gt._===this&&(gt._=He),this},Hn.noop=us,Hn.now=Pa,Hn.pad=function(e,t,n){e=yc(e);var r=(t=gc(t))?_n(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return Gi(Ct(i),n)+e+Gi(_t(i),n)},Hn.padEnd=function(e,t,n){e=yc(e);var r=(t=gc(t))?_n(e):0;return t&&r<t?e+Gi(t-r,n):e},Hn.padStart=function(e,t,n){e=yc(e);var r=(t=gc(t))?_n(e):0;return t&&r<t?Gi(t-r,n)+e:e},Hn.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),Rn(yc(e).replace(ce,""),t||0)},Hn.random=function(e,t,n){if(n&&"boolean"!=typeof n&&Io(e,t,n)&&(t=n=o),n===o&&("boolean"==typeof t?(n=t,t=o):"boolean"==typeof e&&(n=e,e=o)),e===o&&t===o?(e=0,t=1):(e=_c(e),t===o?(t=e,e=0):t=_c(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var i=wn();return Sn(e+i*(t-e+ft("1e-"+((i+"").length-1))),t)}return Qr(e,t)},Hn.reduce=function(e,t,n){var r=Ga(e)?Ut:Qt,i=arguments.length<3;return r(e,uo(t,4),n,i,pr)},Hn.reduceRight=function(e,t,n){var r=Ga(e)?jt:Qt,i=arguments.length<3;return r(e,uo(t,4),n,i,_r)},Hn.repeat=function(e,t,n){return t=(n?Io(e,t,n):t===o)?1:gc(t),Yr(yc(e),t)},Hn.replace=function(){var e=arguments,t=yc(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Hn.result=function(e,t,n){var r=-1,i=(t=Si(t,e)).length;for(i||(i=1,e=o);++r<i;){var a=null==e?o:e[jo(t[r])];a===o&&(r=i,a=n),e=$a(a)?a.call(e):a}return e},Hn.round=bs,Hn.runInContext=e,Hn.sample=function(e){return(Ga(e)?$n:$r)(e)},Hn.size=function(e){if(null==e)return 0;if(Ja(e))return lc(e)?_n(e):e.length;var t=Co(e);return t==E||t==M?e.size:Ur(e).length},Hn.snakeCase=Zc,Hn.some=function(e,t,n){var r=Ga(e)?Bt:ai;return n&&Io(e,t,n)&&(t=o),r(e,uo(t,3))},Hn.sortedIndex=function(e,t){return ci(e,t)},Hn.sortedIndexBy=function(e,t,n){return si(e,t,uo(n,2))},Hn.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var r=ci(e,t);if(r<n&&Ha(e[r],t))return r}return-1},Hn.sortedLastIndex=function(e,t){return ci(e,t,!0)},Hn.sortedLastIndexBy=function(e,t,n){return si(e,t,uo(n,2),!0)},Hn.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var n=ci(e,t,!0)-1;if(Ha(e[n],t))return n}return-1},Hn.startCase=Qc,Hn.startsWith=function(e,t,n){return e=yc(e),n=null==n?0:lr(gc(n),0,e.length),t=di(t),e.slice(n,n+t.length)==t},Hn.subtract=Es,Hn.sum=function(e){return e&&e.length?Yt(e,os):0},Hn.sumBy=function(e,t){return e&&e.length?Yt(e,uo(t,2)):0},Hn.template=function(e,t,n){var r=Hn.templateSettings;n&&Io(e,t,n)&&(t=o),e=yc(e),t=Rc({},t,r,eo);var i,a,c=Rc({},t.imports,r.imports,eo),s=Oc(c),l=tn(c,s),u=0,d=t.interpolate||Re,f="__p += '",h=Te((t.escape||Re).source+"|"+d.source+"|"+(d===te?_e:Re).source+"|"+(t.evaluate||Re).source+"|$","g"),p="//# sourceURL="+(Le.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++st+"]")+"\n";e.replace(h,(function(t,n,r,o,c,s){return r||(r=o),f+=e.slice(u,s).replace(we,sn),n&&(i=!0,f+="' +\n__e("+n+") +\n'"),c&&(a=!0,f+="';\n"+c+";\n__p += '"),r&&(f+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),u=s+t.length,t})),f+="';\n";var _=Le.call(t,"variable")&&t.variable;if(_){if(he.test(_))throw new be("Invalid `variable` option passed into `_.template`")}else f="with (obj) {\n"+f+"\n}\n";f=(a?f.replace(G,""):f).replace(z,"$1").replace(J,"$1;"),f="function("+(_||"obj")+") {\n"+(_?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var g=es((function(){return Ee(s,p+"return "+f).apply(o,l)}));if(g.source=f,Xa(g))throw g;return g},Hn.times=function(e,t){if((e=gc(e))<1||e>_)return[];var n=C,r=Sn(e,C);t=uo(t),e-=C;for(var i=Xt(r,t);++n<e;)t(n);return i},Hn.toFinite=_c,Hn.toInteger=gc,Hn.toLength=Cc,Hn.toLower=function(e){return yc(e).toLowerCase()},Hn.toNumber=vc,Hn.toSafeInteger=function(e){return e?lr(gc(e),-9007199254740991,_):0===e?e:0},Hn.toString=yc,Hn.toUpper=function(e){return yc(e).toUpperCase()},Hn.trim=function(e,t,n){if((e=yc(e))&&(n||t===o))return $t(e);if(!e||!(t=di(t)))return e;var r=gn(e),i=gn(t);return Ri(r,rn(r,i),on(r,i)+1).join("")},Hn.trimEnd=function(e,t,n){if((e=yc(e))&&(n||t===o))return e.slice(0,Cn(e)+1);if(!e||!(t=di(t)))return e;var r=gn(e);return Ri(r,0,on(r,gn(t))+1).join("")},Hn.trimStart=function(e,t,n){if((e=yc(e))&&(n||t===o))return e.replace(ce,"");if(!e||!(t=di(t)))return e;var r=gn(e);return Ri(r,rn(r,gn(t))).join("")},Hn.truncate=function(e,t){var n=30,r="...";if(nc(t)){var i="separator"in t?t.separator:i;n="length"in t?gc(t.length):n,r="omission"in t?di(t.omission):r}var a=(e=yc(e)).length;if(ln(e)){var c=gn(e);a=c.length}if(n>=a)return e;var s=n-_n(r);if(s<1)return r;var l=c?Ri(c,0,s).join(""):e.slice(0,s);if(i===o)return l+r;if(c&&(s+=l.length-s),cc(i)){if(e.slice(s).search(i)){var u,d=l;for(i.global||(i=Te(i.source,yc(ge.exec(i))+"g")),i.lastIndex=0;u=i.exec(d);)var f=u.index;l=l.slice(0,f===o?s:f)}}else if(e.indexOf(di(i),s)!=s){var h=l.lastIndexOf(i);h>-1&&(l=l.slice(0,h))}return l+r},Hn.unescape=function(e){return(e=yc(e))&&Y.test(e)?e.replace(Z,vn):e},Hn.uniqueId=function(e){var t=++Ue;return yc(e)+t},Hn.upperCase=Yc,Hn.upperFirst=Xc,Hn.each=ya,Hn.eachRight=Sa,Hn.first=Jo,ls(Hn,(Rs={},Ir(Hn,(function(e,t){Le.call(Hn.prototype,t)||(Rs[t]=e)})),Rs),{chain:!1}),Hn.VERSION="4.17.21",xt(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Hn[e].placeholder=Hn})),xt(["drop","take"],(function(e,t){Gn.prototype[e]=function(n){n=n===o?1:yn(gc(n),0);var r=this.__filtered__&&!t?new Gn(this):this.clone();return r.__filtered__?r.__takeCount__=Sn(n,r.__takeCount__):r.__views__.push({size:Sn(n,C),type:e+(r.__dir__<0?"Right":"")}),r},Gn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),xt(["filter","map","takeWhile"],(function(e,t){var n=t+1,r=1==n||3==n;Gn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:uo(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}})),xt(["head","last"],(function(e,t){var n="take"+(t?"Right":"");Gn.prototype[e]=function(){return this[n](1).value()[0]}})),xt(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");Gn.prototype[e]=function(){return this.__filtered__?new Gn(this):this[n](1)}})),Gn.prototype.compact=function(){return this.filter(os)},Gn.prototype.find=function(e){return this.filter(e).head()},Gn.prototype.findLast=function(e){return this.reverse().find(e)},Gn.prototype.invokeMap=Xr((function(e,t){return"function"==typeof e?new Gn(this):this.map((function(n){return Ar(n,e,t)}))})),Gn.prototype.reject=function(e){return this.filter(La(uo(e)))},Gn.prototype.slice=function(e,t){e=gc(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Gn(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==o&&(n=(t=gc(t))<0?n.dropRight(-t):n.take(t-e)),n)},Gn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Gn.prototype.toArray=function(){return this.take(C)},Ir(Gn.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),i=Hn[r?"take"+("last"==t?"Right":""):t],a=r||/^find/.test(t);i&&(Hn.prototype[t]=function(){var t=this.__wrapped__,c=r?[1]:arguments,s=t instanceof Gn,l=c[0],u=s||Ga(t),d=function(e){var t=i.apply(Hn,Lt([e],c));return r&&f?t[0]:t};u&&n&&"function"==typeof l&&1!=l.length&&(s=u=!1);var f=this.__chain__,h=!!this.__actions__.length,p=a&&!f,_=s&&!h;if(!a&&u){t=_?t:new Gn(this);var g=e.apply(t,c);return g.__actions__.push({func:_a,args:[d],thisArg:o}),new Wn(g,f)}return p&&_?e.apply(this,c):(g=this.thru(d),p?r?g.value()[0]:g.value():g)})})),xt(["pop","push","shift","sort","splice","unshift"],(function(e){var t=Ae[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);Hn.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply(Ga(i)?i:[],e)}return this[n]((function(n){return t.apply(Ga(n)?n:[],e)}))}})),Ir(Gn.prototype,(function(e,t){var n=Hn[t];if(n){var r=n.name+"";Le.call(On,r)||(On[r]=[]),On[r].push({name:t,func:n})}})),On[Hi(o,2).name]=[{name:"wrapper",func:o}],Gn.prototype.clone=function(){var e=new Gn(this.__wrapped__);return e.__actions__=Mi(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Mi(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Mi(this.__views__),e},Gn.prototype.reverse=function(){if(this.__filtered__){var e=new Gn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Gn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=Ga(e),r=t<0,i=n?e.length:0,o=function(e,t,n){var r=-1,i=n.length;for(;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=Sn(t,e+a);break;case"takeRight":e=yn(e,t-a)}}return{start:e,end:t}}(0,i,this.__views__),a=o.start,c=o.end,s=c-a,l=r?c:a-1,u=this.__iteratees__,d=u.length,f=0,h=Sn(s,this.__takeCount__);if(!n||!r&&i==s&&h==s)return gi(e,this.__actions__);var p=[];e:for(;s--&&f<h;){for(var _=-1,g=e[l+=t];++_<d;){var C=u[_],v=C.iteratee,m=C.type,y=v(g);if(2==m)g=y;else if(!y){if(1==m)continue e;break e}}p[f++]=g}return p},Hn.prototype.at=ga,Hn.prototype.chain=function(){return pa(this)},Hn.prototype.commit=function(){return new Wn(this.value(),this.__chain__)},Hn.prototype.next=function(){this.__values__===o&&(this.__values__=pc(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?o:this.__values__[this.__index__++]}},Hn.prototype.plant=function(e){for(var t,n=this;n instanceof Kn;){var r=Fo(n);r.__index__=0,r.__values__=o,t?i.__wrapped__=r:t=r;var i=r;n=n.__wrapped__}return i.__wrapped__=e,t},Hn.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Gn){var t=e;return this.__actions__.length&&(t=new Gn(this)),(t=t.reverse()).__actions__.push({func:_a,args:[na],thisArg:o}),new Wn(t,this.__chain__)}return this.thru(na)},Hn.prototype.toJSON=Hn.prototype.valueOf=Hn.prototype.value=function(){return gi(this.__wrapped__,this.__actions__)},Hn.prototype.first=Hn.prototype.head,$e&&(Hn.prototype[$e]=function(){return this}),Hn}();"object"==i(n.amdO)&&n.amdO?(gt._=mn,(r=function(){return mn}.call(t,n,t,e))===o||(e.exports=r)):vt?((vt.exports=mn)._=mn,Ct._=mn):gt._=mn}.call(this)},5100:e=>{e.exports=function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=4)}([function(e,t){var n={utf8:{stringToBytes:function(e){return n.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(n.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t},bytesToString:function(e){for(var t=[],n=0;n<e.length;n++)t.push(String.fromCharCode(e[n]));return t.join("")}}};e.exports=n},function(e,t,n){!function(){var t=n(2),r=n(0).utf8,i=n(3),o=n(0).bin,a=function e(n,a){n.constructor==String?n=a&&"binary"===a.encoding?o.stringToBytes(n):r.stringToBytes(n):i(n)?n=Array.prototype.slice.call(n,0):Array.isArray(n)||n.constructor===Uint8Array||(n=n.toString());for(var c=t.bytesToWords(n),s=8*n.length,l=1732584193,u=-271733879,d=-1732584194,f=271733878,h=0;h<c.length;h++)c[h]=16711935&(c[h]<<8|c[h]>>>24)|4278255360&(c[h]<<24|c[h]>>>8);c[s>>>5]|=128<<s%32,c[14+(s+64>>>9<<4)]=s;var p=e._ff,_=e._gg,g=e._hh,C=e._ii;for(h=0;h<c.length;h+=16){var v=l,m=u,y=d,S=f;l=p(l,u,d,f,c[h+0],7,-680876936),f=p(f,l,u,d,c[h+1],12,-389564586),d=p(d,f,l,u,c[h+2],17,606105819),u=p(u,d,f,l,c[h+3],22,-1044525330),l=p(l,u,d,f,c[h+4],7,-176418897),f=p(f,l,u,d,c[h+5],12,1200080426),d=p(d,f,l,u,c[h+6],17,-1473231341),u=p(u,d,f,l,c[h+7],22,-45705983),l=p(l,u,d,f,c[h+8],7,1770035416),f=p(f,l,u,d,c[h+9],12,-1958414417),d=p(d,f,l,u,c[h+10],17,-42063),u=p(u,d,f,l,c[h+11],22,-1990404162),l=p(l,u,d,f,c[h+12],7,1804603682),f=p(f,l,u,d,c[h+13],12,-40341101),d=p(d,f,l,u,c[h+14],17,-1502002290),l=_(l,u=p(u,d,f,l,c[h+15],22,1236535329),d,f,c[h+1],5,-165796510),f=_(f,l,u,d,c[h+6],9,-1069501632),d=_(d,f,l,u,c[h+11],14,643717713),u=_(u,d,f,l,c[h+0],20,-373897302),l=_(l,u,d,f,c[h+5],5,-701558691),f=_(f,l,u,d,c[h+10],9,38016083),d=_(d,f,l,u,c[h+15],14,-660478335),u=_(u,d,f,l,c[h+4],20,-405537848),l=_(l,u,d,f,c[h+9],5,568446438),f=_(f,l,u,d,c[h+14],9,-1019803690),d=_(d,f,l,u,c[h+3],14,-187363961),u=_(u,d,f,l,c[h+8],20,1163531501),l=_(l,u,d,f,c[h+13],5,-1444681467),f=_(f,l,u,d,c[h+2],9,-51403784),d=_(d,f,l,u,c[h+7],14,1735328473),l=g(l,u=_(u,d,f,l,c[h+12],20,-1926607734),d,f,c[h+5],4,-378558),f=g(f,l,u,d,c[h+8],11,-2022574463),d=g(d,f,l,u,c[h+11],16,1839030562),u=g(u,d,f,l,c[h+14],23,-35309556),l=g(l,u,d,f,c[h+1],4,-1530992060),f=g(f,l,u,d,c[h+4],11,1272893353),d=g(d,f,l,u,c[h+7],16,-155497632),u=g(u,d,f,l,c[h+10],23,-1094730640),l=g(l,u,d,f,c[h+13],4,681279174),f=g(f,l,u,d,c[h+0],11,-358537222),d=g(d,f,l,u,c[h+3],16,-722521979),u=g(u,d,f,l,c[h+6],23,76029189),l=g(l,u,d,f,c[h+9],4,-640364487),f=g(f,l,u,d,c[h+12],11,-421815835),d=g(d,f,l,u,c[h+15],16,530742520),l=C(l,u=g(u,d,f,l,c[h+2],23,-995338651),d,f,c[h+0],6,-198630844),f=C(f,l,u,d,c[h+7],10,1126891415),d=C(d,f,l,u,c[h+14],15,-1416354905),u=C(u,d,f,l,c[h+5],21,-57434055),l=C(l,u,d,f,c[h+12],6,1700485571),f=C(f,l,u,d,c[h+3],10,-1894986606),d=C(d,f,l,u,c[h+10],15,-1051523),u=C(u,d,f,l,c[h+1],21,-2054922799),l=C(l,u,d,f,c[h+8],6,1873313359),f=C(f,l,u,d,c[h+15],10,-30611744),d=C(d,f,l,u,c[h+6],15,-1560198380),u=C(u,d,f,l,c[h+13],21,1309151649),l=C(l,u,d,f,c[h+4],6,-145523070),f=C(f,l,u,d,c[h+11],10,-1120210379),d=C(d,f,l,u,c[h+2],15,718787259),u=C(u,d,f,l,c[h+9],21,-343485551),l=l+v>>>0,u=u+m>>>0,d=d+y>>>0,f=f+S>>>0}return t.endian([l,u,d,f])};a._ff=function(e,t,n,r,i,o,a){var c=e+(t&n|~t&r)+(i>>>0)+a;return(c<<o|c>>>32-o)+t},a._gg=function(e,t,n,r,i,o,a){var c=e+(t&r|n&~r)+(i>>>0)+a;return(c<<o|c>>>32-o)+t},a._hh=function(e,t,n,r,i,o,a){var c=e+(t^n^r)+(i>>>0)+a;return(c<<o|c>>>32-o)+t},a._ii=function(e,t,n,r,i,o,a){var c=e+(n^(t|~r))+(i>>>0)+a;return(c<<o|c>>>32-o)+t},a._blocksize=16,a._digestsize=16,e.exports=function(e,n){if(null==e)throw new Error("Illegal argument "+e);var r=t.wordsToBytes(a(e,n));return n&&n.asBytes?r:n&&n.asString?o.bytesToString(r):t.bytesToHex(r)}}()},function(e,t){!function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&n.rotl(e,8)|4278255360&n.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=n.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],n=0,r=0;n<e.length;n++,r+=8)t[r>>>5]|=e[n]<<24-r%32;return t},wordsToBytes:function(e){for(var t=[],n=0;n<32*e.length;n+=8)t.push(e[n>>>5]>>>24-n%32&255);return t},bytesToHex:function(e){for(var t=[],n=0;n<e.length;n++)t.push((e[n]>>>4).toString(16)),t.push((15&e[n]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substr(n,2),16));return t},bytesToBase64:function(e){for(var n=[],r=0;r<e.length;r+=3)for(var i=e[r]<<16|e[r+1]<<8|e[r+2],o=0;o<4;o++)8*r+6*o<=8*e.length?n.push(t.charAt(i>>>6*(3-o)&63)):n.push("=");return n.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var n=[],r=0,i=0;r<e.length;i=++r%4)0!=i&&n.push((t.indexOf(e.charAt(r-1))&Math.pow(2,-2*i+8)-1)<<2*i|t.indexOf(e.charAt(r))>>>6-2*i);return n}};e.exports=n}()},function(e,t){function n(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}
/*!
    * Determine if an object is a Buffer
    *
    * @author   Feross Aboukhadijeh <https://feross.org>
    * @license  MIT
    */
e.exports=function(e){return null!=e&&(n(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&n(e.slice(0,0))}(e)||!!e._isBuffer)}},function(e,t,n){e.exports=n(1)}])},8028:(e,t,n)=>{var r,i,o;function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}o=function(e){"use strict";var t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function n(e,t){var n=e[0],r=e[1],i=e[2],o=e[3];r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&i|~r&o)+t[0]-680876936|0)<<7|n>>>25)+r|0)&r|~n&i)+t[1]-389564586|0)<<12|o>>>20)+n|0)&n|~o&r)+t[2]+606105819|0)<<17|i>>>15)+o|0)&o|~i&n)+t[3]-1044525330|0)<<22|r>>>10)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&i|~r&o)+t[4]-176418897|0)<<7|n>>>25)+r|0)&r|~n&i)+t[5]+1200080426|0)<<12|o>>>20)+n|0)&n|~o&r)+t[6]-1473231341|0)<<17|i>>>15)+o|0)&o|~i&n)+t[7]-45705983|0)<<22|r>>>10)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&i|~r&o)+t[8]+1770035416|0)<<7|n>>>25)+r|0)&r|~n&i)+t[9]-1958414417|0)<<12|o>>>20)+n|0)&n|~o&r)+t[10]-42063|0)<<17|i>>>15)+o|0)&o|~i&n)+t[11]-1990404162|0)<<22|r>>>10)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&i|~r&o)+t[12]+1804603682|0)<<7|n>>>25)+r|0)&r|~n&i)+t[13]-40341101|0)<<12|o>>>20)+n|0)&n|~o&r)+t[14]-1502002290|0)<<17|i>>>15)+o|0)&o|~i&n)+t[15]+1236535329|0)<<22|r>>>10)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&o|i&~o)+t[1]-165796510|0)<<5|n>>>27)+r|0)&i|r&~i)+t[6]-1069501632|0)<<9|o>>>23)+n|0)&r|n&~r)+t[11]+643717713|0)<<14|i>>>18)+o|0)&n|o&~n)+t[0]-373897302|0)<<20|r>>>12)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&o|i&~o)+t[5]-701558691|0)<<5|n>>>27)+r|0)&i|r&~i)+t[10]+38016083|0)<<9|o>>>23)+n|0)&r|n&~r)+t[15]-660478335|0)<<14|i>>>18)+o|0)&n|o&~n)+t[4]-405537848|0)<<20|r>>>12)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&o|i&~o)+t[9]+568446438|0)<<5|n>>>27)+r|0)&i|r&~i)+t[14]-1019803690|0)<<9|o>>>23)+n|0)&r|n&~r)+t[3]-187363961|0)<<14|i>>>18)+o|0)&n|o&~n)+t[8]+1163531501|0)<<20|r>>>12)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r&o|i&~o)+t[13]-1444681467|0)<<5|n>>>27)+r|0)&i|r&~i)+t[2]-51403784|0)<<9|o>>>23)+n|0)&r|n&~r)+t[7]+1735328473|0)<<14|i>>>18)+o|0)&n|o&~n)+t[12]-1926607734|0)<<20|r>>>12)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r^i^o)+t[5]-378558|0)<<4|n>>>28)+r|0)^r^i)+t[8]-2022574463|0)<<11|o>>>21)+n|0)^n^r)+t[11]+1839030562|0)<<16|i>>>16)+o|0)^o^n)+t[14]-35309556|0)<<23|r>>>9)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r^i^o)+t[1]-1530992060|0)<<4|n>>>28)+r|0)^r^i)+t[4]+1272893353|0)<<11|o>>>21)+n|0)^n^r)+t[7]-155497632|0)<<16|i>>>16)+o|0)^o^n)+t[10]-1094730640|0)<<23|r>>>9)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r^i^o)+t[13]+681279174|0)<<4|n>>>28)+r|0)^r^i)+t[0]-358537222|0)<<11|o>>>21)+n|0)^n^r)+t[3]-722521979|0)<<16|i>>>16)+o|0)^o^n)+t[6]+76029189|0)<<23|r>>>9)+i|0,r=((r+=((i=((i+=((o=((o+=((n=((n+=(r^i^o)+t[9]-640364487|0)<<4|n>>>28)+r|0)^r^i)+t[12]-421815835|0)<<11|o>>>21)+n|0)^n^r)+t[15]+530742520|0)<<16|i>>>16)+o|0)^o^n)+t[2]-995338651|0)<<23|r>>>9)+i|0,r=((r+=((o=((o+=(r^((n=((n+=(i^(r|~o))+t[0]-198630844|0)<<6|n>>>26)+r|0)|~i))+t[7]+1126891415|0)<<10|o>>>22)+n|0)^((i=((i+=(n^(o|~r))+t[14]-1416354905|0)<<15|i>>>17)+o|0)|~n))+t[5]-57434055|0)<<21|r>>>11)+i|0,r=((r+=((o=((o+=(r^((n=((n+=(i^(r|~o))+t[12]+1700485571|0)<<6|n>>>26)+r|0)|~i))+t[3]-1894986606|0)<<10|o>>>22)+n|0)^((i=((i+=(n^(o|~r))+t[10]-1051523|0)<<15|i>>>17)+o|0)|~n))+t[1]-2054922799|0)<<21|r>>>11)+i|0,r=((r+=((o=((o+=(r^((n=((n+=(i^(r|~o))+t[8]+1873313359|0)<<6|n>>>26)+r|0)|~i))+t[15]-30611744|0)<<10|o>>>22)+n|0)^((i=((i+=(n^(o|~r))+t[6]-1560198380|0)<<15|i>>>17)+o|0)|~n))+t[13]+1309151649|0)<<21|r>>>11)+i|0,r=((r+=((o=((o+=(r^((n=((n+=(i^(r|~o))+t[4]-145523070|0)<<6|n>>>26)+r|0)|~i))+t[11]-1120210379|0)<<10|o>>>22)+n|0)^((i=((i+=(n^(o|~r))+t[2]+718787259|0)<<15|i>>>17)+o|0)|~n))+t[9]-343485551|0)<<21|r>>>11)+i|0,e[0]=n+e[0]|0,e[1]=r+e[1]|0,e[2]=i+e[2]|0,e[3]=o+e[3]|0}function r(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}function i(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24);return n}function o(e){var t,i,o,a,c,s,l=e.length,u=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=l;t+=64)n(u,r(e.substring(t-64,t)));for(i=(e=e.substring(t-64)).length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<i;t+=1)o[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(o[t>>2]|=128<<(t%4<<3),t>55)for(n(u,o),t=0;t<16;t+=1)o[t]=0;return a=(a=8*l).toString(16).match(/(.*?)(.{0,8})$/),c=parseInt(a[2],16),s=parseInt(a[1],16)||0,o[14]=c,o[15]=s,n(u,o),u}function a(e){var n,r="";for(n=0;n<4;n+=1)r+=t[e>>8*n+4&15]+t[e>>8*n&15];return r}function c(e){var t;for(t=0;t<e.length;t+=1)e[t]=a(e[t]);return e.join("")}function s(e){return/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e))),e}function l(e){var t,n=[],r=e.length;for(t=0;t<r-1;t+=2)n.push(parseInt(e.substr(t,2),16));return String.fromCharCode.apply(String,n)}function u(){this.reset()}return c(o("hello")),"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function t(e,t){return(e=0|e||0)<0?Math.max(e+t,0):Math.min(e,t)}ArrayBuffer.prototype.slice=function(n,r){var i,o,a,c,s=this.byteLength,l=t(n,s),u=s;return r!==e&&(u=t(r,s)),l>u?new ArrayBuffer(0):(i=u-l,o=new ArrayBuffer(i),a=new Uint8Array(o),c=new Uint8Array(this,l,i),a.set(c),o)}}(),u.prototype.append=function(e){return this.appendBinary(s(e)),this},u.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;var t,i=this._buff.length;for(t=64;t<=i;t+=64)n(this._hash,r(this._buff.substring(t-64,t)));return this._buff=this._buff.substring(t-64),this},u.prototype.end=function(e){var t,n,r=this._buff,i=r.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<i;t+=1)o[t>>2]|=r.charCodeAt(t)<<(t%4<<3);return this._finish(o,i),n=c(this._hash),e&&(n=l(n)),this.reset(),n},u.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},u.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},u.prototype.setState=function(e){return this._buff=e.buff,this._length=e.length,this._hash=e.hash,this},u.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},u.prototype._finish=function(e,t){var r,i,o,a=t;if(e[a>>2]|=128<<(a%4<<3),a>55)for(n(this._hash,e),a=0;a<16;a+=1)e[a]=0;r=(r=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),i=parseInt(r[2],16),o=parseInt(r[1],16)||0,e[14]=i,e[15]=o,n(this._hash,e)},u.hash=function(e,t){return u.hashBinary(s(e),t)},u.hashBinary=function(e,t){var n=c(o(e));return t?l(n):n},u.ArrayBuffer=function(){this.reset()},u.ArrayBuffer.prototype.append=function(e){var t,r,o,a,c,s=(r=this._buff.buffer,o=e,a=!0,(c=new Uint8Array(r.byteLength+o.byteLength)).set(new Uint8Array(r)),c.set(new Uint8Array(o),r.byteLength),a?c:c.buffer),l=s.length;for(this._length+=e.byteLength,t=64;t<=l;t+=64)n(this._hash,i(s.subarray(t-64,t)));return this._buff=t-64<l?new Uint8Array(s.buffer.slice(t-64)):new Uint8Array(0),this},u.ArrayBuffer.prototype.end=function(e){var t,n,r=this._buff,i=r.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<i;t+=1)o[t>>2]|=r[t]<<(t%4<<3);return this._finish(o,i),n=c(this._hash),e&&(n=l(n)),this.reset(),n},u.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},u.ArrayBuffer.prototype.getState=function(){var e,t=u.prototype.getState.call(this);return t.buff=(e=t.buff,String.fromCharCode.apply(null,new Uint8Array(e))),t},u.ArrayBuffer.prototype.setState=function(e){return e.buff=function(e,t){var n,r=e.length,i=new ArrayBuffer(r),o=new Uint8Array(i);for(n=0;n<r;n+=1)o[n]=e.charCodeAt(n);return t?o:i}(e.buff,!0),u.prototype.setState.call(this,e)},u.ArrayBuffer.prototype.destroy=u.prototype.destroy,u.ArrayBuffer.prototype._finish=u.prototype._finish,u.ArrayBuffer.hash=function(e,t){var r=c(function(e){var t,r,o,a,c,s,l=e.length,u=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=l;t+=64)n(u,i(e.subarray(t-64,t)));for(r=(e=t-64<l?e.subarray(t-64):new Uint8Array(0)).length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<r;t+=1)o[t>>2]|=e[t]<<(t%4<<3);if(o[t>>2]|=128<<(t%4<<3),t>55)for(n(u,o),t=0;t<16;t+=1)o[t]=0;return a=(a=8*l).toString(16).match(/(.*?)(.{0,8})$/),c=parseInt(a[2],16),s=parseInt(a[1],16)||0,o[14]=c,o[15]=s,n(u,o),u}(new Uint8Array(e)));return t?l(r):r},u},"object"===a(t)?e.exports=o():void 0===(i="function"==typeof(r=o)?r.call(t,n,t,e):r)||(e.exports=i)},5211:()=>{
/** @license zlib.js 2012 - imaya [ https://github.com/imaya/zlib.js ] The MIT License */(function(){"use strict";function e(e){throw e}var t=void 0,n=!0,r=this;function i(e,n){var i,o=e.split("."),a=r;!(o[0]in a)&&a.execScript&&a.execScript("var "+o[0]);for(;o.length&&(i=o.shift());)o.length||n===t?a=a[i]?a[i]:a[i]={}:a[i]=n}var o="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array&&"undefined"!=typeof DataView;function a(t,n){this.index="number"==typeof n?n:0,this.i=0,this.buffer=t instanceof(o?Uint8Array:Array)?t:new(o?Uint8Array:Array)(32768),2*this.buffer.length<=this.index&&e(Error("invalid index")),this.buffer.length<=this.index&&this.f()}a.prototype.f=function(){var e,t=this.buffer,n=t.length,r=new(o?Uint8Array:Array)(n<<1);if(o)r.set(t);else for(e=0;e<n;++e)r[e]=t[e];return this.buffer=r},a.prototype.d=function(e,t,n){var r,i=this.buffer,o=this.index,a=this.i,c=i[o];if(n&&1<t&&(e=8<t?(f[255&e]<<24|f[e>>>8&255]<<16|f[e>>>16&255]<<8|f[e>>>24&255])>>32-t:f[e]>>8-t),8>t+a)c=c<<t|e,a+=t;else for(r=0;r<t;++r)c=c<<1|e>>t-r-1&1,8==++a&&(a=0,i[o++]=f[c],c=0,o===i.length&&(i=this.f()));i[o]=c,this.buffer=i,this.i=a,this.index=o},a.prototype.finish=function(){var e,t=this.buffer,n=this.index;return 0<this.i&&(t[n]<<=8-this.i,t[n]=f[t[n]],n++),o?e=t.subarray(0,n):(t.length=n,e=t),e};var c,s=new(o?Uint8Array:Array)(256);for(c=0;256>c;++c){for(var l=d=c,u=7,d=d>>>1;d;d>>>=1)l<<=1,l|=1&d,--u;s[c]=(l<<u&255)>>>0}var f=s;function h(e){this.buffer=new(o?Uint16Array:Array)(2*e),this.length=0}function p(e){var t,n,r,i,a,c,s,l,u,d,f=e.length,h=0,p=Number.POSITIVE_INFINITY;for(l=0;l<f;++l)e[l]>h&&(h=e[l]),e[l]<p&&(p=e[l]);for(t=1<<h,n=new(o?Uint32Array:Array)(t),r=1,i=0,a=2;r<=h;){for(l=0;l<f;++l)if(e[l]===r){for(c=0,s=i,u=0;u<r;++u)c=c<<1|1&s,s>>=1;for(d=r<<16|l,u=c;u<t;u+=a)n[u]=d;++i}++r,i<<=1,a<<=1}return[n,h,p]}function _(e,t){this.h=C,this.w=0,this.input=o&&e instanceof Array?new Uint8Array(e):e,this.b=0,t&&(t.lazy&&(this.w=t.lazy),"number"==typeof t.compressionType&&(this.h=t.compressionType),t.outputBuffer&&(this.a=o&&t.outputBuffer instanceof Array?new Uint8Array(t.outputBuffer):t.outputBuffer),"number"==typeof t.outputIndex&&(this.b=t.outputIndex)),this.a||(this.a=new(o?Uint8Array:Array)(32768))}h.prototype.getParent=function(e){return 2*((e-2)/4|0)},h.prototype.push=function(e,t){var n,r,i,o=this.buffer;for(n=this.length,o[this.length++]=t,o[this.length++]=e;0<n&&(r=this.getParent(n),o[n]>o[r]);)i=o[n],o[n]=o[r],o[r]=i,i=o[n+1],o[n+1]=o[r+1],o[r+1]=i,n=r;return this.length},h.prototype.pop=function(){var e,t,n,r,i,o=this.buffer;for(t=o[0],e=o[1],this.length-=2,o[0]=o[this.length],o[1]=o[this.length+1],i=0;!((r=2*i+2)>=this.length)&&(r+2<this.length&&o[r+2]>o[r]&&(r+=2),o[r]>o[i]);)n=o[i],o[i]=o[r],o[r]=n,n=o[i+1],o[i+1]=o[r+1],o[r+1]=n,i=r;return{index:e,value:t,length:this.length}};var g,C=2,v={NONE:0,r:1,k:C,N:3},m=[];for(g=0;288>g;g++)switch(n){case 143>=g:m.push([g+48,8]);break;case 255>=g:m.push([g-144+400,9]);break;case 279>=g:m.push([g-256+0,7]);break;case 287>=g:m.push([g-280+192,8]);break;default:e("invalid literal: "+g)}function y(e,t){this.length=e,this.G=t}_.prototype.j=function(){var r,i,c,s,l=this.input;switch(this.h){case 0:for(c=0,s=l.length;c<s;){var u,d,f,h=i=o?l.subarray(c,c+65535):l.slice(c,c+65535),p=(c+=i.length)===s,_=t,g=t,v=this.a,y=this.b;if(o){for(v=new Uint8Array(this.a.buffer);v.length<=y+h.length+5;)v=new Uint8Array(v.length<<1);v.set(this.a)}if(u=p?1:0,v[y++]=0|u,f=65536+~(d=h.length)&65535,v[y++]=255&d,v[y++]=d>>>8&255,v[y++]=255&f,v[y++]=f>>>8&255,o)v.set(h,y),y+=h.length,v=v.subarray(0,y);else{for(_=0,g=h.length;_<g;++_)v[y++]=h[_];v.length=y}this.b=y,this.a=v}break;case 1:var S=new a(o?new Uint8Array(this.a.buffer):this.a,this.b);S.d(1,1,n),S.d(1,2,n);var I,w,D,P=R(this,l);for(I=0,w=P.length;I<w;I++)if(D=P[I],a.prototype.d.apply(S,m[D]),256<D)S.d(P[++I],P[++I],n),S.d(P[++I],5),S.d(P[++I],P[++I],n);else if(256===D)break;this.a=S.finish(),this.b=this.a.length;break;case C:var T,x,M,A,O,k,V,N,L,U,j,B,F,H,q,K=new a(o?new Uint8Array(this.a.buffer):this.a,this.b),W=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],G=Array(19);for(T=C,K.d(1,1,n),K.d(T,2,n),x=R(this,l),V=E(k=b(this.L,15)),L=E(N=b(this.K,7)),M=286;257<M&&0===k[M-1];M--);for(A=30;1<A&&0===N[A-1];A--);var z,J,Z,Q,Y,X,$=M,ee=A,te=new(o?Uint32Array:Array)($+ee),ne=new(o?Uint32Array:Array)(316),re=new(o?Uint8Array:Array)(19);for(z=J=0;z<$;z++)te[J++]=k[z];for(z=0;z<ee;z++)te[J++]=N[z];if(!o)for(z=0,Q=re.length;z<Q;++z)re[z]=0;for(z=Y=0,Q=te.length;z<Q;z+=J){for(J=1;z+J<Q&&te[z+J]===te[z];++J);if(Z=J,0===te[z])if(3>Z)for(;0<Z--;)ne[Y++]=0,re[0]++;else for(;0<Z;)(X=138>Z?Z:138)>Z-3&&X<Z&&(X=Z-3),10>=X?(ne[Y++]=17,ne[Y++]=X-3,re[17]++):(ne[Y++]=18,ne[Y++]=X-11,re[18]++),Z-=X;else if(ne[Y++]=te[z],re[te[z]]++,3>--Z)for(;0<Z--;)ne[Y++]=te[z],re[te[z]]++;else for(;0<Z;)(X=6>Z?Z:6)>Z-3&&X<Z&&(X=Z-3),ne[Y++]=16,ne[Y++]=X-3,re[16]++,Z-=X}for(r=o?ne.subarray(0,Y):ne.slice(0,Y),U=b(re,7),H=0;19>H;H++)G[H]=U[W[H]];for(O=19;4<O&&0===G[O-1];O--);for(j=E(U),K.d(M-257,5,n),K.d(A-1,5,n),K.d(O-4,4,n),H=0;H<O;H++)K.d(G[H],3,n);for(H=0,q=r.length;H<q;H++)if(B=r[H],K.d(j[B],U[B],n),16<=B){switch(H++,B){case 16:F=2;break;case 17:F=3;break;case 18:F=7;break;default:e("invalid code: "+B)}K.d(r[H],F,n)}var ie,oe,ae,ce,se,le,ue,de,fe=[V,k],he=[L,N];for(se=fe[0],le=fe[1],ue=he[0],de=he[1],ie=0,oe=x.length;ie<oe;++ie)if(ae=x[ie],K.d(se[ae],le[ae],n),256<ae)K.d(x[++ie],x[++ie],n),ce=x[++ie],K.d(ue[ce],de[ce],n),K.d(x[++ie],x[++ie],n);else if(256===ae)break;this.a=K.finish(),this.b=this.a.length;break;default:e("invalid compression type")}return this.a};var S=function(){function t(t){switch(n){case 3===t:return[257,t-3,0];case 4===t:return[258,t-4,0];case 5===t:return[259,t-5,0];case 6===t:return[260,t-6,0];case 7===t:return[261,t-7,0];case 8===t:return[262,t-8,0];case 9===t:return[263,t-9,0];case 10===t:return[264,t-10,0];case 12>=t:return[265,t-11,1];case 14>=t:return[266,t-13,1];case 16>=t:return[267,t-15,1];case 18>=t:return[268,t-17,1];case 22>=t:return[269,t-19,2];case 26>=t:return[270,t-23,2];case 30>=t:return[271,t-27,2];case 34>=t:return[272,t-31,2];case 42>=t:return[273,t-35,3];case 50>=t:return[274,t-43,3];case 58>=t:return[275,t-51,3];case 66>=t:return[276,t-59,3];case 82>=t:return[277,t-67,4];case 98>=t:return[278,t-83,4];case 114>=t:return[279,t-99,4];case 130>=t:return[280,t-115,4];case 162>=t:return[281,t-131,5];case 194>=t:return[282,t-163,5];case 226>=t:return[283,t-195,5];case 257>=t:return[284,t-227,5];case 258===t:return[285,t-258,0];default:e("invalid length: "+t)}}var r,i,o=[];for(r=3;258>=r;r++)i=t(r),o[r]=i[2]<<24|i[1]<<16|i[0];return o}(),I=o?new Uint32Array(S):S;function R(r,i){function a(t,r){var i,o,a,c,s=t.G,l=[],u=0;switch(i=I[t.length],l[u++]=65535&i,l[u++]=i>>16&255,l[u++]=i>>24,n){case 1===s:o=[0,s-1,0];break;case 2===s:o=[1,s-2,0];break;case 3===s:o=[2,s-3,0];break;case 4===s:o=[3,s-4,0];break;case 6>=s:o=[4,s-5,1];break;case 8>=s:o=[5,s-7,1];break;case 12>=s:o=[6,s-9,2];break;case 16>=s:o=[7,s-13,2];break;case 24>=s:o=[8,s-17,3];break;case 32>=s:o=[9,s-25,3];break;case 48>=s:o=[10,s-33,4];break;case 64>=s:o=[11,s-49,4];break;case 96>=s:o=[12,s-65,5];break;case 128>=s:o=[13,s-97,5];break;case 192>=s:o=[14,s-129,6];break;case 256>=s:o=[15,s-193,6];break;case 384>=s:o=[16,s-257,7];break;case 512>=s:o=[17,s-385,7];break;case 768>=s:o=[18,s-513,8];break;case 1024>=s:o=[19,s-769,8];break;case 1536>=s:o=[20,s-1025,9];break;case 2048>=s:o=[21,s-1537,9];break;case 3072>=s:o=[22,s-2049,10];break;case 4096>=s:o=[23,s-3073,10];break;case 6144>=s:o=[24,s-4097,11];break;case 8192>=s:o=[25,s-6145,11];break;case 12288>=s:o=[26,s-8193,12];break;case 16384>=s:o=[27,s-12289,12];break;case 24576>=s:o=[28,s-16385,13];break;case 32768>=s:o=[29,s-24577,13];break;default:e("invalid distance")}for(i=o,l[u++]=i[0],l[u++]=i[1],l[u++]=i[2],a=0,c=l.length;a<c;++a)C[v++]=l[a];y[l[0]]++,S[l[3]]++,m=t.length+r-1,p=null}var c,s,l,u,d,f,h,p,_,g={},C=o?new Uint16Array(2*i.length):[],v=0,m=0,y=new(o?Uint32Array:Array)(286),S=new(o?Uint32Array:Array)(30),R=r.w;if(!o){for(l=0;285>=l;)y[l++]=0;for(l=0;29>=l;)S[l++]=0}for(y[256]=1,c=0,s=i.length;c<s;++c){for(l=d=0,u=3;l<u&&c+l!==s;++l)d=d<<8|i[c+l];if(g[d]===t&&(g[d]=[]),f=g[d],!(0<m--)){for(;0<f.length&&32768<c-f[0];)f.shift();if(c+3>=s){for(p&&a(p,-1),l=0,u=s-c;l<u;++l)_=i[c+l],C[v++]=_,++y[_];break}0<f.length?(h=w(i,c,f),p?p.length<h.length?(_=i[c-1],C[v++]=_,++y[_],a(h,0)):a(p,-1):h.length<R?p=h:a(h,0)):p?a(p,-1):(_=i[c],C[v++]=_,++y[_])}f.push(c)}return C[v++]=256,y[256]++,r.L=y,r.K=S,o?C.subarray(0,v):C}function w(e,t,n){var r,i,o,a,c,s,l=0,u=e.length;a=0,s=n.length;e:for(;a<s;a++){if(r=n[s-a-1],o=3,3<l){for(c=l;3<c;c--)if(e[r+c-1]!==e[t+c-1])continue e;o=l}for(;258>o&&t+o<u&&e[r+o]===e[t+o];)++o;if(o>l&&(i=r,l=o),258===o)break}return new y(l,t-i)}function b(e,t){var n,r,i,a,c,s=e.length,l=new h(572),u=new(o?Uint8Array:Array)(s);if(!o)for(a=0;a<s;a++)u[a]=0;for(a=0;a<s;++a)0<e[a]&&l.push(a,e[a]);if(n=Array(l.length/2),r=new(o?Uint32Array:Array)(l.length/2),1===n.length)return u[l.pop().index]=1,u;for(a=0,c=l.length/2;a<c;++a)n[a]=l.pop(),r[a]=n[a].value;for(i=function(e,t,n){function r(e){var n=p[e][_[e]];n===t?(r(e+1),r(e+1)):--f[n],++_[e]}var i,a,c,s,l,u=new(o?Uint16Array:Array)(n),d=new(o?Uint8Array:Array)(n),f=new(o?Uint8Array:Array)(t),h=Array(n),p=Array(n),_=Array(n),g=(1<<n)-t,C=1<<n-1;for(u[n-1]=t,a=0;a<n;++a)g<C?d[a]=0:(d[a]=1,g-=C),g<<=1,u[n-2-a]=(u[n-1-a]/2|0)+t;for(u[0]=d[0],h[0]=Array(u[0]),p[0]=Array(u[0]),a=1;a<n;++a)u[a]>2*u[a-1]+d[a]&&(u[a]=2*u[a-1]+d[a]),h[a]=Array(u[a]),p[a]=Array(u[a]);for(i=0;i<t;++i)f[i]=n;for(c=0;c<u[n-1];++c)h[n-1][c]=e[c],p[n-1][c]=c;for(i=0;i<n;++i)_[i]=0;for(1===d[n-1]&&(--f[0],++_[n-1]),a=n-2;0<=a;--a){for(s=i=0,l=_[a+1],c=0;c<u[a];c++)(s=h[a+1][l]+h[a+1][l+1])>e[i]?(h[a][c]=s,p[a][c]=t,l+=2):(h[a][c]=e[i],p[a][c]=i,++i);_[a]=0,1===d[a]&&r(a)}return f}(r,r.length,t),a=0,c=n.length;a<c;++a)u[n[a].index]=i[a];return u}function E(e){var t,n,r,i,a=new(o?Uint16Array:Array)(e.length),c=[],s=[],l=0;for(t=0,n=e.length;t<n;t++)c[e[t]]=1+(0|c[e[t]]);for(t=1,n=16;t<=n;t++)s[t]=l,l+=0|c[t],l<<=1;for(t=0,n=e.length;t<n;t++)for(l=s[e[t]],s[e[t]]+=1,r=a[t]=0,i=e[t];r<i;r++)a[t]=a[t]<<1|1&l,l>>>=1;return a}function D(t,n){switch(this.l=[],this.m=32768,this.e=this.g=this.c=this.q=0,this.input=o?new Uint8Array(t):t,this.s=!1,this.n=T,this.B=!1,!n&&(n={})||(n.index&&(this.c=n.index),n.bufferSize&&(this.m=n.bufferSize),n.bufferType&&(this.n=n.bufferType),n.resize&&(this.B=n.resize)),this.n){case P:this.b=32768,this.a=new(o?Uint8Array:Array)(32768+this.m+258);break;case T:this.b=0,this.a=new(o?Uint8Array:Array)(this.m),this.f=this.J,this.t=this.H,this.o=this.I;break;default:e(Error("invalid inflate mode"))}}var P=0,T=1,x={D:P,C:T};D.prototype.p=function(){for(;!this.s;){var r=Z(this,3);switch(1&r&&(this.s=n),r>>>=1){case 0:var i=this.input,a=this.c,c=this.a,s=this.b,l=i.length,u=t,d=c.length,f=t;switch(this.e=this.g=0,a+1>=l&&e(Error("invalid uncompressed block header: LEN")),u=i[a++]|i[a++]<<8,a+1>=l&&e(Error("invalid uncompressed block header: NLEN")),u===~(i[a++]|i[a++]<<8)&&e(Error("invalid uncompressed block header: length verify")),a+u>i.length&&e(Error("input buffer is broken")),this.n){case P:for(;s+u>c.length;){if(u-=f=d-s,o)c.set(i.subarray(a,a+f),s),s+=f,a+=f;else for(;f--;)c[s++]=i[a++];this.b=s,c=this.f(),s=this.b}break;case T:for(;s+u>c.length;)c=this.f({v:2});break;default:e(Error("invalid inflate mode"))}if(o)c.set(i.subarray(a,a+u),s),s+=u,a+=u;else for(;u--;)c[s++]=i[a++];this.c=a,this.b=s,this.a=c;break;case 1:this.o(G,J);break;case 2:var h,_,g,C,v=Z(this,5)+257,m=Z(this,5)+1,y=Z(this,4)+4,S=new(o?Uint8Array:Array)(k.length),I=t,R=t,w=t,b=t,E=t;for(E=0;E<y;++E)S[k[E]]=Z(this,3);if(!o)for(E=y,y=S.length;E<y;++E)S[k[E]]=0;for(h=p(S),I=new(o?Uint8Array:Array)(v+m),E=0,C=v+m;E<C;)switch(R=Q(this,h),R){case 16:for(b=3+Z(this,2);b--;)I[E++]=w;break;case 17:for(b=3+Z(this,3);b--;)I[E++]=0;w=0;break;case 18:for(b=11+Z(this,7);b--;)I[E++]=0;w=0;break;default:w=I[E++]=R}_=p(o?I.subarray(0,v):I.slice(0,v)),g=p(o?I.subarray(v):I.slice(v)),this.o(_,g);break;default:e(Error("unknown BTYPE: "+r))}}return this.t()};var M,A,O=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],k=o?new Uint16Array(O):O,V=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],N=o?new Uint16Array(V):V,L=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],U=o?new Uint8Array(L):L,j=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],B=o?new Uint16Array(j):j,F=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],H=o?new Uint8Array(F):F,q=new(o?Uint8Array:Array)(288);for(M=0,A=q.length;M<A;++M)q[M]=143>=M?8:255>=M?9:279>=M?7:8;var K,W,G=p(q),z=new(o?Uint8Array:Array)(30);for(K=0,W=z.length;K<W;++K)z[K]=5;var J=p(z);function Z(t,n){for(var r,i=t.g,o=t.e,a=t.input,c=t.c,s=a.length;o<n;)c>=s&&e(Error("input buffer is broken")),i|=a[c++]<<o,o+=8;return r=i&(1<<n)-1,t.g=i>>>n,t.e=o-n,t.c=c,r}function Q(t,n){for(var r,i,o=t.g,a=t.e,c=t.input,s=t.c,l=c.length,u=n[0],d=n[1];a<d&&!(s>=l);)o|=c[s++]<<a,a+=8;return(i=(r=u[o&(1<<d)-1])>>>16)>a&&e(Error("invalid code length: "+i)),t.g=o>>i,t.e=a-i,t.c=s,65535&r}function Y(e){if("string"==typeof e){var t,n,r=e.split("");for(t=0,n=r.length;t<n;t++)r[t]=(255&r[t].charCodeAt(0))>>>0;e=r}for(var i,o=1,a=0,c=e.length,s=0;0<c;){c-=i=1024<c?1024:c;do{a+=o+=e[s++]}while(--i);o%=65521,a%=65521}return(a<<16|o)>>>0}function X(t,n){var r,i;if(this.input=t,this.c=0,!n&&(n={})||(n.index&&(this.c=n.index),n.verify&&(this.M=n.verify)),r=t[this.c++],i=t[this.c++],(15&r)===$)this.method=$;else e(Error("unsupported compression method"));0!=((r<<8)+i)%31&&e(Error("invalid fcheck flag:"+((r<<8)+i)%31)),32&i&&e(Error("fdict flag is not supported")),this.A=new D(t,{index:this.c,bufferSize:n.bufferSize,bufferType:n.bufferType,resize:n.resize})}D.prototype.o=function(e,t){var n=this.a,r=this.b;this.u=e;for(var i,o,a,c,s=n.length-258;256!==(i=Q(this,e));)if(256>i)r>=s&&(this.b=r,n=this.f(),r=this.b),n[r++]=i;else for(c=N[o=i-257],0<U[o]&&(c+=Z(this,U[o])),i=Q(this,t),a=B[i],0<H[i]&&(a+=Z(this,H[i])),r>=s&&(this.b=r,n=this.f(),r=this.b);c--;)n[r]=n[r++-a];for(;8<=this.e;)this.e-=8,this.c--;this.b=r},D.prototype.I=function(e,t){var n=this.a,r=this.b;this.u=e;for(var i,o,a,c,s=n.length;256!==(i=Q(this,e));)if(256>i)r>=s&&(s=(n=this.f()).length),n[r++]=i;else for(c=N[o=i-257],0<U[o]&&(c+=Z(this,U[o])),i=Q(this,t),a=B[i],0<H[i]&&(a+=Z(this,H[i])),r+c>s&&(s=(n=this.f()).length);c--;)n[r]=n[r++-a];for(;8<=this.e;)this.e-=8,this.c--;this.b=r},D.prototype.f=function(){var e,t,n=new(o?Uint8Array:Array)(this.b-32768),r=this.b-32768,i=this.a;if(o)n.set(i.subarray(32768,n.length));else for(e=0,t=n.length;e<t;++e)n[e]=i[e+32768];if(this.l.push(n),this.q+=n.length,o)i.set(i.subarray(r,r+32768));else for(e=0;32768>e;++e)i[e]=i[r+e];return this.b=32768,i},D.prototype.J=function(e){var t,n,r,i=this.input.length/this.c+1|0,a=this.input,c=this.a;return e&&("number"==typeof e.v&&(i=e.v),"number"==typeof e.F&&(i+=e.F)),2>i?n=(r=(a.length-this.c)/this.u[2]/2*258|0)<c.length?c.length+r:c.length<<1:n=c.length*i,o?(t=new Uint8Array(n)).set(c):t=c,this.a=t},D.prototype.t=function(){var e,t,n,r,i,a=0,c=this.a,s=this.l,l=new(o?Uint8Array:Array)(this.q+(this.b-32768));if(0===s.length)return o?this.a.subarray(32768,this.b):this.a.slice(32768,this.b);for(t=0,n=s.length;t<n;++t)for(r=0,i=(e=s[t]).length;r<i;++r)l[a++]=e[r];for(t=32768,n=this.b;t<n;++t)l[a++]=c[t];return this.l=[],this.buffer=l},D.prototype.H=function(){var e,t=this.b;return o?this.B?(e=new Uint8Array(t)).set(this.a.subarray(0,t)):e=this.a.subarray(0,t):(this.a.length>t&&(this.a.length=t),e=this.a),this.buffer=e},X.prototype.p=function(){var t,n=this.input;return t=this.A.p(),this.c=this.A.c,this.M&&((n[this.c++]<<24|n[this.c++]<<16|n[this.c++]<<8|n[this.c++])>>>0!==Y(t)&&e(Error("invalid adler-32 checksum"))),t};var $=8;function ee(e,t){this.input=e,this.a=new(o?Uint8Array:Array)(32768),this.h=te.k;var n,r={};for(n in!t&&(t={})||"number"!=typeof t.compressionType||(this.h=t.compressionType),t)r[n]=t[n];r.outputBuffer=this.a,this.z=new _(this.input,r)}var te=v;function ne(e,t){var n,r,o,a;if(Object.keys)n=Object.keys(t);else for(r in n=[],o=0,t)n[o++]=r;for(o=0,a=n.length;o<a;++o)i(e+"."+(r=n[o]),t[r])}ee.prototype.j=function(){var t,n,r,i,a,c,s,l=0;if(s=this.a,(t=$)===$)n=Math.LOG2E*Math.log(32768)-8;else e(Error("invalid compression method"));if(r=n<<4|t,s[l++]=r,t===$)switch(this.h){case te.NONE:a=0;break;case te.r:a=1;break;case te.k:a=2;break;default:e(Error("unsupported compression type"))}else e(Error("invalid compression method"));return i=a<<6|0,s[l++]=i|31-(256*r+i)%31,c=Y(this.input),this.z.b=l,l=(s=this.z.j()).length,o&&((s=new Uint8Array(s.buffer)).length<=l+4&&(this.a=new Uint8Array(s.length+4),this.a.set(s),s=this.a),s=s.subarray(0,l+4)),s[l++]=c>>24&255,s[l++]=c>>16&255,s[l++]=c>>8&255,s[l++]=255&c,s},i("Zlib.Inflate",X),i("Zlib.Inflate.prototype.decompress",X.prototype.p),ne("Zlib.Inflate.BufferType",{ADAPTIVE:x.C,BLOCK:x.D}),i("Zlib.Deflate",ee),i("Zlib.Deflate.compress",(function(e,t){return new ee(e,t).j()})),i("Zlib.Deflate.prototype.compress",ee.prototype.j),ne("Zlib.Deflate.CompressionType",{NONE:te.NONE,FIXED:te.r,DYNAMIC:te.k})}).call(window)},3760:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=3760,e.exports=t},1457:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=1457,e.exports=t},6995:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=6995,e.exports=t},1482:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=1482,e.exports=t},535:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=535,e.exports=t},8649:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=8649,e.exports=t},7119:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=7119,e.exports=t},6519:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=6519,e.exports=t},4860:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=4860,e.exports=t},3375:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=3375,e.exports=t},2598:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=2598,e.exports=t},7860:()=>{}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.loaded=!0,n.exports}__webpack_require__.amdO={},__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.nmd=e=>(e.paths=[],e.children||(e.children=[]),e);var __webpack_exports__={};return(()=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>zr});__webpack_require__(8403),__webpack_require__(3169),__webpack_require__(5211),__webpack_require__(4556),__webpack_require__(5214),__webpack_require__(2591),__webpack_require__(5417),__webpack_require__(4951),__webpack_require__(3945),__webpack_require__(6504),__webpack_require__(2966),__webpack_require__(554),__webpack_require__(8357),__webpack_require__(9585),__webpack_require__(6403),__webpack_require__(8005),__webpack_require__(9715),__webpack_require__(382),__webpack_require__(6009);var e=__webpack_require__(1361);__webpack_require__(7710),__webpack_require__(8870),__webpack_require__(6480),__webpack_require__(873),__webpack_require__(736),__webpack_require__(7738),__webpack_require__(4033),__webpack_require__(7571),__webpack_require__(1603),__webpack_require__(8604),__webpack_require__(4508),__webpack_require__(7083),__webpack_require__(6005),__webpack_require__(4826),__webpack_require__(5368),__webpack_require__(5481),__webpack_require__(7143),__webpack_require__(4491),__webpack_require__(5089),__webpack_require__(2408);function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,r(i.key),i)}}function r(e){var n=function(e,n){if("object"!=t(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,n||"default");if("object"!=t(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==t(n)?n:n+""}const i=new(function(){return e=function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.apis=[],window.CRVideo_SetApisNoLog=function(e){if(e.add)for(var n=0;n<e.add.length;n++)t.add(e.add[n]);if(e.remove)for(var r=0;r<e.remove.length;r++)t.remove(e.remove[r])}},(t=[{key:"add",value:function(e){this.apis.push(e)}},{key:"remove",value:function(e){var t=this.apis.findIndex((function(t){return t==e}));this.apis.splice(t,1)}}])&&n(e.prototype,t),r&&n(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,r}());CRVideo.CbProxy=function(e){this.name=e,this.target=function(){try{if("[object Function]"===Object.prototype.toString.call(this.callback)){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];!this.noLogArr.includes(this.name)&&!i.apis.includes(this.name)&&console.crlog("[SDK][Callback] ".concat(this.name,".target(").concat(n,")")),this.callback.apply(null,n)}else!this.noLogArr.includes(this.name)&&!i.apis.includes(this.name)&&console.crlog("[SDK][Callback] Undefined callback: "+e)}catch(e){console.error(e)}},this.noLogArr=["CRVideo_GetQueueStatusRslt","CRVideo_CloudMixerOutputInfoChanged","CRVideo_ShakeHandRslt","CRVideo_MicEnergyUpdate","CRVideo_NetStateChanged","CRVideo_NotifyNetworkDelay","CRVideo_NotifyNetworkLostRate","CRVideo_NotifyIMmsg","CRVideo_NotifyIMMsg"]};__webpack_require__(6111);var o=__webpack_require__(3623),a=__webpack_require__(4536);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,l(r.key),r)}}function l(e){var t=function(e,t){if("object"!=c(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==c(t)?t:t+""}CRVideo.sdkver="2.13.1",CRVideo.sdkInfo="SDKVer: 2.13.1; Last-Modified: Vinod.Liu Wei 2024/8/29 14:13:47",console.crlog("[SDK] ".concat(CRVideo.sdkInfo)),CRVideo.isSDKConsole=!0,CRVideo.isUploadLog=!0,CRVideo.isCallSer=!0,CRVideo.MSProtocol=1,CRVideo.isWebRTC=!0,CRVideo.protocol="https:",CRVideo.isRtcLog=!0,CRVideo.boardV1=!1,CRVideo.__crfib=function(e){return e<2?e:CRVideo.__crfib(e-1)+CRVideo.__crfib(e-2)},window.addEventListener("unload",(function(e){(CRVideo.isMeeting||CRVideo.isLoginCallserver)&&(CRVideo.isMeeting&&__Rtc.CR__Exit("直接离开页面"),CRVideo.isLoginCallserver&&CRVideo.webSendcmd({cmd:"Logout",module:"CallServer",sessionID:CRVideo.sessionID}),CRVideo.__crfib(25))})),window.CRVideo_GetSDKVersion=function(){return CRVideo.sdkver},window.CRVideo_WriteLog=function(e){console.crlog("[APP] ".concat(e))},window.CRVideo_SetSDKParams=function(e){if(console.crlog("[SDK] CRVideo_SetSDKParams:".concat(JSON.stringify(e))),void 0!==e)return null!=e.isSDKConsole&&(CRVideo.isSDKConsole=!1!==e.isSDKConsole),null!=e.isUploadLog&&(CRVideo.isUploadLog=!1!==e.isUploadLog),null!=e.isRtcLog&&(CRVideo.isRtcLog=!1!==e.isRtcLog),null!=e.screenSendBW&&(__Rtc.CRRTCScreen.screenShareCfg.maxKbps=+e.screenSendBW),null!=e.mediaSendBW&&(__Rtc.CRRTCMedia.mediaCfg.maxKbps=+e.mediaSendBW),null!=e.isCallSer&&(CRVideo.isCallSer=!1!==e.isCallSer),void 0!==e.MSProtocol&&(CRVideo.MSProtocol=+e.MSProtocol),null!=e.isWebRTC&&(CRVideo.isWebRTC=!1!==e.isWebRTC),void 0!==e.boardV1&&(CRVideo.boardV1=!1!==e.boardV1),CRVideo.virtualBackgroundAssets=e.virtualBackgroundAssets||void 0,console.crlog("[Init] Set isUploadLog:".concat(CRVideo.isUploadLog,",isSDKConsole:").concat(CRVideo.isSDKConsole,", on init sdk!")),void window.CRVideo_EnableLog2File(CRVideo.isUploadLog,CRVideo.isSDKConsole);console.crlog("[Init] Set isUploadLog:".concat(CRVideo.isUploadLog,",isSDKConsole:").concat(CRVideo.isSDKConsole,", on init sdk!")),window.CRVideo_EnableLog2File(CRVideo.isUploadLog,CRVideo.isSDKConsole),CRVideo_UploadingLog()},window.CRVideo_Init=function(e){return console.crlog("[Init] CRVideo_Init(".concat(JSON.stringify(e),")")),new Promise((function(t,n){return localStorage.getItem("CRRTCSDK_SDKVer")!=CRVideo.sdkver&&(localStorage.removeItem("CRRTCSDK_UserInfoHistory"),localStorage.removeItem("CRRTCSDK_UserInfo"),localStorage.setItem("CRRTCSDK_SDKVer",CRVideo.sdkver)),void 0!==e&&(CRVideo.isSDKConsole=!1!==e.isSDKConsole,CRVideo.isUploadLog=!1!==e.isUploadLog,CRVideo.isRtcLog=!1!==e.isRtcLog,e.screenSendBW&&(__Rtc.CRRTCScreen.screenShareCfg.maxKbps=+e.screenSendBW),e.mediaSendBW&&(__Rtc.CRRTCMedia.mediaCfg.maxKbps=+e.mediaSendBW),CRVideo.isCallSer=!1!==e.isCallSer,void 0!==e.MSProtocol&&(CRVideo.MSProtocol=+e.MSProtocol)),console.crlog("[Init] Set isUploadLog:".concat(CRVideo.isUploadLog,",isSDKConsole:").concat(CRVideo.isSDKConsole,", on init sdk!")),window.CRVideo_EnableLog2File(CRVideo.isUploadLog,CRVideo.isSDKConsole),null!=e&&!1===e.isWebRTC&&(CRVideo.isWebRTC=!1),CRVideo.isWebRTC?window.RTCPeerConnection?window.navigator.mediaDevices?window.navigator.mediaDevices.enumerateDevices?window.navigator.mediaDevices.getUserMedia?(window.location.protocol&&"http:"==window.location.protocol&&console.crlog('[Init][Error] The current page protocal is "HTTP", You should use "HTTPS" protocol!'),window.location.protocol&&"http:"==window.location.protocol&&console.error('The current page protocal is "HTTP", You should use "HTTPS" protocol!'),console.crlog("[Init] First enumerateDevices on init..."),void navigator.mediaDevices.enumerateDevices().then((function(e){var r,i=[],o=[],c=[];if(e.forEach((function(e){"audioinput"==e.kind?o.push(e):"audiooutput"==e.kind?c.push(e):"videoinput"==e.kind&&i.push(e)})),console.crlog("[Init] Video input devices: ".concat(JSON.stringify(i))),console.crlog("[Init] Audio input devices: ".concat(JSON.stringify(o))),console.crlog("[Init] Audio output devices: ".concat(JSON.stringify(c))),!(r=(0!==i.length||0!==o.length)&&(0===i.length?{video:!1,audio:!0}:0===o.length?{video:!0,audio:!1}:{video:!0,audio:!0})))return a.Z.SDK_Event.emitEventListener("SDKInit"),console.crlog("[Init] Init sdk success, no video or audio input devices, still return init success!"),t(0);console.crlog("[Init] GetUserMedia on init device promission, constrains: ".concat(JSON.stringify(r))),navigator.mediaDevices.getUserMedia(r).then((function(e){if(console.crlog("[Init] Get video & audio permission by getUserMedia on init, success!"),!e)return console.crlog("[Init] Get video & audio permission by getUserMedia on init, fail! GetUserMedia stream :".concat(e)),n(8001);var r=new RTCPeerConnection({iceServers:[{urls:"stun:121.42.156.84:3478"}]});window.__Rtc.firstInitStream=e;var i=e.getVideoTracks(),o=e.getAudioTracks();i.length>0&&r.addTrack(i[0],e),o.length>0&&r.addTrack(o[0],e),r.createOffer().then((function(n){return window.__Rtc.baseOffer=n,n.sdp.includes("H264")&&n.sdp.includes("VP8")?window.__Rtc.rtc_codecs="VP8;H264":n.sdp.includes("H264")?window.__Rtc.rtc_codecs="H264":n.sdp.includes("VP8")?window.__Rtc.rtc_codecs="VP8":window.__Rtc.rtc_codecs="",console.crlog("[Init] __Rtc.rtc_codecs(encode): ".concat(window.__Rtc.rtc_codecs)),window.rtc_codecs=window.__Rtc.rtc_codecs,e.getTracks().forEach((function(e){"video"==e.kind&&(console.crlog("[Init] Stop video stream on get video & audio permission..."),e.stop()),"audio"!=e.kind||__Rtc.CRBrowser.weixin.isWeixin||"iOS"==__Rtc.CRBrowser.curBrowserCfg.platform||(console.crlog("[Init] Stop audio stream on get video & audio permission..."),e.stop())})),a.Z.SDK_Event.emitEventListener("SDKInit"),console.crlog("[Init] Init sdk success!"),t(0)}))})).catch((function(e){return console.crlog("[Init] Get video & audio permission by getUserMedia on init, fail! GetUserMedia fail: ".concat(e)),"NotAllowedError"==e.name?(console.crlog("[Init] Init sdk fail,user not allowd devices promission! ".concat(e.name)),n(8002)):"NotReadableError"==e.name?(console.crlog("[Init] InitDevicePromission fail, NotReadableError ".concat(e)),n(8007)):(console.crlog("[Init] Init sdk fail, getUserMedia fail: ".concat(e.name)),n(8001))}))})).catch((function(e){return console.crlog("[Init] Enumerate devices fail! ".concat(e)),console.error(e),n(8003)}))):(console.crlog('[Init] Init SDK fail! "window.navigator.mediaDevices.getUserMedia" API not found!'),n(8004)):(console.crlog('[Init] Init SDK fail! "window.navigator.mediaDevices.enumerateDevices" API not found!'),n(8004)):(console.crlog('[Init] Init SDK fail! "window.navigator.mediaDevices" API not found!'),n(8004)):(console.crlog('[Init] Init SDK fail! "window.RTCPeerConnection" API not found!'),n(8004)):(a.Z.SDK_Event.emitEventListener("SDKInit"),console.crlog("[Init] Init sdk success when isWebRTC-false!"),t(0))}))},window.CRVideo_SetServerAddr=function(e){e.includes(":8934")&&(e="sdk.".concat(window.__CRName,".com"));try{console.crlog("[Init] CRVideo_SetServerAddr(".concat(e,")"))}catch(e){console.error(e)}e=e.replace(/\s*/g,""),CRVideo.webServerAddr=e,o.Z.server.setServerAddr(e)},function(e,t,n){var r=function(){return t=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initData(),this.getPlatform(),this.getBrowser(),console.crlog("[Browser] UA: ".concat(this.ua)),console.crlog("[Browser] Browser: ".concat(JSON.stringify(this.curBrowserCfg)))},(n=[{key:"initData",value:function(){this.ua=e.navigator.userAgent,this.curBrowserCfg={name:"",minVer:null,ver:null,support:!1,platform:"unknown",isMobile:!1,OSVer:""},this.supportVer={Windows_Chrome:58,Windows_Edg:80,Windows_Edge:999,Windows_OPR:70,Windows_Firefox:78,Windows_QQBrowser:10,Android_Chrome:58,Mac_Safari:12,Mac_Chrome:69,iOS_Safari:12,iOS_Chrome:69,iOS_QQBrowser:11,iOS_MicroMessenger:7,iOS_uniApp:1},this.weixin={isWeixin:!1,weixinVer:null}}},{key:"getPlatform",value:function(){if((this.ua.match(/AppleWebKit.*Mobile.*/)||this.ua.includes("Android"))&&(this.curBrowserCfg.isMobile=!0),this.ua.includes("Windows")&&(this.curBrowserCfg.platform="Windows"),this.ua.includes("Macintosh")&&(this.curBrowserCfg.platform="Mac"),this.ua.includes("Android")&&(this.curBrowserCfg.platform="Android"),/(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent)&&(this.curBrowserCfg.platform="iOS"),"iOS"==this.curBrowserCfg.platform){var e=this.ua.split(" like Mac OS X")[0].split(" OS ")[1].split("_")||null;this.curBrowserCfg.OSVer=e.join(".")}}},{key:"getBrowser",value:function(){if(this.curBrowserCfg.isMobile){if("Android"==this.curBrowserCfg.platform&&this.ua.includes("Chrome/")&&(this.curBrowserCfg.name="Chrome",this.curBrowserCfg.ver=+this.ua.split("Chrome/")[1].split(".")[0]),"iOS"==this.curBrowserCfg.platform&&(this.ua.includes("Safari")&&!/(Chrome|FxiOS|EdgiOS|CriOS|MQQ|QQ|MXiOS|Sogou|baidu|Baidu|MicroMessenger|UC|Quark|AliApp|QH|Qihoo|2345|Browser)/i.test(this.ua)&&(this.curBrowserCfg.name="Safari",this.curBrowserCfg.ver=+this.ua.split("Version/")[1].split(".")[0],this.curBrowserCfg.platform="iOS"),this.ua.includes("CriOS/")&&(this.curBrowserCfg.name="Chrome",this.curBrowserCfg.ver=+this.ua.split("CriOS/")[1].split(".")[0]),this.ua.includes("MQQBrowser/")&&(this.curBrowserCfg.name="QQBrowser",this.curBrowserCfg.ver=+this.ua.split("MQQBrowser/")[1].split(".")[0]),this.ua.includes("MicroMessenger/")&&(this.curBrowserCfg.name="MicroMessenger",this.curBrowserCfg.ver=+this.ua.split("MicroMessenger/")[1].split(".")[0]),this.ua.includes("uni-app")&&(this.curBrowserCfg.name="uniApp",this.curBrowserCfg.ver=1)),this.ua.includes("MicroMessenger/")||this.ua.includes("WeChat/")||this.ua.includes("Weixin"))try{this.weixin.isWeixin=!0,this.weixin.weixinVer=this.ua.split("MicroMessenger/")[1].split("(")[0]}catch(e){console.error(e)}console.crlog("[Browser] ".concat(JSON.stringify(this.weixin)))}else"Mac"==this.curBrowserCfg.platform&&this.ua.includes("Safari")&&!/(Chrome|FxiOS|EdgiOS|CriOS|MQQ|QQ|MXiOS|Sogou|baidu|Baidu|MicroMessenger|UC|Quark|AliApp|QH|Qihoo|2345|Browser)/i.test(this.ua)&&(this.curBrowserCfg.name="Safari",this.curBrowserCfg.ver=+this.ua.split("Version/")[1].split(".")[0]),this.ua.includes("Chrome/")&&(this.curBrowserCfg.name="Chrome",this.curBrowserCfg.ver=+this.ua.split("Chrome/")[1].split(".")[0]),/(Edg|Edge)/i.test(this.ua)&&(this.ua.includes("Edg/")?(this.curBrowserCfg.name="Edg",this.curBrowserCfg.ver=+this.ua.split("Edg/")[1].split(".")[0]):this.ua.includes("Edge/")&&(this.curBrowserCfg.name="Edge",this.curBrowserCfg.ver=+this.ua.split("Edge/")[1].split(".")[0])),this.ua.includes("Firefox/")&&(this.curBrowserCfg.name="Firefox",this.curBrowserCfg.ver=+this.ua.split("Firefox/")[1].split(".")[0]);var e="".concat(this.curBrowserCfg.platform,"_").concat(this.curBrowserCfg.name);console.crlog("[Browser] ".concat(e," ").concat(this.curBrowserCfg.ver)),this.curBrowserCfg.minVer=this.supportVer[e]||999}}])&&s(t.prototype,n),r&&s(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,r}();e.__Rtc.CRBrowser=new r}(window,Ice,CRVideo);var u=__webpack_require__(1911),d=__webpack_require__(2091);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=f(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==f(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var C,v,m=window.CRVideo,y=(window.Ice,function(e,t,n){var r,i="https://".concat(m.webServerAddr).concat(u.Z.getJsCallServerInfo),a=p({RequestId:window.Ice.generateUUID(),MgrSDKVer:m.sdkver,PRODUCT:"H5",APPIDMode:m.APPIDMode},e);r=__Rtc._ReplaceObjParams(a,{UserPswd:"******",Token:"******",CustomPswd:"******",UserName:"demo@cloudroom.com"===a.UserName?"******":a.UserName}),console.crlog("[Login] WebAPI request url: "+i+", data:"+JSON.stringify(r)),(0,d.Z)({url:i,type:"get",timeout:3e4,data:a,success:function(r){if(console.crlog("[Login] WebAPI, /servlet/getJsCallServerInfo result: "+JSON.stringify(r)),__Rtc.postCmd.CallServerInfo=r,m.webLoginOAuth=e,o.Z.auth.setAuth(e),m.callServerLoginOAuth=t,void 0!==r.RspCode&&0==r.RspCode){var i=-1;!function e(){m.callserverExiting?(console.crlog("[Login] callserver exiting.... waiting...."),i=setTimeout((function(){e()}),500)):(console.crlog("[Login] callserver exiting complete...."),clearInterval(i),S(r,n))}()}else I(r,n)},error:function(e){console.crlog("[Login] GetJsCallServerInfo API request fail:"),console.crlog("[Login][Error] ".concat(e)),console.error(e),I({RspCode:11e3,RspDesc:"Server not responding..!"},n)}})}),S=function(e,t){if(console.crlog("[Login] GetCallServerInfoSuccess..."),setTimeout((function(){console.crlog("[Login] WebSDK ".concat(btoa(m.crpswdmd5).replace("=","").split("").reverse().join("")))}),0),e.Data&&e.APPIDMode?(m.APPIDMode=+e.APPIDMode,m.multiProject=e.Data):m.APPIDMode=0,void 0!==e.TokenTime&&0!==e.TokenTime&&R(e.TokenTime),e.stunServerAddr&&""!=e.stunServerAddr&&(m.stunServerAddr=e.stunServerAddr.split(";")[0]),m.loginAuthFlag=1,""===m.LoginParam.nick_name&&e.Data&&e.Data.username&&(m.LoginParam.nick_name=e.Data.username),""===m.LoginParam.user_id&&e.Data&&e.Data.userId&&(m.LoginParam.user_id=e.Data.userId),m.userInfo={nickname:m.LoginParam.nick_name,userId:m.LoginParam.user_id},m.isCallSer)__Rtc.postCmd.IceCruxCreate(t);else{try{console.crlog("[Login] CRVideo_LoginSuccess.target(".concat(m.LoginParam.user_id,", ").concat(t,")"))}catch(e){}CRVideo_LoginSuccess.target(m.LoginParam.user_id,t),CRVideo_UploadingLog()}e.uploadUrl&&m.isUploadLog&&__Rtc.postCmd.IceLogCreate()},I=function(e,t){try{console.crlog("[Login] Login authentication failed, RspCode:".concat(e.RspCode," --- RspDesc:").concat(e.RspDesc)),console.crlog("[Login] CRVideo_LoginFail.target(".concat(window.WEB_SDK_ERR(e.RspCode),",").concat(t,")"))}catch(e){}CRVideo_LoginFail.target(window.WEB_SDK_ERR(e.RspCode),t)},R=function(e){console.crlog("[Login] Update webAPI Token Expire Time: "+e),clearTimeout(C),clearTimeout(v);var t=e>30?1e3*(e-30):0;function n(){console.crlog("[Login] !!!Token Expire!!!"),m.ic&&(clearTimeout(m.HandShark),console.crlog("[Login] CallServer destroy connection..."),m.destroyCruxConnect(),m.LineOffHandler(CRVideo_ERR_DEF.SDK_TOKEN_TIMEOUT)),m.isMeeting&&(console.crlog("[Login] Token失效，退出会议！CRVideo_ExitMeeting('token失效')"),CRVideo_ExitMeeting("token失效"))}console.crlog("[Login] Token剩余有效期：".concat(t/1e3+30," 秒")),t>2147483647||(C=setTimeout((function(){v=setTimeout(n,1e3*(t>30?30:e)),console.crlog("[Login] CRVideo_NotifyTokenWillExpire.target()"),CRVideo_NotifyTokenWillExpire.target()}),t))};m.LineOffHandler=function(e){console.crlog("[CMD] line off .... ".concat(e)),m.callserverCastPrx?(m.callserverCastPrx=null,console.crlog("[Login] CRVideo_LineOff.target(".concat(e,")")),CRVideo_LineOff.target(e)):18==e&&(m.loginAuthFlag=0,m.webLoginOAuth={},console.crlog("[Login] CRVideo_LineOff.target(".concat(e,")")),CRVideo_LineOff.target(e))},m.__LoginCallserver=function(){var e=m.LoginParam.cookie,t=__Rtc.CRBrowser.curBrowserCfg,n=p(p({OEMKey:"".concat(window.__CRNameUP),SDKVersion:m.sdkver,cmd:"Login"},m.callServerLoginOAuth),{},{deviceType:"".concat(t.platform,"_").concat(t.name),language:"zh_CN",module:"CallServer",productType:"h5sdk",userID:m.LoginParam.user_id,userName:m.LoginParam.nick_name}),r=__Rtc._ReplaceObjParams(n,{crPswd:"******"});try{console.crlog("[Login] WebCMD:".concat(JSON.stringify(r),", cookie:").concat(e))}catch(e){}m.webSendcmd(n,e)},window.CRVideo_Login=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";try{console.crlog("[Login] CRVideo_Login(".concat("默认appID"===e?"******":e,",******,").concat(n,",").concat(r,",").concat(i,",").concat(o,")"))}catch(e){}var a=!1;if("CRDEMO"==window.__CRKEY&&(window.location.href.includes("/meetingDemo/index.html")||window.location.href.includes("/meetingDemo/m_index.html")||window.location.href.includes("/remoteRecordDemo/index.html")||window.location.href.includes("/videoCallDemo/index.html")||window.location.href.includes("/videoCallDemo/m_index.html")||window.location.href.includes("/whiteBoardDemo/index.html"))&&(a=!0),"默认appID"===e&&a&&(e="demo@".concat(window.__CRName,".com")),"默认appSecret"===t&&a&&(t="e388f02f750e65ebba95ab9493cda01e".split("").reverse().join("")),!(""!==n&&void 0!==n&&""!==r&&void 0!==r||m.SDKKey&&"MeetSDK"==m.SDKKey))return CRVideo_LoginFail.target(5,o),void CRVideo_UploadingLog();if(0==m.webServerAddr.replace(/\s+/g,"").length)return CRVideo_LoginFail.target(201,o);m.crpswdmd5=t,m.loginCookie=o,m.LoginParam={account:e,psw:t,nick_name:n,user_id:r,CustomID:r,CustomPswd:i||"",cookie:o};try{console.crlog("[Login] Login param: ".concat(JSON.stringify(window.__Rtc._ReplaceObjParams(m.LoginParam,{account:"demo@cloudroom.com"===e?"******":e,psw:"******"}))))}catch(e){}y(i?{UserName:e,UserPswd:t,CustomID:r,CustomPswd:i||""}:{UserName:e,UserPswd:t},{crAcnt:e,crPswd:t},o)},window.CRVideo_LoginByToken=function(e,t,n,r,i){try{console.crlog("[Login] CRVideo_LoginByToken('******',".concat(t,",").concat(n,",").concat(r,",").concat(i,")"))}catch(e){}var o,c;try{var s=e.split(".")[1],l=!!s&&a.Z.base64decode(s).replace(/\0/g,"");o=JSON.parse(l)}catch(e){console.crlog("[Login] token本地解析失败"),console.crlog(e);try{console.crlog("[Login] CRVideo_LoginFail.target(1,".concat(i,");"))}catch(e){}return CRVideo_LoginFail.target(1,i),void CRVideo_UploadingLog()}m.LoginParam={account:o.appID,nick_name:t,user_id:n,CustomID:n,CustomPswd:r||"",cookie:i||""},c=r?{Token:e,CustomID:n,CustomPswd:r||""}:{Token:e};var u={crToken:e};try{console.crlog("[Login] Login param: ".concat(JSON.stringify(m.LoginParam)))}catch(e){}y(c,u,i)},window.CRVideo_UpdateToken=function(e){console.crlog("[Login] CRVideo_UpdateToken('******')");var t="https://".concat(m.webServerAddr).concat(u.Z.HandToken),n={ClientVer:"",Language:"",RequestId:window.Ice.generateUUID(),MgrSDKVer:m.sdkver,PRODUCT:"H5",Token:e},r=__Rtc._ReplaceObjParams(n,{Token:"******"});try{console.crlog("[Login] WebAPI UpdateToken: url: "+t+" ,data: "+JSON.stringify(r))}catch(e){}(0,d.Z)({url:t,data:{_data_:JSON.stringify(n)},dataType:"jsonp",jsonp:"callback",success:function(t){if(console.crlog("[Login] WebAPI UpdateToken result: "+JSON.stringify(t)),0==t.RspCode){t.TokenTime&&R(t.TokenTime);try{console.crlog("[Login] CRVideo_UpdateTokenRslt.target(".concat(CRVideo_ERR_DEF.NOERR,")"))}catch(e){}CRVideo_UpdateTokenRslt.target(CRVideo_ERR_DEF.NOERR),m.webLoginOAuth={Token:e},m.callServerLoginOAuth={crToken:e}}else{try{console.crlog("[Login] CRVideo_UpdateTokenRslt.target(".concat(CRVideo_ERR_DEF.SDK_TOKEN_AUTH_FAILED,")"))}catch(e){}CRVideo_UpdateTokenRslt.target(CRVideo_ERR_DEF.SDK_TOKEN_AUTH_FAILED)}},error:function(e){try{console.crlog("[Login] CRVideo_UpdateTokenRslt.target(".concat(CRVideo_ERR_DEF.NOSERVER_RSP,")"))}catch(e){}CRVideo_UpdateTokenRslt.target(CRVideo_ERR_DEF.NOSERVER_RSP)}})},window.CRVideo_Logout=function(){if(m.loginAuthFlag=0,m.webLoginOAuth={},m.LoginParam={},console.crlog("[Login] CRVideo_Logout()"),clearInterval(m.resetAdapterTimer),clearTimeout(m.HandShark),m.isCallSer){m.callserverExiting=!0,setTimeout((function(){m.callserverExiting=!1}),3e3);var e={cmd:"Logout",module:"CallServer",sessionID:m.sessionID};try{console.crlog("[Login] WebCMD:".concat(JSON.stringify(e),",cookie:").concat(cookie))}catch(e){}m.webSendcmd(e),m.CallID="",m.HandErrTimes=0,m.KEEPLIVE_COMMIT=!1}},m.loginCallback={Login:function(e,t,n){try{console.crlog("[Login] CRVideo_Login -- CMDCallback --\x3e Login: ".concat(JSON.stringify(e)))}catch(e){}0==e.RspCode?(console.crlog("[Login] CallServer login success!"),m.sessionID=e.sessionID,m.isLoginCallserver=!0,console.crlog("[Login] CRVideo_LoginSuccess.target(".concat(e.userID,", ").concat(n,")")),CRVideo_LoginSuccess.target(e.userID,n),CRVideo_UploadingLog(),console.crlog("[Login] CallServer sessionID: "+e.sessionID),console.crlog("[Login] Begain shakeHand..."),window.CRVideo_ShakeHand()):(console.crlog("[Login] CallServer login fail!"),console.crlog("[Login] CRVideo_LoginFail.target(".concat(ICE_SDK_ERR(e.RspDesc),",").concat(n,")")),CRVideo_LoginFail.target(ICE_SDK_ERR(e.RspDesc),n),CRVideo_UploadingLog())},Logout:function(e,t){if(0==e.RspCode)console.crlog("[Login] Callserver logout success..."),m.destroyCruxConnect(),setTimeout((function(){CRVideo_UploadingLog()}),1e3);else{console.crlog("[Login] Callserver logout fail...");try{console.crlog("[Login] ".concat(JSON.stringify(e)))}catch(e){}}m.isLoginCallserver=!1},ServerKickoutUser:function(e){m.HandErrTimes=0,m.isLoginCallserver=!1,clearTimeout(m.HandShark),m.LineOffHandler(CRVideo_ERR_DEF.SDK_USER_BEEN_KICKOUT)}},window.CRVideo_LineOff=new m.CbProxy("CRVideo_LineOff"),window.CRVideo_LoginSuccess=new m.CbProxy("CRVideo_LoginSuccess"),window.CRVideo_LoginFail=new m.CbProxy("CRVideo_LoginFail"),window.CRVideo_NotifyTokenWillExpire=new m.CbProxy("CRVideo_NotifyTokenWillExpire"),window.CRVideo_UpdateTokenRslt=new m.CbProxy("CRVideo_UpdateTokenRslt"),window.CRVideo_LogoutSuccess=new m.CbProxy("CRVideo_LogoutSuccess"),window.CRVideo_LogoutFail=new m.CbProxy("CRVideo_LogoutFail");__webpack_require__(967),__webpack_require__(7959),__webpack_require__(9474);CRVideo.addEventListener=function(e,t,n){e.addEventListener?e.addEventListener(t,n):e.attachEvent&&e.attachEvent("on"+t,n)},CRVideo.ic=null,CRVideo.webServerAddr=null,CRVideo.proxy=null,CRVideo.logproxy=null,CRVideo.queuingID=null,CRVideo.sessionID=null,CRVideo.cookie="",CRVideo.MeetInfoObj=null,CRVideo.CallID="",CRVideo.HandErrTimes=0,CRVideo.loginAuthFlag=0,CRVideo.meetSubject="test",CRVideo.IceAddr=null,CRVideo.logServer=null,CRVideo.logUUID="",__Rtc._ReplaceObjParams=function(e,t){var n=JSON.parse(JSON.stringify(e));for(var r in t)null!=n[r]&&(n[r]=t[r]);return n},__Rtc.postCmd={config:{HandSharkTime:1e4}},function(e,t){var n={},r=["Ice::ConnectionLostException","Ice::ConnectFailedException"],i=function(){var e=new Ice.InitializationData;return e.properties=Ice.createProperties(),e.properties.setProperty("Ice.Trace.Network","0"),e.properties.setProperty("Ice.Trace.Protocol","0"),e.properties.setProperty("Ice.ACM.Client","0"),e.properties.setProperty("Ice.ACM.Server","0"),e.properties.setProperty("Ice.Default.EncodingVersion","1.0"),Ice.initialize(e)},o=function(){console.crlog("[Callsvr] destroy Crux Connect on IceCruxCreate..."),c();var r=e.CallServerInfo,o=r.callSvrList,s=new Array;s=r.callSvrList.indexOf(";")>-1?o.split(";")[0]:o;var l=a.Z.parse_url("https://"+s),u="jserver:wss";l?(n.crux=i(),l.path&&(u+=" -r "+l.path),l.host&&(u+=" -h "+l.host),l.port?u+=" -p "+l.port:u+=" -p 443",console.crlog("[Callsvr] "+u),CRVideo.proxy=n.crux.stringToProxy(u),t.ic=n.crux,CRVideo_SetAdapter().then(CRVideo.__LoginCallserver).catch((function(e){CRVideo_LoginFail.target(204,CRVideo.LoginParam.cookie),CRVideo_UploadingLog()}))):console.error("[Callsvr] error: jserver parseUrl")},c=function(){console.crlog("[Callsvr] Websockt destroy Crux connect..."),n.crux&&n.crux.destroy&&(clearTimeout(CRVideo.HandShark),n.crux.destroy(),clearInterval(CRVideo.resetAdapterTimer),CRVideo.callserverCastPrx=null,setTimeout((function(){CRVideo.callserverExiting=!1}),100))},s=function(){n.Log&&n.Log.destroy&&(console.crlog("[LogServer] Websockt destroy Log connect..."),n.Log.destroy(),CRVideo.logproxy=null)};e.IceCruxCreate=o,CRVideo.destroyCruxConnect=c,e.IceLogCreate=function(){console.crlog("[LogServer] destroy Log Connect on IceLogCreate..."),s();var t="",r=e.CallServerInfo;if(r?t=r.uploadUrl.split(";")[0]?r.uploadUrl.split(";")[0]:r.uploadUrl.split(";")[1]:window.rtcProxy.crmt&&window.rtcProxy.crmt.WEBLOGCFG&&(t=window.rtcProxy.crmt.WEBLOGCFG),t){var o=a.Z.parse_url("https://"+t);if(o){var c="Log.ClientLogServer:wss";o.path&&(c+=" -r "+o.path),o.host&&(c+=" -h "+o.host),o.port?c+=" -p "+o.port:c+=" -p 443",console.crlog("[LogServer] logserver: "+c),n.Log=i(),CRVideo.logproxy=n.Log.stringToProxy(c),CRVideo_LoggerAdapter();var l="";window.sessionStorage&&((l=window.sessionStorage.getItem("logUUID"))||(l=Ice.generateUUID(),window.sessionStorage.setItem("logUUID",l))),CRVideo.logUUID=l,null==CRVideo.isUploadLog&&(CRVideo.isUploadLog=0),CRVideo.logIceConnect=n.Log,CRVideo_UploadingReport()}else console.error("[LogServer] error: ClientLogServer parseUrl")}},CRVideo.destroyLogConnect=s,e.destroyLogConnect=s,e.resetCruxConnect=function(e){var t=e.toString();r.find((function(e){return-1!=t.indexOf(e)}))&&(console.crlog("[Callsvr] callserver loginAgain..."),o())},e.errorLoginAgain=r}(__Rtc.postCmd,CRVideo);var w={NotifyQueueStatus:CRVideo.queCallback.NotifyQueueStatus,NotifyPosition:CRVideo.queCallback.NotifyPosition,AssignUser:CRVideo.queCallback.AssignUser,AssignCancel:CRVideo.queCallback.AssignCancel,NotifyUserEnter:CRVideo.queCallback.NotifyUserEnter,NotifyUserLeave:CRVideo.queCallback.NotifyUserLeave,ServerAccept:CRVideo.callSvrCallback.ServerAccept,ServerDecline:CRVideo.callSvrCallback.ServerDecline,ServerCall:CRVideo.callSvrCallback.ServerCall,ServerPushUserStatus:CRVideo.callSvrCallback.ServerPushUserStatus,ServerReleaseCall:CRVideo.callSvrCallback.ServerReleaseCall,ServerCancelCall:CRVideo.callSvrCallback.ServerCancelCall,ServerKickoutUser:CRVideo.loginCallback.ServerKickoutUser,invite:__Rtc.CRRTCInvite.ICECallback.invite,acceptInvite:__Rtc.CRRTCInvite.ICECallback.acceptInvite,rejectInvite:__Rtc.CRRTCInvite.ICECallback.rejectInvite,cancelInvite:__Rtc.CRRTCInvite.ICECallback.cancelInvite,inviteResult:__Rtc.CRRTCInvite.ICECallback.inviteResult},b={Login:CRVideo.loginCallback.Login,GetServiceData:CRVideo.queCallback.GetServiceData,GetQueueStatus:CRVideo.queCallback.GetQueueStatus,UserEnter:CRVideo.queCallback.UserEnter,UserLeave:CRVideo.queCallback.UserLeave,AgentEnter:CRVideo.queCallback.AgentEnter,AgentLeave:CRVideo.queCallback.AgentLeave,AssignResponse:CRVideo.queCallback.AssignResponse,StartStatusPush:CRVideo.callSvrCallback.StartStatusPush,StopStatusPush:CRVideo.callSvrCallback.StopStatusPush,GetUserStatus:CRVideo.callSvrCallback.GetUserStatus,GetUserServiceStatus:CRVideo.queCallback.GetUserServiceStatus,GetAgentServiceStatus:CRVideo.queCallback.GetAgentServiceStatus,ClientCustomStatusUpdate:CRVideo.callSvrCallback.ClientCustomStatusUpdate,RequestUser:CRVideo.queCallback.RequestUser,GetQueueUsers:CRVideo.queCallback.GetQueueUsers,ClientCall:CRVideo.callSvrCallback.ClientCall,ClientAccept:CRVideo.callSvrCallback.ClientAccept,ClientDecline:CRVideo.callSvrCallback.ClientDecline,ClientReleaseCall:CRVideo.callSvrCallback.ClientReleaseCall,Logout:CRVideo.loginCallback.Logout,ShakeHand:function(e,t,n){0==e.RspCode?function(e,t){var n=(new Date).getTime()-t;0==e.RspCode?(console.crlog("[Callserver] Callserver shakeHand success, delay: ".concat(n,"ms")),CRVideo.HandErrTimes=CRVideo.HandErrTimes-1):console.crlog("[Callserver] Callserver shakeHand fail: ".concat(JSON.stringify(e),","))}(e,n):console.crlog("[Callsvr] ShakeHandRslt"+e.RspCode)}},E={data:{sendTask:[]},receive:function(e,t,n){var r=0,i=t[r++],o=t[r++]<<24|t[r++]<<16|t[r++]<<8|t[r++],c=a.Z.Uint8ArrToChar(t.slice(r,r+=o));if(0===i){console.crlog("[Callsvr] Received bufferData, received header data...");var s=t[r++]<<24|t[r++]<<16|t[r++]<<8|t[r++],l=a.Z.Uint8ArrToChar(t.slice(r,r+=s)),u=t[r++]<<24|t[r++]<<16|t[r++]<<8|t[r++];this.data[c]={type:i,fileName:l,dataSize:u,dataBurst:[]}}else if(1===i){this.isStarting||(console.crlog("[Callsvr] Received bufferData, start to recive part data..."),this.isStarting=!0);var d=t[r++]<<24|t[r++]<<16|t[r++]<<8|t[r++],f=t[r++]<<24|t[r++]<<16|t[r++]<<8|t[r++],h=Array.prototype.concat.apply([],t.slice(r,f+r));this.data[c].type=i,this.data[c].dataBurst.push({start:d,length:f,data:h})}else if(2===i){console.crlog("[Callsvr] Received bufferData, transmit finished...");var p=this.data[c].dataBurst;p.sort((function(e,t){return e.start-t.start}));var _=0,g=[];console.crlog("[Callsvr] Received bufferData, start to concat...");for(var C=0;C<p.length;C++)_+=p[C].length,g=g.concat(p[C].data);if(g=a.Z.Uint8ArrToChar(g),_===this.data[c].dataSize)try{console.crlog("[Callsvr] CRVideo_NotifyBufferData.target(".concat(e.sourceUserId,",bufferData)")),CRVideo_NotifyBufferData.target(e.sourceUserId,g)}catch(e){console.error(e)}}n.ice_response(JSON.stringify({RspCode:0,RspDesc:"ok"}))},receiveFile:function(e,t,n){var r=0,i=t[r++],o=t[r++]<<24|t[r++]<<16|t[r++]<<8|t[r++],c=a.Z.Uint8ArrToChar(t.slice(r,r+=o));if(0===i){console.crlog("[Callsvr] Received fileData, received header data...");var s=t[r++]<<24|t[r++]<<16|t[r++]<<8|t[r++],l=a.Z.Uint8ArrToChar(t.slice(r,r+=s)).split("\\").pop(),u=t[r++]<<24|t[r++]<<16|t[r++]<<8|t[r++];this.data[c]={type:i,fileName:l,dataSize:u,dataBurst:[]}}else if(1===i){this.isStarting||(console.crlog("[Callsvr] Received fileData, start to recive part data..."),this.isStarting=!0);var d=t[r++]<<24|t[r++]<<16|t[r++]<<8|t[r++],f=t[r++]<<24|t[r++]<<16|t[r++]<<8|t[r++],h=Array.prototype.concat.apply([],t.slice(r,f+r));this.data[c].type=i,this.data[c].dataBurst.push({start:d,length:f,data:h})}else if(2===i){console.crlog("[Callsvr] Received fileData, transmit finished...");var p=this.data[c].dataBurst;p.sort((function(e,t){return e.start-t.start}));var _=0,g=[];console.crlog("[Callsvr] Received fileData, start to concat...");for(var C=0;C<p.length;C++)_+=p[C].length,g=g.concat(p[C].data);if(_===this.data[c].dataSize)try{this.writeFile(e.sourceUserId,new Uint8Array(g).buffer,this.data[c].fileName,c)}catch(e){console.error(e)}}n.ice_response(JSON.stringify({RspCode:0,RspDesc:"ok"}))},writeFile:function(e,t,n,r){var i=a.Z.getFileType(n),o=new Blob([t]);window.URL.createObjectURL(o);console.crlog("[Callsvr] Recevied file success, fileName: ".concat(n,", fileType: ").concat(i,", size: ").concat(parseInt(o.size/1024),"KB")),console.crlog("[Callsvr] CRVideo_NotifyFileData.target(".concat(e,", ").concat(t,", ").concat(n,")")),CRVideo_NotifyFileData.target(e,t,n)},sendFile:function(e,t,n,r,i){var o=102400,c=n,s=a.Z.splitCutArr(c,o),l=c.length,u=a.Z.charToUint8Arr(t),d=u.length,f=new T,h=f.create(0,8+u.length),p=h.length-8-u.length;h[p++]=(4278190080&d)>>24,h[p++]=(16711680&d)>>16,h[p++]=(65280&d)>>8,h[p++]=255&d;for(var _=0;_<u.length;_++)h[p++]=u[_];h[p++]=(4278190080&l)>>24,h[p++]=(16711680&l)>>16,h[p++]=(65280&l)>>8,h[p++]=255&l;var g={cmd:"SendFile",module:"CallServer",sessionID:CRVideo.sessionID,sourceUserId:CRVideo.LoginParam.user_id||"",targetUserId:e};function C(e){E.data.sendTask.forEach((function(e){e.uuid==r&&(e.state=3)})),console.crlog("[Callsvr] CRVideo_SendFileRslt.target(".concat(r,",1,").concat(i,")")),CRVideo_SendFileRslt.target(r,e||1,i)}E.data.sendTask.forEach((function(e){e.uuid==r&&(e.state=1)})),CRVideo.webSendBuffer(g,h,(function(e,t){if(0===t){var n=0;a(e)}else C(t);function r(t,n){var r=t*o,l=s.length?o:c.length%o,u=f.create(1,l+8),d=u.length-(l+8);u[d++]=(4278190080&r)>>24,u[d++]=(16711680&r)>>16,u[d++]=(65280&r)>>8,u[d++]=255&r,u[d++]=(4278190080&l)>>24,u[d++]=(16711680&l)>>16,u[d++]=(65280&l)>>8,u[d++]=255&l;for(var h=0;h<n.length;h++)u[d++]=n[h];CRVideo_SendProgress.target(e,r,c.length,i),CRVideo.webSendBuffer(g,u,a,e,i)}function a(e,t){if(t&&0!==t)C(t);else{var o=E.data.sendTask.find((function(t){return t.uuid==e})),a=s.shift();if(a)1==o.state?(r(n,a),n++):(console.crlog("[Callsvr] CRVideo_SendFileRslt.target(".concat(e,",1199,").concat(i,")")),CRVideo_SendFileRslt.target(e,1199,i));else{var c=f.create(2,0);CRVideo.webSendBuffer(g,c,(function(e,t){0===t?(E.data.sendTask.forEach((function(t){t.uuid==e&&(t.state=2)})),console.crlog("[Callsvr] CRVideo_SendFileRslt.target(".concat(e,",0,").concat(i,")")),CRVideo_SendFileRslt.target(e,0,i)):C(t)}),e,i)}}}}),r,i)}};var D=Ice.Class(SendCmd.Cmd,{sendCmd_async:function(e,t,n){e.ice_response(JSON.stringify({RspCode:0,RspDesc:"ok"}));var r=JSON.parse(t),i=r.cmd;r.module;if(null!=i){console.crlog("[Callsvr] Received cmd callback:".concat(i," --\x3e ").concat(JSON.stringify(r)));try{w[i](r)}catch(e){console.crlog(e),console.error(e)}}},sendBuffer_async:function(e,t,n,r){e.ice_response(JSON.stringify({RspCode:0,RspDesc:"ok"}));var o=JSON.parse(t);if("SendCMD"==o.cmd){var a=function(e){var t,n,r,i,o,a;for(t="",r=e.length,n=0;n<r;)switch((i=e[n++])>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:t+=String.fromCharCode(i);break;case 12:case 13:o=e[n++],t+=String.fromCharCode((31&i)<<6|63&o);break;case 14:o=e[n++],a=e[n++],t+=String.fromCharCode((15&i)<<12|(63&o)<<6|(63&a)<<0)}return t}(n);i.apis.includes("CRVideo_NotifyCmdData")||console.crlog("[Callsvr] CRVideo_NotifyCmdData.target(".concat(o.sourceUserId,", ").concat(a,");")),CRVideo_NotifyCmdData.target(o.sourceUserId,a)}else"SendBuffer"==o.cmd?E.receive(o,n,e):"SendFile"==o.cmd&&E.receiveFile(o,n,e)}}),P=Ice.Class(LogSpace.ClientLogServer,{log:function(e){console.crlog("[Callsvr] log:"+e)},logFatal:function(e){console.crlog("[Callsvr] logFatal:"+e)},usrReport:function(e){console.crlog("[Callsvr] usrReport:"+e)},logDetail:function(e){console.crlog("[Callsvr] logDetail:"+e)}});function T(){this.uuid=Ice.generateUUID(),this.CommonArray=[],this.init()}window.CRVideo_SetAdapter=function(){var e=new Promise((function(e,t){Ice.Promise.try2((function(){SendCmd.CmdPrx.checkedCast(CRVideo.proxy).then((function(t){return CRVideo.callserverCastPrx=t,console.crlog("[Callsvr] Ice set adapter success!"),CRVideo.ic.createObjectAdapter("").then((function(e){CRVideo.cruxAdapter=e,e.add(new D,CRVideo.ic.stringToIdentity("jclient")),e.activate();var t=CRVideo.callserverCastPrx.ice_getCachedConnection();if(null==t)return console.crlog("[Callsvr] callserver ice_getCachedConnection is null!"),!1;t.setAdapter(e)})),e()})).exception((function(e){return console.crlog("[Callsvr] !!!Callserver checkedCast fail. is: "+e),t()}))})).exception((function(e){return t()}))}));return e},window.CRVideo_LoggerAdapter=function(){Ice.Promise.try2((function(){CRVideo.ServerLogger=LogSpace.ClientLogServerPrx.checkedCast(CRVideo.logproxy).then((function(e){CRVideo.logIceConnect.createObjectAdapter("").then((function(t){CRVideo.logServerPrx=e,CRVideo.logServerAdapter=t,t.add(new P,Ice.stringToIdentity("jclient"));var n=CRVideo.logServerPrx.ice_getCachedConnection();if(null==n)return console.crlog("[Callsvr] log ice_getCachedConnection is null!"),!1;n.setAdapter(t)}))}))})).exception((function(e){console.crlog("[Callsvr] There are several reasons for websocket errors: "+e.toString()),Ice.Promise.try2(__Rtc.postCmd.destroyLogConnect).finally((function(){process.exit(1)}))}))},T.prototype.init=function(){var e=0,t=this.uuid.length;this.CommonArray[e++]=0,this.CommonArray[e++]=(4278190080&t)>>24,this.CommonArray[e++]=(16711680&t)>>16,this.CommonArray[e++]=(65280&t)>>8,this.CommonArray[e++]=255&t;for(var n=new TextEncoder("utf-8").encode(this.uuid),r=0;r<t;r++)this.CommonArray[e++]=n[r]},T.prototype.create=function(e,t){for(var n=new Uint8Array(this.CommonArray.length+t),r=0;r<this.CommonArray.length;r++)n[r]=this.CommonArray[r];return n[0]=e,n},T.prototype.getUUID=function(){return this.uuid},window.CRVideo_SendBuffer=function(e,t,n){function r(e){E.data.sendTask.forEach((function(e){e.uuid==u&&(e.state=3)})),console.crlog("[Callsvr] CRVideo_SendBuffer finished： "+JSON.stringify(f)),CRVideo_SendBufferRslt.target(u,e||1,n)}var i=102400,o=new TextEncoder("utf-8").encode(t.toString()),a=function(e,t){for(var n=0,r=[];n<e.length;)r.push(e.slice(n,n+=t));return r}(o,i),c=o.length,s=new T,l=s.create(0,8),u=s.getUUID();E.data.sendTask.push({uuid:u,state:0});var d=l.length-8;l[d++]=l[d++]=l[d++]=l[d++]=0,l[d++]=(4278190080&c)>>24,l[d++]=(16711680&c)>>16,l[d++]=(65280&c)>>8,l[d++]=255&c;var f={cmd:"SendBuffer",module:"CallServer",sessionID:CRVideo.sessionID,sourceUserId:CRVideo.LoginParam.user_id||"",targetUserId:e};return E.data.sendTask.forEach((function(e){e.uuid==u&&(e.state=1)})),CRVideo.webSendBuffer(f,l,(function(e,t){if(0===t){var c=0;u(e)}else r(t);function l(t,c){var l=t*i,d=a.length?i:o.length%i,h=s.create(1,d+8),p=h.length-(d+8);h[p++]=(4278190080&l)>>24,h[p++]=(16711680&l)>>16,h[p++]=(65280&l)>>8,h[p++]=255&l,h[p++]=(4278190080&d)>>24,h[p++]=(16711680&d)>>16,h[p++]=(65280&d)>>8,h[p++]=255&d;for(var _=0;_<c.length;_++)h[p++]=c[_];CRVideo_SendProgress.target(e,l,o.length,n),CRVideo.webSendBuffer(f,h,(function(e,t){0===t?u(e):r(t)}),e,n)}function u(e){var t=E.data.sendTask.find((function(t){return t.uuid==e})),i=a.shift();if(i)1==t.state?(l(c,i),c++):(console.crlog("[Callsvr] CRVideo_SendBufferRslt.target(".concat(e,",1199,").concat(n,")")),CRVideo_SendBufferRslt.target(e,1199,n));else{var o=s.create(2,0);CRVideo.webSendBuffer(f,o,(function(e,t){0===t?(E.data.sendTask.forEach((function(t){t.uuid==e&&(t.state=2)})),CRVideo_SendBufferRslt.target(e,0,n)):r(t)}),e,n)}}}),u,n),u},window.CRVideo_SendFile=function(e,t,n){console.crlog("[Callsvr] CRVideo_SendFile(".concat(e,",").concat(t.name,")"));var r=Ice.generateUUID();try{var i=t.name,o=new FileReader;o.readAsArrayBuffer(t),o.onload=function(t){var a=new Int8Array(o.result);E.data.sendTask.push({uuid:r,state:0}),E.sendFile(e,i,a,r,n)}}catch(e){throw console.crlog("[Callsvr] [error] ".concat(e)),e}return r},window.CRVideo_SendCmd=function(e,t,n){try{i.apis.includes("CRVideo_SendCmd")||console.crlog("[Callsvr] CRVideo_SendCmd(".concat(e,",").concat(t,",").concat(n,")"))}catch(e){throw e}var r={cmd:"SendCMD",module:"CallServer",sessionID:CRVideo.sessionID,sourceUserId:CRVideo.LoginParam.user_id||"",targetUserId:e},o=new TextEncoder("utf-8").encode(t.toString()),a=Ice.generateUUID();return CRVideo.webSendBuffer(r,o,CRVideo_SendCmdRslt.callback,a,n),a},window.CRVideo_CancelSend=function(e){E.data.sendTask.forEach((function(t){t.uuid==e&&(t.state=0)}))},CRVideo.webSendBuffer=function(e,t,n,r,i){Ice.Promise.try2((function(){CRVideo.callserverCastPrx&&(CRVideo.ic.createObjectAdapter("").then((function(e){CRVideo.cruxAdapter=e,e.add(new D,CRVideo.ic.stringToIdentity("jclient")),e.activate();var t=CRVideo.callserverCastPrx.ice_getCachedConnection();if(null==t)return console.crlog("[Callsvr] callserver ice_getCachedConnection is null!"),!1;t.setAdapter(e)})),CRVideo.callserverCastPrx.sendBuffer(JSON.stringify(e),t).then((function(t){void 0!==n&&n(r,CRVideo_ERR_DEF.NOERR,i);e.cmd})).exception((function(e){var t=e.reason;void 0!==n&&(t.includes("not found")?n(r,CRVideo_ERR_DEF.SENDDATA_TARGETINVALID,i):n(r,CRVideo_ERR_DEF.UNKNOWERR,i)),console.crlog("[Callsvr] ex = "+e),console.error(e),console.crlog("[Callsvr] reason = "+e.reason)})))})).exception((function(e){console.crlog("[Callsvr] There are several reasons for websocket errors: "+e.toString()),Ice.Promise.try2(CRVideo.destroyCruxConnect).finally((function(){process.exit(1)}))}))},CRVideo.webSendcmd=function(e,t,n){var r=e.cmd;e.module;CRVideo.callserverCastPrx&&CRVideo.callserverCastPrx.sendCmd(JSON.stringify(e)).then((function(i){var o=CRVideo.callserverCastPrx.ice_getCachedConnection();null!=o?o.setAdapter(CRVideo.cruxAdapter):console.crlog("[Callsvr] callserver ice_getCachedConnection is null!");var a=JSON.parse(i);0!=a.RspCode&&console.crlog("[Callsvr] !!!error. sendcmdName: "+r+", RspCode: "+a.RspCode+", RspDesc: "+a.RspDesc),b[r]&&b[r](a,e,t,n)})).exception((function(i){console.crlog("[Callsvr] !!!Callserver sendcmd：".concat(r," fail. error: ").concat(i.error,", reason: ").concat(i.reason)),3!==i.error&&1006!==i.error||CRVideo.LineOffHandler(204),console.error(i),b[r]&&b[r]({RspCode:204},e,t,n)}))},CRVideo.webLogDetail=function(e,t,n){CRVideo.logproxy&&Ice.Promise.try2((function(){LogSpace.ClientLogServerPrx.checkedCast(CRVideo.logproxy).then((function(r){r.logDetail(e,t,n).then((function(e){})).exception((function(e){console.crlog("[LOG] Log uploading fail!",e)}))})).exception((function(e){console.crlog("[LOG] !!! log checkedCast fail. is: "+e),-1!=__Rtc.postCmd.errorLoginAgain.indexOf(e.toString())&&__Rtc.postCmd.IceLogCreate()}))})).exception((function(e){console.crlog("[Callsvr] There are several reasons for websocket errors: "+e.toString()),Ice.Promise.try((function(){CRVideo.destroyCruxConnect})).finally((function(){process.exit(1)}))}))},window.CRVideo_ShakeHand=function(){if(clearTimeout(CRVideo.HandShark),CRVideo.HandShark=setTimeout(CRVideo_ShakeHand,__Rtc.postCmd.config.HandSharkTime),CRVideo.HandErrTimes>120)CRVideo.HandErrTimes=0,console.crlog("[Callsvr] HandErrTimes error: Abnormal dropped!!!!!"),CRVideo.LineOffHandler(CRVideo_ERR_DEF.SOCKETEXCEPTION);else{var e=(new Date).getTime(),t={cmd:"ShakeHand",module:"CallServer",sessionID:CRVideo.sessionID};CRVideo.CallID&&(t.callID=CRVideo.CallID),CRVideo.webSendcmd(t,e),CRVideo.HandErrTimes=CRVideo.HandErrTimes+1}},CRVideo.callServerSendCMD=function(e){return new Promise((function(t,n){Ice.Promise.try2((function(){if(!CRVideo.callserverCastPrx)return console.crlog("[Callserver] Did not login callserver!"),n("[Callserver] Did not login callserver!");var r=JSON.stringify(Object.assign(e,{sessionID:CRVideo.sessionID}));CRVideo.callserverCastPrx.sendCmd(r).then((function(e){return t(JSON.parse(e))})).exception((function(t){if(console.crlog("[Callserver] SendCMD Fail, cmd: ".concat(e.cmd)),console.crlog(t),!t||3!==t.error)return n(t);CRVideo.LineOffHandler(204)}))})).exception((function(e){return console.crlog(e.toString()),n("[Error] Callserver connect Fail, ".concat(e.toString()))}))}))},window.CRVideo_NotifyCmdData=new CRVideo.CbProxy("CRVideo_NotifyCmdData"),window.CRVideo_SendCmdRslt=new CRVideo.CbProxy("CRVideo_SendCmdRslt"),window.CRVideo_SendBufferRslt=new CRVideo.CbProxy("CRVideo_SendBufferRslt"),window.CRVideo_SendProgress=new CRVideo.CbProxy("CRVideo_SendProgress"),window.CRVideo_SendFileRslt=new CRVideo.CbProxy("CRVideo_SendFileRslt"),window.CRVideo_SendProgress=new CRVideo.CbProxy("CRVideo_SendProgress"),window.CRVideo_CancelSendRslt=new CRVideo.CbProxy("CRVideo_CancelSendRslt"),window.CRVideo_NotifyBufferData=new CRVideo.CbProxy("CRVideo_NotifyBufferData"),window.CRVideo_NotifyFileData=new CRVideo.CbProxy("CRVideo_NotifyFileData"),window.CRVideo_NotifyCancelSend=new CRVideo.CbProxy("CRVideo_NotifyCancelSend");__webpack_require__(365);var x=__webpack_require__(3854);Cr.LHProxy=function(e){this.__config=e,!this.__config||"ws"!=this.__config.protocol&&"wss"!=this.__config.protocol?this._protocol="wss":this._protocol=this.__config.protocol,this._type="html5",this._logining=!1},Cr.LHProxy.prototype.initIce=function(){var e=new Cr.AsyncResult;return this.callbackDict={},this._initData=new Ice.InitializationData,this._initData.properties=Ice.createProperties(),this._initData.properties.setProperty("Ice.Trace.Network","0"),this._initData.properties.setProperty("Ice.Trace.Protocol","0"),this._initData.properties.setProperty("Ice.ACM.Client","0"),this._initData.properties.setProperty("Ice.Default.EncodingVersion","1.0"),this._initData.properties.setProperty("Ice.ThreadPool.Client.Serialize","1"),this._initData.properties.setProperty("Ice.ThreadPool.Server.Serialize","1"),e.complete([0,""]),e},Cr.LHProxy.prototype.registeredCallback=function(e,t){if(this.callbackDict[e])throw"已经存在的注册对象";this.callbackDict[e]=t},Cr.LHProxy.prototype.unregisterCallback=function(e,t){this.callbackDict[e]=null,delete this.callbackDict[e]},Cr.LHProxy.prototype.callCallback=function(e,t){var n=this.callbackDict[e];if(n&&"function"==typeof n)try{n.call(null,t)}catch(e){console.crlog("[SDK][Error] ".concat(e)),console.error(e)}},Cr.LHProxy.prototype.initCon=function(){try{this._communicator&&(this._communicator.destroy(),this._communicator=null),this._connection&&(this._connection.destroy(0),this._connection=null),this._adapter&&(this._adapter.destroy(),this._adapter=null),this._routerPrx&&(this._routerPrx.destroySession(),this._routerPrx=null)}catch(e){console.crlog("[RTC] ice Init fail.!")}},Cr.LHProxy.prototype.refreshSession=function(){var e=new Cr.AsyncResult;try{this._routerPrx.refreshSession().then(function(){e.complete([0,""])}.bind(this)).exception(function(t){e.complete([204,"网络错误"]),console.crlog&&console.crlog(t.toString()),console.crlog&&console.crlog(t.stack)}.bind(this))}catch(t){e.complete([3,t.toString()])}return e},Cr.LHProxy.prototype.keepAlive=function(e){var t=new Cr.AsyncResult;try{var n=new Ice.HashMap;n.set("w",e.toString()),this._conferenceRequest.keepAlive(n).then(function(){t.complete([0,""])}.bind(this)).exception(function(e){t.complete([204,"网络错误"]),console.crlog&&console.crlog(e.toString()),console.crlog&&console.crlog(e.stack)}.bind(this))}catch(e){t.complete([3,e.toString()])}return t},Cr.LHProxy.prototype.exit=function(e){var t=new Cr.AsyncResult;try{console.crlog("[Ice] this._conferenceRequest.exit(".concat(e,")")),this._conferenceRequest.exit(e).then(function(){t.complete([0,""])}.bind(this)).exception(function(e){t.complete([204,"网络错误"]),console.crlog&&console.crlog(e.toString()),console.crlog&&console.crlog(e.stack)}.bind(this))}catch(e){t.complete([3,e.toString()])}return t},Cr.LHProxy.prototype.getActiveMembers=function(){var e=new Cr.AsyncResult;try{new Ice.HashMap;this._conferenceRequest.getActiveMembers().then(function(t){for(var n in t){var r=t[n].extProperty.get(Conference.MINFO_OPENEDCAMIDS);null!=r&&(r=r.split(";")[0]),t[n].openedCamIDs=r}e.complete([0,"",t])}.bind(this)).exception(function(t){e.complete([204,"网络错误"]),console.crlog&&console.crlog(t.toString()),console.crlog&&console.crlog(t.stack)}.bind(this))}catch(t){e.complete([3,t.toString()])}return e},Cr.LHProxy.prototype.SendIMMsg=function(e,t,n,r,i){var o=new Cr.AsyncResult;try{var c=new Ice.Context;c._fwd="z";var s=new Conference.InIMMsgInfo;s.targetTermId=e,s.targetNickname=t,s.font=n,s.msg=a.Z.html2chat(r),s.sendTime=i,this._chatRequest.sendIMMsg(s,c).then(function(){o.complete([0,""])}.bind(this)).exception(function(e){e instanceof Conference.ContainsSensitiveWords?o.complete([900,"包含了敏感词"]):e instanceof Conference.NotPermitError?o.complete([901,"没有聊天权限"]):o.complete([1,"未知错误"]),console.crlog&&console.crlog(e.toString()),console.crlog&&console.crlog(e.stack)}.bind(this))}catch(e){o.complete([3,e.toString()])}return o},Cr.LHProxy.prototype.terminalMsg=function(e,t,n,r){var i=new Cr.AsyncResult;try{this._conferenceRequest.terminalMsg(e,t,n,r).then((function(){i.complete([0,""])})).exception((function(e){i.complete([1,"未知错误"])}))}catch(e){i.complete([3,e.toString()])}return i},Cr.LHProxy.prototype.VideoResolutionReport=function(e,t,n){var r=new Cr.AsyncResult;try{this._clientReport.VideoResolutionReport(e,t,n).then(function(){r.complete([0,""])}.bind(this)).exception(function(e){r.complete([204,"网络错误"]),console.crlog&&console.crlog(e.toString()),console.crlog&&console.crlog(e.stack)}.bind(this))}catch(e){r.complete([3,e.toString()])}return r},Cr.conferenceRequest=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return new Promise((function(t,r){try{var i;(i=Cr._proxy._conferenceRequest)[e].apply(i,n).then((function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t(n)})).exception((function(e){return console.crlog("[RTC] conferenceRequest fail: "+e.toString()),r(window.CRVideo_ERR_DEF.UNKNOWERR)}))}catch(e){return console.crlog("[RTC] conferenceRequest error: "+e.toString()),r(window.CRVideo_ERR_DEF.UNKNOWERR)}}))};__webpack_require__(7649);var M=__webpack_require__(5766);function A(e){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A(e)}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,k(r.key),r)}}function k(e){var t=function(e,t){if("object"!=A(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=A(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==A(t)?t:t+""}var V=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},t=[{key:"GetScreenShareInfo",value:function(){(0,M.V)("_screenShareCtrl","getScreenShareInfo").then((function(e){__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.getScreenShareInfoRslt.apply(__Rtc.CRRTCScreen,e)})).catch((function(e){__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.getScreenShareInfoRslt.apply(__Rtc.CRRTCScreen,[e])}))}},{key:"StartScreenShare",value:function(){(0,M.V)("_screenShareCtrl","startScreenShare").then((function(e){__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.startScreenShareRslt.apply(__Rtc.CRRTCScreen,e)})).catch((function(e){__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.startScreenShareRslt.apply(__Rtc.CRRTCScreen,[e])}))}},{key:"StopScreenShare",value:function(){(0,M.V)("_screenShareCtrl","stopScreenShare").then((function(e){__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.stopScreenShareRslt.apply(__Rtc.CRRTCScreen,e)})).catch((function(e){__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.stopScreenShareRslt.apply(__Rtc.CRRTCScreen,[e])}))}},{key:"StartMarked",value:function(){(0,M.V)("_screenShareCtrl","startMarked").then((function(e){__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.startMarkedRslt.apply(__Rtc.CRRTCScreen,e)})).catch((function(e){__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.startMarkedRslt.apply(__Rtc.CRRTCScreen,[e])}))}},{key:"StopMarked",value:function(){(0,M.V)("_screenShareCtrl","stopMarked").then((function(e){__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.stopMarkedRslt.apply(__Rtc.CRRTCScreen,e)})).catch((function(e){__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.stopMarkedRslt.apply(__Rtc.CRRTCScreen,[e])}))}},{key:"enableOtherMarked",value:function(e){return new Promise((function(t,n){(0,M.V)("_screenShareCtrl","enableOtherMarked",e).then((function(e){return t()})).catch((function(e){return n(e)}))}))}},{key:"ClearAllMarksV4",value:function(){(0,M.V)("_screenShareCtrl","clearAllMarksV4").then((function(e){__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.clearAllMarksV4Rslt.apply(__Rtc.CRRTCScreen,e)})).catch((function(e){__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.clearAllMarksV4Rslt.apply(__Rtc.CRRTCScreen,[e])}))}},{key:"GetAllMarkData",value:function(){(0,M.V)("_screenShareCtrl","getAllMarkData").then((function(e){__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.getAllMarkDataRslt.apply(__Rtc.CRRTCScreen,e)})).catch((function(e){__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.getAllMarkDataRslt.apply(__Rtc.CRRTCScreen,[e])}))}},{key:"GetAllMarkDataV4",value:function(){(0,M.V)("_screenShareCtrl","getAllMarkDataV4").then((function(e){__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.getAllMarkDataV4Rslt.apply(__Rtc.CRRTCScreen,e)})).catch((function(e){__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.getAllMarkDataV4Rslt.apply(__Rtc.CRRTCScreen,[e])}))}},{key:"SendMarkData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.termid,e.color,e.mousePosSeq}},{key:"SendMarkDataV4",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.termid,n=e.markid,r=e.type,i=e.mousePosSeq,o=new Conference.MarkDataV4(t,n,r,i);(0,M.V)("_screenShareCtrl","sendMarkDataV4",o).then((function(e){__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.sendMarkDataV4Rslt.apply(__Rtc.CRRTCScreen,e)})).catch((function(e){__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.sendMarkDataV4Rslt.apply(__Rtc.CRRTCScreen,[e])}))}},{key:"setCtrlReqState",value:function(e){return new Promise((function(t,n){(0,M.V)("_screenShareCtrl","setCtrlReqState",e).then((function(e){return t()})).catch((function(e){return n(e)}))}))}},{key:"StartPlayMedia",value:function(e){(0,M.V)("_mediaCtrl","startPlayMedia",e).then((function(e){__Rtc.CRRTCMedia&&__Rtc.CRRTCMedia.ICECallback.startPlayMediaRslt.apply(__Rtc.CRRTCMedia,e)})).catch((function(e){__Rtc.CRRTCMedia&&__Rtc.CRRTCMedia.ICECallback.startPlayMediaRslt.apply(__Rtc.CRRTCMedia,[e])}))}},{key:"StopPlayMedia",value:function(){(0,M.V)("_mediaCtrl","stopPlayMedia").then((function(e){__Rtc.CRRTCMedia&&__Rtc.CRRTCMedia.ICECallback.stopPlayMediaRslt.apply(__Rtc.CRRTCMedia,e)})).catch((function(e){__Rtc.CRRTCMedia&&__Rtc.CRRTCMedia.ICECallback.stopPlayMediaRslt.apply(__Rtc.CRRTCMedia,[e])}))}},{key:"GetMediaInfo",value:function(){(0,M.V)("_mediaCtrl","getMediaInfo").then((function(e){__Rtc.CRRTCMedia&&__Rtc.CRRTCMedia.ICECallback.getMediaInfoRslt.apply(__Rtc.CRRTCMedia,e)})).catch((function(e){__Rtc.CRRTCMedia&&__Rtc.CRRTCMedia.ICECallback.getMediaInfoRslt.apply(__Rtc.CRRTCMedia,[e])}))}},{key:"PausePlayMedia",value:function(e){(0,M.V)("_mediaCtrl","pausePlayMedia",e).then((function(e){__Rtc.CRRTCMedia&&__Rtc.CRRTCMedia.ICECallback.pausePlayMediaRslt.apply(__Rtc.CRRTCMedia,e)})).catch((function(e){__Rtc.CRRTCMedia&&__Rtc.CRRTCMedia.ICECallback.pausePlayMediaRslt.apply(__Rtc.CRRTCMedia,[e])}))}},{key:"SubscribeMedia",value:function(e){(0,M.V)("_mediaCtrl","subscribeMedia",e).then((function(e){__Rtc.CRRTCMedia&&__Rtc.CRRTCMedia.ICECallback.subscribeMediaRslt.apply(__Rtc.CRRTCMedia,e)})).catch((function(e){__Rtc.CRRTCMedia&&__Rtc.CRRTCMedia.ICECallback.subscribeMediaRslt.apply(__Rtc.CRRTCMedia,[e])}))}},{key:"SetCurrentTab",value:function(e,t){return new Promise((function(n,r){var i=new Conference.TabID(e.termID,e.localID),o=new Conference.TabID(t.termID,t.localID);(0,M.V)("_syncCtrl","setCurrentTab",i,o).then((function(e){return n(e)})).catch((function(e){return r(e)}))}))}},{key:"SaveLastTabValue",value:function(e){return new Promise((function(t,n){(0,M.V)("_syncCtrl","saveLastTabValue",e).then((function(e){return t(e)})).catch((function(e){return n(e)}))}))}},{key:"Kickout",value:function(e){return new Promise((function(t,n){(0,M.V)("_conferenceRequest","kickout",e).then((function(e){return t(e)})).catch((function(e){return n(e)}))}))}},{key:"ChangeNickname",value:function(e,t){return new Promise((function(n,r){(0,M.V)("_conferenceRequest","changeNickname",e,t).then((function(e){return n(e)})).catch((function(e){return r(e)}))}))}},{key:"changeMemberRights",value:function(e){return new Promise((function(t,n){var r=[];e.forEach((function(e){r.push(new Conference.ChangedRights(e.termID,new Uint8Array(e.addedRights),new Uint8Array(e.reducedRights)))})),(0,M.V)("_conferenceRequest","changeMemberRights",r).then((function(e){return t(e)})).catch((function(e){return n(e)}))}))}},{key:"NetDetectResults",value:function(e,t){return new Promise((function(n,r){(0,M.V)("_conferenceRequest","netDetectResults",e,t).then((function(e){return n(e)})).catch((function(e){return r(e)}))}))}},{key:"MediaConnectionBreakReport",value:function(e){return new Promise((function(t,n){console.crlog("[MSClient] __Rtc.CRICEAPI.MediaConnectionBreakReport(".concat(e,")")),(0,M.V)("_clientReport","MediaConnectionBreakReport",e).then((function(e){return t(e)})).catch((function(e){return console.error(e),n(e)}))}))}}],t&&O(e.prototype,t),n&&O(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();window.__Rtc.CRICEAPI=new V;__webpack_require__(4079);function N(e){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N(e)}function L(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */L=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof C?t:C,a=Object.create(o.prototype),c=new x(r||[]);return i(a,"_invoke",{value:E(e,n,c)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var f="suspendedStart",h="suspendedYield",p="executing",_="completed",g={};function C(){}function v(){}function m(){}var y={};l(y,a,(function(){return this}));var S=Object.getPrototypeOf,I=S&&S(S(M([])));I&&I!==n&&r.call(I,a)&&(y=I);var R=m.prototype=C.prototype=Object.create(y);function w(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function n(i,o,a,c){var s=d(e[i],e,o);if("throw"!==s.type){var l=s.arg,u=l.value;return u&&"object"==N(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,c)}),(function(e){n("throw",e,a,c)})):t.resolve(u).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,c)}))}c(s.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function E(t,n,r){var i=f;return function(o,a){if(i===p)throw Error("Generator is already running");if(i===_){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var c=r.delegate;if(c){var s=D(c,r);if(s){if(s===g)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=_,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var l=d(t,n,r);if("normal"===l.type){if(i=r.done?_:h,l.arg===g)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(i=_,r.method="throw",r.arg=l.arg)}}}function D(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,D(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var o=d(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function M(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(N(t)+" is not iterable")}return v.prototype=m,i(R,"constructor",{value:m,configurable:!0}),i(m,"constructor",{value:v,configurable:!0}),v.displayName=l(m,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,s,"GeneratorFunction")),e.prototype=Object.create(R),e},t.awrap=function(e){return{__await:e}},w(b.prototype),l(b.prototype,c,(function(){return this})),t.AsyncIterator=b,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new b(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(R),l(R,s,"Generator"),l(R,a,(function(){return this})),l(R,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=M,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return c.type="throw",c.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],c=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(s&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;T(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:M(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function U(e,t,n,r,i,o,a){try{var c=e[o](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,i)}function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){F(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function F(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=N(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=N(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==N(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var H=window.CRVideo,q=window.Ice;window.CRVideo_CreateMeeting2=function(e){try{console.crlog("[MeetMgr] CRVideo_CreateMeeting2(".concat(e,")"))}catch(e){console.error(e)}window.CRVideo_CreateMeeting("",e)},window.CRVideo_CreateMeeting=function(e,t){try{console.crlog("[MeetMgr] CRVideo_CreateMeeting(".concat(JSON.stringify(e),",").concat(t,")"))}catch(e){console.error(e)}var n="https://".concat(H.webServerAddr).concat(u.Z.ClientCreateNetMeet),r=null!=e&&null!=e.meetSubject?e.meetSubject:"H5_SDK_REGULAR_ROOM",i=null!=e&&null!=e.needPswd?e.needPswd:0,o=null!=e&&null!=e.isRegular?e.isRegular:1,a=B({RequestId:q.generateUUID(),MeetSubject:encodeURI(r),IsRegular:o,NeedPswd:i,AsyncMeetMode:1},H.webLoginOAuth),c={};c=window.__Rtc._ReplaceObjParams(a,{UserPswd:"******"}),c=window.__Rtc._ReplaceObjParams(c,{Token:"******"}),console.crlog("[MeetMgr] WebAPI request url: "+n+", data:"+JSON.stringify(c)),H.meetSubject=r,(0,d.Z)({url:n,timeout:1e4,data:a,dataType:"jsonp",jsonp:"CallBack",success:function(e){var n;if(window.__Rtc._ReplaceObjParams(e,{CRMTStr:"******"}),n=window.__Rtc._ReplaceObjParams(e,{MeetPswd:"******"}),console.crlog("[MeetMgr] WebAPI /servlet/ClientCreateNetMeet request success, result: "+JSON.stringify(n)),0==e.RspCode){var i={ID:e.MeetID,pswd:e.MeetPswd,subject:r,pubMeetUrl:e.PublicUrl};H.pubMeetUrl=i.publicUrl,__Rtc.postCmd.meetJson=i,console.crlog("[MeetMgr] CreateMeetingSuccess! meetID: "+i.ID);try{console.crlog("[MeetMgr] CRVideo_CreateMeetingSuccess.target(".concat(JSON.stringify(window.__Rtc._ReplaceObjParams(i,{pswd:"******"})),",").concat(t,")"))}catch(e){console.error(e)}window.CRVideo_CreateMeetingSuccess.target(i,t)}else{console.crlog("[MeetMgr] CreateMeetingFail! ResJson: ".concat(JSON.stringify(e)));try{console.crlog("[MeetMgr] CRVideo_CreateMeetingFail.target(".concat(window.WEB_SDK_ERR(e.RspCode),",").concat(t,")"))}catch(e){console.error(e)}7==e.RspCode&&e.RspCode,window.CRVideo_CreateMeetingFail.target(window.WEB_SDK_ERR(e.RspCode),t)}},error:function(e){console.crlog("[MeetMgr] WebAPI /servlet/ClientCreateNetMeet request fail!");try{console.crlog("[MeetMgr] CRVideo_CreateMeetingFail.target(202,".concat(t,")"))}catch(e){console.error(e)}window.CRVideo_CreateMeetingFail.target(202,t)}})},window.CRVideo_EnterMeeting3=function(e,t,n){if(console.crlog("[MeetMgr] CRVideo_EnterMeeting3(".concat(e,",").concat(t,",").concat(n,")")),1!==H.loginAuthFlag||!H.LoginParam)return console.crlog("[MeetMgr] CRVideo_EnterMeetingRslt.target(7, ".concat(t,")")),CRVideo_EnterMeetingRslt.target(7,t),void CRVideo_UploadingLog();if(!e||8!==e.toString().length||NaN==(+e).toString())return console.crlog("[MeetMgr] CRVideo_EnterMeetingRslt.target(5, ".concat(t,")")),CRVideo_EnterMeetingRslt.target(5,t),void CRVideo_UploadingLog();var r=n||"",i=H.LoginParam.user_id,o=H.LoginParam.nick_name;CRVideo_EnterMeeting(e,r,i,o,t)},window.CRVideo_EnterMeeting2=function(e,t,n,r){console.crlog("[MeetMgr] CRVideo_EnterMeeting2(".concat(e,",").concat(t,",").concat(n,",").concat(r,")")),CRVideo_EnterMeeting(e,"",t,n,r)},window.CRVideo_EnterMeeting=function(){var e,t=(e=L().mark((function e(t,n,r,i){var o,a,c=arguments;return L().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=function(){var e="https://".concat(H.webServerAddr).concat(u.Z.joinMeetingAPI);console.crlog("[MeetMgr] CR.EnterMeeting begin： "+t);var r={ClientVer:H.sdkver,PRODUCT:"MeetSDK"==H.SDKKey?"WebMeetApp":"H5SDK",RequestId:q.generateUUID(),MeetID:t,MeetPswd:n,NickName:encodeURI(i),MeetWay:0,AsyncMeetMode:1};"MeetSDK"!=H.SDKKey&&Object.assign(r,B({UserType:4},H.webLoginOAuth));var a={};a=window.__Rtc._ReplaceObjParams(r,{UserPswd:"******"}),a=window.__Rtc._ReplaceObjParams(a,{Token:"******"}),a=window.__Rtc._ReplaceObjParams(a,{MeetPswd:"******"}),console.crlog("[MeetMgr] WebAPI request url: "+e+", data:"+JSON.stringify(a));var c={_data_:JSON.stringify(r)};CRVideo.lastJoinApiRequest=r.RequestId,(0,d.Z)({url:e,timeout:2e3,data:c,dataType:"jsonp",jsonp:"jsoncallback",success:function(e){r.RequestId===CRVideo.lastJoinApiRequest&&(console.crlog("[MeetMgr] WebAPI /servlet/joinMeetingAPI request success, result: "+JSON.stringify(e)),0==e.RspCode?(H.meetingID=t,H.crmtStr=e.CRMTStr.replace(/CRMT[\.|\w]{0,}:/,""),function e(){H.meetingExiting?(console.crlog("[MeetMgr] meeting exiting... waiting 100ms..."),setTimeout((function(){e()}),100)):H.initweb()}()):("MeetSDK"==H.SDKKey?(console.crlog("[MeetMgr] MeetSDK.enterMeetingRslt.target(".concat(window.WEB_SDK_ERR(e.RspCode),", '', '', ").concat(o,")")),x.Z.enterMeetingRslt.target(window.WEB_SDK_ERR(e.RspCode),"","",o)):(console.crlog("[MeetMgr] CRVideo_EnterMeetingRslt.target(".concat(window.WEB_SDK_ERR(e.RspCode),",").concat(o,")")),CRVideo_EnterMeetingRslt.target(window.WEB_SDK_ERR(e.RspCode),o)),CRVideo_UploadingLog()))},error:function(e){console.error(e),console.crlog("[MeetMgr] WebAPI /servlet/joinMeetingAPI request fail!"),"MeetSDK"==H.SDKKey?(console.crlog("[MeetMgr] MeetSDK.enterMeetingRslt.target(202, '', '', ".concat(o,")")),x.Z.enterMeetingRslt.target(202,"","",o)):(console.crlog("[MeetMgr] CRVideo_EnterMeetingRslt.target(202,".concat(o,")")),CRVideo_EnterMeetingRslt.target(202,o)),CRVideo_UploadingLog()}})},o=c.length>4&&void 0!==c[4]?c[4]:"",console.crlog("[MeetMgr] CRVideo_EnterMeeting(".concat(t,",***,").concat(r,",").concat(i,",").concat(o,")")),"MeetSDK"==H.SDKKey||1===H.loginAuthFlag&&H.LoginParam){e.next=8;break}return console.crlog("[MeetMgr] CRVideo_EnterMeetingRslt.target(7, ".concat(o,")")),CRVideo_EnterMeetingRslt.target(7,o),CRVideo_UploadingLog(),e.abrupt("return");case 8:return H.startEnterTimestamp=(new Date).getTime(),H.enterMeetingCookie=o,H.destroyMeetingConnect(),e.next=13,H.leftMeetingFun();case 13:null==H.LoginParam&&(H.LoginParam={}),H.LoginParam.user_id||""==r||(H.LoginParam.user_id=r),H.LoginParam.nick_name=i,H.isWebRTC?(window.__Rtc.CRRTCAudio.createAudioElement(),navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?(console.crlog("[MeetMgr] EnumerateDevices on enterMeeting..."),navigator.mediaDevices.enumerateDevices().then((function(e){console.crlog("[MeetMgr] EnumerateDevices success:".concat(JSON.stringify(e))),H.updateDevicesList(e),a()})).catch((function(e){console.crlog("navigator.mediaDevices.enumerateDevices error: ".concat(e)),"MeetSDK"==H.SDKKey?(console.crlog("[MeetMgr] MeetSDK.enterMeetingRslt.target(8003, '', '', ".concat(o,")")),x.Z.enterMeetingRslt.target(8003,"","",o)):(console.crlog("[MeetMgr] CRVideo_EnterMeetingRslt.target(8003,".concat(o,")")),CRVideo_EnterMeetingRslt.target(8003,o)),CRVideo_UploadingLog(),console.error(e)}))):(console.crlog("[MeetMgr] navigator.mediaDevices is undefined!!! protocal: ".concat(window.location.protocol)),"MeetSDK"==H.SDKKey?(console.crlog("[MeetMgr] MeetSDK.enterMeetingRslt.target(8004, '', '', ".concat(o,")")),x.Z.enterMeetingRslt.target(8004,"","",o)):(console.crlog("[MeetMgr] CRVideo_EnterMeetingRslt.target(8004,".concat(o,")")),CRVideo_EnterMeetingRslt.target(8004,o)))):a();case 17:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){U(o,r,i,a,c,"next",e)}function c(e){U(o,r,i,a,c,"throw",e)}a(void 0)}))});return function(e,n,r,i){return t.apply(this,arguments)}}(),window.CRVideo_DestroyMeeting=function(e,t,n){console.crlog("[MeetMgr] CRVideo_DestroyMeeting(".concat(e,",").concat(t,",").concat(n,")"));var r="https://".concat(H.webServerAddr).concat(u.Z.closeConf),i=B({RequestId:q.generateUUID(),MeetID:e,ClientVer:""},H.webLoginOAuth),o={};o=__Rtc._ReplaceObjParams(i,{UserPswd:"******"}),o=__Rtc._ReplaceObjParams(o,{Token:"******"}),console.crlog("[MeetMgr] WebAPI request url: "+r+", data:"+JSON.stringify(o));var a={_data_:JSON.stringify(i)};(0,d.Z)({url:r,timeout:5e3,data:a,dataType:"jsonp",jsonp:"jsoncallback",success:function(e){console.crlog("[MeetMgr] WebAPI /api/servlet/closeConf request success: "+JSON.stringify(e)),n?(console.crlog("[MeetMgr] CRVideo_StopMeetingRslt.target(".concat(window.WEB_SDK_ERR(e.RspCode),",").concat(t,")")),CRVideo_StopMeetingRslt.target(window.WEB_SDK_ERR(e.RspCode),t)):(console.crlog("[MeetMgr] CRVideo_DestroyMeetingRslt.target(".concat(window.WEB_SDK_ERR(e.RspCode),",").concat(t,")")),CRVideo_DestroyMeetingRslt.target(window.WEB_SDK_ERR(e.RspCode),t))},error:function(e){console.error(e),console.crlog("[MeetMgr] WebAPI /api/servlet/closeConf request fail!"),n?(console.crlog("[MeetMgr] CRVideo_StopMeetingRslt.target(202,".concat(t,")")),CRVideo_StopMeetingRslt.target(202,t)):(console.crlog("[MeetMgr] CRVideo_DestroyMeetingRslt.target(202,".concat(t,")")),CRVideo_DestroyMeetingRslt.target(202,t))}})},window.CRVideo_StopMeeting=function(e,t){console.crlog("[MeetMgr] CRVideo_StopMeeting(".concat(e,",").concat(t,")")),window.CRVideo_DestroyMeeting(e,t,!0)},window.CRVideo_CreateMeetingSuccess=new H.CbProxy("CRVideo_CreateMeetingSuccess"),window.CRVideo_CreateMeetingFail=new H.CbProxy("CRVideo_CreateMeetingFail"),window.CRVideo_EnterMeetingRslt=new H.CbProxy("CRVideo_EnterMeetingRslt"),window.CRVideo_DestroyMeetingRslt=new H.CbProxy("CRVideo_DestroyMeetingRslt"),window.CRVideo_StopMeetingRslt=new H.CbProxy("CRVideo_StopMeetingRslt");var K=window.Conference,W=(window.Cr,window.Ice),G=window.__Rtc;G.ConferenceReceptor=W.Class(K.ConferenceCallback,{setProxy:function(e){this.proxy=e},entered:function(){var e;G.CRRTCConf&&(e=G.CRRTCConf).entered.apply(e,arguments)},left:function(){var e;G.CRRTCConf&&(e=G.CRRTCConf).left.apply(e,arguments)},actorChanged:function(){var e;G.CRRTCConf&&(e=G.CRRTCConf).actorChanged.apply(e,arguments)},nicknameChanged:function(){var e;G.CRRTCConf&&(e=G.CRRTCConf).nicknameChanged.apply(e,arguments)},optionChanged:function(){var e;G.CRRTCConf&&(e=G.CRRTCConf).optionChanged.apply(e,arguments)},rightChanged:function(){var e;G.CRRTCConf&&(e=G.CRRTCConf).rightChanged.apply(e,arguments)},roomStateChanged:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log("===== roomStateChanged =====",t)},inviteStateChanged:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log("===== inviteStateChanged =====",t)},conferenceBegan:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log("===== conferenceBegan =====",t)},conferenceEnded:function(){var e;G.CRRTCConf&&(e=G.CRRTCConf).conferenceEnded.apply(e,arguments)},memberCount:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log("===== memberCount =====",t)},confirmAutoEnd:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log("===== confirmAutoEnd =====",t)},autoEndCancelled:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log("===== autoEndCancelled =====",t)},roomKnocked:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log("===== roomKnocked =====",t)},agendaUpdated:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log("===== agendaUpdated =====",t)},subjectUpdated:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log("===== subjectUpdated =====",t)},notifyApplyDemo:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log("===== notifyApplyDemo =====",t)},notifyApplyRejected:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log("===== notifyApplyRejected =====",t)},serverNotify:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log("===== serverNotify =====",t)},serverNotifyMsg:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log("===== serverNotifyMsg =====",t)},updateAppStatus:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log("===== updateAppStatus =====",t)},notifyAssistantChanged:function(){var e;G.CRRTCConf&&(e=G.CRRTCConf).notifyAssistantChanged.apply(e,arguments)},notifyNetDetectResults:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log("===== notifyNetDetectResults =====",t)},notifyReportStatus:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log("===== notifyReportStatus =====",t)},notifyReportStatus_async:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log("===== notifyReportStatus_async =====",t)},exeCmd:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log("===== exeCmd =====",t)},exeCmd_async:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log("===== exeCmd_async =====",t)},notifyStart1v1SubMeeting_async:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log("===== notifyStart1v1SubMeeting_async =====",t)},notifyStart1v1SubMeeting:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log("===== notifyStart1v1SubMeeting =====",t)},notifyStop1v1SubMeeting:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log("===== notifyStop1v1SubMeeting =====",t)},notifyStart1v1SubMeetingRslt:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log("===== notifyStart1v1SubMeetingRslt =====",t)},setWDT1v1SubMeetingMode:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log("===== setWDT1v1SubMeetingMode =====",t)},notifyIVRStatus:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log("===== notifyIVRStatus =====",t)},notifyStartSvrBroadcast:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log("===== notifyStartSvrBroadcast =====",t)},notifyStartBroadCast:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log("===== notifyStartBroadCast =====",t)},notifyStopBroadCast:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log("===== notifyStopBroadCast =====",t)},notifyWebViewerNum:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log("===== notifyWebViewerNum =====",t)},notifyBroadCastStartPush:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log("===== notifyBroadCastStartPush =====",t)},notifyBroadCastStopPush:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log("===== notifyBroadCastStopPush =====",t)},notifyBroadCastPlayback:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log("===== notifyBroadCastPlayback =====",t)},notifyBroadCastPlaybackStop:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log("===== notifyBroadCastPlaybackStop =====",t)},notifypayback:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log("===== notifypayback =====",t)},notifySwtichLiveAppElements:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log("===== notifySwtichLiveAppElements =====",t)},notifyThumbUp:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log("===== notifyThumbUp =====",t)},notifyLuckyDrawCfg:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log("===== notifyLuckyDrawCfg =====",t)},notifyLDMembersStatus:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log("===== notifyLDMembersStatus =====",t)},notifyLuckyDrawResult:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log("===== notifyLuckyDrawResult =====",t)},notifySvrRecordStateChanged:function(){var e;G.CRRTCRecord&&(e=G.CRRTCRecord.ICECallback).notifySvrRecordStateChanged.apply(e,arguments)},notifySvrRecordCfgChanged:function(){var e;G.CRRTCRecord&&(e=G.CRRTCRecord.ICECallback).notifySvrRecordCfgChanged.apply(e,arguments)},notifySvrRecordFileState:function(){var e;G.CRRTCRecord&&(e=G.CRRTCRecord.ICECallback).notifySvrRecordFileState.apply(e,arguments)},notifySvrBroadcastCfgChanged:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log("===== notifySvrBroadcastCfgChanged =====",t)},notifyAppUILocked:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log("===== notifyAppUILocked =====",t)},notifyBeginVote:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log("===== notifyBeginVote =====",t)},notifyEndVote:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log("===== notifyEndVote =====",t)},notifyPublishVoteResult:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log("===== notifyPublishVoteResult =====",t)},notifyCommitVote:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log("===== notifyCommitVote =====",t)},notifyTerminalMsg:function(){var e;G.CRRTCTermMsg&&(e=G.CRRTCTermMsg.ICECallback).notifyTerminalMsg.apply(e,arguments)},notifySCEPChanged:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log("===== notifySCEPChanged =====",t)},notifyMeetingAttrsChanged:function(){var e;G.CRRTCAttr&&(e=G.CRRTCAttr.ICECallback).notifyMeetingAttrsChanged.apply(e,arguments)},notifyUserAttrsChanged:function(){var e;G.CRRTCAttr&&(e=G.CRRTCAttr.ICECallback).notifyUserAttrsChanged.apply(e,arguments)},notifyShareStateChanged:function(){var e;G.CRRTCConf&&(e=G.CRRTCConf).notifyShareStateChanged.apply(e,arguments)},notifyEnterWaitingRoom:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log("===== notifyEnterWaitingRoom =====",t)},notifyLeftWaitingRoom:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log("===== notifyLeftWaitingRoom =====",t)},notifyJoinSubMeeting:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.log("===== notifyJoinSubMeeting =====",t)},notifyClodudRecordStateChanged:function(){var e;G.CRRTCCloudRecord&&(e=G.CRRTCCloudRecord.ICECallback).notifyCloudRecordStateChanged.apply(e,arguments)},notifyClodudRecordCfgChanged:function(){var e;G.CRRTCCloudRecord&&(e=G.CRRTCCloudRecord.ICECallback).notifyCloudRecordCfgChanged.apply(e,arguments)},notifyClodudRecordFileState:function(){var e;G.CRRTCCloudRecord&&(e=G.CRRTCCloudRecord.ICECallback).notifyCloudRecordFileState.apply(e,arguments)}});const z={changeOption:function(e){return new Promise((function(t,n){(0,M.V)("_conferenceRequest","changeOption",e).then((function(e){return t(e)})).catch((function(e){return n(e)}))}))},setAssistantActor:function(e,t){return new Promise((function(n,r){(0,M.V)("_conferenceRequest","setAssistantActor",e,t).then((function(e){return n(e)})).catch((function(e){return r(e)}))}))},setHostActor:function(e,t){return new Promise((function(n,r){(0,M.V)("_conferenceRequest","setHostActor",e,t).then((function(e){return n(e)})).catch((function(e){return e=e.toString().includes("AuthError")?"AuthError":e.toString(),r(e)}))}))},endConference:function(){return new Promise((function(e,t){(0,M.V)("_conferenceRequest","endConference").then((function(t){return e(t)})).catch((function(e){return t(e)}))}))},startSvrRecord:function(e){return new Promise((function(t,n){(0,M.V)("_conferenceRequest","startSvrRecord",e).then((function(e){return t(e)})).catch((function(e){return n(e)}))}))},updateSvrRecCfg:function(e){return new Promise((function(t,n){(0,M.V)("_conferenceRequest","updateSvrRecCfg",e).then((function(e){return t(e)})).catch((function(e){return n(e)}))}))},stopSvrRecord:function(){return new Promise((function(e,t){(0,M.V)("_conferenceRequest","stopSvrRecord").then((function(t){return e(t)})).catch((function(e){return t(e)}))}))},startShare:function(e){return new Promise((function(t,n){(0,M.V)("_conferenceRequest","startShare",e).then((function(e){return t(e)})).catch((function(e){return n(e)}))}))},stopShare:function(e){return new Promise((function(t,n){(0,M.V)("_conferenceRequest","stopShare",e).then((function(e){return t(e)})).catch((function(e){return n(e)}))}))},startCloudRecord:function(e,t){return new Promise((function(n,r){(0,M.V)("_conferenceRequest","startCloudRecord",e,t).then((function(e){return n(e)})).catch((function(e){return r(e)}))}))},stopCloudRecord:function(e){return new Promise((function(t,n){(0,M.V)("_conferenceRequest","stopCloudRecord",e).then((function(e){return t(e)})).catch((function(e){return n(e)}))}))},updateCloudRecord:function(e,t){return new Promise((function(n,r){(0,M.V)("_conferenceRequest","updateCloudRecord",e,t).then((function(e){return n(e)})).catch((function(e){return r(e)}))}))}};var J=__webpack_require__(2495);function Z(e){return Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Z(e)}function Q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Y(r.key),r)}}function Y(e){var t=function(e,t){if("object"!=Z(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Z(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Z(t)?t:t+""}var X=window.CRVideo,$=window.Ice,ee=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initData(),this.initIceCallback(),this.initIceNotify(),this.initSDKInterface()},(t=[{key:"initData",value:function(){console.crlog("[Conference] ConferenceModule initData..."),this.curActorID=0,this.curPresenterID=0,this.curOption=0,this.shareState={state:0,shareID:0},this.rights=[],this.compVideoHD="2"}},{key:"initIceCallback",value:function(){}},{key:"initIceNotify",value:function(){var e=this;this.entered=function(t){if(e.parseMemberInfo(t),console.crlog("[Conference] ICE Notify: new member entered, params:".concat(JSON.stringify({newMember:t}))),!X.isMeeting)return console.crlog("[Conference] New member entered callback, now is not in meeting, return false!");console.crlog("[Conference] User termID:".concat(t.termId,", userID:").concat(t.userId,", nickname:").concat(t.nickname," entered meeting... "));var n=!0;X.allMemberInfo.forEach((function(e){e.termId!=t.termId||(n=!1)})),t.termId!==X.userInfo.termId&&n&&(t.userId=t.userId||$.generateUUID(),t.audioStatus="AUNKNOWN",t.videoStatus="VUNKNOWN","family"==t.privRole?X.privRoleFamily=t.userId:"prisoner"==t.privRole&&(X.privRolePrison=t.userId),X.allMemberInfo.push(t),window.CRVideo_UserEnterMeeting.target(t.userId))},this.left=function(e,t,n,r){if(console.crlog("[Conference] ICE Notify: member left, params:".concat(JSON.stringify({termID:t,reason:r}))),t!=X.userInfo.termId){var i=X.allMemberInfo.findIndex((function(e){return e.termId==t}));if(i>-1){__Rtc.CRRTCRemoteVideo.userLeftHandler(X.allMemberInfo[i].termId);var o=X.allMemberInfo[i].userId;X.allMemberInfo.splice(i,1),window.CRVideo_UserLeftMeeting.target(o,r),console.crlog("[Conference] TermID:".concat(t,", userID: ").concat(o," left meeting, reason: ").concat(r))}}else"kick"===r&&(X.leftMeetingFun(r),X.destroyMeetingConnect(),window.CRVideo_UserLeftMeeting.target(X.userInfo.userId,r))},this.nicknameChanged=function(e,t,n){console.crlog("[Conference] ICE Notify: nicknameChanged, params:".concat(JSON.stringify({operatorID:e,termID:t,newNickname:n})));var r=CRVideo.allMemberInfo.find((function(e){return e.termId==t}));if(r){var i=r.nickname;if(r.nickname=n,t==CRVideo.userInfo.termId&&(CRVideo.userInfo.nickname=n),__Rtc.CRRTCUI.videoContainerList.forEach((function(e){if(e._userID==r.userId){var t=e.nickNameContent||e._nicknameEle.innerText;t=t.replace(i,n),e.nickNameContent&&(e.nickNameContent=t),e._nicknameEle.innerText=t}})),__Rtc.CRRTCUI.screenContainerList.forEach((function(e){if(e._userID==r.userId){var t=e.nickNameContent||e._nicknameEle.innerText;t=t.replace(i,n),e.nickNameContent&&(e.nickNameContent=t),e._nicknameEle.innerText=t}})),__Rtc.CRRTCMedia.container&&__Rtc.CRRTCMedia.container._userID==r.userId){var o=__Rtc.CRRTCMedia.container.nickNameContent||__Rtc.CRRTCMedia.container._nicknameEle.innerText;o=o.replace(i,n),__Rtc.CRRTCMedia.container.nickNameContent&&(__Rtc.CRRTCMedia.container.nickNameContent=o),__Rtc.CRRTCMedia.container._nicknameEle.innerText=o}console.crlog("[Conference] CRVideo_NotifyNickNameChanged.target(".concat(r.userId,",").concat(i,",").concat(n,")")),window.CRVideo_NotifyNickNameChanged.target(r.userId,i,n)}},this.optionChanged=function(t){console.crlog("[Conference] ICE Notify: optionChanged, params:".concat(JSON.stringify({option:t}))),e.curOption=t,x.Z.notifyOptionChanged.target(t)},this.rightChanged=function(t){if(console.crlog("[Conference] ICE Notify: rightChanged, params: ".concat(JSON.stringify(t))),t.addedRights.length>0&&(e.rights.push(t.addedRights[0]),x.Z.notifyAddedRights.target(t.addedRights[0])),t.reducedRights.length>0){var n=e.rights.findIndex((function(e){return e==t.reducedRights[0]}));e.rights.splice(n,1),x.Z.notifyReducedRights.target(t.reducedRights[0])}},this.actorChanged=function(t,n,r){console.crlog("[Conference] ICE Notify: actorChanged, params:".concat(JSON.stringify({operatorID:t,termID:n,actorType:r}))),X.allMemberInfo.forEach((function(t){t.termId==n?(t.actor=t.actor|r,x.Z.notifyActorChanged.target(t.userId,t.actor)):(1==r&&t.termId==e.curPresenterID||2==r&&t.termId==e.curActorID)&&(t.actor=t.actor&~r,x.Z.notifyActorChanged.target(t.userId,t.actor))})),1==r&&(e.curPresenterID=n),2==r&&(e.curActorID=n),console.crlog("[Conference] Current actorID:".concat(e.curActorID,", Current PresenterID:").concat(e.curPresenterID))},this.notifyAssistantChanged=function(e,t,n){console.crlog("[Conference] ICE Notify: notifyAssistantChanged, params:".concat(JSON.stringify({operatorID:e,termID:t,isAssistant:n})));var r=X.allMemberInfo.find((function(e){return e.termId==t}));r&&(r.actor=n?8|r.actor:-9&r.actor,x.Z.notifyActorChanged.target(r.userId,r.actor))},this.conferenceEnded=function(e){console.crlog("[Conference] ICE Notify: conferenceEnded, params:".concat(JSON.stringify({operatorID:e}))),X.leftMeetingFun(),clearTimeout(X.KEEPALIVE_TIMER),clearTimeout(X.REFRESH_SESSION_TIMER),CRVideo_NotifyMeetEnded.target(),CRVideo_MeetingStopped.target()},this.notifyShareStateChanged=function(t){console.crlog("[Conference] ICE Notify: notifyShareStateChanged, params:".concat(t)),e.shareState=JSON.parse(t);var n=X.allMemberInfo.find((function(t){return t.termId==e.shareState.shareId}));n?x.Z.notifyShareStateChanged.target(n.userId,e.shareState.state):x.Z.notifyShareStateChanged.target("",e.shareState.state)}}},{key:"initSDKInterface",value:function(){var e=this;window.CRVideo_Kickout=function(e){return console.crlog("[Conference] CRVideo_Kickout(".concat(e,")")),new Promise((function(t,n){var r=X.findMemberInfo({want:"termId",use:"userId",value:e});__Rtc.CRICEAPI.Kickout(r).then((function(n){var r={errCode:0,userID:e};return console.crlog("[Conference] CRVideo_Kickout, success! userID:".concat(JSON.stringify(r))),t(r)}),(function(e){return console.crlog("[Conference][Error] CRVideo_Kickout, fail! userID:".concat(e)),n({errCode:1,errDesc:e})}))}))},window.CRVideo_SetNickName=function(e,t){return console.crlog("[Conference] CRVideo_SetNickName(".concat(e,",").concat(t,")")),new Promise((function(n,r){var i=X.findMemberInfo({want:"termId",use:"userId",value:e});__Rtc.CRICEAPI.ChangeNickname(i,t).then((function(r){var i={errCode:0,userID:e,newname:t};return console.crlog("[Conference] CRVideo_SetNickName, success! ".concat(JSON.stringify(i))),n(i)}),(function(e){return console.crlog("[Conference] CRVideo_SetNickName, fail! ".concat(e)),r({errCode:1,errDesc:e})}))}))},x.Z.startShare=function(e){return console.crlog("[Conference] MeetSDK.startShare(".concat(e,")")),new Promise((function(t,n){z.startShare(e).then((function(e){return t({errCode:0})}),(function(e){return n({errCode:1,errDesc:e})}))}))},x.Z.stopShare=function(e){return console.crlog("[Conference] MeetSDK.stopShare(".concat(e,")")),new Promise((function(t,n){z.stopShare(e).then((function(e){return t({errCode:0})}),(function(e){return n({errCode:1,errDesc:e})}))}))},x.Z.getShareState=function(){return console.crlog("[Conference] MeetSDK.getShareState()"),{state:e.shareState.state,sharer:a.Z.termIDtoUserID(e.shareState.shareId)}},x.Z.getMeetInfo=function(){var e={};if(X.meetingInfo&&X.meetingInfo.confInfo)for(var t in X.meetingInfo.confInfo)e[t]=X.meetingInfo.confInfo[t];return console.crlog("[Conference] MeetSDK.getMeetInfo(), return: ".concat(JSON.stringify(e))),e},x.Z.getCurOption=function(){return console.crlog("[Conference] MeetSDK.getCurOption(), return: ".concat(e.curOption)),e.curOption},x.Z.changeOption=function(e){return console.crlog("[Conference] MeetSDK.changeOption(".concat(e,")")),new Promise((function(t,n){z.changeOption(e).then((function(e){return t({errCode:0})}),(function(e){return n({errCode:1,errDesc:e})}))}))},x.Z.setAssistantActor=function(t,n){return console.crlog("[Conference] MeetSDK.changeOption(".concat(t,",").concat(n,")")),new Promise((function(r,i){var o=a.Z.userIDtoTermID(t);if(!o)return i({errCode:1102,errDesc:"用户不存在"});e.setAssistantActor(o,n).then((function(e){return r({errCode:0})}),(function(e){return i({errCode:1,errDesc:e})}))}))},x.Z.setHostActor=function(t,n,r){return console.crlog("[Conference] MeetSDK.setHostActor(".concat(t,",").concat(n,",").concat(r,")")),new Promise((function(i,o){var c=a.Z.userIDtoTermID(t);if(!c)return o({errCode:1102,errDesc:"用户不存在"});e.setHostActor(c,n).then((function(e){return i({errCode:0,cookie:r})}),(function(e){return o({errCode:1,errDesc:e,cookie:r})}))}))},x.Z.endConference=function(){return console.crlog("[Conference] MeetSDK.endConference()"),new Promise((function(e,t){z.endConference().then((function(t){return e({errCode:0})}),(function(e){return t({errCode:1,errDesc:e})}))}))},x.Z.getCurRights=function(){return Array.from(e.rights)},x.Z.getVoiceOnly=function(){return!(!CRVideo.meetingInfo.confInfo||1!=+CRVideo.meetingInfo.confInfo.ccfg_voice_only)},x.Z.changeMemberRights=function(e){return console.crlog("[Conference] MeetSDK.changeMemberRights(".concat(JSON.stringify(e),")")),new Promise((function(t,n){var r=[];e.forEach((function(e){var t={termId:X.findMemberInfo({want:"termId",use:"userId",value:e.userID||""})||0,addedRights:e.add||[],reducedRights:e.reduce||[]};r.push(t)})),__Rtc.CRICEAPI.changeMemberRights(JSON.parse(JSON.stringify(r))).then((function(e){var n={errCode:0};return console.crlog("[Conference] MeetSDK.changeMemberRights, success! ".concat(JSON.stringify(n))),t(n)}),(function(e){return console.crlog("[Conference] MeetSDK.changeMemberRights, fail! ".concat(e)),n({errCode:1,errDesc:e})}))}))}}},{key:"parseMemberInfo",value:function(e){var t=e.extProperty,n=t.get(Conference.MINFO_OPENEDCAMIDS);if(null!=n){n=n.split(";");for(var r=0;r<n.length;r++)n[r]=+n[r];e.defaultCam=n[0],e.openedCamIDs=n.slice(1)}void 0!==t.get(Conference.MINFO_ALLCAMS)&&(e.allCams=t.get(Conference.MINFO_ALLCAMS).split("\n").slice(0,-1)),e.userId=t.get(Conference.CLIETN_PRIV_DAT),e.platform=t.get(Conference.CLINET_PLATFORM),e.sdk_ver=t.get(Conference.CLINET_SDK_VER),e.slice_ver=t.get(Conference.CLIENT_SLICE_VER),e.iswifi=t.get(Conference.CLINET_ISWIFI)||!1,e.privRole=t.get(Conference.CLIETN_PRIV_ROLE)||"others",e.voiceChangeType=t.get("voiceChangeType")||0,e.client_device=t.get(Conference.CLINET_DEVICETYPE)}},{key:"setAssistantActor",value:function(e,t){return new Promise((function(n,r){z.setAssistantActor(e,t).then((function(e){return n()}),(function(e){return r(e)}))}))}},{key:"setHostActor",value:function(e,t){return new Promise((function(n,r){z.setHostActor(e,t).then((function(e){return n()}),(function(e){return r(e)}))}))}}])&&Q(e.prototype,t),n&&Q(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();window.__crConferenceClass=ee,window.__Rtc.CRRTCConf=new window.__crConferenceClass,window.CRVideo_UserLeftMeeting=new X.CbProxy("CRVideo_UserLeftMeeting"),window.CRVideo_UserEnterMeeting=new X.CbProxy("CRVideo_UserEnterMeeting"),window.CRVideo_NotifyNickNameChanged=new X.CbProxy("CRVideo_NotifyNickNameChanged"),window.CRVideo_NotifyMeetEnded=new CRVideo.CbProxy("CRVideo_NotifyMeetEnded"),window.CRVideo_MeetingStopped=new CRVideo.CbProxy("CRVideo_MeetingStopped"),x.Z.notifyActorChanged=new J.Z("notifyActorChanged"),x.Z.notifyOptionChanged=new J.Z("notifyOptionChanged"),x.Z.notifyAddedRights=new J.Z("notifyAddedRights"),x.Z.notifyReducedRights=new J.Z("notifyReducedRights"),x.Z.notifyShareStateChanged=new J.Z("notifyShareStateChanged");__webpack_require__(7177),__webpack_require__(2181);var te=window.Conference,ne=window.Ice,re=window.__Rtc;re.AudioReceptor=ne.Class(te.AudioCallback,{setProxy:function(e){this.proxy=e},updateStatus:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];re.CRRTCAudio&&(e=re.CRRTCAudio.ICECallback.audioUpdateStatus).call.apply(e,[re.CRRTCAudio].concat(n))},updateVoiceEnergy:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];re.CRRTCAudio&&(e=re.CRRTCAudio.ICECallback.updateVoiceEnergy).call.apply(e,[re.CRRTCAudio].concat(n))},updateSpeaker:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];re.CRRTCAudio&&(e=re.CRRTCAudio.ICECallback.updateSpeaker).call.apply(e,[re.CRRTCAudio].concat(n))},closeAll:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];re.CRRTCAudio&&(e=re.CRRTCAudio.ICECallback.closeAll).call.apply(e,[re.CRRTCAudio].concat(n))},playBackgroundMusic:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];re.CRRTCAudio&&(e=re.CRRTCAudio.ICECallback.playBackgroundMusic).call.apply(e,[re.CRRTCAudio].concat(n))},notifyVoiceHowling:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];re.CRRTCAudio&&(e=re.CRRTCAudio.ICECallback.notifyVoiceHowling).call.apply(e,[re.CRRTCAudio].concat(n))},notifyVoiceNoise:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];re.CRRTCAudio&&(e=re.CRRTCAudio.ICECallback.notifyVoiceNoise).call.apply(e,[re.CRRTCAudio].concat(n))},getRemoteAudioInfNotify:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];re.CRRTCAudio&&(e=re.CRRTCAudio.ICECallback.getRemoteAudioInfNotify).call.apply(e,[re.CRRTCAudio].concat(n))},remoteAudioSetNotify:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];re.CRRTCAudio&&(e=re.CRRTCAudio.ICECallback.remoteAudioSetNotify).call.apply(e,[re.CRRTCAudio].concat(n))},notifyLanLessMicOpen:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];re.CRRTCAudio&&(e=re.CRRTCAudio.ICECallback.notifyLanLessMicOpen).call.apply(e,[re.CRRTCAudio].concat(n))},notifySetVoiceChange:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];re.CRRTCAudio&&(e=re.CRRTCAudio.ICECallback.notifySetVoiceChange).call.apply(e,[re.CRRTCAudio].concat(n))}});const ie={setAudioDeviceStatus:function(e){return new Promise((function(t,n){(0,M.V)("_audioCtrl","setDeviceStatus",e).then((function(e){return t(e)})).catch((function(e){return n(e)}))}))},askForMic:function(){return new Promise((function(e,t){(0,M.V)("_audioCtrl","askForMic").then((function(t){return e(t)})).catch((function(e){return t(e)}))}))},openMicEx:function(e){return new Promise((function(t,n){(0,M.V)("_audioCtrl","openMicEx",e).then((function(e){return t(e)})).catch((function(e){return n(e)}))}))},closeMicEx:function(e){return new Promise((function(t,n){(0,M.V)("_audioCtrl","closeMicEx",e).then((function(e){return t(e)})).catch((function(e){return n(e)}))}))},closeAll:function(){return new Promise((function(e,t){(0,M.V)("_audioCtrl","closeAll").then((function(t){return e(t)})).catch((function(e){return t(e)}))}))},setVoiceChange:function(e,t){return new Promise((function(n,r){(0,M.V)("_audioCtrl","setVoiceChange",e,t).then((function(e){return n(e)})).catch((function(e){return r(e)}))}))}};var oe=__webpack_require__(3618);function ae(e){return ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ae(e)}function ce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,se(r.key),r)}}function se(e){var t=function(e,t){if("object"!=ae(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ae(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ae(t)?t:t+""}var le=window.CRVideo,ue=window.Ice,de=function(){return e=function e(){var t,n,r,i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=this,r=function(e){var t="[Audio] MSID:".concat(e.msid,"(").concat(e.type,") --");console.crlog("".concat(t," Audio RTCPeerConnection setLocalDescription...")),e.connection.setLocalDescription(e.offer).then((function(n){if(console.crlog("".concat(t," Audio RTCPeerConnection setLocalDescription success!")),e.rtc_streamid){if(!e.cb.isResponsed&&console.crlog("".concat(t," Audio RTCPeerConnection ice_response(").concat(e.msid,", new HashMap())")),!e.cb.isResponsed&&e.cb.ice_response(e.msid,new ue.HashMap),!e.cb.isResponsed&&(e.cb.isResponsed=!0),"recvonly"==e.type&&"1"==e.subformic)return;if("recvonly"==e.type&&"1"!=e.subformic)e.HashMap.set("sdp",e.offer.sdp),e.HashMap.set("rtc_streamid",e.rtc_streamid),e.HashMap.set("rtc_mode","play"),e.HashMap.set("rtc_eid",e.rtc_eid);else if("sendonly"==e.type){var r=i.audioPeerConnections.find((function(t){return t.msid==e.msid-1e3}));e.HashMap.set("sdp",e.offer.sdp),e.HashMap.set("speakersdp",r.offer.sdp),e.HashMap.set("rtc_streamid",e.rtc_streamid),e.HashMap.set("rtc_streamid2",r.rtc_streamid2),e.HashMap.set("rtc_mode","push"),e.HashMap.set("rtc_mode2","play"),e.HashMap.set("rtc_eid",e.rtc_eid)}"1"==e.liteice&&i.RtcGwAudioAlloc2(e,t)}})).catch((function(t){console.error(t),console.crlog("[Audio][Error] MSID:".concat(e.msid," -- Audio RTCPeerConnection setLocalDescription fail!"))}))},(n=se(n="offerSetLocalDescription"))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,this.initData(),this.initIceCallback(),this.initSDKInterface()},t=[{key:"initData",value:function(){console.crlog("[Audio] AudioModule initData..."),this.localAudioStream=null,this.localAudioTracks=[],this.audioMSID=11e4,this.audioPeerConnections=[],this.audioInput=[],this.audioOutput=[],this.audioCfg={micID:1,speakerID:1,speakerPause:!1,autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0,micVolume:100},this.playerAudioContext=Object,this.micAudioContext=Object,this.micAudioSource=Object,this.micAudioGainNode=Object,this.myAudioLevel=0,this.audioFirstOpenWaiting=!0,this.audioFirstOpenWaitingTimout=-1,this.defaultGainVal=8,this.packetsLostRate=0,this.networkScore=-1,this.networkScoreResetTimout=-1}},{key:"initIceCallback",value:function(){var e=this;this.ICECallback={AudioAllocRawExt2_async:function(t,n,r,i){console.crlog("[Audio] ICE Notify: AudioAllocRawExt2_async, params:".concat(JSON.stringify({asParam:n,strParams:r}))),"1"==r.get("mediashare")?setTimeout((function(){__Rtc.CRRTCMedia.audioAllocRawExt2(t,n,r,i)}),500):e.audioAllocRawExt2(t,n,r||{},i)},updateVoiceEnergy:function(e){var t=e._head._key,n=e._head._value,r=null,i=0;le.allMemberInfo.forEach((function(e){e.termId==t&&(r=e.userId,i=e.voiceEnergy||0,e.voiceEnergy=n)})),r&&CRVideo_MicEnergyUpdate.target(r,i,n)},audioUpdateStatus:function(t,n,r){console.crlog("[Audio] ICE Notify: audioUpdateStatus, params:".concat(JSON.stringify({terminalID:n,status:r,opId:t})));var i,o,a,c={AUNKNOWN:0,ANULL:1,ACLOSE:2,AOPEN:3,AOPENING:4};le.allMemberInfo.forEach((function(t){t.termId==n&&(i=t.userId,o=t.audioStatus,t.audioStatus=r.name,t.userId==le.userInfo.userId&&("ACLOSE"===r.name&&e.isEnableAudioTrack(!1),"AOPEN"===r.name&&e.isEnableAudioTrack(!0)),(a=t.audioStatus)!==o&&console.crlog("[Audio] CRVideo_AudioStatusChanged.target(".concat(i,",").concat(c[o],",").concat(c[a],")")),a!==o&&CRVideo_AudioStatusChanged.target(i,c[o],c[a]))}))},updateSpeaker:function(e){console.crlog("[Audio] ICE Notify: updateSpeaker, params:".concat(JSON.stringify({terminalID:e})))},closeAll:function(t){console.crlog("[Audio] ICE Notify: closeAll, params:".concat(JSON.stringify({operatorID:t}))),t!==le.userInfo.termId&&e.isEnableAudioTrack(!1),le.allMemberInfo.forEach((function(e){e.termId!==t&&"AOPEN"==e.audioStatus&&(e.audioStatus="ACLOSE",console.crlog("[Audio] CRVideo_AudioStatusChanged.target(".concat(e.userId,",3,2)")),CRVideo_AudioStatusChanged.target(e.userId,3,2))}))},playBackgroundMusic:function(e,t){console.crlog("[Audio] ICE Notify: playBackgroundMusic, params:".concat(JSON.stringify({operatorID:e,sPlay:t})))},notifyVoiceHowling:function(e,t){console.crlog("[Audio] ICE Notify: notifyVoiceHowling, params:".concat(JSON.stringify({termid:e,bHowling:t})))},notifyVoiceNoise:function(e,t){console.crlog("[Audio] ICE Notify: notifyVoiceNoise, params:".concat(JSON.stringify({termid:e,bNoising:t})))},getRemoteAudioInfNotify:function(e,t){try{console.crlog("[Audio] ICE Notify: getRemoteAudioInfNotify, params:".concat(JSON.stringify({cb:e,reqTermID:t})))}catch(e){console.error(e)}e.ice_response()},remoteAudioSetNotify:function(e,t){console.crlog("[Audio] ICE Notify: remoteAudioSetNotify, params:".concat(JSON.stringify({opeTermId:e,rAudio:t})))},notifyLanLessMicOpen:function(){console.crlog("[Audio] ICE Notify: notifyLanLessMicOpen, params:null")},notifySetVoiceChange:function(e,t,n){console.crlog("[Audio] ICE Callback --\x3e notifySetVoiceChange, params:".concat(JSON.stringify({})));var r=le.allMemberInfo.find((function(e){return e.termId==t}));r&&(r.voiceChangeType=n,console.crlog("[Audio] CRVideo_NotifySetVoiceChange.target(".concat(r.userId,",").concat(n,")")),window.CRVideo_NotifySetVoiceChange.target(r.userId,n))}}}},{key:"initSDKInterface",value:function(){var e=this;window.CRVideo_OpenMic=function(t){return console.crlog("[Audio] CRVideo_OpenMic(".concat(t,")")),new Promise((function(n,r){var i=a.Z.userIDtoTermID(t);if(t==le.userInfo.userId&&0===e.audioInput.length)return console.crlog("[Audio][Error] CRVideo_OpenMic fail, no mic devices!"),console.error("[Audio][Error] CRVideo_OpenMic fail, no mic devices!"),r();!function t(){e.audioFirstOpenWaiting?setTimeout((function(){t()}),100):i&&ie.openMicEx(i).then((function(e){return n(e[0])}),(function(e){return r(__Rtc.CRCONFERR.Parse(e))}))}()}))},window.CRVideo_CloseMic=function(t){console.crlog("[Audio] CRVideo_CloseMic(".concat(t,")")),e.closeMicEx(t)},window.CRVideo_PlaySpeaker=function(){console.crlog("[Audio] CRVideo_PlaySpeaker()"),document.querySelector("#CRSDKAudioPlayer").click(),document.querySelector("#CRSDKAudioPlayer").play().then((function(){console.crlog("[Audio] 声音播放成功！")})).catch((function(e){console.crlog("[Audio] 声音播放失败！"),window.CRVideo_NotifyAudioPlayFailed.target(),setTimeout((function(){document.querySelector("#CRSDKAudioPlayer").click(),document.querySelector("#CRSDKAudioPlayer").play()}),1e3)})),document.querySelector("#CRSDKAudioPlayer").isPaused=!1,!document.querySelector("#CRSDKAudioPlayer").paused&&console.crlog("[Audio] Audio elememt is playing...")},window.CRVideo_PauseSpeaker=function(){console.crlog("[Audio] CRVideo_PauseSpeaker()"),e.audioCfg.speakerPause=!0,document.querySelector("#CRSDKAudioPlayer").click(),document.querySelector("#CRSDKAudioPlayer").pause(),document.querySelector("#CRSDKAudioPlayer").isPaused=!0,document.querySelector("#CRSDKAudioPlayer").paused&&console.crlog("[Audio] Audio elememt is paused...")},window.CRVideo_GetAudioMicNames=function(){var t=[];e.audioInput.forEach((function(e){t.push({micID:e.id,micName:e.name})}));try{console.crlog("[Audio] CRVideo_GetAudioMicNames(), return:".concat(JSON.stringify(t)))}catch(e){console.error(e)}return t},window.CRVideo_GetAudioSpkNames=function(){var t=[];e.audioOutput.forEach((function(e){t.push({speakerID:e.id,speakerName:e.name})}));try{console.crlog("[Audio] CRVideo_GetAudioSpkNames(), return:".concat(JSON.stringify(t)))}catch(e){console.error(e)}return t},window.CRVideo_SetAudioCfg=function(t){console.crlog("[Audio] CRVideo_SetAudioCfg(".concat(JSON.stringify(t),")")),e.setAudioCfg(t)},window.CRVideo_GetAudioCfg=function(){var t=e.audioCfg;return console.crlog("[Audio] CRVideo_GetAudioCfg(), return:".concat(JSON.stringify(t))),t},window.CRVideo_GetMicEnergy=function(e){var t=null;return le.allMemberInfo.forEach((function(n){n.userId==e&&(t=void 0===n.voiceEnergy?null:n.voiceEnergy)})),t},window.CRVideo_GetAudioStatus=function(t){var n=e.getAudioStatus(t);return console.crlog("[Audio] CRVideo_GetAudioStatus(".concat(t,"), return:").concat(n)),n},window.CRVideo_SetAllAudioClose=function(){return new Promise((function(e,t){console.crlog("[Audio] CRVideo_SetAllAudioClose()"),ie.closeAll().then((function(){return e()})).catch((function(e){return t({errCode:1,errDesc:e.toString()})}))}))},window.CRVideo_SetVoiceChange=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return console.crlog("[Audio] CRVideo_SetVoiceChange(".concat(e,",").concat(t,")")),new Promise((function(n,r){var i=a.Z.userIDtoTermID(e);if(!i)return r({errCode:5,errDesc:"参数错误"});ie.setVoiceChange(i,t).then((function(){return n()})).catch((function(e){return r({errCode:1,errDesc:e.toString()})}))}))},window.CRVideo_GetVoiceChangeType=function(e){console.crlog("[Audio] CRVideo_GetVoiceChangeType(".concat(e,")"));var t=0,n=le.allMemberInfo.find((function(t){return t.userId==e}));return n&&n.voiceChangeType&&(t=+n.voiceChangeType),t},x.Z.askForMic=function(){return console.crlog("[MeetSDK][Audio] MeetSDK.askForMic()"),new Promise((function(e,t){ie.askForMic().then((function(t){return e({errCode:0,errDesc:"success"})}),(function(e){return console.error(e),t(__Rtc.CRCONFERR.Parse(e))}))}))}}},{key:"createAudioElement",value:function(){console.crlog("[Audio] Do create audio element...");var e=this;!le.changyiweb&&function(t){if(!(n=t.document.getElementById("CRSDKAudioPlayer"))){var n,r=t.document.createElement("div");r.style.position="absolute",r.style.top="0px",r.style.left="0px",r.style.zIndex="99999",r.style.display="none",r.id="CRSDKAudioBox",(n=t.document.createElement("audio")).autoplay=!0,n.controls=!0,n.id="CRSDKAudioPlayer",n.onplay=function(){console.crlog("[Audio] AudioPlayer onplay...")},n.onplaying=function(){console.crlog("[Audio] AudioPlayer onplaying..."),t.CRVideo_NotifyAudioPlaying.target()},r.appendChild(n),t.document.body.appendChild(r),e.setAudioCfg(e.audioCfg)}}(window)}},{key:"connectToSpeaker",value:function(e,t){window.document.getElementById("CRSDKAudioPlayer").srcObject=e,window.document.getElementById("CRSDKAudioPlayer").muted=!0,console.crlog("[Audio] Use audioContext & gain to play audio..."),window.AudioContext=window.AudioContext||window.webkitAudioContext,this.playerAudioContext.close&&"running"===this.playerAudioContext.state&&this.playerAudioContext.close(),this.playerAudioContext=new window.AudioContext;var n=this.playerAudioContext.createMediaStreamSource(e),r=this.playerAudioContext.createGain();r.gain.value=t||+this.defaultGainVal,console.crlog("[Audio] Audio gain value: ".concat(r.gain.value)),n.connect(r),r.connect(this.playerAudioContext.destination)}},{key:"audioAllocRawExt2",value:function(e,t,n,r){var i=this,o=t.shareListen,a=t.codecType.name;console.crlog("[Audio] AudioAllocRawExt2, isRecvonly:".concat(o,", codeType:").concat(a,", subformic:").concat(n.get("subformic")||"0",", liteice:").concat(n.get("liteice")||"0",", rtc_streamid:").concat(n.get("rtc_streamid")||null)),setTimeout((function(){e.isResponsed||(console.crlog("Audio RTCPeerConnection didn't get candidate after 10 secend, do cb.ice_response()..."),e.ice_response(),e.isResponsed=!0)}),1e4);var c=function(e,n,r){this.type=e,this.cb=n,this.codeType=a,this.candidates=[],this.caComplete=!1,this.connection=null,this.remoteStream=null,this.offer=null,this.answer=null,this.asParam=t,this.rtc_streamid=r.get("rtc_streamid")||null,this.rtc_streamid2=r.get("rtc_streamid2")||null,this.rtc_eid=r.get("rtc_eid")||null,this.subformic=r.get("subformic")||"0",this.liteice=r.get("liteice")||"0",this.HashMap=new ue.HashMap};if(o){var s=new c("recvonly",e,n);s.msid=this.audioMSID++,this.audioPeerConnections.push(s),this.setPeerConnection(s)}else if("1"===n.get("subformic")){var l=new c("recvonly",e,n);l.msid=this.audioMSID++,this.audioPeerConnections.push(l),this.setPeerConnection(l);var u=new c("sendonly",e,n);u.msid=l.msid+1e3,this.audioPeerConnections.push(u),u.micID=this.audioCfg.micID;var d=this.audioInput.find((function(e){return e.id===i.audioCfg.micID})).deviceId;this.localAudioStream&&this.localAudioTracks[0].micID===this.audioCfg.micID&&this.localAudioTracks[0].autoGainControl===this.audioCfg.autoGainControl&&this.localAudioTracks[0].echoCancellation===this.audioCfg.echoCancellation&&this.localAudioTracks[0].noiseSuppression===this.audioCfg.noiseSuppression?setTimeout((function(){i.isEnableAudioTrack(!0),i.setPeerConnection(u)}),50):this.getAudioStream(d&&!__Rtc.CRBrowser.curBrowserCfg.isMobile||!d.includes("default")?{audio:{deviceId:{ideal:d},autoGainControl:this.audioCfg.autoGainControl,echoCancellation:this.audioCfg.echoCancellation,noiseSuppression:this.audioCfg.noiseSuppression},video:!1}:{audio:{autoGainControl:this.audioCfg.autoGainControl,echoCancellation:this.audioCfg.echoCancellation,noiseSuppression:this.audioCfg.noiseSuppression},video:!1}).then((function(){i.setPeerConnection(u)}),(function(e){console.crlog("[Audio] CRVideo_OpenMicFailed.target(".concat(e,")")),CRVideo_OpenMicFailed.target(e),console.error("Open mic failed: ".concat(e))}))}else{var f=new c("sendrecv",e,n);f.msid=this.audioMSID++,f.micID=this.audioCfg.micID,this.audioPeerConnections.push(f);var h=this.audioInput.find((function(e){return e.id===i.audioCfg.micID})).deviceId;this.localAudioStream&&this.localAudioTracks[0].micID===this.audioCfg.micID&&this.localAudioTracks[0].autoGainControl===this.audioCfg.autoGainControl&&this.localAudioTracks[0].echoCancellation===this.audioCfg.echoCancellation&&this.localAudioTracks[0].noiseSuppression===this.audioCfg.noiseSuppression?(this.isEnableAudioTrack(!0),this.setPeerConnection(f)):this.getAudioStream(h&&!__Rtc.CRBrowser.curBrowserCfg.isMobile||!h.includes("default")?{audio:{deviceId:{ideal:h},autoGainControl:this.audioCfg.autoGainControl,echoCancellation:this.audioCfg.echoCancellation,noiseSuppression:this.audioCfg.noiseSuppression},video:!1}:{audio:{autoGainControl:this.audioCfg.autoGainControl,echoCancellation:this.audioCfg.echoCancellation,noiseSuppression:this.audioCfg.noiseSuppression},video:!1}).then((function(){i.setPeerConnection(f)}),(function(e){console.crlog("[Audio] CRVideo_OpenMicFailed.target(".concat(e,")")),CRVideo_OpenMicFailed.target(e),console.error("Open mic failed: ".concat(e))}))}}},{key:"modifyOfferSDP",value:function(e,t){var n=(e=(e=e.replace("a=sendrecv","a=".concat(t.type))).replace("useinbandfec=1","useinbandfec=0")).split("\r\n"),r="opus";switch(t.codeType){case"ACT_OPUS":r="opus";break;case"ACT_PCMA":r="PCMA";break;case"ACT_ISAC":r="isac"}var i=n.find((function(e){return e.includes(r)})).split(" ")[0].split(":")[1];n=n.filter((function(e){return!((e.includes("a=rtcp-fb")||e.includes("a=rtpmap")||e.includes("a=fmtp"))&&e.split(" ")[0].split(":")[1]!=i)}));var o=n.findIndex((function(e){return e.includes("m=audio")})),a=[];n[o].split(" ").forEach((function(e,t){t<3&&a.push(e),t>=3&&!isNaN(e)&&e==i&&a.push(e)})),n[o]=a.join(" ");for(var c=0;c<n.length;c++){var s=n[c];if(!s.includes("nack")&&s.includes("a=rtpmap:")){var l=s.match(/a=rtpmap:(\d+)/)[1];n.splice(c+1,0,"a=rtcp-fb:".concat(l," nack"))}s.includes("http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01")&&delete n[c]}return e=(e=n.join("\r\n")).replace("\r\n\r\n","\r\n")}},{key:"modifyAnswerSDP",value:function(e,t){for(var n=e.split("\r\n"),r=0;r<n.length;r++){var i=n[r];if(!e.includes("nack")&&i.includes("a=rtpmap:")){var o=i.match(/a=rtpmap:(\d+)/)[1];n.splice(r+1,0,"a=rtcp-fb:".concat(o," nack"))}i.includes("http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01")&&delete n[r]}return e=(e=n.join("\r\n")).replace("\r\n\r\n","\r\n")}},{key:"setPeerConnection",value:function(e){var t=this,n="[Audio] MSID:".concat(e.msid,"(").concat(e.type,") --");console.crlog("".concat(n," Audio create connection object, type:").concat(e.type,", subformic:").concat(e.subformic,", liteice:").concat(e.liteice,", rtc_streamid:").concat(e.rtc_streamid)),console.crlog("".concat(n," Audio RTCPeerConnection new RTCPeerConnection... >> ").concat(e.type," <<"));var r="1"===e.liteice?new RTCPeerConnection:new RTCPeerConnection(le.rtcCfg);if(e.connection=r,e.logMsidStr=n,"recvonly"==e.type){var i={offerToReceiveAudio:!0,offerToReceiveVideo:!1};console.crlog("".concat(n," Audio RTCPeerConnection offerOptions: ").concat(JSON.stringify(i))),r.createOffer(i).then((function(r){r.sdp=t.modifyOfferSDP(r.sdp,e),console.crlog("".concat(n," Audio RTCPeerConnection createOffer success! offer sdp:\r\n").concat(r.sdp)),e.offer=r,t.offerSetLocalDescription(e)})).catch((function(t){console.crlog("[Audio][Error] MSID:".concat(e.msid,"(").concat(e.type,") -- Audio RTCPeerConnection createOffer fail!")),console.error(t)}))}else this.localAudioStream?r.addTrack?(console.crlog("".concat(n," Audio RTCPeerConnection addTrack")),r.addTrack(this.localAudioTracks[0],this.localAudioStream)):setTimeout((function(){console.crlog("".concat(n," Audio RTCPeerConnection dispatchEvent:negotiationneeded")),r.dispatchEvent(new Event("negotiationneeded"))}),1e3):(console.crlog("[Audio][Error] MSID:".concat(e.msid,"(").concat(e.type,") -- Audio RTCPeerConnection addTrack fail, no localAudioStream!")),console.error("[Audio][Error] MSID:".concat(e.msid,"(").concat(e.type,") -- Audio RTCPeerConnection addTrack fail, no localAudioStream!"))),r.createOffer().then((function(r){r.sdp=t.modifyOfferSDP(r.sdp,e),console.crlog("".concat(n," Audio RTCPeerConnection createOffer success! offer sdp:\r\n").concat(r.sdp)),e.offer=r,t.offerSetLocalDescription(e)})).catch((function(t){console.crlog("[Audio][Error] MSID:".concat(e.msid," -- Audio RTCPeerConnection createOffer fail!")),console.error(t)}));r.onicecandidate=function(r){"1"===e.liteice||e.caComplete||(console.crlog("".concat(n," Audio RTCPeerConnection onicecandidate: ").concat(JSON.stringify(r.candidate))),r.candidate?e.candidates.push(r.candidate):e.caComplete=!0,e.caComplete&&t.iceResponse(e),setTimeout((function(){e.caComplete||(e.caComplete=!0,t.iceResponse(e))}),300))},r.onicecandidateerror=function(e){e.address,e.errorCode,e.errorText,e.hostCandidate},r.ontrack=function(i){console.crlog("".concat(n," Audio RTCPeerConnection ontrack"));var o=i.streams[0];console.crlog("".concat(n," Audio RTCPeerConnection got audio stream: ").concat(JSON.stringify({active:o.active,id:o.id}))),e.remoteStream=o,t.distantAudioStream=o,console.crlog("[Audio] CRVideo_NotifyAudioStream.target(1, remoteStream)"),CRVideo_NotifyAudioStream.target(1,o),t.getDistantAudioEnergy(o,r,e.msid);var a=__Rtc.CRBrowser.curBrowserCfg;a.isMobile&&"iOS"==a.platform&&15==a.OSVer.split(".")[0]&&a.OSVer.split(".")[1]<=3?t.connectToSpeaker(o):document.getElementById("CRSDKAudioPlayer")?(console.crlog("".concat(n," Audio RTCPeerConnection found the audio element success and set srcObject!")),document.getElementById("CRSDKAudioPlayer").srcObject=o,document.getElementById("CRSDKAudioPlayer").isPaused?CRVideo_PauseSpeaker():setTimeout((function(){try{document.getElementById("CRSDKAudioPlayer").srcObject&&1==document.getElementById("CRSDKAudioPlayer").srcObject.active&&(document.getElementById("CRSDKAudioPlayer").click(),document.getElementById("CRSDKAudioPlayer").play().then((function(){console.crlog("[Audio] 声音播放成功！")})).catch((function(e){console.crlog("[Audio] 声音播放失败！"),window.CRVideo_NotifyAudioPlayFailed.target(),setTimeout((function(){document.querySelector("#CRSDKAudioPlayer").click(),document.querySelector("#CRSDKAudioPlayer").play()}),1e3)})))}catch(e){console.error(e)}}),100)):console.crlog("[Audio][Error] MSID:".concat(e.msid," -- Can not find audio elemment, set srcObject fail!"))},r.onconnectionstatechange=function(i){var o=i.currentTarget.connectionState;console.crlog("".concat(n," Audio RTCPeerConnection onconnectionstatechange, connectionState: ").concat(o)),"connected"==o?t.startWebrtcLog(e):"disconnected"==o?(e.rtpLogTimer&&clearInterval(e.rtpLogTimer),e.mediaSourceLogTimer&&clearInterval(e.mediaSourceLogTimer),CRVideo_NetStateChanged.target(t.networkScore=0)):"failed"==o&&(CRVideo_NotifyNetworkLostRate.target(1),CRVideo_NetStateChanged.target(t.networkScore=0),__Rtc.CRICEAPI.MediaConnectionBreakReport(e.msid>=111e3?e.msid-1e3:e.msid)),"failed"==o&&r.audioContext&&"running"===r.audioContext.state&&r.audioContext.close&&r.audioContext.close(),r.lastState=o},r.ondatachannel=function(e){console.crlog("".concat(n," Audio RTCPeerConnection ondatachannel"))},r.oniceconnectionstatechange=function(e){console.crlog("".concat(n," Audio RTCPeerConnection oniceconnectionstatechange, iceConnectionState: ").concat(e.currentTarget.iceConnectionState))},r.onicegatheringstatechange=function(e){console.crlog("".concat(n," Audio RTCPeerConnection onicegatheringstatechange, iceGatheringState: ").concat(e.currentTarget.iceGatheringState))},r.onnegotiationneeded=function(e){console.crlog("".concat(n," Audio RTCPeerConnection onnegotiationneeded"))},r.onremovestream=function(e){console.crlog("".concat(n," Audio RTCPeerConnection onremovestream"))},r.onsignalingstatechange=function(e){console.crlog("".concat(n," Audio RTCPeerConnection onsignalingstatechange, signalingState: ").concat(e.currentTarget.signalingState))}}},{key:"RtcGwAudioAlloc2",value:function(e,t){var n=this;console.crlog("".concat(t," Audio RTCPeerConnection request GwAudioAlloc2(asParam, HashMap)")),oe.Z.GwAudioAlloc2(e.asParam,e.HashMap).then((function(r){if(r.answerSdp)if(console.crlog("".concat(t," Audio RTCPeerConnection request GwAudioAlloc2 success...")),"1"!=e.subformic||"sendrecv"==e.type)n.answerSetRemoteDescription(e,{type:"answer",sdp:r.answerSdp});else if("sendonly"==e.type){var i=n.audioPeerConnections.find((function(t){return t.msid==e.msid-1e3}));n.answerSetRemoteDescription(e,{type:"answer",sdp:r.answerSdp}),n.answerSetRemoteDescription(i,{type:"answer",sdp:r.answerSdp2})}})).catch((function(e){console.error(e)}))}},{key:"iceResponse",value:function(e){var t=e.cb,n="[Audio] MSID:".concat(e.msid,"(").concat(e.type,") --");if("sendrecv"==e.type||"recvonly"==e.type&&"0"==e.subformic)!e.rtc_streamid&&e.HashMap.set("sdp",e.offer.sdp),"1"!=e.liteice&&e.HashMap.set("icecandidate",JSON.stringify(e.candidates)),"1"!=e.liteice&&console.crlog("".concat(n," Audio RTCPeerConnection response candidates(").concat(e.candidates.length,"): ").concat(JSON.stringify(e.candidates))),"1"===e.liteice&&console.crlog("".concat(n," Audio RTCPeerConnection response without candidates when liteice==='1'")),e.rtc_streamid?this.RtcGwAudioAlloc2(e,n):(!t.isResponsed&&console.crlog("".concat(n," Audio RTCPeerConnection ice_response(").concat(e.msid,", HashMap)")),!t.isResponsed&&t.ice_response(e.msid,e.HashMap),!t.isResponsed&&(t.isResponsed=!0));else if("recvonly"==e.type){var r=this.audioPeerConnections.find((function(t){return t.msid==e.msid+1e3}));"1"===e.liteice?r.offer?(!e.rtc_streamid2&&e.HashMap.set("speakersdp",e.offer.sdp),!e.rtc_streamid&&e.HashMap.set("sdp",r.offer.sdp),console.crlog("".concat(n," Audio RTCPeerConnection response without candidates when liteice==='1'")),e.rtc_streamid?this.RtcGwAudioAlloc2(e,n):(!t.isResponsed&&console.crlog("".concat(n," Audio RTCPeerConnection ice_response(").concat(e.msid,", HashMap)")),!t.isResponsed&&t.ice_response(e.msid,e.HashMap),!t.isResponsed&&(t.isResponsed=!0))):!r.offer&&console.crlog("".concat(n," Audio RTCPeerConnection wait for sendonly connection create offer...")):(e.HashMap=r.HashMap,e.HashMap.set("speakersdp",e.offer.sdp),e.HashMap.set("speakericecandidate",JSON.stringify(e.candidates)),r.caComplete&&(console.crlog("".concat(n," Audio RTCPeerConnection response candidates(").concat(e.candidates.length,"): ").concat(JSON.stringify(e.candidates))),e.rtc_streamid?this.RtcGwAudioAlloc2(e,n):(!t.isResponsed&&console.crlog("".concat(n," Audio RTCPeerConnection ice_response(").concat(e.msid,", HashMap)")),!t.isResponsed&&t.ice_response(e.msid,e.HashMap),!t.isResponsed&&(t.isResponsed=!0))))}else if("sendonly"==e.type){var i=this.audioPeerConnections.find((function(t){return t.msid==e.msid-1e3}));"1"===e.liteice?i.offer?(!e.rtc_streamid&&e.HashMap.set("speakersdp",i.offer.sdp),!e.rtc_streamid&&e.HashMap.set("sdp",e.offer.sdp),console.crlog("".concat(n," Audio RTCPeerConnection response without candidates when liteice==='1'")),e.rtc_streamid?this.RtcGwAudioAlloc2(e,n):(!t.isResponsed&&console.crlog("".concat(n," Audio RTCPeerConnection ice_response(").concat(e.msid,", HashMap)")),!t.isResponsed&&t.ice_response(e.msid,e.HashMap),!t.isResponsed&&(t.isResponsed=!0))):!i.offer&&console.crlog("".concat(n," Audio RTCPeerConnection wait for recvonly connection create offer...")):(!e.rtc_streamid&&e.HashMap.set("sdp",e.offer.sdp),e.HashMap.set("icecandidate",JSON.stringify(e.candidates)),i.caComplete&&(e.HashMap=i.HashMap,console.crlog("".concat(n," Audio RTCPeerConnection response candidates(").concat(e.candidates.length,"): ").concat(JSON.stringify(e.candidates))),e.rtc_streamid?this.RtcGwAudioAlloc2(e,n):(!t.isResponsed&&console.crlog("".concat(n," Audio RTCPeerConnection ice_response(").concat(e.msid,", HashMap)")),!t.isResponsed&&t.ice_response(e.msid,e.HashMap),!t.isResponsed&&(t.isResponsed=!0))))}}},{key:"getDistantAudioEnergy",value:function(e,t,n){var r=this,i=new AudioContext,o=i.createScriptProcessor(2048,1,1);i.createMediaStreamSource(e).connect(o),o.connect(i.destination),t.audioContext=i,o.onaudioprocess=function(t){for(var n,a=t.inputBuffer.getChannelData(0),c=0,s=0;s<a.length;++s)c+=a[s]*a[s];n=Math.sqrt(c/a.length),r.distantAudioEnergy=parseInt(100*n)/100,0!=r.audioPeerConnections.length&&e.active||(o.onaudioprocess=null,o=null,i.close&&"running"===i.state&&i.close())}}},{key:"startWebrtcLog",value:function(e){var t=this,n=e.connection,r=e.logMsidStr;console.crlog("".concat(r," Start collecting WebRTC stats logs..."));var i=2e3;e.rtpLogTimer&&clearInterval(e.rtpLogTimer),e.mediaSourceLogTimer&&clearInterval(e.mediaSourceLogTimer),this.codeRateSend=0,this.packetsLostRate=0,this.codeRateReceived=0;var o=0,a=0,c=-1,s=0,l=0,u=0,d=[],f=0;e.rtpLogTimer=setInterval((function(){n.getStats().then((function(e){e.forEach((function(e){if("inbound-rtp"==e.type)try{var n=e.packetsReceived-o,h=e.packetsLost-a;if(t.packetsLostRate=0==n?0:h/(n+h),t.packetsLostRate>0||c>=5||-1===c){var p=parseInt(1e4*t.packetsLostRate)/100,_={},g=["id","timestamp","type","ssrc","kind","trackId","transportId","codecId","mediaType","mid"],C=["trackIdentifier","bytesReceived","headerBytesReceived","lastPacketReceivedTimestamp"],v=["mediaSourceId","bytesSent","headerBytesSent","retransmittedBytesSent"];for(var m in e)g.includes(m)||C.includes(m)||v.includes(m)||(_[m]=e[m]);le.isRtcLog&&console.crlog("".concat(r," inbound-rtp(").concat(2,"s), audioLevel:").concat(e.audioLevel,", packetsTotal:").concat(n+h,", packetsLost:").concat(h,", packetsLostRate:").concat(p,"%, ").concat(JSON.stringify(_))),CRVideo_NotifyNetworkLostRate.target(p/100),c=0}c++,o=e.packetsReceived,a=e.packetsLost,t.codeRateReceived=(e.bytesReceived-u)/i,u=e.bytesReceived;var y=t.networkScore;t.packetsLostRate<=.05?t.networkScore=10:t.packetsLostRate<=.1?t.networkScore=9:t.packetsLostRate<=.15?t.networkScore=8:t.packetsLostRate<=.2?t.networkScore=7:t.packetsLostRate<=.25?t.networkScore=6:t.packetsLostRate<=.3?t.networkScore=5:t.packetsLostRate<=.35?t.networkScore=4:t.packetsLostRate<=.4?t.networkScore=3:t.packetsLostRate<=.45?t.networkScore=2:t.packetsLostRate<=.5?t.networkScore=1:t.networkScore=0,clearTimeout(t.networkScoreResetTimout),t.networkScoreResetTimout=setTimeout((function(){CRVideo_NetStateChanged.target(t.networkScore)}),4e3),t.networkScore!=y&&CRVideo_NetStateChanged.target(t.networkScore);var S=-1==t.networkScore?0:t.networkScore;navigator.connection&&navigator.connection.type&&"wifi"==navigator.connection.type||navigator.userAgent.includes("WIFI")?__Rtc.CRICEAPI.NetDetectResults(S,!0):__Rtc.CRICEAPI.NetDetectResults(S,!1)}catch(e){console.error(e)}if("outbound-rtp"==e.type&&(t.codeRateSend=(e.bytesSent-l)/i,l=e.bytesSent,++s>=5)){s=0;var I={},R=["id","timestamp","type","ssrc","kind","trackId","transportId","codecId","mediaType","mid"],w=["trackIdentifier","bytesReceived","headerBytesReceived","lastPacketReceivedTimestamp"],b=["mediaSourceId","bytesSent","headerBytesSent","retransmittedBytesSent"];for(var E in e)R.includes(E)||w.includes(E)||b.includes(E)||(I[E]=e[E]);le.isRtcLog&&console.crlog("".concat(r," outbound-rtp: ").concat(JSON.stringify(I)))}if("media-source"==e.type&&e.audioLevel){var D={audioLevel:parseInt(100*e.audioLevel)/100,totalAudioEnergy:parseInt(100*e.totalAudioEnergy)/100,totalSamplesDuration:parseInt(100*e.totalSamplesDuration)/100,echoReturnLoss:parseInt(100*e.echoReturnLoss)/100,echoReturnLossEnhancement:parseInt(100*e.echoReturnLossEnhancement)/100};f++,d.push(D),f>=5&&(le.isRtcLog&&console.crlog("".concat(r," media-source arr: ").concat(JSON.stringify(d))),f=0,d=[])}"ssrc"==e.type&&le.isRtcLog&&console.crlog("".concat(r," ssrc：").concat(JSON.stringify(e)))}))}))}),i),e.mediaSourceLogTimer=setInterval((function(){n.getStats().then((function(e){e.forEach((function(e){"media-source"==e.type&&(t.myAudioLevel=e.audioLevel,clearTimeout(t.myAudioLevelResetTimer),t.myAudioLevelResetTimer=setTimeout((function(){t.myAudioLevel=0}),1e3))}))}))}),1e3)}},{key:"modifyPeerAddrExt",value:function(e,t,n){console.crlog("[Audio] ModifyPeerAddrExt, MSID:".concat(t));var r=this.audioPeerConnections.find((function(e){return e.msid===t}));if(null!=r)if("1"===r.subformic){var i={type:"answer",sdp:n.get("speakersdp")},o={type:"answer",sdp:n.get("sdp")};if("recvonly"==r.type){var a=this.audioPeerConnections.find((function(e){return e.msid==t+1e3}));this.answerSetRemoteDescription(r,i),this.answerSetRemoteDescription(a,o)}if("sendonly"==r.type){var c=this.audioPeerConnections.find((function(e){return e.msid==t-1e3}));this.answerSetRemoteDescription(r,o),this.answerSetRemoteDescription(c,i)}}else e={type:"answer",sdp:n.get("sdp")},this.answerSetRemoteDescription(r,e);else console.crlog("[Audio][Error] Can not find MSID:".concat(t," corresponding connection object!!!"))}},{key:"answerSetRemoteDescription",value:function(e,t){var n=this,r=e.msid,i="[Audio] MSID:".concat(r,"(").concat(e.type,") --");t.sdp=this.modifyAnswerSDP(t.sdp,e.type),console.crlog("".concat(i," Audio RTCPeerConnection got remote answer, answer.sdp:\r\n").concat(t.sdp)),e.answer=t,e.connection.setRemoteDescription(new RTCSessionDescription(t)).then((function(e){console.crlog("".concat(i," Audio RTCPeerConnection answer setRemoteDescription success!")),t.sdp.includes("sendonly")&&(clearTimeout(n.audioFirstOpenWaitingTimout),n.audioFirstOpenWaiting=!1)})).catch((function(t){console.crlog("[Audio][Error] MSID:".concat(e.msid," -- Audio RTCPeerConnection setRemoteDescription fail!")),console.error(t)}))}},{key:"getAudioStream",value:function(e){var t=this;return console.crlog("[Audio] Do get audio stream...  constraints: ".concat(JSON.stringify(e))),new Promise((function(n,r){e=e||{audio:{autoGainControl:t.audioCfg.autoGainControl,echoCancellation:t.audioCfg.echoCancellation,noiseSuppression:t.audioCfg.noiseSuppression},video:!1},window.__Rtc.firstInitStream&&1==window.__Rtc.firstInitStream.active&&window.__Rtc.firstInitStream.getAudioTracks().forEach((function(e){console.crlog("[Audio] Stop first init audio stream tracks..."),e.stop()})),t.localAudioStream&&t.localAudioStream.getAudioTracks().forEach((function(e){console.crlog("[Audio] Do stop old audio stream tracks..."),e.stop()})),t.micAudioSource.mediaStream&&t.micAudioSource.mediaStream.getAudioTracks()[0].stop(),t.micAudioContext.close&&"running"===t.micAudioContext.state&&t.micAudioContext.close(),console.crlog("[Audio] Open or change mic, constraints: ".concat(JSON.stringify(e))),navigator.mediaDevices.getUserMedia(e).then((function(e){return console.crlog("[Audio] Local audio getUserMedia success! ".concat(JSON.stringify({active:e.active,id:e.id}))),t.getLocalAudioEnergy(e),e})).then((function(e){if(console.crlog("[Audio] CRVideo_NotifyAudioStream.target(0, localStream)"),CRVideo_NotifyAudioStream.target(0,e),t.audioCfg.autoGainControl)console.crlog("[Audio] Local audio track use AGC mode"),t.localAudioStream=e,t.localAudioTracks=e.getAudioTracks();else{console.crlog("[Audio] Local audio track use web audio api, manual control gain value"),t.micAudioContext.close&&"running"===t.micAudioContext.state&&t.micAudioContext.close(),t.micAudioContext=new AudioContext;var r=t.micAudioContext.createGain(),i=t.micAudioContext.createMediaStreamSource(e),o=t.micAudioContext.createMediaStreamDestination();i.connect(r),r.connect(o),t.micAudioGainNode=r,t.micAudioSource=i,t.localAudioStream=o.stream,t.localAudioTracks=t.localAudioStream.getAudioTracks(),t.setMicGainValue(t.audioCfg.micVolume)}try{console.crlog("[Audio] Local audio stream track settings: ".concat(JSON.stringify(t.localAudioTracks[0].getSettings())))}catch(e){console.error(e)}return t.localAudioTracks[0].micID=t.audioCfg.micID,t.localAudioTracks[0].autoGainControl=t.audioCfg.autoGainControl,t.localAudioTracks[0].echoCancellation=t.audioCfg.echoCancellation,t.localAudioTracks[0].noiseSuppression=t.audioCfg.noiseSuppression,n()})).catch((function(e){return console.crlog("[Audio][Error] Local audio getUserMedia fail! ".concat(e)),console.error(e),r(e)}))}))}},{key:"getLocalAudioEnergy",value:function(e){var t=this,n=new AudioContext,r=n.createScriptProcessor(2048,1,1);n.createMediaStreamSource(e).connect(r),r.connect(n.destination),r.onaudioprocess=function(i){for(var o,a=i.inputBuffer.getChannelData(0),c=0,s=0;s<a.length;++s)c+=a[s]*a[s];o=Math.sqrt(c/a.length),t.localAudioEnergy=parseInt(100*o)/100,e.active||(r.onaudioprocess=null,r=null,n.close&&"running"===n.state&&n.close())}}},{key:"isEnableAudioTrack",value:function(e){this.localAudioTracks.forEach((function(t){e?console.crlog("[Audio] Enable local audio track!"):console.crlog("[Audio] Disable local audio track!"),t.enabled=e}))}},{key:"stopAllAudioTrack",value:function(){console.crlog("[Audio] Do stop all audio track..."),this.localAudioTracks.forEach((function(e){"ended"!==e.readyState&&e.stop()})),this.micAudioSource.mediaStream&&this.micAudioSource.mediaStream.getAudioTracks()[0].stop(),this.micAudioContext.close&&"running"===this.micAudioContext.state&&this.micAudioContext.close(),this.localAudioTracks=[],this.localAudioStream=null,this.micAudioContext=Object,this.micAudioGainNode=Object,this.micAudioSource=Object}},{key:"closeAllPeerConnection",value:function(){console.crlog("[Audio] Do close all peerConnections..."),this.audioPeerConnections.forEach((function(e){e.rtpLogTimer&&clearInterval(e.rtpLogTimer),e.mediaSourceLogTimer&&clearInterval(e.mediaSourceLogTimer),e.connection&&e.connection.close()})),this.audioPeerConnections=[]}},{key:"closeMicEx",value:function(e){var t=this;return new Promise((function(n,r){var i=a.Z.userIDtoTermID(e);e==le.userInfo.userId&&t.isEnableAudioTrack(!1),i&&ie.closeMicEx(i).then((function(e){return n(e[0])}),(function(e){return r(__Rtc.CRCONFERR.Parse(e))}))}))}},{key:"audioMSIDFree",value:function(e){var t=this;console.crlog("[Audio] Audio MSID free, MSID:".concat(e));var n=function e(n){var r=t.audioPeerConnections.findIndex((function(e){return e.msid===n})),i=t.audioPeerConnections[r];i&&i.audioContext&&"running"===i.audioContext.state&&i.audioContext.close&&(console.crlog("[Audio] MSID:".concat(n,"(").concat(i.type,") -- Audio audioContext close() on msid free..")),audioContext.close()),i&&i.connection&&i.connection.close&&(console.crlog("[Audio] MSID:".concat(n,"(").concat(i.type,") -- Audio RTCPeerConnection close() on msid free..")),i.connection.close()),-1!=r&&t.audioPeerConnections.splice(r,1),n>111e3?t.audioPeerConnections.find((function(e){return e.msid===n-1e3}))&&e(n-1e3):t.audioPeerConnections.find((function(e){return e.msid===n+1e3}))&&e(n+1e3)};n(e>111e3?e-1e3:e),(e===this.audioMSID-1||e-1e3==this.audioMSID-1)&&this.audioPeerConnections.length>0&&(console.crlog("[Audio] Fast on/off mic"),this.resetAudioPeerConnection(e)),CRVideo_UploadingLog()}},{key:"resetAudioPeerConnection",value:function(){console.crlog("[Audio] Do reset audio peerConnection...");var e=this.audioPeerConnections[0];if(console.crlog("[Audio] Current audio connection type: ".concat(e.type)),"recvonly"===e.type){var t=e.remoteStream;console.crlog("[Audio] CRVideo_NotifyAudioStream.target(1, remoteStream)"),CRVideo_NotifyAudioStream.target(1,t);var n=__Rtc.CRBrowser.curBrowserCfg;n.isMobile&&"iOS"==n.platform&&15==n.OSVer.split(".")[0]&&n.OSVer.split(".")[1]<=3?this.connectToSpeaker(t):document.getElementById("CRSDKAudioPlayer")?(console.crlog("[Audio] MSID:".concat(e.msid," -- Audio RTCPeerConnection found the audio element success and set srcObject on free notify!")),document.getElementById("CRSDKAudioPlayer").srcObject=t,document.getElementById("CRSDKAudioPlayer").isPaused?CRVideo_PauseSpeaker():setTimeout((function(){try{document.getElementById("CRSDKAudioPlayer").srcObject&&1==document.getElementById("CRSDKAudioPlayer").srcObject.active&&(document.getElementById("CRSDKAudioPlayer").click(),document.getElementById("CRSDKAudioPlayer").play().then((function(){console.crlog("[Audio] 声音播放成功！")})).catch((function(e){console.crlog("[Audio] 声音播放失败！"),window.CRVideo_NotifyAudioPlayFailed.target(),setTimeout((function(){document.querySelector("#CRSDKAudioPlayer").click(),document.querySelector("#CRSDKAudioPlayer").play()}),1e3)})))}catch(e){console.error(e)}}),100)):console.crlog("[Audio][Error] MSID:".concat(e.msid," -- Can not find audio elemment, set srcObject fail on free notify!"))}else if(this.isEnableAudioTrack(!0),e.micID===this.audioCfg.micID){console.crlog("[Audio] Audio micID did not changed...");var r=e.remoteStream;console.crlog("[Audio] CRVideo_NotifyAudioStream.target(1, remoteStream)"),CRVideo_NotifyAudioStream.target(1,r);var i=__Rtc.CRBrowser.curBrowserCfg;i.isMobile&&"iOS"==i.platform&&15==i.OSVer.split(".")[0]&&i.OSVer.split(".")[1]<=3?this.connectToSpeaker(r):document.getElementById("CRSDKAudioPlayer")?(console.crlog("[Audio] MSID:".concat(e.msid," -- Audio RTCPeerConnection found the audio element success and set srcObject on free notify!")),document.getElementById("CRSDKAudioPlayer").srcObject=r,document.getElementById("CRSDKAudioPlayer").isPaused?CRVideo_PauseSpeaker():setTimeout((function(){try{document.getElementById("CRSDKAudioPlayer").srcObject&&1==document.getElementById("CRSDKAudioPlayer").srcObject.active&&(document.getElementById("CRSDKAudioPlayer").click(),document.getElementById("CRSDKAudioPlayer").play().then((function(){console.crlog("[Audio] 声音播放成功！")})).catch((function(e){console.crlog("[Audio] 声音播放失败！"),window.CRVideo_NotifyAudioPlayFailed.target(),setTimeout((function(){document.querySelector("#CRSDKAudioPlayer").click(),document.querySelector("#CRSDKAudioPlayer").play()}),1e3)})))}catch(e){console.error(e)}}),100)):console.crlog("[Audio][Error] MSID:".concat(e.msid," -- Can not find audio elemment, set srcObject fail on free notify!"))}else console.crlog("[Audio] Audio micID has changed, do changeMicID now..."),this.changeMicID(this.audioCfg.micID)}},{key:"uploadAudioDevicesStatus",value:function(e){var t=this;return new Promise((function(n,r){console.crlog("[Audio] Do upload audio devices status..."),void 0===e&&console.crlog("[Audio] Audio input devices: ".concat(JSON.stringify(t.audioInput))),function(e){ie.setAudioDeviceStatus(e).then((function(e){return n(e[0])}),(function(e){return r(__Rtc.CRCONFERR.Parse(e))}))}(void 0===e?t.audioInput.length>0:e),t.audioFirstOpenWaitingTimout=setTimeout((function(){t.audioFirstOpenWaiting=!1}),2e3)}))}},{key:"setAudioCfg",value:function(e){for(var t in e)this.audioCfg[t]=e[t];e.micID&&this.changeMicID(+e.micID),e.speakerID&&this.changeSpeakerID(+e.speakerID),null==e.autoGainControl&&null==e.echoCancellation&&null==e.noiseSuppression||this.changeMicID(this.audioCfg.micID),e.micVolume&&!this.audioCfg.autoGainControl&&this.micAudioGainNode.gain&&this.setMicGainValue(e.micVolume)}},{key:"setMicGainValue",value:function(e){var t=parseInt(e)/100;console.crlog("[Audio] Set local audio web audio api gain value: ".concat(t)),this.micAudioGainNode.gain.setValueAtTime(t,this.micAudioContext.currentTime)}},{key:"changeMicID",value:function(e){var t=this;console.crlog("[Audio] Set mic device, micID:".concat(e)),this.audioInput.forEach((function(n){if(n.id===e){var r=!1;t.localAudioTracks.forEach((function(e){1==e.enabled&&(r=!0)})),t.audioCfg.micID=e,r&&t.getAudioStream({audio:{deviceId:{ideal:n.deviceId},autoGainControl:t.audioCfg.autoGainControl,echoCancellation:t.audioCfg.echoCancellation,noiseSuppression:t.audioCfg.noiseSuppression}}).then((function(){t.uploadAudioDevicesStatus(!0)}),(function(e){console.crlog("[Audio] CRVideo_OpenMicFailed.target(".concat(e,")")),CRVideo_OpenMicFailed.target(e),console.error("Open mic failed: ".concat(e))}))}}))}},{key:"changeSpeakerID",value:function(e){var t=this;console.crlog("[Audio] Set speaker device, speakerID:".concat(e));for(var n=document.getElementById("CRSDKAudioPlayer"),r=function(r){e==t.audioOutput[r].id&&n&&n.setSinkId&&n.setSinkId(t.audioOutput[r].deviceId).then((function(){console.crlog("[Audio] Change speaker devices success, audio output device attached: ".concat(t.audioOutput[r].deviceId))})).catch((function(e){console.crlog("[Audio] Change speaker devices fail! ".concat(e.name)),e.name,console.error(e)}))},i=0;i<this.audioOutput.length;i++)r(i)}},{key:"getAudioStatus",value:function(e){var t="AUNKNOWN";return t=le.findMemberInfo({use:"userId",want:"audioStatus",value:e})||t,window.CRVideo_ASTATUS[t]}}],t&&ce(e.prototype,t),n&&ce(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();window.__crAudioClass=de,window.__Rtc.CRRTCAudio=new window.__crAudioClass,window.CRVideo_AudioStatusChanged=new le.CbProxy("CRVideo_AudioStatusChanged"),window.CRVideo_NotifyAudioStream=new le.CbProxy("CRVideo_NotifyAudioStream"),window.CRVideo_MicEnergyUpdate=new le.CbProxy("CRVideo_MicEnergyUpdate"),window.CRVideo_NetStateChanged=new le.CbProxy("CRVideo_NetStateChanged"),window.CRVideo_OpenMicFailed=new le.CbProxy("CRVideo_OpenMicFailed"),window.CRVideo_NotifyNetworkLostRate=new le.CbProxy("CRVideo_NotifyNetworkLostRate"),window.CRVideo_NotifySetVoiceChange=new le.CbProxy("CRVideo_NotifySetVoiceChange"),window.CRVideo_NotifyAudioPlaying=new le.CbProxy("CRVideo_NotifyAudioPlaying"),window.CRVideo_NotifyAudioPlayFailed=new le.CbProxy("CRVideo_NotifyAudioPlayFailed");__webpack_require__(8973);function fe(e){return fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fe(e)}function he(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ge(r.key),r)}}function _e(e,t,n){return t&&pe(e.prototype,t),n&&pe(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ge(e){var t=function(e,t){if("object"!=fe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=fe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==fe(t)?t:t+""}function Ce(e){return Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ce(e)}function ve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,me(r.key),r)}}function me(e){var t=function(e,t){if("object"!=Ce(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ce(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ce(t)?t:t+""}!function(e,t,n){var r=function(){return _e((function e(){he(this,e),this.initData(),this.initIceCallback(),this.initSDKInterface()}),[{key:"initData",value:function(){console.crlog("[Message] IMMsgModule initData...")}},{key:"initIceCallback",value:function(){var e=this;this.ICECallback={receiveIMMsg:function(t){console.crlog("[Message] ICE Notify: receiveIMMsg, params: ".concat(JSON.stringify({data:t}))),e.receiveIMMsg(t)},notifyIMForbidStatus:function(e,t,n){console.crlog("[Message] ICE Notify: notifyIMForbidStatus, params:".concat(JSON.stringify({operId:e,dstId:t,bForbid:n})))},notifyClearIMMsg:function(e){console.crlog("[Message] ICE Notify: notifyClearIMMsg, params:".concat(JSON.stringify({operId:e})))},notifyDeleteIMMsg:function(e){console.crlog("[Message] ICE Notify: notifyDeleteIMMsg, params:".concat(JSON.stringify({sn:e})))},sendIMMsgRslt:function(t,n,r,i){console.crlog("[Message] ICE Callback --\x3e sendIMMsgRslt, params:".concat(JSON.stringify({errCode:t,errDesc:n,taskID:r,cookie:i}))),e.sendIMMsgRslt(t,n,r,i)}}}},{key:"initSDKInterface",value:function(){var t=this;e.CRVideo_SendIMMsg=function(e,n,r){return console.crlog("[Message] CRVideo_SendIMMsg(".concat(e,",").concat(n,",").concat(r,")")),t.sendIMMsg(e,n,r)}}},{key:"sendIMMsg",value:function(r,i,o){var a=32767,c="",s=new Conference.IMFont(4278190080,12),l=(new Date).getTime()/1e3;""!==i&&void 0!==i&&(a=n.findMemberInfo({use:"userId",want:"termId",value:i}),c=n.findMemberInfo({use:"userId",want:"nickname",value:i}));var u=t.generateUUID();return e.__Rtc.CR__SendIMMsg(a,c,s,r,l,u,o),u}},{key:"sendIMMsgRslt",value:function(t,n,r,i){var o=0;900==t?o=1001:901==t?o=1002:3==t&&(o=3),e.CRVideo_SendIMMsgRslt.target(r,o,i)}},{key:"receiveIMMsg",value:function(t){var r=t.inMsg,i=n.findMemberInfo({use:"termId",want:"userId",value:t.srcTermId}),o=n.findMemberInfo({use:"termId",want:"userId",value:r.targetTermId}),a=r.msg,c=1e3*r.sendTime;i=i||t.srcNickname,o=o||r.targetNickname,console.crlog("[Message] CRVideo_NotifyIMmsg/CRVideo_NotifyIMMsg.target(".concat(i,",").concat(a,",").concat(c,",").concat(o||"",")")),e.CRVideo_NotifyIMmsg.target(i,a,c,o||""),e.CRVideo_NotifyIMMsg.target(i,a,c,o||"")}}])}(),i=function(){return _e((function e(){he(this,e),this.initData(),this.initIceCallback(),this.initSDKInterface()}),[{key:"initData",value:function(){console.crlog("[Message] TerminalMsgModule initData...")}},{key:"initIceCallback",value:function(){var t=this;this.ICECallback={terminalMsgRslt:function(e,n,r){console.crlog("[Message] ICE Callback --\x3e terminalMsgRslt, params:".concat(JSON.stringify({errCode:e,errDesc:n,cookie:r}))),t.terminalMsgRslt(e,n,r)},notifyTerminalMsg:function(n,r,i,o){console.crlog("[Message] ICE Callback --\x3e notifyTerminalMsg, params:".concat(JSON.stringify({moduleName:n==="".concat(e.__CRNamC,"MeetingSDK")?"MeetingSDK":n,jsonMsg:r,dstTermID:i,srcTermId:o}))),"Vote"===n?x.Z.notifyVoteChange.target(r):t.notifyTerminalMsg(n,r,i,o)}}}},{key:"initSDKInterface",value:function(){var t=this;e.CRVideo_SendMeetingCustomMsg=function(e,n){console.crlog("[Message] CRVideo_SendMeetingCustomMsg(".concat(e,",").concat(n,")")),t.sendMeetingCustiomMsg(e,n)}}},{key:"sendMeetingCustiomMsg",value:function(t,n){var r="".concat(e.__CRNamC,"MeetingSDK");console.crlog("[Message] CR__TerminalMsg('MeetingSDK',".concat(t,",").concat("",",").concat(true,",").concat(n,")")),e.__Rtc.CR__TerminalMsg(r,t,"",true,n)}},{key:"terminalMsgRslt",value:function(e,t,n){console.crlog("[Message] CRVideo_SendMeetingCustomMsgRslt.target(".concat(e,",").concat(n,")")),CRVideo_SendMeetingCustomMsgRslt.target(e,n)}},{key:"notifyTerminalMsg",value:function(t,r,i,o){var a=n.findMemberInfo({use:"termId",want:"userId",value:o});t=="".concat(e.__CRNamC,"MeetingSDK")&&(console.crlog("[Message] CRVideo_NotifyMeetingCustomMsg.target(".concat(a,",").concat(r,")")),e.CRVideo_NotifyMeetingCustomMsg.target(a,r))}}])}();e.__crIMMsgClass=r,e.__crTerminalMsgClass=i,e.__Rtc.CRRTCIMMsg=new e.__crIMMsgClass,e.__Rtc.CRRTCTermMsg=new e.__crTerminalMsgClass,e.CRVideo_SendIMMsgRslt=new n.CbProxy("CRVideo_SendIMMsgRslt"),e.CRVideo_NotifyIMmsg=new n.CbProxy("CRVideo_NotifyIMmsg"),e.CRVideo_NotifyIMMsg=new n.CbProxy("CRVideo_NotifyIMMsg"),e.CRVideo_NotifyMeetingCustomMsg=new n.CbProxy("CRVideo_NotifyMeetingCustomMsg"),e.CRVideo_SendMeetingCustomMsgRslt=new n.CbProxy("CRVideo_SendMeetingCustomMsgRslt"),x.Z.notifyVoteChange=new J.Z("notifyVoteChange")}(window,Ice,CRVideo);var ye=window.CRVideo,Se=window.Ice,Ie=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initData(),this.initIceCallback(),this.initSDKInterface()},t=[{key:"initData",value:function(){console.crlog("[SvrRecord] SvrRecordModule initData..."),this.MixersList=[],this.svrRecordStatus=0}},{key:"initIceCallback",value:function(){var e=this;this.ICECallback={notifySvrRecordStateChanged:function(t,n,r){console.crlog("[SvrRecord] ICE Notify: notifySvrRecordStateChanged, params:".concat(JSON.stringify({operatorID:t,state:n,err:r})));var i,o=n._value,a=ye.findMemberInfo({use:"termId",want:"userId",value:t});switch(e.svrRecordStatus=o,n.name){case"NO_RECORD":i=0;break;case"STARTING":i=1;break;case"RECORDING":i=2;break;case"PAUSED":i=3;break;case"STOPPING":i=4;break;default:i=n._value}console.crlog("[SvrRecord] CRVideo_SvrMixerStateChanged/CRVideo_SvrRecordStateChanged.target(".concat(i,",").concat(r,")")),CRVideo_SvrMixerStateChanged.target(i,r,a),window.CRVideo_SvrRecordStateChanged.target(i,r),setTimeout((function(){window.CRVideo_UploadingLog()}),1e3)},notifySvrRecordCfgChanged:function(e,t){var n=JSON.parse(t);console.crlog("[SvrRecord] ICE Notify: notifySvrRecordCfgChanged, params:".concat(JSON.stringify({operatorID:e,svrConfig:n}))),console.crlog("[SvrRecord] CRVideo_SvrRecVideosChanged/CRVideo_SvrMixerCfgChanged.target()"),window.CRVideo_SvrRecVideosChanged.target(),window.CRVideo_SvrMixerCfgChanged.target()},notifySvrRecordFileState:function(e){var t=JSON.parse(e);console.crlog("[SvrRecord] ICE Notify: notifySvrRecordFileState, params:".concat(JSON.stringify({State:t})));var n={errCode:t.errCode,state:t.state,duration:t.duration,fileSize:t.fileSize,fileName:t.fileName,id:t.id};console.crlog("[SvrRecord] CRVideo_NotifySvrRecordFileState.target(".concat(JSON.stringify(t),")")),console.crlog("[SvrRecord] CRVideo_SvrMixerOutputInfo.target(".concat(JSON.stringify(n),")")),window.CRVideo_NotifySvrRecordFileState.target(t),window.CRVideo_SvrMixerOutputInfo.target(n)}}}},{key:"initSDKInterface",value:function(){var e=this;window.CRVideo_StartSvrMixer=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];try{console.crlog("[SvrRecord] CRVideo_StartSvrMixer(MutiMixerCfgs, MutiMixerContents, MutiMixerOutputs)"),console.crlog("[SvrRecord] MutiMixerCfgs: ".concat(JSON.stringify(t))),console.crlog("[SvrRecord] MutiMixerContents: ".concat(JSON.stringify(n))),console.crlog("[SvrRecord] MutiMixerOutputs: ".concat(JSON.stringify(r)))}catch(e){console.error(e)}return new Promise((function(i,o){e.MixersList=[],t.forEach((function(t){var i,o,a={};if(a.id=t.id,a.recCfg={},a.contents=[],a.clientType=null==t.clientType?1:t.clientType,null!=t.speechText&&(a.speechText=t.speechText),null!=t.live&&(a.live=t.live),t.streamTypes=t.streamTypes?t.streamTypes:3,n.forEach((function(e){e.id===t.id&&(i=e.content)})),r.forEach((function(e){e.id==t.id&&(o=e.output)})),t.streamTypes&&3!=t.streamTypes){if(t.streamTypes&&1==t.streamTypes){var c=t.aCfg;c&&(a.recCfg.audioFormat=c.audioFormat||1,a.recCfg.channelType=c.channelType||1,a.recCfg.streamTypes=1),o&&o.forEach((function(e){0==e.type&&(a.recCfg.serverPathFileName=e.filename,CRVideo.APPIDMode&&(a.recCfg.userNetDiskId=ye.multiProject.userId))})),i&&(a.contents=e.fmtAudioContent(i)),e.MixersList.push(a)}}else{var s=t.cfg;s&&(a.recCfg.dstResolutionWidth=s.width||1280,a.recCfg.dstResolutionHeight=s.height||720,a.recCfg.fps=s.frameRate||20,a.recCfg.gop=s.gop||120,a.recCfg.maxBPS=s.bitRate||35e4,a.recCfg.qp=s.defaultQP||26,a.recCfg.streamTypes=3),o&&o.forEach((function(e){0==e.type?(a.recCfg.serverPathFileName=e.filename,CRVideo.APPIDMode&&(a.recCfg.userNetDiskId=ye.multiProject.userId)):1==e.type&&(a.recCfg.liveUrl=e.liveUrl)})),i&&(a.contents=e.fmtVideoContent(i)),e.MixersList.push(a)}}));var a=JSON.stringify(e.MixersList);1==e.MixersList.length&&0==e.MixersList[0].clientType&&(a=JSON.stringify(e.MixersList[0])),z.startSvrRecord(a).then((function(e){return i({errCode:0})}),(function(e){return o(__Rtc.CRCONFERR.Parse(e))}))}))},window.CRVideo_UpdateSvrMixerContent=function(t){try{console.crlog("[SvrRecord] CRVideo_UpdateSvrMixerContent(".concat(JSON.stringify(t),")"))}catch(e){console.error(e)}return new Promise((function(n,r){t.forEach((function(t){e.MixersList.forEach((function(n){n.id===t.id&&(3===n.recCfg.streamTypes&&(n.contents=e.fmtVideoContent(t.content)),1===n.recCfg.streamTypes&&(n.contents=e.fmtAudioContent(t.content)))}))})),z.updateSvrRecCfg(JSON.stringify(e.MixersList)).then((function(e){return n({errCode:0})}),(function(e){return r(__Rtc.CRCONFERR.Parse(e))}))}))},window.CRVideo_StopSvrMixer=function(){return new Promise((function(e,t){console.crlog("[SvrRecord] CRVideo_StopSvrMixer()"),z.stopSvrRecord().then((function(t){return e({errCode:0})}),(function(e){return t(__Rtc.CRCONFERR.Parse(e))}))}))},window.CRVideo_GetSvrMixerState=function(){var t=e.svrRecordStatus||0;return console.crlog("[SvrRecord] CRVideo_GetSvrMixerState(), return: ".concat(t)),t}}},{key:"fmtAudioContent",value:function(e){var t=JSON.parse(JSON.stringify(e));return t.forEach((function(e){if(9==e.type){var t=ye.findMemberInfo({use:"userId",want:"termId",value:e.param});e.param={termId:t}}})),t}},{key:"fmtVideoContent",value:function(e){var t=JSON.parse(JSON.stringify(e));return t.forEach((function(e){if(4==e.type)e.param={},e.param.resourceid=Se.generateUUID();else if(0==e.type){var t,n,r,i;n=(t=e.param.camid.split("."))[t.length-1],t.length=t.length-1,r=t.join(".");var o=ye.allMemberInfo.find((function(e){return e.userId==r}));i=o&&o.termId?o.termId:"",e.param={},e.param.camId=+n,e.param.termId=i}else 7==e.type&&(e.param.resourceid=Se.generateUUID())})),t}}],t&&ve(e.prototype,t),n&&ve(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function Re(e){return Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Re(e)}function we(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,be(r.key),r)}}function be(e){var t=function(e,t){if("object"!=Re(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Re(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Re(t)?t:t+""}window.__crSvrRecordClass=Ie,window.__Rtc.CRRTCRecord=new window.__crSvrRecordClass,window.CRVideo_SvrRecordStateChanged=new ye.CbProxy("CRVideo_SvrRecordStateChanged"),window.CRVideo_SvrRecVideosChanged=new ye.CbProxy("CRVideo_SvrRecVideosChanged"),window.CRVideo_NotifySvrRecordFileState=new ye.CbProxy("CRVideo_NotifySvrRecordFileState"),window.CRVideo_SvrMixerCfgChanged=new ye.CbProxy("CRVideo_SvrMixerCfgChanged"),window.CRVideo_SvrMixerStateChanged=new ye.CbProxy("CRVideo_SvrMixerStateChanged"),window.CRVideo_SvrMixerOutputInfo=new ye.CbProxy("CRVideo_SvrMixerOutputInfo");var Ee=window.CRVideo,De=window.Ice,Pe=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initData(),this.initIceCallback(),this.initSDKInterface()},(t=[{key:"initData",value:function(){console.crlog("[CloudRecord] CloudRecordModule initData..."),this.cloudRecordList=[]}},{key:"initIceCallback",value:function(){var e=this;this.ICECallback={notifyCloudRecordStateChanged:function(t,n,r,i){var o=r.value,a=JSON.parse(i);console.crlog("[CloudRecord] ICE Notify: notifyCloudRecordStateChanged, params:".concat(JSON.stringify({operatorId:t,MixerID:n,status:o}))),e.updateRecordList({MixerID:n,state:o});var c=Ee.findMemberInfo({use:"termId",want:"userId",value:t})||"CRMCU";if(0===o)0!==(a={err:e.errCodeTo(a.err),errDesc:a.errDesc}).err&&(console.crlog("[CloudRecord] CRVideo_CreateCloudMixerFailed.target(".concat(n,", ").concat(a.err,")")),CRVideo_CreateCloudMixerFailed.target(n,a.err));else if(1===o){var s=JSON.parse(a.jsonCfg);a=e.IceCfg2UserCfg(s)}console.crlog("[CloudRecord] CRVideo_CloudMixerStateChanged.target(".concat(n,",").concat(o,",").concat(JSON.stringify(a),",").concat(c,")")),window.CRVideo_CloudMixerStateChanged.target(n,o,a,c)},notifyCloudRecordCfgChanged:function(t,n,r){r=JSON.parse(r);var i=JSON.parse(JSON.stringify(r));i.storageConfig&&(i.storageConfig.accessKey&&(i.storageConfig.accessKey="******"),i.storageConfig.secretKey&&(i.storageConfig.secretKey="******")),console.crlog("[CloudRecord] ICE Notify: notifyCloudRecordCfgChanged, params:".concat(JSON.stringify({operatorId:t,MixerID:n,jsonCfg:i}))),e.updateRecordList({MixerID:n,jsonCfg:r}),console.crlog("[CloudRecord] CRVideo_CloudMixerInfoChanged.target(".concat(n,")")),window.CRVideo_CloudMixerInfoChanged.target(n)},notifyCloudRecordFileState:function(t,n){(n=JSON.parse(n)).errCode&&(n.errCode=e.errCodeTo(n.errCode)),console.crlog("[CloudRecord] CRVideo_CloudMixerOutputInfoChanged.target(".concat(t,", ").concat(JSON.stringify(n),")")),window.CRVideo_CloudMixerOutputInfoChanged.target(t,n)}}}},{key:"initSDKInterface",value:function(){var e=this;window.CRVideo_CreateCloudMixer=function(t){try{var n=JSON.parse(JSON.stringify(t));n.storageConfig&&(n.storageConfig.accessKey&&(n.storageConfig.accessKey="******"),n.storageConfig.secretKey&&(n.storageConfig.secretKey="******")),console.crlog("[CloudRecord] CRVideo_CreateCloudMixer(".concat(JSON.stringify(n),")"))}catch(e){console.error(e),Promise.resolve().then((function(){console.crlog("[CloudRecord] CRVideo_CreateCloudMixerFailed.target(".concat(r,", 5)")),CRVideo_CreateCloudMixerFailed.target(r,5)}))}var r=De.generateUUID().replace(/-/g,"");return e.userCfg2IceCfg(t).then((function(e){console.crlog("[CloudRecord] _conference.startCloudRecord(".concat(r,", ").concat(JSON.stringify(e),")")),z.startCloudRecord(r,JSON.stringify(e)).catch((function(e){console.error(e),e.toString().indexOf("SeviceNotEnabled")>-1&&(e="806"),console.crlog("[CloudRecord] CRVideo_CreateCloudMixerFailed.target(".concat(r,", 806)")),CRVideo_CreateCloudMixerFailed.target(r,806)}))})).catch((function(e){console.error(e),console.crlog("[CloudRecord] CRVideo_CreateCloudMixerFailed.target(".concat(r,", 1)")),CRVideo_CreateCloudMixerFailed.target(r,1)})),r},window.CRVideo_DestroyCloudMixer=function(e){return new Promise((function(t,n){console.crlog("[CloudRecord] CRVideo_DestroyCloudMixer(".concat(e,")")),console.crlog("[CloudRecord] _conference.stopCloudRecord(".concat(e,")")),z.stopCloudRecord(e).then((function(e){return t({errCode:0,errDesc:"success"})}),(function(e){return console.error(e),n(__Rtc.CRCONFERR.Parse(e))}))}))},window.CRVideo_UpdateCloudMixerContent=function(t,n){return new Promise((function(r,i){try{console.crlog("[CloudRecord] CRVideo_UpdateCloudMixerContent(".concat(t,",").concat(JSON.stringify(n),")"))}catch(e){return console.error(e),i({errCode:5,errDesc:"参数格式错误"})}e.cloudRecordList.some((function(o){if(o.MixerID==t){var a=JSON.parse(JSON.stringify(o.jsonCfg));if(1===a.mode)for(var c in n){if("videoFileCfg"===c){if(!a.videoFileCfg)return i({errCode:5,errDesc:"不支持录制中创建视频录制"});a[c].subscribeVideos=e.videoCfgUID2TermId(n[c].subscribeVideos)}if("audioFileCfg"===c){if(!a.audioFileCfg)return i({errCode:5,errDesc:"不支持录制中创建音频录制"});a[c].subscribeAudios=e.audioCfgUID2TermId(n[c].subscribeAudios)}}else if(0===a.mode)for(var s in n){if("videoFileCfg"===s){if(!a.videoFileCfg)return i({errCode:5,errDesc:"不支持录制中创建视频录制"});n[s].layoutConfig&&(n[s].layoutConfig.reduce((function(t,n){return 0===n.type&&(n.param.camid=e.uidACamid2TermIdACamId(n.param.camid)),t.push(n),t}),[]),a[s].layoutConfig=n[s].layoutConfig),n[s].aChannelContent&&(a[s].aChannelContent=e.Uids2termIds(n[s].aChannelContent,!0))}"audioFileCfg"===s&&n[s].aChannelContent&&(a[s].aChannelContent=e.Uids2termIds(n[s].aChannelContent,!0))}return console.crlog("[Cloudrecord] _conference.updateCloudRecord(".concat(t,", ").concat(JSON.stringify(a),")")),z.updateCloudRecord(t,JSON.stringify(a)).then((function(e){return r({errCode:0,errDesc:"success"})}),(function(e){return console.error(e),i(__Rtc.CRCONFERR.Parse(e))})),!0}}))}))},window.CRVideo_GetCloudMixerInfo=function(t){console.crlog("[CloudRecord] CRVideo_GetCloudMixerInfo(".concat(t,")"));var n=null;return e.cloudRecordList.some((function(r){if(r.MixerID==t){var i=e.IceCfg2UserCfg(r.jsonCfg);return n={ID:r.MixerID,owner:Ee.findMemberInfo({use:"termId",want:"userId",value:r.jsonCfg.owner})||"",cfg:i,state:r.state},!0}})),console.crlog("[CloudRecord] CRVideo_GetCloudMixerInfo, return: ".concat(JSON.stringify(n))),n},window.CRVideo_GetAllCloudMixerInfo=function(){console.crlog("[CloudRecord] CRVideo_GetAllCloudMixerInfo()");var t=[];return e.cloudRecordList.forEach((function(n){if(0!==n.state){var r=e.IceCfg2UserCfg(n.jsonCfg),i={ID:n.MixerID,owner:Ee.findMemberInfo({use:"termId",want:"userId",value:n.jsonCfg.owner})||"",cfg:r,state:n.state};t.push(i)}})),console.crlog("[CloudRecord] CRVideo_GetAllCloudMixerInfo, return: ".concat(JSON.stringify(t))),t}}},{key:"errCodeTo",value:function(e){return{0:0,1:900,2:901,3:902,4:1,5:5,6:904,7:5,8:5,9:905,200:907}[e]}},{key:"initRecord",value:function(e){if(e.confInfo&&e.confInfo.cloud_record){var t=JSON.parse(e.confInfo.cloud_record);for(var n in t)this.cloudRecordList.push({MixerID:n,jsonCfg:JSON.parse(t[n].jsonCfg||"{}"),state:t[n].state})}}},{key:"updateRecordList",value:function(e){var t=this.cloudRecordList.findIndex((function(t){return t.MixerID==e.MixerID}));if(-1!==t)if(0==e.state)this.cloudRecordList.splice(t,1);else for(var n in e)this.cloudRecordList[t][n]=e[n];else{var r={};for(var n in e)r[n]=e[n];this.cloudRecordList.push(r)}}},{key:"userCfg2IceCfg",value:function(e){return new Promise((function(t,n){var r={clientType:1};if(r.owner=Ee.userInfo.termId,r.storageConfig=Object.assign(e.storageConfig||{},{userNetDiskId:+Ee.multiProject.userId}),r.mode=e.mode||0,1==r.mode){if(e.audioFileCfg){r.audioFileCfg={svrPath:e.audioFileCfg.svrPath?e.audioFileCfg.svrPath:"",svrFileNameSuffix:e.audioFileCfg.svrFileNameSuffix?e.audioFileCfg.svrFileNameSuffix:".mp3"},r.audioFileCfg.subscribeAudios=[];try{e.audioFileCfg.subscribeAudios&&e.audioFileCfg.subscribeAudios.forEach((function(e){if("_cr_all_"===e)r.audioFileCfg.subscribeAudios.push(e);else{var t=Ee.findMemberInfo({use:"userId",want:"termId",value:e});if(!t)return n({errCode:5,errDesc:"参数错误，未找到用户: ".concat(e)});r.audioFileCfg.subscribeAudios.push(t)}}))}catch(e){return console.error(e),n({errCode:5,errDesc:'"subscribeAudios"参数错误'})}}if(e.videoFileCfg){r.videoFileCfg={svrPath:e.videoFileCfg.svrPath?e.videoFileCfg.svrPath:"",svrFileNameSuffix:e.videoFileCfg.svrFileNameSuffix?e.videoFileCfg.svrFileNameSuffix:".mp4",aStreamType:e.videoFileCfg.aStreamType?e.videoFileCfg.aStreamType:0},r.videoFileCfg.subscribeVideos=[];try{e.videoFileCfg.subscribeVideos&&e.videoFileCfg.subscribeVideos.forEach((function(e){if("_cr_all_"===e||"_cr_allDefCam_"===e)r.videoFileCfg.subscribeVideos.push(e);else{var t=e.lastIndexOf("."),i=e.substr(0,t),o=e.substr(t+1)||-1,a=Ee.findMemberInfo({use:"userId",want:"termId",value:i});if(!a)return n({errCode:5,errDesc:"参数错误，未找到用户: ".concat(i)});r.videoFileCfg.subscribeVideos.push("".concat(a,".").concat(o))}}))}catch(e){return console.error(e),n({errCode:5,errDesc:'"subscribeVideos"参数错误'})}}}if(0===r.mode){if(e.audioFileCfg){var i=Object.assign({aChannelType:0},e.audioFileCfg);if(i.aChannelContent){var o=[];i.aChannelContent.forEach((function(e){var t=Ee.findMemberInfo({use:"userId",want:"termId",value:e});if(!t)return n({errCode:5,errDesc:"参数错误，未找到用户: ".concat(e)});o.push(t)})),i.aChannelContent=o}r.audioFileCfg=i}if(e.videoFileCfg){var a=Object.assign({mixedLayout:1},e.videoFileCfg);if(a.layoutConfig.forEach((function(e){if(0===e.type){var t=e.param.camid,r=t.lastIndexOf("."),i=t.substr(0,r),o=t.substr(r+1),a=Ee.findMemberInfo({use:"userId",want:"termId",value:i});if(!a)return n({errCode:5,errDesc:"参数错误，未找到用户: ".concat(i)});e.param.camid="".concat(a,".").concat(o)}})),a.aChannelContent){var c=[];a.aChannelContent.forEach((function(e){var t=Ee.findMemberInfo({use:"userId",want:"termId",value:e});if(!t)return n({errCode:5,errDesc:"参数错误，未找到用户: ".concat(e)});c.push(t)})),a.aChannelContent=c}r.videoFileCfg=a}}return t(r)}))}},{key:"IceCfg2UserCfg",value:function(e){var t=this,n=JSON.parse(JSON.stringify(e)),r={mode:n.mode,audioFileCfg:n.audioFileCfg,videoFileCfg:n.videoFileCfg};return n.videoFileCfg&&(n.videoFileCfg.aChannelContent&&(r.videoFileCfg.aChannelContent=this.Uids2termIds(n.videoFileCfg.aChannelContent,!1)),n.videoFileCfg.subscribeVideos&&(r.videoFileCfg.subscribeVideos=this.videoCfgTermId2UID(n.videoFileCfg.subscribeVideos)),n.videoFileCfg.layoutConfig&&r.videoFileCfg.layoutConfig.map((function(e){return 0===e.type&&(e.param.camid=t.uidACamid2TermIdACamId(e.param.camid,!0)),e}))),n.audioFileCfg&&(n.audioFileCfg.aChannelContent&&(r.audioFileCfg.aChannelContent=this.Uids2termIds(n.audioFileCfg.aChannelContent,!1)),n.audioFileCfg.subscribeAudios&&(r.audioFileCfg.subscribeAudios=this.audioCfgTermId2UID(n.audioFileCfg.subscribeAudios))),r}},{key:"Uids2termIds",value:function(e,t){return e.map((function(e){return Ee.findMemberInfo({use:t?"userId":"termId",want:t?"termId":"userId",value:e})}))}},{key:"uidACamid2TermIdACamId",value:function(e,t){var n=e.lastIndexOf("."),r=e.substr(0,n),i=e.substr(n+1)||-1,o=Ee.findMemberInfo({use:t?"termId":"userId",want:t?"userId":"termId",value:r})||"";return"".concat(o,".").concat(i)}},{key:"videoCfgTermId2UID",value:function(e){var t=[];return e.forEach((function(e){if("_cr_all_"===e||"_cr_allDefCam_"===e)t.push(e);else{var n=e.lastIndexOf("."),r=e.substr(0,n),i=e.substr(n+1)||-1,o=Ee.findMemberInfo({use:"termId",want:"userId",value:r})||"";t.push("".concat(o,".").concat(i))}})),t}},{key:"videoCfgUID2TermId",value:function(e){return e.forEach((function(t,n){if("_cr_all_"!==t&&"_cr_allDefCam_"!==t){var r=t.lastIndexOf("."),i=t.substr(0,r),o=t.substr(r+1)||-1,a=Ee.findMemberInfo({use:"userId",want:"termId",value:i})||"";e[n]="".concat(a,".").concat(o)}})),e}},{key:"audioCfgTermId2UID",value:function(e){var t=[];return e.forEach((function(e){if("_cr_all_"===e)t.push(e);else{var n=Ee.findMemberInfo({use:"termId",want:"userId",value:e})||"";t.push(n)}})),t}},{key:"audioCfgUID2TermId",value:function(e){return e.forEach((function(t,n){if("_cr_all_"!==t){var r=Ee.findMemberInfo({use:"userId",want:"termId",value:t})||"";e[n]=r}})),e}}])&&we(e.prototype,t),n&&we(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function Te(e){return Te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Te(e)}function xe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Me(r.key),r)}}function Me(e){var t=function(e,t){if("object"!=Te(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Te(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Te(t)?t:t+""}window.__crCloudRecordClass=Pe,window.__Rtc.CRRTCCloudRecord=new window.__crCloudRecordClass,window.CRVideo_CreateCloudMixerFailed=new Ee.CbProxy("CRVideo_CreateCloudMixerFailed"),window.CRVideo_CloudMixerStateChanged=new Ee.CbProxy("CRVideo_CloudMixerStateChanged"),window.CRVideo_CloudMixerInfoChanged=new Ee.CbProxy("CRVideo_CloudMixerInfoChanged"),window.CRVideo_CloudMixerOutputInfoChanged=new Ee.CbProxy("CRVideo_CloudMixerOutputInfoChanged");var Ae=window.CRVideo,Oe=(window.Ice,function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initIceCallback(),this.initSDKInterface()},t=[{key:"initIceCallback",value:function(){this.ICECallback={kickoutRslt:function(e,t,n){CRVideo_KickoutRslt.target()}}}},{key:"initSDKInterface",value:function(){window.CRVideo_GetAllMembers=function(){var e=[];return Ae.allMemberInfo.forEach((function(t){var n={};n.userID=t.userId,n.nickname=t.nickname,n.audioStatus=window.CRVideo_ASTATUS[t.audioStatus],n.videoStatus=window.CRVideo_VSTATUS[t.videoStatus],e.push(n)})),e},window.CRVideo_GetMemberInfo=function(e){var t={};Ae.allMemberInfo.forEach((function(n){e==n.userId&&(t.userID=n.userId,t.nickname=n.nickname,t.audioStatus=window.CRVideo_ASTATUS[n.audioStatus],t.videoStatus=window.CRVideo_VSTATUS[n.videoStatus])}));try{console.crlog("[Member] CRVideo_GetMemberInfo(".concat(e,"), return: ").concat(JSON.stringify(t)))}catch(e){console.error(e)}return t},window.CRVideo_GetMemberNickName=function(e){var t="";return e==Ae.userInfo.userId?t=Ae.userInfo.nickname:Ae.allMemberInfo.forEach((function(n){e==n.userId&&(t=n.nickname)})),t},window.CRVideo_IsUserInMeeting=function(e){var t=!1;return Ae.allMemberInfo.forEach((function(n){e==n.userId&&(t=!0)})),console.crlog("[Member] CRVideo_IsUserInMeeting(".concat(e,"), return: ").concat(t)),t},x.Z.getAllMembers=function(){var e=[];return Ae.allMemberInfo.forEach((function(t){var n={};n.actor=t.actor,n.userID=t.userId,n.nickname=t.nickname,n.audioStatus=window.CRVideo_ASTATUS[t.audioStatus],n.videoStatus=window.CRVideo_VSTATUS[t.videoStatus],n.device=t.client_device,e.push(n)})),e},x.Z.getMemberInfo=function(e){var t={};return Ae.allMemberInfo.forEach((function(n){e==n.userId&&(t.actor=n.actor,t.userID=n.userId,t.nickname=n.nickname,t.audioStatus=window.CRVideo_ASTATUS[n.audioStatus],t.videoStatus=window.CRVideo_VSTATUS[n.videoStatus],t.device=n.client_device)})),t}}}],t&&xe(e.prototype,t),n&&xe(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}());function ke(e){return ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ke(e)}function Ve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Le(r.key),r)}}function Ne(e,t,n){return t&&Ve(e.prototype,t),n&&Ve(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Le(e){var t=function(e,t){if("object"!=ke(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ke(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ke(t)?t:t+""}function Ue(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}window._crMemberClass=Oe,window.__Rtc.CRRTCMember=new window._crMemberClass;var je=window.CRVideo,Be=window.Ice,Fe=Ne((function e(t){Ue(this,e),this.msid=t,this.offer_cb=null,this.offer=null,this.answer_cb=null,this.answer=null,this.candidates=[],this.stream=null,this.connection=null,this.logStr=null})),He=function(){return Ne((function e(){Ue(this,e),this.initData(),this.initIceCallback(),this.initSDKInterface()}),[{key:"initData",value:function(){console.crlog("[Screen] ScreenShareModule initData..."),this.getDisplayMediaAPI=!1,this.screenHeight=window.screen.height<=1080?window.screen.height:1080,this.screenShareCfg={maxFPS:8,maxKbps:2e3},this.screenCfg={audio:!1,video:{frameRate:{ideal:this.screenShareCfg.maxFPS},height:{ideal:this.screenHeight}}},this.isSharing=!1,this.isMySharing=!1,this.isMarking=!1,this.localScreenBaseStream=null,this.localScreenStream=null,this.remoteScreenStream=null,this.userInterfaceStop=!1,this.lastLocalMSID=13e4,this.lastRemoteMSID=23e4,this.localConnectionH264=new Fe(this.lastLocalMSID++),this.localConnectionVP8=new Fe(this.lastLocalMSID++),this.remoteConnection=new Fe(this.lastRemoteMSID++),this.screenShareInfo={},this.allMarkDataList=[],this.ctrlReqState=!1,this.enableOtherMarkState=!0,navigator.mediaDevices&&void 0!==navigator.mediaDevices.getDisplayMedia&&(this.getDisplayMediaAPI=!0)}},{key:"initIceCallback",value:function(){var e=this;this.ICECallback={notifyStartScreenShare:function(t){console.crlog("[Screen] ICE Notify --\x3e notifyStartScreenShare, params:".concat(JSON.stringify(t))),e.screenShareInfo=t;var n=je.allMemberInfo.find((function(e){return e.termId==t.sharer}));n&&console.crlog("[Screen] CRVideo_NotifyScreenShareStarted.target(".concat(n.userId,",").concat(t.state,")")),n&&CRVideo_NotifyScreenShareStarted.target(n.userId,t.state),e.isSharing=!0,t.sharer==je.userInfo.termId&&(e.isMySharing=!0),3==t.state&&(e.ICECallback.notifyStartMarked(t.sharer),__Rtc.CRICEAPI.GetAllMarkData(),__Rtc.CRICEAPI.GetAllMarkDataV4())},notifyStopScreenShare:function(t){console.crlog("[Screen] ICE Notify --\x3e notifyStopScreenShare, params:".concat(JSON.stringify({operator:t}))),e.isMySharing&&e.stopScreenShareHandle(!0),e.ICECallback.notifyClearAllMarks();var n=je.allMemberInfo.find((function(e){return e.termId==t}));e.isSharing=!1,t==je.userInfo.termId&&(e.isMySharing=!1),n&&je.isMeeting&&console.crlog("[Screen] CRVideo_NotifyScreenShareStopped.target(".concat(n.userId,")")),n&&je.isMeeting&&CRVideo_NotifyScreenShareStopped.target(n.userId)},notifyScMakeIFrame:function(){console.crlog("[Screen] ICE Notify --\x3e notifyScMakeIFrame, params: null"),e.handleScMakeIFrame()},notifyStartMarked:function(t){console.crlog("[Screen] ICE Notify --\x3e notifyStartMarked, params:".concat(JSON.stringify({operator:t}))),e.pauseCanvasRender&&e.pauseCanvasRender();var n=je.allMemberInfo.find((function(e){return e.termId==t}));e.isMarking=!0,__Rtc.CRRTCUI.screenContainerList.forEach((function(e){e.canvasContainer&&(e.canvasContainer._canvas.style.display="block",e.canvasContainer.resize())})),n&&console.crlog("[Screen] CRVideo_NotifyScreenMarkStarted.target(".concat(n.userId,")")),n&&CRVideo_NotifyScreenMarkStarted.target(n.userId)},notifyStopMarked:function(t){console.crlog("[Screen] ICE Notify --\x3e notifyStopMarked, params:".concat(JSON.stringify({operator:t}))),e.startCanvasRender&&e.startCanvasRender();var n=je.allMemberInfo.find((function(e){return e.termId==t}));e.isMarking=!1,__Rtc.CRRTCUI.screenContainerList.forEach((function(e){e.canvasContainer&&(e.canvasContainer._canvas.style.display="none",e.canvasContainer.resize())})),n&&console.crlog("[Screen] CRVideo_NotifyScreenMarkStopped.target(".concat(n.userId,")")),n&&CRVideo_NotifyScreenMarkStopped.target(n.userId)},notifyMarkData:function(e){var t=e.termid,n=e.type,r=e.markid;console.crlog("[Screen] ICE Notify --\x3e notifyMarkData, params:".concat(JSON.stringify({termID:t,type:n,markID:r,mousePosSeq:"mousePoseqDataArr"})))},notifyMarkDataV4:function(t){var n=t.termid,r=t.type,i=t.markid;console.crlog("[Screen] ICE Notify --\x3e notifyMarkDataV4, params:".concat(JSON.stringify({termID:n,type:r,markID:i,mousePosSeq:"mousePoseqDataArr"}))),e.allMarkDataList.push(t),__Rtc.CRRTCUI.screenContainerList.forEach((function(n){var r=e.parseMarkData(t);n.canvasContainer._markDataList.push(r),n.canvasContainer&&n.canvasContainer._drawData(r)}))},notifyClearAllMarks:function(){console.crlog("[Screen] ICE Notify --\x3e notifyClearAllMarks, params: null"),e.allMarkDataList=[],__Rtc.CRRTCUI.screenContainerList.forEach((function(e){e.canvasContainer.clearAllMark()}))},notifyClearAllMarksV4:function(){console.crlog("[Screen] ICE Notify --\x3e notifyClearAllMarksV4, params: null"),e.allMarkDataList=[],__Rtc.CRRTCUI.screenContainerList.forEach((function(e){e.canvasContainer.clearAllMark()}))},notifyCtrlReqState:function(t,n){console.crlog("[Conference] ICE Notify: notifyCtrlReqState, params:".concat(JSON.stringify({operatorID:t,state:n}))),e.ctrlReqState=n;var r=je.allMemberInfo.find((function(e){return e.termId==t}));x.Z.notifyCtrlReqState.target(r.userId,n)},notifyEnableOtherMarked:function(t,n){console.crlog("[Conference] ICE Notify: notifyEnableOtherMarked, params:".concat(JSON.stringify({operatorID:t,state:n}))),e.enableOtherMarkState=n;var r=je.allMemberInfo.find((function(e){return e.termId==t}));x.Z.notifyEnableOtherMarked.target(r.userId,n)},getScreenShareInfoRslt:function(t,n){try{console.crlog("[Screen] ICE Callback --\x3e getScreenShareInfoRslt, params:".concat(JSON.stringify({errCode:t,data:n})))}catch(e){console.error(e)}0==t?(0!==n.state&&(console.crlog("[Screen] ScreenShare is strated in this meeting..."),e.ICECallback.notifyStartScreenShare(n)),e.ctrlReqState=n.allowCtrlReq,x.Z.notifyCtrlReqState.target("",n.allowCtrlReq)):console.crlog("[Screen][Error] Get screenShare info fail! ".concat(t))},startScreenShareRslt:function(e){console.crlog("[Screen] ICE Callback --\x3e startScreenShareRslt, params:".concat(JSON.stringify({errCode:e}))),console.crlog("[Screen] CRVideo_StartScreenShareRslt.target(".concat(e,")")),CRVideo_StartScreenShareRslt.target(e)},stopScreenShareRslt:function(e){console.crlog("[Screen] ICE Callback --\x3e stopScreenShareRslt, params:".concat(JSON.stringify({errCode:e}))),console.crlog("[Screen] CRVideo_StopScreenShareRslt.target(".concat(e,")")),CRVideo_StopScreenShareRslt.target(e)},startMarkedRslt:function(e){console.crlog("[Screen] ICE Callback --\x3e startMarkedRslt, params:".concat(JSON.stringify({errCode:e}))),console.crlog("[Screen] CRVideo_StartScreenMarkRslt.target(".concat(e,")")),CRVideo_StartScreenMarkRslt.target(e)},stopMarkedRslt:function(e){console.crlog("[Screen] ICE Callback --\x3e stopMarkedRslt, params:".concat(JSON.stringify({errCode:e}))),console.crlog("[Screen] CRVideo_StopScreenMarkRslt.target(".concat(e,")")),CRVideo_StopScreenMarkRslt.target(e)},clearAllMarksV4Rslt:function(e){console.crlog("[Screen] ICE Callback --\x3e clearAllMarksV4Rslt, params:".concat(JSON.stringify({errCode:e})))},getAllMarkDataRslt:function(e,t){try{console.crlog("[Screen] ICE Callback --\x3e getAllMarkDataRslt, params:".concat(JSON.stringify({errCode:e,data:t})))}catch(e){console.error(e)}},getAllMarkDataV4Rslt:function(t,n){try{console.crlog("[Screen] ICE Callback --\x3e getAllMarkDataV4Rslt, params:".concat(JSON.stringify({errCode:t,data:"markData"})))}catch(e){console.error(e)}0==t&&(e.allMarkDataList=n),e.allMarkDataList.forEach((function(t){__Rtc.CRRTCUI.screenContainerList.forEach((function(n){var r=e.parseMarkData(t);n.canvasContainer._markDataList.push(r),n.canvasContainer&&n.canvasContainer._drawData(r)}))}))},sendMarkDataV4Rslt:function(e){try{console.crlog("[Screen] ICE Callback --\x3e sendMarkDataV4Rslt, params:".concat(JSON.stringify({errCode:e})))}catch(e){console.error(e)}}}}},{key:"initSDKInterface",value:function(){var e=this;window.CRVideo_SetScreenShareCfg=function(t){for(var n in console.crlog("[Screen] CRVideo_SetScreenShareCfg(".concat(JSON.stringify(t),")")),t)e.screenShareCfg[n]=t[n]},window.CRVideo_GetScreenShareCfg=function(){return JSON.parse(JSON.stringify(e.screenShareCfg))},window.CRVideo_StartScreenShare=function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).constraints;if(console.crlog("[Screen] CRVideo_StartScreenShare()"),e.isSharing)return CRVideo_StartScreenShareRslt.target(1);t?e.electronStartScreenShare(t):e.startScreenShare(e.screenShareCfg)},window.CRVideo_StopScreenShare=function(){console.crlog("[Screen] CRVideo_StopScreenShare()"),e.userInterfaceStop=!0,e.stopScreenShareHandle()},window.CRVideo_StartScreenMark=function(){console.crlog("[Screen] CRVideo_StartScreenMark()"),__Rtc.CRICEAPI.StartMarked()},window.CRVideo_StopScreenMark=function(){console.crlog("[Screen] CRVideo_StopScreenMark()"),__Rtc.CRICEAPI.StopMarked(),__Rtc.CRICEAPI.ClearAllMarksV4()},x.Z.setCtrlReqState=function(e){return console.crlog("[Screen] MeetSDK.setCtrlReqState(".concat(e,")")),new Promise((function(t,n){__Rtc.CRICEAPI.setCtrlReqState(e).then((function(){return t({errCode:0})})).catch((function(e){return n({errCode:1,errDesc:e.toString()})}))}))},x.Z.setEnableOtherMarked=function(e){return console.crlog("[Screen] MeetSDK.setEnableOtherMarked(".concat(e,")")),new Promise((function(t,n){__Rtc.CRICEAPI.enableOtherMarked(e).then((function(){return t({errCode:0})})).catch((function(e){return n({errCode:1,errDesc:e.toString()})}))}))}}},{key:"videoAllocRawExt2",value:function(e,t,n,r){console.crlog("[Screen] VideoAllocRawExt2... cameraID:".concat(t.cameraID,", srcSelf:").concat(n,", liteice:").concat(r.get("liteice")||"0",", rtc_streamid:").concat(r.get("rtc_streamid")||null)),setTimeout((function(){e.isResponsed||(console.crlog("[Screen] Screen share connection gather candidates, waited more than 10s, do cb.ice_response()"),e.ice_response(),e.isResponsed=!0)}),1e4),n?this.setLocalScreenConnection(e,t,r):this.setRemoteScreenConnection(e,t,r)}},{key:"modifyPeerAddrExt",value:function(e,t,n,r){var i={type:"answer",sdp:r.get("sdp")};"localScreen"==e&&this.localScreenModifyPeerAddrExt(t,n,i),"remoteScreen"==e&&this.remoteScreenModifyPeerAddrExt(t,n,i)}},{key:"modifyOfferSDP",value:function(e,t){var n=t.type,r=t.isVp8?"VP8":"H264",i=[],o=e.split("\r\n");e.match(new RegExp("(\\d+)(?=\\s+".concat(r,")"),"g")).forEach((function(e){return i.push(e.replace(" ".concat(r),""))})),o=o.filter((function(e){return!((e.includes("a=rtcp-fb")||e.includes("a=rtpmap")||e.includes("a=fmtp"))&&!i.includes(e.split(" ")[0].split(":")[1]))}));var a=o.findIndex((function(e){return e.includes("m=video")})),c=[];o[a].split(" ").forEach((function(e,t){t<3&&c.push(e),t>=3&&!isNaN(e)&&i.includes(e)&&c.push(e)})),o[a]=c.join(" ");for(var s=0;s<o.length;s++){o[s].includes("http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01")&&delete o[s]}var l=o.join("\r\n");for(n&&(l=l.replace("a=sendrecv","a=".concat(n))),"sendonly"==n&&(console.crlog("".concat(t.logStr," b=AS:").concat(this.screenShareCfg.maxKbps)),l=l.replace("c=IN IP4 0.0.0.0","c=IN IP4 0.0.0.0\r\nb=AS:".concat(this.screenShareCfg.maxKbps)));l.includes("\r\n\r\n");)l=l.replace("\r\n\r\n","\r\n");return l}},{key:"modifyAnswerSDP",value:function(e,t){for(var n=e.split("\r\n"),r=0;r<n.length;r++){n[r].includes("http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01")&&delete n[r]}for(e=n.join("\r\n");e.includes("\r\n\r\n");)e=e.replace("\r\n\r\n","\r\n");var i=e.match(/c=IN IP4(.*?)\r\n/)?e.match(/c=IN IP4(.*?)\r\n/)[0]:"",o=e.match(/b=AS:(.*?)\r\n/)?e.match(/b=AS:(.*?)\r\n/)[0]:"";return i&&e.split(i).length>2&&(e=e.replace("".concat(i).concat(o),"")),e=e.replace("a=rtcp-fb:102 nack\r\n",""),e="sendonly"==t?e.replace("profile-level-id=42001f","x-google-min-bitrate=".concat(this.screenShareCfg.maxKbps/4,";x-google-start-bitrate=").concat(this.screenShareCfg.maxKbps/2,";x-google-max-bitrate=").concat(this.screenShareCfg.maxKbps,";")):e.replace("a=sendrecv","a=sendonly")}},{key:"startScreenShare",value:function(e){var t=this;if(e&&e.maxFPS&&(this.screenCfg.video.frameRate.ideal=e.maxFPS),e&&e.height&&(this.screenHeight=e.height,this.screenCfg.video.height.ideal=e.height),this.getDisplayMediaAPI){try{console.crlog("[Screen] navigator.mediaDevices.getDisplayMedia(".concat(JSON.stringify(this.screenCfg),")"))}catch(e){console.error(e)}navigator.mediaDevices.getDisplayMedia(this.screenCfg).then((function(e){t.localScreenBaseStream=e,t.gotLocalScreenStream(e)})).catch((function(e){console.crlog("[Screen] getDisplayMedia fail: ".concat(e)),CRVideo_StartScreenShareRslt.target(8002),console.error(e)}))}else console.crlog("[Screen] CRVideo_StartScreenShareRslt.target(8004)"),CRVideo_StartScreenShareRslt.target(8004)}},{key:"electronStartScreenShare",value:function(e){var t=this;navigator.mediaDevices.getUserMedia(e).then((function(e){t.localScreenBaseStream=e,t.gotLocalScreenStream(e)})).catch((function(e){console.crlog("[Screen] getUserMedia fail: ".concat(e)),CRVideo_StartScreenShareRslt.target(8002),console.error(e)}))}},{key:"stopScreenShareHandle",value:function(e){(this.localScreenBaseStream||this.localScreenStream)&&(console.crlog("[Screen] Stop local screen stream track"),this.localScreenBaseStream&&this.localScreenBaseStream.getTracks().forEach((function(e){e.stop()})),this.localScreenStream&&this.localScreenStream.getTracks().forEach((function(e){e.stop()})),this.pauseCanvasRender("stop")),this.isMarking&&(__Rtc.CRICEAPI.StopMarked(),__Rtc.CRICEAPI.ClearAllMarksV4()),!e&&window.__Rtc.CRICEAPI.StopScreenShare(),this.isSharing=!1,this.isMySharing=!1,this.baseVideoEle&&(this.baseVideoEle.onplay=null,this.baseVideoEle.onplaying=null,this.baseVideoEle.srcObject=null,this.baseVideoEle.remove(),this.baseVideoEle=null),this.localScreenBaseStream=null,this.localScreenStream=null,this.streamCanvas=null,this.ctx=null,this.startCanvasRender=null,this.pauseCanvasRender=null,this.handleScMakeIFrame=null;var t={};for(var n in this.screenShareCfg)t[n]=this.screenShareCfg[n];this.initData(),this.screenShareCfg=t}},{key:"gotLocalScreenStream",value:function(e){var t=this;console.crlog("[Screen] GetDisplayMedia success! stream: ".concat(e.id)),this.localScreenStream=this.getCanvasStream(e),this.userInterfaceStop=!1,e.getTracks()[0].onended=function(e){t.userInterfaceStop?console.crlog("[Screen] Screen share stoped by interface."):(console.crlog("[Screen] Screen share stoped by plug-in button."),t.userInterfaceStop=!1,t.stopScreenShareHandle())},window.__Rtc.CRICEAPI.StartScreenShare()}},{key:"getCanvasStream",value:function(e){var t=this;console.crlog("[Screen] Start to get canvas stream...");var n=this;this.baseVideoEle=document.createElement("video"),this.streamCanvas=document.createElement("canvas"),this.baseVideoEle.autoplay=!0,this.baseVideoEle.playsinline=!0,this.baseVideoEle.click(),this.baseVideoEle.srcObject=e,setTimeout((function(){t.baseVideoEle.isplay||"Mac"!=__Rtc.CRBrowser.curBrowserCfg.platform||"Safari"!=__Rtc.CRBrowser.curBrowserCfg.name||(t.baseVideoEle.click(),t.baseVideoEle.play())}),1e3),this.baseVideoEle.onplay=function(){n.baseVideoEle.isplay=!0,console.crlog("[Screen] Get canvas stream:baseVideoEle on play..."),n.streamCanvas.width=n.baseVideoEle.videoWidth,n.streamCanvas.height=n.baseVideoEle.videoHeight,n.startCanvasRender()},this.baseVideoEle.onplaying=function(){console.crlog("[Screen] Get canvas stream:baseVideoEle on playing...")},this.ctx=this.streamCanvas.getContext("2d");var r=URL.createObjectURL(new Blob([(console.crlog("[Screen] Get canvas stream:new Worker..."),"("+function(){var e;self.onmessage=function(t){var r=t.data,i=r.cmd,o=r.data;"start"===i?(clearTimeout(e),function t(){self.postMessage("draw"),e=setTimeout(t,o&&o.rote||1e3/n.screenShareCfg.maxFPS)}()):"stop"===i&&(clearTimeout(e),e=null)}}.toString()+"());")],{type:"text/javascript"}));n.worker&&n.worker.terminate&&n.worker.terminate();var i=new Worker(r);n.worker=i,i.onmessage=function(e){if("draw"===e.data){if(!n.baseVideoEle||!n.streamCanvas)return;if(n.screenShareCfg&&n.screenShareCfg.catchRect){var t=n.screenShareCfg.catchRect,r=t.left,i=t.top,o=t.width,a=t.height;n.streamCanvas.width=o,n.streamCanvas.height=a,n.ctx.drawImage(n.baseVideoEle,r,i,n.streamCanvas.width,n.streamCanvas.height,0,0,n.streamCanvas.width,n.streamCanvas.height)}else n.streamCanvas.width=n.baseVideoEle.videoWidth,n.streamCanvas.height=n.baseVideoEle.videoHeight,n.ctx.drawImage(n.baseVideoEle,0,0,n.streamCanvas.width,n.streamCanvas.height)}};var o;this.startCanvasRender=function(){console.crlog("[Screen] Get canvas stream:startCanvasRender..."),n.baseVideoEle.click(),n.baseVideoEle.play();var e=1e3/n.screenShareCfg.maxFPS;i.postMessage({cmd:"start",data:{rote:e}})},this.pauseCanvasRender=function(e){console.crlog("[Screen] Get canvas stream:pauseCanvasRender..."),n.baseVideoEle.pause(),i.postMessage({cmd:"stop",data:{isStop:e}})},this.handleScMakeIFrame=(console.crlog("[Screen] Get canvas stream:handleScMakeIFrame..."),function(){if(n.baseVideoEle.paused){clearTimeout(o);var e=0;!function t(){if(!(e++>=10)){if(n.screenShareCfg&&n.screenShareCfg.catchRect){var r=n.screenShareCfg.catchRect,i=r.left,a=r.top,c=r.width,s=r.height;n.streamCanvas.width=c,n.streamCanvas.height=s,n.ctx.drawImage(n.baseVideoEle,i,a,n.streamCanvas.width,n.streamCanvas.height,0,0,n.streamCanvas.width,n.streamCanvas.height)}else n.streamCanvas.width=n.baseVideoEle.videoWidth,n.streamCanvas.height=n.baseVideoEle.videoHeight,n.ctx.drawImage(n.baseVideoEle,0,0,n.streamCanvas.width,n.streamCanvas.height);o=setTimeout(t,300)}}()}});var a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;return console.crlog("[Screen] Get canvas stream:this.streamCanvas.captureStream(".concat(e,")...")),n.streamCanvas.captureStream(e)}(n.screenShareCfg.maxFPS);return console.crlog("[Screen] Get canvas stream success! ".concat(a.id)),a}},{key:"setLocalScreenConnection",value:function(e,t,n){var r,i,o=this;1e4==t.cameraID?(r=this.localConnectionVP8,i="[Screen] Local ScreenShare RTCPeerConnection(vp8), msid:".concat(r.msid," ")):(r=this.localConnectionH264,i="[Screen] Local ScreenShare RTCPeerConnection(h264), msid:".concat(r.msid," ")),r.type="sendonly",r.logStr=i,r.offer_cb=e,r.offer_cb.isResponsed=!1,r.isVp8=1e4==t.cameraID,r.liteice=n.get("liteice")||"0",r.vsParam=t,r.rtc_streamid=n.get("rtc_streamid")||null,r.rtc_eid=n.get("rtc_eid")||null,r.rtc_mode="push",r.HashMap=new Be.HashMap,r.caComplete=!1,console.crlog("".concat(i," new RTCPeerConnection..."));var a="1"===r.liteice?new RTCPeerConnection:new RTCPeerConnection(je.rtcCfg);r.connection=a,r.stream=this.localScreenStream,console.crlog("".concat(i," addTrack(localScreenTrack, localScreenStream)")),a.addTrack(r.stream.getTracks()[0],r.stream),console.crlog("".concat(i," createOffer()")),a.createOffer().then((function(e){console.crlog("".concat(i," createOffer success!")),e.sdp=o.modifyOfferSDP(e.sdp,r);var t=" ";e.sdp.includes("VP8")&&(t+="VP8"),e.sdp.includes("H264")&&(t+=" H264"),console.crlog("".concat(i," offer.sdp - ").concat(t,"\r\n").concat(e.sdp)),r.offer=e,console.crlog("".concat(i," offer setLocalDescription(offer)")),a.setLocalDescription(e).then((function(e){console.crlog("".concat(i," offer setLocalDescription success!")),r.rtc_streamid&&(!r.offer_cb.isResponsed&&console.crlog("".concat(i," ice_response(").concat(r.msid,", new Ice.HashMap())")),!r.offer_cb.isResponsed&&r.offer_cb.ice_response(r.msid,new Be.HashMap),!r.offer_cb.isResponsed&&(r.offer_cb.isResponsed=!0),r.HashMap.set("sdp",r.offer.sdp),r.HashMap.set("rtc_streamid",r.rtc_streamid),r.HashMap.set("rtc_mode","push"),r.HashMap.set("rtc_eid",r.rtc_eid)),"1"===r.liteice&&o.RtcGwVideoAlloc2(r)})).catch((function(e){console.crlog("".concat(i," offer setLocalDescription fail! ").concat(e)),console.error(e)}))})).catch((function(e){console.crlog("".concat(i," createOffer fail! ").concat(e)),console.error(e)})),a.onicecandidate=function(e){"1"===r.liteice||r.caComplete||(console.crlog("".concat(i," onicecandidate: ").concat(JSON.stringify(e.candidate))),e.candidate?r.candidates.push(e.candidate):r.caComplete=!0,r.caComplete&&o.iceResponse(r),setTimeout((function(){r.caComplete||(r.caComplete=!0,o.iceResponse(r))}),300))},a.oniceconnectionstatechange=function(e){console.crlog("".concat(i," oniceconnectionstatechange, iceConnectionState: ").concat(e.currentTarget.iceConnectionState)),r&&r.iceConnectionState&&"completed"==r.iceConnectionState&&setTimeout((function(){r.answer_cb&&!r.answer_cb.isResponsed&&(console.crlog("".concat(i," answer_cb ice_response()...")),r.answer_cb.ice_response(),r.answer_cb.isResponsed=!0)}),500)},a.onconnectionstatechange=function(e){var t=e.currentTarget.connectionState;if(console.crlog("".concat(i," onconnectionstatechange, connectionState: ").concat(t)),"connected"==t){r.lastBytesSent=0,clearInterval(r.rtpLogTimer);var n=function(){a.getStats().then((function(e){e.forEach((function(e){"outbound-rtp"==e.type&&(r.width=e.frameWidth,r.height=e.frameHeight,r.frameRate=e.framesPerSecond,r.codeRate=(e.bytesSent-r.lastBytesSent)/2e3,r.lastBytesSent=e.bytesSent)}))}))};n(),r.rtpLogTimer=setInterval(n,2e3)}else"disconnected"==t?clearInterval(r.rtpLogTimer):"failed"==t&&__Rtc.CRICEAPI.MediaConnectionBreakReport(r.msid)},a.onsignalingstatechange=function(e){console.crlog("".concat(i," onsignalingstatechange, signalingState: ").concat(e.currentTarget.signalingState))}}},{key:"localScreenModifyPeerAddrExt",value:function(e,t,n){var r,i=this;t==this.localConnectionH264.msid&&(r=this.localConnectionH264),t==this.localConnectionVP8.msid&&(r=this.localConnectionVP8),r.answer_cb=e;var o=r.logStr,a=r.connection;n.sdp=this.modifyAnswerSDP(n.sdp,"sendonly");var c=" ";n.sdp.includes("VP8")&&(c+="VP8"),n.sdp.includes("H264")&&(c+=" H264"),console.crlog("".concat(o," ModifyPeerAddrExt, answerSDP - ").concat(c,"\r\n").concat(n.sdp)),r.answer=n,console.crlog("".concat(o," answer setRemoteDescription(answer)")),a.setRemoteDescription(new RTCSessionDescription(n)).then((function(e){console.crlog("".concat(o," answer setRemoteDescription success!")),videoResolutionReport(r.msid,"screen"),i.refreshContainerSrc()})).catch((function(e){console.crlog("".concat(o," answer setRemoteDescription fail! ").concat(e)),console.error(e)})),setTimeout((function(){r.answer_cb.isResponsed||(console.crlog("".concat(o," answer_cb ice_response()...")),r.answer_cb.ice_response(),r.answer_cb.isResponsed=!0)}),500)}},{key:"setRemoteScreenConnection",value:function(e,t,n){var r=this,i=this.remoteConnection,o="[Screen] Remote ScreenShare RTCPeerConnection, msid:".concat(this.remoteConnection.msid," ");i.type="recvonly",i.logStr=o,i.offer_cb=e,i.offer_cb.isResponsed=!1,i.isVp8=1e4==t.cameraID,i.liteice=n.get("liteice")||"0",i.vsParam=t,i.rtc_streamid=n.get("rtc_streamid")||null,i.rtc_mode="play",i.rtc_eid=n.get("rtc_eid")||null,i.HashMap=new Be.HashMap,i.caComplete=!1,console.crlog("".concat(o," new RTCPeerConnection...)"));var a="1"===i.liteice?new RTCPeerConnection:new RTCPeerConnection(je.rtcCfg);i.connection=a;var c={offerToReceiveAudio:!1,offerToReceiveVideo:!0,voiceActivityDetection:!1};console.crlog("".concat(o," createOffer(").concat(JSON.stringify(c),")")),a.createOffer(c).then((function(e){console.crlog("".concat(o," createOffer success!")),e.sdp=r.modifyOfferSDP(e.sdp,i);var t=" ";e.sdp.includes("VP8")&&(t+="VP8"),e.sdp.includes("H264")&&(t+=" H264"),console.crlog("".concat(o," offer.sdp - ").concat(t,"\r\n").concat(e.sdp)),i.offer=e,console.crlog("".concat(o," offer setLocalDescription(offer)")),a.setLocalDescription(e).then((function(e){console.crlog("".concat(o," offer setLocalDescription success!")),i.rtc_streamid&&(!i.offer_cb.isResponsed&&console.crlog("".concat(o," ice_response(").concat(i.msid,", new Ice.HashMap())")),!i.offer_cb.isResponsed&&i.offer_cb.ice_response(i.msid,new Be.HashMap),!i.offer_cb.isResponsed&&(i.offer_cb.isResponsed=!0),i.HashMap.set("sdp",i.offer.sdp),i.HashMap.set("rtc_streamid",i.rtc_streamid),i.HashMap.set("rtc_mode","play"),i.HashMap.set("rtc_eid",i.rtc_eid),"1"===i.liteice&&r.RtcGwVideoAlloc2(i))})).catch((function(e){console.crlog("".concat(o," offer setLocalDescription fail! ").concat(e)),console.error(e)}))})).catch((function(e){console.crlog("".concat(o," createOffer fail! ").concat(e)),console.error(e)})),a.onicecandidate=function(e){"1"===i.liteice||i.caComplete||(console.crlog("".concat(o," onicecandidate: ").concat(JSON.stringify(e.candidate))),e.candidate?i.candidates.push(e.candidate):i.caComplete=!0,i.caComplete&&r.iceResponse(i),setTimeout((function(){i.caComplete||(i.caComplete=!0,r.iceResponse(i))}),300))},a.oniceconnectionstatechange=function(e){console.crlog("".concat(o," oniceconnectionstatechange, iceConnectionState: ").concat(e.currentTarget.iceConnectionState)),i&&i.iceConnectionState&&"completed"==i.iceConnectionState&&setTimeout((function(){i.answer_cb&&!i.answer_cb.isResponsed&&(console.crlog("".concat(o," answer_cb ice_response()...")),i.answer_cb.ice_response(),i.answer_cb.isResponsed=!0)}),500)},a.onconnectionstatechange=function(e){var t=e.currentTarget.connectionState;if(console.crlog("".concat(o," onconnectionstatechange, connectionState: ").concat(t)),"connected"==t){i.lastBytesReceived=0,i.codeRate=0,i.width=0,i.height=0,i.frameRate=0,i.lastPacketsLost=0,i.lastPacketsReceived=0,i.packetsLostRate=0;var n=0;clearInterval(i.rtpLogTimer);var r=function(){a.getStats().then((function(e){e.forEach((function(e){if("inbound-rtp"==e.type){i.codeRate=(e.bytesReceived-i.lastBytesReceived)/2e3,i.lastBytesReceived=e.bytesReceived,i.width=e.frameWidth,i.height=e.frameHeight,i.frameRate=e.framesPerSecond;var t=e.packetsLost-i.lastPacketsLost,r=e.packetsReceived-i.lastPacketsReceived;i.packetsLostRate=t<0?0:parseInt(t/(r+t)*1e4)/1e4,i.lastPacketsLost=e.packetsLost,i.lastPacketsReceived=e.packetsReceived;var a={jitter:e.jitter,packetsLost:e.packetsLost,packetsReceived:e.packetsReceived,dbPacketsLostRate:2*i.packetsLostRate,bytesReceived:e.bytesReceived,headerBytesReceived:e.headerBytesReceived,jitterBufferDelay:e.jitterBufferDelay,jitterBufferEmittedCount:e.jitterBufferEmittedCount,framesReceived:e.framesReceived,frameWidth:e.frameWidth,frameHeight:e.frameHeight,framesPerSecond:e.framesPerSecond,framesDecoded:e.framesDecoded,keyFramesDecoded:e.keyFramesDecoded,framesDropped:e.framesDropped,totalDecodeTime:e.totalDecodeTime,totalInterFrameDelay:parseInt(1e4*e.totalInterFrameDelay)/1e4,totalSquaredInterFrameDelay:parseInt(1e4*e.totalSquaredInterFrameDelay)/1e4,firCount:e.firCount,pliCount:e.pliCount,nackCount:e.nackCount};++n>=5&&(n=0,je.isRtcLog&&console.crlog("".concat(o," inbound-rtp: ").concat(JSON.stringify(a)))),"ssrc"==e.type&&je.isRtcLog&&console.crlog("".concat(o," ssrc: ").concat(JSON.stringify(e)))}}))}))};r(),i.rtpLogTimer=setInterval(r,2e3)}else"disconnected"==t?clearInterval(i.rtpLogTimer):"failed"==t&&__Rtc.CRICEAPI.MediaConnectionBreakReport(i.msid)},a.onsignalingstatechange=function(e){console.crlog("".concat(o," onsignalingstatechange, signalingState: ").concat(e.currentTarget.signalingState))},a.ontrack=function(e){console.crlog("".concat(o," ontrack, get stream now...")),i.stream=e.streams[0],r.refreshContainerSrc()}}},{key:"iceResponse",value:function(e){var t=e.logStr;"1"===e.liteice?(console.crlog("".concat(t," response without candidates when liteice === '1'")),e.rtc_streamid?this.RtcGwVideoAlloc2(e):(e.HashMap.set("sdp",e.offer.sdp),!e.offer_cb.isResponsed&&console.crlog("".concat(t," offer_cb ice_response(").concat(e.msid,", HashMap)")),!e.offer_cb.isResponsed&&e.offer_cb.ice_response(e.msid,e.HashMap),!e.offer_cb.isResponsed&&(e.offer_cb.isResponsed=!0))):(e.HashMap.set("icecandidate",JSON.stringify(e.candidates)),console.crlog("".concat(t," response candidates(").concat(e.candidates.length,"): ").concat(JSON.stringify(e.candidates))),e.rtc_streamid?this.RtcGwVideoAlloc2(e):(e.HashMap.set("sdp",e.offer.sdp),!e.offer_cb.isResponsed&&console.crlog("".concat(t," offer_cb ice_response(").concat(e.msid,", HashMap)")),!e.offer_cb.isResponsed&&e.offer_cb.ice_response(e.msid,e.HashMap),!e.offer_cb.isResponsed&&(e.offer_cb.isResponsed=!0)))}},{key:"RtcGwVideoAlloc2",value:function(e){var t=this,n=e.logStr;console.crlog("".concat(n," request GwVideoAlloc2(vsParam, HashMap)")),oe.Z.GwVideoAlloc2(e.vsParam,e.HashMap).then((function(r){if(r.answerSdp){console.crlog("".concat(n," request GwVideoAlloc2 success..."));var i={type:"answer",sdp:r.answerSdp};i.sdp=t.modifyAnswerSDP(i.sdp,e.type),e.answer=i;var o=" ";i.sdp.includes("VP8")&&(o+="VP8"),i.sdp.includes("H264")&&(o+=" H264"),console.crlog("".concat(n," received answer sdp:").concat(i.sdp.length," ").concat(o)),console.crlog("".concat(i.sdp)),console.crlog("".concat(n," setRemoteDescription(answer)")),e.connection.setRemoteDescription(new RTCSessionDescription(i)).then((function(){console.crlog("".concat(n," setRemoteDescription success!"))})).catch((function(e){console.crlog("".concat(n," setRemoteDescription fail! ").concat(e)),console.error(e)}))}})).catch((function(e){console.error(e)}))}},{key:"remoteScreenModifyPeerAddrExt",value:function(e,t,n){var r=this;this.remoteConnection.answer_cb=e;var i=this.remoteConnection.logStr,o=this.remoteConnection.connection;n.sdp=this.modifyAnswerSDP(n.sdp,"recvonly");var a=" ";n.sdp.includes("VP8")&&(a+="VP8"),n.sdp.includes("H264")&&(a+=" H264"),console.crlog("".concat(i," ModifyPeerAddrExt, answerSDP - ").concat(a,"\r\n").concat(n.sdp)),this.remoteConnection.answer=n,console.crlog("".concat(i," answer setRemoteDescription(answer)")),o.setRemoteDescription(new RTCSessionDescription(n)).then((function(e){console.crlog("".concat(i," answer setRemoteDescription success!"))})).catch((function(e){console.crlog("".concat(i," answer setRemoteDescription fail! ").concat(e)),console.error(e)})),setTimeout((function(){r.remoteConnection.answer_cb.isResponsed||(console.crlog("".concat(i," answer_cb ice_response()...")),r.remoteConnection.answer_cb.ice_response(),r.remoteConnection.answer_cb.isResponsed=!0)}),500)}},{key:"refreshContainerSrc",value:function(){var e=this;console.crlog("[Screen] Refresh all screen container src..."),__Rtc.CRRTCUI.screenContainerList.forEach((function(t){if(t._userID==je.userInfo.userId){if(!e.localScreenStream)return;console.crlog("[Screen] Local screenShare, containerID:".concat(t._id," set srcObject, stream:").concat(e.localScreenStream.id,", active:").concat(e.localScreenStream.active)),t._videoEle.srcObject=e.localScreenStream,setTimeout((function(){"Chrome"!==__Rtc.CRBrowser.curBrowserCfg.name&&t&&t._videoEle&&t._videoEle.srcObject&&(t._videoEle.click(),t._videoEle.play())}),2e3)}else{if(!e.remoteConnection.stream)return;console.crlog("[Screen] Remote ScreenShare, userID:".concat(t._userID,", containerID:").concat(t._id," set srcObject, stream:").concat(e.remoteConnection.stream.id,", active:").concat(e.remoteConnection.stream.active)),t._videoEle.srcObject=e.remoteConnection.stream,t&&t._videoEle&&t._videoEle.srcObject&&(t._videoEle.click(),t._videoEle.play().then().catch((function(e){t._videoEle.click(),t._videoEle.play()})))}}))}},{key:"parseMarkData",value:function(e){var t={};t.type=e.type,t.markId=e.markid;var n=e.mousePosSeq,r=n[3].toString(16),i=n[2].toString(16),o=n[1].toString(16);t.color="#"+(Array(2).join(0)+r).slice(-2)+(Array(2).join(0)+i).slice(-2)+(Array(2).join(0)+o).slice(-2);var a=4;t.width=n[a++]<<8|n[a++],t.size=n[a++]<<8|n[a++];for(var c=[],s=new DataView(n.buffer);a<n.length;){var l={};l.x=s.getInt16(a),a+=2,l.y=s.getInt16(a),a+=2,c.push(l)}return t.data=c,t}}])}();window.__crScreenClass=He,window.__Rtc.CRRTCScreen=new window.__crScreenClass,window.CRVideo_StartScreenShareRslt=new je.CbProxy("CRVideo_StartScreenShareRslt"),window.CRVideo_StopScreenShareRslt=new je.CbProxy("CRVideo_StopScreenShareRslt"),window.CRVideo_StartScreenMarkRslt=new je.CbProxy("CRVideo_StartScreenMarkRslt"),window.CRVideo_StopScreenMarkRslt=new je.CbProxy("CRVideo_StopScreenMarkRslt"),window.CRVideo_NotifyScreenShareStarted=new je.CbProxy("CRVideo_NotifyScreenShareStarted"),window.CRVideo_NotifyScreenShareStopped=new je.CbProxy("CRVideo_NotifyScreenShareStopped"),window.CRVideo_NotifyScreenShareData=new je.CbProxy("CRVideo_NotifyScreenShareData"),window.CRVideo_NotifyCatchScreen=new je.CbProxy("CRVideo_NotifyCatchScreen"),window.CRVideo_NotifyGiveCtrlRight=new je.CbProxy("CRVideo_NotifyGiveCtrlRight"),window.CRVideo_NotifyReleaseCtrlRight=new je.CbProxy("CRVideo_NotifyReleaseCtrlRight"),window.CRVideo_NotifyShareRectChanged=new je.CbProxy("CRVideo_NotifyShareRectChanged"),window.CRVideo_NotifyScreenMarkStarted=new je.CbProxy("CRVideo_NotifyScreenMarkStarted"),window.CRVideo_NotifyScreenMarkStopped=new je.CbProxy("CRVideo_NotifyScreenMarkStopped"),x.Z.notifyCtrlReqState=new J.Z("notifyCtrlReqState"),x.Z.notifyEnableOtherMarked=new J.Z("notifyEnableOtherMarked");var qe=[{size:3840,defaultKbps:48,maxKbps:96},{size:7168,defaultKbps:53,maxKbps:106},{size:15360,defaultKbps:75,maxKbps:150},{size:28672,defaultKbps:100,maxKbps:200},{size:46080,defaultKbps:123,maxKbps:246},{size:67584,defaultKbps:160,maxKbps:320},{size:114688,defaultKbps:230,maxKbps:440},{size:147456,defaultKbps:260,maxKbps:520},{size:184320,defaultKbps:300,maxKbps:600},{size:230400,defaultKbps:350,maxKbps:700},{size:281600,defaultKbps:420,maxKbps:840},{size:407040,defaultKbps:500,maxKbps:1e3},{size:589824,defaultKbps:650,maxKbps:1300},{size:921600,defaultKbps:1e3,maxKbps:2e3},{size:2073600,defaultKbps:2e3,maxKbps:4e3},{size:3686400,defaultKbps:3e3,maxKbps:6e3},{size:8294400,defaultKbps:5e3,maxKbps:8e3}];function Ke(e){return Ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ke(e)}function We(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ze(r.key),r)}}function Ge(e,t,n){return t&&We(e.prototype,t),n&&We(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ze(e){var t=function(e,t){if("object"!=Ke(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ke(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ke(t)?t:t+""}function Je(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Ze=window.CRVideo,Qe=window.Ice,Ye=Ge((function e(t){Je(this,e),this.msid=t,this.offer=null,this.answer=null,this.offer_cb=null,this.answer_cb=null,this.connection=null,this.candidates=[],this.stream=null,this.logStr=null,this.isResponsedCandidate=!1})),Xe=function(){return Ge((function e(){Je(this,e),this.initData(),this.initIceCallback(),this.initSDKInterface()}),[{key:"initData",value:function(){console.crlog("[Media] MediaShareModule initData..."),this.mediaFileInfo={isAudioFile:!1,name:null,url:null,FileObj:null},this.mediaShareInfo={userID:null,mediaName:null,state:null},this.mediaCfg={size:null,fps:null,userSetMaxKbps:null,defMaxKbps:null},this.container=null,this.bPauseWhenFinished=!1,this.isLocalPlay=!1,this.localMediaAudioConnection=new Ye(this.mediaAudioMSID++),this.localMediaVideoConnection_H264=new Ye(this.localMediaMSID++),this.localMediaVideoConnection_VP8=new Ye(this.localMediaMSID++),this.remoteMediaConnection=new Ye(this.remoteMediaMSID++),this.localMediaMSID=14e4,this.mediaAudioMSID=15e4,this.remoteMediaMSID=24e4,clearInterval(this.canvasDrawTimer),this.canvasDrawTimer=-1}},{key:"initIceCallback",value:function(){var e=this;this.ICECallback={notifyStartPlayMedia:function(t){console.crlog("[Media] ICE Notify --\x3e notifyStartPlayMedia, params:".concat(JSON.stringify({mediaShareInfo:t}))),t.state=t.state.value;var n=Ze.allMemberInfo.find((function(e){return e.termId==t.termid})),r=n?n.userId:"";t.termid!==Ze.userInfo.termId&&__Rtc.CRICEAPI.SubscribeMedia(!0),e.mediaShareInfo.userID=r,e.mediaShareInfo.mediaName=t.mediaName,e.mediaShareInfo.state=t.state,console.crlog("[Media] CRVideo_NotifyMediaStart.target(".concat(r,")")),CRVideo_NotifyMediaStart.target(r)},notifyStopPlayMedia:function(t){console.crlog("[Media] ICE Notify --\x3e notifyStopPlayMedia, params:".concat(JSON.stringify({operator:t}))),Ze.isMeeting&&t!==Ze.userInfo.termId&&e.mediaShareInfo.userID!=Ze.userInfo.userId&&__Rtc.CRICEAPI.SubscribeMedia(!1),e.endMediaPlay(t);var n=Ze.allMemberInfo.find((function(e){return e.termId==t})),r=n?n.userId:"";e.mediaShareInfo.userID=null,e.mediaShareInfo.mediaName=null,e.mediaShareInfo.state=2,Ze.isMeeting&&console.crlog("[Media] CRVideo_NotifyMediaStop.target(".concat(r,")")),Ze.isMeeting&&CRVideo_NotifyMediaStop.target(r)},notifyPausePlayMedia:function(t,n){console.crlog("[Media] ICE Notify --\x3e notifyPausePlayMedia, params:".concat(JSON.stringify({operator:t,bPause:n})));var r=Ze.allMemberInfo.find((function(e){return e.termId==t})),i=r?r.userId:"",o=n?1:0;e.mediaShareInfo.state=o,console.crlog("[Media] CRVideo_NotifyMediaPause.target(".concat(i,",").concat(o,")")),CRVideo_NotifyMediaPause.target(i,o)},notifyMakeIFrame:function(e){console.crlog("[Media] ICE Notify --\x3e notifyMakeIFrame")},notifySubscribeMedia:function(e){console.crlog("[Media] ICE Notify --\x3e notifySubscribeMedia, params:".concat(JSON.stringify({bSub:e})))},startPlayMediaRslt:function(t){console.crlog("[Media] ICE Callback --\x3e startPlayMediaRslt, params:".concat(JSON.stringify({errCode:t}))),e.container&&(e.container._videoEle.onplaying=null)},stopPlayMediaRslt:function(e){console.crlog("[Media] ICE Callback --\x3e stopPlayMediaRslt, params:".concat(JSON.stringify({errCode:e})))},getMediaInfoRslt:function(t,n){if(console.crlog("[Media] ICE Callback --\x3e getMediaInfoRslt, params:".concat(JSON.stringify({errCode:t,data:n}))),0==t){if(2!==n.state.value)return void __Rtc.CRRTCMedia.ICECallback.notifyStartPlayMedia(n);n.state=n.state.value;var r=Ze.allMemberInfo.find((function(e){return e.termId==n.termid}));e.mediaShareInfo.userID=r?r.userId:"",e.mediaShareInfo.state=n.state,e.mediaShareInfo.mediaName=n.mediaName}},pausePlayMediaRslt:function(e){console.crlog("[Media] ICE Callback --\x3e pausePlayMediaRslt, params:".concat(JSON.stringify({errCode:e})))},subscribeMediaRslt:function(e){console.crlog("[Media] ICE Callback --\x3e subscribeMediaRslt, params:".concat(JSON.stringify({errCode:e})))}}}},{key:"initSDKInterface",value:function(){var e=this;window.CRVideo_StartPlayMedia=function(t,n,r,i){if(console.crlog("[Media] CRVideo_StartPlayMedia(".concat(t,",").concat(n,",").concat(r,",").concat(i,")")),!t||!t._id)return console.crlog("[Media] Start play media fail, did not create mediaObj"),0;if(e.container=t,e.container._userID=Ze.userInfo.userId,e.isLocalPlay=void 0!==r&&!!r,e.bPauseWhenFinished=void 0===i?0:i,!MediaSource&&!n)return console.crlog("[Media] Start play media fail, the File object is not audio or video"),console.crlog("[Media] CRVideo_StartPlayMedia, return: 0"),0;try{if(n instanceof File){if("Chrome"==__Rtc.CRBrowser.curBrowserCfg.name||"Edg"==__Rtc.CRBrowser.curBrowserCfg.name){if(!/(.mp3|.mkv|.mp4|.webm)$/.test(n.name))return console.crlog("[Media] Start play media fail, Chrome does not support this file type"),console.crlog("[Media] CRVideo_StartPlayMedia, return: 0"),0}else if("Firefox"==__Rtc.CRBrowser.curBrowserCfg.name){if(!/(.mp3|.mp4|.webm)$/.test(n.name))return console.crlog("[Media] Start play media fail, Firefox does not support this file type"),console.crlog("[Media] CRVideo_StartPlayMedia, return: 0"),0}else if("Safari"==__Rtc.CRBrowser.curBrowserCfg.name&&!/(.mp3|.mp4)$/.test(n.name))return console.crlog("[Media] Start play media fail, Safari does not support this file type"),console.crlog("[Media] CRVideo_StartPlayMedia, return: 0"),0;/(.mp3)$/.test(n.name)&&(e.mediaFileInfo.isAudioFile=!0),e.mediaFileInfo.FileObj=n,e.mediaFileInfo.name=n.name,e.mediaFileInfo.url=URL.createObjectURL(n)}else{if("string"!=typeof n)return console.crlog("[Media] CRVideo_StartPlayMedia, return: 0"),0;e.mediaFileInfo.name=n.match(/[^/]+(?!.*\/)/),e.mediaFileInfo.url=n}var o=e.container._videoEle;return o.loop=2==e.bPauseWhenFinished,o.srcObject=null,o.src=e.mediaFileInfo.url,setTimeout((function(){o.click(),o.play()}),100),o.onplaying=function(){console.crlog("[Media] Video event: onplaying"),Ze.isMeeting&&!e.isLocalPlay&&!e.ispaused&&__Rtc.CRICEAPI.StartPlayMedia(e.mediaFileInfo.name),e.ispaused=!1,e.pausePlayMedia(!1)},o.onpause=function(){console.crlog("[Media] Video event: onpause"),e.ispaused=!0,e.pausePlayMedia(!0)},o.onended=function(){console.crlog("[Media] Video event: onended"),e.ispaused=!1,0==e.bPauseWhenFinished&&e.endMediaPlay()},o.onerror=function(e){console.crlog("[Media] Video event: error, ".concat(e))},1}catch(e){return console.crlog("[Media] Start play media fail, err: ".concat(e)),console.crlog("[Media] CRVideo_StartPlayMedia, return: 0"),0}},window.CRVideo_PausePlayMedia=function(t){console.crlog("[Media] CRVideo_PausePlayMedia(".concat(t,")")),e.pausePlayMedia(t)},window.CRVideo_StopPlayMedia=function(){console.crlog("[Media] CRVideo_StopPlayMedia()"),e.endMediaPlay()},window.CRVideo_SetMediaplaypos=function(t){console.crlog("[Media] CRVideo_SetMediaplaypos(".concat(t)),e.container&&(e.container._videoEle.currentTime=t/1e3),console.crlog("[Media] CRVideo_NotifyPlayPosSetted.target(".concat(t,")")),CRVideo_NotifyPlayPosSetted.target(t)},window.CRVideo_SetMediaVolume=function(t){console.crlog("[Media] CRVideo_SetMediaVolume(".concat(t,")"));var n=e.container._videoEle;n&&(n.volume=t/100,n.muted=!1)},window.CRVideo_GetMediaInfo=function(){var t={};return t.userID=e.mediaShareInfo.userID,t.mediaName=e.mediaShareInfo.mediaName,t.state=e.mediaShareInfo.state,console.crlog("[Media] CRVideo_GetMediaInfo(), return: ".concat(JSON.stringify(t))),t},window.CRVideo_Getmediainfo=window.CRVideo_GetMediaInfo,window.CRVideo_GetMediaImg=function(t,n){console.crlog("[Media] CRVideo_GetMediaImg(".concat(t,",").concat(n,")"));var r=document.createElement("canvas"),i=e.container._videoEle;return i?(r.width=i.videoWidth,r.height=i.videoHeight,r.getContext("2d").drawImage(i,0,0,r.width,r.height),{dat:r.toDataURL("image/"+n||0),width:r.width,height:r.height}):{dat,width,height}},window.CRVideo_SetMediaCfg=function(t){try{console.crlog("[Media] CRVideo_SetMediaCfg(".concat(JSON.stringify(t),")"))}catch(e){console.error(e),console.crlog("[Media] ".concat(e.toString()))}void 0===t.size||null!==t.size&&!t.size.includes("*")||(e.mediaCfg.size=t.size),void 0!==t.maxKbps&&(e.mediaCfg.userSetMaxKbps=t.maxKbps),void 0!==t.fps&&(e.mediaCfg.fps=t.fps)},window.CRVideo_GetMediaCfg=function(){return{size:e.mediaCfg.size,fps:e.mediaCfg.fps,maxKbps:e.mediaCfg.userSetMaxKbps}}}},{key:"updateMediaShareInfo",value:function(){console.crlog("[Media] Update media share info"),__Rtc.CRICEAPI.GetMediaInfo()}},{key:"pausePlayMedia",value:function(e){this.container&&(e?(this.container._videoEle.click(),this.container._videoEle.pause(),this.isLocalPlay||__Rtc.CRICEAPI.PausePlayMedia(!0)):(this.container._videoEle.click(),this.container._videoEle.play(),this.isLocalPlay||__Rtc.CRICEAPI.PausePlayMedia(!1)))}},{key:"endMediaPlay",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ze.userInfo.termId;this.container&&this.container._videoEle&&(this.container._videoEle.pause(),this.container._videoEle.src=null,this.container._videoEle.srcObject=null,this.container._videoEle.onplay=null,this.container._videoEle.onplaying=null,this.container._videoEle.onpause=null,this.container._videoEle.onended=null,this.container._videoEle.onerror=null),this.mediaShareInfo.userID!=Ze.userInfo.userId||this.isLocalPlay||e!=Ze.userInfo.termId||__Rtc.CRICEAPI.StopPlayMedia(),this.ispaused=!1,clearInterval(this.canvasDrawTimer)}},{key:"getBaseStream",value:function(e){var t=null;if(this.container){var n=this.container._videoEle,r=__Rtc.CRBrowser.curBrowserCfg;if("audio"==e){console.crlog("[Media] Capture media audio stream from video element...");try{"captureStream"in n?t=n.captureStream():"mozCaptureStream"in n?t=n.mozCaptureStream():"webkitCaptureStream"in n&&(t=n.webkitCaptureStream())}catch(e){console.crlog("[Media][Error] Get media audio base stream fail: ".concat(e)),console.error(e)}}else if("Safari"!==r.name&&"Chrome"==r.name&&r.ver<88||"Edg"==r.name&&r.ver<88){console.crlog("[Media] Capture media video stream from video element...");try{"captureStream"in n?t=n.captureStream():"mozCaptureStream"in n?t=n.mozCaptureStream():"webkitCaptureStream"in n&&(t=n.webkitCaptureStream())}catch(e){console.crlog("[Media][Error] Get media video base stream fail: ".concat(e)),console.error(e)}}else{console.crlog("[Media] Capture media video base stream from canvas element...");try{var i=this.container._videoEle,o=document.createElement("canvas");if(o.style.height="1px",o.style.width="1px",this.container._handler.appendChild(o),o.width=i.videoWidth,o.height=i.videoHeight,null!=this.mediaCfg.size)try{var a=+this.mediaCfg.size.split("*")[0],c=+this.mediaCfg.size.split("*")[1];o.width=a,o.height=c}catch(e){console.error(e)}this.mediaCfg.defMaxKbps=function(e){try{for(var t=e.split("*")[0],n=e.split("*")[1],r=0;r<qe.length;r++)if(t*n<=qe[r].size)return qe[r];return{size:2073600,defaultKbps:2e3,maxKbps:4e3}}catch(e){return console.error(e),{size:2073600,defaultKbps:2e3,maxKbps:4e3}}}("".concat(o.width,"*").concat(o.height)).maxKbps;var s=null==this.mediaCfg.fps?25:this.mediaCfg.fps;console.crlog("[Media] width:".concat(o.width,", height:").concat(o.height,", fps:").concat(s,", defMaxKbps:").concat(this.mediaCfg.defMaxKbps,", userMaxKbps:").concat(this.mediaCfg.userSetMaxKbps)),this.canvasDrawTimer=setInterval((function(){o.getContext("2d").drawImage(i,0,0,o.width,o.height)}),1e3/s),t=o.captureStream(s)}catch(e){console.error(e)}}}return t||console.crlog("[Media][Error] Your browser does NOT supports pre-recorded media streaming!"),t}},{key:"audioAllocRawExt2",value:function(e,t,n,r){var i=this,o=t.codecType.name;console.crlog("[Media] Local media audio, audioAllocRawExt2... (codeType:".concat(o,", liteice:").concat(n.get("liteice")||"0",", rtc_streamid:").concat(n.get("rtc_streamid")||null,")"));var a=this.localMediaAudioConnection,c="[Media] MSID:".concat(a.msid,", Local media audio RTCPeerConnection,");a.type="sendonly",a.logStr=c,a.offer_cb=e,a.offer_cb.isResponsed=!1,a.codeType=o,a.liteice=n.get("liteice")||"0",a.asParam=t,a.rtc_streamid=n.get("rtc_streamid")||null,a.rtc_eid=n.get("rtc_eid")||null,a.HashMap=new Qe.HashMap,a.caComplete=!1;var s=this.getBaseStream("audio");if(s){console.crlog("".concat(c," new RTCPeerConnection..."));var l="1"===a.liteice?new RTCPeerConnection:new RTCPeerConnection(Ze.rtcCfg);a.connection=l,console.crlog("[Media] New MediaStream()");var u=new MediaStream;if(s.getTracks().forEach((function(e){"audio"==e.kind&&(console.crlog("[Media] MediaStream add audioTrack"),u.addTrack(e))})),a.stream=u,console.crlog("".concat(c," addStream(").concat(a.stream,")")),0==s.getAudioTracks().length)return console.crlog("".concat(c," addTrack fail, base stream have not audio track")),console.crlog("".concat(c," offer_cb ice_response()...")),a.offer_cb.ice_response(),void(a.offer_cb.isResponsed=!0);l.addTrack(s.getAudioTracks()[0],u),console.crlog("".concat(c," createOffer()")),l.createOffer().then((function(e){console.crlog("".concat(c," createOffer success!")),e.sdp=i.modifyAudioOfferSDP(e.sdp,a),console.crlog("".concat(c," offer.sdp:\r\n").concat(e.sdp)),a.offer=e,console.crlog("".concat(c," offer setLocalDescription(offer)")),l.setLocalDescription(e).then((function(e){if(console.crlog("".concat(c," offer setLocalDescription success!")),a.rtc_streamid&&(!a.offer_cb.isResponsed&&console.crlog("".concat(c," ice_response(").concat(a.msid,", new Ice.HashMap())")),!a.offer_cb.isResponsed&&a.offer_cb.ice_response(a.msid,new Qe.HashMap),!a.offer_cb.isResponsed&&(a.offer_cb.isResponsed=!0),a.HashMap.set("sdp",a.offer.sdp),a.HashMap.set("rtc_streamid",a.rtc_streamid),a.HashMap.set("rtc_mode","push"),a.HashMap.set("rtc_eid",a.rtc_eid)),"1"===a.liteice&&i.RtcGwAudioAlloc2(a),"1"===a.liteice){console.crlog("".concat(c," offer_cb ice_response(").concat(a.msid,", HashMap) without candidates on liteice === '1' ..."));var t=new Qe.HashMap;t.set("sdp",a.offer.sdp),a.offer_cb.ice_response(a.msid,t),a.offer_cb.isResponsed=!0}})).catch((function(e){console.crlog("".concat(c," offer setLocalDescription fail! ").concat(e)),console.error(e)}))})).catch((function(e){console.crlog("".concat(c," createOffer fail! ").concat(e)),console.error(e)})),l.onicecandidate=function(e){"1"===a.liteice||a.caComplete||(console.crlog("".concat(c," onicecandidate: ").concat(JSON.stringify(e.candidate))),e.candidate?a.candidates.push(e.candidate):a.caComplete=!0,a.caComplete&&i.iceResponse(a),setTimeout((function(){a.caComplete||(a.caComplete=!0,i.iceResponse(a))}),300))},l.oniceconnectionstatechange=function(e){console.crlog("".concat(c," oniceconnectionstatechange, iceConnectionState: ").concat(e.currentTarget.iceConnectionState)),a&&a.iceConnectionState&&"completed"==a.iceConnectionState&&setTimeout((function(){a.answer_cb&&!a.answer_cb.isResponsed&&(console.crlog("".concat(c," answer_cb ice_response()...")),a.answer_cb.ice_response(),a.answer_cb.isResponsed=!0)}),500)},l.onconnectionstatechange=function(e){var t=e.currentTarget.connectionState;console.crlog("".concat(c," onconnectionstatechange, connectionState: ").concat(t)),"connected"==t||"disconnected"==t||"failed"==t&&__Rtc.CRICEAPI.MediaConnectionBreakReport(a.msid)},l.onsignalingstatechange=function(e){console.crlog("".concat(c," onsignalingstatechange, signalingState: ").concat(e.currentTarget.signalingState))}}}},{key:"RtcGwAudioAlloc2",value:function(e){var t=this,n=e.logStr;console.crlog("".concat(n," request GwAudioAlloc2(asParam, HashMap)")),oe.Z.GwAudioAlloc2(e.asParam,e.HashMap).then((function(r){if(r.answerSdp){console.crlog("".concat(n," request GwAudioAlloc2 success..."));var i={type:"answer",sdp:t.modifyAudioAnswerSDP(r.answerSdp,"sendonly")};e.answer=i,console.crlog("".concat(n," answer setRemoteDescription(answer)")),e.connection.setRemoteDescription(new RTCSessionDescription(i)).then((function(e){console.crlog("".concat(n," answer setRemoteDescription success!"))})).catch((function(e){console.crlog("".concat(n," answer setRemoteDescription fail! ").concat(e)),console.error(e)}))}})).catch((function(e){console.error(e)}))}},{key:"videoAllocRawExt2",value:function(e,t,n,r){console.crlog("[Media] VideoAllocRawExt2... cameraID:".concat(t.cameraID,",srcSelf:").concat(n,",rtc_streamid:").concat(r.get("rtc_streamid")||null,",liteice:").concat(r.get("liteice"))),setTimeout((function(){e.isResponsed||(console.crlog("[Media] Media share connection gather candidates, waited more than 10s, do cb.ice_response()"),e.ice_response(),e.isResponsed=!0)}),1e4),n?this.setLocalMediaVideoConnection(e,t,r):this.setRemoteMediaConnection(e,t,r)}},{key:"modifyPeerAddrExt",value:function(e,t,n,r){var i={type:"answer",sdp:r.get("sdp")};"localMediaAudio"==e&&this.localMediaAudioModifyPeerAddrExt(t,n,i),"localMediaVideo"==e&&this.localMediaVideoModifyPeerAddrExt(t,n,i),"remoteMedia"==e&&this.remoteMediaModifyPeerAddrExt(t,n,i)}},{key:"modifyAudioOfferSDP",value:function(e,t){var n=(e=(e=e.replace("a=sendrecv","a=sendonly")).replace("useinbandfec=1","useinbandfec=0")).split("\r\n"),r="opus";switch(t.codeType){case"ACT_OPUS":r="opus";break;case"ACT_PCMA":r="PCMA";break;case"ACT_ISAC":r="isac"}var i=n.find((function(e){return e.includes(r)})).split(" ")[0].split(":")[1];n=n.filter((function(e){return!((e.includes("a=rtcp-fb")||e.includes("a=rtpmap")||e.includes("a=fmtp"))&&e.split(" ")[0].split(":")[1]!=i)}));var o=n.findIndex((function(e){return e.includes("m=audio")})),a=[];n[o].split(" ").forEach((function(e,t){t<3&&a.push(e),t>=3&&!isNaN(e)&&e==i&&a.push(e)})),n[o]=a.join(" ");for(var c=0;c<n.length;c++){var s=n[c];if(!s.includes("nack")&&s.includes("a=rtpmap:")){var l=s.match(/a=rtpmap:(\d+)/)[1];n.splice(c+1,0,"a=rtcp-fb:".concat(l," nack"))}s.includes("http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01")&&delete n[c]}return e=(e=n.join("\r\n")).replace("\r\n\r\n","\r\n")}},{key:"modifyAudioAnswerSDP",value:function(e,t){for(var n=e.split("\r\n"),r=0;r<n.length;r++){var i=n[r];if(!e.includes("nack")&&i.includes("a=rtpmap:")){var o=i.match(/a=rtpmap:(\d+)/)[1];n.splice(r+1,0,"a=rtcp-fb:".concat(o," nack"))}i.includes("http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01")&&delete n[r]}return e=(e=n.join("\r\n")).replace("\r\n\r\n","\r\n"),"sendonly"==t&&(e=e.replace("a=sendrecv","a=recvonly")),e}},{key:"modifyVideoOfferSDP",value:function(e,t){var n=t.type,r=t.isVp8?"VP8":"H264",i=[],o=e.split("\r\n");e.match(new RegExp("(\\d+)(?=\\s+".concat(r,")"),"g")).forEach((function(e){return i.push(e.replace(" ".concat(r),""))})),o=o.filter((function(e){return!((e.includes("a=rtcp-fb")||e.includes("a=rtpmap")||e.includes("a=fmtp"))&&!i.includes(e.split(" ")[0].split(":")[1]))}));var a=o.findIndex((function(e){return e.includes("m=video")})),c=[];o[a].split(" ").forEach((function(e,t){t<3&&c.push(e),t>=3&&!isNaN(e)&&i.includes(e)&&c.push(e)})),o[a]=c.join(" ");for(var s=0;s<o.length;s++){o[s].includes("http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01")&&delete o[s]}var l=o.join("\r\n");if(n&&(l=l.replace("a=sendrecv","a=".concat(n))),"sendonly"==n){var u=this.mediaCfg.userSetMaxKbps?this.mediaCfg.userSetMaxKbps:this.mediaCfg.defMaxKbps;console.crlog("".concat(t.logStr," b=AS:").concat(u)),l=l.replace("c=IN IP4 0.0.0.0","c=IN IP4 0.0.0.0\r\nb=AS:".concat(u))}for(;l.includes("\r\n\r\n");)l=l.replace("\r\n\r\n","\r\n");return l}},{key:"modifyVideoAnswerSDP",value:function(e,t){for(var n=e.split("\r\n"),r=0;r<n.length;r++){n[r].includes("http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01")&&delete n[r]}for(e=n.join("\r\n");e.includes("\r\n\r\n");)e=e.replace("\r\n\r\n","\r\n");var i=e.match(/c=IN IP4(.*?)\r\n/)?e.match(/c=IN IP4(.*?)\r\n/)[0]:"",o=e.match(/b=AS:(.*?)\r\n/)?e.match(/b=AS:(.*?)\r\n/)[0]:"";if(i&&e.split(i).length>2&&(e=e.replace("".concat(i).concat(o),"")),"sendonly"==t){var a=this.mediaCfg.userSetMaxKbps?this.mediaCfg.userSetMaxKbps:this.mediaCfg.defMaxKbps;e=e.replace("profile-level-id=42001f","x-google-min-bitrate=".concat(Math.round(a/4),";x-google-start-bitrate=").concat(Math.round(a/2),";x-google-max-bitrate=").concat(Math.round(a),";"))}else e=e.replace("a=sendrecv","a=sendonly");return e}},{key:"setLocalMediaVideoConnection",value:function(e,t,n){var r,i=this;r=1e4==t.cameraID?this.localMediaVideoConnection_VP8:this.localMediaVideoConnection_H264;var o=this.getBaseStream();if(o){var a="[Media] MSID:".concat(r.msid,", Local media video RTCPeerConnection,");r.type="sendonly",r.logStr=a,r.offer_cb=e,r.offer_cb.isResponsed=!1,r.isVp8=1e4==t.cameraID,r.liteice=n.get("liteice")||"0",r.vsParam=t,r.rtc_streamid=n.get("rtc_streamid")||null,r.rtc_eid=n.get("rtc_eid")||null,r.rtc_mode="push",r.HashMap=new Qe.HashMap,r.caComplete=!1,console.crlog("".concat(a," new RTCPeerConnection..."));var c="1"===r.liteice?new RTCPeerConnection:new RTCPeerConnection(Ze.rtcCfg);r.connection=c,console.crlog("[Media] New MediaStream()");var s=new MediaStream;if(o.getTracks().forEach((function(e){console.crlog("[Media] MediaStream add videoTrack"),"video"==e.kind&&s.addTrack(e)})),r.stream=s,console.crlog("".concat(a," addStream(localMediaVideoStream)")),0==o.getVideoTracks().length)return console.crlog("".concat(a," addTrack fail, base stream have not video track (mp3?)")),console.crlog("".concat(a," offer_cb ice_response()...")),r.offer_cb.ice_response(),void(r.offer_cb.isResponsed=!0);c.addTrack(o.getVideoTracks()[0],s),console.crlog("".concat(a," createOffer()")),c.createOffer().then((function(e){console.crlog("".concat(a," createOffer success!")),e.sdp=i.modifyVideoOfferSDP(e.sdp,r);var t=" ";e.sdp.includes("VP8")&&(t+="VP8"),e.sdp.includes("H264")&&(t+=" H264"),console.crlog("".concat(a," offer.sdp - ").concat(t,"\r\n").concat(e.sdp)),r.offer=e,console.crlog("".concat(a," offer setLocalDescription(offer)")),c.setLocalDescription(e).then((function(e){console.crlog("".concat(a," offer setLocalDescription success!")),r.rtc_streamid&&(!r.offer_cb.isResponsed&&console.crlog("".concat(a," ice_response(").concat(r.msid,", new Ice.HashMap())")),!r.offer_cb.isResponsed&&r.offer_cb.ice_response(r.msid,new Qe.HashMap),!r.offer_cb.isResponsed&&(r.offer_cb.isResponsed=!0),r.HashMap.set("sdp",r.offer.sdp),r.HashMap.set("rtc_streamid",r.rtc_streamid),r.HashMap.set("rtc_mode","push"),r.HashMap.set("rtc_eid",r.rtc_eid)),"1"===r.liteice&&i.RtcGwVideoAlloc2(r)})).catch((function(e){console.crlog("".concat(a," offer setLocalDescription fail! ").concat(e)),console.error(e)}))})).catch((function(e){console.crlog("".concat(a," createOffer fail! ").concat(e)),console.error(e)})),c.onicecandidate=function(e){"1"===r.liteice||r.caComplete||(console.crlog("".concat(a," onicecandidate: ").concat(JSON.stringify(e.candidate))),e.candidate?r.candidates.push(e.candidate):r.caComplete=!0,r.caComplete&&i.iceResponse(r),setTimeout((function(){r.caComplete||(r.caComplete=!0,i.iceResponse(r))}),300))},c.oniceconnectionstatechange=function(e){console.crlog("".concat(a," oniceconnectionstatechange, iceConnectionState: ").concat(e.currentTarget.iceConnectionState)),r&&r.iceConnectionState&&"completed"==r.iceConnectionState&&setTimeout((function(){r.answer_cb&&!r.answer_cb.isResponsed&&(console.crlog("".concat(a," answer_cb ice_response()...")),r.answer_cb.ice_response(),r.answer_cb.isResponsed=!0)}),500)},c.onconnectionstatechange=function(e){var t=e.currentTarget.connectionState;if(console.crlog("".concat(a," onconnectionstatechange, connectionState: ").concat(t)),"connected"==t){r.lastBytesSent=0,clearInterval(r.rtpLogTimer);var n=function(){c.getStats().then((function(e){e.forEach((function(e){"outbound-rtp"==e.type&&(r.width=e.frameWidth,r.height=e.frameHeight,r.frameRate=e.framesPerSecond,r.codeRate=(e.bytesSent-r.lastBytesSent)/2e3,r.lastBytesSent=e.bytesSent)}))}))};n(),r.rtpLogTimer=setInterval(n,2e3)}else"disconnected"==t?clearInterval(r.rtpLogTimer):"failed"==t&&__Rtc.CRICEAPI.MediaConnectionBreakReport(r.msid)},c.onsignalingstatechange=function(e){console.crlog("".concat(a," onsignalingstatechange, signalingState: ").concat(e.currentTarget.signalingState))}}}},{key:"setRemoteMediaConnection",value:function(e,t,n){var r=this,i=this.remoteMediaConnection,o="[Media] MSID:".concat(this.remoteMediaMSID,", remoteMediaConnection");i.type="recvonly",i.logStr=o,i.offer_cb=e,i.offer_cb.isResponsed=!1,i.isVp8=1e4==t.cameraID,i.liteice=n.get("liteice")||"0",i.vsParam=t,i.rtc_streamid=n.get("rtc_streamid")||null,i.rtc_mode="play",i.rtc_eid=n.get("rtc_eid")||null,i.HashMap=new Qe.HashMap,i.caComplete=!1,console.crlog("".concat(o," new RTCPeerConnection..."));var a="1"===i.liteice?new RTCPeerConnection:new RTCPeerConnection(Ze.rtcCfg);i.connection=a;var c={offerToReceiveAudio:!1,offerToReceiveVideo:!0,voiceActivityDetection:!1};console.crlog("".concat(o," createOffer(").concat(JSON.stringify(c),")")),a.createOffer(c).then((function(e){console.crlog("".concat(o," createOffer success! ")),e.sdp=r.modifyVideoOfferSDP(e.sdp,i);var t=" ";e.sdp.includes("VP8")&&(t+="VP8"),e.sdp.includes("H264")&&(t+=" H264"),console.crlog("".concat(o," offer.sdp - ").concat(t,"\r\n").concat(e.sdp)),i.offer=e,console.crlog("".concat(o," offer setLocalDescription(offer)")),a.setLocalDescription(e).then((function(){console.crlog("".concat(o," offer setLocalDescription success!")),i.rtc_streamid&&(!i.offer_cb.isResponsed&&console.crlog("".concat(o," ice_response(").concat(i.msid,", new Ice.HashMap())")),!i.offer_cb.isResponsed&&i.offer_cb.ice_response(i.msid,new Qe.HashMap),!i.offer_cb.isResponsed&&(i.offer_cb.isResponsed=!0),i.HashMap.set("sdp",i.offer.sdp),i.HashMap.set("rtc_streamid",i.rtc_streamid),i.HashMap.set("rtc_mode","play"),i.HashMap.set("rtc_eid",i.rtc_eid),"1"===i.liteice&&r.RtcGwVideoAlloc2(i))})).catch((function(e){console.error("".concat(o," offer setLocalDescription fail! ").concat(e)),console.error(e)}))})).catch((function(e){console.crlog("".concat(o," createOffer fail! ").concat(e)),console.error(e)})),a.onicecandidate=function(e){"1"===i.liteice||i.caComplete||(console.crlog("".concat(o," onicecandidate: ").concat(JSON.stringify(e.candidate))),e.candidate?i.candidates.push(e.candidate):i.caComplete=!0,i.caComplete&&r.iceResponse(i),setTimeout((function(){i.caComplete||(i.caComplete=!0,r.iceResponse(i))}),300))},a.oniceconnectionstatechange=function(e){console.crlog("".concat(o," oniceconnectionstatechange, iceConnectionState: ").concat(e.currentTarget.iceConnectionState)),i.connection&&i.connection.iceConnectionState&&"completed"==i.connection.iceConnectionState&&setTimeout((function(){i.answer_cb&&!i.answer_cb.isResponsed&&(console.crlog("".concat(o," answer_cb ice_response()...")),i.answer_cb.ice_response(),i.answer_cb.isResponsed=!0)}),500)},a.ontrack=function(e){console.crlog("".concat(o," ontrack!")),console.crlog("".concat(o,", video stream:").concat(e.streams[0].id)),i.stream=e.streams[0],r.refreshContainerSrc()},a.onconnectionstatechange=function(e){var t=e.currentTarget.connectionState;if(console.crlog("".concat(o," onconnectionstatechange, connectionState: ").concat(t)),"connected"==t){i.lastBytesReceived=0,i.codeRate=0,i.width=0,i.height=0,i.frameRate=0,i.lastPacketsLost=0,i.lastPacketsReceived=0,i.packetsLostRate=0,clearInterval(i.rtpLogTimer);var n=function(){a.getStats().then((function(e){e.forEach((function(e){if("inbound-rtp"==e.type){i.codeRate=(e.bytesReceived-i.lastBytesReceived)/2e3,i.lastBytesReceived=e.bytesReceived,i.width=e.frameWidth,i.height=e.frameHeight,i.frameRate=e.framesPerSecond;var t=e.packetsLost-i.lastPacketsLost,n=e.packetsReceived-i.lastPacketsReceived;i.packetsLostRate=t<0?0:parseInt(t/(n+t)*1e4)/1e4,i.lastPacketsLost=e.packetsLost,i.lastPacketsReceived=e.packetsReceived}}))}))};n(),i.rtpLogTimer=setInterval(n,2e3)}else"disconnected"==t?clearInterval(i.rtpLogTimer):"failed"==t&&__Rtc.CRICEAPI.MediaConnectionBreakReport(i.msid)},a.onsignalingstatechange=function(e){console.crlog("".concat(o," onsignalingstatechange, signalingState: ").concat(e.currentTarget.signalingState))}}},{key:"iceResponse",value:function(e){var t=e.logStr;"1"===e.liteice?(console.crlog("".concat(t," response without candidates when liteice === '1'")),e.rtc_streamid?(e.vsParam&&this.RtcGwVideoAlloc2(e),e.asParam&&this.RtcGwAudioAlloc2(e)):(e.HashMap.set("sdp",e.offer.sdp),!e.offer_cb.isResponsed&&console.crlog("".concat(t," offer_cb ice_response(").concat(e.msid,", HashMap)")),!e.offer_cb.isResponsed&&e.offer_cb.ice_response(e.msid,e.HashMap),!e.offer_cb.isResponsed&&(e.offer_cb.isResponsed=!0))):(e.HashMap.set("icecandidate",JSON.stringify(e.candidates)),console.crlog("".concat(t," response candidates(").concat(e.candidates.length,"): ").concat(JSON.stringify(e.candidates))),e.rtc_streamid?(e.vsParam&&this.RtcGwVideoAlloc2(e),e.asParam&&this.RtcGwAudioAlloc2(e)):(e.HashMap.set("sdp",e.offer.sdp),!e.offer_cb.isResponsed&&console.crlog("".concat(t," offer_cb ice_response(").concat(e.msid,", HashMap)")),!e.offer_cb.isResponsed&&e.offer_cb.ice_response(e.msid,e.HashMap),!e.offer_cb.isResponsed&&(e.offer_cb.isResponsed=!0)))}},{key:"localMediaVideoModifyPeerAddrExt",value:function(e,t,n){var r;(r=t==this.localMediaVideoConnection_H264.msid?this.localMediaVideoConnection_H264:this.localMediaVideoConnection_VP8).answer_cb=e;var i=r.logStr,o=r.connection;n.sdp=this.modifyVideoAnswerSDP(n.sdp,"sendonly");var a=" ";n.sdp.includes("VP8")&&(a+="VP8"),n.sdp.includes("H264")&&(a+=" H264"),console.crlog("".concat(i," ModifyPeerAddrExt, answerSDP - ").concat(a,"\r\n").concat(n.sdp)),r.answer=n,console.crlog("".concat(i," answer setRemoteDescription(answer)")),o.setRemoteDescription(new RTCSessionDescription(n)).then((function(e){console.crlog("".concat(i," answer setRemoteDescription success!")),window.videoResolutionReport(r.msid,"media")})).catch((function(e){console.crlog("".concat(i," answer setRemoteDescription fail! ").concat(e)),console.error(e)})),setTimeout((function(){r.answer_cb&&!r.answer_cb.isResponsed&&(console.crlog("".concat(i," answer_cb ice_response()...")),r.answer_cb.ice_response(),r.answer_cb.isResponsed=!0)}),500)}},{key:"localMediaAudioModifyPeerAddrExt",value:function(e,t,n){var r=this;this.localMediaAudioConnection.answer_cb=e;var i=this.localMediaAudioConnection.logStr,o=this.localMediaAudioConnection.connection;n.sdp=n.sdp.replace("a=sendrecv","a=recvonly"),console.crlog("".concat(i," ModifyPeerAddrExt, answerSDP:\r\n").concat(n.sdp)),this.localMediaAudioConnection.answer=n,console.crlog("".concat(i," answer setRemoteDescription(answer)")),o.setRemoteDescription(new RTCSessionDescription(n)).then((function(e){console.crlog("".concat(i," answer setRemoteDescription success!"))})).catch((function(e){console.crlog("".concat(i," answer setRemoteDescription fail! ").concat(e)),console.error(e)})),setTimeout((function(){r.localMediaAudioConnection.answer_cb.isResponsed||(console.crlog("".concat(i," answer_cb ice_response()...")),r.localMediaAudioConnection.answer_cb.ice_response(),r.localMediaAudioConnection.answer_cb.isResponsed=!0)}),500)}},{key:"remoteMediaModifyPeerAddrExt",value:function(e,t,n){var r=this;this.remoteMediaConnection.answer_cb=e;var i=this.remoteMediaConnection.logStr,o=this.remoteMediaConnection.connection;n.sdp=this.modifyVideoAnswerSDP(n.sdp,"recvonly");var a=" ";n.sdp.includes("VP8")&&(a+="VP8"),n.sdp.includes("H264")&&(a+=" H264"),console.crlog("".concat(i," ModifyPeerAddrExt, answerSDP - ").concat(a,"\r\n").concat(n.sdp)),this.remoteMediaConnection.answer=n,console.crlog("".concat(i," answer setRemoteDescription(answer)")),o.setRemoteDescription(new RTCSessionDescription(n)).then((function(e){console.crlog("".concat(i," answer setRemoteDescription success!"))})).catch((function(e){console.crlog("".concat(i," answer setRemoteDescription fail! ").concat(e)),console.error(e)})),setTimeout((function(){r.remoteMediaConnection.answer_cb&&!r.remoteMediaConnection.answer_cb.isResponsed&&(console.crlog("".concat(i," answer_cb ice_response()...")),r.remoteMediaConnection.answer_cb.ice_response(),r.remoteMediaConnection.answer_cb.isResponsed=!0)}),500)}},{key:"RtcGwVideoAlloc2",value:function(e){var t=this,n=e.logStr;console.crlog("".concat(n," request GwVideoAlloc2(vsParam, HashMap)")),oe.Z.GwVideoAlloc2(e.vsParam,e.HashMap).then((function(r){if(r.answerSdp){console.crlog("".concat(n," request GwVideoAlloc2 success..."));var i={type:"answer",sdp:r.answerSdp};i.sdp=t.modifyVideoAnswerSDP(i.sdp,e.type),e.answer=i;var o=" ";i.sdp.includes("VP8")&&(o+="VP8"),i.sdp.includes("H264")&&(o+=" H264"),console.crlog("".concat(n," received answer sdp:").concat(i.sdp.length," ").concat(o)),console.crlog("".concat(i.sdp)),console.crlog("".concat(n," setRemoteDescription(answer)")),e.connection.setRemoteDescription(new RTCSessionDescription(i)).then((function(){console.crlog("".concat(n," setRemoteDescription success!"))})).catch((function(e){console.crlog("".concat(n," setRemoteDescription fail! ").concat(e)),console.error(e)}))}})).catch((function(e){console.error(e)}))}},{key:"refreshContainerSrc",value:function(){try{if(this.container&&this.container._userID!==Ze.userInfo.userId){var e=this.container._videoEle;console.crlog("".concat(this.remoteMediaConnection.logStr," containerID:").concat(this.container._id,", videoEle set srcObject...")),e.srcObject=this.remoteMediaConnection.stream,setTimeout((function(){"Chrome"!==__Rtc.CRBrowser.curBrowserCfg.name&&e.srcObject&&"true"==e.srcObject.active&&(e.click(),e.play())}),2e3)}}catch(e){console.error(e)}}}])}();window.__crMediaClass=Xe,window.__Rtc.CRRTCMedia=new window.__crMediaClass,window.CRVideo_NotifyMediaOpened=new Ze.CbProxy("CRVideo_NotifyMediaOpened"),window.CRVideo_NotifyMediaStart=new Ze.CbProxy("CRVideo_NotifyMediaStart"),window.CRVideo_NotifyMediaStop=new Ze.CbProxy("CRVideo_NotifyMediaStop"),window.CRVideo_NotifyMediaPause=new Ze.CbProxy("CRVideo_NotifyMediaPause"),window.CRVideo_NotifyPlayPosSetted=new Ze.CbProxy("CRVideo_NotifyPlayPosSetted"),window.CRVideo_NotifyMemberMediaData=new Ze.CbProxy("CRVideo_NotifyMemberMediaData");var $e=__webpack_require__(5100),et=__webpack_require__.n($e),tt=__webpack_require__(8028),nt=__webpack_require__.n(tt);function rt(e){return rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rt(e)}function it(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */it=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof C?t:C,a=Object.create(o.prototype),c=new x(r||[]);return i(a,"_invoke",{value:E(e,n,c)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var f="suspendedStart",h="suspendedYield",p="executing",_="completed",g={};function C(){}function v(){}function m(){}var y={};l(y,a,(function(){return this}));var S=Object.getPrototypeOf,I=S&&S(S(M([])));I&&I!==n&&r.call(I,a)&&(y=I);var R=m.prototype=C.prototype=Object.create(y);function w(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function n(i,o,a,c){var s=d(e[i],e,o);if("throw"!==s.type){var l=s.arg,u=l.value;return u&&"object"==rt(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,c)}),(function(e){n("throw",e,a,c)})):t.resolve(u).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,c)}))}c(s.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function E(t,n,r){var i=f;return function(o,a){if(i===p)throw Error("Generator is already running");if(i===_){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var c=r.delegate;if(c){var s=D(c,r);if(s){if(s===g)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=_,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var l=d(t,n,r);if("normal"===l.type){if(i=r.done?_:h,l.arg===g)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(i=_,r.method="throw",r.arg=l.arg)}}}function D(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,D(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var o=d(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function M(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(rt(t)+" is not iterable")}return v.prototype=m,i(R,"constructor",{value:m,configurable:!0}),i(m,"constructor",{value:v,configurable:!0}),v.displayName=l(m,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,s,"GeneratorFunction")),e.prototype=Object.create(R),e},t.awrap=function(e){return{__await:e}},w(b.prototype),l(b.prototype,c,(function(){return this})),t.AsyncIterator=b,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new b(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(R),l(R,s,"Generator"),l(R,a,(function(){return this})),l(R,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=M,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return c.type="throw",c.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],c=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(s&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;T(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:M(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function ot(e,t,n,r,i,o,a){try{var c=e[o](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,i)}function at(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){ot(o,r,i,a,c,"next",e)}function c(e){ot(o,r,i,a,c,"throw",e)}a(void 0)}))}}function ct(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,lt(r.key),r)}}function st(e,t,n){return t&&ct(e.prototype,t),n&&ct(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function lt(e){var t=function(e,t){if("object"!=rt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=rt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==rt(t)?t:t+""}function ut(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var dt=window.CRVideo,ft=window.Ice,ht=st((function e(t){ut(this,e),this.name=t.name,this.path=t.path,this.md5=t.md5,this.ctime=t.ctime,this.size={high:t.size.high,low:t.size.low},this.fileList=t.fileList||[],this.attributes={orgFileName:t.attributes.get("orgFileName"),ownerName:t.attributes.get("ownerName"),orgSize:t.attributes.get("orgSize"),ownerID:t.attributes.get("ownerID"),height:t.attributes.get("height"),width:t.attributes.get("width")}})),pt=st((function e(t){ut(this,e),this.status=t.status,this.fileList=t.fileList||[],this.attributes={height:t.attributes.get("height"),width:t.attributes.get("width"),pageCount:t.attributes.get("pageCount"),imgType:t.attributes.get("imgType")}})),_t=function(){return st((function e(){ut(this,e),this.initData(),this.initSDKInterface()}),[{key:"initData",value:function(){console.crlog("[NetDisk] NetDiskModule initData..."),this.userNetDiskID=null,this.compID=null,this.meetID=null,this.netDiskPrx=null,this.meetPrx=null,this.userPrx=null,this.companyPrx=null,this.docTransStatusTimer=-1,this.meetNDKeepAliveTimer=null,this.userNDKeepAliveTimer=null,this.compNDKeepAliveTimer=null,this.downloadingIDs=[]}},{key:"initSDKInterface",value:function(){x.Z.UploadFileToMeetND=this.uploadFileToMeetND.bind(this),x.Z.UploadDocAndTrans=this.uploadDocAndTrans.bind(this),x.Z.ConnectToUserND=this.connectToUserND.bind(this),x.Z.ConnectToCompanyND=this.connectToCompanyND.bind(this),x.Z.StartKeepAlive=this.startKeepAlive.bind(this),x.Z.StopKeepAlive=this.stopKeepAlive.bind(this),x.Z.ImportFile2MeetND=this.importFile2MeetND.bind(this),x.Z.GetDir=this.getDir.bind(this),x.Z.DownLoadFileData=this.downloadFileData.bind(this),x.Z.NotifyNDDocTransStatus=new J.Z("NotifyNDDocTransStatus")}},{key:"init",value:function(){var e=this;console.crlog("[NetDisk] init..."),this.initData(),a.Z.SDK_Event.addEventListener("startNetDiskService",(function(t,n,r,i){console.crlog("[NetDisk] StartNetDiskService, meetID:".concat(r,", userNetDiskID:").concat(i)),e.userNetDiskID=String(i),e.meetID=String(r),e.netDiskPrx=n.NDClientPrx.uncheckedCast(t.stringToProxy("NetDisk"),"Client")})).addEventListener("EnterMeetingSuccess",function(){var t=at(it().mark((function t(n){return it().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.compID=String(n.confInfo.compid),t.next=3,e.connectToMeetND();case 3:e.startKeepAlive(0);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).addEventListener("CleanMeetingData",(function(){clearTimeout(e.docTransProgressTimer),e.initData()}))}},{key:"unInit",value:function(){a.Z.SDK_Event.removeAllEvent("startNetDiskService"),this.initData()}},{key:"getNDPrx",value:function(e){return e?[this.meetPrx,this.userPrx,this.companyPrx][e]:this.meetPrx}},{key:"connectToMeetND",value:function(){var e=this;return console.crlog("[NetDisk] Connect to meet netDisk..."),new Promise((function(t,n){e.netDiskPrx.createConfSession(e.meetID,et()(e.meetID)).then((function(n){e.meetPrx=n,console.crlog("[NetDisk] netDiskPrx createConfSession success."),t()})).exception((function(e){console.crlog("[NetDisk] netDiskPrx createConfSession failed! ".concat(e)),n(e)}))}))}},{key:"connectToUserND",value:function(){var e=this;return console.crlog("[NetDisk] Connect to user netDisk..."),new Promise((function(t,n){e.netDiskPrx.createUserSession(e.userNetDiskID,et()(e.userNetDiskID)).then((function(n){e.userPrx=n,console.crlog("[NetDisk] netDiskPrx createUserSession success."),t()})).exception((function(e){console.crlog("[NetDisk] netDiskPrx createUserSession failed! ".concat(e)),n(e)}))}))}},{key:"connectToCompanyND",value:function(){var e=this;return console.crlog("[NetDisk] Connect to company netDisk..."),new Promise((function(t,n){e.netDiskPrx.createCompanySession(e.compID,et()(e.compID)).then((function(n){e.companyPrx=n,console.crlog("[NetDisk] netDiskPrx createCompanySession success."),t()})).exception((function(e){console.crlog("[NetDisk] netDiskPrx createCompanySession failed! ".concat(e)),n(e)}))}))}},{key:"startKeepAlive",value:function(e){var t=this;switch(e){case 0:this.meetPrx&&this.meetPrx.keepAlive().then((function(){t.meetNDKeepAliveTimer=setTimeout(t.startKeepAlive.bind(t,e),1e4)})).exception((function(e){console.crlog("[NetDisk] this.meetPrx.keepAlive failed! ".concat(e))}));break;case 1:this.userPrx&&this.userPrx.keepAlive().then((function(){t.userNDKeepAliveTimer=setTimeout(t.startKeepAlive.bind(t,e),1e4)})).exception((function(e){console.crlog("[NetDisk] this.userPrx.keepAlive failed! ".concat(e))}));break;case 2:this.companyPrx&&this.companyPrx.keepAlive().then((function(){t.compNDKeepAliveTimer=setTimeout(t.startKeepAlive.bind(t,e),1e4)})).exception((function(e){console.crlog("[NetDisk] this.companyPrx.keepAlive failed! ".concat(e))}))}}},{key:"stopKeepAlive",value:function(e){switch(console.crlog("[NetDisk] stopKeepAlive -- ".concat(e)),e){case 0:this.meetNDKeepAliveTimer&&(clearTimeout(this.meetNDKeepAliveTimer),this.meetNDKeepAliveTimer=null);break;case 1:this.userNDKeepAliveTimer&&(clearTimeout(this.userNDKeepAliveTimer),this.userNDKeepAliveTimer=null);break;case 2:this.compNDKeepAliveTimer&&(clearTimeout(this.compNDKeepAliveTimer),this.compNDKeepAliveTimer=null)}}},{key:"uploadDocAndTrans",value:(e=at(it().mark((function e(t,n){var r=this;return it().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.crlog("[NetDisk] UploadDocAndTrans(".concat(t,", file)")),e.abrupt("return",new Promise(function(){var e=at(it().mark((function e(i,o){var a,c,s,l,u,d;return it().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="/progData/".concat(t),e.prev=1,e.next=4,r.uploadFileToMeetND(t,n);case 4:return c=e.sent,e.next=7,r.serverDocConvert(c);case 7:return e.next=9,r.getStatInfo(a);case 9:return s=e.sent,e.next=12,r.getDocTransStateLoop(s.md5);case 12:l=e.sent,i(l),e.next=35;break;case 16:if(e.prev=16,e.t0=e.catch(1),!e.t0.errCode||1403!=e.t0.errCode){e.next=34;break}return e.prev=19,e.next=22,r.serverDocConvert(e.t0.convertParams);case 22:return e.next=24,r.getStatInfo(a);case 24:return u=e.sent,e.next=27,r.getDocTransStateLoop(u.md5);case 27:return d=e.sent,e.abrupt("return",i(d));case 31:return e.prev=31,e.t1=e.catch(19),e.abrupt("return",o({errCode:1,errMsg:e.t1}));case 34:return e.abrupt("return",o({errCode:1,errMsg:e.t0}));case 35:case"end":return e.stop()}}),e,null,[[1,16],[19,31]])})));return function(t,n){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)}))),function(t,n){return e.apply(this,arguments)})},{key:"getFileMD5",value:function(e){return new Promise((function(t,n){try{var r=null,i=1048576,o=new(nt().ArrayBuffer),a=0;!function e(n){var c=new FileReader,s=n.slice(a,a+i);c.onload=function(c){if(o.append(c.target.result),!((a+=i)<n.size))return r=o.end(),t(r);e(n)},c.readAsArrayBuffer(s)}(e)}catch(e){return console.error(e),n(e)}}))}},{key:"readFile",value:function(e){return new Promise((function(t,n){var r=new FileReader;r.readAsArrayBuffer(e),r.onload=function(e){return clearTimeout(i),t(e.target.result)};var i=setTimeout((function(){return n("读取文件超时")}),1e4)}))}},{key:"uploadFileToMeetND",value:function(e,t){var n=this;return new Promise(function(){var r=at(it().mark((function r(i,o){var c,s,l,u,d,f,h,p,_,g;return it().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(console.crlog("[NetDisk] Upload file to meet netDisk: ".concat(e)),r.prev=1,console.crlog("[NetDisk] 1.Start to obtain the file md5"),!(t instanceof File)){r.next=13;break}return r.next=6,n.getFileMD5(t);case 6:return c=r.sent,r.next=9,n.readFile(t);case 9:l=r.sent,s=new Uint8Array(l),r.next=15;break;case 13:c=et()(t),s=t;case 15:console.crlog("[NetDisk] 2.md5: ".concat(c)),u=new Date,d=e.match(/[^<>/\\\|:""\*\?]+\.\w+$/)[0],f="/progData/".concat(e),h=new ft.Long(0,s.length),p="".concat(u.getFullYear(),"-").concat(a.Z.PrefixInteger(u.getMonth()+1,2),"-").concat(a.Z.PrefixInteger(u.getDate(),2)," ").concat(a.Z.PrefixInteger(u.getHours(),2),":").concat(a.Z.PrefixInteger(u.getMinutes(),2),":").concat(a.Z.PrefixInteger(u.getSeconds(),2)),(_=new NetDiskService.DataDict).set("orgFileName",d),_.set("ownerName",dt.userInfo?String(dt.userInfo.nickname):"0"),_.set("orgSize",String(s.length)),_.set("ownerID",dt.userInfo?String(dt.userInfo.termId):"0"),g=new NetDiskService.StatInfo(d,f,c,h,p,_),n.meetPrx.beginUpload(g).then((function(t,r){console.crlog("[NetDisk] 3.meetPrx.beginUpload. taskID:".concat(t,", number of proxySeq:").concat(r.length));var a=r[0];a.createFSIOSession(t,"w",c).then((function(r){console.crlog("[NetDisk] 4.proxy.createFSIOSession. host:".concat(r._reference._endpoints[0]._host));var c=614400,l=s.length,u=Math.ceil(l/c),d=0,h=0;console.crlog("[NetDisk] 5.FSIOSession.write begin... block size: ".concat(c)),function p(){var _=h*c,g=_+(h+1===u?l%c:c),C=s.slice(_,g),v=Math.ceil(g/l*100);v!==d&&(d=v,console.crlog("[NetDisk] FSIOSession write block data... ".concat(d,"%"))),r.write(new ft.Long(0,_),C).then((function(){++h===u?(console.crlog("[NetDisk] 6.FSIOSession.write finished."),a.fileUploadCompleted(t,!0).then((function(r){console.crlog("[NetDisk] 7.proxy.fileUploadCompleted."),n.meetPrx.endUpload(t,r).then(at(it().mark((function t(){return it().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.crlog("[NetDisk] 8.meetPrx.endUpload."),console.crlog("[NetDisk] Upload file to meet netdisk success."),i({fullPath:f,svrPathFileName:e,proxy:a});case 3:case"end":return t.stop()}}),t)})))).exception((function(e){console.crlog("[NetDisk] meetPrx.endUpload filed! ".concat(e)),o({errCode:1,errDesc:e.toString()})}))})).exception((function(e){console.crlog("[NetDisk] proxy.fileUploadCompleted filed! ".concat(e)),o({errCode:1,errDesc:e.toString()})}))):p()})).exception((function(e){console.crlog("[NetDisk] FSIOSession.write filed! ".concat(e)),o({errCode:1,errDesc:e.toString()})}))}()})).exception((function(e){console.crlog("[NetDisk] proxy.createFSIOSession filed! ".concat(e)),o({errCode:1,errDesc:e.toString()})}))})).exception((function(t){console.crlog("[NetDisk] proxy.createFSIOSession failed! ".concat(t)),(t instanceof NetDiskService.FileAlreadyExists||t instanceof NetDiskService.FdfsFileAlreadyExists)&&(console.crlog("[NetDisk] File already exists."),o({errCode:1403,errDesc:"文件已存在",convertParams:{fullPath:f,svrPathFileName:e}})),o({errCode:1,errDesc:t.toString()})})),r.next=30;break;case 26:return r.prev=26,r.t0=r.catch(1),console.error(r.t0),r.abrupt("return",o({errCode:1,errDesc:r.t0.toString()}));case 30:case"end":return r.stop()}}),r,null,[[1,26]])})));return function(e,t){return r.apply(this,arguments)}}())}},{key:"serverDocConvert",value:function(e){var t=this,n=e.fullPath,r=e.svrPathFileName,i=e.proxy,o=void 0===i?null:i;return new Promise((function(e,i){console.crlog("[NetDisk] Start server document conversion. fullPath:".concat(n,", svrPathFileName:").concat(r));var a=new NetDiskService.DataDict;t.meetPrx.convert(n,a,o).then((function(t){console.crlog("[NetDisk] Start server document conversion success. ID:".concat(t)),e(t)})).exception((function(e){console.crlog("[NetDisk] Start server document conversion failed! ".concat(e)),i({errCode:1,errDesc:e.toString()})}))}))}},{key:"getStatInfo",value:function(e){var t=this;console.crlog("[NetDisk] getStatInfo: ".concat(e));var n=0;return new Promise((function(r,i){if(!t.meetPrx)return i({errCode:1,errDesc:"meetPrx is null"});!function o(){t.meetPrx.stat(e).then((function(e){var t=new ht(e);console.crlog("[NetDisk] meetPrx.stat success. ".concat(JSON.stringify(t))),r(t)})).exception((function(e){return e instanceof NetDiskService.FileOrDirectoryNotExists?n++>10?i({errCode:1500,errDesc:"文件不存在"}):void setTimeout((function(){o()}),1e3):(console.crlog("[NetDisk] meetPrx.stat failed! ".concat(e)),i({errCode:1,errDesc:e.toString()}))}))}()}))}},{key:"getDocTransInfo",value:function(e){var t=this;return new Promise(function(){var n=at(it().mark((function n(r,i){return it().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t.meetPrx.getConvertStatus(e).then((function(e){var t=new pt(e);return console.crlog("[NetDisk] meetPrx.getConvertStatus success. ".concat(JSON.stringify(t))),r(t)})).exception((function(t){return console.crlog("[NetDisk] meetPrx.getConvertStatus(".concat(e,") failed! ").concat(t)),i({errCode:1,errDesc:t.toString()})}));case 1:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())}},{key:"getDocTransStateLoop",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;return new Promise(function(){var r=at(it().mark((function r(i,o){return it().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:t.docTransStatusTimer=setInterval(at(it().mark((function n(){var r;return it().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.getDocTransInfo(e);case 3:4===(r=n.sent).status&&(clearInterval(t.docTransStatusTimer),i({errCode:0,errDesc:"文档转换完成",state:r})),n.next=12;break;case 7:n.prev=7,n.t0=n.catch(0),console.error(n.t0),clearInterval(t.docTransStatusTimer),o({errCode:1,errDesc:n.t0.toString()});case 12:case"end":return n.stop()}}),n,null,[[0,7]])}))),n);case 1:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}())}},{key:"cancelDocTransStateLoop",value:function(){this.docTransStatusTimer&&clearInterval(this.docTransStatusTimer)}},{key:"getDir",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return new Promise(function(){var r=at(it().mark((function r(i,o){var a;return it().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(console.crlog("[NetDisk] getDir, path:".concat(e,", NDType:").concat(n)),a=t.getNDPrx(n)){r.next=4;break}return r.abrupt("return",o({errCode:1500,errDesc:"未初始化网盘"}));case 4:a.listDir(e).then((function(e){i({name:e.name,path:e.path,subDirs:e.subDirs,files:e.files})})).exception((function(t){console.crlog("[NetDisk] getDir(".concat(e,",").concat(n,") failed! ").concat(t)),o({errCode:1,errDesc:t.toString()})}));case 5:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}())}},{key:"importFile2MeetND",value:function(e,t){var n=this;return console.crlog("[NetDisk] importFile2MeetND, path:".concat(e,", NDType:").concat(t)),new Promise((function(r,i){var o=n.getNDPrx(t);if(!o)return i({errCode:1500,errDesc:"未初始化网盘"});var a=new NetDiskService.DataDict;o.import2ConfDD(e,n.meetID,a).then((function(t){console.crlog("[NetDisk] ".concat(e,", import2ConfDD success.")),r({width:t.get("width"),height:t.get("height"),type:t.get("type"),files:t.get("rsltFiles").split(";")})})).exception((function(e){console.crlog("[NetDisk] import2ConfDD failed! ".concat(e.toString())),i({errCode:1,errDesc:e.toString()})}))}))}},{key:"downloadFileData",value:function(e){var t=this;return console.crlog("[NetDisk] downloadFileData: ".concat(e)),new Promise((function(n,r){t.meetPrx?t.getStatInfo(e).then((function(e){t.beginDownload(e.md5).then((function(t){console.crlog("[NetDisk] meetPrx.beginDownload success, proxy count: ".concat(t.length));var i=+e.attributes.orgSize,o=e.size.low,a=1e6,c=Math.ceil(o/a),s=new ArrayBuffer(o),l=new Uint8Array(s);!function s(u){if(!t[u])return console.crlog("[NetDisk] meetPrx.beginDownload failed! Download attempts failed on all servers!"),r();t[u].createFSIOSession(e.md5,"r",e.md5).then((function(e){for(var t=0,s=0;s<c;s++)!function a(s,u){e.read(new ft.Long(0,s),new ft.Long(0,u)).then((function(e){if(l.set(e,s),++t===c)return i!=o&&(l=new Zlib.Inflate(l).decompress()),console.crlog("[NetDisk] FSIOSession read Success"),n(l)})).exception((function(e){if(!(e instanceof NetDiskService.FileBuffering))return r(e);setTimeout((function(){a(s,u)}),100)}))}(s*a,s===c-1?o%a:a)})).exception((function(e){console.crlog("[NetDisk] createFSIOSession Failed! ".concat(e.toString())),s(++u)}))}(0)}))})).catch((function(e){return r(e)})):setTimeout(at(it().mark((function i(){var o;return it().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,t.downloadFileData(e);case 3:return o=i.sent,i.abrupt("return",n(o));case 7:return i.prev=7,i.t0=i.catch(0),console.error(i.t0),i.abrupt("return",r(i.t0));case 11:case"end":return i.stop()}}),i,null,[[0,7]])}))),500)}))}},{key:"beginDownload",value:function(e){var t=this;return console.crlog("[NedDisk] beginDownload:".concat(e)),new Promise((function(n,r){if(!t.meetPrx)return r();t.meetPrx.beginDownload(e).then((function(e){n(e)})).exception((function(e){console.crlog("[NetDisk] error beginDownload error: ".concat(e.toString()))}))}))}}]);var e}(),gt=new _t;window.__Rtc.CRRTCNetdisk=gt,a.Z.SDK_Event.addEventListener("SDKInit",(function(){gt.init()})).addEventListener("SDKUnInit",(function(){gt.unInit()}));const Ct=gt;function vt(e){return vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vt(e)}function mt(e){return function(e){if(Array.isArray(e))return yt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return yt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?yt(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function St(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */St=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof C?t:C,a=Object.create(o.prototype),c=new x(r||[]);return i(a,"_invoke",{value:E(e,n,c)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var f="suspendedStart",h="suspendedYield",p="executing",_="completed",g={};function C(){}function v(){}function m(){}var y={};l(y,a,(function(){return this}));var S=Object.getPrototypeOf,I=S&&S(S(M([])));I&&I!==n&&r.call(I,a)&&(y=I);var R=m.prototype=C.prototype=Object.create(y);function w(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function n(i,o,a,c){var s=d(e[i],e,o);if("throw"!==s.type){var l=s.arg,u=l.value;return u&&"object"==vt(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,a,c)}),(function(e){n("throw",e,a,c)})):t.resolve(u).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,c)}))}c(s.arg)}var o;i(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return o=o?o.then(i,i):i()}})}function E(t,n,r){var i=f;return function(o,a){if(i===p)throw Error("Generator is already running");if(i===_){if("throw"===o)throw a;return{value:e,done:!0}}for(r.method=o,r.arg=a;;){var c=r.delegate;if(c){var s=D(c,r);if(s){if(s===g)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===f)throw i=_,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=p;var l=d(t,n,r);if("normal"===l.type){if(i=r.done?_:h,l.arg===g)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(i=_,r.method="throw",r.arg=l.arg)}}}function D(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,D(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var o=d(i,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var a=o.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function M(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(vt(t)+" is not iterable")}return v.prototype=m,i(R,"constructor",{value:m,configurable:!0}),i(m,"constructor",{value:v,configurable:!0}),v.displayName=l(m,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,s,"GeneratorFunction")),e.prototype=Object.create(R),e},t.awrap=function(e){return{__await:e}},w(b.prototype),l(b.prototype,c,(function(){return this})),t.AsyncIterator=b,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new b(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(R),l(R,s,"Generator"),l(R,a,(function(){return this})),l(R,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=M,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return c.type="throw",c.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],c=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(s&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;T(n)}return i}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:M(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function It(e,t,n,r,i,o,a){try{var c=e[o](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,i)}function Rt(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){It(o,r,i,a,c,"next",e)}function c(e){It(o,r,i,a,c,"throw",e)}a(void 0)}))}}function wt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Et(r.key),r)}}function bt(e,t,n){return t&&wt(e.prototype,t),n&&wt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Et(e){var t=function(e,t){if("object"!=vt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=vt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==vt(t)?t:t+""}function Dt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Pt=window.CRVideo,Tt=window.Ice,xt=bt((function e(t){Dt(this,e),this.boardID=t.wId,this.owner=t.owner,this.width=t.width,this.height=t.height,this.pageCount=t.pageCount,this.curPage=t.curPage||0,this.pageMode=null!=t.extProperty.show_multi_page?parseInt(t.extProperty.show_multi_page):0,this.scale=t.scale,this.extInfo=t.extInfo})),Mt={Uint8ArrayToData:function(e,t){var n,r,i;switch(t){case 4:case 5:r=new Uint8Array(e.buffer),i=new Int8Array(e.buffer),n=this.dataResolver.pen(r,i);break;case 6:case 7:case 8:r=new Uint8Array(e.buffer),i=new Int8Array(e.buffer),n=this.dataResolver.straightLine(r,i);break;case 9:r=new Uint8Array(e.buffer),i=new Int8Array(e.buffer),n=this.dataResolver.text(r,i);break;case 10:case 11:case 12:case 13:case 14:case 15:r=new Uint8Array(e.buffer),i=new Int8Array(e.buffer),n=this.dataResolver.rect(r,i);break;case 16:r=new Uint8Array(e.buffer),i=new Int8Array(e.buffer),n=this.dataResolver.image(r,i);break;default:console.crlog("[BoardV1] Undefined element type: ".concat(t))}return n},dataResolver:{straightLine:function(e,t){var n=0,r={};r.color=this.color(e.slice(0,n+=10)),r.width=e[++n],r.style=e[++n];var i=t[++n]<<8|e[++n],o=t[++n]<<8|e[++n],a=t[++n]<<8|e[++n],c=t[++n]<<8|e[++n];return r.content=[{startX:i,startY:o,endX:a,endY:c}],r},pen:function(e,t){var n=0,r={};r.color=this.color(e.slice(0,n+=10)),r.width=e[++n],r.style=e[++n],r.size=e[++n]<<8|e[++n];var i=4*r.size+n;for(r.content=[];n<i;){var o=t[++n]<<8|e[++n],a=t[++n]<<8|e[++n];r.content.push({w:o,h:a})}return r},rect:function(e,t){var n=0,r={};return r.color=this.color(e.slice(0,n+=10)),r.width=e[++n],r.style=e[++n],r.left=t[++n]<<8|e[++n],r.top=t[++n]<<8|e[++n],r.pelWidth=e[++n]<<8|e[++n],r.pelHeight=e[++n]<<8|e[++n],r.textColor=this.color(e.slice(++n,n+=10)),r.textWidth=t[++n]<<8|e[++n],r.textContentLength=e[++n]<<24|e[++n]<<16|e[++n]<<8|e[++n],r.textContent=a.Z.Uint8ArrToChar(e.slice(++n,n+=r.textContentLength)),r.fontNameLength=e[n]<<24|e[++n]<<16|e[++n]<<8|e[++n],r.fontName=a.Z.Uint8ArrToChar(e.slice(++n,n+=r.fontNameLength)),r.fontSize=e[n],r.fontWeight=e[++n],r.fontStyle=e[++n],r.fontDecoration=e[++n],r.content=[],r},text:function(e,t){var n=0,r={};return r.color=this.color(e.slice(0,n+=10)),r.width=t[++n]<<8|e[++n],r.textContentLength=e[++n]<<24|e[++n]<<16|e[++n]<<8|e[++n],r.textContent=a.Z.Uint8ArrToChar(e.slice(++n,n+=r.textContentLength)),r.fontNameLength=e[n]<<24|e[++n]<<16|e[++n]<<8|e[++n],r.fontName=a.Z.Uint8ArrToChar(e.slice(++n,n+=r.fontNameLength)),r.fontSize=e[n],r.fontWeight=e[++n],r.fontStyle=e[++n],r.fontDecoration=e[++n],r.content=[],r},image:function(e,t){var n={},r=0;return n.color=this.color(e.slice(0,r+=10)),n.fontSize=e[++r],n.fontStyle=e[++r],n.left=t[++r]<<8|e[++r],n.top=t[++r]<<8|e[++r],n.width=t[++r]<<8|e[++r],n.height=t[++r]<<8|e[++r],n.fileId=e[++r]<<24|e[++r]<<16|e[++r]<<8|e[++r],n.fileName=a.Z.Uint8ArrToChar(e.slice(++r)),n.content=[],n},color:function(e){var t=Math.ceil(e[1]/255*1e3)/1e3;return[e[3],e[5],e[7],t]}},headDataParse:function(e){var t={},n=new DataView(e.buffer);t.flag=n.getUint32(0,!0),t.verson="".concat(n.getUint8(4),".").concat(n.getUint8(5)),t.type=n.getUint32(6,!0);var r=n.getUint32(10,!0);return t.size=4294967295===r?0:r,t},parseImageData:function(e){var t=this.headDataParse(e.slice(0,14));if(2290649224===t.flag&&"1.1"===t.verson)switch(e=e.slice(14),t.type){case 2:return{type:"image",bgData:e};case 3:var n=this.parsePPT(e);return{type:"ppt",bgData:n.bgData,imgData:n.imgData};default:console.crlog("[BoardV1] parseImageData unknown head type: ".concat(t.type))}},parsePPT:function(e){var t=new DataView(e.buffer),n=(t.getUint32(0),t.getUint32(4),t.getFloat64(8),t.getFloat64(16),t.getUint32(24),t.getUint16(28),t.getUint32(30));n=4294967295===n?0:n;for(var r=e.buffer.slice(34,n+34),i=n+34,o=(t.getUint8(i),t.getUint8(i+1),t.getFloat64(i+2),t.getUint16(i+10),t.getUint8(i+12),t.getUint8(i+13),t.getUint32(i+14)),a=t.buffer.slice(i+18),c=[],s=0;s<o;s++){var l=new DataView(a),u={},d=0;u.id=l.getUint16(d),u.left=l.getFloat64(d+=2),u.top=l.getFloat64(d+=8),u.width=l.getFloat64(d+=8),u.height=l.getFloat64(d+=8);var f=l.getUint32(d+=8);d+=4,u.size=4294967295===f?0:f;var h=u.size+d;u.buffer=l.buffer.slice(d,h),c.push(u),a=l.buffer.slice(h)}return{bgData:r,imgData:c}}},At=function(){return bt((function e(){Dt(this,e),this.initData(),this.initIceCallback(),this.initSDKInterface(),this.setCurrentPage=a.Z.debounce(this.setCurrentPageB,200)}),[{key:"initData",value:function(){console.crlog("[BoardV1] WhiteBoardModule initData..."),this.lastTabValue=0,this.lastElemValue=0,this.wbDescibes=[],this.boardUIList=[],this.iceNotifyParams={},this.imgBlobCacheList=[]}},{key:"initIceCallback",value:function(){this.ICECallback={notifySetCurrentPage:function(e,t,n,r,i){var o=this;void 0!==this.iceNotifyParams.notifySetCurrentPage&&this.iceNotifyParams.notifySetCurrentPage.boardID.termID==e.termID&&this.iceNotifyParams.notifySetCurrentPage.boardID.localID==e.localID&&this.iceNotifyParams.notifySetCurrentPage.pageNo==t&&this.iceNotifyParams.notifySetCurrentPage.animID==n&&this.iceNotifyParams.notifySetCurrentPage.animFrames==r&&this.iceNotifyParams.notifySetCurrentPage.operatorID==i||(console.crlog("[BoardV1] ICE Notify --\x3e notifySetCurrentPage, params:".concat(JSON.stringify({wID:e,pageNo:t,animID:n,animFrames:r,operatorID:i}))),this.iceNotifyParams.notifySetCurrentPage={},this.iceNotifyParams.notifySetCurrentPage.boardID=e,this.iceNotifyParams.notifySetCurrentPage.pageNo=t,this.iceNotifyParams.notifySetCurrentPage.animID=n,this.iceNotifyParams.notifySetCurrentPage.animFrames=r,this.iceNotifyParams.notifySetCurrentPage.operatorID=i,this.wbDescibes.forEach((function(n){if(n.wId=="".concat(e.termID,".").concat(e.localID)){if(n.xPos=o.v1AnimFramesToV2Pos(r).x,n.yPos=o.v1AnimFramesToV2Pos(r).y,n.curPage=t,i==Pt.userInfo.termId)return;o.boardUIList.forEach((function(e){e._wbDesc.wId==n.wId&&e._attr.followPage&&e._refreshPos(t)}))}})),console.crlog("[BoardV1] NotifyBoardCurPageNo.target(".concat(e.termID,".").concat(e.localID,",").concat(t,",").concat(n,",").concat(r,",").concat(a.Z.termIDtoUserID(i),")")),x.Z.NotifyBoardCurPageNo.target("".concat(e.termID,".").concat(e.localID),t,n,r,a.Z.termIDtoUserID(i)))},notifyCreate:function(e,t){var n=this;return Rt(St().mark((function r(){var i,o,c;return St().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:console.crlog("[BoardV1] ICE Notify --\x3e notifyCreate, params:".concat(JSON.stringify(e),",").concat(t)),i=n.V1WBDescToV2WBDesc(e),n.wbDescibes.push(i);try{o=new xt(i),c=a.Z.termIDtoUserID(t),x.Z.NotifyCreateBoard.target(o,c)}catch(e){console.error(e)}case 4:case"end":return r.stop()}}),r)})))()},notifyClose:function(e,t){var n="".concat(e.termID,".").concat(e.localID);console.crlog("[BoardV1] ICE Notify --\x3e notifyClose, params:".concat(n,",").concat(t));var r=this.wbDescibes.findIndex((function(e){return e.wId===n})),i=a.Z.termIDtoUserID(t);r>-1&&(this.wbDescibes.splice(r,1),x.Z.NotifyCloseBoard.target(n,i))},notifyAddElement:function(e,t,n,r){console.crlog("[BoardV1] ICE Notify --\x3e notifyAddElement, params:".concat(JSON.stringify(e),",").concat(t,",").concat(n,",").concat(r));var i="".concat(e.termID,".").concat(e.localID),o=this.wbDescibes.find((function(e){return e.wId==i}));if(o&&r!=Pt.userInfo.termId){var a=o.shapeList.find((function(e){return e.pageId==t}));if(a){var c=this.V1ElementToV2Shape(n);a.shapes.push(c);var s=this.boardUIList.find((function(e){return e._wbDesc.wId==i})),l=s._canvasList.find((function(e){return e.pageID==t}));l&&s._drawShape(l,c)}}},notifyAddElementEx:function(e,t,n,r){console.crlog("[BoardV1] ICE Notify --\x3e notifyAddElementEx, params: ".concat(JSON.stringify(e),",").concat(t,",").concat(n,",").concat(r));for(var i=0;i<n.length;i++)this.ICECallback.notifyAddElement(e,t,n[i],r)},notifyDelElement:function(e,t,n,r){var i=this;console.crlog("[BoardV1] ICE Notify --\x3e notifyDelElement, params:".concat(JSON.stringify(e),",").concat(t,",").concat(JSON.stringify(n),",").concat(r));var o="".concat(e.termID,".").concat(e.localID),a=this.wbDescibes.find((function(e){return e.wId==o}));if(a){var c=a.shapeList.find((function(e){return e.pageId==t}));if(c){for(var s=function(){var e=c.shapes.findIndex((function(e){return e.eID.ownerID==n[l].ownerID&&e.eID.ID==n[l].ID}));if(7===c.shapes[e].type){var t=i.imgBlobCacheList.findIndex((function(t){return t.fileName===c.shapes[e].attr.fileName}));-1!==t&&i.imgBlobCacheList.splice(t,1)}-1!==e&&c.shapes.splice(e,1)},l=0;l<n.length;l++)s();var u=this.boardUIList.find((function(e){return e._wbDesc.wId==o}));u&&u._drawAllShapes({pageID:t},"notifyDelShape")}}},notifySetContainerSize:function(e,t,n){console.crlog("[BoardV1] ICE Notify --\x3e notifySetContainerSize, params:".concat(e,",").concat(t,",").concat(n))},notifyImportPage:function(e,t,n){var r=this;return Rt(St().mark((function i(){var o;return St().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(console.crlog("[BoardV1] ICE Notify --\x3e notifyImportPage, params: ".concat(JSON.stringify(e),",").concat(JSON.stringify(t),",").concat(n)),o="".concat(e.termID,".").concat(e.localID),r.wbDescibes.find((function(e){return e.wId==o}))){i.next=5;break}return i.abrupt("return");case 5:return i.next=7,r.queryBoardPageDatas("".concat(e.termID,".").concat(e.localID),t.map((function(e){return e.pageNo})));case 7:case"end":return i.stop()}}),i)})))()},notifyChangeName:function(e,t,n){console.crlog("[BoardV1] ICE Notify --\x3e notifyChangeName, params: ".concat(JOSN.stringify(e),",").concat(t,",").concat(n))},notifyChangeScale:function(e,t,n){console.crlog("[BoardV1] ICE Notify --\x3e notifyChangeScale, params: ".concat(JSON.stringify(e),",").concat(t,",").concat(n));var r="".concat(e.termID,".").concat(e.localID),i=this.wbDescibes.find((function(e){return e.wId==r}));if(i){i.scale=this.v1ScaleTypeToScale(String(t));var o=this.boardUIList.find((function(t){return t._wbDesc.wId=="".concat(e.termID,".").concat(e.localID)}));o&&n!==Pt.userInfo.userId&&(o.resize("notifyChangeScale"),console.crlog("[BoardV1] NotifyChangeScale.target(".concat(e.termID,".").concat(e.localID,",").concat(this.v1ScaleTypeToScale(String(t)),",").concat(a.Z.termIDtoUserID(n),")")),x.Z.NotifyChangeScale.target("".concat(e.termID,".").concat(e.localID),this.v1ScaleTypeToScale(String(t)),a.Z.termIDtoUserID(n)))}},notifyChangeRotate:function(e,t,n){console.crlog("[BoardV1] ICE Notify --\x3e notifyChangeRotate, params: ".concat(JSON.stringify(e),",").concat(t,",").concat(n))},notifyShowThumPage:function(e,t,n){console.crlog("[BoardV1] ICE Notify --\x3e notifyShowThumPage, params: ".concat(JSON.stringify(e),",").concat(t,",").concat(n))},notifyMoveElement:function(e,t,n,r){console.crlog("[BoardV1] ICE Notify --\x3e notifyMoveElement, params: ".concat(JSON.stringify(e),",").concat(t,",").concat(JSON.stringify(n),",").concat(r));var i="".concat(e.termID,".").concat(e.localID),o=this.wbDescibes.find((function(e){return e.wId==i}));if(o){var a=o.shapeList.find((function(e){return e.pageId==t}));if(a){for(var c=0;c<n.length;c++){var s=a.shapes.find((function(e){return e.eID.ownerID==n[c].eID.ownerID&&e.eID.ID==n[c].eID.ID}));s&&(s.left=n[c].left,s.top=n[c].top)}var l=this.boardUIList.find((function(e){return e._wbDesc.wId==i}));l&&l._drawAllShapes({pageID:t},"notifyMoveElement")}}},notifyModifyElement:function(e,t,n,r){console.crlog("[BoardV1] ICE Notify --\x3e notifyModifyElement, params: ".concat(JSON.stringify(e),",").concat(t,",").concat(n,",").concat(r));var i="".concat(e.termID,".").concat(e.localID),o=this.wbDescibes.find((function(e){return e.wId==i}));if(o){var a=o.shapeList.find((function(e){return e.pageId==t}));if(a){var c=a.shapes.findIndex((function(e){return e.eID&&e.eID.ID==n.eID.ID&&e.eID.ownerID==n.eID.ownerID}));if(c>-1){a.shapes[c]=this.V1ElementToV2Shape(n);var s=this.boardUIList.find((function(e){return e._wbDesc.wId==i}));s&&s._drawAllShapes({pageID:t},"notifyModifyElement")}}}},notifySetElementZPos:function(e,t,n,r){console.crlog("[BoardV1] ICE Notify --\x3e notifySetElementZPos, params: ".concat(JSON.stringify(e),",").concat(t,",").concat(n,",").concat(r))},notifySetIndicator:function(e,t,n){console.crlog("[BoardV1] ICE Notify --\x3e notifySetIndicator, params: ".concat(JSON.stringify(e),",").concat(t,",").concat(n))},notifySetHotspot:function(e,t,n,r,i){},notifySetMarkTerms:function(e,t,n){console.crlog("[BoardV1] ICE Notify --\x3e notifySetMarkTerms, params: ".concat(JSON.stringify(e),",").concat(t,",").concat(n))}}}},{key:"initSDKInterface",value:function(){var t=this;x.Z.CreatBoard=function(n){return new Promise((function(r,i){console.crlog("[BoardV1] CreatBoard(".concat(JSON.stringify(n),")"));var o={wID:{termID:Pt.userInfo.termId,localID:t.lastTabValue++},wType:e.Conference.WBBOARD_TYPE.valueOf(n.wType)||e.Conference.WBBOARD_TYPE.WB_WHITE,docType:e.Conference.WBBOARD_DOCTYPE.valueOf(n.docType)||e.Conference.WBBOARD_DOCTYPE.WD_IMG,name:n.name,docName:n.name,width:n.width,height:n.height,scaleType:e.Conference.WB_SCALE_TYPE.valueOf(n.scaleType)||e.Conference.WB_SCALE_TYPE.WB_SCALE_100,rotation:e.Conference.WB_ROTATE_TYPE.valueOf(n.rotation)||e.Conference.WB_ROTATE_TYPE.WB_ROTATE_0,pageCount:n.pageCount||1,curPage:0,animID:0,animFrames:0,showThum:!1,bAll:n.bAll||!0,allowTerms:null};Ut.create(o).then((function(e){return console.crlog("[BoardV1] _whiteBoardCtrl.create success! ".concat(e[0])),__Rtc.CRRTCSync.saveLastTabValue(t.lastTabValue),r({errCode:0,boardID:"".concat(o.wID.termID,".").concat(o.wID.localID)})}),(function(e){return console.crlog("[BoardV1][Error] _whiteBoardCtrl.create fail! ".concat(e)),i({errCode:1,errDesc:e})}))}))},x.Z.CloseBoard=function(e){return new Promise((function(n,r){console.crlog("[BoardV1] CloseBoard(".concat(e,")"));var i=t.wIdString2wIDObject(e);Ut.close(i).then((function(e){console.crlog("[BoardV1] _whiteBoardCtrl.close success! ".concat(e[0])),n({errCode:0})}),(function(e){console.crlog("[BoardV1][Error] _whiteBoardCtrl.close fail! ".concat(e)),r({errCode:1,errDesc:e})}))}))},x.Z.GetBoardList=function(){return console.crlog("[BoardV1] GetBoardList()"),t.wbDescibes.map((function(e){return new xt(e)}))},x.Z.ChangeScale=this.changeScale.bind(this),x.Z.SetBoardCurPageNo=function(e,n){console.crlog("[BoardV1] SetBoardCurPageNo(".concat(e,",").concat(n,")")),t.boardUIList.forEach((function(t){t._wbDesc.wId==e&&t.setCurPage(n)}))},x.Z.InitBoardPageDat=this.initBoardPageDat.bind(this),x.Z.SetMarkTerms=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return new Promise((function(i,o){console.crlog("[BoardV1] SetMarkTerms(".concat(e,",").concat(n,",").concat(JSON.stringify(r),")"));var c=t.wIdString2wIDObject(e),s=r.map((function(e){return a.Z.userIDtoTermID(e)}));Ut.setMarkTerms(c,n,s).then((function(e){return i({errCode:0})}),(function(e){return console.crlog("[BoardV1][Error] _whiteBoardCtrl.setMarkTerms fail! ".concat(e)),o({errCode:1,errDesc:e})}))}))}}},{key:"initBoards",value:(t=Rt(St().mark((function e(){var t,n=this;return St().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.crlog("[BoardV1] Init boards.."),t=[],e.next=4,Promise.all(this.wbDescibes.map(function(){var e=Rt(St().mark((function e(r){return St().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Rt(St().mark((function e(i,o){return St().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.queryBoardPageDatas(r.wId,Array.from({length:r.pageCount},(function(e,t){return t})));case 3:return t.push(new xt(r)),e.abrupt("return",i());case 7:return e.prev=7,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",o());case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 4:console.crlog("[BoardV1] NotifyInitBoards.target(".concat(JSON.stringify(t),")")),x.Z.NotifyInitBoards.target(t);case 6:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"queryBoardPageDatas",value:function(e,t){var n=this;return new Promise((function(r,i){console.crlog("[BoardV1] Query board page datas, wId:".concat(JSON.stringify(e),", pageIDs:").concat(JSON.stringify(t))),t.length>0&&Ut.queryElementByIDs(n.wIdString2wIDObject(e),t).then((function(t){return t[1].values().forEach((function(t){var r=n.wbDescibes.find((function(t){return t.wId==e}));if(r){var i=r.shapeList.find((function(e){return e.pageId==t.pageNo}));i?(i.shapes=t.elementList.map((function(e){return n.V1ElementToV2Shape(e)})),i.imgResourceID=t.imgResourceID,i.imgType=t.imgType):r.shapeList.push({pageId:t.pageNo,shapes:t.elementList.map((function(e){return n.V1ElementToV2Shape(e)})),imgResourceID:t.imgResourceID,imgType:t.imgType}),t.imgResourceID&&Ct.downloadFileData(t.imgResourceID).then((function(r){n.wbBGImageAlready(e,t.pageNo,Mt.parseImageData(r))})).catch((function(e){console.crlog("[NetDisk] ".concat(t.imgResourceID," data download failed! ").concat(e))}))}})),r()})).catch((function(e){return console.error(e),i()}))}))}},{key:"wIdString2wIDObject",value:function(e){var t=0,n=0;try{t=e.split(".")[0],n=e.split(".")[1]}catch(e){throw e}return{termID:t,localID:n}}},{key:"V1WBDescToV2WBDesc",value:function(e){var t=this,n={};return n.wId="".concat(e.wID.termID,".").concat(e.wID.localID),n.owner=a.Z.termIDtoUserID(e.wID.termID),n.wType=e.wType._value,n.imgType=e.docType._value,n.width=e.width,n.height=e.height,n.pageCount=e.pageCount,n.xPos=this.v1AnimFramesToV2Pos(e.animFrames).x,n.yPos=this.v1AnimFramesToV2Pos(e.animFrames).y,n.curPage=e.curPage,n.scale=this.v1ScaleTypeToScale(String(e.scaleType)),n.extInfo=JSON.stringify({name:e.name}),n.extProperty={show_multi_page:0},n.shapeList=[],e.pageDatas=e.pageDatas||[],e.pageDatas.forEach((function(e){var r={pageId:e.pageNo,shapes:[]};e.elementList.forEach((function(e){var n=t.V1ElementToV2Shape(e);n&&r.shapes.push(n)})),n.shapeList.push(r)})),n.v1WBDesc=e,n}},{key:"v1ScaleTypeToScale",value:function(e){switch(e){case"WB_SCALE_50":return 50;case"WB_SCALE_100":default:return 100;case"WB_SCALE_150":return 150;case"WB_SCALE_200":return 200;case"WB_SCALE_SADP":return 1;case"WB_SCALE_WIDTH":return 0}}},{key:"v2ScaleToV1ScaleType",value:function(e){switch(e){case 0:return"WB_SCALE_WIDTH";case 1:return"WB_SCALE_SADP";case 50:return"WB_SCALE_50";case 100:default:return"WB_SCALE_100";case 150:return"WB_SCALE_150";case 200:return"WB_SCALE_200"}}},{key:"v1AnimFramesToV2Pos",value:function(e){var t=new Uint32Array(1);t[0]=e;var n=new Uint16Array(t.buffer);return{x:n[0]/65535,y:n[1]/65535}}},{key:"v2PosToV1AnimFrames",value:function(e,t){var n=new Int16Array(2);return n[0]=65535*e,n[1]=65535*t,new Int32Array(n.buffer)}},{key:"V1ElementToV2Shape",value:function(e){var t=this,n=Mt.Uint8ArrayToData(e.data,e.type);if(!n)return!1;var r={left:e.left,top:e.top,order:e.orderId,owner:a.Z.termIDtoUserID(e.eID.ownerID)||"",eID:e.eID,sId:Tt.generateUUID(),type:this.V1ShapeTypeToV2ShapeType(e.type),dat:n.content.map((function(e){return{x:e.w,y:e.h}}))};if(16===e.type){r.attr={left:n.left,top:n.top,width:n.width,height:n.height,fileName:n.fileName,fileId:n.fileId,imgBlob:""};var i=this.imgBlobCacheList.find((function(e){return e.fileName===n.fileName}));i?(r.attr.imgBlob=i.blob,this.imageElementAreadyDownload(r)):Ct.downloadFileData(n.fileName).then((function(e){console.crlog("[BoardV1] ".concat(n.fileName," data download success. ").concat(e.length));var i=new Blob([e],{type:"image/".concat(a.Z.getFileType(n.fileName))});r.attr.imgBlob=i,t.imgBlobCacheList.push({fileName:n.fileName,blob:i}),t.imageElementAreadyDownload(r)}))}else r.attr={penWidth:n.width,penColor:a.Z.colorArrToRGBAStr(n.color),penStyle:n.style},3===n.style&&(r.attr.penStyle=2);switch(e.type){case 6:case 7:case 8:r.attr.lineStartPosX=n.content[0].startX,r.attr.lineStartPosY=n.content[0].startY,r.attr.lineEndPosX=n.content[0].endX,r.attr.lineEndPosY=n.content[0].endY;break;case 9:r.attr.fontFamily=n.fontName,r.attr.fontSize=n.fontSize,r.attr.fontStyle=0===n.fontStyle?"normal":"italic",r.attr.fontWeight=0===n.fontWeight?"normal":"bold",r.attr.fontUnderLine=0!==n.fontDecoration,r.attr.txt=n.textContent;case 10:case 11:case 12:case 13:case 14:case 15:r.attr.rectX=n.left,r.attr.rectY=n.top,r.attr.rectRadius=0,r.attr.rectHeight=n.pelHeight,r.attr.rectWidth=n.pelWidth}return"MeetSDK"==CRVideo.SDKKey&&(5===e.type&&(n.color[3]=.4,r.attr.penColor=a.Z.colorArrToRGBAStr(n.color)),10!==e.type&&12!==e.type&&14!==e.type||(r.attr.fill=!0,n.color[3]=.78,r.attr.fillColor=a.Z.colorArrToRGBAStr(n.color)),12!==e.type&&13!==e.type||(r.attr.rectRadius=15),9===e.type&&(r.attr.txtBkColor=a.Z.colorArrToRGBAStr([255,255,225,1]))),r}},{key:"V2ShapeToV1Element",value:function(e){var t={};t.eID=e.eID,t.noused=0,t.left=e.left,t.top=e.top,t.orderId=e.order,t.type=this.V2ShapeTypeToV1ShapeType(e);var n=a.Z.colorRGBAToArr(e.attr.penColor);if(6!=e.type){var r=new Uint8Array(new ArrayBuffer(13));if(r[0]=1,r[1]=r[2]=Math.round(255*n[3]),r[3]=r[4]=n[0],r[5]=r[6]=n[1],r[7]=r[8]=n[2],r[9]=r[10]=0,r[11]=e.attr.penWidth,r[12]=2==e.attr.penStyle?3:e.attr.penStyle,1===e.type){var i=e.dat,o=new Uint8Array(new ArrayBuffer(4*i.length+2));o[0]=parseInt(i.length/256),o[1]=i.length%256;for(var c=0,s=2;c<i.length;c++)o[s]=i[c].x>>8,o[s+1]=255&i[c].x,o[s+2]=i[c].y>>8,o[s+3]=255&i[c].y,s+=4;t.data=new Uint8Array([].concat(mt(r),mt(o)))}else if(2===e.type||5===e.type||11===e.type){var l=new Uint8Array(new ArrayBuffer(8));for(c=0;c<4;c++)l[c]=0;l[4]=e.attr.lineEndPosX>>8,l[5]=255&e.attr.lineEndPosX,l[6]=e.attr.lineEndPosY>>8,l[7]=255&e.attr.lineEndPosY,t.data=new Uint8Array([].concat(mt(r),mt(l)))}else if(3===e.type||4===e.type){var u=new Uint8Array(new ArrayBuffer(8));u[0]=e.attr.rectX>>8,u[1]=255&e.attr.rectX,u[2]=e.attr.rectY>>8,u[3]=255&e.attr.rectY,u[4]=e.attr.rectWidth>>8,u[5]=255&e.attr.rectWidth,u[6]=e.attr.rectHeight>>8,u[7]=255&e.attr.rectHeight,t.data=new Uint8Array([].concat(mt(r),mt(u)))}}else if(6===e.type){var d=a.Z.charToUint8Arr(e.attr.txt),f=a.Z.charToUint8Arr(e.attr.fontFamily),h=new Uint8Array(new ArrayBuffer(25+d.length+f.length)),p=0;h[p]=1,h[++p]=h[++p]=Math.round(255*n[3]),h[++p]=h[++p]=n[0],h[++p]=h[++p]=n[1],h[++p]=h[++p]=n[2],h[++p]=h[++p]=0,h[++p]=h[++p]=255,h[++p]=d.length>>8,h[++p]=d.length>>16,h[++p]=d.length>>24,h[++p]=255&d.length;for(var _=1;_<=d.length;_++)h[p+_]=d[_-1];p+=d.length,h[++p]=f.length>>8,h[++p]=f.length>>16,h[++p]=f.length>>24,h[++p]=255&f.length;for(var g=1;g<=f.length;g++)h[p+g]=f[g-1];p+=f.length,h[++p]=e.attr.fontSize,h[++p]="bold"===e.attr.fontWeight?1:0,h[++p]="italic"===e.attr.fontStyle?1:0,h[++p]=e.attr.fontUnderLine?1:0,t.data=h}return t}},{key:"V1ShapeTypeToV2ShapeType",value:function(e){var t=0;switch(e){case 4:t=1;break;case 5:t=13;break;case 6:t=2;break;case 7:t=5;break;case 8:t=11;break;case 9:t=6;break;case 10:case 11:case 12:case 13:t=3;break;case 14:case 15:t=4;break;case 16:t=7}return t}},{key:"V2ShapeTypeToV1ShapeType",value:function(e){var t=0;switch(e.type){case 0:t=0;break;case 1:t=4;break;case 2:t=6;break;case 3:t=e.attr.fill?e.attr.rectRadius>0?12:10:e.attr.rectRadius>0?13:11;break;case 4:t=e.attr.fill?14:15;break;case 5:t=7;break;case 6:t=9;break;case 11:t=8;break;case 13:t=5}return t}},{key:"V1LineTypeToV2LineStyle",value:function(e){switch(e){case 1:default:return 1;case 3:return 2}}},{key:"imageElementAreadyDownload",value:function(e){var t=0,n=this.boardUIList.find((function(n){return n._wbDesc.shapeList.find((function(n){return n.shapes.find((function(r){return t=n.pageId,r.sId==e.sId}))}))}));n&&n._drawAllShapesB({pageID:t},"drawImageElement")}},{key:"wbBGImageAlready",value:function(e,t,n){var r=this;console.crlog("[BoardV1] wbBGImageAlready，wId:".concat(e,"， pageNo:").concat(t,"}"));var i=this.wbDescibes.find((function(t){return t.wId==e}));if(i){var o=i.shapeList.find((function(e){return e.pageId==t}));if(o)if("image"===n.type){var a=new Image;a.src=URL.createObjectURL(new Blob([n.bgData],{type:"image/png"})),a.onload=function(){o.bgImage=a;var n=r.boardUIList.find((function(t){return t._wbDesc.wId==e}));n&&n._drawAllShapesB({pageID:t},"drawBGImage")}}else if("ppt"===n.type){var c=new Image,s=0;c.src=URL.createObjectURL(new Blob([n.bgData],{type:"image/png"})),c.onload=function(){o.bgImage=c;var i=r.boardUIList.find((function(t){return t._wbDesc.wId==e}));i&&i._drawAllShapesB({pageID:t},"drawBGImage"),n.imgData.map((function(i){var a=new Image;a.src=URL.createObjectURL(new Blob([i.buffer],{type:"image/png"})),a.onload=function(){if(i.Image=a,++s===n.imgData.length){o.bgImage=c,o.animImgDatas=n.imgData;var l=r.boardUIList.find((function(t){return t._wbDesc.wId==e}));l&&l._drawAllShapesB({pageID:t},"drawAnimImages")}}}))}}}}},{key:"moveElement",value:function(e,t,n){var r=this;return console.crlog("[BoardV1] moveElement, wId:".concat(e,",pageNo:").concat(t,", ").concat(JSON.stringify(n))),new Promise((function(i,o){Ut.moveElement(r.wIdString2wIDObject(e),t,n).then((function(){return i()})).catch((function(e){return console.crlog("[BoardV1][Error] _whiteBoardCtrl.moveElement fail! ".concat(e)),o(e)}))}))}},{key:"delElement",value:function(e,t,n){var r=this;return console.crlog("[BoardV1] delElement, wId:".concat(e,",pageNo:").concat(t,", ").concat(JSON.stringify(n))),new Promise((function(i,o){Ut.delElement(r.wIdString2wIDObject(e),t,n).then((function(){return i()})).catch((function(e){return console.crlog("[BoardV1][Error] _whiteBoardCtrl.delElement fail! ".concat(e)),o(e)}))}))}},{key:"addElement",value:function(e,t,n){var r=this;return console.crlog("[BoardV1] addElement, wId:".concat(JSON.stringify(e),",pageNo:").concat(t,",element:").concat(JSON.stringify(n))),new Promise((function(i,o){Ut.addElement(r.wIdString2wIDObject(e),t,r.V2ShapeToV1Element(n)).then((function(){return i()})).catch((function(e){return console.crlog("[BoardV1] _whiteBoardCtrl.addElement fail! ".concat(e)),o(e)}))}))}},{key:"modifyElement",value:function(e,t,n){var r=this;return console.crlog("[BoardV1] modifyElement, wId:".concat(JSON.stringify(e),",pageNo:").concat(t,",element:").concat(JSON.stringify(n))),new Promise((function(i,o){Ut.modifyElement(r.wIdString2wIDObject(e),t,r.V2ShapeToV1Element(n)).then((function(){return i()})).catch((function(e){return console.crlog("[BoardV1] _whiteBoardCtrl.modifyElement fail! ".concat(e)),o(e)}))}))}},{key:"initBoardPageDat",value:function(e,t){var n=this;return console.crlog("[BoardV1] initBoardPageDat, wI:".concat(JSON.stringify(e),",pageDatas:").concat(JSON.stringify(t))),new Promise((function(r,i){Ut.importPage(n.wIdString2wIDObject(e),t).then((function(){return r()})).catch((function(e){return console.crlog("[BoardV1] _whiteBoardCtrl.initBoardPageDat fail! ".concat(e)),i(e)}))}))}},{key:"setCurrentPageB",value:function(e,t,n,r,i){var o=this;return new Promise((function(a,c){console.crlog("[BoardV1] setCurrentPageB(".concat(JSON.stringify({boardID:e,pageNo:t,animID:n,posX:r,posY:i}),")")),Ut.setCurrentPage(o.wIdString2wIDObject(e),t,n,o.v2PosToV1AnimFrames(r,i)).then((function(e){a({errCode:0})}),(function(e){console.crlog("[BoardV1][Error] _whiteBoardCtrl.setCurrentPage fail! ".concat(e)),c({errCode:1,errDesc:e})}))}))}},{key:"changeScale",value:function(t,n){var r=this;return new Promise((function(i,o){console.crlog("[BoardV1] changeScale(".concat(JSON.stringify({boardID:t,scale:r.v2ScaleToV1ScaleType(+n)}),")")),Ut.changeScale(r.wIdString2wIDObject(t),e.Conference.WB_SCALE_TYPE[r.v2ScaleToV1ScaleType(+n)]).then((function(e){i({errCode:0})}),(function(e){console.crlog("[BoardV1][Error] _whiteBoardCtrl.setCurrentPage fail! ".concat(e)),o({errCode:1,errDesc:e})}))}))}}]);var t}(),Ot=new At;window.__Rtc.CRBoardV1=Ot,x.Z.NotifyInitBoards=new J.Z("NotifyInitBoards"),x.Z.NotifyBoardCurPageNo=new J.Z("NotifyBoardCurPageNo"),x.Z.NotifyCreateBoard=new J.Z("NotifyCreateBoard"),x.Z.NotifyCloseBoard=new J.Z("NotifyCloseBoard"),x.Z.NotifyChangeScale=new J.Z("NotifyChangeScale"),x.Z.NotifyInitBoardPageDat=new J.Z("NotifyInitBoardPageDat"),x.Z.NotifyBoardBkImage=new J.Z("NotifyBoardBkImage"),x.Z.NotifyMouseHotSpot=new J.Z("NotifyMouseHotSpot");const kt=Ot;var Vt=window.Conference,Nt=window.Ice,Lt=window.__Rtc;Lt.WhiteBoardReceptor=Nt.Class(Vt.WhiteBoardCallback,{setProxy:function(e){this.proxy=e},notifySetCurrentPage:function(){for(var e,t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];Lt.CRRTCBoard&&(e=Lt.CRRTCBoard.ICECallback.notifySetCurrentPage).call.apply(e,[Lt.CRRTCBoard].concat(r)),(t=kt.ICECallback.notifySetCurrentPage).call.apply(t,[kt].concat(r))},notifyCreate:function(){for(var e,t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];Lt.CRRTCBoard&&(e=Lt.CRRTCBoard.ICECallback.notifyCreate).call.apply(e,[Lt.CRRTCBoard].concat(r)),(t=kt.ICECallback.notifyCreate).call.apply(t,[kt].concat(r))},notifyClose:function(){for(var e,t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];Lt.CRRTCBoard&&(e=Lt.CRRTCBoard.ICECallback.notifyClose).call.apply(e,[Lt.CRRTCBoard].concat(r)),(t=kt.ICECallback.notifyClose).call.apply(t,[kt].concat(r))},notifyAddElement:function(){for(var e,t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];Lt.CRRTCBoard&&(e=Lt.CRRTCBoard.ICECallback.notifyAddElement).call.apply(e,[Lt.CRRTCBoard].concat(r)),(t=kt.ICECallback.notifyAddElement).call.apply(t,[kt].concat(r))},notifyDelElement:function(){for(var e,t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];Lt.CRRTCBoard&&(e=Lt.CRRTCBoard.ICECallback.notifyDelElement).call.apply(e,[Lt.CRRTCBoard].concat(r)),(t=kt.ICECallback.notifyDelElement).call.apply(t,[kt].concat(r))},notifySetContainerSize:function(){for(var e,t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];Lt.CRRTCBoard&&(e=Lt.CRRTCBoard.ICECallback.notifySetContainerSize).call.apply(e,[Lt.CRRTCBoard].concat(r)),(t=kt.ICECallback.notifySetContainerSize).call.apply(t,[kt].concat(r))},notifyImportPage:function(){for(var e,t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];Lt.CRRTCBoard&&(e=Lt.CRRTCBoard.ICECallback.notifyImportPage).call.apply(e,[Lt.CRRTCBoard].concat(r)),(t=kt.ICECallback.notifyImportPage).call.apply(t,[kt].concat(r))},notifyChangeName:function(){for(var e,t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];Lt.CRRTCBoard&&(e=Lt.CRRTCBoard.ICECallback.notifyChangeName).call.apply(e,[Lt.CRRTCBoard].concat(r)),(t=kt.ICECallback.notifyChangeName).call.apply(t,[kt].concat(r))},notifyChangeScale:function(){for(var e,t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];Lt.CRRTCBoard&&(e=Lt.CRRTCBoard.ICECallback.notifyChangeScale).call.apply(e,[Lt.CRRTCBoard].concat(r)),(t=kt.ICECallback.notifyChangeScale).call.apply(t,[kt].concat(r))},notifyChangeRotate:function(){for(var e,t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];Lt.CRRTCBoard&&(e=Lt.CRRTCBoard.ICECallback.notifyChangeRotate).call.apply(e,[Lt.CRRTCBoard].concat(r)),(t=kt.ICECallback.notifyChangeRotate).call.apply(t,[kt].concat(r))},notifyShowThumPage:function(){for(var e,t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];Lt.CRRTCBoard&&(e=Lt.CRRTCBoard.ICECallback.notifyShowThumPage).call.apply(e,[Lt.CRRTCBoard].concat(r)),(t=kt.ICECallback.notifyShowThumPage).call.apply(t,[kt].concat(r))},notifyAddElementEx:function(){for(var e,t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];Lt.CRRTCBoard&&(e=Lt.CRRTCBoard.ICECallback.notifyAddElementEx).call.apply(e,[Lt.CRRTCBoard].concat(r)),(t=kt.ICECallback.notifyAddElementEx).call.apply(t,[kt].concat(r))},notifyMoveElement:function(){for(var e,t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];Lt.CRRTCBoard&&(e=Lt.CRRTCBoard.ICECallback.notifyMoveElement).call.apply(e,[Lt.CRRTCBoard].concat(r)),(t=kt.ICECallback.notifyMoveElement).call.apply(t,[kt].concat(r))},notifyModifyElement:function(){for(var e,t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];Lt.CRRTCBoard&&(e=Lt.CRRTCBoard.ICECallback.notifyModifyElement).call.apply(e,[Lt.CRRTCBoard].concat(r)),(t=kt.ICECallback.notifyModifyElement).call.apply(t,[kt].concat(r))},notifySetElementZPos:function(){for(var e,t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];Lt.CRRTCBoard&&(e=Lt.CRRTCBoard.ICECallback.notifySetElementZPos).call.apply(e,[Lt.CRRTCBoard].concat(r)),(t=kt.ICECallback.notifySetElementZPos).call.apply(t,[kt].concat(r))},notifySetIndicator:function(){for(var e,t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];Lt.CRRTCBoard&&(e=Lt.CRRTCBoard.ICECallback.notifySetIndicator).call.apply(e,[Lt.CRRTCBoard].concat(r)),(t=kt.ICECallback.notifySetIndicator).call.apply(t,[kt].concat(r))},notifySetHotspot:function(){for(var e,t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];Lt.CRRTCBoard&&(e=Lt.CRRTCBoard.ICECallback.notifySetHotspot).call.apply(e,[Lt.CRRTCBoard].concat(r)),(t=kt.ICECallback.notifySetHotspot).call.apply(t,[kt].concat(r))},notifySetMarkTerms:function(){for(var e,t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];Lt.CRRTCBoard&&(e=Lt.CRRTCBoard.ICECallback.notifySetMarkTerms).call.apply(e,[Lt.CRRTCBoard].concat(r)),(t=kt.ICECallback.notifySetMarkTerms).call.apply(t,[kt].concat(r))}});const Ut={setContainerSize:function(e,t){},create:function(e){return new Promise((function(t,n){var r=new Vt.TabID(e.wID.termID,e.wID.localID),i=new Vt.WhiteBoardDescribe(r,e.wType,e.docType,e.name,e.docName,e.width,e.height,e.scaleType,e.rotation,e.pageCount,e.curPage,e.animID,e.animFrames,e.showThum,e.bAll,e.allowTerms);(0,M.V)("_whiteBoardCtrl","create",i).then((function(e){return t(e)}),(function(e){return n(e)}))}))},importPage:function(e,t){return new Promise((function(n,r){e=new Vt.TabID(e.termID,e.localID);for(var i=[],o=0;o<t.length;o++){var a=t[o].pageNo,c=t[o].imgID,s=c?Vt.WB_BAKIMG_TYPE.WB_BAKIMG_JPG:Vt.WB_BAKIMG_TYPE.WB_BAKIMG_NULL,l=t[o].elementList||[];i[o]=new Vt.PageData(a,s,c,l)}(0,M.V)("_whiteBoardCtrl","importPage",e,i).then((function(e){return n(e)}),(function(e){return r(e)}))}))},close:function(e){return new Promise((function(t,n){var r=new Vt.TabID(e.termID,e.localID);(0,M.V)("_whiteBoardCtrl","close",r).then((function(e){return t(e)}),(function(e){return n(e)}))}))},changeName:function(e,t){},changeScale:function(e,t){return new Promise((function(n,r){e=new Vt.TabID(e.termID,e.localID),(0,M.V)("_whiteBoardCtrl","changeScale",e,t).then((function(e){return n(e)}),(function(e){return r(e)}))}))},changeRatote:function(e,t){new Vt.WB_ROTATE_TYPE(t)},setCurrentPage:function(e,t,n,r){return new Promise((function(i,o){e=new Vt.TabID(e.termID,e.localID),(0,M.V)("_whiteBoardCtrl","setCurrentPage",e,t,n,r).then((function(e){return i(e)}),(function(e){return o(e)}))}))},showThumPage:function(e,t){},addElement:function(e,t,n){return new Promise((function(r,i){e=new Vt.TabID(e.termID,e.localID);var o=new Vt.ElementID(n.eID.ownerID,n.eID.ID),a=new Vt.ElementData(o,n.orderId,n.left,n.top,n.type,n.noused,n.data);(0,M.V)("_whiteBoardCtrl","addElement",e,t,a).then((function(e){return r(e)}),(function(e){return i(e)}))}))},addElementEx:function(e,t,n){return new Promise((function(r,i){for(var o=[],a=0;a<n.length;a++){var c=new Vt.ElementID(n[a].eID.ownerID,n[a].eID.ID);o.push(new Vt.ElementData(c,n[a].orderId,n[a].left,n[a].top,n[a].type,n[a].noused,n[a].data))}(0,M.V)("_whiteBoardCtrl","addElementEx",e,t,o).then((function(e){return r(e)}),(function(e){return i(e)}))}))},moveElement:function(e,t,n){return new Promise((function(r,i){e=new Vt.TabID(e.termID,e.localID);for(var o=0;o<n.length;o++){var a=new Vt.ElementID(n[o].eID.ownerID,n[o].eID.ID),c=new Vt.ElementPos(a,n[o].left,n[o].top);n[o]=c}(0,M.V)("_whiteBoardCtrl","moveElement",e,t,n).then((function(e){return r(e)}),(function(e){return i(e)}))}))},modifyElement:function(e,t,n){return new Promise((function(r,i){e=new Vt.TabID(e.termID,e.localID);var o=new Vt.ElementID(n.eID.ownerID,n.eID.ID),a=new Vt.ElementData(o,n.orderId,n.left,n.top,n.type,n.noused,n.data);(0,M.V)("_whiteBoardCtrl","modifyElement",e,t,a).then((function(e){return r(e)}),(function(e){return i(e)}))}))},delElement:function(e,t,n){return new Promise((function(r,i){e=new Vt.TabID(e.termID,e.localID);for(var o=[],a=0;a<n.length;a++)o.push(new Vt.ElementID(n[a].ownerID,n[a].ID));(0,M.V)("_whiteBoardCtrl","delElement",e,t,o).then((function(e){return r(e)}),(function(e){return i(e)}))}))},setElementZPos:function(e,t,n){new Vt.WB_ELEMENT_ZPOS(n)},setIndicator:function(e,t){new Vt.IndicatorData(t)},setHotspot:function(e,t,n,r){},queryIndicator:function(e){},queryAllBoardList:function(){return new Promise((function(e,t){(0,M.V)("_whiteBoardCtrl","queryAllBoardList").then((function(t){return e(t)})).catch((function(e){return t(e)}))}))},queryElementByIDs:function(e,t){return new Promise((function(n,r){var i=new Vt.TabID(e.termID,e.localID);(0,M.V)("_whiteBoardCtrl","queryElementByIDs",i,t).then((function(e){return n(e)})).catch((function(e){return r(e)}))}))},queryPageElementByIDs:function(e,t,n){return new Promise((function(r,i){for(var o=[],a=0;a<n.length;a++)o.push(new Vt.ElementID(n[a]));var c=new Vt.TabID(e.termID,e.localID);(0,M.V)("_whiteBoardCtrl","queryPageElementByIDs",c,t,o).then((function(e){return r(e)})).catch((function(e){return i(e)}))}))},setMarkTerms:function(e,t,n){return new Promise((function(r,i){var o=new Vt.TabID(e.termID,e.localID);(0,M.V)("_whiteBoardCtrl","setMarkTerms",o,t,n).then((function(e){return r(e)})).catch((function(e){return i(e)}))}))}};function jt(e){return jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jt(e)}function Bt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ht(r.key),r)}}function Ft(e,t,n){return t&&Bt(e.prototype,t),n&&Bt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ht(e){var t=function(e,t){if("object"!=jt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=jt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==jt(t)?t:t+""}function qt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Kt=window.CRVideo,Wt=window.Ice;function Gt(e){var t=0,n=0;try{t=e.split(".")[0],n=e.split(".")[1]}catch(e){throw e}return{termID:t,localID:n}}var zt=Ft((function e(t){qt(this,e),this.boardID="".concat(t.wID.termID,".").concat(t.wID.localID),this.title=t.name,this.width=t.width,this.height=t.height,this.pageCount=t.pageCount,this.curPage=t.curPage,this.pagePos1=t.animID,this.pagePos2=t.animFrames})),Jt=function(){return Ft((function e(){qt(this,e),this.initData(),this.initIceCallback(),this.initSDKInterface()}),[{key:"initData",value:function(){!Kt.boardV1&&console.crlog("[Board] WhiteBoardModule initData..."),this.lastTabValue=100,this.lastElemValue=100,this.wbDescibes=[],this.boardUIList=[],this.iceNotifyParams={},this.myLastWID={}}},{key:"initIceCallback",value:function(){this.ICECallback={notifySetCurrentPage:function(e,t,n,r,i){if(void 0===this.iceNotifyParams.notifySetCurrentPage||this.iceNotifyParams.notifySetCurrentPage.boardID.termID!=e.termID||this.iceNotifyParams.notifySetCurrentPage.boardID.localID!=e.localID||this.iceNotifyParams.notifySetCurrentPage.pageNo!=t||this.iceNotifyParams.notifySetCurrentPage.animID!=n||this.iceNotifyParams.notifySetCurrentPage.animFrames!=r||this.iceNotifyParams.notifySetCurrentPage.operatorID!=i){this.iceNotifyParams.notifySetCurrentPage={},this.iceNotifyParams.notifySetCurrentPage.boardID=e,this.iceNotifyParams.notifySetCurrentPage.pageNo=t,this.iceNotifyParams.notifySetCurrentPage.animID=n,this.iceNotifyParams.notifySetCurrentPage.animFrames=r,this.iceNotifyParams.notifySetCurrentPage.operatorID=i,!Kt.boardV1&&console.crlog("[Board] ICE Notify --\x3e notifySetCurrentPage, params:".concat(JSON.stringify({wID:e,pageNo:t,animID:n,animFrames:r,operatorID:i})));var o=Kt.findMemberInfo({want:"userId",use:"termId",value:i})||"";this.wbDescibes.forEach((function(n){n.wID.termID==e.termID&&n.wID.localID==e.localID&&(n.curPage=t)})),!Kt.boardV1&&console.crlog("[Board] CRVideo_NotifyBoardCurPageNo.target(".concat(e.termID,".").concat(e.localID,",").concat(t,",").concat(n,",").concat(r,",").concat(o,")")),window.CRVideo_NotifyBoardCurPageNo.target("".concat(e.termID,".").concat(e.localID),t,n,r,o)}},notifyCreate:function(e,t){!Kt.boardV1&&console.crlog("[Board] ICE Notify --\x3e notifyCreate, params:".concat(JSON.stringify(e),",").concat(t)),this.wbDescibes.push(e),this.queryBoardPageDatas(e);var n=new zt(e),r=Kt.findMemberInfo({want:"userId",use:"termId",value:t})||"";!Kt.boardV1&&console.crlog("[Board] CRVideo_NotifyCreateBoard.target(".concat(JSON.stringify(n),",").concat(r,")")),CRVideo_NotifyCreateBoard.target(n,r)},notifyClose:function(e,t){!Kt.boardV1&&console.crlog("[Board] ICE Notify --\x3e notifyClose, params:".concat(JSON.stringify(e),",").concat(t));var n=this.wbDescibes.findIndex((function(t){return t.wID.termID==e.termID&&t.wID.localID==e.localID})),r=Kt.findMemberInfo({want:"userId",use:"termId",value:t})||"";if(n>-1){this.wbDescibes.splice(n,1);var i="".concat(e.termID,".").concat(e.localID);!Kt.boardV1&&console.crlog("[Board] CRVideo_NotifyCloseBoard.target(".concat(i,",").concat(r,")")),CRVideo_NotifyCloseBoard.target(i,r)}},notifyAddElement:function(e,t,n,r){!Kt.boardV1&&console.crlog("[Board] ICE Notify --\x3e notifyAddElement, params:".concat(JSON.stringify(e),",").concat(t,",").concat(n,",").concat(r)),this.notifyAddElement(e,t,n,r)},notifyAddElementEx:function(e,t,n,r){!Kt.boardV1&&console.crlog("[Board] ICE Notify --\x3e notifyAddElementEx, params: ".concat(JSON.stringify(e),",").concat(t,",").concat(n,",").concat(r));for(var i=0;i<n.length;i++)this.notifyAddElement(e,pageNo,element,r)},notifyDelElement:function(e,t,n,r){!Kt.boardV1&&console.crlog("[Board] ICE Notify --\x3e notifyDelElement, params:".concat(JSON.stringify(e),",").concat(t,",").concat(JSON.stringify(n),",").concat(r)),this.notifyDelElement(e,t,n,r)},notifySetContainerSize:function(e,t,n){!Kt.boardV1&&console.crlog("[Board] ICE Notify --\x3e notifySetContainerSize, params:".concat(e,",").concat(t,",").concat(n))},notifyImportPage:function(e,t,n){!Kt.boardV1&&console.crlog("[Board] ICE Notify --\x3e notifyImportPage, params: ".concat(JSON.stringify(e),",").concat(JSON.stringify(t),",").concat(n))},notifyChangeName:function(e,t,n){!Kt.boardV1&&console.crlog("[Board] ICE Notify --\x3e notifyChangeName, params: ".concat(JOSN.stringify(e),",").concat(t,",").concat(n))},notifyChangeScale:function(e,t,n){!Kt.boardV1&&console.crlog("[Board] ICE Notify --\x3e notifyChangeScale, params: ".concat(JSON.stringify(e),",").concat(t,",").concat(n))},notifyChangeRotate:function(e,t,n){!Kt.boardV1&&console.crlog("[Board] ICE Notify --\x3e notifyChangeRotate, params: ".concat(JSON.stringify(e),",").concat(t,",").concat(n))},notifyShowThumPage:function(e,t,n){!Kt.boardV1&&console.crlog("[Board] ICE Notify --\x3e notifyShowThumPage, params: ".concat(JSON.stringify(e),",").concat(t,",").concat(n))},notifyMoveElement:function(e,t,n,r){!Kt.boardV1&&console.crlog("[Board] ICE Notify --\x3e notifyMoveElement, params: ".concat(JSON.stringify(e),",").concat(t,",").concat(n,",").concat(r))},notifyModifyElement:function(e,t,n,r){!Kt.boardV1&&console.crlog("[Board] ICE Notify --\x3e notifyModifyElement, params: ".concat(JSON.stringify(e),",").concat(t,",").concat(n,",").concat(r))},notifySetElementZPos:function(e,t,n,r){!Kt.boardV1&&console.crlog("[Board] ICE Notify --\x3e notifySetElementZPos, params: ".concat(JSON.stringify(e),",").concat(t,",").concat(n,",").concat(r))},notifySetIndicator:function(e,t,n){!Kt.boardV1&&console.crlog("[Board] ICE Notify --\x3e notifySetIndicator, params: ".concat(JSON.stringify(e),",").concat(t,",").concat(n))},notifySetHotspot:function(e,t,n,r,i){},notifySetMarkTerms:function(e,t,n){!Kt.boardV1&&console.crlog("[Board] ICE Notify --\x3e notifySetMarkTerms, params: ".concat(JSON.stringify(e),",").concat(t,",").concat(n))}}}},{key:"initSDKInterface",value:function(){var e=this;window.CRVideo_CreateBoardUIObj=function(t){try{!Kt.boardV1&&console.crlog("[Board] CRVideo_CreateBoardUIObj(".concat(JSON.stringify(t),")"))}catch(e){console.error(e)}var n=new Zt;return!Kt.boardV1&&console.crlog("[Board] CRVideo_CreateBoardUIObj, return BoardUI ID：".concat(n._id)),e.boardUIList.push(n),n},window.CRVideo_Creatboard=function(t,n,r,i){return new Promise((function(o,a){!Kt.boardV1&&console.crlog("[Board] CRVideo_Creatboard(".concat(t,",").concat(n,",").concat(r,",").concat(i,")"));var c={};c.name=t,c.width=n,c.height=r,c.pageCount=i,c.bAll=!0,c.wID={termID:Kt.userInfo.termId,localID:e.lastTabValue++},Ut.create(c).then((function(t){!Kt.boardV1&&console.crlog("[Board] _whiteBoardCtrl.Create success! ".concat(t[0])),__Rtc.CRRTCSync.saveLastTabValue(e.lastTabValue);for(var n=[],r=0;r<i;r++)n.push({pageNo:r,elementList:[]});e.initBoardPageDat(c.wID,n),o({errCode:0,boardID:"".concat(c.wID.termID,".").concat(c.wID.localID)})}),(function(e){!Kt.boardV1&&console.crlog("[Board][Error] _whiteBoardCtrl.Create fail! ".concat(e)),a({errCode:1,errDesc:e})}))}))},window.CRVideo_Closeboard=function(e){return new Promise((function(t,n){!Kt.boardV1&&console.crlog("[Board] CRVideo_Closeboard(".concat(e,")"));var r=Gt(e);Ut.close(r).then((function(e){!Kt.boardV1&&console.crlog("[Board] _whiteBoardCtrl.Close success! ".concat(e[0])),t({errCode:0})}),(function(e){!Kt.boardV1&&console.crlog("[Board][Error] _whiteBoardCtrl.Close fail! ".concat(e)),n({errCode:1,errDesc:e})}))}))},window.CRVideo_SetBoardCurPageNo=function(e,t,n,r){return new Promise((function(i,o){!Kt.boardV1&&console.crlog("[Board] CRVideo_SetBoardCurPageNo(".concat(JSON.stringify({boardID:e,pageNo:t,pagePos1:n,pagePos2:r}),")")),Ut.setCurrentPage(Gt(e),t,n,r).then((function(e){!Kt.boardV1&&console.crlog("[Board] _whiteBoardCtrl.SetCurrentPage success! ".concat(e[0])),i({errCode:0})}),(function(e){!Kt.boardV1&&console.crlog("[Board][Error] _whiteBoardCtrl.SetCurrentPage fail! ".concat(e)),o({errCode:1,errDesc:e})}))}))},window.CRVideo_GetBoardList=function(){return!Kt.boardV1&&console.crlog("[Board] CRVideo_GetBoardList()"),e.wbDescibes.map((function(e){return new zt(e)}))}}},{key:"Uint8ArrayToData",value:function(e){var t=[],n={},r=new Uint8Array(e.data.buffer),i=(r[0],{}),o=(r[9],r[11]),a=r[12],c=r[13]<<8|r[14];i.alpha=r[1],i.red=r[3],i.green=r[5],i.blue=r[7];for(var s=[],l=15;l<r.length;l+=2)s[l]=r[l],s[l+1]=r[l+1],r[l]>=240&&(s[l]=r[l]-256,s[l+1]=r[l+1]+256*(r[l]-256));for(l=15;l<s.length;l+=4)t.push({w:s[l]<<8|s[l+1],h:s[l+2]<<8|s[l+3]});return n.color=this.colorRGB2Hex("rgb("+i.red+","+i.green+","+i.blue+")"),n.width=o,n.style=a,n.size=c,n.data=t,n.eID=e.eID,n.orderId=e.orderId,n.type=e.type,n.left=e.left,n.top=e.top,n}},{key:"elementDataToBuffer",value:function(e){var t={},n=e.data,r=this.colorHexToRgba(e.color,1),i=new ArrayBuffer(15+4*n.length);t.eID=e.eID,t.noused=0,t.left=e.left,t.top=e.top,t.type=e.type,t.data=new Uint8Array(i),t.data[0]=1,t.data[1]=t.data[2]=255,t.data[3]=t.data[4]=r.red,t.data[5]=t.data[6]=r.green,t.data[7]=t.data[8]=r.blue,t.data[9]=t.data[10]=0,t.data[11]=e.width,t.data[12]=1,t.data[13]=parseInt(e.size/256),t.data[14]=e.size%256;for(var o=0,a=15;o<n.length;o++)t.data[a]=n[o].w>>8,t.data[a+1]=255&n[o].w,t.data[a+2]=n[o].h>>8,t.data[a+3]=255&n[o].h,a+=4;return t}},{key:"colorRGB2Hex",value:function(e){var t=e.split(",");return"#"+((1<<24)+(parseInt(t[0].split("(")[1])<<16)+(parseInt(t[1])<<8)+parseInt(t[2].split(")")[0])).toString(16).slice(1)}},{key:"colorHexToRgba",value:function(e,t){var n="rgba("+parseInt("0x"+e.slice(1,3))+","+parseInt("0x"+e.slice(3,5))+","+parseInt("0x"+e.slice(5,7))+","+t+")";return{red:parseInt("0x"+e.slice(1,3)),green:parseInt("0x"+e.slice(3,5)),blue:parseInt("0x"+e.slice(5,7)),rgba:n}}},{key:"termIdToNickname",value:function(e){var t,n="[object Array]"==Object.prototype.toString.call(e);if(n){t=[];for(var r=0;r<e.length;r++)"object"==jt(e[r])&&(t[r]=JSON.parse(JSON.stringify(e[r])));for(var i=0;i<t.length;i++)t[i].ownerID==Kt.userInfo.termId&&(t[i].ownerID=Kt.userInfo.userId)}else"number"==typeof e?(t=null,t=e==Kt.userInfo.termId?Kt.userInfo.userId:e):"object"!=jt(e)||n||(t={},(t=JSON.parse(JSON.stringify(e))).ownerID==Kt.userInfo.termId&&(t.ownerID=Kt.userInfo.userId));return t}},{key:"initBoards",value:function(){var e=this;!Kt.boardV1&&console.crlog("[Board] Init boards..");var t=[];this.wbDescibes.forEach((function(n){e.queryBoardPageDatas(n),t.push(new zt(n))})),!Kt.boardV1&&console.crlog("[Board] CRVideo_NotifyInitBoards.target(".concat(JSON.stringify(t),")")),CRVideo_NotifyInitBoards.target(t)}},{key:"queryAllWhiteBoardList",value:function(){var e=this;!Kt.boardV1&&console.crlog("[Board] Query all whiteBoard list.."),Ut.queryAllBoardList().then((function(t){!Kt.boardV1&&console.crlog("[Board] _whiteBoardCtrl.queryAllBoardList success! ".concat(t[0]));var n=t[1];e.wbDescibes=n,e.wbDescibes.forEach((function(t){e.queryBoardPageDatas(t)}))}),(function(e){!Kt.boardV1&&console.crlog("[Board][Error] _whiteBoardCtrl.queryAllBoardList fail! ".concat(e)),console.error(e)}))}},{key:"queryBoardPageDatas",value:function(e){!Kt.boardV1&&console.crlog("[Board] Query board page datas, wbID:".concat(JSON.stringify(e.wID)));for(var t=[],n=0;n<e.pageCount;n++)t.push(n);t.length>0&&Ut.queryElementByIDs(e.wID,t).then((function(t){var n=t[1].values();e.pageDatas=n,e.boardUI&&e.boardUI._drawAllPageData()}))}},{key:"notifyAddElement",value:function(e,t,n,r){this.wbDescibes.forEach((function(r){r.wID.termID==e.termID&&r.wID.localID==e.localID&&r.pageDatas.forEach((function(e){e.pageNo==t&&(e.elementList.push(n),r.boardUI&&r.boardUI._drawElement(n),r.boardUI&&r.boardUI._resizeCanvas())}))}))}},{key:"notifyDelElement",value:function(e,t,n,r){for(var i=this,o=function(){var r;i.wbDescibes.forEach((function(i){i.wID.termID==e.termID&&i.wID.localID==e.localID&&i.pageDatas.forEach((function(e){e.pageNo==t&&(-1!==(r=e.elementList.findIndex((function(e){return e.eID.ownerID==n[a].ownerID&&e.eID.ID==n[a].ID})))&&e.elementList.splice(r,1),i.boardUI&&i.boardUI._resizeCanvas())}))}))},a=0;a<n.length;a++)o()}},{key:"delElement",value:function(e,t,n){!Kt.boardV1&&console.crlog("[Board] DelElement, wID:".concat(JSON.stringify(e),",pageNo:").concat(t,",delEleIDs}")),Ut.delElement(e,t,n).then((function(e){}),(function(e){!Kt.boardV1&&console.crlog("[Board][Error] _whiteBoardCtrl.delElement fail! ".concat(e))}))}},{key:"addElement",value:function(e,t,n){this.myLastWID={wID:e,pageNo:t,element:n},Ut.addElement(e,t,n).then((function(e){}),(function(e){!Kt.boardV1&&console.crlog("[Board] _whiteBoardCtrl.AddElement fail! ".concat(e))}))}},{key:"initBoardPageDat",value:function(e,t){Ut.importPage(e,t).then((function(e){console.log(e)}),(function(e){console.log(e)}))}}])}(),Zt=function(){return Ft((function e(){qt(this,e),this._initData(),this._initDom(),this._activeDraw(),this._passiveDraw(),this._setCtx(),this._loadEvent()}),[{key:"_initData",value:function(){this._id=Wt.generateUUID(),this._wbDesc=null,this._pageID=0,this._bScaled=!1,this._showTitle=!0,this._ctx=null,this._canvasEle=null,this._bgImg=null,this._titleEle=null,this._handler=null,this._revocableEleArr=[],this._resumableEleArr=[],this.undoStatus=!1,this.redoStatus=!1,this.undoEnableChange=null,this.redoEnableChange=null,this._readOnly=!1,this._pelType={4:"Pencil",5:"NiteWriterPen",6:"Line",7:"ArrowLine",8:"ArrowsLine",9:"Text",10:"SolidRectangular",11:"HollowRectangular",12:"RoundedSolidRectangle",13:"RoundedHollowRectangle",14:"SolidEllipse",15:"HollowEllipse"},this._style={type:4,cursor:"default",lineType:1,lineWidth:2,strokeStyle:"#0000FF",fillColor:"#FC011A",fullOpacity:.5}}},{key:"_initDom",value:function(){var e=document.createElement("div");e.style.position="relative",e.style.width="100%",e.style.height="100%",e.style.overflow="auto",this._handler=e;var t=document.createElement("div");t.style.position="absolute",t.style.left=0,t.style.top=0,t.style.width="100%",t.style.lineHeight="normal",t.style.zIndex=2,this._titleEle=t,this._handler.appendChild(t);var n=document.createElement("canvas");n.style.position="absolute",n.style.left="50%",n.style.top="50%",n.style.transform="translateX(-50%) translateY(-50%)",n.style.height="0",n.style.width="0",n.style.backgroundColor="#fff",this._canvasEle=n,this._ctx=n.getContext("2d"),this._handler.appendChild(n)}},{key:"handler",value:function(){return console.crlog("[BoardUI] ID:".concat(this._id,", handler()")),this._handler}},{key:"setCurBoardPage",value:function(e,t){var n=this;console.crlog("[BoardUI] ID:".concat(this._id,", setCurBoard(").concat(e,",").concat(t,")"));var r={};try{r.termID=+e.split(".")[0],r.localID=+e.split(".")[1]}catch(e){console.crlog("[BoardUI][Error] ID:".concat(this._id,", setBoardPage fail! The boardID is not correct!")),console.error(e)}if(r!={}){var i=__Rtc.CRRTCBoard.wbDescibes.filter((function(e){return e.wID.termID==r.termID&&e.wID.localID==r.localID}));if(0!=i.length)this._wbDesc=i[0],i[0].boardUI=this,this._pageID=+t,this._titleEle.innerHTML=this._wbDesc.name,new ResizeObserver((function(e){n._revocableEleArr=[],n._resumableEleArr=[],n._resizeCanvas()})).observe(this._handler)}}},{key:"getCurBoardPage",value:function(){}},{key:"setReadOnly",value:function(e){this._readOnly=e}},{key:"isScaledContents",value:function(e){if(console.crlog("[BoardUI] ID:".concat(this._id,", isScaledContents(").concat(e,")")),null==e)return this._bScaled;this._bScaled=!!e,this._wbDesc&&this._resizeCanvas()}},{key:"setTitleStyle",value:function(e){for(var t in console.crlog("[BoardUI] ID:".concat(this._id,", setTitleStyle(").concat(JSON.stringify(e),")")),e)try{this._titleEle.style[t]=e[t]}catch(e){console.error(e)}}},{key:"setBoardStyle",value:function(e){for(var t in console.crlog("[BoardUI] ID:".concat(this._id,", setBoardStyle(").concat(JSON.stringify(e),")")),e)try{this._canvasEle.style[t]=e[t]}catch(e){console.error(e)}}},{key:"setPen",value:function(e){console.crlog("[BoardUI] ID:".concat(this._id,", setPen(").concat(JSON.stringify(e),")")),this._style.type=e.type||this._style.type,this._style.lineWidth=e.lineWidth||this._style.lineWidth,this._style.lineType=e.lineType||this._style.lineType,this._style.fillColor=e.fillColor||this._style.fillColor,this._style.strokeStyle=e.strokeStyle||this._style.strokeStyle,this._style.cursor=e.cursor||this._style.cursor,this._canvasEle.style.cursor=this._style.cursor}},{key:"undo",value:function(){console.crlog("[BoardUI] ID:".concat(this._id,", undo()"));var e=this._revocableEleArr.pop();e&&(this._resumableEleArr.push(e),this.removeElement([e.eID])),this._changeRedoAndUndoStatue()}},{key:"redo",value:function(){console.crlog("[BoardUI] ID:".concat(this._id,", redo()"));var e=this._resumableEleArr.pop();e&&(this._revocableEleArr.push(e),this.addElement(this._switchEleType(e))),this._changeRedoAndUndoStatue()}},{key:"clearSelf",value:function(){var e=this;console.crlog("[BoardUI] ID:".concat(this._id,", clearSelf()")),this._wbDesc.pageDatas.filter((function(t){return t.pageNo===e._pageID})).forEach((function(t){var n=t.elementList.filter((function(e){return Kt.userInfo.termId===e.eID.ownerID}));n.length>0&&(__Rtc.CRRTCBoard.delElement(e._wbDesc.wID,e._pageID,n.map((function(e){return e.eID}))),e._resumableEleArr=[],e._revocableEleArr=[],e._changeRedoAndUndoStatue())}))}},{key:"clear",value:function(){var e=this;console.crlog("[BoardUI] ID:".concat(this._id,", clear()")),this._wbDesc.pageDatas.filter((function(t){return t.pageNo==e._pageID})).forEach((function(t){var n=t.elementList.map((function(e){return e.eID}));n.length>0&&(__Rtc.CRRTCBoard.delElement(e._wbDesc.wID,e._pageID,n),e._resumableEleArr=[],e._revocableEleArr=[],e._changeRedoAndUndoStatue())}))}},{key:"addElement",value:function(e){console.crlog("[BoardUI] ID:".concat(this._id,", addElement(").concat(e,")")),__Rtc.CRRTCBoard.addElement(this._wbDesc.wID,this._pageID,e)}},{key:"removeElement",value:function(e){console.crlog("[BoardUI] ID:".concat(this._id,", removeElement(").concat(e,")")),__Rtc.CRRTCBoard.delElement(this._wbDesc.wID,this._pageID,e)}},{key:"importImg",value:function(e){this._bgImg=e,this._resizeCanvas()}},{key:"getCanvasElement",value:function(){return this._canvasEle||null}},{key:"_drawBgImg",value:function(){this._bgImg&&this._ctx.drawImage(this._bgImg,0,0,this._canvasEle.width,this._canvasEle.height)}},{key:"_resizeCanvas",value:function(){var e=this._wbDesc.width/this._wbDesc.height,t=this._handler.clientWidth/this._handler.clientHeight||1;this._bScaled||this._wbDesc.width>this._handler.clientWidth&&this._wbDesc.height>this._handler.clientHeight?e<=1&&e>t||e>1&&e>t?(this._canvasEle.style.width="".concat(this._handler.clientWidth,"px"),this._canvasEle.style.height="".concat(this._handler.clientWidth/e,"px")):(this._canvasEle.style.height="".concat(this._handler.clientHeight,"px"),this._canvasEle.style.width="".concat(this._handler.clientHeight*e,"px")):(this._canvasEle.style.height="".concat(this._wbDesc.height,"px"),this._canvasEle.style.width="".concat(this._wbDesc.width,"px")),this._canvasEle.height=this._wbDesc.height,this._canvasEle.width=this._wbDesc.width,this._drawBgImg(),this._drawAllPageData()}},{key:"_activeDraw",value:function(){var e=this;this._setCtx=function(){e._ctx.strokeStyle=e._style.strokeStyle,e._ctx.lineWidth=e._style.lineWidth,3==e._style.lineType?e._ctx.setLineDash([5,6]):e._ctx.setLineDash([])},this._loadEvent=function(){var t=e._ctx,n=e._canvasEle;window._canvasEle=e._canvasEle;var r=!1;n.ontouchstart=function(i){if(!e._readOnly){r=!0,e._setCtx();var o=n.width/n.offsetWidth,a=i.touches[0].pageX-n.getBoundingClientRect().left,c=i.touches[0].pageY-n.getBoundingClientRect().top,s=parseInt(a*o),l=parseInt(c*o),u={};u.type=e._style.type,u.left=s,u.top=l,u.color=e._style.strokeStyle,u.width=e._style.lineWidth,u.style=e._style.lineType,u.eID={ownerID:Kt.userInfo.termId,ID:__Rtc.CRRTCBoard.lastElemValue++},u.orderId=0,u.size=1,u.data=[{x:0,y:0}];var d=[{x:s,y:l}];return n.ontouchmove=function(e){var r=e.touches[0].pageX-n.getBoundingClientRect().left,i=e.touches[0].pageY-n.getBoundingClientRect().top,a=parseInt(r*o),c=parseInt(i*o);t.beginPath();var s=d[d.length-1],l=s.x,f=s.y;return t.moveTo(l,f),t.lineTo(a,c),d.push({x:a,y:c}),u.data.push({x:a-u.left,y:c-u.top}),u.size=u.data.length,t.stroke(),!1},n.ontouchend=function(t){r=!1,n.onmousemove=null,n.ontouchmove=null,n.ontouchend=null,document.onmouseup=null,e._revocableEleArr.push(u),e._resumableEleArr=[],e.addElement(e._switchEleType(u)),e._changeRedoAndUndoStatue()},!1}},n.onmousedown=function(i){if(!e._readOnly&&!r){e._setCtx();var o=n.width/n.offsetWidth,a=parseInt(i.offsetX*o),c=parseInt(i.offsetY*o),s={};s.type=e._style.type,s.left=a,s.top=c,s.color=e._style.strokeStyle,s.width=e._style.lineWidth,s.style=e._style.lineType,s.eID={ownerID:Kt.userInfo.termId,ID:__Rtc.CRRTCBoard.lastElemValue++},s.orderId=0,s.size=1,s.data=[{x:0,y:0}];var l=[{x:a,y:c}];n.onmousemove=function(e){var n=parseInt(e.offsetX*o),r=parseInt(e.offsetY*o);t.beginPath();var i=l[l.length-1],a=i.x,c=i.y;t.moveTo(a,c),t.lineTo(n,r),l.push({x:n,y:r}),s.data.push({x:n-s.left,y:r-s.top}),s.size=s.data.length,t.stroke()},document.onmouseup=function(){n.onmousemove=null,n.ontouchmove=null,n.ontouchend=null,document.onmouseup=null,e._revocableEleArr.push(s),e._resumableEleArr=[],e.addElement(e._switchEleType(s)),e._changeRedoAndUndoStatue()}}},console.crlog("[BoardUI] ID:".concat(e._id,", canvas on loadEvent..."))},this._switchEleType=function(t){switch(t.type){case 4:case 5:t=e._ele2buffer.pen(t)}return t},this._ele2buffer={pen:function(e){var t=0,n={};n.eID=e.eID,n.left=e.left,n.top=e.top,n.type=e.type,n.orderId=e.orderId,n.noused=0;var r=e.data,i=r.length,o=new ArrayBuffer(15+4*r.length),a=new Uint8Array(o);this.color2buffer(a,t,e.color),t+=11,a[t++]=e.width,a[t++]=e.style,a[t++]=parseInt(i/256),a[t++]=i%256;for(var c=0;c<r.length;)a[t++]=r[c].x>>8,a[t++]=255&r[c].x,a[t++]=r[c].y>>8,a[t++]=255&r[c].y,c++;return n.data=a,n},color2buffer:function(e,t,n){var r=this.hexColor2Rgba(n);e[t++]=1,e[t++]=e[t++]=r[3],e[t++]=e[t++]=r[0],e[t++]=e[t++]=r[1],e[t++]=e[t++]=r[2],e[t++]=e[t++]=0},hexColor2Rgba:function(e){var t=e,n=[];if(/^(rgb|RGB)/.test(t))(n=t.replace(/(?:\(|\)|RGBA|rgba|rgb|RGB)*/g,"").split(",").map((function(e){return+e})))[3]=n[3]?Math.round(255*n[3]):255;else if(/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(t)){if(4===e.length){for(var r="#",i=1;i<4;i+=1)r+=e.slice(i,i+1).concat(e.slice(i,i+1));e=r}for(i=1;i<7;i+=2)n.push(parseInt("0x"+e.slice(i,i+2)));n.push(255)}return n}}}},{key:"_passiveDraw",value:function(){var e=this;this._drawAllPageData=function(){e._wbDesc.pageDatas&&e._wbDesc.pageDatas.forEach((function(t){t.pageNo==e._pageID&&t.elementList.forEach((function(t){e._drawElement(t)}))}))},this._drawElement=function(t){var n=__Rtc.CRRTCBoard.Uint8ArrayToData(t),r=e._pelType[n.type];e["_draw".concat(r)]?e["_draw".concat(r)](n):console.crlog("[BoardUI] ID:".concat(e._id,", _drawElement fail, type ").concat(n.type," is not defined!"))},this._drawPencil=function(t){e._setLineStyle(t),e._ctx.beginPath(),e._ctx.moveTo(t.left,t.top);for(var n=0;n<t.data.length;n++)e._ctx.lineTo(t.left+t.data[n].w,t.top+t.data[n].h);e._ctx.stroke(),e._setCtx()},this._setLineStyle=function(t){e._ctx.strokeStyle=t.color,e._ctx.lineWidth=t.width,e._ctx.lineCap="round",3===t.style?e._ctx.setLineDash([5,6]):e._ctx.setLineDash([])}}},{key:"_changeRedoAndUndoStatue",value:function(){var e=!!this._revocableEleArr.length,t=!!this._resumableEleArr.length;void 0!==e&&this.undoStatus!==e&&(this.undoStatus=e,this.undoEnableChange&&this.undoEnableChange(e)),void 0!==t&&this.redoStatus!==t&&(this.redoStatus=t,this.redoEnableChange&&this.redoEnableChange(t))}}])}();function Qt(e){return Qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qt(e)}function Yt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Xt(r.key),r)}}function Xt(e){var t=function(e,t){if("object"!=Qt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Qt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Qt(t)?t:t+""}window.__crBoardClass=Jt,window.__Rtc.CRRTCBoard=new window.__crBoardClass,window.CRVideo_NotifyInitBoards=new CRVideo.CbProxy("CRVideo_NotifyInitBoards"),window.CRVideo_NotifyBoardCurPageNo=new CRVideo.CbProxy("CRVideo_NotifyBoardCurPageNo"),window.CRVideo_NotifyCreateBoard=new CRVideo.CbProxy("CRVideo_NotifyCreateBoard"),window.CRVideo_NotifyCloseBoard=new CRVideo.CbProxy("CRVideo_NotifyCloseBoard"),window.CRVideo_NotifyInitBoardPageDat=new CRVideo.CbProxy("CRVideo_NotifyInitBoardPageDat"),window.CRVideo_NotifyBoardBkImage=new CRVideo.CbProxy("CRVideo_NotifyBoardBkImage"),window.CRVideo_NotifyAddBoardElement=new CRVideo.CbProxy("CRVideo_NotifyAddBoardElement"),window.CRVideo_NotifyModifyBoardElement=new CRVideo.CbProxy("CRVideo_NotifyModifyBoardElement"),window.CRVideo_NotifyDelBoardElement=new CRVideo.CbProxy("CRVideo_NotifyDelBoardElement"),window.CRVideo_NotifyMouseHotSpot=new CRVideo.CbProxy("CRVideo_NotifyMouseHotSpot");var $t=CRVideo,en=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initData(),this.initIceCallback(),this.initSDKInterface()},(t=[{key:"initData",value:function(){console.crlog("[Sync] SyncModule initData..."),this.curMainTab={termID:-1,localID:0},this.curSubTab={termID:0,localID:0}}},{key:"initIceCallback",value:function(){this.ICECallback={notifySetCurrentTab:function(e,t,n){console.crlog("[Sync] ICE Notify --\x3e notifySetCurrentTab, params:".concat(JSON.stringify({mainId:e,subId:t,operId:n}))),this.curMainTab=e,this.curSubTab=t,this.notifyCurPageID()},notifySetFullScreen:function(e,t){console.crlog("[Sync] ICE Notify --\x3e notifySetFullScreen, params:".concat(JSON.stringify({bFull:e,operId:t})))},notifySetPrivTabInfo:function(e,t){console.crlog("[Sync] ICE Notify --\x3e notifySetPrivTabInfo, params:".concat(JSON.stringify({jsonCfg:e,operId:t})))},notifySetSyncMode:function(e,t){console.crlog("[Sync] ICE Notify --\x3e notifySetSyncMode, params:".concat(JSON.stringify({sm:e,operId:t})))}}}},{key:"initSDKInterface",value:function(){var e=this;window.CRVideo_SwitchToPage=function(e,t){return new Promise((function(n,r){if(console.crlog("[Sync] CRVideo_SwitchToPage(".concat(e,",").concat(t,")")),!$t.isMeeting)return r({errCode:8,errDesc:"服务异常"});var i={termID:-1,localID:e},o=-1,a=0;t||(t="0.0");try{o=+t.split(".")[0],a=+t.split(".")[1]}catch(e){return r({errCode:5,errDesc:"参数错误"})}var c={termID:o,localID:a};__Rtc.CRICEAPI.SetCurrentTab(i,c).then((function(e){return console.crlog("[Sync] __Rtc.CRICEAPI.SetCurrentTab success! "),n({errCode:0})}),(function(e){return console.crlog("[Sync][Error] __Rtc.CRICEAPI.SetCurrentTab fail! ".concat(e)),r({errCode:1,errDesc:e})}))}))},window.CRVideo_GetCurrentMainPage=function(){console.crlog("[Sync] CRVideo_GetCurrentMainPage()");var t=e.curMainTab.localID;return console.crlog("[Sync] CRVideo_GetCurrentMainPage, return: ".concat(t)),t},window.CRVideo_GetCurrentSubPage=function(){console.crlog("[Sync] CRVideo_GetCurrentSubPage()");var t="".concat(e.curSubTab.termID,".").concat(e.curSubTab.localID);return console.crlog("[Sync] CRVideo_GetCurrentSubPage, return: ".concat(t)),t}}},{key:"initSync",value:function(e){this.curMainTab=e.curMainTab,this.curSubTab=e.curSubTab}},{key:"notifyCurPageID",value:function(){var e="".concat(this.curSubTab.termID,".").concat(this.curSubTab.localID);console.crlog("[Sync] CRVideo_NotifySwitchToPage.target(".concat(this.curMainTab.localID,",").concat(e,");")),CRVideo_NotifySwitchToPage.target(this.curMainTab.localID,e)}},{key:"saveLastTabValue",value:function(e){__Rtc.CRICEAPI.SaveLastTabValue(e).then((function(e){console.crlog("[Sync] __Rtc.CRICEAPI.SaveLastTabValue success! ".concat(e[0]))}),(function(e){console.crlog("[Sync][Error] __Rtc.CRICEAPI.SaveLastTabValue fail! ".concat(e)),console.error(e)}))}}])&&Yt(e.prototype,t),n&&Yt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}(),tn=new en;window.__crSyncClass=en,window.__Rtc.CRRTCSync=tn,window.CRVideo_NotifySwitchToPage=new $t.CbProxy("CRVideo_NotifySwitchToPage");const nn=tn;var rn=__webpack_require__(9716),on=__webpack_require__(600);function an(e){return an="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},an(e)}function cn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,sn(r.key),r)}}function sn(e){var t=function(e,t){if("object"!=an(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=an(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==an(t)?t:t+""}var ln=window.Ice,un=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._initData()},t=[{key:"_initData",value:function(){this._proxyString="",this._ic=null,this._proxy=null,this._adapter=null,this._connection=null,this.serverPrx=null,this.isConnected=!1}},{key:"_initializationData",value:function(){var e=new ln.InitializationData;return e.properties=ln.createProperties(),e.properties.setProperty("Ice.Trace.Network","0"),e.properties.setProperty("Ice.Trace.Protocol","0"),e.properties.setProperty("Ice.ACM.Client","0"),e.properties.setProperty("Ice.ACM.Server","0"),e.properties.setProperty("Ice.Default.EncodingVersion","1.0"),ln.initialize(e)}},{key:"getProxyString",value:function(){var e=o.Z.server.wbServer,t=e.split(":")[0],n=e.split(":")[1];if(n&&n.indexOf("sig")>-1){var r=parseInt(n.split("/sig/")[0]),i="/sig/"+n.split("/sig/")[1];this._proxyString="WhiteBoardServer:wss -r ".concat(i," -h ").concat(t," -p ").concat(r)}}},{key:"createConnection",value:function(e){var t=this;console.crlog("[BoardV2] Server createConnection..");var n=new Promise((function(n,r){t.getProxyString(),t._ic=t._initializationData(),console.crlog("[BoardV2] ServerProxy: ".concat(t._proxyString)),t._proxy=t._ic.stringToProxy(t._proxyString),WhiteBoard.WhiteBoardCtrl2_V4Prx.checkedCast(t._proxy).then((function(i){t.serverPrx=i,t._ic.createObjectAdapter("").then((function(i){t._adapter=i,i.add(new e,t._ic.stringToIdentity("WhiteBoardClient")),i.activate();var o=t.serverPrx.ice_getCachedConnection();return null!=o?(t._connection=o,o.setAdapter(i),t.isConnected=!0,n()):(console.crlog("[BoardV2] Server whiteBoard connection, ice_getCachedConnection is null!"),r(window.__Rtc.CRCONFERR.Parse()))})).exception((function(e){return console.crlog("[BoardV2] Server createObjectAdapter fail! ".concat(e.toString())),r(window.__Rtc.CRCONFERR.Parse(e))}))})).exception((function(e){return console.crlog("[BoardV2] Server checkedCast fail! ".concat(e.toString())),r(window.__Rtc.CRCONFERR.Parse(e))}))}));return n}},{key:"destroyConnect",value:function(){var e=this;return new Promise((function(t,n){console.crlog("[BoardV2] Server destroyConnect..."),e._ic&&e._ic.destroy&&e._ic.destroy().then((function(){return e._initData(),t()}))}))}}],t&&cn(e.prototype,t),n&&cn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();const dn=new un;function fn(e){return fn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fn(e)}function hn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,pn(r.key),r)}}function pn(e){var t=function(e,t){if("object"!=fn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=fn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==fn(t)?t:t+""}const _n=new(function(){return e=function e(){var t,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=this,r={},(n=pn(n="handlers"))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r},t=[{key:"addEventListener",value:function(e,t){e in this.handlers||(this.handlers[e]=[]),this.handlers[e].push(t)}},{key:"dispatchEvent",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(!(e in this.handlers))return new Error("未注册该事件");this.handlers[e].forEach((function(e){try{e.apply(void 0,n)}catch(e){console.error(e)}}))}},{key:"removeEventListener",value:function(e,t){if(!(e in this.handlers))return new Error("无效事件");if(t){var n=this.handlers[e].findIndex((function(e){return e===t}));if(-1===n)return new Error("无该绑定事件");this.handlers[e].splice(n,1),0===this.handlers[e].length&&delete this.handlers[e]}else delete this.handlers[e]}}],t&&hn(e.prototype,t),n&&hn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}());function gn(e){return gn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gn(e)}function Cn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,vn(r.key),r)}}function vn(e){var t=function(e,t){if("object"!=gn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=gn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==gn(t)?t:t+""}var mn=window.Ice,yn=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.serverPrx=null,this.sessionID="",this.heartBeatTimer=-1,this.initCallback(),this.noLog=["heartBeat","appendShapeDat","notifyAppendShapeDat","notifyCurrentPos","setCurrentPos"]},t=[{key:"initCallback",value:function(){var e=this;this.IceCallback=mn.Class(WhiteBoard.WhiteBoardCtrl2_V4,{sendCmd_async:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(null==e.noLog||!e.noLog.includes(n[2]))&&console.crlog("[BoardV2] Ice Notify: ".concat(n[2],", ").concat(n[3])),n[0].ice_response("",[]),_n.dispatchEvent.apply(_n,[n[2]].concat([JSON.parse(n[3]),n[4]]))}})}},{key:"sendCmd",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(r,i){if(!t.serverPrx)return i({errCode:202,errDesc:"网络错误"});"login"!=e&&null==n.sessionID&&t.sessionID&&(n.sessionID=t.sessionID),(null==t.noLog||!t.noLog.includes(e))&&console.crlog("[BoardV2] Ice request: ".concat(e," - ").concat(JSON.stringify(n))),t.serverPrx.sendCmd("WhiteBoardCtrl2",e,JSON.stringify(n),null,null,null).then((function(n){return(null==t.noLog||!t.noLog.includes(e))&&console.crlog("[BoardV2] Ice request: ".concat(e," - success!")),r(n)})).exception((function(n){return(null==t.noLog||!t.noLog.includes(e))&&console.crlog("[BoardV2] Ice request: ".concat(e," - fail! ").concat(n.toString())),i(n)}))}))}},{key:"login",value:function(e,t){var n=this;return new Promise((function(r,i){var o=function(){dn.createConnection(n.IceCallback).then((function(){n.serverPrx=dn.serverPrx,n.sendCmd("login",{confId:e,opId:t}).then((function(e){var t=JSON.parse(e).rslt;return n.sessionID=t.sessionId,console.crlog("[BoardV2] SessionID:".concat(n.sessionID)),console.crlog("[BoardV2] Ice start to keep heartbeat..."),n.heartBeat(),clearInterval(n.heartBeatTimer),n.heartBeatTimer=setInterval((function(){n.heartBeat()}),6e4),r(t.descs)})).catch((function(e){return i(window.__Rtc.CRCONFERR.Parse(e))}))})).catch((function(e){return console.crlog("[BoardV2] Server create connect fail! ".concat(e)),i(window.__Rtc.CRCONFERR.Parse(e))}))};dn.isConnected?n.logout().then((function(){o()})):o()}))}},{key:"logout",value:function(){var e=this;return new Promise((function(t,n){console.crlog("[BoardV2] Ice stop heartbeat..."),clearInterval(e.heartBeatTimer),e.sendCmd("logout").then((function(){dn.destroyConnect().then((function(){return e.serverPrx=null,t()}))})).catch((function(e){return n(window.__Rtc.CRCONFERR.Parse(e))}))}))}},{key:"heartBeat",value:function(){var e=this;return new Promise((function(t,n){e.sendCmd("heartBeat").then((function(){return t()})).catch((function(t){return console.crlog("[BoardV2] Heartbeat fail..."),console.crlog("[BoardV2] Ice stop heartbeat..."),clearInterval(e.heartBeatTimer),CRVideo.destroyMeetingConnect(),CRVideo_NotifyNetworkDelay.target("超时"),CRVideo_NetStateChanged.target(0),console.crlog("[BoardV2] CRVideo_MeetingDropped.target(".concat(CRVideo_ERR_DEF.SOCKETEXCEPTION,")")),CRVideo_MeetingDropped.target(CRVideo_ERR_DEF.SOCKETEXCEPTION),n(window.__Rtc.CRCONFERR.Parse(t))}))}))}},{key:"create",value:function(e){var t=this;return new Promise((function(n,r){t.sendCmd("create",{wb:e}).then((function(){return n(e)})).catch((function(e){return r(window.__Rtc.CRCONFERR.Parse(e))}))}))}},{key:"delete",value:function(e){var t=this;return new Promise((function(n,r){t.sendCmd("delete",{wId:e}).then((function(){return n()})).catch((function(e){return r(window.__Rtc.CRCONFERR.Parse(e))}))}))}},{key:"queryAllBoardList",value:function(){var e=this;return new Promise((function(t,n){e.sendCmd("queryAllBoardList").then((function(e){return t(e)})).catch((function(e){return n(window.__Rtc.CRCONFERR.Parse(e))}))}))}},{key:"setExtInfo",value:function(e,t){var n=this;return new Promise((function(r,i){n.sendCmd("setExtInfo",{wId:e,extInfo:t}).then((function(){return r()})).catch((function(e){return i(window.__Rtc.CRCONFERR.Parse(e))}))}))}},{key:"setCurrentWB",value:function(e){var t=this;return new Promise((function(n,r){t.sendCmd("setCurrentWB",{wId:e}).then((function(){return n()})).catch((function(e){return r(window.__Rtc.CRCONFERR.Parse(e))}))}))}},{key:"queryShapeByIds",value:function(e,t){var n=this;return new Promise((function(r,i){n.sendCmd("queryShapeByIds",{wId:e,pageIds:t}).then((function(e){return r(JSON.parse(e).rslt)})).catch((function(e){return i(window.__Rtc.CRCONFERR.Parse(e))}))}))}},{key:"setScale",value:function(e,t){var n=this;return new Promise((function(r,i){n.sendCmd("setScale",{wId:e,scale:t}).then((function(){return r()})).catch((function(e){return i(window.__Rtc.CRCONFERR.Parse(e))}))}))}},{key:"setCurrentPos",value:function(e,t,n){var r=this;return new Promise((function(i,o){r.sendCmd("setCurrentPos",{wId:e,xPos:t,yPos:n}).then((function(e){return i()})).catch((function(e){return o(window.__Rtc.CRCONFERR.Parse(e))}))}))}},{key:"addShape",value:function(e,t,n){var r=this;return new Promise((function(i,o){r.sendCmd("addShape",{wId:e,page:t,shape:n}).then((function(){return i()})).catch((function(e){return o(window.__Rtc.CRCONFERR.Parse(e))}))}))}},{key:"appendShapeDat",value:function(e,t,n,r){var i=this;return new Promise((function(o,a){i.sendCmd("appendShapeDat",{wId:e,page:t,sId:n,dat:r}).then((function(){return o()})).catch((function(e){return a(window.__Rtc.CRCONFERR.Parse(e))}))}))}},{key:"delShape",value:function(e,t){var n=this;return new Promise((function(r,i){n.sendCmd("delShape",{wId:e,shapeIdsMap:t}).then((function(){return r()})).catch((function(e){return i(window.__Rtc.CRCONFERR.Parse(e))}))}))}},{key:"moveShape",value:function(e,t,n){var r=this;return new Promise((function(i,o){r.sendCmd("moveShape",{wId:e,page:t,sPos:n}).then((function(e){return i()})).catch((function(e){return o(window.__Rtc.CRCONFERR.Parse(e))}))}))}},{key:"modifyShapeAttr",value:function(e,t,n,r){var i=this;return new Promise((function(o,a){i.sendCmd("modifyShapeAttr",{wId:e,page:t,sId:n,attr:r}).then((function(e){return o()})).catch((function(e){return a(window.__Rtc.CRCONFERR.Parse(e))}))}))}},{key:"setPageDat",value:function(e,t){var n=this;return new Promise((function(r,i){if(!n.serverPrx)return i({errCode:202,errDesc:"网络错误"});var o=n.sessionID,a=new whiteBoard.WBPageData;for(var c in wbDesc)a[c]=t[c];console.crlog("[BoardV2] Ice request: setPageDat - ".concat(JSON.stringify(a),",").concat(o)),n.serverPrx.setPageDat(e,a,o).then((function(e){return console.crlog("[BoardV2] Ice request: setPageDat - success!"),r()})).exception((function(e){return console.crlog("[BoardV2] Ice request: setPageDat - fail! ".concat(e.toString())),i(window.__Rtc.CRCONFERR.Parse(e))}))}))}},{key:"modifyShape",value:function(e,t,n){var r=this;return new Promise((function(i,o){if(!r.serverPrx)return o({errCode:202,errDesc:"网络错误"});var a=r.sessionID,c=new whiteBoard.WBShapeData;for(var s in wbDesc)c[s]=n[s];console.crlog("[BoardV2] Ice request: modifyShape - ".concat(e,",").concat(t,",").concat(JSON.stringify(c),",").concat(a)),r.serverPrx.modifyShape(e,t,c,a).then((function(e){return console.crlog("[BoardV2] Ice request: modifyShape - success!"),i()})).exception((function(e){return console.crlog("[BoardV2] Ice request: modifyShape - fail! ".concat(e.toString())),o(window.__Rtc.CRCONFERR.Parse(e))}))}))}},{key:"setHotspot",value:function(e){var t=this;return new Promise((function(n,r){if(!t.serverPrx)return r({errCode:202,errDesc:"网络错误"});var i=t.sessionID,o=new whiteBoard.WBHotspot;for(var a in wbDesc)o[a]=e[a];console.crlog("[BoardV2] Ice request: setHotspot - ".concat(JSON.stringify(o),",").concat(i)),t.serverPrx.setHotspot(o,i).then((function(e){return console.crlog("[BoardV2] Ice request: setHotspot - success!"),n()})).exception((function(e){return console.crlog("[BoardV2] Ice request: setHotspot - fail! ".concat(e.toString())),r(window.__Rtc.CRCONFERR.Parse(e))}))}))}},{key:"getHotspot",value:function(){var e=this;return new Promise((function(t,n){if(!e.serverPrx)return n({errCode:202,errDesc:"网络错误"});var r=e.sessionID;console.crlog("[BoardV2] Ice request: getHotspot - ".concat(r)),e.serverPrx.getHotspot(r).then((function(e){return console.crlog("[BoardV2] Ice request: getHotspot - success!"),t()})).exception((function(e){return console.crlog("[BoardV2] Ice request: getHotspot - fail! ".concat(e.toString())),n(window.__Rtc.CRCONFERR.Parse(e))}))}))}}],t&&Cn(e.prototype,t),n&&Cn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}(),Sn=new yn;window.boardapi=Sn;const In=Sn;function Rn(e){return Rn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Rn(e)}function wn(e){return function(e){if(Array.isArray(e))return bn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return bn(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?bn(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function En(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Pn(r.key),r)}}function Dn(e,t,n){return t&&En(e.prototype,t),n&&En(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Pn(e){var t=function(e,t){if("object"!=Rn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Rn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Rn(t)?t:t+""}function Tn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var xn=window.CRVideo,Mn=window.Ice,An=Dn((function e(t){Tn(this,e),this.boardID=t.wId,this.owner=t.owner,this.width=t.width,this.height=t.height,this.pageCount=t.pageCount,this.pageMode=null!=t.extProperty.show_multi_page?parseInt(t.extProperty.show_multi_page):0,this.scale=t.scale,this.extInfo=t.extInfo})),On=Dn((function e(t){var n=t.wId,r=void 0===n?Mn.generateUUID():n,i=t.owner,o=void 0===i?xn.userInfo.userId:i,a=t.width,c=t.height,s=t.wType,l=void 0===s?0:s,u=t.imgType,d=void 0===u?0:u,f=t.pageCount,h=void 0===f?1:f,p=t.xPos,_=void 0===p?0:p,g=t.yPos,C=void 0===g?0:g,v=t.scale,m=void 0===v?100:v,y=t.extInfo,S=void 0===y?"":y,I=t.show_multi_page,R=void 0===I?0:I;Tn(this,e),this.wId=r,this.owner=o,this.wType=l,this.imgType=d,this.width=a,this.height=c,this.pageCount=h,this.xPos=_,this.yPos=C,this.scale=m,this.extInfo=S,this.extProperty={show_multi_page:R}})),kn=function(){return Dn((function e(){Tn(this,e),this.initData(),this.initIceCallback(),this.initSDKInterface()}),[{key:"initData",value:function(){console.crlog("[BoardV2] initData..."),this.v2Supported=!0,this.heartBeatTimer=-1,this.wbDescList=[],this.viewList=[],this.curWB=""}},{key:"initIceCallback",value:function(){var e=this;this.notifyInitBoardListCallback=new xn.CbProxy("CRBoard_NotifyInitBoardList"),this.notifyCreateBoardCallback=new xn.CbProxy("CRBoard_NotifyCreateBoard"),this.notifyCloseBoardCallback=new xn.CbProxy("CRBoard_NotifyCloseBoard"),this.notifyBoardExinfoUpdatedCallback=new xn.CbProxy("CRBoard_NotifyBoardExinfoUpdated"),this.notifyCurrentBoardCallback=new xn.CbProxy("CRBoard_NotifyCurrentBoard"),this.notifyBoardScaleCallback=new xn.CbProxy("CRBoard_NotifyBoardScale"),_n.addEventListener("notifyCreate",(function(t){null==t.wb.shapeList&&(t.wb.shapeList=[]),e.wbDescList.push(t.wb),e.notifyCreateBoardCallback.target(new An(t.wb),t.opId)})),_n.addEventListener("notifySetPageDat",(function(e){console.log("----- notifySetPageDat -----",e)})),_n.addEventListener("notifyDelete",(function(t){var n=e.wbDescList.findIndex((function(e){return e.wId==t.wId}));-1!=n&&e.wbDescList.splice(n,1),e.notifyCloseBoardCallback.target(t.wId,t.opId)})),_n.addEventListener("notifyCurrentWB",(function(t){0==e.wbDescList.length?(e.curWB="",e.notifyCurrentBoardCallback.target("",t.opId)):(e.curWB=t.wId||"",e.notifyCurrentBoardCallback.target(t.wId||"",t.opId))})),_n.addEventListener("notifySetExtInfo",(function(t){var n=e.wbDescList.find((function(e){return e.wId==t.wId}));n&&(n.extInfo=t.extInfo),e.notifyBoardExinfoUpdatedCallback.target(t.wId,t.extInfo,t.opId)})),_n.addEventListener("notifySetScale",(function(t){var n=e.wbDescList.find((function(e){return e.wId==t.wId}));n&&(n.scale=t.scale,e.notifyBoardScaleCallback.target(t.wId,t.scale,t.opId))})),_n.addEventListener("notifyCurrentPos",(function(t){var n=e.wbDescList.find((function(e){return e.wId==t.wId}));n&&(n.xPos=t.xPos,n.yPos=t.yPos,t.opId!=xn.userInfo.userId&&e.viewList.forEach((function(e){e._wbDesc.wId==n.wId&&e._attr.followPage&&e._refreshPos()})))})),_n.addEventListener("notifyAddShape",(function(t){var n=e.wbDescList.find((function(e){return e.wId==t.wId}));if(n&&t.opId!=xn.userInfo.userId){var r=n.shapeList.find((function(e){return e.pageId==t.page}));r||(r={pageId:t.page,shapes:[]},n.shapeList.push(r)),null==r.shapes&&(r.shapes=[]),t.shape.attr=JSON.parse(t.shape.attr),t.shape.attr.penColor=e.decodeShapeColor(t.shape.attr.penColor),void 0!==t.shape.attr.txtBkColor&&(t.shape.attr.txtBkColor=e.decodeShapeColor(t.shape.attr.txtBkColor)),t.shape.dat=e.decodeShapeDat(t.shape.dat);var i=JSON.parse(JSON.stringify(t.shape));r.shapes.push(i),e.viewList.forEach((function(e){if(e._wbDesc.wId==n.wId){var t=e._canvasList.find((function(e){return e.pageID==r.pageId}));e._drawShape(t,i)}}))}})),_n.addEventListener("notifyAppendShapeDat",(function(t){var n=e.wbDescList.find((function(e){return e.wId==t.wId}));n&&t.opId!=xn.userInfo.userId&&n.shapeList.forEach((function(r){r.pageId==t.page&&r.shapes.forEach((function(i){if(i.sId==t.sId){var o=e.decodeShapeDat(t.dat),a=i.dat,c=o;e.viewList.forEach((function(e){e._wbDesc.wId==n.wId&&e._drawAppendShapeDat(r.pageId,i,a,c)})),i.dat=[].concat(wn(i.dat),wn(o))}}))}))})),_n.addEventListener("notifyMoveShape",(function(t){var n=e.wbDescList.find((function(e){return e.wId==t.wId}));n&&(t.sPos.forEach((function(e){n.shapeList.forEach((function(n){n.pageId==t.page&&n.shapes.forEach((function(t){t.sId==e.sId&&(t.top=e.top,t.left=e.left)}))}))})),e.viewList.forEach((function(e){e._wbDesc.wId==n.wId&&e._drawAllShapes({pageID:t.page},"notifyMoveShape")})))})),_n.addEventListener("notifyModifyShapeAttr",(function(t){var n=e.wbDescList.find((function(e){return e.wId==t.wId}));n&&(n.shapeList.forEach((function(n){n.pageId==t.page&&n.shapes.forEach((function(n){if(n.sId==t.sId){var r=JSON.parse(t.attr);n.attr=r,n.attr.penColor=e.decodeShapeColor(r.penColor),void 0!==r.txtBkColor&&(n.attr.txtBkColor=e.decodeShapeColor(r.txtBkColor))}}))})),e.viewList.forEach((function(e){e._wbDesc.wId==n.wId&&e._drawAllShapes({pageID:t.page},"notifyModifyShapeAttr")})))})),_n.addEventListener("notifyDelShape",(function(t){var n=e.wbDescList.find((function(e){return e.wId==t.wId}));if(n){var r=function(e){t.shapeIdsMap[e].forEach((function(t){n.shapeList.forEach((function(n){if(n.pageId==e){var r=n.shapes.findIndex((function(e){return e.sId==t}));r>-1&&n.shapes.splice(r,1)}}))}))};for(var i in t.shapeIdsMap)r(i);e.viewList.forEach((function(e){if(e._wbDesc.wId==n.wId){e._drawAllShapes({pageID:t.page},"notifyDelShape");for(var r=t.opId!=xn.userInfo.userId,i=0;i<n.shapeList.length;i++)n.shapeList[i].shapes.length>0&&(r=!1);r&&(e._revocableShapesArr=[],e._changeRedoUndoState())}}))}})),_n.addEventListener("notifySetHotspot",(function(e){console.log("----- notifySetHotspot -----",e)}))}},{key:"initSDKInterface",value:function(){var e=this;this.createWhiteBoard=function(t,n,r,i,o){return new Promise((function(a,c){if(console.crlog("[BoardV2] CRBoard_CreateWhiteBoard(".concat(t,",").concat(n,",").concat(r,",").concat(i,",").concat(o,")")),!e.v2Supported)return c({errCode:8,errDesc:"服务端不支持V2白板，请升级服务端程序"});if(e.wbDescList.length>=10)return c({errCode:1,errDesc:"房间内白板数量超过限制"});if(r>300)return c({errCode:1,errDesc:"白板页数超过限制"});var s=new On({width:t,height:n,pageCount:r,extInfo:o,show_multi_page:1==i?1:0});In.create(s).then((function(e){return a(new An(e))})).catch((function(e){return c({errCode:1,errDesc:e.err?e.err:e.toString()})}))}))},this.closeWhiteBoard=function(t){return new Promise((function(n,r){if(console.crlog("[BoardV2] CRBoard_CloseBoard(".concat(t,")")),!e.v2Supported)return r({errCode:8,errDesc:"服务端不支持V2白板，请升级服务端程序"});In.delete(t).then((function(){return n()})).catch((function(e){return r({errCode:1,errDesc:e.toString()})}))}))},this.getAllBoard=function(){var t=[];return e.wbDescList.forEach((function(e){t.push(new An(e))})),t},this.updateBoardExInfo=function(t,n){return new Promise((function(r,i){if(console.crlog("[BoardV2] CRBoard_UpdateBoardExInfo(".concat(t,",").concat(n,")")),!e.v2Supported)return i({errCode:8,errDesc:"服务端不支持V2白板，请升级服务端程序"});In.setExtInfo(t,n).then((function(){return r()})).catch((function(e){return i({errCode:1,errDesc:e.toString()})}))}))},this.getBoardInfo=function(t){var n=e.wbDescList.find((function(e){return e.wId==t}));return n?new An(n):""},this.getCurrentBoard=function(){return e.curWB},this.setCurrentBoard=function(t){return new Promise((function(n,r){if(console.crlog("[BoardV2] CRBoard_SetCurrentBoard(".concat(t,")")),!e.v2Supported)return r({errCode:8,errDesc:"服务端不支持V2白板，请升级服务端程序"});In.setCurrentWB(t).then((function(){return n()})).catch((function(e){return r({errCode:1,errDesc:e.toString()})}))}))}}},{key:"init",value:function(){var e=this;return new Promise((function(t,n){console.crlog("[BoardV2] Init whiteBoard v2...");var r=xn.meetingID,i=xn.userInfo.userId;if(!r||8!==r.toString().length||null==i)return n({errCode:5,errDesc:"参数错误"});e.initData(),In.login(r,i).then((function(n){e.wbDescList=n.wbDescList||[],e.curWB=n.wbDescList&&n.wbDescList.length>0?n.curWB:"",e.wbDescList.find((function(t){return t.wId==e.curWB}))||(e.curWB="");var r=[];return e.wbDescList.forEach((function(t){if(t.wId==e.curWB){for(var n=[],r=0;r<t.pageCount;r++)n.push(r);In.queryShapeByIds(e.curWB,n).then((function(n){e.handleShapes(t,n),e.viewList.forEach((function(e){e._wbDesc.wId==t.wId&&e._drawAllShapes({},"queryShapeByIds")}))}))}})),e.wbDescList.forEach((function(t){if(r.push(new An(t)),t.wId!=e.curWB){for(var n=[],i=0;i<t.pageCount;i++)n.push(i);In.queryShapeByIds(t.wId,n).then((function(n){e.handleShapes(t,n)}))}})),e.notifyInitBoardListCallback.target(r),e.notifyCurrentBoardCallback.target(e.curWB),t()}),(function(e){return n(window.__Rtc.CRCONFERR.Parse(e))}))}))}},{key:"handleShapes",value:function(e,t){var n=this;console.crlog("[BoardV2] Handle shapes after init..."),t.forEach((function(e){null==e.shapes&&(e.shapes=[]),e.shapes.forEach((function(e){e.attr=JSON.parse(e.attr),e.attr.penColor=n.decodeShapeColor(e.attr.penColor),void 0!==e.attr.txtBkColor&&(e.attr.txtBkColor=n.decodeShapeColor(e.attr.txtBkColor)),e.dat=n.decodeShapeDat(e.dat)}));for(var t=0;t<e.shapes.length-1;t++)for(var r=0;r<e.shapes.length-1-t;r++)if(e.shapes[r].order>e.shapes[r+1].order){var i=e.shapes[r];e.shapes[r]=e.shapes[r+1],e.shapes[r+1]=i}})),e.shapeList=t}},{key:"uninit",value:function(){var e=this;console.crlog("[BoardV2] Uninit()"),In.logout().then((function(){e.initData()}))}},{key:"decodeShapeDat",value:function(e){for(var t=a.Z.base64ToUint8Array(e),n=[],r=[],i=0;i<t.length;i+=2)r[i]=t[i],r[i+1]=t[i+1],t[i]>=240&&(r[i]=t[i]-256,r[i+1]=t[i+1]+256*(t[i]-256));for(i=0;i<r.length;i+=4)n.push({x:r[i]<<8|r[i+1],y:r[i+2]<<8|r[i+3]});return n}},{key:"encodeShapeDat",value:function(e){for(var t=new ArrayBuffer(4*e.length),n=new Uint8Array(t),r=[],i=0;i<e.length;i++)r.push(e[i].x>>8),r.push(255&e[i].x),r.push(e[i].y>>8),r.push(255&e[i].y);return n.set(r),a.Z.uint8ArrayToBase64(n)}},{key:"decodeShapeColor",value:function(e){var t=e>>>24,n=e>>>8&255,r=255&e;return"rgba(".concat(e>>>16&255,",").concat(n,",").concat(r,",").concat((t/255).toFixed(2),")")}},{key:"encodeShapeColor",value:function(e){var t=+e.split("(")[1].split(",")[0],n=+e.split(",")[1],r=+e.split(",")[2];return 255*e.split(",")[3].split(")")[0]<<24|t<<16|n<<8|r}},{key:"addShape",value:function(e,t,n){var r=JSON.parse(JSON.stringify(n));r.dat=this.encodeShapeDat(r.dat),r.attr.penColor=this.encodeShapeColor(r.attr.penColor),r.attr.txtBkColor&&(r.attr.txtBkColor=this.encodeShapeColor(r.attr.txtBkColor)),In.addShape(e,t,r).then((function(){})).catch((function(e){console.error(e)}))}},{key:"appendShapeDat",value:function(e,t,n,r){var i=this.encodeShapeDat(r);In.appendShapeDat(e,t,n,i).then((function(){})).catch((function(e){console.error(e)}))}},{key:"delShape",value:function(e,t,n){var r=new Object;r[t]=n,In.delShape(e,r).then((function(){})).catch((function(e){console.error(e)}))}},{key:"moveShape",value:function(e,t,n){In.moveShape(e,t,n).then((function(){})).catch((function(e){console.error(e)}))}},{key:"modifyShapeAttr",value:function(e,t,n){var r=JSON.parse(JSON.stringify(n));r.dat=this.encodeShapeDat(r.dat),r.attr.penColor=this.encodeShapeColor(r.attr.penColor),r.attr.txtBkColor&&(r.attr.txtBkColor=this.encodeShapeColor(r.attr.txtBkColor)),In.modifyShapeAttr(e,t,r.sId,r.attr).then((function(){})).catch((function(e){console.error(e)}))}}])}(),Vn=new kn;window.__Rtc.CRBoardV2=Vn;const Nn=Vn;var Ln=window.Conference,Un=(window.Cr,window.Ice),jn={getRollCallInfo:function(){return new Promise((function(e,t){(0,M.V)("_rollCallSession","getRollCallInfo").then((function(t){return e(t)})).catch((function(e){return t(e)}))}))},startRollCall:function(){return new Promise((function(e,t){(0,M.V)("_rollCallSession","startRollCall").then((function(t){return e(t)})).catch((function(e){return t(e)}))}))},stopRollCall:function(){return new Promise((function(e,t){(0,M.V)("_rollCallSession","stopRollCall").then((function(t){return e(t)})).catch((function(e){return t(e)}))}))},confirmRollCall:function(){return new Promise((function(e,t){(0,M.V)("_rollCallSession","confirmRollCall").then((function(t){return e(t)})).catch((function(e){return t(e)}))}))}};window.__Rtc.RollCallReceptor=Un.Class(Ln.RollCallCallback,{setProxy:function(e){this.proxy=e},rollCallStarted:function(){var e;(e=Gn.ICECallback).rollCallStarted.apply(e,arguments)},rollCallStoped:function(){var e;(e=Gn.ICECallback).rollCallStoped.apply(e,arguments)},rollCallConfirmed:function(){var e;(e=Gn.ICECallback).rollCallConfirmed.apply(e,arguments)},rollCallConfirmed2:function(){var e;(e=Gn.ICECallback).rollCallConfirmed.apply(e,arguments)}});const Bn=jn;function Fn(e){return Fn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fn(e)}function Hn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,qn(r.key),r)}}function qn(e){var t=function(e,t){if("object"!=Fn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Fn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Fn(t)?t:t+""}var Kn=window.CRVideo,Wn=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initData(),this.initIceCallback(),this.initSDKInterface()},(t=[{key:"initData",value:function(){console.crlog("[RollCall] RollCallModule initData...")}},{key:"initIceCallback",value:function(){this.ICECallback={rollCallStarted:function(e){console.crlog("[RollCall] ICE Callback --\x3e rollCallStarted, params:".concat(JSON.stringify({operatorID:e})));var t=Kn.allMemberInfo.find((function(t){return t.termId==e}));t&&x.Z.rollCallStarted.target(t.userId)},rollCallStoped:function(e){console.crlog("[RollCall] ICE Callback --\x3e rollCallStoped, params:".concat(JSON.stringify({operatorID:e})));var t=Kn.allMemberInfo.find((function(t){return t.termId==e}));t&&x.Z.rollCallStoped.target(t.userId)},rollCallConfirmed:function(e){console.crlog("[RollCall] ICE Callback --\x3e rollCallConfirmed, params:".concat(JSON.stringify({termID:e})));var t=Kn.allMemberInfo.find((function(t){return t.termId==e}));t&&x.Z.rollCallConfirmed.target(t.userId,t.nickname)}}}},{key:"initSDKInterface",value:function(){x.Z.getRollCallInfo=function(){return console.crlog("[RollCall] MeetSDK.getRollCallInfo()"),new Promise((function(e,t){Bn.getRollCallInfo().then((function(t){var n=t[1],r=Kn.allMemberInfo.find((function(e){return e.termId==t[1].rollCaller}));return r&&(n.rollCaller=r.userId),console.crlog("[RollCall] GetRollCallInfo return: ".concat(JSON.stringify(n))),e(n)}),(function(e){return t({errCode:1,errDesc:e})}))}))},x.Z.startRollCall=function(){return console.crlog("[RollCall] MeetSDK.startRollCall()"),new Promise((function(e,t){x.Z.stopRollCall(),Bn.startRollCall().then((function(t){return e({errCode:0})}),(function(e){return t({errCode:1,errDesc:e})}))}))},x.Z.stopRollCall=function(){return console.crlog("[RollCall] MeetSDK.stopRollCall()"),new Promise((function(e,t){Bn.stopRollCall().then((function(t){return e({errCode:0})}),(function(e){return t({errCode:1,errDesc:e})}))}))},x.Z.confirmRollCall=function(){return console.crlog("[RollCall] MeetSDK.confirmRollCall()"),new Promise((function(e,t){Bn.confirmRollCall().then((function(t){return e({errCode:0})}),(function(e){return t({errCode:1,errDesc:e})}))}))}}}])&&Hn(e.prototype,t),n&&Hn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();x.Z.rollCallStarted=new J.Z("rollCallStarted"),x.Z.rollCallStoped=new J.Z("rollCallStoped"),x.Z.rollCallConfirmed=new J.Z("rollCallConfirmed");const Gn=new Wn;function zn(e){return zn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zn(e)}function Jn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Zn(r.key),r)}}function Zn(e){var t=function(e,t){if("object"!=zn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=zn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==zn(t)?t:t+""}var Qn,Yn;window.__Rtc._proxy=on.Z,CRVideo.APPIDMode=1,CRVideo.changyiweb=!1,CRVideo.LOCAL_KEY="CRwebRTC",CRVideo.KEEPLIVE_COMMIT=!1,CRVideo.KEEPALIVE_TIMER=-1,CRVideo.REFRESH_SESSION_TIMER=-1,CRVideo.userInfo={},CRVideo.allMemberInfo=[],CRVideo.isExitmeet=!1,CRVideo.isMeeting=!1,CRVideo.isWebRTC=!0,CRVideo.msType={localAudio:11,localVideo:12,localScreen:13,localMediaVideo:14,localMediaAudio:15,remoteVideo:22,remoteScreen:23,remoteMedia:24},CRVideo.firstEnterStatus=!1,CRVideo.meetingExiting=!1,CRVideo.callserverExiting=!1,window.enmeet={config:{controlSharkTime:15e3,refreshSessionTime:1e4}},function(e){!function(t){var n={findUserInfo:function(t,n){return e.allMemberInfo.find((function(e){return e[t]==n}))}};t.findUserInfo=n.findUserInfo,n.controlSharkHand=function(){__Rtc.CR__KeepAlive(1,(new Date).getTime()),clearTimeout(e.KEEPALIVE_TIMER),e.KEEPALIVE_TIMER=setTimeout(n.controlSharkHand,enmeet.config.controlSharkTime)},t.controlSharkHand=n.controlSharkHand,n.refreshSessionSharkHand=function(){__Rtc.CR__RefreshSession((new Date).getTime()),clearTimeout(e.REFRESH_SESSION_TIMER),e.REFRESH_SESSION_TIMER=setTimeout(n.refreshSessionSharkHand,enmeet.config.refreshSessionTime)},t.refreshSessionSharkHand=n.refreshSessionSharkHand,n.destroyMeetingConnect=function(){console.crlog("[SDK] Websockt destroy meeting connect..."),e.communicatorIc&&e.communicatorIc.destroy(),e.communicatorIc=null,console.crlog("[SDK] CRVideo.communicatorIc && CRVideo.communicatorIc.destroy();CRVideo.communicatorIc = null")},t.destroyMeetingConnect=n.destroyMeetingConnect}(e)}(CRVideo),window.findMemberInfo=function(e){var t=!1;return CRVideo.allMemberInfo.forEach((function(n){n[e.use]==e.value&&(t=n[e.want])})),t},CRVideo.findMemberInfo=findMemberInfo,CRVideo.initweb=function(){__Rtc.CR__Init("js",{protocol:"wss",CheckFlash:!1})},__Rtc.CR_InitRslt.callback=function(e,t){0==e?CRVideo.loginWebMeeting():console.crlog("[SDK] CR_InitRslt.callback fail!")},CRVideo.loginWebMeeting=function(){var e=CRVideo.crmtStr,t={};t.nickname=CRVideo.userInfo.nickname||"",t.userId=CRVideo.userInfo.userId||"",CRVideo.KEEPLIVE_COMMIT=!0,CRVideo.isExitmeet=!1,on.Z.loginControl(e,t)},__Rtc.CR__LoginRslt.callback=function(e,t,n){CRVideo.reEnterMeetTimes=0;var r=null==t||""==t?"":" ----errDesc: \n"+t;if(console.crlog("[SDK] Login Access CallBack, errCode: "+e+r),CRVideo_UploadingLog(),"3"==e||"1"==e)console.crlog("[SDK] 登录access未知错误: "+t);else if("800"==e)console.crlog("[SDK] 会议不存在或已结束!");else if("801"==e)console.crlog("[SDK] 房间密码不正确!");else if("802"==e)console.crlog("[SDK] 房间终端数量已满（购买的license不够)!");else if("803"==e)console.crlog("[SDK] 分配房间资源失败!");else if("804"==e)console.crlog("[SDK] 房间已加锁!");else if("805"==e)console.crlog("[SDK] 余额不足!");else if("806"==e)console.crlog("[SDK] 业务权限未开启!");else if("807"==e)console.crlog("[SDK] 重复进入了，该用户当前已在房间内！");else if("0"==e){var i=function(e){CRVideo.rtcCfg.iceServers.forEach((function(t){var n=t.urls,r=[];t.urls=n.map((function(t){var n=String(CRVideo.stunServerAddr),i=String(e);r.push(t.replace(n,i))})),console.crlog("[SDK] New stun server urls: ".concat(JSON.stringify(r))),t.urls=r}))};if(CRVideo.isMeeting=!0,CRVideo.meetingID=n.meetID,null!=on.Z.crmt.ACNT[4]&&8==on.Z.crmt.ACNT[4]&&window.__Rtc.CRRTCConf.setAssistantActor(n.termId,!0),CRVideo.firstEnterStatus=!0,setTimeout((function(){CRVideo.firstEnterStatus=!1}),3e3),window.__Rtc.CRRTCVideo.mainVideoTermID=n.mainVideoTermID||0,window.__Rtc.CRRTCVideo.windowMode=n.windowMode.value,window.__Rtc.CRRTCBoard.lastElemValue=n.lastElemValue+1,kt.lastElemValue=n.lastElemValue+1,window.__Rtc.CRRTCBoard.lastTabValue=n.lastTabValue+1,kt.lastTabValue=n.lastTabValue+1,window.__Rtc.CRRTCConf.curOption=n.option,window.__Rtc.CRRTCConf.shareState=n.confInfo.share_cfg?JSON.parse(n.confInfo.share_cfg):{state:0,shareID:0},window.__Rtc.CRRTCLocalVideo.selfieSegmentationPermission="1"===n.confInfo.ccfg_portrait_segmentation,window.__Rtc.CRRTCRecord.svrRecordStatus=null!=n.confInfo.srv_record_state?+n.confInfo.srv_record_state:0,window.__Rtc.CRRTCRecord.MixersList=n.confInfo.srv_record_cfg?JSON.parse(n.confInfo.srv_record_cfg):[],window.__Rtc.CRRTCVideo.vwalllo=null!=n.confInfo.vwalllo?+n.confInfo.vwalllo:0,null!=n.confInfo.hd){switch(n.confInfo.hd.toString()){case"true":n.confInfo.hd="1";break;case"false":n.confInfo.hd="0"}window.__Rtc.CRRTCConf.compVideoHD=n.confInfo.hd.toString()}for(var c=0;c<n.activeMembers.length;c++)CRVideo.allMemberInfo.push(n.activeMembers[c]);CRVideo.userInfo.detail=n.myDetail,CRVideo.userInfo.termId=n.termId,CRVideo.userInfo.nickname=n.nickname,CRVideo.userInfo.userId=n.userId||CRVideo.userInfo.userId,n.myDetail.userId=n.userId,o.Z.userInfo.setUserInfo(CRVideo.userInfo.nickname,CRVideo.userInfo.userId),function(){CRVideo.stunServerAddr||(CRVideo.webServerAddr.includes("".concat(window.__CRName,".com"))&&!CRVideo.webServerAddr.includes("crlab.".concat(window.__CRName,".com"))?CRVideo.stunServerAddr="47.104.128.57:30000":CRVideo.stunServerAddr="".concat(CRVideo.webServerAddr,":2699"));var e=[];e=1==CRVideo.MSProtocol?["turn:"+CRVideo.stunServerAddr+"?transport=udp"]:2==CRVideo.MSProtocol?["turn:"+CRVideo.stunServerAddr+"?transport=tcp"]:["turn:"+CRVideo.stunServerAddr+"?transport=udp","turn:"+CRVideo.stunServerAddr+"?transport=tcp"];var t=null!=__Rtc.postCmd.CallServerInfo?__Rtc.postCmd.CallServerInfo.RtcCfgVer:0;if(CRVideo.rtcCfg={iceServers:[{username:1==t?"conference":"".concat(window.__CRName),credential:1==t?"Nsyhl9t":"".concat(window.__CRName),urls:e}],iceTransportPolicy:"relay"},n.confInfo.ccfg_rtc_cfg){var r=JSON.parse(n.confInfo.ccfg_rtc_cfg);CRVideo.rtcCfg.iceServers[0].username=r.username,CRVideo.rtcCfg.iceServers[0].credential=r.credential}}(),on.Z.crmt.STUNSVR?i(on.Z.crmt.STUNSVR):on.Z.crmt.STUNSVRPORT?i("".concat(CRVideo.accessSvr,":").concat(on.Z.crmt.STUNSVRPORT)):i("".concat(CRVideo.accessSvr,":").concat(CRVideo.stunServerAddr.split(":")[CRVideo.stunServerAddr.split(":").length-1]));var s=_.cloneDeep(CRVideo.rtcCfg);s.iceServers[0].username=CRVideo.rtcCfg.iceServers[0].username.includes("oudro")?"cl***om":CRVideo.rtcCfg.iceServers[0].username.replace("fere","***"),s.iceServers[0].credential="******",console.crlog("[SDK] New webrtc RTCPeerConnection config: ".concat(JSON.stringify(s))),console.crlog("[SDK] ".concat(CRVideo.sdkInfo)),console.crlog("[SDK] Browser Info: ".concat(navigator.userAgent)),console.crlog("[SDK] CRVideo.isWebRTC:".concat(CRVideo.isWebRTC)),CRVideo.meetingInfo=n,CRVideo.isWebRTC&&(console.crlog("[SDK] RTC Codecs: ".concat(window.__Rtc.rtc_codecs)),console.crlog("[SDK] Video input devices: ".concat(JSON.stringify(__Rtc.CRRTCLocalVideo.videoInput))),__Rtc.CRRTCAudio.uploadAudioDevicesStatus(),__Rtc.CRRTCLocalVideo.uploadVideoDeviceStatus(),__Rtc.CRRTCLocalVideo.uploadAllCamInfo(),CRVideo.allMemberInfo.forEach((function(e){e.termId==n.termId?(e.isSelf=!0,e.userId=e.userId||CRVideo.userInfo.userId,__Rtc.CRRTCConf.rights=Array.from(e.rights)):e.isSelf=!1,2!=e.actor&&3!=e.actor&&10!=e.actor&&11!=e.actor||(window.__Rtc.CRRTCConf.curActorID=e.termId),1!=e.actor&&3!=e.actor&&9!=e.actor&&11!=e.actor||(window.__Rtc.CRRTCConf.curPresenterID=e.termId),e.userId=void 0===e.userId||""===e.userId?Ice.generateUUID():e.userId,e.audioStatus=e.audioStatus.name,e.videoStatus=e.videoStatus.name,"family"==e.privRole?CRVideo.privRoleFamily=e.userId:"prisoner"==e.privRole&&(CRVideo.privRolePrison=e.userId)}))),CRVideo.controlSharkHand(),CRVideo.refreshSessionSharkHand(),console.crlog("[SDK] Enter meeting success, meetID:".concat(CRVideo.meetingID))}else console.crlog("[SDK][Error] Enter meeting fail! Error:".concat(e));CRVideo_UploadingLog();try{0==e&&(__Rtc.CRICEAPI.GetScreenShareInfo(),__Rtc.CRICEAPI.GetMediaInfo(),__Rtc.CRRTCSync.initSync(n),__Rtc.CRRTCCloudRecord.initRecord(n),__Rtc.CRRTCPrism.meetInfoUpload&&__Rtc.CRRTCPrism.uploadEnterMeetInfo(),window.__Rtc.CRRTCBoard.wbDescibes=n.wbDescibes,kt.wbDescibes=n.wbDescibes.map((function(e){return kt.V1WBDescToV2WBDesc(e)})),__Rtc.CRRTCBoard.initBoards(),kt.initBoards(),Nn.init(),a.Z.SDK_Event.emitEventListener("EnterMeetingSuccess",n)),"MeetSDK"==CRVideo.SDKKey?(console.crlog("[SDK] MeetSDK.enterMeetingRslt.target(".concat(e,", ").concat(CRVideo.userInfo.userId,", ").concat(CRVideo.userInfo.nickname,", ").concat(CRVideo.enterMeetingCookie,")")),x.Z.enterMeetingRslt.target(e,CRVideo.userInfo.userId,CRVideo.userInfo.nickname,CRVideo.enterMeetingCookie)):(console.crlog("[SDK] CRVideo_EnterMeetingRslt.target(".concat(e,",").concat(CRVideo.enterMeetingCookie,")")),CRVideo_EnterMeetingRslt.target(e,CRVideo.enterMeetingCookie)),CRVideo_UploadingLog()}catch(e){console.error(e)}window.loginData=n},__Rtc.CR__RefreshSessionRslt.callback=function(e,t,n){var r="0"==e?"success":"fail",i=null==t?"":t,o=(new Date).getTime()-n;"success"==r?console.crlog("[SDK] RefreshSessionRslt: ".concat(r," ").concat(i," delay:").concat(o,"ms")):console.crlog("[SDK] RefreshSessionRslt: ".concat(r," ").concat(i)),0==e&&-1!=CRVideo.REFRESH_SESSION_TIMER?CRVideo_NotifyNetworkDelay.target(o):-1!=CRVideo.REFRESH_SESSION_TIMER&&(clearTimeout(CRVideo.REFRESH_SESSION_TIMER),CRVideo.REFRESH_SESSION_TIMER=-1,-1==CRVideo.KEEPALIVE_TIMER||CRVideo.isExitmeet||(console.crlog("[SDK] RefreshSession fail, meeting dropped!!!"),console.crlog("[SDK] CRVideo_MeetingDropped.target(".concat(CRVideo_ERR_DEF.SOCKETEXCEPTION,")")),CRVideo.destroyMeetingConnect(),CRVideo_NotifyNetworkDelay.target("超时"),CRVideo_NetStateChanged.target(0),CRVideo_MeetingDropped.target(CRVideo_ERR_DEF.SOCKETEXCEPTION)))},__Rtc.CR__KeepAliveRslt.callback=function(e,t,n){var r="0"==e?"success":"fail",i=null==t?"":t,o=(new Date).getTime()-n;"success"==r?console.crlog("[SDK] KeepAliveRslt: ".concat(r," ").concat(i," delay:").concat(o,"ms")):console.crlog("[SDK] KeepAliveRslt: ".concat(r," ").concat(i)),0==e&&-1!=CRVideo.KEEPALIVE_TIMER?CRVideo_NotifyNetworkDelay.target(o):-1!=CRVideo.KEEPALIVE_TIMER&&(clearTimeout(CRVideo.KEEPALIVE_TIMER),CRVideo.KEEPALIVE_TIMER=-1,-1==CRVideo.REFRESH_SESSION_TIMER||CRVideo.isExitmeet||(console.crlog("[SDK] KeepAlive fail, meeting dropped!!!"),console.crlog("[SDK] CRVideo_MeetingDropped.target(".concat(CRVideo_ERR_DEF.SOCKETEXCEPTION,")")),CRVideo.destroyMeetingConnect(),CRVideo_NotifyNetworkDelay.target("超时"),CRVideo_NetStateChanged.target(0),CRVideo_MeetingDropped.target(CRVideo_ERR_DEF.SOCKETEXCEPTION)))},window.CRVideo_Uninit=function(){console.crlog("[SDK] CRVideo_Uninit()"),CRVideo.loginAuthFlag=0,CRVideo.webLoginOAuth={},__Rtc.CR__UnInit(),a.Z.SDK_Event.removeEventListener("EnterMeetingSuccess").removeEventListener("CleanMeetingData"),a.Z.SDK_Event.emitEventListener("SDKUnInit"),setTimeout((function(){CRVideo.destroyLogConnect(),clearTimeout(CRVideo.logReportTimer)}),5e3)},Qn="hidden"in document?"hidden":"webkitHidden"in document?"webkitHidden":"mozHidden"in document?"mozHidden":null,Yn=Qn.replace(/hidden/i,"visibilitychange"),document.addEventListener(Yn,(function(){document[Qn]||(console.crlog("[SDK] CRVideo.KEEPALIVE_TIMER-----"+CRVideo.KEEPALIVE_TIMER),console.crlog("[SDK] CRVideo.REFRESH_SESSION_TIMER-----"+CRVideo.REFRESH_SESSION_TIMER),CRVideo.KEEPLIVE_COMMIT&&(-1!=CRVideo.KEEPALIVE_TIMER&&CRVideo.controlSharkHand(),-1!=CRVideo.REFRESH_SESSION_TIMER&&CRVideo.refreshSessionSharkHand(),CRVideo_ShakeHand()))})),CRVideo.updateDevicesList=function(e){__Rtc.CRRTCAudio.audioInput=[],__Rtc.CRRTCAudio.audioOutput=[],__Rtc.CRRTCLocalVideo.videoInput=[];for(var t=1,n=1,r=1,i=0;i<e.length;i++){var o=e[i];if("audioinput"==o.kind){var a={};a.deviceId=o.deviceId,a.name=o.label||"麦克风 - 默认",a.kind=o.kind,a.id=t++,__Rtc.CRRTCAudio.audioInput.push(a)}else if("audiooutput"==o.kind){var c={};c.deviceId=o.deviceId,c.name=o.label||"扬声器 - 默认",c.kind=o.kind,c.id=n++,__Rtc.CRRTCAudio.audioOutput.push(c)}else if("videoinput"==o.kind){var s={};s.deviceId=o.deviceId||r,s.name=o.label||"摄像头 - 默认",s.kind=o.kind,s.id=r++,s.disabled=!1,s.locAttr={},s.stream=null,s.ssVal=0,s.connect=new _ConnectItemClass(s.id,++__Rtc.CRRTCLocalVideo.lastLocalVideoMSID),s.connect2=new _ConnectItemClass(s.id+1e4,__Rtc.CRRTCLocalVideo.lastLocalVideoMSID+1e3),__Rtc.CRRTCLocalVideo.videoInput.push(s)}}__Rtc.CRBrowser.curBrowserCfg.isMobile&&__Rtc.CRRTCLocalVideo.videoInput.length>0&&(__Rtc.CRRTCLocalVideo.videoInput=[],__Rtc.CRRTCLocalVideo.videoInput.push({facingMode:"user",name:"前置镜头",kind:"video",id:1,disabled:!1,locAttr:{},stream:null,ssVal:0,connect:new _ConnectItemClass(1,++__Rtc.CRRTCLocalVideo.lastLocalVideoMSID),connect2:new _ConnectItemClass(10001,__Rtc.CRRTCLocalVideo.lastLocalVideoMSID+1e3)}),__Rtc.CRRTCLocalVideo.videoInput.push({facingMode:"environment",name:"后置镜头",kind:"video",id:2,disabled:!1,locAttr:{},stream:null,ssVal:0,connect:new _ConnectItemClass(2,++__Rtc.CRRTCLocalVideo.lastLocalVideoMSID),connect2:new _ConnectItemClass(10002,__Rtc.CRRTCLocalVideo.lastLocalVideoMSID+1e3)})),"Firefox"==__Rtc.CRBrowser.name?__Rtc.CRRTCAudio.audioOutput.push({name:"Firefox暂不支持切换扬声器",deviceId:""}):"Mac"==__Rtc.CRBrowser.curBrowserCfg.platform&&"Safari"==__Rtc.CRBrowser.curBrowserCfg.name&&__Rtc.CRRTCAudio.audioOutput.push({name:"Safari暂不支持切换扬声器",deviceId:""})},__Rtc.CR__VideoAllocRawExt2.callback=function(e,t,n,r){var i={VCT_CAMERA:"video",VCT_SCREEN:"screen",VCT_FILM:"media"}[t.contentType.name];if("video"==i)__Rtc.CRRTCVideo.videoAllocRawExt2(e,t,n,r);else{if("screen"==i)return void __Rtc.CRRTCScreen.videoAllocRawExt2(e,t,n,r);"media"==i&&__Rtc.CRRTCMedia.videoAllocRawExt2(e,t,n,r)}},__Rtc.CR__ModifyPeerAddrExt.callback=function(e,t,n){console.crlog("[SDK] CR__ModifyPeerAddrExt: MSID-----"+t);var r={type:"answer",sdp:n.get("sdp")},i=t.toString().substr(0,2);if(i==CRVideo.msType.localAudio)__Rtc.CRRTCAudio.modifyPeerAddrExt(r,+t,n);else{if(i==CRVideo.msType.localVideo)return void __Rtc.CRRTCVideo.modifyPeerAddrExt("localVideo",e,t,n);if(i==CRVideo.msType.remoteVideo)return void __Rtc.CRRTCVideo.modifyPeerAddrExt("remoteVideo",e,t,n);if(i==CRVideo.msType.localScreen)return void __Rtc.CRRTCScreen.modifyPeerAddrExt("localScreen",e,t,n);if(i==CRVideo.msType.remoteScreen)return void __Rtc.CRRTCScreen.modifyPeerAddrExt("remoteScreen",e,t,n);if(i==CRVideo.msType.remoteMedia)return void __Rtc.CRRTCMedia.modifyPeerAddrExt("remoteMedia",e,t,n);if(i==CRVideo.msType.localMediaVideo)return void __Rtc.CRRTCMedia.modifyPeerAddrExt("localMediaVideo",e,t,n);if(i==CRVideo.msType.localMediaAudio)return void __Rtc.CRRTCMedia.modifyPeerAddrExt("localMediaAudio",e,t,n)}},window.videoResolutionReport=function(e,t,n,r){if(CRVideo.isMeeting){if("screen"==t){var i=__Rtc.CRRTCScreen.localScreenStream.getTracks()[0].getSettings();r=i.height?i.height:1080,n=i.widht?i.widht:1920}if("media"==t){var o=(__Rtc.CRRTCMedia.localMediaVideoConnection_VP8.stream?__Rtc.CRRTCMedia.localMediaVideoConnection_VP8:__Rtc.CRRTCMedia.localMediaVideoConnection_H264).stream.getTracks()[0].getSettings();r=o.height?o.height:1080,n=o.widht?o.widht:1920}console.crlog("[SDK] CR__VideoResolutionReport(".concat(e,",").concat(n,",").concat(r,")")),__Rtc.CR__VideoResolutionReport(e,n,r)}},__Rtc.CR__VideoResolutionReportRslt.callback=function(e,t){e=0==e?"success":"fail",t=null==t?"":t},CRVideo.leftMeetingFun=function(e){return new Promise((function(t,n){console.crlog("[SDK] CRVideo.leftMeetingFun..."),CRVideo.isWebRTC&&rn.Z.stopVideo(),clearTimeout(CRVideo.KEEPALIVE_TIMER),CRVideo.KEEPALIVE_TIMER=-1,clearTimeout(CRVideo.REFRESH_SESSION_TIMER),CRVideo.REFRESH_SESSION_TIMER=-1,window.__Rtc.CRRTCAudio&&__Rtc.CRRTCAudio.stopAllAudioTrack(),window.__Rtc.CRRTCAudio&&__Rtc.CRRTCAudio.closeAllPeerConnection(),window.__Rtc.CRRTCRemoteVideo&&__Rtc.CRRTCRemoteVideo.closeAllRTCConnection(),window.__Rtc.CRRTCLocalVideo&&__Rtc.CRRTCLocalVideo.stopAllLocalVideoAndConnect(),window.__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.isMySharing&&(CRVideo_StopScreenShare(),__Rtc.CRICEAPI.SetCurrentTab(8,{termID:CRVideo.userInfo.termId,localID:0})),window.__Rtc.CRRTCMedia&&0==__Rtc.CRRTCMedia.mediaShareInfo.state&&__Rtc.CRRTCMedia.mediaShareInfo.userID==CRVideo.userInfo.userId&&(CRVideo_StopPlayMedia(),__Rtc.CRICEAPI.SetCurrentTab(8,{termID:CRVideo.userInfo.termId,localID:0})),"token失效"==e&&(console.crlog("[SDK] CRVideo_MeetingDropped.target(".concat(CRVideo_ERR_DEF.SDK_TOKEN_TIMEOUT,")")),CRVideo.destroyMeetingConnect(),CRVideo_MeetingDropped.target(CRVideo_ERR_DEF.SDK_TOKEN_TIMEOUT)),a.Z.SDK_Event.emitEventListener("CleanMeetingData"),setTimeout((function(){return CRVideo.isMeeting=!1,CRVideo.allMemberInfo=[],window.__Rtc.CRRTCConf.initData(),window.__Rtc.CRRTCIMMsg.initData(),window.__Rtc.CRRTCTermMsg.initData(),window.__Rtc.CRRTCAudio.initData(),window.__Rtc.CRRTCVideo.initData(),window.__Rtc.CRRTCLocalVideo.initData(),window.__Rtc.CRRTCRemoteVideo.initData(),window.__Rtc.CRRTCUI.initData(),window.__Rtc.CRRTCRecord.initData(),window.__Rtc.CRRTCScreen.initData(),window.__Rtc.CRRTCMedia.initData(),window.__Rtc.CRRTCBoard.initData(),kt.initData(),window.__Rtc.CRRTCSync.initData(),window.__Rtc.CRRTCCloudRecord.initData(),window.__Rtc.CRRTCPrism.initData(),Gn.initData(),on.Z.initData(),t()}),0)}))},window.CRVideo_ExitMeeting=function(e){console.crlog("[SDK] CRVideo_ExitMeeting(".concat(e,")"));var t=void 0!==e?e:"主动离开";"token失效"==t&&console.crlog("[SDK] Token Expire, do left meeting!"),__Rtc.CR__Exit(t),CRVideo.isExitmeet||(CRVideo.isExitmeet=!0,CRVideo.isMeeting=!1,CRVideo_UploadingLog(),setTimeout((function(){CRVideo_UploadingLog()}),1e3),CRVideo.meetingExiting=!0,setTimeout((function(){CRVideo.meetingExiting=!1}),3e3),console.crlog("[SDK] exit meeting---do left meeting function"),CRVideo.leftMeetingFun(t))},__Rtc.CR__ExitRslt.callback=function(e,t){e=0==e?"success":"fail",t=null==t?"":t,console.crlog("[SDK] ExitRslt Callback："+e+" "+t),CRVideo.CallID="",__Rtc.CR__UnInit(),setTimeout((function(){CRVideo.destroyMeetingConnect()}),1e3),Nn.uninit()},__Rtc.CR__Free.callback=function(e){console.crlog("[SDK] Free Callback: msid is "+e);var t=e.toString().substr(0,2);t==CRVideo.msType.localAudio?__Rtc.CRRTCAudio.audioMSIDFree(+e):t==CRVideo.msType.localVideo?__Rtc.CRRTCLocalVideo.videoMSIDFree(+e):t==CRVideo.msType.remoteVideo&&__Rtc.CRRTCRemoteVideo.videoMSIDFree(+e)};var Xn=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initData(),this.initIceCallback(),this.initIceNotify(),this.initSDKInterface()},(t=[{key:"initData",value:function(){console.crlog("[EnMeet] EnMeetModule initData...")}},{key:"initIceCallback",value:function(){}},{key:"initIceNotify",value:function(){}},{key:"initSDKInterface",value:function(){}}])&&Jn(e.prototype,t),n&&Jn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function $n(e){return $n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$n(e)}function er(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,tr(r.key),r)}}function tr(e){var t=function(e,t){if("object"!=$n(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=$n(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==$n(t)?t:t+""}window.__crEnMeetClass=Xn,window.__Rtc.CRRTCEnmeet=new Xn,window.CRVideo_NotifyNetworkDelay=new CRVideo.CbProxy("CRVideo_NotifyNetworkDelay"),window.CRVideo_MeetingDropped=new CRVideo.CbProxy("CRVideo_MeetingDropped");var nr=window.CRVideo,rr=(window.Ice,function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initData()},(t=[{key:"initData",value:function(){console.crlog("[Prism] PrismModule initData..."),this.meetInfoUpload="MeetSDK"==nr.SDKKey,this.UA=navigator.userAgent,this.appId="",this.confId="",this.userId="",this.cost="",this.systemType="",this.systemVersion="",this.terminal="",this.sdkVersion="",this.ip="",this.networkType="",this.server="",this.baseDetail=[],this.streamDetail=[],clearInterval(this.getMeetDetailTimer),this.getMeetDetailTimer=-1,clearInterval(this.meetDetailUploadTimer),this.meetDetailUploadTimer=-1,this.localAudioEnergy=null,this.distantAudioEnergy=null,this.meetDetailUploadTime=3e4}},{key:"getBaseMessage",value:function(){var e={};return e.confId=this.confId=nr.meetingInfo.meetID,e.userId=this.userId="MeetSDK"==nr.SDKKey?nr.userInfo.nickname:nr.userInfo.userId,e.cost=this.cost=(new Date).getTime()-nr.startEnterTimestamp,e.systemType=this.systemType="Web",e.systemVersion=this.systemVersion="".concat(__Rtc.CRBrowser.curBrowserCfg.name,"_").concat(__Rtc.CRBrowser.curBrowserCfg.ver),e.terminal=this.terminal=this.UA.split("(")[1].split(")")[0],e.sdkVersion=this.sdkVersion=nr.sdkver,e.ip=this.ip=nr.myPublicIP,e.networkType=this.networkType=this.getNetType()||"未知",e.server=this.server=nr.resmAccessNo,null!=nr.LoginParam&&null!=nr.LoginParam.account&&(e.appId=this.appId=nr.LoginParam.account),e}},{key:"getNetType",value:function(){return this.UA.includes("WIFI")?"WIFI":this.UA.includes("4G")?"4G":void 0}},{key:"uploadEnterMeetInfo",value:function(){var e=this.getBaseMessage(),t=this;setTimeout((function(){var n="https://".concat(nr.webServerAddr,"/").concat(window.__CRNameUP,"-REPORT/report");"conference"==nr.rtcCfg.iceServers[0].username&&(n="https://".concat(nr.webServerAddr,"/CLOUDMEETING-REPORT/report")),(0,d.Z)({url:n,type:"post",data:JSON.stringify(e),success:function(e){t.begainMeetDetailUpload()},error:function(e){console.crlog("[Prism] 入会信息上报失败，不再启动会议详情定期上报！")}})}),2e3)}},{key:"begainMeetDetailUpload",value:function(){var e=this;this.startGetMeetDetail(),clearInterval(this.meetDetailUploadTimer),setTimeout((function(){e.uploadMeetDetail()}),1e4),this.meetDetailUploadTimer=setInterval((function(){nr.isMeeting&&e.baseDetail.length>0&&e.streamDetail.length>0?e.uploadMeetDetail():nr.isMeeting||clearInterval(e.meetDetailUploadTimer)}),this.meetDetailUploadTime)}},{key:"uploadMeetDetail",value:function(){var e=this,t={confId:this.confId?this.confId:nr.meetingInfo.meetID,userId:this.userId?this.userId:"MeetSDK"==nr.SDKKey?nr.userInfo.nickname:nr.userInfo.userId,baseDetail:this.baseDetail,streamDetail:this.streamDetail};null!=nr.LoginParam&&null!=nr.LoginParam.account&&(t.appId=this.appId?this.appId:nr.LoginParam.account);var n="https://".concat(nr.webServerAddr,"/").concat(window.__CRNameUP,"-REPORT/report/detail");"conference"==nr.rtcCfg.iceServers[0].username&&(n="https://".concat(nr.webServerAddr,"/CLOUDMEETING-REPORT/report/detail")),(0,d.Z)({url:n,type:"post",data:JSON.stringify(t),success:function(t){(200==t.code||e.baseDetail.length>100)&&(e.baseDetail=[],e.streamDetail=[])},error:function(t){console.crlog("[Prism] 会议详情上报失败，停止继续收集和上报"),clearInterval(e.meetDetailUploadTimer),clearInterval(e.getMeetDetailTimer)}})}},{key:"startGetMeetDetail",value:function(){var e=this;clearInterval(this.getMeetDetailTimer),this.getMeetDetail(),this.getMeetDetailTimer=setInterval((function(){0==nr.isMeeting&&clearInterval(e.getMeetDetailTimer),e.getMeetDetail()}),1e4)}},{key:"getMeetDetail",value:function(){this.getBaseDetail(),this.getAudioRecStreamDetail(),this.getAudioSendStreamDetail(),this.getLocalVideoStreamDetail(),this.getRemoteVideoStreamDetail(),this.getLocalScreenShareStreamDetail(),this.getRemoteScreenShareStreamDetail(),this.getLocalMediaStreamDetail(),this.getRemoteMediaStreamDetail()}},{key:"getBaseDetail",value:function(){var e={};e.reportTime=parseInt((new Date).getTime()/1e3),e.networkScore=__Rtc.CRRTCAudio.networkScore>0?__Rtc.CRRTCAudio.networkScore:0,e.localVolume=__Rtc.CRRTCAudio.localAudioEnergy||0,e.distantVolume=__Rtc.CRRTCAudio.distantAudioEnergy||0,this.baseDetail.push(e)}},{key:"getAudioRecStreamDetail",value:function(){var e={streamId:"0.0"};e.reportTime=parseInt((new Date).getTime()/1e3),e.flowType=2,e.peerLossRate=__Rtc.CRRTCAudio.packetsLostRate||0,e.codeRate=__Rtc.CRRTCAudio.codeRateReceived||0,this.streamDetail.push(e)}},{key:"getAudioSendStreamDetail",value:function(){var e={streamId:"0.0"};e.reportTime=parseInt((new Date).getTime()/1e3),e.flowType=1,e.codeRate=__Rtc.CRRTCAudio.codeRateSend||0,this.streamDetail.push(e)}},{key:"getLocalVideoStreamDetail",value:function(){for(var e=__Rtc.CRRTCLocalVideo.videoInput,t=0;t<e.length;t++){var n=e[t].connect.connection,r=e[t].connect2.connection;if(n&&"connected"===n.connectionState){var i={};i.streamId="1.".concat(e[t].id),i.reportTime=parseInt((new Date).getTime()/1e3),i.flowType=1,i.resolutionWidth=e[t].connect.width||0,i.resolutionHeight=e[t].connect.height||0,i.frameRate=e[t].connect.frameRate||0,i.codeRate=e[t].connect.codeRate||0,this.streamDetail.push(i)}if(r&&"connected"===r.connectionState){var o={};o.streamId="1.".concat(e[t].id),o.reportTime=parseInt((new Date).getTime()/1e3),o.flowType=1,o.resolutionWidth=e[t].connect2.width||0,o.resolutionHeight=e[t].connect2.height||0,o.frameRate=e[t].connect2.frameRate||0,o.codeRate=e[t].connect2.codeRate||0,this.streamDetail.push(o)}}}},{key:"getRemoteVideoStreamDetail",value:function(){var e=this;__Rtc.CRRTCRemoteVideo.connectList.forEach((function(t){t.list.forEach((function(n){if(n.connection&&"connected"===n.connection.connectionState){var r={};r.streamId="1.".concat(n.camID),r.srcUserId=nr.findMemberInfo({use:"termId",want:"userId",value:t.termID}),r.reportTime=parseInt((new Date).getTime()/1e3),r.flowType=2,r.resolutionWidth=n.width||0,r.resolutionHeight=n.height||0,r.frameRate=n.frameRate||0,r.codeRate=n.codeRate||0,r.peerLossRate=n.packetsLostRate||0,e.streamDetail.push(r)}}))}))}},{key:"getLocalScreenShareStreamDetail",value:function(){var e=__Rtc.CRRTCScreen.localConnectionVP8.stream?__Rtc.CRRTCScreen.localConnectionVP8:__Rtc.CRRTCScreen.localConnectionH264;if(e.connection&&"connected"===e.connection.connectionState){var t={streamId:"2.0"};t.reportTime=parseInt((new Date).getTime()/1e3),t.flowType=1,t.resolutionWidth=e.width||0,t.resolutionHeight=e.height||0,t.frameRate=e.frameRate||0,t.codeRate=e.codeRate||0,this.streamDetail.push(t)}}},{key:"getRemoteScreenShareStreamDetail",value:function(){var e=__Rtc.CRRTCScreen.remoteConnection;if(e.connection&&"connected"===e.connection.connectionState){var t={streamId:"2.0"};t.srcUserId=nr.findMemberInfo({want:"userId",use:"termId",value:__Rtc.CRRTCScreen.screenShareInfo.sharer}),t.reportTime=parseInt((new Date).getTime()/1e3),t.flowType=2,t.resolutionWidth=e.width||0,t.resolutionHeight=e.height||0,t.frameRate=e.frameRate||0,t.codeRate=e.codeRate||0,t.peerLossRate=e.packetsLostRate||0,this.streamDetail.push(t)}}},{key:"getLocalMediaStreamDetail",value:function(){var e=__Rtc.CRRTCMedia.localMediaVideoConnection_VP8.stream?__Rtc.CRRTCMedia.localMediaVideoConnection_VP8:__Rtc.CRRTCMedia.localMediaVideoConnection_H264;if(e.connection&&"connected"===e.connection.connectionState){var t={streamId:"3.0"};t.reportTime=parseInt((new Date).getTime()/1e3),t.flowType=1,t.resolutionWidth=e.width||0,t.resolutionHeight=e.height||0,t.frameRate=e.frameRate||0,t.codeRate=e.codeRate||0,this.streamDetail.push(t)}}},{key:"getRemoteMediaStreamDetail",value:function(){var e=__Rtc.CRRTCMedia.remoteMediaConnection;if(e.connection&&"connected"===e.connection.connectionState){var t={streamId:"3.0"};t.srcUserId=__Rtc.CRRTCMedia.mediaShareInfo.userID,t.reportTime=parseInt((new Date).getTime()/1e3),t.flowType=2,t.resolutionWidth=e.width||0,t.resolutionHeight=e.height||0,t.frameRate=e.frameRate||0,t.codeRate=e.codeRate||0,t.peerLossRate=e.packetsLostRate||0,this.streamDetail.push(t)}}}])&&er(e.prototype,t),n&&er(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}());function ir(e,t,n){var r=document.createElement("a");r.href=window.URL.createObjectURL(e),r.download="".concat(t,".").concat(n),r.click()}function or(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=0,i=e.length*(t/8),o=new ArrayBuffer(i),a=new DataView(o);if(8===t)for(var c=0;c<e.length;c++,r++){var s=Math.max(-1,Math.min(1,e[c])),l=s<0?128*s:127*s;l=+l+128,a.setInt8(r,l)}else for(var u=0;u<e.length;u++,r+=2){var d=Math.max(-1,Math.min(1,e[u]));a.setInt16(r,d<0?32768*d:32767*d,n)}return a}function ar(e){return ar="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ar(e)}function cr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,sr(r.key),r)}}function sr(e){var t=function(e,t){if("object"!=ar(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ar(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ar(t)?t:t+""}window.__Rtc.CRRTCPrism=new rr;var lr=function(){return e=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.stream=n,this.aSide=t.aSide,this.getType=t.getType,this.sampleBits=t.jsonParam.sampleBits,this.sampleRate=t.jsonParam.sampleRate,this.eachSize=t.jsonParam.eachSize,this.eachTime=t.jsonParam.eachTime,this.fileName=t.jsonParam.fileName,this.size=0,this.lBuffer=[],this.rBuffer=[],this.tempPCMBuffer=[],this.tempSize=0,this.fileSize=0,this.duration=0,this.needRecord=!0;var r,i=new(window.AudioContext||window.webkitAudioContext);this.inputSampleRate=i.sampleRate,this.setNewOption(t),this.littleEdian=(r=new ArrayBuffer(2),new DataView(r).setInt16(0,256,!0),256===new Int16Array(r)[0])},t=[{key:"setNewOption",value:function(){this.config={sampleBits:~[8,16].indexOf(this.sampleBits)?this.sampleBits:16,sampleRate:~[8e3,11025,16e3,22050,24e3,44100,48e3].indexOf(this.sampleRate)?this.sampleRate:this.inputSampleRate,numChannels:~[1,2].indexOf(this.numChannels)?this.numChannels:1},this.outputSampleRate=this.config.sampleRate,this.oututSampleBits=this.config.sampleBits}},{key:"startRecord",value:function(){return this.context&&this.destroyRecord(),this.initRecorder(),this.audioInput=this.context.createMediaStreamSource(this.stream),this.audioInput.connect(this.analyser),this.analyser.connect(this.recorder),this.recorder.connect(this.context.destination),0}},{key:"pauseRecord",value:function(){this.needRecord=!1}},{key:"resumeRecord",value:function(){this.needRecord=!0}},{key:"stopRecord",value:function(){0==this.getType&&this.size>0&&this.getPCM(),1==this.getType&&this.downloadPCM(this.fileName),this.audioInput&&this.audioInput.disconnect(),this.source&&this.source.stop(),this.recorder.disconnect(),this.analyser.disconnect(),this.needRecord=!0}},{key:"initRecorder",value:function(){var e=this;this.clearRecordStatus(),this.context=new(window.AudioContext||window.webkitAudioContext),this.analyser=this.context.createAnalyser(),this.analyser.fftSize=2048;var t=this.context.createScriptProcessor||this.context.createJavaScriptNode;this.recorder=t.apply(this.context,[4096,this.config.numChannels,this.config.numChannels]),this.recorder.onaudioprocess=function(t){if(e.needRecord){var n=t.inputBuffer.getChannelData(0),r=null;e.lBuffer.push(new Float32Array(n)),e.size+=n.length,2===e.config.numChannels&&(r=t.inputBuffer.getChannelData(1),e.rBuffer.push(new Float32Array(r)),e.size+=r.length),e.fileSize=Math.floor(e.size/Math.max(e.inputSampleRate/e.outputSampleRate,1))*(e.oututSampleBits/8),e.duration+=4096/e.inputSampleRate,0==e.getType&&e.eachSize&&e.fileSize>=e.eachSize&&e.getPCM(),0==e.getType&&e.eachTime&&e.duration>=e.eachTime&&e.getPCM()}}}},{key:"destroyRecord",value:function(){return this.clearRecordStatus(),this.closeAudioContext()}},{key:"clearRecordStatus",value:function(){this.lBuffer.length=0,this.rBuffer.length=0,this.size=0,this.fileSize=0,this.PCM=null,this.audioInput=null,this.duration=0}},{key:"closeAudioContext",value:function(){return this.context&&this.context.close&&"closed"!==this.context.state?this.context.close():new Promise((function(e){e()}))}},{key:"getPCM",value:function(){var e=this.getData();return e=function(e,t,n){for(var r=t/n,i=Math.max(r,1),o=e.left,a=e.right,c=Math.floor((o.length+a.length)/r),s=new Float32Array(c),l=0,u=0;l<c;){var d=Math.floor(u);s[l]=o[d],l++,a.length&&(s[l]=a[d],l++),u+=i}return s}(e,this.inputSampleRate,this.outputSampleRate),0==this.getType?window.CRVideo_NotifyAudioPCMDat.target(this.aSide,or(e,this.oututSampleBits,this.littleEdian)):or(e,this.oututSampleBits,this.littleEdian)}},{key:"getPCMBlob",value:function(){return new Blob([this.getPCM()])}},{key:"downloadPCM",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"recorder";!function(e){ir(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"recorder","pcm")}(this.getPCMBlob(),e)}},{key:"getData",value:function(){var e=this.flat();return 0==this.getType&&(this.tempPCMBuffer=this.lBuffer,this.tempSize=this.size,this.lBuffer=[],this.size=0,this.duration=0,this.fileSize=0),e}},{key:"flat",value:function(){var e=null,t=new Float32Array(0);1===this.config.numChannels?e=new Float32Array(this.size):(e=new Float32Array(this.size/2),t=new Float32Array(this.size/2));for(var n=0,r=0;r<this.lBuffer.length;r++)e.set(this.lBuffer[r],n),n+=this.lBuffer[r].length;n=0;for(var i=0;i<this.rBuffer.length;i++)t.set(this.rBuffer[i],n),n+=this.rBuffer[i].length;return{left:e,right:t}}}],t&&cr(e.prototype,t),n&&cr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function ur(e){return ur="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ur(e)}function dr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,fr(r.key),r)}}function fr(e){var t=function(e,t){if("object"!=ur(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ur(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ur(t)?t:t+""}var hr=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initSDKInterface(),this.micRecorder=null,this.speakerRecorder=null},t=[{key:"initSDKInterface",value:function(){var e=this;window.CRVideo_StartGetAudioPCM=function(t,n,r){try{console.crlog("[AudioRecorder] CRVideo_StartGetAudioPCM(".concat(t,",").concat(n,",").concat(JSON.stringify(r),")"))}catch(e){console.error(e)}return e.startGetAudioPCM(t,n,r)},window.CRVideo_StopGetAudioPCM=function(t){console.crlog("[AudioRecorder] CRVideo_StopGetAudioPCM(".concat(t,")")),e.stopGetAudioPCM(t)}}},{key:"startGetAudioPCM",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(0==t&&null===this.micRecorder?e=__Rtc.CRRTCAudio.localAudioStream:1==t&&null===this.speakerRecorder&&(e=__Rtc.CRRTCAudio.distantAudioStream),0==n&&!r.eachSize&&!r.eachTime)return 1;if(1==n&&!r.fileName)return 1;if(!e||1!=e.active)return 1;r.sampleBits=void 0===r.sampleBits?r.sampleBits=16:r.sampleBits,r.sampleRate=void 0===r.sampleRate?r.sampleRate=16e3:r.sampleRate;var i=new lr({aSide:t,getType:n,jsonParam:r},e);return 0==t?this.micRecorder=i:this.speakerRecorder=i,i.startRecord()}},{key:"stopGetAudioPCM",value:function(e){0==e&&this.micRecorder&&(this.micRecorder.stopRecord(),this.micRecorder=null),1==e&&this.speakerRecorder&&(this.speakerRecorder.stopRecord(),this.speakerRecorder=null)}}],t&&dr(e.prototype,t),n&&dr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();function pr(e,t,n,r){var i=this,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=JSON.parse(JSON.stringify(r)),c=n.drawCanvas,s=n.pageID,l=n.canvasContainer,u=c.width/t._wbDesc.width,d=a.attr||{},f=null!=d.fontSize?d.fontSize:t._toolAttr.fontSize,h=null!=d.fontWeight?d.fontWeight:t._toolAttr.fontWeight,p=null!=d.fontStyle?d.fontStyle:t._toolAttr.fontStyle,_=null!=d.fontFamily?d.fontFamily:t._toolAttr.fontFamily,g=null!=d.fontUnderLine?d.fontUnderLine:t._toolAttr.fontUnderLine,C=null!=d.penColor?d.penColor:t._toolAttr.color,v=null!=d.txtBkColor?d.txtBkColor:t._toolAttr.fontBackGroundColor;this.minWidth=0,this.minHeight=0,this.calcBKSzie=function(){var e,t=0,n=0,r=i.textInput.value.split("\n");return r.forEach((function(n){document.querySelector(".calTextWidth_".concat(s))&&document.querySelector("body").removeChild(document.querySelector(".calTextWidth_".concat(s)));var r=document.createElement("text");r.className="calTextWidth_".concat(s),document.querySelector("body").appendChild(r),r.style.position="absolute",r.style.top=0,r.style.left=0,r.style.zIndex=0,r.style.opacity=0,r.style.fontSize=f*u+"px",r.style.fontWeight=h,r.style.fontStyle=p,r.style.fontFamily=_,r.innerText=n;var i=r.clientWidth;t=i>t&&n.length>0?i:t;var o=window.getComputedStyle(r);e=o.getPropertyValue("letter-spacing")})),n=(n=i.textInput.style.lineHeight.replace("px","")*r.length)<i.minHeight?i.minHeight:n,{width:t=t<i.minWidth?i.minWidth:t,height:n,letterSpacing:e}},this.onInputHandler=function(){var e=i.calcBKSzie(),t=e.width,n=e.height,r=e.letterSpacing;i.textInput.style.width=t+.1*f+"px",i.textInput.style.height=n+"px",i.textInput.style.letterSpacing=r},this.onBlurHandler=function(){a.attr.txtBkColor=v,a.attr.fontSize=f,a.attr.fontWeight=h,a.attr.fontStyle=p,a.attr.fontUnderLine=g,a.attr.fontFamily=_,a.attr.txt=i.textInput.value.toString(),o||(a.top=Math.round(a.top-a.attr.fontSize/2-10)),i.textInput.value.length>0&&(o?a.attr.txt!=r.attr.txt&&(!t.boardV1&&e.modifyShapeAttr(t._boardID,s,a),t.boardV1&&e.modifyElement(t._boardID,s,a),t._resumableShapesArr=[],t._revocableShapesArr.push({action:"modify",oldShape:{boardID:t._boardID,pageID:s,shape:r},newShape:{boardID:t._boardID,pageID:s,shape:a}}),t._changeRedoUndoState()):(!t.boardV1&&e.addShape(t._boardID,s,a),t.boardV1&&e.addElement(t._boardID,s,a),t._resumableShapesArr=[],t._revocableShapesArr.push({action:"add",shape:{boardID:t._boardID,pageID:s,shape:a}}),t._changeRedoUndoState(),t._drawShape(n,a),t._addShapeToShapeList(JSON.parse(JSON.stringify(a)),s))),i.textInput.style.display="none",i.textInput.value="",i.textInput.onblur=null,i.textInput.removeEventListener("blur",i.onBlurHandler),l.removeChild(document.querySelector(".".concat(i.textInput.className)))},this.onFocusHandler=function(){},this.createInput=function(){var e=document.createElement("textarea");if(e.className="text-input-".concat(Math.round(1e6*Math.random())),e.style.position="absolute",e.style.margin="0",e.style.padding=10*u+"px",e.style.paddingTop=(10-.05*f)*u+"px",e.style.zIndex="2",e.style.resize="none",e.style.display="none",e.style.outline="none",e.style.border="none",e.style.overflow="hidden",e.style.boxSizing="content-box",e.style.fontSize=f*u+"px",e.style.height=f*u+"px",e.style.width=10*u+"px",e.style.lineHeight=1.1*f*u+"px",e.style.left=a.left*u+"px",e.style.top=(a.top-f/2-10)*u+"px",e.style.color=C,e.style.fontWeight=h,e.style.fontStyle=p,e.style.fontFamily=_,e.style.backgroundColor=v,e.style.textDecoration=g?"underline":"none",i.textInput=e,o){e.value=a.attr.txt;var t=i.calcBKSzie(),n=t.width,r=t.height,c=t.letterSpacing;i.minWidth=n,i.minHeight=r,e.style.top=a.top*u+"px",e.style.width=n+"px",e.style.height=r+"px",e.style.letterSpacing=c,i.onInputHandler()}return e.addEventListener("input",i.onInputHandler),e.addEventListener("blur",i.onBlurHandler),e.addEventListener("focus",i.onFocusHandler),l.appendChild(e),i.showInput(),e},this.showInput=function(){i.textInput.style.display="block",setTimeout((function(){i.textInput.focus()}),0)},this.createInput()}function _r(e){return _r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_r(e)}function gr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,vr(r.key),r)}}function vr(e){var t=function(e,t){if("object"!=_r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=_r(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==_r(t)?t:t+""}window.__Rtc.CRRTCAudioRecorder=new hr,window.CRVideo_NotifyAudioPCMDat=new CRVideo.CbProxy("CRVideo_NotifyAudioPCMDat");var mr=window.CRVideo,yr=window.Ice,Sr=0,Ir=1,Rr=1,wr=2,br=0,Er=1,Dr=2,Pr=3,Tr=4,xr=5,Mr=6,Ar=7,Or=8,kr=9,Vr=10,Nr=11,Lr=12,Ur=13,jr=1,Br=function(){return e=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._id="boardView_".concat(yr.generateUUID()),this._boardID="",this._wbDesc=null,this._curPageID=0,this._handlerDiv=null,this._mainContainerDiv=null,this._canvasList=[],this._mainContainerDivStyle={},this._canvasStyle={},this._pageMarginClientHeight=0,this._canvasContainerHeight=0,this._shapeDataCacheContainer=[],this._shapeDataSendTimer=-1,this._shapeDataSendInterval=100,this._drawAllShapesTimeout=-1,this._drawAllShapesWaiting=!1,this.boardV1=n,this._drawAllShapes=a.Z.debounce(this._drawAllShapesB,200),this._init(t)},t=[{key:"_init",value:function(e){this._initCallback(),this._initData(e),this._initDom()}},{key:"_initData",value:function(e){this._curPageID=0,this._lastOrder=1,this._revocableShapesArr=[],this._resumableShapesArr=[],this._undo=!1,this._redo=!1,this._shapeType=br,this._pageMode=Ir,this._attr={readOnly:e.readOnly||!1,asyncPage:e.asyncPage||!0,followPage:e.followPage||!0,asyncScale:e.asyncScale||!0,followScale:e.followScale||!0,pageMargin:e.pageMargin||10,showRange:e.showRange||!1},this._toolAttr={lineWidth:1,lineStyle:jr,color:"rgba(0,0,0,1)",fontSize:20,fontFamily:"sans-serif",fontWeight:"normal",fontStyle:"normal",fontUnderLine:!1,fontBackGroundColor:"rgba(0,0,0,1)",fill:!1,rectRadius:0,fillColor:"rgba(0,0,0,0.8)"}}},{key:"_initCallback",value:function(){var e=this;this.notifyBoardCurPageChanged=new mr.CbProxy("notifyBoardCurPageChanged"),this.notifyRedoEnableChanged=new mr.CbProxy("notifyRedoEnableChanged"),this.notifyUndoEnableChanged=new mr.CbProxy("notifyUndoEnableChanged"),this.notifyScaleChanged=new mr.CbProxy("notifyScaleChanged"),this.notifyMarkException=new mr.CbProxy("notifyMarkException"),this.notifyUserTextInput=new mr.CbProxy("notifyUserTextInput"),this.notifyMarkException=new mr.CbProxy("notifyMarkException"),_n.addEventListener("notifySetScale",(function(t){t.wId==e._boardID&&t.opId!=mr.userInfo.userId&&e._attr.followScale&&(e._wbDesc.scale=t.scale,e.resize("notifySetScale"),e.notifyScaleChanged.target(t.wId,t.scale,t.opId))}))}},{key:"_initDom",value:function(){var e=this;for(var t in console.crlog("[BoardView] ".concat(this._id," _initDom")),this._handlerDiv||(this._handlerDiv=document.createElement("div"),this._handlerDiv.className="CRBoardView-handler-div",this._handlerDiv.id=this._id,this._handlerDiv.style.width="100%",this._handlerDiv.style.height="100%",this._handlerDiv.style.position="relative",this._handlerDiv.style.boxSizing="border-box",this._handlerDiv.style.overflow="auto"),this._handlerDiv.innerHTML="",this._mainContainerDiv=document.createElement("div"),this._mainContainerDiv.className="CRBoardView-main-container-div",this._mainContainerDiv.style.position="absolute",this._mainContainerDiv.style.top="0",this._mainContainerDiv.style.left="0",this._mainContainerDiv.style.right="0",this._mainContainerDiv.style.bottom="0",this._mainContainerDiv.style.margin="auto",this._mainContainerDiv.style.display="flex",this._mainContainerDiv.style.flexDirection="column",this._mainContainerDiv.style.justifyContent="flex-start",this._mainContainerDiv.style.alignItems="flex-start",this._mainContainerDiv.style.fontSize=0,this._mainContainerDivStyle)this._mainContainerDiv.style[t]=this._mainContainerDivStyle[t];this._handlerDiv.appendChild(this._mainContainerDiv),new ResizeObserver((function(t){e.resize("on resize")})).observe(this._handlerDiv)}},{key:"_bindingBoardInfo",value:function(){var e=this,t=this.boardV1?kt.wbDescibes.find((function(t){return t.wId==e._boardID})):Nn.wbDescList.find((function(t){return t.wId==e._boardID}));t&&(console.crlog("[BoardView] ".concat(this._id," _bindingBoardInfo, wID: ").concat(this._boardID)),this._wbDesc=t,this.boardV1&&-1==kt.boardUIList.findIndex((function(t){return t._id==e._id}))&&kt.boardUIList.push(this),this.boardV1||-1!=Nn.viewList.findIndex((function(t){return t._id==e._id}))||Nn.viewList.push(this),this._wbDesc.imgType!==wr&&this._wbDesc.imgType!==Rr||(this._pageMode=Sr),this._createCanvas(),this._refreshPos())}},{key:"_createCanvas",value:function(){this._canvasList=[];for(var e=0;e<this._wbDesc.pageCount;e++){var t=document.createElement("div");t.className="CRBoardView-canvas-container-div",t.style.position="relative",this._mainContainerDiv.appendChild(t);var n=document.createElement("canvas"),r=n.getContext("2d");n.className="CRBoardView-shape-canvas",n.style.boxSizing="border-box",n.style.backgroundColor="rgba(255,255,255,1)",n.style.height="100%",n.style.width="100%",n.width=this._wbDesc.width||0,n.height=this._wbDesc.height||0,t.appendChild(n);var i=document.createElement("canvas"),o=i.getContext("2d");for(var a in i.className="CRBoardView-draw-canvas",i.style.position="absolute",i.width=this._wbDesc.width||0,i.height=this._wbDesc.height||0,i.style.left="0px",i.style.top="0px",i.style.width="100%",i.style.height="100%",t.appendChild(i),this._canvasList.push({canvasContainer:t,shapeCanvas:n,drawCanvas:i,shapeCanvasCtx:r,drawCanvasCtx:o,pageID:e}),this._canvasStyle)n.style[a]=this._canvasStyle[a]}this._loadEvent()}},{key:"_refreshPos",value:function(e){var t=this,n=this._wbDesc,r=n.xPos,i=n.yPos;this._attr.followPage&&(this._handlerDiv.onscroll=null,clearTimeout(this._loadEventTimeout),this._loadEventTimeout=setTimeout((function(){t._loadEvent()}),50)),this._pageMode===Sr&&null!=e?this.setCurPage(e):(this._handlerDiv.scrollTop=(this._handlerDiv.scrollHeight+this._pageMarginClientHeight)*i,this._handlerDiv.scrollLeft=r*this._handlerDiv.scrollWidth),this._calcCurPageID()}},{key:"_calcCurPageID",value:function(){var e=this._curPageID,t=this._canvasContainerHeight,n=this._pageMarginClientHeight,r=this._pageMode===Sr?this._mainContainerDiv.clientHeight:this._handlerDiv.clientHeight,i=this._pageMode===Sr?this._mainContainerDiv.scrollTop:this._handlerDiv.scrollTop,o=t+n/2-r/2;this._curPageID=0==i||1==this._wbDesc.pageCount?0:Math.floor((i-o)/(t+n))+1,e!=this._curPageID&&this.notifyBoardCurPageChanged.target(this._curPageID)}},{key:"_setLineStyle",value:function(e,t){var n=e.shapeCanvas.width/this._wbDesc.width;e.drawCanvasCtx.strokeStyle=e.shapeCanvasCtx.strokeStyle=t.attr.penColor,e.drawCanvasCtx.lineWidth=e.shapeCanvasCtx.lineWidth=t.attr.penWidth*n,e.drawCanvasCtx.lineCap=e.shapeCanvasCtx.lineCap="round",e.drawCanvasCtx.lineJoin=e.shapeCanvasCtx.lineJoin="round",e.drawCanvasCtx.shadowBlur=e.shapeCanvasCtx.shadowBlur=0,e.shapeCanvasCtx.setLineDash(1===t.attr.penStyle?[]:[Math.ceil(1.5*t.attr.penWidth*n),Math.ceil(2*t.attr.penWidth*n)]),e.drawCanvasCtx.setLineDash(1===t.attr.penStyle?[]:[Math.ceil(1.5*t.attr.penWidth*n),Math.ceil(2*t.attr.penWidth*n)]),t.type===Mr&&(e.drawCanvasCtx.lineWidth=e.shapeCanvasCtx.lineWidth=2)}},{key:"_drawAllShapesB",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._wbDesc.shapeList&&1!=this._drawAllShapesWaiting){var n=null==t.pageID?null:t.pageID;this._clearAllMark(n),this._wbDesc.shapeList.forEach((function(t){if(n==t.pageId||null==n){var r=e._canvasList.find((function(e){return e.pageID==t.pageId}));t.bgImage&&e._drawBGImage(r,t.bgImage),t.animImgDatas&&e._drawPPTImages(r,t.animImgDatas),r.drawCanvasCtx.clearRect(0,0,r.drawCanvas.width,r.drawCanvas.height);for(var i=0;i<t.shapes.length;i++)e._drawShape(r,t.shapes[i])}})),t.callback&&t.callback()}}},{key:"_drawAppendShapeDat",value:function(e,t,n,r){var i=this;this._canvasList.forEach((function(o){if(o.pageID==e){var a=n.length,c=n.concat(r);if(0==c.length||0==r.length)return;var s=t.left,l=t.top,u=o.shapeCanvasCtx,d=o.shapeCanvas.width/i._wbDesc.width;if(i._setLineStyle(o,t),u.beginPath(),2==c.length)u.moveTo((s+c[0].x)*d,(l+c[0].y)*d),u.lineTo((2*s+c[0].x+c[1].x)/2*d,(2*l+c[0].y+c[1].y)/2*d);else if(c.length>2)for(var f=0;f<r.length;f++)if(1==a&&0==f)u.moveTo((s+c[a-1].x)*d,(l+c[a-1].y)*d),u.lineTo((2*s+c[a].x+c[a].x)/2*d,(2*l+c[a].y+c[a].y)/2*d);else{var h=c[a-1+f],p=h.x,_=h.y,g=c[a-2+f],C=g.x,v=g.y,m=c[a+f],y=m.x,S=m.y;u.moveTo((2*s+C+p)/2*d,(2*l+v+_)/2*d);var I=(2*s+y+p)/2,R=(2*l+S+_)/2;u.quadraticCurveTo((s+p)*d,(l+_)*d,I*d,R*d)}u.stroke(),i._calcRange(t)}}))}},{key:"_drawShape",value:function(e,t,n){switch(this._lastOrder=t.order>=this._lastOrder?t.order:this._lastOrder,t.type){case Er:case Ur:this._drawPencil(e,t,n);break;case Dr:this._drawStraightLine(e,t,n);break;case Pr:this._drawRect(e,t,n);break;case Tr:this._drawEllipse(e,t,n);break;case xr:case Nr:case Lr:this._drawArrow(e,t,n);break;case Mr:this._drawText(e,t,n);break;case Ar:this._drawImage(e,t,n)}}},{key:"_uploadCurPosition",value:function(){var e=this._pageMode===Sr?this._mainContainerDiv:this._handlerDiv;this._attr.asyncPage&&!this.boardV1&&In.setCurrentPos(this._boardID,e.scrollLeft/e.scrollWidth,e.scrollTop/(e.scrollHeight+this._pageMarginClientHeight)).then((function(e){})).catch((function(e){console.error(e)})),this._attr.asyncPage&&this.boardV1&&kt.setCurrentPage(this._boardID,this._curPageID,0,e.scrollLeft/e.scrollWidth,e.scrollTop/(e.scrollHeight+this._pageMarginClientHeight))}},{key:"_loadEvent",value:function(){var e=this;this._handlerDiv.onmousedown=function(t){e._shapeType==Vr&&(t.preventDefault(),e._handlerDiv.onmousemove=function(t){t.preventDefault(),e._handlerDiv.scrollTop=e._handlerDiv.scrollTop-t.movementY,e._handlerDiv.scrollLeft=e._handlerDiv.scrollLeft-t.movementX},document.addEventListener("mouseup",(function(){e._handlerDiv.onmousemove=null})))},this._handlerDiv.onscroll=this._mainContainerDiv.onscroll=function(t){e._boardID&&(e._calcCurPageID(),e._uploadCurPosition())},this._canvasList.forEach((function(t){var n=t.drawCanvas,r=t.drawCanvasCtx,i=t.pageID;n.ondblclick=function(r){if(e._shapeType!=Vr&&!e._attr.readOnly&&e._shapeType==Or){var i=n.width/e._wbDesc.width,o=r.offsetX/i,a=r.offsetY/i,c=e._pitchOnShape(t,Math.round(o),Math.round(a));if(c&&c.type==Mr){var s=JSON.parse(JSON.stringify(c));new pr(e.boardV1?kt:Nn,e,t,s,!0)}}},n.onmousedown=function(o){if(e._shapeType!=Vr&&!e._attr.readOnly){var a=null,c=n.width/e._wbDesc.width,s=o.offsetX/c,l=o.offsetY/c,u={type:e._shapeType,order:++e._lastOrder,sId:yr.generateUUID(),eID:{ownerID:mr.userInfo.termId,ID:kt.lastElemValue++},owner:mr.userInfo.userId,left:Math.round(s),top:Math.round(l),attr:{penColor:e._toolAttr.color,penWidth:e._toolAttr.lineWidth,penStyle:e._toolAttr.lineStyle},dat:[]};if(u.type===Ur&&(u.attr.penWidth=8,u.attr.penColor="rgba(46,130,255,0.4)"),e._setLineStyle(t,u),e._shapeType==Or){var d=e._pitchOnShape(t,Math.round(s),Math.round(l));d&&(u=d,a={boardID:e._boardID,pageID:i,sPosOld:{sId:d.sId,eID:d.eID,left:Math.round(d.left),top:Math.round(d.top)}}),e._calcRange(u),e._drawRange(t,u,c,"drawing")}else if(e._shapeType==kr){var f=e._pitchOnShape(t,Math.round(s),Math.round(l));f&&e._drawRange(t,f,c)}else{var h=e._wbDesc.shapeList.find((function(e){return e.pageId==i}));if(h&&h.shapes.length>800)return void e.notifyMarkException.target({errCode:1,errDesc:"单页标注超过最大数量限制"});e._shapeType!=Er&&e._shapeType!=Ur||(u.dat.push({x:0,y:0}),e._shapeDataCacheContainer=[],!e.boardV1&&Nn.addShape(e._boardID,i,u)),e._shapeType!=Dr&&e._shapeType!=xr&&e._shapeType!=Nr||(u.attr.lineStartPosX=0,u.attr.lineStartPosY=0),e._shapeType!=Pr&&e._shapeType!=Tr||(u.attr.rectRadius=e._toolAttr.rectRadius,e._toolAttr.fill&&(u.attr.fill=!0,u.attr.fillColor=e._toolAttr.fillColor)),e._shapeType==Mr&&new pr(e.boardV1?kt:Nn,e,t,u)}var p={x:o.offsetX,y:o.offsetY},_=null;n.onmousemove=function(o){e._setLineStyle(t,u);var a=o.offsetX,d=o.offsetY;if(e._shapeType==Or&&u.range){if(Math.abs(a/c-s)<=5&&Math.abs(d/c-l)<=5)return;u.left=u.left+(a-p.x)/c,u.top=u.top+(d-p.y)/c,p={x:a,y:d},r.clearRect(0,0,n.width,n.height),e._drawShape(t,u,"drawing"),e._calcRange(u),e._drawRange(t,u,c,"drawing")}else if(e._shapeType==Er||e._shapeType==Ur){r.beginPath();var f={x:(p.x+a)/2,y:(p.y+d)/2},h={x:Math.round(a/c-s),y:Math.round(d/c-l)};if(u.dat.length>=600)return e.notifyMarkException.target({errCode:2,errDesc:"单笔标注超过最大长度"}),void(n.onmousemove=null);u.dat.push(h),e._shapeDataCacheContainer.push(h),-1==e._shapeDataSendTimer&&(e._shapeDataSendTimer=setInterval((function(){e._shapeDataCacheContainer.length>0&&!e.boardV1&&Nn.appendShapeDat(e._boardID,i,u.sId,e._shapeDataCacheContainer),e._shapeDataCacheContainer=[]}),e._shapeDataSendInterval)),_?(r.moveTo(_.x,_.y),r.quadraticCurveTo(p.x,p.y,f.x,f.y)):(r.moveTo(p.x,p.y),r.lineTo(a,d)),r.stroke(),_=f,p={x:a,y:d}}else e._shapeType!=Dr&&e._shapeType!=xr&&e._shapeType!=Nr||(u.attr.lineEndPosX=Math.round(o.offsetX/c-s),u.attr.lineEndPosY=Math.round(o.offsetY/c-l),r.clearRect(0,0,n.width,n.height),e._drawShape(t,u,"drawing")),e._shapeType!=Tr&&e._shapeType!=Pr||(u.attr.rectWidth=Math.abs(Math.round(a/c-s)),u.attr.rectHeight=Math.abs(Math.round(d/c-l)),u.attr.rectX=Math.round(a/c-s)>0?0:Math.round(a/c-s),u.attr.rectY=Math.round(d/c-l)>0?0:Math.round(d/c-l),r.clearRect(0,0,n.width,n.height),e._drawShape(t,u,"drawing"))},document.addEventListener("mouseup",(function o(c){if(r.clearRect(0,0,n.width,n.height),e._shapeType==Or&&u.range&&(a.sPosOld.left==Math.round(u.left)&&a.sPosOld.top==Math.round(u.top)||(!e.boardV1&&Nn.moveShape(e._boardID,i,[{sId:u.sId,left:Math.round(u.left),top:Math.round(u.top)}]),e.boardV1&&kt.moveElement(e._boardID,i,[{eID:u.eID,left:Math.round(u.left),top:Math.round(u.top)}]),e._resumableShapesArr=[],e._revocableShapesArr.push({action:"move",shape:a}),e._revocableShapesArr[e._revocableShapesArr.length-1].shape.sPosNew={sId:u.sId,eID:u.eID,left:Math.round(u.left),top:Math.round(u.top)},e._changeRedoUndoState())),e._shapeType==kr){var d=e._pitchOnShape(t,Math.round(s),Math.round(l));d&&(!e.boardV1&&Nn.delShape(e._boardID,i,[d.sId]),e.boardV1&&kt.delElement(e._boardID,i,[d.eID]),e._resumableShapesArr=[],e._revocableShapesArr.push({action:"del",shape:{boardID:e._boardID,pageID:i,shape:d}}),e._changeRedoUndoState())}e._shapeType!=Er&&e._shapeType!=Ur||(e._shapeDataCacheContainer.length>0&&!e.boardV1&&Nn.appendShapeDat(e._boardID,i,u.sId,e._shapeDataCacheContainer),e._shapeDataCacheContainer=[]),e._shapeType!=Er&&e._shapeType!=Ur&&e._shapeType!=Dr&&e._shapeType!=xr&&e._shapeType!=Nr&&e._shapeType!=Pr&&e._shapeType!=Tr||(e._drawShape(t,u),e._addShapeToShapeList(u,i),e._resumableShapesArr=[],e._revocableShapesArr.push({action:"add",shape:{boardID:e._boardID,pageID:i,shape:u}}),e._changeRedoUndoState(),e._shapeType!=Er&&e._shapeType==Ur&&!e.boardV1&&Nn.addShape(e._boardID,i,u),e.boardV1&&kt.addElement(e._boardID,i,u)),clearInterval(e._shapeDataSendTimer),e._shapeDataSendTimer=-1,n.onmousemove=null,document.removeEventListener("mouseup",o),p=null,_=null}))}}}))}},{key:"_addShapeToShapeList",value:function(e,t){var n=this._wbDesc.shapeList.find((function(e){return e.pageId==t}));n||(n={pageId:t,shapes:[]},this._wbDesc.shapeList.push(n)),null==n.shapes&&(n.shapes=[]),n.shapes.push(e)}},{key:"_clearAllMark",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this._canvasList.forEach((function(t,n){e!=n&&null!=e||t.shapeCanvasCtx.clearRect(0,0,t.shapeCanvas.width,t.shapeCanvas.height)}))}},{key:"_pitchOnShape",value:function(e,t,n){var r=null;return this._wbDesc.shapeList.forEach((function(i){if(e.pageID==i.pageId)for(var o=i.shapes.length-1;o>=0;o--){var a=i.shapes[o];if(a.range&&a.range.left<=t&&a.range.right>=t&&a.range.top<=n&&a.range.bottom>=n){r=a;break}}})),r}},{key:"_calcRange",value:function(e){if(e.type==Er||e.type==Ur){for(var t={left:0,top:0,right:0,bottom:0},n=10,r=0;r<e.dat.length;r++)0==r?(t.left=Math.ceil(e.dat[r].x+e.left-n),t.right=Math.ceil(e.dat[r].x+e.left+n),t.top=Math.ceil(e.dat[r].y+e.top-n),t.bottom=Math.ceil(e.dat[r].y+e.top+n)):(e.dat[r].x+e.left-n<t.left&&(t.left=Math.ceil(e.dat[r].x+e.left-n)),e.dat[r].x+e.left+n>t.right&&(t.right=Math.ceil(e.dat[r].x+e.left+n)),e.dat[r].y+e.top-n<t.top&&(t.top=Math.ceil(e.dat[r].y+e.top-n)),e.dat[r].y+e.top+n>t.bottom&&(t.bottom=Math.ceil(e.dat[r].y+e.top+n)));e.range=t}}},{key:"_drawBGImage",value:function(e,t){e.shapeCanvasCtx.drawImage(t,0,0,e.shapeCanvas.width,e.shapeCanvas.height)}},{key:"_drawPPTImages",value:function(e,t){var n=e.shapeCanvas.width/this._wbDesc.width;t.forEach((function(t){e.shapeCanvasCtx.drawImage(t.Image,t.left*n,t.top*n,t.width*n,t.height*n)}))}},{key:"_drawRange",value:function(e,t,n,r){var i=r?e.drawCanvasCtx:e.shapeCanvasCtx;this._setLineStyle(e,t),i.lineWidth=1*n,i.setLineDash([parseInt(10*n)]),i.beginPath(),i.moveTo(t.range.left*n,t.range.top*n),i.lineTo(t.range.right*n,t.range.top*n),i.lineTo(t.range.right*n,t.range.bottom*n),i.lineTo(t.range.left*n,t.range.bottom*n),i.lineTo(t.range.left*n,t.range.top*n),i.stroke()}},{key:"_drawPencil",value:function(e,t,n){if(0!=t.dat.length){var r=t.dat,i=n?e.drawCanvasCtx:e.shapeCanvasCtx,o=e.shapeCanvas.width/this._wbDesc.width;if(this._setLineStyle(e,t),i.beginPath(),i.moveTo(Math.round((r[0].x+t.left)*o),Math.round((r[0].y+t.top)*o)),r.length<2)i.lineTo(Math.round((t.left+r[0].x)*o),Math.round((t.top+r[0].y)*o));else for(var a=0;a<r.length-1;a++){var c=Math.round(t.left+r[a].x+t.left+r[a+1].x)*o/2,s=Math.round(t.top+r[a].y+t.top+r[a+1].y)*o/2;i.quadraticCurveTo((t.left+r[a].x)*o,(t.top+r[a].y)*o,c,s)}i.stroke(),this._calcRange(t),this._attr.showRange&&this._drawRange(e,t,o)}}},{key:"_drawStraightLine",value:function(e,t,n){var r=n?e.drawCanvasCtx:e.shapeCanvasCtx,i=e.shapeCanvas.width/this._wbDesc.width;this._setLineStyle(e,t),r.beginPath(),r.moveTo(Math.round((t.attr.lineStartPosX+t.left)*i),Math.round((t.attr.lineStartPosY+t.top)*i)),r.lineTo(Math.round((t.attr.lineEndPosX+t.left)*i),Math.round((t.attr.lineEndPosY+t.top)*i)),r.stroke();var o={left:0,top:0,right:0,bottom:0},a=10;t.attr.lineStartPosX<=t.attr.lineEndPosX?(o.left=t.attr.lineStartPosX+t.left-a,o.right=t.attr.lineEndPosX+t.left+a):(o.left=t.attr.lineEndPosX+t.left-a,o.right=t.attr.lineStartPosX+t.left+a),t.attr.lineStartPosY<=t.attr.lineEndPosY?(o.top=t.attr.lineStartPosY+t.top-a,o.bottom=t.attr.lineEndPosY+t.top+a):(o.top=t.attr.lineEndPosY+t.top-a,o.bottom=t.attr.lineStartPosY+t.top+a),t.range=o,this._attr.showRange&&this._drawRange(e,t,i)}},{key:"_drawRect",value:function(e,t,n){var r=n?e.drawCanvasCtx:e.shapeCanvasCtx,i=e.shapeCanvas.width/this._wbDesc.width;this._setLineStyle(e,t);var o=(t.attr.rectX+t.left)*i,a=(t.attr.rectY+t.top)*i,c=t.attr.rectWidth*i,s=t.attr.rectHeight*i,l=t.attr.rectRadius*i;if(l){var u=l,d=s>0?{x:o,y:a+u}:{x:o,y:a-u},f=c>0?{x:o+u,y:a}:{x:o-u,y:a},h=c>0?{x:o+c-u,y:a}:{x:o+c+u,y:a},p=s>0?{x:o+c,y:a+u}:{x:o+c,y:a-u},_=s>0?{x:o+c,y:a+s-u}:{x:o+c,y:a+s+u},g=c>0?{x:o+c-u,y:a+s}:{x:o+c+u,y:a+s},C=c>0?{x:o+u,y:a+s}:{x:o-u,y:a+s},v=s>0?{x:o,y:a+s-u}:{x:o,y:a+s+u};r.beginPath(),r.moveTo(d.x,d.y),r.arcTo(o,a,f.x,f.y,u),r.lineTo(h.x,h.y),r.arcTo(o+c,a,p.x,p.y,u),r.lineTo(_.x,_.y),r.arcTo(o+c,a+s,g.x,g.y,u),r.lineTo(C.x,C.y),r.arcTo(o,a+s,v.x,v.y,u),r.lineTo(d.x,d.y),r.stroke(),t.attr.fill&&(r.fillStyle=t.attr.fillColor||t.attr.penColor,r.fill())}else{var m={x:o,y:a},y={x:o+c,y:a},S={x:o+c,y:a+s},I={x:o,y:a+s};r.beginPath(),r.moveTo(m.x,m.y),r.lineTo(y.x,y.y),r.lineTo(S.x,S.y),r.lineTo(I.x,I.y),r.lineTo(m.x,m.y),r.stroke(),t.attr.fill&&(r.fillStyle=t.attr.fillColor||t.attr.penColor,r.fill())}var R={left:0,top:0,right:0,bottom:0},w=10;c>=0?(R.left=t.attr.rectX+t.left-w,R.right=t.attr.rectX+t.left+t.attr.rectWidth+w):(R.left=t.attr.rectX+t.left+t.attr.rectWidth-w,R.right=t.attr.rectX+t.left+w),s>=0?(R.top=t.attr.rectY+t.top-w,R.bottom=t.attr.rectY+t.top+t.attr.rectHeight+w):(R.top=t.attr.rectY+t.top+t.attr.rectHeight-w,R.bottom=t.attr.rectY+t.top+w),t.range=R,this._attr.showRange&&this._drawRange(e,t,i)}},{key:"_drawEllipse",value:function(e,t,n){var r=n?e.drawCanvasCtx:e.shapeCanvasCtx,i=e.shapeCanvas.width/this._wbDesc.width;this._setLineStyle(e,t);var o=t.attr.rectWidth*i,a=t.attr.rectHeight*i,c=(t.attr.rectX+t.left)*i+o/2,s=(t.attr.rectY+t.top)*i+a/2,l=o/1.5,u=a/2;r.beginPath(),r.moveTo(c,s-u),r.bezierCurveTo(c+l,s-u,c+l,s+u,c,s+u),r.bezierCurveTo(c-l,s+u,c-l,s-u,c,s-u),r.closePath(),t.attr.fill&&(r.fillStyle=t.attr.fillColor||t.attr.penColor,r.fill()),r.strokeStyle=t.attr.penColor,r.stroke();var d={left:0,top:0,right:0,bottom:0},f=10;o>=0?(d.left=t.attr.rectX+t.left-f,d.right=t.attr.rectX+t.left+t.attr.rectWidth+f):(d.left=t.attr.rectX+t.left+t.attr.rectWidth-f,d.right=t.attr.rectX+t.left+f),a>=0?(d.top=t.attr.rectY+t.top-f,d.bottom=t.attr.rectY+t.top+t.attr.rectHeight+f):(d.top=t.attr.rectY+t.top+t.attr.rectHeight-f,d.bottom=t.attr.rectY+t.top+f),t.range=d,this._attr.showRange&&this._drawRange(e,t,i)}},{key:"_calcSingleArrowPoints",value:function(e,t,n){var r=10;n.type===xr||n.type===Nr?(r=8,n.attr.penWidth&&(r*=1+.3*n.attr.penWidth)):n.type===Lr&&((r=.15*Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y)))>=15&&(r=15),r<5&&(r=5));var i,o,a,c,s,l,u,d,f=.45,h=[];i=e.x-t.x,o=e.y-t.y,0==i&&0==o&&(i=-1),a=i*Math.cos(f)-o*Math.sin(f),c=i*Math.sin(f)+o*Math.cos(f),s=i*Math.cos(f)+o*Math.sin(f),l=i*Math.sin(-.45)+o*Math.cos(f),a=a*r/(u=Math.sqrt(a*a+c*c)),s=s*r/(d=Math.sqrt(s*s+l*l)),c=c*r/u,l=l*r/d,a+=t.x,c+=t.y;var p=1*((s+=t.x)-a)/4+a,_=(p-a)*((l+=t.y)-c)/(s-a)+c,g=3*(s-a)/4+a,C=(g-a)*(l-c)/(s-a)+c;return n.type===xr||n.type===Nr?(h.push(e),h.push(t),h.push({x:a,y:c}),h.push({x:s,y:l})):n.type===Lr&&(h.push(e),h.push({x:g,y:C}),h.push({x:s,y:l}),h.push(t),h.push({x:a,y:c}),h.push({x:p,y:_})),h}},{key:"_drawArrow",value:function(e,t,n){var r=n?e.drawCanvasCtx:e.shapeCanvasCtx,i=e.shapeCanvas.width/this._wbDesc.width;this._setLineStyle(e,t),t.attr.fill=null==t.attr.fill||t.attr.fill;var o={x:(t.left+t.attr.lineStartPosX)*i,y:(t.top+t.attr.lineStartPosY)*i},a={x:(t.left+t.attr.lineEndPosX)*i,y:(t.top+t.attr.lineEndPosY)*i};if(t.type===xr){var c=this._calcSingleArrowPoints(o,a,t);r.beginPath(),r.moveTo(c[0].x,c[0].y),r.lineTo(c[1].x,c[1].y),r.moveTo(c[2].x,c[2].y),r.lineTo(c[1].x,c[1].y),r.moveTo(c[3].x,c[3].y),r.lineTo(c[1].x,c[1].y),r.stroke()}else if(t.type==Lr){var s=this._calcSingleArrowPoints(o,a,t);r.beginPath(),r.moveTo(s[0].x,s[0].y);for(var l=1;l<s.length;l++)r.lineTo(s[l].x,s[l].y);r.lineTo(s[0].x,s[0].y),t.attr.fill&&(r.fillStyle=t.attr.fillColor||t.attr.penColor,r.fill()),r.stroke()}else if(t.type===Nr){var u=this._calcSingleArrowPoints(o,a,t),d=this._calcSingleArrowPoints(a,o,t);r.beginPath(),r.moveTo(u[0].x,u[0].y),r.lineTo(u[1].x,u[1].y),r.moveTo(u[2].x,u[2].y),r.lineTo(u[1].x,u[1].y),r.moveTo(u[3].x,u[3].y),r.lineTo(u[1].x,u[1].y),r.moveTo(d[2].x,d[2].y),r.lineTo(d[1].x,d[1].y),r.moveTo(d[3].x,d[3].y),r.lineTo(d[1].x,d[1].y),r.stroke()}var f={left:0,top:0,right:0,bottom:0},h=10;t.attr.lineStartPosX<=t.attr.lineEndPosX?(f.left=t.attr.lineStartPosX+t.left-h,f.right=t.attr.lineEndPosX+t.left+h):(f.left=t.attr.lineEndPosX+t.left-h,f.right=t.attr.lineStartPosX+t.left+h),t.attr.lineStartPosY<=t.attr.lineEndPosY?(f.top=t.attr.lineStartPosY+t.top-h,f.bottom=t.attr.lineEndPosY+t.top+h):(f.top=t.attr.lineEndPosY+t.top-h,f.bottom=t.attr.lineStartPosY+t.top+h),t.range=f,this._attr.showRange&&this._drawRange(e,t,i)}},{key:"_drawText",value:function(e,t,n){var r=n?e.drawCanvasCtx:e.shapeCanvasCtx,i=e.shapeCanvas.width/this._wbDesc.width;t.attr.fontSize=null==t.attr.fontSize?20:t.attr.fontSize;var o=t.left*i,a=t.top*i,c=Math.round(t.attr.fontSize*i),s=t.attr.fontWeight||"normal",l=t.attr.fontStyle||"",u=t.attr.fontFamily||"sans-serif",d=t.attr.txt||"";r.font="".concat(l," ").concat(s," ").concat(c,"px ").concat(u),r.textAlign="left",r.textBaseline="middle";for(var f=d.split("\n"),h=c/10,p=10*i,_=0,g=0;g<f.length;g++){var C=r.measureText(f[g]).width;_=C>_&&f[g].length>0?C:_}var v=_+2*p,m=c*f.length+h*(f.length-1)+2*p;r.fillStyle=t.attr.txtBkColor,r.fillRect(o,a,v,m),r.fillStyle=t.attr.penColor;for(var y=0;y<f.length;y++)if(r.fillText(f[y],o+p,a+p+(c+h)*y+.5*c),t.attr.fontUnderLine){var S=r.measureText(f[y]).width;this._setLineStyle(e,t),r.beginPath(),r.moveTo(o+p,a+p+c*(y+1)+h*y),r.lineTo(o+p+S,a+p+c*(y+1)+h*y),r.stroke()}var I={left:0,top:0,right:0,bottom:0};I.left=t.left-10,I.right=t.left+v/i+10,I.top=t.top-10,I.bottom=t.top+m/i+10,t.range=I,this._attr.showRange&&this._drawRange(e,t,i)}},{key:"_drawImage",value:function(e,t,n){var r=this;if(t.attr.imgBlob){var i=n?e.drawCanvasCtx:e.shapeCanvasCtx,o=e.shapeCanvas.width/this._wbDesc.width,a=(t.left+t.attr.left)*o,c=(t.top+t.attr.top)*o,s=t.attr.width*o,l=t.attr.height*o;if(t.attr.image)i.drawImage(t.attr.image,a,c,s,l);else{var u=new Image;u.src=URL.createObjectURL(t.attr.imgBlob),u.onload=function(){t.attr.image=u,r._drawAllShapes({pageID:e.pageID},"drawImageElement")}}var d={left:0,top:0,right:0,bottom:0};d.left=t.left-10,d.right=t.left+s/o+10,d.top=t.top-10,d.bottom=t.top+l/o+10,t.range=d,this._attr.showRange&&this._drawRange(e,t,o)}}},{key:"_changeRedoUndoState",value:function(){this._revocableShapesArr.length>10&&this._revocableShapesArr.splice(0,1);var e=!!this._revocableShapesArr.length&&this._resumableShapesArr.length<10,t=!!this._resumableShapesArr.length;void 0!==e&&this._undo!==e&&(this._undo=e,this.notifyUndoEnableChanged.target(e)),void 0!==t&&this._redo!==t&&(this._redo=t,this.notifyRedoEnableChanged.target(t))}},{key:"handler",value:function(){return this._handlerDiv}},{key:"resize",value:function(e){var t=this;if((!this.boardV1||4!==nn.curMainTab.localID||"".concat(nn.curSubTab.termID,".").concat(nn.curSubTab.localID)==this._wbDesc.wId)&&this._wbDesc&&document.querySelector("#".concat(this._id))){var n=0,r=0,i=document.querySelector("#".concat(this._id)).clientWidth,o=document.querySelector("#".concat(this._id)).clientHeight,a=this._wbDesc.width,c=this._wbDesc.height,s=this._wbDesc.scale/100,l=a/c;1===this._wbDesc.scale?i/o>=a/c?(r=this._handlerDiv.clientHeight,n=r*l):(n=this._handlerDiv.clientWidth,r=n/l):0===this._wbDesc.scale?(n=this._handlerDiv.clientWidth,r=n/l):r=(n=s*a)/l,this._mainContainerDiv.style.width="".concat(n,"px"),1===this._canvasList.length||this._pageMode===Sr?(this._mainContainerDiv.style.height="".concat(r,"px"),this._mainContainerDiv.style.overflow="hidden"):(this._mainContainerDiv.style.height="auto",this._mainContainerDiv.style.overflow=""),this._mainContainerDiv.style.bottom=o<r?"unset":"0",this._mainContainerDiv.style.right=i<n?"unset":"0";var u=Math.ceil(this._attr.pageMargin*(r/c));this._canvasList.forEach((function(e,i){e.canvasContainer.style.width="".concat(n,"px"),e.canvasContainer.style.height="".concat(r,"px"),e.shapeCanvas.width=e.drawCanvas.width=n,e.shapeCanvas.height=e.drawCanvas.height=r,i<t._canvasList.length-1&&(e.canvasContainer.style.marginBottom="".concat(u,"px"))})),this._canvasContainerHeight=r,this._pageMarginClientHeight=u,this._drawAllShapes({},"resize"),this._refreshPos(),"notifySetScale"!=e&&"notifyChangeScale"!=e&&this._uploadCurPosition()}}},{key:"setCursor",value:function(e){console.crlog("[BoardView] ".concat(this._id," setCursor: ").concat(e)),this._canvasList.forEach((function(t){t.drawCanvas.style.cursor=e}))}},{key:"setBoardID",value:function(e,t){var n=this;for(var r in this._boardID=e,t)this._attr[r]=t[r];this._bindingBoardInfo(),setTimeout((function(){n.resize("setBoardID")}),100)}},{key:"getAttr",value:function(){return JSON.parse(JSON.stringify(this._attr))}},{key:"setAttr",value:function(e){for(var t in console.crlog("[BoardView] ".concat(this._id," setAttr: ").concat(JSON.stringify(e))),e)this._attr[t]=e[t]}},{key:"setCurPage",value:function(e){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&console.crlog("[BoardView] ".concat(this._id," setCurPage: ").concat(e)),0===this._pageMode?this._mainContainerDiv.scrollTop=e*(this._canvasContainerHeight+this._pageMarginClientHeight):this._handlerDiv.scrollTop=e*(this._canvasContainerHeight+this._pageMarginClientHeight)}},{key:"getCurPage",value:function(){return this._curPageID}},{key:"setToolType",value:function(e){console.crlog("[BoardView] ".concat(this._id," setToolType: ").concat(JSON.stringify(e))),this._shapeType=e}},{key:"getToolType",value:function(){return this._shapeType}},{key:"setToolAttr",value:function(e){if(console.crlog("[BoardView] ".concat(this._id," setToolAttr: ").concat(JSON.stringify(e))),!(e.color&&!e.color.includes("rgba")||e.fillColor&&!e.fillColor.includes("rgba")||e.fontBackGroundColor&&!e.fontBackGroundColor.includes("rgba"))){for(var t in e)"color"!==t&&"fillColor"!==t&&"fontBackGroundColor"!==t||(e[t]=e[t].replace(/\s/g,"")),this._toolAttr[t]=e[t];e.color&&!e.fillColor&&(this._toolAttr.fillColor=e.color)}}},{key:"getToolAttr",value:function(){return JSON.parse(JSON.stringify(this._toolAttr))}},{key:"clearCurPage",value:function(){var e=this;if(console.crlog("[BoardView] ".concat(this._id," clearCurPage")),this._wbDesc.shapeList&&!this._attr.readOnly){var t=[],n=[];this._wbDesc.shapeList.forEach((function(r){r.pageId==e._curPageID&&r.shapes.forEach((function(e){t.push(e.sId),n.push(e.eID)}))})),this._revocableShapesArr=[],this._resumableShapesArr=[],this._changeRedoUndoState(),!this.boardV1&&Nn.delShape(this._boardID,this._curPageID,t),this.boardV1&&kt.delElement(this._boardID,this._curPageID,n)}}},{key:"clearAllPage",value:function(){var e=this;if(this._wbDesc.shapeList&&!this._attr.readOnly){var t=[],n=[];this._wbDesc.shapeList.forEach((function(r){r.shapes.forEach((function(e){t.push(e.sId),n.push(e.eID)})),!e.boardV1&&Nn.delShape(e._boardID,r.pageId,t),e.boardV1&&kt.delElement(e._boardID,r.pageId,n)})),this._revocableShapesArr=[],this._resumableShapesArr=[],this._changeRedoUndoState()}}},{key:"getUndoEnableState",value:function(){return this._undo}},{key:"getRedoEnableState",value:function(){return this._redo}},{key:"undo",value:function(){var e=this;if(!this._attr.readOnly){console.crlog("[BoardView] ".concat(this._id,", undo()"));var t=this._canvasList.find((function(t){return t.pageID==e._curPageID})),n=this._revocableShapesArr.pop();n&&(this._resumableShapesArr.push(n),"add"==n.action?(!this.boardV1&&Nn.delShape(n.shape.boardID,n.shape.pageID,[n.shape.shape.sId]),this.boardV1&&kt.delElement(n.shape.boardID,n.shape.pageID,[n.shape.shape.eID])):"move"==n.action?(!this.boardV1&&Nn.moveShape(n.shape.boardID,n.shape.pageID,[{sId:n.shape.sPosOld.sId,left:Math.round(n.shape.sPosOld.left),top:Math.round(n.shape.sPosOld.top)}]),this.boardV1&&kt.moveElement(n.shape.boardID,n.shape.pageID,[{eID:n.shape.sPosOld.eID,left:Math.round(n.shape.sPosOld.left),top:Math.round(n.shape.sPosOld.top)}])):"del"==n.action?(!this.boardV1&&Nn.addShape(n.shape.boardID,n.shape.pageID,n.shape.shape),this.boardV1&&kt.addElement(n.shape.boardID,n.shape.pageID,n.shape.shape),this._drawShape(t,n.shape.shape),this._addShapeToShapeList(n.shape.shape,n.shape.pageID)):"modify"==n.action&&(!this.boardV1&&Nn.modifyShapeAttr(n.oldShape.boardID,n.oldShape.pageID,n.oldShape.shape),this.boardV1&&kt.modifyElement(n.oldShape.boardID,n.oldShape.pageID,n.oldShape.shape))),this._changeRedoUndoState()}}},{key:"redo",value:function(){var e=this;if(!this._attr.readOnly){console.crlog("[BoardView] ".concat(this._id,", redo()"));var t=this._canvasList.find((function(t){return t.pageID==e._curPageID})),n=this._resumableShapesArr.pop();n&&(this._revocableShapesArr.push(n),"add"==n.action?(this._drawShape(t,n.shape.shape),this._addShapeToShapeList(n.shape.shape,n.shape.pageID),!this.boardV1&&Nn.addShape(n.shape.boardID,n.shape.pageID,n.shape.shape),this.boardV1&&kt.addElement(n.shape.boardID,n.shape.pageID,n.shape.shape)):"move"==n.action?(!this.boardV1&&Nn.moveShape(n.shape.boardID,n.shape.pageID,[{sId:n.shape.sPosNew.sId,left:Math.round(n.shape.sPosNew.left),top:Math.round(n.shape.sPosNew.top)}]),this.boardV1&&kt.moveElement(n.shape.boardID,n.shape.pageID,[{eID:n.shape.sPosNew.eID,left:Math.round(n.shape.sPosNew.left),top:Math.round(n.shape.sPosNew.top)}])):"del"==n.action?(!this.boardV1&&Nn.delShape(n.shape.boardID,n.shape.pageID,[n.shape.shape.sId]),this.boardV1&&kt.delElement(n.shape.boardID,n.shape.pageID,[n.shape.shape.eID])):"modify"==n.action&&(!this.boardV1&&Nn.modifyShapeAttr(n.newShape.boardID,n.newShape.pageID,n.newShape.shape),this.boardV1&&kt.modifyElement(n.newShape.boardID,n.newShape.pageID,n.newShape.shape))),this._changeRedoUndoState()}}},{key:"setScale",value:function(e){var t=this;return new Promise((function(n,r){if(console.crlog("[BoardView] ".concat(t._id," setScale: ").concat(e)),(!t._boardID||e<20||e>500)&&0!==e&&1!==e)return r({errCode:1,errDesc:"白板缩放超出限制"});t._wbDesc.scale=e,t.resize("setScale"),t.notifyScaleChanged.target(t._wbDesc.wId,+e,mr.userInfo.userId),t._attr.asyncScale&&!t.boardV1&&In.setScale(t._boardID,e).then((function(e){return n()})).catch((function(e){return r({errCode:1,errDesc:e.toString()})}))}))}},{key:"getScale",value:function(){return this._wbDesc?this._wbDesc.scale:100}},{key:"setCanvasStyle",value:function(e){var t=this;console.crlog("[BoardView] ".concat(this._id," setCanvasStyle: ").concat(JSON.stringify(e)));var n=function(n){t._canvasList.forEach((function(t){t.shapeCanvas.style[n]=e[n]}))};for(var r in e)n(r);this._canvasStyle=e}},{key:"setContainerStyle",value:function(e){for(var t in console.crlog("[BoardView] ".concat(this._id," setContainerStyle: ").concat(JSON.stringify(e))),e)this._mainContainerDiv.style[t]=e[t];this._mainContainerDivStyle=e}},{key:"getID",value:function(){return this._id}},{key:"destroy",value:function(){var e=this;console.crlog("[BoardView] ".concat(this._id," destroy"));var t=kt.boardUIList.findIndex((function(t){return t._id===e._id}));t>=0&&kt.boardUIList.splice(t,1)}}],t&&gr(e.prototype,t),n&&gr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();const Fr=Br;window.boardv2=Nn,window.CRBoard_BoardView=Fr,window.CRBoard_CreateWhiteBoard=Nn.createWhiteBoard,window.CRBoard_CloseBoard=Nn.closeWhiteBoard,window.CRBoard_GetBoardInfo=Nn.getBoardInfo,window.CRBoard_GetAllBoard=Nn.getAllBoard,window.CRBoard_UpdateBoardExInfo=Nn.updateBoardExInfo,window.CRBoard_GetCurrentBoard=Nn.getCurrentBoard,window.CRBoard_SetCurrentBoard=Nn.setCurrentBoard,window.CRBoard_NotifyInitBoardList=Nn.notifyInitBoardListCallback,window.CRBoard_NotifyCreateBoard=Nn.notifyCreateBoardCallback,window.CRBoard_NotifyCloseBoard=Nn.notifyCloseBoardCallback,window.CRBoard_NotifyBoardExinfoUpdated=Nn.notifyBoardExinfoUpdatedCallback,window.CRBoard_NotifyCurrentBoard=Nn.notifyCurrentBoardCallback,window.CRBoard_NotifyBoardScale=Nn.notifyBoardScaleCallback;const Hr={BoardView:Fr,CreateWhiteBoard:Nn.createWhiteBoard,CloseBoard:Nn.closeWhiteBoard,GetAllBoard:Nn.getAllBoard,pdateBoardExInfo:Nn.updateBoardExInfo,GetBoardInfo:Nn.getBoardInfo,GetCurrentBoard:Nn.getCurrentBoard,SetCurrentBoard:Nn.setCurrentBoard,NotifyInitBoardList:Nn.notifyInitBoardListCallback,NotifyCreateBoard:Nn.notifyCreateBoardCallback,NotifyCloseBoard:Nn.notifyCloseBoardCallback,NotifyBoardExinfoUpdated:Nn.notifyBoardExinfoUpdatedCallback,NotifyCurrentBoard:Nn.notifyCurrentBoardCallback,NotifyBoardScale:Nn.notifyBoardScaleCallback};function qr(e){return qr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qr(e)}function Kr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wr(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=qr(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=qr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==qr(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Gr=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kr(Object(n),!0).forEach((function(t){Wr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({GetSDKVersion:CRVideo_GetSDKVersion,WriteLog:CRVideo_WriteLog,SetSDKParams:CRVideo_SetSDKParams,Init:CRVideo_Init,Uninit:CRVideo_Uninit,SetServerAddr:CRVideo_SetServerAddr,Login:CRVideo_Login,LoginByToken:CRVideo_LoginByToken,UpdateToken:CRVideo_UpdateToken,Logout:CRVideo_Logout,LoginSuccess:CRVideo_LoginSuccess,LoginFail:CRVideo_LoginFail,NotifyTokenWillExpire:CRVideo_NotifyTokenWillExpire,LineOff:CRVideo_LineOff,InitQueueDat:CRVideo_InitQueueDat,GetAllQueueInfo:CRVideo_GetAllQueueInfo,RefreshAllQueueStatus:CRVideo_RefreshAllQueueStatus,GetQueueStatus:CRVideo_GetQueueStatus,GetQueuingInfo:CRVideo_GetQueuingInfo,GetServingQueues:CRVideo_GetServingQueues,GetSessionInfo:CRVideo_GetSessionInfo,StartQueuing:CRVideo_StartQueuing,StopQueuing:CRVideo_StopQueuing,StartService:CRVideo_StartService,StopService:CRVideo_StopService,GetQueueUsers:CRVideo_GetQueueUsers,ReqAssignUser:CRVideo_ReqAssignUser,AcceptAssignUser:CRVideo_AcceptAssignUser,RejectAssignUser:CRVideo_RejectAssignUser,InitQueueDatRslt:CRVideo_InitQueueDatRslt,QueueStatusChanged:CRVideo_QueueStatusChanged,GetQueueStatusRslt:CRVideo_GetQueueStatusRslt,QueuingInfoChanged:CRVideo_QueuingInfoChanged,StartQueuingRslt:CRVideo_StartQueuingRslt,StopQueuingRslt:CRVideo_StopQueuingRslt,StartServiceRslt:CRVideo_StartServiceRslt,StopServiceRslt:CRVideo_StopServiceRslt,GetQueueUsersRslt:CRVideo_GetQueueUsersRslt,ResponseAssignUserRslt:CRVideo_ResponseAssignUserRslt,AutoAssignUser:CRVideo_AutoAssignUser,ReqAssignUserRslt:CRVideo_ReqAssignUserRslt,CancelAssignUser:CRVideo_CancelAssignUser,NotifyUserEnter:CRVideo_NotifyUserEnter,NotifyUserLeave:CRVideo_NotifyUserLeave,Call:CRVideo_Call,AcceptCall:CRVideo_AcceptCall,RejectCall:CRVideo_RejectCall,HangupCall:CRVideo_HangupCall,SetDNDStatus:CRVideo_SetDNDStatus,GetUserStatus:CRVideo_GetUserStatus,GetOneUserStatus:CRVideo_GetOneUserStatus,StartUserStatusNotify:CRVideo_StartUserStatusNotify,StopUserStatusNotify:CRVideo_StopUserStatusNotify,CallSuccess:CRVideo_CallSuccess,CallFail:CRVideo_CallFail,AcceptCallSuccess:CRVideo_AcceptCallSuccess,AcceptCallFail:CRVideo_AcceptCallFail,RejectCallSuccess:CRVideo_RejectCallSuccess,RejectCallFail:CRVideo_RejectCallFail,HangupCallSuccess:CRVideo_HangupCallSuccess,HangupCallFail:CRVideo_HangupCallFail,NotifyCallIn:CRVideo_NotifyCallIn,NotifyCallAccepted:CRVideo_NotifyCallAccepted,NotifyCallRejected:CRVideo_NotifyCallRejected,NotifyCallHangup:CRVideo_NotifyCallHangup,SetDNDStatusSuccess:CRVideo_SetDNDStatusSuccess,SetDNDStatusFail:CRVideo_SetDNDStatusFail,GetUserStatusSuccess:CRVideo_GetUserStatusSuccess,GetUserStatusFail:CRVideo_GetUserStatusFail,StartUserStatusNotifyRslt:CRVideo_StartUserStatusNotifyRslt,StopUserStatusNotifyRslt:CRVideo_StopUserStatusNotifyRslt,NotifyUserStatus:CRVideo_NotifyUserStatus,Invite:CRVideo_Invite,AcceptInvite:CRVideo_AcceptInvite,RejectInvite:CRVideo_RejectInvite,CancelInvite:CRVideo_CancelInvite,InviteSuccess:CRVideo_InviteSuccess,InviteFail:CRVideo_InviteFail,AcceptInviteSuccess:CRVideo_AcceptInviteSuccess,AcceptInviteFail:CRVideo_AcceptInviteFail,RejectInviteSuccess:CRVideo_RejectInviteSuccess,RejectInviteFail:CRVideo_RejectInviteFail,CancelInviteSuccess:CRVideo_CancelInviteSuccess,CancelInviteFail:CRVideo_CancelInviteFail,NotifyInviteIn:CRVideo_NotifyInviteIn,NotifyInviteAccepted:CRVideo_NotifyInviteAccepted,NotifyInviteRejected:CRVideo_NotifyInviteRejected,NotifyInviteCanceled:CRVideo_NotifyInviteCanceled,CreateMeeting2:CRVideo_CreateMeeting2,DestroyMeeting:CRVideo_DestroyMeeting,CreateMeetingSuccess:CRVideo_CreateMeetingSuccess,CreateMeetingFail:CRVideo_CreateMeetingFail,DestroyMeetingRslt:CRVideo_DestroyMeetingRslt,MeetingStopped:CRVideo_MeetingStopped,EnterMeeting3:CRVideo_EnterMeeting3,ExitMeeting:CRVideo_ExitMeeting,Kickout:CRVideo_Kickout,EnterMeetingRslt:CRVideo_EnterMeetingRslt,UserEnterMeeting:CRVideo_UserEnterMeeting,UserLeftMeeting:CRVideo_UserLeftMeeting,MeetingDropped:CRVideo_MeetingDropped,GetMainVideo:CRVideo_GetMainVideo,SetMainVideo:CRVideo_SetMainVideo,SetMainVideoMode:CRVideo_SetMainVideoMode,GetMainVideoMode:CRVideo_GetMainVideoMode,SwitchToPage:CRVideo_SwitchToPage,GetCurrentMainPage:CRVideo_GetCurrentMainPage,GetCurrentSubPage:CRVideo_GetCurrentSubPage,NotifyMainVideoChanged:CRVideo_NotifyMainVideoChanged,NotifyMainVideoModeChanged:CRVideo_NotifyMainVideoModeChanged,NotifySwitchToPage:CRVideo_NotifySwitchToPage,PeerConnectionError:CRVideo_PeerConnectionError,NetStateChanged:CRVideo_NetStateChanged,GetMeetingAttrs:CRVideo_GetMeetingAttrs,GetMeetingAllAttrs:CRVideo_GetMeetingAllAttrs,SetMeetingAttrs:CRVideo_SetMeetingAttrs,AddOrUpdateMeetingAttrs:CRVideo_AddOrUpdateMeetingAttrs,DelMeetingAttrs:CRVideo_DelMeetingAttrs,ClearMeetingAttrs:CRVideo_ClearMeetingAttrs,GetUserAttrs:CRVideo_GetUserAttrs,SetUserAttrs:CRVideo_SetUserAttrs,AddOrUpdateUserAttrs:CRVideo_AddOrUpdateUserAttrs,DelUserAttrs:CRVideo_DelUserAttrs,ClearUserAttrs:CRVideo_ClearUserAttrs,ClearAllUserAttrs:CRVideo_ClearAllUserAttrs,GetMeetingAttrsSuccess:CRVideo_GetMeetingAttrsSuccess,GetMeetingAttrsFail:CRVideo_GetMeetingAttrsFail,GetMeetingAllAttrsSuccess:CRVideo_GetMeetingAllAttrsSuccess,GetMeetingAllAttrsFail:CRVideo_GetMeetingAllAttrsFail,SetMeetingAttrsRslt:CRVideo_SetMeetingAttrsRslt,AddOrUpdateMeetingAttrsRslt:CRVideo_AddOrUpdateMeetingAttrsRslt,DelMeetingAttrsRslt:CRVideo_DelMeetingAttrsRslt,ClearMeetingAttrsRslt:CRVideo_ClearMeetingAttrsRslt,GetUserAttrsSuccess:CRVideo_GetUserAttrsSuccess,GetUserAttrsFail:CRVideo_GetUserAttrsFail,SetUserAttrsRslt:CRVideo_SetUserAttrsRslt,AddOrUpdateUserAttrsRslt:CRVideo_AddOrUpdateUserAttrsRslt,DelUserAttrsRslt:CRVideo_DelUserAttrsRslt,ClearUserAttrsRslt:CRVideo_ClearUserAttrsRslt,ClearAllUserAttrsRslt:CRVideo_ClearAllUserAttrsRslt,NotifyMeetingAttrsChanged:CRVideo_NotifyMeetingAttrsChanged,NotifyUserAttrsChanged:CRVideo_NotifyUserAttrsChanged,GetAllMembers:CRVideo_GetAllMembers,GetMemberInfo:CRVideo_GetMemberInfo,GetMemberNickName:CRVideo_GetMemberNickName,IsUserInMeeting:CRVideo_IsUserInMeeting,SetNickName:CRVideo_SetNickName,NotifyNickNameChanged:CRVideo_NotifyNickNameChanged,GetAudioMicNames:CRVideo_GetAudioMicNames,GetAudioSpkNames:CRVideo_GetAudioSpkNames,SetAudioCfg:CRVideo_SetAudioCfg,GetAudioCfg:CRVideo_GetAudioCfg,GetMicEnergy:CRVideo_GetMicEnergy,OpenMic:CRVideo_OpenMic,CloseMic:CRVideo_CloseMic,GetAudioStatus:CRVideo_GetAudioStatus,SetAllAudioClose:CRVideo_SetAllAudioClose,PauseSpeaker:CRVideo_PauseSpeaker,PlaySpeaker:CRVideo_PlaySpeaker,StartGetAudioPCM:CRVideo_StartGetAudioPCM,StopGetAudioPCM:CRVideo_StopGetAudioPCM,SetVoiceChange:CRVideo_SetVoiceChange,GetVoiceChangeType:CRVideo_GetVoiceChangeType,AudioStatusChanged:CRVideo_AudioStatusChanged,MicEnergyUpdate:CRVideo_MicEnergyUpdate,NotifyAudioStream:CRVideo_NotifyAudioStream,OpenMicFailed:CRVideo_OpenMicFailed,NotifyAudioPCMDat:CRVideo_NotifyAudioPCMDat,NotifySetVoiceChange:CRVideo_NotifySetVoiceChange,CreatVideoObj:CRVideo_CreatVideoObj,GetVideoCfg:CRVideo_GetVideoCfg,SetVideoCfg:CRVideo_SetVideoCfg,GetVideoStatus:CRVideo_GetVideoStatus,GetDefaultVideo:CRVideo_GetDefaultVideo,SetDefaultVideo:CRVideo_SetDefaultVideo,GetAllVideoInfo:CRVideo_GetAllVideoInfo,GetOpenedVideoIDs:CRVideo_GetOpenedVideoIDs,OpenVideo:CRVideo_OpenVideo,CloseVideo:CRVideo_CloseVideo,SetEnableMutiVideo:CRVideo_SetEnableMutiVideo,GetEnableMutiVideo:CRVideo_GetEnableMutiVideo,DisableCamera:CRVideo_DisableCamera,SetLocVideoAttributes:CRVideo_SetLocVideoAttributes,GetLocVideoAttributes:CRVideo_GetLocVideoAttributes,GetVideoTrackCapabilities:CRVideo_GetVideoTrackCapabilities,GetVideoTrackSettings:CRVideo_GetVideoTrackSettings,SetVideoPanTiltZoom:CRVideo_SetVideoPanTiltZoom,AddStreamCam:CRVideo_AddStreamCam,RemoveStreamVideo:CRVideo_RemoveStreamVideo,AddCanvasVCam:CRVideo_AddCanvasVCam,RemoveCanvasVCam:CRVideo_RemoveCanvasVCam,SetVirtualBackground:CRVideo_SetVirtualBackground,VideoDevChanged:CRVideo_VideoDevChanged,DefVideoChanged:CRVideo_DefVideoChanged,VideoStatusChanged:CRVideo_VideoStatusChanged,NotifyVideoStream:CRVideo_NotifyVideoStream,OpenVideoFailed:CRVideo_OpenVideoFailed,OpenVideoTimeout:CRVideo_OpenVideoTimeout,CreatScreenShareObj:CRVideo_CreatScreenShareObj,SetScreenShareCfg:CRVideo_SetScreenShareCfg,StartScreenShare:CRVideo_StartScreenShare,StopScreenShare:CRVideo_StopScreenShare,StartScreenMark:CRVideo_StartScreenMark,StopScreenMark:CRVideo_StopScreenMark,StartScreenShareRslt:CRVideo_StartScreenShareRslt,StopScreenShareRslt:CRVideo_StopScreenShareRslt,StartScreenMarkRslt:CRVideo_StartScreenMarkRslt,StopScreenMarkRslt:CRVideo_StopScreenMarkRslt,NotifyScreenShareStarted:CRVideo_NotifyScreenShareStarted,NotifyScreenShareStopped:CRVideo_NotifyScreenShareStopped,NotifyScreenMarkStarted:CRVideo_NotifyScreenMarkStarted,NotifyScreenMarkStopped:CRVideo_NotifyScreenMarkStopped,CreatMediaObj:CRVideo_CreatMediaObj,StartPlayMedia:CRVideo_StartPlayMedia,PausePlayMedia:CRVideo_PausePlayMedia,StopPlayMedia:CRVideo_StopPlayMedia,SetMediaplaypos:CRVideo_SetMediaplaypos,SetMediaVolume:CRVideo_SetMediaVolume,GetMediaInfo:CRVideo_GetMediaInfo,GetMediaImg:CRVideo_GetMediaImg,NotifyMediaOpened:CRVideo_NotifyMediaOpened,NotifyMediaStart:CRVideo_NotifyMediaStart,NotifyMediaStop:CRVideo_NotifyMediaStop,NotifyMediaPause:CRVideo_NotifyMediaPause,NotifyPlayPosSetted:CRVideo_NotifyPlayPosSetted,CreateCloudMixer:CRVideo_CreateCloudMixer,UpdateCloudMixerContent:CRVideo_UpdateCloudMixerContent,DestroyCloudMixer:CRVideo_DestroyCloudMixer,GetAllCloudMixerInfo:CRVideo_GetAllCloudMixerInfo,GetCloudMixerInfo:CRVideo_GetCloudMixerInfo,CreateCloudMixerFailed:CRVideo_CreateCloudMixerFailed,CloudMixerStateChanged:CRVideo_CloudMixerStateChanged,CloudMixerOutputInfoChanged:CRVideo_CloudMixerOutputInfoChanged,CloudMixerInfoChanged:CRVideo_CloudMixerInfoChanged,SendCmd:CRVideo_SendCmd,SendBuffer:CRVideo_SendBuffer,SendFile:CRVideo_SendFile,CancelSend:CRVideo_CancelSend,SendCmdRslt:CRVideo_SendCmdRslt,SendBufferRslt:CRVideo_SendBufferRslt,SendFileRslt:CRVideo_SendFileRslt,SendProgress:CRVideo_SendProgress,NotifyCmdData:CRVideo_NotifyCmdData,NotifyBufferData:CRVideo_NotifyBufferData,NotifyFileData:CRVideo_NotifyFileData,SendMeetingCustomMsg:CRVideo_SendMeetingCustomMsg,SendMeetingCustomMsgRslt:CRVideo_SendMeetingCustomMsgRslt,NotifyMeetingCustomMsg:CRVideo_NotifyMeetingCustomMsg,SetMediaCfg:CRVideo_SetMediaCfg,GetMediaCfg:CRVideo_GetMediaCfg,GetScreenShareCfg:CRVideo_GetScreenShareCfg},Hr);CRVideo.SDKKey="CRSDK",window.__CRName=atob("Y2xvdWRyb29t"),window.__CRNamC=atob("Q2xvdWRyb29t"),window.__CRNameUP=atob("Q0xPVURST09N");const zr=Gr})(),__webpack_exports__})()));
//# sourceMappingURL=RTCSDKV2.min.js.map?v=91c3