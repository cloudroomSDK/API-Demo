(()=>{var __webpack_modules__={8249:function(e,t,n){var i;e.exports=(i=i||function(e,t){var i;if("undefined"!=typeof window&&window.crypto&&(i=window.crypto),"undefined"!=typeof self&&self.crypto&&(i=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(i=globalThis.crypto),!i&&"undefined"!=typeof window&&window.msCrypto&&(i=window.msCrypto),!i&&"undefined"!=typeof global&&global.crypto&&(i=global.crypto),!i)try{i=n(2480)}catch(e){}var r=function(){if(i){if("function"==typeof i.getRandomValues)try{return i.getRandomValues(new Uint32Array(1))[0]}catch(e){}if("function"==typeof i.randomBytes)try{return i.randomBytes(4).readInt32LE()}catch(e){}}throw new Error("Native crypto module could not be used to get secure random number.")},o=Object.create||function(){function e(){}return function(t){var n;return e.prototype=t,n=new e,e.prototype=null,n}}(),s={},a=s.lib={},c=a.Base={extend:function(e){var t=o(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},l=a.WordArray=c.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=n!=t?n:4*e.length},toString:function(e){return(e||u).stringify(this)},concat:function(e){var t=this.words,n=e.words,i=this.sigBytes,r=e.sigBytes;if(this.clamp(),i%4)for(var o=0;o<r;o++){var s=n[o>>>2]>>>24-o%4*8&255;t[i+o>>>2]|=s<<24-(i+o)%4*8}else for(var a=0;a<r;a+=4)t[i+a>>>2]=n[a>>>2];return this.sigBytes+=r,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=c.clone.call(this);return e.words=this.words.slice(0),e},random:function(e){for(var t=[],n=0;n<e;n+=4)t.push(r());return new l.init(t,e)}}),d=s.enc={},u=d.Hex={stringify:function(e){for(var t=e.words,n=e.sigBytes,i=[],r=0;r<n;r++){var o=t[r>>>2]>>>24-r%4*8&255;i.push((o>>>4).toString(16)),i.push((15&o).toString(16))}return i.join("")},parse:function(e){for(var t=e.length,n=[],i=0;i<t;i+=2)n[i>>>3]|=parseInt(e.substr(i,2),16)<<24-i%8*4;return new l.init(n,t/2)}},h=d.Latin1={stringify:function(e){for(var t=e.words,n=e.sigBytes,i=[],r=0;r<n;r++){var o=t[r>>>2]>>>24-r%4*8&255;i.push(String.fromCharCode(o))}return i.join("")},parse:function(e){for(var t=e.length,n=[],i=0;i<t;i++)n[i>>>2]|=(255&e.charCodeAt(i))<<24-i%4*8;return new l.init(n,t)}},f=d.Utf8={stringify:function(e){try{return decodeURIComponent(escape(h.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(e){return h.parse(unescape(encodeURIComponent(e)))}},_=a.BufferedBlockAlgorithm=c.extend({reset:function(){this._data=new l.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=f.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n,i=this._data,r=i.words,o=i.sigBytes,s=this.blockSize,a=o/(4*s),c=(a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0))*s,d=e.min(4*c,o);if(c){for(var u=0;u<c;u+=s)this._doProcessBlock(r,u);n=r.splice(0,c),i.sigBytes-=d}return new l.init(n,d)},clone:function(){var e=c.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),p=(a.Hasher=_.extend({cfg:c.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){_.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new p.HMAC.init(e,n).finalize(t)}}}),s.algo={});return s}(Math),i)},2153:function(e,t,n){var i;e.exports=(i=n(8249),function(e){var t=i,n=t.lib,r=n.WordArray,o=n.Hasher,s=t.algo,a=[],c=[];!function(){function t(t){for(var n=e.sqrt(t),i=2;i<=n;i++)if(!(t%i))return!1;return!0}function n(e){return 4294967296*(e-(0|e))|0}for(var i=2,r=0;r<64;)t(i)&&(r<8&&(a[r]=n(e.pow(i,.5))),c[r]=n(e.pow(i,1/3)),r++),i++}();var l=[],d=s.SHA256=o.extend({_doReset:function(){this._hash=new r.init(a.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,i=n[0],r=n[1],o=n[2],s=n[3],a=n[4],d=n[5],u=n[6],h=n[7],f=0;f<64;f++){if(f<16)l[f]=0|e[t+f];else{var _=l[f-15],p=(_<<25|_>>>7)^(_<<14|_>>>18)^_>>>3,C=l[f-2],g=(C<<15|C>>>17)^(C<<13|C>>>19)^C>>>10;l[f]=p+l[f-7]+g+l[f-16]}var m=i&r^i&o^r&o,I=(i<<30|i>>>2)^(i<<19|i>>>13)^(i<<10|i>>>22),R=h+((a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25))+(a&d^~a&u)+c[f]+l[f];h=u,u=d,d=a,a=s+R|0,s=o,o=r,r=i,i=R+(I+m)|0}n[0]=n[0]+i|0,n[1]=n[1]+r|0,n[2]=n[2]+o|0,n[3]=n[3]+s|0,n[4]=n[4]+a|0,n[5]=n[5]+d|0,n[6]=n[6]+u|0,n[7]=n[7]+h|0},_doFinalize:function(){var t=this._data,n=t.words,i=8*this._nDataBytes,r=8*t.sigBytes;return n[r>>>5]|=128<<24-r%32,n[14+(r+64>>>9<<4)]=e.floor(i/4294967296),n[15+(r+64>>>9<<4)]=i,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA256=o._createHelper(d),t.HmacSHA256=o._createHmacHelper(d)}(Math),i.SHA256)},9176:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i={server:new class{constructor(){this.serverAddr="",this.wbServer=""}setServerAddr(e){this.serverAddr=e}getServerAddr(){return this.serverAddr}},auth:new class{constructor(){this.UserName="",this.UserPswd=""}setAuth(e){e.UserName&&(this.UserName=e.UserName),e.UserPswd&&(this.UserPswd=e.UserPswd)}getAuth(){return{UserName:this.UserName,UserPswd:this.UserPswd}}},userInfoHistory:new class{constructor(){this.initData()}initData(){this.storageKey="CRRTCSDK_UserInfoHistory",this.historyList=JSON.parse(this.getStorage(this.storageKey)||"[]")}getUserHistory(e,t,n,i){const r=this.historyList.find((n=>n.meetID==e&&n.userID==t));return!!r&&r.myDetail}setUserHistory(e,t,n,i,r){if(null!=this.historyList.find((n=>n.meetID==e&&n.userID==t)))return;const o={meetID:e,userID:t,memberID:n,memberType:i,myDetail:r};this.historyList.push(o),this.setStorage(this.storageKey,JSON.stringify(this.historyList))}setStorage(e,t){window.localStorage.setItem(e,t)}getStorage(e){return window.localStorage.getItem(e)}},userInfo:new class{constructor(){}setUserInfo(e,t){const n=JSON.parse(localStorage.getItem("CRRTCSDK_UserInfo"))||[],i=n.find((t=>t.nickname==e));i?i.userID=t:n.push({nickname:e,userID:t}),localStorage.setItem("CRRTCSDK_UserInfo",JSON.stringify(n))}getUserInfo(e){const t=(JSON.parse(localStorage.getItem("CRRTCSDK_UserInfo"))||[]).find((t=>t.nickname==e));return t?t.userID:""}}}},7693:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var i=n(3085);function r(e){var t=e.dataType||"json",n=e.type||"get",r=e.data||{};if("jsonp"==t){var o=document.getElementsByTagName("body")[0],s=e.url||"",a=`CRjsonp${i.Z.generate_uuid().replaceAll("-","")}`;e.jsonp?r[e.jsonp]=a:r.callback=a;var c="";for(var l in r)c+=encodeURIComponent(l)+"="+encodeURIComponent(r[l])+"&";s+="?"+c;var d=document.createElement("script");d.src=s,o.appendChild(d),window[a]=function(){e.success&&e.success.apply(this,arguments),o.removeChild(d),window[a]=null,delete window[a]},d.onerror=function(){e.error&&e.error.apply(this,arguments),console.error("[Callsvr] server error:"+s),o.removeChild(d),window[a]=null,delete window[a]}}else{let i;if(i=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),i.timeout=e.timeout?e.timeout:5e3,"GET"==n||"get"==n){var u=o(r);s=e.url+"?"+u;try{if(i.open(n,s,null==e.async||e.async),e.header)for(var h in e.header)i.setRequestHeader(h,e.header[h]);i.send(null)}catch(t){e.error&&e.error(i)}}else if("POST"==n||"post"==n){u=a(r);try{if(i.open(n,e.url,null==e.async||e.async),"json"===t?i.setRequestHeader("Content-Type","application/json;charset=UTF-8"):i.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=UTF-8"),e.header)for(var h in e.header)i.setRequestHeader(h,e.header[h]);i.send(u)}catch(t){e.error&&e.error(i)}}function o(e){if("string"==typeof e)return e;var t=[];for(var n in e){var i=encodeURIComponent(e[n]);t.push(n+"="+i)}return t.join("&")}function a(e){if("string"==typeof e)return e;var t=[];for(var n in e)t.push(n+"="+e[n]);return t.join("&")}i.onreadystatechange=function(){if(4==i.readyState)if(200==i.status&&e.success)if("text"==t)e.success(i.responseText,"success");else{try{var n=JSON.parse(i.responseText)}catch(e){CRVideo_LoginFail.target(202,CRVideo.LoginParam.cookie),CRVideo_UploadingLog(),console.error(e)}e.success(n||i.responseText)}else e.error&&e.error(i)}}}},5796:()=>{window.CRVideo_ERR_DEF={NOERR:0,UNKNOWERR:1,OUTOF_MEM:2,INNER_ERR:3,MISMATCHCLIENTVER:4,MEETPARAM_ERR:5,ERR_DATA:6,ANCTPSWD_ERR:7,SERVER_EXCEPTION:8,LOGINSTATE_ERROR:9,SDK_USER_BEEN_KICKOUT:10,SDK_NOT_INIT:11,SDK_NOT_LOGIN:12,SDK_BASE64_COV_ERR:13,SDK_CUSTOMAUTH_NOINFO:14,SDK_CUSTOMAUTH_NOTSUPPORT:15,SDK_CUSTOMAUTH_EXCEPTION:16,SDK_CUSTOMAUTH_FAILED:17,SDK_TOKEN_TIMEOUT:18,SDK_TOKEN_AUTHINFOERR:19,SDK_TOKEN_APPIDNOTEXIST:20,SDK_TOKEN_AUTH_FAILED:21,SDK_TOKEN_NOTTOKENTYPE:22,NETWORK_INITFAILED:200,NO_SERVERINFO:201,NOSERVER_RSP:202,CREATE_CONN_FAILED:203,SOCKETEXCEPTION:204,SOCKETTIMEOUT:205,FORCEDCLOSECONNECTION:206,CONNECTIONLOST:207,VOICEENG_INITFAILED:208,SDK_SSL_ERR:209,QUE_ID_INVALID:400,QUE_NOUSER:401,QUE_USER_CANCELLED:402,QUE_SERVICE_NOT_START:403,ALREADY_OTHERQUE:404,INVALID_CALLID:600,ERR_CALL_EXIST:601,ERR_BUSY:602,ERR_OFFLINE:603,ERR_NOANSWER:604,ERR_USER_NOT_FOUND:605,ERR_REFUSE:606,MEETNOTEXIST:800,AUTHERROR:801,MEMBEROVERFLOWERROR:802,RESOURCEALLOCATEERROR:803,MEETROOMLOCKED:804,BALANCELESSERROR:805,SEVICE_NOTENABLED:806,ALREADYLOGIN:807,SDK_MIC_NORIGHT:808,SDK_MIC_BEING_USED:809,SDK_MIC_UNKNOWERR:810,SDK_SPK_NORIGHT:811,SDK_SPK_BEING_USED:812,SDK_SPK_UNKNOWERR:813,CATCH_SCREEN_ERR:900,RECORD_MAX:901,RECORD_NO_DISK:902,RECORD_SIZE_ERR:903,SDK_CFG_RESTRICTED:904,SDK_FILE_ERR:905,SDK_RECORDSTARTED:906,SENDFAIL:1e3,CONTAIN_SENSITIVEWORDS:1001,SENDCMD_LARGE:1100,SENDBUFFER_LARGE:1101,SENDDATA_TARGETINVALID:1102,SENDFILE_FILEINERROR:1103,TRANSID_INVALID:1104,RECORDFILE_STATE_ERR:1200,RECORDFILE_NOT_EXIST:1201,IPCAM_URLERR:1300,IPCAM_ALREADYEXIST:1301,IPCAM_TOOMUCH:1302,SDK_FILE_NOT_EXIST:1400,SDK_FILE_READ_ERR:1401,SDK_FILE_WRITE_ERR:1402,SDK_FILE_OPERATOR_ERR:1403,WEB_OCX_NOTINSTALLED:2001,WEB_BROWER_NOTUPPORTED:2002,OCX_VERSION_NOTUPPORTED:2003,DEVICE_UNKNOW_ERR:8001,DEVICE_NOTALLOWED_ERR:8002,DEVICE_UPDATELIST_ERR:8003,DEVICE_HAVENOTAPI_ERR:8004,DEVICE_LOWVER_ERR:8006,DEVICE_OPEN_DEVICE_ERR:8007},window.CRVideo_ASTATUS={AUNKNOWN:0,ANULL:1,ACLOSE:2,AOPEN:3,AOPENING:4},window.CRVideo_VSTATUS={VUNKNOWN:0,VNULL:1,VCLOSE:2,VOPEN:3,VOPENING:4},window.CRVideo_VIDEO_SHOW_SIZE={VIDEO_SZ_80:1,VSIZE_SZ_128:2,VSIZE_SZ_160:3,VSIZE_SZ_192:4,VSIZE_SZ_256:5,VSIZE_SZ_288:6,VSIZE_SZ_320:7,VSIZE_SZ_360:8,VSIZE_SZ_400:9,VSIZE_SZ_480:10,VSIZE_SZ_576:11,VSIZE_SZ_720:12,VSIZE_SZ_1080:13},window.CRVideo_VIDEO_FORMAT={VFMT_YUV420P:0,VFMT_ARGB32:1},window.CRVideo_REC_VCONTENT_TYPE={RECVTP_VIDEO:0,RECVTP_PIC:1,RECVTP_SCREEN:2,RECVTP_MEDIA:3,RECVTP_TIMESTAMP:4,RECVTP_REMOTE_SCREEN:5},window.CRVideo_RECORD_STATE={NO_RECORD:0,STARTING:1,RECORDING:2,PAUSED:3,STOPPING:4},window.CRVideo_RECORD_AUDIO_TYPE={REC_AUDIO_TYPE_NULL:0,REC_AUDIO_TYPE_LOC:1,REC_AUDIO_TYPE_OTHER:2,REC_AUDIO_TYPE_ALL:3},window.CRVideo_RECORD_VIDEO_TYPE={REC_VCONTENT_NULL:0,RECORD_VIDEO_TYPE_SCREEN:1,REC_VCONTENT_VIDEOS:3},window.CRVideo_RECORD_VLAYOUT={REC_VLAYOUT_GRID:0,REC_VLAYOUT_PIP:1},window.CRVideo_ENCODE_TYPE={ENC_H264:1},window.CRVideo_ENCODE_TYPE[`ENC_${window.__CRNameUP}`]=0,window.CRVideo_MOUSE_MSG_TYPE={MOUSE_MOVE:0,MOUSE_DOWN:1,MOUSE_UP:2,MOUSE_DBCLICK:3},window.CRVideo_MOUSE_KEY_TYPE={MOUSEKEY_NULL:0,MOUSEKEY_L:1,MOUSEKEY_M:2,MOUSEKEY_R:3,MOUSEKEY_WHEEL:4,MOUSEKEY_X:5},window.CRVideo_KEY_MSG_TYPE={KEYT_DWON:0,KEYT_UP:1},window.CRVideo_MAIN_PAGE_TYPE={MAINPAGE_VIDEOWALL:0,MAINPAGE_SHARE:1,MAINPAGE_WHITEBOARD:2},window.CRVideo_VIDEOLAYOUTMODE={VLO_1v1_M:0,VLO_WALL1_M:1,VLO_WALL2:2,VLO_WALL4:3,VLO_WALL5_M:4,VLO_WALL6_M:5,VLO_WALL9:6,VLO_WALL13_M:7,VLO_WALL16:8,VLO_WALL25:9},window.CRVideo_HTTP_TRANSFER_STAT={HTTPFS_NULL:0,HTTPFS_QUEUE:1,HTTPFS_TRANSFERING:2,HTTPFS_FINISHED:3},window.CRVideo_HTTP_TRANSFER_RESULT={HTTPR_Success:0,HTTPR_InnerErr:1,HTTPR_ParamErr:2,HTTPR_NetworkFail:3,HTTPR_NetworkTimeout:4,HTTPR_FileOperationFail:5,HTTPR_PathNotSupprot:6,HTTPR_FileTransfering:7,HTTPR_HTTPERR_BEGIN:1e3,HTTPR_HTTPERR_END:1999},window.CRVideo_ToolBarUI={BTN_Pause:0,BTN_Stop:1},window.CRVideo_REC_DATATYPE={REC_AV_DEFAULT:0,REC_AUDIO_LOC:1,REC_AUDIO_OTHER:2,REC_VIDEO:3}},3130:()=>{const e={0:"SDK_SUCCESS",1:"SDK_UNSUPPORT",2:"SDK_ANCT_NOTEXIST",3:"SDK_USR_PSWD_ERR",4:"SDK_MEET_PSWD_ERR",5:"SDK_UNKNOW_ERR",6:"SDK_MEET_NOTEXIST",7:"SDK_MEET_START_ERR",8:"SDK_CREATEMEETINGFAILED",9:"SDK_THEME_EMPTY_ERR",10:"SDK_NOUSED",11:"SDK_CMEET_NO_PERMISSION",12:"SDK_FIXMEET_NOBALANCE",13:"SDK_FIXMEETING_TOOMANY",14:"SDK_CONFERENCELINK_ERR",15:"SDK_NICKNAMEEMPTY_ERR",16:"SDK_CONTINUOUSFAILURE",17:"SDK_MEETINGNOTSTART",18:"SDK_MEETINGOVER",19:"SDK_MEETID_INVALID",21:"SDK_ACCOUNT_INVALID",22:"SDK_MEET_BUS_USED",23:"SDK_VIN_NO_PERMISSION",26:"SDK_MEET_NO_TV_MEETING",27:"SDK_OEM_ANCT_MISMATCH",30:"SDK_VERSION_NOTMATCH",31:"SDK_USER_EXISTS",32:"SDK_USER_NOT_EXISTS",33:"SDK_LOGINSTATE_ERROR",34:"SDK_USER_BEEN_KICKOUT",38:"SDK_ONLY_INVITER",40:"WEB_ACCOUNT_EXPIRED",71:"SDK_CUSTOMAUTH_NOINFO",72:"SDK_CUSTOMAUTH_NOTSUPPORT",73:"SDK_CUSTOMAUTH_EXCEPTION",74:"SDK_CUSTOMAUTH_FAILED",81:"SDK_TOKEN_AUTHINFOERR",83:"SDK_TOKEN_AUTHCHECKERR",84:"SDK_TOKEN_AUTHEXCEPTION",85:"SDK_TOKEN_AUTHINFOTIMEOUT",86:"SDK_TOKEN_APPIDNOTEXIST",87:"SDK_TOKEN_NOTTOKENTYPE",500:"SDK_NOT_LOGIN",1e4:"HTTP_ERR_BEGIN",10999:"HTTP_ERR_END",11e3:"SDK_SND_DATA_ERR",11001:"SDK_RSP_DATA_ERR",2e4:"CALL_ERR_BEGIN",20001:"CALL_ERR_UNKNOW",20002:"CALL_ERR_CALL_NOT_FOUND",20003:"CALL_ERR_CALL_EXIST",20004:"CALL_ERR_BUSY",20005:"CALL_ERR_OFFLINE",20006:"CALL_ERR_NOANSWER",20007:"CALL_ERR_PARAM_INVALID",20008:"CALL_ERR_USER_NOT_FOUND",20009:"CALL_ERR_PWD_INVALID",20010:"CALL_ERR_BUSY_MEETING",20011:"CALL_ERR_REFUSE",20012:"CALL_SEND_FAILED",20013:"CALL_RSP_DATA_ERR",20014:"CALL_ERR_SESSIONERR",20015:"CALL_ERR_ICEPRXNULL",20016:"CALL_SENDDATA_TARGETINVALID",20100:"RSP_CODE_QUE_ID_INVALID",20101:"RSP_CODE_QUE_NOUSER",20102:"RSP_CODE_QUE_USER_CANCELLED",20103:"RSP_CODE_QUE_SERVICE_NOT_START",20104:"RSP_CODE_QUE_QUEUING",3e4:"CALL_SENDCMD_LARGE",30001:"CALL_SENDBUFFER_LARGE",30002:"CALL_SENDFILE_FILEINERROR",30003:"CALL_TRANSID_INVALID"},t={CRVIDEOSDK_NOERR:0,CRVIDEOSDK_UNKNOWERR:1,CRVIDEOSDK_OUTOF_MEM:2,CRVIDEOSDK_INNER_ERR:3,CRVIDEOSDK_MISMATCHCLIENTVER:4,CRVIDEOSDK_MEETPARAM_ERR:5,CRVIDEOSDK_ERR_DATA:6,CRVIDEOSDK_ANCTPSWD_ERR:7,CRVIDEOSDK_SERVER_EXCEPTION:8,CRVIDEOSDK_LOGINSTATE_ERROR:9,CRVIDEOSDK_USER_BEEN_KICKOUT:10,CRVIDEOSDK_NOT_INIT:11,CRVIDEOSDK_NOT_LOGIN:12,CRVIDEOSDK_BASE64_COV_ERR:13,WEB_ACCOUNT_EXPIRED:23,CRVIDEOSDK_CUSTOMAUTH_NOINFO:14,CRVIDEOSDK_CUSTOMAUTH_NOTSUPPORT:15,CRVIDEOSDK_CUSTOMAUTH_EXCEPTION:16,CRVIDEOSDK_CUSTOMAUTH_FAILED:17,CRVIDEOSDK_TOKEN_TIMEOUT:18,CRVIDEOSDK_TOKEN_AUTHINFOERR:19,CRVIDEOSDK_TOKEN_APPIDNOTEXIST:20,CRVIDEOSDK_TOKEN_AUTH_FAILED:21,CRVIDEOSDK_TOKEN_NOTTOKENTYPE:22,CRVIDEOSDK_API_NO_PERMISSION:23,CRVIDEOSDK_NETWORK_INITFAILED:200,CRVIDEOSDK_NO_SERVERINFO:201,CRVIDEOSDK_NOSERVER_RSP:202,CRVIDEOSDK_CREATE_CONN_FAILED:203,CRVIDEOSDK_SOCKETEXCEPTION:204,CRVIDEOSDK_SOCKETTIMEOUT:205,CRVIDEOSDK_FORCEDCLOSECONNECTION:206,CRVIDEOSDK_CONNECTIONLOST:207,CRVIDEOSDK_VOICEENG_INITFAILED:208,CRVIDEOSDK_SSL_ERR:209,CRVIDEOSDK_QUE_ID_INVALID:400,CRVIDEOSDK_QUE_NOUSER:401,CRVIDEOSDK_QUE_USER_CANCELLED:402,CRVIDEOSDK_QUE_SERVICE_NOT_START:403,CRVIDEOSDK_ALREADY_OTHERQUE:404,CRVIDEOSDK_INVALID_CALLID:600,CRVIDEOSDK_ERR_CALL_EXIST:601,CRVIDEOSDK_ERR_BUSY:602,CRVIDEOSDK_ERR_OFFLINE:603,CRVIDEOSDK_ERR_NOANSWER:604,CRVIDEOSDK_ERR_USER_NOT_FOUND:605,CRVIDEOSDK_ERR_REFUSE:606,CRVIDEOSDK_MEETNOTEXIST:800,CRVIDEOSDK_AUTHERROR:801,CRVIDEOSDK_MEMBEROVERFLOWERROR:802,CRVIDEOSDK_RESOURCEALLOCATEERROR:803,CRVIDEOSDK_MEETROOMLOCKED:804,CRVIDEOSDK_BALANCELESSERROR:805,CRVIDEOSDK_SEVICE_NOTENABLED:806,CRVIDEOSDK_ALREADYLOGIN:807,CRVIDEOSDK_MIC_NORIGHT:808,CRVIDEOSDK_MIC_BEING_USED:809,CRVIDEOSDK_MIC_UNKNOWERR:810,CRVIDEOSDK_SPK_NORIGHT:811,CRVIDEOSDK_SPK_BEING_USED:812,CRVIDEOSDK_SPK_UNKNOWERR:813,CRVIDEOSDK_PIC_ISNULL:814,CRVIDEOSDK_CATCH_SCREEN_ERR:900,CRVIDEOSDK_RECORD_MAX:901,CRVIDEOSDK_RECORD_NO_DISK:902,CRVIDEOSDK_RECORD_SIZE_ERR:903,CRVIDEOSDK_CFG_RESTRICTED:904,CRVIDEOSDK_FILE_ERR:905,CRVIDEOSDK_RECORDSTARTED:906,CRVIDEOSDK_NOMORE_MCU:907,CRVIDEOSDK_SENDFAIL:1e3,CRVIDEOSDK_CONTAIN_SENSITIVEWORDS:1001,CRVIDEOSDK_NO_CHAT_PERMISSION:1002,CRVIDEOSDK_SENDCMD_LARGE:1100,CRVIDEOSDK_SENDBUFFER_LARGE:1101,CRVIDEOSDK_SENDDATA_TARGETINVALI:1102,CRVIDEOSDK_SENDFILE_FILEINERRO:1103,CRVIDEOSDK_TRANSID_INVALI:1104,CRVIDEOSDK_RECORDFILE_STATE_ERR:1200,CRVIDEOSDK_RECORDFILE_NOT_EXIST:1201,CRVIDEOSDK_RECORDFILE_UPLOAD_FAILED:1202,CRVIDEOSDK_RECORDFILE_DEL_FAILED:1203,CRVIDEOSDK_IPCAM_URLERR:1300,CRVIDEOSDK_IPCAM_ALREADYEXIST:1301,CRVIDEOSDK_IPCAM_TOOMANYCAM:1302,CRVIDEOSDK_FILE_NOT_EXIST:1400,CRVIDEOSDK_FILE_READ_ERR:1401,CRVIDEOSDK_FILE_WRITE_ERR:1402,CRVIDEOSDK_FILE_ALREADY_EXIST:1403,CRVIDEOSDK_FILE_OPERATOR_ERR:1404,CRVIDEOSDK_NETDISK_NOT_EXIST:1500,CRVIDEOSDK_NETDISK_PERMISSIONDENIED:1501,CRVIDEOSDK_NETDISK_INVALIDFILENAME:1502,CRVIDEOSDK_NETDISK_FILEALREADYEXISTS:1503,CRVIDEOSDK_NETDISK_FILEORDIRECTORYNOTEXISTS:1504,CRVIDEOSDK_NETDISK_FILENOTTRANSFORM:1505,CRVIDEOSDK_NETDISK_TRANSFORMFAILED:1506,CRVIDEOSDK_NETDISK_NOSPACE:1507,SDK_CMEET_NO_PERMISSION:70001,SDK_MEET_BUS_USED:70002,SDK_MEETINGNOTSTART:70003,SDK_ONLY_INVITER:70004};window.Err_Cover=function(e){switch(e){case"SDK_SUCCESS":return"CRVIDEOSDK_NOERR";case"SDK_UNKNOW_ERR":default:return"CRVIDEOSDK_UNKNOWERR";case"SDK_NOT_LOGIN":return"CRVIDEOSDK_NOT_LOGIN";case"SDK_UNSUPPORT":return"CRVIDEOSDK_MISMATCHCLIENTVER";case"SDK_USR_PSWD_ERR":case"CALL_ERR_PWD_INVALID":return"CRVIDEOSDK_ANCTPSWD_ERR";case"SDK_LOGINSTATE_ERROR":return"CRVIDEOSDK_LOGINSTATE_ERROR";case"SDK_USER_BEEN_KICKOUT":return"CRVIDEOSDK_USER_BEEN_KICKOUT";case"SDK_CUSTOMAUTH_NOINFO":return"CRVIDEOSDK_CUSTOMAUTH_NOINFO";case"SDK_CUSTOMAUTH_NOTSUPPORT":return"CRVIDEOSDK_CUSTOMAUTH_NOTSUPPORT";case"SDK_CUSTOMAUTH_EXCEPTION":return"CRVIDEOSDK_CUSTOMAUTH_EXCEPTION";case"SDK_CUSTOMAUTH_FAILED":return"CRVIDEOSDK_CUSTOMAUTH_FAILED";case"SDK_MEET_PSWD_ERR":return"CRVIDEOSDK_AUTHERROR";case"SDK_MEETINGOVER":case"SDK_MEETID_INVALID":case"SDK_MEET_NO_TV_MEETING":case"SDK_MEET_NOTEXIST":return"CRVIDEOSDK_MEETNOTEXIST";case"SDK_CMEET_NO_PERMISSION":return"SDK_CMEET_NO_PERMISSION";case"SDK_MEETINGNOTSTART":return"SDK_MEETINGNOTSTART";case"SDK_ONLY_INVITER":return"SDK_ONLY_INVITER";case"SDK_VIN_NO_PERMISSION":return"CRVIDEOSDK_API_NO_PERMISSION";case"SDK_MEET_BUS_USED":return"SDK_MEET_BUS_USED";case"SDK_SND_DATA_ERR":return"CRVIDEOSDK_NOSERVER_RSP";case"SDK_RSP_DATA_ERR":case"CALL_RSP_DATA_ERR":return"CRVIDEOSDK_ERR_DATA";case"SDK_TOKEN_AUTHINFOERR":case"SDK_TOKEN_AUTHEXCEPTION":return"CRVIDEOSDK_TOKEN_AUTHINFOERR";case"SDK_TOKEN_AUTHCHECKERR":return"CRVIDEOSDK_TOKEN_AUTH_FAILED";case"SDK_TOKEN_AUTHINFOTIMEOUT":return"CRVIDEOSDK_TOKEN_TIMEOUT";case"SDK_TOKEN_APPIDNOTEXIST":return"CRVIDEOSDK_TOKEN_APPIDNOTEXIST";case"SDK_TOKEN_NOTTOKENTYPE":return"CRVIDEOSDK_TOKEN_NOTTOKENTYPE";case"CALL_ERR_CALL_NOT_FOUND":return"CRVIDEOSDK_INVALID_CALLID";case"CALL_ERR_CALL_EXIST":return"CRVIDEOSDK_ERR_CALL_EXIST";case"CALL_ERR_BUSY":case"CALL_ERR_BUSY_MEETING":return"CRVIDEOSDK_ERR_BUSY";case"CALL_ERR_OFFLINE":return"CRVIDEOSDK_ERR_OFFLINE";case"CALL_ERR_NOANSWER":return"CRVIDEOSDK_ERR_NOANSWER";case"CALL_ERR_PARAM_INVALID":return"CRVIDEOSDK_MEETPARAM_ERR";case"CALL_ERR_USER_NOT_FOUND":return"CRVIDEOSDK_ERR_USER_NOT_FOUND";case"CALL_ERR_REFUSE":return"CRVIDEOSDK_ERR_REFUSE";case"CALL_ERR_ICEPRXNULL":return"CRVIDEOSDK_CREATE_CONN_FAILED";case"CALL_SENDDATA_TARGETINVALID":return"CRVIDEOSDK_SENDDATA_TARGETINVALID";case"CALL_SENDCMD_LARGE":return"CRVIDEOSDK_SENDCMD_LARGE";case"CALL_SENDBUFFER_LARGE":return"CRVIDEOSDK_SENDBUFFER_LARGE";case"CALL_TRANSID_INVALID":return"CRVIDEOSDK_TRANSID_INVALID";case"CALL_SENDFILE_FILEINERROR":return"CRVIDEOSDK_SENDFILE_FILEINERROR";case"CALL_ERR_SESSIONERR":return"CRVIDEOSDK_CONNECTIONLOST";case"CALL_SEND_FAILED":return"CRVIDEOSDK_SOCKETTIMEOUT";case"RSP_CODE_QUE_ID_INVALID":return"CRVIDEOSDK_QUE_ID_INVALID";case"RSP_CODE_QUE_NOUSER":return"CRVIDEOSDK_QUE_NOUSER";case"RSP_CODE_QUE_USER_CANCELLED":return"CRVIDEOSDK_QUE_USER_CANCELLED";case"RSP_CODE_QUE_SERVICE_NOT_START":return"CRVIDEOSDK_QUE_SERVICE_NOT_START";case"RSP_CODE_QUE_QUEUING":return"CRVIDEOSDK_ALREADY_OTHERQUE";case"WEB_ACCOUNT_EXPIRED":return"WEB_ACCOUNT_EXPIRED"}},window.ICE_SDK_ERR=function(n){return 0==n?0:t[Err_Cover(e[2e4+n])]},window.WEB_SDK_ERR=function(n){return 0==n?0:t[Err_Cover(e[n])]};window.__Rtc.CRCONFERR=new class{constructor(){}Parse(e){const t={err:e.toString(),errCode:1,errDesc:"未知错误"};return e instanceof Conference.RoomLockedError&&(t.errCode=804,t.errDesc="房间已加锁"),e instanceof Conference.SeviceNotEnabled&&(t.errCode=806,t.errDesc="业务权限未开启"),e instanceof Conference.NoResourceForMIC&&(t.errCode=808,t.errDesc="没有开麦权限"),e instanceof Conference.NoResourceForMIC&&(t.errCode=816,t.errDesc="开麦数达到上限"),e instanceof Conference.SrvRecordStarted&&(t.errCode=906,t.errDesc="录制已开启"),t}}},1287:()=>{window.__Rtc={},function(){for(var e=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,n){var i=(new Date).getTime(),r=Math.max(0,16.7-(i-e)),o=window.setTimeout((function(){t(i+r)}),r);return e=i+r,o}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}(),Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),n=this,i=function(){},r=function(){return n.apply(this instanceof i&&e?this:e,t.concat(Array.prototype.slice.call(arguments)))};return i.prototype=this.prototype,r.prototype=new i,r}),window.Cr={},window.CRVideo={},Cr.CbProxy=function(e){this.name=e,this.callback=null},Cr.CbProxy.prototype.call=function(e){try{this.callback&&"function"==typeof this.callback&&this.callback.apply(null,e)}catch(e){console.error(e)}},Cr.MsgInfo=function(e){this.type=e.type,this.index=e.index,this.msg=e.msg,this.head=e.head,this.sendTime=e.sendTime,this.targetNickname=e.targetNickname,this.targetTermId=e.targetTermId,this.srcNickname=e.srcNickname,this.srcTermId=e.srcTermId,this.ishost=e.ishost},Cr.MeetInfo=function(e){this.termId=e.termId,this.nickname=e.nickname,this.userId=e.userId,this.bindId=e.bindId,this.openedCamIDs=e.openedCamIDs,this.activeMembers=e.activeMembers,this.myDetail=e.myDetail,this.serverTime=e.serverTime,this.isBegan=e.isBegan,this.countdown=e.countdown,this.mainVideoTermID=e.mainVideoTermID,this.wbDescibes=e.wbDescibes,this.ServerUTCTime=e.ServerUTCTime,this.bAllowWall=e.bAllowWall,this.bFull=e.bFull,this.bRoomLocked=e.bRoomLocked,this.curMainTab=e.curMainTab,this.curSubTab=e.curSubTab,this.option=e.option,this.lastElemValue=e.lastElemValue,this.lastTabValue=e.lastTabValue,this.confInfo=e.confInfo,this.windowMode=e.windowMode,this.meetID=e.meetID},Cr.Quesask=function(e){this.typeID=e.typeID,this.asktime=e.asktime,this.termID=e.termID,this.content=e.content,this.nickname=e.nickname},Cr_Question_State={NotReply:0,Replying:1,NotPublic:2,Publiced:3,Deleted:4},Cr.QuesDeal=function(e){this.state=e.state._value,this.replyCon=e.replyCon,this.replyTermId=e.replyTermId,this.replyTime=e.replyTime,this.publishTermID=e.publishTermID,this.publishTime=e.publishTime,this.delTermID=e.delTermID,this.delTime=e.delTime},Cr.QuesInf=function(e){this.quesID=e.quesID,this.ask=new Cr.Quesask(e.ask),this.deal=new Cr.QuesDeal(e.deal)},Cr.ScreenShareInfo=function(e){this.scrSviceProxy=e.scrSviceProxy,this.authKey=e.authKey,this.allowCtrlReq=e.allowCtrlReq,this.state=e.state,this.sharer=e.sharer,this.controller=e.controller,this.allowOtherMark=e.allowOtherMark},Cr.MediaInfo=function(e){this.termid=e.termid,this.MEDIA_STATE=e.MEDIA_STATE,this.mediaName=e.mediaName},Cr.ElementID=function(e){this.ownerID=e.ownerID,this.ID=e.ID},Cr.ElementData=function(e){this.eID=e.eID,this.orderId=e.orderId,this.left=e.left,this.top=e.top,this.type=e.type,this.noused=e.noused,this.data=e.data},Cr.AsyncResult=function(){},Cr.AsyncResult.prototype.then=function(e){return this.__child=new Cr.AsyncResult,this.__complete=e,this.__child},Cr.AsyncResult.prototype.complete=function(e){var t=function(){this.next(e),this.__parent&&"function"==typeof this.__parent.next&&this.__parent.next(e)}.bind(this);setTimeout(t,0)},Cr.AsyncResult.prototype.next=function(e){if(this.__complete&&"function"==typeof this.__complete){var t=this.__complete.apply(this,e);t&&this.__child&&(t.__parent=this.__child)}},Cr.AsyncResult2As=function(e,t){this.id=e,this.proxy=t},Cr.AsyncResult2As.prototype.complete=function(e){e.unshift(this.id),this.proxy.callback.apply(this.proxy,e)},Cr.Swf={__callbackId_generator:0,__generateCallbackId:function(){return Cr.Swf.__callbackId_generator++},__callbackAsyncDict:{},__registerCallbackAsync:function(e,t){if(Cr.Swf.__callbackAsyncDict[e])throw"register swf callback error:duplicate id";Cr.Swf.__callbackAsyncDict[e]=t},asyncAsCallback:function(){if(!(arguments.length>=1))throw"swf callback error:arguments deficient";for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];var n=e.shift(),i=Cr.Swf.__callbackAsyncDict[n];if(!i)throw"swf callback error:async not exist";i.complete(e)},callJs:function(){if(arguments.length>=2){for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];if(cmd=e.shift(),id=e.shift(),cmdObj=Cr.Swf.__asCallbackCmdDict[cmd],cmdObj){var n=cmdObj.fun;cmdObj.proxy;n.call(null,e)}}},__asCallbackCmdDict:{},addAsCallback:function(e,t,n){if(Cr.Swf.__asCallbackCmdDict[e])throw"register swf callback error:duplicate id";Cr.Swf.__asCallbackCmdDict[e]={fun:t,proxy:n}}}},158:()=>{},3961:()=>{CRVideo.logAry=[],CRVideo.browserInfo="";var e=new function(){var t=this;t.logFilename="sdkDebug.log",t.output="",this.getLog=function(){return t.output},this.clear=function(){t.output=""},this.downloadLog=function(){var e="data:text/plain;charset=utf-8,",n=t.getLog();e+=encodeURIComponent(n);var i=document.createElement("a");i.href=e,i.target="_blank",i.download=t.logFilename,document.body.appendChild(i),i.click(),i.remove()},this.log=function(n,i,r){var o="";i=i||"INF";if(null!=n)if("object"==typeof object)var s=JSON.stringify(n);else s=n;var a=new Date;o+=t.formatTimestamp(a),o+="["+i+"] ",o+=s,t.output+=o+"\n",(t.output.length/1024).toFixed(2)>500&&CRVideo_UploadingLog(),(t.output.length/1024).toFixed(2)>1e4&&e.clear()},this.formatTimestamp=function(e){e.getFullYear();var t=e.getDate();return"["+("0"+(e.getMonth()+1)).slice(-2)+"-"+t+" "+Number(e.getHours())+":"+("0"+e.getMinutes()).slice(-2)+":"+("0"+e.getSeconds()).slice(-2)+":"+e.getMilliseconds()+"] "}};window.console.crlog=function(t,n,i){return function(t,n,i){console.log(t),e.log(t,n,i)}},CRVideo_EnableLog2File=function(t,n,i){CRVideo.isUploadLog=t,window.console.crlog=t&&n?function(t,n,i){window.console.log(t),e.log(t,n,i)}:t?e.log:n?console.log:function(){},i||(console.crlog("[LOG] Enable upload log: "+t),console.crlog("[LOG] Enable console log debug: "+n))},CRVideo_EnableLog2File(!0,!0,1),CRVideo.browserInfo=function(){var e="";if(navigator.userAgent.match(/AppleWebKit.*Mobile.*/)){e=/(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent)?"ios":/(Android)/i.test(navigator.userAgent)?"android":"mobile";var t=navigator.userAgent.toLowerCase();if("micromessenger"==t.match(/MicroMessenger/i))return e+"_WX";if("qq"==t.match(/QQ/i))return e+"_qq";if(t.indexOf("liebao")>0)return e+"_leibao";if(null!=t.match(/ubrowser/))return e+"_uc";if(t.indexOf("chrome")>0||t.indexOf("crios")>0)return e+"_chrome";if(t.indexOf("safari")>0)return e+"_safari"}else{var n=navigator.userAgent,i=n.indexOf("Opera")>-1,r=n.indexOf("compatible")>-1&&n.indexOf("MSIE")>-1&&!i,o=n.indexOf("Firefox")>-1,s=n.indexOf("Safari")>-1,a=n.indexOf("Chrome")>-1;if(o)return"PC_FF";if(i)return"PC_Opera";if(a){return function(e,t){var n=navigator.mimeTypes;for(var i in n)if(n[i][e]==t)return!0;return!1}("type","application/vnd.chromium.remoting-viewer")?"PC_360":"pc_chrome"}if(s)return"PC_Safari";if(r)return"IE"}}(),window.CRVideo_StartLogReport=function(){CRVideo.isUploadLog=1,CRVideo_UploadingReport()},window.CRVideo_StopLogReport=function(){CRVideo.isUploadLog=0},window.CRVideo_UploadingReport=function(){CRVideo_UploadingLog(),CRVideo.logReportTimer&&clearTimeout(CRVideo.logReportTimer),CRVideo.logReportTimer=setTimeout((function(){CRVideo_UploadingReport()}),3e4)},window.CRVideo_UploadingLog=function(){if(!CRVideo.logproxy)return __Rtc.postCmd.IceLogCreate();var t=e.getLog();e.clear();var n=new TextEncoder("utf-8").encode(t),i=new Zlib.Deflate(n).compress(),r=new Date,o=r.getFullYear(),s=r.getMonth()+1;s=String(s<10?"0"+s:s);var a=r.getDate();const c=`/${o}-${s}-${a=String(a<10?"0"+a:a)}/`;if(CRVideo.isUploadLog&&CRVideo.LoginParam&&CRVideo.LoginParam.user_id){var l=JSON.parse(window.sessionStorage.getItem("CRVideo.LOCAL_KEY_logName"));if(l&&l.account==CRVideo.LoginParam.account&&l.user_id==CRVideo.LoginParam.user_id&&l.logMonth==s&&l.logDay==a&&l.browserInfo==CRVideo.browserInfo)var d=`${CRVideo.LoginParam.account}${c}${CRVideo.LoginParam.user_id}_${l.logUUID}_webrtc_${CRVideo.browserInfo}.log`;else d=`${CRVideo.LoginParam.account}${c}${CRVideo.LoginParam.user_id}_${CRVideo.logUUID}_webrtc_${CRVideo.browserInfo}.log`;console.crlog("[LOG] Log uploading =====> "+d),CRVideo.webLogDetail(0,d,i);var u={account:CRVideo.LoginParam.account,user_id:CRVideo.LoginParam.user_id,logUUID:CRVideo.logUUID,browserInfo:CRVideo.browserInfo,logMonth:s,logDay:a};window.sessionStorage.setItem("CRVideo.LOCAL_KEY_logName",JSON.stringify(u))}if(window.rtcProxy.crmt&&window.rtcProxy.crmt.WEBLOGCFG){const e=`${rtcProxy.crmt.MEET[0]}/${rtcProxy.crmt.ACNT[3]}_${localStorage.getItem("CRRTCSDK_Client_PC_ID")||Ice.generateUUID()}_webrtc_${CRVideo.browserInfo}.log`;console.crlog("[LOG] Log uploading =====> "+e),CRVideo.webLogDetail(0,e,i)}}},4719:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i={getJsCallServerInfo:"/servlet/getJsCallServerInfo",HandToken:"/servlet/HandToken",ClientCreateNetMeet:"/servlet/ClientCreateNetMeet",joinMeetingAPI:"/servlet/joinMeetingAPI",closeConf:"/api/servlet/closeConf",getWebrtcAccKey:"/servlet/getWebrtcAccKey",ArrangeConfAPI:"/servlet/ArrangeConfAPI"}},3085:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});let i=new class{constructor(){this.hexIn=!1,this.hexOut=!1,this.base64EncodeChars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",this.base64DecodeChars=new Array(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1)}base64encode(e){var t,n,i,r,o,s;for(i=e.length,n=0,t="";n<i;){if(r=255&(this.hexIn?e[n++]:e.charCodeAt(n++)),n==i){t+=this.base64EncodeChars.charAt(r>>2),t+=this.base64EncodeChars.charAt((3&r)<<4),t+="==";break}if(o=this.hexIn?e[n++]:e.charCodeAt(n++),n==i){t+=this.base64EncodeChars.charAt(r>>2),t+=this.base64EncodeChars.charAt((3&r)<<4|(240&o)>>4),t+=this.base64EncodeChars.charAt((15&o)<<2),t+="=";break}s=this.hexIn?e[n++]:e.charCodeAt(n++),t+=this.base64EncodeChars.charAt(r>>2),t+=this.base64EncodeChars.charAt((3&r)<<4|(240&o)>>4),t+=this.base64EncodeChars.charAt((15&o)<<2|(192&s)>>6),t+=this.base64EncodeChars.charAt(63&s)}return t}base64decode(e){var t,n,i,r,o,s,a,c;for(s=e.length,o=0,a=this.hexOut?[]:"";o<s;){do{t=this.base64DecodeChars[255&e.charCodeAt(o++)]}while(o<s&&-1==t);if(-1==t)break;do{n=this.base64DecodeChars[255&e.charCodeAt(o++)]}while(o<s&&-1==n);if(-1==n)break;c=t<<2|(48&n)>>4,this.hexOut?a.push(c):a+=String.fromCharCode(c);do{if(61==(i=255&e.charCodeAt(o++)))return a;i=this.base64DecodeChars[i]}while(o<s&&-1==i);if(-1==i)break;c=(15&n)<<4|(60&i)>>2,this.hexOut?a.push(c):a+=String.fromCharCode(c);do{if(61==(r=255&e.charCodeAt(o++)))return a;r=this.base64DecodeChars[r]}while(o<s&&-1==r);if(-1==r)break;c=(3&i)<<6|r,this.hexOut?a.push(c):a+=String.fromCharCode(c)}return a}Uint8ArrToChar(e){var t,n,i,r,o,s;for(t="",i=e.length,n=0;n<i;)switch((r=e[n++])>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:t+=String.fromCharCode(r);break;case 12:case 13:o=e[n++],t+=String.fromCharCode((31&r)<<6|63&o);break;case 14:o=e[n++],s=e[n++],t+=String.fromCharCode((15&r)<<12|(63&o)<<6|(63&s)<<0)}return t}charToUint8Arr(e){for(var t,n=[],i=0;i<e.length;i++)if((t=e.charCodeAt(i))<128)n.push(t);else if(t<2048)n.push(192|t>>6&31),n.push(128|t>>0&63);else{if(!(t<65536))throw"不是UCS-2字符集";n.push(224|t>>12&15),n.push(128|t>>6&63),n.push(128|t>>0&63)}return new Uint8Array(n)}splitCutArr(e,t){let n=0,i=[];for(;n<e.length;)i.push(e.slice(n,n+=t));return i}getFileType(e){return/\.([^\.]+)$/.exec(e)[1].toLocaleLowerCase()}findUserInfoByID(e,t){const n=CRVideo.allMemberInfo.find((t=>t.userId==e));return n?n[t]:null}termIDtoUserID(e){const t=CRVideo.allMemberInfo.find((t=>t.termId==e));return!!t&&t.userId}userIDtoTermID(e){const t=CRVideo.allMemberInfo.find((t=>t.userId==e));return!!t&&t.termId}base64ToUint8Array(e){let t=this.base64decode(e),n=new Uint8Array(t.length);for(let e=0;e<t.length;e++)n[e]=t.charCodeAt(e);return n}uint8ArrayToBase64(e){let t,n=0,i=e.length,r="";for(;n<i;)t=e.subarray(n,Math.min(n+32768,i)),r+=String.fromCharCode.apply(null,t),n+=32768;return this.base64encode(r)}generate_uuid(){for(var e=[],t="0123456789abcdef",n=0;n<36;n++)e[n]=t.substr(Math.floor(16*Math.random()),1);return e[14]="4",e[19]=t.substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-",e.join("")}setCookie(e,t){var n=new Date;n.setTime(n.getTime()+2592e6),document.cookie=e+"="+escape(t)+";expires="+n.toGMTString()}getCookie(e){var t=new RegExp("(^| )"+e+"=([^;]*)(;|$)"),n=document.cookie.match(t);return n?unescape(n[2]):void 0}delCookie(e){var t=new Date;t.setTime(t.getTime()-1);var n=Utils.getCookie(e);null!=n&&(document.cookie=e+"="+n+";expires="+t.toGMTString())}Uint8ToString(e){for(var t=[],n=0;n<e.length;n+=32768)t.push(String.fromCharCode.apply(null,e.subarray(n,n+32768)));return t.join("")}Uint8ToBase64(e){for(var t,n=0,i=e.length,r="";n<i;)t=e.subarray(n,Math.min(n+32768,i)),r+=String.fromCharCode.apply(null,t),n+=32768;return btoa(r)}compare(e){return function(t,n){var i=t[e],r=n[e];return r>i?-1:r<i?1:0}}deepCopy(e){var t={};for(var n in e)t[n]="object"==typeof e[n]?deepCoyp(e[n]):e[n];return t}chat2html(e,t,n){var i="",r="",o="";if(e.indexOf("0x10x4")>=0)(i=e.split("0x10x4")[1]).indexOf("0x1")>=0&&(i=i.split("0x1")[0]),r=(i=JSON.parse(i)).opt,o=i.headerUrl;else if(e.indexOf("0x10x5")>=0){(i=e.split("0x10x5")[1]).indexOf("0x1")>=0&&(i=i.split("0x1")[0]),r=(i=JSON.parse(i)).opt,o=i.headerUrl}else if(e.indexOf("0x10x6")>=0){(i=e.split("0x10x6")[1]).indexOf("0x1")>=0&&(i=i.split("0x1")[0]),r=(i=JSON.parse(i)).opt,o=i.headerUrl}else{null==this._imgRegExp&&(this._sign=this.utf8ByteToUnicodeStr([1]),this._signB=this.utf8ByteToUnicodeStr([2]),this._signA=this.utf8ByteToUnicodeStr([3]),this._imgRegExp=new RegExp(this._sign+this._sign+":*/*([^"+this._sign+"]+?)"+this._sign,"g"),this._headimgRegExp=new RegExp(this._sign+this._signA+":*/*([^"+this._sign+"]+?)"+this._sign,"g"),this._captureRegExp=new RegExp(this._sign+this._signB+":*/*([^"+this._sign+"]+?)"+this._sign,"g")),i=(i=(i=(i=(i=(i=(i=(i=(i=(i=e.replace(/<br\/>/g,"\n")).replace(/&quot;/g,'"')).replace(/&lt;/g,"<")).replace(/&gt;/g,">")).replace(/\&/g,"&amp;")).replace(/\"/g,"&quot;")).replace(/\</g,"&lt;")).replace(/\>/g,"&gt;")).replace(this._imgRegExp,'<img  src="$1"></img>')).replace(this._captureRegExp,"");var s=this._headimgRegExp.exec(i);if(s)o=s[1];i=i.replace(this._headimgRegExp,"");for(var a=(16777215&t).toString(16),c=6-a.length,l=0;l<c;l++)a="0"+a;i='<p style="color:#'+a+";font-size:"+n+'">'+i+"</p>",r=0}return[r,o,i]}html2chat(e){return null==this._imgRegExp&&(this._sign=this.utf8ByteToUnicodeStr([1]),this._signB=this.utf8ByteToUnicodeStr([2]),this._signA=this.utf8ByteToUnicodeStr([3]),this._imgRegExp=new RegExp(this._sign+this._sign+":*/*([^"+this._sign+"]+?)"+this._sign,"g"),this._headimgRegExp=new RegExp(this._sign+this._signA+":*/*([^"+this._sign+"]+?)"+this._sign,"g"),this._captureRegExp=new RegExp(this._sign+this._signB+":*/*([^"+this._sign+"]+?)"+this._sign,"g")),[e=(e=(e=(e=e.replace(/\<headimg\s+src=[\"\']([^\"\']*?)[\"\']\s*\/\>/gi,this._sign+this._signA+":$1"+this._sign)).replace(/\<headimg\s+src=[\"\']([^\"\']*?)[\"\']\s*\>.*?\<\/s*imgs*\>/gi,this._sign+this._signA+":$1"+this._sign)).replace(/\<img\s+[^>]*?src=[\"\']([\w\/\.\:]*)[\"\'][^>]*\/\>/gi,this._sign+this._sign+":/$1"+this._sign)).replace(/\<img\s+[^>]*?src=[\"\']([\w\/\.\:]*)[\"\'][^>]*\>.*?\<\/s*imgs*\>/gi,this._sign+this._sign+":/$1"+this._sign)]}ask2html(e){null==this._imgRegExp&&(this._sign=this.utf8ByteToUnicodeStr([1]),this._signA=this.utf8ByteToUnicodeStr([3]),this._imgRegExp=new RegExp(this._sign+this._sign+":*/*([^"+this._sign+"]+?)"+this._sign,"g"),this._headimgRegExp=new RegExp(this._sign+this._signA+":*/*([^"+this._sign+"]+?)"+this._sign,"g"));var t=e.replace(/<br\/>/g,"\n");t=(t=(t=(t=(t=t.replace(/\&/g,"&amp;")).replace(/\"/g,"&quot;")).replace(/\</g,"&lt;")).replace(/\>/g,"&gt;")).replace(this._imgRegExp,'<img  src="$1"></img>');var n=this._headimgRegExp.exec(t);if(n)var i=n[1];return[i,t=t=t.replace(this._headimgRegExp,"")]}utf8ByteToUnicodeStr(e){for(var t="",n=0;n<e.length;){var i=e[n],r=0;i>>>7==0?(t+=String.fromCharCode(e[n]),n+=1):252==(252&i)?(r=(3&e[n])<<30,r|=(63&e[n+1])<<24,r|=(63&e[n+2])<<18,r|=(63&e[n+3])<<12,r|=(63&e[n+4])<<6,r|=63&e[n+5],t+=String.fromCharCode(r),n+=6):248==(248&i)?(r=(7&e[n])<<24,r|=(63&e[n+1])<<18,r|=(63&e[n+2])<<12,r|=(63&e[n+3])<<6,r|=63&e[n+4],t+=String.fromCharCode(r),n+=5):240==(240&i)?(r=(15&e[n])<<18,r|=(63&e[n+1])<<12,r|=(63&e[n+2])<<6,r|=63&e[n+3],t+=String.fromCharCode(r),n+=4):224==(224&i)?(r=(31&e[n])<<12,r|=(63&e[n+1])<<6,r|=63&e[n+2],t+=String.fromCharCode(r),n+=3):192==(192&i)?(r=(63&e[n])<<6,r|=63&e[n+1],t+=String.fromCharCode(r),n+=2):(t+=String.fromCharCode(e[n]),n+=1)}return t}parse_url(e,t){for(var n=["source","scheme","authority","userInfo","user","pass","host","port","relative","path","directory","file","query","fragment"],i=this.php_js&&this.php_js.ini||{},r=i["phpjs.parse_url.mode"]&&i["phpjs.parse_url.mode"].local_value||"php",o={php:/^(?:([^:\/?#]+):)?(?:\/\/()(?:(?:()(?:([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?()(?:(()(?:(?:[^?#\/]*\/)*)()(?:[^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/\/?)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/},s=o[r].exec(e),a={},c=14;c--;)s[c]&&(a[n[c]]=s[c]);if(t)return a[t.replace("PHP_URL_","").toLowerCase()];if("php"!==r){var l=i["phpjs.parse_url.queryKey"]&&i["phpjs.parse_url.queryKey"].local_value||"queryKey";o=/(?:^|&)([^&=]*)=?([^&]*)/g,a[l]={},a[n[12]].replace(o,(function(e,t,n){t&&(a[l][t]=n)}))}return delete a.source,a}colorRGB2Hex(e){var t=e.split(",");return"#"+((1<<24)+(parseInt(t[0].split("(")[1])<<16)+(parseInt(t[1])<<8)+parseInt(t[2].split(")")[0])).toString(16).slice(1)}colorHexToRgba(e,t){var n="rgba("+parseInt("0x"+e.slice(1,3))+","+parseInt("0x"+e.slice(3,5))+","+parseInt("0x"+e.slice(5,7))+","+t+")";return{red:parseInt("0x"+e.slice(1,3)),green:parseInt("0x"+e.slice(3,5)),blue:parseInt("0x"+e.slice(5,7)),rgba:n}}};window.__utils=i;const r=i},2382:()=>{!function(){var e="undefined"!=typeof window?window:self;e.Glacier2=e.Glacier2||{};var t=Ice.Slice;IceMX.SessionMetrics=t.defineObject((function(e,t,n,i,r,o,s,a,c,l,d,u){IceMX.Metrics.call(this,e,t,n,i,r),this.forwardedClient=void 0!==o?o:0,this.forwardedServer=void 0!==s?s:0,this.routingTableSize=void 0!==a?a:0,this.queuedClient=void 0!==c?c:0,this.queuedServer=void 0!==l?l:0,this.overriddenClient=void 0!==d?d:0,this.overriddenServer=void 0!==u?u:0}),IceMX.Metrics,void 0,2,["::Ice::Object","::IceMX::Metrics","::IceMX::SessionMetrics"],-1,(function(e){e.writeInt(this.forwardedClient),e.writeInt(this.forwardedServer),e.writeInt(this.routingTableSize),e.writeInt(this.queuedClient),e.writeInt(this.queuedServer),e.writeInt(this.overriddenClient),e.writeInt(this.overriddenServer)}),(function(e){this.forwardedClient=e.readInt(),this.forwardedServer=e.readInt(),this.routingTableSize=e.readInt(),this.queuedClient=e.readInt(),this.queuedServer=e.readInt(),this.overriddenClient=e.readInt(),this.overriddenServer=e.readInt()}),!1),IceMX.SessionMetricsPrx=t.defineProxy(IceMX.MetricsPrx,IceMX.SessionMetrics.ice_staticId,void 0),t.defineOperations(IceMX.SessionMetrics,IceMX.SessionMetricsPrx),Glacier2.SSLInfo=t.defineStruct((function(e,t,n,i,r,o){this.remoteHost=void 0!==e?e:"",this.remotePort=void 0!==t?t:0,this.localHost=void 0!==n?n:"",this.localPort=void 0!==i?i:0,this.cipher=void 0!==r?r:"",this.certs=void 0!==o?o:null}),!0,(function(e){e.writeString(this.remoteHost),e.writeInt(this.remotePort),e.writeString(this.localHost),e.writeInt(this.localPort),e.writeString(this.cipher),Ice.StringSeqHelper.write(e,this.certs)}),(function(e){this.remoteHost=e.readString(),this.remotePort=e.readInt(),this.localHost=e.readString(),this.localPort=e.readInt(),this.cipher=e.readString(),this.certs=Ice.StringSeqHelper.read(e)}),12,!1),Glacier2.CannotCreateSessionException=t.defineUserException((function(e,t){Ice.UserException.call(this,t),this.reason=void 0!==e?e:""}),Ice.UserException,"Glacier2::CannotCreateSessionException",(function(e){e.writeString(this.reason)}),(function(e){this.reason=e.readString()}),!0,!1),Glacier2.Session=t.defineObject(void 0,Ice.Object,void 0,0,["::Glacier2::Session","::Ice::Object"],-1,void 0,void 0,!1),Glacier2.SessionPrx=t.defineProxy(Ice.ObjectPrx,Glacier2.Session.ice_staticId,void 0),t.defineOperations(Glacier2.Session,Glacier2.SessionPrx,{destroy:[,,,,,,,,,,]}),Glacier2.StringSet=t.defineObject(void 0,Ice.Object,void 0,0,["::Glacier2::StringSet","::Ice::Object"],-1,void 0,void 0,!1),Glacier2.StringSetPrx=t.defineProxy(Ice.ObjectPrx,Glacier2.StringSet.ice_staticId,void 0),t.defineOperations(Glacier2.StringSet,Glacier2.StringSetPrx,{add:[,2,2,,,,[["Ice.StringSeqHelper"]],,,,],remove:[,2,2,,,,[["Ice.StringSeqHelper"]],,,,],get:[,2,2,,,["Ice.StringSeqHelper"],,,,,]}),Glacier2.IdentitySet=t.defineObject(void 0,Ice.Object,void 0,0,["::Glacier2::IdentitySet","::Ice::Object"],-1,void 0,void 0,!1),Glacier2.IdentitySetPrx=t.defineProxy(Ice.ObjectPrx,Glacier2.IdentitySet.ice_staticId,void 0),t.defineOperations(Glacier2.IdentitySet,Glacier2.IdentitySetPrx,{add:[,2,2,,,,[["Ice.IdentitySeqHelper"]],,,,],remove:[,2,2,,,,[["Ice.IdentitySeqHelper"]],,,,],get:[,2,2,,,["Ice.IdentitySeqHelper"],,,,,]}),Glacier2.SessionControl=t.defineObject(void 0,Ice.Object,void 0,0,["::Glacier2::SessionControl","::Ice::Object"],-1,void 0,void 0,!1),Glacier2.SessionControlPrx=t.defineProxy(Ice.ObjectPrx,Glacier2.SessionControl.ice_staticId,void 0),t.defineOperations(Glacier2.SessionControl,Glacier2.SessionControlPrx,{categories:[,,,,,["Glacier2.StringSetPrx"],,,,,],adapterIds:[,,,,,["Glacier2.StringSetPrx"],,,,,],identities:[,,,,,["Glacier2.IdentitySetPrx"],,,,,],getSessionTimeout:[,2,2,,,[3],,,,,],destroy:[,,,,,,,,,,]}),Glacier2.SessionManager=t.defineObject(void 0,Ice.Object,void 0,0,["::Glacier2::SessionManager","::Ice::Object"],-1,void 0,void 0,!1),Glacier2.SessionManagerPrx=t.defineProxy(Ice.ObjectPrx,Glacier2.SessionManager.ice_staticId,void 0),t.defineOperations(Glacier2.SessionManager,Glacier2.SessionManagerPrx,{create:[,,,,2,["Glacier2.SessionPrx"],[[7],["Glacier2.SessionControlPrx"]],,[Glacier2.CannotCreateSessionException],,]}),Glacier2.SSLSessionManager=t.defineObject(void 0,Ice.Object,void 0,0,["::Glacier2::SSLSessionManager","::Ice::Object"],-1,void 0,void 0,!1),Glacier2.SSLSessionManagerPrx=t.defineProxy(Ice.ObjectPrx,Glacier2.SSLSessionManager.ice_staticId,void 0),t.defineOperations(Glacier2.SSLSessionManager,Glacier2.SSLSessionManagerPrx,{create:[,,,,2,["Glacier2.SessionPrx"],[[Glacier2.SSLInfo],["Glacier2.SessionControlPrx"]],,[Glacier2.CannotCreateSessionException],,]}),Glacier2.PermissionDeniedException=t.defineUserException((function(e,t){Ice.UserException.call(this,t),this.reason=void 0!==e?e:""}),Ice.UserException,"Glacier2::PermissionDeniedException",(function(e){e.writeString(this.reason)}),(function(e){this.reason=e.readString()}),!0,!1),Glacier2.PermissionsVerifier=t.defineObject(void 0,Ice.Object,void 0,0,["::Glacier2::PermissionsVerifier","::Ice::Object"],-1,void 0,void 0,!1),Glacier2.PermissionsVerifierPrx=t.defineProxy(Ice.ObjectPrx,Glacier2.PermissionsVerifier.ice_staticId,void 0),t.defineOperations(Glacier2.PermissionsVerifier,Glacier2.PermissionsVerifierPrx,{checkPermissions:[,2,1,,2,[1],[[7],[7]],[[7]],[Glacier2.PermissionDeniedException],,]}),Glacier2.SSLPermissionsVerifier=t.defineObject(void 0,Ice.Object,void 0,0,["::Glacier2::SSLPermissionsVerifier","::Ice::Object"],-1,void 0,void 0,!1),Glacier2.SSLPermissionsVerifierPrx=t.defineProxy(Ice.ObjectPrx,Glacier2.SSLPermissionsVerifier.ice_staticId,void 0),t.defineOperations(Glacier2.SSLPermissionsVerifier,Glacier2.SSLPermissionsVerifierPrx,{authorize:[,2,1,,2,[1],[[Glacier2.SSLInfo]],[[7]],[Glacier2.PermissionDeniedException],,]}),Glacier2.SessionNotExistException=t.defineUserException((function(e){Ice.UserException.call(this,e)}),Ice.UserException,"Glacier2::SessionNotExistException",void 0,void 0,!1,!1),Glacier2.Router=t.defineObject(void 0,Ice.Object,[Ice.Router],0,["::Glacier2::Router","::Ice::Object","::Ice::Router"],-1,void 0,void 0,!1),Glacier2.RouterPrx=t.defineProxy(Ice.ObjectPrx,Glacier2.Router.ice_staticId,[Ice.RouterPrx]),t.defineOperations(Glacier2.Router,Glacier2.RouterPrx,{getCategoryForClient:[,2,1,,,[7],,,,,],createSession:[,,,1,2,["Glacier2.SessionPrx"],[[7],[7]],,[Glacier2.CannotCreateSessionException,Glacier2.PermissionDeniedException],,],createSessionFromSecureConnection:[,,,1,2,["Glacier2.SessionPrx"],,,[Glacier2.CannotCreateSessionException,Glacier2.PermissionDeniedException],,],refreshSession:[,,,1,,,,,[Glacier2.SessionNotExistException],,],destroySession:[,,,,,,,,[Glacier2.SessionNotExistException],,],getSessionTimeout:[,2,1,,,[4],,,,,],getACMTimeout:[,2,1,,,[3],,,,,]}),e.Glacier2=Glacier2}()},2770:()=>{!function(){var e="undefined"!=typeof window?window:self;e.Ice=e.Ice||{},Ice.Slice=Ice.Slice||{},e.IceMX=e.IceMX||{},e.IceSSL=e.IceSSL||{};var t,n,i,r,o,s,a,c,l,d,u,h,f,_,p,C,g,m,I,R,y,S,v,E,w,b,D,M,T,P,x,A,O,V,k,N=Ice.Slice;!function(){var e="undefined"!=typeof window?window:self,t={module:function(t){var n=e[t];return void 0===n&&(n={},e[t]=n),n},require:function(t){return e},type:function(t){if(void 0!==t){for(var n=t.split("."),i=e,r=0,o=n.length;r<o;++r)if(void 0===(i=i[n[r]]))return;return i}}};Ice.__require=function(){return e},Ice.Slice=Ice.Slice||{},Ice.__M=t}(),function(){var e=Ice.__M,t=Ice.Slice,n=function(e,t){return e===t||null!=e&&null!=t&&(e.prototype===t.prototype&&("function"==typeof e.equals?e.equals(t):e instanceof Array&&i.equals(e,t,n)))},i={clone:function(e){return void 0===e?e:null===e?[]:e.slice()},equals:function(e,t,i){if(e.length!=t.length)return!1;var r,o,s=i||n;for(r=0,o=e.length;r<o;++r)if(!s.call(s,e[r],t[r]))return!1;return!0},shuffle:function(e){for(var t=e.length;t>1;--t){var n=e[t-1],i=Math.floor(Math.random()*t);e[t-1]=e[i],e[i]=n}},indexOf:function(e,t,n){if(null==n)return e.indexOf(t);for(var i=0;i<e.length;++i)if(n.call(n,e[i],t))return i;return-1},filter:function(e,t,n){n=void 0===n?t:n;for(var i=[],r=0;r<e.length;++r)t.call(n,e[r],r,e)&&i.push(e[r]);return i}};i.eq=n,t.defineSequence=function(t,n,i,r,o){var s=null;Object.defineProperty(t,n,{get:function(){return null===s&&(s=Ice.StreamHelpers.generateSeqHelper(e.type(i),r,e.type(o))),s}})},Ice.ArrayUtil=i}(),Ice.Class=function(){var e,t,n;1==arguments.length?t=arguments[0]:2==arguments.length&&(e=arguments[0],t=arguments[1]),void 0!==t&&(n=t.__init__)&&delete t.__init__;var i=n||function(){};if(void 0!==e&&(i.prototype=new e,i.prototype.constructor=i),void 0!==t)for(var r in t)i.prototype[r]=t[r];return i},function(){var e=Ice.Class,t=function(e,n,i,r){if(r+="  ",null===n)return"\n"+r+e+": (null)";if(void 0===n)return"\n"+r+e+": (undefined)";if("stack"==e||"function"==typeof n)return"";if("object"!=typeof n)return"\n"+r+e+': "'+n+'"';if(-1!=i.indexOf(n))return"\n"+r+e+": (recursive)";i.push(n);var o="\n"+r+e+":";for(var s in n)0!==e.indexOf("_")&&"function"!=typeof n[s]&&(o+=r+t(s,n[s],i,r));return o},n=e(Error,{__init__:function(e){e&&(this.ice_cause=e)},ice_name:function(){return"Ice::Exception"},toString:function(){if(this._inToStringAlready)return"";this._inToStringAlready=!0;var e=this.ice_name();for(var n in this)"_inToStringAlready"!=n&&(e+=t(n,this[n],[],""));return!0===Ice.__printStackTraces&&this.stack&&(e+="\n"+this.stack),this._inToStringAlready=!1,e}});n.captureStackTrace=function(e){var t=(new Error).stack;void 0!==t&&Object.defineProperty(e,"stack",{get:function(){return t}})},Ice.Exception=n;var i=e(n,{__init__:function(e){n.call(this,e),n.captureStackTrace(this)},ice_name:function(){return"Ice::LocalException"}});Ice.LocalException=i;var r=Ice.Slice;r.defineLocalException=function(e,t,n){var i=e;return i.prototype=new t,i.prototype.constructor=i,i.prototype.ice_name=function(){return n},i};var o=e(n,{__init__:function(e){n.call(this,e),n.captureStackTrace(this)},ice_name:function(){return"Ice::UserException"},__write:function(e){e.startWriteException(null),s(this,e,this.__mostDerivedType()),e.endWriteException()},__read:function(e){e.startReadException(),a(this,e,this.__mostDerivedType()),e.endReadException(!1)},__usesClasses:function(){return!1}});Ice.UserException=o;var s=function(e,t,n){void 0!==n&&n!==o&&(t.startWriteSlice(n.__id,-1,n.__parent===o),n.prototype.__writeMemberImpl&&n.prototype.__writeMemberImpl.call(e,t),t.endWriteSlice(),s(e,t,n.__parent))},a=function(e,t,n){void 0!==n&&n!==o&&(t.startReadSlice(),n.prototype.__readMemberImpl&&n.prototype.__readMemberImpl.call(e,t),t.endReadSlice(),a(e,t,n.__parent))},c=function(e){e.startWriteException(this.__slicedData),s(this,e,this.__mostDerivedType()),e.endWriteException()},l=function(e){e.startReadException(),a(this,e,this.__mostDerivedType()),this.__slicedData=e.endReadException(!0)};r.defineUserException=function(e,t,n,i,r,o,s){var a=e;return a.__parent=t,a.prototype=new t,a.__id="::"+n,a.prototype.ice_name=function(){return n},a.prototype.constructor=a,a.prototype.__mostDerivedType=function(){return a},o&&(a.prototype.__write=c,a.prototype.__read=l),a.prototype.__writeMemberImpl=i,a.prototype.__readMemberImpl=r,s&&(a.prototype.__usesClasses=function(){return!0}),a}}(),Ice.AsyncStatus={Queued:0,Sent:1},(t=Ice.Class({__init__:function(e,n){if(n<0||n>t.MAX_UINT32)throw new RangeError("Low word must be between 0 and 0xFFFFFFFF");if(e<0||e>t.MAX_UINT32)throw new RangeError("High word must be between 0 and 0xFFFFFFFF");this.high=e,this.low=n},hashCode:function(){return this.low},equals:function(e){return this===e||e instanceof t&&this.high===e.high&&this.low===e.low},toString:function(){return this.high+":"+this.low},toNumber:function(){if(0!=(this.high&t.SIGN_MASK)){if(this.high===t.MAX_UINT32&&0!==this.low)return-(1+~this.low);var e=1+~this.high;return e>t.HIGH_MAX?Number.NEGATIVE_INFINITY:e*t.HIGH_MASK*-1+this.low}return this.high>t.HIGH_MAX?Number.POSITIVE_INFINITY:this.high*t.HIGH_MASK+this.low}})).MAX_UINT32=4294967295,t.SIGN_MASK=2147483648,t.HIGH_MASK=4294967296,t.HIGH_MAX=2097151,Ice.Long=t,Ice.AssertionFailedException=Ice.Class(Error,{__init__:function(e){Error.call(this),Ice.Exception.captureStackTrace(this),this.message=e}}),Ice.Debug={assert:function(e,t){if(!e)throw console.crlog&&console.crlog(void 0===t?"assertion failed":t),console.crlog&&console.crlog(Error().stack),new Ice.AssertionFailedException(void 0===t?"assertion failed":t)}},Ice.DispatchStatus={DispatchOK:0,DispatchUserException:1,DispatchAsync:2},function(){var e=Ice.Class({__init__:function(e,t){this._name=e,this._value=t},equals:function(e){return this===e||e instanceof Object.getPrototypeOf(this).constructor&&this._value==e._value},hashCode:function(){return this._value},toString:function(){return this._name}});Ice.EnumBase=e;var t=e.prototype;try{Object.defineProperty(t,"name",{enumerable:!0,get:function(){return this._name}}),Object.defineProperty(t,"value",{enumerable:!0,get:function(){return this._value}})}catch(e){}var n=Ice.Class({__init__:function(e){this._enumType=e},write:function(e,t){this._enumType.__write(e,t)},writeOpt:function(e,t,n){this._enumType.__writeOpt(e,t,n)},read:function(e){return this._enumType.__read(e)},readOpt:function(e,t){return this._enumType.__readOpt(e,t)}});Ice.EnumHelper=n,Ice.Slice.defineEnum=function(t){var i=function(t,n){e.call(this,t,n)};(i.prototype=new e).constructor=i;var r=[],o=0,s=null;for(var a in t){var c=t[a][0],l=t[a][1],d=new i(c,l);r[l]=d,s||(s=d),Object.defineProperty(i,c,{enumerable:!0,value:d}),l>o&&(o=l)}return Object.defineProperty(i,"minWireSize",{get:function(){return 1}}),i.__write=function(e,t){t?e.writeEnum(t):e.writeEnum(s)},i.__read=function(e){return e.readEnum(i)},i.__writeOpt=function(e,t,n){void 0!==n&&e.writeOpt(t,Ice.OptionalFormat.Size)&&i.__write(e,n)},i.__readOpt=function(e,t){return e.readOptEnum(t,i)},i.__helper=new n(i),Object.defineProperty(i,"valueOf",{value:function(e){return void 0===e?i:r[e]}}),Object.defineProperty(i,"maxValue",{value:o}),Object.defineProperty(i.prototype,"maxValue",{value:o}),i}}(),Ice.generateUUID=function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?n:7&n|8).toString(16)}))},Ice.FormatType=Ice.Slice.defineEnum([["DefaultFormat",0],["CompactFormat",1],["SlicedFormat",2]]),function(){var e=Ice.Debug;function t(e,t,n){switch(e){case 92:t.push("\\\\");break;case 39:t.push("\\'");break;case 34:t.push('\\"');break;case 8:t.push("\\b");break;case 12:t.push("\\f");break;case 10:t.push("\\n");break;case 13:t.push("\\r");break;case 9:t.push("\\t");break;default:if(e>=32&&e<=126){var i=String.fromCharCode(e);null!==n&&-1!==n.indexOf(i)?(t.push("\\"),t.push(i)):t.push(i)}else{t.push("\\");for(var r=e.toString(8),o=r.length;o<3;o++)t.push("0");t.push(r)}}}function n(e,t){var n,i=e.charCodeAt(t);if(!(i>=32&&i<=126))throw n=t>0?"character after `"+e.substring(0,t)+"'":"first character",n+=" is not a printable ASCII character (ordinal "+i+")",new Error(n);return i}function i(t,i,r,o){if(e.assert(i>=0),e.assert(r<=t.length),i>=r)throw new Error("EOF while decoding string");var s;if("\\"!=t.charAt(i))s=n(t,i++);else{if(i+1==r)throw new Error("trailing backslash");switch(t.charAt(++i)){case"\\":case"'":case'"':s=t.charCodeAt(i++);break;case"b":++i,s="\b".charCodeAt(0);break;case"f":++i,s="\f".charCodeAt(0);break;case"n":++i,s="\n".charCodeAt(0);break;case"r":++i,s="\r".charCodeAt(0);break;case"t":++i,s="\t".charCodeAt(0);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":for(var a=0,c=0;c<3&&i<r;++c){var l=t.charAt(i++);if(-1=="01234567".indexOf(l)){--i;break}a=8*a+parseInt(l)}if(a>255){var d="octal value \\"+a.toString(8)+" ("+a+") is out of range";throw new Error(d)}s=a;break;default:s=n(t,i++)}}return o.value=i,s}Ice.StringUtil={findFirstOf:function(e,t,n){n=void 0===n?0:n;for(var i=e.length,r=n;r<i;r++){var o=e.charAt(r);if(-1!=t.indexOf(o))return r}return-1},findFirstNotOf:function(e,t,n){n=void 0===n?0:n;for(var i=e.length,r=n;r<i;r++){var o=e.charAt(r);if(-1==t.indexOf(o))return r}return-1},escapeString:function(e,n){var i,r;if(null!==(n=void 0===n?null:n))for(i=0,r=n.length;i<r;++i)if(n.charCodeAt(i)<32||n.charCodeAt(i)>126)throw new Error("special characters must be in ASCII range 32-126");var o,s=[];for(i=0,r=e.length;i<r;++i)(o=e.charCodeAt(i))<128?t(o,s,n):o>127&&o<2048?(t(o>>6|192,s,n),t(63&o|128,s,n)):(t(o>>12|224,s,n),t(o>>6&63|128,s,n),t(63&o|128,s,n));return s.join("")},unescapeString:function(t,n,r){n=void 0===n?0:n,r=void 0===r?t.length:r,e.assert(n>=0&&n<=r&&r<=t.length);var o=[];return function(e,t,n,r){var o,s,a,c={value:0};for(;t<n;)o=i(e,t,n,c),t=c.value,o<128?r.push(String.fromCharCode(o)):o>191&&o<224?(s=i(e,t,n,c),t=c.value,r.push(String.fromCharCode((31&o)<<6|63&s))):(s=i(e,t,n,c),a=i(e,t=c.value,n,c),t=c.value,r.push(String.fromCharCode((15&o)<<12|(63&s)<<6|63&a)))}(t,n,r,o),o.join("")},splitString:function(e,t){for(var n=[],i="",r=0,o=null;r<e.length;)if(null!==o||'"'!==e.charAt(r)&&"'"!==e.charAt(r)){if(null===o&&"\\"===e.charAt(r)&&r+1<e.length&&('"'===e.charAt(r+1)||"'"===e.charAt(r+1)))++r;else if(null!==o&&"\\"===e.charAt(r)&&r+1<e.length&&e.charAt(r+1)===o)++r;else{if(null!==o&&e.charAt(r)===o){++r,o=null;continue}if(-1!==t.indexOf(e.charAt(r))&&null===o){++r,i.length>0&&(n.push(i),i="");continue}}r<e.length&&(i+=e.charAt(r++))}else o=e.charAt(r++);return i.length>0&&n.push(i),null!==o?null:n},checkQuote:function(e,t){t=void 0===t?0:t;var n=e.charAt(t);if('"'==n||"'"==n){t++;for(var i,r=e.length;t<r&&-1!=(i=e.indexOf(n,t));){if("\\"!=e.charAt(i-1))return i;t=i+1}return-1}return 0},hashCode:function(e){for(var t=0,n=e.length,i=0;i<n;i++)t=31*t+e.charCodeAt(i);return t},toInt:function(e){var t=parseInt(e,10);if(isNaN(t))throw new Error("conversion of `"+e+"' to int failed");return t}}}(),function(){var e=Ice.__M,t=Ice.StringUtil;function n(e,t,n,i,r){for(var o=e._table[r];null!==o;o=o._nextInBucket)if(o._hash===i&&e.keysEqual(t,o._key))return void(o._value=n);e.add(t,n,i,r)}function i(e,t){return e===t}var r=Ice.Class({__init__:function(e,t){var n,o,s,a,c;if("function"==typeof e?(o=e,s=t):e instanceof r&&(o=(n=e).keyComparator,s=n.valueComparator),this._size=0,this._head=null,this._initialCapacity=32,this._loadFactor=.75,this._table=[],this._keyComparator="function"==typeof o?o:i,this._valueComparator="function"==typeof s?s:i,n instanceof r&&n._size>0){for(this._threshold=n._threshold,c=n._table.length,this._table.length=c,a=0;a<c;a++)this._table[a]=null;this.merge(n)}else for(this._threshold=this._initialCapacity*this._loadFactor,a=0;a<this._initialCapacity;a++)this._table[a]=null},set:function(e,t){var i=this.computeHash(e),r=this.hashIndex(i.hash,this._table.length);return n(this,i.key,t,i.hash,r)},get:function(e){var t=this.computeHash(e),n=this.findEntry(t.key,t.hash);return void 0!==n?n._value:void 0},has:function(e){var t=this.computeHash(e);return void 0!==this.findEntry(t.key,t.hash)},del:function(e){for(var t=this.computeHash(e),n=this.hashIndex(t.hash,this._table.length),i=null,r=this._table[n];null!==r;r=r._nextInBucket){if(r._hash===t.hash&&this.keysEqual(t.key,r._key))return this._size--,null!==i?i._nextInBucket=r._nextInBucket:this._table[n]=r._nextInBucket,null!==r._prev&&(r._prev._next=r._next),null!==r._next&&(r._next._prev=r._prev),this._head===r&&(this._head=r._next),r._value;i=r}},clear:function(){for(var e=0;e<this._table.length;++e)this._table[e]=null;this._head=null,this._size=0},forEach:function(e,t){t=void 0===t?e:t;for(var n=this._head;null!==n;n=n._next)e.call(t,n._key,n._value)},keys:function(){for(var e=[],t=0,n=this._head;null!==n;n=n._next)e[t++]=n._key;return e},values:function(){for(var e=[],t=0,n=this._head;null!==n;n=n._next)e[t++]=n._value;return e},equals:function(e,t){if(null===e||!(e instanceof r)||this._size!==e._size)return!1;for(var n=this,i=t||function(e,t){return n._valueComparator.call(n._valueComparator,e,t)},o=this._head;null!==o;o=o._next){var s=e.findEntry(o._key,o._hash);if(void 0===s||!i(o._value,s._value))return!1}return!0},clone:function(){return new r(this)},merge:function(e){for(var t=e._head;null!==t;t=t._next)n(this,t._key,t._value,t._hash,this.hashIndex(t._hash,this._table.length))},add:function(e,t,n,i){var r=Object.create(null,{key:{enumerable:!0,get:function(){return this._key}},value:{enumerable:!0,get:function(){return this._value}},next:{enumerable:!0,get:function(){return this._next}},_key:{enumerable:!1,writable:!0,value:e},_value:{enumerable:!1,writable:!0,value:t},_prev:{enumerable:!1,writable:!0,value:null},_next:{enumerable:!1,writable:!0,value:null},_nextInBucket:{enumerable:!1,writable:!0,value:null},_hash:{enumerable:!1,writable:!0,value:n}});r._nextInBucket=this._table[i],this._table[i]=r,r._next=this._head,null!==this._head&&(this._head._prev=r),this._head=r,this._size++,this._size>=this._threshold&&this.resize(2*this._table.length)},resize:function(e){this._table;for(var t=[],n=0;n<e;n++)t[n]=null;for(var i=this._head;null!==i;i=i._next){var r=this.hashIndex(i._hash,e);i._nextInBucket=t[r],t[r]=i}this._table=t,this._threshold=e*this._loadFactor},findEntry:function(e,t){for(var n=this.hashIndex(t,this._table.length),i=this._table[n];null!==i;i=i._nextInBucket)if(i._hash===t&&this.keysEqual(e,i._key))return i},hashIndex:function(e,t){return e&t-1},computeHash:function(e){var n;if(0===e||-0===e)return{key:0,hash:0};if(null===e)return null===r._null&&(n=Ice.generateUUID(),r._null={key:n,hash:t.hashCode(n)}),r._null;if(void 0===e)throw new Error("cannot compute hash for undefined value");if("function"==typeof e.hashCode)return{key:e,hash:e.hashCode()};var i=typeof e;if("string"===i||e instanceof String)return{key:e,hash:t.hashCode(e)};if("number"===i||e instanceof Number)return isNaN(e)?(null===r._nan&&(n=Ice.generateUUID(),r._nan={key:n,hash:t.hashCode(n)}),r._nan):{key:e,hash:e.toFixed(0)};if("boolean"===i||e instanceof Boolean)return{key:e,hash:e?1:0};throw new Error("cannot compute hash for value of type "+i)},keysEqual:function(e,t){return this._keyComparator.call(this._keyComparator,e,t)}});Ice.HashMap=r,r.compareEquals=function(e,t){return e===t||null!=e&&null!=t&&e.equals(t)},r.compareIdentity=i,r._null=null,r._nan=null;var o=r.prototype;Object.defineProperty(o,"size",{get:function(){return this._size}}),Object.defineProperty(o,"entries",{get:function(){return this._head}}),Ice.Slice.defineDictionary=function(t,n,i,o,s,a,c,l,d){t[n]=void 0!==c||void 0!==d?function(e){return new r(e||c,d)}:r;var u=null;Object.defineProperty(t,i,{get:function(){return null===u&&(u=Ice.StreamHelpers.generateDictHelper(e.type(o),e.type(s),a,e.type(l),t[n])),u}})}}(),Ice.OptionalFormat=Ice.Slice.defineEnum([["F1",0],["F2",1],["F4",2],["F8",3],["Size",4],["VSize",5],["FSize",6],["Class",7]]),function(){var e=Ice.Class,t=Object.defineProperty,n=(Ice.HashMap,Ice.OptionalFormat),i={FSizeOptHelper:function(){this.writeOpt=function(e,t,i){if(void 0!==i&&e.writeOpt(t,n.FSize)){var r=e.startSize();this.write(e,i),e.endSize(r)}},this.readOpt=function(e,t){var i;return e.readOpt(t,n.FSize)&&(e.skip(4),i=this.read(e)),i}},VSizeOptHelper:function(){this.writeOpt=function(e,t,i){void 0!==i&&e.writeOpt(t,n.VSize)&&(e.writeSize(this.minWireSize),this.write(e,i))},this.readOpt=function(e,t){var i;return e.readOpt(t,n.VSize)&&(e.skipSize(),i=this.read(e)),i}},VSizeContainerOptHelper:function(e){this.writeOpt=function(t,i,r){if(void 0!==r&&t.writeOpt(i,n.VSize)){var o=this.size(r);t.writeSize(o>254?o*e+5:o*e+1),this.write(t,r)}},this.readOpt=function(e,t){var i;return e.readOpt(t,n.VSize)&&(e.skipSize(),i=this.read(e)),i}},VSizeContainer1OptHelper:function(){this.writeOpt=function(e,t,i){void 0!==i&&e.writeOpt(t,n.VSize)&&this.write(e,i)},this.readOpt=function(e,t){var i;return e.readOpt(t,n.VSize)&&(i=this.read(e)),i}}},r=e({write:function(e,t){if(null===t||0===t.length)e.writeSize(0);else{var n=this.elementHelper;e.writeSize(t.length);for(var i=0;i<t.length;++i)n.write(e,t[i])}},read:function(e){var t=this.elementHelper,n=e.readAndCheckSeqSize(t.minWireSize),i=[];i.length=n;for(var r=0;r<n;++r)i[r]=t.read(e);return i},size:function(e){return null==e?0:e.length}});t(r.prototype,"minWireSize",{get:function(){return 1}});var o=new r;o.write=function(e,t){return e.writeByteSeq(t)},o.read=function(e){return e.readByteSeq()},t(o,"elementHelper",{get:function(){return Ice.ByteHelper}}),i.VSizeContainer1OptHelper.call(o);var s=function(e){var t=e.readAndCheckSeqSize(1),n=[];n.length=t;for(var i=this.elementType,r=function(t){e.readObject((function(e){n[t]=e}),i)},o=0;o<t;++o)r(o);return n};i.generateSeqHelper=function(e,n,a){if(e===Ice.ByteHelper)return o;var c=new r;return n?1===e.minWireSize?i.VSizeContainer1OptHelper.call(c):i.VSizeContainerOptHelper.call(c,e.minWireSize):i.FSizeOptHelper.call(c),t(c,"elementHelper",{get:function(){return e}}),e==Ice.ObjectHelper&&(t(c,"elementType",{get:function(){return a}}),c.read=s),c};var a=e({write:function(e,t){if(null==t||0===t.size)e.writeSize(0);else{var n=this.keyHelper,i=this.valueHelper;e.writeSize(t.size);for(var r=t.entries;null!==r;r=r.next)n.write(e,r.key),i.write(e,r.value)}},read:function(e){for(var t=new(0,this.mapType),n=e.readSize(),i=this.keyHelper,r=this.valueHelper,o=0;o<n;++o)t.set(i.read(e),r.read(e));return t},size:function(e){return null==e?0:e.size}});Object.defineProperty(a.prototype,"minWireSize",{get:function(){return 1}});var c=function(e){for(var t=e.readSize(),n=new(0,this.mapType),i=this.valueType,r=function(t){e.readObject((function(e){n.set(t,e)}),i)},o=this.keyHelper,s=0;s<t;++s)r(o.read(e));return n};i.generateDictHelper=function(e,n,r,o,s){var l=new a;return r?i.VSizeContainerOptHelper.call(l,e.minWireSize+n.minWireSize):i.FSizeOptHelper.call(l),t(l,"mapType",{get:function(){return s}}),t(l,"keyHelper",{get:function(){return e}}),t(l,"valueHelper",{get:function(){return n}}),n==Ice.ObjectHelper&&(t(l,"valueType",{get:function(){return o}}),l.read=c),l},Ice.StreamHelpers=i}(),function(){var e,t=Ice.HashMap,n=Number.MAX_SAFE_INTEGER||9007199254740991,i=new t,r={},o=0,s=function(){return o==n&&(o=0),o++};r.setTimeout=function(t,n){var r=s();return i.set(r,t),e.postMessage({type:0,id:r,ms:n}),r},r.clearTimeout=function(t){i.del(t),e.postMessage({type:3,id:t})},r.setInterval=function(t,n){var r=s();return i.set(r,t),e.postMessage({type:1,id:r,ms:n}),r},r.clearInterval=function(t){i.del(t),e.postMessage({type:4,id:t})},r.setImmediate=function(t){var n=s();return i.set(n,t),e.postMessage({type:2,id:n}),n},r.onmessage=function(e){var t;void 0!==(t=1===e.data.type?i.get(e.data.id):i.del(e.data.id))&&t.call()};var a;if(void 0===e)try{a=URL.createObjectURL(new Blob(["("+function(){var e={};self.onmessage=function(t){0==t.data.type?e[t.data.id]=setTimeout((function(){self.postMessage(t.data)}),t.data.ms):1==t.data.type?e[t.data.id]=setInterval((function(){self.postMessage(t.data)}),t.data.ms):2==t.data.type?self.postMessage(t.data):3==t.data.type?(clearTimeout(e[t.data.id]),delete e[t.data.id]):4==t.data.type&&(clearInterval(e[t.data.id]),delete e[t.data.id])}}.toString()+"());"],{type:"text/javascript"})),(e=new Worker(a)).onmessage=r.onmessage,Ice.Timer=r}catch(e){URL.revokeObjectURL(a),Ice.Timer=function(){var e={setTimeout:function(){setTimeout.apply(null,arguments)},clearTimeout:function(){clearTimeout.apply(null,arguments)},setInterval:function(){setInterval.apply(null,arguments)},clearInterval:function(){clearInterval.apply(null,arguments)}};return e.setImmediate="function"==typeof setImmediate?function(){setImmediate.apply(null,arguments)}:function(){setTimeout.apply(null,arguments)},e}()}}(),function(){var e=Ice.Class,t=0,n=e({__init__:function(){this.__address=t++},hashCode:function(){return this.__address},ice_isA:function(e,t){return this.__mostDerivedType().__ids.indexOf(e)>=0},ice_ping:function(e){},ice_ids:function(e){return this.__mostDerivedType().__ids},ice_id:function(e){return this.__mostDerivedType().__id},toString:function(){return"[object "+this.ice_id()+"]"},ice_preMarshal:function(){},ice_postUnmarshal:function(){},__write:function(e){e.startWriteObject(null),i(this,e,this.__mostDerivedType()),e.endWriteObject()},__read:function(e){e.startReadObject(),r(this,e,this.__mostDerivedType()),e.endReadObject(!1)},ice_instanceof:function(e){return!!e&&(this instanceof e||this.__mostDerivedType().__instanceof(e))},__mostDerivedType:function(){return n},equals:function(e){return this===e}});n.write=function(e,t){e.writeObject(t)},n.writeOpt=function(e,t,n){e.writeOptObject(t,n)},n.read=function(e){var t={value:null};return e.readObject((function(e){t.value=e}),n),t},n.readOpt=function(e,t){var i={value:void 0};return e.readOptObject(t,(function(e){i.value=e}),n),i},n.ice_staticId=function(){return n.__id},n.__instanceof=function(e){if(e===this)return!0;for(var t in this.__implements)if(this.__implements[t].__instanceof(e))return!0;return!!this.__parent&&this.__parent.__instanceof(e)},n.__ids=["::Ice::Object"],n.__id=n.__ids[0],n.__compactId=-1,n.__preserved=!1;var i=function(e,t,r){void 0!==r&&r!==n&&(t.startWriteSlice(r.__id,r.__compactId,r.__parent===n),r.prototype.__writeMemberImpl&&r.prototype.__writeMemberImpl.call(e,t),t.endWriteSlice(),i(e,t,r.__parent))},r=function(e,t,i){void 0!==i&&i!==n&&(t.startReadSlice(),i.prototype.__readMemberImpl&&i.prototype.__readMemberImpl.call(e,t),t.endReadSlice(),r(e,t,i.__parent))},o=function(e){e.startWriteObject(this.__slicedData),i(this,e,this.__mostDerivedType()),e.endWriteObject()},s=function(e){e.startReadObject(),r(this,e,this.__mostDerivedType()),this.__slicedData=e.endReadObject(!0)};Ice.Object=n;var a=Ice.Slice;a.defineLocalObject=function(e,t){var n=e||function(){};return void 0!==t&&(n.prototype=new t,n.__parent=t,n.prototype.constructor=e),n},a.defineObject=function(e,t,i,r,a,c,l,d,u){var h=e||function(){};return h.prototype=new t,h.__parent=t,h.__ids=a,h.__id=a[r],h.__compactId=c,h.__instanceof=n.__instanceof,h.__implements=i,h.write=function(e,t){e.writeObject(t)},h.writeOpt=function(e,t,n){e.writeOptObject(t,n)},h.read=function(e){var t={value:null};return e.readObject((function(e){t.value=e}),h),t},h.readOpt=function(e,t){var n={value:void 0};return e.readOptObject(t,(function(e){n.value=e}),h),n},h.ice_staticId=function(){return a[r]},h.prototype.constructor=h,h.prototype.__mostDerivedType=function(){return h},u&&(h.prototype.__write=o,h.prototype.__read=s),h.prototype.__writeMemberImpl=l,h.prototype.__readMemberImpl=d,h}}(),n=Ice.StringUtil,Ice.HashUtil={addBoolean:function(e,t){return(e<<5)+e^(t?0:1)},addString:function(e,t){return null!=t&&(e=(e<<5)+e^n.hashCode(t)),e},addNumber:function(e,t){return(e<<5)+e^t},addHashable:function(e,t){return null!=t&&(e=(e<<5)+e^t.hashCode()),e},addArray:function(e,t,n){if(null!=t)for(var i=0;i<t.length;++i)e=n(e,t[i]);return e}},i=Ice.ArrayUtil,r=i.eq,o=function(e){if(this===e)return!0;if(null==e)return!1;if(this.prototype!==e.prototype)return!1;var t,n;for(var i in this)if(t=this[i],n=e[i],"function"!=typeof t&&!r(t,n))return!1;return!0},s=function(){var e,t=new this.constructor;for(var n in this)if(null==(e=this[n]))t[n]=e;else{if("function"==typeof e)continue;"function"==typeof e.clone?t[n]=e.clone():t[n]=e instanceof Array?i.clone(e):e}return t},a=function(e,t){if("function"==typeof t.hashCode)return Ice.HashUtil.addHashable(e,t);if(t instanceof Array)return Ice.HashUtil.addArray(e,t,a);var n=typeof t;return t instanceof String||"string"==n?Ice.HashUtil.addString(e,t):t instanceof Number||"number"==n?Ice.HashUtil.addNumber(e,t):t instanceof Boolean||"boolean"==n?Ice.HashUtil.addBoolean(e,t):void 0},c=function(){var e,t=5381;for(var n in this)null!=(e=this[n])&&"function"!=typeof e&&(t=a(t,e));return t},Ice.Slice.defineStruct=function(e,t,n,i,r,a){var l=e;return l.prototype.clone=s,l.prototype.equals=o,t&&(l.prototype.hashCode=c),i&&n&&(l.prototype.__write=n,l.prototype.__read=i,l.write=function(e,t){t||(l.prototype._nullMarshalValue||(l.prototype._nullMarshalValue=new this),t=l.prototype._nullMarshalValue),t.__write(e)},l.read=function(e,t){return t&&t instanceof this||(t=new this),t.__read(e),t},Object.defineProperty(l,"minWireSize",{get:function(){return r}}),a?Ice.StreamHelpers.VSizeOptHelper.call(l):Ice.StreamHelpers.FSizeOptHelper.call(l)),l},Ice.CompactIdRegistry=new Ice.HashMap,N.defineSequence(Ice,"BoolSeqHelper","Ice.BoolHelper",!0),N.defineSequence(Ice,"ByteSeqHelper","Ice.ByteHelper",!0),N.defineSequence(Ice,"ShortSeqHelper","Ice.ShortHelper",!0),N.defineSequence(Ice,"IntSeqHelper","Ice.IntHelper",!0),N.defineSequence(Ice,"LongSeqHelper","Ice.LongHelper",!0),N.defineSequence(Ice,"FloatSeqHelper","Ice.FloatHelper",!0),N.defineSequence(Ice,"DoubleSeqHelper","Ice.DoubleHelper",!0),N.defineSequence(Ice,"StringSeqHelper","Ice.StringHelper",!1),N.defineSequence(Ice,"ObjectSeqHelper","Ice.ObjectHelper",!1,"Ice.Object"),N.defineSequence(Ice,"ObjectProxySeqHelper","Ice.ObjectPrx",!1),Ice.ReferenceMode={ModeTwoway:0,ModeOneway:1,ModeBatchOneway:2,ModeDatagram:3,ModeBatchDatagram:4,ModeLast:4},function(){var e=Ice.Long;ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=function(e,t){var n=new Uint8Array(this);t=void 0===t?n.length:t;for(var i=new Uint8Array(new ArrayBuffer(t-e)),r=0,o=i.length;r<o;r++)i[r]=n[r+e];return i.buffer});var t="BufferOverflowException",n="BufferUnderflowException",i="IndexOutOfBoundsException",r=Ice.Class({__init__:function(e){void 0!==e?(this.b=e,this.v=new DataView(this.b)):(this.b=null,this.v=null),this._position=0,this._limit=0,this._shrinkCounter=0},empty:function(){return 0===this._limit},resize:function(e){0===e?this.clear():e>this.capacity&&this.reserve(e),this._limit=e},clear:function(){this.b=null,this.v=null,this._position=0,this._limit=0},expand:function(e){var t=0===this.capacity?e:this._position+e;t>this._limit&&this.resize(t)},reset:function(){this._limit>0&&2*this._limit<this.capacity?++this._shrinkCounter>2&&(this.reserve(this._limit),this._shrinkCounter=0):this._shrinkCounter=0,this._limit=0,this._position=0},reserve:function(e){if(e>this.capacity){var t=Math.max(e,2*this.capacity);if(t=Math.max(1024,t),this.b){var n=new Uint8Array(t);n.set(new Uint8Array(this.b)),this.b=n.buffer}else this.b=new ArrayBuffer(t);this.v=new DataView(this.b)}else{if(!(e<this.capacity))return;this.b=this.b.slice(0,this.capacity),this.v=new DataView(this.b)}},put:function(e){if(this._position===this._limit)throw new Error(t);this.v.setUint8(this._position,e),this._position++},putAt:function(e,t){if(e>=this._limit)throw new Error(i);this.v.setUint8(e,t)},putArray:function(e){if(!(e instanceof Uint8Array))throw new TypeError("argument is not a Uint8Array");if(e.byteLength>0){if(this._position+e.length>this._limit)throw new Error(t);new Uint8Array(this.b,0,this.b.byteLength).set(e,this._position),this._position+=e.byteLength}},putShort:function(e){if(this._position+2>this._limit)throw new Error(t);this.v.setInt16(this._position,e,!0),this._position+=2},putInt:function(e){if(this._position+4>this._limit)throw new Error(t);this.v.setInt32(this._position,e,!0),this._position+=4},putIntAt:function(e,t){if(e+4>this._limit||e<0)throw new Error(i);this.v.setInt32(e,t,!0)},putFloat:function(e){if(this._position+4>this._limit)throw new Error(t);this.v.setFloat32(this._position,e,!0),this._position+=4},putDouble:function(e){if(this._position+8>this._limit)throw new Error(t);this.v.setFloat64(this._position,e,!0),this._position+=8},putLong:function(e){if(this._position+8>this._limit)throw new Error(t);this.v.setInt32(this._position,e.low,!0),this._position+=4,this.v.setInt32(this._position,e.high,!0),this._position+=4},writeString:function(e,t){var n=unescape(encodeURIComponent(t));e.writeSize(n.length),e.expand(n.length),this.putString(n,n.length)},putString:function(e,n){if(this._position+n>this._limit)throw new Error(t);for(var i=0;i<n;++i)this.v.setUint8(this._position,e.charCodeAt(i)),this._position++},get:function(){if(this._position>=this._limit)throw new Error(n);var e=this.v.getUint8(this._position);return this._position++,e},getAt:function(e){if(e<0||e>=this._limit)throw new Error(i);return this.v.getUint8(e)},getArray:function(e){if(this._position+e>this._limit)throw new Error(n);var t=this.b.slice(this._position,this._position+e);return this._position+=e,new Uint8Array(t)},getArrayAt:function(e,t){if(e+t>this._limit)throw new Error(n);return t=void 0===t?this.b.byteLength-e:t,new Uint8Array(this.b.slice(e,e+t))},getShort:function(){if(this._limit-this._position<2)throw new Error(n);var e=this.v.getInt16(this._position,!0);return this._position+=2,e},getInt:function(){if(this._limit-this._position<4)throw new Error(n);var e=this.v.getInt32(this._position,!0);return this._position+=4,e},getFloat:function(){if(this._limit-this._position<4)throw new Error(n);var e=this.v.getFloat32(this._position,!0);return this._position+=4,e},getDouble:function(){if(this._limit-this._position<8)throw new Error(n);var e=this.v.getFloat64(this._position,!0);return this._position+=8,e},getLong:function(){if(this._limit-this._position<8)throw new Error(n);var t=new e;return t.low=this.v.getUint32(this._position,!0),this._position+=4,t.high=this.v.getUint32(this._position,!0),this._position+=4,t},getString:function(e){if(this._position+e>this._limit)throw new Error(n);for(var t=new DataView(this.b,this._position,e),i="",r=0;r<e;++r)i+=String.fromCharCode(t.getUint8(r));return this._position+=e,i=decodeURIComponent(escape(i))}}),o=r.prototype;Object.defineProperty(o,"position",{get:function(){return this._position},set:function(e){e>=0&&e<=this._limit&&(this._position=e)}}),Object.defineProperty(o,"limit",{get:function(){return this._limit},set:function(e){e<=this.capacity&&(this._limit=e,this._position>e&&(this._position=e))}}),Object.defineProperty(o,"capacity",{get:function(){return null===this.b?0:this.b.byteLength}}),Object.defineProperty(o,"remaining",{get:function(){return this._limit-this._position}}),r.createNative=function(e){return void 0===e?new Uint8Array(0):new Uint8Array(e)},Ice.Buffer=r}(),function(){var e=Ice.Buffer,t={},n="A".charCodeAt(0),i="a".charCodeAt(0),r="0".charCodeAt(0);function o(e){return e<26?String.fromCharCode(n+e):e<52?String.fromCharCode(i+(e-26)):e<62?String.fromCharCode(r+(e-52)):62==e?"+":"/"}function s(e){return e>="A"&&e<="Z"?e.charCodeAt(0)-n:e>="a"&&e<="z"?e.charCodeAt(0)-i+26:e>="0"&&e<="9"?e.charCodeAt(0)-r+52:"+"==e?62:63}t.encode=function(e){if(null===e||0===e.length)return"";e.length;for(var t,n,i,r,s,a,c,l=[],d=0;d<e.length;d+=3)t=255&e[d],n=0,i=0,d+1<e.length&&(n=255&e[d+1]),d+2<e.length&&(i=255&e[d+2]),r=t>>2&255,s=255&((3&t)<<4|n>>4),a=255&((15&n)<<2|i>>6),c=63&i,l.push(o(r)),l.push(o(s)),d+1<e.length?l.push(o(a)):l.push("="),d+2<e.length?l.push(o(c)):l.push("=");for(var u=l.join(""),h=[],f=0;u.length-f>76;)h.push(u.substring(f,f+76)),h.push("\r\n"),f+=76;return h.push(u.substring(f)),h.join("")},t.decode=function(n){for(var i=[],r=0;r<n.length;r++){var o=n.charAt(r);t.isBase64(o)&&i.push(o)}if(0===i.length)return null;var a,c,l,d,u,h,f,_,p=3*i.length/4+1,C=new e;C.resize(p);for(var g=0;g<i.length;g+=4)"A",h="A",f="A",_="A",u=i[g],g+1<i.length&&(h=i[g+1]),g+2<i.length&&(f=i[g+2]),g+3<i.length&&(_=i[g+3]),a=255&s(u),c=255&s(h),l=255&s(f),d=255&s(_),C.put(a<<2|c>>4),"="!=f&&C.put((15&c)<<4|l>>2),"="!=_&&C.put((3&l)<<6|d);return C.remaining>0?C.getArrayAt(0,C.position):C.getArrayAt(0)},t.isBase64=function(e){return e>="A"&&e<="Z"||(e>="a"&&e<="z"||(e>="0"&&e<="9"||("+"==e||("/"==e||"="==e))))},Ice.Base64=t}(),Ice.Identity=N.defineStruct((function(e,t){this.name=void 0!==e?e:"",this.category=void 0!==t?t:""}),!0,(function(e){e.writeString(this.name),e.writeString(this.category)}),(function(e){this.name=e.readString(),this.category=e.readString()}),2,!1),N.defineDictionary(Ice,"ObjectDict","ObjectDictHelper","Ice.Identity","Ice.ObjectHelper",!1,Ice.HashMap.compareEquals,"Ice.Object"),N.defineSequence(Ice,"IdentitySeqHelper","Ice.Identity",!1),Ice.ProtocolVersion=N.defineStruct((function(e,t){this.major=void 0!==e?e:0,this.minor=void 0!==t?t:0}),!0,(function(e){e.writeByte(this.major),e.writeByte(this.minor)}),(function(e){this.major=e.readByte(),this.minor=e.readByte()}),2,!0),Ice.EncodingVersion=N.defineStruct((function(e,t){this.major=void 0!==e?e:0,this.minor=void 0!==t?t:0}),!0,(function(e){e.writeByte(this.major),e.writeByte(this.minor)}),(function(e){this.major=e.readByte(),this.minor=e.readByte()}),2,!0),function(){Ice.SliceInfo=function(){this.typeId="",this.compactId=-1,this.bytes=[],this.objects=[],this.hasOptionalMembers=!1,this.isLastSlice=!1};Ice.SlicedData=function(e){this.slices=e};var e=Ice.Class(Ice.Object,{__init__:function(e){this._unknownTypeId=e},getUnknownTypeId:function(){return this._unknownTypeId},__write:function(e){e.startWriteObject(this._slicedData),e.endWriteObject()},__read:function(e){e.startReadObject(),this._slicedData=e.endReadObject(!0)}});Ice.UnknownSlicedObject=e}(),function(){var e=Ice.HashMap,t=Ice.Debug,n=Ice.Class({__init__:function(){this._adapterEndpointsTable=new e,this._objectTable=new e(e.compareEquals)},clear:function(){this._adapterEndpointsTable.clear(),this._objectTable.clear()},getAdapterEndpoints:function(e,t,n){if(0===t)return n.value=!1,null;var i=this._adapterEndpointsTable.get(e);return void 0!==i?(n.value=this.checkTTL(i.time,t),i.endpoints):(n.value=!1,null)},addAdapterEndpoints:function(e,t){this._adapterEndpointsTable.set(e,new i(Date.now(),t))},removeAdapterEndpoints:function(e){var t=this._adapterEndpointsTable.get(e);return this._adapterEndpointsTable.del(e),void 0!==t?t.endpoints:null},getObjectReference:function(e,t,n){if(0===t)return n.value=!1,null;var i=this._objectTable.get(e);return void 0!==i?(n.value=this.checkTTL(i.time,t),i.reference):(n.value=!1,null)},addObjectReference:function(e,t){this._objectTable.set(e,new r(Date.now(),t))},removeObjectReference:function(e){var t=this._objectTable.get(e);return this._objectTable.del(e),void 0!==t?t.reference:null},checkTTL:function(e,n){return t.assert(0!==n),n<0||Date.now()-e<=1e3*n}});Ice.LocatorTable=n;var i=function(e,t){this.time=e,this.endpoints=t},r=function(e,t){this.time=e,this.reference=t}}(),function(){var e=Ice.Timer,t=0,n=1,i=2,r=function(e,t){var i=e.__state===n?t.onResponse:t.onException;try{if("function"!=typeof i)t.promise.setState(e.__state,e._args);else{var r=i.apply(null,e._args);r&&"function"==typeof r.then?r.then((function(){var e=arguments;t.promise.succeed.apply(t.promise,e)}),(function(){var e=arguments;t.promise.fail.apply(t.promise,e)})):t.promise.succeed(r)}}catch(e){t.promise.fail.call(t.promise,e)}},o=Ice.Class({__init__:function(){this.__state=t,this.__listeners=[]},then:function(t,n){var i=new o,r=this;return e.setImmediate((function(){r.__listeners.push({promise:i,onResponse:t,onException:n}),r.resolve()})),i},exception:function(e){return this.then(null,e)},finally2:function(t){var n=new o,i=this,r=function(e){return function(){var i=arguments;try{var r=t.apply(null,i);if(r&&"function"==typeof r.then){var o=function(){e.apply(n,i)};r.then(o).exception(o)}else e.apply(n,i)}catch(t){e.apply(n,i)}}};return e.setImmediate((function(){i.then(r(n.succeed),r(n.fail))})),n},delay:function(t){var n=new o,i=this,r=function(n,i){return function(){var r=arguments;e.setTimeout((function(){i.apply(n,r)}),t)}};return e.setImmediate((function(){i.then(r(n,n.succeed),r(n,n.fail))})),n},resolve:function(){if(this.__state!==t)for(var e;e=this.__listeners.pop();)r(this,e)},setState:function(e,n){this.__state===t&&e!==t&&(this.__state=e,this._args=n,this.resolve())},succeed:function(){var e=arguments;return this.setState(n,e),this},fail:function(){var e=arguments;return this.setState(i,e),this},succeeded:function(){return this.__state===n},failed:function(){return this.__state===i},completed:function(){return this.__state!==t}});o.all=function(){if(1===arguments.length&&arguments[0]instanceof Array)return o.all.apply(this,arguments[0]);var e=new o,t=Array.prototype.slice.call(arguments),n=new Array(arguments.length),i=t.length;0===i&&e.succeed.apply(e,n);for(var r=0;r<t.length;++r)!function(r){t[r]&&"function"==typeof t[r].then?t[r].then((function(){n[r]=arguments,0===--i&&e.succeed.apply(e,n)}),(function(){e.fail.apply(e,arguments)})):(n[r]=t[r],0===--i&&e.succeed.apply(e,n))}(r);return e},o.try2=function(e){return(new o).succeed().then(e)},o.delay=function(e){if(arguments.length>1){var t=new o,n=Array.prototype.slice.call(arguments);return e=n.pop(),t.succeed.apply(t,n).delay(e)}return(new o).succeed().delay(e)},Ice.Promise=o}(),l=Ice.Class({__init__:function(e){void 0!==e&&e.length>0?this._prefix=e+": ":this._prefix="",this._dateformat={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!1}},print:function(e){this.write(e,!1)},trace:function(e,t){var n=[];new Date,n.push("-- "),n.push(this.timestamp()),n.push(" "),n.push(this._prefix),n.push(e),n.push(": "),n.push(t),this.write(n.join(""),!0)},warning:function(e){var t=[];new Date,t.push("-! "),t.push(this.timestamp()),t.push(" "),t.push(this._prefix),t.push("warning: "),t.push(e),this.write(t.join(""),!0)},error:function(e){var t=[];new Date,t.push("!! "),t.push(this.timestamp()),t.push(" "),t.push(this._prefix),t.push("error: "),t.push(e),this.write(t.join(""),!0)},cloneWithPrefix:function(e){return new l(e)},write:function(e,t){t&&(e=e.replace(/\n/g,"\n   ")),console.crlog&&console.crlog(e)},timestamp:function(){var e=new Date;return e.toLocaleString("en-US",this._dateformat)+"."+e.getMilliseconds()}}),Ice.Logger=l,Ice.InitializationException=N.defineLocalException((function(e,t){Ice.LocalException.call(this,t),this.reason=void 0!==e?e:""}),Ice.LocalException,"Ice::InitializationException"),Ice.PluginInitializationException=N.defineLocalException((function(e,t){Ice.LocalException.call(this,t),this.reason=void 0!==e?e:""}),Ice.LocalException,"Ice::PluginInitializationException"),Ice.CollocationOptimizationException=N.defineLocalException((function(e){Ice.LocalException.call(this,e)}),Ice.LocalException,"Ice::CollocationOptimizationException"),Ice.AlreadyRegisteredException=N.defineLocalException((function(e,t,n){Ice.LocalException.call(this,n),this.kindOfObject=void 0!==e?e:"",this.id=void 0!==t?t:""}),Ice.LocalException,"Ice::AlreadyRegisteredException"),Ice.NotRegisteredException=N.defineLocalException((function(e,t,n){Ice.LocalException.call(this,n),this.kindOfObject=void 0!==e?e:"",this.id=void 0!==t?t:""}),Ice.LocalException,"Ice::NotRegisteredException"),Ice.TwowayOnlyException=N.defineLocalException((function(e,t){Ice.LocalException.call(this,t),this.operation=void 0!==e?e:""}),Ice.LocalException,"Ice::TwowayOnlyException"),Ice.CloneNotImplementedException=N.defineLocalException((function(e){Ice.LocalException.call(this,e)}),Ice.LocalException,"Ice::CloneNotImplementedException"),Ice.UnknownException=N.defineLocalException((function(e,t){Ice.LocalException.call(this,t),this.unknown=void 0!==e?e:""}),Ice.LocalException,"Ice::UnknownException"),Ice.UnknownLocalException=N.defineLocalException((function(e,t){Ice.UnknownException.call(this,e,t)}),Ice.UnknownException,"Ice::UnknownLocalException"),Ice.UnknownUserException=N.defineLocalException((function(e,t){Ice.UnknownException.call(this,e,t)}),Ice.UnknownException,"Ice::UnknownUserException"),Ice.VersionMismatchException=N.defineLocalException((function(e){Ice.LocalException.call(this,e)}),Ice.LocalException,"Ice::VersionMismatchException"),Ice.CommunicatorDestroyedException=N.defineLocalException((function(e){Ice.LocalException.call(this,e)}),Ice.LocalException,"Ice::CommunicatorDestroyedException"),Ice.ObjectAdapterDeactivatedException=N.defineLocalException((function(e,t){Ice.LocalException.call(this,t),this.name=void 0!==e?e:""}),Ice.LocalException,"Ice::ObjectAdapterDeactivatedException"),Ice.ObjectAdapterIdInUseException=N.defineLocalException((function(e,t){Ice.LocalException.call(this,t),this.id=void 0!==e?e:""}),Ice.LocalException,"Ice::ObjectAdapterIdInUseException"),Ice.NoEndpointException=N.defineLocalException((function(e,t){Ice.LocalException.call(this,t),this.proxy=void 0!==e?e:""}),Ice.LocalException,"Ice::NoEndpointException"),Ice.EndpointParseException=N.defineLocalException((function(e,t){Ice.LocalException.call(this,t),this.str=void 0!==e?e:""}),Ice.LocalException,"Ice::EndpointParseException"),Ice.EndpointSelectionTypeParseException=N.defineLocalException((function(e,t){Ice.LocalException.call(this,t),this.str=void 0!==e?e:""}),Ice.LocalException,"Ice::EndpointSelectionTypeParseException"),Ice.VersionParseException=N.defineLocalException((function(e,t){Ice.LocalException.call(this,t),this.str=void 0!==e?e:""}),Ice.LocalException,"Ice::VersionParseException"),Ice.IdentityParseException=N.defineLocalException((function(e,t){Ice.LocalException.call(this,t),this.str=void 0!==e?e:""}),Ice.LocalException,"Ice::IdentityParseException"),Ice.ProxyParseException=N.defineLocalException((function(e,t){Ice.LocalException.call(this,t),this.str=void 0!==e?e:""}),Ice.LocalException,"Ice::ProxyParseException"),Ice.IllegalIdentityException=N.defineLocalException((function(e,t){Ice.LocalException.call(this,t),this.id=void 0!==e?e:new Ice.Identity}),Ice.LocalException,"Ice::IllegalIdentityException"),Ice.IllegalServantException=N.defineLocalException((function(e,t){Ice.LocalException.call(this,t),this.reason=void 0!==e?e:""}),Ice.LocalException,"Ice::IllegalServantException"),Ice.RequestFailedException=N.defineLocalException((function(e,t,n,i){Ice.LocalException.call(this,i),this.id=void 0!==e?e:new Ice.Identity,this.facet=void 0!==t?t:"",this.operation=void 0!==n?n:""}),Ice.LocalException,"Ice::RequestFailedException"),Ice.ObjectNotExistException=N.defineLocalException((function(e,t,n,i){Ice.RequestFailedException.call(this,e,t,n,i)}),Ice.RequestFailedException,"Ice::ObjectNotExistException"),Ice.FacetNotExistException=N.defineLocalException((function(e,t,n,i){Ice.RequestFailedException.call(this,e,t,n,i)}),Ice.RequestFailedException,"Ice::FacetNotExistException"),Ice.OperationNotExistException=N.defineLocalException((function(e,t,n,i){Ice.RequestFailedException.call(this,e,t,n,i)}),Ice.RequestFailedException,"Ice::OperationNotExistException"),Ice.SyscallException=N.defineLocalException((function(e,t){Ice.LocalException.call(this,t),this.error=void 0!==e?e:0}),Ice.LocalException,"Ice::SyscallException"),Ice.SocketException=N.defineLocalException((function(e,t){Ice.SyscallException.call(this,e,t)}),Ice.SyscallException,"Ice::SocketException"),Ice.FileException=N.defineLocalException((function(e,t,n){Ice.SyscallException.call(this,e,n),this.path=void 0!==t?t:""}),Ice.SyscallException,"Ice::FileException"),Ice.ConnectFailedException=N.defineLocalException((function(e,t){Ice.SocketException.call(this,e,t)}),Ice.SocketException,"Ice::ConnectFailedException"),Ice.ConnectionRefusedException=N.defineLocalException((function(e,t){Ice.ConnectFailedException.call(this,e,t)}),Ice.ConnectFailedException,"Ice::ConnectionRefusedException"),Ice.ConnectionLostException=N.defineLocalException((function(e,t){Ice.SocketException.call(this,e,t)}),Ice.SocketException,"Ice::ConnectionLostException"),Ice.DNSException=N.defineLocalException((function(e,t,n){Ice.LocalException.call(this,n),this.error=void 0!==e?e:0,this.host=void 0!==t?t:""}),Ice.LocalException,"Ice::DNSException"),Ice.OperationInterruptedException=N.defineLocalException((function(e){Ice.LocalException.call(this,e)}),Ice.LocalException,"Ice::OperationInterruptedException"),Ice.TimeoutException=N.defineLocalException((function(e){Ice.LocalException.call(this,e)}),Ice.LocalException,"Ice::TimeoutException"),Ice.ConnectTimeoutException=N.defineLocalException((function(e){Ice.TimeoutException.call(this,e)}),Ice.TimeoutException,"Ice::ConnectTimeoutException"),Ice.CloseTimeoutException=N.defineLocalException((function(e){Ice.TimeoutException.call(this,e)}),Ice.TimeoutException,"Ice::CloseTimeoutException"),Ice.ConnectionTimeoutException=N.defineLocalException((function(e){Ice.TimeoutException.call(this,e)}),Ice.TimeoutException,"Ice::ConnectionTimeoutException"),Ice.InvocationTimeoutException=N.defineLocalException((function(e){Ice.TimeoutException.call(this,e)}),Ice.TimeoutException,"Ice::InvocationTimeoutException"),Ice.InvocationCanceledException=N.defineLocalException((function(e){Ice.LocalException.call(this,e)}),Ice.LocalException,"Ice::InvocationCanceledException"),Ice.ProtocolException=N.defineLocalException((function(e,t){Ice.LocalException.call(this,t),this.reason=void 0!==e?e:""}),Ice.LocalException,"Ice::ProtocolException"),Ice.BadMagicException=N.defineLocalException((function(e,t,n){Ice.ProtocolException.call(this,e,n),this.badMagic=void 0!==t?t:null}),Ice.ProtocolException,"Ice::BadMagicException"),Ice.UnsupportedProtocolException=N.defineLocalException((function(e,t,n,i){Ice.ProtocolException.call(this,e,i),this.bad=void 0!==t?t:new Ice.ProtocolVersion,this.supported=void 0!==n?n:new Ice.ProtocolVersion}),Ice.ProtocolException,"Ice::UnsupportedProtocolException"),Ice.UnsupportedEncodingException=N.defineLocalException((function(e,t,n,i){Ice.ProtocolException.call(this,e,i),this.bad=void 0!==t?t:new Ice.EncodingVersion,this.supported=void 0!==n?n:new Ice.EncodingVersion}),Ice.ProtocolException,"Ice::UnsupportedEncodingException"),Ice.UnknownMessageException=N.defineLocalException((function(e,t){Ice.ProtocolException.call(this,e,t)}),Ice.ProtocolException,"Ice::UnknownMessageException"),Ice.ConnectionNotValidatedException=N.defineLocalException((function(e,t){Ice.ProtocolException.call(this,e,t)}),Ice.ProtocolException,"Ice::ConnectionNotValidatedException"),Ice.UnknownRequestIdException=N.defineLocalException((function(e,t){Ice.ProtocolException.call(this,e,t)}),Ice.ProtocolException,"Ice::UnknownRequestIdException"),Ice.UnknownReplyStatusException=N.defineLocalException((function(e,t){Ice.ProtocolException.call(this,e,t)}),Ice.ProtocolException,"Ice::UnknownReplyStatusException"),Ice.CloseConnectionException=N.defineLocalException((function(e,t){Ice.ProtocolException.call(this,e,t)}),Ice.ProtocolException,"Ice::CloseConnectionException"),Ice.ForcedCloseConnectionException=N.defineLocalException((function(e,t){Ice.ProtocolException.call(this,e,t)}),Ice.ProtocolException,"Ice::ForcedCloseConnectionException"),Ice.IllegalMessageSizeException=N.defineLocalException((function(e,t){Ice.ProtocolException.call(this,e,t)}),Ice.ProtocolException,"Ice::IllegalMessageSizeException"),Ice.CompressionException=N.defineLocalException((function(e,t){Ice.ProtocolException.call(this,e,t)}),Ice.ProtocolException,"Ice::CompressionException"),Ice.DatagramLimitException=N.defineLocalException((function(e,t){Ice.ProtocolException.call(this,e,t)}),Ice.ProtocolException,"Ice::DatagramLimitException"),Ice.MarshalException=N.defineLocalException((function(e,t){Ice.ProtocolException.call(this,e,t)}),Ice.ProtocolException,"Ice::MarshalException"),Ice.ProxyUnmarshalException=N.defineLocalException((function(e,t){Ice.MarshalException.call(this,e,t)}),Ice.MarshalException,"Ice::ProxyUnmarshalException"),Ice.UnmarshalOutOfBoundsException=N.defineLocalException((function(e,t){Ice.MarshalException.call(this,e,t)}),Ice.MarshalException,"Ice::UnmarshalOutOfBoundsException"),Ice.NoObjectFactoryException=N.defineLocalException((function(e,t,n){Ice.MarshalException.call(this,e,n),this.type=void 0!==t?t:""}),Ice.MarshalException,"Ice::NoObjectFactoryException"),Ice.UnexpectedObjectException=N.defineLocalException((function(e,t,n,i){Ice.MarshalException.call(this,e,i),this.type=void 0!==t?t:"",this.expectedType=void 0!==n?n:""}),Ice.MarshalException,"Ice::UnexpectedObjectException"),Ice.MemoryLimitException=N.defineLocalException((function(e,t){Ice.MarshalException.call(this,e,t)}),Ice.MarshalException,"Ice::MemoryLimitException"),Ice.StringConversionException=N.defineLocalException((function(e,t){Ice.MarshalException.call(this,e,t)}),Ice.MarshalException,"Ice::StringConversionException"),Ice.EncapsulationException=N.defineLocalException((function(e,t){Ice.MarshalException.call(this,e,t)}),Ice.MarshalException,"Ice::EncapsulationException"),Ice.FeatureNotSupportedException=N.defineLocalException((function(e,t){Ice.LocalException.call(this,t),this.unsupportedFeature=void 0!==e?e:""}),Ice.LocalException,"Ice::FeatureNotSupportedException"),Ice.SecurityException=N.defineLocalException((function(e,t){Ice.LocalException.call(this,t),this.reason=void 0!==e?e:""}),Ice.LocalException,"Ice::SecurityException"),Ice.FixedProxyException=N.defineLocalException((function(e){Ice.LocalException.call(this,e)}),Ice.LocalException,"Ice::FixedProxyException"),Ice.ResponseSentException=N.defineLocalException((function(e){Ice.LocalException.call(this,e)}),Ice.LocalException,"Ice::ResponseSentException"),function(){var e=Ice.StringUtil,t={};function n(t){var n=t.indexOf(".");if(-1===n)throw new Ice.VersionParseException("malformed version value `"+t+"'");var i,r=t.substring(0,n);try{i=e.toInt(r)}catch(e){throw new Ice.VersionParseException("invalid version value `"+t+"'")}if(i<1||i>255)throw new Ice.VersionParseException("range error in version `"+t+"'");return i}function i(t){var n=t.indexOf(".");if(-1===n)throw new Ice.VersionParseException("malformed version value `"+t+"'");var i,r=t.substring(n+1);try{i=e.toInt(r)}catch(e){throw new Ice.VersionParseException("invalid version value `"+t+"'")}if(i<0||i>255)throw new Ice.VersionParseException("range error in version `"+t+"'");return i}function r(e,t){return e+"."+t}Ice.Encoding_1_0=new Ice.EncodingVersion(1,0),Ice.Encoding_1_1=new Ice.EncodingVersion(1,1),Ice.Protocol_1_0=new Ice.ProtocolVersion(1,0),t.headerSize=14,t.magic=Ice.Buffer.createNative([73,99,101,80]),t.protocolMajor=1,t.protocolMinor=0,t.protocolEncodingMajor=1,t.protocolEncodingMinor=0,t.encodingMajor=1,t.encodingMinor=1,t.requestMsg=0,t.requestBatchMsg=1,t.replyMsg=2,t.validateConnectionMsg=3,t.closeConnectionMsg=4,t.replyOK=0,t.replyUserException=1,t.replyObjectNotExist=2,t.replyFacetNotExist=3,t.replyOperationNotExist=4,t.replyUnknownLocalException=5,t.replyUnknownUserException=6,t.replyUnknownException=7,t.requestHdr=Ice.Buffer.createNative([t.magic[0],t.magic[1],t.magic[2],t.magic[3],t.protocolMajor,t.protocolMinor,t.protocolEncodingMajor,t.protocolEncodingMinor,t.requestMsg,0,0,0,0,0,0,0,0,0]),t.requestBatchHdr=Ice.Buffer.createNative([t.magic[0],t.magic[1],t.magic[2],t.magic[3],t.protocolMajor,t.protocolMinor,t.protocolEncodingMajor,t.protocolEncodingMinor,t.requestBatchMsg,0,0,0,0,0,0,0,0,0]),t.replyHdr=Ice.Buffer.createNative([t.magic[0],t.magic[1],t.magic[2],t.magic[3],t.protocolMajor,t.protocolMinor,t.protocolEncodingMajor,t.protocolEncodingMinor,t.replyMsg,0,0,0,0,0]),t.currentProtocol=new Ice.ProtocolVersion(t.protocolMajor,t.protocolMinor),t.currentProtocolEncoding=new Ice.EncodingVersion(t.protocolEncodingMajor,t.protocolEncodingMinor),t.currentEncoding=new Ice.EncodingVersion(t.encodingMajor,t.encodingMinor),t.checkSupportedProtocol=function(e){if(e.major!==t.currentProtocol.major||e.minor>t.currentProtocol.minor)throw new Ice.UnsupportedProtocolException("",e,t.currentProtocol)},t.checkSupportedProtocolEncoding=function(e){if(e.major!==t.currentProtocolEncoding.major||e.minor>t.currentProtocolEncoding.minor)throw new Ice.UnsupportedEncodingException("",e,t.currentProtocolEncoding)},t.checkSupportedEncoding=function(e){if(e.major!==t.currentEncoding.major||e.minor>t.currentEncoding.minor)throw new Ice.UnsupportedEncodingException("",e,t.currentEncoding)},t.getCompatibleProtocol=function(e){return e.major!==t.currentProtocol.major||e.minor<t.currentProtocol.minor?e:t.currentProtocol},t.getCompatibleEncoding=function(e){return e.major!==t.currentEncoding.major||e.minor<t.currentEncoding.minor?e:t.currentEncoding},t.isSupported=function(e,t){return e.major===t.major&&e.minor<=t.minor},Ice.stringToProtocolVersion=function(e){return new Ice.ProtocolVersion(n(e),i(e))},Ice.stringToEncodingVersion=function(e){return new Ice.EncodingVersion(n(e),i(e))},Ice.protocolVersionToString=function(e){return r(e.major,e.minor)},Ice.encodingVersionToString=function(e){return r(e.major,e.minor)},Ice.Protocol=t}(),d=function(e,t,n){this._pattern=e,this._deprecated=t,this._deprecatedBy=n},Object.defineProperty(d.prototype,"pattern",{get:function(){return this._pattern}}),Object.defineProperty(d.prototype,"deprecated",{get:function(){return this._deprecated}}),Object.defineProperty(d.prototype,"deprecatedBy",{get:function(){return this._deprecatedBy}}),Ice.Property=d,function(){var e={},t=Ice.Property;e.IceProps=[new t("/^Ice.ACM.Client/",!0,null),new t("/^Ice.ACM.Server/",!0,null),new t("/^Ice.ACM.Timeout/",!1,null),new t("/^Ice.ACM.Heartbeat/",!1,null),new t("/^Ice.ACM.Close/",!1,null),new t("/^Ice.ACM/",!1,null),new t("/^Ice.ACM.Client.Timeout/",!1,null),new t("/^Ice.ACM.Client.Heartbeat/",!1,null),new t("/^Ice.ACM.Client.Close/",!1,null),new t("/^Ice.ACM.Client/",!1,null),new t("/^Ice.ACM.Server.Timeout/",!1,null),new t("/^Ice.ACM.Server.Heartbeat/",!1,null),new t("/^Ice.ACM.Server.Close/",!1,null),new t("/^Ice.ACM.Server/",!1,null),new t("/^Ice.Admin.ACM.Timeout/",!1,null),new t("/^Ice.Admin.ACM.Heartbeat/",!1,null),new t("/^Ice.Admin.ACM.Close/",!1,null),new t("/^Ice.Admin.ACM/",!1,null),new t("/^Ice.Admin.AdapterId/",!1,null),new t("/^Ice.Admin.Endpoints/",!1,null),new t("/^Ice.Admin.Locator.EndpointSelection/",!1,null),new t("/^Ice.Admin.Locator.ConnectionCached/",!1,null),new t("/^Ice.Admin.Locator.PreferSecure/",!1,null),new t("/^Ice.Admin.Locator.LocatorCacheTimeout/",!1,null),new t("/^Ice.Admin.Locator.InvocationTimeout/",!1,null),new t("/^Ice.Admin.Locator.Locator/",!1,null),new t("/^Ice.Admin.Locator.Router/",!1,null),new t("/^Ice.Admin.Locator.CollocationOptimized/",!1,null),new t("/^Ice.Admin.Locator.Context../",!1,null),new t("/^Ice.Admin.Locator/",!1,null),new t("/^Ice.Admin.PublishedEndpoints/",!1,null),new t("/^Ice.Admin.ReplicaGroupId/",!1,null),new t("/^Ice.Admin.Router.EndpointSelection/",!1,null),new t("/^Ice.Admin.Router.ConnectionCached/",!1,null),new t("/^Ice.Admin.Router.PreferSecure/",!1,null),new t("/^Ice.Admin.Router.LocatorCacheTimeout/",!1,null),new t("/^Ice.Admin.Router.InvocationTimeout/",!1,null),new t("/^Ice.Admin.Router.Locator/",!1,null),new t("/^Ice.Admin.Router.Router/",!1,null),new t("/^Ice.Admin.Router.CollocationOptimized/",!1,null),new t("/^Ice.Admin.Router.Context../",!1,null),new t("/^Ice.Admin.Router/",!1,null),new t("/^Ice.Admin.ProxyOptions/",!1,null),new t("/^Ice.Admin.ThreadPool.Size/",!1,null),new t("/^Ice.Admin.ThreadPool.SizeMax/",!1,null),new t("/^Ice.Admin.ThreadPool.SizeWarn/",!1,null),new t("/^Ice.Admin.ThreadPool.StackSize/",!1,null),new t("/^Ice.Admin.ThreadPool.Serialize/",!1,null),new t("/^Ice.Admin.ThreadPool.ThreadIdleTime/",!1,null),new t("/^Ice.Admin.ThreadPool.ThreadPriority/",!1,null),new t("/^Ice.Admin.MessageSizeMax/",!1,null),new t("/^Ice.Admin.DelayCreation/",!1,null),new t("/^Ice.Admin.Enabled/",!1,null),new t("/^Ice.Admin.Facets/",!1,null),new t("/^Ice.Admin.InstanceName/",!1,null),new t("/^Ice.Admin.Logger.KeepLogs/",!1,null),new t("/^Ice.Admin.Logger.KeepTraces/",!1,null),new t("/^Ice.Admin.Logger.Properties/",!1,null),new t("/^Ice.Admin.ServerId/",!1,null),new t("/^Ice.BackgroundLocatorCacheUpdates/",!1,null),new t("/^Ice.BatchAutoFlush/",!0,null),new t("/^Ice.BatchAutoFlushSize/",!1,null),new t("/^Ice.ChangeUser/",!1,null),new t("/^Ice.ClientAccessPolicyProtocol/",!1,null),new t("/^Ice.Compression.Level/",!1,null),new t("/^Ice.CollectObjects/",!1,null),new t("/^Ice.Config/",!1,null),new t("/^Ice.ConsoleListener/",!1,null),new t("/^Ice.Default.CollocationOptimized/",!1,null),new t("/^Ice.Default.EncodingVersion/",!1,null),new t("/^Ice.Default.EndpointSelection/",!1,null),new t("/^Ice.Default.Host/",!1,null),new t("/^Ice.Default.Locator.EndpointSelection/",!1,null),new t("/^Ice.Default.Locator.ConnectionCached/",!1,null),new t("/^Ice.Default.Locator.PreferSecure/",!1,null),new t("/^Ice.Default.Locator.LocatorCacheTimeout/",!1,null),new t("/^Ice.Default.Locator.InvocationTimeout/",!1,null),new t("/^Ice.Default.Locator.Locator/",!1,null),new t("/^Ice.Default.Locator.Router/",!1,null),new t("/^Ice.Default.Locator.CollocationOptimized/",!1,null),new t("/^Ice.Default.Locator.Context../",!1,null),new t("/^Ice.Default.Locator/",!1,null),new t("/^Ice.Default.LocatorCacheTimeout/",!1,null),new t("/^Ice.Default.InvocationTimeout/",!1,null),new t("/^Ice.Default.Package/",!1,null),new t("/^Ice.Default.PreferSecure/",!1,null),new t("/^Ice.Default.Protocol/",!1,null),new t("/^Ice.Default.Router.EndpointSelection/",!1,null),new t("/^Ice.Default.Router.ConnectionCached/",!1,null),new t("/^Ice.Default.Router.PreferSecure/",!1,null),new t("/^Ice.Default.Router.LocatorCacheTimeout/",!1,null),new t("/^Ice.Default.Router.InvocationTimeout/",!1,null),new t("/^Ice.Default.Router.Locator/",!1,null),new t("/^Ice.Default.Router.Router/",!1,null),new t("/^Ice.Default.Router.CollocationOptimized/",!1,null),new t("/^Ice.Default.Router.Context../",!1,null),new t("/^Ice.Default.Router/",!1,null),new t("/^Ice.Default.SlicedFormat/",!1,null),new t("/^Ice.Default.SourceAddress/",!1,null),new t("/^Ice.Default.Timeout/",!1,null),new t("/^Ice.EventLog.Source/",!1,null),new t("/^Ice.FactoryAssemblies/",!1,null),new t("/^Ice.HTTPProxyHost/",!1,null),new t("/^Ice.HTTPProxyPort/",!1,null),new t("/^Ice.ImplicitContext/",!1,null),new t("/^Ice.InitPlugins/",!1,null),new t("/^Ice.IPv4/",!1,null),new t("/^Ice.IPv6/",!1,null),new t("/^Ice.LogFile/",!1,null),new t("/^Ice.LogStdErr.Convert/",!1,null),new t("/^Ice.MessageSizeMax/",!1,null),new t("/^Ice.Nohup/",!1,null),new t("/^Ice.NullHandleAbort/",!1,null),new t("/^Ice.Override.CloseTimeout/",!1,null),new t("/^Ice.Override.Compress/",!1,null),new t("/^Ice.Override.ConnectTimeout/",!1,null),new t("/^Ice.Override.Timeout/",!1,null),new t("/^Ice.Override.Secure/",!1,null),new t("/^Ice.Package../",!1,null),new t("/^Ice.Plugin../",!1,null),new t("/^Ice.PluginLoadOrder/",!1,null),new t("/^Ice.PreferIPv6Address/",!1,null),new t("/^Ice.PrintAdapterReady/",!1,null),new t("/^Ice.PrintProcessId/",!1,null),new t("/^Ice.PrintStackTraces/",!1,null),new t("/^Ice.ProgramName/",!1,null),new t("/^Ice.RetryIntervals/",!1,null),new t("/^Ice.ServerIdleTime/",!1,null),new t("/^Ice.SOCKSProxyHost/",!1,null),new t("/^Ice.SOCKSProxyPort/",!1,null),new t("/^Ice.StdErr/",!1,null),new t("/^Ice.StdOut/",!1,null),new t("/^Ice.SyslogFacility/",!1,null),new t("/^Ice.ThreadPool.Client.Size/",!1,null),new t("/^Ice.ThreadPool.Client.SizeMax/",!1,null),new t("/^Ice.ThreadPool.Client.SizeWarn/",!1,null),new t("/^Ice.ThreadPool.Client.StackSize/",!1,null),new t("/^Ice.ThreadPool.Client.Serialize/",!1,null),new t("/^Ice.ThreadPool.Client.ThreadIdleTime/",!1,null),new t("/^Ice.ThreadPool.Client.ThreadPriority/",!1,null),new t("/^Ice.ThreadPool.Server.Size/",!1,null),new t("/^Ice.ThreadPool.Server.SizeMax/",!1,null),new t("/^Ice.ThreadPool.Server.SizeWarn/",!1,null),new t("/^Ice.ThreadPool.Server.StackSize/",!1,null),new t("/^Ice.ThreadPool.Server.Serialize/",!1,null),new t("/^Ice.ThreadPool.Server.ThreadIdleTime/",!1,null),new t("/^Ice.ThreadPool.Server.ThreadPriority/",!1,null),new t("/^Ice.ThreadPriority/",!1,null),new t("/^Ice.Trace.Admin.Properties/",!1,null),new t("/^Ice.Trace.Admin.Logger/",!1,null),new t("/^Ice.Trace.Locator/",!1,null),new t("/^Ice.Trace.Network/",!1,null),new t("/^Ice.Trace.Protocol/",!1,null),new t("/^Ice.Trace.Retry/",!1,null),new t("/^Ice.Trace.Slicing/",!1,null),new t("/^Ice.Trace.ThreadPool/",!1,null),new t("/^Ice.UDP.RcvSize/",!1,null),new t("/^Ice.UDP.SndSize/",!1,null),new t("/^Ice.TCP.Backlog/",!1,null),new t("/^Ice.TCP.RcvSize/",!1,null),new t("/^Ice.TCP.SndSize/",!1,null),new t("/^Ice.UseApplicationClassLoader/",!1,null),new t("/^Ice.UseSyslog/",!1,null),new t("/^Ice.Warn.AMICallback/",!1,null),new t("/^Ice.Warn.Connections/",!1,null),new t("/^Ice.Warn.Datagrams/",!1,null),new t("/^Ice.Warn.Dispatch/",!1,null),new t("/^Ice.Warn.Endpoints/",!1,null),new t("/^Ice.Warn.UnknownProperties/",!1,null),new t("/^Ice.Warn.UnusedProperties/",!1,null),new t("/^Ice.CacheMessageBuffers/",!1,null),new t("/^Ice.ThreadInterruptSafe/",!1,null),new t("/^Ice.Voip/",!1,null)],e.validProps=[e.IceProps],e.clPropNames=["Ice"],Ice.PropertyNames=e}(),u=Ice.HashMap,h=Ice.AlreadyRegisteredException,f=Ice.NotRegisteredException,_=Ice.Class({__init__:function(){this._factoryMap=new u},add:function(e,t){var n;if(void 0!==this._factoryMap.get(t))throw(n=new h).id=t,n.kindOfObject="object factory",n;this._factoryMap.set(t,e)},remove:function(e){var t,n;if(void 0===(t=this._factoryMap.get(e)))throw(n=new f).id=e,n.kindOfObject="object factory",n;this._factoryMap.del(e),t.destroy()},find:function(e){return this._factoryMap.get(e)},destroy:function(){var e=this._factoryMap.entries;for(this._factoryMap=new u;null!==e;)e.value.destroy(),e=e.next}}),Ice.ObjectFactoryManager=_,function(){var e=Ice.Promise,t=Ice.Class(e,{__init__:function(t,n,i,r,o){e.call(this),void 0!==t&&(this._communicator=t,this._instance=null!==t?t.instance:null,this._operation=n,this._connection=i,this._proxy=r,this._adapter=o)}}),n=t.prototype,i=Object.defineProperty;i(n,"communicator",{get:function(){return this._communicator}}),i(n,"connection",{get:function(){return this._connection}}),i(n,"proxy",{get:function(){return this._proxy}}),i(n,"adapter",{get:function(){return this._adapter}}),i(n,"operation",{get:function(){return this._operation}}),Ice.AsyncResultBase=t}(),N.defineDictionary(Ice,"Context","ContextHelper","Ice.StringHelper","Ice.StringHelper",!1,void 0,void 0),Ice.OperationMode=N.defineEnum([["Normal",0],["Nonmutating",1],["Idempotent",2]]),Ice.Current=N.defineStruct((function(e,t,n,i,r,o,s,a,c){this.adapter=void 0!==e?e:null,this.con=void 0!==t?t:null,this.id=void 0!==n?n:new Ice.Identity,this.facet=void 0!==i?i:"",this.operation=void 0!==r?r:"",this.mode=void 0!==o?o:Ice.OperationMode.Normal,this.ctx=void 0!==s?s:null,this.requestId=void 0!==a?a:0,this.encoding=void 0!==c?c:new Ice.EncodingVersion}),!1),Ice.ObjectFactory=Ice.Class({create:function(e){throw new Error("not implemented")},destroy:function(){throw new Error("not implemented")}}),p=Ice.Class(Error,{__init__:function(e){e instanceof Ice.LocalException?this._ex=e:(Ice.Debug.assert(e instanceof p),this._ex=e._ex)}}),C=p.prototype,Object.defineProperty(C,"inner",{get:function(){return this._ex}}),Ice.RetryException=p,Ice.EndpointSelectionType=N.defineEnum([["Random",0],["Ordered",1]]),function(){Ice.Promise;var e=Ice.ReferenceMode,t=Ice.Class({__init__:function(t,n,i){this._reference=t,this._response=t.getMode()==e.ModeTwoway,this._connection=n,this._compress=i},update:function(e,t){try{if(e===this)return t;if(e.getConnection()===this._connection)return t}catch(e){}return this},sendAsyncRequest:function(e){return e.__invokeRemote(this._connection,this._compress,this._response)},asyncRequestCanceled:function(e){return this._connection.asyncRequestCanceled(e)},getReference:function(){return this._reference},getConnection:function(){return this._connection}});Ice.ConnectionRequestHandler=t}(),function(){var e=Ice.Debug,t=Ice.HashMap,n=Ice.Protocol,i=Ice.StringUtil,r=Ice.OperationMode,o=Ice.Identity,s={traceSend:function(e,t,n){if(n.protocol>=1){var i=e.pos;e.pos=0;var r=[],o=l(r,e);t.trace(n.protocolCat,"sending "+d(o)+" "+r.join("")),e.pos=i}},traceRecv:function(e,t,n){if(n.protocol>=1){var i=e.pos;e.pos=0;var r=[],o=l(r,e);t.trace(n.protocolCat,"received "+d(o)+" "+r.join("")),e.pos=i}},trace:function(e,t,n,i){if(i.protocol>=1){var r=t.pos;t.pos=0;var o=[];o.push(e),l(o,t),n.trace(i.protocolCat,o.join("")),t.pos=r}}};new t;function a(e,t){var n=new o;n.__read(t),e.push("\nidentity = "+t.instance.identityToString(n));var r=Ice.StringSeqHelper.read(t);e.push("\nfacet = "),r.length>0&&e.push(i.escapeString(r[0],""));var s=t.readString();e.push("\noperation = "+s)}function c(e,t){a(e,t);var n=t.readByte();switch(e.push("\nmode = "+n+" "),r.valueOf(n)){case r.Normal:e.push("(normal)");break;case r.Nonmutating:e.push("(nonmutating)");break;case r.Idempotent:e.push("(idempotent)");break;default:e.push("(unknown)")}var i=t.readSize();for(e.push("\ncontext = ");i-- >0;){var o=t.readString(),s=t.readString();e.push(o+"/"+s),i>0&&e.push(", ")}var c=t.skipEncaps();c.equals(Ice.Encoding_1_0)||(e.push("\nencoding = "),e.push(Ice.encodingVersionToString(c)))}function l(t,i){var r=function(e,t){t.readByte(),t.readByte(),t.readByte(),t.readByte(),t.readByte(),t.readByte(),t.readByte(),t.readByte();var n=t.readByte();e.push("\nmessage type = "+n+" ("+d(n)+")");var i=t.readByte();switch(e.push("\ncompression status = "+i+" "),i){case 0:e.push("(not compressed; do not compress response, if any)");break;case 1:e.push("(not compressed; compress response, if any)");break;case 2:e.push("(compressed; compress response, if any)");break;default:e.push("(unknown)")}var r=t.readInt();return e.push("\nmessage size = "+r),n}(t,i);switch(r){case n.closeConnectionMsg:case n.validateConnectionMsg:break;case n.requestMsg:!function(e,t){var n=t.readInt();e.push("\nrequest id = "+n),0===n&&e.push(" (oneway)"),c(e,t)}(t,i);break;case n.requestBatchMsg:!function(e,t){var n=t.readInt();e.push("\nnumber of requests = "+n);for(var i=0;i<n;++i)e.push("\nrequest #"+i+":"),c(e,t)}(t,i);break;case n.replyMsg:!function(t,i){var r=i.readInt();t.push("\nrequest id = "+r);var o=i.readByte();switch(t.push("\nreply status = "+o+" "),o){case n.replyOK:t.push("(ok)");break;case n.replyUserException:t.push("(user exception)");break;case n.replyObjectNotExist:case n.replyFacetNotExist:case n.replyOperationNotExist:switch(o){case n.replyObjectNotExist:t.push("(object not exist)");break;case n.replyFacetNotExist:t.push("(facet not exist)");break;case n.replyOperationNotExist:t.push("(operation not exist)");break;default:e.assert(!1)}a(t,i);break;case n.replyUnknownException:case n.replyUnknownLocalException:case n.replyUnknownUserException:switch(o){case n.replyUnknownException:t.push("(unknown exception)");break;case n.replyUnknownLocalException:t.push("(unknown local exception)");break;case n.replyUnknownUserException:t.push("(unknown user exception)");break;default:e.assert(!1)}var s=i.readString();t.push("\nunknown = "+s);break;default:t.push("(unknown)")}if(o===n.replyOK||o===n.replyUserException){var c=i.skipEncaps();c.equals(Ice.Encoding_1_0)||(t.push("\nencoding = "),t.push(Ice.encodingVersionToString(c)))}}(t,i)}return r}function d(e){switch(e){case n.requestMsg:return"request";case n.requestBatchMsg:return"batch request";case n.replyMsg:return"reply";case n.closeConnectionMsg:return"close connection";case n.validateConnectionMsg:return"validate connection";default:return"unknown"}}s.dumpStream=function(e){var t=e.pos;e.pos=0;var n=e.readBlob(e.size());s.dumpOctets(n),e.pos=t},s.dumpOctets=function(e){for(var t=[],n=0;n<e.length;n+=8){var i;for(i=n;i-n<8;i++)if(i<e.length){var r,o=e[i];o<0&&(o+=256),r=o<10?"  "+o:o<100?" "+o:""+o,t.push(r+" ")}else t.push("    ");for(t.push('"'),i=n;i<e.length&&i-n<8;i++)e[i]>=32&&e[i]<127?t.push(String.fromCharCode(e[i])):t.push(".");t.push('"\n')}console.crlog&&console.crlog(t.join(""))},Ice.TraceUtil=s}(),function(){var e=Ice.Logger,t=null;Ice.getProcessLogger=function(){return null===t&&(t=new e("","")),t},Ice.setProcessLogger=function(e){t=e}}(),g=Ice.UnexpectedObjectException,m=Ice.MemoryLimitException,Ice.ExUtil={throwUOE:function(e,t){var n=t.ice_id();throw new g("expected element of type `"+e+"' but received '"+n,n,e)},throwMemoryLimitException:function(e,t){throw new m("requested "+e+" bytes, maximum allowed is "+t+" bytes (see Ice.MessageSizeMax)")}},function(){var e=Ice.StringUtil,t=Ice.HashMap,n=(Ice.Promise,Ice.PropertyNames),i=Ice.Debug,r=(Ice.ProcessLogger,Ice.getProcessLogger),o=Ice.InitializationException,s=Ice.Class({__init__:function(e,n){if(this._properties=new t,null!=n)for(var i=n._properties.entries;null!==i;i=i.next)this._properties.set(i.key,{value:i.value.value,used:!1});if(null!=e){var r=this.parseIceCommandLineOptions(e);e.length=0;for(var o=0;o<r.length;++o)e.push(r[o])}},getProperty:function(e){return this.getPropertyWithDefault(e,"")},getPropertyWithDefault:function(e,t){var n=this._properties.get(e);return void 0!==n?(n.used=!0,n.value):t},getPropertyAsInt:function(e){return this.getPropertyAsIntWithDefault(e,0)},getPropertyAsIntWithDefault:function(e,t){var n=this._properties.get(e);return void 0!==n?(n.used=!0,parseInt(n.value)):t},getPropertyAsList:function(e){return this.getPropertyAsListWithDefault(e,0)},getPropertyAsListWithDefault:function(t,n){null==n&&(n=[]);var i=this._properties.get(t);if(void 0!==i){i.used=!0;var o=e.splitString(i.value,", \t\r\n");return null===o?(r().warning("mismatched quotes in property "+t+"'s value, returning default value"),n):(0===o.length&&(o=n),o)}return n},getPropertiesForPrefix:function(e){for(var n=new t,i=this._properties.entries;null!==i;i=i.next)null!=e&&0!==i.key.indexOf(e)||(i.value.used=!0,n.set(i.key,i.value.value));return n},setProperty:function(e,t){null!=e&&(e=e.trim());var s=r();if(null==e||0===e.length)throw new o("Attempt to set property with empty key");var a=e.indexOf(".");if(-1!==a)for(var c=e.substr(0,a),l=0;l<n.validProps.length;++l){var d=n.validProps[l][0].pattern;if(a=d.indexOf("."),i.assert(-1!=a),d.substring(0,a-1)==c){for(var u,h=!1,f=!1,_=0;_<n.validProps[l][_].length&&!h;++_){d=n.validProps[l][_].pattern();var p=new RegExp(d);if((h=p.test(e))&&n.validProps[l][_].deprecated&&(s.warning("deprecated property: "+e),null!==n.validProps[l][_].deprecatedBy&&(e=n.validProps[l][_].deprecatedBy)),h)break;if(h=(p=new RegExp(d.toUpperCase())).test(e.toUpperCase())){f=!0,u=(u=(u=d.substr(2)).substr(0,u.length-1)).replace(/\\/g,"");break}}h?f&&s.warning("unknown property: `"+e+"'; did you mean `"+u+"'"):s.warning("unknown property: "+e)}}if(null!=t&&t.length>0){var C=this._properties.get(e);void 0!==C?C.value=t:this._properties.set(e,{value:t,used:!1})}else this._properties.del(e)},getCommandLineOptions:function(){for(var e=[],t=this._properties.entries;null!==t;t=t.next)e.push("--"+t.key+"="+t.pv.value);return e},parseCommandLineOptions:function(e,t){e.length>0&&"."!=e.charAt(e.length-1)&&(e+="."),e="--"+e;var n=[],i=this;return t.forEach((function(t){0===t.indexOf(e)?(-1===t.indexOf("=")&&(t+="=1"),i.parseLine(t.substring(2))):n.push(t)})),n},parseIceCommandLineOptions:function(e){for(var t=e.slice(),i=0;i<n.clPropNames.length;++i)t=this.parseCommandLineOptions(n.clPropNames[i],t);return t},parse:function(e){for(var t,n=e.match(/[^\r\n]+/g);t=n.shift();)this.parseLine(t)},parseLine:function(e){for(var t="",n="",i=0,o="",s="",a=!1,c=0;c<e.length;++c){var l=e.charAt(c);switch(i){case 0:switch(l){case"\\":if(c<e.length-1)switch(l=e.charAt(++c)){case"\\":case"#":case"=":t+=o,o="",t+=l;break;case" ":0!==t.length&&(o+=l);break;default:t+=o,o="",t+="\\",t+=l}else t+=o,t+=l;break;case" ":case"\t":case"\r":case"\n":0!==t.length&&(o+=l);break;case"=":o="",i=1;break;case"#":a=!0;break;default:t+=o,o="",t+=l}break;case 1:switch(l){case"\\":if(c<e.length-1)switch(l=e.charAt(++c)){case"\\":case"#":case"=":n+=0===n.length?s:o,o="",s="",n+=l;break;case" ":o+=l,s+=l;break;default:n+=0===n.length?s:o,o="",s="",n+="\\",n+=l}else n+=0===n.length?s:o,n+=l;break;case" ":case"\t":case"\r":case"\n":0!==n.length&&(o+=l);break;case"#":a=!0;break;default:n+=0===n.length?s:o,o="",s="",n+=l}}if(a)break}n+=s,0===i&&0!==t.length||1==i&&0===t.length?r().warning('invalid config file entry: "'+e+'"'):0!==t.length&&this.setProperty(t,n)},clone:function(){return new s(null,this)},getUnusedProperties:function(){for(var e=[],t=this._properties.entries;null!==t;t=t.next)t.pv.used||e.push(t.key);return e}});s.createProperties=function(e,t){return new s(e,t)},Ice.Properties=s}(),function(){var e=Ice.Debug,t=Ice.HashMap,n=Ice.StringUtil,i=Ice.Class({__init__:function(e,n){this._instance=e,this._adapterName=n,this._servantMapMap=new t(t.compareEquals),this._defaultServantMap=new t,this._locatorMap=new t},addServant:function(i,r,o){e.assert(null!==this._instance),null===o&&(o="");var s=this._servantMapMap.get(r);if(void 0===s)s=new t,this._servantMapMap.set(r,s);else if(s.has(o)){var a=new Ice.AlreadyRegisteredException;throw a.id=this._instance.identityToString(r),a.kindOfObject="servant",o.length>0&&(a.id+=" -f "+n.escapeString(o,"")),a}s.set(o,i)},addDefaultServant:function(t,n){if(e.assert(null!==this._instance),void 0!==this._defaultServantMap.get(n)){var i=new Ice.AlreadyRegisteredException;throw i.kindOfObject="default servant",i.id=n,i}this._defaultServantMap.set(n,t)},removeServant:function(t,i){e.assert(null!==this._instance),null===i&&(i="");var r=this._servantMapMap.get(t);if(void 0===r||!r.has(i)){var o=new Ice.NotRegisteredException;throw o.id=this._instance.identityToString(t),o.kindOfObject="servant",i.length>0&&(o.id+=" -f "+n.escapeString(i,"")),o}var s=r.get(i);return r.del(i),0===r.size&&this._servantMapMap.del(t),s},removeDefaultServant:function(t){e.assert(null!==this._instance);var n=this._defaultServantMap.get(t);if(void 0===n){var i=new Ice.NotRegisteredException;throw i.kindOfObject="default servant",i.id=t,i}return this._defaultServantMap.del(t),n},removeAllFacets:function(t){e.assert(null!==this._instance);var n=this._servantMapMap.get(t);if(void 0===n){var i=new Ice.NotRegisteredException;throw i.id=this._instance.identityToString(t),i.kindOfObject="servant",i}return this._servantMapMap.del(t),n},findServant:function(e,t){null===t&&(t="");var n=this._servantMapMap.get(e),i=null;return void 0===n?void 0===(i=this._defaultServantMap.get(e.category))&&(i=this._defaultServantMap.get("")):i=n.get(t),void 0===i?null:i},findDefaultServant:function(t){e.assert(null!==this._instance);var n=this._defaultServantMap.get(t);return void 0===n?null:n},findAllFacets:function(n){e.assert(null!==this._instance);var i=this._servantMapMap.get(n);return void 0!==i?i.clone():new t},hasServant:function(t){var n=this._servantMapMap.get(t);return void 0!==n&&(e.assert(n.size>0),!0)},addServantLocator:function(t,i){if(e.assert(null!==this._instance),void 0!==this._locatorMap.get(i)){var r=new Ice.AlreadyRegisteredException;throw r.id=n.escapeString(i,""),r.kindOfObject="servant locator",r}this._locatorMap.set(i,t)},removeServantLocator:function(t){e.assert(null!==this._instance);var i=this._locatorMap.get(t);if(void 0===i){var r=new Ice.NotRegisteredException;throw r.id=n.escapeString(t,""),r.kindOfObject="servant locator",r}return this._locatorMap.del(t),i},findServantLocator:function(e){var t=this._locatorMap.get(e);return void 0===t?null:t},destroy:function(){e.assert(null!==this._instance);var t=this._instance.initializationData().logger;this._servantMapMap.clear(),this._defaultServantMap.clear();var n=this._locatorMap.clone();this._locatorMap.clear(),this._instance=null;for(var i=n.entries;null!==i;i=i.next){var r=i.value;try{r.deactivate(i.key)}catch(e){var o="exception during locator deactivation:\nobject adapter: `"+this._adapterName+"'\nlocator category: `"+i.key+"'\n"+e.toString();t.error(o)}}}});Ice.ServantManager=i}(),function(){var e=Ice.__M,t=Ice.Debug,n=Ice.ExUtil,i=Ice.FormatType,r=Ice.HashMap,o=Ice.Object,s=Ice.OptionalFormat,a=Ice.Protocol,c=Ice.TraceUtil,l=Ice.ArrayUtil,d=Ice.SlicedData,u={NoSlice:0,ObjectSlice:1,ExceptionSlice:2};Number.isNaN=Number.isNaN||function(e){return"number"==typeof e&&isNaN(e)};var h=function(e,t){this.index=e,this.patcher=t},f=Ice.Class,_=f({__init__:function(e,t,n,i){this._stream=e,this._encaps=t,this._sliceObjects=n,this._servantFactoryManager=i,this._patchMap=null,this._unmarshaledMap=new r,this._typeIdMap=null,this._typeIdIndex=0,this._objectList=null},readOpt:function(){return!1},readPendingObjects:function(){},readTypeId:function(e){var t,n;if(null===this._typeIdMap&&(this._typeIdMap=new r),e){if(n=this._stream.readSize(),void 0===(t=this._typeIdMap.get(n)))throw new Ice.UnmarshalOutOfBoundsException}else t=this._stream.readString(),this._typeIdMap.set(++this._typeIdIndex,t);return t},newInstance:function(e){var t=this._servantFactoryManager.find(e),n=null;return void 0!==t&&(n=t.create(e)),null==n&&void 0!==(t=this._servantFactoryManager.find(""))&&(n=t.create(e)),null==n&&(n=this._stream.createObject(e)),n},addPatchEntry:function(e,n){t.assert(e>0);var i=this._unmarshaledMap.get(e);if(null==i){null===this._patchMap&&(this._patchMap=new r);var o=this._patchMap.get(e);void 0===o&&(o=[],this._patchMap.set(e,o)),o.push(n)}else n.call(null,i)},unmarshal:function(e,n){var i,r,o;if(this._unmarshaledMap.set(e,n),n.__read(this._stream),null!==this._patchMap&&void 0!==(o=this._patchMap.get(e))){for(t.assert(o.length>0),i=0,r=o.length;i<r;++i)o[i](n);this._patchMap.del(e)}if(null!==this._patchMap&&0!==this._patchMap.size||null!==this._objectList){if(null===this._objectList&&(this._objectList=[]),this._objectList.push(n),null===this._patchMap||0===this._patchMap.size){for(i=0,r=this._objectList.length;i<r;i++)try{this._objectList[i].ice_postUnmarshal()}catch(e){this._stream.instance.initializationData().logger.warning("exception raised by ice_postUnmarshal:\n"+e.toString())}this._objectList=[]}}else try{n.ice_postUnmarshal()}catch(e){this._stream.instance.initializationData().logger.warning("exception raised by ice_postUnmarshal:\n"+e.toString())}}}),p=f(_,{__init__:function(e,t,n,i){_.call(this,e,t,n,i),this._sliceType=u.NoSlice},readObject:function(e){t.assert(null!==e);var n=this._stream.readInt();if(n>0)throw new Ice.MarshalException("invalid object id");0===(n=-n)?e.call(null,null):this.addPatchEntry(n,e)},throwException:function(){t.assert(this._sliceType===u.NoSlice);var e=this._stream.readBool();this._sliceType=u.ExceptionSlice,this._skipFirstSlice=!1,this.startSlice();for(var n=this._typeId;;){var i=this._stream.createUserException(this._typeId);if(null!==i)throw i.__read(this._stream),e&&this.readPendingObjects(),i;this.skipSlice();try{this.startSlice()}catch(e){throw e instanceof Ice.UnmarshalOutOfBoundsException&&(e.reason="unknown exception type `"+n+"'"),e}}},startInstance:function(e){t.assert(this._sliceType===e),this._skipFirstSlice=!0},endInstance:function(){if(this._sliceType===u.ObjectSlice){if(this.startSlice(),0!==this._stream.readSize())throw new Ice.MarshalException("invalid Object slice");this.endSlice()}return this._sliceType=u.NoSlice,null},startSlice:function(){var e;if(this._skipFirstSlice)return this._skipFirstSlice=!1,this._typeId;if(this._sliceType===u.ObjectSlice?(e=this._stream.readBool(),this._typeId=this.readTypeId(e)):this._typeId=this._stream.readString(),this._sliceSize=this._stream.readInt(),this._sliceSize<4)throw new Ice.UnmarshalOutOfBoundsException;return this._typeId},endSlice:function(){},skipSlice:function(){if(this._stream.instance.traceLevels().slicing>0){var e=this._stream.instance.initializationData().logger;this._sliceType===u.ObjectSlice?c.traceSlicing("object",this._typeId,this._stream.instance.traceLevels().slicingCat,e):c.traceSlicing("exception",this._typeId,this._stream.instance.traceLevels().slicingCat,e)}t.assert(this._sliceSize>=4),this._stream.skip(this._sliceSize-4)},readPendingObjects:function(){var e,t;do{for(e=t=this._stream.readSize();e>0;--e)this.readInstance()}while(t>0);if(null!==this._patchMap&&0!==this._patchMap.size)throw new Ice.MarshalException("index for class received, but no instance")},readInstance:function(){var e,t=this._stream.readInt(),n=null;if(t<=0)throw new Ice.MarshalException("invalid object id");for(this._sliceType=u.ObjectSlice,this._skipFirstSlice=!1,this.startSlice(),e=this._typeId;;){if(this._typeId==o.ice_staticId())throw new Ice.NoObjectFactoryException("",e);if(n=this.newInstance(this._typeId))break;if(!this._sliceObjects)throw new Ice.NoObjectFactoryException("no object factory found and object slicing is disabled",this._typeId);this.skipSlice(),this.startSlice()}this.unmarshal(t,n)}}),C=f(_,{__init__:function(e,t,n,i){_.call(this,e,t,n,i),this._current=null,this._objectIdIndex=1},readObject:function(e){t.assert(void 0!==e);var n=this._stream.readSize();if(n<0)throw new Ice.MarshalException("invalid object id");if(0===n)null!==e&&e.call(null,null);else if(null!==this._current&&0!=(8&this._current.sliceFlags)){if(null!==e){null===this._current.indirectPatchList&&(this._current.indirectPatchList=[]);var i=new h;i.index=n-1,i.patcher=e,this._current.indirectPatchList.push(i)}}else this.readInstance(n,e)},throwException:function(){t.assert(null===this._current),this.push(u.ExceptionSlice),this.startSlice();for(var e=this._current.typeId;;){var n=this._stream.createUserException(this._current.typeId);if(null!==n)throw n.__read(this._stream),n;if(this.skipSlice(),0!=(32&this._current.sliceFlags)){if(0===e.indexOf("::"))throw new Ice.UnknownUserException(e.substr(2));throw new Ice.UnknownUserException(e)}this.startSlice()}},startInstance:function(e){t.assert(void 0!==e),t.assert(null!==this._current.sliceType&&this._current.sliceType===e),this._current.skipFirstSlice=!0},endInstance:function(e){var t=null;return e&&(t=this.readSlicedData()),null!==this._current.slices&&(this._current.slices.length=0,this._current.indirectionTables.length=0),this._current=this._current.previous,t},startSlice:function(){if(this._current.skipFirstSlice)return this._current.skipFirstSlice=!1,this._current.typeId;if(this._current.sliceFlags=this._stream.readByte(),this._current.sliceType===u.ObjectSlice?3==(3&this._current.sliceFlags)?(this._current.typeId="",this._current.compactId=this._stream.readSize()):0!=(3&this._current.sliceFlags)?(this._current.typeId=this.readTypeId(0!=(2&this._current.sliceFlags)),this._current.compactId=-1):(this._current.typeId="",this._current.compactId=-1):(this._current.typeId=this._stream.readString(),this._current.compactId=-1),0!=(16&this._current.sliceFlags)){if(this._current.sliceSize=this._stream.readInt(),this._current.sliceSize<4)throw new Ice.UnmarshalOutOfBoundsException}else this._current.sliceSize=0;return this._current.typeId},endSlice:function(){var e,n,i,r=[];if(0!=(4&this._current.sliceFlags)&&this._stream.skipOpts(),0!=(8&this._current.sliceFlags)){for(i=this._stream.readAndCheckSeqSize(1),n=0;n<i;++n)r[n]=this.readInstance(this._stream.readSize(),null);if(0===r.length)throw new Ice.MarshalException("empty indirection table");if((null===this._current.indirectPatchList||0===this._current.indirectPatchList.length)&&0==(4&this._current.sliceFlags))throw new Ice.MarshalException("no references to indirection table");if(null!==this._current.indirectPatchList){for(n=0,i=this._current.indirectPatchList.length;n<i;++n){if(e=this._current.indirectPatchList[n],t.assert(e.index>=0),e.index>=r.length)throw new Ice.MarshalException("indirection out of range");this.addPatchEntry(r[e.index],e.patcher)}this._current.indirectPatchList.length=0}}},skipSlice:function(){if(this._stream.instance.traceLevels().slicing>0){var e=this._stream.instance.initializationData().logger,n=this._stream.instance.traceLevels().slicingCat;this._current.sliceType===u.ExceptionSlice?c.traceSlicing("exception",this._current.typeId,n,e):c.traceSlicing("object",this._current.typeId,n,e)}var i=this._stream.pos;if(0==(16&this._current.sliceFlags)){if(this._current.sliceType===u.ObjectSlice)throw new Ice.NoObjectFactoryException("no object factory found and compact format prevents slicing (the sender should use the sliced format instead)",this._current.typeId);if(0===this._current.typeId.indexOf("::"))throw new Ice.UnknownUserException(this._current.typeId.substring(2));throw new Ice.UnknownUserException(this._current.typeId)}t.assert(this._current.sliceSize>=4),this._stream.skip(this._current.sliceSize-4);var r=new Ice.SliceInfo;r.typeId=this._current.typeId,r.compactId=this._current.compactId,r.hasOptionalMembers=0!=(4&this._current.sliceFlags),r.isLastSlice=0!=(32&this._current.sliceFlags);var o=this._stream._buf,s=o.position,a=s;if(r.hasOptionalMembers&&--a,o.position=i,r.bytes=o.getArray(a-i),o.position=s,null===this._current.slices&&(this._current.slices=[],this._current.indirectionTables=[]),0!=(8&this._current.sliceFlags)){for(var l=this._stream.readAndCheckSeqSize(1),d=[],h=0;h<l;++h)d[h]=this.readInstance(this._stream.readSize(),null);this._current.indirectionTables.push(d)}else this._current.indirectionTables.push(null);this._current.slices.push(r)},readOpt:function(e,t){return(null===this._current||0!=(4&this._current.sliceFlags))&&this._stream.readOptImpl(e,t)},readInstance:function(e,n){t.assert(e>0);var i,r=null;if(e>1)return null!==n&&this.addPatchEntry(e,n),e;for(this.push(u.ObjectSlice),e=++this._objectIdIndex,this.startSlice(),i=this._current.typeId;this._current.compactId>=0&&(this._current.typeId="",0===this._current.typeId.length&&(this._current.typeId=this._stream.getTypeId(this._current.compactId))),!(this._current.typeId.length>0&&null!=(r=this.newInstance(this._current.typeId)));){if(!this._sliceObjects)throw new Ice.NoObjectFactoryException("no object factory found and object slicing is disabled",this._current.typeId);if(this.skipSlice(),0!=(32&this._current.sliceFlags)){r=new Ice.UnknownSlicedObject(i);break}this.startSlice()}if(this.unmarshal(e,r),null===this._current&&null!==this._patchMap&&0!==this._patchMap.size)throw new Ice.MarshalException("index for class received, but no instance");return null!==n&&n.call(null,r),e},readSlicedData:function(){var e,n,i,r,s,a;if(null===this._current.slices)return null;for(t.assert(this._current.slices.length===this._current.indirectionTables.length),e=0,n=this._current.slices.length;e<n;++e)for(i=this._current.indirectionTables[e],(r=this._current.slices[e]).objects=[],a=i?i.length:0,s=0;s<a;++s)this.addPatchEntry(i[s],g(r.objects,s,o));return new d(l.clone(this._current.slices))},push:function(e){null===this._current?this._current=new C.InstanceData(null):this._current=this._current.next?this._current.next:new C.InstanceData(this._current),this._current.sliceType=e,this._current.skipFirstSlice=!1}});C.InstanceData=function(e){null!==e&&(e.next=this),this.previous=e,this.next=null,this.sliceType=null,this.skipFirstSlice=!1,this.slices=null,this.indirectionTables=null,this.sliceFlags=0,this.sliceSize=0,this.typeId=null,this.compactId=0,this.indirectPatchList=null};var g=function(e,t,i){return function(r){null===r||r instanceof i||n.throwUOE(i.ice_staticId(),r),e[t]=r}},m=f({__init__:function(e,t){this._stream=e,this._encaps=t,this._marshaledMap=new r,this._typeIdMap=null,this._typeIdIndex=0},writeOpt:function(){return!1},writePendingObjects:function(){},registerTypeId:function(e){null===this._typeIdMap&&(this._typeIdMap=new r);var t=this._typeIdMap.get(e);return void 0!==t?t:(this._typeIdMap.set(e,++this._typeIdIndex),-1)}}),I=f(m,{__init__:function(e,t){m.call(this,e,t),this._sliceType=u.NoSlice,this._writeSlice=0,this._objectIdIndex=0,this._toBeMarshaledMap=new r},writeObject:function(e){t.assert(void 0!==e),null!==e?this._stream.writeInt(-this.registerObject(e)):this._stream.writeInt(0)},writeUserException:function(e){t.assert(null!=e);var n=e.__usesClasses();this._stream.writeBool(n),e.__write(this._stream),n&&this.writePendingObjects()},startInstance:function(e){this._sliceType=e},endInstance:function(){this._sliceType===u.ObjectSlice&&(this.startSlice(o.ice_staticId(),-1,!0),this._stream.writeSize(0),this.endSlice()),this._sliceType=u.NoSlice},startSlice:function(e){if(this._sliceType===u.ObjectSlice){var t=this.registerTypeId(e);t<0?(this._stream.writeBool(!1),this._stream.writeString(e)):(this._stream.writeBool(!0),this._stream.writeSize(t))}else this._stream.writeString(e);this._stream.writeInt(0),this._writeSlice=this._stream.pos},endSlice:function(){var e=this._stream.pos-this._writeSlice+4;this._stream.rewriteInt(e,this._writeSlice-4)},writePendingObjects:function(){for(var e,t=this,n=function(e,n){t._stream.writeInt(n);try{e.ice_preMarshal()}catch(e){t._stream.instance.initializationData().logger.warning("exception raised by ice_preMarshal:\n"+e.toString())}e.__write(t._stream)};this._toBeMarshaledMap.size>0;)this._marshaledMap.merge(this._toBeMarshaledMap),e=this._toBeMarshaledMap,this._toBeMarshaledMap=new r,this._stream.writeSize(e.size),e.forEach(n);this._stream.writeSize(0)},registerObject:function(e){t.assert(null!==e);var n=this._toBeMarshaledMap.get(e);return void 0!==n||void 0!==(n=this._marshaledMap.get(e))?n:(this._toBeMarshaledMap.set(e,++this._objectIdIndex),this._objectIdIndex)}}),R=f(m,{__init__:function(e,t){m.call(this,e,t),this._current=null,this._objectIdIndex=1},writeObject:function(e){var n,o;t.assert(void 0!==e),null===e?this._stream.writeSize(0):null!==this._current&&this._encaps.format===i.SlicedFormat?(null===this._current.indirectionTable&&(this._current.indirectionTable=[],this._current.indirectionMap=new r),void 0===(n=this._current.indirectionMap.get(e))?(this._current.indirectionTable.push(e),o=this._current.indirectionTable.length,this._current.indirectionMap.set(e,o),this._stream.writeSize(o)):this._stream.writeSize(n)):this.writeInstance(e)},writePendingObjects:function(){},writeUserException:function(e){t.assert(null!=e),e.__write(this._stream)},startInstance:function(e,t){null===this._current?this._current=new R.InstanceData(null):this._current=null===this._current.next?new R.InstanceData(this._current):this._current.next,this._current.sliceType=e,this._current.firstSlice=!0,null!=t&&this.writeSlicedData(t)},endInstance:function(){this._current=this._current.previous},startSlice:function(e,n,r){if(t.assert(!(null!==this._current.indirectionTable&&0!==this._current.indirectionTable.length||null!==this._current.indirectionMap&&0!==this._current.indirectionMap.size)),this._current.sliceFlagsPos=this._stream.pos,this._current.sliceFlags=0,this._encaps.format===i.SlicedFormat&&(this._current.sliceFlags|=16),r&&(this._current.sliceFlags|=32),this._stream.writeByte(0),this._current.sliceType===u.ObjectSlice){if(this._encaps.format===i.SlicedFormat||this._current.firstSlice)if(n>=0)this._current.sliceFlags|=3,this._stream.writeSize(n);else{var o=this.registerTypeId(e);o<0?(this._current.sliceFlags|=1,this._stream.writeString(e)):(this._current.sliceFlags|=2,this._stream.writeSize(o))}}else this._stream.writeString(e);0!=(16&this._current.sliceFlags)&&this._stream.writeInt(0),this._current.writeSlice=this._stream.pos,this._current.firstSlice=!1},endSlice:function(){var e,n,r;if(0!=(4&this._current.sliceFlags)&&this._stream.writeByte(255),0!=(16&this._current.sliceFlags)&&(e=this._stream.pos-this._current.writeSlice+4,this._stream.rewriteInt(e,this._current.writeSlice-4)),null!==this._current.indirectionTable&&0!==this._current.indirectionTable.length){for(t.assert(this._encaps.format===i.SlicedFormat),this._current.sliceFlags|=8,this._stream.writeSize(this._current.indirectionTable.length),n=0,r=this._current.indirectionTable.length;n<r;++n)this.writeInstance(this._current.indirectionTable[n]);this._current.indirectionTable.length=0,this._current.indirectionMap.clear()}this._stream.rewriteByte(this._current.sliceFlags,this._current.sliceFlagsPos)},writeOpt:function(e,t){return null===this._current?this._stream.writeOptImpl(e,t):!!this._stream.writeOptImpl(e,t)&&(this._current.sliceFlags|=4,!0)},writeSlicedData:function(e){var n,o,s,a,c;if(t.assert(null!=e),this._encaps.format===i.SlicedFormat)for(n=0,o=e.slices.length;n<o;++n){if(s=e.slices[n],this.startSlice(s.typeId,s.compactId,s.isLastSlice),this._stream.writeBlob(s.bytes),s.hasOptionalMembers&&(this._current.sliceFlags|=4),null!==s.objects&&s.objects.length>0)for(null===this._current.indirectionTable&&(this._current.indirectionTable=[],this._current.indirectionMap=new r),a=0,c=s.objects.length;a<c;++a)this._current.indirectionTable.push(s.objects[a]);this.endSlice()}},writeInstance:function(e){t.assert(null!=e);var n=this._marshaledMap.get(e);if(void 0===n){this._marshaledMap.set(e,++this._objectIdIndex);try{e.ice_preMarshal()}catch(e){this._stream.instance.initializationData().logger.warning("exception raised by ice_preMarshal:\n"+e.toString())}this._stream.writeSize(1),e.__write(this._stream)}else this._stream.writeSize(n)}});R.InstanceData=function(e){t.assert(void 0!==e),null!==e&&(e.next=this),this.previous=e,this.next=null,this.sliceType=null,this.firstSlice=!1,this.sliceFlags=0,this.writeSlice=0,this.sliceFlagsPos=0,this.indirectionTable=null,this.indirectionMap=null};var y=f({__init__:function(){this.start=0,this.sz=0,this.encoding=null,this.encoding_1_0=!1,this.decoder=null,this.next=null},reset:function(){this.decoder=null},setEncoding:function(e){this.encoding=e,this.encoding_1_0=e.equals(Ice.Encoding_1_0)}}),S=f({__init__:function(){this.start=0,this.format=i.DefaultFormat,this.encoding=null,this.encoding_1_0=!1,this.encoder=null,this.next=null},reset:function(){this.encoder=null},setEncoding:function(e){this.encoding=e,this.encoding_1_0=e.equals(Ice.Encoding_1_0)}}),v=f({__init__:function(e,t,n){this._instance=e,this._closure=null,this._encoding=t,this._readEncapsStack=null,this._writeEncapsStack=null,this._readEncapsCache=null,this._writeEncapsCache=null,this._sliceObjects=!0,this._startSeq=-1,this._sizePos=-1,this._buf=void 0!==n?new Ice.Buffer(n):new Ice.Buffer},reset:function(){this._buf.reset(),this.clear()},clear:function(){null!==this._readEncapsStack&&(t.assert(this._readEncapsStack.next),this._readEncapsStack.next=this._readEncapsCache,this._readEncapsCache=this._readEncapsStack,this._readEncapsCache.reset(),this._readEncapsStack=null),null!==this._writeEncapsStack&&(t.assert(this._writeEncapsStack.next),this._writeEncapsStack.next=this._writeEncapsCache,this._writeEncapsCache=this._writeEncapsStack,this._writeEncapsCache.reset(),this._writeEncapsStack=null),this._startSeq=-1,this._sliceObjects=!0},swap:function(e){var n,i,r,o,s;t.assert(this._instance===e._instance),n=e._buf,e._buf=this._buf,this._buf=n,i=e._closure,e._closure=this._closure,this._closure=i,this.resetEncaps(),e.resetEncaps(),r=e._startSeq,e._startSeq=this._startSeq,this._startSeq=r,o=e._minSeqSize,e._minSeqSize=this._minSeqSize,this._minSeqSize=o,s=e._sizePos,e._sizePos=this._sizePos,this._sizePos=s},resetEncaps:function(){this._readEncapsStack=null,this._writeEncapsStack=null},resize:function(e){this._buf.resize(e),this._buf.position=e},prepareWrite:function(){return this._buf.position=0,this._buf},startWriteObject:function(e){t.assert(null!==this._writeEncapsStack&&null!==this._writeEncapsStack.encoder),this._writeEncapsStack.encoder.startInstance(u.ObjectSlice,e)},endWriteObject:function(){t.assert(null!==this._writeEncapsStack&&null!==this._writeEncapsStack.encoder),this._writeEncapsStack.encoder.endInstance()},startReadObject:function(){t.assert(null!==this._readEncapsStack&&null!==this._readEncapsStack.decoder),this._readEncapsStack.decoder.startInstance(u.ObjectSlice)},endReadObject:function(e){return t.assert(null!==this._readEncapsStack&&null!==this._readEncapsStack.decoder),this._readEncapsStack.decoder.endInstance(e)},startWriteException:function(e){t.assert(null!==this._writeEncapsStack&&null!==this._writeEncapsStack.encoder),this._writeEncapsStack.encoder.startInstance(u.ExceptionSlice,e)},endWriteException:function(){t.assert(null!==this._writeEncapsStack&&null!==this._writeEncapsStack.encoder),this._writeEncapsStack.encoder.endInstance()},startReadException:function(){t.assert(null!==this._readEncapsStack&&null!==this._readEncapsStack.decoder),this._readEncapsStack.decoder.startInstance(u.ExceptionSlice)},endReadException:function(e){return t.assert(null!==this._readEncapsStack&&null!==this._readEncapsStack.decoder),this._readEncapsStack.decoder.endInstance(e)},startWriteEncaps:function(e,t){void 0===e&&(null!==this._writeEncapsStack?(e=this._writeEncapsStack.encoding,t=this._writeEncapsStack.format):(e=this._encoding,t=i.DefaultFormat)),a.checkSupportedEncoding(e);var n=this._writeEncapsCache;null!==n?(n.reset(),this._writeEncapsCache=this._writeEncapsCache.next):n=new S,n.next=this._writeEncapsStack,this._writeEncapsStack=n,this._writeEncapsStack.format=t,this._writeEncapsStack.setEncoding(e),this._writeEncapsStack.start=this._buf.limit,this.writeInt(0),this._writeEncapsStack.encoding.__write(this)},endWriteEncaps:function(){t.assert(this._writeEncapsStack);var e=this._writeEncapsStack.start,n=this._buf.limit-e;this._buf.putIntAt(e,n);var i=this._writeEncapsStack;this._writeEncapsStack=i.next,i.next=this._writeEncapsCache,this._writeEncapsCache=i,this._writeEncapsCache.reset()},endWriteEncapsChecked:function(){if(null===this._writeEncapsStack)throw new Ice.EncapsulationException("not in an encapsulation");this.endWriteEncaps()},writeEmptyEncaps:function(e){a.checkSupportedEncoding(e),this.writeInt(6),e.__write(this)},writeEncaps:function(e){if(e.length<6)throw new Ice.EncapsulationException;this.expand(e.length),this._buf.putArray(e)},getWriteEncoding:function(){return null!==this._writeEncapsStack?this._writeEncapsStack.encoding:this._encoding},startReadEncaps:function(){var e=this._readEncapsCache;null!==e?(e.reset(),this._readEncapsCache=this._readEncapsCache.next):e=new y,e.next=this._readEncapsStack,this._readEncapsStack=e,this._readEncapsStack.start=this._buf.position;var t=this.readInt();if(t<6)throw new Ice.UnmarshalOutOfBoundsException;if(t-4>this._buf.remaining)throw new Ice.UnmarshalOutOfBoundsException;this._readEncapsStack.sz=t;var n=new Ice.EncodingVersion;return n.__read(this),a.checkSupportedEncoding(n),this._readEncapsStack.setEncoding(n),n},endReadEncaps:function(){if(t.assert(null!==this._readEncapsStack),this._readEncapsStack.encoding_1_0){if(this._buf.position!==this._readEncapsStack.start+this._readEncapsStack.sz){if(this._buf.position+1!==this._readEncapsStack.start+this._readEncapsStack.sz)throw new Ice.EncapsulationException;try{this._buf.get()}catch(e){throw new Ice.UnmarshalOutOfBoundsException}}}else if(this.skipOpts(),this._buf.position!==this._readEncapsStack.start+this._readEncapsStack.sz)throw new Ice.EncapsulationException;var e=this._readEncapsStack;this._readEncapsStack=e.next,e.next=this._readEncapsCache,this._readEncapsCache=e,this._readEncapsCache.reset()},skipEmptyEncaps:function(e){if(t.assert(void 0!==e),6!==this.readInt())throw new Ice.EncapsulationException;var n=this._buf.position;if(n+2>this._buf.limit)throw new Ice.UnmarshalOutOfBoundsException;null!==e?e.__read(this):this._buf.position=n+2},endReadEncapsChecked:function(){if(null===this._readEncapsStack)throw new Ice.EncapsulationException("not in an encapsulation");this.endReadEncaps()},readEncaps:function(e){t.assert(void 0!==e);var n=this.readInt();if(n<6)throw new Ice.UnmarshalOutOfBoundsException;if(n-4>this._buf.remaining)throw new Ice.UnmarshalOutOfBoundsException;null!==e?(e.__read(this),this._buf.position=this._buf.position-6):this._buf.position=this._buf.position-4;try{return this._buf.getArray(n)}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},getReadEncoding:function(){return null!==this._readEncapsStack?this._readEncapsStack.encoding:this._encoding},getReadEncapsSize:function(){return t.assert(null!==this._readEncapsStack),this._readEncapsStack.sz-6},skipEncaps:function(){var e=this.readInt();if(e<6)throw new Ice.UnmarshalOutOfBoundsException;var t=new Ice.EncodingVersion;t.__read(this);try{this._buf.position=this._buf.position+e-6}catch(e){throw new Ice.UnmarshalOutOfBoundsException}return t},startWriteSlice:function(e,n,i){t.assert(null!==this._writeEncapsStack&&null!==this._writeEncapsStack.encoder),this._writeEncapsStack.encoder.startSlice(e,n,i)},endWriteSlice:function(){t.assert(null!==this._writeEncapsStack&&null!==this._writeEncapsStack.encoder),this._writeEncapsStack.encoder.endSlice()},startReadSlice:function(){return t.assert(null!==this._readEncapsStack&&null!==this._readEncapsStack.decoder),this._readEncapsStack.decoder.startSlice()},endReadSlice:function(){t.assert(null!==this._readEncapsStack&&null!==this._readEncapsStack.decoder),this._readEncapsStack.decoder.endSlice()},skipSlice:function(){t.assert(null!==this._readEncapsStack&&null!==this._readEncapsStack.decoder),this._readEncapsStack.decoder.skipSlice()},readPendingObjects:function(){null!==this._readEncapsStack&&null!==this._readEncapsStack.decoder?this._readEncapsStack.decoder.readPendingObjects():(null!==this._readEncapsStack&&this._readEncapsStack.encoding_1_0||null===this._readEncapsStack&&this._encoding.equals(Ice.Encoding_1_0))&&this.skipSize()},writePendingObjects:function(){null!==this._writeEncapsStack&&null!==this._writeEncapsStack.encoder?this._writeEncapsStack.encoder.writePendingObjects():(null!==this._writeEncapsStack&&this._writeEncapsStack.encoding_1_0||null===this._writeEncapsStack&&this._encoding.equals(Ice.Encoding_1_0))&&this.writeSize(0)},writeSize:function(e){e>254?(this.expand(5),this._buf.put(255),this._buf.putInt(e)):(this.expand(1),this._buf.put(e))},readSize:function(){try{var e=this._buf.get();if(255===e){var t=this._buf.getInt();if(t<0)throw new Ice.UnmarshalOutOfBoundsException;return t}return e}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},readAndCheckSeqSize:function(e){var t=this.readSize();if(0===t)return t;if(-1===this._startSeq||this._buf.position>this._startSeq+this._minSeqSize?(this._startSeq=this._buf.position,this._minSeqSize=t*e):this._minSeqSize+=t*e,this._startSeq+this._minSeqSize>this._buf.limit)throw new Ice.UnmarshalOutOfBoundsException;return t},startSize:function(){var e=this._buf.position;return this.writeInt(0),e},endSize:function(e){t.assert(e>=0),this.rewriteInt(this._buf.position-e-4,e)},writeBlob:function(e){null!==e&&(this.expand(e.length),this._buf.putArray(e))},readBlob:function(e){if(this._buf.remaining<e)throw new Ice.UnmarshalOutOfBoundsException;try{return this._buf.getArray(e)}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},writeOpt:function(e,n){return t.assert(null!==this._writeEncapsStack),null!==this._writeEncapsStack.encoder?this._writeEncapsStack.encoder.writeOpt(e,n):this.writeOptImpl(e,n)},readOpt:function(e,n){return t.assert(null!==this._readEncapsStack),null!==this._readEncapsStack.decoder?this._readEncapsStack.decoder.readOpt(e,n):this.readOptImpl(e,n)},writeOptValue:function(e,t,n,i){void 0!==i&&this.writeOpt(e,t)&&n.call(this,i)},readOptValue:function(e,t,n){return this.readOpt(e,t)?n.call(this):void 0},writeByte:function(e){this.expand(1),this._buf.put(e)},rewriteByte:function(e,t){this._buf.putAt(t,e)},readByte:function(){try{return this._buf.get()}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},writeByteSeq:function(e){null===e||0===e.length?this.writeSize(0):(this.writeSize(e.length),this.expand(e.length),this._buf.putArray(e))},readByteSeq:function(){return this._buf.getArray(this.readAndCheckSeqSize(1))},writeBool:function(e){this.expand(1),this._buf.put(e?1:0)},rewriteBool:function(e,t){this._buf.putAt(t,e?1:0)},readBool:function(){try{return 1===this._buf.get()}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},writeShort:function(e){this.expand(2),this._buf.putShort(e)},readShort:function(){try{return this._buf.getShort()}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},writeInt:function(e){this.expand(4),this._buf.putInt(e)},rewriteInt:function(e,t){this._buf.putIntAt(t,e)},readInt:function(){try{return this._buf.getInt()}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},writeLong:function(e){this.expand(8),this._buf.putLong(e)},readLong:function(){try{return this._buf.getLong()}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},writeFloat:function(e){this.expand(4),this._buf.putFloat(e)},readFloat:function(){try{return this._buf.getFloat()}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},writeDouble:function(e){this.expand(8),this._buf.putDouble(e)},readDouble:function(){try{return this._buf.getDouble()}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},writeString:function(e){null==e||0===e.length?this.writeSize(0):this._buf.writeString(this,e)},readString:function(){var e=this.readSize();if(0===e)return"";if(this._buf.remaining<e)throw new Ice.UnmarshalOutOfBoundsException;try{return this._buf.getString(e)}catch(e){throw new Ice.UnmarshalOutOfBoundsException}},writeProxy:function(e){this._instance.proxyFactory().proxyToStream(e,this)},writeOptProxy:function(e,t){if(void 0!==t&&this.writeOpt(e,s.FSize)){var n=this.startSize();this.writeProxy(t),this.endSize(n)}},readProxy:function(e){return this._instance.proxyFactory().streamToProxy(this,e)},readOptProxy:function(e,t){return this.readOpt(e,s.FSize)?(this.skip(4),this.readProxy(t)):void 0},writeEnum:function(e){this.isWriteEncoding_1_0()?e.maxValue<127?this.writeByte(e.value):e.maxValue<32767?this.writeShort(e.value):this.writeInt(e.value):this.writeSize(e.value)},readEnum:function(e){var t;t=this.getReadEncoding().equals(Ice.Encoding_1_0)?e.maxValue<127?this.readByte():e.maxValue<32767?this.readShort():this.readInt():this.readSize();var n=e.valueOf(t);if(void 0===n)throw new Ice.MarshalException("enumerator value "+t+" is out of range");return n},readOptEnum:function(e,t){return this.readOpt(e,s.Size)?this.readEnum(t):void 0},writeObject:function(e){this.initWriteEncaps(),this._writeEncapsStack.encoder.writeObject(e)},writeOptObject:function(e,t){void 0!==t&&this.writeOpt(e,s.Class)&&this.writeObject(t)},readObject:function(e,t){this.initReadEncaps(),this._readEncapsStack.decoder.readObject.call(this._readEncapsStack.decoder,(function(i){null===i||i.ice_instanceof(t)||n.throwUOE(t.ice_staticId(),i),e(i)}))},readOptObject:function(e,t,n){this.readOpt(e,s.Class)?this.readObject(t,n):t(void 0)},writeUserException:function(e){this.initWriteEncaps(),this._writeEncapsStack.encoder.writeUserException(e)},throwException:function(){this.initReadEncaps(),this._readEncapsStack.decoder.throwException()},sliceObjects:function(e){this._sliceObjects=e},readOptImpl:function(e,t){var n,i,r,o;if(this.isReadEncoding_1_0())return!1;for(;;){if(this._buf.position>=this._readEncapsStack.start+this._readEncapsStack.sz)return!1;if(255===(n=this.readByte()))return this._buf.position-=1,!1;if(i=s.valueOf(7&n),30===(r=n>>3)&&(r=this.readSize()),r>e)return o=r<30?1:r<255?2:6,this._buf.position-=o,!1;if(!(r<e)){if(i!==t)throw new Ice.MarshalException("invalid optional data member `"+r+"': unexpected format");return!0}this.skipOpt(i)}},writeOptImpl:function(e,t){if(this.isWriteEncoding_1_0())return!1;var n=t.value;return e<30?(n|=e<<3,this.writeByte(n)):(n|=240,this.writeByte(n),this.writeSize(e)),!0},skipOpt:function(e){switch(e){case s.F1:this.skip(1);break;case s.F2:this.skip(2);break;case s.F4:this.skip(4);break;case s.F8:this.skip(8);break;case s.Size:this.skipSize();break;case s.VSize:this.skip(this.readSize());break;case s.FSize:this.skip(this.readInt());break;case s.Class:this.readObject(null,Ice.Object)}},skipOpts:function(){for(var e,t,n;;){if(this._buf.position>=this._readEncapsStack.start+this._readEncapsStack.sz)return;if(255===(t=(e=this.readByte())<0?e+256:e))return;n=s.valueOf(7&t),t>>3==30&&this.skipSize(),this.skipOpt(n)}},skip:function(e){if(e>this._buf.remaining)throw new Ice.UnmarshalOutOfBoundsException;this._buf.position+=e},skipSize:function(){255===this.readByte()&&this.skip(4)},isEmpty:function(){return this._buf.empty()},expand:function(e){this._buf.expand(e)},createObject:function(t){var n,i=null;try{var r=t.length>2?t.substr(2).replace(/::/g,"."):"";void 0!==(n=e.type(r))&&(i=new n)}catch(e){throw new Ice.NoObjectFactoryException("no object factory",t,e)}return i},getTypeId:function(e){var t=Ice.CompactIdRegistry.get(e);return void 0===t?"":t},isReadEncoding_1_0:function(){return null!==this._readEncapsStack?this._readEncapsStack.encoding_1_0:this._encoding.equals(Ice.Encoding_1_0)},isWriteEncoding_1_0:function(){return this._writeEncapsStack?this._writeEncapsStack.encoding_1_0:this._encoding.equals(Ice.Encoding_1_0)},initReadEncaps:function(){if(null===this._readEncapsStack&&(this._readEncapsStack=this._readEncapsCache,null!==this._readEncapsStack?this._readEncapsCache=this._readEncapsCache.next:this._readEncapsStack=new y,this._readEncapsStack.setEncoding(this._encoding),this._readEncapsStack.sz=this._buf.limit),null===this._readEncapsStack.decoder){var e=this._instance.servantFactoryManager();this._readEncapsStack.encoding_1_0?this._readEncapsStack.decoder=new p(this,this._readEncapsStack,this._sliceObjects,e):this._readEncapsStack.decoder=new C(this,this._readEncapsStack,this._sliceObjects,e)}},initWriteEncaps:function(){this._writeEncapsStack||(this._writeEncapsStack=this._writeEncapsCache,this._writeEncapsStack?this._writeEncapsCache=this._writeEncapsCache.next:this._writeEncapsStack=new S,this._writeEncapsStack.setEncoding(this._encoding)),this._writeEncapsStack.format===i.DefaultFormat&&(this._writeEncapsStack.format=this._instance.defaultsAndOverrides().defaultFormat),this._writeEncapsStack.encoder||(this._writeEncapsStack.encoding_1_0?this._writeEncapsStack.encoder=new I(this,this._writeEncapsStack):this._writeEncapsStack.encoder=new R(this,this._writeEncapsStack))},createUserException:function(t){var n,i=null;try{var r=t.length>2?t.substr(2).replace(/::/g,"."):"";void 0!==(n=e.type(r))&&(i=new n)}catch(e){throw new Ice.MarshalException(e)}return i}}),E=Object.defineProperty;E(v.prototype,"pos",{get:function(){return this._buf.position},set:function(e){this._buf.position=e}}),E(v.prototype,"size",{get:function(){return this._buf.limit}}),E(v.prototype,"instance",{get:function(){return this._instance}}),E(v.prototype,"closure",{get:function(){return this._type},set:function(e){this._type=e}}),E(v.prototype,"buffer",{get:function(){return this._buf}});var w=function(e,t,n,i,r,o){var s={write:function(t,n){return e.call(t,n)},read:function(e){return t.call(e)},writeOpt:function(t,n,r){t.writeOptValue(n,i,e,r)},readOpt:function(e,n){return e.readOptValue(n,i,t)}};return void 0!==r&&void 0!==o&&(s.validate=function(e){return e>=r&&e<=o}),E(s,"minWireSize",{get:function(){return n}}),s},b=v.prototype,D=4294967295,M=-34028234664e28,T=34028234664e28;Ice.ByteHelper=w(b.writeByte,b.readByte,1,Ice.OptionalFormat.F1,0,255),Ice.ShortHelper=w(b.writeShort,b.readShort,2,Ice.OptionalFormat.F2,-32768,32767),Ice.IntHelper=w(b.writeInt,b.readInt,4,Ice.OptionalFormat.F4,-2147483648,2147483647),Ice.FloatHelper=w(b.writeFloat,b.readFloat,4,Ice.OptionalFormat.F4,M,T),Ice.FloatHelper.validate=function(e){return Number.isNaN(e)||e==Number.POSITIVE_INFINITY||e==Number.NEGATIVE_INFINITY||e>=M&&e<=T},Ice.DoubleHelper=w(b.writeDouble,b.readDouble,8,Ice.OptionalFormat.F8,-Number.MAX_VALUE,Number.MAX_VALUE),Ice.DoubleHelper.validate=function(e){return Number.isNaN(e)||e==Number.POSITIVE_INFINITY||e==Number.NEGATIVE_INFINITY||e>=-Number.MAX_VALUE&&e<=Number.MAX_VALUE},Ice.BoolHelper=w(b.writeBool,b.readBool,1,Ice.OptionalFormat.F1),Ice.LongHelper=w(b.writeLong,b.readLong,8,Ice.OptionalFormat.F8),Ice.LongHelper.validate=function(e){return e.low>=0&&e.low<=D&&e.high>=0&&e.high<=D},Ice.StringHelper=w(b.writeString,b.readString,1,Ice.OptionalFormat.VSize),Ice.ObjectHelper={write:function(e,t){e.writeObject(t)},read:function(e){var t;return e.readObject((function(e){t=e}),Ice.Object),t},writeOpt:function(e,t,n){e.writeOptValue(t,Ice.OptionalFormat.Class,b.writeObject,n)},readOpt:function(e,t){var n;return e.readOptObject(t,(function(e){n=e}),Ice.Object),n}},E(Ice.ObjectHelper,"minWireSize",{get:function(){return 1}}),Ice.BasicStream=v}(),Ice.SocketOperation={None:0,Read:1,Write:2,Connect:2},I=Ice.Class({__init__:function(e,t,n,i){this._instance=e,this._traceLevel=e.traceLevels().network,this._traceCategory=e.traceLevels().networkCat,this._logger=e.initializationData().logger,this._properties=e.initializationData().properties,this._type=t,this._protocol=n,this._secure=i},traceLevel:function(){return this._traceLevel},traceCategory:function(){return this._traceCategory},logger:function(){return this._logger},protocol:function(){return this._protocol},type:function(){return this._type},secure:function(){return this._secure},properties:function(){return this._properties},defaultHost:function(){return this._instance.defaultsAndOverrides().defaultHost},defaultSourceAddress:function(){return this._instance.defaultsAndOverrides().defaultSourceAddress},defaultEncoding:function(){return this._instance.defaultsAndOverrides().defaultEncoding},defaultTimeout:function(){return this._instance.defaultsAndOverrides().defaultTimeout},messageSizeMax:function(){return this._instance.messageSizeMax()}}),Ice.ProtocolInstance=I,N.defineSequence(Ice,"EndpointSeqHelper","Ice.ObjectHelper",!1,"Ice.Endpoint"),R=Ice.AsyncResultBase,y=Ice.Debug,Ice.Promise,S=Ice.Protocol,v=Ice.UserException,E=Ice.BasicStream,(w=Ice.Class(R,{__init__:function(e,t,n,i,r,o){R.call(this,e,t,n,i,r),void 0!==e&&(this._completed=o,this._is=null,this._os=null!==e?new E(this._instance,S.currentProtocolEncoding):null,this._state=0,this._exception=null,this._sentSynchronously=!1)},cancel:function(){this.__cancel(new Ice.InvocationCanceledException)},isCompleted:function(){return(this._state&w.Done)>0},isSent:function(){return(this._state&w.Sent)>0},throwLocalException:function(){if(null!==this._exception)throw this._exception},sentSynchronously:function(){return this._sentSynchronously},__markSent:function(e){y.assert(0==(this._state&w.Done)),this._state|=w.Sent,e&&(this._state|=w.Done|w.OK,this._cancellationHandler=null,this.succeed(this))},__markFinished:function(e,t){y.assert(0==(this._state&w.Done)),this._state|=w.Done,e&&(this._state|=w.OK),this._cancellationHandler=null,t?t(this):this.succeed(this)},__markFinishedEx:function(e){y.assert(0==(this._state&w.Done)),this._exception=e,this._state|=w.Done,this._cancellationHandler=null,this.fail(e,this)},__cancel:function(e){this._cancellationException=e,this._cancellationHandler&&this._cancellationHandler.asyncRequestCanceled(this,e)},__cancelable:function(e){if(this._cancellationException)try{throw this._cancellationException}finally{this._cancellationException=null}this._cancellationHandler=e},__os:function(){return this._os},__is:function(){return this._is},__startReadParams:function(){return this._is.startReadEncaps(),this._is},__endReadParams:function(){this._is.endReadEncaps()},__readEmptyParams:function(){this._is.skipEmptyEncaps(null)},__readParamEncaps:function(){return this._is.readEncaps(null)},__throwUserException:function(){if(y.assert(0!=(this._state&w.Done)),0==(this._state&w.OK))try{this._is.startReadEncaps(),this._is.throwException()}catch(e){throw e instanceof v&&this._is.endReadEncaps(),e}}})).OK=1,w.Done=2,w.Sent=4,Ice.AsyncResult=w,Ice.Address=function(e,t){this.host=e,this.port=t},function(){var e=Ice.BasicStream,t=Ice.Debug,n=(Ice.ExUtil,Ice.Class),i=Ice.Protocol,r=n({__init__:function(t,n){if(this._batchStreamInUse=!1,this._batchRequestNum=0,this._batchStream=new e(t,i.currentProtocolEncoding),this._batchStream.writeBlob(i.requestBatchHdr),this._batchMarker=this._batchStream.size,this._exception=null,this._maxSize=t.batchAutoFlushSize(),this._maxSize>0&&n){var r=t.initializationData().properties.getPropertyAsIntWithDefault("Ice.UDP.SndSize",65507);r<this._maxSize&&(this._maxSize=r)}},prepareBatchRequest:function(e){if(this._exception)throw this._exception;this._batchStream.swap(e)},finishBatchRequest:function(e,n,i){this._batchStream.swap(e);try{this._maxSize>0&&this._batchStream.size>=this._maxSize&&n.ice_flushBatchRequests(),t.assert(this._batchMarker<this._batchStream.size),this._batchMarker=this._batchStream.size,++this._batchRequestNum}finally{this._batchStream.resize(this._batchMarker)}},abortBatchRequest:function(e){this._batchStream.swap(e),this._batchStream.resize(this._batchMarker)},swap:function(e){if(0===this._batchRequestNum)return 0;var t=null;if(this._batchMarker<this._batchStream.size){var n=this._batchStream.size-this._batchMarker;this._batchStream.pos=this._batchMarker,t=this._batchStream.buffer.getArray(n),this._batchStream.resize(this._batchMarker)}var r=this._batchRequestNum;return this._batchStream.swap(e),this._batchRequestNum=0,this._batchStream.writeBlob(i.requestBatchHdr),this._batchMarker=this._batchStream.size,null!==t&&this._batchStream.writeBlob(t),r},destroy:function(e){this._exception=e},isEmpty:function(){return this._batchStream.size===i.requestBatchHdr.length}});Ice.BatchRequestQueue=r}(),function(){var e=Ice.HashMap,t=Ice.CommunicatorDestroyedException,n=Ice.Class({__init__:function(t){this._logger=t,this._destroyed=!1,this._tokenId=0,this._tokens=new e},destroy:function(){var e=this;this._tokens.forEach((function(t,n){e.cancel(t)})),this._destroyed=!0,this._tokens.clear()},schedule:function(e,i){if(this._destroyed)throw new t;var r=this._tokenId++,o=this,s=n.setTimeout((function(){o.handleTimeout(r)}),i);return this._tokens.set(r,{callback:e,id:s,isInterval:!1}),r},scheduleRepeated:function(e,i){if(this._destroyed)throw new t;var r=this._tokenId++,o=this,s=n.setInterval((function(){o.handleInterval(r)}),i);return this._tokens.set(r,{callback:e,id:s,isInterval:!0}),r},cancel:function(e){if(this._destroyed)return!1;var t=this._tokens.get(e);return void 0!==t&&(this._tokens.del(e),t.isInterval?n.clearInterval(t.id):n.clearTimeout(t.id),!0)},handleTimeout:function(e){if(!this._destroyed){var t=this._tokens.get(e);if(void 0!==t){this._tokens.del(e);try{t.callback()}catch(e){this._logger.warning("uncaught exception while executing timer:\n"+e)}}}},handleInterval:function(e){if(!this._destroyed){var t=this._tokens.get(e);if(void 0!==t)try{t.callback()}catch(e){this._logger.warning("uncaught exception while executing timer:\n"+e)}}}});n.setTimeout=Ice.Timer.setTimeout,n.clearTimeout=Ice.Timer.clearTimeout,n.setInterval=Ice.Timer.setInterval,n.clearInterval=Ice.Timer.clearInterval,n.setImmediate=Ice.Timer.setImmediate,Ice.Timer=n}(),function(){var e=Ice.Class,t=e({__init__:function(e){this._instance=e,this._requests=[]},add:function(e,t){if(null===this._instance)throw new Ice.CommunicatorDestroyedException;var i=new n(this._instance,this,e);e.__cancelable(i),i.token=this._instance.timer().schedule((function(){i.run()}),t),this._requests.push(i)},destroy:function(){for(var e=0;e<this._requests.length;++e)this._instance.timer().cancel(this._requests[e].token),this._requests[e].destroy();this._requests=[],this._instance=null},remove:function(e){var t=this._requests.indexOf(e);t>=0&&this._requests.splice(t,1)},cancel:function(e){var t=this._requests.indexOf(e);return t>=0&&(this._requests.splice(t,1),this._instance.timer().cancel(e.token))}});Ice.RetryQueue=t;var n=e({__init__:function(e,t,n,i){this._instance=e,this._queue=t,this._outAsync=n},run:function(){this._outAsync.__retry(),this._queue.remove(this)},destroy:function(){try{this._outAsync.__abort(new Ice.CommunicatorDestroyedException)}catch(e){}},asyncRequestCanceled:function(e,t){this._queue.cancel(this)&&(this._instance.traceLevels().retry>=1&&this._instance.initializationData().logger.trace(this._instance.traceLevels().retryCat,"operation retry canceled\n"+t.toString()),this._outAsync.__completedEx(t))}})}(),function(){var e=Ice.ArrayUtil,t=Ice.Debug,n=Ice.HashMap,i=Ice.Promise,r=Ice.Class({__init__:function(e){this._router=e,t.assert(null!==this._router),this._clientEndpoints=null,this._serverEndpoints=null,this._adapter=null,this._identities=new n(n.compareEquals),this._evictedIdentities=[]},destroy:function(){this._clientEndpoints=[],this._serverEndpoints=[],this._adapter=null,this._identities.clear()},equals:function(e){return this===e||e instanceof r&&this._router.equals(e._router)},hashCode:function(){return this._router.hashCode()},getRouter:function(){return this._router},getClientEndpoints:function(){var e=new i;if(null!==this._clientEndpoints)e.succeed(this._clientEndpoints);else{var t=this;this._router.getClientProxy().then((function(n){t.setClientEndpoints(n,e)})).exception((function(t){e.fail(t)}))}return e},getServerEndpoints:function(){if(null!==this._serverEndpoints)return(new i).succeed(this._serverEndpoints);var e=this;return this._router.getServerProxy().then((function(t){return e.setServerEndpoints(t)}))},addProxy:function(e){if(t.assert(null!==e),this._identities.has(e.ice_getIdentity()))return(new i).succeed();var n=this;return this._router.addProxies([e]).then((function(t){n.addAndEvictProxies(e,t)}))},setAdapter:function(e){this._adapter=e},getAdapter:function(){return this._adapter},clearCache:function(e){this._identities.del(e.getIdentity())},setClientEndpoints:function(e,t){if(null===this._clientEndpoints)if(null===e)this._clientEndpoints=this._router.__reference().getEndpoints(),t.succeed(this._clientEndpoints);else{e=e.ice_router(null);var n=this;this._router.ice_getConnection().then((function(i){var r=e.ice_timeout(i.timeout());n._clientEndpoints=r.__reference().getEndpoints(),t.succeed(n._clientEndpoints)})).exception((function(e){t.fail(e)}))}else t.succeed(this._clientEndpoints)},setServerEndpoints:function(e){if(null===e)throw new Ice.NoEndpointException;return e=e.ice_router(null),this._serverEndpoints=e.__reference().getEndpoints(),this._serverEndpoints},addAndEvictProxies:function(t,n){var i=e.indexOf(this._evictedIdentities,t.ice_getIdentity(),(function(e,t){return e.equals(t)}));i>=0?this._evictedIdentities.splice(i,1):this._identities.set(t.ice_getIdentity(),1);for(var r=0;r<n.length;++r)this._identities.del(n[r].ice_getIdentity())}});Ice.RouterInfo=r}(),function(){var e=Ice.AsyncStatus,t=Ice.AsyncResult,n=Ice.BasicStream,i=Ice.Debug,r=Ice.HashMap,o=Ice.RetryException,s=(Ice.OperationMode,Ice.Protocol),a=Ice.Identity,c=Ice.Class(t,{__init__:function(e,i,r,o,a){void 0!==e?(t.call(this,e,i,r,o,a),this._os=new n(this._instance,s.currentProtocolEncoding)):t.call(this)},__os:function(){return this._os},__sent:function(){this.__markSent(!0)},__completedEx:function(e){this.__markFinishedEx(e)}}),l=Ice.Class(c,{__init__:function(e,n){void 0!==e?(c.call(this,e.ice_getCommunicator(),n,null,e,null),this._mode=null,this._cnt=0,this._sent=!1,this._handler=null):t.call(this)},__completedEx:function(e){try{this._instance.retryQueue().add(this,this.__handleException(e))}catch(e){this.__markFinishedEx(e)}},__retryException:function(e){try{this._proxy.__updateRequestHandler(this._handler,null),this._instance.retryQueue().add(this,0)}catch(e){this.__completedEx(e)}},__retry:function(){this.__invokeImpl(!1)},__abort:function(e){this.__markFinishedEx(e)},__invokeImpl:function(t){try{if(t){var n=this._proxy.__reference().getInvocationTimeout();if(n>0){var i=this;this._timeoutToken=this._instance.timer().schedule((function(){i.__cancel(new Ice.InvocationTimeoutException)}),n)}}for(;;)try{return this._sent=!1,this._handler=this._proxy.__getRequestHandler(),void((this._handler.sendAsyncRequest(this)&e.Sent)>0&&t&&(this._sentSynchronously=!0))}catch(e){if(e instanceof o)this._proxy.__updateRequestHandler(this._handler,null);else{var r=this.__handleException(e);if(r>0)return void this._instance.retryQueue().add(this,r)}}}catch(e){this.__markFinishedEx(e)}},__markSent:function(e){this._sent=!0,e&&this._timeoutToken&&this._instance.timer().cancel(this._timeoutToken),c.prototype.__markSent.call(this,e)},__markFinishedEx:function(e){this._timeoutToken&&this._instance.timer().cancel(this._timeoutToken),c.prototype.__markFinishedEx.call(this,e)},__handleException:function(e){var t={value:0};return this._cnt=this._proxy.__handleException(e,this._handler,this._mode,this._sent,t,this._cnt),t.value}}),d=Ice.Class(l,{__init__:function(e,t,n){void 0!==e?(l.call(this,e,t),this._encoding=s.getCompatibleEncoding(this._proxy.__reference().getEncoding()),this._completed=n):l.call(this)},__prepare:function(e,t,n){s.checkSupportedProtocol(s.getCompatibleProtocol(this._proxy.__reference().getProtocol())),this._mode=t,null===n&&(n=d._emptyContext),this._proxy.ice_isBatchOneway()||this._proxy.ice_isBatchDatagram()?this._proxy.__getBatchRequestQueue().prepareBatchRequest(this._os):this._os.writeBlob(s.requestHdr);var i=this._proxy.__reference();i.getIdentity().__write(this._os);var o=i.getFacet();if(null===o||0===o.length?Ice.StringSeqHelper.write(this._os,null):Ice.StringSeqHelper.write(this._os,[o]),this._os.writeString(this._operation),this._os.writeByte(t.value),void 0!==n){if(null!==n&&!(n instanceof r))throw new Error("illegal context value, expecting null or HashMap");Ice.ContextHelper.write(this._os,n)}else{var a=i.getInstance().getImplicitContext(),c=i.getContext();null===a?Ice.ContextHelper.write(this._os,c):a.write(c,this._os)}},__sent:function(){this.__markSent(!this._proxy.ice_isTwoway())},__invokeRemote:function(e,t,n){return e.sendAsyncRequest(this,t,n,0)},__abort:function(e){(this._proxy.ice_isBatchOneway()||this._proxy.ice_isBatchDatagram())&&this._proxy.__getBatchRequestQueue().abortBatchRequest(this._os),l.prototype.__abort.call(this,e)},__invoke:function(){if(this._proxy.ice_isBatchOneway()||this._proxy.ice_isBatchDatagram())return this._sentSynchronously=!0,this._proxy.__getBatchRequestQueue().finishBatchRequest(this._os,this._proxy,this._operation),void this.__markFinished(!0);this.__invokeImpl(!0)},__completed:function(e){var t;i.assert(this._proxy.ice_isTwoway());try{switch(null===this._is&&(this._is=new n(this._instance,s.currentProtocolEncoding)),this._is.swap(e),t=this._is.readByte()){case s.replyOK:case s.replyUserException:break;case s.replyObjectNotExist:case s.replyFacetNotExist:case s.replyOperationNotExist:var r=new a;r.__read(this._is);var o,c=Ice.StringSeqHelper.read(this._is);if(c.length>0){if(c.length>1)throw new Ice.MarshalException;o=c[0]}else o="";var l=this._is.readString(),d=null;switch(t){case s.replyObjectNotExist:d=new Ice.ObjectNotExistException;break;case s.replyFacetNotExist:d=new Ice.FacetNotExistException;break;case s.replyOperationNotExist:d=new Ice.OperationNotExistException;break;default:i.assert(!1)}throw d.id=r,d.facet=o,d.operation=l,d;case s.replyUnknownException:case s.replyUnknownLocalException:case s.replyUnknownUserException:var u=this._is.readString(),h=null;switch(t){case s.replyUnknownException:h=new Ice.UnknownException;break;case s.replyUnknownLocalException:h=new Ice.UnknownLocalException;break;case s.replyUnknownUserException:h=new Ice.UnknownUserException;break;default:i.assert(!1)}throw h.unknown=u,h;default:throw new Ice.UnknownReplyStatusException}this.__markFinished(t==s.replyOK,this._completed)}catch(e){this.__completedEx(e)}},__startWriteParams:function(e){return this._os.startWriteEncaps(this._encoding,e),this._os},__endWriteParams:function(){this._os.endWriteEncaps()},__writeEmptyParams:function(){this._os.writeEmptyEncaps(this._encoding)},__writeParamEncaps:function(e){null===e||0===e.length?this._os.writeEmptyEncaps(this._encoding):this._os.writeEncaps(e)},__is:function(){return this._is},__startReadParams:function(){return this._is.startReadEncaps(),this._is},__endReadParams:function(){this._is.endReadEncaps()},__readEmptyParams:function(){this._is.skipEmptyEncaps(null)},__readParamEncaps:function(){return this._is.readEncaps(null)},__throwUserException:function(){if(i.assert(0!=(this._state&t.Done)),0==(this._state&t.OK))try{this._is.startReadEncaps(),this._is.throwException()}catch(e){throw e instanceof Ice.UserException&&this._is.endReadEncaps(),e}}});d._emptyContext=new r;var u=Ice.Class(l,{__init__:function(e,t){l.call(this,e,t),this._batchRequestNum=e.__getBatchRequestQueue().swap(this._os)},__invokeRemote:function(t,n,i){return 0===this._batchRequestNum?(this.__sent(),e.Sent):t.sendAsyncRequest(this,n,i,this._batchRequestNum)},__invoke:function(){s.checkSupportedProtocol(s.getCompatibleProtocol(this._proxy.__reference().getProtocol())),this.__invokeImpl(!0)}}),h=Ice.Class(l,{__init__:function(e,t){l.call(this,e,t)},__invokeRemote:function(t,n,i){return this.__markFinished(!0,(function(e){e.succeed(t)})),e.Sent},__invoke:function(){this.__invokeImpl(!0)}}),f=Ice.Class(c,{__init__:function(e,t,n){c.call(this,t,n,e,null,null)},__invoke:function(){try{var t,n=this._connection.getBatchRequestQueue().swap(this._os);0===n?(this.__sent(),t=e.Sent):t=this._connection.sendAsyncRequest(this,!1,!1,n),(t&e.Sent)>0&&(this._sentSynchronously=!0)}catch(e){this.__completedEx(e)}}});Ice.OutgoingAsync=d,Ice.ProxyFlushBatch=u,Ice.ProxyGetConnection=h,Ice.ConnectionFlushBatch=f}(),function(){var e=Ice.ArrayUtil,t=Ice.AsyncResultBase,n=(Ice.AsyncResult,Ice.Debug),i=(Ice.FormatType,Ice.HashMap),r=Ice.OutgoingAsync,o=Ice.ProxyFlushBatch,s=Ice.ProxyGetConnection,a=Ice.ReferenceMode,c=Ice.OperationMode,l=Ice.Class({__init__:function(){this._reference=null,this._requestHandler=null},hashCode:function(e){return this._reference.hashCode()},ice_getCommunicator:function(){return this._reference.getCommunicator()},toString:function(){return this._reference.toString()},ice_getIdentity:function(){return this._reference.getIdentity().clone()},ice_identity:function(e){if(null==e||0===e.name.length)throw new Ice.IllegalIdentityException;if(e.equals(this._reference.getIdentity()))return this;var t=new l;return t.__setup(this._reference.changeIdentity(e)),t},ice_getContext:function(){return new i(this._reference.getContext())},ice_context:function(e){return this.__newInstance(this._reference.changeContext(e))},ice_getFacet:function(){return this._reference.getFacet()},ice_facet:function(e){if(null==e&&(e=""),e===this._reference.getFacet())return this;var t=new l;return t.__setup(this._reference.changeFacet(e)),t},ice_getAdapterId:function(){return this._reference.getAdapterId()},ice_adapterId:function(e){return null==e&&(e=""),e===this._reference.getAdapterId()?this:this.__newInstance(this._reference.changeAdapterId(e))},ice_getEndpoints:function(){return e.clone(this._reference.getEndpoints())},ice_endpoints:function(t){return null==t&&(t=[]),e.equals(t,this._reference.getEndpoints())?this:this.__newInstance(this._reference.changeEndpoints(t))},ice_getLocatorCacheTimeout:function(){return this._reference.getLocatorCacheTimeout()},ice_locatorCacheTimeout:function(e){if(e<-1)throw new Error("invalid value passed to ice_locatorCacheTimeout: "+e);return e===this._reference.getLocatorCacheTimeout()?this:this.__newInstance(this._reference.changeLocatorCacheTimeout(e))},ice_getInvocationTimeout:function(){return this._reference.getInvocationTimeout()},ice_invocationTimeout:function(e){if(e<1&&-1!==e)throw new Error("invalid value passed to ice_invocationTimeout: "+e);return e===this._reference.getInvocationTimeout()?this:this.__newInstance(this._reference.changeInvocationTimeout(e))},ice_isConnectionCached:function(){return this._reference.getCacheConnection()},ice_connectionCached:function(e){return e===this._reference.getCacheConnection()?this:this.__newInstance(this._reference.changeCacheConnection(e))},ice_getEndpointSelection:function(){return this._reference.getEndpointSelection()},ice_endpointSelection:function(e){return e===this._reference.getEndpointSelection()?this:this.__newInstance(this._reference.changeEndpointSelection(e))},ice_isSecure:function(){return this._reference.getSecure()},ice_secure:function(e){return e===this._reference.getSecure()?this:this.__newInstance(this._reference.changeSecure(e))},ice_getEncodingVersion:function(){return this._reference.getEncoding().clone()},ice_encodingVersion:function(e){return e.equals(this._reference.getEncoding())?this:this.__newInstance(this._reference.changeEncoding(e))},ice_isPreferSecure:function(){return this._reference.getPreferSecure()},ice_preferSecure:function(e){return e===this._reference.getPreferSecure()?this:this.__newInstance(this._reference.changePreferSecure(e))},ice_getRouter:function(){var e=this._reference.getRouterInfo();return null!==e?e.getRouter():null},ice_router:function(e){var t=this._reference.changeRouter(e);return t.equals(this._reference)?this:this.__newInstance(t)},ice_getLocator:function(){var e=this._reference.getLocatorInfo();return null!==e?e.getLocator():null},ice_locator:function(e){var t=this._reference.changeLocator(e);return t.equals(this._reference)?this:this.__newInstance(t)},ice_isTwoway:function(){return this._reference.getMode()===a.ModeTwoway},ice_twoway:function(){return this._reference.getMode()===a.ModeTwoway?this:this.__newInstance(this._reference.changeMode(a.ModeTwoway))},ice_isOneway:function(){return this._reference.getMode()===a.ModeOneway},ice_oneway:function(){return this._reference.getMode()===a.ModeOneway?this:this.__newInstance(this._reference.changeMode(a.ModeOneway))},ice_isBatchOneway:function(){return this._reference.getMode()===a.ModeBatchOneway},ice_batchOneway:function(){return this._reference.getMode()===a.ModeBatchOneway?this:this.__newInstance(this._reference.changeMode(a.ModeBatchOneway))},ice_isDatagram:function(){return this._reference.getMode()===a.ModeDatagram},ice_datagram:function(){return this._reference.getMode()===a.ModeDatagram?this:this.__newInstance(this._reference.changeMode(a.ModeDatagram))},ice_isBatchDatagram:function(){return this._reference.getMode()===a.ModeBatchDatagram},ice_batchDatagram:function(){return this._reference.getMode()===a.ModeBatchDatagram?this:this.__newInstance(this._reference.changeMode(a.ModeBatchDatagram))},ice_compress:function(e){var t=this._reference.changeCompress(e);return t.equals(this._reference)?this:this.__newInstance(t)},ice_timeout:function(e){if(e<1&&-1!==e)throw new Error("invalid value passed to ice_timeout: "+e);var t=this._reference.changeTimeout(e);return t.equals(this._reference)?this:this.__newInstance(t)},ice_getConnectionId:function(){return this._reference.getConnectionId()},ice_connectionId:function(e){var t=this._reference.changeConnectionId(e);return t.equals(this._reference)?this:this.__newInstance(t)},ice_getConnection:function(){var e=new s(this,"ice_getConnection");try{e.__invoke()}catch(t){e.__abort(t)}return e},ice_getCachedConnection:function(){return this._requestHandler?this._requestHandler.getConnection():null},ice_flushBatchRequests:function(){var e=new o(this,"ice_flushBatchRequests");try{e.__invoke()}catch(t){e.__abort(t)}return e},equals:function(e){return this===e||e instanceof l&&this._reference.equals(e._reference)},__reference:function(){return this._reference},__copyFrom:function(e){n.assert(null===this._reference),n.assert(null===this._requestHandler),this._reference=e._reference,this._requestHandler=e._requestHandler},__handleException:function(e,t,n,i,r,o){if(this.__updateRequestHandler(t,null),!(e instanceof Ice.LocalException&&(!i||n==c.Nonmutating||n==c.Idempotent||e instanceof Ice.CloseConnectionException||e instanceof Ice.ObjectNotExistException)))throw e;try{return this._reference.getInstance().proxyFactory().checkRetryAfterException(e,this._reference,r,o)}catch(t){throw t instanceof Ice.CommunicatorDestroyedException?e:t}},__checkAsyncTwowayOnly:function(e){if(!this.ice_isTwoway())throw new Error("`"+e+"' can only be called with a twoway proxy")},__getRequestHandler:function(){return this._reference.getCacheConnection()&&this._requestHandler?this._requestHandler:this._reference.getRequestHandler(this)},__getBatchRequestQueue:function(){return this._batchRequestQueue||(this._batchRequestQueue=this._reference.getBatchRequestQueue()),this._batchRequestQueue},__setRequestHandler:function(e){return this._reference.getCacheConnection()?(this._requestHandler||(this._requestHandler=e),this._requestHandler):e},__updateRequestHandler:function(e,t){this._reference.getCacheConnection()&&null!==e&&this._requestHandler&&this._requestHandler!==t&&(this._requestHandler=this._requestHandler.update(e,t))},__setup:function(e){n.assert(null===this._reference),this._reference=e},__newInstance:function(e){var t=new this.constructor;return t.__setup(e),t},ice_instanceof:function(e){return!!e&&(this instanceof e||this.constructor.__instanceof(e))}});l.__invoke=function(e,t,n,i,o,s,a,c,d){(null!==a||c.length>0)&&e.__checkAsyncTwowayOnly(t);var u=new r(e,t,(function(e){l.__completed(e,a,c)}));try{if(u.__prepare(t,n,o),null===s)u.__writeEmptyParams();else{var h=u.__startWriteParams(i);s.call(null,h,d),u.__endWriteParams()}u.__invoke()}catch(e){u.__abort(e)}return u},l.__completed=function(e,t,n){if(l.__check(e,n))try{if(null===t)e.__readEmptyParams(),e.succeed(e);else{var i=t(e);e.succeed.apply(e,i)}}catch(t){return void l.__dispatchLocalException(e,t)}},l.__returns_bool=function(e,t){t.push(e.readBool())},l.__returns_byte=function(e,t){t.push(e.readByte())},l.__returns_short=function(e,t){t.push(e.readShort())},l.__returns_int=function(e,t){t.push(e.readInt())},l.__returns_long=function(e,t){t.push(e.readLong())},l.__returns_float=function(e,t){t.push(e.readFloat())},l.__returns_double=function(e,t){t.push(e.readDouble())},l.__returns_string=function(e,t){t.push(e.readString())},l.__returns_ObjectPrx=function(e,t){t.push(e.readProxy())},l.__returns_Object=function(e,t){e.readObject((function(e){t.push(e)}),Ice.Object),e.readPendingObjects()},l.__check=function(e,t){try{e.__throwUserException()}catch(i){if(i instanceof Ice.UserException){if(null!==t)for(var n=0;n<t.length;++n)if(i instanceof t[n])return e.fail(i,e),!1;return e.fail(new Ice.UnknownUserException(i.ice_name()),e),!1}return e.fail(i,e),!1}return!0},l.__dispatchLocalException=function(e,t){e.fail(t,e)},l.ice_staticId=Ice.Object.ice_staticId,l.checkedCast=function(e,n,i){var r=null;if(null==e)(r=new t(null,"checkedCast",null,null,null)).succeed(null,r);else{void 0!==n&&(e=e.ice_facet(n));var o=this;r=new t(e.ice_getCommunicator(),"checkedCast",null,e,null),e.ice_isA(this.ice_staticId(),i).then((function(t,n){if(n){var i=new o;i.__copyFrom(e),r.succeed(i,r)}else r.succeed(null,r)})).exception((function(e){e instanceof Ice.FacetNotExistException?r.succeed(null,r):r.fail(e,r)}))}return r},l.uncheckedCast=function(e,t){var n=null;return null!=e&&(n=new this,void 0!==t&&(e=e.ice_facet(t)),n.__copyFrom(e)),n},Object.defineProperty(l,"minWireSize",{get:function(){return 2}}),l.write=function(e,t){e.writeProxy(t)},l.read=function(e){return e.readProxy(this)},l.writeOpt=function(e,t,n){e.writeOptProxy(t,n)},l.readOpt=function(e,t){return e.readOptProxy(t,this)},l.__instanceof=function(e){if(e===this)return!0;for(var t in this.__implements)if(this.__implements[t].__instanceof(e))return!0;return!!this.__parent&&this.__parent.__instanceof(e)},Ice.Slice.defineProxy=function(e,t,n){var i=function(){e.call(this)};return i.__parent=e,i.__implements=n,(i.prototype=new e).constructor=i,i.ice_staticId=t,i.checkedCast=l.checkedCast,i.uncheckedCast=l.uncheckedCast,i.write=l.write,i.writeOpt=l.writeOpt,i.read=l.read,i.readOpt=l.readOpt,i.__instanceof=l.__instanceof,Object.defineProperty(i,"minWireSize",{get:function(){return 2}}),i},Ice.ObjectPrx=l}(),Object.defineProperty(Ice,"TCPEndpointType",{value:1}),Object.defineProperty(Ice,"SSLEndpointType",{value:2}),Object.defineProperty(Ice,"UDPEndpointType",{value:3}),Object.defineProperty(Ice,"WSEndpointType",{value:4}),Object.defineProperty(Ice,"WSSEndpointType",{value:5}),Ice.EndpointInfo=N.defineLocalObject((function(e,t){this.timeout=void 0!==e?e:0,this.compress=void 0!==t&&t})),Ice.Endpoint=N.defineLocalObject(),Ice.IPEndpointInfo=N.defineLocalObject((function(e,t,n,i,r){Ice.EndpointInfo.call(this,e,t),this.host=void 0!==n?n:"",this.port=void 0!==i?i:0,this.sourceAddress=void 0!==r?r:""}),Ice.EndpointInfo),Ice.TCPEndpointInfo=N.defineLocalObject((function(e,t,n,i,r){Ice.IPEndpointInfo.call(this,e,t,n,i,r)}),Ice.IPEndpointInfo),Ice.UDPEndpointInfo=N.defineLocalObject((function(e,t,n,i,r,o,s){Ice.IPEndpointInfo.call(this,e,t,n,i,r),this.mcastInterface=void 0!==o?o:"",this.mcastTtl=void 0!==s?s:0}),Ice.IPEndpointInfo),Ice.WSEndpointInfo=N.defineLocalObject((function(e,t,n,i,r,o){Ice.TCPEndpointInfo.call(this,e,t,n,i,r),this.resource=void 0!==o?o:""}),Ice.TCPEndpointInfo),Ice.OpaqueEndpointInfo=N.defineLocalObject((function(e,t,n,i){Ice.EndpointInfo.call(this,e,t),this.rawEncoding=void 0!==n?n:new Ice.EncodingVersion,this.rawBytes=void 0!==i?i:null}),Ice.EndpointInfo),b=(0,Ice.Class)(Ice.Endpoint,{toString:function(){return this.protocol()+this.options()},initWithOptions:function(e){var t,n=[],i="`"+this.protocol();for(t=0;t<e.length;++t)-1!==e[t].search(/[ \t\n\r]+/)?i+=' "'+e[t]+'"':i+=" "+e[t];for(i+="'",t=0;t<e.length;){var r=e[t++];if(r.length<2||"-"!=r.charAt(0))n.push(r);else{var o=null;t<e.length&&"-"!=e[t].charAt(0)&&(o=e[t++]),this.checkOption(r,o,i)||(n.push(r),null!==o&&n.push(o))}}for(e.length=0,t=0;t<n.length;t++)e.push(n[t])},equals:function(e){return e instanceof b&&0===this.compareTo(e)},checkOption:function(){return!1}}),Ice.EndpointI=b,function(){var e=Ice.__M,t=Ice.Class,n=[Ice.ByteHelper,Ice.BoolHelper,Ice.ShortHelper,Ice.IntHelper,Ice.LongHelper,Ice.FloatHelper,Ice.DoubleHelper,Ice.StringHelper,Ice.Object,Ice.ObjectPrx];function i(t){var i=t[0],r=typeof i;return"number"===r?i=n[t[0]]:"string"===r&&(i=e.type(i)),{type:i,isObject:!0===t[1],tag:t[2]}}function r(e,t){var n,r,o,s={};s.name=e,s.mode=t[1]?Ice.OperationMode.valueOf(t[1]):Ice.OperationMode.Normal,s.sendMode=t[2]?Ice.OperationMode.valueOf(t[2]):Ice.OperationMode.Normal,s.amd=!!t[3],s.format=t[4]?Ice.FormatType.valueOf(t[4]):Ice.FormatType.DefaultFormat,s.amd?s.servantMethod=e+"_async":s.servantMethod=t[0]?t[0]:e,t[5]&&((o=i(t[5])).pos=0),s.returns=o;var a=[],c=[];if(t[6])for(n=0;n<t[6].length;++n)(r=i(t[6][n])).pos=n,a.push(r),r.tag&&c.push(r);c.sort((function(e,t){return e.tag-t.tag})),s.inParams=a,s.inParamsOpt=c;var l=[],d=[];if(t[7]){var u=o?1:0;for(n=0;n<t[7].length;++n)(r=i(t[7][n])).pos=n+u,l.push(r),r.tag&&d.push(r)}o&&o.tag&&d.push(o),d.sort((function(e,t){return e.tag-t.tag})),s.outParams=l,s.outParamsOpt=d;var h=[];if(t[8])for(n=0;n<t[8].length;++n)h.push(t[8][n]);return s.exceptions=h,s.sendsClasses=!0===t[9],s.returnsClasses=!0===t[10],s}var o=t({__init__:function(e){this.raw=e,this.parsed={}},find:function(e){var t=this.parsed[e];return void 0===t&&void 0!==this.raw[e]&&(t=r(e,this.raw[e]),this.parsed[e]=t),t}});function s(e,t,n,i,r,o,s){var a,c,l;for(a=0;a<n.length;++a)(c=n[a]).tag||(l=c.type.read(e),o[c.pos+s]=l);for(t&&(l=t.type.read(e),o[t.pos+s]=l),a=0;a<i.length;++a)l=(c=i[a]).type.readOpt(e,c.tag),o[c.pos+s]=l;r&&e.readPendingObjects()}function a(e,t,n,i,r,o){var s,a;for(s=0;s<i.length;++s)(a=i[s]).tag||a.type.write(e,t[a.pos]);for(n&&n.type.write(e,t[n.pos]),s=0;s<r.length;++s)(a=r[s]).type.writeOpt(e,a.tag,t[a.pos]);o&&e.writePendingObjects()}var c=t({__init__:function(e,t){this.incomingAsync=e,this.op=t},ice_response:function(){var e=arguments;if(this.incomingAsync.__validateResponse(!0))try{this.__sendResponse(e),this.incomingAsync.__response()}catch(e){this.incomingAsync.__exception(e)}},ice_exception:function(e){this.__checkException(e)?this.incomingAsync.__validateResponse(!1)&&(this.__sendException(e),this.incomingAsync.__response()):this.incomingAsync.ice_exception(e)},__sendResponse:function(e){if(void 0===this.op.returns&&0===this.op.outParams.length){if(e&&e.length>0)throw new Error("ice_response called with invalid arguments");this.incomingAsync.__writeEmptyParams()}else{var t,n=this.incomingAsync.__startWriteParams(this.op.format);this.op.returns&&!this.op.returns.tag&&(t=this.op.returns),a(n,e,t,this.op.outParams,this.op.outParamsOpt,this.op.returnsClasses),this.incomingAsync.__endWriteParams(!0)}},__checkException:function(e){for(var t=0;t<this.op.exceptions.length;++t)if(e instanceof this.op.exceptions[t])return!0;return!1},__sendException:function(e){this.incomingAsync.__writeUserException(e,this.op.format)}});function l(e,t,n){for(var i,r=0;void 0===i&&r<e.length;++r){var o=e[r];void 0===(i=o[t])&&(-1===n.indexOf(o)&&n.push(o),o.__implements&&(i=l(o.__implements,t,n)))}return i}function d(e,t){var n,i="__op_"+t,r=e[i];if(void 0===r){n=[];for(var o=e;o&&void 0===r;)o.__implements&&(r=l(o.__implements,i,n)),o=o.__parent;void 0!==r&&(e[i]=r)}if(void 0===r){var a,d;if(e.__ops&&(a=e.__ops.find(t)),void 0===a){for(var u=e.__parent;void 0===a&&u;)u.__ops&&void 0!==(a=u.__ops.find(t))&&(d=u),u=u.__parent;for(var h=0;void 0===a&&h<n.length;++h){var f=n[h];f.__ops&&void 0!==(a=f.__ops.find(t))&&(d=f)}}void 0!==a&&(r=function(e,t,n){return function(e,t,n,i){var r=e[t.servantMethod];if(void 0===r||"function"!=typeof r){var o="servant for identity "+i.adapter.getCommunicator().identityToString(i.id)+" does not define operation `"+t.servantMethod+"'";throw new Ice.UnknownException(o)}var a=new c(n,t);try{var l=t.amd?[null]:[];if(0===t.inParams.length)n.readEmptyParams();else{var d=n.startReadParams(),u=t.amd?1:0;if(s(d,void 0,t.inParams,t.inParamsOpt,t.sendsClasses,l,u),n.endReadParams(),t.inParams.length>0&&(t.sendsClasses||t.inParamsOpt.length>0))for(var h=0;h<t.inParams.length;++h){var f=t.inParams[h];f.isObject&&void 0!==l[f.pos+u]&&(l[f.pos+u]=l[f.pos+u].value)}}if(l.push(i),t.amd){l[0]=a;try{r.apply(e,l)}catch(e){a.ice_exception(e)}return Ice.DispatchStatus.DispatchAsync}var _=t.outParams.length;t.returns&&++_;var p=r.apply(e,l);if(_>1&&!(p instanceof Array))throw new Ice.MarshalException("operation `"+t.servantMethod+"' should return an array of length "+_);return 1===_&&(p=[p]),a.__sendResponse(p),Ice.DispatchStatus.DispatchOK}catch(e){if(a.__checkException(e))return a.__sendException(e),Ice.DispatchStatus.DispatchUserException;throw e}}(e,a,t,n)},e[i]=r,d&&(d[i]=r))}return r}function u(e,t,n){var i=n[0]?n[0]:t,o=null;e.prototype[i]=function(){var e=arguments;null===o&&(o=r(t,n));var i=e[o.inParams.length],c=null;o.inParams.length>0&&(c=function(e,t){var n,i,r;for(n=0;n<o.inParams.length;++n)if(r=t[(i=o.inParams[n]).pos],!(i.tag&&void 0===r||"function"!=typeof i.type.validate||i.type.validate(r)))throw new Ice.MarshalException("invalid value for argument "+(n+1)+" in operation `"+o.servantMethod+"'");a(e,t,void 0,o.inParams,o.inParamsOpt,o.sendsClasses)});var l=null;return(o.returns||o.outParams.length>0)&&(l=function(e){var t,n=[],i=e.__startReadParams();if(o.returns&&!o.returns.tag&&(t=o.returns),s(i,t,o.outParams,o.outParamsOpt,o.returnsClasses,n,0),e.__endReadParams(),o.returnsClasses||o.outParamsOpt.length>0){o.returns&&o.returns.isObject&&void 0!==n[o.returns.pos+0]&&(n[o.returns.pos+0]=n[o.returns.pos+0].value);for(var r=0;r<o.outParams.length;++r){var a=o.outParams[r];a.isObject&&void 0!==n[a.pos+0]&&(n[a.pos+0]=n[a.pos+0].value)}}return n.push(e),n}),Ice.ObjectPrx.__invoke(this,o.name,o.sendMode,o.format,i,c,l,o.exceptions,Array.prototype.slice.call(e))}}var h=Ice.Slice;h.defineOperations=function(e,t,n){if(n&&(e.__ops=new o(n)),e.prototype.__dispatch=function(t,n){var i=d(e,n.operation);if(void 0===i||"function"!=typeof i)throw new Ice.OperationNotExistException(n.id,n.facet,n.operation);return i.call(i,this,t,n)},n)for(var i in n)u(t,i,n[i]);if(t.__implements)for(var r in t.__implements){var s=t.__implements[r].prototype;for(var a in s)"function"==typeof s[a]&&void 0===t.prototype[a]&&(t.prototype[a]=s[a])}},h.defineOperations(Ice.Object,Ice.ObjectPrx,{ice_ping:[,1,1,,,,,,],ice_isA:[,1,1,,,[1],[[7]],,],ice_id:[,1,1,,,[7],,,],ice_ids:[,1,1,,,["Ice.StringSeqHelper"],,,]})}(),function(){var e=Ice.Address,t=Ice.HashUtil,n=Ice.StringUtil,i=Ice.Class,r=Ice.EndpointParseException,o=i(Ice.EndpointI,{__init__:function(e,t,n,i,r){this._instance=e,this._host=void 0===t?null:t,this._port=void 0===n?null:n,this._sourceAddr=void 0===i?null:i,this._connectionId=void 0===r?"":r},streamWrite:function(e){e.startWriteEncaps(),this.streamWriteImpl(e),e.endWriteEncaps()},getInfo:function(){var e=new Ice.IPEndpointInfo;return this.fillEndpointInfo(e),e},type:function(){return this._instance.type()},protocol:function(){return this._instance.protocol()},secure:function(){return this._instance.secure()},connectionId:function(){return this._connectionId},changeConnectionId:function(e){return e===this._connectionId?this:this.createEndpoint(this._host,this._port,e)},hashCode:function(){return void 0===this._hashCode&&(this._hashCode=this.hashInit(5381)),this._hashCode},options:function(){var e="";if(null!==this._host&&this._host.length>0){e+=" -h ";var t=-1!=this._host.indexOf(":");t&&(e+='"'),e+=this._host,t&&(e+='"')}return e+=" -p "+this._port,null!==this._sourceAddr&&this._sourceAddr.length>0&&(e+=" --sourceAddr "+this._sourceAddr),e},compareTo:function(e){return this===e?0:null===e?1:e instanceof o?this._port<e._port?-1:e._port<this._port?1:this._host!=e._host?this._host<e._host?-1:1:this._sourceAddr!=e._sourceAddr?this._sourceAddr<e._sourceAddr?-1:1:this._connectionId!=e._connectionId?this._connectionId<e._connectionId?-1:1:0:this.type()<e.type()?-1:1},getAddress:function(){return new e(this._host,this._port)},toConnectorString:function(){return this._host+":"+this._port},streamWriteImpl:function(e){e.writeString(this._host),e.writeInt(this._port)},hashInit:function(e){return e=t.addNumber(e,this.type()),e=t.addString(e,this._host),e=t.addNumber(e,this._port),e=t.addString(e,this._sourceAddr),e=t.addString(e,this._connectionId)},fillEndpointInfo:function(e){var t=this;e.type=function(){return t.type()},e.datagram=function(){return t.datagram()},e.secure=function(){return t.secure()},e.host=this._host,e.port=this._port,e.sourceAddress=this._sourceAddr},initWithOptions:function(e,t){if(Ice.EndpointI.prototype.initWithOptions.call(this,e),null===this._host||0===this._host.length)this._host=this._instance.defaultHost();else if("*"==this._host){if(!t)throw new r("`-h *' not valid for proxy endpoint `"+this+"'");this._host=""}if(null===this._host&&(this._host=""),null===this._sourceAddr)t||(this._sourceAddr=this._instance.defaultSourceAddress());else if(t)throw new r("`--sourceAddress not valid for object adapter endpoint `"+this+"'")},initWithStream:function(e){this._host=e.readString(),this._port=e.readInt()},checkOption:function(e,t,i){if("-h"===e){if(null===t)throw new r("no argument provided for -h option in endpoint "+i);this._host=t}else if("-p"===e){if(null===t)throw new r("no argument provided for -p option in endpoint "+i);try{this._port=n.toInt(t)}catch(e){throw new r("invalid port value `"+t+"' in endpoint "+i)}if(this._port<0||this._port>65535)throw new r("port value `"+t+"' out of range in endpoint "+i)}else{if("--sourceAddress"!==e)return!1;if(null===t)throw new r("no argument provided for --sourceAddress option in endpoint "+i);this._sourceAddr=t}return!0}});Ice.IPEndpointI=o}(),Object.defineProperty(IceSSL,"EndpointType",{value:Ice.SSLEndpointType}),IceSSL.EndpointInfo=N.defineLocalObject((function(e,t,n,i,r){Ice.IPEndpointInfo.call(this,e,t,n,i,r)}),Ice.IPEndpointInfo),IceSSL.WSSEndpointInfo=N.defineLocalObject((function(e,t,n,i,r,o){IceSSL.EndpointInfo.call(this,e,t,n,i,r),this.resource=void 0!==o?o:""}),IceSSL.EndpointInfo),Ice.ConnectionInfo=N.defineLocalObject((function(e,t,n,i,r){this.incoming=void 0!==e&&e,this.adapterName=void 0!==t?t:"",this.connectionId=void 0!==n?n:"",this.rcvSize=void 0!==i?i:0,this.sndSize=void 0!==r?r:0})),Ice.ConnectionCallback=N.defineLocalObject(),Ice.ACMClose=N.defineEnum([["CloseOff",0],["CloseOnIdle",1],["CloseOnInvocation",2],["CloseOnInvocationAndIdle",3],["CloseOnIdleForceful",4]]),Ice.ACMHeartbeat=N.defineEnum([["HeartbeatOff",0],["HeartbeatOnInvocation",1],["HeartbeatOnIdle",2],["HeartbeatAlways",3]]),Ice.ACM=N.defineStruct((function(e,t,n){this.timeout=void 0!==e?e:0,this.close=void 0!==t?t:Ice.ACMClose.CloseOff,this.heartbeat=void 0!==n?n:Ice.ACMHeartbeat.HeartbeatOff}),!0),Ice.Connection=N.defineLocalObject(),Ice.IPConnectionInfo=N.defineLocalObject((function(e,t,n,i,r,o,s,a,c){Ice.ConnectionInfo.call(this,e,t,n,i,r),this.localAddress=void 0!==o?o:"",this.localPort=void 0!==s?s:-1,this.remoteAddress=void 0!==a?a:"",this.remotePort=void 0!==c?c:-1}),Ice.ConnectionInfo),Ice.TCPConnectionInfo=N.defineLocalObject((function(e,t,n,i,r,o,s,a,c){Ice.IPConnectionInfo.call(this,e,t,n,i,r,o,s,a,c)}),Ice.IPConnectionInfo),Ice.UDPConnectionInfo=N.defineLocalObject((function(e,t,n,i,r,o,s,a,c,l,d){Ice.IPConnectionInfo.call(this,e,t,n,i,r,o,s,a,c),this.mcastAddress=void 0!==l?l:"",this.mcastPort=void 0!==d?d:-1}),Ice.IPConnectionInfo),N.defineDictionary(Ice,"HeaderDict","HeaderDictHelper","Ice.StringHelper","Ice.StringHelper",!1,void 0,void 0),Ice.WSConnectionInfo=N.defineLocalObject((function(e,t,n,i,r,o,s,a,c,l){Ice.TCPConnectionInfo.call(this,e,t,n,i,r,o,s,a,c),this.headers=void 0!==l?l:null}),Ice.TCPConnectionInfo),Ice.TraceLevels=function(e){var t="Network",n="Protocol",i="Retry",r="Locator",o="Slicing",s="Ice.Trace.",a=e.getPropertyAsInt(s+t),c=e.getPropertyAsInt(s+n),l=e.getPropertyAsInt(s+i),d=e.getPropertyAsInt("Ice.Trace.Locator"),u=e.getPropertyAsInt(s+o);return e.getPropertyAsInt(s+"ThreadPool"),Object.create(null,{network:{get:function(){return a}},networkCat:{get:function(){return t}},protocol:{get:function(){return c}},protocolCat:{get:function(){return n}},retry:{get:function(){return l}},retryCat:{get:function(){return i}},location:{get:function(){return d}},locationCat:{get:function(){return r}},slicing:{get:function(){return u}},slicingCat:{get:function(){return o}}})},function(){var e=Ice.Base64,t=Ice.Debug,n=Ice.HashUtil,i=(Ice.Protocol,Ice.StringUtil),r=Ice.EndpointParseException,o=Ice.Class,s=o(Ice.EndpointI,{__init__:function(e){this._rawEncoding=Ice.Encoding_1_0,this._type=void 0===e?-1:e,this._rawBytes=null},streamWrite:function(e){e.startWriteEncaps(this._rawEncoding,Ice.FormatType.DefaultFormat),e.writeBlob(this._rawBytes),e.endWriteEncaps()},getInfo:function(){return new a(-1,!1,this._rawEncoding,this._rawBytes,this._type)},type:function(){return this._type},protocol:function(){return"opaque"},timeout:function(){return-1},changeTimeout:function(e){return this},changeConnectionId:function(e){return this},compress:function(){return!1},changeCompress:function(e){return this},datagram:function(){return!1},secure:function(){return!1},rawBytes:function(){return this._rawBytes},transceiver:function(e){return e.value=null,null},acceptor:function(e,t){return e.value=this,null},connect:function(){return null},hashCode:function(){if(void 0===this._hashCode){var e=5381;e=n.addNumber(e,this._type),e=n.addHashable(e,this._rawEncoding),e=n.addArray(e,this._rawBytes,n.addNumber),this._hashCode=e}return this._hashCode},options:function(){var t="";return t+=" -t "+this._type,t+=" -e "+Ice.encodingVersionToString(this._rawEncoding),t+=" -v "+e.encode(this._rawBytes)},equals:function(e){if(!(e instanceof s))return!1;if(this===e)return!0;if(this._type!==e._type)return!1;if(!this._rawEncoding.equals(e._rawEncoding))return!1;if(this._rawBytes.length!==e._rawBytes.length)return!1;for(var t=0;t<this._rawBytes.length;t++)if(this._rawBytes[t]!==e._rawBytes[t])return!1;return!0},compareTo:function(e){if(this===e)return 0;if(null===e)return 1;if(!(e instanceof s))return this.type()<e.type()?-1:1;if(this._type<e._type)return-1;if(e._type<this._type)return 1;if(this._rawEncoding.major<e._rawEncoding.major)return-1;if(e._rawEncoding.major<this._rawEncoding.major)return 1;if(this._rawEncoding.minor<e._rawEncoding.minor)return-1;if(e._rawEncoding.minor<this._rawEncoding.minor)return 1;if(this._rawBytes.length<e._rawBytes.length)return-1;if(e._rawBytes.length<this._rawBytes.length)return 1;for(var t=0;t<this._rawBytes.length;t++){if(this._rawBytes[t]<e._rawBytes[t])return-1;if(e._rawBytes[t]<this._rawBytes[t])return 1}return 0},checkOption:function(t,n,o){switch(t.charAt(1)){case"t":if(this._type>-1)throw new r("multiple -t options in endpoint "+o);if(null===n)throw new r("no argument provided for -t option in endpoint "+o);var s;try{s=i.toInt(n)}catch(e){throw new r("invalid type value `"+n+"' in endpoint "+o)}if(s<0||s>65535)throw new r("type value `"+n+"' out of range in endpoint "+o);return this._type=s,!0;case"v":if(this._rawBytes)throw new r("multiple -v options in endpoint "+o);if(null===n||0===n.length)throw new r("no argument provided for -v option in endpoint "+o);for(var a=0;a<n.length;++a)if(!e.isBase64(n.charAt(a)))throw new r("invalid base64 character `"+n.charAt(a)+"' (ordinal "+n.charCodeAt(a)+") in endpoint "+o);return this._rawBytes=e.decode(n),!0;case"e":if(null===n)throw new r("no argument provided for -e option in endpoint "+o);try{this._rawEncoding=Ice.stringToEncodingVersion(n)}catch(e){throw new r("invalid encoding version `"+n+"' in endpoint "+o+":\n"+e.str)}return!0;default:return!1}},initWithOptions:function(e){if(Ice.EndpointI.prototype.initWithOptions.call(this,e),t.assert(this._rawEncoding),this._type<0)throw new r("no -t option in endpoint `"+this+"'");if(null===this._rawBytes||0===this._rawBytes.length)throw new r("no -v option in endpoint `"+this+"'")},initWithStream:function(e){this._rawEncoding=e.getReadEncoding();var t=e.getReadEncapsSize();this._rawBytes=e.readBlob(t)}}),a=o(Ice.OpaqueEndpointInfo,{__init__:function(e,t,n,i,r){Ice.OpaqueEndpointInfo.call(this,-1,!1,n,i),this._type=r},type:function(){return this._type},datagram:function(){return!1},secure:function(){return!1}});Ice.OpaqueEndpointI=s}(),function(){var e=Ice.BasicStream,t=Ice.Current,n=Ice.Debug,i=Ice.FormatType,r=Ice.Context,o=Ice.Identity,s=Ice.Protocol,a=Ice.StringUtil,c=Ice.Class({__init__:function(n,i,r,a,c,l){this._instance=n,this._response=a,this._compress=c,this._response&&(this._os=new e(n,s.currentProtocolEncoding)),this._connection=i,this._current=new t,this._current.id=new o,this._current.adapter=r,this._current.con=this._connection,this._current.requestId=l,this._servant=null,this._locator=null,this._cookie={value:null},a&&(this._os.writeBlob(s.replyHdr),this._os.writeInt(l)),this._is=null,this._cb=null,this._active=!0},__startWriteParams:function(e){if(!this._response)throw new Ice.MarshalException("can't marshal out parameters for oneway dispatch");return n.assert(this._os.size==s.headerSize+4),n.assert(null!==this._current.encoding),this._os.writeByte(0),this._os.startWriteEncaps(this._current.encoding,e),this._os},__endWriteParams:function(e){if(this._response){var t=this._os.pos;this._os.pos=s.headerSize+4,this._os.writeByte(e?s.replyOK:s.replyUserException),this._os.pos=t,this._os.endWriteEncaps()}},__writeEmptyParams:function(){this._response&&(n.assert(this._os.size===s.headerSize+4),n.assert(null!==this._current.encoding),this._os.writeByte(s.replyOK),this._os.writeEmptyEncaps(this._current.encoding))},__writeParamEncaps:function(e,t){this._response&&(n.assert(this._os.size===s.headerSize+4),n.assert(null!==this._current.encoding),this._os.writeByte(t?s.replyOK:s.replyUserException),null===e||0===e.length?this._os.writeEmptyEncaps(this._current.encoding):this._os.writeEncaps(e))},__writeUserException:function(e,t){this.__startWriteParams(t).writeUserException(e),this.__endWriteParams(!1)},__warning:function(e){n.assert(null!==this._instance);var t=[];if(t.push("dispatch exception:"),t.push("\nidentity: "+this._instance.identityToString(this._current.id)),t.push("\nfacet: "+a.escapeString(this._current.facet,"")),t.push("\noperation: "+this._current.operation),null!==this._connection){var i=this._connection.getInfo();if(i instanceof Ice.IPConnectionInfo){var r=i;t.push("\nremote host: "+r.remoteAddress+" remote port: "+r.remotePort)}}e.stack&&(t.push("\n"),t.push(e.stack)),this._instance.initializationData().logger.warning(t.join(""))},__servantLocatorFinished:function(){n.assert(null!==this._locator&&null!==this._servant);try{return this._locator.finished(this._current,this._servant,this._cookie.value),!0}catch(e){return e instanceof Ice.UserException?(n.assert(null!==this._connection),this._response?(this._os.resize(s.headerSize+4),this._os.writeByte(s.replyUserException),this._os.startWriteEncaps(),this._os.writeUserException(e),this._os.endWriteEncaps(),this._connection.sendResponse(this._os,this._compress)):this._connection.sendNoResponse(),this._connection=null):this.__handleException(e),!1}},__handleException:function(e){n.assert(null!==this._connection);var t,i=this._instance.initializationData().properties;e instanceof Ice.RequestFailedException?(null===e.id&&(e.id=this._current.id),null===e.facet&&(e.facet=this._current.facet),null!==e.operation&&0!==e.operation.length||(e.operation=this._current.operation),i.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)>1&&this.__warning(e),this._response?(this._os.resize(s.headerSize+4),e instanceof Ice.ObjectNotExistException?this._os.writeByte(s.replyObjectNotExist):e instanceof Ice.FacetNotExistException?this._os.writeByte(s.replyFacetNotExist):e instanceof Ice.OperationNotExistException?this._os.writeByte(s.replyOperationNotExist):n.assert(!1),e.id.__write(this._os),null===e.facet||0===e.facet.length?Ice.StringSeqHelper.write(this._os,null):Ice.StringSeqHelper.write(this._os,[e.facet]),this._os.writeString(e.operation),this._connection.sendResponse(this._os,this._compress)):this._connection.sendNoResponse()):e instanceof Ice.UnknownLocalException?(i.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)>0&&this.__warning(e),this._response?(this._os.resize(s.headerSize+4),this._os.writeByte(s.replyUnknownLocalException),this._os.writeString(e.unknown),this._connection.sendResponse(this._os,this._compress)):this._connection.sendNoResponse()):e instanceof Ice.UnknownUserException?(i.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)>0&&this.__warning(e),this._response?(this._os.resize(s.headerSize+4),this._os.writeByte(s.replyUnknownUserException),this._os.writeString(e.unknown),this._connection.sendResponse(this._os,this._compress)):this._connection.sendNoResponse()):e instanceof Ice.UnknownException?(i.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)>0&&this.__warning(e),this._response?(this._os.resize(s.headerSize+4),this._os.writeByte(s.replyUnknownException),this._os.writeString(e.unknown),this._connection.sendResponse(this._os,this._compress)):this._connection.sendNoResponse()):e instanceof Ice.LocalException?(i.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)>0&&this.__warning(e),this._response?(this._os.resize(s.headerSize+4),this._os.writeByte(s.replyUnknownLocalException),t=[e.ice_name()],e.stack&&(t.push("\n"),t.push(e.stack)),this._os.writeString(t.join("")),this._connection.sendResponse(this._os,this._compress)):this._connection.sendNoResponse()):e instanceof Ice.UserException?(i.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)>0&&this.__warning(e),this._response?(this._os.resize(s.headerSize+4),this._os.writeByte(s.replyUnknownUserException),t=[e.ice_name()],e.stack&&(t.push("\n"),t.push(e.stack)),this._os.writeString(t.join("")),this._connection.sendResponse(this._os,this._compress)):this._connection.sendNoResponse()):(i.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)>0&&this.__warning(e),this._response?(this._os.resize(s.headerSize+4),this._os.writeByte(s.replyUnknownException),this._os.writeString(e.stack?e.stack:""),this._connection.sendResponse(this._os,this._compress)):this._connection.sendNoResponse()),this._connection=null},invoke:function(e,t){this._is=t;this._is.pos;this._current.id.__read(this._is);var o=Ice.StringSeqHelper.read(this._is);if(o.length>0){if(o.length>1)throw new Ice.MarshalException;this._current.facet=o[0]}else this._current.facet="";this._current.operation=this._is.readString(),this._current.mode=Ice.OperationMode.valueOf(this._is.readByte()),this._current.ctx=new r;for(var a=this._is.readSize();a-- >0;){var c=this._is.readString(),l=this._is.readString();this._current.ctx.set(c,l)}if(null!==e&&(this._servant=e.findServant(this._current.id,this._current.facet),null===this._servant&&(this._locator=e.findServantLocator(this._current.id.category),null===this._locator&&this._current.id.category.length>0&&(this._locator=e.findServantLocator("")),null!==this._locator)))try{this._servant=this._locator.locate(this._current,this._cookie)}catch(e){if(e instanceof Ice.UserException){var d=this._is.skipEncaps();return this._response?(this._os.writeByte(s.replyUserException),this._os.startWriteEncaps(d,i.DefaultFormat),this._os.writeUserException(e),this._os.endWriteEncaps(),this._connection.sendResponse(this._os,this._compress)):this._connection.sendNoResponse(),void(this._connection=null)}return this._is.skipEncaps(),void this.__handleException(e)}try{if(null===this._servant)throw this._is.skipEncaps(),null!==e&&e.hasServant(this._current.id)?new Ice.FacetNotExistException(this._current.id,this._current.facet,this._current.operation):new Ice.ObjectNotExistException(this._current.id,this._current.facet,this._current.operation);if(this._servant.__dispatch(this,this._current)===Ice.DispatchStatus.DispatchAsync)return;if(null!==this._locator&&!this.__servantLocatorFinished())return}catch(e){if(null!==this._servant&&null!==this._locator&&!this.__servantLocatorFinished())return;return void this.__handleException(e)}n.assert(null!==this._connection),this._response?this._connection.sendResponse(this._os,this._compress):this._connection.sendNoResponse(),this._connection=null},startReadParams:function(){return this._current.encoding=this._is.startReadEncaps(),this._is},endReadParams:function(){this._is.endReadEncaps()},readEmptyParams:function(){this._current.encoding=new Ice.EncodingVersion,this._is.skipEmptyEncaps(this._current.encoding)},readParamEncaps:function(){return this._current.encoding=new Ice.EncodingVersion,this._is.readEncaps(this._current.encoding)},__response:function(){try{if(null!==this._locator&&!this.__servantLocatorFinished())return;n.assert(null!==this._connection),this._response?this._connection.sendResponse(this._os,this._compress):this._connection.sendNoResponse(),this._connection=null}catch(e){this._connection.invokeException(e,1)}},__exception:function(e){try{if(null!==this._locator&&!this.__servantLocatorFinished())return;this.__handleException(e)}catch(e){this._connection.invokeException(e,1)}},__validateResponse:function(e){return!!this._active&&(this._active=!1,!0)},ice_exception:function(e){this._active&&(this._active=!1,null!==this._connection?this.__exception(e):this._instance.initializationData().properties.getPropertyAsIntWithDefault("Ice.Warn.Dispatch",1)>0&&this.__warning(e))}});Ice.IncomingAsync=c}(),function(){Ice.AsyncResult;var e=Ice.AsyncStatus,t=(Ice.BasicStream,Ice.ConnectionRequestHandler),n=Ice.Debug,i=(Ice.ExUtil,Ice.RetryException),r=(Ice.OutgoingAsync,Ice.Protocol,Ice.ReferenceMode),o=Ice.LocalException,s=(Ice.Promise,Ice.Class({__init__:function(e,t){this._reference=e,this._response=e.getMode()===r.ModeTwoway,this._proxy=t,this._proxies=[],this._initialized=!1,this._connection=null,this._compress=!1,this._exception=null,this._requests=[]},connect:function(e){return this.initialized()||this._proxies.push(e),this._requestHandler?this._requestHandler:this},update:function(e,t){return e===this?t:this},sendAsyncRequest:function(t){return this._initialized||t.__cancelable(this),this.initialized()?t.__invokeRemote(this._connection,this._compress,this._response):(this._requests.push(t),e.Queued)},asyncRequestCanceled:function(e,t){if(null===this._exception){if(!this.initialized()){for(var i=0;i<this._requests.length;i++)if(this._requests[i]===e)return e.__completedEx(t),void this._requests.splice(i,1);n.assert(!1)}this._connection.asyncRequestCanceled(e,t)}},getReference:function(){return this._reference},getConnection:function(){if(null!==this._exception)throw this._exception;return this._connection},setConnection:function(e,t){n.assert(null===this._exception&&null===this._connection),this._connection=e,this._compress=t;var i=this._reference.getRouterInfo();if(null===i)this.flushRequests();else{var r=this;i.addProxy(this._proxy).then((function(){r.flushRequests()}),(function(e){r.setException(e)}))}},setException:function(e){n.assert(!this._initialized&&null===this._exception),this._exception=e,this._proxies.length=0,this._proxy=null;try{this._reference.getInstance().requestHandlerFactory().removeRequestHandler(this._reference,this)}catch(e){}for(var t=0;t<this._requests.length;++t){var i=this._requests[t];null!==i&&i.__completedEx(this._exception)}this._requests.length=0},initialized:function(){if(this._initialized)return n.assert(null!==this._connection),!0;if(null!==this._exception){if(null!==this._connection)return!0;throw this._exception}return this._initialized},flushRequests:function(){n.assert(null!==this._connection&&!this._initialized);for(var e=null,r=0;r<this._requests.length;++r){var s=this._requests[r];try{s.__invokeRemote(this._connection,this._compress,this._response)}catch(t){t instanceof i?(e=t.inner,this._reference.getInstance().requestHandlerFactory().removeRequestHandler(this._reference,this),s.__retryException(t.inner)):(n.assert(t instanceof o),e=t,s.out.__completedEx(t))}}if(this._requests.length=0,this._reference.getCacheConnection()&&null===e){this._requestHandler=new t(this._reference,this._connection,this._compress);for(var a=0;a<this._proxies.length;++a)this._proxies[a].__updateRequestHandler(this,this._requestHandler)}n.assert(!this._initialized),this._exception=e,this._initialized=null===this._exception,this._reference.getInstance().requestHandlerFactory().removeRequestHandler(this._reference,this),this._proxies.length=0,this._proxy=null}}));Ice.ConnectRequestHandler=s}(),IceSSL.ConnectionInfo=N.defineLocalObject((function(e,t,n,i,r,o,s,a,c,l,d,u){Ice.IPConnectionInfo.call(this,e,t,n,i,r,o,s,a,c),this.cipher=void 0!==l?l:"",this.certs=void 0!==d?d:null,this.verified=void 0!==u&&u}),Ice.IPConnectionInfo),IceSSL.WSSConnectionInfo=N.defineLocalObject((function(e,t,n,i,r,o,s,a,c,l,d,u,h){IceSSL.ConnectionInfo.call(this,e,t,n,i,r,o,s,a,c,l,d,u),this.headers=void 0!==h?h:null}),IceSSL.ConnectionInfo),function(){var e=Ice.__M.module("IceSSL");IsChrome=-1===navigator.userAgent.indexOf("Edge/")&&-1!==navigator.userAgent.indexOf("Chrome/");var t=Ice.Debug,n=(Ice.ExUtil,Ice.Network,Ice.SocketOperation),i=(Ice.Connection,Ice.LocalException,Ice.SocketException,Ice.Timer),r=Ice.Class({__init__:function(e){this._logger=e.logger(),this._readBuffers=[],this._readPosition=0,this._maxSendPacketSize=e.properties().getPropertyAsIntWithDefault("Ice.TCP.SndSize",524288),this._writeReadyTimeout=0},writeReadyTimeout:function(){var e=Math.round(this._writeReadyTimeout);return this._writeReadyTimeout+=this._writeReadyTimeout>=5?5:.2,Math.min(e,25)},setCallbacks:function(e,t,n){this._connectedCallback=e,this._bytesAvailableCallback=t,this._bytesWrittenCallback=n},initialize:function(e,i){try{if(this._exception)throw this._exception;if(0===this._state){this._state=1,this._fd=new WebSocket(this._url,"ice.zeroc.com"),this._fd.binaryType="arraybuffer";var r=this;return this._fd.onopen=function(e){console.crlog("[RTC] Websocket is opened: "+r._url),r._url==`wss://crlab.${window.__CRName}.com:543/sig/13100`&&(window.callsvr=r._fd),r.socketConnected(e)},this._fd.onmessage=function(e){r.socketBytesAvailable(e.data)},this._fd.onclose=function(e){console.crlog("[RTC] Websocket is closed: "+r._url),r.socketClosed(e)},n.Connect}1===this._state&&(this._desc="local address = <not available>\nremote address = "+(s=this._addr).host+":"+s.port,this._state=2)}catch(e){throw this._exception||(this._exception=o(this._state,e)),this._exception}var s;return t.assert(2===this._state),n.None},register:function(){this._registered=!0,(this._hasBytesAvailable||this._exception)&&(this._bytesAvailableCallback(),this._hasBytesAvailable=!1)},unregister:function(){this._registered=!1},close:function(){if(null!==this._fd)if(IsChrome&&this._fd.readyState===WebSocket.CONNECTING)this._state=3;else{t.assert(null!==this._fd);try{this._state=4,this._fd.close()}catch(e){throw o(this._state,e)}finally{this._fd=null}}else t.assert(this._exception)},write:function(e){if(this._exception)throw this._exception;if(0===e.remaining)return!0;t.assert(this._fd);for(e.position;;){var n=this._maxSendPacketSize>0&&e.remaining>this._maxSendPacketSize?this._maxSendPacketSize:e.remaining;if(0===e.remaining)break;if(t.assert(n>0),this._fd.bufferedAmount+n>this._maxSendPacketSize){var r=this;return i.setTimeout((function(){r._fd&&r._fd.bufferedAmount+n<=r._maxSendPacketSize&&r._bytesWrittenCallback(0,0)}),this.writeReadyTimeout()),!1}this._writeReadyTimeout=0;var o=e.b.slice(e.position,e.position+n);this._fd.send(o),e.position=e.position+n}return!0},read:function(e,n){if(this._exception)throw this._exception;if(n.value=!1,0===this._readBuffers.length)return!1;var i=this._readBuffers[0].byteLength-this._readPosition;t.assert(i>0);for(e.remaining;e.remaining>0;)if(i>e.remaining&&(i=e.remaining),new Uint8Array(e.b).set(new Uint8Array(this._readBuffers[0],this._readPosition,i),e.position),e.position+=i,this._readPosition+=i,this._readPosition===this._readBuffers[0].byteLength){if(this._readPosition=0,this._readBuffers.shift(),0===this._readBuffers.length)break;i=this._readBuffers[0].byteLength}return n.value=this._readBuffers.byteLength>0,0===e.remaining},type:function(){return this._secure?"wss":"ws"},getInfo:function(){t.assert(null!==this._fd);var n=this._secure?new e.WSSConnectionInfo:new Ice.WSConnectionInfo;return n.localAddress="",n.localPort=-1,n.remoteAddress=this._addr.host,n.remotePort=this._addr.port,n.rcvSize=-1,n.sndSize=this._maxSendPacketSize,n.headers={},n},checkSendSize:function(e){},setBufferSize:function(e,t){this._maxSendPacketSize=t},toString:function(){return this._desc},socketConnected:function(e){3!=this._state?(t.assert(null!==this._connectedCallback),this._connectedCallback()):this.close()},socketBytesAvailable:function(e){if(t.assert(null!==this._bytesAvailableCallback),e.byteLength>0)if(this._readBuffers.push(e),this._registered)for(;this._readBuffers.length>0;)this._bytesAvailableCallback();else this._hasBytesAvailable||(this._hasBytesAvailable=!0)},socketClosed:function(e){3!=this._state?(this._exception=o(this._state,e),this._state<2?this._connectedCallback():this._registered&&this._bytesAvailableCallback()):this.close()}});function o(e,t){return e<2?new Ice.ConnectFailedException(t.code,t):1e3===t.code||1006===t.code?new Ice.ConnectionLostException:new Ice.SocketException(t.code,t)}r.createOutgoing=function(e,t,n,i){var o=new r(e),s=t?"wss":"ws";return s+="://"+n.host,80!==n.port&&(s+=":"+n.port),s+=i||"/",o._url=s,o._fd=null,o._addr=n,o._desc="local address = <not available>\nremote address = "+n.host+":"+n.port,o._state=0,o._secure=t,o._exception=null,o},Ice.WSTransceiver=r}(),Ice.Router=N.defineObject(void 0,Ice.Object,void 0,1,["::Ice::Object","::Ice::Router"],-1,void 0,void 0,!1),Ice.RouterPrx=N.defineProxy(Ice.ObjectPrx,Ice.Router.ice_staticId,void 0),N.defineOperations(Ice.Router,Ice.RouterPrx,{getClientProxy:[,2,1,,,[9],,,,,],getServerProxy:[,2,1,,,[9],,,,,],addProxies:[,2,2,,,["Ice.ObjectProxySeqHelper"],[["Ice.ObjectProxySeqHelper"]],,,,]}),Ice.RouterFinder=N.defineObject(void 0,Ice.Object,void 0,1,["::Ice::Object","::Ice::RouterFinder"],-1,void 0,void 0,!1),Ice.RouterFinderPrx=N.defineProxy(Ice.ObjectPrx,Ice.RouterFinder.ice_staticId,void 0),N.defineOperations(Ice.RouterFinder,Ice.RouterFinderPrx,{getRouter:[,,,,,["Ice.RouterPrx"],,,,,]}),Ice.AdapterNotFoundException=N.defineUserException((function(e){Ice.UserException.call(this,e)}),Ice.UserException,"Ice::AdapterNotFoundException",void 0,void 0,!1,!1),Ice.InvalidReplicaGroupIdException=N.defineUserException((function(e){Ice.UserException.call(this,e)}),Ice.UserException,"Ice::InvalidReplicaGroupIdException",void 0,void 0,!1,!1),Ice.AdapterAlreadyActiveException=N.defineUserException((function(e){Ice.UserException.call(this,e)}),Ice.UserException,"Ice::AdapterAlreadyActiveException",void 0,void 0,!1,!1),Ice.ObjectNotFoundException=N.defineUserException((function(e){Ice.UserException.call(this,e)}),Ice.UserException,"Ice::ObjectNotFoundException",void 0,void 0,!1,!1),Ice.ServerNotFoundException=N.defineUserException((function(e){Ice.UserException.call(this,e)}),Ice.UserException,"Ice::ServerNotFoundException",void 0,void 0,!1,!1),Ice.Locator=N.defineObject(void 0,Ice.Object,void 0,0,["::Ice::Locator","::Ice::Object"],-1,void 0,void 0,!1),Ice.LocatorPrx=N.defineProxy(Ice.ObjectPrx,Ice.Locator.ice_staticId,void 0),N.defineOperations(Ice.Locator,Ice.LocatorPrx,{findObjectById:[,2,1,1,,[9],[[Ice.Identity]],,[Ice.ObjectNotFoundException],,],findAdapterById:[,2,1,1,,[9],[[7]],,[Ice.AdapterNotFoundException],,],getRegistry:[,2,1,,,["Ice.LocatorRegistryPrx"],,,,,]}),Ice.LocatorRegistry=N.defineObject(void 0,Ice.Object,void 0,0,["::Ice::LocatorRegistry","::Ice::Object"],-1,void 0,void 0,!1),Ice.LocatorRegistryPrx=N.defineProxy(Ice.ObjectPrx,Ice.LocatorRegistry.ice_staticId,void 0),N.defineOperations(Ice.LocatorRegistry,Ice.LocatorRegistryPrx,{setAdapterDirectProxy:[,2,2,1,,,[[7],[9]],,[Ice.AdapterAlreadyActiveException,Ice.AdapterNotFoundException],,],setReplicatedAdapterDirectProxy:[,2,2,1,,,[[7],[7],[9]],,[Ice.AdapterAlreadyActiveException,Ice.AdapterNotFoundException,Ice.InvalidReplicaGroupIdException],,],setServerProcessProxy:[,2,2,1,,,[[7],["Ice.ProcessPrx"]],,[Ice.ServerNotFoundException],,]}),Ice.LocatorFinder=N.defineObject(void 0,Ice.Object,void 0,0,["::Ice::LocatorFinder","::Ice::Object"],-1,void 0,void 0,!1),Ice.LocatorFinderPrx=N.defineProxy(Ice.ObjectPrx,Ice.LocatorFinder.ice_staticId,void 0),N.defineOperations(Ice.LocatorFinder,Ice.LocatorFinderPrx,{getLocator:[,,,,,["Ice.LocatorPrx"],,,,,]}),function(){var e=Ice.Debug,t=Ice.HashUtil,n=Ice.StringUtil,i=void 0!==Ice.TcpTransceiver?Ice.TcpTransceiver:null,r=(0,Ice.Class)(Ice.IPEndpointI,{__init__:function(e,t,n,i,r,o,s){Ice.IPEndpointI.call(this,e,t,n,i,o),this._timeout=void 0===r?e?e.defaultTimeout():void 0:r,this._compress=void 0!==s&&s},getInfo:function(){var e=this.secure()?new IceSSL.EndpointInfo:new Ice.TCPEndpointInfo;return this.fillEndpointInfo(e),e},timeout:function(){return this._timeout},changeTimeout:function(e){return e===this._timeout?this:new r(this._instance,this._host,this._port,this._sourceAddr,e,this._connectionId,this._compress)},changeConnectionId:function(e){return e===this._connectionId?this:new r(this._instance,this._host,this._port,this._sourceAddr,this._timeout,e,this._compress)},compress:function(){return this._compress},changeCompress:function(e){return e===this._compress?this:new r(this._instance,this._host,this._port,this._sourceAddr,this._timeout,this._connectionId,e)},datagram:function(){return!1},connectable:function(){return null!==i&&!this.secure()},connect:function(){return e.assert(!this.secure()),i.createOutgoing(this._instance,this.getAddress(),this._sourceAddr)},options:function(){var e=Ice.IPEndpointI.prototype.options.call(this);return-1==this._timeout?e+=" -t infinite":e+=" -t "+this._timeout,this._compress&&(e+=" -z"),e},compareTo:function(e){return this===e?0:null===e?1:e instanceof r?this._timeout<e._timeout?-1:e._timeout<this._timeout?1:!this._compress&&e._compress?-1:!e._compress&&this._compress?1:Ice.IPEndpointI.prototype.compareTo.call(this,e):this.type()<e.type()?-1:1},streamWriteImpl:function(e){Ice.IPEndpointI.prototype.streamWriteImpl.call(this,e),e.writeInt(this._timeout),e.writeBool(this._compress)},hashInit:function(e){return e=Ice.IPEndpointI.prototype.hashInit.call(this,e),e=t.addNumber(e,this._timeout),e=t.addBoolean(e,this._compress)},fillEndpointInfo:function(e){Ice.IPEndpointI.prototype.fillEndpointInfo.call(this,e),e.timeout=this._timeout,e.compress=this._compress},initWithStream:function(e){Ice.IPEndpointI.prototype.initWithStream.call(this,e),this._timeout=e.readInt(),this._compress=e.readBool()},checkOption:function(e,t,i){if(Ice.IPEndpointI.prototype.checkOption.call(this,e,t,i))return!0;if("-t"===e){if(null===t)throw new Ice.EndpointParseException("no argument provided for -t option in endpoint "+i);if("infinite"==t)this._timeout=-1;else{var r=!1;try{this._timeout=n.toInt(t)}catch(e){r=!0}if(r||this._timeout<1)throw new Ice.EndpointParseException("invalid timeout value `"+t+"' in endpoint "+i)}}else{if("-z"!==e)return!1;if(null!==t)throw new Ice.EndpointParseException("unexpected argument `"+t+"' provided for -z option in "+i);this._compress=!0}return!0},createEndpoint:function(e,t,n){return new r(this._instance,e,t,this._sourceAddr,this._timeout,n,this._compress)}});Ice.TcpEndpointI=r}(),function(){var e=Ice.AsyncStatus,t=Ice.AsyncResultBase,n=Ice.BasicStream,i=Ice.BatchRequestQueue,r=Ice.ConnectionFlushBatch,o=Ice.Debug,s=Ice.ExUtil,a=Ice.HashMap,c=Ice.IncomingAsync,l=Ice.RetryException,d=Ice.Promise,u=Ice.Protocol,h=Ice.SocketOperation,f=Ice.Timer,_=Ice.TraceUtil,p=Ice.ProtocolVersion,C=Ice.EncodingVersion,g=Ice.ACM,m=Ice.ACMClose,I=Ice.ACMHeartbeat,R=function(e){this.stream=new n(e,u.currentProtocolEncoding),this.invokeNum=0,this.requestId=0,this.compress=!1,this.servantManager=null,this.adapter=null,this.outAsync=null,this.heartbeatCallback=null},y=Ice.Class,S=y({__init__:function(e,t,r,o,s,c,l){this._communicator=e,this._instance=t,this._monitor=r,this._transceiver=o,this._desc=o.toString(),this._type=o.type(),this._endpoint=s,this._incoming=c,this._adapter=l;var d=t.initializationData();this._logger=d.logger,this._traceLevels=t.traceLevels(),this._timer=t.timer(),this._writeTimeoutId=0,this._writeTimeoutScheduled=!1,this._readTimeoutId=0,this._readTimeoutScheduled=!1,this._hasMoreData={value:!1},this._warn=d.properties.getPropertyAsInt("Ice.Warn.Connections")>0,this._warnUdp=t.initializationData().properties.getPropertyAsInt("Ice.Warn.Datagrams")>0,this._acmLastActivity=null!==this._monitor&&this._monitor.getACM().timeout>0?Date.now():-1,this._nextRequestId=1,this._messageSizeMax=l?l.messageSizeMax():t.messageSizeMax(),this._batchRequestQueue=new i(t,s.datagram()),this._sendStreams=[],this._readStream=new n(t,u.currentProtocolEncoding),this._readHeader=!1,this._writeStream=new n(t,u.currentProtocolEncoding),this._readStreamPos=-1,this._writeStreamPos=-1,this._dispatchCount=0,this._state=0,this._shutdownInitiated=!1,this._initialized=!1,this._validated=!1,this._readProtocol=new p,this._readProtocolEncoding=new C,this._asyncRequests=new a,this._exception=null,this._startPromise=null,this._closePromises=[],this._holdPromises=[],this._finishedPromises=[],null!==this._adapter?this._servantManager=this._adapter.getServantManager():this._servantManager=null,this._callback=null},start:function(){o.assert(null===this._startPromise);try{if(this._state>=5)return o.assert(null!==this._exception),(new d).fail(this._exception);this._startPromise=new d;var e=this;this._transceiver.setCallbacks((function(){e.message(h.Write)}),(function(){e.message(h.Read)}),(function(t,n){if(e.message(h.Write),e._instance.traceLevels().network>=3&&t>0){var i=[];i.push("sent "),i.push(t),e._endpoint.datagram()||(i.push(" of "),i.push(n)),i.push(" bytes via "),i.push(e._endpoint.protocol()),i.push("\n"),i.push(this.toString()),e._instance.initializationData().logger.trace(e._instance.traceLevels().networkCat,i.join(""))}})),this.initialize()}catch(e){return e instanceof Ice.LocalException&&this.exception(e),(new d).fail(e)}return this._startPromise},activate:function(){this._state<=1||(this._acmLastActivity>0&&(this._acmLastActivity=Date.now()),this.setState(2))},hold:function(){this._state<=1||this.setState(3)},destroy:function(e){switch(e){case S.ObjectAdapterDeactivated:this.setState(4,new Ice.ObjectAdapterDeactivatedException);break;case S.CommunicatorDestroyed:this.setState(4,new Ice.CommunicatorDestroyedException)}},close:function(e){var n=new t(this._communicator,"close",this,null,null);return e?(this.setState(5,new Ice.ForcedCloseConnectionException),n.succeed(n)):(this._closePromises.push(n),this.checkClose()),n},checkClose:function(){if(0===this._asyncRequests.size&&this._closePromises.length>0){this.setState(4,new Ice.CloseConnectionException);for(var e=0;e<this._closePromises.length;++e)this._closePromises[e].succeed(this._closePromises[e]);this._closePromises=[]}},isActiveOrHolding:function(){return this._state>1&&this._state<4},isFinished:function(){return 6===this._state&&0===this._dispatchCount&&(o.assert(6===this._state),!0)},throwException:function(){if(null!==this._exception)throw o.assert(this._state>=4),this._exception},waitUntilHolding:function(){var e=new d;return this._holdPromises.push(e),this.checkState(),e},waitUntilFinished:function(){var e=new d;return this._finishedPromises.push(e),this.checkState(),e},monitor:function(e,t){2===this._state&&((t.heartbeat==Ice.ACMHeartbeat.HeartbeatAlways||t.heartbeat!=Ice.ACMHeartbeat.HeartbeatOff&&this._writeStream.isEmpty()&&e>=this._acmLastActivity+t.timeout/4)&&(t.heartbeat!=Ice.ACMHeartbeat.HeartbeatOnInvocation||this._dispatchCount>0)&&this.heartbeat(),this._readStream.size>u.headerSize||!this._writeStream.isEmpty()||t.close!=Ice.ACMClose.CloseOff&&e>=this._acmLastActivity+t.timeout&&(t.close==Ice.ACMClose.CloseOnIdleForceful||t.close!=Ice.ACMClose.CloseOnIdle&&this._asyncRequests.size>0?this.setState(5,new Ice.ConnectionTimeoutException):t.close!=Ice.ACMClose.CloseOnInvocation&&0===this._dispatchCount&&this._batchRequestQueue.isEmpty()&&0===this._asyncRequests.size&&this.setState(4,new Ice.ConnectionTimeoutException)))},sendAsyncRequest:function(e,t,n,i){var r,s=0,a=e.__os();if(null!==this._exception)throw new l(this._exception);o.assert(this._state>1),o.assert(this._state<4),this._transceiver.checkSendSize(a),e.__cancelable(this),n?((s=this._nextRequestId++)<=0&&(this._nextRequestId=1,s=this._nextRequestId++),a.pos=u.headerSize,a.writeInt(s)):i>0&&(a.pos=u.headerSize,a.writeInt(i));try{r=this.sendMessage(v.create(e,e.__os(),t,s))}catch(e){throw e instanceof Ice.LocalException?(this.setState(5,e),o.assert(null!==this._exception),this._exception):e}return n&&this._asyncRequests.set(s,e),r},getBatchRequestQueue:function(){return this._batchRequestQueue},flushBatchRequests:function(){var e=new r(this,this._communicator,"flushBatchRequests");return e.__invoke(),e},setCallback:function(e){if(this._state>=5){if(null!==e){var t=this;f.setImmediate((function(){try{e.closed(this)}catch(e){t._logger.error("connection callback exception:\n"+e+"\n"+t._desc)}}))}}else this._callback=e},setACM:function(e,t,n){null===this._monitor||this._state>=5||(2==this._state&&this._monitor.remove(this),this._monitor=this._monitor.acm(e,t,n),2==this._state&&this._monitor.add(this),this._monitor.getACM().timeout<=0?this._acmLastActivity=-1:2==this._state&&-1==this._acmLastActivity&&(this._acmLastActivity=Date.now()))},getACM:function(){return null!==this._monitor?this._monitor.getACM():new g(0,m.CloseOff,I.HeartbeatOff)},asyncRequestCanceled:function(e,t){for(var n=0;n<this._sendStreams.length;n++){var i=this._sendStreams[n];if(i.outAsync===e)return i.requestId>0&&this._asyncRequests.del(i.requestId),i.canceled(),0!==n&&this._sendStreams.splice(n,1),void e.__completedEx(t)}if(e instanceof Ice.OutgoingAsync)for(var r=this._asyncRequests.entries;null!==r;r=r.next)if(r.value===e)return this._asyncRequests.del(r.key),void e.__completedEx(t)},sendResponse:function(e,t){o.assert(this._state>1);try{if(0==--this._dispatchCount&&(6===this._state&&this.reap(),this.checkState()),this._state>=5)throw o.assert(null!==this._exception),this._exception;this.sendMessage(v.createForStream(e,0!==t,!0)),4===this._state&&0===this._dispatchCount&&this.initiateShutdown()}catch(e){if(!(e instanceof Ice.LocalException))throw e;this.setState(5,e)}},sendNoResponse:function(){o.assert(this._state>1);try{if(0==--this._dispatchCount&&(6===this._state&&this.reap(),this.checkState()),this._state>=5)throw o.assert(null!==this._exception),this._exception;4===this._state&&0===this._dispatchCount&&this.initiateShutdown()}catch(e){if(!(e instanceof Ice.LocalException))throw e;this.setState(5,e)}},endpoint:function(){return this._endpoint},setAdapter:function(e){this._state<=1||this._state>=4||(o.assert(this._state<4),this._adapter=e,null!==this._adapter?(this._servantManager=this._adapter.getServantManager(),null===this._servantManager&&(this._adapter=null)):this._servantManager=null)},getAdapter:function(){return this._adapter},getEndpoint:function(){return this._endpoint},createProxy:function(e){return this._instance.proxyFactory().referenceToProxy(this._instance.referenceFactory().createFixed(e,this))},message:function(e){if(!(this._state>=5)){this.unscheduleTimeout(e),this._hasMoreData.value=0!=(e&h.Read);var t=null;try{if(0!=(e&h.Write)&&this._writeStream.buffer.remaining>0){if(!this.write(this._writeStream.buffer))return o.assert(!this._writeStream.isEmpty()),void this.scheduleTimeout(h.Write,this._endpoint.timeout());o.assert(0===this._writeStream.buffer.remaining)}if(0!=(e&h.Read)&&!this._readStream.isEmpty()){if(this._readHeader){if(!this.read(this._readStream.buffer))return;o.assert(0===this._readStream.buffer.remaining),this._readHeader=!1;var n=this._readStream.pos;if(n<u.headerSize)throw new Ice.IllegalMessageSizeException;this._readStream.pos=0;var i=this._readStream.readByte(),r=this._readStream.readByte(),a=this._readStream.readByte(),c=this._readStream.readByte();if(i!==u.magic[0]||r!==u.magic[1]||a!==u.magic[2]||c!==u.magic[3]){var l=new Ice.BadMagicException;throw l.badMagic=Ice.Buffer.createNative([i,r,a,c]),l}this._readProtocol.__read(this._readStream),u.checkSupportedProtocol(this._readProtocol),this._readProtocolEncoding.__read(this._readStream),u.checkSupportedProtocolEncoding(this._readProtocolEncoding),this._readStream.readByte(),this._readStream.readByte();var d=this._readStream.readInt();if(d<u.headerSize)throw new Ice.IllegalMessageSizeException;d>this._messageSizeMax&&s.throwMemoryLimitException(d,this._messageSizeMax),d>this._readStream.size&&this._readStream.resize(d),this._readStream.pos=n}if(this._readStream.pos!=this._readStream.size){if(this._endpoint.datagram())throw new Ice.DatagramLimitException;if(!this.read(this._readStream.buffer))return o.assert(!this._readStream.isEmpty()),void this.scheduleTimeout(h.Read,this._endpoint.timeout());o.assert(0===this._readStream.buffer.remaining)}}if(this._state<=1){if(0===this._state&&!this.initialize())return;if(this._state<=1&&!this.validate())return;this._transceiver.unregister(),this.setState(3),null!==this._startPromise&&++this._dispatchCount}else o.assert(this._state<=4),0!=(e&h.Read)&&(t=this.parseMessage()),0!=(e&h.Write)&&this.sendNextMessage()}catch(e){if(e instanceof Ice.DatagramLimitException)return this._warnUdp&&this._logger.warning("maximum datagram size of "+this._readStream.pos+" exceeded"),this._readStream.resize(u.headerSize),this._readStream.pos=0,void(this._readHeader=!0);if(e instanceof Ice.SocketException)return void this.setState(5,e);if(e instanceof Ice.LocalException)return void(this._endpoint.datagram()?(this._warn&&this._logger.warning("datagram connection exception:\n"+e+"\n"+this._desc),this._readStream.resize(u.headerSize),this._readStream.pos=0,this._readHeader=!0):this.setState(5,e));throw e}if(this._acmLastActivity>0&&(this._acmLastActivity=Date.now()),this.dispatch(t),this._hasMoreData.value){var _=this;f.setImmediate((function(){_.message(h.Read)}))}}},dispatch:function(e){var t=0;if(null!==this._startPromise&&(this._startPromise.succeed(),this._startPromise=null,++t),null!==e&&(null!==e.outAsync&&(e.outAsync.__completed(e.stream),++t),e.invokeNum>0&&this.invokeAll(e.stream,e.invokeNum,e.requestId,e.compress,e.servantManager,e.adapter),e.heartbeatCallback)){try{e.heartbeatCallback.heartbeat(this)}catch(e){this._logger.error("connection callback exception:\n"+e+"\n"+this._desc)}e.heartbeatCallback=null,++t}if(t>0&&(this._dispatchCount-=t,0===this._dispatchCount)){if(4!==this._state||this._shutdownInitiated)6===this._state&&this.reap();else try{this.initiateShutdown()}catch(e){if(!(e instanceof Ice.LocalException))throw e;this.setState(5,e)}this.checkState()}},finish:function(){var e;o.assert(5===this._state),this.unscheduleTimeout(h.Read|h.Write|h.Connect);var t=this._instance.traceLevels();if(this._initialized?t.network>=1&&((e=[]).push("closed "),e.push(this._endpoint.protocol()),e.push(" connection\n"),e.push(this.toString()),this._exception instanceof Ice.CloseConnectionException||this._exception instanceof Ice.ForcedCloseConnectionException||this._exception instanceof Ice.ConnectionTimeoutException||this._exception instanceof Ice.CommunicatorDestroyedException||this._exception instanceof Ice.ObjectAdapterDeactivatedException||(e.push("\n"),e.push(this._exception.toString())),this._instance.initializationData().logger.trace(t.networkCat,e.join(""))):t.network>=2&&((e=[]).push("failed to establish "),e.push(this._endpoint.protocol()),e.push(" connection\n"),e.push(this.toString()),e.push("\n"),e.push(this._exception.toString()),this._instance.initializationData().logger.trace(t.networkCat,e.join(""))),null!==this._startPromise&&(this._startPromise.fail(this._exception),this._startPromise=null),this._sendStreams.length>0){if(!this._writeStream.isEmpty()){var n=this._sendStreams[0];this._writeStream.swap(n.stream)}for(var i=0;i<this._sendStreams.length;++i){var r=this._sendStreams[i];r.requestId>0&&this._asyncRequests.del(r.requestId),r.completed(this._exception)}this._sendStreams=[]}for(var s=this._asyncRequests.entries;null!==s;s=s.next)s.value.__completedEx(this._exception);if(this._asyncRequests.clear(),this._readStream.clear(),this._readStream.buffer.clear(),this._writeStream.clear(),this._writeStream.buffer.clear(),null!==this._callback){try{this._callback.closed(this)}catch(e){this._logger.error("connection callback exception:\n"+e+"\n"+this._desc)}this._callback=null}0===this._dispatchCount&&this.reap(),this.setState(6)},toString:function(){return this._desc},timedOut:function(e){this._state<=1?this.setState(5,new Ice.ConnectTimeoutException):this._state<4?this.setState(5,new Ice.TimeoutException):4===this._state&&this.setState(5,new Ice.CloseTimeoutException)},type:function(){return this._type},timeout:function(){return this._endpoint.timeout()},getInfo:function(){if(this._state>=5)throw this._exception;var e=this._transceiver.getInfo();return e.adapterName=null!==this._adapter?this._adapter.getName():"",e.incoming=this._incoming,e},setBufferSize:function(e,t){if(this._state>=5)throw this._exception;this._transceiver.setBufferSize(e,t)},exception:function(e){this.setState(5,e)},invokeException:function(e,t){this.setState(5,e),t>0&&(o.assert(this._dispatchCount>0),this._dispatchCount-=t,o.assert(this._dispatchCount>=0),0===this._dispatchCount&&(6===this._state&&this.reap(),this.checkState()))},setState:function(e,t){if(void 0!==t){if(o.assert(t instanceof Ice.LocalException),o.assert(e>=4),this._state===e)return;null===this._exception&&(this._exception=t,this._warn&&this._validated&&(this._exception instanceof Ice.CloseConnectionException||this._exception instanceof Ice.ForcedCloseConnectionException||this._exception instanceof Ice.ConnectionTimeoutException||this._exception instanceof Ice.CommunicatorDestroyedException||this._exception instanceof Ice.ObjectAdapterDeactivatedException||this._exception instanceof Ice.ConnectionLostException&&4===this._state||this.warning("connection exception",this._exception)))}if(this._endpoint.datagram()&&4===e&&(e=5),this._state<=1&&4===e&&(e=5),this._state!==e){try{switch(e){case 0:o.assert(!1);break;case 1:if(0!==this._state)return void o.assert(5===this._state);this._endpoint.datagram()||this._incoming||this._transceiver.register();break;case 2:if(3!==this._state&&1!==this._state)return;this._transceiver.register();break;case 3:if(2!==this._state&&1!==this._state)return;2===this._state&&this._transceiver.unregister();break;case 4:if(this._state>=5)return;3===this._state&&this._transceiver.register();break;case 5:if(6===this._state)return;this._batchRequestQueue.destroy(this._exception),this._transceiver.unregister();break;case 6:o.assert(5===this._state),this._transceiver.close(),this._communicator=null}}catch(t){if(!(t instanceof Ice.LocalException))throw t;var n="unexpected connection exception:\n "+this._desc+"\n"+t.toString();this._instance.initializationData().logger.error(n)}if(null!==this._monitor&&(2===e?(this._monitor.add(this),this._acmLastActivity>0&&(this._acmLastActivity=Date.now())):2===this._state&&this._monitor.remove(this)),this._state=e,4===this._state&&0===this._dispatchCount)try{this.initiateShutdown()}catch(t){if(!(t instanceof Ice.LocalException))throw t;this.setState(5,t)}else 5===this._state&&this.finish();this.checkState()}},initiateShutdown:function(){if(o.assert(4===this._state),o.assert(0===this._dispatchCount),o.assert(!this._shutdownInitiated),!this._endpoint.datagram()){var t=new n(this._instance,u.currentProtocolEncoding);t.writeBlob(u.magic),u.currentProtocol.__write(t),u.currentProtocolEncoding.__write(t),t.writeByte(u.closeConnectionMsg),t.writeByte(0),t.writeInt(u.headerSize),(this.sendMessage(v.createForStream(t,!1,!1))&e.Sent)>0&&this.scheduleTimeout(h.Write,this.closeTimeout())}},heartbeat:function(){if(o.assert(2===this._state),!this._endpoint.datagram()){var e=new n(this._instance,u.currentProtocolEncoding);e.writeBlob(u.magic),u.currentProtocol.__write(e),u.currentProtocolEncoding.__write(e),e.writeByte(u.validateConnectionMsg),e.writeByte(0),e.writeInt(u.headerSize);try{this.sendMessage(v.createForStream(e,!1,!1))}catch(e){this.setState(5,e),o.assert(null!==this._exception)}}},initialize:function(){var e=this._transceiver.initialize(this._readStream.buffer,this._writeStream.buffer);return e!=h.None?(this.scheduleTimeout(e,this.connectTimeout()),!1):(this._desc=this._transceiver.toString(),this._initialized=!0,this.setState(1),!0)},validate:function(){if(!this._endpoint.datagram())if(null!==this._adapter){if(0===this._writeStream.size&&(this._writeStream.writeBlob(u.magic),u.currentProtocol.__write(this._writeStream),u.currentProtocolEncoding.__write(this._writeStream),this._writeStream.writeByte(u.validateConnectionMsg),this._writeStream.writeByte(0),this._writeStream.writeInt(u.headerSize),_.traceSend(this._writeStream,this._logger,this._traceLevels),this._writeStream.prepareWrite()),this._writeStream.pos!=this._writeStream.size&&!this.write(this._writeStream.buffer))return this.scheduleTimeout(h.Write,this.connectTimeout()),!1}else{if(0===this._readStream.size&&(this._readStream.resize(u.headerSize),this._readStream.pos=0),this._readStream.pos!==this._readStream.size&&!this.read(this._readStream.buffer))return this.scheduleTimeout(h.Read,this.connectTimeout()),!1;o.assert(this._readStream.pos===u.headerSize),this._readStream.pos=0;var e=this._readStream.readBlob(4);if(e[0]!==u.magic[0]||e[1]!==u.magic[1]||e[2]!==u.magic[2]||e[3]!==u.magic[3]){var t=new Ice.BadMagicException;throw t.badMagic=e,t}if(this._readProtocol.__read(this._readStream),u.checkSupportedProtocol(this._readProtocol),this._readProtocolEncoding.__read(this._readStream),u.checkSupportedProtocolEncoding(this._readProtocolEncoding),this._readStream.readByte()!==u.validateConnectionMsg)throw new Ice.ConnectionNotValidatedException;if(this._readStream.readByte(),this._readStream.readInt()!==u.headerSize)throw new Ice.IllegalMessageSizeException;_.traceRecv(this._readStream,this._logger,this._traceLevels),this._validated=!0}this._writeStream.resize(0),this._writeStream.pos=0,this._readStream.resize(u.headerSize),this._readHeader=!0,this._readStream.pos=0;var n=this._instance.traceLevels();if(n.network>=1){var i=[];this._endpoint.datagram()?(i.push("starting to send "),i.push(this._endpoint.protocol()),i.push(" messages\n"),i.push(this._transceiver.toDetailedString())):((i=[]).push("established "),i.push(this._endpoint.protocol()),i.push(" connection\n"),i.push(this.toString())),this._instance.initializationData().logger.trace(n.networkCat,i.join(""))}return!0},sendNextMessage:function(){if(0!==this._sendStreams.length){o.assert(!this._writeStream.isEmpty()&&this._writeStream.pos===this._writeStream.size);try{for(;;){var e=this._sendStreams.shift();if(this._writeStream.swap(e.stream),e.sent(),0===this._sendStreams.length)break;if(this._state>=5)return;e=this._sendStreams[0],o.assert(!e.prepared);var t=e.stream;if(t.pos=10,t.writeInt(t.size),t.prepareWrite(),e.prepared=!0,null!==e.outAsync?_.trace("sending asynchronous request",t,this._logger,this._traceLevels):_.traceSend(t,this._logger,this._traceLevels),this._writeStream.swap(e.stream),this._writeStream.pos!=this._writeStream.size&&!this.write(this._writeStream.buffer))return o.assert(!this._writeStream.isEmpty()),void this.scheduleTimeout(h.Write,this._endpoint.timeout())}}catch(e){if(e instanceof Ice.LocalException)return void this.setState(5,e);throw e}o.assert(this._writeStream.isEmpty()),4===this._state&&this.scheduleTimeout(h.Write,this.closeTimeout())}},sendMessage:function(t){if(this._sendStreams.length>0)return t.doAdopt(),this._sendStreams.push(t),e.Queued;o.assert(this._state<5),o.assert(!t.prepared);var n=t.stream;return n.pos=10,n.writeInt(n.size),n.prepareWrite(),t.prepared=!0,t.outAsync?_.trace("sending asynchronous request",t.stream,this._logger,this._traceLevels):_.traceSend(t.stream,this._logger,this._traceLevels),this.write(t.stream.buffer)?(t.sent(),this._acmLastActivity>0&&(this._acmLastActivity=Date.now()),e.Sent):(t.doAdopt(),this._writeStream.swap(t.stream),this._sendStreams.push(t),this.scheduleTimeout(h.Write,this._endpoint.timeout()),e.Queued)},parseMessage:function(){o.assert(this._state>1&&this._state<5);var e=new R(this._instance);this._readStream.swap(e.stream),this._readStream.resize(u.headerSize),this._readStream.pos=0,this._readHeader=!0,this._validated=!0,o.assert(e.stream.pos===e.stream.size);try{e.stream.pos=8;var t=e.stream.readByte();if(e.compress=e.stream.readByte(),2===e.compress){var n=new Ice.FeatureNotSupportedException;throw n.unsupportedFeature="Cannot uncompress compressed message",n}switch(e.stream.pos=u.headerSize,t){case u.closeConnectionMsg:_.traceRecv(e.stream,this._logger,this._traceLevels),this._endpoint.datagram()?this._warn&&this._logger.warning("ignoring close connection message for datagram connection:\n"+this._desc):this.setState(5,new Ice.CloseConnectionException);break;case u.requestMsg:4===this._state?_.trace("received request during closing\n(ignored by server, client will retry)",e.stream,this._logger,this._traceLevels):(_.traceRecv(e.stream,this._logger,this._traceLevels),e.requestId=e.stream.readInt(),e.invokeNum=1,e.servantManager=this._servantManager,e.adapter=this._adapter,++this._dispatchCount);break;case u.requestBatchMsg:if(4===this._state)_.trace("received batch request during closing\n(ignored by server, client will retry)",e.stream,this._logger,this._traceLevels);else{if(_.traceRecv(e.stream,this._logger,this._traceLevels),e.invokeNum=e.stream.readInt(),e.invokeNum<0)throw e.invokeNum=0,new Ice.UnmarshalOutOfBoundsException;e.servantManager=this._servantManager,e.adapter=this._adapter,this._dispatchCount+=e.invokeNum}break;case u.replyMsg:_.traceRecv(e.stream,this._logger,this._traceLevels),e.requestId=e.stream.readInt(),e.outAsync=this._asyncRequests.get(e.requestId),e.outAsync?(this._asyncRequests.del(e.requestId),++this._dispatchCount):e=null,this.checkClose();break;case u.validateConnectionMsg:_.traceRecv(e.stream,this._logger,this._traceLevels),null!==this._callback&&(e.heartbeatCallback=this._callback,++this._dispatchCount);break;default:throw _.trace("received unknown message\n(invalid, closing connection)",e.stream,this._logger,this._traceLevels),new Ice.UnknownMessageException}}catch(n){if(!(n instanceof Ice.LocalException))throw n;this._endpoint.datagram()?this._warn&&this._logger.warning("datagram connection exception:\n"+n+"\n"+this._desc):this.setState(5,n)}return e},invokeAll:function(e,t,n,i,r,o){try{for(;t>0;){var s=!this._endpoint.datagram()&&0!==n;new c(this._instance,this,o,s,i,n).invoke(r,e),--t,null}e.clear()}catch(e){if(!(e instanceof Ice.LocalException))throw e;this.invokeException(e,t)}},scheduleTimeout:function(e,t){if(!(t<0)){var n=this;0!=(e&h.Read)&&(this._readTimeoutId=this._timer.schedule((function(){n.timedOut()}),t),this._readTimeoutScheduled=!0),0!=(e&(h.Write|h.Connect))&&(this._writeTimeoutId=this._timer.schedule((function(){n.timedOut()}),t),this._writeTimeoutScheduled=!0)}},unscheduleTimeout:function(e){0!=(e&h.Read)&&this._readTimeoutScheduled&&(this._timer.cancel(this._readTimeoutId),this._readTimeoutScheduled=!1),0!=(e&(h.Write|h.Connect))&&this._writeTimeoutScheduled&&(this._timer.cancel(this._writeTimeoutId),this._writeTimeoutScheduled=!1)},connectTimeout:function(){var e=this._instance.defaultsAndOverrides();return e.overrideConnectTimeout?e.overrideConnectTimeoutValue:this._endpoint.timeout()},closeTimeout:function(){var e=this._instance.defaultsAndOverrides();return e.overrideCloseTimeout?e.overrideCloseTimeoutValue:this._endpoint.timeout()},warning:function(e,t){this._logger.warning(e+":\n"+this._desc+"\n"+t.toString())},checkState:function(){if(!(this._state<3||this._dispatchCount>0)){var e;if(this._holdPromises.length>0){for(e=0;e<this._holdPromises.length;++e)this._holdPromises[e].succeed();this._holdPromises=[]}if(6===this._state&&this._finishedPromises.length>0){for(this._adapter=null,e=0;e<this._finishedPromises.length;++e)this._finishedPromises[e].succeed();this._finishedPromises=[]}}},reap:function(){null!==this._monitor&&this._monitor.reap(this)},read:function(e){var t=e.position,n=this._transceiver.read(e,this._hasMoreData);if(this._instance.traceLevels().network>=3&&e.position!=t){var i=[];i.push("received "),this._endpoint.datagram()?i.push(e.limit):(i.push(e.position-t),i.push(" of "),i.push(e.limit-t)),i.push(" bytes via "),i.push(this._endpoint.protocol()),i.push("\n"),i.push(this.toString()),this._instance.initializationData().logger.trace(this._instance.traceLevels().networkCat,i.join(""))}return n},write:function(e){var t=e.position,n=this._transceiver.write(e);if(this._instance.traceLevels().network>=3&&e.position!=t){var i=[];i.push("sent "),i.push(e.position-t),this._endpoint.datagram()||(i.push(" of "),i.push(e.limit-t)),i.push(" bytes via "),i.push(this._endpoint.protocol()),i.push("\n"),i.push(this.toString()),this._instance.initializationData().logger.trace(this._instance.traceLevels().networkCat,i.join(""))}return n}});S.ObjectAdapterDeactivated=0,S.CommunicatorDestroyed=1,Ice.ConnectionI=S;var v=y({__init__:function(){this.stream=null,this.outAsync=null,this.compress=!1,this.requestId=0,this.prepared=!1},canceled:function(){o.assert(null!==this.outAsync),this.outAsync=null},doAdopt:function(){if(this.adopt){var e=new n(this.stream.instance,u.currentProtocolEncoding);e.swap(this.stream),this.stream=e,this.adopt=!1}},sent:function(){null!==this.outAsync&&this.outAsync.__sent()},completed:function(e){null!==this.outAsync&&this.outAsync.__completedEx(e)}});v.createForStream=function(e,t,n){var i=new v;return i.stream=e,i.compress=t,i.adopt=n,i.isSent=!1,i.requestId=0,i.outAsync=null,i},v.create=function(e,t,n,i){var r=new v;return r.stream=t,r.compress=n,r.outAsync=e,r.requestId=i,r.isSent=!1,r.adopt=!1,r}}(),function(){var e=Ice.__M.module("IceSSL"),t=Ice.HashUtil,n=(Ice.StringUtil,Ice.EndpointI),i=(0,Ice.Class)(n,{__init__:function(e,t,n){this._instance=e,this._delegate=t,this._resource=n||"/"},getInfo:function(){var t=this._delegate.secure()?new e.WSSEndpointInfo:new Ice.WSEndpointInfo;return t.resource=this._resource,this._delegate.fillEndpointInfo(t),t},type:function(){return this._delegate.type()},protocol:function(){return this._delegate.protocol()},streamWrite:function(e){e.startWriteEncaps(),this._delegate.streamWriteImpl(e),e.writeString(this._resource),e.endWriteEncaps()},timeout:function(){return this._delegate.timeout()},changeTimeout:function(e){return e===this._delegate.timeout()?this:new i(this._instance,this._delegate.changeTimeout(e),this._resource)},changeConnectionId:function(e){return e===this._delegate.connectionId()?this:new i(this._instance,this._delegate.changeConnectionId(e),this._resource)},compress:function(){return this._delegate.compress()},changeCompress:function(e){return e===this._delegate.compress()?this:new i(this._instance,this._delegate.changeCompress(e),this._resource)},datagram:function(){return this._delegate.datagram()},secure:function(){return this._delegate.secure()},connect:function(){return Ice.WSTransceiver.createOutgoing(this._instance,this._delegate.secure(),this._delegate.getAddress(),this._resource)},hashCode:function(){return void 0===this._hashCode&&(this._hashCode=this._delegate.hashCode(),this._hashCode=t.addString(this._hashCode,this._resource)),this._hashCode},compareTo:function(e){if(this===e)return 0;if(null===e)return 1;if(!(e instanceof i))return this.type()<e.type()?-1:1;var t=this._delegate.compareTo(e._delegate);return 0!==t?t:this._resource!==e._resource?this._resource<e._resource?-1:1:0},options:function(){var e=this._delegate.options();return null!==this._resource&&this._resource.length>0&&(e+=" -r ",e+=-1!==this._resource.indexOf(":")?'"'+this._resource+'"':this._resource),e},toConnectorString:function(){return this._delegate.toConnectorString()},initWithStream:function(e){this._resource=e.readString()},checkOption:function(e,t,n){if("-r"!==e)return!1;if(null===t)throw new Ice.EndpointParseException("no argument provided for -r option in endpoint "+n);return this._resource=t,!0}});void 0!==Ice.WSTransceiver?i.prototype.connectable=function(){return!0}:i.prototype.connectable=function(){return!1},Ice.WSEndpoint=i}(),function(){var e=Ice.HashMap,t=Ice.RouterInfo,n=Ice.RouterPrx,i=Ice.Class({__init__:function(){this._table=new e(e.compareEquals)},destroy:function(){for(var e=this._table.entries;null!==e;e=e.next)e.value.destroy();this._table.clear()},find:function(e){if(null===e)return null;var i=n.uncheckedCast(e.ice_router(null)),r=this._table.get(i);return void 0===r&&(r=new t(i),this._table.set(i,r)),r},erase:function(e){var t=null;if(null!==e){var i=n.uncheckedCast(e.ice_router(null));t=this._table.get(i),this._table.del(i)}return t}});Ice.RouterManager=i}(),function(){var e=Ice.Class,t=Ice.Debug,n=e({__init__:function(e,t,n,i){if(void 0===e)return this.timeout=6e4,this.heartbeat=Ice.ACMHeartbeat.HeartbeatOnInvocation,void(this.close=Ice.ACMClose.CloseOnInvocationAndIdle);var r;r="Ice.ACM.Client"!=n&&"Ice.ACM.Server"!=n||0!==e.getProperty(n+".Timeout").length?n+".Timeout":n,this.timeout=1e3*e.getPropertyAsIntWithDefault(r,i.timeout/1e3);var o=e.getPropertyAsIntWithDefault(n+".Heartbeat",i.heartbeat.value);o>=0&&o<=Ice.ACMHeartbeat.maxValue?this.heartbeat=Ice.ACMHeartbeat.valueOf(o):(t.warning("invalid value for property `"+n+".Heartbeat', default value will be used instead"),this.heartbeat=i.heartbeat);var s=e.getPropertyAsIntWithDefault(n+".Close",i.close.value);s>=0&&s<=Ice.ACMClose.maxValue?this.close=Ice.ACMClose.valueOf(s):(t.warning("invalid value for property `"+n+".Close', default value will be used instead"),this.close=i.close)}}),i=e({add:function(e){t.assert(!1)},remove:function(e){t.assert(!1)},reap:function(e){t.assert(!1)},acm:function(e){return t.assert(!1),null},getACM:function(){return t.assert(!1),0}}),r=e(i,{__init__:function(e,t){this._instance=e,this._config=t,this._reapedConnections=[],this._connections=[]},destroy:function(){null!==this._instance&&(this._instance=null,this._connections=null)},add:function(e){if(0!==this._config.timeout&&(this._connections.push(e),1==this._connections.length)){var t=this;this._timerToken=this._instance.timer().scheduleRepeated((function(){t.runTimerTask()}),this._config.timeout/2)}},remove:function(e){if(0!==this._config.timeout){var n=this._connections.indexOf(e);t.assert(n>=0),this._connections.splice(n,1),0!==this._connections.length||this._instance.timer().cancel(this._timerToken)}},reap:function(e){this._reapedConnections.push(e)},acm:function(e,i,r){t.assert(null!==this._instance);var s=new n;return s.timeout=this._config.timeout,s.close=this._config.close,s.heartbeat=this._config.heartbeat,void 0!==e&&(s.timeout=1e3*e),void 0!==i&&(s.close=i),void 0!==r&&(s.heartbeat=r),new o(this,this._instance.timer(),s)},getACM:function(){return new Ice.ACM(this._config.timeout/1e3,this._config.close,this._config.heartbeat)},swapReapedConnections:function(){if(0===this._reapedConnections.length)return null;var e=this._reapedConnections;return this._reapedConnections=[],e},runTimerTask:function(){if(null!==this._instance)for(var e=Date.now(),t=0;t<this._connections.length;t++)try{this._connections[t].monitor(e,this._config)}catch(e){this.handleException(e)}},handleException:function(e){null!==this._instance&&this._instance.initializationData().logger.error("exception in connection monitor:\n"+e)}}),o=e(i,{__init__:function(e,t,n){this._parent=e,this._timer=t,this._config=n,this._connection=null},add:function(e){if(t.assert(null===this._connection),this._connection=e,this._config.timeout>0){var n=this;this._timerToken=this._timer.scheduleRepeated((function(){n.runTimerTask()}),this._config.timeout/2)}},remove:function(e){t.assert(this._connection===e),this._connection=null,this._config.timeout>0&&this._timer.cancel(this._timerToken)},reap:function(e){this._parent.reap(e)},acm:function(e,t,n){return this._parent.acm(e,t,n)},getACM:function(){return new Ice.ACM(this._config.timeout/1e3,this._config.close,this._config.heartbeat)},runTimerTask:function(){try{this._connection.monitor(Date.now(),this._config)}catch(e){this._parent.handleException(e)}}});Ice.FactoryACMMonitor=r,Ice.ACMConfig=n}(),D=Ice.Context,M=Ice.InitializationException,(T=Ice.Class({__init__:function(){this._context=new D},getContext:function(){return new D(this._context)},setContext:function(e){null!==e&&e.size>0?this._context=new D(e):this._context.clear()},containsKey:function(e){return null===e&&(e=""),this._context.has(e)},get:function(e){null===e&&(e="");var t=this._context.get(e);return null===t&&(t=""),t},put:function(e,t){null===e&&(e=""),null===t&&(t="");var n=this._context.get(e);return null===n&&(n=""),this._context.set(e,t),n},remove:function(e){null===e&&(e="");var t=this._context.get(e);return this._context.del(e),null===t&&(t=""),t},write:function(e,t){if(0===e.size)Ice.ContextHelper.write(t,this._context);else{var n=null;0===this._context.size?n=e:(n=new D(this._context)).merge(e),Ice.ContextHelper.write(t,n)}}})).create=function(e){if(0===e.length||"None"===e)return null;if("Shared"===e)return new T;throw new M("'"+e+"' is not a valid value for Ice.ImplicitContext")},Ice.ImplicitContextI=T,function(){var e=Ice.ArrayUtil,t=Ice.Debug,n=Ice.BatchRequestQueue,i=Ice.HashMap,r=Ice.HashUtil,o=Ice.OpaqueEndpointI,s=Ice.Promise,a=(Ice.Protocol,Ice.ReferenceMode),c=Ice.StringUtil,l=Ice.StringSeqHelper,d=Ice.EndpointSelectionType,u=Ice.Identity,h=Ice.RouterPrx,f=Ice.LocatorPrx,_=Ice.PropertyNames,p=Ice.ConnectionRequestHandler,C=Ice.Class,g=["EndpointSelection","ConnectionCached","PreferSecure","EncodingVersion","LocatorCacheTimeout","InvocationTimeout","Locator","Router","CollocationOptimized"],m=C({__init__:function(e,t){this._instance=e,this._communicator=t,this._defaultRouter=null,this._defaultLocator=null},create:function(e,t,n,i){return 0===e.name.length&&0===e.category.length?null:this.createImpl(e,t,n.getMode(),n.getSecure(),n.getProtocol(),n.getEncoding(),i,null,null)},createWithAdapterId:function(e,t,n,i){return 0===e.name.length&&0===e.category.length?null:this.createImpl(e,t,n.getMode(),n.getSecure(),n.getProtocol(),n.getEncoding(),null,i,null)},createFixed:function(e,t){return 0===e.name.length&&0===e.category.length?null:new R(this._instance,this._communicator,e,"",t.endpoint().datagram()?a.ModeDatagram:a.ModeTwoway,t.endpoint().secure(),this._instance.defaultsAndOverrides().defaultEncoding,t)},copy:function(e){var t=e.getIdentity();return 0===t.name.length&&0===t.category.length?null:e.clone()},createFromString:function(e,n){if(null==e||0===e.length)return null;var i,r=" \t\n\r",o=0;if(-1==(i=c.findFirstNotOf(e,r,o)))throw new Ice.ProxyParseException("no non-whitespace characters found in `"+e+"'");var s=null;if(-1===(o=c.checkQuote(e,i)))throw new Ice.ProxyParseException("mismatched quotes around identity in `"+e+"'");if(0===o?(-1===(o=c.findFirstOf(e," \t\n\r:@",i))&&(o=e.length),s=e.substring(i,o)):(i++,s=e.substring(i,o),o++),i===o)throw new Ice.ProxyParseException("no identity in `"+e+"'");var l=this._instance.stringToIdentity(s);if(0===l.name.length){if(l.category.length>0)throw new Ice.IllegalIdentityException(l);if(-1!=c.findFirstNotOf(e,r,o))throw new Ice.ProxyParseException("invalid characters after identity in `"+e+"'");return null}for(var d="",u=a.ModeTwoway,h=!1,f=this._instance.defaultsAndOverrides().defaultEncoding,_=Ice.Protocol_1_0,p="";-1!==(i=c.findFirstNotOf(e,r,o))&&":"!=e.charAt(i)&&"@"!=e.charAt(i)&&(-1==(o=c.findFirstOf(e," \t\n\r:@",i))&&(o=e.length),i!=o);){var C=e.substring(i,o);if(2!=C.length||"-"!=C.charAt(0))throw new Ice.ProxyParseException("expected a proxy option but found `"+C+"' in `"+e+"'");var g=null,m=c.findFirstNotOf(e,r,o);if(-1!=m){var I=e.charAt(m);if("@"!=I&&":"!=I&&"-"!=I){if(i=m,-1==(o=c.checkQuote(e,i)))throw new Ice.ProxyParseException("mismatched quotes around value for "+C+" option in `"+e+"'");0===o?(-1===(o=c.findFirstOf(e," \t\n\r:@",i))&&(o=e.length),g=e.substring(i,o)):(i++,g=e.substring(i,o),o++)}}switch(C.charAt(1)){case"f":if(null===g)throw new Ice.ProxyParseException("no argument provided for -f option in `"+e+"'");try{d=c.unescapeString(g,0,g.length)}catch(t){throw new Ice.ProxyParseException("invalid facet in `"+e+"': "+t.message)}break;case"t":if(null!==g)throw new Ice.ProxyParseException("unexpected argument `"+g+"' provided for -t option in `"+e+"'");u=a.ModeTwoway;break;case"o":if(null!==g)throw new Ice.ProxyParseException("unexpected argument `"+g+"' provided for -o option in `"+e+"'");u=a.ModeOneway;break;case"O":if(null!==g)throw new Ice.ProxyParseException("unexpected argument `"+g+"' provided for -O option in `"+e+"'");u=a.ModeBatchOneway;break;case"d":if(null!==g)throw new Ice.ProxyParseException("unexpected argument `"+g+"' provided for -d option in `"+e+"'");u=a.ModeDatagram;break;case"D":if(null!==g)throw new Ice.ProxyParseException("unexpected argument `"+g+"' provided for -D option in `"+e+"'");u=a.ModeBatchDatagram;break;case"s":if(null!==g)throw new Ice.ProxyParseException("unexpected argument `"+g+"' provided for -s option in `"+e+"'");h=!0;break;case"e":if(null===g)throw new Ice.ProxyParseException("no argument provided for -e option in `"+e+"'");try{f=Ice.stringToEncodingVersion(g)}catch(t){throw new Ice.ProxyParseException("invalid encoding version `"+g+"' in `"+e+"':\n"+t.str)}break;case"p":if(null===g)throw new Ice.ProxyParseException("no argument provided for -p option in `"+e+"'");try{_=Ice.stringToProtocolVersion(g)}catch(t){throw new Ice.ProxyParseException("invalid protocol version `"+g+"' in `"+e+"':\n"+t.str)}break;default:throw new Ice.ProxyParseException("unknown option `"+C+"' in `"+e+"'")}}if(-1===i)return this.createImpl(l,d,u,h,_,f,null,null,n);var R=[];if(":"==e.charAt(i)){var y=[];for(o=i;o<e.length&&":"==e.charAt(o);){for(o=i=o+1;;){if(-1==(o=e.indexOf(":",o))){o=e.length;break}for(var S=!1,v=i;!(-1==(v=e.indexOf('"',v))||o<v)&&-1!=(v=e.indexOf('"',++v));){if(o<v){S=!0;break}++v}if(!S)break;++o}var E=e.substring(i,o),w=this._instance.endpointFactoryManager().create(E,!1);null!==w?R.push(w):y.push(E)}if(0===R.length)throw t.assert(y.length>0),new Ice.EndpointParseException("invalid endpoint `"+y[0]+"' in `"+e+"'");if(0!==y.length&&this._instance.initializationData().properties.getPropertyAsIntWithDefault("Ice.Warn.Endpoints",1)>0){var b=[];b.push("Proxy contains unknown endpoints:");for(var D=0;D<y.length;++D)b.push(" `"),b.push(y[D]),b.push("'");this._instance.initializationData().logger.warning(b.join(""))}return this.createImpl(l,d,u,h,_,f,R,null,n)}if("@"==e.charAt(i)){if(-1==(i=c.findFirstNotOf(e,r,i+1)))throw new Ice.ProxyParseException("missing adapter id in `"+e+"'");var M=null;if(-1===(o=c.checkQuote(e,i)))throw new Ice.ProxyParseException("mismatched quotes around adapter id in `"+e+"'");if(0===o?(-1===(o=c.findFirstOf(e,r,i))&&(o=e.length),M=e.substring(i,o)):(i++,M=e.substring(i,o),o++),o!==e.length&&-1!==c.findFirstNotOf(e,r,o))throw new Ice.ProxyParseException("invalid trailing characters after `"+e.substring(0,o+1)+"' in `"+e+"'");try{p=c.unescapeString(M,0,M.length)}catch(t){throw new Ice.ProxyParseException("invalid adapter id in `"+e+"': "+t.message)}if(0===p.length)throw new Ice.ProxyParseException("empty adapter id in `"+e+"'");return this.createImpl(l,d,u,h,_,f,null,p,n)}throw new Ice.ProxyParseException("malformed proxy `"+e+"'")},createFromStream:function(e,t){if(0===e.name.length&&0===e.category.length)return null;var n,i=l.read(t);if(i.length>0){if(i.length>1)throw new Ice.ProxyUnmarshalException;n=i[0]}else n="";var r=t.readByte();if(r<0||r>a.ModeLast)throw new Ice.ProxyUnmarshalException;var o=t.readBool(),s=null,c=null;t.getReadEncoding().equals(Ice.Encoding_1_0)?(s=Ice.Protocol_1_0,c=Ice.Encoding_1_0):((s=new Ice.ProtocolVersion).__read(t),(c=new Ice.EncodingVersion).__read(t));var d=null,u=null,h=t.readSize();if(h>0){d=[];for(var f=0;f<h;f++)d[f]=this._instance.endpointFactoryManager().read(t)}else u=t.readString();return this.createImpl(e,n,r,o,s,c,d,u,null)},setDefaultRouter:function(e){if(null===this._defaultRouter?null===e:this._defaultRouter.equals(e))return this;var t=new m(this._instance,this._communicator);return t._defaultLocator=this._defaultLocator,t._defaultRouter=e,t},getDefaultRouter:function(){return this._defaultRouter},setDefaultLocator:function(e){if(null===this._defaultLocator?null===e:this._defaultLocator.equals(e))return this;var t=new m(this._instance,this._communicator);return t._defaultRouter=this._defaultRouter,t._defaultLocator=e,t},getDefaultLocator:function(){return this._defaultLocator},checkForUnknownProperties:function(e){var t,n,i=[];for(t=0;t<_.clPropNames.length;++t)if(0===e.indexOf(_.clPropNames[t]+"."))return;for(var r=this._instance.initializationData().properties.getPropertiesForPrefix(e+".").entries;null!==r;r=r.next){var o=!1;for(t=0,n=g.length;t<n;++t)if(r.key===e+"."+g[t]){o=!0;break}o||i.push(r.key)}if(i.length>0){var s=[];for(s.push("found unknown properties for proxy '"),s.push(e),s.push("':"),t=0,n=i.length;t<n;++t)s.push("\n    "),s.push(i[t]);this._instance.initializationData().logger.warning(s.join(""))}},createImpl:function(e,t,n,i,r,o,s,a,c){var l=this._instance.defaultsAndOverrides(),u=null;null!==this._defaultLocator&&(u=this._defaultLocator.__reference().getEncoding().equals(o)?this._instance.locatorManager().find(this._defaultLocator):this._instance.locatorManager().find(this._defaultLocator.ice_encodingVersion(o)));var _=this._instance.routerManager().find(this._defaultRouter),p=!0,C=l.defaultPreferSecure,g=l.defaultEndpointSelection,m=l.defaultLocatorCacheTimeout,I=l.defaultInvocationTimeout;if(null!==c&&c.length>0){var R,S=this._instance.initializationData().properties;S.getPropertyAsIntWithDefault("Ice.Warn.UnknownProperties",1)>0&&this.checkForUnknownProperties(c),R=c+".Locator";var v=f.uncheckedCast(this._communicator.propertyToProxy(R));null!==v&&(u=v.__reference().getEncoding().equals(o)?this._instance.locatorManager().find(v):this._instance.locatorManager().find(v.ice_encodingVersion(o))),R=c+".Router";var E=h.uncheckedCast(this._communicator.propertyToProxy(R));if(null!==E){var w=".Router";if(c.lastIndexOf(w)==c.length-w.length){var b="`"+R+"="+S.getProperty(R)+"': cannot set a router on a router; setting ignored";this._instance.initializationData().logger.warning(b)}else _=this._instance.routerManager().find(E)}if(R=c+".ConnectionCached",p=S.getPropertyAsIntWithDefault(R,p?1:0)>0,R=c+".PreferSecure",C=S.getPropertyAsIntWithDefault(R,C?1:0)>0,R=c+".EndpointSelection",S.getProperty(R).length>0){var D=S.getProperty(R);if("Random"==D)g=d.Random;else{if("Ordered"!=D)throw new Ice.EndpointSelectionTypeParseException("illegal value `"+D+"'; expected `Random' or `Ordered'");g=d.Ordered}}R=c+".LocatorCacheTimeout";var M=S.getProperty(R);0!==M.length&&(m=S.getPropertyAsIntWithDefault(R,m))<-1&&(m=-1,this._instance.initializationData().logger.warning("invalid value for"+R+"`"+S.getProperty(R)+"': defaulting to -1")),R=c+".InvocationTimeout",0!==(M=S.getProperty(R)).length&&(I=S.getPropertyAsIntWithDefault(R,I))<1&&-1!==I&&(I=-1,this._instance.initializationData().logger.warning("invalid value for"+R+"`"+S.getProperty(R)+"': defaulting to -1"))}return new y(this._instance,this._communicator,e,t,n,i,r,o,s,a,u,_,p,C,g,m,I)}});Ice.ReferenceFactory=m;var I=C({__init__:function(e,n,i,r,o,s,a,c,l){t.assert(void 0===i||null!==i.name),t.assert(void 0===i||null!==i.category),t.assert(void 0===r||null!==r),this._instance=e,this._communicator=n,this._mode=o,this._secure=s,this._identity=i,this._context=I._emptyContext,this._facet=r,this._protocol=a,this._encoding=c,this._invocationTimeout=l,this._hashInitialized=!1,this._overrideCompress=!1,this._compress=!1},getMode:function(){return this._mode},getSecure:function(){return this._secure},getProtocol:function(){return this._protocol},getEncoding:function(){return this._encoding},getIdentity:function(){return this._identity},getFacet:function(){return this._facet},getInstance:function(){return this._instance},getContext:function(){return this._context},getInvocationTimeout:function(){return this._invocationTimeout},getCommunicator:function(){return this._communicator},getEndpoints:function(){return t.assert(!1),null},getAdapterId:function(){return t.assert(!1),""},getRouterInfo:function(){return t.assert(!1),null},getLocatorInfo:function(){return t.assert(!1),null},getCacheConnection:function(){return t.assert(!1),!1},getPreferSecure:function(){return t.assert(!1),!1},getEndpointSelection:function(){return t.assert(!1),null},getLocatorCacheTimeout:function(){return t.assert(!1),0},getConnectionId:function(){return t.assert(!1),""},changeContext:function(e){null==e&&(e=I._emptyContext);var t=this._instance.referenceFactory().copy(this);return 0===e.size?t._context=I._emptyContext:t._context=new i(e),t},changeMode:function(e){if(e===this._mode)return this;var t=this._instance.referenceFactory().copy(this);return t._mode=e,t},changeSecure:function(e){if(e===this._secure)return this;var t=this._instance.referenceFactory().copy(this);return t._secure=e,t},changeIdentity:function(e){if(e.equals(this._identity))return this;var t=this._instance.referenceFactory().copy(this);return t._identity=new u(e.name,e.category),t},changeFacet:function(e){if(e===this._facet)return this;var t=this._instance.referenceFactory().copy(this);return t._facet=e,t},changeInvocationTimeout:function(e){if(e===this._invocationTimeout)return this;var t=this._instance.referenceFactory().copy(this);return t._invocationTimeout=e,t},changeEncoding:function(e){if(e.equals(this._encoding))return this;var t=this._instance.referenceFactory().copy(this);return t._encoding=e,t},changeCompress:function(e){if(this._overrideCompress&&this._compress===e)return this;var t=this._instance.referenceFactory().copy(this);return t._compress=e,t._overrideCompress=!0,t},changeAdapterId:function(e){return t.assert(!1),null},changeEndpoints:function(e){return t.assert(!1),null},changeLocator:function(e){return t.assert(!1),null},changeRouter:function(e){return t.assert(!1),null},changeCacheConnection:function(e){return t.assert(!1),null},changePreferSecure:function(e){return t.assert(!1),null},changeEndpointSelection:function(e){return t.assert(!1),null},changeLocatorCacheTimeout:function(e){return t.assert(!1),null},changeTimeout:function(e){return t.assert(!1),null},changeConnectionId:function(e){return t.assert(!1),null},hashCode:function(){if(this._hashInitialized)return this._hashValue;var e=5381;if(e=r.addNumber(e,this._mode),e=r.addBoolean(e,this._secure),e=r.addHashable(e,this._identity),null!==this._context&&void 0!==this._context)for(var t=this._context.entries;null!==t;t=t.next)e=r.addString(e,t.key),e=r.addString(e,t.value);return e=r.addString(e,this._facet),e=r.addBoolean(e,this._overrideCompress),this._overrideCompress&&(e=r.addBoolean(e,this._compress)),e=r.addHashable(e,this._protocol),e=r.addHashable(e,this._encoding),e=r.addNumber(e,this._invocationTimeout),this._hashValue=e,this._hashInitialized=!0,this._hashValue},isIndirect:function(){return t.assert(!1),!1},isWellKnown:function(){return t.assert(!1),!1},streamWrite:function(e){0===this._facet.length?e.writeSize(0):(e.writeSize(1),e.writeString(this._facet)),e.writeByte(this._mode),e.writeBool(this._secure),e.getWriteEncoding().equals(Ice.Encoding_1_0)||(this._protocol.__write(e),this._encoding.__write(e))},toString:function(){var e=[],t=this._instance.identityToString(this._identity);if(-1!=t.search(/[ :@]/)?(e.push('"'),e.push(t),e.push('"')):e.push(t),this._facet.length>0){e.push(" -f ");var n=c.escapeString(this._facet,"");-1!=n.search(/[ :@]/)?(e.push('"'),e.push(n),e.push('"')):e.push(n)}switch(this._mode){case a.ModeTwoway:e.push(" -t");break;case a.ModeOneway:e.push(" -o");break;case a.ModeBatchOneway:e.push(" -O");break;case a.ModeDatagram:e.push(" -d");break;case a.ModeBatchDatagram:e.push(" -D")}return this._secure&&e.push(" -s"),this._protocol.equals(Ice.Protocol_1_0)||(e.push(" -p "),e.push(Ice.protocolVersionToString(this._protocol))),e.push(" -e "),e.push(Ice.encodingVersionToString(this._encoding)),e.join("")},toProperty:function(e){return t.assert(!1),null},getRequestHandler:function(e){t.assert(!1)},getBatchRequestQueue:function(){t.assert(!1)},equals:function(e){return this._mode===e._mode&&(this._secure===e._secure&&(!!this._identity.equals(e._identity)&&(!!this._context.equals(e._context)&&(this._facet===e._facet&&(this._overrideCompress===e._overrideCompress&&((!this._overrideCompress||this._compress===e._compress)&&(!!this._protocol.equals(e._protocol)&&(!!this._encoding.equals(e._encoding)&&this._invocationTimeout===e._invocationTimeout))))))))},clone:function(){return t.assert(!1),null},copyMembers:function(e){e._context=this._context,e._overrideCompress=this._overrideCompress,e._compress=this._compress}});I._emptyContext=new i,I._emptyEndpoints=[],Ice.Reference=I;var R=C(I,{__init__:function(e,t,n,i,r,o,s,a){I.call(this,e,t,n,i,r,o,Ice.Protocol_1_0,s),this._fixedConnection=a},getEndpoints:function(){return I._emptyEndpoints},getAdapterId:function(){return""},getRouterInfo:function(){return null},getLocatorInfo:function(){return null},getCacheConnection:function(){return!0},getPreferSecure:function(){return!1},getEndpointSelection:function(){return d.Random},getLocatorCacheTimeout:function(){return 0},getConnectionId:function(){return""},changeAdapterId:function(e){throw new Ice.FixedProxyException},changeEndpoints:function(e){throw new Ice.FixedProxyException},changeLocator:function(e){throw new Ice.FixedProxyException},changeRouter:function(e){throw new Ice.FixedProxyException},changeCacheConnection:function(e){throw new Ice.FixedProxyException},changePreferSecure:function(e){throw new Ice.FixedProxyException},changeEndpointSelection:function(e){throw new Ice.FixedProxyException},changeLocatorCacheTimeout:function(e){throw new Ice.FixedProxyException},changeTimeout:function(e){throw new Ice.FixedProxyException},changeConnectionId:function(e){throw new Ice.FixedProxyException},isIndirect:function(){return!1},isWellKnown:function(){return!1},streamWrite:function(e){throw new Ice.FixedProxyException},toString:function(){throw new Ice.FixedProxyException},toProperty:function(e){throw new Ice.FixedProxyException},clone:function(){var e=new R(this.getInstance(),this.getCommunicator(),this.getIdentity(),this.getFacet(),this.getMode(),this.getSecure(),this.getEncoding(),this._fixedConnection);return this.copyMembers(e),e},getRequestHandler:function(e){switch(this.getMode()){case a.ModeTwoway:case a.ModeOneway:case a.ModeBatchOneway:if(this._fixedConnection.endpoint().datagram())throw new Ice.NoEndpointException("");break;case a.ModeDatagram:case a.ModeBatchDatagram:if(!this._fixedConnection.endpoint().datagram())throw new Ice.NoEndpointException("")}var t,n=this.getInstance().defaultsAndOverrides();if((n.overrideSecure?n.overrideSecureValue:this.getSecure())&&!this._fixedConnection.endpoint().secure())throw new Ice.NoEndpointException("");return this._fixedConnection.throwException(),t=n.overrideCompress?n.overrideCompressValue:this._overrideCompress?this._compress:this._fixedConnection.endpoint().compress(),e.__setRequestHandler(new p(this,this._fixedConnection,t))},getBatchRequestQueue:function(){return this._fixedConnection.getBatchRequestQueue()},equals:function(e){return this===e||e instanceof R&&(!!I.prototype.equals.call(this,e)&&this._fixedConnection.equals(e._fixedConnection))}});Ice.FixedReference=R;var y=C(I,{__init__:function(e,n,i,r,o,s,a,c,l,d,u,h,f,_,p,C,g){I.call(this,e,n,i,r,o,s,a,c,g),this._endpoints=l,this._adapterId=d,this._locatorInfo=u,this._routerInfo=h,this._cacheConnection=f,this._preferSecure=_,this._endpointSelection=p,this._locatorCacheTimeout=C,this._overrideTimeout=!1,this._timeout=-1,null===this._endpoints&&(this._endpoints=I._emptyEndpoints),null===this._adapterId&&(this._adapterId=""),this._connectionId="",t.assert(0===this._adapterId.length||0===this._endpoints.length)},getEndpoints:function(){return this._endpoints},getAdapterId:function(){return this._adapterId},getRouterInfo:function(){return this._routerInfo},getLocatorInfo:function(){return this._locatorInfo},getCacheConnection:function(){return this._cacheConnection},getPreferSecure:function(){return this._preferSecure},getEndpointSelection:function(){return this._endpointSelection},getLocatorCacheTimeout:function(){return this._locatorCacheTimeout},getConnectionId:function(){return this._connectionId},changeEncoding:function(e){var t=I.prototype.changeEncoding.call(this,e);if(t!==this){var n=t._locatorInfo;null===n||n.getLocator().ice_getEncodingVersion().equals(e)||(t._locatorInfo=this.getInstance().locatorManager().find(n.getLocator().ice_encodingVersion(e)))}return t},changeCompress:function(e){var t=I.prototype.changeCompress.call(this,e);if(t!==this&&this._endpoints.length>0){for(var n=[],i=0;i<this._endpoints.length;i++)n[i]=this._endpoints[i].changeCompress(e);t._endpoints=n}return t},changeAdapterId:function(e){if(this._adapterId===e)return this;var t=this.getInstance().referenceFactory().copy(this);return t._adapterId=e,t._endpoints=I._emptyEndpoints,t},changeEndpoints:function(t){if(e.equals(t,this._endpoints,(function(e,t){return e.equals(t)})))return this;var n=this.getInstance().referenceFactory().copy(this);return n._endpoints=t,n._adapterId="",n.applyOverrides(n._endpoints),n},changeLocator:function(e){var t=this.getInstance().locatorManager().find(e);if(null!==t&&null!==this._locatorInfo&&t.equals(this._locatorInfo))return this;var n=this.getInstance().referenceFactory().copy(this);return n._locatorInfo=t,n},changeRouter:function(e){var t=this.getInstance().routerManager().find(e);if(null!==t&&null!==this._routerInfo&&t.equals(this._routerInfo))return this;var n=this.getInstance().referenceFactory().copy(this);return n._routerInfo=t,n},changeCacheConnection:function(e){if(e===this._cacheConnection)return this;var t=this.getInstance().referenceFactory().copy(this);return t._cacheConnection=e,t},changePreferSecure:function(e){if(e===this._preferSecure)return this;var t=this.getInstance().referenceFactory().copy(this);return t._preferSecure=e,t},changeEndpointSelection:function(e){if(e===this._endpointSelection)return this;var t=this.getInstance().referenceFactory().copy(this);return t._endpointSelection=e,t},changeLocatorCacheTimeout:function(e){if(this._locatorCacheTimeout===e)return this;var t=this.getInstance().referenceFactory().copy(this);return t._locatorCacheTimeout=e,t},changeTimeout:function(e){if(this._overrideTimeout&&this._timeout===e)return this;var t=this.getInstance().referenceFactory().copy(this);if(t._timeout=e,t._overrideTimeout=!0,this._endpoints.length>0){for(var n=[],i=0;i<this._endpoints.length;i++)n[i]=this._endpoints[i].changeTimeout(e);t._endpoints=n}return t},changeConnectionId:function(e){if(this._connectionId===e)return this;var t=this.getInstance().referenceFactory().copy(this);if(t._connectionId=e,this._endpoints.length>0){for(var n=[],i=0;i<this._endpoints.length;i++)n[i]=this._endpoints[i].changeConnectionId(e);t._endpoints=n}return t},isIndirect:function(){return 0===this._endpoints.length},isWellKnown:function(){return 0===this._endpoints.length&&0===this._adapterId.length},streamWrite:function(e){if(I.prototype.streamWrite.call(this,e),e.writeSize(this._endpoints.length),this._endpoints.length>0){t.assert(0===this._adapterId.length);for(var n=0;n<this._endpoints.length;++n)e.writeShort(this._endpoints[n].type()),this._endpoints[n].streamWrite(e)}else e.writeString(this._adapterId)},toString:function(){var e=[];if(e.push(I.prototype.toString.call(this)),this._endpoints.length>0)for(var t=0;t<this._endpoints.length;++t){var n=this._endpoints[t].toString();null!==n&&n.length>0&&(e.push(":"),e.push(n))}else if(this._adapterId.length>0){e.push(" @ ");var i=c.escapeString(this._adapterId,null);-1!=i.search(/[ :@]/)?(e.push('"'),e.push(i),e.push('"')):e.push(i)}return e.join("")},toProperty:function(e){var t,n=new i;if(n.set(e,this.toString()),n.set(e+".CollocationOptimized","0"),n.set(e+".ConnectionCached",this._cacheConnection?"1":"0"),n.set(e+".PreferSecure",this._preferSecure?"1":"0"),n.set(e+".EndpointSelection",this._endpointSelection===d.Random?"Random":"Ordered"),n.set(e+".LocatorCacheTimeout",""+this._locatorCacheTimeout),n.set(e+".InvocationTimeout",""+this.getInvocationTimeout()),null!==this._routerInfo)for(t=this._routerInfo.getRouter().__reference().toProperty(e+".Router").entries;null!==t;t=t.next)n.set(t.key,t.value);if(null!==this._locatorInfo)for(t=this._locatorInfo.getLocator().__reference().toProperty(e+".Locator").entries;null!==t;t=t.next)n.set(t.key,t.value);return n},hashCode:function(){return this._hashInitialized||(I.prototype.hashCode.call(this),this._hashValue=r.addString(this._hashValue,this._adapterId)),this._hashValue},equals:function(t){return this===t||t instanceof y&&(!!I.prototype.equals.call(this,t)&&(!!(null===this._locatorInfo?null===t._locatorInfo:this._locatorInfo.equals(t._locatorInfo))&&(!!(null===this._routerInfo?null===t._routerInfo:this._routerInfo.equals(t._routerInfo))&&(this._cacheConnection===t._cacheConnection&&(this._preferSecure===t._preferSecure&&(this._endpointSelection===t._endpointSelection&&(this._locatorCacheTimeout===t._locatorCacheTimeout&&(this._connectionId===t._connectionId&&(this._overrideTimeout===t._overrideTimeout&&((!this._overrideTimeout||this._timeout===t._timeout)&&(!!e.equals(this._endpoints,t._endpoints,(function(e,t){return e.equals(t)}))&&this._adapterId===t._adapterId)))))))))))},getRequestHandler:function(e){return this._instance.requestHandlerFactory().getRequestHandler(this,e)},getBatchRequestQueue:function(){return new n(this._instance,this._mode===a.ModeBatchDatagram)},getConnection:function(){var e=new s;if(null!==this._routerInfo){var t=this;this._routerInfo.getClientEndpoints().then((function(n){n.length>0?(t.applyOverrides(n),t.createConnection(n).then((function(t,n){e.succeed(t,n)}),(function(t){e.fail(t)}))):t.getConnectionNoRouterInfo(e)})).exception((function(t){e.fail(t)}))}else this.getConnectionNoRouterInfo(e);return e},getConnectionNoRouterInfo:function(e){if(this._endpoints.length>0)this.createConnection(this._endpoints).then((function(t,n){e.succeed(t,n)})).exception((function(t){e.fail(t)}));else{var n=this;null!==this._locatorInfo?this._locatorInfo.getEndpoints(this,null,this._locatorCacheTimeout).then((function(i,r){0!==i.length?(n.applyOverrides(i),n.createConnection(i).then((function(t,n){e.succeed(t,n)}),(function(i){if(i instanceof Ice.NoEndpointException)e.fail(i);else{if(t.assert(null!==n._locatorInfo),n.getLocatorInfo().clearCache(n),r){var o=n.getInstance().traceLevels();if(o.retry>=2){var s="connection to cached endpoints failed\nremoving endpoints from cache and trying one more time\n"+i.toString();n.getInstance().initializationData().logger.trace(o.retryCat,s)}return void n.getConnectionNoRouterInfo(e)}e.fail(i)}}))):e.fail(new Ice.NoEndpointException(n.toString()))})).exception((function(t){e.fail(t)})):e.fail(new Ice.NoEndpointException(this.toString()))}},clone:function(){var e=new y(this.getInstance(),this.getCommunicator(),this.getIdentity(),this.getFacet(),this.getMode(),this.getSecure(),this.getProtocol(),this.getEncoding(),this._endpoints,this._adapterId,this._locatorInfo,this._routerInfo,this._cacheConnection,this._preferSecure,this._endpointSelection,this._locatorCacheTimeout,this._invocationTimeout);return this.copyMembers(e),e},copyMembers:function(e){I.prototype.copyMembers.call(this,e),e._overrideTimeout=this._overrideTimeout,e._timeout=this._timeout,e._connectionId=this._connectionId},applyOverrides:function(e){for(var t=0;t<e.length;++t)e[t]=e[t].changeConnectionId(this._connectionId),this._overrideCompress&&(e[t]=e[t].changeCompress(this._compress)),this._overrideTimeout&&(e[t]=e[t].changeTimeout(this._timeout))},filterEndpoints:function(n){for(var i=[],r=0;r<n.length;++r)n[r]instanceof o||!n[r].connectable()||i.push(n[r]);switch(this.getMode()){case a.ModeTwoway:case a.ModeOneway:case a.ModeBatchOneway:i=e.filter(i,(function(e,t,n){return!e.datagram()}));break;case a.ModeDatagram:case a.ModeBatchDatagram:i=e.filter(i,(function(e,t,n){return e.datagram()}))}switch(this.getEndpointSelection()){case d.Random:e.shuffle(i);break;case d.Ordered:break;default:t.assert(!1)}var s=this.getInstance().defaultsAndOverrides();if(s.overrideSecure?s.overrideSecureValue:this.getSecure())i=e.filter(i,(function(e,t,n){return e.secure()}));else{var c=this.getPreferSecure();i.sort((function(e,t){var n=e.secure(),i=t.secure();return n&&i||!n&&!i?0:!n&&i?c?1:-1:c?-1:1}))}return i},createConnection:function(e){var t=this.filterEndpoints(e);if(0===t.length)return(new s).fail(new Ice.NoEndpointException(this.toString()));var n,i=new s,r=this.getInstance().outgoingConnectionFactory();if(this.getCacheConnection()||1==t.length)n=new S(this,null,i),r.create(t,!1,this.getEndpointSelection()).then((function(e,t){n.setConnection(e,t)})).exception((function(e){n.setException(e)}));else{var o=[t[0]];n=new S(this,t,i),r.create(o,!0,this.getEndpointSelection()).then((function(e,t){n.setConnection(e,t)})).exception((function(e){n.setException(e)}))}return i}});Ice.RoutableReference=y;var S=C({__init__:function(e,t,n){this.ref=e,this.endpoints=t,this.promise=n,this.i=0,this.exception=null},setConnection:function(e,t){null!==this.ref.getRouterInfo()&&null!==this.ref.getRouterInfo().getAdapter()&&e.setAdapter(this.ref.getRouterInfo().getAdapter()),this.promise.succeed(e,t)},setException:function(e){if(null===this.exception&&(this.exception=e),null!==this.endpoints&&++this.i!==this.endpoints.length){var t=this.i!=this.endpoints.length-1,n=[this.endpoints[this.i]],i=this;this.ref.getInstance().outgoingConnectionFactory().create(n,t,this.ref.getEndpointSelection()).then((function(e,t){i.setConnection(e,t)})).exception((function(e){i.setException(e)}))}else this.promise.fail(this.exception)}})}(),function(){var e=Ice.Debug,t=Ice.BasicStream,n=Ice.EndpointParseException,i=Ice.OpaqueEndpointI,r=Ice.Protocol,o=Ice.StringUtil,s=Ice.Class({__init__:function(e){this._instance=e,this._factories=[]},add:function(t){for(var n=0;n<this._factories.length;++n)e.assert(this._factories[n].type()!=t.type());this._factories.push(t)},get:function(e){for(var t=0;t<this._factories.length;++t)if(this._factories[t].type()===e)return this._factories[t];return null},create:function(e,s){var a=e.trim();if(0===a.length)throw new n("value has no non-whitespace characters");var c=o.splitString(a," \t\n\r");if(0===c.length)throw new n("value has no non-whitespace characters");var l=c[0];c.splice(0,1),"default"===l&&(l=this._instance.defaultsAndOverrides().defaultProtocol);for(var d=0,u=this._factories.length;d<u;++d)if(this._factories[d].protocol()===l){var h=this._factories[d].create(c,s);if(c.length>0)throw new n("unrecognized argument `"+c[0]+"' in endpoint `"+e+"'");return h}if("opaque"===l){var f=new i;if(f.initWithOptions(c),c.length>0)throw new n("unrecognized argument `"+c[0]+"' in endpoint `"+e+"'");for(d=0,u=this._factories.length;d<u;++d)if(this._factories[d].type()==f.type()){var _=new t(this._instance,r.currentProtocolEncoding);_.writeShort(f.type()),f.streamWrite(_),_.pos=0,_.readShort(),_.startReadEncaps();var p=this._factories[d].read(_);return _.endReadEncaps(),p}return f}return null},read:function(e){for(var t,n=e.readShort(),r=0;r<this._factories.length;++r)if(this._factories[r].type()==n)return e.startReadEncaps(),t=this._factories[r].read(e),e.endReadEncaps(),t;return e.startReadEncaps(),(t=new i(n)).initWithStream(e),e.endReadEncaps(),t},destroy:function(){for(var e=0;e<this._factories.length;++e)this._factories[e].destroy();this._factories=[]}});Ice.EndpointFactoryManager=s}(),function(){var e=Ice.Debug,t=Ice.HashMap,n=Ice.ObjectPrx,i=Ice.StringUtil,r=Ice.Identity,o=Ice.Class({__init__:function(e){this._instance=e;var t=this._instance.initializationData().properties.getPropertyAsList("Ice.RetryIntervals");if(t.length>0){this._retryIntervals=[];for(var n=0;n<t.length;n++){var r;try{r=i.toInt(t[n])}catch(e){r=0}if(0===n&&-1===r)break;this._retryIntervals[n]=r>0?r:0}}else this._retryIntervals=[0]},stringToProxy:function(e){var t=this._instance.referenceFactory().createFromString(e,null);return this.referenceToProxy(t)},proxyToString:function(e){return null!==e?e.__reference().toString():""},propertyToProxy:function(e){var t=this._instance.initializationData().properties.getProperty(e),n=this._instance.referenceFactory().createFromString(t,e);return this.referenceToProxy(n)},proxyToProperty:function(e,n){return null!==e?e.__reference().toProperty(n):new t},streamToProxy:function(e,t){var n=new r;n.__read(e);var i=this._instance.referenceFactory().createFromStream(n,e);return this.referenceToProxy(i,t)},referenceToProxy:function(e,t){if(null!==e){var i=t?new t:new n;return i.__setup(e),i}return null},proxyToStream:function(e,t){if(null!==e){var n=e.__reference();n.getIdentity().__write(t),n.streamWrite(t)}else{new r("","").__write(t)}},checkRetryAfterException:function(t,n,i,r){var o,s=this._instance.traceLevels(),a=this._instance.initializationData().logger;if(n.getMode()===Ice.Reference.ModeBatchOneway||n.getMode()===Ice.Reference.ModeBatchDatagram)throw t;if(t instanceof Ice.ObjectNotExistException){var c=t;if(null!==n.getRouterInfo()&&"ice_add_proxy"===c.operation)return n.getRouterInfo().clearCache(n),s.retry>=1&&a.trace(s.retryCat,"retrying operation call to add proxy to router\n"+t.toString()),null!==i&&(i.value=0),r;if(!n.isIndirect())throw t;if(n.isWellKnown()){var l=n.getLocatorInfo();null!==l&&l.clearCache(n)}}else if(t instanceof Ice.RequestFailedException)throw t;if(t instanceof Ice.MarshalException)throw t;if(t instanceof Ice.CommunicatorDestroyedException||t instanceof Ice.ObjectAdapterDeactivatedException)throw t;if(t instanceof Ice.InvocationTimeoutException||t instanceof Ice.InvocationCanceledException)throw t;if(++r,e.assert(r>0),r===this._retryIntervals.length+1&&t instanceof Ice.CloseConnectionException)o=0;else{if(r>this._retryIntervals.length)throw s.retry>=1&&a.trace(s.retryCat,"cannot retry operation call because retry limit has been exceeded\n"+t.toString()),t;o=this._retryIntervals[r-1]}if(s.retry>=1){var d="retrying operation call";o>0&&(d+=" in "+o+"ms"),d+=" because of exception\n"+t.toString(),a.trace(s.retryCat,d)}return e.assert(null!==i),i.value=o,r}});Ice.ProxyFactory=o}(),function(){var e=Ice.FormatType,t=Ice.EndpointSelectionType,n=Ice.Protocol;Ice.DefaultsAndOverrides=function(i,r){this.defaultProtocol=i.getPropertyWithDefault("Ice.Default.Protocol",void 0!==Ice.TcpEndpointFactory?"tcp":"ws");var o=i.getProperty("Ice.Default.Host");if(this.defaultHost=o.length>0?o:null,o=i.getProperty("Ice.Default.SourceAddress"),this.defaultSourceAddress=o.length>0?o:null,(o=i.getProperty("Ice.Override.Timeout")).length>0?(this.overrideTimeout=!0,this.overrideTimeoutValue=i.getPropertyAsInt("Ice.Override.Timeout"),this.overrideTimeoutValue<1&&-1!==this.overrideTimeoutValue&&(this.overrideTimeoutValue=-1,r.warning("invalid value for Ice.Override.Timeout `"+i.getProperty("Ice.Override.Timeout")+"': defaulting to -1"))):(this.overrideTimeout=!1,this.overrideTimeoutValue=-1),(o=i.getProperty("Ice.Override.ConnectTimeout")).length>0?(this.overrideConnectTimeout=!0,this.overrideConnectTimeoutValue=i.getPropertyAsInt("Ice.Override.ConnectTimeout"),this.overrideConnectTimeoutValue<1&&-1!==this.overrideConnectTimeoutValue&&(this.overrideConnectTimeoutValue=-1,r.warning("invalid value for Ice.Override.ConnectTimeout `"+i.getProperty("Ice.Override.ConnectTimeout")+"': defaulting to -1"))):(this.overrideConnectTimeout=!1,this.overrideConnectTimeoutValue=-1),(o=i.getProperty("Ice.Override.CloseTimeout")).length>0?(this.overrideCloseTimeout=!0,this.overrideCloseTimeoutValue=i.getPropertyAsInt("Ice.Override.CloseTimeout"),this.overrideCloseTimeoutValue<1&&-1!==this.overrideCloseTimeoutValue&&(this.overrideCloseTimeoutValue=-1,r.warning("invalid value for Ice.Override.CloseTimeout `"+i.getProperty("Ice.Override.CloseTimeout")+"': defaulting to -1"))):(this.overrideCloseTimeout=!1,this.overrideCloseTimeoutValue=-1),this.overrideCompress=!1,this.overrideSecure=!1,"Random"===(o=i.getPropertyWithDefault("Ice.Default.EndpointSelection","Random")))this.defaultEndpointSelection=t.Random;else{if("Ordered"!==o){var s=new Ice.EndpointSelectionTypeParseException;throw s.str="illegal value `"+o+"'; expected `Random' or `Ordered'",s}this.defaultEndpointSelection=t.Ordered}this.defaultTimeout=i.getPropertyAsIntWithDefault("Ice.Default.Timeout",6e4),this.defaultTimeout<1&&-1!==this.defaultTimeout&&(this.defaultTimeout=6e4,r.warning("invalid value for Ice.Default.Timeout `"+i.getProperty("Ice.Default.Timeout")+"': defaulting to 60000")),this.defaultLocatorCacheTimeout=i.getPropertyAsIntWithDefault("Ice.Default.LocatorCacheTimeout",-1),this.defaultLocatorCacheTimeout<-1&&(this.defaultLocatorCacheTimeout=-1,r.warning("invalid value for Ice.Default.LocatorCacheTimeout `"+i.getProperty("Ice.Default.LocatorCacheTimeout")+"': defaulting to -1")),this.defaultInvocationTimeout=i.getPropertyAsIntWithDefault("Ice.Default.InvocationTimeout",-1),this.defaultInvocationTimeout<1&&-1!==this.defaultInvocationTimeout&&(this.defaultInvocationTimeout=-1,r.warning("invalid value for Ice.Default.InvocationTimeout `"+i.getProperty("Ice.Default.InvocationTimeout")+"': defaulting to -1")),this.defaultPreferSecure=i.getPropertyAsIntWithDefault("Ice.Default.PreferSecure",0)>0,o=i.getPropertyWithDefault("Ice.Default.EncodingVersion",Ice.encodingVersionToString(n.currentEncoding)),this.defaultEncoding=Ice.stringToEncodingVersion(o),n.checkSupportedEncoding(this.defaultEncoding);var a=i.getPropertyAsIntWithDefault("Ice.Default.SlicedFormat",0)>0;this.defaultFormat=a?e.SlicedFormat:e.CompactFormat}}(),function(){var e=Ice.StringUtil,t=Ice.Identity,n=Ice.IdentityParseException;Ice.stringToIdentity=function(i){for(var r=new t,o=-1,s=0;-1!==(s=i.indexOf("/",s));){for(var a=0;s-a>0&&"\\"==i.charAt(s-a-1);)a++;if(a%2==0){if(-1!=o)throw(c=new n).str="unescaped backslash in identity `"+i+"'",c;o=s}s++}if(-1==o){r.category="";try{r.name=e.unescapeString(i)}catch(e){throw(c=new n).str="invalid identity name `"+i+"': "+c.toString(),c}}else{try{r.category=e.unescapeString(i,0,o)}catch(e){throw(c=new n).str="invalid category in identity `"+i+"': "+c.toString(),c}if(o+1<i.length)try{r.name=e.unescapeString(i,o+1,i.length)}catch(e){var c;throw(c=new n).str="invalid name in identity `"+i+"': "+c.toString(),c}else r.name=""}return r},Ice.identityToString=function(t){return null===t.category||0===t.category.length?e.escapeString(t.name,"/"):e.escapeString(t.category,"/")+"/"+e.escapeString(t.name,"/")},Ice.proxyIdentityCompare=function(e,t){if(e===t)return 0;if(null===e&&null!==t)return-1;if(null!==e&&null===t)return 1;var n,i=e.ice_getIdentity(),r=t.ice_getIdentity();return 0!==(n=i.name.localeCompare(r.name))?n:i.category.localeCompare(r.category)},Ice.proxyIdentityAndFacetCompare=function(e,t){if(e===t)return 0;if(null===e&&null!==t)return-1;if(null!==e&&null===t)return 1;var n,i=e.ice_getIdentity(),r=t.ice_getIdentity();if(0!==(n=i.name.localeCompare(r.name)))return n;if(0!==(n=i.category.localeCompare(r.category)))return n;var o=e.ice_getFacet(),s=t.ice_getFacet();return null===o&&null===s?0:null===o?-1:null===s?1:o.localeCompare(s)}}(),function(){Ice.ArrayUtil;var e=Ice.AsyncResultBase,t=Ice.ConnectionI,n=(Ice.ConnectionReaper,Ice.Debug),i=Ice.HashMap,r=Ice.Promise,o=(Ice.EndpointSelectionType,Ice.FactoryACMMonitor),s=Ice.Class,a=s({__init__:function(e,t){this._communicator=e,this._instance=t,this._destroyed=!1,this._monitor=new o(this._instance,this._instance.clientACM()),this._connectionsByEndpoint=new c,this._pending=new i(i.compareEquals),this._pendingConnectCount=0,this._waitPromise=null},destroy:function(){this._destroyed||(this._connectionsByEndpoint.forEach((function(e){e.destroy(t.CommunicatorDestroyed)})),this._destroyed=!0,this._communicator=null,this.checkFinished())},waitUntilFinished:function(){return this._waitPromise=new r,this.checkFinished(),this._waitPromise},create:function(e,t,i){n.assert(e.length>0);var o=this.applyOverrides(e);try{var s={value:!1},a=this.findConnectionByEndpoint(o,s);if(null!==a)return(new r).succeed(a,s.value)}catch(e){return(new r).fail(e)}return new l(this,o,t,i).start()},setRouterInfo:function(e){var t=this;return Ice.Promise.try2((function(){if(t._destroyed)throw new Ice.CommunicatorDestroyedException;return e.getClientEndpoints()})).then((function(n){for(var i=e.getAdapter(),r=t._instance.defaultsAndOverrides(),o=0;o<n.length;++o){var s=n[o];r.overrideTimeout&&(s=s.changeTimeout(r.overrideTimeoutValue)),s=s.changeCompress(!1);for(var a=0;a<t._connectionsByEndpoint.length;++a){var c=t._connectionsByEndpoint[a];c.endpoint().equals(s)&&c.setAdapter(i)}}}))},removeAdapter:function(e){this._destroyed||this._connectionsByEndpoint.forEach((function(t){t.getAdapter()===e&&t.setAdapter(null)}))},flushAsyncBatchRequests:function(){var t=new e(this._communicator,"flushBatchRequests",null,null,null);if(!this._destroyed)return r.all(this._connectionsByEndpoint.map((function(e){if(e.isActiveOrHolding())return e.flushBatchRequests().exception((function(e){if(!(e instanceof Ice.LocalException))throw e}))}))).then((function(){t.succeed(t)}),(function(e){t.fail(e,t)})),t;t.succeed()},applyOverrides:function(e){for(var t=this._instance.defaultsAndOverrides(),n=[],i=0;i<e.length;++i){var r=e[i];t.overrideTimeout?n.push(r.changeTimeout(t.overrideTimeoutValue)):n.push(r)}return n},findConnectionByEndpoint:function(e,t){if(this._destroyed)throw new Ice.CommunicatorDestroyedException;var i=this._instance.defaultsAndOverrides();n.assert(e.length>0);for(var r=0;r<e.length;++r){var o=e[r];if(!this._pending.has(o)){var s=this._connectionsByEndpoint.get(o);if(void 0!==s)for(var a=0;a<s.length;++a)if(s[a].isActiveOrHolding())return i.overrideCompress?t.value=i.overrideCompressValue:t.value=o.compress(),s[a]}}return null},incPendingConnectCount:function(){if(this._destroyed)throw new Ice.CommunicatorDestroyedException;++this._pendingConnectCount},decPendingConnectCount:function(){--this._pendingConnectCount,n.assert(this._pendingConnectCount>=0),this._destroyed&&0===this._pendingConnectCount&&this.checkFinished()},getConnection:function(e,t,n){if(this._destroyed)throw new Ice.CommunicatorDestroyedException;var i=this._monitor.swapReapedConnections();if(null!==i)for(var r=0;r<i.length;++r){var o=i[r];this._connectionsByEndpoint.removeConnection(o.endpoint(),o),this._connectionsByEndpoint.removeConnection(o.endpoint().changeCompress(!0),o)}for(;;){if(this._destroyed)throw new Ice.CommunicatorDestroyedException;var s=this.findConnectionByEndpoint(e,n);if(null!==s)return s;if(this.addToPending(t,e))return null;break}return t.nextEndpoint(),null},createConnection:function(e,i){n.assert(this._pending.has(i)&&null!==e);var r=null;try{if(this._destroyed)throw new Ice.CommunicatorDestroyedException;r=new t(this._communicator,this._instance,this._monitor,e,i.changeCompress(!1),!1,null)}catch(t){if(t instanceof Ice.LocalException)try{e.close()}catch(e){}throw t}return this._connectionsByEndpoint.set(r.endpoint(),r),this._connectionsByEndpoint.set(r.endpoint().changeCompress(!0),r),r},finishGetConnection:function(e,t,n,i){var r,o,s=[];null!==i&&s.push(i);var a,c=[];for(r=0;r<e.length;++r){var l=e[r],d=this._pending.get(l);if(void 0!==d){this._pending.del(l);for(var u=0;u<d.length;++u)(o=d[u]).hasEndpoint(t)?-1===s.indexOf(o)&&s.push(o):-1===c.indexOf(o)&&c.push(o)}}for(r=0;r<s.length;++r){(o=s[r]).removeFromPending();var h=c.indexOf(o);-1!==h&&c.splice(h,1)}for(r=0;r<c.length;++r)(o=c[r]).removeFromPending();var f=this._instance.defaultsAndOverrides();for(a=f.overrideCompress?f.overrideCompressValue:t.compress(),r=0;r<c.length;++r)(o=c[r]).getConnection();for(r=0;r<s.length;++r)(o=s[r]).setConnection(n,a);this.checkFinished()},finishGetConnectionEx:function(e,t,i){var r,o,s=[];null!==i&&s.push(i);var a=[];for(r=0;r<e.length;++r){var c=e[r],l=this._pending.get(c);if(void 0!==l){this._pending.del(c);for(var d=0;d<l.length;++d)(o=l[d]).removeEndpoints(e)?-1===s.indexOf(o)&&s.push(o):-1===a.indexOf(o)&&a.push(o)}}for(r=0;r<a.length;++r)o=a[r],n.assert(-1===s.indexOf(o)),o.removeFromPending();for(this.checkFinished(),r=0;r<a.length;++r)(o=a[r]).getConnection();for(r=0;r<s.length;++r)(o=s[r]).setException(t)},addToPending:function(e,t){var n,i,r=!1;if(null!==e)for(i=0;i<t.length;++i){n=t[i];var o=this._pending.get(n);void 0!==o&&(r=!0,-1===o.indexOf(e)&&o.push(e))}if(r)return!0;for(i=0;i<t.length;++i)n=t[i],this._pending.has(n)||this._pending.set(n,[]);return!1},removeFromPending:function(e,t){for(var n=0;n<t.length;++n){var i=t[n],r=this._pending.get(i);if(void 0!==r){var o=r.indexOf(e);-1!==o&&r.splice(o,1)}}},handleConnectionException:function(e,t){var n=this._instance.traceLevels();if(n.retry>=2){var i=[];i.push("connection to endpoint failed"),e instanceof Ice.CommunicatorDestroyedException?i.push("\n"):t?i.push(", trying next endpoint\n"):i.push(" and no more endpoints to try\n"),i.push(e.toString()),this._instance.initializationData().logger.trace(n.retryCat,i.join(""))}},handleException:function(e,t){var n=this._instance.traceLevels();if(n.retry>=2){var i=[];i.push("couldn't resolve endpoint host"),e instanceof Ice.CommunicatorDestroyedException?i.push("\n"):t?i.push(", trying next endpoint\n"):i.push(" and no more endpoints to try\n"),i.push(e.toString()),this._instance.initializationData().logger.trace(n.retryCat,i.join(""))}},checkFinished:function(){if(!(!this._waitPromise||!this._destroyed||this._pending.size>0||this._pendingConnectCount>0)){var e=this;r.all(e._connectionsByEndpoint.map((function(e){return e.waitUntilFinished().exception((function(e){n.assert(!1)}))}))).then((function(){var t=e._monitor.swapReapedConnections();if(null!==t){for(var i=[],r=e._connectionsByEndpoint.entries;null!==r;r=r.next)for(var o=r.value,s=0;s<o.length;++s)-1===i.indexOf(o[s])&&i.push(o[s]);n.assert(t.length===i.length),e._connectionsByEndpoint.clear()}else n.assert(0===e._connectionsByEndpoint.size);n.assert(null!==e._waitPromise),e._waitPromise.succeed(),e._monitor.destroy()}))}}});Ice.OutgoingConnectionFactory=a;var c=s(i,{__init__:function(e){i.call(this,e||i.compareEquals)},set:function(e,r){var o=this.get(e);void 0===o&&(o=[],i.prototype.set.call(this,e,o)),n.assert(r instanceof t),o.push(r)},removeConnection:function(e,t){var i=this.get(e);n.assert(null!==i);var r=i.indexOf(t);n.assert(-1!==r),i.splice(r,1),0===i.length&&this.del(e)},map:function(e){var t=[];return this.forEach((function(n){t.push(e(n))})),t},forEach:function(e){for(var t=this._head;null!==t;t=t._next)for(var n=0;n<t.value.length;++n)e(t.value[n])}}),l=s({__init__:function(e,t,n,i){this._factory=e,this._endpoints=t,this._hasMore=n,this._selType=i,this._promise=new r,this._index=0,this._current=null},connectionStartCompleted:function(e){e.activate(),this._factory.finishGetConnection(this._endpoints,this._current,e,this)},connectionStartFailed:function(e,t){n.assert(null!==this._current),t instanceof Ice.LocalException?(this._factory.handleConnectionException(t,this._hasMore||this._index<this._endpoints.length),t instanceof Ice.CommunicatorDestroyedException?this._factory.finishGetConnectionEx(this._endpoints,t,this):this._index<this._endpoints.length?this.nextEndpoint():this._factory.finishGetConnectionEx(this._endpoints,t,this)):this._factory.finishGetConnectionEx(this._endpoints,t,this)},setConnection:function(e,t){this._promise.succeed(e,t),this._factory.decPendingConnectCount()},setException:function(e){this._promise.fail(e),this._factory.decPendingConnectCount()},hasEndpoint:function(e){return-1!==this.findEndpoint(e)},findEndpoint:function(e){for(var t=0;t<this._endpoints.length;++t)if(e.equals(this._endpoints[t]))return t;return-1},removeEndpoints:function(e){for(var t=0;t<e.length;++t){var n=this.findEndpoint(e[t]);-1!==n&&this._endpoints.splice(n,1)}return this._index=0,0===this._endpoints.length},removeFromPending:function(){this._factory.removeFromPending(this,this._endpoints)},start:function(){try{this._factory.incPendingConnectCount()}catch(e){return void this._promise.fail(e)}return this.getConnection(),this._promise},getConnection:function(){try{var e={value:!1},t=this._factory.getConnection(this._endpoints,this,e);if(null===t)return;this._promise.succeed(t,e.value),this._factory.decPendingConnectCount()}catch(e){this._promise.fail(e),this._factory.decPendingConnectCount()}},nextEndpoint:function(){var e=null,t=this._factory._instance.traceLevels();try{if(n.assert(this._index<this._endpoints.length),this._current=this._endpoints[this._index++],t.network>=2)(r=[]).push("trying to establish "),r.push(this._current.protocol()),r.push(" connection to "),r.push(this._current.toConnectorString()),this._factory._instance.initializationData().logger.trace(t.networkCat,r.join(""));e=this._factory.createConnection(this._current.connect(),this._current);var i=this;e.start().then((function(){i.connectionStartCompleted(e)}),(function(t){i.connectionStartFailed(e,t)}))}catch(n){var r;if(t.network>=2)(r=[]).push("failed to establish "),r.push(this._current.protocol()),r.push(" connection to "),r.push(this._current.toString()),r.push("\n"),r.push(n.toString()),this._factory._instance.initializationData().logger.trace(t.networkCat,r.join(""));this.connectionStartFailed(e,n)}}})}(),function(){var e=Ice.Debug,t=Ice.HashMap,n=Ice.Promise,i=Ice.Protocol,r=Ice.LocatorRegisterPrx,o=Ice.Class,s=o({__init__:function(e,n,i){this._locator=e,this._locatorRegistry=null,this._table=n,this._background=i,this._adapterRequests=new t,this._objectRequests=new t(t.compareEquals)},destroy:function(){this._locatorRegistry=null,this._table.clear()},equals:function(e){return this===e||e instanceof s&&this._locator.equals(e._locator)},hashCode:function(){return this._locator.hashCode()},getLocator:function(){return this._locator},getLocatorRegistry:function(){if(null!==this._locatorRegistry)return(new n).succeed(this._locatorRegistry);var e=this;return this._locator.getRegistry().then((function(t){return e._locatorRegistry=r.uncheckedCast(t.ice_locator(null).ice_endpointSelection(Ice.EndpointSelectionType.Ordered)),e._locatorRegistry}))},getEndpoints:function(t,i,r,o){var s=o||new n;e.assert(t.isIndirect());var a=null,c={value:!1};if(t.isWellKnown()){var l=this._table.getObjectReference(t.getIdentity(),r,c);if(!c.value){if(!this._background||null===l)return this.getObjectRequest(t).addCallback(t,null,r,s),s;this.getObjectRequest(t).addCallback(t,null,r,null)}if(l.isIndirect()){if(!l.isWellKnown())return this.getEndpoints(l,t,r,s),s}else a=l.getEndpoints()}else if(a=this._table.getAdapterEndpoints(t.getAdapterId(),r,c),!c.value){if(!this._background||null===a)return this.getAdapterRequest(t).addCallback(t,i,r,s),s;this.getAdapterRequest(t).addCallback(t,i,r,null)}return e.assert(null!==a),t.getInstance().traceLevels().location>=1&&this.getEndpointsTrace(t,a,!0),s.succeed(a,!0),s},clearCache:function(t){if(e.assert(t.isIndirect()),t.isWellKnown()){var n=this._table.removeObjectReference(t.getIdentity());null!==n&&(n.isIndirect()?n.isWellKnown()||this.clearCache(n):t.getInstance().traceLevels().location>=2&&this.trace("removed endpoints from locator table",t,n.getEndpoints()))}else{var i=this._table.removeAdapterEndpoints(t.getAdapterId());null!==i&&t.getInstance().traceLevels().location>=2&&this.trace("removed endpoints from locator table\n",t,i)}},trace:function(t,n,i){e.assert(n.isIndirect());var r=[];r.push(t),r.push("\n"),n.isWellKnown()?(r.push("object = "),r.push(n.getInstance().identityToString(n.getIdentity())),r.push("\n")):(r.push("adapter = "),r.push(n.getAdapterId()),r.push("\n")),r.push("endpoints = ");for(var o=0;o<i.length;o++)r.push(i[o].toString()),o+1<i.length&&r.push(":");n.getInstance().initializationData().logger.trace(n.getInstance().traceLevels().locationCat,r.join(""))},getEndpointsException:function(t,n){e.assert(t.isIndirect());var i,r,o=t.getInstance();try{throw n}catch(n){if(n instanceof Ice.AdapterNotFoundException)throw o.traceLevels().location>=1&&((i=[]).push("adapter not found\n"),i.push("adapter = "),i.push(t.getAdapterId()),o.initializationData().logger.trace(o.traceLevels().locationCat,i.join(""))),(r=new Ice.NotRegisteredException).kindOfObject="object adapter",r.id=t.getAdapterId(),r;if(n instanceof Ice.ObjectNotFoundException)throw o.traceLevels().location>=1&&((i=[]).push("object not found\n"),i.push("object = "),i.push(o.identityToString(t.getIdentity())),o.initializationData().logger.trace(o.traceLevels().locationCat,i.join(""))),(r=new Ice.NotRegisteredException).kindOfObject="object",r.id=o.identityToString(t.getIdentity()),r;if(n instanceof Ice.NotRegisteredException)throw n;if(n instanceof Ice.LocalException)throw o.traceLevels().location>=1&&((i=[]).push("couldn't contact the locator to retrieve adapter endpoints\n"),t.getAdapterId().length>0?(i.push("adapter = "),i.push(t.getAdapterId()),i.push("\n")):(i.push("object = "),i.push(o.identityToString(t.getIdentity())),i.push("\n")),i.push("reason = "+n.toString()),o.initializationData().logger.trace(o.traceLevels().locationCat,i.join(""))),n;e.assert(!1)}},getEndpointsTrace:function(e,t,n){if(null!==t&&t.length>0)n?this.trace("found endpoints in locator table",e,t):this.trace("retrieved endpoints from locator, adding to locator table",e,t);else{var i=e.getInstance(),r=[];r.push("no endpoints configured for "),e.getAdapterId().length>0?(r.push("adapter\n"),r.push("adapter = "),r.push(e.getAdapterId()),r.push("\n")):(r.push("object\n"),r.push("object = "),r.push(i.identityToString(e.getIdentity())),r.push("\n")),i.initializationData().logger.trace(i.traceLevels().locationCat,r.join(""))}},getAdapterRequest:function(e){if(e.getInstance().traceLevels().location>=1){var t=e.getInstance(),n=[];n.push("searching for adapter by id\n"),n.push("adapter = "),n.push(e.getAdapterId()),t.initializationData().logger.trace(t.traceLevels().locationCat,n.join(""))}var i=this._adapterRequests.get(e.getAdapterId());return void 0!==i||(i=new d(this,e),this._adapterRequests.set(e.getAdapterId(),i)),i},getObjectRequest:function(e){if(e.getInstance().traceLevels().location>=1){var t=e.getInstance(),n=[];n.push("searching for object by id\n"),n.push("object = "),n.push(t.identityToString(e.getIdentity())),t.initializationData().logger.trace(t.traceLevels().locationCat,n.join(""))}var i=this._objectRequests.get(e.getIdentity());return void 0!==i||(i=new l(this,e),this._objectRequests.set(e.getIdentity(),i)),i},finishRequest:function(t,n,i,r){if(null===i||i.__reference().isIndirect())for(var o=0;o<n.length;++o)this._table.removeObjectReference(n[o].getIdentity());t.isWellKnown()?(null===i||i.__reference().isWellKnown()?r&&this._table.removeObjectReference(t.getIdentity()):this._table.addObjectReference(t.getIdentity(),i.__reference()),e.assert(this._objectRequests.has(t.getIdentity())),this._objectRequests.del(t.getIdentity())):(null===i||i.__reference().isIndirect()?r&&this._table.removeAdapterEndpoints(t.getAdapterId()):this._table.addAdapterEndpoints(t.getAdapterId(),i.__reference().getEndpoints()),e.assert(this._adapterRequests.has(t.getAdapterId())),this._adapterRequests.del(t.getAdapterId()))}});Ice.LocatorInfo=s;var a=o({__init__:function(e,t,n){this._ref=e,this._ttl=t,this._promise=n},response:function(e,t){var n=null;if(null!==t){var r=t.__reference();if(this._ref.isWellKnown()&&!i.isSupported(this._ref.getEncoding(),r.getEncoding()));else if(r.isIndirect()){if(this._ref.isWellKnown()&&!r.isWellKnown()){var o=this;return void e.getEndpoints(r,this._ref,this._ttl).then((function(e,t){null!==o._promise&&o._promise.succeed(e,t)}),(function(e){null!==o._promise&&o._promise.fail(e)}))}}else n=r.getEndpoints()}this._ref.getInstance().traceLevels().location>=1&&e.getEndpointsTrace(this._ref,n,!1),null!==this._promise&&this._promise.succeed(null===n?[]:n,!1)},exception:function(e,t){try{e.getEndpointsException(this._ref,t)}catch(e){null!==this._promise&&this._promise.fail(e)}}}),c=o({__init__:function(e,t){this._locatorInfo=e,this._ref=t,this._callbacks=[],this._wellKnownRefs=[],this._sent=!1,this._response=!1,this._proxy=null,this._exception=null},addCallback:function(e,t,n,i){var r=new a(e,n,i);this._response?r.response(this._locatorInfo,this._proxy):null!==this._exception?r.exception(this._locatorInfo,this._exception):(this._callbacks.push(r),null!==t&&this._wellKnownRefs.push(t),this._sent||(this._sent=!0,this.send()))},response:function(e){this._locatorInfo.finishRequest(this._ref,this._wellKnownRefs,e,!1),this._response=!0,this._proxy=e;for(var t=0;t<this._callbacks.length;++t)this._callbacks[t].response(this._locatorInfo,e)},exception:function(e){this._locatorInfo.finishRequest(this._ref,this._wellKnownRefs,null,e instanceof Ice.UserException),this._exception=e;for(var t=0;t<this._callbacks.length;++t)this._callbacks[t].exception(this._locatorInfo,e)}}),l=o(c,{__init__:function(t,n){c.call(this,t,n),e.assert(n.isWellKnown())},send:function(){try{var e=this;this._locatorInfo.getLocator().findObjectById(this._ref.getIdentity()).then((function(t){e.response(t)}),(function(t){e.exception(t)}))}catch(e){this.exception(e)}}}),d=o(c,{__init__:function(t,n){c.call(this,t,n),e.assert(n.isIndirect())},send:function(){try{var e=this;this._locatorInfo.getLocator().findAdapterById(this._ref.getAdapterId()).then((function(t){e.response(t)}),(function(t){e.exception(t)}))}catch(e){this.exception(e)}}})}(),function(){var e=Ice.AsyncResultBase,t=Ice.Debug,n=Ice.Identity,i=(Ice.Promise,Ice.PropertyNames),r=Ice.ServantManager,o=(Ice.StringUtil,["ACM","AdapterId","Endpoints","Locator","Locator.EncodingVersion","Locator.EndpointSelection","Locator.ConnectionCached","Locator.PreferSecure","Locator.CollocationOptimized","Locator.Router","MessageSizeMax","PublishedEndpoints","ReplicaGroupId","Router","Router.EncodingVersion","Router.EndpointSelection","Router.ConnectionCached","Router.PreferSecure","Router.CollocationOptimized","Router.Locator","Router.Locator.EndpointSelection","Router.Locator.ConnectionCached","Router.Locator.PreferSecure","Router.Locator.CollocationOptimized","Router.Locator.LocatorCacheTimeout","Router.Locator.InvocationTimeout","Router.LocatorCacheTimeout","Router.InvocationTimeout","ProxyOptions","ThreadPool.Size","ThreadPool.SizeMax","ThreadPool.SizeWarn","ThreadPool.StackSize","ThreadPool.Serialize"]),s=Ice.Class({__init__:function(e,n,i,o,s,a,c){if(this._instance=e,this._communicator=n,this._objectAdapterFactory=i,this._servantManager=new r(e,o),this._name=o,this._routerEndpoints=[],this._routerInfo=null,this._state=0,this._noConfig=a,this._noConfig)return this._reference=this._instance.referenceFactory().createFromString("dummy -t",""),this._messageSizeMax=this._instance.messageSizeMax(),void c.succeed(this,c);var l=this._instance.initializationData().properties,d=[],u=this.filterProperties(d);if(0!==d.length&&l.getPropertyAsIntWithDefault("Ice.Warn.UnknownProperties",1)>0){for(var h=["found unknown properties for object adapter `"+o+"':"],f=0;f<d.length;++f)h.push("\n    "+d[f]);this._instance.initializationData().logger.warning(h.join(""))}if(null===s&&u)throw(p=new Ice.InitializationException).reason="object adapter `"+this._name+"' requires configuration",p;var _=l.getPropertyWithDefault(this._name+".ProxyOptions","-t");try{this._reference=this._instance.referenceFactory().createFromString("dummy "+_,"")}catch(e){var p;if(e instanceof Ice.ProxyParseException)throw(p=new Ice.InitializationException).reason="invalid proxy options `"+_+"' for object adapter `"+o+"'",p;throw e}var C=this._instance.messageSizeMax()/1024,g=l.getPropertyAsIntWithDefault(this._name+".MessageSizeMax",C);this._messageSizeMax=g<1||g>2147483647/1024?2147483647:1024*g;try{if(null===s&&(s=Ice.RouterPrx.uncheckedCast(this._instance.proxyFactory().propertyToProxy(this._name+".Router"))),null!==s){if(this._routerInfo=this._instance.routerManager().find(s),t.assert(null!==this._routerInfo),null!==this._routerInfo.getAdapter())throw new Ice.AlreadyRegisteredException("object adapter with router",this._instance.identityToString(s.ice_getIdentity()));var m=this;this._routerInfo.getServerEndpoints().then((function(e){var t;for(t=0;t<e.length;++t)m._routerEndpoints.push(e[t]);for(m._routerEndpoints.sort((function(e,t){return e.compareTo(t)})),t=0;t<m._routerEndpoints.length-1;){var n=m._routerEndpoints[t],i=m._routerEndpoints[t+1];n.equals(i)?m._routerEndpoints.splice(t,1):++t}return m._routerInfo.setAdapter(m),m._instance.outgoingConnectionFactory().setRouterInfo(m._routerInfo)})).then((function(){c.succeed(m,c)}),(function(e){c.fail(e,c)}))}else{if(l.getProperty(this._name+".Endpoints").length>0)throw new Ice.FeatureNotSupportedException("object adapter endpoints not supported");c.succeed(this,c)}}catch(p){throw this.destroy(),p}},getName:function(){return this._noConfig?"":this._name},getCommunicator:function(){return this._communicator},activate:function(){},hold:function(){this.checkForDeactivation()},waitForHold:function(){var t=new e(this._communicator,"waitForHold",null,null,this);return this.checkForDeactivation(t)?t:t.succeed(t)},deactivate:function(){var t=new e(this._communicator,"deactivate",null,null,this);return this._state<5&&(this._state=5,this._instance.outgoingConnectionFactory().removeAdapter(this)),t.succeed(t)},waitForDeactivate:function(){var t=new e(this._communicator,"deactivate",null,null,this);return t.succeed(t)},isDeactivated:function(){return this._state>=5},destroy:function(){var t=new e(this._communicator,"destroy",null,null,this),n=this,i=function(){return n._state<6&&(n._state=6,n._servantManager.destroy(),n._objectAdapterFactory.removeObjectAdapter(n)),t.succeed(t)};return this._state<5?this.deactivate().then(i):i()},add:function(e,t){return this.addFacet(e,t,"")},addFacet:function(e,t,n){this.checkForDeactivation(),this.checkIdentity(t),this.checkServant(e);var i=t.clone();return this._servantManager.addServant(e,i,n),this.newProxy(i,n)},addWithUUID:function(e){return this.addFacetWithUUID(e,"")},addFacetWithUUID:function(e,t){return this.addFacet(e,new n(Ice.generateUUID(),""),t)},addDefaultServant:function(e,t){this.checkServant(e),this.checkForDeactivation(),this._servantManager.addDefaultServant(e,t)},remove:function(e){return this.removeFacet(e,"")},removeFacet:function(e,t){return this.checkForDeactivation(),this.checkIdentity(e),this._servantManager.removeServant(e,t)},removeAllFacets:function(e){return this.checkForDeactivation(),this.checkIdentity(e),this._servantManager.removeAllFacets(e)},removeDefaultServant:function(e){return this.checkForDeactivation(),this._servantManager.removeDefaultServant(e)},find:function(e){return this.findFacet(e,"")},findFacet:function(e,t){return this.checkForDeactivation(),this.checkIdentity(e),this._servantManager.findServant(e,t)},findAllFacets:function(e){return this.checkForDeactivation(),this.checkIdentity(e),this._servantManager.findAllFacets(e)},findByProxy:function(e){this.checkForDeactivation();var t=e.__reference();return this.findFacet(t.getIdentity(),t.getFacet())},findDefaultServant:function(e){return this.checkForDeactivation(),this._servantManager.findDefaultServant(e)},addServantLocator:function(e,t){this.checkForDeactivation(),this._servantManager.addServantLocator(e,t)},removeServantLocator:function(e){return this.checkForDeactivation(),this._servantManager.removeServantLocator(e)},findServantLocator:function(e){return this.checkForDeactivation(),this._servantManager.findServantLocator(e)},createProxy:function(e){return this.checkForDeactivation(),this.checkIdentity(e),this.newProxy(e,"")},createDirectProxy:function(e){return this.createProxy(e)},createIndirectProxy:function(e){throw new Ice.FeatureNotSupportedException("setLocator not supported")},setLocator:function(e){throw new Ice.FeatureNotSupportedException("setLocator not supported")},refreshPublishedEndpoints:function(){throw new Ice.FeatureNotSupportedException("refreshPublishedEndpoints not supported")},getEndpoints:function(){return[]},getPublishedEndpoints:function(){return[]},getServantManager:function(){return this._servantManager},messageSizeMax:function(){return this._messageSizeMax},newProxy:function(e,t){for(var n=[],i=0;i<this._routerEndpoints.length;++i)n.push(this._routerEndpoints[i]);var r=this._instance.referenceFactory().create(e,t,this._reference,n);return this._instance.proxyFactory().referenceToProxy(r)},checkForDeactivation:function(e){if(this._state>=5){var t=new Ice.ObjectAdapterDeactivatedException;if(t.name=this.getName(),void 0!==e)return e.fail(t,e),!0;throw t}return!1},checkIdentity:function(e){if(void 0===e.name||null===e.name||0===e.name.length)throw new Ice.IllegalIdentityException(e);void 0!==e.category&&null!==e.category||(e.category="")},checkServant:function(e){if(null==e)throw new Ice.IllegalServantException("cannot add null servant to Object Adapter")},filterProperties:function(e){var t,n=!0,r=this._name+".";for(t=0;t<i.clPropNames.length;++t)if(0===r.indexOf(i.clPropNames[t]+".")){n=!1;break}for(var s=!0,a=this._instance.initializationData().properties.getPropertiesForPrefix(r).entries;null!==a;a=a.next){var c=!1;for(t=0;t<o.length;++t)if(a.key===r+o[t]){s=!1,c=!0;break}!c&&n&&e.push(a.key)}return s}});Ice.ObjectAdapterI=s}(),function(){var e=Ice.HashMap,t=Ice.LocatorInfo,n=Ice.LocatorTable,i=Ice.LocatorPrx,r=Ice.Class({__init__:function(t){this._background=t.getPropertyAsInt("Ice.BackgroundLocatorCacheUpdates")>0,this._table=new e(e.compareEquals),this._locatorTables=new e(e.compareEquals)},destroy:function(){for(var e=this._table.entries;null!==e;e=e.next)e.value.destroy();this._table.clear(),this._locatorTables.clear()},find:function(e){if(null===e)return null;var r=i.uncheckedCast(e.ice_locator(null)),o=this._table.get(r);if(void 0===o){var s=this._locatorTables.get(r.ice_getIdentity());void 0===s&&(s=new n,this._locatorTables.set(r.ice_getIdentity(),s)),o=new t(r,s,this._background),this._table.set(r,o)}return o}});Ice.LocatorManager=r}(),function(){Ice.AsyncResultBase;var e=Ice.ObjectAdapterI,t=Ice.Promise,n=Ice.Class({__init__:function(e,n){this._instance=e,this._communicator=n,this._adapters=[],this._adapterNamesInUse=[],this._shutdownPromise=new t},shutdown:function(){return null===this._instance||(this._instance=null,this._communicator=null,this._shutdownPromise=t.all(this._adapters.map((function(e){return e.deactivate()})))),this._shutdownPromise},waitForShutdown:function(){var e=this;return this._shutdownPromise.then((function(){return t.all(e._adapters.map((function(e){return e.waitForDeactivate()})))}))},isShutdown:function(){return null===this._instance},destroy:function(){var e=this;return this.waitForShutdown().then((function(){return t.all(e._adapters.map((function(e){return e.destroy()})))}))},createObjectAdapter:function(t,n,i){if(null===this._instance)throw new Ice.ObjectAdapterDeactivatedException;var r=null;try{if(0===t.length){var o=Ice.generateUUID();r=new e(this._instance,this._communicator,this,o,null,!0,i)}else{if(-1!==this._adapterNamesInUse.indexOf(t))throw new Ice.AlreadyRegisteredException("object adapter",t);r=new e(this._instance,this._communicator,this,t,n,!1,i),this._adapterNamesInUse.push(t)}this._adapters.push(r)}catch(e){i.fail(e,i)}},removeObjectAdapter:function(e){if(null!==this._instance){var t=this._adapters.indexOf(e);-1!==t&&this._adapters.splice(t,1),-1!==(t=this._adapterNamesInUse.indexOf(e.getName()))&&this._adapterNamesInUse.splice(t,1)}}});Ice.ObjectAdapterFactory=n}(),N.defineDictionary(IceMX,"StringIntDict","StringIntDictHelper","Ice.StringHelper","Ice.IntHelper",!1,void 0,void 0),IceMX.Metrics=N.defineObject((function(e,t,n,i,r){Ice.Object.call(this),this.id=void 0!==e?e:"",this.total=void 0!==t?t:new Ice.Long(0,0),this.current=void 0!==n?n:0,this.totalLifetime=void 0!==i?i:new Ice.Long(0,0),this.failures=void 0!==r?r:0}),Ice.Object,void 0,1,["::Ice::Object","::IceMX::Metrics"],-1,(function(e){e.writeString(this.id),e.writeLong(this.total),e.writeInt(this.current),e.writeLong(this.totalLifetime),e.writeInt(this.failures)}),(function(e){this.id=e.readString(),this.total=e.readLong(),this.current=e.readInt(),this.totalLifetime=e.readLong(),this.failures=e.readInt()}),!1),IceMX.MetricsPrx=N.defineProxy(Ice.ObjectPrx,IceMX.Metrics.ice_staticId,void 0),N.defineOperations(IceMX.Metrics,IceMX.MetricsPrx),IceMX.MetricsFailures=N.defineStruct((function(e,t){this.id=void 0!==e?e:"",this.failures=void 0!==t?t:null}),!1,(function(e){e.writeString(this.id),IceMX.StringIntDictHelper.write(e,this.failures)}),(function(e){this.id=e.readString(),this.failures=IceMX.StringIntDictHelper.read(e)}),2,!1),N.defineSequence(IceMX,"MetricsFailuresSeqHelper","IceMX.MetricsFailures",!1),N.defineSequence(IceMX,"MetricsMapHelper","Ice.ObjectHelper",!1,"IceMX.Metrics"),N.defineDictionary(IceMX,"MetricsView","MetricsViewHelper","Ice.StringHelper","IceMX.MetricsMapHelper",!1,void 0,void 0,Ice.ArrayUtil.equals),IceMX.UnknownMetricsView=N.defineUserException((function(e){Ice.UserException.call(this,e)}),Ice.UserException,"IceMX::UnknownMetricsView",void 0,void 0,!1,!1),IceMX.MetricsAdmin=N.defineObject(void 0,Ice.Object,void 0,1,["::Ice::Object","::IceMX::MetricsAdmin"],-1,void 0,void 0,!1),IceMX.MetricsAdminPrx=N.defineProxy(Ice.ObjectPrx,IceMX.MetricsAdmin.ice_staticId,void 0),N.defineOperations(IceMX.MetricsAdmin,IceMX.MetricsAdminPrx,{getMetricsViewNames:[,,,,2,["Ice.StringSeqHelper"],,[["Ice.StringSeqHelper"]],,,],enableMetricsView:[,,,,2,,[[7]],,[IceMX.UnknownMetricsView],,],disableMetricsView:[,,,,2,,[[7]],,[IceMX.UnknownMetricsView],,],getMetricsView:[,,,,2,["IceMX.MetricsViewHelper"],[[7]],[[4]],[IceMX.UnknownMetricsView],,!0],getMapMetricsFailures:[,,,,2,["IceMX.MetricsFailuresSeqHelper"],[[7],[7]],,[IceMX.UnknownMetricsView],,],getMetricsFailures:[,,,,2,[IceMX.MetricsFailures],[[7],[7],[7]],,[IceMX.UnknownMetricsView],,]}),IceMX.ThreadMetrics=N.defineObject((function(e,t,n,i,r,o,s,a){IceMX.Metrics.call(this,e,t,n,i,r),this.inUseForIO=void 0!==o?o:0,this.inUseForUser=void 0!==s?s:0,this.inUseForOther=void 0!==a?a:0}),IceMX.Metrics,void 0,2,["::Ice::Object","::IceMX::Metrics","::IceMX::ThreadMetrics"],-1,(function(e){e.writeInt(this.inUseForIO),e.writeInt(this.inUseForUser),e.writeInt(this.inUseForOther)}),(function(e){this.inUseForIO=e.readInt(),this.inUseForUser=e.readInt(),this.inUseForOther=e.readInt()}),!1),IceMX.ThreadMetricsPrx=N.defineProxy(IceMX.MetricsPrx,IceMX.ThreadMetrics.ice_staticId,void 0),N.defineOperations(IceMX.ThreadMetrics,IceMX.ThreadMetricsPrx),IceMX.DispatchMetrics=N.defineObject((function(e,t,n,i,r,o,s,a){IceMX.Metrics.call(this,e,t,n,i,r),this.userException=void 0!==o?o:0,this.size=void 0!==s?s:new Ice.Long(0,0),this.replySize=void 0!==a?a:new Ice.Long(0,0)}),IceMX.Metrics,void 0,1,["::Ice::Object","::IceMX::DispatchMetrics","::IceMX::Metrics"],-1,(function(e){e.writeInt(this.userException),e.writeLong(this.size),e.writeLong(this.replySize)}),(function(e){this.userException=e.readInt(),this.size=e.readLong(),this.replySize=e.readLong()}),!1),IceMX.DispatchMetricsPrx=N.defineProxy(IceMX.MetricsPrx,IceMX.DispatchMetrics.ice_staticId,void 0),N.defineOperations(IceMX.DispatchMetrics,IceMX.DispatchMetricsPrx),IceMX.ChildInvocationMetrics=N.defineObject((function(e,t,n,i,r,o,s){IceMX.Metrics.call(this,e,t,n,i,r),this.size=void 0!==o?o:new Ice.Long(0,0),this.replySize=void 0!==s?s:new Ice.Long(0,0)}),IceMX.Metrics,void 0,1,["::Ice::Object","::IceMX::ChildInvocationMetrics","::IceMX::Metrics"],-1,(function(e){e.writeLong(this.size),e.writeLong(this.replySize)}),(function(e){this.size=e.readLong(),this.replySize=e.readLong()}),!1),IceMX.ChildInvocationMetricsPrx=N.defineProxy(IceMX.MetricsPrx,IceMX.ChildInvocationMetrics.ice_staticId,void 0),N.defineOperations(IceMX.ChildInvocationMetrics,IceMX.ChildInvocationMetricsPrx),IceMX.CollocatedMetrics=N.defineObject((function(e,t,n,i,r,o,s){IceMX.ChildInvocationMetrics.call(this,e,t,n,i,r,o,s)}),IceMX.ChildInvocationMetrics,void 0,2,["::Ice::Object","::IceMX::ChildInvocationMetrics","::IceMX::CollocatedMetrics","::IceMX::Metrics"],-1,void 0,void 0,!1),IceMX.CollocatedMetricsPrx=N.defineProxy(IceMX.ChildInvocationMetricsPrx,IceMX.CollocatedMetrics.ice_staticId,void 0),N.defineOperations(IceMX.CollocatedMetrics,IceMX.CollocatedMetricsPrx),IceMX.RemoteMetrics=N.defineObject((function(e,t,n,i,r,o,s){IceMX.ChildInvocationMetrics.call(this,e,t,n,i,r,o,s)}),IceMX.ChildInvocationMetrics,void 0,3,["::Ice::Object","::IceMX::ChildInvocationMetrics","::IceMX::Metrics","::IceMX::RemoteMetrics"],-1,void 0,void 0,!1),IceMX.RemoteMetricsPrx=N.defineProxy(IceMX.ChildInvocationMetricsPrx,IceMX.RemoteMetrics.ice_staticId,void 0),N.defineOperations(IceMX.RemoteMetrics,IceMX.RemoteMetricsPrx),IceMX.InvocationMetrics=N.defineObject((function(e,t,n,i,r,o,s,a,c){IceMX.Metrics.call(this,e,t,n,i,r),this.retry=void 0!==o?o:0,this.userException=void 0!==s?s:0,this.remotes=void 0!==a?a:null,this.collocated=void 0!==c?c:null}),IceMX.Metrics,void 0,1,["::Ice::Object","::IceMX::InvocationMetrics","::IceMX::Metrics"],-1,(function(e){e.writeInt(this.retry),e.writeInt(this.userException),IceMX.MetricsMapHelper.write(e,this.remotes),IceMX.MetricsMapHelper.write(e,this.collocated)}),(function(e){this.retry=e.readInt(),this.userException=e.readInt(),this.remotes=IceMX.MetricsMapHelper.read(e),this.collocated=IceMX.MetricsMapHelper.read(e)}),!1),IceMX.InvocationMetricsPrx=N.defineProxy(IceMX.MetricsPrx,IceMX.InvocationMetrics.ice_staticId,void 0),N.defineOperations(IceMX.InvocationMetrics,IceMX.InvocationMetricsPrx),IceMX.ConnectionMetrics=N.defineObject((function(e,t,n,i,r,o,s){IceMX.Metrics.call(this,e,t,n,i,r),this.receivedBytes=void 0!==o?o:new Ice.Long(0,0),this.sentBytes=void 0!==s?s:new Ice.Long(0,0)}),IceMX.Metrics,void 0,1,["::Ice::Object","::IceMX::ConnectionMetrics","::IceMX::Metrics"],-1,(function(e){e.writeLong(this.receivedBytes),e.writeLong(this.sentBytes)}),(function(e){this.receivedBytes=e.readLong(),this.sentBytes=e.readLong()}),!1),IceMX.ConnectionMetricsPrx=N.defineProxy(IceMX.MetricsPrx,IceMX.ConnectionMetrics.ice_staticId,void 0),N.defineOperations(IceMX.ConnectionMetrics,IceMX.ConnectionMetricsPrx),function(){Ice.Debug;var e=Ice.HashMap,t=Ice.ConnectRequestHandler,n=Ice.Class({__init__:function(t){this._instance=t,this._handlers=new e(e.compareEquals)},getRequestHandler:function(e,n){var i,r=!1;return e.getCacheConnection()?(i=this._handlers.get(e))||(i=new t(e,n),this._handlers.set(e,i),r=!0):(r=!0,i=new t(e,n)),r&&e.getConnection().then((function(e,t){i.setConnection(e,t)}),(function(e){i.setException(e)})),n.__setRequestHandler(i.connect(n))},removeRequestHandler:function(e,t){e.getCacheConnection()&&this._handlers.get(e)===t&&this._handlers.del(e)}});Ice.RequestHandlerFactory=n}(),Ice.Process=N.defineObject(void 0,Ice.Object,void 0,1,["::Ice::Object","::Ice::Process"],-1,void 0,void 0,!1),Ice.ProcessPrx=N.defineProxy(Ice.ObjectPrx,Ice.Process.ice_staticId,void 0),N.defineOperations(Ice.Process,Ice.ProcessPrx,{shutdown:[,,,,,,,,,,],writeMessage:[,,,,,,[[7],[3]],,,,]}),P=Ice.TcpEndpointI,x=Ice.Class({__init__:function(e){this._instance=e},type:function(){return this._instance.type()},protocol:function(){return this._instance.protocol()},create:function(e,t){var n=new P(this._instance);return n.initWithOptions(e,t),n},read:function(e){var t=new P(this._instance);return t.initWithStream(e),t},destroy:function(){this._instance=null},clone:function(e){return new x(e)}}),Ice.TcpEndpointFactory=x,N.defineDictionary(Ice,"PropertyDict","PropertyDictHelper","Ice.StringHelper","Ice.StringHelper",!1,void 0,void 0),Ice.PropertiesAdmin=N.defineObject(void 0,Ice.Object,void 0,1,["::Ice::Object","::Ice::PropertiesAdmin"],-1,void 0,void 0,!1),Ice.PropertiesAdminPrx=N.defineProxy(Ice.ObjectPrx,Ice.PropertiesAdmin.ice_staticId,void 0),N.defineOperations(Ice.PropertiesAdmin,Ice.PropertiesAdminPrx,{getProperty:[,,,,,[7],[[7]],,,,],getPropertiesForPrefix:[,,,,,["Ice.PropertyDictHelper"],[[7]],,,,],setProperties:[,,,1,,,[["Ice.PropertyDictHelper"]],,,,]}),Ice.LogMessageType=N.defineEnum([["PrintMessage",0],["TraceMessage",1],["WarningMessage",2],["ErrorMessage",3]]),N.defineSequence(Ice,"LogMessageTypeSeqHelper","Ice.LogMessageType.__helper",!1),Ice.LogMessage=N.defineStruct((function(e,t,n,i){this.type=void 0!==e?e:Ice.LogMessageType.PrintMessage,this.timestamp=void 0!==t?t:0,this.traceCategory=void 0!==n?n:"",this.message=void 0!==i?i:""}),!0,(function(e){Ice.LogMessageType.__write(e,this.type),e.writeLong(this.timestamp),e.writeString(this.traceCategory),e.writeString(this.message)}),(function(e){this.type=Ice.LogMessageType.__read(e),this.timestamp=e.readLong(),this.traceCategory=e.readString(),this.message=e.readString()}),11,!1),N.defineSequence(Ice,"LogMessageSeqHelper","Ice.LogMessage",!1),Ice.RemoteLogger=N.defineObject(void 0,Ice.Object,void 0,1,["::Ice::Object","::Ice::RemoteLogger"],-1,void 0,void 0,!1),Ice.RemoteLoggerPrx=N.defineProxy(Ice.ObjectPrx,Ice.RemoteLogger.ice_staticId,void 0),N.defineOperations(Ice.RemoteLogger,Ice.RemoteLoggerPrx,{init:[,,,,,,[[7],["Ice.LogMessageSeqHelper"]],,,,],log:[,,,,,,[[Ice.LogMessage]],,,,]}),Ice.RemoteLoggerAlreadyAttachedException=N.defineUserException((function(e){Ice.UserException.call(this,e)}),Ice.UserException,"Ice::RemoteLoggerAlreadyAttachedException",void 0,void 0,!1,!1),Ice.LoggerAdmin=N.defineObject(void 0,Ice.Object,void 0,0,["::Ice::LoggerAdmin","::Ice::Object"],-1,void 0,void 0,!1),Ice.LoggerAdminPrx=N.defineProxy(Ice.ObjectPrx,Ice.LoggerAdmin.ice_staticId,void 0),N.defineOperations(Ice.LoggerAdmin,Ice.LoggerAdminPrx,{attachRemoteLogger:[,,,,,,[["Ice.RemoteLoggerPrx"],["Ice.LogMessageTypeSeqHelper"],["Ice.StringSeqHelper"],[3]],,[Ice.RemoteLoggerAlreadyAttachedException],,],detachRemoteLogger:[,,,,,[1],[["Ice.RemoteLoggerPrx"]],,,,],getLog:[,,,,,["Ice.LogMessageSeqHelper"],[["Ice.LogMessageTypeSeqHelper"],["Ice.StringSeqHelper"],[3]],[[7]],,,]}),A=Ice.WSEndpoint,O=Ice.Class({__init__:function(e,t){this._instance=e,this._delegate=t},type:function(){return this._instance.type()},protocol:function(){return this._instance.protocol()},create:function(e,t){var n=new A(this._instance,this._delegate.create(e,t));return n.initWithOptions(e),n},read:function(e){var t=new A(this._instance,this._delegate.read(e));return t.initWithStream(e),t},destroy:function(){this._delegate.destroy(),this._instance=null}}),Ice.WSEndpointFactory=O,N.defineDictionary(Ice,"SliceChecksumDict","SliceChecksumDictHelper","Ice.StringHelper","Ice.StringHelper",!1,void 0,void 0),function(){var e=Ice.AsyncResultBase,t=Ice.Debug,n=Ice.DefaultsAndOverrides,i=Ice.EndpointFactoryManager,r=(Ice.HashMap,Ice.ImplicitContextI),o=Ice.LocatorManager,s=(Ice.Logger,Ice.ObjectAdapterFactory),a=Ice.ObjectFactoryManager,c=Ice.OutgoingConnectionFactory,l=(Ice.Promise,Ice.Properties),d=Ice.ProxyFactory,u=Ice.RetryQueue,h=Ice.RouterManager,f=Ice.Timer,_=Ice.TraceLevels,p=Ice.ReferenceFactory,C=Ice.RequestHandlerFactory,g=Ice.ACMConfig,m=Ice.Class({__init__:function(e){this._state=0,this._initData=e,this._traceLevels=null,this._defaultsAndOverrides=null,this._messageSizeMax=0,this._batchAutoFlushSize=0,this._clientACM=null,this._implicitContext=null,this._routerManager=null,this._locatorManager=null,this._referenceFactory=null,this._requestHandlerFactory=null,this._proxyFactory=null,this._outgoingConnectionFactory=null,this._servantFactoryManager=null,this._objectAdapterFactory=null,this._retryQueue=null,this._endpointHostResolver=null,this._endpointFactoryManager=null},initializationData:function(){return this._initData},traceLevels:function(){return t.assert(null!==this._traceLevels),this._traceLevels},defaultsAndOverrides:function(){return t.assert(null!==this._defaultsAndOverrides),this._defaultsAndOverrides},routerManager:function(){if(2===this._state)throw new Ice.CommunicatorDestroyedException;return t.assert(null!==this._routerManager),this._routerManager},locatorManager:function(){if(2===this._state)throw new Ice.CommunicatorDestroyedException;return t.assert(null!==this._locatorManager),this._locatorManager},referenceFactory:function(){if(2===this._state)throw new Ice.CommunicatorDestroyedException;return t.assert(null!==this._referenceFactory),this._referenceFactory},requestHandlerFactory:function(){if(2===this._state)throw new Ice.CommunicatorDestroyedException;return t.assert(null!==this._requestHandlerFactory),this._requestHandlerFactory},proxyFactory:function(){if(2===this._state)throw new Ice.CommunicatorDestroyedException;return t.assert(null!==this._proxyFactory),this._proxyFactory},outgoingConnectionFactory:function(){if(2===this._state)throw new Ice.CommunicatorDestroyedException;return t.assert(null!==this._outgoingConnectionFactory),this._outgoingConnectionFactory},servantFactoryManager:function(){if(2===this._state)throw new Ice.CommunicatorDestroyedException;return t.assert(null!==this._servantFactoryManager),this._servantFactoryManager},objectAdapterFactory:function(){if(2===this._state)throw new Ice.CommunicatorDestroyedException;return t.assert(null!==this._objectAdapterFactory),this._objectAdapterFactory},retryQueue:function(){if(2===this._state)throw new Ice.CommunicatorDestroyedException;return t.assert(null!==this._retryQueue),this._retryQueue},timer:function(){if(2===this._state)throw new Ice.CommunicatorDestroyedException;return t.assert(null!==this._timer),this._timer},endpointFactoryManager:function(){if(2===this._state)throw new Ice.CommunicatorDestroyedException;return t.assert(null!==this._endpointFactoryManager),this._endpointFactoryManager},messageSizeMax:function(){return this._messageSizeMax},batchAutoFlushSize:function(){return this._batchAutoFlushSize},clientACM:function(){return this._clientACM},getImplicitContext:function(){return this._implicitContext},stringToIdentity:function(e){return Ice.stringToIdentity(e)},identityToString:function(e){return Ice.identityToString(e)},setDefaultLocator:function(e){if(2==this._state)throw new Ice.CommunicatorDestroyedException;this._referenceFactory=this._referenceFactory.setDefaultLocator(e)},setDefaultRouter:function(e){if(2==this._state)throw new Ice.CommunicatorDestroyedException;this._referenceFactory=this._referenceFactory.setDefaultRouter(e)},setLogger:function(e){this._initData.logger=e},finishSetup:function(e,t){try{null===this._initData.properties&&(this._initData.properties=l.createProperties()),void 0===Ice.__oneOfDone&&(Ice.__printStackTraces=this._initData.properties.getPropertyAsIntWithDefault("Ice.PrintStackTraces",0)>0,Ice.__oneOfDone=!0),null===this._initData.logger&&(this._initData.logger=Ice.getProcessLogger()),this._traceLevels=new _(this._initData.properties),this._defaultsAndOverrides=new n(this._initData.properties,this._initData.logger);var m=this._initData.properties.getPropertyAsIntWithDefault("Ice.MessageSizeMax",1024);this._messageSizeMax=m<1||m>2147483647/1024?2147483647:1024*m,0===this._initData.properties.getProperty("Ice.BatchAutoFlushSize").length&&this._initData.properties.getProperty("Ice.BatchAutoFlush").length>0?this._initData.properties.getPropertyAsInt("Ice.BatchAutoFlush")>0&&(this._batchAutoFlushSize=this._messageSizeMax):(m=this._initData.properties.getPropertyAsIntWithDefault("Ice.BatchAutoFlushSize",1024),this._batchAutoFlushSize=m<1?m:m>2147483647/1024?2147483647:1024*m),this._clientACM=new g(this._initData.properties,this._initData.logger,"Ice.ACM.Client",new g(this._initData.properties,this._initData.logger,"Ice.ACM",new g)),this._implicitContext=r.create(this._initData.properties.getProperty("Ice.ImplicitContext")),this._routerManager=new h,this._locatorManager=new o(this._initData.properties),this._referenceFactory=new p(this,e),this._requestHandlerFactory=new C(this,e),this._proxyFactory=new d(this),this._endpointFactoryManager=new i(this);var I=new Ice.ProtocolInstance(this,Ice.TCPEndpointType,"tcp",!1),R=new Ice.TcpEndpointFactory(I);this._endpointFactoryManager.add(R);var y=new Ice.ProtocolInstance(this,Ice.WSEndpointType,"ws",!1),S=new Ice.WSEndpointFactory(y,R.clone(y));this._endpointFactoryManager.add(S);var v=new Ice.ProtocolInstance(this,IceSSL.EndpointType,"ssl",!0),E=new Ice.TcpEndpointFactory(v);this._endpointFactoryManager.add(E);var w=new Ice.ProtocolInstance(this,Ice.WSSEndpointType,"wss",!0),b=new Ice.WSEndpointFactory(w,E.clone(w));this._endpointFactoryManager.add(b),this._outgoingConnectionFactory=new c(e,this),this._servantFactoryManager=new a,this._objectAdapterFactory=new s(this,e),this._retryQueue=new u(this),this._timer=new f(this._initData.logger);var D=Ice.RouterPrx.uncheckedCast(this._proxyFactory.propertyToProxy("Ice.Default.Router"));null!==D&&(this._referenceFactory=this._referenceFactory.setDefaultRouter(D));var M=Ice.LocatorPrx.uncheckedCast(this._proxyFactory.propertyToProxy("Ice.Default.Locator"));null!==M&&(this._referenceFactory=this._referenceFactory.setDefaultLocator(M)),null!==t&&t.succeed(e)}catch(e){if(null===t)throw e instanceof Ice.LocalException&&this.destroy(),e;e instanceof Ice.LocalException?this.destroy().finally2((function(){t.fail(e)})):t.fail(e)}},destroy:function(){var t=new e(null,"destroy",null,this,null);if(1==this._state)return this._destroyPromises||(this._destroyPromises=[]),this._destroyPromises.push(t),t;this._state=1;var n=this;return Ice.Promise.try2((function(){if(n._objectAdapterFactory)return n._objectAdapterFactory.shutdown()})).then((function(){if(null!==n._outgoingConnectionFactory&&n._outgoingConnectionFactory.destroy(),null!==n._objectAdapterFactory)return n._objectAdapterFactory.destroy()})).then((function(){if(null!==n._outgoingConnectionFactory)return n._outgoingConnectionFactory.waitUntilFinished()})).then((function(){var e;if(n._retryQueue&&n._retryQueue.destroy(),n._timer&&n._timer.destroy(),n._servantFactoryManager&&n._servantFactoryManager.destroy(),n._routerManager&&n._routerManager.destroy(),n._locatorManager&&n._locatorManager.destroy(),n._endpointFactoryManager&&n._endpointFactoryManager.destroy(),n._initData.properties.getPropertyAsInt("Ice.Warn.UnusedProperties")>0){var i=n._initData.properties.getUnusedProperties();if(i.length>0){var r=[];for(r.push("The following properties were set but never read:"),e=0;e<i.length;++e)r.push("\n    "),r.push(i[e]);n._initData.logger.warning(r.join(""))}}if(n._objectAdapterFactory=null,n._outgoingConnectionFactory=null,n._retryQueue=null,n._timer=null,n._servantFactoryManager=null,n._referenceFactory=null,n._requestHandlerFactory=null,n._proxyFactory=null,n._routerManager=null,n._locatorManager=null,n._endpointFactoryManager=null,n._state=2,this._destroyPromises)for(e=0;e<this._destroyPromises.length;++e)this._destroyPromises[e].succeed(this._destroyPromises[e]);t.succeed(t)})).exception((function(e){if(this._destroyPromises)for(var n=0;n<this._destroyPromises.length;++n)this._destroyPromises[n].fail(e,this._destroyPromises[n]);t.fail(e,t)})),t}});Ice.Instance=m}(),V=Ice.Instance,Ice.Promise,k=Ice.Class({__init__:function(e){this._instance=new V(e)},finishSetup:function(e){this._instance.finishSetup(this,e)},destroy:function(){return this._instance.destroy()},shutdown:function(){this._instance.objectAdapterFactory().shutdown()},waitForShutdown:function(){return this._instance.objectAdapterFactory().waitForShutdown()},isShutdown:function(){return this._instance.objectAdapterFactory().isShutdown()},stringToProxy:function(e){return this._instance.proxyFactory().stringToProxy(e)},proxyToString:function(e){return this._instance.proxyFactory().proxyToString(e)},propertyToProxy:function(e){return this._instance.proxyFactory().propertyToProxy(e)},proxyToProperty:function(e,t){return this._instance.proxyFactory().proxyToProperty(e,t)},stringToIdentity:function(e){return this._instance.stringToIdentity(e)},identityToString:function(e){return this._instance.identityToString(e)},createObjectAdapter:function(e){var t=new Ice.AsyncResultBase(this,"createObjectAdapter",this,null,null);return this._instance.objectAdapterFactory().createObjectAdapter(e,null,t),t},createObjectAdapterWithEndpoints:function(e,t){0===e.length&&(e=Ice.generateUUID()),this.getProperties().setProperty(e+".Endpoints",t);var n=new Ice.AsyncResultBase(this,"createObjectAdapterWithEndpoints",this,null,null);return this._instance.objectAdapterFactory().createObjectAdapter(e,null,n),n},createObjectAdapterWithRouter:function(e,t){0===e.length&&(e=Ice.generateUUID());for(var n=new Ice.AsyncResultBase(this,"createObjectAdapterWithRouter",this,null,null),i=this.proxyToProperty(t,e+".Router").entries;null!==i;i=i.next)this.getProperties().setProperty(i.key,i.value);return this._instance.objectAdapterFactory().createObjectAdapter(e,t,n),n},addObjectFactory:function(e,t){this._instance.servantFactoryManager().add(e,t)},findObjectFactory:function(e){return this._instance.servantFactoryManager().find(e)},getImplicitContext:function(){return this._instance.getImplicitContext()},getProperties:function(){return this._instance.initializationData().properties},getLogger:function(){return this._instance.initializationData().logger},getDefaultRouter:function(){return this._instance.referenceFactory().getDefaultRouter()},setDefaultRouter:function(e){this._instance.setDefaultRouter(e)},getDefaultLocator:function(){return this._instance.referenceFactory().getDefaultLocator()},setDefaultLocator:function(e){this._instance.setDefaultLocator(e)},flushBatchRequests:function(){return this._instance.outgoingConnectionFactory().flushAsyncBatchRequests()}}),Object.defineProperty(k.prototype,"instance",{get:function(){return this._instance}}),Ice.Communicator=k,function(){var e=Ice.Protocol;Ice.InitializationData=function(){this.properties=null,this.logger=null},Ice.InitializationData.prototype.clone=function(){var e=new Ice.InitializationData;return e.properties=this.properties,e.logger=this.logger,e},Ice.initialize=function(e,t){var n=null,i=null;if(e instanceof Array)n=e;else if(e instanceof Ice.InitializationData)i=e;else if(null!=e)throw new Ice.InitializationException("invalid argument to initialize");if(null!=t){if(!(t instanceof Ice.InitializationData&&null===i))throw new Ice.InitializationException("invalid argument to initialize");i=t}(i=null===i?new Ice.InitializationData:i.clone()).properties=Ice.createProperties(n,i.properties);var r=new Ice.Communicator(i);return r.finishSetup(null),r},Ice.createProperties=function(e,t){return new Ice.Properties(e,t)},Ice.currentProtocol=function(){return e.currentProtocol.clone()},Ice.currentEncoding=function(){return e.currentEncoding.clone()}}(),e.Ice=Ice,e.IceMX=IceMX,e.IceSSL=IceSSL}()},8813:function(e,t,n){e=n.nmd(e),function(e,t,n){var i=t("ice").Ice,r=i.__M,o=i.Slice,s=r.module("Common");s.ConferenceError=o.defineUserException((function(e,t,n){i.UserException.call(this,n),this.error=void 0!==e?e:0,this.reason=void 0!==t?t:""}),i.UserException,"Common::ConferenceError",(function(e){e.writeInt(this.error),e.writeString(this.reason)}),(function(e){this.error=e.readInt(),this.reason=e.readString()}),!1,!1),n.Common=s}("undefined"!=typeof global&&global.process,"undefined"!=typeof global&&void 0!==global.process?n(2130):window.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?t:this)},2130:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=2130,e.exports=t},7047:function(e,t,n){e=n.nmd(e),function(e,t,n){var i=t("ice").Ice,r=(i.__M,t("Common/Exception").Common),o=t("Control/PublicTypes").Conference,s=i.Slice;s.defineSequence(o,"MusicListHelper","Ice.StringHelper",!1),s.defineDictionary(o,"TerminalEnergy","TerminalEnergyHelper","Ice.ShortHelper","Ice.IntHelper",!0,void 0,void 0),s.defineSequence(o,"deviceLstHelper","Ice.StringHelper",!1),o.remoteAudio=s.defineStruct((function(e,t,n,i,r,o,s,a){this.inputDevice=void 0!==e?e:"",this.outputDevice=void 0!==t?t:"",this.bMicBoost=void 0!==n&&n,this.hiLevelEC=void 0!==i?i:0,this.outputDType=void 0!==r?r:0,this.echoDelay=void 0!==o?o:0,this.outputVolume=void 0!==s?s:0,this.inputVolume=void 0!==a?a:0}),!0,(function(e){e.writeString(this.inputDevice),e.writeString(this.outputDevice),e.writeBool(this.bMicBoost),e.writeInt(this.hiLevelEC),e.writeInt(this.outputDType),e.writeInt(this.echoDelay),e.writeInt(this.outputVolume),e.writeInt(this.inputVolume)}),(function(e){this.inputDevice=e.readString(),this.outputDevice=e.readString(),this.bMicBoost=e.readBool(),this.hiLevelEC=e.readInt(),this.outputDType=e.readInt(),this.echoDelay=e.readInt(),this.outputVolume=e.readInt(),this.inputVolume=e.readInt()}),23,!1),o.remoteAudioInf=s.defineStruct((function(e,t,n){this.inputDLst=void 0!==e?e:null,this.outputDLst=void 0!==t?t:null,this.remoteInf=void 0!==n?n:new o.remoteAudio}),!0,(function(e){o.deviceLstHelper.write(e,this.inputDLst),o.deviceLstHelper.write(e,this.outputDLst),o.remoteAudio.write(e,this.remoteInf)}),(function(e){this.inputDLst=o.deviceLstHelper.read(e),this.outputDLst=o.deviceLstHelper.read(e),this.remoteInf=o.remoteAudio.read(e,this.remoteInf)}),25,!1),o.AudioCallback=s.defineObject(void 0,i.Object,void 0,0,["::Conference::AudioCallback","::Ice::Object"],-1,void 0,void 0,!1),o.AudioCallbackPrx=s.defineProxy(i.ObjectPrx,o.AudioCallback.ice_staticId,void 0),s.defineOperations(o.AudioCallback,o.AudioCallbackPrx,{updateStatus:[,,,,,,[[2],[2],[o.ASTATUS.__helper]],,,,],updateVoiceEnergy:[,,,,,,[["Conference.TerminalEnergyHelper"]],,,,],updateSpeaker:[,,,,,,[[2]],,,,],closeAll:[,,,,,,[[2]],,,,],playBackgroundMusic:[,,,,,,[[2],[1]],,,,],notifyVoiceHowling:[,,,,,,[[2],[1]],,,,],notifyVoiceNoise:[,,,,,,[[2],[1]],,,,],getRemoteAudioInfNotify:[,,,1,,[o.remoteAudioInf],[[2]],,[r.ConferenceError],,],remoteAudioSetNotify:[,,,,,,[[2],[o.remoteAudio]],,[r.ConferenceError],,],notifyLanLessMicOpen:[,,,,,,,,,,],notifySetVoiceChange:[,,,,,,[[2],[2],[3]],,,,]}),o.AudioCtrl=s.defineObject(void 0,i.Object,void 0,0,["::Conference::AudioCtrl","::Ice::Object"],-1,void 0,void 0,!1),o.AudioCtrlPrx=s.defineProxy(i.ObjectPrx,o.AudioCtrl.ice_staticId,void 0),s.defineOperations(o.AudioCtrl,o.AudioCtrlPrx,{setDeviceStatus:[,,,1,,,[[1]],,[r.ConferenceError],,],askForMic:[,,,1,,,,,[r.ConferenceError],,],openMicEx:[,,,1,,,[[2]],,[r.ConferenceError],,],closeMicEx:[,,,1,,,[[2]],,[r.ConferenceError],,],closeAll:[,,,1,,,,,[r.ConferenceError],,],setVoiceEnergy:[,,,1,,,[[3]],,[r.ConferenceError],,],pstnSwitchMicStatus:[,,,1,,,,,[r.ConferenceError],,],startRecord:[,,,1,,,,,[r.ConferenceError],,],isRecording:[,,,1,,[1],,,[r.ConferenceError],,],stopRecord:[,,,1,,,,,[r.ConferenceError],,],playApplause:[,,,1,,,,,[r.ConferenceError],,],getMusicList:[,,,1,,["Conference.MusicListHelper"],,,[r.ConferenceError],,],getPlayBGMusic:[,,,1,,[7],,,[r.ConferenceError],,],startBGMusic:[,,,1,,,[[7],[3]],,[r.ConferenceError],,],stopPlayBGMusic:[,,,1,,,,,[r.ConferenceError],,],setPlayBGMusicVolumn:[,,,1,,,[[3]],,[r.ConferenceError],,],getPlayBGMusicVolumn:[,,,1,,[3],,,[r.ConferenceError],,],voiceHowling:[,,,1,,,[[1]],,,,],voiceNoise:[,,,1,,,[[1]],,,,],remoteAudioSet:[,,,1,,,[[2],[o.remoteAudio]],,[r.ConferenceError],,],getRemoteAudioInf:[,,,1,,[o.remoteAudioInf],[[2]],,[r.ConferenceError],,],setMediaAudioState:[,,,1,,,[[7]],,,,],batchSubscribeAudio:[,,,1,,,[[7]],,[r.ConferenceError],,],setVoiceChange:[,,,1,,,[[2],[3]],,[r.ConferenceError],,]}),n.Conference=o}("undefined"!=typeof global&&global.process,"undefined"!=typeof global&&void 0!==global.process?n(3841):window.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?t:this)},5267:function(e,t,n){e=n.nmd(e),function(e,t,n){var i=t("ice").Ice,r=i.__M,o=t("Common/Exception").Common,s=r.require(e,["Control/Member","Control/Contact","Control/PublicTypes","Control/Notice","Control/ConferenceV4"]).Conference,a=i.Slice;s.LoginResponse=a.defineStruct((function(e,t,n,i,r,o,a,c,l,d,u,h,f,_,p,C,g,m,I,R,y,S,v){this.termId=void 0!==e?e:0,this.option=void 0!==t?t:0,this.myDetail=void 0!==n?n:new s.Contact,this.modules=void 0!==i?i:null,this.activeMembers=void 0!==r?r:null,this.ServerUTCTime=void 0!==o?o:0,this.bRoomLocked=void 0!==a&&a,this.confInfo=void 0!==c?c:null,this.isBegan=void 0!==l&&l,this.countdown=void 0!==d?d:0,this.fileServers=void 0!==u?u:null,this.vqs=void 0!==h?h:null,this.windowMode=void 0!==f?f:s.WINDOW_MODE.VMANAGER_LOCK,this.mainVideoTermID=void 0!==_?_:0,this.vlo=void 0!==p?p:s.VIDEOLAYOUTMODE.VLO_1v1_M,this.bAllowWall=void 0!==C&&C,this.curMainTab=void 0!==g?g:new s.TabID,this.curSubTab=void 0!==m?m:new s.TabID,this.bFull=void 0!==I&&I,this.sm=void 0!==R?R:s.SYNCMODE.SYNC_FORCE,this.lastTabValue=void 0!==y?y:0,this.lastElemValue=void 0!==S?S:0,this.wbDescibes=void 0!==v?v:null}),!1,(function(e){e.writeShort(this.termId),e.writeInt(this.option),s.Contact.write(e,this.myDetail),s.ModuleDictHelper.write(e,this.modules),s.MemberSeqHelper.write(e,this.activeMembers),e.writeInt(this.ServerUTCTime),e.writeBool(this.bRoomLocked),s.StringStringMapHelper.write(e,this.confInfo),e.writeBool(this.isBegan),e.writeInt(this.countdown),s.FileServerSeqHelper.write(e,this.fileServers),s.VideoQualitySeqHelper.write(e,this.vqs),s.WINDOW_MODE.__write(e,this.windowMode),e.writeShort(this.mainVideoTermID),s.VIDEOLAYOUTMODE.__write(e,this.vlo),e.writeBool(this.bAllowWall),s.TabID.write(e,this.curMainTab),s.TabID.write(e,this.curSubTab),e.writeBool(this.bFull),s.SYNCMODE.__write(e,this.sm),e.writeShort(this.lastTabValue),e.writeShort(this.lastElemValue),s.WhiteBoardDescribeSeqHelper.write(e,this.wbDescibes)}),(function(e){this.termId=e.readShort(),this.option=e.readInt(),this.myDetail=s.Contact.read(e,this.myDetail),this.modules=s.ModuleDictHelper.read(e),this.activeMembers=s.MemberSeqHelper.read(e),this.ServerUTCTime=e.readInt(),this.bRoomLocked=e.readBool(),this.confInfo=s.StringStringMapHelper.read(e),this.isBegan=e.readBool(),this.countdown=e.readInt(),this.fileServers=s.FileServerSeqHelper.read(e),this.vqs=s.VideoQualitySeqHelper.read(e),this.windowMode=s.WINDOW_MODE.__read(e),this.mainVideoTermID=e.readShort(),this.vlo=s.VIDEOLAYOUTMODE.__read(e),this.bAllowWall=e.readBool(),this.curMainTab=s.TabID.read(e,this.curMainTab),this.curSubTab=s.TabID.read(e,this.curSubTab),this.bFull=e.readBool(),this.sm=s.SYNCMODE.__read(e),this.lastTabValue=e.readShort(),this.lastElemValue=e.readShort(),this.wbDescibes=s.WhiteBoardDescribeSeqHelper.read(e)}),50,!1),s.ConferenceRoom=a.defineObject(void 0,i.Object,[s.ConferenceSessionV4],0,["::Conference::ConferenceRoom","::Conference::ConferenceSessionV4","::Ice::Object"],-1,void 0,void 0,!1),s.ConferenceRoomPrx=a.defineProxy(i.ObjectPrx,s.ConferenceRoom.ice_staticId,[s.ConferenceSessionV4Prx]),a.defineOperations(s.ConferenceRoom,s.ConferenceRoomPrx,{login:[,,,1,,[s.LoginResponse],[[s.LoginRequest]],,[o.ConferenceError],,]}),s.SSLoginRequest=a.defineStruct((function(e,t,n,i,r,o,s,a){this.confKey=void 0!==e?e:"",this.memberId=void 0!==t?t:0,this.memberType=void 0!==n?n:0,this.phoneNum=void 0!==i?i:"",this.callbacks=void 0!==r?r:null,this.accessNo=void 0!==o?o:0,this.PIN=void 0!==s?s:"",this.sessionId=void 0!==a?a:""}),!1,(function(e){e.writeString(this.confKey),e.writeInt(this.memberId),e.writeByte(this.memberType),e.writeString(this.phoneNum),s.ModuleDictHelper.write(e,this.callbacks),e.writeInt(this.accessNo),e.writeString(this.PIN),e.writeString(this.sessionId)}),(function(e){this.confKey=e.readString(),this.memberId=e.readInt(),this.memberType=e.readByte(),this.phoneNum=e.readString(),this.callbacks=s.ModuleDictHelper.read(e),this.accessNo=e.readInt(),this.PIN=e.readString(),this.sessionId=e.readString()}),14,!1),s.SSLoginResponse=a.defineStruct((function(e,t,n,i,r,o,a,c){this.termId=void 0!==e?e:0,this.modules=void 0!==t?t:null,this.actor=void 0!==n?n:0,this.needPIN=void 0!==i&&i,this.PINLen=void 0!==r?r:0,this.currentTermNum=void 0!==o?o:0,this.isBegan=void 0!==a&&a,this.audioStatus=void 0!==c?c:s.ASTATUS.AUNKNOWN}),!1,(function(e){e.writeShort(this.termId),s.ModuleDictHelper.write(e,this.modules),e.writeByte(this.actor),e.writeBool(this.needPIN),e.writeByte(this.PINLen),e.writeInt(this.currentTermNum),e.writeBool(this.isBegan),s.ASTATUS.__write(e,this.audioStatus)}),(function(e){this.termId=e.readShort(),this.modules=s.ModuleDictHelper.read(e),this.actor=e.readByte(),this.needPIN=e.readBool(),this.PINLen=e.readByte(),this.currentTermNum=e.readInt(),this.isBegan=e.readBool(),this.audioStatus=s.ASTATUS.__read(e)}),12,!1),Object.defineProperty(s,"PHASE_ALERTING",{value:0}),Object.defineProperty(s,"PHASE_CONNECT",{value:1}),Object.defineProperty(s,"PHASE_END",{value:2}),Object.defineProperty(s,"END_REASON_NORMAL",{value:0}),Object.defineProperty(s,"END_REASON_NO_ANSWER",{value:1}),Object.defineProperty(s,"END_REASON_REJECT",{value:2}),Object.defineProperty(s,"END_REASON_CONNECT_ERR",{value:3}),Object.defineProperty(s,"END_REASON_USER_BUSY",{value:4}),Object.defineProperty(s,"END_REASON_BALANCE_LESS",{value:5}),s.SoftSwitchUser=a.defineObject(void 0,i.Object,void 0,0,["::Conference::SoftSwitchUser","::Ice::Object"],-1,void 0,void 0,!1),s.SoftSwitchUserPrx=a.defineProxy(i.ObjectPrx,s.SoftSwitchUser.ice_staticId,void 0),a.defineOperations(s.SoftSwitchUser,s.SoftSwitchUserPrx,{login:[,,,1,,[s.SSLoginResponse],[[s.SSLoginRequest]],,[o.ConferenceError],,],callProgress:[,,,1,,,[[3],[3],[7]],,,,]}),s.AAAReport=a.defineObject(void 0,i.Object,void 0,0,["::Conference::AAAReport","::Ice::Object"],-1,void 0,void 0,!1),s.AAAReportPrx=a.defineProxy(i.ObjectPrx,s.AAAReport.ice_staticId,void 0),a.defineOperations(s.AAAReport,s.AAAReportPrx,{callBalanceLess:[,,,1,,,[[7],[7]],,[o.ConferenceError],,]}),a.defineDictionary(s,"IntMemberMap","IntMemberMapHelper","Ice.IntHelper","Conference.Member",!1,void 0,void 0,i.HashMap.compareEquals),s.AllMembersInfo=a.defineStruct((function(e,t){this.sn=void 0!==e?e:0,this.memberMap=void 0!==t?t:null}),!1,(function(e){e.writeLong(this.sn),s.IntMemberMapHelper.write(e,this.memberMap)}),(function(e){this.sn=e.readLong(),this.memberMap=s.IntMemberMapHelper.read(e)}),9,!1),s.ConfDataCenter=a.defineObject(void 0,i.Object,void 0,0,["::Conference::ConfDataCenter","::Ice::Object"],-1,void 0,void 0,!1),s.ConfDataCenterPrx=a.defineProxy(i.ObjectPrx,s.ConfDataCenter.ice_staticId,void 0),a.defineOperations(s.ConfDataCenter,s.ConfDataCenterPrx,{getActiveMembers:[,,,1,,[s.AllMembersInfo],[[7]],,[o.ConferenceError],,]}),s.WebAdmin=a.defineObject(void 0,i.Object,void 0,0,["::Conference::WebAdmin","::Ice::Object"],-1,void 0,void 0,!1),s.WebAdminPrx=a.defineProxy(i.ObjectPrx,s.WebAdmin.ice_staticId,void 0),a.defineOperations(s.WebAdmin,s.WebAdminPrx,{refresInvitees:[,,,1,,,,,[o.ConferenceError],,],refreshOptions:[,,,1,,,,,[o.ConferenceError],,],getConfStatus:[,,,1,,[7],,,,,],callInvite:[,,,1,,,[[7],[7],[1]],,[o.ConferenceError],,],getLiveStream:[,,,1,,["Conference.StringStringMapHelper"],,,[o.ConferenceError],,],requestThirdPartyLiveStreamUrl:[,,,1,,[7],[[3]],,,,],notifyLiveStreamStatus:[,,,1,,,[[3],[3]],,,,],refreshThirdPublishStatus:[,,,1,,,,,,,],startListLive:[,,,1,,[3],[[7]],,[o.ConferenceError],,],stopListLive:[,,,1,,[3],,,,,],notifyRedStatus:[,,,1,,,[[3],[7],[3],[3],[7],[7],[7],[7]],,,,],notifyThumbUp:[,,,1,,,[[3],[3],[3],[7]],,,,],notifypayback:[,,,1,,,[[3],[7]],,,,],swtichLiveAppElements:[,,,1,,,[[3],[2]],,,,],getActiveMembers:[,,,1,,["Conference.MemberSeqHelper"],,,[o.ConferenceError],,],startRtsp:[,,,1,,[7],[[3],[3],[3],[3]],,[o.ConferenceError],,],stopRtsp:[,,,1,,,,,[o.ConferenceError],,],getRtspInfo:[,,,1,,["Conference.StringStringMapHelper"],,,[o.ConferenceError],,],updateRtspContent:[,,,1,,,[[3],[3]],,[o.ConferenceError],,],startNoticeMsg:[,,,1,,,[[s.NoticeInfo]],,,,],kickout:[,,,1,,,[[7]],,[o.ConferenceError],,],sendMsg:[,,,1,,,[[7],[7]],,[o.ConferenceError],,],sendVoteMsg:[,,,1,,,[[7]],,[o.ConferenceError],,],sendVoteMsg2Host:[,,,1,,,[[7]],,[o.ConferenceError],,]}),a.defineDictionary(s,"MemberRights","MemberRightsHelper","Ice.ShortHelper","Conference.ByteListHelper",!1,void 0,void 0,i.ArrayUtil.equals),s.ChangedRights=a.defineStruct((function(e,t,n){this.termId=void 0!==e?e:0,this.addedRights=void 0!==t?t:null,this.reducedRights=void 0!==n?n:null}),!0,(function(e){e.writeShort(this.termId),s.ByteListHelper.write(e,this.addedRights),s.ByteListHelper.write(e,this.reducedRights)}),(function(e){this.termId=e.readShort(),this.addedRights=s.ByteListHelper.read(e),this.reducedRights=s.ByteListHelper.read(e)}),4,!1),a.defineSequence(s,"ChangedRightsSeqHelper","Conference.ChangedRights",!1),Object.defineProperty(s,"INVITE_PREPARE",{value:0}),Object.defineProperty(s,"PSTN_CALLING",{value:1}),Object.defineProperty(s,"PSTN_RING",{value:2}),Object.defineProperty(s,"PSTN_CONNECTED",{value:3}),Object.defineProperty(s,"PSTN_HUNG",{value:4}),Object.defineProperty(s,"PSTN_NO_ANSWER",{value:5}),Object.defineProperty(s,"PSTN_REJECT",{value:6}),Object.defineProperty(s,"PSTN_CONNECT_ERR",{value:7}),Object.defineProperty(s,"PSTN_BUSY",{value:8}),Object.defineProperty(s,"AAA_ACCOUNT_NOT_EXIST",{value:100}),Object.defineProperty(s,"AAA_NO_PERMIT",{value:101}),Object.defineProperty(s,"AAA_BALANCE_NOT_ENOUGH",{value:102}),Object.defineProperty(s,"INV_SMS_FAILED",{value:2}),Object.defineProperty(s,"INV_SMS_SUCCESS",{value:1}),Object.defineProperty(s,"INV_EMAIL_FAILED",{value:2}),Object.defineProperty(s,"INV_EMAIL_SUCCESS",{value:1}),Object.defineProperty(s,"INV_EMAIL_READED",{value:3}),Object.defineProperty(s,"WDT_1V1SUBMT_MONITOR",{value:0}),Object.defineProperty(s,"WDT_1v1SUBMT_CHAT",{value:1}),s.InvitedMember=a.defineStruct((function(e,t,n){this.member=void 0!==e?e:new s.Contact,this.pstnNotice=void 0!==t&&t,this.state=void 0!==n?n:0}),!0,(function(e){s.Contact.write(e,this.member),e.writeBool(this.pstnNotice),e.writeInt(this.state)}),(function(e){this.member=s.Contact.read(e,this.member),this.pstnNotice=e.readBool(),this.state=e.readInt()}),14,!1),a.defineSequence(s,"InvitedMembersHelper","Conference.InvitedMember",!1),s.INVITE_TYPE=a.defineEnum([["TP_CALL",0],["TP_SMS",1],["TP_EMAIL",2]]),a.defineDictionary(s,"InvitedMembersDict","InvitedMembersDictHelper","Conference.INVITE_TYPE.__helper","Conference.InvitedMembersHelper",!1,void 0,void 0,i.ArrayUtil.equals),a.defineDictionary(s,"HistoryMembers","HistoryMembersHelper","Ice.ShortHelper","Conference.Member",!1,void 0,void 0,i.HashMap.compareEquals),a.defineDictionary(s,"HistoryMemberNames","HistoryMemberNamesHelper","Ice.ShortHelper","Ice.StringHelper",!1,void 0,void 0),a.defineDictionary(s,"StatusDict","StatusDictHelper","Ice.StringHelper","Ice.StringHelper",!1,void 0,void 0),a.defineDictionary(s,"BroadCastDict","BroadCastDictHelper","Ice.StringHelper","Ice.StringHelper",!1,void 0,void 0),Object.defineProperty(s,"LD_MEMBER_LOCAL",{value:1}),Object.defineProperty(s,"LD_MEMBER_VIEWER",{value:2}),Object.defineProperty(s,"LD_MEMBER_ALL",{value:3}),s.LDPrize=a.defineStruct((function(e,t){this.prizeName=void 0!==e?e:"",this.prizeCnt=void 0!==t?t:0}),!0,(function(e){e.writeString(this.prizeName),e.writeInt(this.prizeCnt)}),(function(e){this.prizeName=e.readString(),this.prizeCnt=e.readInt()}),5,!1),s.LuckyDrawCfg=a.defineStruct((function(e,t,n,i){this.memberType=void 0!==e?e:0,this.cdTime=void 0!==t?t:0,this.isAutoDraw=void 0!==n&&n,this.prizes=void 0!==i?i:new s.LDPrize}),!0,(function(e){e.writeInt(this.memberType),e.writeInt(this.cdTime),e.writeBool(this.isAutoDraw),s.LDPrize.write(e,this.prizes)}),(function(e){this.memberType=e.readInt(),this.cdTime=e.readInt(),this.isAutoDraw=e.readBool(),this.prizes=s.LDPrize.read(e,this.prizes)}),14,!1),s.LuckyDrawMember=a.defineStruct((function(e,t,n){this.name=void 0!==e?e:"",this.contact=void 0!==t?t:"",this.memberType=void 0!==n?n:0}),!0,(function(e){e.writeString(this.name),e.writeString(this.contact),e.writeInt(this.memberType)}),(function(e){this.name=e.readString(),this.contact=e.readString(),this.memberType=e.readInt()}),6,!1),a.defineSequence(s,"LuckyDrawMembersHelper","Conference.LuckyDrawMember",!1),s.LDMembersCNT=a.defineStruct((function(e,t){this.memberLocalCnt=void 0!==e?e:0,this.memberViewerCnt=void 0!==t?t:0}),!0,(function(e){e.writeInt(this.memberLocalCnt),e.writeInt(this.memberViewerCnt)}),(function(e){this.memberLocalCnt=e.readInt(),this.memberViewerCnt=e.readInt()}),8,!0),s.LuckyResult=a.defineStruct((function(e,t,n){this.prize=void 0!==e?e:new s.LDPrize,this.annouceTime=void 0!==t?t:0,this.res=void 0!==n?n:null}),!0,(function(e){s.LDPrize.write(e,this.prize),e.writeInt(this.annouceTime),s.LuckyDrawMembersHelper.write(e,this.res)}),(function(e){this.prize=s.LDPrize.read(e,this.prize),this.annouceTime=e.readInt(),this.res=s.LuckyDrawMembersHelper.read(e)}),10,!1),s.VoteState=a.defineStruct((function(e,t,n,i,r){this.id=void 0!==e?e:"",this.voteOwner=void 0!==t?t:0,this.state=void 0!==n?n:0,this.voteInfo=void 0!==i?i:"",this.memberVotes=void 0!==r?r:null}),!1,(function(e){e.writeString(this.id),e.writeShort(this.voteOwner),e.writeInt(this.state),e.writeString(this.voteInfo),s.StringStringMapHelper.write(e,this.memberVotes)}),(function(e){this.id=e.readString(),this.voteOwner=e.readShort(),this.state=e.readInt(),this.voteInfo=e.readString(),this.memberVotes=s.StringStringMapHelper.read(e)}),9,!1),s.meetingAttr=a.defineStruct((function(e,t,n){this.value=void 0!==e?e:"",this.lastModifyUserID=void 0!==t?t:"",this.lastModifyTs=void 0!==n?n:0}),!0,(function(e){e.writeString(this.value),e.writeString(this.lastModifyUserID),e.writeInt(this.lastModifyTs)}),(function(e){this.value=e.readString(),this.lastModifyUserID=e.readString(),this.lastModifyTs=e.readInt()}),6,!1),a.defineDictionary(s,"MeetingAttrsMap","MeetingAttrsMapHelper","Ice.StringHelper","Conference.meetingAttr",!1,void 0,void 0,i.HashMap.compareEquals),a.defineDictionary(s,"UserAttrsMap","UserAttrsMapHelper","Ice.StringHelper","Conference.MeetingAttrsMapHelper",!1,void 0,void 0,i.HashMap.compareEquals),a.defineSequence(s,"stringSeqHelper","Ice.StringHelper",!1),s.ConferenceSession=a.defineObject(void 0,i.Object,void 0,0,["::Conference::ConferenceSession","::Ice::Object"],-1,void 0,void 0,!1),s.ConferenceSessionPrx=a.defineProxy(i.ObjectPrx,s.ConferenceSession.ice_staticId,void 0),a.defineOperations(s.ConferenceSession,s.ConferenceSessionPrx,{keepAlive:[,,,1,,,[["Conference.StatusDictHelper"]],,[o.ConferenceError],,],exit:[,,,1,,,[[7]],,,,],setAppStatus:[,,,1,,,[[1]],,[o.ConferenceError],,],changeNickname:[,,,1,,[7],[[2],[7]],,[o.ConferenceError],,],getActiveMembers:[,,,1,,["Conference.MemberSeqHelper"],,,[o.ConferenceError],,],getContacts:[,,,1,,["Conference.ContactTreeHelper"],,,[o.ConferenceError],,],applyDemoActor:[,,,1,,,,,[o.ConferenceError],,],applyAssistantActor:[,,,1,,,,,[o.ConferenceError],,],getOption:[,,,1,,[3],,,[o.ConferenceError],,],getMyDetail:[,,,1,,[s.Contact],,,[o.ConferenceError],,],getInfo:[,,,1,,["Conference.StringStringMapHelper"],,,[o.ConferenceError],,],setAgenda:[,,,1,,,[[7]],,[o.ConferenceError],,],setSubject:[,,,1,,,[[7]],,[o.ConferenceError],,],getPSTNNumber:[,,,1,,[7],,,[o.ConferenceError],,],setPSTNNumber:[,,,1,,,[[7],[1]],,[o.ConferenceError],,],generatePIN:[,,,1,,[7],,,,,],cancelPIN:[,,,1,,,,,,,],changeMemberRights:[,,,1,,,[["Conference.ChangedRightsSeqHelper"]],,[o.ConferenceError],,],getAllMemberRights:[,,,1,,["Conference.MemberRightsHelper"],,,[o.ConferenceError],,],changeOption:[,,,1,,,[[3]],,[o.ConferenceError],,],setDemoActor:[,,,1,,,[[2]],,[o.ConferenceError],,],setHostActor:[,,,1,,,[[2],[7]],,[o.ConferenceError],,],setPSTNHostActor:[,,,1,,,[[s.ContactIdType]],,[o.ConferenceError],,],getPSTNHostActor:[,,,1,,[s.ContactIdType],,,[o.ConferenceError],,],allowDemoActor:[,,,1,,,[[2],[1]],,[o.ConferenceError],,],setAssistantActor:[,,,1,,,[[2],[1]],,[o.ConferenceError],,],getInviteMembers:[,,,1,,["Conference.InvitedMembersDictHelper"],,,[o.ConferenceError],,],getSelfInviteInfo:[,,,1,,[s.InvitedMember],,,[o.ConferenceError],,],addPSTNInvite:[,,,1,,["Conference.ContactIdSeqHelper"],[["Conference.ContactSeqHelper"],[1]],,[o.ConferenceError],,],modifyPSTNInvitee:[,,,1,,,[[s.INVITE_TYPE.__helper],[s.Contact]],,,,],smsInvite:[,,,1,,["Conference.ContactIdSeqHelper"],[["Conference.ContactSeqHelper"]],,[o.ConferenceError],,],callInvite:[,,,1,,["Conference.ContactIdSeqHelper"],[["Conference.ContactSeqHelper"],[1]],,[o.ConferenceError],,],emailInvite:[,,,1,,["Conference.ContactIdSeqHelper"],[["Conference.ContactSeqHelper"]],,[o.ConferenceError],,],removeInvitee:[,,,1,,,[[s.INVITE_TYPE.__helper],[s.Contact]],,[o.ConferenceError],,],cancelCall:[,,,1,,,[[s.ContactIdType]],,,,],callCustomerService:[,,,1,,,,,[o.ConferenceError],,],sendFeedback:[,,,1,,,[[7],[7]],,[o.ConferenceError],,],kickout:[,,,1,,,[[2]],,[o.ConferenceError],,],lockRoom:[,,,1,,,[[1]],,[o.ConferenceError],,],beginConference:[,,,1,,[s.ContactIdType],[[s.Contact]],,[o.ConferenceError],,],endConference:[,,,1,,,,,[o.ConferenceError],,],toggleRoomLock:[,,,1,,,,,[o.ConferenceError],,],broadcastMemberCount:[,,,1,,,,,[o.ConferenceError],,],getMemberCount:[,,,1,,[3],,,[o.ConferenceError],,],getBalance:[,,,1,,,,,[o.ConferenceError],,],cancelCountdown:[,,,1,,,,,[o.ConferenceError],,],getHistoryMembers:[,,,1,,["Conference.HistoryMembersHelper"],[["Ice.ShortSeqHelper"]],,[o.ConferenceError],,],getHistoryMemberNames:[,,,1,,["Conference.HistoryMemberNamesHelper"],,,[o.ConferenceError],,],cancelAutoEnd:[,,,1,,,,,[o.ConferenceError],,],netDetectResults:[,,,1,,,[[3],[1]],,[o.ConferenceError],,],getUserStatus:[,,,1,,["Conference.StringStringMapHelper"],[[2],[3]],,[o.ConferenceError],,],start1v1SubMeeting:[,,,1,,,[[2]],,[o.ConferenceError],,],stop1v1SubMeeting:[,,,1,,,[[2]],,[o.ConferenceError],,],setWDT1v1SubMeetingMode:[,,,1,,,[[3]],,,,],reportIVRStatus:[,,,1,,,[[1]],,,,],startSvrBroadcast:[,,,1,,,[[7]],,[o.ConferenceError],,],startBroadCast:[,,,1,,,,,[o.ConferenceError],,],stopBroadCast:[,,,1,,,,,[o.ConferenceError],,],getBroadCastCfg:[,,,1,,[7],,,[o.ConferenceError],,],getBroadCastUrl:[,,,1,,["Conference.BroadCastDictHelper"],,,,,],enableBroadCastPlayback:[,,,1,,,,,[o.ConferenceError],,],disableBroadCastPlayback:[,,,1,,,[[3]],,[o.ConferenceError],,],setLuckyDrawCfg:[,,,1,,,[[s.LuckyDrawCfg]],,[o.ConferenceError],,],joinLuckyDrawMembers:[,,,1,,,[["Conference.LuckyDrawMembersHelper"],[3]],,[o.ConferenceError],,],clearLuckyDrawMembers:[,,,1,,,[[3]],,[o.ConferenceError],,],queryLuckyDrawMembers:[,,,1,,["Conference.LuckyDrawMembersHelper"],[[3],[2],[3]],,,,],announceLuckyDrawResult:[,,,1,,,,,[o.ConferenceError],,],getLuckyDrawCfg:[,,,1,,[s.LuckyDrawCfg],,,[o.ConferenceError],,],getLuckyDrawMembersStatus:[,,,1,,[s.LDMembersCNT],,,[o.ConferenceError],,],startSvrRecord:[,,,1,,,[[7]],,[o.ConferenceError],,],updateSvrRecCfg:[,,,1,,,[[7]],,[o.ConferenceError],,],stopSvrRecord:[,,,1,,,,,[o.ConferenceError],,],setSvrRecordState:[,,,1,,,[[s.REC_STATE.__helper],[3]],,[o.ConferenceError],,],setSvrRecordFileState:[,,,1,,,[[7]],,,,],setAppUILocked:[,,,1,,,[[3]],,[o.ConferenceError],,],setMcuPrivTaskState:[,,,1,,,[[3]],,[o.ConferenceError],,],beginVote:[,,,1,,,[[7]],,[o.ConferenceError],,],endVote:[,,,1,,,,,[o.ConferenceError],,],publishVoteResult:[,,,1,,,[[7]],,[o.ConferenceError],,],commitVote:[,,,1,,,[[7]],,[o.ConferenceError],,],getVoteState:[,,,1,,[s.VoteState],,,[o.ConferenceError],,],terminalMsg:[,,,1,,,[[7],[7],[3],[1]],,,,],updateSCEP:[,,,1,,,[[7]],,,,],updateSDKToken:[,,,1,,[3],[[7]],,,,],getMeetingAllAttrs:[,,,1,,["Conference.MeetingAttrsMapHelper"],,,[o.ConferenceError],,],getMeetingAttrs:[,,,1,,["Conference.MeetingAttrsMapHelper"],[["Conference.stringSeqHelper"]],,[o.ConferenceError],,],setMeetingAttrs:[,,,1,,,[["Conference.StringStringMapHelper"],[7]],,[o.ConferenceError],,],addOrUpdateMeetingAttrs:[,,,1,,,[["Conference.StringStringMapHelper"],[7]],,[o.ConferenceError],,],delMeetingAttrs:[,,,1,,,[["Conference.stringSeqHelper"],[7]],,[o.ConferenceError],,],clearMeetingAttrs:[,,,1,,,[[7]],,[o.ConferenceError],,],getUserAttrs:[,,,1,,["Conference.UserAttrsMapHelper"],[["Conference.stringSeqHelper"]],,[o.ConferenceError],,],getUserAttrsWithKey:[,,,1,,["Conference.UserAttrsMapHelper"],[["Conference.stringSeqHelper"],["Conference.stringSeqHelper"]],,[o.ConferenceError],,],setUserAttrs:[,,,1,,,[[7],["Conference.StringStringMapHelper"],[7]],,[o.ConferenceError],,],addOrUpdateUserAttrs:[,,,1,,,[[7],["Conference.StringStringMapHelper"],[7]],,[o.ConferenceError],,],delUserAttrs:[,,,1,,,[[7],["Conference.stringSeqHelper"],[7]],,[o.ConferenceError],,],clearAllUserAttrs:[,,,1,,,[[7]],,[o.ConferenceError],,],clearUserAttrs:[,,,1,,,[["Conference.stringSeqHelper"],[7]],,[o.ConferenceError],,],startShare:[,,,1,,,[[7]],,[o.ConferenceError],,],stopShare:[,,,1,,,[[7]],,[o.ConferenceError],,],getWaitingMembers:[,,,1,,["Conference.WaitingMemberSeqHelper"],[[7]],,[o.ConferenceError],,],kickoutFromWaitRoom:[,,,1,,,[[7]],,[o.ConferenceError],,],acceptFromWaitRoom:[,,,1,,,[[7]],,[o.ConferenceError],,],gobackToWaitRoom:[,,,1,,,[[2]],,[o.ConferenceError],,],startCloudRecord:[,,,1,,,[[7],[7]],,,,],stopCloudRecord:[,,,1,,,[[7]],,,,],updateCloudRecord:[,,,1,,,[[7],[7]],,,,],setClodudRecordState:[,,,1,,,[[s.REC_STATE.__helper],[7]],,,,],setClodudRecordFileState:[,,,1,,,[[7]],,,,]}),Object.defineProperty(s,"SVR_NOTIFY_BALANCE_LESS",{value:1}),s.ConferenceCallback=a.defineObject(void 0,i.Object,void 0,0,["::Conference::ConferenceCallback","::Ice::Object"],-1,void 0,void 0,!1),s.ConferenceCallbackPrx=a.defineProxy(i.ObjectPrx,s.ConferenceCallback.ice_staticId,void 0),a.defineOperations(s.ConferenceCallback,s.ConferenceCallbackPrx,{entered:[,,,,,,[[s.Member]],,,,],left:[,,,,,,[[2],[2],[7],[7]],,,,],actorChanged:[,,,,,,[[2],[2],[0]],,,,],nicknameChanged:[,,,,,,[[2],[2],[7]],,,,],optionChanged:[,,,,,,[[3]],,,,],rightChanged:[,,,,,,[[s.ChangedRights]],,,,],roomStateChanged:[,,,,,,[[1]],,,,],inviteStateChanged:[,,,,,,[[s.INVITE_TYPE.__helper],[s.InvitedMember]],,,,],conferenceBegan:[,,,,,,,,,,],conferenceEnded:[,,,,,,[[s.Contact],[7]],,,,],memberCount:[,,,,,,[[3]],,,,],confirmAutoEnd:[,,,,,,[[3]],,,,],autoEndCancelled:[,,,,,,,,,,],roomKnocked:[,,,,,,[[s.Contact],[7]],,,,],agendaUpdated:[,,,,,,[[7]],,,,],subjectUpdated:[,,,,,,[[7]],,,,],notifyApplyDemo:[,,,,,,[[2]],,,,],notifyApplyRejected:[,,,,,,[[2],[2]],,,,],serverNotify:[,,,,,,[[3]],,,,],serverNotifyMsg:[,,,,,,[[7]],,,,],updateAppStatus:[,,,,,,[["Ice.ShortSeqHelper"],["Ice.ShortSeqHelper"]],,,,],notifyAssistantChanged:[,,,,,,[[2],[2],[1]],,,,],notifyNetDetectResults:[,,,,,,[[2],[3],[1]],,,,],notifyReportStatus:[,,,1,,["Conference.StringStringMapHelper"],[[2],[3]],,,,],exeCmd:[,,,1,,[7],[[7]],,,,],notifyStart1v1SubMeeting:[,,,1,,,[[2]],,[o.ConferenceError],,],notifyStop1v1SubMeeting:[,,,,,,[[2]],,,,],notifyStart1v1SubMeetingRslt:[,,,,,,[[2],[1]],,,,],setWDT1v1SubMeetingMode:[,,,,,,[[2],[3]],,,,],notifyIVRStatus:[,,,,,,[[2],[1]],,,,],notifyStartSvrBroadcast:[,,,,,,[[2],[7]],,,,],notifyStartBroadCast:[,,,,,,[[2]],,,,],notifyStopBroadCast:[,,,,,,[[2]],,,,],notifyWebViewerNum:[,,,,,,[[3]],,,,],notifyBroadCastStartPush:[,,,,,,[["Conference.BroadCastDictHelper"]],,,,],notifyBroadCastStopPush:[,,,,,,,,,,],notifyBroadCastPlayback:[,,,,,,[[7]],,,,],notifyBroadCastPlaybackStop:[,,,,,,[[7]],,,,],notifypayback:[,,,,,,,,,,],notifySwtichLiveAppElements:[,,,,,,[[3],[2]],,,,],notifyThumbUp:[,,,,,,[[3],[3],[7]],,,,],notifyLuckyDrawCfg:[,,,,,,[[s.LuckyDrawCfg]],,,,],notifyLDMembersStatus:[,,,,,,[[s.LDMembersCNT]],,,,],notifyLuckyDrawResult:[,,,,,,[[s.LuckyResult]],,,,],notifySvrRecordStateChanged:[,,,,,,[[2],[s.REC_STATE.__helper],[3]],,,,],notifySvrRecordCfgChanged:[,,,,,,[[2],[7]],,,,],notifySvrRecordFileState:[,,,,,,[[7]],,,,],notifySvrBroadcastCfgChanged:[,,,,,,[[2],[7]],,,,],notifyAppUILocked:[,,,,,,[[3]],,,,],notifyBeginVote:[,,,,,,[[2],[7],[7]],,,,],notifyEndVote:[,,,,,,[[2]],,,,],notifyPublishVoteResult:[,,,,,,[[2],[7]],,,,],notifyCommitVote:[,,,,,,[[2],[7]],,,,],notifyTerminalMsg:[,,,,,,[[7],[7],[3],[3]],,,,],notifySCEPChanged:[,,,,,,[[2],[7]],,,,],notifyMeetingAttrsChanged:[,,,,,,[["Conference.MeetingAttrsMapHelper"],["Conference.MeetingAttrsMapHelper"],["Conference.stringSeqHelper"]],,,,],notifyUserAttrsChanged:[,,,,,,[[7],["Conference.MeetingAttrsMapHelper"],["Conference.MeetingAttrsMapHelper"],["Conference.stringSeqHelper"]],,,,],notifyShareStateChanged:[,,,,,,[[7]],,,,],notifyEnterWaitingRoom:[,,,,,,[[s.WaitingMember]],,,,],notifyLeftWaitingRoom:[,,,,,,[[7],[7]],,,,],notifyJoinSubMeeting:[,,,,,,[[2],[7]],,,,],notifyClodudRecordStateChanged:[,,,,,,[[2],[7],[s.REC_STATE.__helper],[7]],,,,],notifyClodudRecordCfgChanged:[,,,,,,[[2],[7],[7]],,,,],notifyClodudRecordFileState:[,,,,,,[[7],[7]],,,,]}),n.Conference=s}("undefined"!=typeof global&&void 0!==global.process?e:void 0,"undefined"!=typeof global&&void 0!==global.process?n(3841):window.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?t:this)},3138:function(e,t,n){e=n.nmd(e),function(e,t,n){var i=t("ice").Ice,r=(i.__M,t("Common/Exception").Common),o=t("Control/PublicTypes").Conference,s=i.Slice;o.ConferenceSessionV4=s.defineObject(void 0,i.Object,void 0,0,["::Conference::ConferenceSessionV4","::Ice::Object"],-1,void 0,void 0,!1),o.ConferenceSessionV4Prx=s.defineProxy(i.ObjectPrx,o.ConferenceSessionV4.ice_staticId,void 0),s.defineOperations(o.ConferenceSessionV4,o.ConferenceSessionV4Prx,{sendCmd:[,,,1,,,[[7],[7],[7],["Ice.ByteSeqHelper"]],[[7],["Ice.ByteSeqHelper"]],[r.ConferenceError],,]}),n.Conference=o}("undefined"!=typeof global&&global.process,"undefined"!=typeof global&&void 0!==global.process?n(3841):window.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?t:this)},6581:function(e,t,n){e=n.nmd(e),function(e,t,n){var i=t("ice").Ice,r=i.__M,o=i.Slice,s=r.module("Conference");Object.defineProperty(s,"CT_USER",{value:1}),Object.defineProperty(s,"CT_CONTACT",{value:2}),Object.defineProperty(s,"CT_TMP",{value:3}),Object.defineProperty(s,"CT_CLIENT",{value:6}),Object.defineProperty(s,"CT_VIRTUAL",{value:7}),s.Contact=o.defineStruct((function(e,t,n,i,r,o){this.id=void 0!==e?e:0,this.type=void 0!==t?t:0,this.nickname=void 0!==n?n:"",this.email=void 0!==i?i:"",this.mobile=void 0!==r?r:"",this.confPhone=void 0!==o?o:""}),!0,(function(e){e.writeInt(this.id),e.writeByte(this.type),e.writeString(this.nickname),e.writeString(this.email),e.writeString(this.mobile),e.writeString(this.confPhone)}),(function(e){this.id=e.readInt(),this.type=e.readByte(),this.nickname=e.readString(),this.email=e.readString(),this.mobile=e.readString(),this.confPhone=e.readString()}),9,!1),s.ContactIdType=o.defineStruct((function(e,t){this.id=void 0!==e?e:0,this.type=void 0!==t?t:0}),!0,(function(e){e.writeInt(this.id),e.writeByte(this.type)}),(function(e){this.id=e.readInt(),this.type=e.readByte()}),5,!0),o.defineSequence(s,"ContactSeqHelper","Conference.Contact",!1),o.defineSequence(s,"ContactIdSeqHelper","Conference.ContactIdType",!0),o.defineDictionary(s,"ContactTree","ContactTreeHelper","Ice.StringHelper","Conference.ContactSeqHelper",!1,void 0,void 0,i.ArrayUtil.equals),n.Conference=s}("undefined"!=typeof global&&global.process,"undefined"!=typeof global&&void 0!==global.process?n(3841):window.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?t:this)},8002:function(e,t,n){e=n.nmd(e),function(e,t,n){var i=t("ice").Ice,r=(i.__M,t("Common/Exception").Common),o=t("Control/Conference").Conference,s=i.Slice;o.IMFont=s.defineStruct((function(e,t){this.color=void 0!==e?e:0,this.size=void 0!==t?t:0}),!0,(function(e){e.writeInt(this.color),e.writeByte(this.size)}),(function(e){this.color=e.readInt(),this.size=e.readByte()}),5,!0),o.InIMMsgInfo=s.defineStruct((function(e,t,n,i,r){this.targetTermId=void 0!==e?e:0,this.targetNickname=void 0!==t?t:"",this.font=void 0!==n?n:new o.IMFont,this.msg=void 0!==i?i:"",this.sendTime=void 0!==r?r:0}),!0,(function(e){e.writeShort(this.targetTermId),e.writeString(this.targetNickname),o.IMFont.write(e,this.font),e.writeString(this.msg),e.writeInt(this.sendTime)}),(function(e){this.targetTermId=e.readShort(),this.targetNickname=e.readString(),this.font=o.IMFont.read(e,this.font),this.msg=e.readString(),this.sendTime=e.readInt()}),13,!1),o.OutIMMsgInfo=s.defineStruct((function(e,t,n,i){this.index=void 0!==e?e:0,this.srcTermId=void 0!==t?t:0,this.srcNickname=void 0!==n?n:"",this.inMsg=void 0!==i?i:new o.InIMMsgInfo}),!0,(function(e){e.writeInt(this.index),e.writeShort(this.srcTermId),e.writeString(this.srcNickname),o.InIMMsgInfo.write(e,this.inMsg)}),(function(e){this.index=e.readInt(),this.srcTermId=e.readShort(),this.srcNickname=e.readString(),this.inMsg=o.InIMMsgInfo.read(e,this.inMsg)}),20,!1),s.defineSequence(o,"outMsgListHelper","Conference.OutIMMsgInfo",!1),s.defineSequence(o,"termIDListHelper","Ice.ShortHelper",!0),o.IMCallback=s.defineObject(void 0,i.Object,void 0,0,["::Conference::IMCallback","::Ice::Object"],-1,void 0,void 0,!1),o.IMCallbackPrx=s.defineProxy(i.ObjectPrx,o.IMCallback.ice_staticId,void 0),s.defineOperations(o.IMCallback,o.IMCallbackPrx,{receiveIMMsg:[,,,,,,[[o.OutIMMsgInfo]],,,,],receiveMultiIMMsg:[,,,,,,[["Conference.outMsgListHelper"]],,,,],notifyIMForbidStatus:[,,,,,,[[2],[2],[1]],,,,],notifyClearIMMsg:[,,,,,,[[2]],,,,],notifyDeleteIMMsg:[,,,,,,[[3]],,,,]}),o.IMSession=s.defineObject(void 0,i.Object,void 0,0,["::Conference::IMSession","::Ice::Object"],-1,void 0,void 0,!1),o.IMSessionPrx=s.defineProxy(i.ObjectPrx,o.IMSession.ice_staticId,void 0),s.defineOperations(o.IMSession,o.IMSessionPrx,{getIMMsgCount:[,,,1,,[3],,,,,],getLastMsg:[,,,1,,["Conference.outMsgListHelper"],[[3]],,[r.ConferenceError],,],getLastNMsg:[,,,1,,["Conference.outMsgListHelper"],[[3],[3]],,[r.ConferenceError],,],sendIMMsg:[,,,1,,,[[o.InIMMsgInfo]],,[r.ConferenceError],,],deleteIMMsg:[,,,1,,,[[3]],,[r.ConferenceError],,],getIMForbidList:[,,,1,,["Conference.termIDListHelper"],,,[r.ConferenceError],,],setIMForbidStatus:[,,,1,,,[[2],[1]],,[r.ConferenceError],,],clearIMMsg:[,,,1,,,,,[r.ConferenceError],,],passIMMsg:[,,,1,,[1],[[3]],,[r.ConferenceError],,]}),n.Conference=o}("undefined"!=typeof global&&global.process,"undefined"!=typeof global&&void 0!==global.process?n(3841):window.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?t:this)},6046:function(e,t,n){e=n.nmd(e),function(e,t,n){var i=t("ice").Ice,r=i.__M,o=t("Common/Exception").Common,s=i.Slice,a=r.module("Conference");a.MEDIA_STATE=s.defineEnum([["MEDIA_START",0],["MEDIA_PAUSE",1],["MEDIA_STOP",2]]),a.MediaInfo=s.defineStruct((function(e,t,n){this.termid=void 0!==e?e:0,this.state=void 0!==t?t:a.MEDIA_STATE.MEDIA_START,this.mediaName=void 0!==n?n:""}),!0,(function(e){e.writeShort(this.termid),a.MEDIA_STATE.__write(e,this.state),e.writeString(this.mediaName)}),(function(e){this.termid=e.readShort(),this.state=a.MEDIA_STATE.__read(e),this.mediaName=e.readString()}),4,!1),a.MediaCallback=s.defineObject(void 0,i.Object,void 0,0,["::Conference::MediaCallback","::Ice::Object"],-1,void 0,void 0,!1),a.MediaCallbackPrx=s.defineProxy(i.ObjectPrx,a.MediaCallback.ice_staticId,void 0),s.defineOperations(a.MediaCallback,a.MediaCallbackPrx,{notifyStartPlayMedia:[,,,,,,[[a.MediaInfo]],,,,],notifyStopPlayMedia:[,,,,,,[[2]],,,,],notifyPausePlayMedia:[,,,,,,[[2],[1]],,,,],notifyMakeIFrame:[,,,,,,,,,,],notifySubscribeMedia:[,,,,,,[[1]],,,,]}),a.MediaCtrl=s.defineObject(void 0,i.Object,void 0,0,["::Conference::MediaCtrl","::Ice::Object"],-1,void 0,void 0,!1),a.MediaCtrlPrx=s.defineProxy(i.ObjectPrx,a.MediaCtrl.ice_staticId,void 0),s.defineOperations(a.MediaCtrl,a.MediaCtrlPrx,{getMediaInfo:[,,,1,,[a.MediaInfo],,,[o.ConferenceError],,],startPlayMedia:[,,,1,,,[[7]],,[o.ConferenceError],,],stopPlayMedia:[,,,1,,,,,[o.ConferenceError],,],pausePlayMedia:[,,,1,,,[[1]],,[o.ConferenceError],,],subscribeMedia:[,,,1,,,[[1]],,[o.ConferenceError],,]}),n.Conference=a}("undefined"!=typeof global&&global.process,"undefined"!=typeof global&&void 0!==global.process?n(3841):window.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?t:this)},7727:function(e,t,n){e=n.nmd(e),function(e,t,n){var i=t("ice").Ice,r=i.__M,o=(t("Common/Exception").Common,r.require(e,["Control/PublicTypes","Control/Contact"]).Conference),s=i.Slice;Object.defineProperty(o,"ACNT_ADMIN",{value:0}),Object.defineProperty(o,"ACNT_MEETCREATOR",{value:1}),Object.defineProperty(o,"ACNT_PARTICIPANTS",{value:2}),Object.defineProperty(o,"MINFO_ALLCAMS",{value:"allCams"}),Object.defineProperty(o,"MINFO_OPENEDCAMIDS",{value:"openedCamIDs"}),Object.defineProperty(o,"MINFO_ACNTTYPE",{value:"anctType"}),Object.defineProperty(o,"MINFO_WDTXDTYPE",{value:"WDTXDType"}),Object.defineProperty(o,"WDTXDTYPE_ADMIN",{value:"1"}),Object.defineProperty(o,"WDTXDTYPE_USER",{value:"2"}),Object.defineProperty(o,"MINFO_PSTNIVR",{value:"ivr"}),Object.defineProperty(o,"PSTNIVR_YES",{value:"1"}),Object.defineProperty(o,"MINFO_YDYUSERID",{value:"ydyuserid"}),Object.defineProperty(o,"MINFO_SCEP",{value:"scep"}),Object.defineProperty(o,"MINFO_VOICECHANGETYPE",{value:"voiceChangeType"}),o.Member=s.defineStruct((function(e,t,n,i,r,s,a,c,l,d,u,h){this.termId=void 0!==e?e:0,this.bindId=void 0!==t?t:0,this.termType=void 0!==n?n:0,this.nickname=void 0!==i?i:"",this.actor=void 0!==r?r:0,this.audioStatus=void 0!==s?s:o.ASTATUS.AUNKNOWN,this.videoStatus=void 0!==a?a:o.VSTATUS.VUNKNOWN,this.bEnableVideo=void 0!==c&&c,this.rights=void 0!==l?l:null,this.contactId=void 0!==d?d:new o.ContactIdType,this.phone=void 0!==u?u:"",this.extProperty=void 0!==h?h:null}),!1,(function(e){e.writeShort(this.termId),e.writeShort(this.bindId),e.writeByte(this.termType),e.writeString(this.nickname),e.writeByte(this.actor),o.ASTATUS.__write(e,this.audioStatus),o.VSTATUS.__write(e,this.videoStatus),e.writeBool(this.bEnableVideo),o.ByteListHelper.write(e,this.rights),o.ContactIdType.write(e,this.contactId),e.writeString(this.phone),o.StringStringMapHelper.write(e,this.extProperty)}),(function(e){this.termId=e.readShort(),this.bindId=e.readShort(),this.termType=e.readByte(),this.nickname=e.readString(),this.actor=e.readByte(),this.audioStatus=o.ASTATUS.__read(e),this.videoStatus=o.VSTATUS.__read(e),this.bEnableVideo=e.readBool(),this.rights=o.ByteListHelper.read(e),this.contactId=o.ContactIdType.read(e,this.contactId),this.phone=e.readString(),this.extProperty=o.StringStringMapHelper.read(e)}),18,!1),s.defineSequence(o,"MemberSeqHelper","Conference.Member",!1),o.WaitingMember=s.defineStruct((function(e,t,n){this.pcid=void 0!==e?e:"",this.name=void 0!==t?t:"",this.extProperty=void 0!==n?n:null}),!1,(function(e){e.writeString(this.pcid),e.writeString(this.name),o.StringStringMapHelper.write(e,this.extProperty)}),(function(e){this.pcid=e.readString(),this.name=e.readString(),this.extProperty=o.StringStringMapHelper.read(e)}),3,!1),s.defineSequence(o,"WaitingMemberSeqHelper","Conference.WaitingMember",!1),n.Conference=o}("undefined"!=typeof global&&void 0!==global.process?e:void 0,"undefined"!=typeof global&&void 0!==global.process?n(3841):window.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?t:this)},8826:function(e,t,n){e=n.nmd(e),function(e,t,n){var i=t("ice").Ice,r=i.__M,o=t("Common/Exception").Common,s=i.Slice,a=r.module("Conference");Object.defineProperty(a,"SLICE_VER",{value:"1.9"}),Object.defineProperty(a,"ANON_TERMID",{value:0}),Object.defineProperty(a,"ALL_TERMID",{value:32767}),Object.defineProperty(a,"ANON_MEMBER_ID",{value:0}),Object.defineProperty(a,"TERM_PC",{value:1}),Object.defineProperty(a,"TERM_PHONE",{value:2}),Object.defineProperty(a,"NORMAL_AT",{value:0}),Object.defineProperty(a,"DEMO_AT",{value:1}),Object.defineProperty(a,"HOST_AT",{value:2}),Object.defineProperty(a,"PSTN_HOST_AT",{value:4}),Object.defineProperty(a,"ASSISTANT_AT",{value:8}),Object.defineProperty(a,"OPT_VIDEO",{value:1}),Object.defineProperty(a,"OPT_AUTO_MUTE",{value:2}),Object.defineProperty(a,"OPT_AUTO_AUDIO",{value:4}),Object.defineProperty(a,"OPT_PSTN_CALL",{value:8}),Object.defineProperty(a,"OPT_END_WHEN_HOST_EXIT",{value:16}),Object.defineProperty(a,"OPT_ONLY_INVITE_CAN_LOGIN",{value:32}),Object.defineProperty(a,"OPT_ALLOW_PLAY_APPLAUSE",{value:64}),Object.defineProperty(a,"OPT_PLAY_ENTRANCEANDEXITTONE",{value:128}),Object.defineProperty(a,"OPT_ALLOW_MODIFY_NICKNAME",{value:256}),Object.defineProperty(a,"OPT_NOT_SEE_EACH_OTHER",{value:512}),Object.defineProperty(a,"OPT_IM_FORBID_PIC",{value:1024}),Object.defineProperty(a,"OPT_IM_FORBID_URL",{value:2048}),Object.defineProperty(a,"OPT_FORBID_OPEN_CAMERA",{value:4096}),Object.defineProperty(a,"OPT_AUTO_MUTE_HOST",{value:8192}),Object.defineProperty(a,"OPT_REVIEW_CHAT",{value:16384}),Object.defineProperty(a,"OPT_AUTO_OPEN_CAMERA",{value:32768}),Object.defineProperty(a,"OPT_MIC_USE_LOCAL",{value:65536}),Object.defineProperty(a,"OPT_CAMERA_USE_LOCAL",{value:131072}),Object.defineProperty(a,"OPT_FORBID_MARK",{value:262144}),Object.defineProperty(a,"OPT_ALLOW_SHARE",{value:524288}),Object.defineProperty(a,"OPT_SCREENSHARE_WATERMARK",{value:1048576}),Object.defineProperty(a,"OPT_START_WAITINGROOM",{value:2097152}),s.defineSequence(a,"ByteListHelper","Ice.ByteHelper",!0),s.defineDictionary(a,"StringStringMap","StringStringMapHelper","Ice.StringHelper","Ice.StringHelper",!1,void 0,void 0),a.ASTATUS=s.defineEnum([["AUNKNOWN",0],["ANULL",1],["ACLOSE",2],["AOPEN",3],["AOPENING",4]]),a.WINDOW_MODE=s.defineEnum([["VMANAGER_LOCK",0],["VSPEAKER_TRACK",1],["VPRESENTER_LOCK",2]]),a.VSTATUS=s.defineEnum([["VUNKNOWN",0],["VNULL",1],["VCLOSE",2],["VOPEN",3],["VOPENING",4]]),a.VIDEOLEVEL=s.defineEnum([["VL_HIGH_HD",0],["VL_HIGH_HDL",1],["VL_HIGH_H",2],["VL_HIGH_M",3],["VL_HIGH_L",4],["VL_MID",5],["VL_LOW",6]]),a.VideoSize=s.defineStruct((function(e,t){this.w=void 0!==e?e:0,this.h=void 0!==t?t:0}),!0,(function(e){e.writeShort(this.w),e.writeShort(this.h)}),(function(e){this.w=e.readShort(),this.h=e.readShort()}),4,!0),a.VideoQuality=s.defineStruct((function(e,t,n,i,r,o){this.vl=void 0!==e?e:a.VIDEOLEVEL.VL_HIGH_HD,this.vs=void 0!==t?t:new a.VideoSize,this.isec=void 0!==n?n:0,this.fps=void 0!==i?i:null,this.crf=void 0!==r?r:null,this.cost=void 0!==o?o:""}),!0,(function(e){a.VIDEOLEVEL.__write(e,this.vl),a.VideoSize.write(e,this.vs),e.writeByte(this.isec),a.ByteListHelper.write(e,this.fps),a.ByteListHelper.write(e,this.crf),e.writeString(this.cost)}),(function(e){this.vl=a.VIDEOLEVEL.__read(e),this.vs=a.VideoSize.read(e,this.vs),this.isec=e.readByte(),this.fps=a.ByteListHelper.read(e),this.crf=a.ByteListHelper.read(e),this.cost=e.readString()}),9,!1),a.VIDEOLAYOUTMODE=s.defineEnum([["VLO_1v1_M",0],["VLO_WALL1_M",1],["VLO_WALL2",2],["VLO_WALL4",3],["VLO_WALL5_M",4],["VLO_WALL6_M",5],["VLO_WALL9",6],["VLO_WALL13_M",7],["VLO_WALL16",8],["VLO_WALL25",9]]),Object.defineProperty(a,"MVM_1MAIN",{value:0}),Object.defineProperty(a,"MVM_1v1",{value:1}),Object.defineProperty(a,"MVM_2VIDEO",{value:2}),Object.defineProperty(a,"MVM_4VIDEO",{value:3}),Object.defineProperty(a,"MVM_6VIDEO",{value:4}),Object.defineProperty(a,"VIDEO_SS_1M",{value:0}),Object.defineProperty(a,"VIDEO_SS_5M",{value:1}),Object.defineProperty(a,"VIDEO_SS_13M",{value:2}),Object.defineProperty(a,"VIDEO_SS_2",{value:3}),Object.defineProperty(a,"VIDEO_SS_4",{value:4}),Object.defineProperty(a,"VIDEO_SS_9",{value:5}),Object.defineProperty(a,"VIDEO_SS_16",{value:6}),Object.defineProperty(a,"VIDEO_SS_25",{value:7}),Object.defineProperty(a,"VIDEO_SS_36",{value:8}),Object.defineProperty(a,"VIDEO_SS_NULL",{value:255}),s.defineSequence(a,"VideoQualitySeqHelper","Conference.VideoQuality",!1),a.SYNCMODE=s.defineEnum([["SYNC_FORCE",0],["SYNC_FREE",1]]),a.TabID=s.defineStruct((function(e,t){this.termID=void 0!==e?e:0,this.localID=void 0!==t?t:0}),!0,(function(e){e.writeShort(this.termID),e.writeShort(this.localID)}),(function(e){this.termID=e.readShort(),this.localID=e.readShort()}),4,!0),s.defineSequence(a,"TabIDSeqHelper","Conference.TabID",!0),a.WBBOARD_TYPE=s.defineEnum([["WB_WHITE",0],["WB_DOC",1]]),a.WBBOARD_DOCTYPE=s.defineEnum([["WD_IMG",0],["WD_PPTANIM",1],["WD_PPT",2]]),a.WB_SCALE_TYPE=s.defineEnum([["WB_SCALE_50",0],["WB_SCALE_100",1],["WB_SCALE_150",2],["WB_SCALE_200",3],["WB_SCALE_SADP",4],["WB_SCALE_WIDTH",5]]),a.WB_ROTATE_TYPE=s.defineEnum([["WB_ROTATE_0",0],["WB_ROTATE_90",1],["WB_ROTATE_180",2],["WB_ROTATE_270",3]]),a.WhiteBoardDescribe=s.defineStruct((function(e,t,n,i,r,o,s,c,l,d,u,h,f,_,p,C){this.wID=void 0!==e?e:new a.TabID,this.wType=void 0!==t?t:a.WBBOARD_TYPE.WB_WHITE,this.docType=void 0!==n?n:a.WBBOARD_DOCTYPE.WD_IMG,this.name=void 0!==i?i:"",this.docName=void 0!==r?r:"",this.width=void 0!==o?o:0,this.height=void 0!==s?s:0,this.scaleType=void 0!==c?c:a.WB_SCALE_TYPE.WB_SCALE_50,this.rotation=void 0!==l?l:a.WB_ROTATE_TYPE.WB_ROTATE_0,this.pageCount=void 0!==d?d:0,this.curPage=void 0!==u?u:0,this.animID=void 0!==h?h:0,this.animFrames=void 0!==f?f:0,this.showThum=void 0!==_&&_,this.bAll=void 0!==p&&p,this.allowTerms=void 0!==C?C:null}),!0,(function(e){a.TabID.write(e,this.wID),a.WBBOARD_TYPE.__write(e,this.wType),a.WBBOARD_DOCTYPE.__write(e,this.docType),e.writeString(this.name),e.writeString(this.docName),e.writeInt(this.width),e.writeInt(this.height),a.WB_SCALE_TYPE.__write(e,this.scaleType),a.WB_ROTATE_TYPE.__write(e,this.rotation),e.writeInt(this.pageCount),e.writeInt(this.curPage),e.writeInt(this.animID),e.writeInt(this.animFrames),e.writeBool(this.showThum),e.writeBool(this.bAll),i.ShortSeqHelper.write(e,this.allowTerms)}),(function(e){this.wID=a.TabID.read(e,this.wID),this.wType=a.WBBOARD_TYPE.__read(e),this.docType=a.WBBOARD_DOCTYPE.__read(e),this.name=e.readString(),this.docName=e.readString(),this.width=e.readInt(),this.height=e.readInt(),this.scaleType=a.WB_SCALE_TYPE.__read(e),this.rotation=a.WB_ROTATE_TYPE.__read(e),this.pageCount=e.readInt(),this.curPage=e.readInt(),this.animID=e.readInt(),this.animFrames=e.readInt(),this.showThum=e.readBool(),this.bAll=e.readBool(),this.allowTerms=i.ShortSeqHelper.read(e)}),37,!1),Object.defineProperty(a,"SubMeetType_MainRoom",{value:"main"}),Object.defineProperty(a,"SubMeetType_WaitRoom",{value:"wait"}),a.SubMeetInfo=s.defineStruct((function(e,t,n){this.type=void 0!==e?e:"",this.id=void 0!==t?t:0,this.key=void 0!==n?n:""}),!0,(function(e){e.writeString(this.type),e.writeInt(this.id),e.writeString(this.key)}),(function(e){this.type=e.readString(),this.id=e.readInt(),this.key=e.readString()}),6,!1),s.defineSequence(a,"WhiteBoardDescribeSeqHelper","Conference.WhiteBoardDescribe",!1),a.ConfIdError=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::ConfIdError",void 0,void 0,!1,!1),a.AuthError=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::AuthError",void 0,void 0,!1,!1),a.ReenterError=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::ReenterError",void 0,void 0,!1,!1),a.RoomLockedError=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::RoomLockedError",void 0,void 0,!1,!1),a.NicknameError=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::NicknameError",void 0,void 0,!1,!1),a.NicknameDuplicatedError=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::NicknameDuplicatedError",void 0,void 0,!1,!1),a.NotPermitError=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::NotPermitError",void 0,void 0,!1,!1),a.MemberDeactivedError=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::MemberDeactivedError",void 0,void 0,!1,!1),a.MemberOverflowError=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::MemberOverflowError",void 0,void 0,!1,!1),a.ConfMemberOverflowError=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::ConfMemberOverflowError",void 0,void 0,!1,!1),a.BalanceLessError=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::BalanceLessError",void 0,void 0,!1,!1),a.KickoutSelfError=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::KickoutSelfError",void 0,void 0,!1,!1),a.ConferenceEndError=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::ConferenceEndError",void 0,void 0,!1,!1),a.ConferenceBeginError=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::ConferenceBeginError",void 0,void 0,!1,!1),a.PINError=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::PINError",void 0,void 0,!1,!1),a.FieldDuplicatedError=s.defineUserException((function(e,t,n,i,r){o.ConferenceError.call(this,e,t,r),this.name=void 0!==n?n:"",this.value=void 0!==i?i:""}),o.ConferenceError,"Conference::FieldDuplicatedError",(function(e){e.writeString(this.name),e.writeString(this.value)}),(function(e){this.name=e.readString(),this.value=e.readString()}),!1,!1),a.InviteeNotFoundError=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::InviteeNotFoundError",void 0,void 0,!1,!1),a.InviteeDuplicatedError=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::InviteeDuplicatedError",void 0,void 0,!1,!1),a.InvalidTermTypeError=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::InvalidTermTypeError",void 0,void 0,!1,!1),a.NoPSTNHostError=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::NoPSTNHostError",void 0,void 0,!1,!1),a.ConferencePrepareError=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::ConferencePrepareError",void 0,void 0,!1,!1),a.ConferenceLoginRetry=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::ConferenceLoginRetry",void 0,void 0,!1,!1),a.ResourceAllocateError=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::ResourceAllocateError",void 0,void 0,!1,!1),a.OnlyInviteeCanLogin=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::OnlyInviteeCanLogin",void 0,void 0,!1,!1),a.MemberAlreadyInMeet=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::MemberAlreadyInMeet",void 0,void 0,!1,!1),a.MemberAlreadyInCanTryVisitor=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::MemberAlreadyInCanTryVisitor",void 0,void 0,!1,!1),a.MismatchClientVersion=s.defineUserException((function(e,t,n,i){o.ConferenceError.call(this,e,t,i),this.newVer=void 0!==n?n:""}),o.ConferenceError,"Conference::MismatchClientVersion",(function(e){e.writeString(this.newVer)}),(function(e){this.newVer=e.readString()}),!1,!1),a.PeerHasBeen1v1SubMeeting=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::PeerHasBeen1v1SubMeeting",void 0,void 0,!1,!1),a.LiveStreamNotStart=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::LiveStreamNotStart",void 0,void 0,!1,!1),a.PstnHostCantLoginInWeb=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::PstnHostCantLoginInWeb",void 0,void 0,!1,!1),a.CannotBoradcast=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::CannotBoradcast",void 0,void 0,!1,!1),a.CannotInteractBoradcast=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::CannotInteractBoradcast",void 0,void 0,!1,!1),a.ConfCannotInteractBoradcast=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::ConfCannotInteractBoradcast",void 0,void 0,!1,!1),a.ContainsSensitiveWords=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::ContainsSensitiveWords",void 0,void 0,!1,!1),a.ThirdPartyLiveIsOn=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::ThirdPartyLiveIsOn",void 0,void 0,!1,!1),a.ListLiveIsOn=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::ListLiveIsOn",void 0,void 0,!1,!1),a.ClientLiveIsOn=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::ClientLiveIsOn",void 0,void 0,!1,!1),a.LuckyDrawNotExists=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::LuckyDrawNotExists",void 0,void 0,!1,!1),a.LuckyDrawCfgFails=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::LuckyDrawCfgFails",void 0,void 0,!1,!1),a.JoinLuckyDrawFails=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::JoinLuckyDrawFails",void 0,void 0,!1,!1),a.AnnouceLuckyDrawFails=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::AnnouceLuckyDrawFails",void 0,void 0,!1,!1),a.AnnouceLuckyDrawNoMember=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::AnnouceLuckyDrawNoMember",void 0,void 0,!1,!1),a.SeviceNotEnabled=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::SeviceNotEnabled",void 0,void 0,!1,!1),a.SrvRecordStarted=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::SrvRecordStarted",void 0,void 0,!1,!1),a.NoResourceForMIC=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::NoResourceForMIC",void 0,void 0,!1,!1),a.StartRecordError=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::StartRecordError",void 0,void 0,!1,!1),a.PlayBackGroundMusicFail=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::PlayBackGroundMusicFail",void 0,void 0,!1,!1),a.SameTimeStartMediaError=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::SameTimeStartMediaError",void 0,void 0,!1,!1),a.lockQuesError=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::lockQuesError",void 0,void 0,!1,!1),a.delQuesError=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::delQuesError",void 0,void 0,!1,!1),a.quesNotExistError=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::quesNotExistError",void 0,void 0,!1,!1),a.modifyQuesTypeError=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::modifyQuesTypeError",void 0,void 0,!1,!1),a.AlreadyRollCallError=s.defineUserException((function(e,t,n,i){o.ConferenceError.call(this,e,t,i),this.rollCaller=void 0!==n?n:0}),o.ConferenceError,"Conference::AlreadyRollCallError",(function(e){e.writeShort(this.rollCaller)}),(function(e){this.rollCaller=e.readShort()}),!1,!1),a.AlreadySharedException=s.defineUserException((function(e,t,n,i){o.ConferenceError.call(this,e,t,i),this.sharer=void 0!==n?n:0}),o.ConferenceError,"Conference::AlreadySharedException",(function(e){e.writeShort(this.sharer)}),(function(e){this.sharer=e.readShort()}),!1,!1),a.WBMaxError=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::WBMaxError",void 0,void 0,!1,!1),a.WBNotExistError=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::WBNotExistError",void 0,void 0,!1,!1),a.WBElementNoExistError=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::WBElementNoExistError",void 0,void 0,!1,!1),a.ExceedTheCapacityLimit=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::ExceedTheCapacityLimit",void 0,void 0,!1,!1),a.ConferenceBusy=s.defineUserException((function(e,t,n,i){o.ConferenceError.call(this,e,t,i),this.retry_delay=void 0!==n?n:0}),o.ConferenceError,"Conference::ConferenceBusy",(function(e){e.writeInt(this.retry_delay)}),(function(e){this.retry_delay=e.readInt()}),!1,!1),a.EnterWaitingRoom=s.defineUserException((function(e,t,n,i){o.ConferenceError.call(this,e,t,i),this.subMeetInfo=void 0!==n?n:""}),o.ConferenceError,"Conference::EnterWaitingRoom",(function(e){e.writeString(this.subMeetInfo)}),(function(e){this.subMeetInfo=e.readString()}),!1,!1),a.NosuchPersonInWaitingRoom=s.defineUserException((function(e,t,n){o.ConferenceError.call(this,e,t,n)}),o.ConferenceError,"Conference::NosuchPersonInWaitingRoom",void 0,void 0,!1,!1),Object.defineProperty(a,"SET_PSTN_NUM",{value:1}),Object.defineProperty(a,"CALLED_PSTN_NUM",{value:2}),Object.defineProperty(a,"BIND_PSTN_NUM",{value:4}),s.defineDictionary(a,"ModuleDict","ModuleDictHelper","Ice.StringHelper","Ice.ObjectPrx",!1,void 0,void 0),Object.defineProperty(a,"CLIENT_SLICE_VER",{value:"slice_ver"}),Object.defineProperty(a,"CLINET_PCID",{value:"client_pcid"}),Object.defineProperty(a,"CLINET_MACADDR",{value:"client_macaddr"}),Object.defineProperty(a,"CLINET_LANGUAGE",{value:"client_lang"}),Object.defineProperty(a,"CLINET_VER",{value:"client_ver"}),Object.defineProperty(a,"CLINET_SDK_VER",{value:"sdk_ver"}),Object.defineProperty(a,"CLINET_H5SDK_VER",{value:"h5sdk_ver"}),Object.defineProperty(a,"CLINET_ISWIFI",{value:"client_iswifi"}),Object.defineProperty(a,"CLINET_PLATFORM",{value:"client_platform"}),Object.defineProperty(a,"CLINET_PRODUCTTYPE",{value:"client_pdType"}),Object.defineProperty(a,"CLINET_DEVICETYPE",{value:"client_device"}),Object.defineProperty(a,"CLIENT_BRIDGETYPE",{value:"bridgeType"}),Object.defineProperty(a,"CLIENT_INVITECODE",{value:"invite_code"}),Object.defineProperty(a,"CLIENT_PHONENUM",{value:"phone_num"}),Object.defineProperty(a,"CLIENT_ISCUSTOMERSERVICE",{value:"is_cs"}),Object.defineProperty(a,"CLIENT_PRIV_ID",{value:"priv_id"}),Object.defineProperty(a,"CLIETN_PRIV_DAT",{value:"priv_dat"}),Object.defineProperty(a,"CLIETN_PRIV_ROLE",{value:"priv_role"}),Object.defineProperty(a,"CLINET_LOGIN_TIMESTAMP",{value:"client_time"}),Object.defineProperty(a,"CLINET_IS_WEB_VIEWER",{value:"webview"}),Object.defineProperty(a,"CLINET_LIVEAUDIO",{value:"liveAudio"}),Object.defineProperty(a,"CLINET_OPENID",{value:"openId"}),Object.defineProperty(a,"CLIENT_ACODEC",{value:"acodec"}),Object.defineProperty(a,"CLIENT_LIVE_TYPE",{value:"livetype"}),Object.defineProperty(a,"CLIENT_LIVE_MOBILE",{value:"livemobile"}),Object.defineProperty(a,"CLINET_BROWSER_INFO",{value:"browser"}),Object.defineProperty(a,"CLINET_VP8_SUPPORT",{value:"vp8"}),Object.defineProperty(a,"CLINET_WEBRTC_CODECS",{value:"rtc_codecs"}),Object.defineProperty(a,"CLIENT_TIME_OUT",{value:"time_out"}),Object.defineProperty(a,"CLINET_SUPPORT_NEWCONFID",{value:"spt_newconf"}),Object.defineProperty(a,"CLIENT_SDK_USRTOKEN",{value:"token"}),Object.defineProperty(a,"CLIENT_MCUID",{value:"mcuID"}),Object.defineProperty(a,"CLIENT_VER",{value:"client_ver"}),Object.defineProperty(a,"CLIENT_SIP_VIDEO_REENCODE",{value:"video_reencode"}),Object.defineProperty(a,"CLIENT_PROJECT_CODE",{value:"pjcode"}),Object.defineProperty(a,"CLIENT_PROJECT_FOR",{value:"pjfor"}),Object.defineProperty(a,"CLIENT_SUPPORT_DATA_CENTER",{value:"dcenter_enable"}),Object.defineProperty(a,"CLIENT_MCU_SESSION_ID",{value:"mcu_session_id"}),Object.defineProperty(a,"CLIENT_SDK_TYPE",{value:"sdktype"}),Object.defineProperty(a,"CLIENT_SDK_TYPE_VIDEO",{value:"video"}),Object.defineProperty(a,"CLIENT_SDK_TYPE_LIVE",{value:"live"}),Object.defineProperty(a,"PLATFORMTYPE_WIN32",{value:"win32"}),Object.defineProperty(a,"PLATFORMTYPE_IOS",{value:"ios"}),Object.defineProperty(a,"PLATFORMTYPE_ANDROID",{value:"android"}),Object.defineProperty(a,"PLATFORMTYPE_LINUX",{value:"linux"}),Object.defineProperty(a,"PLATFORMTYPE_MAC",{value:"mac"}),Object.defineProperty(a,"PDTYPE_TVNETMEETING",{value:"net_tv"}),Object.defineProperty(a,"PDTYPE_NETMEETING",{value:"net"}),Object.defineProperty(a,"PDTYPE_PSTNMEETING",{value:"pstn"}),Object.defineProperty(a,"PDTYPE_LIVE",{value:"live"}),Object.defineProperty(a,"PDTYPE_MCU",{value:"mcu"}),Object.defineProperty(a,"DEVICETYPE_PC",{value:"pc"}),Object.defineProperty(a,"DEVICETYPE_PAD",{value:"pad"}),Object.defineProperty(a,"DEVICETYPE_PHONE",{value:"phone"}),Object.defineProperty(a,"DEVICETYPE_FLASH",{value:"flash"}),Object.defineProperty(a,"DEVICETYPE_MCU",{value:"mcu"}),Object.defineProperty(a,"DEVICETYPE_BOX",{value:"box"}),Object.defineProperty(a,"DEVICETYPE_SIPGATEWAY",{value:"sipgateway"}),Object.defineProperty(a,"DEVICETYPE_WEBRTC",{value:"webrtc"}),Object.defineProperty(a,"DEVICETYPE_WXMINI",{value:"wxmini"}),Object.defineProperty(a,"BRIDGETYPE_MONITOR",{value:"monitor"}),Object.defineProperty(a,"BRIDGETYPE_MEETING",{value:"meeting"}),Object.defineProperty(a,"MEETINGMODE_NORMAL",{value:"normal"}),Object.defineProperty(a,"MEETINGMODE_CONSULTATION",{value:"consultation"}),Object.defineProperty(a,"ACODEC_ISAC",{value:"isac"}),Object.defineProperty(a,"LIVETYPE_WEIXIN",{value:"0"}),Object.defineProperty(a,"LIVETYPE_USER",{value:"1"}),Object.defineProperty(a,"LIVETYPE_OTHER",{value:"2"}),a.LoginRequest=s.defineStruct((function(e,t,n,i,r,o,s,a,c,l,d,u){this.confId=void 0!==e?e:0,this.confKey=void 0!==t?t:"",this.termId=void 0!==n?n:0,this.memberId=void 0!==i?i:0,this.memberType=void 0!==r?r:0,this.nickname=void 0!==o?o:"",this.callbacks=void 0!==s?s:null,this.accessNo=void 0!==a?a:0,this.publicIP=void 0!==c?c:"",this.localIP=void 0!==l?l:"",this.localMask=void 0!==d?d:"",this.extProperty=void 0!==u?u:null}),!1,(function(e){e.writeInt(this.confId),e.writeString(this.confKey),e.writeShort(this.termId),e.writeInt(this.memberId),e.writeByte(this.memberType),e.writeString(this.nickname),a.ModuleDictHelper.write(e,this.callbacks),e.writeInt(this.accessNo),e.writeString(this.publicIP),e.writeString(this.localIP),e.writeString(this.localMask),a.StringStringMapHelper.write(e,this.extProperty)}),(function(e){this.confId=e.readInt(),this.confKey=e.readString(),this.termId=e.readShort(),this.memberId=e.readInt(),this.memberType=e.readByte(),this.nickname=e.readString(),this.callbacks=a.ModuleDictHelper.read(e),this.accessNo=e.readInt(),this.publicIP=e.readString(),this.localIP=e.readString(),this.localMask=e.readString(),this.extProperty=a.StringStringMapHelper.read(e)}),22,!1),a.FileServerInfo=s.defineStruct((function(e,t){this.fsProxy=void 0!==e?e:"",this.key=void 0!==t?t:""}),!0,(function(e){e.writeString(this.fsProxy),e.writeString(this.key)}),(function(e){this.fsProxy=e.readString(),this.key=e.readString()}),2,!1),a.REC_STATE=s.defineEnum([["NO_RECORD",0],["STARTING",1],["RECORDING",2],["PAUSED",3],["STOPPING",4]]),s.defineSequence(a,"FileServerSeqHelper","Conference.FileServerInfo",!1),Object.defineProperty(a,"INVALID_COUNTDOWN",{value:-1}),Object.defineProperty(a,"CONFINFO_HOSTPWD",{value:"hostpwd"}),Object.defineProperty(a,"CONFINFO_CONFPWD",{value:"confpwd"}),Object.defineProperty(a,"CONFINFO_SCHEDULETIME",{value:"scheduletime"}),Object.defineProperty(a,"CONFINFO_SUBJECT",{value:"subject"}),Object.defineProperty(a,"CONFINFO_URL",{value:"url"}),Object.defineProperty(a,"CONFINFO_URLPIC",{value:"urlpic"}),Object.defineProperty(a,"CONFINFO_PSTNNUM",{value:"pstnnum"}),Object.defineProperty(a,"CONFINFO_PSTNPWD",{value:"pstnpwd"}),Object.defineProperty(a,"CONFINFO_AGENDA",{value:"agenda"}),Object.defineProperty(a,"CONFINFO_SUPPORT_VLIST",{value:"vlist"}),Object.defineProperty(a,"CONFINFO_ROOM_SIZETYPE",{value:"roomsizetype"}),Object.defineProperty(a,"CONFINFO_ISTEST",{value:"istest"}),Object.defineProperty(a,"CONFINFO_ISDEMO",{value:"isdemo"}),Object.defineProperty(a,"CONFINFO_HOTLINE",{value:"hotline"}),Object.defineProperty(a,"CONFINFO_ISFIX",{value:"isfixed"}),Object.defineProperty(a,"CONFINFO_HD",{value:"hd"}),Object.defineProperty(a,"CONFINFO_PSTNNOTICE",{value:"pstnnotice"}),Object.defineProperty(a,"CONFINFO_FUNC_VIDEOWALL",{value:"videowall"}),Object.defineProperty(a,"CONFINFO_VIDEO_ENABLE",{value:"video"}),Object.defineProperty(a,"CONFINFO_SHOW_MAIN_AD",{value:"main_ad"}),Object.defineProperty(a,"CONFINFO_VIDEO_MONITOR",{value:"vmonitor"}),Object.defineProperty(a,"CONFINFO_USE_PHONE",{value:"use_phone"}),Object.defineProperty(a,"CONFINFO_INVITE",{value:"invite"}),Object.defineProperty(a,"CONFINFO_VIDEO_LUBO",{value:"lubo"}),Object.defineProperty(a,"CONFINFO_MEDIA_PLAY",{value:"media_play"}),Object.defineProperty(a,"CONFINFO_MULTI_CAMERAS",{value:"multiple_cameras"}),Object.defineProperty(a,"CONFINFO_SUPPORT_BRIDGE",{value:"bridge"}),Object.defineProperty(a,"CONFINFO_SCREEN_SHARE",{value:"screen_share"}),Object.defineProperty(a,"CONFINFO_DOCUMENT_SHOW",{value:"document_show"}),Object.defineProperty(a,"CONFINFO_WHITE_BOARD",{value:"whiteboard"}),Object.defineProperty(a,"CONFINFO_ANSWER_QUESTION",{value:"answer_question"}),Object.defineProperty(a,"CONFINFO_FILE_SHARE",{value:"file_share"}),Object.defineProperty(a,"CONFINFO_MEETING_INFO",{value:"meeting_info"}),Object.defineProperty(a,"CONFINFO_OMNIDIRECTIONAL_MIC",{value:"omnidirectional_mic"}),Object.defineProperty(a,"CONFINFO_MEET_MODE",{value:"meeting_mode"}),Object.defineProperty(a,"CONFINFO_USER_ROLE",{value:"user_role"}),Object.defineProperty(a,"CONFINFO_COMPANY_ID",{value:"compid"}),Object.defineProperty(a,"CONFINFO_USER_NETDISK_ENABLE",{value:"user_net_disk"}),Object.defineProperty(a,"CONFINFO_COMP_NETDISK_ENABLE",{value:"comp_net_disk"}),Object.defineProperty(a,"CONFINFO_FREECONF",{value:"freeconf"}),Object.defineProperty(a,"CONFINFO_MAINVIDEO_SHOWMODE",{value:"main_svm"}),Object.defineProperty(a,"CONFINFO_IS_BROADCATING",{value:"rtmpliveon"}),Object.defineProperty(a,"CONFINFO_WEBVIEWER_NUM",{value:"webviewer_num"}),Object.defineProperty(a,"CONFINFO_WEBVIEWER_RIGHTS",{value:"webviewer_rights"}),Object.defineProperty(a,"CONFINFO_WEBVIEWER_QUES",{value:"webviewer_ques"}),Object.defineProperty(a,"CONFINFO_BROADCAST_DURATION",{value:"rtmplivetm"}),Object.defineProperty(a,"CONFINFO_WB_CONTAINERSIZE",{value:"wb_container"}),Object.defineProperty(a,"CONFINFO_H264_PROFILE",{value:"h264profile"}),Object.defineProperty(a,"CONFINFO_H264_NOCABAC",{value:"h264nocabac"}),Object.defineProperty(a,"CONFINFO_H264_SLICEMAXSZ",{value:"h264slicemaxsz"}),Object.defineProperty(a,"CONFINFO_H264_IFRAME",{value:"h264iframe"}),Object.defineProperty(a,"CONFINFO_H264_NOHARDCODING",{value:"h264nohardcoding"}),Object.defineProperty(a,"CONFINFO_SCREEN_ENCTYPE",{value:"screenenctype"}),Object.defineProperty(a,"CONFINFO_HIFPS_VALUE",{value:"hi_fps"}),Object.defineProperty(a,"CONFINFO_H264_PICMAXSIZE",{value:"h264picmaxsize"}),Object.defineProperty(a,"CONFINFO_SUPPORT_SIP",{value:"is_sip"}),Object.defineProperty(a,"CONFINFO_MS_MODE",{value:"ms_mode"}),Object.defineProperty(a,"CONFINFO_H264_ENCFIXEDSZ",{value:"h264encfixedsz"}),Object.defineProperty(a,"CONFINFO_HD_FOR_MOBILE",{value:"hd_for_mobile"}),Object.defineProperty(a,"CONFINFO_LOG_LEVEL",{value:"log_level"}),Object.defineProperty(a,"CONFINFO_LIVE_CONFIG",{value:"livecfg"}),Object.defineProperty(a,"CONFINFO_SRV_RECORDSTATE",{value:"srv_record_state"}),Object.defineProperty(a,"CONFINFO_SRV_RECORDCFG",{value:"srv_record_cfg"}),Object.defineProperty(a,"CONFINFO_SVR_RECORDOWNER",{value:"svr_record_owner"}),Object.defineProperty(a,"CONFINFO_VIDEO_VPU_SUPPORT_ENC",{value:"vpu_support_enc"}),Object.defineProperty(a,"CONFINFO_VIDEO_VPU_SUPPORT_DEC",{value:"vpu_supportd_dec"}),Object.defineProperty(a,"CONFINFO_VIDEO_VPU_UNSUPPORT_ENC_DEV",{value:"vpu_unsupport_enc_dev"}),Object.defineProperty(a,"CONFINFO_VIDEO_VPU_UNSUPPORT_DEC_DEV",{value:"vpu_unsupport_dec_dev"}),Object.defineProperty(a,"CONFINFO_VIDEOLIST_MODE",{value:"vlistmode"}),Object.defineProperty(a,"CONFINFO_VIDEOLIST_CAMS",{value:"vlistcams"}),Object.defineProperty(a,"CONFINFO_MAX_VIDEOUIS",{value:"maxvuis"}),Object.defineProperty(a,"CONFINFO_VIDEOWALL_LAYOUT",{value:"vwalllo"}),Object.defineProperty(a,"CONFINFO_UI_LOCKSTATUS",{value:"uilock"}),Object.defineProperty(a,"CONFINFO_SRV_RECORD",{value:"srv_record"}),Object.defineProperty(a,"CONFINFO_SHOW_LIVE",{value:"show_live"}),Object.defineProperty(a,"CONFINFO_SIGNIN",{value:"signinurl"}),Object.defineProperty(a,"CONFINFO_EXTTAB_URL",{value:"exttaburl"}),Object.defineProperty(a,"CONFINFO_PRIVTAB_INFO",{value:"privtabinfo"}),Object.defineProperty(a,"CONFINFO_PRIVATE_FILE_SERVER",{value:"privfs"}),Object.defineProperty(a,"CONFINFO_DOC_BACKUP_COMP_NDD",{value:"doc_backup_comp_ndd"}),Object.defineProperty(a,"CONFINFO_OEMKEY",{value:"oem_key"}),Object.defineProperty(a,"CONFINFO_VIDEOCUSTOMBPS",{value:"video_custom_bps"}),Object.defineProperty(a,"CONFINFO_CONFIRM_AUTOEND_TYPE",{value:"autoend"}),Object.defineProperty(a,"CONFINFO_RECORD_ALL_MEMBER",{value:"record_all"}),Object.defineProperty(a,"CONFINFO_ACCESS_KEEPALIVE_TIME",{value:"kp_time_a"}),Object.defineProperty(a,"CONFINFO_CONTROL_KEEPALIVE_TIME",{value:"kp_time_c"}),Object.defineProperty(a,"CONFINFO_NEW_CONFID",{value:"new_confid"}),Object.defineProperty(a,"CONFINFO_FS_HTTP",{value:"fs_http"}),Object.defineProperty(a,"CONFINFO_SHARE_CFG",{value:"share_cfg"}),Object.defineProperty(a,"CONFINFO_MCU_MAX_VIDEOUIS",{value:"mcu_maxvuis"}),Object.defineProperty(a,"CONFINFO_MEETING_CHECK",{value:"meeting_check"}),Object.defineProperty(a,"CONFINFO_DATA_CENTER_PROXY",{value:"dcenter_prxy"}),Object.defineProperty(a,"CONFINFO_DATA_CENTER_KEY",{value:"dcenter_key"}),Object.defineProperty(a,"CONFINFO_MCU_RECORD_ID",{value:"mcu_recid"}),Object.defineProperty(a,"CONFINFO_IS_SDKMEETING",{value:"is_sdkmeeting"}),Object.defineProperty(a,"CONF_END_REASON_UNKOWN",{value:"unkown"}),Object.defineProperty(a,"CONF_END_REASON_TERM",{value:"term"}),Object.defineProperty(a,"CONF_END_REASON_AUTO",{value:"auto"}),Object.defineProperty(a,"CONF_END_REASON_WEB",{value:"web"}),Object.defineProperty(a,"CONF_END_REASON_AAA",{value:"aaa"}),Object.defineProperty(a,"CONF_END_REASON_HOST_OFFLINE",{value:"host_offline"}),Object.defineProperty(a,"LEFT_REASON_KICK",{value:"kick"}),Object.defineProperty(a,"LEFT_REASON_REFRESH",{value:"refresh"}),Object.defineProperty(a,"LEFT_REASON_EXTRUDE",{value:"extrude"}),Object.defineProperty(a,"LEFT_REASON_TIMEOUT",{value:"timeout"}),Object.defineProperty(a,"LEFT_REASON_SEAT",{value:"seat"}),Object.defineProperty(a,"LEFT_REASON_EXIT",{value:"exit"}),Object.defineProperty(a,"LEFT_REASON_BUSY",{value:"busy"}),Object.defineProperty(a,"LEFT_REASON_BALANCE_LESS",{value:"balance_less"}),Object.defineProperty(a,"LEFT_REASON_TOKENTIMEOUT",{value:"token_timeout"}),Object.defineProperty(a,"LEFT_REASON_SUBMEETING",{value:"sub_meeting"}),Object.defineProperty(a,"KNOCKED_REASON_ROOMLOCKED",{value:"room_locked"}),Object.defineProperty(a,"KNOCKED_REASON_SEATLESS",{value:"seat_less"}),Object.defineProperty(a,"KNOCKED_REASON_BALANCELESS",{value:"balance_less"}),Object.defineProperty(a,"BOARDCAST_RTMP",{value:"rtmp"}),Object.defineProperty(a,"BOARDCAST_RTMP2",{value:"rtmp2"}),Object.defineProperty(a,"BOARDCAST_SCREEN_RTMP",{value:"rtmp_screen"}),Object.defineProperty(a,"BOARDCAST_HLS",{value:"hls"}),Object.defineProperty(a,"BOARDCAST_HLS2",{value:"hls2"}),Object.defineProperty(a,"BOARDCAST_SCREEN_HLS",{value:"hls_screen"}),Object.defineProperty(a,"BROADCAST_FLV",{value:"flv"}),n.Conference=a}("undefined"!=typeof global&&global.process,"undefined"!=typeof global&&void 0!==global.process?n(3841):window.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?t:this)},7588:function(e,t,n){e=n.nmd(e),function(e,t,n){var i=t("ice").Ice,r=i.__M,o=t("Common/Exception").Common,s=r.require(e,["Control/Conference","Control/PublicTypes"]).Conference,a=i.Slice;s.QuesType=a.defineStruct((function(e,t,n){this.typeID=void 0!==e?e:"",this.name=void 0!==t?t:"",this.deleted=void 0!==n&&n}),!0,(function(e){e.writeString(this.typeID),e.writeString(this.name),e.writeBool(this.deleted)}),(function(e){this.typeID=e.readString(),this.name=e.readString(),this.deleted=e.readBool()}),3,!1),s.QuesState=a.defineEnum([["Question_NotReply",0],["Question_Replying",1],["Question_NotPublic",2],["Question_Publiced",3],["Question_Deleted",4]]),s.QuesAsk=a.defineStruct((function(e,t,n,i,r){this.typeID=void 0!==e?e:"",this.asktime=void 0!==t?t:0,this.termID=void 0!==n?n:0,this.content=void 0!==i?i:"",this.nickname=void 0!==r?r:""}),!0,(function(e){e.writeString(this.typeID),e.writeInt(this.asktime),e.writeShort(this.termID),e.writeString(this.content),e.writeString(this.nickname)}),(function(e){this.typeID=e.readString(),this.asktime=e.readInt(),this.termID=e.readShort(),this.content=e.readString(),this.nickname=e.readString()}),9,!1),s.QuesDeal=a.defineStruct((function(e,t,n,i,r,o,a,c){this.state=void 0!==e?e:s.QuesState.Question_NotReply,this.replyCon=void 0!==t?t:"",this.replyTermId=void 0!==n?n:0,this.replyTime=void 0!==i?i:0,this.publishTermID=void 0!==r?r:0,this.publishTime=void 0!==o?o:0,this.delTermID=void 0!==a?a:0,this.delTime=void 0!==c?c:0}),!0,(function(e){s.QuesState.__write(e,this.state),e.writeString(this.replyCon),e.writeShort(this.replyTermId),e.writeInt(this.replyTime),e.writeShort(this.publishTermID),e.writeInt(this.publishTime),e.writeShort(this.delTermID),e.writeInt(this.delTime)}),(function(e){this.state=s.QuesState.__read(e),this.replyCon=e.readString(),this.replyTermId=e.readShort(),this.replyTime=e.readInt(),this.publishTermID=e.readShort(),this.publishTime=e.readInt(),this.delTermID=e.readShort(),this.delTime=e.readInt()}),20,!1),s.QuesInf=a.defineStruct((function(e,t,n){this.quesID=void 0!==e?e:0,this.ask=void 0!==t?t:new s.QuesAsk,this.deal=void 0!==n?n:new s.QuesDeal}),!0,(function(e){e.writeInt(this.quesID),s.QuesAsk.write(e,this.ask),s.QuesDeal.write(e,this.deal)}),(function(e){this.quesID=e.readInt(),this.ask=s.QuesAsk.read(e,this.ask),this.deal=s.QuesDeal.read(e,this.deal)}),33,!1),a.defineSequence(s,"QuesListHelper","Conference.QuesInf",!1),a.defineSequence(s,"QuesTypeListHelper","Conference.QuesType",!1),s.AnsQueCallback=a.defineObject(void 0,i.Object,void 0,0,["::Conference::AnsQueCallback","::Ice::Object"],-1,void 0,void 0,!1),s.AnsQueCallbackPrx=a.defineProxy(i.ObjectPrx,s.AnsQueCallback.ice_staticId,void 0),a.defineOperations(s.AnsQueCallback,s.AnsQueCallbackPrx,{askQuesNotify:[,,,,,,[[3],[s.QuesAsk]],,[o.ConferenceError],,],lockQuesNotify:[,,,,,,[[3],[s.QuesDeal]],,[o.ConferenceError],,],replyQuesNotify:[,,,,,,[[3],[s.QuesDeal]],,[o.ConferenceError],,],modifyQuesNotify:[,,,,,,[[3],[s.QuesDeal]],,[o.ConferenceError],,],delQuesNotify:[,,,,,,[[3],[2]],,[o.ConferenceError],,],delAllQuesNotify:[,,,,,,[[2]],,[o.ConferenceError],,],publicQuesNotify:[,,,,,,[[3],[1],[2]],,[o.ConferenceError],,],quesTypeChangeNotify:[,,,,,,[[3],[7]],,[o.ConferenceError],,],modifyQuesTypeNotify:[,,,,,,[[2],["Conference.QuesTypeListHelper"]],,[o.ConferenceError],,],setBroadCastQuesNotify:[,,,,,,[[1]],,[o.ConferenceError],,]}),s.AnsQuesCtrl=a.defineObject(void 0,i.Object,void 0,0,["::Conference::AnsQuesCtrl","::Ice::Object"],-1,void 0,void 0,!1),s.AnsQuesCtrlPrx=a.defineProxy(i.ObjectPrx,s.AnsQuesCtrl.ice_staticId,void 0),a.defineOperations(s.AnsQuesCtrl,s.AnsQuesCtrlPrx,{askQues:[,,,1,,[3],[[s.QuesAsk]],,[o.ConferenceError],,],lockQues:[,,,1,,,[[3],[1]],,[o.ConferenceError],,],replyQues:[,,,1,,,[[3],[s.QuesDeal]],,[o.ConferenceError],,],publicQues:[,,,1,,,[[3],[1]],,[o.ConferenceError],,],modifyQues:[,,,1,,,[[3],[s.QuesDeal]],,[o.ConferenceError],,],delQues:[,,,1,,,[[3]],,[o.ConferenceError],,],delAllQues:[,,,1,,,,,[o.ConferenceError],,],quesTypeChange:[,,,1,,,[[3],[7]],,[o.ConferenceError],,],getQuesList:[,,,1,,["Conference.QuesListHelper"],,,[o.ConferenceError],,],getQuesType:[,,,1,,["Conference.QuesTypeListHelper"],,,[o.ConferenceError],,],modifyQuesType:[,,,1,,,[["Conference.QuesTypeListHelper"]],,[o.ConferenceError],,],setBoradCastQues:[,,,1,,,[[1]],,[o.ConferenceError],,]}),n.Conference=s}("undefined"!=typeof global&&void 0!==global.process?e:void 0,"undefined"!=typeof global&&void 0!==global.process?n(3841):window.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?t:this)},8163:function(e,t,n){e=n.nmd(e),function(e,t,n){var i=t("ice").Ice,r=i.__M,o=(i.Slice,r.module("Conference"));Object.defineProperty(o,"PUBLIC_CHAT",{value:1}),Object.defineProperty(o,"PRIVATE_HOST_CHAT",{value:2}),Object.defineProperty(o,"PRIVATE_DEMO_CHAT",{value:3}),Object.defineProperty(o,"PRIVATE_OTHER_CHAT",{value:4}),Object.defineProperty(o,"SCREEN_RECORD",{value:11}),Object.defineProperty(o,"FILE_SHARE",{value:5}),Object.defineProperty(o,"WB_VIEW_PAGE",{value:9}),Object.defineProperty(o,"WB_VIEW_ANY",{value:10}),Object.defineProperty(o,"DEMO_RIGHT_MANAGE",{value:50}),Object.defineProperty(o,"DEMO_ACTOR_MANAGE",{value:51}),Object.defineProperty(o,"OPTION_MANAGE",{value:60}),Object.defineProperty(o,"HOST_ACTOR_MANAGE",{value:70}),Object.defineProperty(o,"LOCK_RIGHT",{value:71}),Object.defineProperty(o,"KICKOUT_RIGHT",{value:72}),Object.defineProperty(o,"END_CONFERENCE_RIGHT",{value:73}),Object.defineProperty(o,"MEMBER_INFO_MANAGE",{value:74}),Object.defineProperty(o,"INVITE_RIGHT",{value:75}),Object.defineProperty(o,"BEGIN_CONFERENCE_RIGHT",{value:76}),Object.defineProperty(o,"UPLOAD_FILE",{value:80}),Object.defineProperty(o,"DEL_OTHERS_FILE",{value:81}),Object.defineProperty(o,"START_NOTICE",{value:85}),Object.defineProperty(o,"STOP_NOTICE",{value:86}),Object.defineProperty(o,"START_ROLL_CALL",{value:90}),Object.defineProperty(o,"STOP_ROLL_CALL",{value:91}),Object.defineProperty(o,"OPEN_OTHERS_MIC",{value:95}),Object.defineProperty(o,"CLOSE_OTHERS_MIC",{value:96}),Object.defineProperty(o,"ALL_SILENCE",{value:97}),Object.defineProperty(o,"CHANGE_VIDEO_FOCUS_WINDOW_MODE",{value:100}),Object.defineProperty(o,"CHANGE_VIDEO_LAYOUT_MODE",{value:101}),Object.defineProperty(o,"SET_CURRENT_TAB",{value:105}),Object.defineProperty(o,"SET_FULLSCREEN",{value:106}),Object.defineProperty(o,"SET_FRAME_LAYOUT",{value:107}),Object.defineProperty(o,"FORCE_SYNC",{value:108}),Object.defineProperty(o,"WB_CREATE",{value:110}),Object.defineProperty(o,"WB_CLOSE",{value:111}),Object.defineProperty(o,"WB_CHANGE_NAME",{value:112}),Object.defineProperty(o,"WB_MARK",{value:113}),Object.defineProperty(o,"WB_SAVE",{value:114}),Object.defineProperty(o,"WB_PAGE_IMPORT",{value:115}),Object.defineProperty(o,"WB_CHANGE_SCALE",{value:116}),Object.defineProperty(o,"WB_ROTATE",{value:117}),Object.defineProperty(o,"WB_SET_CURRENT_PAGE",{value:118}),Object.defineProperty(o,"WB_SET_HOTSPOT",{value:119}),Object.defineProperty(o,"WB_SET_MARK_TERMS",{value:120}),Object.defineProperty(o,"SCREEN_SHARE_OPERATE",{value:130}),n.Conference=o}("undefined"!=typeof global&&global.process,"undefined"!=typeof global&&void 0!==global.process?n(3841):window.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?t:this)},6251:function(e,t,n){e=n.nmd(e),function(e,t,n){var i=t("ice").Ice,r=(i.__M,t("Common/Exception").Common),o=t("Control/PublicTypes").Conference,s=i.Slice;Object.defineProperty(o,"SSST_SHARING",{value:1}),Object.defineProperty(o,"SSST_MARKING",{value:2}),Object.defineProperty(o,"SSST_PAUSECTRL",{value:4}),Object.defineProperty(o,"SSRE_SOMEONE_REQ",{value:1}),Object.defineProperty(o,"SSRE_REJECT",{value:2}),o.ScreenShareInfo=s.defineStruct((function(e,t,n,i,r,o,s){this.scrSviceProxy=void 0!==e?e:"",this.authKey=void 0!==t?t:"",this.allowCtrlReq=void 0!==n&&n,this.state=void 0!==i?i:0,this.sharer=void 0!==r?r:0,this.controller=void 0!==o?o:0,this.allowOtherMark=void 0!==s&&s}),!0,(function(e){e.writeString(this.scrSviceProxy),e.writeString(this.authKey),e.writeBool(this.allowCtrlReq),e.writeByte(this.state),e.writeShort(this.sharer),e.writeShort(this.controller),e.writeBool(this.allowOtherMark)}),(function(e){this.scrSviceProxy=e.readString(),this.authKey=e.readString(),this.allowCtrlReq=e.readBool(),this.state=e.readByte(),this.sharer=e.readShort(),this.controller=e.readShort(),this.allowOtherMark=e.readBool()}),9,!1),o.MarkData=s.defineStruct((function(e,t,n){this.termid=void 0!==e?e:0,this.color=void 0!==t?t:0,this.mousePosSeq=void 0!==n?n:null}),!0,(function(e){e.writeShort(this.termid),e.writeInt(this.color),o.ByteListHelper.write(e,this.mousePosSeq)}),(function(e){this.termid=e.readShort(),this.color=e.readInt(),this.mousePosSeq=o.ByteListHelper.read(e)}),7,!1),o.MarkDataV4=s.defineStruct((function(e,t,n,i){this.termid=void 0!==e?e:0,this.markid=void 0!==t?t:"",this.type=void 0!==n?n:0,this.mousePosSeq=void 0!==i?i:null}),!0,(function(e){e.writeShort(this.termid),e.writeString(this.markid),e.writeByte(this.type),o.ByteListHelper.write(e,this.mousePosSeq)}),(function(e){this.termid=e.readShort(),this.markid=e.readString(),this.type=e.readByte(),this.mousePosSeq=o.ByteListHelper.read(e)}),5,!1),s.defineSequence(o,"MarkDataSeqHelper","Conference.MarkData",!1),s.defineSequence(o,"MarkDataSeqV4Helper","Conference.MarkDataV4",!1),s.defineSequence(o,"MarkIdSeqHelper","Ice.StringHelper",!1),o.ScreenShareCtrl=s.defineObject(void 0,i.Object,void 0,0,["::Conference::ScreenShareCtrl","::Ice::Object"],-1,void 0,void 0,!1),o.ScreenShareCtrlPrx=s.defineProxy(i.ObjectPrx,o.ScreenShareCtrl.ice_staticId,void 0),s.defineOperations(o.ScreenShareCtrl,o.ScreenShareCtrlPrx,{getScreenShareInfo:[,,,1,,[o.ScreenShareInfo],,,[r.ConferenceError],,],startScreenShare:[,,,1,,,,,[r.ConferenceError],,],stopScreenShare:[,,,1,,,,,[r.ConferenceError],,],setCtrlReqState:[,,,1,,,[[1]],,[r.ConferenceError],,],requestCtrlRight:[,,,1,,,,,[r.ConferenceError],,],cancelCtrlReq:[,,,1,,,,,[r.ConferenceError],,],rejectCtrlReq:[,,,1,,,[[2],[0]],,[r.ConferenceError],,],giveCtrlRight:[,,,1,,,[[2]],,[r.ConferenceError],,],releaseCtrlRight:[,,,1,,,,,[r.ConferenceError],,],ctrlMsg:[,,,1,,,[["Conference.ByteListHelper"]],,[r.ConferenceError],,],tmpSetRemoteCtrlState:[,,,1,,,[[1]],,[r.ConferenceError],,],requestMarked:[,,,1,,,,,[r.ConferenceError],,],cancelMarkedReq:[,,,1,,,,,[r.ConferenceError],,],startMarked:[,,,1,,,,,[r.ConferenceError],,],stopMarked:[,,,1,,,,,[r.ConferenceError],,],enableOtherMarked:[,,,1,,,[[1]],,[r.ConferenceError],,],askForNewIFrame:[,,,1,,,[[3]],,[r.ConferenceError],,],getAllMarkData:[,,,1,,["Conference.MarkDataSeqHelper"],,,[r.ConferenceError],,],sendMarkData:[,,,1,,,[[o.MarkData]],,[r.ConferenceError],,],clearAllMarks:[,,,1,,,,,[r.ConferenceError],,],setIndicator:[,,,1,,,[["Conference.StringStringMapHelper"]],,,,],getAllMarkDataV4:[,,,1,,["Conference.MarkDataSeqV4Helper"],,,[r.ConferenceError],,],sendMarkDataV4:[,,,1,,,[[o.MarkDataV4]],,[r.ConferenceError],,],clearAllMarksV4:[,,,1,,,,,[r.ConferenceError],,],delMarkDataV4:[,,,1,,,[["Conference.MarkIdSeqHelper"]],,[r.ConferenceError],,]}),o.ScreenShareClient=s.defineObject(void 0,i.Object,void 0,0,["::Conference::ScreenShareClient","::Ice::Object"],-1,void 0,void 0,!1),o.ScreenShareClientPrx=s.defineProxy(i.ObjectPrx,o.ScreenShareClient.ice_staticId,void 0),s.defineOperations(o.ScreenShareClient,o.ScreenShareClientPrx,{notifyStartScreenShare:[,,,,,,[[o.ScreenShareInfo]],,,,],notifyStopScreenShare:[,,,,,,[[2]],,,,],notifyCtrlReqState:[,,,,,,[[2],[1]],,[r.ConferenceError],,],notifyRequestCtrlRight:[,,,,,,[[2]],,,,],notifyCancelCtrlReq:[,,,,,,[[2]],,,,],notifyRejectCtrlReq:[,,,,,,[[2],[2],[0]],,,,],notifyGiveCtrlRight:[,,,,,,[[2],[2]],,,,],notifyReleaseCtrlRight:[,,,,,,[[2]],,,,],notifyCtrlMsg:[,,,,,,[[2],["Conference.ByteListHelper"]],,,,],notifyTmpSetRemoteCtrlState:[,,,,,,[[2],[1]],,,,],notifyRequestMarked:[,,,,,,[[2]],,,,],notifyCancelMarkedReq:[,,,,,,[[2]],,,,],notifyStartMarked:[,,,,,,[[2]],,,,],notifyStopMarked:[,,,,,,[[2]],,,,],notifyEnableOtherMarked:[,,,,,,[[2],[1]],,,,],notifyMakeIFrame:[,,,,,,[[3]],,,,],notifyMarkData:[,,,,,,[[o.MarkData]],,,,],notifyClearAllMarks:[,,,,,,,,,,],notifyIndicator:[,,,,,,[[2],["Conference.StringStringMapHelper"]],,,,],notifyClearAllMarksV4:[,,,,,,,,,,],notifyMarkDataV4:[,,,,,,[[o.MarkDataV4]],,,,],notifyDelMarkDataV4:[,,,,,,[["Conference.MarkIdSeqHelper"],[2]],,,,]}),n.Conference=o}("undefined"!=typeof global&&global.process,"undefined"!=typeof global&&void 0!==global.process?n(3841):window.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?t:this)},1948:function(e,t,n){e=n.nmd(e),function(e,t,n){var i=t("ice").Ice,r=(i.__M,t("Common/Exception").Common),o=t("Control/PublicTypes").Conference,s=i.Slice;o.SyncCtrlCallback=s.defineObject(void 0,i.Object,void 0,0,["::Conference::SyncCtrlCallback","::Ice::Object"],-1,void 0,void 0,!1),o.SyncCtrlCallbackPrx=s.defineProxy(i.ObjectPrx,o.SyncCtrlCallback.ice_staticId,void 0),s.defineOperations(o.SyncCtrlCallback,o.SyncCtrlCallbackPrx,{notifySetCurrentTab:[,,,,,,[[o.TabID],[o.TabID],[2]],,,,],notifySetFullScreen:[,,,,,,[[1],[2]],,,,],notifySetPrivTabInfo:[,,,,,,[[7],[2]],,,,],notifySetSyncMode:[,,,,,,[[o.SYNCMODE.__helper],[2]],,,,]}),o.SyncCtrl=s.defineObject(void 0,i.Object,void 0,0,["::Conference::SyncCtrl","::Ice::Object"],-1,void 0,void 0,!1),o.SyncCtrlPrx=s.defineProxy(i.ObjectPrx,o.SyncCtrl.ice_staticId,void 0),s.defineOperations(o.SyncCtrl,o.SyncCtrlPrx,{setCurrentTab:[,,,1,,,[[o.TabID],[o.TabID]],,[r.ConferenceError],,],setFullScreen:[,,,1,,,[[1]],,[r.ConferenceError],,],setPrivTabInfo:[,,,1,,,[[7]],,[r.ConferenceError],,],setSyncMode:[,,,1,,,[[o.SYNCMODE.__helper]],,[r.ConferenceError],,],saveLastTabValue:[,,,1,,,[[2]],,[r.ConferenceError],,]}),n.Conference=o}("undefined"!=typeof global&&global.process,"undefined"!=typeof global&&void 0!==global.process?n(3841):window.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?t:this)},156:function(e,t,n){e=n.nmd(e),function(e,t,n){var i=t("ice").Ice,r=(i.__M,t("Common/Exception").Common),o=t("Control/PublicTypes").Conference,s=i.Slice;Object.defineProperty(o,"FPS_LOW",{value:-1}),Object.defineProperty(o,"FPS_NOR",{value:0}),Object.defineProperty(o,"FPS_HI",{value:1}),Object.defineProperty(o,"VEDIO_LD",{value:-1}),Object.defineProperty(o,"VEDIO_SD",{value:0}),Object.defineProperty(o,"VEDIO_HD",{value:1}),Object.defineProperty(o,"VEDIO_UD",{value:2}),o.VideoSetting=s.defineStruct((function(e,t,n,i,r,o){this.mutiCam=void 0!==e&&e,this.openCamIDs=void 0!==t?t:null,this.denoise=void 0!==n&&n,this.deinterlace=void 0!==i&&i,this.fpsType=void 0!==r?r:0,this.videType=void 0!==o?o:0}),!0,(function(e){e.writeBool(this.mutiCam),i.ShortSeqHelper.write(e,this.openCamIDs),e.writeBool(this.denoise),e.writeBool(this.deinterlace),e.writeInt(this.fpsType),e.writeInt(this.videType)}),(function(e){this.mutiCam=e.readBool(),this.openCamIDs=i.ShortSeqHelper.read(e),this.denoise=e.readBool(),this.deinterlace=e.readBool(),this.fpsType=e.readInt(),this.videType=e.readInt()}),12,!1),o.UsrCamID=s.defineStruct((function(e,t){this.termID=void 0!==e?e:0,this.camID=void 0!==t?t:0}),!0,(function(e){e.writeShort(this.termID),e.writeShort(this.camID)}),(function(e){this.termID=e.readShort(),this.camID=e.readShort()}),4,!0),s.defineSequence(o,"UsrCamIDListHelper","Conference.UsrCamID",!0),o.UsrCamSize=s.defineStruct((function(e,t,n){this.termID=void 0!==e?e:0,this.camID=void 0!==t?t:0,this.VIDEO_SS_value=void 0!==n?n:0}),!0,(function(e){e.writeShort(this.termID),e.writeShort(this.camID),e.writeInt(this.VIDEO_SS_value)}),(function(e){this.termID=e.readShort(),this.camID=e.readShort(),this.VIDEO_SS_value=e.readInt()}),8,!0),s.defineSequence(o,"UsrCamSizeListHelper","Conference.UsrCamSize",!0),Object.defineProperty(o,"ZOOM_TELE",{value:2}),Object.defineProperty(o,"ZOOM_WIDE",{value:3}),Object.defineProperty(o,"ZOOM_STOP",{value:0}),Object.defineProperty(o,"PAN_TILT_DIR_UP",{value:1}),Object.defineProperty(o,"PAN_TILT_DIR_DOWN",{value:2}),Object.defineProperty(o,"PAN_TILT_DIR_LEFT",{value:3}),Object.defineProperty(o,"PAN_TILT_DIR_RIGHT",{value:4}),Object.defineProperty(o,"PAN_TILT_DIR_STOP",{value:5}),o.VideoCallback=s.defineObject(void 0,i.Object,void 0,0,["::Conference::VideoCallback","::Ice::Object"],-1,void 0,void 0,!1),o.VideoCallbackPrx=s.defineProxy(i.ObjectPrx,o.VideoCallback.ice_staticId,void 0),s.defineOperations(o.VideoCallback,o.VideoCallbackPrx,{notifyAllowVideoWall:[,,,,,,[[1],[2]],,,,],updateStatus:[,,,,,,[[2],[o.VSTATUS.__helper],[2]],,,,],notifyOpenVideo:[,,,,,,[[2]],,,,],startVideoByManager:[,,,,,,,,[r.ConferenceError],,],notifyEnableVideo:[,,,,,,[[2],[1],[2]],,,,],updateFocusWindow:[,,,,,,[[o.WINDOW_MODE.__helper],[2]],,,,],updateVLayout:[,,,,,,[[o.VIDEOLAYOUTMODE.__helper],[2]],,,,],updateVLayout2:[,,,,,,[[3],[2]],,,,],updateMainVideoShowMode:[,,,,,,[[3],[2]],,,,],updateVideoListMode:[,,,,,,[[7],[2]],,,,],enableUpload:[,,,,,,[[2],[1]],,,,],enableUpload2:[,,,,,,[[2],[3]],,,,],generateIFrame:[,,,,,,[[2]],,,,],notifyRefuseOpenVideo:[,,,,,,[[2]],,,,],getVideoSetting:[,,,1,,[o.VideoSetting],,,[r.ConferenceError],,],setCamera:[,,,,,,[[o.VideoSetting],[2]],,[r.ConferenceError],,],setCameraById:[,,,,,,[[o.UsrCamID],[2]],,[r.ConferenceError],,],notifyVideoPolling:[,,,,,,[[2],[1],[3]],,[r.ConferenceError],,],notifyPollingVideo:[,,,,,,[[2],["Conference.UsrCamIDListHelper"]],,[r.ConferenceError],,],notifyPollingVideo2:[,,,,,,[[2],["Conference.UsrCamIDListHelper"],[7]],,[r.ConferenceError],,],notifyVideoList:[,,,,,,[[2],[7]],,[r.ConferenceError],,],notifyUpdateAllCameraInfos:[,,,,,,[[2],[7]],,[r.ConferenceError],,],notifySetOpenedCameraNumber:[,,,,,,[[2],["Ice.ShortSeqHelper"]],,[r.ConferenceError],,],notifyStartAdjustDirection:[,,,,,,[[o.UsrCamID],[3]],,,,],notifyStartAdjustZoom:[,,,,,,[[o.UsrCamID],[3]],,,,],notifyStopAdjustDirection:[,,,,,,[[o.UsrCamID]],,,,],notifyStopAdjustZoom:[,,,,,,[[o.UsrCamID]],,,,]}),o.VideoCtrl=s.defineObject(void 0,i.Object,void 0,0,["::Conference::VideoCtrl","::Ice::Object"],-1,void 0,void 0,!1),o.VideoCtrlPrx=s.defineProxy(i.ObjectPrx,o.VideoCtrl.ice_staticId,void 0),s.defineOperations(o.VideoCtrl,o.VideoCtrlPrx,{setDeviceStatus:[,,,1,,,[[1]],,[r.ConferenceError],,],allowVideoWall:[,,,1,,,[[1]],,[r.ConferenceError],,],startVideo:[,,,1,,,,,[r.ConferenceError],,],stopVideo:[,,,1,,,,,[r.ConferenceError],,],reqOpenVideo:[,,,1,,,[[2]],,[r.ConferenceError],,],startVideoEx:[,,,1,,,[[2]],,[r.ConferenceError],,],stopVideoEx:[,,,1,,,[[2]],,[r.ConferenceError],,],enableVideo:[,,,1,,,[[1]],,[r.ConferenceError],,],setFocusWindow:[,,,1,,,[[o.WINDOW_MODE.__helper],[2]],,[r.ConferenceError],,],batchSubscribeVideo:[,,,1,,,[["Conference.UsrCamIDListHelper"],[1]],,[r.ConferenceError],,],batchSubscribeVideo2:[,,,1,,,[["Conference.UsrCamSizeListHelper"]],,[r.ConferenceError],,],subscribeFocusWindow:[,,,1,,,[[1]],,[r.ConferenceError],,],subscribeFocusWindow2:[,,,1,,,[[3]],,[r.ConferenceError],,],setVLayout:[,,,1,,,[[o.VIDEOLAYOUTMODE.__helper]],,[r.ConferenceError],,],setVLayout2:[,,,1,,,[[3]],,[r.ConferenceError],,],setMainVideoShowMode:[,,,1,,,[[3]],,[r.ConferenceError],,],setVideoListMode:[,,,1,,,[[7]],,,,],refuseOpenVideo:[,,,1,,,[[2]],,,,],getVideoSetting:[,,,1,,[o.VideoSetting],[[2]],,[r.ConferenceError],,],setCamera:[,,,1,,,[[2],[o.VideoSetting]],,[r.ConferenceError],,],setCameraById:[,,,1,,,[[o.UsrCamID]],,[r.ConferenceError],,],setVideoPolling:[,,,1,,,[[1],[3]],,[r.ConferenceError],,],updatePollingVideo:[,,,1,,,[["Conference.UsrCamIDListHelper"]],,[r.ConferenceError],,],updatePollingVideo2:[,,,1,,,[["Conference.UsrCamIDListHelper"],[7]],,[r.ConferenceError],,],updateVideoList:[,,,1,,,[[7]],,[r.ConferenceError],,],getVideoPollingState:[,,,1,,[1],,[["Conference.UsrCamIDListHelper"],[3]],[r.ConferenceError],,],updateAllCameraInfos:[,,,1,,,[[7]],,[r.ConferenceError],,],setOpenedCameraNumber:[,,,1,,,[["Ice.ShortSeqHelper"]],,[r.ConferenceError],,],startAdjustDirection:[,,,1,,,[[o.UsrCamID],[3]],,[r.ConferenceError],,],startAdjustZoom:[,,,1,,,[[o.UsrCamID],[3]],,[r.ConferenceError],,],stopAdjustDirection:[,,,1,,,[[o.UsrCamID]],,[r.ConferenceError],,],stopAdjustZoom:[,,,1,,,[[o.UsrCamID]],,[r.ConferenceError],,]}),n.Conference=o}("undefined"!=typeof global&&global.process,"undefined"!=typeof global&&void 0!==global.process?n(3841):window.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?t:this)},834:function(e,t,n){e=n.nmd(e),function(e,t,n){var i=t("ice").Ice,r=(i.__M,t("Common/Exception").Common),o=t("Control/PublicTypes").Conference,s=i.Slice;o.WB_BAKIMG_TYPE=s.defineEnum([["WB_BAKIMG_NULL",0],["WB_BAKIMG_EMF",1],["WB_BAKIMG_JPG",2],["WB_BAKIMG_HTML",3]]),o.WB_ELEMENT_ZPOS=s.defineEnum([["WB_ELEMENT_ZTOP",0],["WB_ELEMENT_ZBOTTOM",1]]),o.ElementID=s.defineStruct((function(e,t){this.ownerID=void 0!==e?e:0,this.ID=void 0!==t?t:0}),!0,(function(e){e.writeShort(this.ownerID),e.writeShort(this.ID)}),(function(e){this.ownerID=e.readShort(),this.ID=e.readShort()}),4,!0),s.defineSequence(o,"ElementIDSeqHelper","Conference.ElementID",!0),o.ElementPos=s.defineStruct((function(e,t,n){this.eID=void 0!==e?e:new o.ElementID,this.left=void 0!==t?t:0,this.top=void 0!==n?n:0}),!0,(function(e){o.ElementID.write(e,this.eID),e.writeInt(this.left),e.writeInt(this.top)}),(function(e){this.eID=o.ElementID.read(e,this.eID),this.left=e.readInt(),this.top=e.readInt()}),12,!0),s.defineSequence(o,"ElementPosSeqHelper","Conference.ElementPos",!0),o.ElementData=s.defineStruct((function(e,t,n,i,r,s,a){this.eID=void 0!==e?e:new o.ElementID,this.orderId=void 0!==t?t:0,this.left=void 0!==n?n:0,this.top=void 0!==i?i:0,this.type=void 0!==r?r:0,this.noused=void 0!==s?s:0,this.data=void 0!==a?a:null}),!0,(function(e){o.ElementID.write(e,this.eID),e.writeInt(this.orderId),e.writeInt(this.left),e.writeInt(this.top),e.writeInt(this.type),e.writeInt(this.noused),o.ByteListHelper.write(e,this.data)}),(function(e){this.eID=o.ElementID.read(e,this.eID),this.orderId=e.readInt(),this.left=e.readInt(),this.top=e.readInt(),this.type=e.readInt(),this.noused=e.readInt(),this.data=o.ByteListHelper.read(e)}),25,!1),s.defineSequence(o,"ElementSeqHelper","Conference.ElementData",!1),o.IndicatorData=s.defineStruct((function(e,t,n,i,r,o){this.termId=void 0!==e?e:0,this.pageNo=void 0!==t?t:0,this.x=void 0!==n?n:0,this.y=void 0!==i?i:0,this.msg=void 0!==r?r:"",this.lifeSec=void 0!==o?o:0}),!0,(function(e){e.writeInt(this.termId),e.writeInt(this.pageNo),e.writeInt(this.x),e.writeInt(this.y),e.writeString(this.msg),e.writeByte(this.lifeSec)}),(function(e){this.termId=e.readInt(),this.pageNo=e.readInt(),this.x=e.readInt(),this.y=e.readInt(),this.msg=e.readString(),this.lifeSec=e.readByte()}),18,!1),s.defineSequence(o,"IndicatorDataSeqHelper","Conference.IndicatorData",!1),o.PageData=s.defineStruct((function(e,t,n,i){this.pageNo=void 0!==e?e:0,this.imgType=void 0!==t?t:o.WB_BAKIMG_TYPE.WB_BAKIMG_NULL,this.imgResourceID=void 0!==n?n:"",this.elementList=void 0!==i?i:null}),!0,(function(e){e.writeInt(this.pageNo),o.WB_BAKIMG_TYPE.__write(e,this.imgType),e.writeString(this.imgResourceID),o.ElementSeqHelper.write(e,this.elementList)}),(function(e){this.pageNo=e.readInt(),this.imgType=o.WB_BAKIMG_TYPE.__read(e),this.imgResourceID=e.readString(),this.elementList=o.ElementSeqHelper.read(e)}),7,!1),s.defineSequence(o,"PageDataSeqHelper","Conference.PageData",!1),o.WhiteBoardData=s.defineStruct((function(e,t){this.descData=void 0!==e?e:new o.WhiteBoardDescribe,this.pageDataList=void 0!==t?t:null}),!0,(function(e){o.WhiteBoardDescribe.write(e,this.descData),o.PageDataSeqHelper.write(e,this.pageDataList)}),(function(e){this.descData=o.WhiteBoardDescribe.read(e,this.descData),this.pageDataList=o.PageDataSeqHelper.read(e)}),38,!1),s.defineSequence(o,"WhiteBoardDataSeqHelper","Conference.WhiteBoardData",!1),s.defineDictionary(o,"PageToDatas","PageToDatasHelper","Ice.IntHelper","Conference.PageData",!1,void 0,void 0,i.HashMap.compareEquals),o.WhiteBoardCtrl=s.defineObject(void 0,i.Object,void 0,0,["::Conference::WhiteBoardCtrl","::Ice::Object"],-1,void 0,void 0,!1),o.WhiteBoardCtrlPrx=s.defineProxy(i.ObjectPrx,o.WhiteBoardCtrl.ice_staticId,void 0),s.defineOperations(o.WhiteBoardCtrl,o.WhiteBoardCtrlPrx,{setContainerSize:[,,,1,,,[[3],[3]],,[r.ConferenceError],,],create:[,,,1,,,[[o.WhiteBoardDescribe]],,[r.ConferenceError],,],importPage:[,,,1,,,[[o.TabID],["Conference.PageDataSeqHelper"]],,[r.ConferenceError],,],close:[,,,1,,,[[o.TabID]],,[r.ConferenceError],,],changeName:[,,,1,,,[[o.TabID],[7]],,[r.ConferenceError],,],changeScale:[,,,1,,,[[o.TabID],[o.WB_SCALE_TYPE.__helper]],,[r.ConferenceError],,],changeRatote:[,,,1,,,[[o.TabID],[o.WB_ROTATE_TYPE.__helper]],,[r.ConferenceError],,],setCurrentPage:[,,,1,,,[[o.TabID],[3],[3],[3]],,[r.ConferenceError],,],showThumPage:[,,,1,,,[[o.TabID],[1]],,[r.ConferenceError],,],addElement:[,,,1,,,[[o.TabID],[3],[o.ElementData]],,[r.ConferenceError],,],addElementEx:[,,,1,,,[[o.TabID],[3],["Conference.ElementSeqHelper"]],,[r.ConferenceError],,],moveElement:[,,,1,,,[[o.TabID],[3],["Conference.ElementPosSeqHelper"]],,[r.ConferenceError],,],modifyElement:[,,,1,,,[[o.TabID],[3],[o.ElementData]],,[r.ConferenceError],,],delElement:[,,,1,,,[[o.TabID],[3],["Conference.ElementIDSeqHelper"]],,[r.ConferenceError],,],setElementZPos:[,,,1,,,[[o.TabID],[3],[o.WB_ELEMENT_ZPOS.__helper]],,[r.ConferenceError],,],setIndicator:[,,,1,,,[[o.TabID],[o.IndicatorData]],,[r.ConferenceError],,],setHotspot:[,,,1,,,[[o.TabID],[3],[3],[3]],,[r.ConferenceError],,],queryIndicator:[,,,1,,["Conference.IndicatorDataSeqHelper"],[[o.TabID]],,[r.ConferenceError],,],queryAllBoardList:[,,,1,,["Conference.WhiteBoardDescribeSeqHelper"],,,[r.ConferenceError],,],queryElementByIDs:[,,,1,,["Conference.PageToDatasHelper"],[[o.TabID],["Ice.IntSeqHelper"]],,[r.ConferenceError],,],queryPageElementByIDs:[,,,1,,["Conference.ElementSeqHelper"],[[o.TabID],[3],["Conference.ElementIDSeqHelper"]],,[r.ConferenceError],,],setMarkTerms:[,,,1,,,[[o.TabID],[1],["Ice.ShortSeqHelper"]],,[r.ConferenceError],,]}),o.WhiteBoardCallback=s.defineObject(void 0,i.Object,void 0,0,["::Conference::WhiteBoardCallback","::Ice::Object"],-1,void 0,void 0,!1),o.WhiteBoardCallbackPrx=s.defineProxy(i.ObjectPrx,o.WhiteBoardCallback.ice_staticId,void 0),s.defineOperations(o.WhiteBoardCallback,o.WhiteBoardCallbackPrx,{notifySetContainerSize:[,,,,,,[[3],[3],[2]],,,,],notifyCreate:[,,,,,,[[o.WhiteBoardDescribe],[2]],,,,],notifyImportPage:[,,,,,,[[o.TabID],["Conference.PageDataSeqHelper"],[2]],,,,],notifyClose:[,,,,,,[[o.TabID],[2]],,,,],notifyChangeName:[,,,,,,[[o.TabID],[7],[2]],,,,],notifyChangeScale:[,,,,,,[[o.TabID],[o.WB_SCALE_TYPE.__helper],[2]],,,,],notifyChangeRotate:[,,,,,,[[o.TabID],[o.WB_ROTATE_TYPE.__helper],[2]],,,,],notifySetCurrentPage:[,,,,,,[[o.TabID],[3],[3],[3],[2]],,,,],notifyShowThumPage:[,,,,,,[[o.TabID],[1],[2]],,,,],notifyAddElement:[,,,,,,[[o.TabID],[3],[o.ElementData],[2]],,,,],notifyAddElementEx:[,,,,,,[[o.TabID],[3],["Conference.ElementSeqHelper"],[2]],,,,],notifyMoveElement:[,,,,,,[[o.TabID],[3],["Conference.ElementPosSeqHelper"],[2]],,,,],notifyModifyElement:[,,,,,,[[o.TabID],[3],[o.ElementData],[2]],,,,],notifyDelElement:[,,,,,,[[o.TabID],[3],["Conference.ElementIDSeqHelper"],[2]],,,,],notifySetElementZPos:[,,,,,,[[o.TabID],[3],[o.WB_ELEMENT_ZPOS.__helper],[2]],,,,],notifySetIndicator:[,,,,,,[[o.TabID],[o.IndicatorData],[2]],,,,],notifySetHotspot:[,,,,,,[[o.TabID],[3],[3],[3],[2]],,,,],notifySetMarkTerms:[,,,,,,[[o.TabID],[1],["Ice.ShortSeqHelper"]],,,,]}),n.Conference=o}("undefined"!=typeof global&&global.process,"undefined"!=typeof global&&void 0!==global.process?n(3841):window.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?t:this)},3841:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=3841,e.exports=t},8635:function(e,t,n){e=n.nmd(e),function(e,t,n){var i=t("ice").Ice,r=i.__M,o=i.Slice,s=r.module("LogSpace");s.LogLevel=o.defineEnum([["debug",0],["info",1],["warning",2],["error",3]]),s.FatalLogInfo=o.defineStruct((function(e,t,n,i,r,o,s,a){this.version=void 0!==e?e:"",this.conferenceID=void 0!==t?t:0,this.userID=void 0!==n?n:0,this.client=void 0!==i?i:"",this.clientIP=void 0!==r?r:"",this.logDate=void 0!==o?o:"",this.content=void 0!==s?s:"",this.dumpData=void 0!==a?a:null}),!0,(function(e){e.writeString(this.version),e.writeInt(this.conferenceID),e.writeInt(this.userID),e.writeString(this.client),e.writeString(this.clientIP),e.writeString(this.logDate),e.writeString(this.content),i.ByteSeqHelper.write(e,this.dumpData)}),(function(e){this.version=e.readString(),this.conferenceID=e.readInt(),this.userID=e.readInt(),this.client=e.readString(),this.clientIP=e.readString(),this.logDate=e.readString(),this.content=e.readString(),this.dumpData=i.ByteSeqHelper.read(e)}),14,!1),s.AppendData=o.defineStruct((function(e,t,n){this.uuid=void 0!==e?e:"",this.type=void 0!==t?t:"",this.data=void 0!==n?n:null}),!0,(function(e){e.writeString(this.uuid),e.writeString(this.type),i.ByteSeqHelper.write(e,this.data)}),(function(e){this.uuid=e.readString(),this.type=e.readString(),this.data=i.ByteSeqHelper.read(e)}),3,!1),o.defineSequence(s,"AppendDataSeqHelper","LogSpace.AppendData",!1),s.UsrReportInfo=o.defineStruct((function(e,t,n,i,r,o,s,a,c){this.version=void 0!==e?e:"",this.conferenceID=void 0!==t?t:0,this.userID=void 0!==n?n:0,this.client=void 0!==i?i:"",this.clientIP=void 0!==r?r:"",this.reportDate=void 0!==o?o:"",this.contact=void 0!==s?s:"",this.content=void 0!==a?a:"",this.appendDatas=void 0!==c?c:null}),!0,(function(e){e.writeString(this.version),e.writeInt(this.conferenceID),e.writeInt(this.userID),e.writeString(this.client),e.writeString(this.clientIP),e.writeString(this.reportDate),e.writeString(this.contact),e.writeString(this.content),s.AppendDataSeqHelper.write(e,this.appendDatas)}),(function(e){this.version=e.readString(),this.conferenceID=e.readInt(),this.userID=e.readInt(),this.client=e.readString(),this.clientIP=e.readString(),this.reportDate=e.readString(),this.contact=e.readString(),this.content=e.readString(),this.appendDatas=s.AppendDataSeqHelper.read(e)}),15,!1),s.ClientLogServer=o.defineObject(void 0,i.Object,void 0,1,["::Ice::Object","::LogSpace::ClientLogServer"],-1,void 0,void 0,!1),s.ClientLogServerPrx=o.defineProxy(i.ObjectPrx,s.ClientLogServer.ice_staticId,void 0),o.defineOperations(s.ClientLogServer,s.ClientLogServerPrx,{log:[,,,,,,[["Ice.ByteSeqHelper"]],,,,],logFatal:[,,,,,,[[s.FatalLogInfo]],,,,],usrReport:[,,,,,,[[s.UsrReportInfo]],,,,],logDetail:[,,,,,,[[3],[7],["Ice.ByteSeqHelper"]],,,,],sendCmd:[,,,,,,[[7],[7],[7],["Ice.ByteSeqHelper"]],[[7],["Ice.ByteSeqHelper"]],,,]}),n.LogSpace=s}("undefined"!=typeof global&&global.process,"undefined"!=typeof global&&void 0!==global.process?n(1466):window.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?t:this)},1466:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=1466,e.exports=t},6052:function(e,t,n){e=n.nmd(e),function(e,t,n){var i=t("ice").Ice,r=i.__M,o=i.Slice,s=r.module("SendCmd");s.CmdError=o.defineUserException((function(e,t,n){i.UserException.call(this,n),this.error=void 0!==e?e:0,this.reason=void 0!==t?t:""}),i.UserException,"SendCmd::CmdError",(function(e){e.writeInt(this.error),e.writeString(this.reason)}),(function(e){this.error=e.readInt(),this.reason=e.readString()}),!1,!1),s.UnknowErr=o.defineUserException((function(e,t,n){s.CmdError.call(this,e,t,n)}),s.CmdError,"SendCmd::UnknowErr",void 0,void 0,!1,!1),s.CmdNotFound=o.defineUserException((function(e,t,n){s.CmdError.call(this,e,t,n)}),s.CmdError,"SendCmd::CmdNotFound",void 0,void 0,!1,!1),s.CmdNotImplement=o.defineUserException((function(e,t,n){s.CmdError.call(this,e,t,n)}),s.CmdError,"SendCmd::CmdNotImplement",void 0,void 0,!1,!1),s.AppException=o.defineUserException((function(e,t,n){s.CmdError.call(this,e,t,n)}),s.CmdError,"SendCmd::AppException",void 0,void 0,!1,!1),s.AppReturnInvalid=o.defineUserException((function(e,t,n){s.CmdError.call(this,e,t,n)}),s.CmdError,"SendCmd::AppReturnInvalid",void 0,void 0,!1,!1),s.SessionInvalid=o.defineUserException((function(e,t,n){s.CmdError.call(this,e,t,n)}),s.CmdError,"SendCmd::SessionInvalid",void 0,void 0,!1,!1),s.TargetInvalid=o.defineUserException((function(e,t,n){s.CmdError.call(this,e,t,n)}),s.CmdError,"SendCmd::TargetInvalid",void 0,void 0,!1,!1),Object.defineProperty(s,"DATATYPE_ALPHA",{value:1}),s.Cmd=o.defineObject(void 0,i.Object,void 0,1,["::Ice::Object","::SendCmd::Cmd"],-1,void 0,void 0,!1),s.CmdPrx=o.defineProxy(i.ObjectPrx,s.Cmd.ice_staticId,void 0),o.defineOperations(s.Cmd,s.CmdPrx,{sendCmd:[,,,1,,[7],[[7]],,[s.CmdError],,],sendBuffer:[,,,1,,[7],[[7],["Ice.ByteSeqHelper"]],,[s.CmdError],,]}),n.SendCmd=s}("undefined"!=typeof global&&global.process,"undefined"!=typeof global&&void 0!==global.process?n(4047):window.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?t:this)},4047:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=4047,e.exports=t},8542:function(e,t,n){e=n.nmd(e),function(e,t,n){var i=t("ice").Ice,r=i.__M,o=i.Slice,s=r.module("Resm");s.ResmError=o.defineUserException((function(e,t,n){i.UserException.call(this,n),this.error=void 0!==e?e:0,this.reason=void 0!==t?t:""}),i.UserException,"Resm::ResmError",(function(e){e.writeInt(this.error),e.writeString(this.reason)}),(function(e){this.error=e.readInt(),this.reason=e.readString()}),!1,!1),s.ServerIdNotConfiger=o.defineUserException((function(e,t,n){s.ResmError.call(this,e,t,n)}),s.ResmError,"Resm::ServerIdNotConfiger",void 0,void 0,!1,!1),s.ServerNotEnable=o.defineUserException((function(e,t,n){s.ResmError.call(this,e,t,n)}),s.ResmError,"Resm::ServerNotEnable",void 0,void 0,!1,!1),s.NotAddedToService=o.defineUserException((function(e,t,n){s.ResmError.call(this,e,t,n)}),s.ResmError,"Resm::NotAddedToService",void 0,void 0,!1,!1),s.NoServerAvailable=o.defineUserException((function(e,t,n){s.ResmError.call(this,e,t,n)}),s.ResmError,"Resm::NoServerAvailable",void 0,void 0,!1,!1),s.NotConnected2Db=o.defineUserException((function(e,t,n){s.ResmError.call(this,e,t,n)}),s.ResmError,"Resm::NotConnected2Db",void 0,void 0,!1,!1),s.ResSessionBase=o.defineObject(void 0,i.Object,void 0,1,["::Ice::Object","::Resm::ResSessionBase"],-1,void 0,void 0,!1),s.ResSessionBasePrx=o.defineProxy(i.ObjectPrx,s.ResSessionBase.ice_staticId,void 0),o.defineOperations(s.ResSessionBase,s.ResSessionBasePrx,{nouse:[,,,,,,,,,,]}),s.InfoResponse=o.defineStruct((function(e,t,n,i){this.serverNo=void 0!==e?e:0,this.domain=void 0!==t?t:0,this.registerInverval=void 0!==n?n:0,this.reportInverval=void 0!==i?i:0}),!0,(function(e){e.writeInt(this.serverNo),e.writeInt(this.domain),e.writeInt(this.registerInverval),e.writeInt(this.reportInverval)}),(function(e){this.serverNo=e.readInt(),this.domain=e.readInt(),this.registerInverval=e.readInt(),this.reportInverval=e.readInt()}),16,!0),Object.defineProperty(s,"SERVER_ACCESS",{value:0}),Object.defineProperty(s,"SERVER_SS",{value:1}),Object.defineProperty(s,"SERVER_CONTROL",{value:2}),Object.defineProperty(s,"SERVER_FILE",{value:3}),Object.defineProperty(s,"SERVER_MIX",{value:4}),Object.defineProperty(s,"SERVER_FN",{value:5}),Object.defineProperty(s,"SERVER_MCU",{value:6}),s.ResmCommon=o.defineObject(void 0,i.Object,void 0,1,["::Ice::Object","::Resm::ResmCommon"],-1,void 0,void 0,!1),s.ResmCommonPrx=o.defineProxy(i.ObjectPrx,s.ResmCommon.ice_staticId,void 0),o.defineOperations(s.ResmCommon,s.ResmCommonPrx,{getSelfInfo:[,,,,,[s.InfoResponse],[[7],[3]],,[s.ResmError],,],getActiveConference:[,,,,,["Ice.IntSeqHelper"],,,[s.ResmError],,]}),o.defineDictionary(s,"ReportDict","ReportDictHelper","Ice.StringHelper","Ice.IntHelper",!1,void 0,void 0),o.defineDictionary(s,"DataDict","DataDictHelper","Ice.StringHelper","Ice.IntHelper",!1,void 0,void 0),o.defineSequence(s,"IpAddressSeqHelper","Ice.StringHelper",!1),s.NetworkStatus=o.defineStruct((function(e,t){this.latency=void 0!==e?e:0,this.lostRate=void 0!==t?t:0}),!0,(function(e){e.writeInt(this.latency),e.writeInt(this.lostRate)}),(function(e){this.latency=e.readInt(),this.lostRate=e.readInt()}),8,!0),s.NetworkReport=o.defineStruct((function(e,t,n,i,r,o,s,a){this.avgLatency=void 0!==e?e:0,this.maxLatency=void 0!==t?t:0,this.minLatency=void 0!==n?n:0,this.lostRate=void 0!==i?i:0,this.singleLost=void 0!==r?r:0,this.contLostCnt=void 0!==o?o:0,this.contLostPkt=void 0!==s?s:0,this.statisTime=void 0!==a?a:""}),!0,(function(e){e.writeInt(this.avgLatency),e.writeInt(this.maxLatency),e.writeInt(this.minLatency),e.writeInt(this.lostRate),e.writeInt(this.singleLost),e.writeInt(this.contLostCnt),e.writeInt(this.contLostPkt),e.writeString(this.statisTime)}),(function(e){this.avgLatency=e.readInt(),this.maxLatency=e.readInt(),this.minLatency=e.readInt(),this.lostRate=e.readInt(),this.singleLost=e.readInt(),this.contLostCnt=e.readInt(),this.contLostPkt=e.readInt(),this.statisTime=e.readString()}),29,!1),s.PathStatus=o.defineStruct((function(e,t,n,i){this.remoteServerNo=void 0!==e?e:0,this.remoteIP=void 0!==t?t:"",this.netReport=void 0!==n?n:new s.NetworkReport,this.weight=void 0!==i?i:0}),!0,(function(e){e.writeInt(this.remoteServerNo),e.writeString(this.remoteIP),s.NetworkReport.write(e,this.netReport),e.writeInt(this.weight)}),(function(e){this.remoteServerNo=e.readInt(),this.remoteIP=e.readString(),this.netReport=s.NetworkReport.read(e,this.netReport),this.weight=e.readInt()}),38,!1),o.defineSequence(s,"PathStatusSeqHelper","Resm.PathStatus",!1),o.defineDictionary(s,"PathStatusDict","PathStatusDictHelper","Ice.StringHelper","Resm.PathStatusSeqHelper",!1,void 0,void 0,i.ArrayUtil.equals),s.MixSession=o.defineObject(void 0,i.Object,[s.ResSessionBase],1,["::Ice::Object","::Resm::MixSession","::Resm::ResSessionBase"],-1,void 0,void 0,!1),s.MixSessionPrx=o.defineProxy(i.ObjectPrx,s.MixSession.ice_staticId,[s.ResSessionBasePrx]),o.defineOperations(s.MixSession,s.MixSessionPrx,{abilityReport:[,,,,,,[["Resm.ReportDictHelper"]],,[s.ResmError],,]}),s.NetworkProperty=o.defineEnum([["TELECOM",0],["UNICOM",1],["TELEUNI",2],["UNKNOW",3]]),s.MixM=o.defineObject(void 0,i.Object,void 0,1,["::Ice::Object","::Resm::MixM"],-1,void 0,void 0,!1),s.MixMPrx=o.defineProxy(i.ObjectPrx,s.MixM.ice_staticId,void 0),o.defineOperations(s.MixM,s.MixMPrx,{register:[,,,,,["Resm.MixSessionPrx"],[[3],[7],[7],["Resm.IpAddressSeqHelper"]],[["Resm.DataDictHelper"]],[s.ResmError],,],locate:[,,,,,[3],[[3],[3],[s.NetworkProperty.__helper]],,[s.ResmError],,],locateMixAndSs:[,,,,,["Resm.DataDictHelper"],[[3],[3],[3]],,[s.ResmError],,]}),s.SsSession=o.defineObject(void 0,i.Object,[s.ResSessionBase],2,["::Ice::Object","::Resm::ResSessionBase","::Resm::SsSession"],-1,void 0,void 0,!1),s.SsSessionPrx=o.defineProxy(i.ObjectPrx,s.SsSession.ice_staticId,[s.ResSessionBasePrx]),o.defineOperations(s.SsSession,s.SsSessionPrx,{abilityReport:[,,,,,,[["Resm.ReportDictHelper"]],,,,]}),s.SsM=o.defineObject(void 0,i.Object,void 0,1,["::Ice::Object","::Resm::SsM"],-1,void 0,void 0,!1),s.SsMPrx=o.defineProxy(i.ObjectPrx,s.SsM.ice_staticId,void 0),o.defineOperations(s.SsM,s.SsMPrx,{register:[,,,,,["Resm.SsSessionPrx"],[[3],[7],[7]],[["Resm.DataDictHelper"]],[s.ResmError],,],locate:[,,,,,[3],[[3],[3]],,[s.ResmError],,]}),s.ControlSession=o.defineObject(void 0,i.Object,[s.ResSessionBase],1,["::Ice::Object","::Resm::ControlSession","::Resm::ResSessionBase"],-1,void 0,void 0,!1),s.ControlSessionPrx=o.defineProxy(i.ObjectPrx,s.ControlSession.ice_staticId,[s.ResSessionBasePrx]),o.defineOperations(s.ControlSession,s.ControlSessionPrx,{abilityReport:[,,,,,,[["Resm.ReportDictHelper"]],,,,]}),s.ControlM=o.defineObject(void 0,i.Object,void 0,1,["::Ice::Object","::Resm::ControlM"],-1,void 0,void 0,!1),s.ControlMPrx=o.defineProxy(i.ObjectPrx,s.ControlM.ice_staticId,void 0),o.defineOperations(s.ControlM,s.ControlMPrx,{register:[,,,,,["Resm.ControlSessionPrx"],[[3],[7],[7]],,[s.ResmError],,],locate:[,,,,,["Resm.DataDictHelper"],[[3],[3],[3],[3]],,[s.ResmError],,]}),s.FileCallback=o.defineObject(void 0,i.Object,void 0,1,["::Ice::Object","::Resm::FileCallback"],-1,void 0,void 0,!1),s.FileCallbackPrx=o.defineProxy(i.ObjectPrx,s.FileCallback.ice_staticId,void 0),o.defineOperations(s.FileCallback,s.FileCallbackPrx,{setFileData:[,,,,,,[["Resm.DataDictHelper"]],,,,]}),s.FileSession=o.defineObject(void 0,i.Object,[s.ResSessionBase],1,["::Ice::Object","::Resm::FileSession","::Resm::ResSessionBase"],-1,void 0,void 0,!1),s.FileSessionPrx=o.defineProxy(i.ObjectPrx,s.FileSession.ice_staticId,[s.ResSessionBasePrx]),o.defineOperations(s.FileSession,s.FileSessionPrx,{abilityReport:[,,,,,,[["Resm.ReportDictHelper"]],,,,]}),s.FileM=o.defineObject(void 0,i.Object,void 0,1,["::Ice::Object","::Resm::FileM"],-1,void 0,void 0,!1),s.FileMPrx=o.defineProxy(i.ObjectPrx,s.FileM.ice_staticId,void 0),o.defineOperations(s.FileM,s.FileMPrx,{register:[,,,,,["Resm.FileSessionPrx"],[[3],[7],[7],["Resm.FileCallbackPrx"]],[["Resm.DataDictHelper"]],[s.ResmError],,],locate:[,,,,,["Resm.DataDictHelper"],[[3],[3]],,[s.ResmError],,]}),o.defineDictionary(s,"ConfMemberDict","ConfMemberDictHelper","Ice.IntHelper","Ice.IntHelper",!0,void 0,void 0),s.AccessSession=o.defineObject(void 0,i.Object,[s.ResSessionBase],1,["::Ice::Object","::Resm::AccessSession","::Resm::ResSessionBase"],-1,void 0,void 0,!1),s.AccessSessionPrx=o.defineProxy(i.ObjectPrx,s.AccessSession.ice_staticId,[s.ResSessionBasePrx]),o.defineOperations(s.AccessSession,s.AccessSessionPrx,{abilityReport:[,,,,,,[["Resm.ReportDictHelper"],["Resm.ConfMemberDictHelper"]],,,,]}),o.defineDictionary(s,"NetworkResult","NetworkResultHelper","Ice.IntHelper","Resm.NetworkStatus",!0,void 0,void 0,i.HashMap.compareEquals),s.NetworkAddress=o.defineStruct((function(e,t,n){this.ip=void 0!==e?e:"",this.port=void 0!==t?t:0,this.glacier2Port=void 0!==n?n:0}),!0,(function(e){e.writeString(this.ip),e.writeShort(this.port),e.writeShort(this.glacier2Port)}),(function(e){this.ip=e.readString(),this.port=e.readShort(),this.glacier2Port=e.readShort()}),5,!1),o.defineDictionary(s,"AccessAddrDict","AccessAddrDictHelper","Ice.IntHelper","Resm.NetworkAddress",!1,void 0,void 0,i.HashMap.compareEquals),s.AccessM=o.defineObject(void 0,i.Object,void 0,1,["::Ice::Object","::Resm::AccessM"],-1,void 0,void 0,!1),s.AccessMPrx=o.defineProxy(i.ObjectPrx,s.AccessM.ice_staticId,void 0),o.defineOperations(s.AccessM,s.AccessMPrx,{register:[,,,,,["Resm.AccessSessionPrx"],[[3],[7],[7],["Resm.IpAddressSeqHelper"]],[["Resm.DataDictHelper"]],[s.ResmError],,],locate:[,,,,,[3],[[3],[3],["Resm.NetworkResultHelper"],[7],[7]],,[s.ResmError],,],getAccessList:[,,,,,["Resm.AccessAddrDictHelper"],[[3]],,,,],sendCmd:[,,,,,,[[7],[7],[7],["Ice.ByteSeqHelper"]],[[7],["Ice.ByteSeqHelper"]],[s.ResmError],,]}),s.NetworkBandwidth=o.defineStruct((function(e,t){this.sendBandWidth=void 0!==e?e:0,this.recvBandWidth=void 0!==t?t:0}),!0,(function(e){e.writeInt(this.sendBandWidth),e.writeInt(this.recvBandWidth)}),(function(e){this.sendBandWidth=e.readInt(),this.recvBandWidth=e.readInt()}),8,!0),o.defineDictionary(s,"FNBandwidthDict","FNBandwidthDictHelper","Ice.StringHelper","Resm.NetworkBandwidth",!1,void 0,void 0,i.HashMap.compareEquals),s.FnSession=o.defineObject(void 0,i.Object,[s.ResSessionBase],1,["::Ice::Object","::Resm::FnSession","::Resm::ResSessionBase"],-1,void 0,void 0,!1),s.FnSessionPrx=o.defineProxy(i.ObjectPrx,s.FnSession.ice_staticId,[s.ResSessionBasePrx]),o.defineOperations(s.FnSession,s.FnSessionPrx,{abilityReport:[,,,,,,[["Resm.ReportDictHelper"],["Resm.FNBandwidthDictHelper"]],,,,]}),s.FnM=o.defineObject(void 0,i.Object,void 0,1,["::Ice::Object","::Resm::FnM"],-1,void 0,void 0,!1),s.FnMPrx=o.defineProxy(i.ObjectPrx,s.FnM.ice_staticId,void 0),o.defineOperations(s.FnM,s.FnMPrx,{register:[,,,,,["Resm.FnSessionPrx"],[[3],[7],[7],["Resm.IpAddressSeqHelper"]],[["Resm.DataDictHelper"]],[s.ResmError],,]}),s.RouteType=o.defineEnum([["UNREACHABLE",0],["DIRECT",1],["FORWARD",2]]),s.RouteScore=o.defineEnum([["BROKEN",0],["BAD",1],["AVAILABLE",2],["PERFECT",3]]),o.defineSequence(s,"IntSeqHelper","Ice.IntHelper",!0),s.Route=o.defineStruct((function(e,t,n,i,r,o,a){this.type=void 0!==e?e:s.RouteType.UNREACHABLE,this.score=void 0!==t?t:s.RouteScore.BROKEN,this.srcIP=void 0!==n?n:"",this.dstIP=void 0!==i?i:"",this.fnNo=void 0!==r?r:0,this.srcFnIP=void 0!==o?o:"",this.dstFnIP=void 0!==a?a:""}),!0,(function(e){s.RouteType.__write(e,this.type),s.RouteScore.__write(e,this.score),e.writeString(this.srcIP),e.writeString(this.dstIP),e.writeInt(this.fnNo),e.writeString(this.srcFnIP),e.writeString(this.dstFnIP)}),(function(e){this.type=s.RouteType.__read(e),this.score=s.RouteScore.__read(e),this.srcIP=e.readString(),this.dstIP=e.readString(),this.fnNo=e.readInt(),this.srcFnIP=e.readString(),this.dstFnIP=e.readString()}),10,!1),o.defineDictionary(s,"RouteMap","RouteMapHelper","Ice.IntHelper","Resm.Route",!1,void 0,void 0,i.HashMap.compareEquals),s.RouteM=o.defineObject(void 0,i.Object,void 0,1,["::Ice::Object","::Resm::RouteM"],-1,void 0,void 0,!1),s.RouteMPrx=o.defineProxy(i.ObjectPrx,s.RouteM.ice_staticId,void 0),o.defineOperations(s.RouteM,s.RouteMPrx,{RouteAllocBatch:[,,,,,["Resm.RouteMapHelper"],[[3],[3],["Resm.IntSeqHelper"]],,,,],RouteAlloc:[,,,,,[s.Route],[[3],[3],[3],["Resm.IntSeqHelper"]],,,,],PathReport:[,,,,,,[[3],["Resm.PathStatusDictHelper"]],,,,],RouteMapGet:[,,,,,["Resm.RouteMapHelper"],[[3],[3]],,,,]}),s.McuSession=o.defineObject(void 0,i.Object,[s.ResSessionBase],1,["::Ice::Object","::Resm::McuSession","::Resm::ResSessionBase"],-1,void 0,void 0,!1),s.McuSessionPrx=o.defineProxy(i.ObjectPrx,s.McuSession.ice_staticId,[s.ResSessionBasePrx]),o.defineOperations(s.McuSession,s.McuSessionPrx,{abilityReport:[,,,,,,[["Resm.ReportDictHelper"]],,,,]}),s.McuM=o.defineObject(void 0,i.Object,void 0,1,["::Ice::Object","::Resm::McuM"],-1,void 0,void 0,!1),s.McuMPrx=o.defineProxy(i.ObjectPrx,s.McuM.ice_staticId,void 0),o.defineOperations(s.McuM,s.McuMPrx,{register:[,,,,,["Resm.McuSessionPrx"],[[3],[7],[7]],[["Resm.DataDictHelper"]],[s.ResmError],,],locate:[,,,,,[3],[[3]],,[s.ResmError],,]}),n.Resm=s}("undefined"!=typeof global&&global.process,"undefined"!=typeof global&&void 0!==global.process?n(218):window.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?t:this)},218:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=218,e.exports=t},7637:function(e,t,n){e=n.nmd(e),function(e,t,n){var i=t("ice").Ice,r=(i.__M,t("Trans/MSPub").MS),o=i.Slice;r.LanTerm=o.defineStruct((function(e,t){this.hostIP=void 0!==e?e:"",this.termID=void 0!==t?t:0}),!0,(function(e){e.writeString(this.hostIP),e.writeShort(this.termID)}),(function(e){this.hostIP=e.readString(),this.termID=e.readShort()}),3,!1),o.defineSequence(r,"TermSeqHelper","MS.LanTerm",!1),r.MSClient=o.defineObject(void 0,i.Object,void 0,1,["::Ice::Object","::MS::MSClient"],-1,void 0,void 0,!1),r.MSClientPrx=o.defineProxy(i.ObjectPrx,r.MSClient.ice_staticId,void 0),o.defineOperations(r.MSClient,r.MSClientPrx,{AudioAllocRaw:[,,,1,,[3],[[r.AudioStreamParam]],,,,],AudioAlloc:[,,,1,,[3],[[r.AudioStreamParam],[r.MediaStreamAddr]],,,,],VideoAllocRaw:[,,,1,,[3],[[r.VideoStreamParam],[1]],,,,],VideoAlloc:[,,,1,,[3],[[r.VideoStreamParam],[1],[r.MediaStreamAddr]],,,,],AudioAllocRawExt:[,,,1,,[3],[[r.AudioStreamParam],["MS.DictStrParamsHelper"]],,,,],AudioAllocRawExt2:[,,,1,,[3],[[r.AudioStreamParam],["MS.DictStrParamsHelper"]],[["MS.DictStrParamsHelper"]],,,],AudioAllocExt:[,,,1,,[3],[[r.AudioStreamParam],[r.MediaStreamAddr],["MS.DictStrParamsHelper"]],,,,],VideoAllocRawExt:[,,,1,,[3],[[r.VideoStreamParam],[1],["MS.DictStrParamsHelper"]],,,,],VideoAllocRawExt2:[,,,1,,[3],[[r.VideoStreamParam],[1],["MS.DictStrParamsHelper"]],[["MS.DictStrParamsHelper"]],,,],VideoAllocExt:[,,,1,,[3],[[r.VideoStreamParam],[1],[r.MediaStreamAddr],["MS.DictStrParamsHelper"]],,,,],Free:[,,,1,,,[[3]],,,,],ModifyPeerAddr:[,,,1,,,[[3],[r.MediaStreamAddr]],,,,],ModifyPeerAddrExt:[,,,1,,,[[3],["MS.DictStrParamsHelper"]],,,,],ModifyIOMode:[,,,1,,,[[3],[r.MediaStreamIOMode.__helper]],,,,],NotifyRTMPStreamPublishFinished:[,,,1,,,[[3]],,,,],StartLanThrough:[,,,1,,,[[3],[3],[7]],,,,],StopLanThrough:[,,,1,,,[[3]],,,,],LanDetect:[,,,1,,,[["MS.TermSeqHelper"]],,,,],EnableSendVideo2Internet:[,,,1,,,[[2]],,,,],DisableSendVideo2Internet:[,,,1,,,[[2]],,,,],EnableSendScreen2Internet:[,,,1,,,,,,,],DisableSendScreen2Internet:[,,,1,,,,,,,],EnableSendFilm2Internet:[,,,1,,,,,,,],DisableSendFilm2Internet:[,,,1,,,,,,,],EnableSendLive2Internet:[,,,1,,,,,,,],DisableSendLive2Internet:[,,,1,,,,,,,]}),r.ClientReport=o.defineObject(void 0,i.Object,void 0,1,["::Ice::Object","::MS::ClientReport"],-1,void 0,void 0,!1),r.ClientReportPrx=o.defineProxy(i.ObjectPrx,r.ClientReport.ice_staticId,void 0),o.defineOperations(r.ClientReport,r.ClientReportPrx,{UpdateClientIP:[,,,1,,,[[7],[3],[7]],,,,],ReportLanNeighbor:[,,,1,,,[["MS.TermSeqHelper"]],,,,],LanMediaStreamFail:[,,,1,,,[[3],[3],[7]],,,,],VideoResolutionReport:[,,,1,,,[[3],[3],[3]],,,,],MediaConnectionBreakReport:[,,,1,,,[[3]],,,,]}),n.MS=r}("undefined"!=typeof global&&global.process,"undefined"!=typeof global&&void 0!==global.process?n(8749):window.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?t:this)},4246:function(e,t,n){e=n.nmd(e),function(e,t,n){var i=t("ice").Ice,r=i.__M,o=i.Slice,s=r.module("MS");s.AudioTransType=o.defineEnum([["ATT_CORP_PRIV",0],["ATT_EIS_ENCRYPT",1],["ATT_RTP_STD",2],["ATT_RTMP",3]]),s.AudioCodecType=o.defineEnum([["ACT_PCMU",0],["ACT_PCMA",1],["ACT_G723",2],["ACT_G729",3],["ACT_AMRWB",4],["ACT_SPEEX",5],["ACT_AAC",6],["ACT_ISAC",7],["ACT_AAC_48K",8],["ACT_OPUS",9],["ACT_RESERV10",10],["ACT_RESERV11",11],["ACT_RESERV12",12],["ACT_RESERV13",13],["ACT_RESERV14",14],["ACT_NULL",15]]),s.MediaStreamIOMode=o.defineEnum([["MSIO_INACTIVE",0],["MSIO_SEND",1],["MSIO_RECV",2],["MSIO_SEND_RECV",3]]),s.AudioStreamParam=o.defineStruct((function(e,t,n,i,r){this.codecType=void 0!==e?e:s.AudioCodecType.ACT_PCMU,this.transType=void 0!==t?t:s.AudioTransType.ATT_CORP_PRIV,this.ioMode=void 0!==n?n:s.MediaStreamIOMode.MSIO_INACTIVE,this.mixerID=void 0!==i?i:0,this.shareListen=void 0!==r&&r}),!0,(function(e){s.AudioCodecType.__write(e,this.codecType),s.AudioTransType.__write(e,this.transType),s.MediaStreamIOMode.__write(e,this.ioMode),e.writeInt(this.mixerID),e.writeBool(this.shareListen)}),(function(e){this.codecType=s.AudioCodecType.__read(e),this.transType=s.AudioTransType.__read(e),this.ioMode=s.MediaStreamIOMode.__read(e),this.mixerID=e.readInt(),this.shareListen=e.readBool()}),8,!1),s.VideoContentType=o.defineEnum([["VCT_CAMERA",0],["VCT_SCREEN",1],["VCT_FILM",2],["VCT_LIVE",3]]),s.VideoStreamParam=o.defineStruct((function(e,t,n,i,r,o,a,c){this.contentType=void 0!==e?e:s.VideoContentType.VCT_CAMERA,this.srcTermID=void 0!==t?t:0,this.cameraID=void 0!==n?n:0,this.ioMode=void 0!==i?i:s.MediaStreamIOMode.MSIO_INACTIVE,this.attachToMSID=void 0!==r?r:0,this.subscribeFlag=void 0!==o&&o,this.isPeerSourceTerm=void 0!==a&&a,this.screenAuthKey=void 0!==c?c:""}),!0,(function(e){s.VideoContentType.__write(e,this.contentType),e.writeShort(this.srcTermID),e.writeShort(this.cameraID),s.MediaStreamIOMode.__write(e,this.ioMode),e.writeInt(this.attachToMSID),e.writeBool(this.subscribeFlag),e.writeBool(this.isPeerSourceTerm),e.writeString(this.screenAuthKey)}),(function(e){this.contentType=s.VideoContentType.__read(e),this.srcTermID=e.readShort(),this.cameraID=e.readShort(),this.ioMode=s.MediaStreamIOMode.__read(e),this.attachToMSID=e.readInt(),this.subscribeFlag=e.readBool(),this.isPeerSourceTerm=e.readBool(),this.screenAuthKey=e.readString()}),13,!1),s.NetworkAddress=o.defineStruct((function(e,t){this.ip=void 0!==e?e:"",this.port=void 0!==t?t:0}),!0,(function(e){e.writeString(this.ip),e.writeShort(this.port)}),(function(e){this.ip=e.readString(),this.port=e.readShort()}),3,!1),s.MediaStreamAddr=o.defineStruct((function(e,t){this.netAddr=void 0!==e?e:new s.NetworkAddress,this.MSID=void 0!==t?t:0}),!0,(function(e){s.NetworkAddress.write(e,this.netAddr),e.writeInt(this.MSID)}),(function(e){this.netAddr=s.NetworkAddress.read(e,this.netAddr),this.MSID=e.readInt()}),7,!1),s.ConferenceInfo=o.defineStruct((function(e,t,n,i){this.confId=void 0!==e?e:0,this.isPeerTerminal=void 0!==t&&t,this.peerTermId=void 0!==n?n:0,this.peerTermName=void 0!==i?i:""}),!0,(function(e){e.writeInt(this.confId),e.writeBool(this.isPeerTerminal),e.writeShort(this.peerTermId),e.writeString(this.peerTermName)}),(function(e){this.confId=e.readInt(),this.isPeerTerminal=e.readBool(),this.peerTermId=e.readShort(),this.peerTermName=e.readString()}),8,!1),o.defineDictionary(s,"DictStrParams","DictStrParamsHelper","Ice.StringHelper","Ice.StringHelper",!1,void 0,void 0),n.MS=s}("undefined"!=typeof global&&global.process,"undefined"!=typeof global&&void 0!==global.process?n(8749):window.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?t:this)},8749:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=8749,e.exports=t},9327:()=>{!function(e,t,n){e.__crAttrClass=class{constructor(){this.initIceCallback(),this.initSDKInterface()}initIceCallback(){this.ICECallback={notifyMeetingAttrsChanged:(e,t,n)=>{console.crlog("[Attr] notifyMeetingAttrsChanged");const i=this.ConferenceToData(e),r=this.ConferenceToData(t);CRVideo_NotifyMeetingAttrsChanged.target(i,r,n)},notifyUserAttrsChanged:(e,t,n,i)=>{console.crlog("[Attr] notifyUserAttrsChanged: "+e);const r=this.ConferenceToData(t),o=this.ConferenceToData(n);CRVideo_NotifyUserAttrsChanged.target(e,r,o,i)}}}initSDKInterface(){e.CRVideo_GetMeetingAttrs=(t,n)=>{if(console.crlog("[Attr] CRVideo_GetMeetingAttrs start..."),!(t instanceof Array))return console.crlog("[Attr] CRVideo_GetMeetingAttrsFail parameter error"),void e.CRVideo_GetMeetingAttrsFail.target(e.CRVideo_ERR_DEF.MEETPARAM_ERR,n);Cr.conferenceRequest("getMeetingAttrs",t).then((t=>{const i=this.ConferenceToData(t[0]);console.crlog("[Attr] CRVideo_GetMeetingAttrsSuccess"),e.CRVideo_GetMeetingAttrsSuccess.target(i,n)})).catch((t=>{console.crlog("[Attr] CRVideo_GetMeetingAttrsFail"),e.CRVideo_GetMeetingAttrsFail.target(t,n)}))},e.CRVideo_GetMeetingAllAttrs=t=>{console.crlog("[Attr] CRVideo_GetMeetingAllAttrs start..."),Cr.conferenceRequest("getMeetingAllAttrs").then((n=>{const i=this.ConferenceToData(n[0]);console.crlog("[Attr] CRVideo_GetMeetingAllAttrsSuccess"),e.CRVideo_GetMeetingAllAttrsSuccess.target(i,t)})).catch((n=>{console.crlog("[Attr] CRVideo_GetMeetingAllAttrsFail"),e.CRVideo_GetMeetingAllAttrsFail.target(n,t)}))},e.CRVideo_SetMeetingAttrs=(t,n,i)=>{console.crlog("[Attr] CRVideo_SetMeetingAttrs start");try{const r=JSON.parse(t);if("object"!=typeof r)throw"[Attr] attrs not is object";const o=this.checkLength(r);if(o)throw o;const s=this.createStringMap(r);Cr.conferenceRequest("setMeetingAttrs",s,n).then((()=>{console.crlog("[Attr] CRVideo_SetMeetingAttrsSuccess"),e.CRVideo_SetMeetingAttrsRslt.target(e.CRVideo_ERR_DEF.NOERR,i)})).catch((t=>{console.crlog("[Attr] CRVideo_SetMeetingAttrsFail"),e.CRVideo_SetMeetingAttrsRslt.target(t,i)}))}catch(t){return console.crlog(`[Attr] SetMeetingAttrs fail: ${t}`),void e.CRVideo_SetMeetingAttrsRslt.target(e.CRVideo_ERR_DEF.UNKNOWERR,i)}},e.CRVideo_AddOrUpdateMeetingAttrs=(t,n,i)=>{console.crlog("[Attr] AddOrUpdateMeetingAttrs start");try{const r=JSON.parse(t);if("object"!=typeof r)throw"[Attr] attrs not is object";const o=this.checkLength(r);if(o)throw o;const s=this.createStringMap(r);Cr.conferenceRequest("addOrUpdateMeetingAttrs",s,n).then((()=>{console.crlog("[Attr] CRVideo_AddOrUpdateMeetingAttrs Success"),e.CRVideo_AddOrUpdateMeetingAttrsRslt.target(e.CRVideo_ERR_DEF.NOERR,i)})).catch((t=>{console.crlog("[Attr] CRVideo_AddOrUpdateMeetingAttrs Fail"),e.CRVideo_AddOrUpdateMeetingAttrsRslt.target(t,i)}))}catch(t){return console.crlog(`[Attr] CRVideo_AddOrUpdateMeetingAttrs fail: ${t}`),void e.CRVideo_AddOrUpdateMeetingAttrsRslt.target(e.CRVideo_ERR_DEF.UNKNOWERR,i)}},e.CRVideo_DelMeetingAttrs=(t,n,i)=>{console.crlog("[Attr] CRVideo_DelMeetingAttrs start"),t instanceof Array?Cr.conferenceRequest("delMeetingAttrs",t,n).then((()=>{console.crlog("[Attr] CRVideo_DelMeetingAttrs Success"),e.CRVideo_DelMeetingAttrsRslt.target(e.CRVideo_ERR_DEF.NOERR,i)})).catch((t=>{console.crlog("[Attr] CRVideo_DelMeetingAttrs Fail"),e.CRVideo_DelMeetingAttrsRslt.target(t,i)})):e.CRVideo_DelMeetingAttrsRslt.target(e.CRVideo_ERR_DEF.MEETPARAM_ERR,i)},e.CRVideo_ClearMeetingAttrs=(t,n)=>{console.crlog("[Attr] CRVideo_ClearMeetingAttrs start..."),Cr.conferenceRequest("clearMeetingAttrs",t).then((()=>{console.crlog("[Attr] CRVideo_ClearMeetingAttrsRslt Success"),e.CRVideo_ClearMeetingAttrsRslt.target(e.CRVideo_ERR_DEF.NOERR,n)})).catch((t=>{console.crlog("[Attr] CRVideo_ClearMeetingAttrsRslt Fail"),e.CRVideo_ClearMeetingAttrsRslt.target(t,n)}))},e.CRVideo_GetUserAttrs=(t,n,i)=>{if(console.crlog("[Attr] CRVideo_GetUserAttrs start..."),!(t instanceof Array&&t.length<=50&&(!n||n&&n instanceof Array)))return console.crlog("[Attr] CRVideo_GetUserAttrsFail parameter error"),void e.CRVideo_GetUserAttrsFail.target(e.CRVideo_ERR_DEF.MEETPARAM_ERR,i);let r,o="getUserAttrs";n&&n.length>0&&(o="getUserAttrsWithKey",r=n),Cr.conferenceRequest(o,t,r).then((t=>{const n=this.getUserData(t[0]);console.crlog("[Attr] CRVideo_GetUserAttrsSuccess"),e.CRVideo_GetUserAttrsSuccess.target(n,i)})).catch((t=>{console.crlog("[Attr] CRVideo_GetUserAttrsFail"),e.CRVideo_GetUserAttrsFail.target(t,i)}))},e.CRVideo_SetUserAttrs=(t,n,i,r)=>{console.crlog("[Attr] CRVideo_SetUserAttrs start");try{const s=JSON.parse(n);if("object"!=typeof s)throw"attrs is not object";const a=this.checkLength(s);if(a)throw a;var o=new Conference.StringStringMap;for(let e in s)o.set(e,s[e]);Cr.conferenceRequest("setUserAttrs",t,o,i).then((()=>{console.crlog("[Attr] CRVideo_SetUserAttrsRslt Success"),e.CRVideo_SetUserAttrsRslt.target(e.CRVideo_ERR_DEF.NOERR,r)})).catch((t=>{console.crlog(`[Attr] CRVideo_SetUserAttrsRslt Fail: ${error}`),e.CRVideo_SetUserAttrsRslt.target(t,r)}))}catch(t){return console.crlog(`[Attr] CRVideo_SetUserAttrsRslt fail: ${t}`),void e.CRVideo_SetUserAttrsRslt.target(e.CRVideo_ERR_DEF.UNKNOWERR,r)}},e.CRVideo_AddOrUpdateUserAttrs=(t,n,i,r)=>{console.crlog("[Attr] CRVideo_AddOrUpdateUserAttrs start");try{const o=JSON.parse(n);if("object"!=typeof o)throw"attrs not is object";const s=this.checkLength(o);if(s)throw s;const a=new Conference.StringStringMap;for(let e in o)a.set(e,o[e]);Cr.conferenceRequest("addOrUpdateUserAttrs",t,a,i).then((()=>{console.crlog("[Attr] CRVideo_AddOrUpdateUserAttrsRslt Success"),e.CRVideo_AddOrUpdateUserAttrsRslt.target(e.CRVideo_ERR_DEF.NOERR,r)})).catch((t=>{console.crlog("[Attr] CRVideo_AddOrUpdateUserAttrsRslt Fail"),e.CRVideo_AddOrUpdateUserAttrsRslt.target(t,r)}))}catch(t){return console.crlog(`[Attr] CRVideo_AddOrUpdateUserAttrsRslt fail: ${t}`),void e.CRVideo_AddOrUpdateUserAttrsRslt.target(e.CRVideo_ERR_DEF.UNKNOWERR,r)}},e.CRVideo_DelUserAttrs=(t,n,i,r)=>{console.crlog("[Attr] CRVideo_DelUserAttrs start"),n instanceof Array?Cr.conferenceRequest("delUserAttrs",t,n,i).then((()=>{console.crlog("[Attr] CRVideo_DelUserAttrs Success"),e.CRVideo_DelUserAttrsRslt.target(e.CRVideo_ERR_DEF.NOERR,r)})).catch((t=>{console.crlog("[Attr] CRVideo_DelUserAttrs Fail"),e.CRVideo_DelUserAttrsRslt.target(t,r)})):e.CRVideo_DelUserAttrsRslt.target(CONSTANT.CRVideo_MEETPARAM_ERR,r)},e.CRVideo_ClearUserAttrs=(t,n,i)=>{console.crlog("[Attr] CRVideo_ClearUserAttrs start..."),"string"==typeof t&&(t=[t]),t instanceof Array?Cr.conferenceRequest("clearUserAttrs",t,n).then((()=>{console.crlog("[Attr] CRVideo_ClearUserAttrsRslt Success"),e.CRVideo_ClearUserAttrsRslt.target(e.CRVideo_ERR_DEF.NOERR,i)})).catch((t=>{console.crlog("[Attr] CRVideo_ClearUserAttrsRslt Fail"),e.CRVideo_ClearUserAttrsRslt.target(t,i)})):e.CRVideo_ClearUserAttrsRslt.target(CONSTANT.CRVideo_MEETPARAM_ERR,i)},e.CRVideo_ClearAllUserAttrs=(t,n)=>{console.crlog("[Attr] CRVideo_ClearAllUserAttrs start..."),Cr.conferenceRequest("clearAllUserAttrs",t).then((()=>{console.crlog("[Attr] CRVideo_ClearAllUserAttrsRslt Success"),e.CRVideo_ClearAllUserAttrsRslt.target(e.CRVideo_ERR_DEF.NOERR,n)})).catch((t=>{console.crlog("[Attr] CRVideo_ClearAllUserAttrsRslt Fail"),e.CRVideo_ClearAllUserAttrsRslt.target(t,n)}))}}checkLength(e){for(let t in e){if(t.length>64)return"[MeetingAttr] key Exceed maximum length";if(e[t].length>8192)return"[MeetingAttr] value Exceed maximum length"}return!1}ConferenceToData(e){const t={};return e.forEach(((e,n)=>{t[e]=n})),t}getUserData(e){const t={};return e.forEach(((e,n)=>{t[e]={},n.forEach(((n,i)=>{t[e][n]=i}))})),t}createStringMap(e){const t=new Conference.StringStringMap;for(let n in e)t.set(n,e[n]);return t}},e.__Rtc.CRRTCAttr=new e.__crAttrClass,e.CRVideo_GetMeetingAttrsSuccess=new n.CbProxy("CRVideo_GetMeetingAttrsSuccess"),e.CRVideo_GetMeetingAttrsFail=new n.CbProxy("CRVideo_GetMeetingAttrsFail"),e.CRVideo_GetMeetingAllAttrsSuccess=new n.CbProxy("CRVideo_GetMeetingAllAttrsSuccess"),e.CRVideo_GetMeetingAllAttrsFail=new n.CbProxy("CRVideo_GetMeetingAllAttrsFail"),e.CRVideo_SetMeetingAttrsRslt=new n.CbProxy("CRVideo_SetMeetingAttrsRslt"),e.CRVideo_AddOrUpdateMeetingAttrsRslt=new n.CbProxy("CRVideo_AddOrUpdateMeetingAttrsRslt"),e.CRVideo_DelMeetingAttrsRslt=new n.CbProxy("CRVideo_DelMeetingAttrsRslt"),e.CRVideo_ClearMeetingAttrsRslt=new n.CbProxy("CRVideo_ClearMeetingAttrsRslt"),e.CRVideo_GetUserAttrsSuccess=new n.CbProxy("CRVideo_GetUserAttrsSuccess"),e.CRVideo_GetUserAttrsFail=new n.CbProxy("CRVideo_GetUserAttrsFail"),e.CRVideo_SetUserAttrsRslt=new n.CbProxy("CRVideo_SetUserAttrsRslt"),e.CRVideo_AddOrUpdateUserAttrsRslt=new n.CbProxy("CRVideo_AddOrUpdateUserAttrsRslt"),e.CRVideo_DelUserAttrsRslt=new n.CbProxy("CRVideo_DelUserAttrsRslt"),e.CRVideo_ClearUserAttrsRslt=new n.CbProxy("CRVideo_ClearUserAttrsRslt"),e.CRVideo_ClearAllUserAttrsRslt=new n.CbProxy("CRVideo_ClearAllUserAttrsRslt"),e.CRVideo_NotifyMeetingAttrsChanged=new n.CbProxy("CRVideo_NotifyMeetingAttrsChanged"),e.CRVideo_NotifyUserAttrsChanged=new n.CbProxy("CRVideo_NotifyUserAttrsChanged")}(window,Ice,CRVideo)},724:()=>{((e,t,n)=>{class i{constructor(e){this._id=n.generateUUID(),this._height="100%",this._width="100%",this._left="0px",this._top="0px",this._handler=null,this._isPlaying=!1,this.initDOM(e)}initDOM(e){const t=document.createElement("div");t.style.width="100%",t.style.height="100%",t.style.position="relative",t.style.overflow="hidden",this._handler=t;const n=document.createElement("div");n.style.position="absolute",n.style.left="20px",n.style.top="20px",n.style.padding="0 10px",n.style.height="30px",n.style.lineHeight="30px",n.style.color="#fff",n.style.fontSize="12px",n.style.zIndex="2",n.style.fontWeight="800",n.style.backgroundColor="rgb(0, 0, 0)",n.style.borderRadius="15px",n.style.filter="alpha(opacity:50)",n.style.display="none",this._handler.appendChild(n),this._nicknameEle=n;const i=document.createElement("video");i.style.width="100%",i.style.height="100%",i.autoplay=!0,i.muted=!0,i.playsInline=!0,i.playsinline=!0,"iOS"!=__Rtc.CRBrowser.curBrowserCfg.platform&&"media"!=e||(i.controls=!0);const r=!!__Rtc.CRBrowser.weixin.isWeixin&&__Rtc.CRBrowser.weixin.weixinVer.split(".");if(r&&+`${r[0]}${r[1]}${r[2]}`>=8014){const e=document.createElement("img");e.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAACWCAYAAAA8AXHiAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAA6TSURBVHhe7Z0JcFXVGccTIWoVk3fvOee+BAJhiYDYgkqnWrdalVLrYEEdKy5oXREwiBUruOAy2lFQAWlJ3SibA6NMBATFSUBZSyKC1Q4FAoqhFAIaAgRCEkK/793zxLwcwkvylnvO/f4zv3F59917zvn+uWd5Z0nxsdratp1t285FthA3Ag8yJp6xOZ9iczEbWAAU2YyvgH9+1gD3/xUBeA1cy6eEvgv3CN0L7wn3xme4jyIZqV69ep3KOe9u2+J6MMETwAybieVgiuKQUeJDMTzjU8b5dHjeWHw2pgHTIpNF0lBt0oXoxphzK7xJJkGQC4GSHwU9WWAaCi0mJkLabsE0YlrdJJO8qjR4I/QFIz0CwXtfBlEVXC+BaSzANEPaz4c8UNXpFWH1YnH+MFQ7iyKCph+hPPBRkKezZfZIiVRWVtYZ0EAeBMGY2Sg4hsC4Mx2qy4GYV5ltUrwkhMiEv+g8KHjskSkDYiCF0NMc4ThOUBYDKVYKBAI52JuDHtYqRcH7AsYg7zYfi2Uhi4XUUkFbI8s1lFitKmw/4pYFH4tvb1lMpGgVDAbPxNe/cnCScGFiORNiOJaVLDZSEzolwPm18Nr/SFmYRCOgrD6EXvE1WHZuEZIaCBqnXaGg8iMLjoiaqRnBYGdZnCRQmm2LO6DaW6koLKI5YNMByhLK1N8DrZbVviNj4i1lIREth4k35I/gvlMq9PiugUJY1qhQiFixzBKiP5a1W+SGKycn53TsLkPGdfgtT3dKoGock5ube5osfjOF41KM838oCoCII1Dm04wduQ84Tm9oXNIwQrLAYQkr+FMZDjPEGLuKBjs9AA6qMnalDIvesji/iXHxT2VGiYQTioUQN8rw6Ckw1T2QGWqkew9o1PO7ZJj0EmPO0FAG1Bkjkk8JxkiGSwulWozdjwmPyAjhPUowVhgzN3TeVSq+YjHBERkgvAuOdd2JsXND6EGF1tTFd0kVER+Kcaq3DKO3BN3YX1PvT18wdpzzX8lwekOWFTwXx0hUCSY0golPbTvzHBnW5CozM1NAgvRfekW4MPFBu6wsLsObLPVNo2kvBsLEGxDcNDfGSZDFxGhlwgjtwUXAMsyJFWPOVZAAGlYwlxLskMlwJ0busixfLRr1K4WJnG7Txub8b4pEECZi8ykYczf0cRTOVlAmgDAWjLkMf3xk23YH6DF8ono4YTTLsPkjbRB74YZhiocSfoCJl6UNYiuceah8IOEb4K11ubRDbOSurBHzIx9E+A1ekBLLFT84rUL9IMJ32GKItEXrlJ6eDT1OsbTRAwi/UpSRkWFJe7Rc8Pp7SHFzws/YYoS0R8vUzp25QNNhiIaAJ9Ab0ibNF72tiBPS0rcW1KMBuAFt2kGciGWWZWVIu0QvW5jVE7zwoou/HD9+QtmiRYu+W7r0k4q5c+eW540cubVjp86fq64noqAFPcS2UI9+oLyZZnTI7vj5jBkzdx05cqT+mEK7du068tCoUduEE1R+n2iSBegV1zJRSM61Ut1IK8BU69asWVMpPdSk1q1bt7/fb/r/W3Uf4sQwxq6Qtjm5oNGOR6spb6QTU/Pzd0rfRKWampr62e+8s7tHj57rVfcjGsMYnyxt07TkJD7t1wZ279Fzw4EDB+qkZ5qlvXv31jz22Jivg5nt16nuTRyHcbE2qj3n4W2FK5mVN9GJ+4c+UCp90mJt2PDFgQEDrtuouj/xI9wNdZvUKdBon6P8sma8+NJLZdIfrRJWj+++9155z3N6bVA9hwgxG73jWkgheKV1g4uMWCAx4ZVXdkhvxEQVFRW1T40b940TzKTqsTElTe4xD+2rexVf0pJYGyusjRs3Hhx0/Q3/UT3T35x4v61UuMCY8//iZSxUbW1t/fz5C/b27nPeF6pn+xHctFj6qKFwmY9Jm3rE01hhVVZW1j7//Avftu+Q7fvqEbyzJku1NN/i/HeqL+hKIowV1ubNm6tuunnwJi4cZVr8gmWFDixoKIuJp1UX60oijYU6evToscWLF3933gV9fVw98ielnX4Qtq+MmtOeaGOFVVVVVTdhwstl+HOSKl2GU4Beci0FwtF2HEFVXKgtyTJWWFu3bj08ZMgdm/1UPWIbPRgMOtJW7m58qgt1JtnGQmH1WFhY9D1O2VGl0UTgJXV8V0DGxDDVRTrjBWOFhdXj5Nde25HdsZPxc78abPENxpqkukhnvGSssL4tKzt81z33blGl1xSgE/iKtFVKiimT+n6MF40V1ooVKyouufQyU6tHnPwHprLtdBzcUlygNV42Furw4cNH8/Nf39m5S1ejqkf0khCiHfYIu6su0B2vGyusnTt3Vg8bPrzUpKnR4KmzjZmGHIkuxkLV19cfW7VqdeUVV171lSovuhGarhxg7BbVh7qjk7HCqq6urn972rRdXbp203pqtMX5zcYuStXRWGHt3l1eo/fKIZ6HQw3PqT/UG52NhcLq8bPP1u3v3/8a7VYOgaeeTmHcmaz6UHd0N1ZYuB5y1uzZu3Nzu2tTPYKxJoKxzDxV3hRjhbV9+/bDv7jwl/9S5dVrMMbfxsHRd1Qf6o5pxkKVlpYe0mRLgNn4xnpX8YH2mGgs1IsvvlSmyq+nYGIuGus95YeaY6qxNm/ZcsjrU3HQU2QszYQ/BXl9nIuMpaHq6urqc7v38PTiWTKWhtqzZ0+N11cFhY1FjXeNtHDhwr2q/HoKbLzTcIM+qq6uPqrJD9Wh4QYaINVAOH/+qafGfaPKq9ewmHgLjEU/6XhduF9XXt7Irap8ehH3Jx0mnlV9qDsmGCv0O+GsWbt79DxHqy2UOHfG0bQZj2rt2rWVV1/dT889UYUYQRP9PKYdO3ZUPzBseKnOC11DE/0YCxq3WBXRzVgHDx6smzxlyn87de6i/eKK0KJVWkyRXOFI+pIlS77TZUpMFJQIIXLhjcXOouVfydGmTZuqBg++ZZMq/boCXlodDAbPdNcW0oLVhGrfvn21zzz77HZDt/ueHzIVymLiVcUFWuNFY+EOzHPmzN1t+A7ME6StQkecDFVcoDVeMhYujCgpKdFyYURzgTb7fdJWoW2MrlBdpDNeMRaudB456uGtfjkEKsD5ZdJW5m1siyTbWIcOHTo6dWr+Tt0XnzYH7ARmRpy8iltFFkReqDPJMhZWe0VFRRUXXXyJbzZbC8O4M0/66bhwY1LVxbqSDGNtKS09dNvtQzar0uMP+OPSTsdlCfFb9cV6kkhj4fDBCy/8hfZ7t51+0k7HhXWjSQOliTBWTW1t/bx58/b8rHcf359QgQOjZ7Vvz6SdGopxPl31JR2Jp7GwHbV+/foDA677PR05J2FCvCVt1FhQRxpxViESL2OVl5cf+dMjo7+mU8AiaOrMwoxgsAtcRMfKKYTzzd98883/+Wn4oBk0fawcCA/CNGJxRawOwsRqb/ny5RWXXna574YPoofPRO+4FjqBbCHuVH9ZL4Y+MKzVR/du27bt0B/vumeL3w9fOhmMidulfU4sPDgaWvjaH3+C88QPVlW16LDx/fv3140fP6HMDxv+txb8xabBMSdNCY+8V91EN96ANpH0SlSqq6s7tmDhwr19zruADriMEnhbvSptc3KZcrYOvnGKi4srpW+a1JdffnVw4MBBNHzQTDjnl0vbRKW20IhfqLqRbuAc8jlz5pbjXCjpoQYqLy+vGTNmLA0ftAyc1NfGtUyUsm0xRHEjbYFe3VcTJ03a8fHHH3+/YuXKfQUFBXtGP/ro16adDJFIGHNulXaJXpZlZcCXl0XejCAkRXhcjrRL82Rznqe4IUFgo324tEnz1S4zU0Bba7nqxoSvWZaenm5Lm7RM9NYiImnV2yqs9PRsG262NPLmhG8pzMjICEh7tE7QQzTiZx6i9UT18020ysnJOR1uOj/yIYTf4AUpubmnSVvERqZuHkJET3NH2aOWxcRE1QMJH8DEy9IGsZdt2x3gAZ8qH0yYCxOfwNsqS9ogPoIHDFY+nDAWi/ObZPjjqrbwsKmRDydMhf8VYt68H5pbqlCVSGNbfqAQJ37KsCdGtuP0gwcbsfCCUFLCGLtShjuhSmVM/FmRIMIALCZGY4zdUCdavXqdyhifpkoYoS+ho3dT+qbJKCdHWAfbjH+oSiChIUwsjnpxRLwVcJzeYK6VyoQS+sD4CisYPFeG1RuCnuLVJiwb8yu4jAsX0chweksW53+ARBZHJprwPMWJGgRtqVIhgfcpEk54lxKb87sxdm4IvatUmzujFBkgvIgtRmDM3NB5X6mcczKXt8E3VR7Gyg2ZPkq1mHO/mwFlxojkUYJNFhknLZWKx9ZRb9E7YCzAVINlfPSWJUR/m/FVqowSCQTHGlUb0OosaHOdzxhfoswwEXcsKPuAEH1kOMySnG4zKzLTRLzhMxhj7WUYzFR2dvZPIKPj1AVAxBjs+T2Bq6xk8RuvVPgLGkDz5+OIO0/9Wixrt8h9pEBmZg5Nu4k9OO3FsrI6yWL2rdLgL+tumh0RA0K9vtB+68mdS+UlCSG6wev7dWWBESeHib87jtNVFicpQqdg24uGJaIHyuqjgNuWanqfdVJoc92zbCEexIlnqsIkACwbIUb8cGI8KXrh2At0l59kXKxWFq4PccuCPw7t0viuTPaDAoFAjmswx7c/CzHOV9k2fxzLQhYLKVbCv1Iw2Ego6KLIgjeYQmwWJHzhqB+VlZV1hm07g6DQZ0YEwRjg7TydMWcg5lVmm5RIQTush8X5w9DdXqQKkFaE8sBHwZu5u8weyQNKA5P9nDExGoL0PqDDBENM4/uQ5kfATOdDHtq6WSF5VW2gTZILVcltELRJEDxsk3nBaJiGIkwTnuqQLkQ3TKubZJJ2ys3NPQ2rTGgE34C9SwjuLDlGFk+zlUDVhnvkQzuQP4HPxjRgWmSySIYqDX+otYS4BNfUYW8T3iTP408jwBz498XwT5x9oVonWRz6DNtEcC38d37ou3APvFfonu6PwD79zS4l5f+L9kY9CrI2iQAAAABJRU5ErkJggg==",e.style.position="absolute",e.style.width="20%",e.style.left="50%",e.style.top="50%",e.style.transform="translate(-50%, -50%)",e.style.transition="all 0.8s ease",e.style.zIndex="3",this._playBtnImg=e,this._handler.appendChild(e),e.onclick=e=>{e.stopPropagation(),console.crlog(`[UI] ${this._id} videoPlayImg onclick`),this._isPlaying||i.play()}}this._handler.appendChild(i),this._videoEle=i,i.onplaying=e=>{console.crlog(`[UI] ${this._id} onplaying`),this._playBtnImg&&(this._playBtnImg.style.opacity=0),this._isPlaying=!0},i.onplay=e=>{console.crlog(`[UI] ${this._id} onplay`),this._playBtnImg&&(this._playBtnImg.style.opacity=0),this._isPlaying=!0},i.onpause=e=>{console.crlog(`[UI] ${this._id} onpause`),this._playBtnImg&&(this._playBtnImg.style.opacity=1),this._isPlaying=!1},i.onload=e=>{console.crlog(`[UI] ${this._id} onload`)},i.onerror=e=>{console.crlog(`[UI] ${this._id} onerror`),this._isPlaying=!1},i.onended=e=>{console.crlog(`[UI] ${this._id} onended`),this._isPlaying=!1},i.onclick=e=>{e.stopPropagation(),__Rtc.CRBrowser.curBrowserCfg.isMobile&&i.srcObject&&i.srcObject.active&&i.play()}}id(e){if(void 0===e)return this._id;this._id=e}height(e){if(void 0===e)return this._handler.style.height;this._handler.style.height=e}width(e){if(void 0===e)return this._handler.style.width;this._handler.style.width=e}left(e){if(void 0===e)return this._handler.style.left;this._handler.style.left=e}top(e){if(void 0===e)return this._handler.style.top;this._handler.style.top=e}handler(){return this._handler}show(){try{console.crlog(`[UI] Container:${this._id}, show()`)}catch(e){console.error(e)}this._handler.style.display="block","video"==this.type&&__Rtc.CRRTCRemoteVideo.updateSubscribeVideo()}hide(){try{console.crlog(`[UI] Container:${this._id}, hide()`)}catch(e){console.error(e)}this._handler.style.display="none","video"==this.type&&__Rtc.CRRTCRemoteVideo.updateSubscribeVideo()}isPicEmpty(){return this._videoEle.srcObject?1:0}setNickNameStyle(e){try{console.crlog(`[UI] Container:${this._id}, setNickNameStyle(${JSON.stringify(e)})`)}catch(e){console.error(e)}this.nickNameStyle=e;const t=this._nicknameEle;if(null!=t&&e&&"object"==typeof e)for(var n in e)t.style[n]=e[n]}setNickNameContent(e){console.crlog(`[UI] Container:${this._id}, setNickNameContent(${e})`);const t=this._nicknameEle;null!=t&&(t.innerHTML=e),this.nickNameContent=e}setVisibleNickName(e){try{console.crlog(`[UI] Container:${this._id}, setVisibleNickName(${e})`)}catch(e){console.error(e)}const t=this._nicknameEle;t.style.display=e?"block":"none"}setVideoProp(e){try{console.crlog(`[UI] Container:${this._id}, setVideoProp(${JSON.stringify(e)})`)}catch(e){console.error(e)}try{const t=this._videoEle;if(e)for(let n in e)if("style"==n)for(let i in e[n])t.style[i]=e[n][i];else t[n]=e[n]}catch(e){console.error(e)}}dblClickFullScreen(e){try{console.crlog(`[UI] Container:${this._id}, dblClickFullScreen(${e})`)}catch(e){console.error(e)}const t=this._videoEle;let n=!1;return void 0!==e?e&&0==t.controls?(t.ondblclick=function(){this.webkitRequestFullScreen&&0==t.controls?this.webkitRequestFullScreen():this.mozRequestFullScreen&&0==t.controls?this.mozRequestFullScreen():this.msRequestFullScreen&&0==t.controls&&this.msRequestFullScreen()},n=!0):e?t.controls&&(n=!1):(t.ondblclick=null,n=!1):n=!!t.ondblclick,n}savePic(t){try{console.crlog(`[UI] Container:${this._id}, savePic(${t})`)}catch(e){console.error(e)}let n="png";if(!t)return;switch(t){case t.indexOf(".png")>-1:n="png";break;case t.indexOf(".jpg")>-1:n="jpg";break;case t.indexOf(".jpeg")>-1:n="jpeg";break;case t.indexOf(".bmp")>-1:n="bmp";break;case t.indexOf(".gif")>-1:n="gif";break;default:n="png"}const i=this._videoEle;if(null==i.srcObject||0==i.srcObject.active)return console.crlog(`[UI] Container:${this._id}, savePic fail, this video have not videoStream!`);const r=e.canvas=document.createElement("canvas");r.width=i.videoWidth,r.height=i.videoHeight,r.getContext("2d").drawImage(i,0,0,r.width,r.height);let o=r.toDataURL("image/"+n).split(","),s=o[0].match(/:(.*?);/)[1],a=atob(o[1]),c=a.length,l=new Uint8Array(c);for(;c--;)l[c]=a.charCodeAt(c);const d=new Blob([l],{type:s}),u=e.URL.createObjectURL(d),h=document.createElement("a");h.style.display="none",h.href=u,h.download=t,document.body.appendChild(h),h.click(),setTimeout((function(){document.body.removeChild(h),e.URL.revokeObjectURL(u)}),1e3)}savePicToBase64(t,n){try{console.crlog(`[UI] Container:${this._id}, savePicToBase64(${t},${JSON.stringify(n)})`)}catch(e){console.error(e)}const i=this._videoEle;if(null==i.srcObject||0==i.srcObject.active)return console.crlog(`[UI] Container:${this._id}, savePic fail, this video have not videoStream!`);const r=e.canvas=document.createElement("canvas");r.width=n&&n.width?n.width:i.videoWidth,r.height=n&&n.height?n.height:i.videoHeight,r.getContext("2d").drawImage(i,0,0,r.width,r.height);return r.toDataURL("image/"+t)}keepAspectRatio(e){}}class r extends i{constructor(e){super(),this._videoID=-1,this.type="video"}getVideoID(){return this._videoID}clear(){console.crlog(`[UI] Container:${this._id}, clear()`),this._videoEle&&(this._videoEle.srcObject=null)}setVideo(e,t,n){t=null==t?-1:t,n=null==n?0:n,console.crlog(`[UI] Video Container:${this._id}, setVideo(${e},${t},${n})`);const i=this._videoID,r=this._userID||"";if(this._userID=e,this._videoID=t,this._ssVal=n,0==t&&e!==CRVideo.userInfo.userId&&-1!=i)return __Rtc.CRRTCRemoteVideo.unSubscibevideo(r,i),void this.clear();const o=CRVideo.allMemberInfo.find((t=>t.userId==e));this.nickNameContent?this._nicknameEle.innerHTML=this.nickNameContent:this._nicknameEle.innerHTML=o?o.nickname:e;__Rtc.CRRTCUI.videoContainerList.find((e=>e._id==this._id))||__Rtc.CRRTCUI.videoContainerList.push(this),e==CRVideo.userInfo.userId?__Rtc.CRRTCLocalVideo.refreshLocalContainerSrc(this):(o&&o.defaultCam&&(-1===t?__Rtc.CRRTCRemoteVideo.updateConnectList(o.termId,o.defaultCam,this):__Rtc.CRRTCRemoteVideo.updateConnectList(o.termId,t,this),__Rtc.CRRTCRemoteVideo.updateSubscribeVideo()),__Rtc.CRRTCRemoteVideo.refreshContainerSrc(this))}destroy(){console.crlog(`[UI] Video Container:${this._id}, destroy()`),this._videoEle.srcObject=null,this._videoEle.onplaying=null,this._videoEle.remove(),this._videoEle=null,this._handler.remove(),this._handler=null;const e=__Rtc.CRRTCUI.videoContainerList.findIndex((e=>e._id==this._id));-1!==e&&(console.crlog(`[UI] UserID:${this._userID}, container:${this._id} be destroyed...`),__Rtc.CRRTCUI.videoContainerList.splice(e,1),__Rtc.CRRTCRemoteVideo.updateSubscribeVideo())}}class o{constructor(e){this._penType={1:"Pencil"},this._init(e)}_init(e){const t=document.createElement("canvas"),n=t.getContext("2d");this._screenContainer=e.screenContainer,this._parentNode=e.screenContainer._handler,this._parentNode.appendChild(t),t.style.position="absolute",t.style.top=0,t.style.left=0,t.style.width="100%",t.style.height="100%",t.style.display="none",this._lastStyle={parentStyle:{width:0,height:0},canvasStyle:{width:0,height:0}},this._canvas=t,this._ctx=n,this._markDataList=[],this._lineWidth=e.lineWidth,this._strokeStyle=e.strokeStyle,this._type=e.type,this._allowMark=e.allowMark,this._cursor=e.cursor,this._canvas.style.cursor=this._cursor,console.crlog(`[UI] ContainerID:${this._screenContainer._id}, canvasContainer init...`);new ResizeObserver((e=>{this.resize()})).observe(this._canvas)}_loadEvent(){const{_ctx:e,_canvas:t}=this;t.onmousedown=n=>{if(!this._allowMark)return;e.lineWidth=this._lineWidth;const i=t.width/t.offsetWidth;var r=[{x:parseInt(n.offsetX*i),y:parseInt(n.offsetY*i)}];t.onmousemove=t=>{var n=parseInt(t.offsetX*i),o=parseInt(t.offsetY*i);e.beginPath();const{x:s,y:a}=r[r.length-1];e.moveTo(s,a),e.lineTo(n,o),r.push({x:n,y:o}),e.stroke()},document.onmouseup=()=>{const e=this._encode(r);this._sendData(e),t.onmousemove=null,document.onmouseup=null}}}_loadImg(e){var t=new Image;t.src=e,t.onload=()=>{this._canvas.style.position="absolute",this._canvas.style.width="100%",this._canvas.style.height="100%",this._canvas.style.top="0px",this._canvas.style.left="0px",this._canvas.width=t.width,this._canvas.height=t.height,this._ctx.strokeStyle=this._strokeStyle,this._ctx.lineWidth=this._lineWidth,this._loadEvent(),this.resize()},this._img=t,console.crlog(`[UI] ContainerID:${this._screenContainer._id}, canvasContainer loadImg...`)}_setCursor(e){this._canvas.style.cursor=e}_encode(e){const{lineWidth:t,strokeStyle:i}=this._ctx,r=n.generateUUID(),o=e.length,s=this._type||1,a=parseInt(i.substr(1,2),16),c=parseInt(i.substr(3,2),16),l=parseInt(i.substr(5,2),16),d=new ArrayBuffer(4*o+8),u=new Uint8Array(d);u.set([0,l,c,a,t>>8,255&t,o>>8,255&o]);let h=[];for(;e.length>0;){const t=e.shift();h.push(t.x>>8),h.push(255&t.x),h.push(t.y>>8),h.push(255&t.y)}return u.set(h,8),console.crlog(`[UI] ContainerID:${this._screenContainer._id}, canvasContainer encode markData...`),{mousePosSeq:u,markid:r,type:s}}_sendData(e){console.crlog(`[UI] ContainerID:${this._screenContainer._id}, canvasContainer send mark data...`),e.termid=CRVideo.userInfo.termId,__Rtc.CRICEAPI.SendMarkDataV4(e)}_drawAllMarkData(e){console.crlog(`[UI] ContainerID:${this._screenContainer._id}, canvasContainer drawAllMarkData...`),e.length>0&&(this._markDataList=[]),e.forEach((e=>{const t=__Rtc.CRRTCScreen.parseMarkData(e);this._markDataList.push(t),t.data.length&&this._drawData(t)}))}_drawData(e){if(!this._penType[e.type])return console.crlog("[UI][Error] 画笔未定义,类型: "+e.type);this._ctx.save(),e.data.length&&(this["_draw"+this._penType[e.type]](e),this._ctx.restore())}_drawPencil(e){const t=this._ctx,n=e.data;t.strokeStyle=e.color,t.lineWidth=e.width,t.beginPath(),t.moveTo(n[0].x,n[0].y);for(let e=3;e<n.length;e++)t.lineTo(n[e].x,n[e].y);t.stroke()}set(e,t){console.crlog(`[UI] ContainerID:${this._screenContainer._id}, canvasContainer set, ${e}:${t}`);const{_ctx:n,_canvas:i}=this;"strokeStyle"===e||"lineWidth"===e?n[e]=t:"cursor"===e?i.style.cursor=t:"allowMark"===e&&(this._allowMark=!!t)}resize(){console.crlog(`[UI] ContainerID:${this._screenContainer._id}, canvasContainer resize...`);const{_canvas:e,_ctx:t,_img:n,_parentNode:i}=this;let{width:r,height:o,clientWidth:s,clientHeight:a}=e;const{offsetWidth:c,offsetHeight:l}=i;if(this._lastStyle.parentStyle.width=c,this._lastStyle.parentStyle.height=l,this._lastStyle.canvasStyle.width=s,this._lastStyle.canvasStyle.height=a,e.style.width="100%",e.style.height="100%",e.style.position="absolute",e.style.top="0px",e.style.left="0px",s=e.clientWidth,a=e.clientHeight,r/o>s/a){const t=o/(r/s),n=(a-t)/2;e.style.height=t+"px",e.style.top=n+"px"}else{const t=r/(o/a),n=(s-t)/2;e.style.width=t+"px",e.style.left=n+"px"}this._markDataList.forEach((e=>{this._drawData(e)}))}clearAllMark(){console.crlog(`[UI] ContainerID:${this._screenContainer._id}, canvasContainer clearAllMark...`);const{_canvas:e}=this,t=e.width,n=e.height;e.width=t,e.height=n,this._markDataList=[]}savePic(t){var n="png";switch(t){case t.indexOf("png")>-1:n="png";break;case t.indexOf("jpg")>-1:n="jpg";break;case t.indexOf("jpeg")>-1:n="jpeg";break;case t.indexOf("bmp")>-1:n="bmp";break;case t.indexOf("gif")>-1:n="gif";break;default:n="png"}for(var i=this._canvas.toDataURL("image/"+n).split(","),r=i[0].match(/:(.*?);/)[1],o=atob(i[1]),s=o.length,a=new Uint8Array(s);s--;)a[s]=o.charCodeAt(s);var c=new Blob([a],{type:r}),l=e.URL.createObjectURL(c),d=document.createElement("a");d.style.display="none",d.href=l,d.download=t,document.body.appendChild(d),d.click(),setTimeout((function(){document.body.removeChild(d),e.URL.revokeObjectURL(l)}),1e3)}savePicToBase64(e="png"){return this._canvas.toDataURL("image/"+e)}}class s extends i{constructor(){super(),this.type="screen",this.canvasContainer=new o({type:1,strokeStyle:"#000000",cursor:"default",lineWidth:2,allowMark:!1,screenContainer:this})}setVideo(e){console.crlog(`[UI] Screen Container:${this._id}, setVideo(${e})`),this._userID=e||"";const t=CRVideo.allMemberInfo.find((t=>t.userId==e));this.nickNameContent?this._nicknameEle.innerHTML=this.nickNameContent:this._nicknameEle.innerHTML=t?t.nickname:e;__Rtc.CRRTCUI.screenContainerList.find((e=>e._id==this._id))||__Rtc.CRRTCUI.screenContainerList.push(this),this._videoEle.onplaying=()=>{this.canvasContainer._canvas.height=this._videoEle.videoHeight,this.canvasContainer._canvas.width=this._videoEle.videoWidth,this.canvasContainer._drawAllMarkData(__Rtc.CRRTCScreen.allMarkDataList);const e=this.savePicToBase64();e&&this.canvasContainer._loadImg(e)},__Rtc.CRRTCScreen.refreshContainerSrc()}setMark(e){try{console.crlog(`[UI] Screen Container:${this._id}, setMark(${JSON.stringify(e)})`)}catch(e){console.error(e)}this.canvasContainer._allowMark=void 0===e.allowMark?this.canvasContainer._allowMark:e.allowMark,this.canvasContainer._type=void 0===e.type?this.canvasContainer._type:e.type,this.canvasContainer._strokeStyle=void 0===e.strokeStyle?this.canvasContainer._strokeStyle:e.strokeStyle,this.canvasContainer._lineWidth=void 0===e.lineWidth?this.canvasContainer._lineWidth:e.lineWidth,this.canvasContainer._cursor=void 0===e.cursor?this.canvasContainer._cursor:e.cursor,this.canvasContainer.set("strokeStyle",this.canvasContainer._strokeStyle),this.canvasContainer.set("lineWidth",this.canvasContainer._lineWidth),this.canvasContainer.set("cursor",this.canvasContainer._cursor),"true"==this.canvasContainer._allowMark&&__Rtc.CRRTCScreen.isMarking?this.canvasContainer._canvas.style.display="block":"false"!=this.canvasContainer._allowMark||__Rtc.CRRTCScreen.isMarking||(this.canvasContainer._canvas.style.display="none")}markResize(){console.crlog(`[UI] Screen Container:${this._id}, markResize()`),this.canvasContainer.resize()}destroy(){console.crlog(`[UI] Screen Container:${this._id}, destroy()`);const e=__Rtc.CRRTCUI.screenContainerList.findIndex((e=>e._id==this._id));-1!==e&&(console.crlog(`[UI] Screen Container:${this._id} be destroyed...`),__Rtc.CRRTCUI.screenContainerList.splice(e,1))}}class a extends i{constructor(){super("media"),this.type="media"}setVideo(e){console.crlog(`[UI] Media Container:${this._id}, setVideo(${e})`),this._userID=e;const t=CRVideo.allMemberInfo.find((t=>t.userId==e));this.nickNameContent?this._nicknameEle.innerHTML=this.nickNameContent:this._nicknameEle.innerHTML=t?t.nickname:e,__Rtc.CRRTCMedia.refreshContainerSrc()}}e.__crUIClass=class{constructor(){this.initData(),this.initSDKInterface()}initData(){console.crlog("[UI] UIModule initData..."),this.videoContainerList=[],this.screenContainerList=[]}initSDKInterface(){e.CRVideo_CreatVideoObj=e=>{try{console.crlog(`[UI] CRVideo_CreatVideoObj(${JSON.stringify(e)})`)}catch(e){console.error(e)}const t=new r,n=t._videoEle;try{if(e)for(let t in e)if("style"==t)for(let i in e[t])n.style[i]=e[t][i];else n[t]=e[t]}catch(e){console.error(e)}return t},e.CRVideo_CreatScreenShareObj=e=>{try{console.crlog(`[UI] CRVideo_CreatScreenShareObj(${JSON.stringify(e)})`)}catch(e){console.error(e)}const t=new s,n=t._videoEle;try{if(e)for(let t in e)if("style"==t)for(let i in e[t])n.style[i]=e[t][i];else n[t]=e[t]}catch(e){console.error(e)}return t.setVideo(),t},e.CRVideo_CreatMediaObj=e=>{try{console.crlog(`[UI] CRVideo_CreatMediaObj(${JSON.stringify(e)})`)}catch(e){console.error(e)}const t=new a;__Rtc.CRRTCMedia.container=t;const n=t._videoEle;n.muted=!1,n.volume=.001;try{if(e)for(let t in e)if("style"==t)for(let i in e[t])n.style[i]=e[t][i];else n[t]=e[t]}catch(e){console.error(e)}return t}}},e.__Rtc.CRRTCUI=new __crUIClass})(window,CRVideo,Ice)},246:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var i=n(1440);const r=window.Conference,o=window.Ice,s=window.__Rtc;s.VideoReceptor=o.Class(r.VideoCallback,{setProxy:function(e){this.proxy=e},notifyAllowVideoWall(...e){console.log("===== notifyAllowVideoWall =====",e)},updateStatus(...e){s.CRRTCVideo&&s.CRRTCVideo.updateStatus(...e)},notifyOpenVideo(...e){s.CRRTCVideo&&s.CRRTCVideo.notifyOpenVideo(...e)},startVideoByManager(...e){console.log("===== startVideoByManager =====",e)},notifyEnableVideo(...e){console.log("===== notifyEnableVideo =====",e)},updateFocusWindow(...e){s.CRRTCVideo&&s.CRRTCVideo.updateFocusWindow(...e)},updateVLayout(...e){},updateVLayout2(...e){s.CRRTCVideo&&s.CRRTCVideo.updateVLayout2(...e)},updateMainVideoShowMode(...e){s.CRRTCVideo&&s.CRRTCVideo.updateMainVideoShowMode(...e)},updateVideoListMode(...e){s.CRRTCVideo&&s.CRRTCVideo.updateVideoListMode(...e)},enableUpload(...e){console.log("===== enableUpload =====",e)},enableUpload2(...e){s.CRRTCVideo&&s.CRRTCVideo.enableUpload2(...e)},generateIFrame(...e){console.log("===== generateIFrame =====",e)},notifyRefuseOpenVideo(...e){console.log("===== notifyRefuseOpenVideo =====",e)},getVideoSetting_async(...e){console.log("===== getVideoSetting_async =====",e),s.CRRTCVideo&&s.CRRTCVideo.getVideoSetting_async(...e)},setCamera(...e){console.log("===== setCamera =====",e)},setCameraById(...e){console.log("===== setCameraById =====",e)},notifyVideoPolling(...e){s.CRRTCVideo&&s.CRRTCVideo.notifyVideoPolling(...e)},notifyPollingVideo(...e){console.log("===== notifyPollingVideo =====",e)},notifyPollingVideo2(...e){s.CRRTCVideo&&s.CRRTCVideo.notifyPollingVideo2(...e)},notifyVideoList(...e){s.CRRTCVideo&&s.CRRTCVideo.notifyVideoList(...e)},notifyUpdateAllCameraInfos(...e){s.CRRTCVideo&&s.CRRTCVideo.notifyUpdateAllCameraInfos(...e)},notifySetOpenedCameraNumber(...e){s.CRRTCVideo&&s.CRRTCVideo.notifySetOpenedCameraNumber(...e)},notifyMultiCameras(...e){console.log("===== notifyMultiCameras =====",e)},notifyStartAdjustDirection(...e){console.log("===== notifyStartAdjustDirection =====",e)},notifyStartAdjustZoom(...e){console.log("===== notifyStartAdjustZoom =====",e)},notifyStopAdjustDirection(...e){console.log("===== notifyStopAdjustDirection =====",e)},notifyStopAdjustZoom(...e){console.log("===== notifyStopAdjustZoom =====",e)}});const a={setVideoDeviceStatus(e){(0,i.V)("_videoCtrl","setDeviceStatus",e).then((e=>{s.CRRTCVideo&&s.CRRTCVideo.ICECallback.setVideoDeviceStatusRslt.apply(s.CRRTCVideo,e)})).catch((e=>{s.CRRTCVideo&&s.CRRTCVideo.ICECallback.setVideoDeviceStatusRslt.apply(s.CRRTCVideo,[e])}))},allowVideoWall:e=>new Promise(((t,n)=>{(0,i.V)("_videoCtrl","allowVideoWall",e).then((e=>t(e))).catch((e=>n(e)))})),startVideo(){(0,i.V)("_videoCtrl","startVideo").then((e=>{s.CRRTCVideo&&s.CRRTCVideo.ICECallback.startVideoRslt.apply(s.CRRTCVideo,e)})).catch((e=>{s.CRRTCVideo&&s.CRRTCVideo.ICECallback.startVideoRslt.apply(s.CRRTCVideo,[e])}))},stopVideo(){(0,i.V)("_videoCtrl","stopVideo").then((e=>{s.CRRTCVideo&&s.CRRTCVideo.ICECallback.stopVideoRslt.apply(s.CRRTCVideo,e)})).catch((e=>{s.CRRTCVideo&&s.CRRTCVideo.ICECallback.stopVideoRslt.apply(s.CRRTCVideo,[e])}))},reqOpenVideo(e){(0,i.V)("_videoCtrl","reqOpenVideo",e).then((e=>{s.CRRTCVideo&&s.CRRTCVideo.ICECallback.reqOpenVideoRslt.apply(s.CRRTCVideo,e)})).catch((e=>{s.CRRTCVideo&&s.CRRTCVideo.ICECallback.reqOpenVideoRslt.apply(s.CRRTCVideo,[e])}))},startVideoEx(e){(0,i.V)("_videoCtrl","startVideoEx",e).then((e=>{s.CRRTCVideo&&s.CRRTCVideo.ICECallback.startVideoExRslt.apply(s.CRRTCVideo,e)})).catch((e=>{s.CRRTCVideo&&s.CRRTCVideo.ICECallback.startVideoExRslt.apply(s.CRRTCVideo,[e])}))},stopVideoEx(e){(0,i.V)("_videoCtrl","stopVideoEx",e).then((e=>{s.CRRTCVideo&&s.CRRTCVideo.ICECallback.stopVideoExRslt.apply(s.CRRTCVideo,e)})).catch((e=>{s.CRRTCVideo&&s.CRRTCVideo.ICECallback.stopVideoExRslt.apply(s.CRRTCVideo,[e])}))},enableVideo:e=>new Promise(((t,n)=>{(0,i.V)("_videoCtrl","enableVideo",e).then((e=>t(e))).catch((e=>n(e)))})),setFocusWindow(e,t){console.crlog(`[Video] _videoCtrl.setFocusWindow(${e},${t})`);return new Promise(((n,o)=>{const s=r.WINDOW_MODE[e];(0,i.V)("_videoCtrl","setFocusWindow",s,t).then((e=>n(e))).catch((e=>o(e)))}))},batchSubscribeVideo2(e,t,n){const a=[new r.UsrCamSize(Number(e),Number(t),Number(n))],c=new o.Context;c._fwd="z",(0,i.V)("_videoCtrl","batchSubscribeVideo2",a,c).then((e=>{s.CRRTCVideo&&s.CRRTCVideo.ICECallback.batchSubscribeVideo2Rslt.apply(s.CRRTCVideo,e)})).catch((e=>{s.CRRTCVideo&&s.CRRTCVideo.ICECallback.batchSubscribeVideo2Rslt.apply(s.CRRTCVideo,[e])}))},subscribeFocusWindow2:e=>new Promise(((t,n)=>{(0,i.V)("_videoCtrl","subscribeFocusWindow2",e).then((e=>t(e))).catch((e=>n(e)))})),setVLayout2:e=>new Promise(((t,n)=>{(0,i.V)("_videoCtrl","setVLayout2",e).then((e=>t(e))).catch((e=>n(e)))})),setMainVideoShowMode:e=>new Promise(((t,n)=>{(0,i.V)("_videoCtrl","setMainVideoShowMode",e).then((e=>t(e))).catch((e=>n(e)))})),setVideoListMode:e=>new Promise(((t,n)=>{(0,i.V)("_videoCtrl","setVideoListMode",e).then((e=>t(e))).catch((e=>n(e)))})),refuseOpenVideo:e=>new Promise(((t,n)=>{(0,i.V)("_videoCtrl","refuseOpenVideo",e).then((e=>t(e))).catch((e=>n(e)))})),getVideoSetting:e=>new Promise(((t,n)=>{(0,i.V)("_videoCtrl","getVideoSetting",e).then((e=>t(e))).catch((e=>n(e)))})),setCamera(e,t){const n=new Promise(((n,o)=>{const{mutiCam:s,openCamIDs:a,denoise:c,deinterlace:l,fpsType:d,videType:u}=t,h=new r.VideoSetting({mutiCam:s,openCamIDs:a,denoise:c,deinterlace:l,fpsType:d,videType:u});(0,i.V)("_videoCtrl","setCamera",e,h).then((e=>n(e))).catch((e=>o(e)))}));return n},setCameraById(e){const t=new Promise(((t,n)=>{const{termID:o,camID:s}=e,a=new r.UsrCamID({termID:o,camID:s});(0,i.V)("_videoCtrl","setCameraById",a).then((e=>t(e))).catch((e=>n(e)))}));return t},setVideoPolling:(e,t)=>new Promise(((n,r)=>{(0,i.V)("_videoCtrl","setVideoPolling",e,t).then((e=>n(e))).catch((e=>r(e)))})),updatePollingVideo2:(e,t)=>new Promise(((n,o)=>{const s=[];e.forEach((e=>{s.push(new r.UsrCamID({termID:e.termID,camID:e.camID}))})),(0,i.V)("_videoCtrl","updatePollingVideo2",s,t).then((e=>n(e))).catch((e=>o(e)))})),updateVideoList:e=>new Promise(((t,n)=>{(0,i.V)("_videoCtrl","updateVideoList",e).then((e=>t(e))).catch((e=>n(e)))})),getVideoPollingState:()=>new Promise(((e,t)=>{(0,i.V)("_videoCtrl","getVideoPollingState").then((t=>e(t))).catch((e=>t(e)))})),updateAllCameraInfos(e){(0,i.V)("_videoCtrl","updateAllCameraInfos",e).then((e=>{s.CRRTCVideo&&s.CRRTCVideo.ICECallback.updateAllCameraInfosRlst.apply(s.CRRTCVideo,e)})).catch((e=>{s.CRRTCVideo&&s.CRRTCVideo.ICECallback.updateAllCameraInfosRlst.apply(s.CRRTCVideo,[e])}))},setOpenedCameraNumber(e){(0,i.V)("_videoCtrl","setOpenedCameraNumber",e).then((e=>{s.CRRTCVideo&&s.CRRTCVideo.ICECallback.setOpenedCameraNumberRslt.apply(s.CRRTCVideo,e)})).catch((e=>{s.CRRTCVideo&&s.CRRTCVideo.ICECallback.setOpenedCameraNumberRslt.apply(s.CRRTCVideo,[e])}))},setMultiCameras:(e,t)=>new Promise(((n,r)=>{(0,i.V)("_videoCtrl","getVideoPollingState",e,t).then((e=>n(e))).catch((e=>r(e)))})),startAdjustDirection(e,t){const n=new Promise(((n,o)=>{const{termID:s,camID:a}=e,c=new r.UsrCamID({termID:s,camID:a});(0,i.V)("_videoCtrl","startAdjustDirection",c,t).then((e=>n(e))).catch((e=>o(e)))}));return n},startAdjustZoom(e,t){const n=new Promise(((n,o)=>{const{termID:s,camID:a}=e,c=new r.UsrCamID({termID:s,camID:a});(0,i.V)("_videoCtrl","startAdjustZoom",c,t).then((e=>n(e))).catch((e=>o(e)))}));return n},stopAdjustDirection(e){const t=new Promise(((t,n)=>{const{termID:o,camID:s}=e,a=new r.UsrCamID({termID:o,camID:s});(0,i.V)("_videoCtrl","stopAdjustDirection",a).then((e=>t(e))).catch((e=>n(e)))}));return t},stopAdjustZoom(e){const t=new Promise(((t,n)=>{const{termID:o,camID:s}=e,a=new r.UsrCamID({termID:o,camID:s});(0,i.V)("_videoCtrl","stopAdjustZoom",a).then((e=>t(e))).catch((e=>n(e)))}));return t}},c=a},1440:(e,t,n)=>{"use strict";n.d(t,{V:()=>o});const i=window.Cr,r=window.CRVideo;function o(e,t,...n){let o=!0,s=!0;return"addElement"!=t&&"netDetectResults"!=t&&"startCloudRecord"!=t||(s=!1),"netDetectResults"==t&&(o=!1),new Promise(((a,c)=>{try{if(!r.isMeeting)return;try{o&&s&&console.crlog(`[ICE] Ice Request [${e}:${t}],${JSON.stringify(n)}`),o&&!s&&console.crlog(`[ICE] Ice Request [${e}:${t}],args...`)}catch(e){console.error(e)}i._proxy[e][t](...n).then((function(...n){return o&&console.crlog(`[ICE] Ice Request [${e}:${t}] success!`),n.unshift(0),a(n)})).exception((function(n){return o&&console.crlog(`[ICE][Error] Ice Request [${e}:${t}] fail,${n.toString()}`),c(n)}))}catch(e){return o&&console.crlog(`[ICE][Error] Conference Request error: ${e}`),c(e)}}))}},2398:()=>{const e=window.__Rtc;e.CR_InitRslt=new Cr.CbProxy("CR_InitRslt"),e.CR__LoginRslt=new Cr.CbProxy("CR__LoginRslt"),e.CR__RefreshSessionRslt=new Cr.CbProxy("CR__RefreshSessionRslt"),e.CR__KeepAliveRslt=new Cr.CbProxy("CR__KeepAliveRslt"),e.CR__ExitRslt=new Cr.CbProxy("CR__ExitRslt"),e.CR__GetActiveMembersRslt=new Cr.CbProxy("CR__GetActiveMembersRslt"),e.CR__GetLastMsgRslt=new Cr.CbProxy("CR__GetLastMsgRslt"),e.CR__GetLastNMsgRslt=new Cr.CbProxy("CR__GetLastNMsgRslt"),e.CR__GetBroadCastUrlRslt=new Cr.CbProxy("CR__GetBroadCastUrlRslt"),e.CR__AskQuesRslt=new Cr.CbProxy("CR__AskQuesRslt"),e.CR__GetQuesListRslt=new Cr.CbProxy("CR__GetQuesListRslt"),e.CR__AskQuesNotify=new Cr.CbProxy("CR__AskQuesNotify"),e.CR__LockQuesNotify=new Cr.CbProxy("CR__LockQuesNotify"),e.CR__ReplyQuesNotify=new Cr.CbProxy("CR__ReplyQuesNotify"),e.CR__ModifyQuesNotify=new Cr.CbProxy("CR__ModifyQuesNotify"),e.CR__DelQuesNotify=new Cr.CbProxy("CR__DelQuesNotify"),e.CR__DelAllQuesNotify=new Cr.CbProxy("CR__DelAllQuesNotify"),e.CR__PublicQuesNotify=new Cr.CbProxy("CR__PublicQuesNotify"),e.CR__QuesTypeChangeNotify=new Cr.CbProxy("CR__QuesTypeChangeNotify"),e.CR__ModifyQuesTypeNotify=new Cr.CbProxy("CR__ModifyQuesTypeNotify"),e.CR__SetBroadCastQuesNotify=new Cr.CbProxy("CR__SetBroadCastQuesNotify"),e.CR__NotifyPlayBackStartPush=new Cr.CbProxy("CR__NotifyPlayBackStartPush"),e.CR__GetIMMsgCountRslt=new Cr.CbProxy("CR__GetIMMsgCountRslt"),e.CR__Notifypayback=new Cr.CbProxy("CR__Notifypayback"),e.CR__NotifyBroadCastPlaybackStop=new Cr.CbProxy("CR__NotifyBroadCastPlaybackStop"),e.CR__NotifySwtichLiveAppElements=new Cr.CbProxy("CR__NotifySwtichLiveAppElements"),e.CR__NotifyThumbUp=new Cr.CbProxy("CR__NotifyThumbUp"),e.CR__GetLuckyDrawCfgRslt=new Cr.CbProxy("CR__GetLuckyDrawCfgRslt"),e.CR__JoinLuckyDrawMembersRslt=new Cr.CbProxy("CR__JoinLuckyDrawMembersRslt"),e.CR__NotifyLDMembersStatus=new Cr.CbProxy("CR__NotifyLDMembersStatus"),e.CR__CloseMicExRslt=new Cr.CbProxy("CR__CloseMicExRslt"),e.CR__AudioAllocRaw=new Cr.CbProxy("CR__AudioAllocRaw"),e.CR__AudioAllocRawExt=new Cr.CbProxy("CR__AudioAllocRawExt"),e.CR__AudioAllocRawExt2=new Cr.CbProxy("CR__AudioAllocRawExt2"),e.CR__VideoAllocRaw=new Cr.CbProxy("CR__VideoAllocRaw"),e.CR__VideoAllocRawExt=new Cr.CbProxy("CR__VideoAllocRawExt"),e.CR__VideoAllocRawExt2=new Cr.CbProxy("CR__VideoAllocRawExt2"),e.CR__ModifyPeerAddr=new Cr.CbProxy("CR__ModifyPeerAddr"),e.CR__ModifyPeerAddrExt=new Cr.CbProxy("CR__ModifyPeerAddrExt"),e.CR__NotifyRTMPStreamPublishFinished=new Cr.CbProxy("CR__NotifyRTMPStreamPublishFinished"),e.CR__EnableSendScreen2Internet=new Cr.CbProxy("CR__EnableSendScreen2Internet"),e.CR__DisableSendScreen2Internet=new Cr.CbProxy("CR__DisableSendScreen2Internet"),e.CR__EnableSendFilm2Internet=new Cr.CbProxy("CR__EnableSendFilm2Internet"),e.CR__DisableSendFilm2Internet=new Cr.CbProxy("CR__DisableSendFilm2Internet"),e.CR__Free=new Cr.CbProxy("CR__Free"),e.CR__VideoResolutionReportRslt=new Cr.CbProxy("CR__VideoResolutionReportRslt"),e.CR__SetVoiceEnergyRslt=new Cr.CbProxy("CR__SetVoiceEnergyRslt"),e.CR__PstnSwitchMicStatusRslt=new Cr.CbProxy("CR__PstnSwitchMicStatusRslt"),e.CR__StartRecordRslt=new Cr.CbProxy("CR__StartRecordRslt"),e.CR__IsRecordingRslt=new Cr.CbProxy("CR__IsRecordingRslt"),e.CR__StopRecordRslt=new Cr.CbProxy("CR__StopRecordRslt"),e.CR__PlayApplauseRslt=new Cr.CbProxy("CR__PlayApplauseRslt"),e.CR__GetMusicListRslt=new Cr.CbProxy("CR__GetMusicListRslt"),e.CR__GetPlayBGMusicRslt=new Cr.CbProxy("CR__GetPlayBGMusicRslt"),e.CR__StartBGMusicRslt=new Cr.CbProxy("CR__StartBGMusicRslt"),e.CR__StopPlayBGMusicRslt=new Cr.CbProxy("CR__StopPlayBGMusicRslt"),e.CR__SetPlayBGMusicVolumnRslt=new Cr.CbProxy("CR__SetPlayBGMusicVolumnRslt"),e.CR__GetPlayBGMusicVolumnRslt=new Cr.CbProxy("CR__GetPlayBGMusicVolumnRslt"),e.CR__VoiceHowlingRslt=new Cr.CbProxy("CR__VoiceHowlingRslt"),e.CR__VoiceNoiseRslt=new Cr.CbProxy("CR__VoiceNoiseRslt"),e.CR__RemoteAudioSetRslt=new Cr.CbProxy("CR__RemoteAudioSetRslt"),e.CR__GetRemoteAudioInfRslt=new Cr.CbProxy("CR__GetRemoteAudioInfRslt"),e.CR__NotifyCtrlReqState=new Cr.CbProxy("CR__NotifyCtrlReqState")},8989:()=>{__Rtc.MSClientI=Ice.Class(MS.MSClient,{setProxy:function(e){this.proxy=e},VideoAllocRaw_async:function(e,t,n){console.crlog&&console.crlog("[RTC] VideoAllocRaw"),this.proxy.callCallback("VideoAllocRaw",[e,t,n])},VideoAllocRawExt_async:function(e,t,n,i,r){console.crlog&&console.crlog("[RTC] VideoAllocRawExt_async"),this.proxy.callCallback("VideoAllocRawExt",[e,t,n,i])},VideoAllocRawExt2_async:function(e,t,n,i,r){console.crlog&&console.crlog("[RTC] VideoAllocRawExt2_async"),this.proxy.callCallback("VideoAllocRawExt2",[e,t,n,i])},AudioAllocRaw_async:function(e,t){console.crlog&&console.crlog("[RTC] AudioAllocRaw"),this.proxy.callCallback("AudioAllocRaw",[e,t])},AudioAllocRawExt_async:function(e,t,n,i){console.crlog&&console.crlog("[RTC] AudioAllocRawExt"),this.proxy.callCallback("AudioAllocRawExt",[e,t,n])},AudioAllocRawExt2_async(...e){__Rtc.CRRTCAudio.ICECallback.AudioAllocRawExt2_async(...e)},ModifyPeerAddr_async:function(e,t,n){console.crlog&&console.crlog("[RTC] ModifyPeerAddr"),this.proxy.callCallback("ModifyPeerAddr",[e,asParam,strParams])},ModifyPeerAddrExt_async:function(e,t,n){e.ice_response(),console.crlog&&console.crlog("[RTC] ModifyPeerAddrExt"),this.proxy.callCallback("ModifyPeerAddrExt",[e,t,n])},NotifyRTMPStreamPublishFinished_async:function(e,t,n,i,r,o,s,a){console.crlog&&console.crlog("[RTC] NotifyRTMPStreamPublishFinished_async"),this.proxy.callCallback("NotifyRTMPStreamPublishFinished",[e,t,n])},EnableSendScreen2Internet_async:function(e){e.ice_response(),console.crlog&&console.crlog("[RTC] EnableSendScreen2Internet"),this.proxy.callCallback("EnableSendScreen2Internet",[e])},DisableSendScreen2Internet_async:function(e){e.ice_response(),console.crlog&&console.crlog("[RTC] DisableSendScreen2Internet"),this.proxy.callCallback("DisableSendScreen2Internet",[e])},EnableSendFilm2Internet_async:function(e){e.ice_response(),console.crlog&&console.crlog("[RTC] EnableSendFilm2Internet"),this.proxy.callCallback("EnableSendFilm2Internet",[e])},DisableSendFilm2Internet_async:function(e){e.ice_response(),console.crlog&&console.crlog("[RTC] DisableSendFilm2Internet"),this.proxy.callCallback("DisableSendFilm2Internet",[e])},EnableSendVideo2Internet_async(e,t){e.ice_response(),__Rtc.CRRTCVideo&&__Rtc.CRRTCVideo.ICECallback.enableSendVideo2Internet(t)},DisableSendVideo2Internet_async:(e,t)=>{e.ice_response(),__Rtc.CRRTCVideo&&__Rtc.CRRTCVideo.ICECallback.disableSendVideo2Internet(t)},Free_async:function(e,t){e.ice_response(),this.proxy.callCallback("Free",[t])}}),__Rtc.ChatReceptor=Ice.Class(Conference.IMCallback,{setProxy:function(e){this.proxy=e},receiveIMMsg(...e){__Rtc.CRRTCIMMsg.ICECallback.receiveIMMsg(...e)},notifyIMForbidStatus(...e){__Rtc.CRRTCIMMsg.ICECallback.notifyIMForbidStatus(...e)},notifyClearIMMsg(...e){__Rtc.CRRTCIMMsg.ICECallback.notifyClearIMMsg(...e)},notifyDeleteIMMsg(...e){__Rtc.CRRTCIMMsg.ICECallback.notifyDeleteIMMsg(...e)}}),__Rtc.ScreenShareReceptor=Ice.Class(Conference.ScreenShareClient,{setProxy:function(e){this.proxy=e},notifyStartScreenShare(...e){__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.notifyStartScreenShare.call(__Rtc.CRRTCScreen,...e)},notifyStopScreenShare(...e){__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.notifyStopScreenShare.call(__Rtc.CRRTCScreen,...e)},notifyStartMarked(...e){__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.notifyStartMarked.call(__Rtc.CRRTCScreen,...e)},notifyStopMarked(...e){__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.notifyStopMarked.call(__Rtc.CRRTCScreen,...e)},notifyMakeIFrame(...e){__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.notifyScMakeIFrame.call(__Rtc.CRRTCScreen,...e)},notifyMarkData(...e){__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.notifyMarkData.call(__Rtc.CRRTCScreen,...e)},notifyClearAllMarks(...e){__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.notifyClearAllMarks.call(__Rtc.CRRTCScreen,...e)},notifyMarkDataV4(...e){__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.notifyMarkDataV4.call(__Rtc.CRRTCScreen,...e)},notifyClearAllMarksV4(...e){__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.notifyClearAllMarksV4.call(__Rtc.CRRTCScreen,...e)},notifyRequestMarked:function(e){console.crlog&&console.crlog("[RTC] notifyRequestMarked",e),this.proxy.callCallback("notifyRequestMarked",[e])},notifyCancelMarkedReq:function(e){console.crlog&&console.crlog("[RTC] notifyCancelMarkedReq",e),this.proxy.callCallback("notifyCancelMarkedReq",[e])},notifyEnableOtherMarked:function(e,t){console.crlog&&console.crlog("[RTC] notifyEnableOtherMarked",e,t),this.proxy.callCallback("notifyEnableOtherMarked",[e,t])},notifyCtrlReqState:function(e,t){console.crlog&&console.crlog("[RTC] notifyCtrlReqState",e,t),this.proxy.callCallback("notifyCtrlReqState",[e,t])},notifyRequestCtrlRight:function(e){console.crlog&&console.crlog("[RTC] notifyRequestCtrlRight",e),this.proxy.callCallback("notifyRequestCtrlRight",[e])},notifyCancelCtrlReq:function(e){console.crlog&&console.crlog("[RTC] notifyCancelCtrlReq",e),this.proxy.callCallback("notifyCancelCtrlReq",[e])},notifyRejectCtrlReq:function(e,t,n){console.crlog&&console.crlog("[RTC] notifyRejectCtrlReq",e,t,n),this.proxy.callCallback("notifyRejectCtrlReq",[e,t,n])},notifyGiveCtrlRight:function(e,t){console.crlog&&console.crlog("[RTC] notifyGiveCtrlRight",e,t),this.proxy.callCallback("notifyGiveCtrlRight",[e,t])},notifyReleaseCtrlRight:function(e){console.crlog&&console.crlog("[RTC] notifyReleaseCtrlRight",e),this.proxy.callCallback("notifyReleaseCtrlRight",[e])},notifyCtrlMsg:function(e,t){console.crlog&&console.crlog("[RTC] notifyCtrlMsg",e,t),this.proxy.callCallback("notifyCtrlMsg",[e,t])},notifyTmpSetRemoteCtrlState:function(e,t){console.crlog&&console.crlog("[RTC] notifyTmpSetRemoteCtrlState",e,t),this.proxy.callCallback("notifyTmpSetRemoteCtrlState",[e,t])},notifyIndicator:function(e,t){console.crlog&&console.crlog("[RTC] notifyIndicator",e,t),this.proxy.callCallback("notifyIndicator",[e,t])}}),__Rtc.MediaReceptor=Ice.Class(Conference.MediaCallback,{setProxy:function(e){this.proxy=e},notifyStartPlayMedia(...e){__Rtc.CRRTCMedia&&__Rtc.CRRTCMedia.ICECallback.notifyStartPlayMedia.call(__Rtc.CRRTCMedia,...e)},notifyStopPlayMedia(...e){__Rtc.CRRTCMedia&&__Rtc.CRRTCMedia.ICECallback.notifyStopPlayMedia.call(__Rtc.CRRTCMedia,...e)},notifyPausePlayMedia(...e){__Rtc.CRRTCMedia&&__Rtc.CRRTCMedia.ICECallback.notifyPausePlayMedia.call(__Rtc.CRRTCMedia,...e)},notifyMakeIFrame(...e){__Rtc.CRRTCMedia&&__Rtc.CRRTCMedia.ICECallback.notifyMakeIFrame.call(__Rtc.CRRTCMedia,...e)},notifySubscribeMedia(...e){__Rtc.CRRTCMedia&&__Rtc.CRRTCMedia.ICECallback.notifySubscribeMedia.call(__Rtc.CRRTCMedia,...e)}}),__Rtc.AnsQueReceptor=Ice.Class(Conference.AnsQueCallback,{setProxy:function(e){this.proxy=e},askQuesNotify:function(e,t){console.crlog&&console.crlog("[RTC] askQuesNotify(id:%s)",e),this.proxy.callCallback("askQuesNotify",[e,t])},lockQuesNotify:function(e,t){console.crlog&&console.crlog("[RTC] lockQuesNotify(id:%s)",e),this.proxy.callCallback("lockQuesNotify",[e,t])},replyQuesNotify:function(e,t){console.crlog&&console.crlog("[RTC] replyQuesNotify(id:%s)",e),this.proxy.callCallback("replyQuesNotify",[e,t])},modifyQuesNotify:function(e,t){console.crlog&&console.crlog("[RTC] modifyQuesNotify(id:%s)",e),this.proxy.callCallback("modifyQuesNotify",[e,t])},delQuesNotify:function(e,t){console.crlog&&console.crlog("[RTC] delQuesNotify(id:%s)",e),this.proxy.callCallback("delQuesNotify",[e,t])},delAllQuesNotify:function(e){console.crlog&&console.crlog("[RTC] delAllQuesNotify(termId:%s)",e),this.proxy.callCallback("delAllQuesNotify",[e])},publicQuesNotify:function(e,t,n){console.crlog&&console.crlog("[RTC] publicQuesNotify(id:%s)",e),this.proxy.callCallback("publicQuesNotify",[e,t,n])},quesTypeChangeNotify:function(e,t){console.crlog&&console.crlog("[RTC] quesTypeChangeNotify(id:%s)",e),this.proxy.callCallback("quesTypeChangeNotify",[e,t])},modifyQuesTypeNotify:function(e,t){console.crlog&&console.crlog("[RTC] modifyQuesTypeNotify(termId:%s)",e),this.proxy.callCallback("modifyQuesTypeNotify",[e,t])},setBroadCastQuesNotify:function(e){console.crlog&&console.crlog("[RTC] setBroadCastQuesNotify(bEnable:%s)",e),this.proxy.callCallback("setBroadCastQuesNotify",[e])}}),__Rtc.WhiteBoardReceptor=Ice.Class(Conference.WhiteBoardCallback,{setProxy:function(e){this.proxy=e},notifySetCurrentPage(...e){__Rtc.CRRTCBoard&&__Rtc.CRRTCBoard.ICECallback.notifySetCurrentPage.call(__Rtc.CRRTCBoard,...e)},notifyCreate(...e){__Rtc.CRRTCBoard&&__Rtc.CRRTCBoard.ICECallback.notifyCreate.call(__Rtc.CRRTCBoard,...e)},notifyClose(...e){__Rtc.CRRTCBoard&&__Rtc.CRRTCBoard.ICECallback.notifyClose.call(__Rtc.CRRTCBoard,...e)},notifyAddElement(...e){__Rtc.CRRTCBoard&&__Rtc.CRRTCBoard.ICECallback.notifyAddElement.call(__Rtc.CRRTCBoard,...e)},notifyDelElement(...e){__Rtc.CRRTCBoard&&__Rtc.CRRTCBoard.ICECallback.notifyDelElement.call(__Rtc.CRRTCBoard,...e)},notifySetContainerSize(...e){__Rtc.CRRTCBoard&&__Rtc.CRRTCBoard.ICECallback.notifySetContainerSize.call(__Rtc.CRRTCBoard,...e)},notifyImportPage(...e){__Rtc.CRRTCBoard&&__Rtc.CRRTCBoard.ICECallback.notifyImportPage.call(__Rtc.CRRTCBoard,...e)},notifyChangeName(...e){__Rtc.CRRTCBoard&&__Rtc.CRRTCBoard.ICECallback.notifyChangeName.call(__Rtc.CRRTCBoard,...e)},notifyChangeScale(...e){__Rtc.CRRTCBoard&&__Rtc.CRRTCBoard.ICECallback.notifyChangeScale.call(__Rtc.CRRTCBoard,...e)},notifyChangeRotate(...e){__Rtc.CRRTCBoard&&__Rtc.CRRTCBoard.ICECallback.notifyChangeRotate.call(__Rtc.CRRTCBoard,...e)},notifyShowThumPage(...e){__Rtc.CRRTCBoard&&__Rtc.CRRTCBoard.ICECallback.notifyShowThumPage.call(__Rtc.CRRTCBoard,...e)},notifyAddElementEx(...e){__Rtc.CRRTCBoard&&__Rtc.CRRTCBoard.ICECallback.notifyAddElementEx.call(__Rtc.CRRTCBoard,...e)},notifyMoveElement(...e){__Rtc.CRRTCBoard&&__Rtc.CRRTCBoard.ICECallback.notifyMoveElement.call(__Rtc.CRRTCBoard,...e)},notifyModifyElement(...e){__Rtc.CRRTCBoard&&__Rtc.CRRTCBoard.ICECallback.notifyModifyElement.call(__Rtc.CRRTCBoard,...e)},notifySetElementZPos(...e){__Rtc.CRRTCBoard&&__Rtc.CRRTCBoard.ICECallback.notifySetElementZPos.call(__Rtc.CRRTCBoard,...e)},notifySetIndicator(...e){__Rtc.CRRTCBoard&&__Rtc.CRRTCBoard.ICECallback.notifySetIndicator.call(__Rtc.CRRTCBoard,...e)},notifySetHotspot(...e){__Rtc.CRRTCBoard&&__Rtc.CRRTCBoard.ICECallback.notifySetHotspot.call(__Rtc.CRRTCBoard,...e)},notifySetMarkTerms(...e){__Rtc.CRRTCBoard&&__Rtc.CRRTCBoard.ICECallback.notifySetMarkTerms.call(__Rtc.CRRTCBoard,...e)}}),__Rtc.SyncCtrlReceptor=Ice.Class(Conference.SyncCtrlCallback,{setProxy:function(e){this.proxy=e},notifySetCurrentTab(...e){__Rtc.CRRTCSync&&__Rtc.CRRTCSync.ICECallback.notifySetCurrentTab.call(__Rtc.CRRTCSync,...e)},notifySetFullScreen(...e){__Rtc.CRRTCSync&&__Rtc.CRRTCSync.ICECallback.notifySetFullScreen.call(__Rtc.CRRTCSync,...e)},notifySetPrivTabInfo(...e){__Rtc.CRRTCSync&&__Rtc.CRRTCSync.ICECallback.notifySetPrivTabInfo.call(__Rtc.CRRTCSync,...e)},notifySetSyncMode(...e){__Rtc.CRRTCSync&&__Rtc.CRRTCSync.ICECallback.notifySetSyncMode.call(__Rtc.CRRTCSync,...e)}})},473:()=>{__Rtc.CR__Init=function(e,t){try{Cr._proxy=new Cr.LHProxy(t),Cr._proxy.initIce().then((function(e,t){Cr._proxy.registeredCallback("askQuesNotify",(function(e){id=e[0],askQue=e[1],__Rtc.CR__AskQuesNotify.call([id,new Cr.Quesask(askQue)])})),Cr._proxy.registeredCallback("lockQuesNotify",(function(e){id=e[0],queDeal=e[1],__Rtc.CR__LockQuesNotify.call([id,new Cr.QuesDeal(queDeal)])})),Cr._proxy.registeredCallback("replyQuesNotify",(function(e){id=e[0],queDeal=e[1],__Rtc.CR__ReplyQuesNotify.call([id,new Cr.QuesDeal(queDeal)])})),Cr._proxy.registeredCallback("modifyQuesNotify",(function(e){id=e[0],queDeal=e[1],__Rtc.CR__ModifyQuesNotify.call([id,new Cr.QuesDeal(queDeal)])})),Cr._proxy.registeredCallback("delQuesNotify",(function(e){id=e[0],termId=e[1],__Rtc.CR__DelQuesNotify.call([id,termId])})),Cr._proxy.registeredCallback("delAllQuesNotify",(function(e){termId=e[0],__Rtc.CR__DelAllQuesNotify.call([termId])})),Cr._proxy.registeredCallback("publicQuesNotify",(function(e){id=e[0],bPublic=e[1],termId=e[2],__Rtc.CR__PublicQuesNotify.call([id,bPublic,termId])})),Cr._proxy.registeredCallback("quesTypeChangeNotify",(function(e){id=e[0],typeID=e[1],__Rtc.CR__QuesTypeChangeNotify.call([termId])})),Cr._proxy.registeredCallback("modifyQuesTypeNotify",(function(e){termId=e[0],quesType=e[1],__Rtc.CR__ModifyQuesTypeNotify.call([termId])})),Cr._proxy.registeredCallback("setBroadCastQuesNotify",(function(e){bEnable=e[0],__Rtc.CR__SetBroadCastQuesNotify.call([bEnable])})),Cr._proxy.registeredCallback("notifyPlayBackStartPush",(function(e){url=e[0],__Rtc.CR__NotifyPlayBackStartPush.call([url])})),Cr._proxy.registeredCallback("notifypayback",(function(e){__Rtc.CR__Notifypayback.call()})),Cr._proxy.registeredCallback("notifyBroadCastPlaybackStop",(function(e){url=e[0],__Rtc.CR__NotifyBroadCastPlaybackStop.call([url])})),Cr._proxy.registeredCallback("notifySwtichLiveAppElements",(function(e){ele=e[0],status=e[1],__Rtc.CR__NotifySwtichLiveAppElements.call([ele,status])})),Cr._proxy.registeredCallback("notifyThumbUp",(function(e){num=e[0],total=e[1],info=e[2],__Rtc.CR__NotifyThumbUp.call([num,total,info])})),Cr._proxy.registeredCallback("notifyLDMembersStatus",(function(e){__Rtc.CR__NotifyLDMembersStatus.call(e)})),Cr._proxy.registeredCallback("ModifyPeerAddr",(function(e){__Rtc.CR__ModifyPeerAddr.call(e)})),Cr._proxy.registeredCallback("ModifyPeerAddrExt",(function(e){__Rtc.CR__ModifyPeerAddrExt.call(e)})),Cr._proxy.registeredCallback("AudioAllocRaw",(function(e){__Rtc.CR__AudioAllocRaw.call(e)})),Cr._proxy.registeredCallback("AudioAllocRawExt",(function(e){__Rtc.CR__AudioAllocRawExt.call(e)})),Cr._proxy.registeredCallback("VideoAllocRaw",(function(e){__Rtc.CR__VideoAllocRaw.call(e)})),Cr._proxy.registeredCallback("VideoAllocRawExt",(function(e){__Rtc.CR__VideoAllocRawExt.call(e)})),Cr._proxy.registeredCallback("VideoAllocRawExt2",(function(e){__Rtc.CR__VideoAllocRawExt2.call(e)})),Cr._proxy.registeredCallback("NotifyRTMPStreamPublishFinished",(function(e){__Rtc.CR__NotifyRTMPStreamPublishFinished.call(e)})),Cr._proxy.registeredCallback("EnableSendScreen2Internet",(function(e){__Rtc.CR__EnableSendScreen2Internet.call(e)})),Cr._proxy.registeredCallback("DisableSendScreen2Internet",(function(e){__Rtc.CR__DisableSendScreen2Internet.call(e)})),Cr._proxy.registeredCallback("EnableSendFilm2Internet",(function(e){__Rtc.CR__EnableSendFilm2Internet.call(e)})),Cr._proxy.registeredCallback("DisableSendFilm2Internet",(function(e){__Rtc.CR__DisableSendFilm2Internet.call(e)})),Cr._proxy.registeredCallback("Free",(function(e){__Rtc.CR__Free.call(e)})),Cr._proxy.registeredCallback("notifyCtrlReqState",(function(e){var t=e[0],n=e[1];__Rtc.CR__NotifyCtrlReqState.call(t,n)})),Cr._proxy.registeredCallback("notifyRequestCtrlRight",(function(e){})),Cr._proxy.registeredCallback("notifyCancelCtrlReq",(function(e){})),Cr._proxy.registeredCallback("notifyRejectCtrlReq",(function(e){})),Cr._proxy.registeredCallback("notifyGiveCtrlRight",(function(e){})),Cr._proxy.registeredCallback("notifyReleaseCtrlRight",(function(e){})),Cr._proxy.registeredCallback("notifyCtrlMsg",(function(e){})),Cr._proxy.registeredCallback("notifyTmpSetRemoteCtrlState",(function(e){})),Cr._proxy.registeredCallback("notifyRequestMarked",(function(e){})),Cr._proxy.registeredCallback("notifyCancelMarkedReq",(function(e){})),Cr._proxy.registeredCallback("notifyEnableOtherMarked",(function(e){})),Cr._proxy.registeredCallback("notifyIndicator",(function(e){})),window.__Rtc.CR_InitRslt.call([e,t])}))}catch(e){console.crlog&&console.crlog(e),window.__Rtc.CR_InitRslt.call([3,"sdk内部错误"])}},__Rtc.CR__UnInit=function(){try{Cr.communicator&&Cr.communicator.shutdown(),Cr.communicator=null,Cr._connection&&Cr._connection.destroy(0),Cr._connection=null,Cr._adapter&&Cr._adapter.destroy(),Cr._adapter=null,Cr._routerPrx&&Cr._routerPrx.destroySession(),Cr._routerPrx=null}catch(e){return 3}},__Rtc.CR__RefreshSession=function(e){Cr._proxy&&Cr._proxy.refreshSession().then((function(t,n){__Rtc.CR__RefreshSessionRslt.call([t,n,e])}))},__Rtc.CR__KeepAlive=function(e,t){void 0===e&&(e=0),Cr._proxy&&Cr._proxy.keepAlive(e).then((function(e,n){__Rtc.CR__KeepAliveRslt.call([e,n,t])}))},__Rtc.CR__Exit=function(e){void 0===e&&(e=""),Cr._proxy&&Cr._proxy.exit(e).then((function(e,t){__Rtc.CR__ExitRslt.call([e,t])}))},__Rtc.CR__GetActiveMembers=function(){Cr._proxy.getActiveMembers().then((function(e,t,n){0==e?__Rtc.CR__GetActiveMembersRslt.call([e,t,n]):__Rtc.CR__GetActiveMembersRslt.call([e,t])}))},__Rtc.CR__SendIMMsg=function(e,t,n,i,r,o,s){Cr._proxy.SendIMMsg(e,t,n,i,r).then(((...e)=>{__Rtc.CRRTCIMMsg.ICECallback.sendIMMsgRslt(...e,s)}))},__Rtc.CR__GetIMMsgCount=function(){Cr._proxy.getIMMsgCount().then((function(e,t,n){0==e?__Rtc.CR__GetIMMsgCountRslt.call([e,t,n]):__Rtc.CR__GetIMMsgCountRslt.call([e,t])}))},__Rtc.CR__GetLastMsg=function(e){Cr._proxy.getLastMsg(e).then((function(e,t,n){0==e?__Rtc.CR__GetLastMsgRslt.call([e,t,n]):__Rtc.CR__GetLastMsgRslt.call([e,t])}))},__Rtc.CR__GetLastNMsg=function(e,t){Cr._proxy.getLastNMsg(e,t).then((function(e,t,n){0==e?__Rtc.CR__GetLastNMsgRslt.call([e,t,n]):__Rtc.CR__GetLastNMsgRslt.call([e,t])}))},__Rtc.CR__GetBroadCastUrl=function(){Cr._proxy.getBroadCastUrl().then((function(e,t,n){0==e?__Rtc.CR__GetBroadCastUrlRslt.call([e,t,n]):__Rtc.CR__GetBroadCastUrlRslt.call([e,t])}))},__Rtc.CR__AskQues=function(e,t,n,i,r,o){Cr._proxy.askQues(e,t,n,i,r,o).then((function(e,t,n){0==e?__Rtc.CR__AskQuesRslt.call([e,t,n]):__Rtc.CR__AskQuesRslt.call([e,t])}))},__Rtc.CR__GetQuesList=function(){Cr._proxy.getQuesList().then((function(e,t,n){0==e?__Rtc.CR__GetQuesListRslt.call([e,t,n]):__Rtc.CR__GetQuesListRslt.call([e,t])}))},__Rtc.CR__GetLuckyDrawCfg=function(){Cr._proxy.getLuckyDrawCfg().then((function(e,t,n){0==e?__Rtc.CR__GetLuckyDrawCfgRslt.call([e,t,n]):__Rtc.CR__GetLuckyDrawCfgRslt.call([e,t])}))},__Rtc.CR__JoinLuckyDrawMembers=function(e,t){Cr._proxy.joinLuckyDrawMembers(e,t).then((function(e,t){__Rtc.CR__JoinLuckyDrawMembersRslt.call([e,t])}))},__Rtc.CR__TerminalMsg=function(e,t,n,i,r){Cr._proxy.terminalMsg(e,t,n,i).then(((...e)=>{__Rtc.CRRTCTermMsg.ICECallback.terminalMsgRslt(...e,r)}))},__Rtc.CR__VideoResolutionReport=function(e,t,n){Cr._proxy.VideoResolutionReport(e,t,n).then((function(e,t){__Rtc.CR__VideoResolutionReportRslt.call([e,t])}))},__Rtc.CR__SetAudioDeviceStatus=function(e){Cr._proxy.setAudioDeviceStatus(e).then(((...e)=>{__Rtc.CRRTCAudio.ICECallback.setAudioDeviceStatusRslt.call(__Rtc.CRRTCAudio,...e)}))},__Rtc.CR__CloseMicEx=function(e){Cr._proxy.closeMicEx(e).then(((...e)=>{__Rtc.CRRTCAudio.ICECallback.closeMicExRslt.call(__Rtc.CRRTCAudio,...e)}))},__Rtc.CR__CloseAll=function(){Cr._proxy.closeAll().then((function(...e){__Rtc.CRRTCAudio.ICECallback.closeAllRslt.call(__Rtc.CRRTCAudio,...e)}))},__Rtc.CR__SetVoiceEnergy=function(e){Cr._proxy.setVoiceEnergy(e).then((function(e,t){__Rtc.CR__SetVoiceEnergyRslt.call([e,t])}))},__Rtc.CR__PstnSwitchMicStatus=function(){Cr._proxy.pstnSwitchMicStatus().then((function(e,t){__Rtc.CR__PstnSwitchMicStatusRslt.call([e,t])}))},__Rtc.CR__StartRecord=function(){Cr._proxy.startRecord().then((function(e,t){__Rtc.CR__StartRecordRslt.call([e,t])}))},__Rtc.CR__IsRecording=function(){Cr._proxy.isRecording().then((function(e,t){__Rtc.CR__IsRecordingRslt.call([e,t])}))},__Rtc.CR__StopRecord=function(){Cr._proxy.isRecording().then((function(e,t){__Rtc.CR__StopRecordRslt.call([e,t])}))},__Rtc.CR__PlayApplause=function(){Cr._proxy.playApplause().then((function(e,t){__Rtc.CR__PlayApplauseRslt.call([e,t])}))},__Rtc.CR__GetMusicList=function(){Cr._proxy.getMusicList().then((function(e,t){__Rtc.CR__GetMusicListRslt.call([e,t])}))},__Rtc.CR__GetPlayBGMusic=function(){Cr._proxy.getPlayBGMusic().then((function(e,t){__Rtc.CR__GetPlayBGMusicRslt.call([e,t])}))},__Rtc.CR__StartBGMusic=function(e,t){Cr._proxy.startBGMusic(e,t).then((function(e,t){__Rtc.CR__StartBGMusicRslt.call([e,t])}))},__Rtc.CR__StopPlayBGMusic=function(){Cr._proxy.stopPlayBGMusic().then((function(e,t){__Rtc.CR__StopPlayBGMusicRslt.call([e,t])}))},__Rtc.CR__SetPlayBGMusicVolumn=function(e){Cr._proxy.setPlayBGMusicVolumn(e).then((function(e,t){__Rtc.CR__SetPlayBGMusicVolumnRslt.call([e,t])}))},__Rtc.CR__GetPlayBGMusicVolumn=function(){Cr._proxy.getPlayBGMusicVolumn().then((function(e,t){__Rtc.CR__GetPlayBGMusicVolumnRslt.call([e,t])}))},__Rtc.CR__VoiceHowling=function(e){Cr._proxy.voiceHowling(e).then((function(e,t){__Rtc.CR__VoiceHowlingRslt.call([e,t])}))},__Rtc.CR__VoiceNoise=function(e){Cr._proxy.voiceNoise(e).then((function(e,t){__Rtc.CR__VoiceNoiseRslt.call([e,t])}))},__Rtc.CR__RemoteAudioSet=function(e,t){Cr._proxy.remoteAudioSet(e,t).then((function(e,t){__Rtc.CR__RemoteAudioSetRslt.call([e,t])}))},__Rtc.CR__GetRemoteAudioInf=function(e){Cr._proxy.getRemoteAudioInf(e).then((function(e,t){__Rtc.CR__GetRemoteAudioInfRslt.call([e,t])}))},Cr.iceReq=(e,t,...n)=>{let i=!0,r=!0;return"addElement"!=t&&"netDetectResults"!=t&&"startCloudRecord"!=t||(r=!1),"netDetectResults"==t&&(i=!1),new Promise(((o,s)=>{try{if(!CRVideo.isMeeting)return;try{i&&r&&console.crlog(`[ICE] Ice Request [${e}:${t}],${JSON.stringify(n)}`),i&&!r&&console.crlog(`[ICE] Ice Request [${e}:${t}],args...`)}catch(e){console.error(e)}Cr._proxy[e][t](...n).then((function(...n){return i&&console.crlog(`[ICE] Ice Request [${e}:${t}] success!`),n.unshift(0),o(n)})).exception((function(n){return i&&console.crlog(`[ICE][Error] Ice Request [${e}:${t}] fail,${n.toString()}`),s(n)}))}catch(e){return i&&console.crlog(`[ICE][Error] Conference Request error: ${e}`),s(e)}}))},Cr.LHProxy.prototype.setContainerSize=function(e,t){var n=new Cr.AsyncResult;try{this._whiteBoardCtrl.setContainerSize(e,t).then(function(){n.complete([0,""])}.bind(this)).exception(function(e){n.complete([204,"网络错误"]),console.crlog&&console.crlog(e.toString()),console.crlog&&console.crlog(e.stack)}.bind(this))}catch(e){n.complete([3,e.toString()])}return n},Cr.LHProxy.prototype.importPage=function(e,t){for(var n=new Cr.AsyncResult,i=[],r=new Conference.TabID(e.termID,e.localID),o=0;o<t.length;o++){var s=t[o].pageNo,a=t[o].imgType,c=t[o].imgResourceID,l=t[o].elementList;i[o]=new Conference.PageData(s,a,c,l)}try{this._whiteBoardCtrl.importPage(r,i).then(function(){n.complete([0,""])}.bind(this)).exception(function(e){n.complete([204,"网络错误"]),console.crlog&&console.crlog(e.toString()),console.crlog&&console.crlog(e.stack)}.bind(this))}catch(e){n.complete([3,e.toString()])}return n},Cr.LHProxy.prototype.changeName=function(e,t){var n=new Cr.AsyncResult;try{this._whiteBoardCtrl.changeName(e,t).then(function(){n.complete([0,""])}.bind(this)).exception(function(e){n.complete([204,"网络错误"]),console.crlog&&console.crlog(e.toString()),console.crlog&&console.crlog(e.stack)}.bind(this))}catch(e){n.complete([3,e.toString()])}return n},Cr.LHProxy.prototype.changeScale=function(e,t){var n=new Cr.AsyncResult,i=new Conference.WB_SCALE_TYPE(t);try{this._whiteBoardCtrl.changeScale(e,i).then(function(){n.complete([0,""])}.bind(this)).exception(function(e){n.complete([204,"网络错误"]),console.crlog&&console.crlog(e.toString()),console.crlog&&console.crlog(e.stack)}.bind(this))}catch(e){n.complete([3,e.toString()])}return n},Cr.LHProxy.prototype.changeRatote=function(e,t){var n=new Cr.AsyncResult,i=new Conference.WB_ROTATE_TYPE(t);try{this._whiteBoardCtrl.changeRatote(e,i).then(function(){n.complete([0,""])}.bind(this)).exception(function(e){n.complete([204,"网络错误"]),console.crlog&&console.crlog(e.toString()),console.crlog&&console.crlog(e.stack)}.bind(this))}catch(e){n.complete([3,e.toString()])}return n},Cr.LHProxy.prototype.showThumPage=function(e,t){var n=new Cr.AsyncResult;try{this._whiteBoardCtrl.showThumPage(e,t).then(function(){n.complete([0,""])}.bind(this)).exception(function(e){n.complete([204,"网络错误"]),console.crlog&&console.crlog(e.toString()),console.crlog&&console.crlog(e.stack)}.bind(this))}catch(e){n.complete([3,e.toString()])}return n},Cr.LHProxy.prototype.moveElement=function(e,t,n){var i=new Cr.AsyncResult,r=new Conference.ElementPos(n);try{this._whiteBoardCtrl.moveElement(e,t,r).then(function(){i.complete([0,""])}.bind(this)).exception(function(e){i.complete([204,"网络错误"]),console.crlog&&console.crlog(e.toString()),console.crlog&&console.crlog(e.stack)}.bind(this))}catch(e){i.complete([3,e.toString()])}return i},Cr.LHProxy.prototype.modifyElement=function(e,t,n){var i=new Cr.AsyncResult,r=new Conference.ElementID(n.eID.ownerID,n.eID.ID),o=new Conference.ElementData(r,n.orderId,n.left,n.top,n.type,n.noused,n.data);try{this._whiteBoardCtrl.modifyElement(e,t,o).then(function(){i.complete([0,""])}.bind(this)).exception(function(e){i.complete([204,"网络错误"]),console.crlog&&console.crlog(e.toString()),console.crlog&&console.crlog(e.stack)}.bind(this))}catch(e){i.complete([3,e.toString()])}return i},Cr.LHProxy.prototype.setElementZPos=function(e,t,n){var i=new Cr.AsyncResult,r=new Conference.WB_ELEMENT_ZPOS(n);try{this._whiteBoardCtrl.setElementZPos(e,t,r).then(function(){i.complete([0,""])}.bind(this)).exception(function(e){i.complete([204,"网络错误"]),console.crlog&&console.crlog(e.toString()),console.crlog&&console.crlog(e.stack)}.bind(this))}catch(e){i.complete([3,e.toString()])}return i},Cr.LHProxy.prototype.setIndicator=function(e,t){var n=new Cr.AsyncResult,i=new Conference.IndicatorData(t);try{this._whiteBoardCtrl.setIndicator(e,i).then(function(){n.complete([0,""])}.bind(this)).exception(function(e){n.complete([204,"网络错误"]),console.crlog&&console.crlog(e.toString()),console.crlog&&console.crlog(e.stack)}.bind(this))}catch(e){n.complete([3,e.toString()])}return n},Cr.LHProxy.prototype.setHotspot=function(e,t,n,i){var r=new Cr.AsyncResult;try{this._whiteBoardCtrl.setHotspot(e,t,n,i).then(function(){r.complete([0,""])}.bind(this)).exception(function(e){r.complete([204,"网络错误"]),console.crlog&&console.crlog(e.toString()),console.crlog&&console.crlog(e.stack)}.bind(this))}catch(e){r.complete([3,e.toString()])}return r},Cr.LHProxy.prototype.queryIndicator=function(e){var t=new Cr.AsyncResult;try{this._whiteBoardCtrl.queryIndicator(e).then(function(e){for(var n=[],i=0;i<e.length;i++)n.push(new Conference.IndicatorData(e[i]));t.complete([0,"",n])}.bind(this)).exception(function(e){t.complete([204,"网络错误"]),console.crlog&&console.crlog(e.toString()),console.crlog&&console.crlog(e.stack)}.bind(this))}catch(e){t.complete([3,e.toString()])}return t},Cr.LHProxy.prototype.setMarkTerms=function(e,t,n){for(var i=new Cr.AsyncResult,r=[],o=0;o<describeSeq.length;o++)r.push(new Conference.ElementID(eIds[o].ownerID,eIds[o].ID));try{this._whiteBoardCtrl.setMarkTerms(e,t,n).then(function(){i.complete([0,""])}.bind(this)).exception(function(e){i.complete([204,"网络错误"]),console.crlog&&console.crlog(e.toString()),console.crlog&&console.crlog(e.stack)}.bind(this))}catch(e){i.complete([3,e.toString()])}return i}},5273:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var i=n(4719),r=n(7693),o=n(9176),s=n(3826),a=n(3085);const c=window.Ice,l=window.CRVideo,d=window.Cr,u=window.Conference,h=window.Resm;const f=window.rtcProxy=new class{constructor(){this.initData()}initData(){console.crlog("[Proxy] ProxyModule initData..."),this.crmtStr="",this.userDetail=null,this.startPingTime=0,this.acssvrs=[],this.bestNetworkAccessSvr=null,this.AccessLoginStartTime=null,this.crmt=null,this.waitAvailableTimer=-1,this.curAccessServer=null,this.loginRequest=null,this.availableSvrs=[]}loginControl(e,t){console.crlog("[Proxy] Control login begain..."),this.AccessLoginStartTime=(new Date).getTime(),this.crmtStr=e,this.userDetail=t,d._proxy._logining=!0,d._proxy.initCon(),this.getWebrtcAccKey(e).then((e=>{this.parseCrmt(e),this.probeAcssvr().then((()=>{this.connectToAccess(this.bestNetworkAccessSvr).then((e=>(console.crlog(`[Proxy] Access ${this.curAccessServer.acssvr[0]} connected.. do login control..`),d._proxy._adapter=e,this.serverLogin())))})).catch((e=>__Rtc.CR__LoginRslt.callback(e[0],e[1].toString())))})).catch((e=>__Rtc.CR__LoginRslt.callback(e[0],e[1].toString())))}serverLogin(e){console.crlog("[Proxy] Server login...");const t="c"+this.crmt.MEET[0]+"/ConferenceRoom  @ c"+this.crmt.MEET[0]+"-ReplicaConfCtrlAdapters";e=e||u.ConferenceRoomPrx.uncheckedCast(d._proxy._communicator.stringToProxy(t)),this.loginRequest||(this.loginRequest=this.getLoginRequest()),e.login(this.loginRequest).then((e=>{let t=this.parseLoginResponse(e);return console.crlog(`[Proxy] Access & control login consuming: ${(new Date).getTime()-this.AccessLoginStartTime}ms`),__Rtc.CR__LoginRslt.callback(0,"",t)})).exception((t=>{d._proxy._logining=!1,this.handlerLoginException(t,e).then((e=>__Rtc.CR__LoginRslt.callback(e[0],e[1])))}))}getWebrtcAccKey(e){return new Promise(((t,n)=>{const o=`https://${l.webServerAddr}${i.Z.getWebrtcAccKey}`;let c=a.Z.base64decode(e);c=`${c}\r\n-PRODUCT=win32_net`,c=`${c}\r\n-JSCLIENT=webrtc`;const u=`crmt:${a.Z.base64encode(c).replace(/\r\n/g,"")}`;console.crlog(`[Proxy] Web request:${o}, data: crmt:******`),(0,r.Z)({type:"POST",url:o,data:u,dataType:"text",success:(e,i)=>"success"==i?-1!=e.indexOf("erro:")?(d._proxy._logining=!1,-1!=e.indexOf("erro:2")?n([800,e]):n([3,e])):t(e):(d._proxy._logining=!1,n([202,"服务器没有响应"])),error:e=>("MeetSDK"==l.SDKKey?(console.crlog(`[Proxy] MeetSDK.enterMeetingRslt.target(202, '', '', ${l.enterMeetingCookie})`),s.Z.enterMeetingRslt.target(202,"","",l.enterMeetingCookie)):(console.crlog(`[Proxy] CRVideo_EnterMeetingRslt.target(202, ${l.enterMeetingCookie})`),CRVideo_EnterMeetingRslt.target(202,l.enterMeetingCookie)),CRVideo_UploadingLog(),console.crlog(`[Proxy][Error] Web api getWebrtcAccKey fail! ${e}`),console.error(e),d._proxy._logining=!1,n([1,"未知错误"]))})}))}parseCrmt(e){this.crmt={};const t=a.Z.base64decode(e.substr(5)).split("\n");for(let e=0;e<t.length;e++){let n=t[e].match(/-(\w+?)=(\S+)/);null!=n&&3==n.length&&(this.crmt[n[1]]=n[2],console.crlog(`[Proxy] parseCrmt>${e}: ${n[1]} ${n[2]}`))}let n=this.crmt.ACNT.split(";"),i=n[3].match(/../g),r=new ArrayBuffer(i.length),s=new DataView(r),l=[];for(let e=0;e<i.length;e++)s.setUint8(e,parseInt(i[e],16)),l[e]=s.getUint8(e);let d=a.Z.utf8ByteToUnicodeStr(l);n[3]=d,this.userDetail.nickname=""==this.userDetail.nickname?d:this.userDetail.nickname,this.userDetail.userId=""==this.userDetail.userId?o.Z.userInfo.getUserInfo(d)?o.Z.userInfo.getUserInfo(d):c.generateUUID():this.userDetail.userId,this.crmt.ACNT=n,this.crmt.ACNT[1]=4==this.crmt.ACNT[1]?6:this.crmt.ACNT[1],this.crmt.MEET=this.crmt.MEET.split(";");let u=this.crmt.ACSSVR.split(";"),h=[];for(var f=0;f<u.length;f++)""!=u[f]&&h.push(u[f].split(":"));this.crmt.ACSSVR=h}probeAcssvr(){return new Promise(((e,t)=>{d._proxy._communicator=c.initialize(d._proxy._initData),l.communicatorIc=d._proxy._communicator,this.getFastestNetSvr().then((n=>(n.forEach((e=>{this.bestNetworkAccessSvr||-1==e.delay?this.bestNetworkAccessSvr.delay>e.delay&&-1!=e.delay&&(this.bestNetworkAccessSvr=e):this.bestNetworkAccessSvr=e})),this.bestNetworkAccessSvr?e():(console.crlog("[Resm][Error] Login to access fail, have not available access server!"),t([205,"没有可用服务器"]))))).catch((()=>(console.crlog("[Resm][Error] Login to access fail, have not available access server!"),t([205,"没有可用服务器"]))))}))}getFastestNetSvr(){return new Promise(((e,t)=>{const n=this.crmt.ACSSVR;this.availableSvrs=[],n.forEach(((t,i)=>{this.accessPing(t,i).then((t=>{if(this.availableSvrs.push(t),this.availableSvrs.length==n.length)return clearInterval(this.waitAvailableTimer),e(this.availableSvrs)}))}));let i=200;const r=()=>{this.waitAvailableTimer=setTimeout((()=>this.availableSvrs.length>0?e(this.availableSvrs):i<=15e3?(i+=200,clearTimeout(this.waitAvailableTimer),void r()):t()),200)};r()}))}accessPing(e,t){return console.crlog(`[Resm] Ping 第 ${t+1} 台服务器：${JSON.stringify(e)}`),new Promise(((t,n)=>{var i=e[3];if(i.indexOf("sig")>-1){var r=parseInt(i.split("/sig/")[0]);i="/sig/"+i.split("/sig/")[1];let t="s"+e[0]+"/Access:"+d._proxy._protocol+" -r "+i+" -h "+e[1]+" -p "+r+" -t 5000";console.crlog(`[Resm] StringToProxy: ${t}`);var o=Glacier2.RouterPrx.uncheckedCast(d._proxy._communicator.stringToProxy(t))}else{r=parseInt(e[3])+4;let t="s"+e[0]+"/Access:"+d._proxy._protocol+" -h "+e[1]+" -p "+r+" -t 5000";console.crlog(`[Resm] StringToProxy: ${t}`);o=Glacier2.RouterPrx.uncheckedCast(d._proxy._communicator.stringToProxy(t))}this.startPingTime=(new Date).getTime(),o.ice_ping().then(function(){var n=(new Date).getTime()-this.startPingTime,i=d._proxy._protocol+"://"+e[1]+":"+r;return console.crlog(`[Resm] Finish ping(${e[1]}) 耗时：${n}ms, report:${Math.floor(n/4)}`),t({url:i,delay:n,routerPrx:o,acssvr:e})}.bind(this)).exception(function(t){return console.crlog(`[Resm][Error] Finish ping(${e[1]}) Bad Network!`),n({url,delay:-1,acssvr:e})}.bind(this))}))}connectToAccess(e,t){return new Promise(((n,i)=>{console.crlog(`[Access] Connect to access server: ${e.acssvr[0]}, isResmAccess: ${t||!1}`),l.accessSvr=e.acssvr[1],l.accessNo=e.acssvr[0],this.curAccessServer=e,d._proxy._routerPrx=e.routerPrx,d._proxy._routerPrx.createSession("N"+this.crmt.MEET[0],"").then((e=>{d._proxy._session=e})).then((()=>{d._proxy._routerPrx.getCategoryForClient().then((e=>{if(d._proxy._category=e,d._proxy._communicator.setDefaultRouter(d._proxy._routerPrx),t)d._proxy._communicator.createObjectAdapterWithRouter("CallbackAdapter",d._proxy._routerPrx).then((e=>n(e))).exception((e=>i(e)));else{const e=h.AccessMPrx.uncheckedCast(d._proxy._communicator.stringToProxy("d0/AccessM"));let t=this.crmt.DOMAIN.split(";")[0],r=this.crmt.MEET[0],o=this.crmt.MYPUBIP.split(";")[0],s=c.generateUUID(),a=new h.NetworkResult;o=o.split(":")[0],l.myPublicIP=o,this.availableSvrs.forEach((e=>{const t=new h.NetworkStatus;t.latency=Math.floor(e.delay/4),window.__Rtc.__acssvr&&window.__Rtc.__acssvr==e.acssvr[0]&&(t.latency=1),t.lostRate=0,a.set(e.acssvr[0],t)})),console.crlog(`[Resm] NetworkResult: ${JSON.stringify(a)}`),console.crlog(`[Resm] Resm locate${JSON.stringify({domain:t,confID:r,publicIP:o,uuid:s})}`),e.locate(t,r,a,o,s).then((e=>{if(console.crlog(`[Resm] Got resm accessNo: ${e}`),l.resmAccessNo=e,+e!=+this.bestNetworkAccessSvr.acssvr[0]){let t=!1;this.availableSvrs.forEach((r=>{r.acssvr[0]==e&&(t=!0,this.connectToAccess(r,!0).then((e=>n(e))).catch((e=>i(e))))})),t||this.connectToAccess(this.bestNetworkAccessSvr,!0).then((e=>n(e))).catch((e=>i(e)))}else d._proxy._communicator.createObjectAdapterWithRouter("CallbackAdapter",d._proxy._routerPrx).then((e=>n(e))).exception((e=>i(e)))})).exception((e=>(console.crlog(`[Resm][Error] Resm locate fail! ${e}`),console.error(e),d._proxy._communicator.createObjectAdapterWithRouter("CallbackAdapter",d._proxy._routerPrx).then((e=>n(e))).exception((e=>i(e))))))}})).exception((e=>{console.crlog(`[Resm][Error] Resm getCategoryForClient fail! ${e}`),console.error(e)}))}))}))}getLoginRequest(){const e=new u.LoginRequest,t=o.Z.userInfoHistory.getUserHistory(this.crmt.MEET[0],this.userDetail.userId,this.crmt.ACNT[0],this.crmt.ACNT[1]);let n=t?t.memberID:this.crmt.ACNT[0],i=t?t.memberType:this.crmt.ACNT[1],r=t?t.termId:"",s=this.userDetail.nickname,a=this.userDetail.userId,h=window.localStorage.getItem("CRRTCSDK_Client_PC_ID")||c.generateUUID();window.localStorage.setItem("CRRTCSDK_Client_PC_ID",h);let f="",_=/macintosh|mac os x/i.test(navigator.userAgent),p=/windows|win32/i.test(navigator.userAgent),C=/linux/i.test(navigator.userAgent),g=navigator.userAgent.indexOf("Android")>-1||navigator.userAgent.indexOf("Adr")>-1;!!navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)?f="ios":_?f="mac":p?f="win32":g?f="android":C&&(f="linux"),e.memberId=n,e.memberType=i,e.nickname=s,e.termId=r,e.priv_dat=a,e.confId=this.crmt.MEET[0],e.confKey=this.crmt.MEET[1],e.accessNo=this.curAccessServer.acssvr[0],e.callbacks=new c.HashMap,e.extProperty=new c.HashMap,e.publicIP=this.crmt.MYPUBIP,e.extProperty.set("client_platform",f),e.extProperty.set("priv_dat",a),e.extProperty.set("h5sdk_ver",l.sdkver),e.extProperty.set("sdk_ver",l.sdkver),e.extProperty.set("client_pcid",h),e.extProperty.set("browser",__Rtc.CRBrowser.curBrowserCfg.platform),e.extProperty.set("rtc_codecs",window.__Rtc.rtc_codecs),e.extProperty.set("client_device",u.DEVICETYPE_WEBRTC),e.extProperty.set("slice_ver",u.SLICE_VER);var m=new c.Identity;m.name="ConferenceCallback",m.category=d._proxy._category,d._proxy._conferenceReceptor=new __Rtc.ConferenceReceptor,d._proxy._conferenceReceptor.setProxy(d._proxy),d._proxy._adapter.add(d._proxy._conferenceReceptor,m);var I=u.ConferenceCallbackPrx.uncheckedCast(d._proxy._adapter.createDirectProxy(m));e.callbacks.set("ConferenceCallback",I);var R=new c.Identity;R.name="IMCallback",R.category=d._proxy._category,d._proxy._chatReceptor=new __Rtc.ChatReceptor,d._proxy._chatReceptor.setProxy(d._proxy),d._proxy._adapter.add(d._proxy._chatReceptor,R);var y=u.IMCallbackPrx.uncheckedCast(d._proxy._adapter.createDirectProxy(R));e.callbacks.set("IMCallback",y);var S=new c.Identity;S.name="AnsQueCallback",S.category=d._proxy._category,d._proxy._ansQueReceptor=new __Rtc.AnsQueReceptor,d._proxy._ansQueReceptor.setProxy(d._proxy),d._proxy._adapter.add(d._proxy._ansQueReceptor,S);var v=u.AnsQueCallbackPrx.uncheckedCast(d._proxy._adapter.createDirectProxy(S));e.callbacks.set("AnsQueCallback",v);var E=new c.Identity;E.name="VideoCallback",E.category=d._proxy._category,d._proxy._videoReceptor=new __Rtc.VideoReceptor,d._proxy._videoReceptor.setProxy(d._proxy),d._proxy._adapter.add(d._proxy._videoReceptor,E);var w=u.VideoCallbackPrx.uncheckedCast(d._proxy._adapter.createDirectProxy(E));e.callbacks.set("VideoCallback",w);var b=new c.Identity;b.name="AudioCallback",b.category=d._proxy._category,d._proxy._audioReceptor=new __Rtc.AudioReceptor,d._proxy._audioReceptor.setProxy(d._proxy),d._proxy._adapter.add(d._proxy._audioReceptor,b);var D=u.AudioCallbackPrx.uncheckedCast(d._proxy._adapter.createDirectProxy(b));e.callbacks.set("AudioCallback",D);var M=new c.Identity;M.name="MS.MSClient",M.category=d._proxy._category,d._proxy._mSClientI=new __Rtc.MSClientI,d._proxy._mSClientI.setProxy(d._proxy),d._proxy._adapter.add(d._proxy._mSClientI,M);var T=MS.MSClientPrx.uncheckedCast(d._proxy._adapter.createDirectProxy(M));e.callbacks.set("MS.MSClient",T);var P=new c.Identity;P.name="ScreenShareClient",P.category=d._proxy._category,d._proxy._screenShareReceptor=new __Rtc.ScreenShareReceptor,d._proxy._screenShareReceptor.setProxy(d._proxy),d._proxy._adapter.add(d._proxy._screenShareReceptor,P);var x=u.ScreenShareClientPrx.uncheckedCast(d._proxy._adapter.createDirectProxy(P));e.callbacks.set("ScreenShareClient",x);var A=new c.Identity;A.name="MediaCallback",A.category=d._proxy._category,d._proxy._mediaReceptor=new __Rtc.MediaReceptor,d._proxy._mediaReceptor.setProxy(d._proxy),d._proxy._adapter.add(d._proxy._mediaReceptor,A);var O=u.MediaCallbackPrx.uncheckedCast(d._proxy._adapter.createDirectProxy(A));e.callbacks.set("MediaCallback",O);var V=new c.Identity;V.name="WhiteBoardCallback",V.category=d._proxy._category,d._proxy._whiteBoardReceptor=new __Rtc.WhiteBoardReceptor,d._proxy._whiteBoardReceptor.setProxy(d._proxy),d._proxy._adapter.add(d._proxy._whiteBoardReceptor,V);var k=u.WhiteBoardCallbackPrx.uncheckedCast(d._proxy._adapter.createDirectProxy(V));e.callbacks.set("WhiteBoardCallback",k);var N=new c.Identity;N.name="SyncCtrlCallback",N.category=d._proxy._category,d._proxy._syncCtrlReceptor=new __Rtc.SyncCtrlReceptor,d._proxy._syncCtrlReceptor.setProxy(d._proxy),d._proxy._adapter.add(d._proxy._syncCtrlReceptor,N);var L=u.SyncCtrlCallbackPrx.uncheckedCast(d._proxy._adapter.createDirectProxy(N));return e.callbacks.set("SyncCtrlCallback",L),e}parseLoginResponse(e){this.crmt.WEBLOGCFG&&!l.logproxy&&__Rtc.postCmd.IceLogCreate();const t={};t.termId=e.termId,t.activeMembers=e.activeMembers,t.myDetail=e.myDetail,t.serverTime=1e3*e.ServerUTCTime-(new Date).getTime(),t.isBegan=e.isBegan,t.countdown=e.countdown,t.mainVideoTermID=e.mainVideoTermID,t.wbDescibes=e.wbDescibes,t.ServerUTCTime=e.ServerUTCTime,t.bAllowWall=e.bAllowWall,t.bFull=e.bFull,t.bRoomLocked=e.bRoomLocked,t.curMainTab=e.curMainTab,t.curSubTab=e.curSubTab,t.option=e.option,t.lastElemValue=e.lastElemValue,t.lastTabValue=e.lastTabValue,t.windowMode=e.windowMode,t.meetID=+this.crmt.MEET[0];for(var n=e.confInfo.keys(),i={},r=0;r<n.length;r++)i[n[r]]=e.confInfo.get(n[r]);i.confid=+this.crmt.MEET[0],t.confInfo=i,o.Z.server.wbServer=i.ccfg_wbv2_h5||"";for(let e=0;e<t.activeMembers.length;e++){var s=t.activeMembers[e];window.__Rtc.CRRTCConf.parseMemberInfo(s),s.termId==t.termId&&(t.nickname=s.nickname,t.userId=s.userId,t.bindId=s.bindId,t.openedCamIDs=s.openedCamIDs)}return d._proxy._screenShareCtrl=u.ScreenShareCtrlPrx.uncheckedCast(e.modules.get("ScreenShareCtrl")),d._proxy._whiteBoardCtrl=u.WhiteBoardCtrlPrx.uncheckedCast(e.modules.get("WhiteBoardCtrl")),d._proxy._chatRequest=u.IMSessionPrx.uncheckedCast(e.modules.get("IMSession")),d._proxy._mediaCtrl=u.MediaCtrlPrx.uncheckedCast(e.modules.get("MediaCtrl")),d._proxy._ansQuesCtrl=u.AnsQuesCtrlPrx.uncheckedCast(e.modules.get("AnsQuesCtrl")),d._proxy._syncCtrl=u.SyncCtrlPrx.uncheckedCast(e.modules.get("SyncCtrl")),d._proxy._audioCtrl=u.AudioCtrlPrx.uncheckedCast(e.modules.get("AudioCtrl")),d._proxy._conferenceRequest=u.ConferenceSessionPrx.uncheckedCast(e.modules.get("ConferenceSession")),d._proxy._clientReport=MS.ClientReportPrx.uncheckedCast(e.modules.get("MS.ClientReport")),d._proxy._videoCtrl=u.VideoCtrlPrx.uncheckedCast(e.modules.get("VideoCtrl")),d._proxy._logining=!1,o.Z.userInfoHistory.setUserHistory(+this.crmt.MEET[0],t.userId,+e.myDetail.id,+e.myDetail.type,{termId:e.termId,memberType:e.myDetail.type,memberID:e.myDetail.id}),setTimeout((()=>{console.crlog(`[Resm] Finally using accessNo: ${l.accessNo}`),this.availableSvrs.forEach((e=>{+e.acssvr[0]!=+l.accessNo&&e.routerPrx.ice_getConnection().then((t=>{console.crlog(`[Resm] Close access connection: ${e.acssvr[0]}`),t.close()}))}))}),5e3),new d.MeetInfo(t)}handlerLoginException(e){return new Promise(((t,n)=>{const o=e.toString();if(console.crlog(o),e instanceof c.SocketException)return t([204,"websocket错误"]);if(e instanceof u.MemberOverflowError||e instanceof Glacier2.CannotCreateSessionException)return t([802,"超出并发数"]);if(e instanceof u.RoomLockedError)return t([804,"房间已加锁"]);if(e instanceof u.OnlyInviteeCanLogin)return t([70004,"只有被邀请的用户才能入会"]);if(e instanceof u.BalanceLessError)return t([805,"账户余额不足"]);if(e instanceof u.MemberAlreadyInMeet)return t([807,"用户已存在"]);if(e instanceof u.MemberAlreadyInCanTryVisitor)return l.reEnterMeetTimes||(l.reEnterMeetTimes=1),l.reEnterMeetTimes<5?void setTimeout((()=>(console.crlog(`[ICE] ReEnter meeting:${l.reEnterMeetTimes}`),l.reEnterMeetTimes++,this.crmt.ACNT[0]=0,this.crmt.ACNT[1]=6,this.loginRequest&&(this.loginRequest.memberId=0,this.loginRequest.memberType=6,this.loginRequest.termId=""),this.serverLogin())),1e3):t([808,"身份重复，需要用临时身份重新入会"]);if(e instanceof c.ObjectNotExistException||e instanceof u.ConferenceEndError)return l.reEnterMeetTimes||(l.reEnterMeetTimes=1),l.reEnterMeetTimes<5?void setTimeout((()=>{console.crlog(`[ICE] ReEnter meeting:${l.reEnterMeetTimes}`),l.reEnterMeetTimes++,console.crlog("[Proxy] Arrange conf with webApi: /servlet/ArrangeConfAPI");const e=`https://${l.webServerAddr}${i.Z.ArrangeConfAPI}`;(0,r.Z)({type:"POST",url:e,dataType:"jsonp",jsonp:"jsoncallback",data:{MeetID:Number(this.crmt.MEET[0]),RequestId:c.generateUUID()},success:e=>{setTimeout((()=>{console.crlog("[ICE] ReLogin control after arrange conference..."),this.serverLogin()}),500)},error:e=>(console.crlog(`[Proxy] /servlet/ArrangeConfAPI request fail! ${e}`),t([803,e.toString()]))})}),1e3):t([803,e.toString()]);if(!(e instanceof u.ConferencePrepareError||e instanceof u.ConferenceBusy||e instanceof u.ConferenceLoginRetry||e instanceof c.FacetNotExistException))return e instanceof u.EnterWaitingRoom?t([70005,"请等待主持人邀请进入会议"]):t([1,e.toString()]);if(l.reEnterMeetTimes||(l.reEnterMeetTimes=1),l.reEnterMeetTimes<=10)setTimeout((()=>{console.crlog(`[ICE] ReEnter meeting:${l.reEnterMeetTimes}`),l.reEnterMeetTimes++,this.serverLogin()}),200);else{if(!(l.reEnterMeetTimes<=15))return t([800,e.toString()]);setTimeout((()=>{console.crlog(`[ICE] ReEnter meeting:${l.reEnterMeetTimes}`),l.reEnterMeetTimes++,this.serverLogin()}),1e3)}}))}}},5043:()=>{!function(e,t,n){class i{constructor(e){this.msid=e,this.offer=null,this.answer=null,this.offer_cb=null,this.answer_cb=null,this.connection=null,this.candidates=[],this.stream=null,this.logstr=null,this.isResponsedCandidate=!1}}e.__crMediaClass=class{constructor(){this.initData(),this.initIceCallback(),this.initSDKInterface()}initData(){console.crlog("[Media] MediaShareModule initData..."),this.mediaFileInfo={isAudioFile:!1,name:null,url:null,FileObj:null},this.mediaShareInfo={userID:null,mediaName:null,state:null},this.container=null,this.bPauseWhenFinished=!1,this.isLocalPlay=!1,this.localMediaAudioConnection=new i(this.mediaAudioMSID++),this.localMediaVideoConnection=new i(this.localMediaMSID++),this.remoteMediaConnection=new i(this.remoteMediaMSID++),this.localMediaMSID=14e4,this.mediaAudioMSID=15e4,this.remoteMediaMSID=24e4,clearInterval(this.canvasDrawTimer),this.canvasDrawTimer=-1}initIceCallback(){this.ICECallback={notifyStartPlayMedia:e=>{console.crlog(`[Media] ICE Notify --\x3e notifyStartPlayMedia, params:${JSON.stringify({mediaShareInfo:e})}`),e.state=e.state.value;const t=n.allMemberInfo.find((t=>t.termId==e.termid)),i=t?t.userId:"";e.termid!==CRVideo.userInfo.termId&&__Rtc.CRICEAPI.SubscribeMedia(!0),this.mediaShareInfo.userID=i,this.mediaShareInfo.mediaName=e.mediaName,this.mediaShareInfo.state=e.state,console.crlog(`[Media] CRVideo_NotifyMediaStart.target(${i})`),CRVideo_NotifyMediaStart.target(i)},notifyStopPlayMedia:e=>{console.crlog(`[Media] ICE Notify --\x3e notifyStopPlayMedia, params:${JSON.stringify({operator:e})}`),n.isMeeting&&e!==n.userInfo.termId&&__Rtc.CRICEAPI.SubscribeMedia(!1);const t=n.allMemberInfo.find((t=>t.termId==e)),i=t?t.userId:"";this.container&&(this.container._videoEle.srcObject=null),this.mediaShareInfo.userID=null,this.mediaShareInfo.mediaName=null,this.mediaShareInfo.state=2,n.isMeeting&&console.crlog(`[Media] CRVideo_NotifyMediaStop.target(${i})`),n.isMeeting&&CRVideo_NotifyMediaStop.target(i)},notifyPausePlayMedia:(e,t)=>{console.crlog(`[Media] ICE Notify --\x3e notifyPausePlayMedia, params:${JSON.stringify({operator:e,bPause:t})}`);const i=n.allMemberInfo.find((t=>t.termId==e)),r=i?i.userId:"",o=t?1:0;this.mediaShareInfo.state=o,console.crlog(`[Media] CRVideo_NotifyMediaPause.target(${r},${o})`),CRVideo_NotifyMediaPause.target(r,o)},notifyMakeIFrame:e=>{console.crlog("[Media] ICE Notify --\x3e notifyMakeIFrame")},notifySubscribeMedia:e=>{console.crlog(`[Media] ICE Notify --\x3e notifySubscribeMedia, params:${JSON.stringify({bSub:e})}`)},startPlayMediaRslt:e=>{console.crlog(`[Media] ICE Callback --\x3e startPlayMediaRslt, params:${JSON.stringify({errCode:e})}`)},stopPlayMediaRslt:e=>{console.crlog(`[Media] ICE Callback --\x3e stopPlayMediaRslt, params:${JSON.stringify({errCode:e})}`)},getMediaInfoRslt:(e,t)=>{if(console.crlog(`[Media] ICE Callback --\x3e getMediaInfoRslt, params:${JSON.stringify({errCode:e,data:t})}`),0==e){if(2!==t.state.value)return void __Rtc.CRRTCMedia.ICECallback.notifyStartPlayMedia(t);t.state=t.state.value;const e=n.allMemberInfo.find((e=>e.termId==t.termid));this.mediaShareInfo.userID=e?e.userId:"",this.mediaShareInfo.state=t.state,this.mediaShareInfo.mediaName=t.mediaName}},pausePlayMediaRslt:e=>{console.crlog(`[Media] ICE Callback --\x3e pausePlayMediaRslt, params:${JSON.stringify({errCode:e})}`)},subscribeMediaRslt:e=>{console.crlog(`[Media] ICE Callback --\x3e subscribeMediaRslt, params:${JSON.stringify({errCode:e})}`)}}}initSDKInterface(){e.CRVideo_StartPlayMedia=(e,t,i,r)=>{if(console.crlog(`[Media] CRVideo_StartPlayMedia(${e},${t},${i},${r})`),!e||!e._id)return console.crlog("[Media] Start play media fail, did not create mediaObj"),0;if(this.container=e,this.container._userID=n.userInfo.userId,this.isLocalPlay=void 0!==i&&!!i,this.bPauseWhenFinished=void 0===r?0:r,!MediaSource&&!t)return console.crlog("[Media] Start play media fail, the File object is not audio or video"),console.crlog("[Media] CRVideo_StartPlayMedia, return: 0"),0;try{if(t instanceof File){if("Chrome"==__Rtc.CRBrowser.curBrowserCfg.name||"Edg"==__Rtc.CRBrowser.curBrowserCfg.name){if(!/(.mp3|.mkv|.mp4|.webm)$/.test(t.name))return console.crlog("[Media] Start play media fail, Chrome does not support this file type"),console.crlog("[Media] CRVideo_StartPlayMedia, return: 0"),0}else if("Firefox"==__Rtc.CRBrowser.curBrowserCfg.name){if(!/(.mp3|.mp4|.webm)$/.test(t.name))return console.crlog("[Media] Start play media fail, Firefox does not support this file type"),console.crlog("[Media] CRVideo_StartPlayMedia, return: 0"),0}else if("Safari"==__Rtc.CRBrowser.curBrowserCfg.name&&!/(.mp3|.mp4)$/.test(t.name))return console.crlog("[Media] Start play media fail, Safari does not support this file type"),console.crlog("[Media] CRVideo_StartPlayMedia, return: 0"),0;/(.mp3)$/.test(t.name)&&(this.mediaFileInfo.isAudioFile=!0),this.mediaFileInfo.FileObj=t,this.mediaFileInfo.name=t.name,this.mediaFileInfo.url=URL.createObjectURL(t)}else{if("string"!=typeof t)return console.crlog("[Media] CRVideo_StartPlayMedia, return: 0"),0;this.mediaFileInfo.name=t.match(/[^/]+(?!.*\/)/),this.mediaFileInfo.url=t}const e=this.container._videoEle;return e.loop=2==this.bPauseWhenFinished,e.srcObject=null,e.src=this.mediaFileInfo.url,setTimeout((()=>{e.click(),e.play()}),100),e.onplaying=()=>{console.crlog("[Media] Video event: onplaying"),n.isMeeting&&!this.isLocalPlay&&!this.ispaused&&__Rtc.CRICEAPI.StartPlayMedia(this.mediaFileInfo.name),this.ispaused=!1,this.pausePlayMedia(!1)},e.onpause=()=>{console.crlog("[Media] Video event: onpause"),this.ispaused=!0,this.pausePlayMedia(!0)},e.onended=()=>{console.crlog("[Media] Video event: onended"),this.ispaused=!1,0==this.bPauseWhenFinished&&this.endMediaPlay()},e.onerror=e=>{console.crlog(`[Media] Video event: error, ${e}`)},1}catch(e){return console.crlog(`[Media] Start play media fail, err: ${e}`),console.crlog("[Media] CRVideo_StartPlayMedia, return: 0"),0}},e.CRVideo_PausePlayMedia=e=>{console.crlog(`[Media] CRVideo_PausePlayMedia(${e})`),this.pausePlayMedia(e)},e.CRVideo_StopPlayMedia=()=>{console.crlog("[Media] CRVideo_StopPlayMedia()"),this.endMediaPlay()},e.CRVideo_SetMediaplaypos=e=>{console.crlog(`[Media] CRVideo_SetMediaplaypos(${e}`),this.container&&(this.container._videoEle.currentTime=e/1e3),console.crlog(`[Media] CRVideo_NotifyPlayPosSetted.target(${e})`),CRVideo_NotifyPlayPosSetted.target(e)},e.CRVideo_SetMediaVolume=e=>{console.crlog(`[Media] CRVideo_SetMediaVolume(${e})`);const t=this.container._videoEle;t&&(t.volume=e/100,t.muted=!1)},e.CRVideo_Getmediainfo=e.CRVideo_GetMediaInfo=()=>{const e={};return e.userID=this.mediaShareInfo.userID,e.mediaName=this.mediaShareInfo.mediaName,e.state=this.mediaShareInfo.state,console.crlog(`[Media] CRVideo_GetMediaInfo(), return: ${JSON.stringify(e)}`),e},e.CRVideo_GetMediaImg=(e,t)=>{console.crlog(`[Media] CRVideo_GetMediaImg(${e},${t})`);const n=document.createElement("canvas"),i=this.container._videoEle;if(!i)return{dat,width,height};n.width=i.videoWidth,n.height=i.videoHeight,n.getContext("2d").drawImage(i,0,0,n.width,n.height);return{dat:n.toDataURL("image/"+t||0),width:n.width,height:n.height}}}updateMediaShareInfo(){console.crlog("[Media] Update media share info"),__Rtc.CRICEAPI.GetMediaInfo()}pausePlayMedia(e){this.container&&(e?(this.container._videoEle.click(),this.container._videoEle.pause(),this.isLocalPlay||__Rtc.CRICEAPI.PausePlayMedia(!0)):(this.container._videoEle.click(),this.container._videoEle.play(),this.isLocalPlay||__Rtc.CRICEAPI.PausePlayMedia(!1)))}endMediaPlay(){const e=this.container?this.container._videoEle:null;e&&(e.pause(),e.src="",e.srcObject=null,this.container=null),this.isLocalPlay||__Rtc.CRICEAPI.StopPlayMedia(),this.ispaused=!1,clearInterval(this.canvasDrawTimer)}getBaseStream(e){let t=null;if(this.container){const n=this.container._videoEle,i=__Rtc.CRBrowser.curBrowserCfg;if("audio"==e){console.crlog("[Media] Capture media audio stream from video element...");try{"captureStream"in n?t=n.captureStream():"mozCaptureStream"in n?t=n.mozCaptureStream():"webkitCaptureStream"in n&&(t=n.webkitCaptureStream())}catch(e){console.crlog(`[Media][Error] Get media audio base stream fail: ${e}`),console.error(e)}}else if("Safari"!==i.name&&"Chrome"==i.name&&i.ver<88||"Edg"==i.name&&i.ver<88){console.crlog("[Media] Capture media video stream from video element...");try{"captureStream"in n?t=n.captureStream():"mozCaptureStream"in n?t=n.mozCaptureStream():"webkitCaptureStream"in n&&(t=n.webkitCaptureStream())}catch(e){console.crlog(`[Media][Error] Get media video base stream fail: ${e}`),console.error(e)}}else{console.crlog("[Media] Capture media video base stream from canvas element...");try{const e=this.container._videoEle,n=document.createElement("canvas");n.style.height="1px",n.style.width="1px",this.container._handler.appendChild(n),n.width=e.videoWidth>1920?1920:e.videoWidth,n.height=e.videoHeight>1080?1080:e.videoHeight,console.crlog(`[Media] width:${n.width}, height:${n.height}, fps:15`),this.canvasDrawTimer=setInterval((()=>{n.getContext("2d").drawImage(e,0,0,n.width,n.height)}),50),t=n.captureStream(20)}catch(e){console.error(e)}}}return t||console.crlog("[Media][Error] Your browser does NOT supports pre-recorded media streaming!"),t}audioAllocRawExt2(e,i,r,o){console.crlog("[Media] Local media audio, audioAllocRawExt2...");const s=this.localMediaAudioConnection,a=`[Media] MSID:${s.msid}, Local media audio RTCPeerConnection,`;s.logstr=a,s.offer_cb=e,s.offer_cb.isResponsed=!1;const c=setTimeout((()=>{s.offer_cb.isResponsed||(console.crlog(`${a} offer_cb ice_response()...(No candidate for more than 20 s)`),s.offer_cb.ice_response(),s.offer_cb.isResponsed=!0)}),2e4),l=this.getBaseStream("audio");if(!l)return;console.crlog(`${a} new RTCPeerConnection...`);const d=new RTCPeerConnection(n.rtcCfg);s.connection=d,console.crlog("[Media] New MediaStream()");const u=new MediaStream;l.getTracks().forEach((e=>{"audio"==e.kind&&(console.crlog("[Media] MediaStream add audioTrack"),u.addTrack(e))})),s.stream=u,console.crlog(`${a} addStream(${s.stream})`),d.addTrack(l.getAudioTracks()[0],u),console.crlog(`${a} createOffer()`),d.createOffer().then((e=>{console.crlog(`${a} createOffer success!`),e.sdp=e.sdp.replace("a=sendrecv","a=sendonly");let t=" ";e.sdp.includes("VP8")&&(t+="VP8"),e.sdp.includes("H264")&&(t+=" H264"),console.crlog(`${a} offer.sdp:${e.sdp.length} ${t}`),s.offer=e,console.crlog(`${a} offer setLocalDescription(offer)`),d.setLocalDescription(e).then((e=>{console.crlog(`${a} offer setLocalDescription success!`)})).catch((e=>{console.crlog(`${a} offer setLocalDescription fail! ${e}`),console.error(e)}))})).catch((e=>{console.crlog(`${a} createOffer fail! ${e}`),console.error(e)})),d.onicecandidate=e=>{if(e.candidate&&!s.offer_cb.isResponsed){s.candidates.push(e.candidate);const n=new t.HashMap;n.set("sdp",s.offer.sdp),n.set("icecandidate",JSON.stringify(s.candidates)),console.crlog(`${a} onicecandidate, response candidates(${s.candidates.length}): ${JSON.stringify(s.candidates)}`),console.crlog(`${a} offer_cb ice_response(${s.msid}, HashMap)...`),s.offer_cb.ice_response(s.msid,n),s.offer_cb.isResponsed=!0,clearTimeout(c)}else console.crlog(`${a} onicecandidate! e.candidate == ${JSON.stringify(e.candidate)}!`)},d.oniceconnectionstatechange=e=>{console.crlog(`${a} oniceconnectionstatechange, iceConnectionState: ${e.currentTarget.iceConnectionState}`),s&&s.iceConnectionState&&"completed"==s.iceConnectionState&&setTimeout((()=>{s.answer_cb&&!s.answer_cb.isResponsed&&(console.crlog(`${a} answer_cb ice_response()...`),s.answer_cb.ice_response(),s.answer_cb.isResponsed=!0)}),500)},d.onconnectionstatechange=e=>{const t=e.currentTarget.connectionState;console.crlog(`${a} onconnectionstatechange, connectionState: ${t}`),"connected"==t||"disconnected"!=t&&"failed"!=t||"failed"==t&&("connected"!=d.lastState&&"connecting"!=d.lastState||(console.crlog(`${a} connection state failed!`),__Rtc.CRICEAPI.MediaConnectionBreakReport(s.msid))),d.lastState=t},d.onsignalingstatechange=e=>{console.crlog(`${a} onsignalingstatechange, signalingState: ${e.currentTarget.signalingState}`)}}videoAllocRawExt2(e,t,n,i){console.crlog(`[Media] VideoAllocRawExt2, srcSelf:${n}`),n?this.setLocalMediaVideoConnection(e):this.setRemoteMediaConnection(e)}modifyPeerAddrExt(e,t,n,i){const r={type:"answer",sdp:i.get("sdp")};"localMediaVideo"==e&&this.localMediaVideoModifyPeerAddrExt(t,n,r),"localMediaAudio"==e&&this.localMediaAudioModifyPeerAddrExt(t,n,r),"remoteMedia"==e&&this.remoteMediaModifyPeerAddrExt(t,n,r)}parseOfferSDP(e,t){let n=e;return"sendonly"==t&&(n=n.replace("a=sendrecv","a=sendonly")),n}parseVideoAnswerSDP(e,t){const i=e.match(/c=IN IP4(.*?)\r\n/)?e.match(/c=IN IP4(.*?)\r\n/)[0]:"",r=e.match(/b=AS:(.*?)\r\n/)?e.match(/b=AS:(.*?)\r\n/)[0]:"";return i&&e.split(i).length>2&&(e=e.replace(`${i}${r}`,"")),e="local"==t?(e=e.replace("profile-level-id=42001f",`x-google-min-bitrate=${n.maxBps_media/4};x-google-start-bitrate=${n.maxBps_media/2};x-google-max-bitrate=${n.maxBps_media};`)).replace("a=extmap:5 http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01\r\n",""):(e=e.replace("a=sendrecv","a=sendonly")).replace("a=extmap:5 http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01\r\n","")}setLocalMediaVideoConnection(e){const i=this.localMediaVideoConnection,r=this.getBaseStream();if(!r)return;const o=`[Media] MSID:${i.msid}, Local media video RTCPeerConnection,`;i.logstr=o,i.offer_cb=e,i.offer_cb.isResponsed=!1,console.crlog(`${o} new RTCPeerConnection...`);const s=new RTCPeerConnection(n.rtcCfg);i.connection=s,console.crlog("[Media] New MediaStream()");const a=new MediaStream;if(r.getTracks().forEach((e=>{console.crlog("[Media] MediaStream add videoTrack"),"video"==e.kind&&a.addTrack(e)})),i.stream=a,console.crlog(`${o} addStream(localMediaVideoStream)`),0==r.getVideoTracks().length)return console.crlog(`${o} addTrack fail, base stream have not video track (mp3?)`),console.crlog(`${o} offer_cb ice_response()...`),i.offer_cb.ice_response(),void(i.offer_cb.isResponsed=!0);s.addTrack(r.getVideoTracks()[0],a),console.crlog(`${o} createOffer()`),s.createOffer().then((e=>{console.crlog(`${o} createOffer success!`),e.sdp=this.parseOfferSDP(e.sdp,"sendonly");let t=" ";e.sdp.includes("VP8")&&(t+="VP8"),e.sdp.includes("H264")&&(t+=" H264"),console.crlog(`${o} offer.sdp:${e.sdp.length} ${t}`),i.offer=e,console.crlog(`${o} offer setLocalDescription(offer)`),s.setLocalDescription(e).then((e=>{console.crlog(`${o} offer setLocalDescription success!`)})).catch((e=>{console.crlog(`${o} offer setLocalDescription fail! ${e}`),console.error(e)}))})).catch((e=>{console.crlog(`${o} createOffer fail! ${e}`),console.error(e)}));const c=setTimeout((()=>{i.offer_cb.isResponsed||(console.crlog(`${o} offer_cb ice_response()...(No candidate for more than 20 s)`),i.offer_cb.ice_response(),i.offer_cb.isResponsed=!0)}),2e4);s.onicecandidate=e=>{if(e.candidate){i.candidates.push(e.candidate);const n=new t.HashMap;n.set("sdp",i.offer.sdp),n.set("icecandidate",JSON.stringify(i.candidates)),console.crlog(`${o} onicecandidate, response candidates(${i.candidates.length}): ${JSON.stringify(i.candidates)}`),console.crlog(`${o} offer_cb ice_response(${i.msid}, HashMap)...`),i.offer_cb.ice_response(i.msid,n),i.offer_cb.isResponsed=!0,clearTimeout(c)}else console.crlog(`${o} onicecandidate! e.candidate == ${e.candidate}!`)},s.oniceconnectionstatechange=e=>{console.crlog(`${o} oniceconnectionstatechange, iceConnectionState: ${e.currentTarget.iceConnectionState}`),i&&i.iceConnectionState&&"completed"==i.iceConnectionState&&setTimeout((()=>{i.answer_cb&&!i.answer_cb.isResponsed&&(console.crlog(`${o} answer_cb ice_response()...`),i.answer_cb.ice_response(),i.answer_cb.isResponsed=!0)}),500)},s.onconnectionstatechange=e=>{const t=e.currentTarget.connectionState;if(console.crlog(`${o} onconnectionstatechange, connectionState: ${t}`),"connected"==t){i.lastBytesSent=0,clearInterval(i.rtpLogTimer);let e=()=>{s.getStats().then((e=>{e.forEach((e=>{"outbound-rtp"==e.type&&(i.width=e.frameWidth,i.height=e.frameHeight,i.frameRate=e.framesPerSecond,i.codeRate=(e.bytesSent-i.lastBytesSent)/2e3,i.lastBytesSent=e.bytesSent)}))}))};e(),i.rtpLogTimer=setInterval(e,2e3)}else"disconnected"!=t&&"failed"!=t||(clearInterval(i.rtpLogTimer),"failed"==t&&("connected"!=s.lastState&&"connecting"!=s.lastState||(console.crlog(`${o} connection state failed!`),__Rtc.CRICEAPI.MediaConnectionBreakReport(i.msid))));s.lastState=t},s.onsignalingstatechange=e=>{console.crlog(`${o} onsignalingstatechange, signalingState: ${e.currentTarget.signalingState}`)}}setRemoteMediaConnection(e){const i=`[Media] MSID:${this.remoteMediaMSID}, remoteMediaConnection`;console.crlog(`${i} new RTCPeerConnection...`);const r=new RTCPeerConnection(n.rtcCfg);this.remoteMediaConnection.logstr=i,this.remoteMediaConnection.connection=r,this.remoteMediaConnection.offer_cb=e,this.remoteMediaConnection.offer_cb.isResponsed=!1;const o=setTimeout((()=>{this.remoteMediaConnection.offer_cb.isResponsed||(console.crlog(`${Logstr} offer_cb ice_response()...(No candidate for more than 20 s)`),this.remoteMediaConnection.offer_cb.ice_response(),this.remoteMediaConnection.offer_cb.isResponsed=!0)}),2e4);r.createOffer({offerToReceiveAudio:!1,offerToReceiveVideo:!0,voiceActivityDetection:!1}).then((e=>{e.sdp=this.parseOfferSDP(e.sdp);let t=" ";e.sdp.includes("VP8")&&(t+="VP8"),e.sdp.includes("H264")&&(t+=" H264"),console.crlog(`${i} createOffer success! offerSDP is:${e.sdp.length} ${t}`),this.remoteMediaConnection.offer=e,console.crlog(`${i} setLocalDescription(offer)`),r.setLocalDescription(e).then((()=>{console.crlog(`${i} offer setLocalDescription success!`)})).catch((e=>{console.error(`${i} offer setLocalDescription fail! ${e}`),console.error(e)}))})).catch((e=>{console.crlog(`${i} createOffer fail! ${e}`),console.error(e)})),r.onicecandidate=e=>{if(e.candidate&&!r.isResponsedCandidate){this.remoteMediaConnection.candidates.push(e.candidate);const n=new t.HashMap;n.set("sdp",this.remoteMediaConnection.offer.sdp),n.set("icecandidate",JSON.stringify(this.remoteMediaConnection.candidates)),console.crlog(`${i} onicecandidate, response candidates(${this.remoteMediaConnection.candidates.length}): ${JSON.stringify(this.remoteMediaConnection.candidates)}`),console.crlog(`${i} offer_cb ice_response(${this.remoteMediaConnection.msid}, HashMap)...`),this.remoteMediaConnection.offer_cb.ice_response(this.remoteMediaConnection.msid,n),this.remoteMediaConnection.offer_cb.isResponsed=!0,clearTimeout(o),this.remoteMediaConnection.isResponsedCandidate=!0}else 0===this.remoteMediaConnection.candidates.length&&console.crlog(`${i} onicecandidate! null!`)},r.oniceconnectionstatechange=e=>{console.crlog(`${i} oniceconnectionstatechange, iceConnectionState: ${e.currentTarget.iceConnectionState}`),this.remoteMediaConnection.connection&&this.remoteMediaConnection.connection.iceConnectionState&&"completed"==this.remoteMediaConnection.connection.iceConnectionState&&setTimeout((function(){console.crlog(`${i} answer_cb ice_response()...`),this.remoteMediaConnection.answer_cb.ice_response(),this.remoteMediaConnection.answer_cb.isResponsed=!0}),500)},r.ontrack=e=>{console.crlog(`${i} ontrack!`),console.crlog(`${i}, video stream:${e.streams[0].id}`),this.remoteMediaConnection.stream=e.streams[0],this.refreshContainerSrc()},r.onconnectionstatechange=e=>{const t=e.currentTarget.connectionState;if(console.crlog(`${i} onconnectionstatechange, connectionState: ${t}`),"connected"==t){this.remoteMediaConnection.lastBytesReceived=0,this.remoteMediaConnection.codeRate=0,this.remoteMediaConnection.width=0,this.remoteMediaConnection.height=0,this.remoteMediaConnection.frameRate=0,this.remoteMediaConnection.lastPacketsLost=0,this.remoteMediaConnection.lastPacketsReceived=0,this.remoteMediaConnection.packetsLostRate=0,clearInterval(this.remoteMediaConnection.rtpLogTimer);let e=()=>{r.getStats().then((e=>{e.forEach((e=>{if("inbound-rtp"==e.type){this.remoteMediaConnection.codeRate=(e.bytesReceived-this.remoteMediaConnection.lastBytesReceived)/2e3,this.remoteMediaConnection.lastBytesReceived=e.bytesReceived,this.remoteMediaConnection.width=e.frameWidth,this.remoteMediaConnection.height=e.frameHeight,this.remoteMediaConnection.frameRate=e.framesPerSecond;let t=e.packetsLost-this.remoteMediaConnection.lastPacketsLost,n=e.packetsReceived-this.remoteMediaConnection.lastPacketsReceived;this.remoteMediaConnection.packetsLostRate=t<0?0:parseInt(t/(n+t)*1e4)/1e4,this.remoteMediaConnection.lastPacketsLost=e.packetsLost,this.remoteMediaConnection.lastPacketsReceived=e.packetsReceived}}))}))};e(),this.remoteMediaConnection.rtpLogTimer=setInterval(e,2e3)}else"disconnected"!=t&&"failed"!=t||(clearInterval(this.remoteMediaConnection.rtpLogTimer),"failed"==t&&("connected"!=r.lastState&&"connecting"!=r.lastState||(console.crlog(`${i} connection state failed!`),__Rtc.CRICEAPI.MediaConnectionBreakReport(this.remoteMediaConnection.msid))));r.lastState=t},r.onsignalingstatechange=e=>{console.crlog(`${i} onsignalingstatechange, signalingState: ${e.currentTarget.signalingState}`)}}localMediaVideoModifyPeerAddrExt(t,n,i){this.localMediaVideoConnection.answer_cb=t;const r=this.localMediaVideoConnection.logstr,o=this.localMediaVideoConnection.connection;i.sdp=this.parseVideoAnswerSDP(i.sdp,"local");let s=" ";i.sdp.includes("VP8")&&(s+="VP8"),i.sdp.includes("H264")&&(s+=" H264"),console.crlog(`${r} ModifyPeerAddrExt, answerSDP:${i.sdp.length} ${s}`),this.localMediaVideoConnection.answer=i,console.crlog(`${r} answer setRemoteDescription(answer)`),o.setRemoteDescription(new RTCSessionDescription(i)).then((t=>{console.crlog(`${r} answer setRemoteDescription success!`),e.videoResolutionReport(this.localMediaVideoConnection.msid,"media")})).catch((e=>{console.crlog(`${r} answer setRemoteDescription fail! ${e}`),console.error(e)})),setTimeout((()=>{this.localMediaVideoConnection.answer_cb.isResponsed||(console.crlog(`${r} answer_cb ice_response()...`),this.localMediaVideoConnection.answer_cb.ice_response(),this.localMediaVideoConnection.answer_cb.isResponsed=!0)}),500)}localMediaAudioModifyPeerAddrExt(e,t,n){this.localMediaAudioConnection.answer_cb=e;const i=this.localMediaAudioConnection.logstr,r=this.localMediaAudioConnection.connection;n.sdp=n.sdp.replace("a=sendrecv","a=recvonly");let o=" ";n.sdp.includes("VP8")&&(o+="VP8"),n.sdp.includes("H264")&&(o+=" H264"),console.crlog(`${i} ModifyPeerAddrExt, answerSDP:${n.sdp.length} ${o}`),this.localMediaAudioConnection.answer=n,console.crlog(`${i} answer setRemoteDescription(answer)`),r.setRemoteDescription(new RTCSessionDescription(n)).then((e=>{console.crlog(`${i} answer setRemoteDescription success!`)})).catch((e=>{console.crlog(`${i} answer setRemoteDescription fail! ${e}`),console.error(e)})),setTimeout((()=>{this.localMediaAudioConnection.answer_cb.isResponsed||(console.crlog(`${i} answer_cb ice_response()...`),this.localMediaAudioConnection.answer_cb.ice_response(),this.localMediaAudioConnection.answer_cb.isResponsed=!0)}),500)}remoteMediaModifyPeerAddrExt(e,t,n){this.remoteMediaConnection.answer_cb=e;const i=this.remoteMediaConnection.logstr,r=this.remoteMediaConnection.connection;n.sdp=this.parseVideoAnswerSDP(n.sdp,"remote");let o=" ";n.sdp.includes("VP8")&&(o+="VP8"),n.sdp.includes("H264")&&(o+=" H264"),console.crlog(`${i} ModifyPeerAddrExt, answerSDP:${n.sdp.length} ${o}`),this.remoteMediaConnection.answer=n,console.crlog(`${i} answer setRemoteDescription(answer)`),r.setRemoteDescription(new RTCSessionDescription(n)).then((e=>{console.crlog(`${i} answer setRemoteDescription success!`)})).catch((e=>{console.crlog(`${i} answer setRemoteDescription fail! ${e}`),console.error(e)})),setTimeout((()=>{this.remoteMediaConnection.answer_cb&&!this.remoteMediaConnection.answer_cb.isResponsed&&(console.crlog(`${i} answer_cb ice_response()...`),this.remoteMediaConnection.answer_cb.ice_response(),this.remoteMediaConnection.answer_cb.isResponsed=!0)}),500)}refreshContainerSrc(){try{if(this.container&&this.container._userID!==n.userInfo.userId){const e=this.container._videoEle;console.crlog(`${this.remoteMediaConnection.logstr} containerID:${this.container._id}, videoEle set srcObject...`),e.srcObject=this.remoteMediaConnection.stream,setTimeout((()=>{"Chrome"!==__Rtc.CRBrowser.curBrowserCfg.name&&e.srcObject&&"true"==e.srcObject.active&&(e.click(),e.play())}),2e3)}}catch(e){console.error(e)}}},e.__Rtc.CRRTCMedia=new e.__crMediaClass,e.CRVideo_NotifyMediaOpened=new n.CbProxy("CRVideo_NotifyMediaOpened"),e.CRVideo_NotifyMediaStart=new n.CbProxy("CRVideo_NotifyMediaStart"),e.CRVideo_NotifyMediaStop=new n.CbProxy("CRVideo_NotifyMediaStop"),e.CRVideo_NotifyMediaPause=new n.CbProxy("CRVideo_NotifyMediaPause"),e.CRVideo_NotifyPlayPosSetted=new n.CbProxy("CRVideo_NotifyPlayPosSetted"),e.CRVideo_NotifyMemberMediaData=new n.CbProxy("CRVideo_NotifyMemberMediaData")}(window,Ice,CRVideo)},5004:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i=function(e){this.name=e,this.target=function(...t){try{"[object Function]"===Object.prototype.toString.call(this.callback)?(!this.noLogArr.includes(this.name)&&console.crlog(`[MeetSDK][Callback] ${this.name}.target(${t})`),this.callback.apply(null,t)):!this.noLogArr.includes(this.name)&&console.crlog("[MeetSDK][Callback] Undefined callback: "+e)}catch(e){console.crlog(`[MeetSDK] ${e}`),console.error(e)}},this.noLogArr=["notifyVideoWallVideos"]}},3826:(e,t,n)=>{"use strict";n.d(t,{Z:()=>_});var i=n(9176),r=n(5004),o=n(7693),s=n(2153),a=n.n(s);let c=0;const l=new class{constructor(){}getServerTime(){return new Promise(((e,t)=>{const n="https://"+i.Z.server.getServerAddr()+"/servlet/httpping";(0,o.Z)({url:n,timeout:2e3,authentication:!1,success(t){if(0===t.RspCode){const n=t.Data.curTime;c=n-parseInt((new Date).getTime()/1e3),e()}},error(t){console.error(t),e()}})}))}createConf(e){return new Promise((async(t,n)=>{const r=`/${window.__CRNameUP}-SERVER/v2/conference`,s="https://"+i.Z.server.getServerAddr()+r;let l,d,u,h;0===c&&await this.getServerTime(),({secretId:l,timestamp:d,signature:u}=function(){const{UserName:e,UserPswd:t}=i.Z.auth.getAuth(),n=parseInt((new Date).getTime()/1e3)+c;return{secretId:e,timestamp:n,signature:a()(e+"&"+n+"&"+t)}}()),h={"X-CR-OEMKey":`${window.__CRNameUP}`,"X-CR-RequestId":Ice.generateUUID(),"X-CR-SecretId":l,"X-CR-Timestamp":d,"X-CR-Signature":u,"X-CR-Type":"terminal"},console.crlog(`[WebApi] WebApi: ${r} begain, data: ${e}`),(0,o.Z)({url:s,data:e,header:h,timeout:1e4,type:"post",success:e=>(console.crlog(`[WebApi] WebApi: ${r} success! ${JSON.stringify(e)}`),t(e)),error:e=>(console.crlog(`[WebApi] WebApi: ${r} fail! ${e}`),console.error(e),502==e.status?n(502):e.response?n(JSON.parse(e.response)):n(e))})}))}clientStartMeet(e){return new Promise((async(t,n)=>{const r="/servlet/ClientStartMeet",s="https://"+i.Z.server.getServerAddr()+r;0===c&&await this.getServerTime(),console.crlog(`[WebApi] WebApi: ${r} begain, data: ${e}`),(0,o.Z)({url:s,data:e,timeout:2e3,type:"post",success:e=>(console.crlog(`[WebApi] WebAPI ${r} success! ${JSON.stringify(e)}`),t(e)),error:e=>(console.crlog(`[WebApi] WebApi: ${r} fail! ${e}`),console.error(e),n(e))})}))}};n(5273);const d=window.CRVideo,u=(window.__Rtc,window.Ice),h={enterMeetingRslt:new r.Z("enterMeetingRslt")},f=e=>new Promise((async(t,n)=>(d.startEnterTimestamp=(new Date).getTime(),d.enterMeetingCookie=e,d.destroyMeetingConnect(),await d.leftMeetingFun(),d.isWebRTC?(window.__Rtc.CRRTCAudio.createAudioElement(),navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?(console.crlog("[MeetSDK] EnumerateDevices on enterConf..."),void navigator.mediaDevices.enumerateDevices().then((e=>(console.crlog(`[MeetSDK] EnumerateDevices success:${JSON.stringify(e)}`),d.updateDevicesList(e),t()))).catch((function(e){return console.crlog(`navigator.mediaDevices.enumerateDevices error: ${e}`),console.error(e),n(8003)}))):(console.crlog(`[MeetSDK] navigator.mediaDevices is undefined!!! protocal: ${window.location.protocol}`),n(8004))):t()))),_={...h,createConf:(e,t)=>(console.crlog(`[MeetSDK] MeetSDK.createConf(${JSON.stringify(e)},${t})`),new Promise(((t,n)=>{l.createConf(JSON.stringify(Object.assign(e,{RequestId:u.generateUUID()}))).then((e=>(console.crlog(`[MeetSDK] CreateMeeting success: ${JSON.stringify(e.meetInfo)}`),t(e.meetInfo)))).catch((e=>(console.crlog("[MeetSDK] CreateMeeting fail!"),e.code&&22010==e.code&&(e=70001),n(e))))}))),enterMeeting(e,t,n="",i){if(console.crlog(`[MeetSDK] MeetSDK.enterMeeting(${e},***,${n},${i})`),!n){var r=0;do{r=Math.floor(1e4*Math.random())}while(r<1e3);n=`临时用户${r}`}const o=u.generateUUID();window.CRVideo_EnterMeeting(e,t,o,n,i)},async enterConf(e,t){console.crlog(`[MeetSDK] MeetSDK.enterConf(${JSON.stringify(e)},${t})`),f(t).then((()=>{!function(){const{UserName:n,UserPswd:r}=i.Z.auth.getAuth();l.clientStartMeet(JSON.stringify(Object.assign(e,{RequestId:u.generateUUID(),IsNewClient:1,UserName:n,UserPswd:r}))).then((e=>{void 0!==e.RspCode&&0==e.RspCode?(d.crmtStr=e.CRMTStr.replace(/CRMT[\.|\w]{0,}:/,""),d.initweb()):h.enterMeetingRslt.target(window.WEB_SDK_ERR(e.RspCode),"","",t)})).catch((e=>{h.enterMeetingRslt.target(202,"","",t)}))}()})).catch((e=>{console.crlog(`[MeetSDK] MeetSDK.enterMeetingRslt.target(${e}, '', '', ${t})`),MeetSDK.enterMeetingRslt.target(e,"","",t),CRVideo_UploadingLog()}))},enterMeetByCrmt(e,t){console.crlog(`[MeetSDK] MeetSDK.enterMeetByCrmt(${e}), ${t}`),f(t).then((()=>{d.crmtStr=e,d.initweb()})).catch((e=>{console.crlog(`[MeetSDK] MeetSDK.enterMeetingRslt.target(${e}, '', '', ${t})`),MeetSDK.enterMeetingRslt.target(e,"","",t),CRVideo_UploadingLog()}))}}},1954:()=>{((e,t,n)=>{e.__crIMMsgClass=class{constructor(){this.initData(),this.initIceCallback(),this.initSDKInterface()}initData(){console.crlog("[Message] IMMsgModule initData...")}initIceCallback(){this.ICECallback={receiveIMMsg:e=>{console.crlog(`[Message] ICE Notify: receiveIMMsg, params: ${JSON.stringify({data:e})}`),this.receiveIMMsg(e)},notifyIMForbidStatus:(e,t,n)=>{console.crlog(`[Message] ICE Notify: notifyIMForbidStatus, params:${JSON.stringify({operId:e,dstId:t,bForbid:n})}`)},notifyClearIMMsg:e=>{console.crlog(`[Message] ICE Notify: notifyClearIMMsg, params:${JSON.stringify({operId:e})}`)},notifyDeleteIMMsg:e=>{console.crlog(`[Message] ICE Notify: notifyDeleteIMMsg, params:${JSON.stringify({sn:e})}`)},sendIMMsgRslt:(e,t,n,i)=>{console.crlog(`[Message] ICE Callback --\x3e sendIMMsgRslt, params:${JSON.stringify({errCode:e,errDesc:t,taskID:n,cookie:i})}`),this.sendIMMsgRslt(e,t,n,i)}}}initSDKInterface(){e.CRVideo_SendIMMsg=(e,t,n)=>(console.crlog(`[Message] CRVideo_SendIMMsg(${e},${t},${n})`),this.sendIMMsg(e,t,n))}sendIMMsg(i,r,o){let s=32767,a="",c=new Conference.IMFont(4278190080,12),l=(new Date).getTime()/1e3;""!==r&&void 0!==r&&(s=n.findMemberInfo({use:"userId",want:"termId",value:r}),a=n.findMemberInfo({use:"userId",want:"nickname",value:r}));const d=t.generateUUID();try{console.crlog(`[Message] CR__SendIMMsg(${s},${a},${c},${i},${l},${d},${o})`)}catch(e){console.error(e)}return e.__Rtc.CR__SendIMMsg(s,a,c,i,l,d,o),d}sendIMMsgRslt(t,n,i,r){let o=0;900==t?o=1001:901==t?o=1002:3==t&&(o=3),console.crlog(`[Message] CRVideo_SendIMMsgRslt.target(${i},${o},${r})`),e.CRVideo_SendIMMsgRslt.target(i,o,r)}receiveIMMsg(t){const i=t.inMsg;let r=n.findMemberInfo({use:"termId",want:"userId",value:t.srcTermId}),o=n.findMemberInfo({use:"termId",want:"userId",value:i.targetTermId}),s=i.msg,a=1e3*i.sendTime;r=r||t.srcNickname,o=o||i.targetNickname,console.crlog(`[Message] CRVideo_NotifyIMmsg/CRVideo_NotifyIMMsg.target(${r},${s},${a},${o||""})`),e.CRVideo_NotifyIMmsg.target(r,s,a,o||""),e.CRVideo_NotifyIMMsg.target(r,s,a,o||"")}},e.__crTerminalMsgClass=class{constructor(){this.initData(),this.initIceCallback(),this.initSDKInterface()}initData(){console.crlog("[Message] TerminalMsgModule initData...")}initIceCallback(){this.ICECallback={terminalMsgRslt:(e,t,n)=>{console.crlog(`[Message] ICE Callback --\x3e terminalMsgRslt, params:${JSON.stringify({errCode:e,errDesc:t,cookie:n})}`),this.terminalMsgRslt(e,t,n)},notifyTerminalMsg:(t,n,i,r)=>{console.crlog(`[Message] ICE Callback --\x3e notifyTerminalMsg, params:${JSON.stringify({moduleName:t===`${e.__CRNamC}MeetingSDK`?"MeetingSDK":t,jsonMsg:n,dstTermID:i,srcTermId:r})}`),this.notifyTerminalMsg(t,n,i,r)}}}initSDKInterface(){e.CRVideo_SendMeetingCustomMsg=(e,t)=>{console.crlog(`[Message] CRVideo_SendMeetingCustomMsg(${e},${t})`),this.sendMeetingCustiomMsg(e,t)}}sendMeetingCustiomMsg(t,n){const i=`${e.__CRNamC}MeetingSDK`;console.crlog(`[Message] CR__TerminalMsg('MeetingSDK',${t},,true,${n})`),e.__Rtc.CR__TerminalMsg(i,t,"",true,n)}terminalMsgRslt(e,t,n){console.crlog(`[Message] CRVideo_SendMeetingCustomMsgRslt.target(${e},${n})`),CRVideo_SendMeetingCustomMsgRslt.target(e,n)}notifyTerminalMsg(t,i,r,o){const s=n.findMemberInfo({use:"termId",want:"userId",value:o});t==`${e.__CRNamC}MeetingSDK`&&(console.crlog(`[Message] CRVideo_NotifyMeetingCustomMsg.target(${s},${i})`),e.CRVideo_NotifyMeetingCustomMsg.target(s,i))}},e.__Rtc.CRRTCIMMsg=new e.__crIMMsgClass,e.__Rtc.CRRTCTermMsg=new e.__crTerminalMsgClass,e.CRVideo_SendIMMsgRslt=new n.CbProxy("CRVideo_SendIMMsgRslt"),e.CRVideo_NotifyIMmsg=new n.CbProxy("CRVideo_NotifyIMmsg"),e.CRVideo_NotifyIMMsg=new n.CbProxy("CRVideo_NotifyIMMsg"),e.CRVideo_NotifyMeetingCustomMsg=new n.CbProxy("CRVideo_NotifyMeetingCustomMsg"),e.CRVideo_SendMeetingCustomMsgRslt=new n.CbProxy("CRVideo_SendMeetingCustomMsgRslt")})(window,Ice,CRVideo)},702:()=>{!function(e,t,n){class i{constructor(e){this.msid=e,this.offer_cb=null,this.offer=null,this.answer_cb=null,this.answer=null,this.candidates=[],this.stream=null,this.connection=null,this.logstr=null}}e.__crScreenClass=class{constructor(){this.initData(),this.initIceCallback(),this.initSDKInterface()}initData(){console.crlog("[Screen] ScreenShareModule initData..."),this.getDisplayMediaAPI=!1,this.screenHeight=e.screen.height<=1080?e.screen.height:1080,this.screenShareCfg={maxFps:10,maxKbps:800},this.screenCfg={audio:!1,video:{frameRate:{ideal:this.screenShareCfg.maxFps},height:{ideal:this.screenHeight}}},this.isSharing=!1,this.isMySharing=!1,this.isMarking=!1,this.localScreenBaseStream=null,this.localScreenStream=null,this.remoteScreenStream=null,this.userInterfaceStop=!1,this.lastLocalMSID=13e4,this.lastRemoteMSID=23e4,this.localConnection=new i(this.lastLocalMSID++),this.remoteConnection=new i(this.lastRemoteMSID++),this.screenShareInfo={},this.allMarkDataList=[],navigator.mediaDevices&&void 0!==navigator.mediaDevices.getDisplayMedia&&(this.getDisplayMediaAPI=!0)}initIceCallback(){this.ICECallback={notifyStartScreenShare:e=>{console.crlog(`[Screen] ICE Notify --\x3e notifyStartScreenShare, params:${JSON.stringify(e)}`),this.screenShareInfo=e;const t=n.allMemberInfo.find((t=>t.termId==e.sharer));console.crlog(`[Screen] CRVideo_NotifyScreenShareStarted.target(${t.userId},${e.state})`),t&&CRVideo_NotifyScreenShareStarted.target(t.userId,e.state),this.isSharing=!0,e.sharer==n.userInfo.termId&&(this.isMySharing=!0),3==e.state&&(this.ICECallback.notifyStartMarked(e.sharer),__Rtc.CRICEAPI.GetAllMarkData(),__Rtc.CRICEAPI.GetAllMarkDataV4())},notifyStopScreenShare:e=>{console.crlog(`[Screen] ICE Notify --\x3e notifyStopScreenShare, params:${JSON.stringify({operator:e})}`),this.isMySharing&&this.stopScreenShareHandle(!0),this.ICECallback.notifyClearAllMarks();const t=n.allMemberInfo.find((t=>t.termId==e));this.isSharing=!1,e==n.userInfo.termId&&(this.isMySharing=!1),t&&n.isMeeting&&console.crlog(`[Screen] CRVideo_NotifyScreenShareStopped.target(${t.userId})`),t&&n.isMeeting&&CRVideo_NotifyScreenShareStopped.target(t.userId)},notifyScMakeIFrame:()=>{console.crlog("[Screen] ICE Notify --\x3e notifyScMakeIFrame, params: null"),this.handleScMakeIFrame()},notifyStartMarked:e=>{console.crlog(`[Screen] ICE Notify --\x3e notifyStartMarked, params:${JSON.stringify({operator:e})}`),this.pauseCanvasRender&&this.pauseCanvasRender();const t=n.allMemberInfo.find((t=>t.termId==e));t&&console.crlog(`[Screen] CRVideo_NotifyScreenMarkStarted.target(${t.userId})`),this.isMarking=!0,__Rtc.CRRTCUI.screenContainerList.forEach((e=>{e.canvasContainer&&(e.canvasContainer._canvas.style.display="block",e.canvasContainer.resize())})),t&&CRVideo_NotifyScreenMarkStarted.target(t.userId)},notifyStopMarked:e=>{console.crlog(`[Screen] ICE Notify --\x3e notifyStopMarked, params:${JSON.stringify({operator:e})}`),this.startCanvasRender&&this.startCanvasRender();const t=n.allMemberInfo.find((t=>t.termId==e));t&&console.crlog(`[Screen] CRVideo_NotifyScreenMarkStopped.target(${t.userId})`),this.isMarking=!1,__Rtc.CRRTCUI.screenContainerList.forEach((e=>{e.canvasContainer&&(e.canvasContainer._canvas.style.display="none",e.canvasContainer.resize())})),t&&CRVideo_NotifyScreenMarkStopped.target(t.userId)},notifyMarkData:e=>{const t=e.termid,n=e.type,i=e.markid;console.crlog(`[Screen] ICE Notify --\x3e notifyMarkData, params:${JSON.stringify({termID:t,type:n,markID:i,mousePosSeq:"mousePoseqDataArr"})}`)},notifyMarkDataV4:e=>{const t=e.termid,n=e.type,i=e.markid;console.crlog(`[Screen] ICE Notify --\x3e notifyMarkDataV4, params:${JSON.stringify({termID:t,type:n,markID:i,mousePosSeq:"mousePoseqDataArr"})}`),this.allMarkDataList.push(e),__Rtc.CRRTCUI.screenContainerList.forEach((t=>{const n=this.parseMarkData(e);t.canvasContainer._markDataList.push(n),t.canvasContainer&&t.canvasContainer._drawData(n)}))},notifyClearAllMarks:()=>{console.crlog("[Screen] ICE Notify --\x3e notifyClearAllMarks, params: null"),this.allMarkDataList=[],__Rtc.CRRTCUI.screenContainerList.forEach((e=>{e.canvasContainer.clearAllMark()}))},notifyClearAllMarksV4:()=>{console.crlog("[Screen] ICE Notify --\x3e notifyClearAllMarksV4, params: null"),this.allMarkDataList=[],__Rtc.CRRTCUI.screenContainerList.forEach((e=>{e.canvasContainer.clearAllMark()}))},getScreenShareInfoRslt:(e,t)=>{try{console.crlog(`[Screen] ICE Callback --\x3e getScreenShareInfoRslt, params:${JSON.stringify({errCode:e,data:t})}`)}catch(e){console.error(e)}0==e?0!==t.state&&(console.crlog("[Screen] ScreenShare is strated in this meeting..."),this.ICECallback.notifyStartScreenShare(t)):console.crlog(`[Screen][Error] Get screenShare info fail! ${e}`)},startScreenShareRslt:e=>{console.crlog(`[Screen] ICE Callback --\x3e startScreenShareRslt, params:${JSON.stringify({errCode:e})}`),console.crlog(`[Screen] CRVideo_StartScreenShareRslt.target(${e})`),CRVideo_StartScreenShareRslt.target(e)},stopScreenShareRslt:e=>{console.crlog(`[Screen] ICE Callback --\x3e stopScreenShareRslt, params:${JSON.stringify({errCode:e})}`),console.crlog(`[Screen] CRVideo_StopScreenShareRslt.target(${e})`),CRVideo_StopScreenShareRslt.target(e)},startMarkedRslt:e=>{console.crlog(`[Screen] ICE Callback --\x3e startMarkedRslt, params:${JSON.stringify({errCode:e})}`),console.crlog(`[Screen] CRVideo_StartScreenMarkRslt.target(${e})`),CRVideo_StartScreenMarkRslt.target(e)},stopMarkedRslt:e=>{console.crlog(`[Screen] ICE Callback --\x3e stopMarkedRslt, params:${JSON.stringify({errCode:e})}`),console.crlog(`[Screen] CRVideo_StopScreenMarkRslt.target(${e})`),CRVideo_StopScreenMarkRslt.target(e)},clearAllMarksV4Rslt:e=>{console.crlog(`[Screen] ICE Callback --\x3e clearAllMarksV4Rslt, params:${JSON.stringify({errCode:e})}`)},getAllMarkDataRslt:(e,t)=>{try{console.crlog(`[Screen] ICE Callback --\x3e getAllMarkDataRslt, params:${JSON.stringify({errCode:e,data:t})}`)}catch(e){console.error(e)}},getAllMarkDataV4Rslt:(e,t)=>{try{console.crlog(`[Screen] ICE Callback --\x3e getAllMarkDataV4Rslt, params:${JSON.stringify({errCode:e,data:"markData"})}`)}catch(e){console.error(e)}0==e&&(this.allMarkDataList=t),this.allMarkDataList.forEach((e=>{__Rtc.CRRTCUI.screenContainerList.forEach((t=>{const n=this.parseMarkData(e);t.canvasContainer._markDataList.push(n),t.canvasContainer&&t.canvasContainer._drawData(n)}))}))},sendMarkDataV4Rslt:e=>{try{console.crlog(`[Screen] ICE Callback --\x3e sendMarkDataV4Rslt, params:${JSON.stringify({errCode:e})}`)}catch(e){console.error(e)}}}}initSDKInterface(){e.CRVideo_SetScreenShareCfg=e=>{for(var t in console.crlog(`[Screen] CRVideo_SetScreenShareCfg(${JSON.stringify(e)})`),e)this.screenShareCfg[t]=e[t]},e.CRVideo_StartScreenShare=({constraints:e}={})=>{if(console.crlog("[Screen] CRVideo_StartScreenShare()"),this.isSharing)return CRVideo_StartScreenShareRslt.target(1);e?this.electronStartScreenShare(e):this.startScreenShare(this.screenShareCfg)},e.CRVideo_StopScreenShare=()=>{console.crlog("[Screen] CRVideo_StopScreenShare()"),this.userInterfaceStop=!0,this.stopScreenShareHandle()},e.CRVideo_StartScreenMark=()=>{console.crlog("[Screen] CRVideo_StartScreenMark()"),__Rtc.CRICEAPI.StartMarked()},e.CRVideo_StopScreenMark=()=>{console.crlog("[Screen] CRVideo_StopScreenMark()"),__Rtc.CRICEAPI.StopMarked(),__Rtc.CRICEAPI.ClearAllMarksV4()}}videoAllocRawExt2(e,t,n,i){n?this.setLocalScreenConnection(e):this.setRemoteScreenConnection(e)}modifyPeerAddrExt(e,t,n,i){const r={type:"answer",sdp:i.get("sdp")};"localScreen"==e&&this.localScreenModifyPeerAddrExt(t,n,r),"remoteScreen"==e&&this.remoteScreenModifyPeerAddrExt(t,n,r)}parseOfferSDP(e,t){return this.screenShareCfg.maxKbps&&(console.crlog(`[Screen] b=AS:${this.screenShareCfg.maxKbps}`),e=e.replace("c=IN IP4 0.0.0.0",`c=IN IP4 0.0.0.0\r\nb=AS:${this.screenShareCfg.maxKbps}`)),t&&(e=e.replace("a=sendrecv",`a=${t}`)),e}parseAnswerSDP(e,t){const n=e.match(/c=IN IP4(.*?)\r\n/)?e.match(/c=IN IP4(.*?)\r\n/)[0]:"",i=e.match(/b=AS:(.*?)\r\n/)?e.match(/b=AS:(.*?)\r\n/)[0]:"";return n&&e.split(n).length>2&&(e=e.replace(`${n}${i}`,"")),e=e.replace("a=rtcp-fb:102 nack\r\n",""),e="local"==t?(e=e.replace("profile-level-id=42001f","x-google-min-bitrate=800;x-google-start-bitrate=800;")).replace("a=extmap:5 http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01\r\n",""):(e=e.replace("a=sendrecv","a=sendonly")).replace("a=extmap:5 http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01\r\n","")}startScreenShare(e){if(e&&e.maxFps&&(this.screenCfg.video.frameRate.ideal=e.maxFps),e&&e.height&&(this.screenHeight=e.height,this.screenCfg.video.height.ideal=e.height),this.getDisplayMediaAPI){try{console.crlog(`[Screen] navigator.mediaDevices.getDisplayMedia(${JSON.stringify(this.screenCfg)})`)}catch(e){console.error(e)}navigator.mediaDevices.getDisplayMedia(this.screenCfg).then((e=>{this.localScreenBaseStream=e,this.gotLocalScreenStream(e)})).catch((e=>{console.crlog(`[Screen] getDisplayMedia fail: ${e}`),CRVideo_StartScreenShareRslt.target(8002),console.error(e)}))}else console.crlog("[Screen] CRVideo_StartScreenShareRslt.target(8004)"),CRVideo_StartScreenShareRslt.target(8004)}electronStartScreenShare(e){navigator.mediaDevices.getUserMedia(e).then((e=>{this.localScreenBaseStream=e,this.gotLocalScreenStream(e)})).catch((e=>{console.crlog(`[Screen] getUserMedia fail: ${e}`),CRVideo_StartScreenShareRslt.target(8002),console.error(e)}))}stopScreenShareHandle(t){(this.localScreenBaseStream||this.localScreenStream)&&(console.crlog("[Screen] Stop local screen stream track"),this.localScreenBaseStream&&this.localScreenBaseStream.getTracks().forEach((e=>{e.stop()})),this.localScreenStream&&this.localScreenStream.getTracks().forEach((e=>{e.stop()})),this.pauseCanvasRender("stop")),this.isMarking&&(__Rtc.CRICEAPI.StopMarked(),__Rtc.CRICEAPI.ClearAllMarksV4()),!t&&e.__Rtc.CRICEAPI.StopScreenShare(),this.isSharing=!1,this.isMySharing=!1,this.baseVideoEle&&this.baseVideoEle.onplay&&(this.baseVideoEle.onplay=null),this.localScreenBaseStream=null,this.localScreenStream=null,this.baseVideoEle=null,this.streamCanvas=null,this.ctx=null,this.startCanvasRender=null,this.pauseCanvasRender=null,this.handleScMakeIFrame=null;const n={};for(var i in this.screenShareCfg)n[i]=this.screenShareCfg[i];this.initData(),this.screenShareCfg=n}gotLocalScreenStream(t){console.crlog(`[Screen] GetDisplayMedia success! stream: ${t.id}`),this.localScreenStream=this.getCanvasStream(t),this.userInterfaceStop=!1,t.getTracks()[0].onended=e=>{this.userInterfaceStop?console.crlog("[Screen] Screen share stoped by interface."):(console.crlog("[Screen] Screen share stoped by plug-in button."),this.userInterfaceStop=!1,this.stopScreenShareHandle())},e.__Rtc.CRICEAPI.StartScreenShare()}getCanvasStream(e){console.crlog("[Screen] Start to get canvas stream...");const t=this;this.baseVideoEle=document.createElement("video"),this.streamCanvas=document.createElement("canvas"),this.baseVideoEle.autoplay=!0,this.baseVideoEle.playsinline=!0,this.baseVideoEle.click(),this.baseVideoEle.srcObject=e,setTimeout((()=>{this.baseVideoEle.isplay||"Mac"!=__Rtc.CRBrowser.curBrowserCfg.platform||"Safari"!=__Rtc.CRBrowser.curBrowserCfg.name||(this.baseVideoEle.click(),this.baseVideoEle.play())}),1e3),this.baseVideoEle.onplay=function(){t.baseVideoEle.isplay=!0,console.crlog("[Screen] Get canvas stream:baseVideoEle on play..."),t.streamCanvas.width=t.baseVideoEle.videoWidth,t.streamCanvas.height=t.baseVideoEle.videoHeight,t.startCanvasRender()},this.baseVideoEle.onplaying=function(){console.crlog("[Screen] Get canvas stream:baseVideoEle on playing...")},this.ctx=this.streamCanvas.getContext("2d");const n=URL.createObjectURL(new Blob([(console.crlog("[Screen] Get canvas stream:new Worker..."),"("+function(){let e;self.onmessage=function(n){const{cmd:i,data:r}=n.data;if("start"===i){clearTimeout(e);const n=()=>{self.postMessage("draw"),e=setTimeout(n,r&&r.rote||1e3/t.screenShareCfg.maxFps)};n()}else"stop"===i&&(clearTimeout(e),e=null)}}.toString()+"());")],{type:"text/javascript"}));t.worker&&t.worker.terminate&&t.worker.terminate();const i=new Worker(n);t.worker=i,i.onmessage=function(e){if("draw"===e.data){if(!t.baseVideoEle||!t.streamCanvas)return;if(t.screenShareCfg&&t.screenShareCfg.catchRect){const{left:e,top:n,width:i,height:r}=t.screenShareCfg.catchRect;t.streamCanvas.width=i,t.streamCanvas.height=r,t.ctx.drawImage(t.baseVideoEle,e,n,t.streamCanvas.width,t.streamCanvas.height,0,0,t.streamCanvas.width,t.streamCanvas.height)}else t.streamCanvas.width=t.baseVideoEle.videoWidth,t.streamCanvas.height=t.baseVideoEle.videoHeight,t.ctx.drawImage(t.baseVideoEle,0,0,t.streamCanvas.width,t.streamCanvas.height)}};this.startCanvasRender=function(){console.crlog("[Screen] Get canvas stream:startCanvasRender..."),t.baseVideoEle.click(),t.baseVideoEle.play();const e=1e3/t.screenShareCfg.maxFps;i.postMessage({cmd:"start",data:{rote:e}})},this.pauseCanvasRender=function(e){console.crlog("[Screen] Get canvas stream:pauseCanvasRender..."),t.baseVideoEle.pause(),i.postMessage({cmd:"stop",data:{isStop:e}})},this.handleScMakeIFrame=function(){let e;return console.crlog("[Screen] Get canvas stream:handleScMakeIFrame..."),function(){if(t.baseVideoEle.paused){clearTimeout(e);let n=0;function i(){if(!(n++>=10)){if(t.screenShareCfg&&t.screenShareCfg.catchRect){const{left:e,top:n,width:i,height:r}=t.screenShareCfg.catchRect;t.streamCanvas.width=i,t.streamCanvas.height=r,t.ctx.drawImage(t.baseVideoEle,e,n,t.streamCanvas.width,t.streamCanvas.height,0,0,t.streamCanvas.width,t.streamCanvas.height)}else t.streamCanvas.width=t.baseVideoEle.videoWidth,t.streamCanvas.height=t.baseVideoEle.videoHeight,t.ctx.drawImage(t.baseVideoEle,0,0,t.streamCanvas.width,t.streamCanvas.height);e=setTimeout(i,300)}}i()}}}();const r=function(e=20){return console.crlog(`[Screen] Get canvas stream:this.streamCanvas.captureStream(${e})...`),t.streamCanvas.captureStream(e)}(t.screenShareCfg.maxFps);return console.crlog(`[Screen] Get canvas stream success! ${r.id}`),r}setLocalScreenConnection(e){const i=this.localConnection,r="[Screen] Local screenShare RTCPeerConnection,";i.logstr=r,i.offer_cb=e,i.offer_cb.isResponsed=!1,console.crlog(`${r} new RTCPeerConnection...`);const o=new RTCPeerConnection(n.rtcCfg);i.connection=o,i.stream=this.localScreenStream,console.crlog(`${r} addTrack(localScreenTrack, localScreenStream)`),o.addTrack(i.stream.getTracks()[0],i.stream),console.crlog(`${r} createOffer()`),o.createOffer().then((e=>{console.crlog(`${r} createOffer success!`),e.sdp=this.parseOfferSDP(e.sdp,"sendonly");let t=" ";e.sdp.includes("VP8")&&(t+="VP8"),e.sdp.includes("H264")&&(t+=" H264"),console.crlog(`${r} offer.sdp:${e.sdp.length} ${t}`),i.offer=e,console.crlog(`${r} offer setLocalDescription(offer)`),o.setLocalDescription(e).then((e=>{console.crlog(`${r} offer setLocalDescription success!`)})).catch((e=>{console.crlog(`${r} offer setLocalDescription fail! ${e}`),console.error(e)}))})).catch((e=>{console.crlog(`${r} createOffer fail! ${e}`),console.error(e)}));setTimeout((()=>{i.offer_cb.isResponsed||(console.crlog(`${r} offer_cb ice_response()...(No candidate for more than 20 s)`),i.offer_cb.ice_response(),i.offer_cb.isResponsed=!0)}),2e4);o.onicecandidate=e=>{if(e.candidate){i.candidates.push(e.candidate);const n=new t.HashMap;n.set("sdp",i.offer.sdp),n.set("icecandidate",JSON.stringify(i.candidates)),console.crlog(`${r} onicecandidate, response candidates(${i.candidates.length}): ${JSON.stringify(i.candidates)}`),console.crlog(`${r} offer_cb ice_response(${i.msid}, HashMap)...`),i.offer_cb.ice_response(i.msid,n),i.offer_cb.isResponsed=!0}else console.crlog(`${r} onicecandidate! e.candidate == ${e.candidate}!`)},o.oniceconnectionstatechange=e=>{console.crlog(`${r} oniceconnectionstatechange, iceConnectionState: ${e.currentTarget.iceConnectionState}`),i&&i.iceConnectionState&&"completed"==i.iceConnectionState&&setTimeout((()=>{i.answer_cb&&!i.answer_cb.isResponsed&&(console.crlog(`${r} answer_cb ice_response()...`),i.answer_cb.ice_response(),i.answer_cb.isResponsed=!0)}),500)},o.onconnectionstatechange=e=>{const t=e.currentTarget.connectionState;if(console.crlog(`${r} onconnectionstatechange, connectionState: ${t}`),"connected"==t){i.lastBytesSent=0,clearInterval(i.rtpLogTimer);let e=()=>{o.getStats().then((e=>{e.forEach((e=>{"outbound-rtp"==e.type&&(i.width=e.frameWidth,i.height=e.frameHeight,i.frameRate=e.framesPerSecond,i.codeRate=(e.bytesSent-i.lastBytesSent)/2e3,i.lastBytesSent=e.bytesSent)}))}))};e(),i.rtpLogTimer=setInterval(e,2e3)}else"disconnected"!=t&&"failed"!=t||(clearInterval(i.rtpLogTimer),"failed"==t&&("connected"!=o.lastState&&"connecting"!=o.lastState||(console.crlog(`${r} connection state failed!`),__Rtc.CRICEAPI.MediaConnectionBreakReport(i.msid))));o.lastState=t},o.onsignalingstatechange=e=>{console.crlog(`${r} onsignalingstatechange, signalingState: ${e.currentTarget.signalingState}`)}}localScreenModifyPeerAddrExt(e,t,n){this.localConnection.answer_cb=e;const i=this.localConnection.logstr,r=this.localConnection.connection;n.sdp=this.parseAnswerSDP(n.sdp,"local");let o=" ";n.sdp.includes("VP8")&&(o+="VP8"),n.sdp.includes("H264")&&(o+=" H264"),console.crlog(`${i} ModifyPeerAddrExt, answerSDP:${n.sdp.length} ${o}`),this.localConnection.answer=n,console.crlog(`${i} answer setRemoteDescription(answer)`),r.setRemoteDescription(new RTCSessionDescription(n)).then((e=>{console.crlog(`${i} answer setRemoteDescription success!`),videoResolutionReport(this.localConnection.msid,"screen"),this.refreshContainerSrc()})).catch((e=>{console.crlog(`${i} answer setRemoteDescription fail! ${e}`),console.error(e)})),setTimeout((()=>{this.localConnection.answer_cb.isResponsed||(console.crlog(`${i} answer_cb ice_response()...`),this.localConnection.answer_cb.ice_response(),this.localConnection.answer_cb.isResponsed=!0)}),500)}setRemoteScreenConnection(e){const i=this.remoteConnection,r="[Screen] Remote screenShare RTCPeerConnection,";i.logstr=r,i.offer_cb=e,i.offer_cb.isResponsed=!1,console.crlog(`${r} new RTCPeerConnection...`);const o=new RTCPeerConnection(n.rtcCfg);i.connection=o;const s={offerToReceiveAudio:!1,offerToReceiveVideo:!0,voiceActivityDetection:!1};console.crlog(`${r} createOffer(${JSON.stringify(s)})`),o.createOffer(s).then((e=>{console.crlog(`${r} createOffer success!`),e.sdp=this.parseOfferSDP(e.sdp);let t=" ";e.sdp.includes("VP8")&&(t+="VP8"),e.sdp.includes("H264")&&(t+=" H264"),console.crlog(`${r} offer.sdp:${e.sdp.length} ${t}`),i.offer=e,console.crlog(`${r} offer setLocalDescription(offer)`),o.setLocalDescription(e).then((e=>{console.crlog(`${r} offer setLocalDescription success!`)})).catch((e=>{console.crlog(`${r} offer setLocalDescription fail! ${e}`),console.error(e)}))})).catch((e=>{console.crlog(`${r} createOffer fail! ${e}`),console.error(e)}));setTimeout((()=>{i.offer_cb.isResponsed||(console.crlog(`${r} offer_cb ice_response()...(No candidate for more than 20 s)`),i.offer_cb.ice_response(),i.offer_cb.isResponsed=!0)}),2e4);o.onicecandidate=e=>{if(e.candidate){i.candidates.push(e.candidate);const n=new t.HashMap;n.set("sdp",i.offer.sdp),n.set("icecandidate",JSON.stringify(i.candidates)),console.crlog(`${r} onicecandidate, response candidates(${i.candidates.length}): ${JSON.stringify(i.candidates)}`),console.crlog(`${r} offer_cb ice_response(${i.msid}, HashMap)...`),i.offer_cb.ice_response(i.msid,n),i.offer_cb.isResponsed=!0}else console.crlog(`${r} onicecandidate! e.candidate == ${e.candidate}!`)},o.oniceconnectionstatechange=e=>{console.crlog(`${r} oniceconnectionstatechange, iceConnectionState: ${e.currentTarget.iceConnectionState}`),i&&i.iceConnectionState&&"completed"==i.iceConnectionState&&setTimeout((()=>{i.answer_cb&&!i.answer_cb.isResponsed&&(console.crlog(`${r} answer_cb ice_response()...`),i.answer_cb.ice_response(),i.answer_cb.isResponsed=!0)}),500)},o.onconnectionstatechange=e=>{const t=e.currentTarget.connectionState;if(console.crlog(`${r} onconnectionstatechange, connectionState: ${t}`),"connected"==t){i.lastBytesReceived=0,i.codeRate=0,i.width=0,i.height=0,i.frameRate=0,i.lastPacketsLost=0,i.lastPacketsReceived=0,i.packetsLostRate=0,clearInterval(i.rtpLogTimer);let e=()=>{o.getStats().then((e=>{e.forEach((e=>{if("inbound-rtp"==e.type){i.codeRate=(e.bytesReceived-i.lastBytesReceived)/2e3,i.lastBytesReceived=e.bytesReceived,i.width=e.frameWidth,i.height=e.frameHeight,i.frameRate=e.framesPerSecond;let t=e.packetsLost-i.lastPacketsLost,n=e.packetsReceived-i.lastPacketsReceived;i.packetsLostRate=t<0?0:parseInt(t/(n+t)*1e4)/1e4,i.lastPacketsLost=e.packetsLost,i.lastPacketsReceived=e.packetsReceived}}))}))};e(),i.rtpLogTimer=setInterval(e,2e3)}else"disconnected"!=t&&"failed"!=t||(clearInterval(i.rtpLogTimer),"failed"==t&&("connected"!=o.lastState&&"connecting"!=o.lastState||(console.crlog(`${r} connection state failed!`),__Rtc.CRICEAPI.MediaConnectionBreakReport(i.msid))));o.lastState=t},o.onsignalingstatechange=e=>{console.crlog(`${r} onsignalingstatechange, signalingState: ${e.currentTarget.signalingState}`)},o.ontrack=e=>{console.crlog(`${r} ontrack, get stream now...`),i.stream=e.streams[0],this.refreshContainerSrc()}}remoteScreenModifyPeerAddrExt(e,t,n){this.remoteConnection.answer_cb=e;const i=this.remoteConnection.logstr,r=this.remoteConnection.connection;n.sdp=this.parseAnswerSDP(n.sdp,"remote");let o=" ";n.sdp.includes("VP8")&&(o+="VP8"),n.sdp.includes("H264")&&(o+=" H264"),console.crlog(`${i} ModifyPeerAddrExt, answerSDP:${n.sdp.length} ${o}`),this.remoteConnection.answer=n,console.crlog(`${i} answer setRemoteDescription(answer)`),r.setRemoteDescription(new RTCSessionDescription(n)).then((e=>{console.crlog(`${i} answer setRemoteDescription success!`)})).catch((e=>{console.crlog(`${i} answer setRemoteDescription fail! ${e}`),console.error(e)})),setTimeout((()=>{this.remoteConnection.answer_cb.isResponsed||(console.crlog(`${i} answer_cb ice_response()...`),this.remoteConnection.answer_cb.ice_response(),this.remoteConnection.answer_cb.isResponsed=!0)}),500)}refreshContainerSrc(){console.crlog("[Screen] Refresh all screen container src..."),__Rtc.CRRTCUI.screenContainerList.forEach((e=>{if(e._userID==n.userInfo.userId){if(!this.localScreenStream)return;console.crlog(`[Screen] Local screenShare, containerID:${e._id} set srcObject, stream:${this.localScreenStream.id}, active:${this.localScreenStream.active}`),e._videoEle.srcObject=this.localScreenStream,setTimeout((()=>{"Chrome"!==__Rtc.CRBrowser.curBrowserCfg.name&&e&&e._videoEle&&e._videoEle.srcObject&&(e._videoEle.click(),e._videoEle.play())}),2e3)}else{if(!this.remoteConnection.stream)return;console.crlog(`[Screen] Remote screenShare, userID:${e._userID}, containerID:${e._id} set srcObject, stream:${this.remoteConnection.stream.id}, active:${this.remoteConnection.stream.active}`),e._videoEle.srcObject=this.remoteConnection.stream,setTimeout((()=>{"Chrome"!==__Rtc.CRBrowser.curBrowserCfg.name&&e&&e._videoEle&&e._videoEle.srcObject&&(e._videoEle.click(),e._videoEle.play())}),2e3)}}))}parseMarkData(e){const t={};t.type=e.type,t.markId=e.markid;const n=e.mousePosSeq,i=n[3].toString(16),r=n[2].toString(16),o=n[1].toString(16);t.color="#"+(Array(2).join(0)+i).slice(-2)+(Array(2).join(0)+r).slice(-2)+(Array(2).join(0)+o).slice(-2);let s=4;t.width=n[s++]<<8|n[s++],t.size=n[s++]<<8|n[s++];const a=[],c=new DataView(n.buffer);for(;s<n.length;){let e={};e.x=c.getInt16(s),s+=2,e.y=c.getInt16(s),s+=2,a.push(e)}return t.data=a,t}},e.__Rtc.CRRTCScreen=new e.__crScreenClass,e.CRVideo_StartScreenShareRslt=new n.CbProxy("CRVideo_StartScreenShareRslt"),e.CRVideo_StopScreenShareRslt=new n.CbProxy("CRVideo_StopScreenShareRslt"),e.CRVideo_StartScreenMarkRslt=new n.CbProxy("CRVideo_StartScreenMarkRslt"),e.CRVideo_StopScreenMarkRslt=new n.CbProxy("CRVideo_StopScreenMarkRslt"),e.CRVideo_NotifyScreenShareStarted=new n.CbProxy("CRVideo_NotifyScreenShareStarted"),e.CRVideo_NotifyScreenShareStopped=new n.CbProxy("CRVideo_NotifyScreenShareStopped"),e.CRVideo_NotifyScreenShareData=new n.CbProxy("CRVideo_NotifyScreenShareData"),e.CRVideo_NotifyCatchScreen=new n.CbProxy("CRVideo_NotifyCatchScreen"),e.CRVideo_NotifyGiveCtrlRight=new n.CbProxy("CRVideo_NotifyGiveCtrlRight"),e.CRVideo_NotifyReleaseCtrlRight=new n.CbProxy("CRVideo_NotifyReleaseCtrlRight"),e.CRVideo_NotifyShareRectChanged=new n.CbProxy("CRVideo_NotifyShareRectChanged"),e.CRVideo_NotifyScreenMarkStarted=new n.CbProxy("CRVideo_NotifyScreenMarkStarted"),e.CRVideo_NotifyScreenMarkStopped=new n.CbProxy("CRVideo_NotifyScreenMarkStopped")}(window,Ice,CRVideo)},1955:()=>{!function(e,t,n){e.__crSyncClass=class{constructor(){this.initData(),this.initIceCallback(),this.initSDKInterface()}initData(){console.crlog("[Sync] SyncModule initData..."),this.curMainTab={termID:-1,localID:0},this.curSubTab={termID:0,localID:0}}initIceCallback(){this.ICECallback={notifySetCurrentTab(e,t,n){console.crlog(`[Sync] ICE Callback --\x3e notifySetCurrentTab, params:${JSON.stringify({mainId:e,subId:t,operId:n})}`),this.curMainTab=e,this.curSubTab=t,this.notifyCurPageID()},notifySetFullScreen(e,t){console.crlog(`[Sync] ICE Callback --\x3e notifySetFullScreen, params:${JSON.stringify({bFull:e,operId:t})}`)},notifySetPrivTabInfo(e,t){console.crlog(`[Sync] ICE Callback --\x3e notifySetPrivTabInfo, params:${JSON.stringify({jsonCfg:e,operId:t})}`)},notifySetSyncMode(e,t){console.crlog(`[Sync] ICE Callback --\x3e notifySetSyncMode, params:${JSON.stringify({sm:e,operId:t})}`)}}}initSDKInterface(){e.CRVideo_SwitchToPage=(e,t)=>new Promise(((i,r)=>{if(console.crlog(`[Sync] CRVideo_SwitchToPage(${e},${t})`),!n.isMeeting)return r({errCode:8,errDesc:"服务异常"});const o={termID:-1,localID:e};let s=-1,a=0;t||(t="0.0");try{s=+t.split(".")[0],a=+t.split(".")[1]}catch(e){return r({errCode:5,errDesc:"参数错误"})}const c={termID:s,localID:a};__Rtc.CRICEAPI.SetCurrentTab(o,c).then((e=>(console.crlog("[Sync] __Rtc.CRICEAPI.SetCurrentTab success! "),i({errCode:0}))),(e=>(console.crlog(`[Sync][Error] __Rtc.CRICEAPI.SetCurrentTab fail! ${e}`),r({errCode:1,errDesc:e}))))})),e.CRVideo_GetCurrentMainPage=()=>{console.crlog("[Sync] CRVideo_GetCurrentMainPage()");const e=this.curMainTab.localID;return console.crlog(`[Sync] CRVideo_GetCurrentMainPage, return: ${e}`),e},e.CRVideo_GetCurrentSubPage=()=>{console.crlog("[Sync] CRVideo_GetCurrentSubPage()");const e=`${this.curSubTab.termID}.${this.curSubTab.localID}`;return console.crlog(`[Sync] CRVideo_GetCurrentSubPage, return: ${e}`),e}}initSync(e){this.curMainTab=e.curMainTab,this.curSubTab=e.curSubTab}notifyCurPageID(){const e=`${this.curSubTab.termID}.${this.curSubTab.localID}`;console.crlog(`[Sync] CRVideo_NotifySwitchToPage.target(${this.curMainTab.localID},${e});`),CRVideo_NotifySwitchToPage.target(this.curMainTab.localID,e)}saveLastTabValue(e){__Rtc.CRICEAPI.SaveLastTabValue(e).then((e=>{console.crlog(`[Sync] __Rtc.CRICEAPI.SaveLastTabValue success! ${e[0]}`)}),(e=>{console.crlog(`[Sync][Error] __Rtc.CRICEAPI.SaveLastTabValue fail! ${e}`),console.error(e)}))}},e.__Rtc.CRRTCSync=new e.__crSyncClass,e.CRVideo_NotifySwitchToPage=new n.CbProxy("CRVideo_NotifySwitchToPage")}(window,Ice,CRVideo)},7957:(__unused_webpack_module,__unused_webpack___webpack_exports__,__webpack_require__)=>{"use strict";var _src_inMeeting_ice_IceApi_videoCtrl__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(246),_src_bus_utils_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(3085),_src_utils_mediapipe_selfie_segmentation__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(5496),_src_utils_mediapipe_selfie_segmentation__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_src_utils_mediapipe_selfie_segmentation__WEBPACK_IMPORTED_MODULE_2__),_src_inMeeting_meetSDK_meet_sdk_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(3826),_src_inMeeting_meetSDK_callback_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(5004);const CR=window.CRVideo,Ice=window.Ice;class CRVideo_VideoInfoObj{constructor(e,t,n){this.userID=e,this.videoID=t,this.videoName=n}}class _ConnectItem{constructor(e,t){this.camID=e,this.ssValue=0,this.msid=t,this.offer=null,this.answer=null,this.offer_cb=null,this.answer_cb=null,this.connection=null,this.candidate=[],this.stream=null,this.rtpLogTimer=-1}}window._ConnectItemClass=_ConnectItem;class _UserConnectList{constructor(e){this.termID=e,this.list=[]}}class VideoClass{constructor(){this.initData(),this.initIceCallback(),this.initIceNotify(),this.initSDKInterface()}initData(){console.crlog("[Video] VideoModule initData..."),this.VSTATUS={VUNKNOWN:0,VNULL:1,VCLOSE:2,VOPEN:3,VOPENING:4},this.vwalllo=0,this.videoWallList=[],this.mainVideoTermID=0,this.windowMode=""}initIceCallback(){this.ICECallback={enableSendVideo2Internet:this.enableSendVideo2Internet,disableSendVideo2Internet:this.disableSendVideo2Internet,updateAllCameraInfosRlst:e=>{console.crlog(`[Video] ICE Callback --\x3e updateAllCameraInfosRlst, params:${JSON.stringify({errCode:e})}`)},startVideoRslt:e=>{console.crlog(`[Video] ICE Callback --\x3e startVideoRslt, params:${JSON.stringify({errCode:e})}`)},stopVideoRslt:e=>{console.crlog(`[Video] ICE Callback --\x3e stopVideoRslt, params:${JSON.stringify({errCode:e})}`)},reqOpenVideoRslt:e=>{console.crlog(`[Video] ICE Callback --\x3e reqOpenVideoRslt, params:${JSON.stringify({errCode:e})}`)},startVideoExRslt:e=>{console.crlog(`[Video] ICE Callback --\x3e startVideoExRslt, params:${JSON.stringify({errCode:e})}`)},stopVideoExRslt:e=>{console.crlog(`[Video] ICE Callback --\x3e stopVideoExRslt, params:${JSON.stringify({errCode:e})}`)},setVideoDeviceStatusRslt:e=>{console.crlog(`[Video] ICE Callback --\x3e setVideoDeviceStatusRslt, params:${JSON.stringify({errCode:e})}`)},setOpenedCameraNumberRslt:e=>{console.crlog(`[Video] ICE Callback --\x3e setOpenedCameraNumberRslt, params:${JSON.stringify({errCode:e})}`)},batchSubscribeVideo2Rslt:e=>{console.crlog(`[Video] ICE Callback --\x3e batchSubscribeVideo2Rslt, params:${JSON.stringify({errCode:e})}`)}}}initIceNotify(){this.notifyAllowVideoWall=(e,t)=>{console.crlog(`[Video] ICE Notify --\x3e notifyAllowVideoWall, params:${JSON.stringify({bool:e,opID:t})}`)},this.updateStatus=(e,t,n)=>{console.crlog(`[Video] ICE Notify --\x3e updateStatus, params:${JSON.stringify({termID:e,status:t,opID:n})}`);const i=CR.allMemberInfo.find((t=>t.termId==e));if(!i)return;try{console.crlog(`[Video] Video updateStatus, termID:${e}, userID:${i.userId}, status:${t}, opID:${n}`)}catch(e){console.error(e)}const r=i.videoStatus||"VUNKNOWN";i.videoStatus=t.name,i.termId==CR.userInfo.termId&&("VOPEN"==t.name?(__Rtc.CRRTCLocalVideo.uploadCurOpenedCamNumber(),__Rtc.CRRTCLocalVideo.getLocalCamStream()):"VCLOSE"==t.name&&__Rtc.CRRTCLocalVideo.stopAllLocalVideoAndConnect()),r!==t.name&&CRVideo_VideoStatusChanged.target(i.userId,CRVideo_VSTATUS[r],CRVideo_VSTATUS[t.name])},this.notifyOpenVideo=e=>{console.crlog(`[Video] ICE Notify: notifyOpenVideo, params:${JSON.stringify({opID:e})}`),window.CRVideo_OpenVideo(CR.userInfo.userId)},this.updateFocusWindow=(e,t)=>{let n;console.crlog(`[Video] ICE Notify: updateFocusWindow, params: ${JSON.stringify({mode:e,termID:t})}`),n="VSPEAKER_TRACK"==e?1:"VPRESENTER_LOCK"==e?2:"VMANAGER_LOCK"==e?3:0,this.windowMode!=e&&(console.crlog(`[Video] Notify mainVideoModeChanged, oldMode:${this.windowMode}, newMode:${e}`),this.windowMode=e,CRVideo_NotifyMainVideoModeChanged.target(n));let i=_src_bus_utils_js__WEBPACK_IMPORTED_MODULE_1__.Z.termIDtoUserID(t);console.crlog(`[Video] Notify updateFocusWindow, mode:${e}, termId:${t}, userId:${i}`),this.mainVideoTermID=t,i&&CRVideo_NotifyMainVideoChanged.target(i)},this.updateVLayout2=(e,t)=>{console.crlog(`[Video] ICE Notify: updateVLayout2, params:${JSON.stringify({lo:e,opID:t})}`),this.vwalllo=e,__Rtc.CRRTCRemoteVideo.updateSubscribeVideo(),console.crlog(`[Video] notifyVideoWallMode.target(${e})`),_src_inMeeting_meetSDK_meet_sdk_js__WEBPACK_IMPORTED_MODULE_3__.Z.notifyVideoWallMode.target(e)},this.updateMainVideoShowMode=(e,t)=>{console.crlog(`[Video] ICE Notify: updateMainVideoShowMode, params:${JSON.stringify({MVM_value:e,opID:t})}`)},this.updateVideoListMode=(e,t)=>{console.crlog(`[Video] ICE Notify: updateVideoListMode, params:${JSON.stringify({jsonMode:e,opID:t})}`)},this.enableUpload2=(e,t)=>{console.crlog(`[Video] ICE Notify: enableUpload2, params:${JSON.stringify({camID:e,ssVal:t})}`),__Rtc.CRRTCLocalVideo.setUploadSize(e,t)},this.getVideoSetting_async=e=>{console.crlog("[Video] ICE Notify: getVideoSetting_async"),e.ice_response()},this.notifyVideoPolling=(e,t,n)=>{console.crlog(`[Video] ICE Notify: notifyPollingVideo2, params:${JSON.stringify({opID:e,bStart:t,interval:n})}`),_src_inMeeting_meetSDK_meet_sdk_js__WEBPACK_IMPORTED_MODULE_3__.Z.notifyVideoPolling.target(t,n)},this.notifyPollingVideo2=(e,t,n)=>{console.crlog(`[Video] ICE Notify: notifyPollingVideo2, params:${JSON.stringify({opID:e,watchIDs:t,jsonDat:n})}`);const i=[];this.videoWallList=t,t.forEach((e=>{const t=_src_bus_utils_js__WEBPACK_IMPORTED_MODULE_1__.Z.termIDtoUserID(e.termID);i.push({userID:t,camID:+e.camID})})),_src_inMeeting_meetSDK_meet_sdk_js__WEBPACK_IMPORTED_MODULE_3__.Z.notifyVideoWallVideos.target(i,n)},this.notifyVideoList=(e,t)=>{console.crlog(`[Video] ICE Notify: notifyVideoList, params:${JSON.stringify({opID:e,jsonDat:t})}`)},this.notifyUpdateAllCameraInfos=(e,t)=>{console.crlog(`[Video] ICE Notify: notifyUpdateAllCameraInfos, params:${JSON.stringify({termID:e,camInfos:t})}`),CR.allMemberInfo.forEach((n=>{if(n.termId==e){const i=new RegExp("\n","g");console.crlog(`[Video] TermID:${e}, userID:${n.userId}, updateAllCameraInfos: ${t.replace(i,"|")}`);const r=t.split("\n").slice(0,-1);n.allCams=r,window.CRVideo_VideoDevChanged.target(n.userId)}}))},this.notifySetOpenedCameraNumber=(e,t)=>{console.crlog(`[Video] ICE Notify --\x3e notifySetOpenedCameraNumber, params:${JSON.stringify({termID:e,camID:t})}`);const n=[];t.forEach((e=>n.push(parseInt(e)))),CR.allMemberInfo.forEach((t=>{if(t.termId==e){console.crlog(`[Video] NotifySetOpenedCameraNumber, termID:${t.termId}, userID:${t.userId}, camIDs:${JSON.stringify(n)}`);const i=t.defaultCam||0,r=n[0],o=t.openedCamIDs||[],s=n.slice(1);let a=!1;console.crlog(`[Video] Old OpenedCams: ${o}`),console.crlog(`[Video] Now OpenedCams: ${s}`),console.crlog(`[Video] Old DefaultCam: ${i}`),console.crlog(`[Video] Now DefaultCam: ${r}`),t.defaultCam=r,t.openedCamIDs=s;const c=[],l=[];for(let e=0;e<s.length;e++)o.includes(s[e])||l.push(s[e]);for(let e=0;e<o.length;e++)s.includes(o[e])||c.push(o[e]);return(c.length>0||l.length>0)&&(a=!0),t.userId!==CR.userInfo.userId&&c.forEach((t=>{__Rtc.CRRTCRemoteVideo.connectList.forEach((n=>{n.termID==e&&n.list.forEach((n=>{n.camID%1e4==t&&(console.crlog(`[Video] MSID:${n.msid}, termID:${e}, camID:${n.camID} video RTCConnection closed...`),n.connection&&n.connection.close())}))}))})),a&&(console.crlog(`[Video] TermID:${t.termId}, userID:${t.userId}, opened cams changed, stoppedCams:${JSON.stringify(c)}, addedCams:${JSON.stringify(l)}`),window.CRVideo_VideoDevChanged.target(t.userId)),r!==i&&(console.crlog(`[Video] TermID:${t.termId}, userID:${t.userId}, default camId changed:${i} ----\x3e ${r}`),window.CRVideo_DefVideoChanged.target(t.userId,r)),void(e!==CR.userInfo.termId&&__Rtc.CRRTCRemoteVideo.updateSubscribeVideo())}}))}}initSDKInterface(){window.CRVideo_SetVideoCfg=e=>{console.crlog(`[Video] CRVideo_SetVideoCfg(${JSON.stringify(e)})`),__Rtc.CRRTCLocalVideo.setVideoCfg(e)},window.CRVideo_GetVideoCfg=()=>{const e={};for(var t in __Rtc.CRRTCLocalVideo.videoCfg)e[t]=__Rtc.CRRTCLocalVideo.videoCfg[t];return console.crlog(`[Video] CRVideo_GetVideoCfg(), return: ${JSON.stringify(e)}`),e},window.CRVideo_GetVideoStatus=e=>{let t=_src_bus_utils_js__WEBPACK_IMPORTED_MODULE_1__.Z.findUserInfoByID(e,"videoStatus")||"VUNKNOWN";return this.VSTATUS[t]},window.CRVideo_GetDefaultVideo=e=>{let t;if(e==CR.userInfo.userId)t=__Rtc.CRRTCLocalVideo.defaultCamID;else{let n=null;CR.allMemberInfo.forEach((t=>{t.userId==e&&(n=null==t.defaultCam?-1:+t.defaultCam)})),t=null!=n?n:0}return+t},window.CRVideo_SetDefaultVideo=(e,t)=>{try{console.crlog(`[Video] CRVideo_SetDefaultVideo(${e},${t})`),t=+t}catch(e){console.error(e)}e==CR.userInfo.userId&&__Rtc.CRRTCLocalVideo.setDefaultVideo(t)},window.CRVideo_GetAllVideoInfo=e=>{const t=+_src_bus_utils_js__WEBPACK_IMPORTED_MODULE_1__.Z.userIDtoTermID(e),n=[];return t&&t===+CR.userInfo.termId?__Rtc.CRRTCLocalVideo.videoInput.forEach((t=>{n.push(new CRVideo_VideoInfoObj(e,t.id,t.name))})):CR.allMemberInfo.forEach((i=>{i.termId==t&&i.allCams&&i.allCams.forEach((t=>{const i=t.split(";");n.push(new CRVideo_VideoInfoObj(e,+i[0],i[1]))}))})),n},window.CRVideo_OpenVideo=e=>{if(console.crlog(`[Video] CRVideo_OpenVideo(${e})`),e==CR.userInfo.userId)__Rtc.CRRTCLocalVideo.openMyVideo();else{const t=_src_bus_utils_js__WEBPACK_IMPORTED_MODULE_1__.Z.userIDtoTermID(e);t&&_src_inMeeting_ice_IceApi_videoCtrl__WEBPACK_IMPORTED_MODULE_0__.Z.reqOpenVideo(t)}},window.CRVideo_CloseVideo=e=>{if(console.crlog(`[Video] CRVideo_CloseVideo(${e})`),e==CR.userInfo.userId)__Rtc.CRRTCLocalVideo.closeMyVideo();else{const t=_src_bus_utils_js__WEBPACK_IMPORTED_MODULE_1__.Z.userIDtoTermID(e);_src_inMeeting_ice_IceApi_videoCtrl__WEBPACK_IMPORTED_MODULE_0__.Z.stopVideoEx(t)}},window.CRVideo_AddStreamCam=(e,t,n)=>(console.crlog(`[Video] CRVideo_AddStreamCam(${e},${t},${JSON.stringify(n)})`),__Rtc.CRRTCLocalVideo.addStreamCam(e,t,n)),window.CRVideo_RemoveStreamVideo=e=>(console.crlog(`[Video] CRVideo_RemoveStreamVideo(${e})`),__Rtc.CRRTCLocalVideo.removeStreamCam(e)),window.CRVideo_AddCanvasVCam=(e,t,n)=>{console.crlog(`[Video] CRVideo_AddCanvasVCam(${e},${t},${JSON.stringify(n)})`);const i=n&&n.fps?n.fps:__Rtc.CRRTCLocalVideo.videoCfg.fps;void 0===t&&(t=Ice.generateUUID());const r=e.getContext("2d"),o={type:"canvasStreamCam",canvas:e,ctx:r,putImageFun(){r.putImageData(r.getImageData(0,0,e.width,e.height),0,0)}};o.putImageFun();const s=e.captureStream(i||15),a=window.CRVideo_AddStreamCam(s,t,o);return!!a&&new CRVideo_VideoInfoObj(CR.userInfo.userId,a,t)},window.CRVideo_RemoveCanvasVCam=e=>{console.crlog(`[Video] CRVideo_RemoveCanvasVCam(${e})`),window.CRVideo_RemoveStreamVideo(e)},window.CRVideo_GetOpenedVideoIDs=e=>_src_bus_utils_js__WEBPACK_IMPORTED_MODULE_1__.Z.findUserInfoByID(e,"openedCamIDs")||[],window.CRVideo_SetEnableMutiVideo=(e,t)=>{console.crlog(`[Video] CRVideo_SetEnableMutiVideo(${e},${t})`),__Rtc.CRRTCLocalVideo.VBGConfig.type&&t||e==CR.userInfo.userId&&__Rtc.CRRTCLocalVideo.setEnableMutiVideo(t)},window.CRVideo_GetEnableMutiVideo=e=>{let t=null;return e==CR.userInfo.userId&&(t=__Rtc.CRRTCLocalVideo.multipleCams),console.crlog(`[Video] CRVideo_GetEnableMutiVideo(${e}), return:${t}`),t},window.CRVideo_SetVirtualBackground=e=>{console.crlog(`[Video] CRVideo_SetVirtualBackground(${JSON.stringify(e)})`);const{type:t,color:n,image:i,destroy:r,debuggerStyle:o}=e;return __Rtc.CRRTCLocalVideo.setVirtualBackground(t,n,i,r,o)},window.CRVideo_SetMainVideo=e=>{console.crlog(`[Video] CRVideo_SetMainVideo(${e})`);return new Promise(((t,n)=>{const i=_src_bus_utils_js__WEBPACK_IMPORTED_MODULE_1__.Z.userIDtoTermID(e);i&&_src_inMeeting_ice_IceApi_videoCtrl__WEBPACK_IMPORTED_MODULE_0__.Z.setFocusWindow("VMANAGER_LOCK",i).then((e=>t({errCode:0,errDesc:"success"})),(e=>(console.error(e),n(__Rtc.CRCONFERR.Parse(e)))))}))},window.CRVideo_SetMainVideoMode=(e,t)=>{console.crlog(`[Video] CRVideo_SetMainVideoMode(${e},${t})`);return new Promise(((n,i)=>{let r;1==e?r="VSPEAKER_TRACK":2==e?r="VPRESENTER_LOCK":3==e&&(r="VMANAGER_LOCK");const o=_src_bus_utils_js__WEBPACK_IMPORTED_MODULE_1__.Z.userIDtoTermID(t);o&&_src_inMeeting_ice_IceApi_videoCtrl__WEBPACK_IMPORTED_MODULE_0__.Z.setFocusWindow(r,o).then((e=>n({errCode:0,errDesc:"success"})),(e=>(console.error(e),i(__Rtc.CRCONFERR.Parse(e)))))}))},window.CRVideo_GetMainVideo=()=>{const e=_src_bus_utils_js__WEBPACK_IMPORTED_MODULE_1__.Z.termIDtoUserID(this.mainVideoTermID);return console.crlog(`[Video] CRVideo_GetMainVideo(), return: ${e}`),e},window.CRVideo_GetMainVideoMode=()=>this.windowMode,_src_inMeeting_meetSDK_meet_sdk_js__WEBPACK_IMPORTED_MODULE_3__.Z.setVideoWallMode=e=>{console.crlog(`[MeetSDK][Video] MeetSDK.setVideoWallMode(${e})`);return new Promise(((t,n)=>{_src_inMeeting_ice_IceApi_videoCtrl__WEBPACK_IMPORTED_MODULE_0__.Z.setVLayout2(e).then((e=>t({errCode:0,errDesc:"success"})),(e=>(console.error(e),n(__Rtc.CRCONFERR.Parse(e)))))}))},_src_inMeeting_meetSDK_meet_sdk_js__WEBPACK_IMPORTED_MODULE_3__.Z.getVideoWallMode=()=>(console.crlog(`[MeetSDK][Video] MeetSDK.getVideoWallMode(), return: ${this.vwalllo}`),this.vwalllo),_src_inMeeting_meetSDK_meet_sdk_js__WEBPACK_IMPORTED_MODULE_3__.Z.getVideoWallVideoList=()=>(console.crlog("[MeetSDK][Video] MeetSDK.getVideoWallVideoList()"),this.getVideoWallVideoList()),_src_inMeeting_meetSDK_meet_sdk_js__WEBPACK_IMPORTED_MODULE_3__.Z.updatePollingVideo2=e=>{console.crlog(`[MeetSDK][Video] MeetSDK.updatePollingVideo2(${JSON.stringify(e)})`);return new Promise(((t,n)=>{_src_inMeeting_ice_IceApi_videoCtrl__WEBPACK_IMPORTED_MODULE_0__.Z.updatePollingVideo2(e).then((e=>t({errCode:0,errDesc:"success"})),(e=>(console.error(e),n(__Rtc.CRCONFERR.Parse(e)))))}))},window.CRVideo_DisableCamera=(e,t)=>{console.crlog(`[Video] CRVideo_DisableCamera(${e},${t})`);const n=__Rtc.CRRTCLocalVideo.videoInput.find((t=>t.id==e));n&&(n.disabled=t)},window.CRVideo_SetLocVideoAttributes=(e,t)=>{console.crlog(`[Video] CRVideo_SetLocVideoAttributes(${e}, ${JSON.stringify(t)})`);const n=__Rtc.CRRTCLocalVideo.videoInput.find((t=>t.id==e));if(n)for(let e in t)n.locAttr[e]=t[e];null!=t.constraints&&3==CRVideo_GetVideoStatus(CR.userInfo.userId)&&(__Rtc.CRRTCLocalVideo.closeMyVideo(),setTimeout((()=>{__Rtc.CRRTCLocalVideo.openMyVideo()}),1e3))},window.CRVideo_GetLocVideoAttributes=e=>{const t=__Rtc.CRRTCLocalVideo.videoInput.find((t=>t.id==e));return t?t.locAttr:{}},window.CRVideo_GetVideoTrackCapabilities=e=>{const t=__Rtc.CRRTCLocalVideo.videoInput.find((t=>t.id==e));let n={};return t&&t.stream&&t.stream.active&&(n=t.stream.getVideoTracks()[0].getCapabilities(),n.pan&&0==n.pan.step&&(n.pan.step=(n.pan.max-n.pan.min)/500),n.tilt&&0==n.tilt.step&&(n.tilt.step=(n.tilt.max-n.tilt.min)/500),n.zoom&&0==n.zoom.step&&(n.zoom.step=(n.zoom.max-n.zoom.min)/500)),console.crlog(`[Video] CRVideo_GetVideoTrackCapabilities(${e}), return: ${JSON.stringify(n)}`),n},window.CRVideo_GetVideoTrackSettings=e=>{const t=__Rtc.CRRTCLocalVideo.videoInput.find((t=>t.id==e));let n={};return t&&t.stream&&t.stream.active&&(n=t.stream.getVideoTracks()[0].getSettings()),console.crlog(`[Video] CRVideo_GetVideoTrackSettings(${e}), return: ${JSON.stringify(n)}`),n},window.CRVideo_SetVideoPanTiltZoom=async(e,t)=>{__Rtc.CRRTCLocalVideo.setVideoPanTiltZoom(e,t)}}enableSendVideo2Internet(e){console.crlog(`[Video] ICE Notify: enableSendVideo2Internet, params:${JSON.stringify({camID:e})}`),__Rtc.CRRTCLocalVideo.enableSendVideo2Internet(e)}disableSendVideo2Internet(e){console.crlog(`[Video] ICE Notify: disableSendVideo2Internet, params:${JSON.stringify({camID:e})}`)}videoAllocRawExt2(e,t,n,i){const r=+t.cameraID,o=+t.srcTermID;console.crlog(`[Video] TermID:${o}, camID:${r}, isSelf:${n}, videoAllocRawExt2...`),setTimeout((()=>{e.isResponsed||(console.crlog(`[Video] TermID:${o}, camID:${r}, isSelf:${n}, waiting for over 20s, do cb.ice_response()`),e.ice_response(),e.isResponsed=!0)}),2e4),n?__Rtc.CRRTCLocalVideo.videoAllocRawExt2(e,r):__Rtc.CRRTCRemoteVideo.videoAllocRawExt2(e,o,r)}modifyPeerAddrExt(e,t,n,i){if(setTimeout((()=>{t.isResponsed||(t.ice_response(),t.isResponsed=!0)}),2e4),"localVideo"==e){const e={type:"answer",sdp:this.parseAnswerSDP("local",i.get("sdp"))};__Rtc.CRRTCLocalVideo.modifyPeerAddrExt(e,t,n)}else if("remoteVideo"==e){const e={type:"answer",sdp:this.parseAnswerSDP("remote",i.get("sdp"))};__Rtc.CRRTCRemoteVideo.modifyPeerAddrExt(e,t,n)}}parseOfferSDP(e,t){let n=e;return"send"==t&&(n=n.replace("a=sendrecv","a=sendonly")),n}parseAnswerSDP(e,t){const n=t.match(/c=IN IP4(.*?)\r\n/)?t.match(/c=IN IP4(.*?)\r\n/)[0]:"",i=t.match(/b=AS:(.*?)\r\n/)?t.match(/b=AS:(.*?)\r\n/)[0]:"";return n&&t.split(n).length>2&&(t=t.replace(`${n}${i}`,"")),t=t.replace("a=extmap:5 http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01\r\n",""),"local"==e&&(t=(t=t.replace("a=extmap:5 http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01\r\n","")).replace(";profile-level-id=42001f","")),"remote"==e&&(t=t.replace("a=sendrecv","a=sendonly")),t}}class LocalVideoClass{constructor(){this.selfieSegmentation=null,this.VBGConfig={type:0,videoEle:null,videoCanvas:null,color:"",img:null,style:null},this.initData()}initData(){console.crlog("[Video] LocalVideoModule initData..."),this.lastLocalVideoMSID=12e4,this.defaultCamID=1,this.videoCfg={size:1,fps:15,ratio:1},__Rtc.CRBrowser.curBrowserCfg.isMobile&&(this.videoCfg.ratio=3),this.multipleCams=!1,this.videoInput=[],this.streamCamID=50,this.selfieSegmentationPermission=!1,this.originalTrack=null,this.VBGWorker=null,this.ptzWaitingFlag=!0,this.ptzLastConstraints=null}openMyVideo(){console.crlog("[Video] Open my video..."),__Rtc.CRRTCLocalVideo.videoInput.length>0?_src_inMeeting_ice_IceApi_videoCtrl__WEBPACK_IMPORTED_MODULE_0__.Z.startVideo():console.crlog("[Video] Open video failed, no video devices!")}closeMyVideo(){console.crlog("[Video] Close my video..."),__Rtc.CRRTCLocalVideo.stopAllLocalVideoAndConnect(),_src_inMeeting_ice_IceApi_videoCtrl__WEBPACK_IMPORTED_MODULE_0__.Z.stopVideo()}virtualBackgroundInit(){const e=document.createElement("video");e.autoplay=!0;const t=document.createElement("canvas"),n=t.getContext("2d");var i=new _src_utils_mediapipe_selfie_segmentation__WEBPACK_IMPORTED_MODULE_2__.SelfieSegmentation({locateFile:e=>`${CRVideo.virtualBackgroundAssets}/${e}`});i.setOptions({modelSelection:1}),i.onResults((e=>{const{type:i,img:r,color:o}=this.VBGConfig;if(0==i)return n.clearRect(0,0,t.width,t.height),void n.drawImage(e.image,0,0,t.width,t.height);n.save(),n.clearRect(0,0,t.width,t.height),n.drawImage(e.segmentationMask,0,0,t.width,t.height),n.globalCompositeOperation="source-in",n.drawImage(e.image,0,0,t.width,t.height),1==i&&o?(n.globalCompositeOperation="destination-atop",n.fillStyle=o,n.fillRect(0,0,t.width,t.height)):2==i&&r&&r.complete&&(n.globalCompositeOperation="destination-atop",n.drawImage(r,0,0,t.width,t.height)),n.restore()}));const r=URL.createObjectURL(new Blob([(console.crlog("[Video] Get canvas stream:new Worker..."),"("+function(){let e;self.onmessage=function(t){const{cmd:n,fps:i}=t.data;if("start"===n){clearTimeout(e);const t=()=>{self.postMessage("draw"),e=setTimeout(t,1e3/i)};t()}else"stop"===n&&(clearTimeout(e),e=null)}}.toString()+"());")],{type:"text/javascript"})),o=new Worker(r);let s=!0;o.onmessage=e=>{"draw"===e.data&&s&&(s=!1,this.selfieSegmentation.send({image:this.VBGConfig.videoEle}).then((()=>{s=!0})))},this.VBGConfig.videoCanvas=t,this.VBGConfig.videoEle=e,this.VBGWorker=o,this.selfieSegmentation=i}virtualBackgroundUninit(){this.VBGConfig.style&&document.body.removeChild(this.VBGConfig.videoEle),this.VBGWorker.postMessage({cmd:"stop"}),this.VBGWorker.terminate&&this.VBGWorker.terminate(),this.VBGConfig.videoCanvas=null,this.VBGConfig.videoEle=null,this.VBGWorker=null,this.selfieSegmentation=null}setVirtualBackground(e,t,n,i=!0,r){if(!this.selfieSegmentationPermission)return console.crlog("[Video][Error] Virtual Backgrounds No Permission!"),806;this.VBGConfig.type=e,this.VBGConfig.color=t,this.VBGConfig.img=n,this.VBGConfig.style=r,n&&n.setAttribute("crossOrigin","anonymous");const o=_src_bus_utils_js__WEBPACK_IMPORTED_MODULE_1__.Z.findUserInfoByID(CR.userInfo.userId,"videoStatus")||"VUNKNOWN";if(3!==__Rtc.CRRTCVideo.VSTATUS[o])return 0;let s;if(this.videoInput.forEach((e=>{e.disabled||!this.multipleCams&&(this.multipleCams||e.id!=this.defaultCamID)||"streamCam"!==e.kind&&e.stream&&"canvasStreamCam"!==e.kind&&(s=e)})),!s)return 0;switch(e){case 0:if(!this.selfieSegmentation)return 0;if(i){const e=this.VBGConfig.videoEle.srcObject;if(s.connect.connection){s.connect.connection.getSenders()[0].replaceTrack(this.originalTrack)}if(s.connect2.connection){s.connect2.connection.getSenders()[0].replaceTrack(this.originalTrack)}this.originalTrack=null,s.stream=e,s.connect.stream=e,s.connect2.stream=e,this.refreshLocalContainerSrc("",s),this.virtualBackgroundUninit()}break;case 1:case 2:if(!this.selfieSegmentation){this.virtualBackgroundInit(),this.originalTrack=s.stream.getTracks()[0];const e=this.VBGConfig.videoEle;e.srcObject=s.stream,e.onplay=()=>{this.VBGConfig.videoCanvas.width=e.videoWidth,this.VBGConfig.videoCanvas.height=e.videoHeight,this.VBGWorker.postMessage({cmd:"start",fps:this.videoCfg.fps});const{videoEle:t}=this.VBGConfig;r&&(Object.keys(r).forEach((e=>{t.style[e]=r[e]})),document.body.appendChild(t))};const t=this.VBGConfig.videoCanvas.captureStream(1e3/this.videoCfg.fps);if(s.connect.connection){s.connect.connection.getSenders()[0].replaceTrack(t.getTracks()[0])}if(s.connect2.connection){s.connect2.connection.getSenders()[0].replaceTrack(t.getTracks()[0])}s.stream=t,s.connect.stream=t,s.connect2.stream=t,this.refreshLocalContainerSrc("",s)}break;default:reject({errCode:5,errDesc:"type不正确"})}return 0}getVirtualBackgroundStream(e,t){this.selfieSegmentation||this.virtualBackgroundInit(),this.originalTrack=e.getTracks()[0];const{style:n,videoEle:i}=this.VBGConfig;i.srcObject=e,i.onplay=()=>{this.VBGConfig.videoCanvas.width=i.videoWidth,this.VBGConfig.videoCanvas.height=i.videoHeight,this.VBGWorker.postMessage({cmd:"start",fps:this.videoCfg.fps}),n&&(Object.keys(n).forEach((e=>{i.style[e]=n[e]})),document.body.appendChild(i))},this.VBGConfig.videoCanvas.width=1920,this.VBGConfig.videoCanvas.height=1080,setTimeout((()=>{var e=this.VBGConfig.videoCanvas.captureStream(30);t.stream=e,t.connect.stream=e,t.connect2.stream=e,this.refreshLocalContainerSrc("",t),CRVideo_NotifyVideoStream.target(CR.userInfo.userId,e),CRVideo_NotifyCameraStream.target(CR.userInfo.userId,t.id,e)}),500)}parseVideoHeight(e){let t=null;return 1==e?t={ideal:360}:2==e?t={ideal:480}:3==e?t={ideal:720}:4==e?t={ideal:1080}:5==e?t={ideal:96}:6==e?t={ideal:128}:7==e?t={ideal:160}:8==e?t={ideal:192}:9==e?t={ideal:256}:10==e?t={ideal:288}:11==e?t={ideal:320}:12==e?t={ideal:400}:13==e?t={ideal:576}:14==e?t={ideal:1440}:15==e&&(t={ideal:2160}),t}parseVideoWidth(e){let t=null;return 1==e?t={ideal:640}:2==e?t={ideal:848}:3==e?t={ideal:1280}:4==e?t={ideal:1920}:5==e?t={ideal:160}:6==e?t={ideal:224}:7==e?t={ideal:288}:8==e?t={ideal:352}:9==e?t={ideal:448}:10==e?t={ideal:512}:11==e?t={ideal:576}:12==e?t={ideal:704}:13==e?t={ideal:1024}:14==e?t={ideal:2160}:15==e&&(t={ideal:3840}),t}parseVideoRatio(e){let t=null;switch(e){case 1:t={exact:16/9};break;case 2:t={exact:4/3};break;case 3:t={exact:1};break;case 4:t={exact:3/4};break;case 5:t={exact:9/16}}return t}parseVideoConstraints(videoCfg,device){if(videoCfg&&null!=videoCfg.size&&0==videoCfg.size)return;const videoConstraints={};null==videoCfg&&(videoCfg=this.videoCfg),null==videoCfg.ratio&&(videoCfg.ratio=this.videoCfg.ratio);const sdkRatio=this.parseVideoRatio(videoCfg.ratio);null!==sdkRatio&&(videoConstraints.aspectRatio=sdkRatio),videoCfg.aspectRatio&&(videoConstraints.aspectRatio={exact:eval(videoCfg.aspectRatio)}),null==videoCfg.size&&(videoCfg.size=this.videoCfg.size);const width=this.parseVideoWidth(videoCfg.size),height=this.parseVideoHeight(videoCfg.size);return null!==height&&videoConstraints.aspectRatio&&videoConstraints.aspectRatio.exact<=1?videoConstraints.height=height:null!==width&&(videoConstraints.width=width),null==videoCfg.fps&&(videoCfg.fps=this.videoCfg.fps),videoConstraints.frameRate={ideal:videoCfg.fps},void 0!==device&&(__Rtc.CRBrowser.curBrowserCfg.isMobile?videoConstraints.facingMode={exact:device.includes("user")?"user":"environment"}:videoConstraints.deviceId={exact:device}),1==device&&Reflect.deleteProperty(videoConstraints,"deviceId"),videoConstraints}getCurVideoCfg(e){return new Promise(((t,n)=>{const i=e.getVideoTracks()[0];if(i&&i.getSettings){let e,n;function r(){e=i.getSettings(),e.height&&e.width?(clearTimeout(n),t(e)):n=setTimeout((()=>{r()}),100)}r()}else{let e={width:this.parseVideoWidth(this.videoCfg.size),height:this.parseVideoHeight(this.videoCfg.size)};t(e)}}))}getMaxbps(e=this.videoCfg.size){let t=16e5;switch(e){case 5:t=75e3;break;case 6:t=1e5;break;case 7:t=125e3;break;case 8:t=16e4;break;case 9:t=23e4;break;case 10:t=26e4;break;case 11:t=31e4;break;case 1:t=4e5;break;case 12:t=48e4;break;case 2:t=6e5;break;case 13:t=8e5;break;case 3:t=12e5;break;case 4:t=2e6;break;case 14:t=4e6;break;case 15:t=6e6;break;default:t=16e5}return t}setMaxbps(e,t){try{const n=e.getSenders()[0];if(!n)return console.crlog("[Video][Error] connection.getSenders()[0] is undefind! setMaxbps fail!");const i=n.getParameters();let r;r=t>0?this.getMaxbps(t):163840,console.log("-------\x3e"),console.log(i),i.encodings[0].maxBitrate=r,n.setParameters(i).then((e=>{console.crlog(`[Video] LocalVideoConnection sender setParams, size:${t}, maxBitrate:${r}, success!`)})).catch((e=>{console.crlog(`[Video][Error] LocalVideoConnection sender setParams, size:${t}, maxBitrate:${r}, fail! ${e}`),console.error(e)}))}catch(e){console.crlog(`[Video][Error] ${e}`),console.error(e)}}setVideoCfg(e){const t={};if(void 0!==e.size&&(t.size=+e.size),void 0!==e.fps&&(t.fps=+e.fps),void 0!==e.ratio&&(t.ratio=+e.ratio),void 0!==e.aspectRatio&&(t.aspectRatio=e.aspectRatio),0===Object.keys(t).length)return;for(let e in t)this.videoCfg[e]=t[e];let n=this.parseVideoConstraints(t);this.originalTrack?this.originalTrack.applyConstraints(n).then((()=>{console.crlog(`[Video] Local applyConstraints success! Current settings:${JSON.stringify(this.originalTrack.getSettings())}`),e.size&&setTimeout((()=>{this.VBGConfig.videoCanvas.width=this.VBGConfig.videoEle.videoWidth,this.VBGConfig.videoCanvas.height=this.VBGConfig.videoEle.videoHeight}),500),t.fps>0&&this.VBGWorker.postMessage({cmd:"start",fps:t.fps})})).catch((e=>{console.crlog(`[Video] Local applyConstraints fail! ${e}`),console.error(e)})):this.videoInput.forEach((i=>{if(null!=t.size&&i.ssVal&&(t.size=this.configSizeToUploadSize(+e.size,i.ssVal)),n=this.parseVideoConstraints(t),i.stream&&i.stream.active&&!i.locAttr.constraints){const e=i.stream.getVideoTracks()[0];console.crlog(`[Video] Local camID:${i.id} applyConstraints:${JSON.stringify(n)}`),e.applyConstraints(n).then((()=>{console.crlog(`[Video] Local camID:${i.id} applyConstraints success! Current settings:${JSON.stringify(e.getSettings())}`),i.connect&&i.connect.connection&&"connected"==i.connect.connection.connectionState&&(this.setMaxbps(i.connect.connection,t.size),this.getCurVideoCfg(i.connect.stream).then((e=>{e.width&&e.height&&window.videoResolutionReport(i.connect.msid,"video",e.width,e.height)}))),i.connect2&&i.connect2.connection&&"connected"==i.connect2.connection.connectionState&&(this.setMaxbps(i.connect2.connection,t.size),this.getCurVideoCfg(i.connect2.stream).then((e=>{e.width&&e.height&&window.videoResolutionReport(i.connect2.msid,"video",e.width,e.height)})))})).catch((e=>{console.crlog(`[Video] Local camID:${i.id} applyConstraints fail! ${e}`),console.error(e)}))}}))}async setVideoPanTiltZoom(e,t){let n=this.ptzLastConstraints||{advanced:[t]};if(this.ptzWaitingFlag){this.ptzWaitingFlag=!1;const t=this.videoInput.find((t=>t.id==e));if(t&&t.stream&&t.stream.active){let i=t.stream.getVideoTracks()[0];try{if(await i.applyConstraints(n),this.ptzWaitingFlag=!0,this.ptzLastConstraints){const t=this.ptzLastConstraints.advanced[0];this.ptzLastConstraints=null,this.setVideoPanTiltZoom(e,t)}}catch(e){this.ptzWaitingFlag=!0,console.error("setVideoPanTiltZoom failed: ",e),console.crlog(`[Video] Control ptz camera error: ${e.toString()}`)}}}else this.ptzLastConstraints=n}setDefaultVideo(e){const t=this.videoInput.find((t=>t.id==e)),n=_src_bus_utils_js__WEBPACK_IMPORTED_MODULE_1__.Z.findUserInfoByID(CR.userInfo.userId,"videoStatus");t&&(this.defaultCamID=e,this.multipleCams||"VOPEN"!=n||(this.stopAllLocalVideoAndConnect(),this.getLocalCamStream()),this.uploadCurOpenedCamNumber())}stopAllLocalVideoAndConnect(e){console.crlog("[Video] Do stop all local video track and connect..."),this.originalTrack&&(this.originalTrack.stop(),this.originalTrack=null),this.selfieSegmentation&&this.virtualBackgroundUninit(),__Rtc.CRRTCUI.videoContainerList.forEach((e=>{e._userID==CR.userInfo.userId&&e.clear()})),this.videoInput.forEach((e=>{e.connect.connection&&e.connect.connection.close(),e.connect2.connection&&e.connect2.connection.close(),e.connect.answer=null,e.connect.answer_cb=null,e.connect.candidate=[],e.connect.connection=null,e.connect.offer=null,e.connect.offer_cb=null,clearInterval(e.connect.rtpLogTimer),e.connect.rtpLogTimer=-1,e.connect2.answer=null,e.connect2.answer_cb=null,e.connect2.candidate=[],e.connect2.connection=null,e.connect2.offer=null,e.connect2.offer_cb=null,clearInterval(e.connect2.rtpLogTimer),e.connect2.rtpLogTimer=-1,window.videoResolutionReport(e.connect.msid,"video",0,0),window.videoResolutionReport(e.connect2.msid,"video",0,0),this.selfieSegmentation&&this.virtualBackgroundUninit(),"streamCam"!==e.kind&&"canvasStreamCam"!==e.kind&&(e.stream&&e.stream.getVideoTracks()[0].stop(),e.connect.stream=null,e.connect2.stream=null,e.stream=null),"canvasStreamCam"==e.kind&&e.exData&&e.exData.putImageTimer&&clearInterval(e.exData.putImageTimer)}))}uploadAllCamInfo(){console.crlog("[Video] UploadAllCamInfo...");let e="";this.videoInput.forEach((function(t){e=e+t.id+";"+t.name+";0;0\n"})),e&&_src_inMeeting_ice_IceApi_videoCtrl__WEBPACK_IMPORTED_MODULE_0__.Z.updateAllCameraInfos(e)}uploadVideoDeviceStatus(){console.crlog("[Video] UploadVideoDeviceStatus..."),_src_inMeeting_ice_IceApi_videoCtrl__WEBPACK_IMPORTED_MODULE_0__.Z.setVideoDeviceStatus(this.videoInput.length>0)}uploadCurOpenedCamNumber(){console.crlog("[Video] UploadCurOpenedCamNumber...");const e=[this.defaultCamID];this.videoInput.forEach((t=>{t.disabled||!this.multipleCams&&(this.multipleCams||t.id!=this.defaultCamID)||e.push(t.id)})),_src_inMeeting_ice_IceApi_videoCtrl__WEBPACK_IMPORTED_MODULE_0__.Z.setOpenedCameraNumber(e)}getLocalCamStream(e){console.crlog("[Video] getLocalCamStream..."),this.videoInput.forEach((t=>{if(!t.disabled&&(this.multipleCams||!this.multipleCams&&t.id==this.defaultCamID))if("streamCam"===t.kind||t.stream&&t.stream.active||"canvasStreamCam"===t.kind){if(t.stream&&t.stream.active)this.refreshLocalContainerSrc("",t);else if("streamCam"==t.kind)t.connect.stream=t.stream,t.connect2.stream=t.stream,this.refreshLocalContainerSrc("",t);else if("canvasStreamCam"==t.kind&&(t.connect.stream=t.stream,t.connect2.stream=t.stream,this.refreshLocalContainerSrc("",t),t.exData)){t.exData.putImageTimer&&clearInterval(t.exData.putImageTimer),t.exData.putImageTimer=setInterval((()=>{t.exData.putImageFun()}),2e3);let e=0,n=300;const i=setInterval((()=>{e>3e3/n?(clearInterval(i),e=0):(t.exData.putImageFun(),e++)}),n)}}else{let n={audio:!1,video:__Rtc.CRBrowser.curBrowserCfg.isMobile?this.parseVideoConstraints(null,t.facingMode):this.parseVideoConstraints(null,t.deviceId)};if(null!=e&&(n=e),t.locAttr.constraints){let e=n.video.deviceId;n.video=t.locAttr.constraints,n.video.deviceId=e}t.locAttr.panTiltZoom&&(n.video.pan=!0,n.video.tilt=!0,n.video.zoom=!0),console.crlog(`[Video] local video camID:${t.id} getUserMedia:${JSON.stringify(n)}`),navigator.mediaDevices.getUserMedia(n).then((e=>{t.deviceId&&console.crlog(`[Video] Local video camID:${t.id}, deviceID:${t.deviceId} getUserMedia success! stream:${e.id}`),t.facingMode&&console.crlog(`[Video] Local video camID:${t.id}, facingMode:${t.facingMode} getUserMedia success! stream:${e.id}`),console.crlog(`[Video] Local video camID:${t.id} current settings:${JSON.stringify(e.getVideoTracks()[0].getSettings())}`),0==this.VBGConfig.type||this.multipleCams?(t.stream=e,t.connect.stream=e,t.connect2.stream=e,this.refreshLocalContainerSrc("",t),CRVideo_NotifyVideoStream.target(CR.userInfo.userId,e),CRVideo_NotifyCameraStream.target(CR.userInfo.userId,t.id,e)):this.getVirtualBackgroundStream(e,t)})).catch((e=>{if(t.deviceId&&console.crlog(`[Video] Local video camID:${t.id}, deviceID:${t.deviceId} getUserMedia fail! ${e.name}`),t.facingMode&&console.crlog(`[Video] Local video camID:${t.id}, deviceID:${t.facingMode} getUserMedia fail! ${e.name}`),console.error(e),!__Rtc.CRBrowser.curBrowserCfg.isMobile||null==n.video.height&&null==n.video.width)if(null!=n.video.facingMode){const e={audio:!1,video:!0};console.crlog("[Video] This device can not support facingMode, try to open video without facingMode..."),this.getLocalCamStream(e)}else console.crlog(`[Video] CRVideo_OpenVideoFailed.target(${t.id},${e.name})`),CRVideo_OpenVideoFailed.target(t.id,e.name),3==CRVideo_GetVideoStatus(CRVideo.userInfo.userId)&&_src_inMeeting_ice_IceApi_videoCtrl__WEBPACK_IMPORTED_MODULE_0__.Z.stopVideo();else{const e={audio:!1,video:!0};n.video.deviceId&&(e.video={deviceId:n.video.deviceId}),n.video.facingMode&&(e.video={facingMode:n.video.facingMode}),console.crlog("[Video] Some mobile phone can not readable size 1(360p), change the video cfg to size 2(480p)"),1==this.videoCfg.size&&(this.videoCfg.size=2),this.getLocalCamStream(e)}}))}}))}refreshLocalContainerSrc(e,t){if(3!=CRVideo_GetVideoStatus(CRVideo.userInfo.userId))return!1;var n=(e,t)=>{if(e._userID==CR.userInfo.userId&&(t.id==e._videoID||-1==e._videoID&&t.id==this.defaultCamID)){console.crlog(`[Video] Refresh local videoContainer src..., containerID:${e._id}, camID:${t.id}`);const n=t.stream||null,i=n?n.id:null,r=n?n.active:null;console.crlog(`[Video] Local video camID:${t.id}, containerID:${e._id}, set srcObject, stream:${i}, active:${r}`),e._videoEle.srcObject=n,setTimeout((()=>{r&&e&&e._videoEle&&e._videoEle.srcObject&&e._videoEle.click()}),1e3)}};e?this.videoInput.forEach((t=>{n(e,t)})):t?__Rtc.CRRTCUI.videoContainerList.forEach((e=>{n(e,t)})):(console.crlog("[Video] Refresh all local videoContainer src..."),__Rtc.CRRTCUI.videoContainerList.forEach((e=>{e._userID==CR.userInfo.userId&&this.videoInput.forEach((t=>{n(e,t)}))})))}videoAllocRawExt2(e,t){const n=this.videoInput.find((e=>e.id==t%1e4));if(!n)return console.crlog(`[Video] LocalVideoConnection, can not find camItem with camID:${t}, do offer_cb.ice_response()`),e.ice_response(),void(e.isResponsed=!0);t<=1e4?(n.connect.offer_cb=e,this.setLocalVideoConnection(n.connect)):t>1e4&&(n.connect2.offer_cb=e,this.setLocalVideoConnection(n.connect2))}setLocalVideoConnection(e){const t=`[Video] MSID:${e.msid}, camID:${e.camID}, localVideoConnection`;console.crlog(`${t} new RTCPeerConnection...`);const n=new RTCPeerConnection(CR.rtcCfg);e.connection=n;let i,r=0;!function o(){if(r>1e4)return console.crlog(`${t} After waiting for more than 10 seconds, the camera video stream is not obtained, do offer_cb.ice_response()`),console.crlog(`${t} CRVideo_OpenVideoTimeout.target(10000)`),CRVideo_OpenVideoTimeout.target(1e4),e.offer_cb&&e.offer_cb.ice_response()&&(e.offer_cb.isResponsed=!0),void(3==CRVideo_GetVideoStatus(CRVideo.userInfo.userId)&&_src_inMeeting_ice_IceApi_videoCtrl__WEBPACK_IMPORTED_MODULE_0__.Z.stopVideo());if(!e.stream||!e.stream.active)return void(i=setTimeout((()=>{r+=50,o()}),50));const s=e.stream,a=e.stream.getVideoTracks()[0];n.addTrack&&"closed"!==n.signalingState?(console.crlog(`${t} addTrack(videoTrack, stream)`),n.addTrack(a,s)):setTimeout((function(){n.dispatchEvent(new Event("negotiationneeded"))}),100);console.crlog(`${t} createOffer()`),n.createOffer().then((i=>{i.sdp=__Rtc.CRRTCVideo.parseOfferSDP(i.sdp,"send"),e.offer=i;let r=" ";i.sdp.includes("VP8")&&(r+="VP8"),i.sdp.includes("H264")&&(r+=" H264"),console.crlog(`${t} createOffer success! ${r}\r\n${i.sdp}`),console.crlog(`${t} setLocalDescription(offer)`),n.setLocalDescription(i).then((e=>{console.crlog(`${t} setLocalDescription success!`)})).catch((e=>{console.crlog(`${t} setLocalDescription fail! ${e}`),console.error(e)}))})).catch((e=>{console.crlog(`${t} createOffer fail! ${e}`),console.error(e)}))}(),n.onicecandidate=n=>{function i(){if(e.offer_cb&&!e.offer_cb.isResponsed){const n=new Ice.HashMap;n.set("sdp",e.offer.sdp),n.set("icecandidate",JSON.stringify(e.candidate)),console.crlog(`${t}, response candidates(${e.candidate.length}): ${JSON.stringify(e.candidate)}`),console.crlog(`${t} offer_cb ice_response(${e.msid}, HashMap)...`),e.offer_cb.ice_response(e.msid,n),e.offer_cb.isResponsed=!0}}console.crlog(`${t} onicecandidate: ${JSON.stringify(n.candidate)}`),setTimeout((()=>{i()}),500),n.candidate?e.candidate.push(n.candidate):i()},n.oniceconnectionstatechange=n=>{console.crlog(`${t} oniceconnectionstatechange, iceConnectionState: ${n.currentTarget.iceConnectionState}`),e&&e.iceConnectionState&&"completed"==e.iceConnectionState&&setTimeout((function(){console.crlog(`${t} answer_cb ice_response()...`),e.answer_cb.ice_response(),e.answer_cb.isResponsed=!0}),500)},n.onicegatheringstatechange=e=>{console.crlog(`${t} onicegatheringstatechange, iceConnectionState: ${e.target.iceGatheringState}`)},n.onconnectionstatechange=i=>{const r=i.currentTarget.connectionState;if(console.crlog(`${t} onconnectionstatechange, connectionState: ${r}`),"connected"==r){e.lastBytesSent=0;let i=0;clearInterval(e.rtpLogTimer);let r=()=>{n.getStats().then((n=>{n.forEach((n=>{if("outbound-rtp"==n.type){e.width=n.frameWidth,e.height=n.frameHeight,e.frameRate=n.framesPerSecond,e.codeRate=(n.bytesSent-e.lastBytesSent)/2e3,e.lastBytesSent=n.bytesSent;const r={packetsSent:n.packetsSent,retransmittedPacketsSent:n.retransmittedPacketsSent,bytesSent:n.bytesSent,headerBytesSent:n.headerBytesSent,retransmittedBytesSent:n.retransmittedBytesSent,framesEncoded:n.framesEncoded,keyFramesEncoded:n.keyFramesEncoded,totalEncodeTime:n.totalEncodeTime,totalEncodedBytesTarget:n.totalEncodedBytesTarget,frameWidth:n.frameWidth,frameHeight:n.frameHeight,framesPerSecond:n.framesPerSecond,framesSent:n.framesSent,hugeFramesSent:n.hugeFramesSent,totalPacketSendDelay:n.totalPacketSendDelay,qualityLimitationReason:n.qualityLimitationReason,qualityLimitationResolutionChanges:n.qualityLimitationResolutionChanges,encoderImplementation:n.encoderImplementation,firCount:n.firCount,pliCount:n.pliCount,nackCount:n.nackCount,qpSum:n.qpSum,qualityLimitationDurations:n.qualityLimitationDurations};i++,i>=5&&(i=0,console.crlog(`${t} outbound-rtp: ${JSON.stringify(r)}`))}"ssrc"==n.type&&console.crlog(`${t} ssrc: ${JSON.stringify(n)}`)}))}))};r(),e.rtpLogTimer=setInterval(r,2e3)}else"disconnected"!=r&&"failed"!=r||e.isFree||(clearInterval(e.rtpLogTimer),console.crlog(`${t} connection state ${n.connectionState}!`),console.log(`======= lastState: ${n.lastState} =======`),"connected"!=n.lastState&&"connecting"!=n.lastState||__Rtc.CRICEAPI.MediaConnectionBreakReport(e.msid),console.crlog(`[Video] CRVideo_PeerConnectionError.target(${JSON.stringify({userID:CRVideo.userInfo.userId,nickName:CRVideo.userInfo.nickname,camID:e.camID,errDesc:"RemoteVideo RTCPeerConnection state failed"})})`),CRVideo_PeerConnectionError.target({userID:CRVideo.userInfo.userId,nickName:CRVideo.userInfo.nickname,camID:e.camID,errDesc:"RemoteVideo RTCPeerConnection state failed"}));n.lastState=r},n.onsignalingstatechange=e=>{console.crlog(`${t} onsignalingstatechange, signalingState: ${e.currentTarget.signalingState}`)}}modifyPeerAddrExt(e,t,n){let i;if(this.videoInput.forEach((e=>{e.connect.msid==n&&(i=e.connect),e.connect2.msid==n&&(i=e.connect2)})),i){const n=`[Video] MSID:${i.msid}, camID:${i.camID}, localVideoConnection`;let r=" ";e.sdp.includes("VP8")&&(r+="VP8"),e.sdp.includes("H264")&&(r+=" H264"),console.crlog(`${n} modifyPeerAddrExt, answerSDP:${e.sdp.length} ${r}`),i.answer_cb=t,i.answer=e,setTimeout((()=>{i.answer_cb&&(console.crlog(`${n} answer_cb ice_response()...`),i.answer_cb.ice_response(),i.answer_cb.isResponsed=!0)}),500)}}enableSendVideo2Internet(e){let t;if(this.videoInput.forEach((n=>{n.connect.camID==e&&(t=n.connect),n.connect2.camID==e&&(t=n.connect2)})),t){if(t&&"stable"==t.connection.signalingState)return;const n=`[Video] MSID:${t.msid}, camID:${t.camID}, localVideoConnection`;console.crlog(`${n} answer sdp:\r\n${t.answer.sdp}`),console.crlog(`${n} setRemoteDescription(answer)`),t.connection.setRemoteDescription(new RTCSessionDescription(t.answer)).then((()=>{console.crlog(`${n} setRemoteDescription success!`);const i=t.connection.getSenders()[0],r=i.getParameters();null!=r.encodings&&r.encodings!=[]||(r.encodings=[],r.encodings[0]={});let o=this.getMaxbps(this.configSizeToUploadSize(this.videoCfg.size,this.videoInput.find((t=>t.id==e%1e4)).ssVal));r.encodings[0].maxBitrate=o,i.setParameters(r).then((t=>{console.crlog(`${n} sender setParams, camID:${e}, maxBitrate:${o}, success!`)})).catch((t=>{console.crlog(`${n} sender setParams, camID:${e}, maxBitrate:${o}, fail! ${t}`),console.error(t)})),this.getCurVideoCfg(t.stream).then((e=>{e.width&&e.height&&window.videoResolutionReport(t.msid,"video",e.width,e.height)}))})).catch((e=>{console.crlog(`${n} setRemoteDescription fail! ${e}`),console.error(e)}))}}setEnableMutiVideo(e){const t=this.multipleCams;if(t==e)return;this.multipleCams=e;const n=CR.allMemberInfo.find((e=>e.userId==CR.userInfo.userId));1==t?(n&&"VOPEN"==n.videoStatus&&this.uploadCurOpenedCamNumber(),this.videoInput.forEach((e=>{e.id!==this.defaultCamID&&e.stream&&e.stream.active&&("streamCam"!==e.kind&&"canvasStreamCam"!==e.kind?(e.stream.getVideoTracks()[0].stop(),e.stream=null):"canvasStreamCam"==e.kind&&e.exData&&e.exData.putImageTimer&&clearInterval(e.exData.putImageTimer),e.connect.stream=null,e.connect2.stream=null)}))):n&&"VOPEN"==n.videoStatus&&(this.getLocalCamStream(),this.uploadCurOpenedCamNumber())}stopAllLocalVideoTrack(){console.crlog("[Video] Do stop all local video track..."),this.videoInput.forEach((e=>{e.stream&&"streamCam"!==e.kind&&"canvasStreamCam"!==e.kind?(e.stream.getVideoTracks()[0].stop(),e.stream=null):"canvasStreamCam"==e.kind&&e.exData&&e.exData.putImageTimer&&clearInterval(e.exData.putImageTimer)}))}addStreamCam(e,t,n){try{console.crlog(`[Video] AddStreamCam -- stream --\x3e id:${e.id}, active: ${e.active}`)}catch(e){console.error(e)}const i=this.streamCamID++,r=Ice.generateUUID(),o={};o.deviceId=r,o.name=t||r,o.kind=n&&"canvasStreamCam"==n.type?"canvasStreamCam":"streamCam",o.id=i,o.disabled=!1,o.locAttr={},o.stream=e,o.ssVal=0,o.connect=new _ConnectItemClass(i,__Rtc.CRRTCLocalVideo.lastLocalVideoMSID++),o.connect2=new _ConnectItemClass(i+1e4,__Rtc.CRRTCLocalVideo.lastLocalVideoMSID++),o.connect.stream=e,o.connect2.stream=e,n&&(o.exData=n),this.videoInput.push(o),this.uploadAllCamInfo(),this.uploadCurOpenedCamNumber(),this.uploadVideoDeviceStatus();const s=CR.allMemberInfo.find((e=>e.userId==CR.userInfo.userId));return s&&"VOPEN"==s.videoStatus&&this.multipleCams&&(this.getLocalCamStream(),this.uploadCurOpenedCamNumber()),i}removeStreamCam(e){const t=this.videoInput.findIndex((t=>t.id===e&&("streamCam"==t.kind||"canvasStreamCam"==t.kind)));-1!=t&&this.videoInput.splice(t,1),this.uploadAllCamInfo(),this.uploadCurOpenedCamNumber()}videoMSIDFree(e){this.videoInput.forEach((t=>{t.connect.msid==e&&(t.connect.isFree=!0),t.connect2.msid==e&&(t.connect2.isFree=!0)}))}configSizeToUploadSize(e,t){let n=e;if(1==e)switch(t){case 0:case 1:case 2:case 3:case 4:n=1;break;case 5:n=9;break;case 6:n=8;break;case 7:n=7;break;case 8:n=6;break;case 255:n=5}else if(2==e)switch(t){case 0:case 1:n=2;break;case 2:case 3:case 4:n=1;break;case 5:n=9;break;case 6:n=8;break;case 7:n=7;break;case 8:n=6;break;case 255:n=5}else if(3==e)switch(t){case 0:n=3;break;case 1:n=13;break;case 2:case 3:case 4:n=2;break;case 5:n=10;break;case 6:n=9;break;case 7:n=8;break;case 8:n=6;break;case 255:n=5}else if(4==e)switch(t){case 0:n=4;break;case 1:n=3;break;case 2:case 3:case 4:n=2;break;case 5:n=10;break;case 6:n=9;break;case 7:n=7;break;case 8:n=6;break;case 255:n=5}return console.crlog(`[Video] Config size to upload size -- ssVal:${t}, sizeType:${e}, uploadSize:${n}`),n}setUploadSize(e,t){console.crlog(`[Video] Set upload size... camID:${e}, ssVal:${t}`);let n=this.configSizeToUploadSize(this.videoCfg.size,t);255==t&&(n=0),this.videoInput.forEach((i=>{if(i.id==e&&i.stream&&i.stream.active&&!i.locAttr.constraints){i.ssVal=t;const r=this.parseVideoConstraints({size:n});console.crlog(`[Video] Local camID:${e} applyConstraints(${JSON.stringify(r)}) when set upload size...`),i.stream.getVideoTracks()[0].applyConstraints(r).then((()=>{console.crlog(`[Video] Local camID:${e} applyConstraints success! Current settings:${JSON.stringify(i.stream.getVideoTracks()[0].getSettings())}`)})),i.connect&&i.connect.connection&&"connected"==i.connect.connection.connectionState&&this.setMaxbps(i.connect.connection,n),i.connect2&&i.connect2.connection&&"connected"==i.connect2.connection.connectionState&&this.setMaxbps(i.connect2.connection,n)}}))}}class RemoteVideoClass{constructor(){this.initData()}initData(){console.crlog("[Video] RemoteVideoModule initData..."),this.lastRemoteVideoMSID=22e4,this.remoteVideoSSVal=0,this.connectList=[],this.subscribedCamList=[]}subscribeVideo(e,t,n){if(-1==t){const n=_src_bus_utils_js__WEBPACK_IMPORTED_MODULE_1__.Z.termIDtoUserID(e);t=_src_bus_utils_js__WEBPACK_IMPORTED_MODULE_1__.Z.findUserInfoByID(n,"defaultCam")}if(_src_inMeeting_ice_IceApi_videoCtrl__WEBPACK_IMPORTED_MODULE_0__.Z.batchSubscribeVideo2(e,t,n),255==n){let n=null,i=null,r=!1;this.subscribedCamList.forEach(((o,s)=>{o.list.forEach(((a,c)=>{o.termID==e&&a.id==t&&(n=s,i=c,1==o.list.length&&(r=!0))}))})),r?null!==n&&this.subscribedCamList.splice(n,1):null!==n&&null!==i&&this.subscribedCamList[n].list.splice(i,1)}}videoAllocRawExt2(e,t,n){const i=this.connectList.find((e=>e.termID==t));if(i){let r=i.list.find((e=>e.camID==n));r||(r=new _ConnectItem(n,this.lastRemoteVideoMSID++),i.list.push(r)),r.offer_cb=e,this.setRemoteVideoConnection(t,r)}else{const i=new _UserConnectList(t),r=new _ConnectItem(n,this.lastRemoteVideoMSID++);i.list.push(r),this.connectList.push(i),r.offer_cb=e,this.setRemoteVideoConnection(t,r)}}modifyPeerAddrExt(e,t,n){console.crlog(`[Video] MSID:${n} modifyPeerAddrExt...`),this.connectList.forEach((i=>{const r=i.list.find((e=>e.msid==n));if(r){r.answer_cb=t,r.answer=e;const n=i.termID,o=CR.allMemberInfo.find((e=>e.termId==n)),s=`[Video] MSID:${r.msid}, termID:${n}, userID:${o.userId}, camID:${-1==r.camID?o.defaultCam:r.camID}, remoteVideoConnection`;let a=" ";e.sdp.includes("VP8")&&(a+="VP8"),e.sdp.includes("H264")&&(a+=" H264"),console.crlog(`${s} received answer sdp:${e.sdp.length} ${a}`),console.crlog(`${s} setRemoteDescription(answer)`),r.connection.setRemoteDescription(new RTCSessionDescription(e)).then((()=>{console.crlog(`${s} setRemoteDescription success!`)})).catch((e=>{console.crlog(`${s} setRemoteDescription fail! ${e}`),console.error(e)})),setTimeout((()=>{console.crlog(`${s} answer_cb ice_response()...`),r.answer_cb.ice_response(),r.answer_cb.isResponsed=!0}),500)}}))}setRemoteVideoConnection(e,t){const n=CR.allMemberInfo.find((t=>t.termId==e)),i=`[Video] MSID:${t.msid}, termID:${e}, userID:${n.userId}, camID:${t.camID}, remoteVideoConnection`;console.crlog(`${i} new RTCPeerConnection...`);const r=new RTCPeerConnection(CR.rtcCfg);t.connection=r;const o={offerToReceiveAudio:!1,offerToReceiveVideo:!0,voiceActivityDetection:!1};console.crlog(`${i} createOffer(${JSON.stringify(o)})`),r.createOffer(o).then((e=>{e.sdp=__Rtc.CRRTCVideo.parseOfferSDP(e.sdp);let n=" ";e.sdp.includes("VP8")&&(n+="VP8"),e.sdp.includes("H264")&&(n+=" H264"),console.crlog(`${i} createOffer success! offerSDP is:${e.sdp.length} ${n}`),t.offer=e,console.crlog(`${i} setLocalDescription(offer)`),r.setLocalDescription(e).then((()=>{console.crlog(`${i} offer setLocalDescription success!`)})).catch((e=>{console.error(`${i} offer setLocalDescription fail! ${e}`),console.error(e)}))})).catch((e=>{console.crlog(`${i} createOffer fail! ${e}`),console.error(e)})),r.onicecandidate=e=>{if(e.candidate&&!t.isResponsedCandidate){t.candidate.push(e.candidate);const n=new Ice.HashMap;n.set("sdp",t.offer.sdp),n.set("icecandidate",JSON.stringify(t.candidate)),console.crlog(`${i} onicecandidate, response candidates(${t.candidate.length}): ${JSON.stringify(t.candidate)}`),console.crlog(`${i} offer_cb ice_response(${t.msid}, HashMap)...`),t.offer_cb.ice_response(t.msid,n),t.offer_cb.isResponsed=!0,t.isResponsedCandidate=!0}else 0===t.candidate.length&&console.crlog(`${i} onicecandidate! null!`)},r.oniceconnectionstatechange=e=>{console.crlog(`${i} oniceconnectionstatechange, iceConnectionState: ${e.currentTarget.iceConnectionState}`),t&&t.iceConnectionState&&"completed"==t.iceConnectionState&&setTimeout((function(){console.crlog(`${i} answer_cb ice_response()...`),t.answer_cb.ice_response(),t.answer_cb.isResponsed=!0}),500)},r.ontrack=e=>{console.crlog(`${i} ontrack!`),console.crlog(`${i} video stream:${e.streams[0].id}`),t.stream=e.streams[0],console.crlog(`[Video] CRVideo_NotifyVideoStream.target(${n.userId}, ${e.streams[0]})`),CRVideo_NotifyVideoStream.target(n.userId,e.streams[0]),CRVideo_NotifyCameraStream.target(n.userId,t.camID%1e4,e.streams[0]);try{return void __Rtc.CRRTCUI.videoContainerList.forEach((e=>{e._userID==n.userId&&(e._videoID==t.camID%1e4||-1==e._videoID&&t.camID%1e4==n.defaultCam)&&(console.crlog(`${i} containerID:${e._id}, videoEle set srcObject...`),e._videoEle.srcObject=t.stream,setTimeout((()=>{t.stream&&t.stream.active&&e&&e._videoEle&&e._videoEle.srcObject&&e._videoEle.click()}),1e3))}))}catch(e){console.error(e)}},r.onconnectionstatechange=e=>{const o=e.currentTarget.connectionState;if(console.crlog(`${i} onconnectionstatechange, connectionState: ${o}`),"connected"==o){t.lastBytesReceived=0,t.codeRate=0,t.width=0,t.height=0,t.frameRate=0,t.lastPacketsLost=0,t.lastPacketsReceived=0,t.packetsLostRate=0;let e=0;t.rtpLogTimer=setInterval((()=>{r.getStats().then((n=>{n.forEach((n=>{if("inbound-rtp"==n.type){t.codeRate=(n.bytesReceived-t.lastBytesReceived)/2e3,t.lastBytesReceived=n.bytesReceived,t.width=n.frameWidth,t.height=n.frameHeight,t.frameRate=n.framesPerSecond;let r=n.packetsLost-t.lastPacketsLost,o=n.packetsReceived-t.lastPacketsReceived;t.packetsLostRate=r<0?0:parseInt(r/(o+r)*1e4)/1e4,t.lastPacketsLost=n.packetsLost,t.lastPacketsReceived=n.packetsReceived;const s={jitter:n.jitter,packetsLost:n.packetsLost,packetsReceived:n.packetsReceived,dbPacketsLostRate:2*t.packetsLostRate,bytesReceived:n.bytesReceived,headerBytesReceived:n.headerBytesReceived,jitterBufferDelay:n.jitterBufferDelay,jitterBufferEmittedCount:n.jitterBufferEmittedCount,framesReceived:n.framesReceived,frameWidth:n.frameWidth,frameHeight:n.frameHeight,framesPerSecond:n.framesPerSecond,framesDecoded:n.framesDecoded,keyFramesDecoded:n.keyFramesDecoded,framesDropped:n.framesDropped,totalDecodeTime:n.totalDecodeTime,totalInterFrameDelay:parseInt(1e4*n.totalInterFrameDelay)/1e4,totalSquaredInterFrameDelay:parseInt(1e4*n.totalSquaredInterFrameDelay)/1e4,firCount:n.firCount,pliCount:n.pliCount,nackCount:n.nackCount};e++,e>=5&&(e=0,console.crlog(`${i} inbound-rtp: ${JSON.stringify(s)}`))}"ssrc"==n.type&&console.crlog(`${i} ssrc: ${JSON.stringify(n)}`)}))}))}),2e3)}else"disconnected"!=o&&"failed"!=o||(clearInterval(t.rtpLogTimer),"failed"===r.connectionState&&(console.crlog(`${i} connection state failed!`),console.log(`======= lastState: ${r.lastState} =======`),"connected"!=r.lastState&&"connecting"!=r.lastState||__Rtc.CRICEAPI.MediaConnectionBreakReport(t.msid),this.connectList.forEach((e=>{e.list.forEach(((e,i)=>{e.msid==t.msid&&(console.crlog(`[Video] CRVideo_PeerConnectionError.target(${JSON.stringify({userID:n.userId,nickName:n.nickname,camID:t.camID,errDesc:"RemoteVideo RTCPeerConnection state failed"})})`),CRVideo_PeerConnectionError.target({userID:n.userId,nickName:n.nickname,camID:t.camID,errDesc:"RemoteVideo RTCPeerConnection state failed"}))}))}))));r.lastState=o},r.onsignalingstatechange=e=>{console.crlog(`${i} onsignalingstatechange, signalingState: ${e.currentTarget.signalingState}`)}}videoMSIDFree(e){this.connectList.forEach((t=>{t.list.forEach(((n,i)=>{if(n.msid==e){clearInterval(n.rtpLogTimer),n.connection&&n.connection.close(),n.stream=null;const e=CR.allMemberInfo.find((e=>e.termId==t.termID));__Rtc.CRRTCUI.videoContainerList.forEach((t=>{if(t._userID==e.userId&&(t._videoID==n.camID%1e4||-1==t._videoID&&n.camID%1e4==e.defaultCam))try{t._videoEle.srcObject=null}catch(e){}})),t.list.splice(i,1)}}))}))}updateSubscribeVideo(){this.subcribeTimer&&clearTimeout(this.subcribeTimer),this.subcribeTimer=setTimeout((()=>{console.crlog("[Video] UpdateSubscribeVideo...");const e=[],t=[];__Rtc.CRRTCUI.videoContainerList.forEach((t=>{const n=CR.allMemberInfo.find((e=>e.userId==t._userID));if(!n||!n.defaultCam||n.termId==CR.userInfo.termId||!t._handler.parentNode||"none"==t._handler.style.display)return;let i=e.find((e=>e.termID==n.termId));i||(i={termID:n.termId,list:[]},e.push(i));const r=-1==t._videoID?n.defaultCam:t._videoID;null==i.list.find((e=>e.ID==r))&&n.openedCamIDs.includes(r)&&i.list.push({id:r,ssVal:t._ssVal||0})})),console.log(`[Video] oldSubscribeList: ${JSON.stringify(this.subscribedCamList)}`),console.log(`[Video] newSubscribeList: ${JSON.stringify(e)}`),e.forEach((e=>{const n=this.subscribedCamList.find((t=>t.termID==e.termID)),i=CR.allMemberInfo.find((t=>t.termId==e.termID));if(i)if(n){const r=[];e.list.forEach((e=>{null==n.list.find((t=>t.id==e.id&&t.ssVal==e.ssVal))&&r.push(e)})),r.forEach((e=>{const n={termID:i.termId,camID:e.id,ssVal:e.ssVal};t.push(n)}))}else e.list.forEach((e=>{const n={termID:i.termId,camID:e.id,ssVal:e.ssVal};t.push(n)}))})),this.subscribedCamList.forEach((n=>{const i=e.find((e=>e.termID==n.termID)),r=CR.allMemberInfo.find((e=>e.termId==n.termID));if(r)if(i){let e=[];n.list.forEach((t=>{null==i.list.find((e=>t.id==e.id))&&e.push(t)})),e.forEach((e=>{const n={termID:r.termId,camID:e.id,ssVal:255};t.push(n)}))}else n.list.forEach((e=>{const n={termID:r.termId,camID:e.id,ssVal:255};t.push(n)}))})),this.subscribedCamList=e,console.crlog(`[Video] resSubscribeList: ${JSON.stringify(t)}`),t.forEach((e=>{this.subscribeVideo(e.termID,e.camID,e.ssVal)}))}),100)}unSubscibevideo(e,t){const n=CR.allMemberInfo.find((t=>t.userId==e));n&&this.subscribeVideo(n.termId,t,255)}updateConnectList(e,t,n){const i=this.connectList.find((t=>t.termID==e));if(i){i.list.find((e=>e.camID==t))||i.list.push(new _ConnectItem(t,this.lastRemoteVideoMSID++))}else{const n=new _UserConnectList(e);n.list.push(new _ConnectItem(t,this.lastRemoteVideoMSID++)),this.connectList.push(n)}}refreshContainerSrc(e){e?this.connectList.forEach((t=>{const n=CR.allMemberInfo.find((e=>e.termId==t.termID));n&&t.list.forEach((t=>{!function(e,t,n){e._userID==n.userId&&(e._videoID==t.camID%1e4||-1==e._videoID&&t.camID%1e4==n.defaultCam)&&(t.stream&&t.stream.active&&console.crlog(`[Video] TermID:${n.termId}, userID:${n.userId}, containerID:${e._id} video set srcObject, stream:${t.stream.id}`),t.stream&&t.stream.active&&(e._videoEle.srcObject=t.stream),setTimeout((()=>{e&&e._videoEle&&e._videoEle.srcObject&&e._videoEle.click()}),1e3))}(e,t,n)}))})):(console.crlog("[Video] Do refresh all remote video container src..."),this.connectList.forEach((e=>{const t=CR.allMemberInfo.find((t=>t.termId==e.termID));t&&e.list.forEach((e=>{__Rtc.CRRTCUI.videoContainerList.forEach((n=>{n._userID==t.userId&&(n._videoID==e.camID%1e4||-1==n._videoID&&e.camID%1e4==t.defaultCam)&&(e.stream&&e.stream.active&&console.crlog(`[Video] TermID:${t.termId}, userID:${t.userId}, containerID:${n._id} video set srcObject, stream:${e.stream.id}`),e.stream&&e.stream.active&&(n._videoEle.srcObject=e.stream),setTimeout((()=>{n&&n._videoEle&&n._videoEle.srcObject&&n._videoEle.click()}),1e3))}))}))})))}userLeftHandler(e){console.crlog("[Video] Do user left meet video handler...");const t=this.subscribedCamList.findIndex((t=>t.termID==e));-1!=t&&this.subscribedCamList.splice(t,1);const n=this.connectList.findIndex((t=>t.termID==e));-1!=n&&this.connectList.splice(n,1),console.crlog(`[Video] curSubscribeList: ${JSON.stringify(this.subscribedCamList)}`)}closeAllRTCConnection(){console.crlog("[Video] Do close all remote video RTC connection..."),this.connectList.forEach((e=>{e.list.forEach((e=>{clearInterval(e.rtpLogTimer),e.connection&&(e.connection.close(),e.connection=null)}))}))}}window.__crVideoClass=VideoClass,window.__crLocalVideoClass=LocalVideoClass,window.__crRemoteVideoClass=RemoteVideoClass,window.__Rtc.CRRTCVideo=new window.__crVideoClass,window.__Rtc.CRRTCLocalVideo=new window.__crLocalVideoClass,window.__Rtc.CRRTCRemoteVideo=new window.__crRemoteVideoClass,window.CRVideo_VideoStatusChanged=new CR.CbProxy("CRVideo_VideoStatusChanged"),window.CRVideo_DefVideoChanged=new CR.CbProxy("CRVideo_DefVideoChanged"),window.CRVideo_VideoDevChanged=new CR.CbProxy("CRVideo_VideoDevChanged"),window.CRVideo_NotifyOpenVideo=new CR.CbProxy("CRVideo_NotifyOpenVideo"),window.CRVideo_NotifyVideoStream=new CR.CbProxy("CRVideo_NotifyVideoStream"),window.CRVideo_NotifyCameraStream=new CR.CbProxy("CRVideo_NotifyCameraStream"),window.CRVideo_SetVideoCfgRslt=new CR.CbProxy("CRVideo_SetVideoCfgRslt"),window.CRVideo_OpenVideoFailed=new CR.CbProxy("CRVideo_OpenVideoFailed"),window.CRVideo_OpenVideoTimeout=new CR.CbProxy("CRVideo_OpenVideoTimeout"),window.CRVideo_NotifyMainVideoModeChanged=new CR.CbProxy("CRVideo_NotifyMainVideoModeChanged"),window.CRVideo_NotifyMainVideoChanged=new CR.CbProxy("CRVideo_NotifyMainVideoChanged"),_src_inMeeting_meetSDK_meet_sdk_js__WEBPACK_IMPORTED_MODULE_3__.Z.notifyVideoWallMode=new _src_inMeeting_meetSDK_callback_js__WEBPACK_IMPORTED_MODULE_4__.Z("notifyVideoWallMode"),_src_inMeeting_meetSDK_meet_sdk_js__WEBPACK_IMPORTED_MODULE_3__.Z.notifyVideoWallVideos=new _src_inMeeting_meetSDK_callback_js__WEBPACK_IMPORTED_MODULE_4__.Z("notifyVideoWallVideos"),_src_inMeeting_meetSDK_meet_sdk_js__WEBPACK_IMPORTED_MODULE_3__.Z.notifyVideoPolling=new _src_inMeeting_meetSDK_callback_js__WEBPACK_IMPORTED_MODULE_4__.Z("notifyVideoPolling")},7331:()=>{!function(e,t,n){function i(e){let t=0,n=0;try{t=e.split(".")[0],n=e.split(".")[1]}catch(e){throw e}return{termID:t,localID:n}}class r{constructor(e){this.boardID=`${e.wID.termID}.${e.wID.localID}`,this.title=e.name,this.width=e.width,this.height=e.height,this.pageCount=e.pageCount,this.curPage=e.curPage,this.pagePos1=e.animID,this.pagePos2=e.animFrames}}class o{constructor(){this._initData(),this._initDom(),this._activeDraw(),this._passiveDraw(),this._setCtx(),this._loadEvent()}_initData(){this._id=t.generateUUID(),this._wbDesc=null,this._pageID=0,this._bScaled=!1,this._showTitle=!0,this._ctx=null,this._canvasEle=null,this._bgImg=null,this._titleEle=null,this._handler=null,this._revocableEleArr=[],this._resumableEleArr=[],this.undoStatus=!1,this.redoStatus=!1,this.undoEnableChange=null,this.redoEnableChange=null,this._readOnly=!1,this._pelType={4:"Pencil",5:"NiteWriterPen",6:"Line",7:"ArrowLine",8:"ArrowsLine",9:"Text",10:"SolidRectangular",11:"HollowRectangular",12:"RoundedSolidRectangle",13:"RoundedHollowRectangle",14:"SolidEllipse",15:"HollowEllipse"},this._style={type:4,cursor:"default",lineType:1,lineWidth:2,strokeStyle:"#0000FF",fillColor:"#FC011A",fullOpacity:.5}}_initDom(){const e=document.createElement("div");e.style.position="relative",e.style.width="100%",e.style.height="100%",e.style.overflow="auto",this._handler=e;const t=document.createElement("div");t.style.position="absolute",t.style.left=0,t.style.top=0,t.style.width="100%",t.style.lineHeight="normal",t.style.zIndex=2,this._titleEle=t,this._handler.appendChild(t);const n=document.createElement("canvas");n.style.position="absolute",n.style.left="50%",n.style.top="50%",n.style.transform="translateX(-50%) translateY(-50%)",n.style.height="0",n.style.width="0",n.style.backgroundColor="#fff",this._canvasEle=n,this._ctx=n.getContext("2d"),this._handler.appendChild(n)}handler(){return console.crlog(`[BoardUI] ID:${this._id}, handler()`),this._handler}setCurBoardPage(e,t){console.crlog(`[BoardUI] ID:${this._id}, setCurBoard(${e},${t})`);const n={};try{n.termID=+e.split(".")[0],n.localID=+e.split(".")[1]}catch(e){console.crlog(`[BoardUI][Error] ID:${this._id}, setBoardPage fail! The boardID is not correct!`),console.error(e)}if(n=={})return;const i=__Rtc.CRRTCBoard.wbDescibes.filter((e=>e.wID.termID==n.termID&&e.wID.localID==n.localID));if(0==i.length)return;this._wbDesc=i[0],i[0].boardUI=this,this._pageID=+t,this._titleEle.innerHTML=this._wbDesc.name;new ResizeObserver((e=>{this._revocableEleArr=[],this._resumableEleArr=[],this._resizeCanvas()})).observe(this._handler)}getCurBoardPage(){}setReadOnly(e){this._readOnly=e}isScaledContents(e){if(console.crlog(`[BoardUI] ID:${this._id}, isScaledContents(${e})`),null==e)return this._bScaled;this._bScaled=!!e,this._wbDesc&&this._resizeCanvas()}setTitleStyle(e){for(var t in console.crlog(`[BoardUI] ID:${this._id}, setTitleStyle(${JSON.stringify(e)})`),e)try{this._titleEle.style[t]=e[t]}catch(e){console.error(e)}}setBoardStyle(e){for(var t in console.crlog(`[BoardUI] ID:${this._id}, setBoardStyle(${JSON.stringify(e)})`),e)try{this._canvasEle.style[t]=e[t]}catch(e){console.error(e)}}setPen(e){console.crlog(`[BoardUI] ID:${this._id}, setPen(${JSON.stringify(e)})`),this._style.type=e.type||this._style.type,this._style.lineWidth=e.lineWidth||this._style.lineWidth,this._style.lineType=e.lineType||this._style.lineType,this._style.fillColor=e.fillColor||this._style.fillColor,this._style.strokeStyle=e.strokeStyle||this._style.strokeStyle,this._style.cursor=e.cursor||this._style.cursor,this._canvasEle.style.cursor=this._style.cursor}undo(){console.crlog(`[BoardUI] ID:${this._id}, undo()`);const e=this._revocableEleArr.pop();e&&(this._resumableEleArr.push(e),this.removeElement([e.eID])),this._changeRedoAndUndoStatue()}redo(){console.crlog(`[BoardUI] ID:${this._id}, redo()`);const e=this._resumableEleArr.pop();e&&(this._revocableEleArr.push(e),this.addElement(this._switchEleType(e))),this._changeRedoAndUndoStatue()}clearSelf(){console.crlog(`[BoardUI] ID:${this._id}, clearSelf()`),this._wbDesc.pageDatas.filter((e=>e.pageNo===this._pageID)).forEach((e=>{const t=e.elementList.filter((e=>n.userInfo.termId===e.eID.ownerID));t.length>0&&(__Rtc.CRRTCBoard.delElement(this._wbDesc.wID,this._pageID,t.map((e=>e.eID))),this._resumableEleArr=[],this._revocableEleArr=[],this._changeRedoAndUndoStatue())}))}clear(){console.crlog(`[BoardUI] ID:${this._id}, clear()`),this._wbDesc.pageDatas.filter((e=>e.pageNo==this._pageID)).forEach((e=>{const t=e.elementList.map((e=>e.eID));t.length>0&&(__Rtc.CRRTCBoard.delElement(this._wbDesc.wID,this._pageID,t),this._resumableEleArr=[],this._revocableEleArr=[],this._changeRedoAndUndoStatue())}))}addElement(e){console.crlog(`[BoardUI] ID:${this._id}, addElement(${e})`),__Rtc.CRRTCBoard.addElement(this._wbDesc.wID,this._pageID,e)}removeElement(e){console.crlog(`[BoardUI] ID:${this._id}, removeElement(${e})`),__Rtc.CRRTCBoard.delElement(this._wbDesc.wID,this._pageID,e)}importImg(e){this._bgImg=e,this._resizeCanvas()}getCanvasElement(){return this._canvasEle||null}_drawBgImg(){this._bgImg&&this._ctx.drawImage(this._bgImg,0,0,this._canvasEle.width,this._canvasEle.height)}_resizeCanvas(){const e=this._wbDesc.width/this._wbDesc.height,t=this._handler.clientWidth/this._handler.clientHeight||1;this._bScaled||this._wbDesc.width>this._handler.clientWidth&&this._wbDesc.height>this._handler.clientHeight?e<=1&&e>t||e>1&&e>t?(this._canvasEle.style.width=`${this._handler.clientWidth}px`,this._canvasEle.style.height=this._handler.clientWidth/e+"px"):(this._canvasEle.style.height=`${this._handler.clientHeight}px`,this._canvasEle.style.width=this._handler.clientHeight*e+"px"):(this._canvasEle.style.height=`${this._wbDesc.height}px`,this._canvasEle.style.width=`${this._wbDesc.width}px`),this._canvasEle.height=this._wbDesc.height,this._canvasEle.width=this._wbDesc.width,this._drawBgImg(),this._drawAllPageData()}_activeDraw(){this._setCtx=()=>{this._ctx.strokeStyle=this._style.strokeStyle,this._ctx.lineWidth=this._style.lineWidth,3==this._style.lineType?this._ctx.setLineDash([5,6]):this._ctx.setLineDash([])},this._loadEvent=()=>{const{_ctx:t,_canvasEle:i}=this;e._canvasEle=this._canvasEle;let r=!1;i.ontouchstart=e=>{if(this._readOnly)return;r=!0,this._setCtx();const o=i.width/i.offsetWidth,s=e.touches[0].pageX-i.getBoundingClientRect().left,a=e.touches[0].pageY-i.getBoundingClientRect().top;var c=parseInt(s*o),l=parseInt(a*o);const d={};d.type=this._style.type,d.left=c,d.top=l,d.color=this._style.strokeStyle,d.width=this._style.lineWidth,d.style=this._style.lineType,d.eID={ownerID:n.userInfo.termId,ID:__Rtc.CRRTCBoard.lastElemValue++},d.orderId=0,d.size=1,d.data=[{x:0,y:0}];var u=[{x:c,y:l}];return i.ontouchmove=e=>{const n=e.touches[0].pageX-i.getBoundingClientRect().left,r=e.touches[0].pageY-i.getBoundingClientRect().top;var s=parseInt(n*o),a=parseInt(r*o);t.beginPath();const{x:c,y:l}=u[u.length-1];return t.moveTo(c,l),t.lineTo(s,a),u.push({x:s,y:a}),d.data.push({x:s-d.left,y:a-d.top}),d.size=d.data.length,t.stroke(),!1},i.ontouchend=e=>{r=!1,i.onmousemove=null,i.ontouchmove=null,i.ontouchend=null,document.onmouseup=null,this._revocableEleArr.push(d),this._resumableEleArr=[],this.addElement(this._switchEleType(d)),this._changeRedoAndUndoStatue()},!1},i.onmousedown=e=>{if(this._readOnly)return;if(r)return;this._setCtx();const o=i.width/i.offsetWidth;var s=parseInt(e.offsetX*o),a=parseInt(e.offsetY*o);const c={};c.type=this._style.type,c.left=s,c.top=a,c.color=this._style.strokeStyle,c.width=this._style.lineWidth,c.style=this._style.lineType,c.eID={ownerID:n.userInfo.termId,ID:__Rtc.CRRTCBoard.lastElemValue++},c.orderId=0,c.size=1,c.data=[{x:0,y:0}];var l=[{x:s,y:a}];i.onmousemove=e=>{var n=parseInt(e.offsetX*o),i=parseInt(e.offsetY*o);t.beginPath();const{x:r,y:s}=l[l.length-1];t.moveTo(r,s),t.lineTo(n,i),l.push({x:n,y:i}),c.data.push({x:n-c.left,y:i-c.top}),c.size=c.data.length,t.stroke()},document.onmouseup=()=>{i.onmousemove=null,i.ontouchmove=null,i.ontouchend=null,document.onmouseup=null,this._revocableEleArr.push(c),this._resumableEleArr=[],this.addElement(this._switchEleType(c)),this._changeRedoAndUndoStatue()}},console.crlog(`[BoardUI] ID:${this._id}, canvas on loadEvent...`)},this._switchEleType=e=>{switch(e.type){case 4:case 5:e=this._ele2buffer.pen(e)}return e},this._ele2buffer={pen(e){let t=0;const n={};n.eID=e.eID,n.left=e.left,n.top=e.top,n.type=e.type,n.orderId=e.orderId,n.noused=0;const i=e.data,r=i.length,o=new ArrayBuffer(15+4*i.length),s=new Uint8Array(o);this.color2buffer(s,t,e.color),t+=11,s[t++]=e.width,s[t++]=e.style,s[t++]=parseInt(r/256),s[t++]=r%256;let a=0;for(;a<i.length;)s[t++]=i[a].x>>8,s[t++]=255&i[a].x,s[t++]=i[a].y>>8,s[t++]=255&i[a].y,a++;return n.data=s,n},color2buffer(e,t,n){const i=this.hexColor2Rgba(n);e[t++]=1,e[t++]=e[t++]=i[3],e[t++]=e[t++]=i[0],e[t++]=e[t++]=i[1],e[t++]=e[t++]=i[2],e[t++]=e[t++]=0},hexColor2Rgba(e){var t=e;let n=[];if(/^(rgb|RGB)/.test(t))n=t.replace(/(?:\(|\)|RGBA|rgba|rgb|RGB)*/g,"").split(",").map((e=>+e)),n[3]=n[3]?Math.round(255*n[3]):255;else if(/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(t)){if(4===e.length){for(var i="#",r=1;r<4;r+=1)i+=e.slice(r,r+1).concat(e.slice(r,r+1));e=i}for(r=1;r<7;r+=2)n.push(parseInt("0x"+e.slice(r,r+2)));n.push(255)}return n}}}_passiveDraw(){this._drawAllPageData=()=>{this._wbDesc.pageDatas&&this._wbDesc.pageDatas.forEach((e=>{e.pageNo==this._pageID&&e.elementList.forEach((e=>{this._drawElement(e)}))}))},this._drawElement=e=>{const t=__Rtc.CRRTCBoard.Uint8ArrayToData(e),n=this._pelType[t.type];this[`_draw${n}`]?this[`_draw${n}`](t):console.crlog(`[BoardUI] ID:${this._id}, _drawElement fail, type ${t.type} is not defined!`)},this._drawPencil=e=>{this._setLineStyle(e),this._ctx.beginPath(),this._ctx.moveTo(e.left,e.top);for(var t=0;t<e.data.length;t++)this._ctx.lineTo(e.left+e.data[t].w,e.top+e.data[t].h);this._ctx.stroke(),this._setCtx()},this._setLineStyle=e=>{this._ctx.strokeStyle=e.color,this._ctx.lineWidth=e.width,this._ctx.lineCap="round",3===e.style?this._ctx.setLineDash([5,6]):this._ctx.setLineDash([])}}_changeRedoAndUndoStatue(){const e=!!this._revocableEleArr.length,t=!!this._resumableEleArr.length;void 0!==e&&this.undoStatus!==e&&(this.undoStatus=e,this.undoEnableChange&&this.undoEnableChange(e)),void 0!==t&&this.redoStatus!==t&&(this.redoStatus=t,this.redoEnableChange&&this.redoEnableChange(t))}}e.__crBoardClass=class{constructor(){this.initData(),this.initIceCallback(),this.initSDKInterface()}initData(){console.crlog("[Board] WhiteBoardModule initData..."),this.lastTabValue=100,this.lastElemValue=100,this.wbDescibes=[],this.boardUIList=[],this.iceNotifyParams={},this.myLastWID={}}initIceCallback(){this.ICECallback={notifySetCurrentPage(t,i,r,o,s){if(void 0!==this.iceNotifyParams.notifySetCurrentPage&&this.iceNotifyParams.notifySetCurrentPage.boardID.termID==t.termID&&this.iceNotifyParams.notifySetCurrentPage.boardID.localID==t.localID&&this.iceNotifyParams.notifySetCurrentPage.pageNo==i&&this.iceNotifyParams.notifySetCurrentPage.animID==r&&this.iceNotifyParams.notifySetCurrentPage.animFrames==o&&this.iceNotifyParams.notifySetCurrentPage.operatorID==s)return;this.iceNotifyParams.notifySetCurrentPage={},this.iceNotifyParams.notifySetCurrentPage.boardID=t,this.iceNotifyParams.notifySetCurrentPage.pageNo=i,this.iceNotifyParams.notifySetCurrentPage.animID=r,this.iceNotifyParams.notifySetCurrentPage.animFrames=o,this.iceNotifyParams.notifySetCurrentPage.operatorID=s,console.crlog(`[Board] ICE Notify --\x3e notifySetCurrentPage, params:${JSON.stringify({wID:t,pageNo:i,animID:r,animFrames:o,operatorID:s})}`);const a=n.findMemberInfo({want:"userId",use:"termId",value:s})||"";this.wbDescibes.forEach((e=>{e.wID.termID==t.termID&&e.wID.localID==t.localID&&(e.curPage=i)})),console.crlog(`[Board] CRVideo_NotifyBoardCurPageNo.target(${t.termID}.${t.localID},${i},${r},${o},${a})`),e.CRVideo_NotifyBoardCurPageNo.target(`${t.termID}.${t.localID}`,i,r,o,a)},notifyCreate(e,t){console.crlog(`[Board] ICE Notify --\x3e notifyCreate, params:${JSON.stringify(e)},${t}`),this.wbDescibes.push(e),this.queryBoardPageDatas(e);const i=new r(e),o=n.findMemberInfo({want:"userId",use:"termId",value:t})||"";console.crlog(`[Board] CRVideo_NotifyCreateBoard.target(${JSON.stringify(i)},${o})`),CRVideo_NotifyCreateBoard.target(i,o)},notifyClose(e,t){console.crlog(`[Board] ICE Notify --\x3e notifyClose, params:${JSON.stringify(e)},${t}`);const i=this.wbDescibes.findIndex((t=>t.wID.termID==e.termID&&t.wID.localID==e.localID)),r=n.findMemberInfo({want:"userId",use:"termId",value:t})||"";if(i>-1){this.wbDescibes.splice(i,1);const t=`${e.termID}.${e.localID}`;console.crlog(`[Board] CRVideo_NotifyCloseBoard.target(${t},${r})`),CRVideo_NotifyCloseBoard.target(t,r)}},notifyAddElement(e,t,n,i){console.crlog(`[Board] ICE Notify --\x3e notifyAddElement, params:${JSON.stringify(e)},${t},${n},${i}`),this.notifyAddElement(e,t,n,i)},notifyAddElementEx(e,t,n,i){console.crlog(`[Board] ICE Notify --\x3e notifyAddElementEx, params: ${JSON.stringify(e)},${t},${n},${i}`);for(var r=0;r<n.length;r++)this.notifyAddElement(e,pageNo,element,i)},notifyDelElement(e,t,n,i){console.crlog(`[Board] ICE Notify --\x3e notifyDelElement, params:${JSON.stringify(e)},${t},${JSON.stringify(n)},${i}`),this.notifyDelElement(e,t,n,i)},notifySetContainerSize(e,t,n){console.crlog(`[Board] ICE Notify --\x3e notifySetContainerSize, params:${e},${t},${n}`)},notifyImportPage(e,t,n){console.crlog(`[Board] ICE Notify --\x3e notifyImportPage, params: ${JSON.stringify(e)},${JSON.stringify(t)},${n}`)},notifyChangeName(e,t,n){console.crlog(`[Board] ICE Notify --\x3e notifyChangeName, params: ${JOSN.stringify(e)},${t},${n}`)},notifyChangeScale(e,t,n){console.crlog(`[Board] ICE Notify --\x3e notifyChangeScale, params: ${JSON.stringify(e)},${t},${n}`)},notifyChangeRotate(e,t,n){console.crlog(`[Board] ICE Notify --\x3e notifyChangeRotate, params: ${JSON.stringify(e)},${t},${n}`)},notifyShowThumPage(e,t,n){console.crlog(`[Board] ICE Notify --\x3e notifyShowThumPage, params: ${JSON.stringify(e)},${t},${n}`)},notifyMoveElement(e,t,n,i){console.crlog(`[Board] ICE Notify --\x3e notifyMoveElement, params: ${JSON.stringify(e)},${t},${n},${i}`)},notifyModifyElement(e,t,n,i){console.crlog(`[Board] ICE Notify --\x3e notifyModifyElement, params: ${JSON.stringify(e)},${t},${n},${i}`)},notifySetElementZPos(e,t,n,i){console.crlog(`[Board] ICE Notify --\x3e notifySetElementZPos, params: ${JSON.stringify(e)},${t},${n},${i}`)},notifySetIndicator(e,t,n){console.crlog(`[Board] ICE Notify --\x3e notifySetIndicator, params: ${JSON.stringify(e)},${t},${n}`)},notifySetHotspot(e,t,n,i,r){console.crlog(`[Board] ICE Notify --\x3e notifySetHotspot, params: ${JSON.stringify(e)},${t},${n},${i},${r}`)},notifySetMarkTerms(e,t,n){console.crlog(`[Board] ICE Notify --\x3e notifySetMarkTerms, params: ${JSON.stringify(e)},${t},${n}`)}}}initSDKInterface(){e.CRVideo_CreateBoardUIObj=e=>{try{console.crlog(`[Board] CRVideo_CreateBoardUIObj(${JSON.stringify(e)})`)}catch(e){console.error(e)}const t=new o;return console.crlog(`[Board] CRVideo_CreateBoardUIObj, return BoardUI ID：${t._id}`),this.boardUIList.push(t),t},e.CRVideo_Creatboard=(e,t,i,r)=>new Promise(((o,s)=>{console.crlog(`[Board] CRVideo_Creatboard(${e},${t},${i},${r})`);const a={};a.name=e,a.width=t,a.height=i,a.pageCount=r,a.bAll=!0,a.wID={termID:n.userInfo.termId,localID:this.lastTabValue++},__Rtc.CRICEAPI.Create(a).then((e=>{console.crlog(`[Board] __Rtc.CRICEAPI.Create success! ${e[0]}`),__Rtc.CRRTCSync.saveLastTabValue(this.lastTabValue);const t=[];for(let e=0;e<r;e++)t.push({pageNo:e,elementList:[]});this.initBoardPageDat(a.wID,t),o({errCode:0,boardID:`${a.wID.termID}.${a.wID.localID}`})}),(e=>{console.crlog(`[Board][Error] __Rtc.CRICEAPI.Create fail! ${e}`),s({errCode:1,errDesc:e})}))})),e.CRVideo_Closeboard=e=>new Promise(((t,n)=>{console.crlog(`[Board] CRVideo_Closeboard(${e})`);const r=i(e);__Rtc.CRICEAPI.Close(r).then((e=>{console.crlog(`[Board] __Rtc.CRICEAPI.Close success! ${e[0]}`),t({errCode:0})}),(e=>{console.crlog(`[Board][Error] __Rtc.CRICEAPI.Close fail! ${e}`),n({errCode:1,errDesc:e})}))})),e.CRVideo_SetBoardCurPageNo=(e,t,n,r)=>new Promise(((o,s)=>{console.crlog(`[Board] CRVideo_SetBoardCurPageNo(${JSON.stringify({boardID:e,pageNo:t,pagePos1:n,pagePos2:r})})`),__Rtc.CRICEAPI.SetCurrentPage(i(e),t,n,r).then((e=>{console.crlog(`[Board] __Rtc.CRICEAPI.SetCurrentPage success! ${e[0]}`),o({errCode:0})}),(e=>{console.crlog(`[Board][Error] __Rtc.CRICEAPI.SetCurrentPage fail! ${e}`),s({errCode:1,errDesc:e})}))})),e.CRVideo_GetBoardList=()=>(console.crlog("[Board] CRVideo_GetBoardList()"),this.wbDescibes.map((e=>new r(e))))}Uint8ArrayToData(e){var t=[],n={},i=new Uint8Array(e.data.buffer),r=(i[0],{}),o=(i[9],i[11]),s=i[12],a=i[13]<<8|i[14];r.alpha=i[1],r.red=i[3],r.green=i[5],r.blue=i[7];for(var c=[],l=15;l<i.length;l+=2)c[l]=i[l],c[l+1]=i[l+1],i[l]>=240&&(c[l]=i[l]-256,c[l+1]=i[l+1]+256*(i[l]-256));for(l=15;l<c.length;l+=4)t.push({w:c[l]<<8|c[l+1],h:c[l+2]<<8|c[l+3]});return n.color=this.colorRGB2Hex("rgb("+r.red+","+r.green+","+r.blue+")"),n.width=o,n.style=s,n.size=a,n.data=t,n.eID=e.eID,n.orderId=e.orderId,n.type=e.type,n.left=e.left,n.top=e.top,n}elementDataToBuffer(e){var t={},n=e.data;const i=this.colorHexToRgba(e.color,1);var r=new ArrayBuffer(15+4*n.length);t.eID=e.eID,t.noused=0,t.left=e.left,t.top=e.top,t.type=e.type,t.data=new Uint8Array(r),t.data[0]=1,t.data[1]=t.data[2]=255,t.data[3]=t.data[4]=i.red,t.data[5]=t.data[6]=i.green,t.data[7]=t.data[8]=i.blue,t.data[9]=t.data[10]=0,t.data[11]=e.width,t.data[12]=1,t.data[13]=parseInt(e.size/256),t.data[14]=e.size%256;for(var o=0,s=15;o<n.length;o++)t.data[s]=n[o].w>>8,t.data[s+1]=255&n[o].w,t.data[s+2]=n[o].h>>8,t.data[s+3]=255&n[o].h,s+=4;return t}colorRGB2Hex(e){var t=e.split(",");return"#"+((1<<24)+(parseInt(t[0].split("(")[1])<<16)+(parseInt(t[1])<<8)+parseInt(t[2].split(")")[0])).toString(16).slice(1)}colorHexToRgba(e,t){var n="rgba("+parseInt("0x"+e.slice(1,3))+","+parseInt("0x"+e.slice(3,5))+","+parseInt("0x"+e.slice(5,7))+","+t+")";return{red:parseInt("0x"+e.slice(1,3)),green:parseInt("0x"+e.slice(3,5)),blue:parseInt("0x"+e.slice(5,7)),rgba:n}}termIdToNickname(e){var t,i="[object Array]"==Object.prototype.toString.call(e);if(i){t=[];for(var r=0;r<e.length;r++)"object"==typeof e[r]&&(t[r]=JSON.parse(JSON.stringify(e[r])));for(var o=0;o<t.length;o++)t[o].ownerID==n.userInfo.termId&&(t[o].ownerID=n.userInfo.userId)}else"number"==typeof e?(t=null,t=e==n.userInfo.termId?n.userInfo.userId:e):"object"!=typeof e||i||(t={},(t=JSON.parse(JSON.stringify(e))).ownerID==n.userInfo.termId&&(t.ownerID=n.userInfo.userId));return t}initBoards(){console.crlog("[Board] Init boards..");const e=[];this.wbDescibes.forEach((t=>{this.queryBoardPageDatas(t),e.push(new r(t))})),console.crlog(`[Board] CRVideo_NotifyInitBoards.target(${JSON.stringify(e)})`),CRVideo_NotifyInitBoards.target(e)}queryAllWhiteBoardList(){console.crlog("[Board] Query all whiteBoard list.."),__Rtc.CRICEAPI.QueryAllBoardList().then((e=>{console.crlog(`[Board] __Rtc.CRICEAPI.QueryAllBoardList success! ${e[0]}`);const t=e[1];this.wbDescibes=t,this.wbDescibes.forEach((e=>{this.queryBoardPageDatas(e)}))}),(e=>{console.crlog(`[Board][Error] __Rtc.CRICEAPI.QueryAllBoardList fail! ${e}`),console.error(e)}))}queryBoardPageDatas(e){console.crlog(`[Board] Query board page datas, wbID:${JSON.stringify(e.wID)}`);const t=[];for(var n=0;n<e.pageCount;n++)t.push(n);t.length>0&&__Rtc.CRICEAPI.QueryElementByIDs(e.wID,t).then((t=>{const n=t[1].values();e.pageDatas=n,e.boardUI&&e.boardUI._drawAllPageData()}))}notifyAddElement(e,t,n,i){this.wbDescibes.forEach((i=>{i.wID.termID==e.termID&&i.wID.localID==e.localID&&i.pageDatas.forEach((e=>{e.pageNo==t&&(e.elementList.push(n),i.boardUI._drawElement(n),i.boardUI._resizeCanvas())}))}))}notifyDelElement(e,t,n,i){for(var r=0;r<n.length;r++){let i;this.wbDescibes.forEach((o=>{o.wID.termID==e.termID&&o.wID.localID==e.localID&&o.pageDatas.forEach((e=>{e.pageNo==t&&(i=e.elementList.findIndex((e=>e.eID.ownerID==n[r].ownerID&&e.eID.ID==n[r].ID)),-1!==i&&e.elementList.splice(i,1),o.boardUI._resizeCanvas())}))}))}}delElement(e,t,n){console.crlog(`[Board] DelElement, wID:${JSON.stringify(e)},pageNo:${t},delEleIDs}`),__Rtc.CRICEAPI.DelElement(e,t,n).then((e=>{}),(e=>{console.crlog(`[Board][Error] __Rtc.CRICEAPI.DelElement fail! ${e}`)}))}addElement(e,t,n){this.myLastWID={wID:e,pageNo:t,element:n},__Rtc.CRICEAPI.AddElement(e,t,n).then((e=>{}),(e=>{console.crlog(`[Board] __Rtc.CRICEAPI.AddElement fail! ${e}`)}))}initBoardPageDat(e,t){__Rtc.CRICEAPI.ImportPage(e,t).then((e=>{console.log(e)}),(e=>{console.log(e)}))}},e.__Rtc.CRRTCBoard=new e.__crBoardClass,e.CRVideo_NotifyInitBoards=new CRVideo.CbProxy("CRVideo_NotifyInitBoards"),e.CRVideo_NotifyBoardCurPageNo=new CRVideo.CbProxy("CRVideo_NotifyBoardCurPageNo"),e.CRVideo_NotifyCreateBoard=new CRVideo.CbProxy("CRVideo_NotifyCreateBoard"),e.CRVideo_NotifyCloseBoard=new CRVideo.CbProxy("CRVideo_NotifyCloseBoard"),e.CRVideo_NotifyInitBoardPageDat=new CRVideo.CbProxy("CRVideo_NotifyInitBoardPageDat"),e.CRVideo_NotifyBoardBkImage=new CRVideo.CbProxy("CRVideo_NotifyBoardBkImage"),e.CRVideo_NotifyAddBoardElement=new CRVideo.CbProxy("CRVideo_NotifyAddBoardElement"),e.CRVideo_NotifyModifyBoardElement=new CRVideo.CbProxy("CRVideo_NotifyModifyBoardElement"),e.CRVideo_NotifyDelBoardElement=new CRVideo.CbProxy("CRVideo_NotifyDelBoardElement"),e.CRVideo_NotifyMouseHotSpot=new CRVideo.CbProxy("CRVideo_NotifyMouseHotSpot")}(window,Ice,CRVideo)},5829:()=>{((e,t,n)=>{e.CRVideo_SetDNDStatus=function(e,n){try{console.crlog(`[CallMgr] CRVideo_SetDNDStatus(${+e},${n})`)}catch(e){}const i={cmd:"ClientCustomStatusUpdate",module:"CallServer",customStatus:+e,sessionID:t.sessionID};try{console.crlog(`[CallMgr] WebCMD:${JSON.stringify(i)},cookie:${n}`)}catch(e){}t.webSendcmd(i,n)},e.CRVideo_StartUserStatusNotify=function(e){try{console.crlog(`[CallMgr] CRVideo_StartUserStatusNotify(${e})`)}catch(e){}const n={cmd:"StartStatusPush",module:"CallServer",sessionID:t.sessionID};try{console.crlog(`[CallMgr] WebCMD:${JSON.stringify(n)},cookie:${e}`)}catch(e){}t.webSendcmd(n,e)},e.CRVideo_StopUserStatusNotify=function(e){try{console.crlog(`[CallMgr] CRVideo_StartUserStatusNotify(${e})`)}catch(e){}const n={cmd:"StopStatusPush",module:"CallServer",sessionID:t.sessionID};try{console.crlog(`[CallMgr] WebCMD:${JSON.stringify(n)},cookie:${e}`)}catch(e){}t.webSendcmd(n,e)},e.CRVideo_GetUserStatus=function(e){try{console.crlog("[CallMgr] CRVideo_GetUserStatus()")}catch(e){}const n={cmd:"GetUserStatus",module:"CallServer",sessionID:t.sessionID};try{console.crlog(`[CallMgr] WebCMD:${JSON.stringify(n)},cookie:${e}`)}catch(e){}t.webSendcmd(n,e)},e.CRVideo_GetOneUserStatus=function(e,n){try{console.crlog(`[CallMgr] CRVideo_GetOneUserStatus(${e},${n})`)}catch(e){}const i={cmd:"GetUserStatus",module:"CallServer",userID:String(e),sessionID:t.sessionID};try{console.crlog(`[CallMgr] WebCMD:${JSON.stringify(i)},cookie:${n}`)}catch(e){}t.webSendcmd(i,n)},e.CRVideo_Call=function(e,i,r,o){try{console.crlog(`[CallMgr] CRVideo_Call(${e},${JSON.stringify(i)},${r},${o}`)}catch(e){}const s={callID:n.generateUUID(),called:String(e),calledOEMKey:`${window.__CRNameUP}`,calledType:0,cmd:"ClientCall",meeting:{ID:i.ID,pswd:i.pswd,pubMeetUrl:i.pubMeetUrl,subject:i.subject},module:"CallServer",sessionID:t.sessionID,usrExDat:r||""};try{console.crlog(`[CallMgr] WebCMD:${JSON.stringify(s)},cookie:${o}`)}catch(e){}t.webSendcmd(s,o)},e.CRVideo_AcceptCall=function(e,n,i,r){try{console.crlog(`[CallMgr] CRVideo_AcceptCall(${e},${JSON.stringify(n)},${i},${r})`)}catch(e){}console.crlog("[CallMgr] Meet ID："+n.ID),console.crlog("[CallMgr] Meet pubMeetUrl:"+n.pubMeetUrl),t.pubMeetUrl=n.pubMeetUrl,t.CallID=e;const o={callID:e,cmd:"ClientAccept",meeting:n,module:"CallServer",sessionID:t.sessionID,usrExDat:i||""};try{console.crlog(`[CallMgr] WebCMD:${JSON.stringify(o)},cookie:${r}`)}catch(e){}t.webSendcmd(o,r)},e.CRVideo_RejectCall=function(e,n,i){try{console.crlog(`[CallMgr] CRVideo_RejectCall(${JSON.stringify(e,n,i)})`)}catch(e){}const r={callID:e,sessionID:t.sessionID,cmd:"ClientDecline",module:"CallServer",declineReason:"ClientDecline"};try{console.crlog(`[CallMgr] WebCMD:${JSON.stringify(r)},cookie:${i}`)}catch(e){}t.webSendcmd(r,i)},e.CRVideo_HangupCall=function(e,n,i){try{console.crlog(`[CallMgr] CRVideo_HangupCall(${e},${n},${i})`)}catch(e){}const r={callID:e,sessionID:t.sessionID,cmd:"ClientReleaseCall",module:"CallServer",usrExDat:n||""};try{console.crlog(`[CallMgr] WebCMD:${JSON.stringify(r)},cookie:${i}`)}catch(e){throw e}t.webSendcmd(r,i)},e.CRVideo_HungupCall=function(e,t,n){CRVideo_HangupCall(e,t,n)},t.callSvrCallback={ClientCustomStatusUpdate:function(t,n,i){try{console.crlog(`[Queue] CRVideo_SetDNDStatus -- CMDCallback --\x3e ClientCustomStatusUpdate: ${JSON.stringify(t)}`)}catch(e){}if(0===t.RspCode){try{console.crlog(`[CallMgr] CRVideo_SetDNDStatusSuccess.target(${i})`)}catch(e){}e.CRVideo_SetDNDStatusSuccess.target(i)}else{try{console.crlog(`[CallMgr] CRVideo_SetDNDStatusFail.target(${ICE_SDK_ERR(t.RspCode)},${i})`)}catch(e){}e.CRVideo_SetDNDStatusFail.target(ICE_SDK_ERR(t.RspCode),i)}},StartStatusPush:function(e,t,n){try{console.crlog(`[Queue] CRVideo_StartUserStatusNotify -- CMDCallback --\x3e StartStatusPush: ${JSON.stringify(e)}`)}catch(e){}try{console.crlog(`[CallMgr] CRVideo_StartUserStatusNotifyRslt.target(${ICE_SDK_ERR(e.RspCode)}, ${n})`)}catch(e){}CRVideo_StartUserStatusNotifyRslt.target(ICE_SDK_ERR(e.RspCode),n)},StopStatusPush:function(e,t,n){try{console.crlog(`[Queue] CRVideo_StopUserStatusNotify -- CMDCallback --\x3e StopStatusPush: ${JSON.stringify(e)}`)}catch(e){}try{console.crlog(`[CallMgr] CRVideo_StopUserStatusNotifyRslt.target(${ICE_SDK_ERR(e.RspCode)}, ${n})`)}catch(e){}CRVideo_StopUserStatusNotifyRslt.target(ICE_SDK_ERR(e.RspCode),n)},GetUserStatus:function(e,t,n){try{console.crlog(`[Queue] CRVideo_GetUserStatus -- CMDCallback --\x3e GetUserStatus: ${JSON.stringify(e)}`)}catch(e){}if(0===e.RspCode){let t=JSON.parse(JSON.stringify(e.userStatus));try{console.crlog(`[CallMgr] CRVideo_GetUserStatusSuccess.target(${JSON.stringify(t)}, ${n})`)}catch(e){}CRVideo_GetUserStatusSuccess.target(t,n)}else{try{console.crlog(`[CallMgr] CRVideo_GetUserStatusFail.target(${ICE_SDK_ERR(e.RspCode)}, ${n})`)}catch(e){}CRVideo_GetUserStatusFail.target(ICE_SDK_ERR(e.RspCode),n)}},ClientCall:function(e,t,n){const i=t.callID;try{console.crlog(`[CallMgr] CRVideo_Call -- CMDCallback --\x3e ClientCall: ${JSON.stringify(e)}`)}catch(e){}if(0==e.RspCode){try{console.crlog(`[CallMgr] CRVideo_CallSuccess.target(${i}, ${n});`)}catch(e){}CRVideo_CallSuccess.target(i,n)}else{try{console.crlog(`[CallMgr] CRVideo_CallFail.target(${i} ${ICE_SDK_ERR(e.RspCode)}, ${n});`)}catch(e){}CRVideo_CallFail.target(i,ICE_SDK_ERR(e.RspCode),n)}},ClientAccept:function(e,t,n){try{console.crlog(`[CallMgr] CRVideo_AcceptCall -- CMDCallback --\x3e AcceptCall: ${JSON.stringify(e)}`)}catch(e){}const i=t.callID;if(0==e.RspCode){try{console.crlog(`[CallMgr] CRVideo_AcceptCallSuccess.target(${i},${n})`)}catch(e){}CRVideo_AcceptCallSuccess.target(i,n)}else{try{console.crlog(`[CallMgr] CRVideo_AcceptCallFail.target(${i},${ICE_SDK_ERR(e.RspCode)},${n})`)}catch(e){}CRVideo_AcceptCallFail.target(i,ICE_SDK_ERR(e.RspCode),n)}},ClientDecline:function(e,t,n){try{console.crlog(`[CallMgr] CRVideo_RejectCall -- CMDCallback --\x3e ClientDecline: ${JSON.stringify(e)}`)}catch(e){}const i=t.callID;if(0==e.RspCode){try{console.crlog(`[CallMgr] CRVideo_RejectCallSuccess.target(${i},${n})`)}catch(e){}CRVideo_RejectCallSuccess.target(i,n)}else{try{console.crlog(`[CallMgr] CRVideo_RejectCallFail.target(${i},${ICE_SDK_ERR(e.RspCode)},${n})`)}catch(e){}CRVideo_RejectCallFail.target(i,ICE_SDK_ERR(e.RspCode),n)}},ClientReleaseCall:function(e,t,n){try{console.crlog(`[CallMgr] CRVideo_HangupCall -- CMDCallback --\x3e ClientReleaseCall: ${JSON.stringify(e)}`)}catch(e){}const i=t.callID;if(0==e.RspCode){try{console.crlog(`[CallMgr] CRVideo_HangupCallSuccess.target(${i},${n})`)}catch(e){}CRVideo_HangupCallSuccess.target(i,n)}else{try{console.crlog(`[CallMgr] CRVideo_HangupCallFail.target(${i},${ICE_SDK_ERR(e.RspCode)},${n})`)}catch(e){}CRVideo_HangupCallFail.target(i,ICE_SDK_ERR(e.RspCode),n)}},ServerPushUserStatus:function(e){let t={userID:e.usersStatus.userID,userStatus:e.usersStatus.userStatus,DNDType:e.usersStatus.isDND};try{console.crlog(`[CallMgr] CRVideo_NotifyUserStatus.target(${JSON.stringify(t)})`)}catch(e){}CRVideo_NotifyUserStatus.target(t)},ServerAccept:function(e){const n={ID:e.meeting.ID,pswd:e.meeting.pswd,subject:e.meeting.subject,pubMeetUrl:e.meeting.pubMeetUrl},i=e.callID,r=e.usrExDat;t.CallID=i;try{console.crlog(`[CallMgr] CRVideo_NotifyCallAccepted.target(${i},${n},${r})`)}catch(e){}CRVideo_NotifyCallAccepted.target(i,n,r)},ServerDecline:function(e){const t=e.callID,n=e.usrExDat;let i=1;switch(e.declineReason){case"NoAnswer":i=604;break;case"Refuse":case"ClientDecline":i=606}try{console.crlog(`[CallMgr] CRVideo_NotifyCallRejected.target(${t},${i},${n})`)}catch(e){}CRVideo_NotifyCallRejected.target(t,i,n)},ServerCall:function(e){let n="";e.meeting&&(n={ID:e.meeting.ID,pswd:e.meeting.pswd,subject:e.meeting.subject,pubMeetUrl:e.meeting.pubMeetUrl});const i=e.callID,r=e.caller,o=e.usrExDat;t.CallID=i;try{console.crlog(`[CallMgr] CRVideo_NotifyCallIn.target(${i},${JSON.stringify(n)},${r},${o})`)}catch(e){}CRVideo_NotifyCallIn.target(e.callID,n,e.caller,e.usrExDat)},ServerReleaseCall:function(e){const n=e.callID,i=e.usrExDat;t.CallID="";try{console.crlog(`[CallMgr] CRVideo_NotifyCallHangup.target(${n},${i})`)}catch(e){}CRVideo_NotifyCallHangup.target(n,i),CRVideo_NotifyCallHungup.target(n,i)},ServerCancelCall:function(e){const n=e.callID,i=e.usrExDat;t.CallID="";try{console.crlog(`[CallMgr] CRVideo_NotifyCallHangup.target(${n},${i})`)}catch(e){}CRVideo_NotifyCallHangup.target(n,i),CRVideo_NotifyCallHungup.target(n,i)}},e.CRVideo_SetDNDStatusSuccess=new t.CbProxy("CRVideo_SetDNDStatusSuccess"),e.CRVideo_SetDNDStatusFail=new t.CbProxy("CRVideo_SetDNDStatusFail"),e.CRVideo_StartUserStatusNotifyRslt=new t.CbProxy("CRVideo_StartUserStatusNotifyRslt"),e.CRVideo_StopUserStatusNotifyRslt=new t.CbProxy("CRVideo_StopUserStatusNotifyRslt"),e.CRVideo_GetUserStatusSuccess=new t.CbProxy("CRVideo_GetUserStatusSuccess"),e.CRVideo_GetUserStatusFail=new t.CbProxy("CRVideo_GetUserStatusFail"),e.CRVideo_CallSuccess=new t.CbProxy("CRVideo_CallSuccess"),e.CRVideo_CallFail=new t.CbProxy("CRVideo_CallFail"),e.CRVideo_AcceptCallSuccess=new CRVideo.CbProxy("CRVideo_AcceptCallSuccess"),e.CRVideo_AcceptCallFail=new CRVideo.CbProxy("CRVideo_AcceptCallFail"),e.CRVideo_RejectCallSuccess=new CRVideo.CbProxy("CRVideo_RejectCallSuccess"),e.CRVideo_RejectCallFail=new CRVideo.CbProxy("CRVideo_RejectCallFail"),e.CRVideo_HangupCallSuccess=new CRVideo.CbProxy("CRVideo_HangupCallSuccess"),e.CRVideo_HangupCallFail=new CRVideo.CbProxy("CRVideo_HangupCallFail"),e.CRVideo_NotifyUserStatus=new t.CbProxy("CRVideo_NotifyUserStatus"),e.CRVideo_NotifyCallIn=new CRVideo.CbProxy("CRVideo_NotifyCallIn"),e.CRVideo_NotifyCallAccepted=new t.CbProxy("CRVideo_NotifyCallAccepted"),e.CRVideo_NotifyCallHangup=new CRVideo.CbProxy("CRVideo_NotifyCallHangup"),e.CRVideo_NotifyCallHungup=new CRVideo.CbProxy("CRVideo_NotifyCallHungup"),e.CRVideo_NotifyCallRejected=new CRVideo.CbProxy("CRVideo_NotifyCallRejected")})(window,CRVideo,Ice)},6533:()=>{((e,t,n)=>{e._crInviteClass=class{constructor(){this.initData(),this.initIceCallback(),this.initSDKInterface()}initData(){}initIceCallback(){this.ICECallback={invite:(...e)=>{this.notifyInviteIn(...e)},cancelInvite:(...e)=>{this.notifyInviteCanceled(...e)},acceptInvite:(...e)=>{this.notifyInviteAccepted(...e)},rejectInvite:(...e)=>{this.notifyInviteRejected(...e)},inviteResult:(...e)=>{console.log(JSON.stringify(...e))}}}initSDKInterface(){e.CRVideo_Invite=(e,t,n)=>{try{console.crlog(`[Invite] CRVideo_Invite(${JSON.stringify(e,t,n)})`)}catch(e){console.error(e)}return this.invite(e,t,n)},e.CRVideo_AcceptInvite=(e,t,n)=>{try{console.crlog(`[Invite] CRVideo_AcceptInvite(${JSON.stringify(e,t,n)})`)}catch(e){console.error(e)}return this.acceptInvite(e,t,n)},e.CRVideo_RejectInvite=(e,t,n)=>{try{console.crlog(`[Invite] CRVideo_RejectInvite(${JSON.stringify(e,t,n)})`)}catch(e){console.error(e)}return this.rejectInvite(e,t,n)},e.CRVideo_CancelInvite=(e,t,n)=>{try{console.crlog(`[Invite] CRVideo_CancelInvite(${JSON.stringify(e,t,n)})`)}catch(e){console.error(e)}return this.cancelInvite(e,t,n)}}invite(i,r,o){const s=n.generateUUID(),a={module:"CallServer",cmd:"invite",inviteID:s,invitedUserID:i,usrExtDat:r||""};try{console.crlog(`[Invite] WebCMD:${JSON.stringify(a)},cookie:${o}`)}catch(e){}return t.callServerSendCMD(a).then((t=>{try{console.crlog(`[Invite] CRVideo_Invite -- CMDRslt --\x3e invite: ${JSON.stringify(t)}`)}catch(e){}if(0!==t.RspCode)return console.crlog(`[Invite] CRVideo_InviteFail.target(${s},${ICE_SDK_ERR(t.RspCode)},${o})`),void e.CRVideo_InviteFail.target(s,ICE_SDK_ERR(t.RspCode),o);console.crlog(`[Invite] CRVideo_InviteSuccess.target(${s},${o})`),e.CRVideo_InviteSuccess.target(s,o)})),s}acceptInvite(n,i,r){const o={module:"CallServer",cmd:"acceptInvite",inviteID:n,usrExtDat:i||""};try{console.crlog(`[Invite] WebCMD:${JSON.stringify(o)},cookie:${r}`)}catch(e){}t.callServerSendCMD(o).then((t=>{try{console.crlog(`[Invite] CRVideo_AcceptInvite -- CMDRslt --\x3e acceptInvite: ${JSON.stringify(t)}`)}catch(e){}if(0!==t.RspCode)return console.crlog(`[Invite] CRVideo_AcceptInviteFail.target(${n},${ICE_SDK_ERR(t.RspCode)},${r})`),void e.CRVideo_AcceptInviteFail.target(n,ICE_SDK_ERR(t.RspCode),r);console.crlog(`[Invite] CRVideo_AcceptInviteSuccess.target(${n},${r})`),e.CRVideo_AcceptInviteSuccess.target(n,r)}))}rejectInvite(n,i,r){const o={module:"CallServer",cmd:"rejectInvite",inviteID:n,usrExtDat:i||""};try{console.crlog(`[Invite] WebCMD:${JSON.stringify(o)},cookie:${r}`)}catch(e){}t.callServerSendCMD(o).then((t=>{try{console.crlog(`[Invite] CRVideo_RejectInvite -- CMDRslt --\x3e rejectInvite: ${JSON.stringify(t)}`)}catch(e){}if(0!==t.RspCode)return console.crlog(`[Invite] CRVideo_RejectInviteFail.target(${n},${ICE_SDK_ERR(t.RspCode)},${r})`),void e.CRVideo_RejectInviteFail.target(n,ICE_SDK_ERR(t.RspCode),r);console.crlog(`[Invite] CRVideo_RejectInviteSuccess.target(${n},${r})`),e.CRVideo_RejectInviteSuccess.target(n,r)}))}cancelInvite(n,i,r){const o={module:"CallServer",cmd:"cancelInvite",inviteID:n,usrExtDat:i||""};try{console.crlog(`[Invite] WebCMD:${JSON.stringify(o)},cookie:${r}`)}catch(e){}t.callServerSendCMD(o).then((t=>{try{console.crlog(`[Invite] CRVideo_CancelInvite -- CMDRslt --\x3e cancelInvite: ${JSON.stringify(t)}`)}catch(e){}if(0!==t.RspCode)return console.crlog(`[Invite] CRVideo_CancelInviteFail.target(${n},${ICE_SDK_ERR(t.RspCode)},${r})`),void e.CRVideo_CancelInviteFail.target(n,ICE_SDK_ERR(t.RspCode),r);console.crlog(`[Invite] CRVideo_CancelInviteSuccess.target(${n},${r})`),e.CRVideo_CancelInviteSuccess.target(n,r)}))}notifyInviteIn(t){const n=t.inviteID,i=t.inviterUserID,r=t.usrExtDat;console.crlog(`[Invite] CRVideo_NotifyInviteIn.target(${n},${i},${r})`),e.CRVideo_NotifyInviteIn.target(n,i,r)}notifyInviteCanceled(t){const n=t.inviteID,i=ICE_SDK_ERR(t.failCode),r=t.usrExtDat;console.crlog(`[Invite] CRVideo_NotifyInviteCanceled.target(${n},${i},${r})`),e.CRVideo_NotifyInviteCanceled.target(n,i,r)}notifyInviteAccepted(t){const n=t.inviteID,i=t.usrExtDat;console.crlog(`[Invite] CRVideo_NotifyInviteAccepted.target(${n},${i})`),e.CRVideo_NotifyInviteAccepted.target(n,i)}notifyInviteRejected(t){const n=t.inviteID,i=ICE_SDK_ERR(t.failCode),r=t.usrExtDat;console.crlog(`[Invite] CRVideo_NotifyInviteRejected.target(${n},${i},${r})`),e.CRVideo_NotifyInviteRejected.target(n,i,r)}},e.__Rtc.CRRTCInvite=new e._crInviteClass,e.CRVideo_InviteSuccess=new t.CbProxy("CRVideo_InviteSuccess"),e.CRVideo_InviteFail=new t.CbProxy("CRVideo_InviteFail"),e.CRVideo_AcceptInviteSuccess=new t.CbProxy("CRVideo_AcceptInviteSuccess"),e.CRVideo_AcceptInviteFail=new t.CbProxy("CRVideo_AcceptInviteFail"),e.CRVideo_RejectInviteSuccess=new t.CbProxy("CRVideo_RejectInviteSuccess"),e.CRVideo_RejectInviteFail=new t.CbProxy("CRVideo_RejectInviteFail"),e.CRVideo_CancelInviteSuccess=new t.CbProxy("CRVideo_CancelInviteSuccess"),e.CRVideo_CancelInviteFail=new t.CbProxy("CRVideo_CancelInviteFail"),e.CRVideo_NotifyInviteIn=new t.CbProxy("CRVideo_NotifyInviteIn"),e.CRVideo_NotifyInviteAccepted=new t.CbProxy("CRVideo_NotifyInviteAccepted"),e.CRVideo_NotifyInviteRejected=new t.CbProxy("CRVideo_NotifyInviteRejected"),e.CRVideo_NotifyInviteCanceled=new t.CbProxy("CRVideo_NotifyInviteCanceled")})(window,CRVideo,Ice)},2803:()=>{var e,t;e=window,(t=CRVideo).QueList=[],t.queStateList=[],t.queuingID=null,t.queuingInfo={},t.queuingTimer=null,t.queServiceArr=[],t.mycallInfo={},t.queUserList=[],e.CRVideo_InitQueueDat=function(e){try{console.crlog(`[QueueMgr] CRVideo_InitQueueDat(${e})`)}catch(e){}var n={cmd:"GetServiceData",module:"Queue",sessionID:t.sessionID};try{console.crlog(`[QueueMgr] WebCMD: ${JSON.stringify(n)}, cookie:${e}`)}catch(e){}t.webSendcmd(n,e)},e.CRVideo_GetAllQueueInfo=function(){try{console.crlog("[QueueMgr] CRVideo_GetAllQueueInfo()")}catch(e){}let e=[];return t.QueList.forEach((t=>{e.push({queID:+t.queID,prio:+t.prio,name:t.name,desc:t.desc})})),e},e.CRVideo_RefreshAllQueueStatus=function(n){try{!n&&console.crlog(`[QueueMgr] CRVideo_RefreshAllQueueStatus(${n})`)}catch(e){}let i=t.QueList.length;try{!n&&console.crlog(`[QueueMgr] All queue list length: ${i}`)}catch(e){}for(let r=0;r<i;r++){let i=t.QueList[r];e.CRVideo_GetQueueStatus(i.queID,"RefreshAllQueueStatus",n)}},e.CRVideo_GetQueueStatus=function(e,n,i){try{!i&&console.crlog(`[QueueMgr] CRVideo_GetQueueStatus(${e},${n},${i})`)}catch(e){}var r={cmd:"GetQueueStatus",module:"Queue",queID:e=parseInt(e),sessionID:t.sessionID};try{!i&&console.crlog(`[QueueMgr] WebCMD: ${JSON.stringify(r)}`)}catch(e){}t.webSendcmd(r,n,i)},e.CRVideo_StartService=function(e,n,i){try{console.crlog(`[QueueMgr] CRVideo_StartService(${e},${n},${i})`)}catch(e){}n=null==n?0:n;var r={cmd:"AgentEnter",module:"Queue",queID:e=parseInt(e),priority:n,sessionID:t.sessionID};try{console.crlog(`[QueueMgr] WebCMD: ${JSON.stringify(r)}, cookie: ${i}`)}catch(e){}t.webSendcmd(r,i)},e.CRVideo_StopService=function(e,n){try{console.crlog(`[QueueMgr] CRVideo_StopService(${e},${n})`)}catch(e){}var i={cmd:"AgentLeave",module:"Queue",queID:e=parseInt(e),sessionID:t.sessionID};try{console.crlog(`[QueueMgr] WebCMD: ${JSON.stringify(i)}, cookie: ${n}`)}catch(e){}t.webSendcmd(i,n)},e.CRVideo_AcceptAssignUser=function(e,n,i){try{console.crlog(`[QueueMgr] CRVideo_AcceptAssignUser(${e},${n},${i})`)}catch(e){}var r={accept:1,cmd:"AssignResponse",module:"Queue",queID:+e,userID:n,sessionID:t.sessionID};try{console.crlog(`[QueueMgr] WebCMD: ${JSON.stringify(r)}, cookie: ${i}`)}catch(e){}t.webSendcmd(r,i)},e.CRVideo_RejectAssignUser=function(e,n,i){try{console.crlog(`[QueueMgr] CRVideo_RejectAssignUser(${e},${n},${i})`)}catch(e){}var r={accept:0,cmd:"AssignResponse",module:"Queue",queID:+e,userID:n,sessionID:t.sessionID};try{console.crlog(`[QueueMgr] WebCMD: ${JSON.stringify(r)}, cookie: ${i}`)}catch(e){}t.webSendcmd(r,i)},e.CRVideo_ReqAssignUser=function(e,n,i){try{console.crlog(`[QueueMgr] CRVideo_ReqAssignUser(${e})`)}catch(e){}var r={cmd:"RequestUser",module:"Queue",sessionID:t.sessionID};n&&(r.queID=n),i&&(r.userID=i);try{console.crlog(`[QueueMgr] WebCMD: ${JSON.stringify(r)}, cookie: ${e}`)}catch(e){}t.webSendcmd(r,e)},e.CRVideo_GetServingQueues=function(){let e=[];return t.queServiceArr.forEach((t=>{e.push(t)})),e},e.CRVideo_GetQueueUsers=function(e,n){try{console.crlog(`[QueueMgr] CRVideo_GetQueueUsers(${e},${n})`)}catch(e){}var i={cmd:"GetQueueUsers",module:"Queue",queID:+e,sessionID:t.sessionID};try{console.crlog(`[QueueMgr] WebCMD: ${JSON.stringify(i)}, cookie: ${n}`)}catch(e){}t.webSendcmd(i,n)},e.CRVideo_StartQueuing=function(e,n,i){try{console.crlog(`[QueueMgr] CRVideo_StartQueuing(${e},${JSON.stringify(n)},${i})`)}catch(e){}t.queuingID=parseInt(e);var r={cmd:"UserEnter",module:"Queue",queID:parseInt(e),sessionID:t.sessionID,usrExDat:n};try{console.crlog(`[QueueMgr] WebCMD:${JSON.stringify(r)},cookie:${i}`)}catch(e){}t.webSendcmd(r,i)},e.CRVideo_StopQueuing=function(e){try{console.crlog(`[QueueMgr] CRVideo_StopQueuing(${e})`)}catch(e){}var n={cmd:"UserLeave",module:"Queue",queID:+t.queuingID,sessionID:t.sessionID};try{console.crlog(`[QueueMgr] WebCMD:${JSON.stringify(n)},cookie:${e}`)}catch(e){}t.webSendcmd(n,e),t.queuingID=null},e.CRVideo_GetUserServiceStatus=function(){console.crlog("[QueueMgr] CRVideo_GetUserServiceStatus()");const e={cmd:"GetUserServiceStatus",module:"Queue",sessionID:t.sessionID};try{console.crlog(`[QueueMgr] WebCMD:${JSON.stringify(e)}`)}catch(e){}t.webSendcmd(e)},e.CRVideo_GetAgentServiceStatus=function(){console.crlog("[QueueMgr] CRVideo_GetAgentServiceStatus()");const e={cmd:"GetAgentServiceStatus",module:"Queue",sessionID:t.sessionID};try{console.crlog(`[QueueMgr] WebCMD:${JSON.stringify(e)}`)}catch(e){}t.webSendcmd(e)},e.CRVideo_GetQueuingInfo=function(){const e=t.queuingInfo;return console.crlog(`[QueueMgr] CRVideo_GetQueuingInfo(), returnVal: ${JSON.stringify(e)}`),e},e.CRVideo_GetSessionInfo=function(){const e={callID:t.mycallInfo.callID||"",peerID:t.mycallInfo.peerID||"",peerName:t.mycallInfo.peerName||"",bCallAccepted:t.mycallInfo.bCallAccepted||0,duration:t.mycallInfo.duration||0,meetingID:t.mycallInfo.meetingID||null,meetingPswd:t.mycallInfo.meetingPswd||""};return console.crlog(`[QueueMgr] CRVideo_GetSessionInfo(), returnVal: ${JSON.stringify(e)}`),e},t.queCallback={GetServiceData:function(n,i,r){try{console.crlog(`[QueueMgr] CRVideo_InitQueueDat -- CMDCallback --\x3e GetServiceData: ${JSON.stringify(n)}`)}catch(e){}0===n.RspCode&&(t.QueList=n.ques,e.CRVideo_GetUserServiceStatus(),e.CRVideo_GetAgentServiceStatus());try{console.crlog(`[QueueMgr] CRVideo_InitQueueDatRslt.target(${ICE_SDK_ERR(n.RspCode)},${r})`)}catch(e){}e.CRVideo_InitQueueDatRslt.target(ICE_SDK_ERR(n.RspCode),r)},GetQueueStatus:function(n,i,r,o){try{!o&&console.crlog(`[QueueMgr] CRVideo_GetQueueStatus -- CMDCallback --\x3e GetQueueStatus: ${JSON.stringify(n)}`)}catch(e){}if(0===n.RspCode){t.queStateList.length;for(var s=!1,a=n.status,c=0;c<t.queStateList.length;c++)t.queStateList[c].queID!=a.queID||(t.queStateList[c]=a,s=!0);s||t.queStateList.push(a)}try{!o&&console.crlog(`[QueueMgr] CRVideo_GetQueueStatusRslt.target(${JSON.stringify(n.status)},${ICE_SDK_ERR(n.RspCode)},${r})`)}catch(e){}e.CRVideo_GetQueueStatusRslt.target(n.status,ICE_SDK_ERR(n.RspCode),r)},AgentEnter:function(e,n,i){try{console.crlog(`[QueueMgr] CRVideo_StartService -- CMDCallback --\x3e AgentEnter: ${JSON.stringify(e)}`)}catch(e){}0===e.RspCode&&(t.queServiceArr.push(n.queID),console.crlog(`[QueueMgr] queServiceArr: ${JSON.stringify(t.queServiceArr)}`));try{console.crlog(`[QueueMgr] CRVideo_StartServiceRslt.target(${n.queID},${ICE_SDK_ERR(e.RspCode)},${i})`)}catch(e){}CRVideo_StartServiceRslt.target(n.queID,ICE_SDK_ERR(e.RspCode),i)},AgentLeave:function(e,n,i){try{console.crlog(`[QueueMgr] CRVideo_StopService -- CMDCallback --\x3e AgentLeave: ${JSON.stringify(e)}`)}catch(e){}0===e.RspCode&&(t.queServiceArr.splice(t.queServiceArr.findIndex((e=>e==n.queID)),1),console.crlog(`[QueueMgr] queServiceArr: ${JSON.stringify(t.queServiceArr)}`));try{console.crlog(`[QueueMgr] CRVideo_StopServiceRslt.target(${n.queID},${ICE_SDK_ERR(e.RspCode)},${i})`)}catch(e){}CRVideo_StopServiceRslt.target(n.queID,ICE_SDK_ERR(e.RspCode),i)},AssignResponse:function(e,t,n){try{console.crlog(`[QueueMgr] CRVideo_AcceptAssignUser、CRVideo_RejectAssignUser -- CMDCallback --\x3e AssignResponse: ${JSON.stringify(e)}`)}catch(e){}try{console.crlog(`[QueueMgr] CRVideo_ResponseAssignUserRslt.target(${ICE_SDK_ERR(e.RspCode)},${n})`)}catch(e){}CRVideo_ResponseAssignUserRslt.target(ICE_SDK_ERR(e.RspCode),n)},RequestUser:function(e,t,n){try{console.crlog(`[QueueMgr] CRVideo_ReqAssignUser -- CMDCallback --\x3e RequestUser: ${JSON.stringify(e)}`)}catch(e){}let i={queID:e.queID,userID:e.userID,nickname:e.userName,queuingTime:e.wait_time,usrExDat:e.usrExDat};try{console.crlog(`[QueueMgr] CRVideo_ReqAssignUserRslt.target(${ICE_SDK_ERR(e.RspCode)},${JSON.stringify(i)},${n})`)}catch(e){}CRVideo_ReqAssignUserRslt.target(ICE_SDK_ERR(e.RspCode),i,n)},GetQueueUsers:function(e,n,i){try{console.crlog(`[QueueMgr] CRVideo_GetQueueUsers -- CMDCallback --\x3e GetQueueUsers: ${JSON.stringify(e)}`)}catch(e){}const r=[];e.users.forEach((e=>{r.push({queID:n.queID,userID:e.userID,nickname:e.userName,queuingTime:e.wait_time,usrExDat:e.usrExDat})})),t.queUserList=r;try{console.crlog(`[QueueMgr] CRVideo_GetQueueUsersRslt.target(${ICE_SDK_ERR(e.RspCode)},${JSON.stringify(r)},${i})`)}catch(e){}CRVideo_GetQueueUsersRslt.target(ICE_SDK_ERR(e.RspCode),JSON.parse(JSON.stringify(r)),i)},UserEnter:function(n,i,r){try{console.crlog(`[QueueMgr] CRVideo_StartQueuing -- CMDCallback --\x3e UserEnter: ${JSON.stringify(n)}`)}catch(e){}let o=n.RspCode;0==o&&(t.queuingInfo={queID:i.queID,position:+n.position,queuingTime:0},t.queuingTimer=setInterval((()=>{t.queuingInfo.queuingTime++}),1e3));try{console.crlog(`[QueueMgr] CRVideo_StartQueuingRslt.target(${ICE_SDK_ERR(o)},${r})`)}catch(e){}e.CRVideo_StartQueuingRslt.target(ICE_SDK_ERR(o),r);try{console.crlog(`[QueueMgr] CRVideo_QueuingInfoChanged.target(${JSON.stringify(t.queuingInfo)})`)}catch(e){}e.CRVideo_QueuingInfoChanged.target(t.queuingInfo)},UserLeave:function(e,n,i){try{console.crlog(`[QueueMgr] CRVideo_StopQueuing -- CMDCallback --\x3e UserLeave: ${JSON.stringify(e)}`)}catch(e){}let r=e.RspCode;if(0==r){t.queuingInfo={queID:n.queID,position:-1,queuingTime:0};try{console.crlog("[QueueMgr] Clear Interval: queuingTimer")}catch(e){}clearInterval(t.queuingTimer)}try{console.crlog(`[QueueMgr] CRVideo_StopQueuingRslt.target(${ICE_SDK_ERR(r)},${i})`)}catch(e){}CRVideo_StopQueuingRslt.target(ICE_SDK_ERR(r),i)},GetUserServiceStatus:function(e,n,i){try{console.crlog(`[QueueMgr] CRVideo_GetUserServiceStatus -- CMDCallback --\x3e GetUserServiceStatus: ${JSON.stringify(e)}`)}catch(e){}0==e.RspCode&&(t.mycallInfo.callID=e.callInfo.callID,t.mycallInfo.peerID=e.callInfo.peerID,t.mycallInfo.peerName=e.callInfo.peerName,t.mycallInfo.bCallAccepted=e.callInfo.callState,t.mycallInfo.duration=e.callInfo.duration,t.mycallInfo.meetingID=void 0!==e.callInfo.meetInfo?e.callInfo.meetInfo.ID:null,t.mycallInfo.meetingPswd=void 0!==e.callInfo.meetInfo?e.callInfo.meetInfo.pswd:null,t.mycallInfo.position=void 0!==e.position?e.position:null,t.mycallInfo.queID=void 0!==e.queID?e.queID:null,t.mycallInfo.wait_time=void 0!==e.wait_time?e.wait_time:null)},GetAgentServiceStatus:function(e,n,i){try{console.crlog(`[QueueMgr] CRVideo_GetAgentServiceStatus -- CMDCallback --\x3e GetAgentServiceStatus: ${JSON.stringify(e)}`)}catch(e){}0==e.RspCode&&(t.mycallInfo.callID=e.callInfo.callID,t.mycallInfo.peerID=e.callInfo.peerID,t.mycallInfo.peerName=e.callInfo.peerName,t.mycallInfo.bCallAccepted=e.callInfo.callState,t.mycallInfo.duration=e.callInfo.duration,t.mycallInfo.meetingID=void 0!==e.callInfo.meetInfo?e.callInfo.meetInfo.ID:null,t.mycallInfo.meetingPswd=void 0!==e.callInfo.meetInfo?e.callInfo.meetInfo.pswd:null,t.mycallInfo.queIDs=void 0!==e.queIDs?e.queIDs:null)},NotifyQueueStatus:function(e){try{console.crlog(`[QueueMgr] CRVideo_QueueStatusChanged.target(${JSON.stringify(e.status)})`)}catch(e){}CRVideo_QueueStatusChanged.target(e.status)},AssignUser:function(e){const t={queID:e.queID,userID:e.userID,nickname:e.userName,queuingTime:e.wait_time,usrExDat:e.usrExDat};try{console.crlog(`[QueueMgr] CRVideo_AutoAssignUser.target(${JSON.stringify(t)})`)}catch(e){}CRVideo_AutoAssignUser.target(t)},AssignCancel:function(e){try{console.crlog(`[QueueMgr] CRVideo_CancelAssignUser.target(${e.queID},${e.userID})`)}catch(e){}CRVideo_CancelAssignUser.target(e.queID,e.userID)},NotifyUserEnter:function(e){const n={queID:e.queID,userID:e.user.userID,nickname:e.user.userName,queuingTime:e.user.wait_time,usrExDat:e.user.usrExDat};t.queUserList.find((t=>t.userID==e.user.userID))||t.queUserList.push(n),console.crlog(`[QueueMgr] CRVideo_NotifyUserEnter.target(${e.queID}, ${JSON.stringify(n)})`),CRVideo_NotifyUserEnter.target(e.queID,JSON.parse(JSON.stringify(n)))},NotifyUserLeave:function(e){let n=t.queUserList.findIndex((t=>t.userID==e.userID&&t.queID==e.queID));n>-1&&t.queUserList.splice(n,1),console.crlog(`[QueueMgr] CRVideo_NotifyUserLeave.target(${e.queID},${e.userID},${e.inService})`),CRVideo_NotifyUserLeave.target(e.queID,e.userID,e.inService)},NotifyPosition:function(e){const t={queID:e.status.queID,agent_num:e.status.agent_num,wait_num:e.status.wait_num,srv_num:e.status.srv_num},n={queID:e.status.queID,position:e.position,queuingTime:e.wait_time};try{console.crlog(`[QueueMgr] CRVideo_QueueStatusChanged.target(${JSON.stringify(t)})`)}catch(e){}CRVideo_QueueStatusChanged.target(t);try{console.crlog(`[QueueMgr] CRVideo_QueuingInfoChanged.target(${JSON.stringify(n)})`)}catch(e){}CRVideo_QueuingInfoChanged.target(n)}},e.CRVideo_InitQueueDatRslt=new t.CbProxy("CRVideo_InitQueueDatRslt"),e.CRVideo_GetQueueStatusRslt=new t.CbProxy("CRVideo_GetQueueStatusRslt"),e.CRVideo_StartServiceRslt=new t.CbProxy("CRVideo_StartServiceRslt"),e.CRVideo_StopServiceRslt=new t.CbProxy("CRVideo_StopServiceRslt"),e.CRVideo_ResponseAssignUserRslt=new t.CbProxy("CRVideo_ResponseAssignUserRslt"),e.CRVideo_ReqAssignUserRslt=new CRVideo.CbProxy("CRVideo_ReqAssignUserRslt"),e.CRVideo_GetQueueUsersRslt=new CRVideo.CbProxy("CRVideo_GetQueueUsersRslt"),e.CRVideo_StartQueuingRslt=new t.CbProxy("CRVideo_StartQueuingRslt"),e.CRVideo_StopQueuingRslt=new t.CbProxy("CRVideo_StopQueuingRslt"),e.CRVideo_AutoAssignUser=new t.CbProxy("CRVideo_AutoAssignUser"),e.CRVideo_CancelAssignUser=new t.CbProxy("CRVideo_CancelAssignUser"),e.CRVideo_NotifyUserEnter=new t.CbProxy("CRVideo_NotifyUserEnter"),e.CRVideo_NotifyUserLeave=new t.CbProxy("CRVideo_NotifyUserLeave"),e.CRVideo_QueueStatusChanged=new t.CbProxy("CRVideo_QueueStatusChanged"),e.CRVideo_QueuingInfoChanged=new t.CbProxy("CRVideo_QueuingInfoChanged")},1638:(e,t)=>{var n;function i(e,t){var n;n="undefined"!=typeof global?global:null,"undefined"==typeof RecordRTC&&n&&"undefined"==typeof window&&"undefined"!=typeof global&&(global.navigator={userAgent:"Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45",getUserMedia:function(){}},global.console||(global.console={}),void 0!==global.console.log&&void 0!==global.console.error||(global.console.error=global.console.log=global.console.log||function(){console.log(arguments)}),"undefined"==typeof document&&(n.document={documentElement:{appendChild:function(){return""}}},document.createElement=document.captureStream=document.mozCaptureStream=function(){var e={getContext:function(){return e},play:function(){},pause:function(){},drawImage:function(){},toDataURL:function(){return""},style:{}};return e},n.HTMLVideoElement=function(){}),"undefined"==typeof location&&(n.location={protocol:"file:",href:"",hash:""}),"undefined"==typeof screen&&(n.screen={width:0,height:0}),void 0===l&&(n.URL={createObjectURL:function(){return""},revokeObjectURL:function(){return""}}),n.window=global),t=t||"multi-streams-mixer";var i=[],r=!1,o=document.createElement("canvas"),s=o.getContext("2d");o.style.opacity=0,o.style.position="absolute",o.style.zIndex=-1,o.style.top="-1000em",o.style.left="-1000em",o.className=t,(document.body||document.documentElement).appendChild(o),this.disableLogs=!1,this.frameInterval=10,this.width=360,this.height=240,this.useGainNode=!0;var a=this,c=window.AudioContext;void 0===c&&("undefined"!=typeof webkitAudioContext&&(c=webkitAudioContext),"undefined"!=typeof mozAudioContext&&(c=mozAudioContext));var l=window.URL;void 0===l&&"undefined"!=typeof webkitURL&&(l=webkitURL),"undefined"!=typeof navigator&&void 0===navigator.getUserMedia&&(void 0!==navigator.webkitGetUserMedia&&(navigator.getUserMedia=navigator.webkitGetUserMedia),void 0!==navigator.mozGetUserMedia&&(navigator.getUserMedia=navigator.mozGetUserMedia));var d=window.MediaStream;void 0===d&&"undefined"!=typeof webkitMediaStream&&(d=webkitMediaStream),void 0!==d&&void 0===d.prototype.stop&&(d.prototype.stop=function(){this.getTracks().forEach((function(e){e.stop()}))});var u={};function h(){if(!r){var e=i.length,t=!1,n=[];if(i.forEach((function(e){e.stream||(e.stream={}),e.stream.fullcanvas?t=e:n.push(e)})),t)o.width=t.stream.width,o.height=t.stream.height;else if(n.length){o.width=e>1?2*n[0].width:n[0].width;var s=1;3!==e&&4!==e||(s=2),5!==e&&6!==e||(s=3),7!==e&&8!==e||(s=4),9!==e&&10!==e||(s=5),o.height=n[0].height*s}else o.width=a.width||360,o.height=a.height||240;t&&t instanceof HTMLVideoElement&&f(t),n.forEach((function(e,t){f(e,t)})),setTimeout(h,a.frameInterval)}}function f(e,t){if(!r){var n=0,i=0,o=e.width,a=e.height;1===t&&(n=e.width),2===t&&(i=e.height),3===t&&(n=e.width,i=e.height),4===t&&(i=2*e.height),5===t&&(n=e.width,i=2*e.height),6===t&&(i=3*e.height),7===t&&(n=e.width,i=3*e.height),void 0!==e.stream.left&&(n=e.stream.left),void 0!==e.stream.top&&(i=e.stream.top),void 0!==e.stream.width&&(o=e.stream.width),void 0!==e.stream.height&&(a=e.stream.height),s.drawImage(e,n,i,o,a),"function"==typeof e.stream.onRender&&e.stream.onRender(s,n,i,o,a,t)}}function _(){u.AudioContextConstructor||(u.AudioContextConstructor=new u.AudioContext),a.audioContext=u.AudioContextConstructor,a.audioSources=[],!0===a.useGainNode&&(a.gainNode=a.audioContext.createGain(),a.gainNode.connect(a.audioContext.destination),a.gainNode.gain.value=0);var t=0;if(e.forEach((function(e){if(e.getTracks().filter((function(e){return"audio"===e.kind})).length){t++;var n=a.audioContext.createMediaStreamSource(e);!0===a.useGainNode&&n.connect(a.gainNode),a.audioSources.push(n)}})),t)return a.audioDestination=a.audioContext.createMediaStreamDestination(),a.audioSources.forEach((function(e){e.connect(a.audioDestination)})),a.audioDestination.stream}function p(e){var n=document.createElement("video");return function(e,t){"srcObject"in t?t.srcObject=e:"mozSrcObject"in t?t.mozSrcObject=e:t.srcObject=e}(e,n),n.className=t,n.muted=!0,n.volume=0,n.width=e.width||a.width||360,n.height=e.height||a.height||240,n.click(),n.play(),n}function C(t){i=[],(t=t||e).forEach((function(e){if(e.getTracks().filter((function(e){return"video"===e.kind})).length){var t=p(e);t.stream=e,i.push(t)}}))}void 0!==c?u.AudioContext=c:"undefined"!=typeof webkitAudioContext&&(u.AudioContext=webkitAudioContext),this.startDrawingFrames=function(){h()},this.appendStreams=function(t){if(!t)throw"First parameter is required.";t instanceof Array||(t=[t]),t.forEach((function(t){var n=new d;if(t.getTracks().filter((function(e){return"video"===e.kind})).length){var r=p(t);r.stream=t,i.push(r),n.addTrack(t.getTracks().filter((function(e){return"video"===e.kind}))[0])}if(t.getTracks().filter((function(e){return"audio"===e.kind})).length){var o=a.audioContext.createMediaStreamSource(t);a.audioDestination=a.audioContext.createMediaStreamDestination(),o.connect(a.audioDestination),n.addTrack(a.audioDestination.stream.getTracks().filter((function(e){return"audio"===e.kind}))[0])}e.push(n)}))},this.releaseStreams=function(){i=[],r=!0,a.gainNode&&(a.gainNode.disconnect(),a.gainNode=null),a.audioSources.length&&(a.audioSources.forEach((function(e){e.disconnect()})),a.audioSources=[]),a.audioDestination&&(a.audioDestination.disconnect(),a.audioDestination=null),a.audioContext&&a.audioContext.close(),a.audioContext=null,s.clearRect(0,0,o.width,o.height),o.stream&&(o.stream.stop(),o.stream=null)},this.resetVideoStreams=function(e){!e||e instanceof Array||(e=[e]),C(e)},this.name="MultiStreamsMixer",this.toString=function(){return this.name},this.getMixedStream=function(){r=!1;var t=function(){var e;C(),"captureStream"in o?e=o.captureStream():"mozCaptureStream"in o?e=o.mozCaptureStream():a.disableLogs||console.error("Upgrade to latest Chrome or otherwise enable this flag: chrome://flags/#enable-experimental-web-platform-features");var t=new d;return e.getTracks().filter((function(e){return"video"===e.kind})).forEach((function(e){t.addTrack(e)})),o.stream=t,t}(),n=_();return n&&n.getTracks().filter((function(e){return"audio"===e.kind})).forEach((function(e){t.addTrack(e)})),e.forEach((function(e){e.fullcanvas&&!0})),t},this.getMixedAudioStream=_}"undefined"==typeof RecordRTC&&(e.exports=i,void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n))},1046:e=>{e.exports=function(){function e(t,n,i){function r(s,a){if(!n[s]){if(!t[s]){if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[s]={exports:{}};t[s][0].call(l.exports,(function(e){return r(t[s][1][e]||e)}),l,l.exports,e,t,n,i)}return n[s].exports}for(var o=void 0,s=0;s<i.length;s++)r(i[s]);return r}return e}()({1:[function(e,t,n){"use strict";var i=(0,e("./adapter_factory.js").adapterFactory)({window:"undefined"==typeof window?void 0:window});t.exports=i},{"./adapter_factory.js":2}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.adapterFactory=d;var i=l(e("./utils")),r=l(e("./chrome/chrome_shim")),o=l(e("./firefox/firefox_shim")),s=l(e("./safari/safari_shim")),a=l(e("./common_shim")),c=l(e("sdp"));function l(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function d(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).window,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0},n=i.log,l=i.detectBrowser(e),d={browserDetails:l,commonShim:a,extractVersion:i.extractVersion,disableLog:i.disableLog,disableWarnings:i.disableWarnings,sdp:c};switch(l.browser){case"chrome":if(!r||!r.shimPeerConnection||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),d;if(null===l.version)return n("Chrome shim can not determine version, not shimming."),d;n("adapter.js shimming chrome."),d.browserShim=r,a.shimAddIceCandidateNullOrEmpty(e,l),r.shimGetUserMedia(e,l),r.shimMediaStream(e,l),r.shimPeerConnection(e,l),r.shimOnTrack(e,l),r.shimAddTrackRemoveTrack(e,l),r.shimGetSendersWithDtmf(e,l),r.shimGetStats(e,l),r.shimSenderReceiverGetStats(e,l),r.fixNegotiationNeeded(e,l),a.shimRTCIceCandidate(e,l),a.shimConnectionState(e,l),a.shimMaxMessageSize(e,l),a.shimSendThrowTypeError(e,l),a.removeExtmapAllowMixed(e,l);break;case"firefox":if(!o||!o.shimPeerConnection||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),d;n("adapter.js shimming firefox."),d.browserShim=o,a.shimAddIceCandidateNullOrEmpty(e,l),o.shimGetUserMedia(e,l),o.shimPeerConnection(e,l),o.shimOnTrack(e,l),o.shimRemoveStream(e,l),o.shimSenderGetStats(e,l),o.shimReceiverGetStats(e,l),o.shimRTCDataChannel(e,l),o.shimAddTransceiver(e,l),o.shimGetParameters(e,l),o.shimCreateOffer(e,l),o.shimCreateAnswer(e,l),a.shimRTCIceCandidate(e,l),a.shimConnectionState(e,l),a.shimMaxMessageSize(e,l),a.shimSendThrowTypeError(e,l);break;case"safari":if(!s||!t.shimSafari)return n("Safari shim is not included in this adapter release."),d;n("adapter.js shimming safari."),d.browserShim=s,a.shimAddIceCandidateNullOrEmpty(e,l),s.shimRTCIceServerUrls(e,l),s.shimCreateOfferLegacy(e,l),s.shimCallbacksAPI(e,l),s.shimLocalStreamsAPI(e,l),s.shimRemoteStreamsAPI(e,l),s.shimTrackEventTransceiver(e,l),s.shimGetUserMedia(e,l),s.shimAudioContext(e,l),a.shimRTCIceCandidate(e,l),a.shimMaxMessageSize(e,l),a.shimSendThrowTypeError(e,l),a.removeExtmapAllowMixed(e,l);break;default:n("Unsupported browser!")}return d}},{"./chrome/chrome_shim":3,"./common_shim":6,"./firefox/firefox_shim":7,"./safari/safari_shim":10,"./utils":11,sdp:12}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetDisplayMedia=n.shimGetUserMedia=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=e("./getusermedia");Object.defineProperty(n,"shimGetUserMedia",{enumerable:!0,get:function(){return r.shimGetUserMedia}});var o=e("./getdisplaymedia");Object.defineProperty(n,"shimGetDisplayMedia",{enumerable:!0,get:function(){return o.shimGetDisplayMedia}}),n.shimMediaStream=l,n.shimOnTrack=d,n.shimGetSendersWithDtmf=u,n.shimGetStats=h,n.shimSenderReceiverGetStats=f,n.shimAddTrackRemoveTrackWithNative=_,n.shimAddTrackRemoveTrack=p,n.shimPeerConnection=C,n.fixNegotiationNeeded=g;var s=a(e("../utils.js"));function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function d(e){if("object"===(void 0===e?"undefined":i(e))&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var n=this;return this._ontrackpoly||(this._ontrackpoly=function(t){t.stream.addEventListener("addtrack",(function(i){var r=void 0;r=e.RTCPeerConnection.prototype.getReceivers?n.getReceivers().find((function(e){return e.track&&e.track.id===i.track.id})):{track:i.track};var o=new Event("track");o.track=i.track,o.receiver=r,o.transceiver={receiver:r},o.streams=[t.stream],n.dispatchEvent(o)})),t.stream.getTracks().forEach((function(i){var r=void 0;r=e.RTCPeerConnection.prototype.getReceivers?n.getReceivers().find((function(e){return e.track&&e.track.id===i.id})):{track:i};var o=new Event("track");o.track=i,o.receiver=r,o.transceiver={receiver:r},o.streams=[t.stream],n.dispatchEvent(o)}))},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else s.wrapPeerConnectionEvent(e,"track",(function(e){return e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e}))}function u(e){if("object"===(void 0===e?"undefined":i(e))&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){var t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};var n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,i){var r=n.apply(this,arguments);return r||(r=t(this,e),this._senders.push(r)),r};var r=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){r.apply(this,arguments);var t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}var o=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var n=this;this._senders=this._senders||[],o.apply(this,[e]),e.getTracks().forEach((function(e){n._senders.push(t(n,e))}))};var s=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._senders=this._senders||[],s.apply(this,[e]),e.getTracks().forEach((function(e){var n=t._senders.find((function(t){return t.track===e}));n&&t._senders.splice(t._senders.indexOf(n),1)}))}}else if("object"===(void 0===e?"undefined":i(e))&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){var a=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){var e=this,t=a.apply(this,[]);return t.forEach((function(t){return t._pc=e})),t},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get:function(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function h(e){if(e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var e=this,n=Array.prototype.slice.call(arguments),i=n[0],r=n[1],o=n[2];if(arguments.length>0&&"function"==typeof i)return t.apply(this,arguments);if(0===t.length&&(0===arguments.length||"function"!=typeof i))return t.apply(this,[]);var s=function(e){var t={};return e.result().forEach((function(e){var n={id:e.id,timestamp:e.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[e.type]||e.type};e.names().forEach((function(t){n[t]=e.stat(t)})),t[n.id]=n})),t},a=function(e){return new Map(Object.keys(e).map((function(t){return[t,e[t]]})))};if(arguments.length>=2){var c=function(e){r(a(s(e)))};return t.apply(this,[c,i])}return new Promise((function(n,i){t.apply(e,[function(e){n(a(s(e)))},i])})).then(r,o)}}}function f(e){if("object"===(void 0===e?"undefined":i(e))&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver){if(!("getStats"in e.RTCRtpSender.prototype)){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,n=t.apply(this,[]);return n.forEach((function(t){return t._pc=e})),n});var n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){var e=this;return this._pc.getStats().then((function(t){return s.filterStats(t,e.track,!0)}))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){var r=e.RTCPeerConnection.prototype.getReceivers;r&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,t=r.apply(this,[]);return t.forEach((function(t){return t._pc=e})),t}),s.wrapPeerConnectionEvent(e,"track",(function(e){return e.receiver._pc=e.srcElement,e})),e.RTCRtpReceiver.prototype.getStats=function(){var e=this;return this._pc.getStats().then((function(t){return s.filterStats(t,e.track,!1)}))}}if("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype){var o=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){var t=arguments[0],n=void 0,i=void 0,r=void 0;return this.getSenders().forEach((function(e){e.track===t&&(n?r=!0:n=e)})),this.getReceivers().forEach((function(e){return e.track===t&&(i?r=!0:i=e),e.track===t})),r||n&&i?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):n?n.getStats():i?i.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return o.apply(this,arguments)}}}}function _(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map((function(t){return e._shimmedLocalStreams[t][0]}))};var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){if(!n)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};var i=t.apply(this,arguments);return this._shimmedLocalStreams[n.id]?-1===this._shimmedLocalStreams[n.id].indexOf(i)&&this._shimmedLocalStreams[n.id].push(i):this._shimmedLocalStreams[n.id]=[n,i],i};var n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){var t=this;this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach((function(e){if(t.getSenders().find((function(t){return t.track===e})))throw new DOMException("Track already exists.","InvalidAccessError")}));var i=this.getSenders();n.apply(this,arguments);var r=this.getSenders().filter((function(e){return-1===i.indexOf(e)}));this._shimmedLocalStreams[e.id]=[e].concat(r)};var i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],i.apply(this,arguments)};var r=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach((function(n){var i=t._shimmedLocalStreams[n].indexOf(e);-1!==i&&t._shimmedLocalStreams[n].splice(i,1),1===t._shimmedLocalStreams[n].length&&delete t._shimmedLocalStreams[n]})),r.apply(this,arguments)}}function p(e,t){if(e.RTCPeerConnection){if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return _(e);var n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){var e=this,t=n.apply(this);return this._reverseStreams=this._reverseStreams||{},t.map((function(t){return e._reverseStreams[t.id]}))};var i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){var n=this;if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach((function(e){if(n.getSenders().find((function(t){return t.track===e})))throw new DOMException("Track already exists.","InvalidAccessError")})),!this._reverseStreams[t.id]){var r=new e.MediaStream(t.getTracks());this._streams[t.id]=r,this._reverseStreams[r.id]=t,t=r}i.apply(this,[t])};var r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},r.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,n){var i=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");var r=[].slice.call(arguments,1);if(1!==r.length||!r[0].getTracks().find((function(e){return e===t})))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find((function(e){return e.track===t})))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};var o=this._streams[n.id];if(o)o.addTrack(t),Promise.resolve().then((function(){i.dispatchEvent(new Event("negotiationneeded"))}));else{var s=new e.MediaStream([t]);this._streams[n.id]=s,this._reverseStreams[s.id]=n,this.addStream(s)}return this.getSenders().find((function(e){return e.track===t}))},["createOffer","createAnswer"].forEach((function(t){var n=e.RTCPeerConnection.prototype[t],i=c({},t,(function(){var e=this,t=arguments;return arguments.length&&"function"==typeof arguments[0]?n.apply(this,[function(n){var i=a(e,n);t[0].apply(null,[i])},function(e){t[1]&&t[1].apply(null,e)},arguments[2]]):n.apply(this,arguments).then((function(t){return a(e,t)}))}));e.RTCPeerConnection.prototype[t]=i[t]}));var o=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=l(this,arguments[0]),o.apply(this,arguments)):o.apply(this,arguments)};var s=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get:function(){var e=s.get.apply(this);return""===e.type?e:a(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){var t=this;if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(e._pc!==this)throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};var n=void 0;Object.keys(this._streams).forEach((function(i){t._streams[i].getTracks().find((function(t){return e.track===t}))&&(n=t._streams[i])})),n&&(1===n.getTracks().length?this.removeStream(this._reverseStreams[n.id]):n.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function a(e,t){var n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((function(t){var i=e._reverseStreams[t],r=e._streams[i.id];n=n.replace(new RegExp(r.id,"g"),i.id)})),new RTCSessionDescription({type:t.type,sdp:n})}function l(e,t){var n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((function(t){var i=e._reverseStreams[t],r=e._streams[i.id];n=n.replace(new RegExp(i.id,"g"),r.id)})),new RTCSessionDescription({type:t.type,sdp:n})}}function C(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var n=e.RTCPeerConnection.prototype[t],i=c({},t,(function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}));e.RTCPeerConnection.prototype[t]=i[t]}))}function g(e,t){s.wrapPeerConnectionEvent(e,"negotiationneeded",(function(e){var n=e.target;if(!(t.version<72||n.getConfiguration&&"plan-b"===n.getConfiguration().sdpSemantics)||"stable"===n.signalingState)return e}))}},{"../utils.js":11,"./getdisplaymedia":4,"./getusermedia":5}],4:[function(e,t,n){"use strict";function i(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&("function"==typeof t?e.navigator.mediaDevices.getDisplayMedia=function(n){return t(n).then((function(t){var i=n.video&&n.video.width,r=n.video&&n.video.height,o=n.video&&n.video.frameRate;return n.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:t,maxFrameRate:o||3}},i&&(n.video.mandatory.maxWidth=i),r&&(n.video.mandatory.maxHeight=r),e.navigator.mediaDevices.getUserMedia(n)}))}:console.error("shimGetDisplayMedia: getSourceId argument is not a function"))}Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetDisplayMedia=i},{}],5:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}n.shimGetUserMedia=s;var o=r(e("../utils.js")).log;function s(e,t){var n=e&&e.navigator;if(n.mediaDevices){var r=function(e){if("object"!==(void 0===e?"undefined":i(e))||e.mandatory||e.optional)return e;var t={};return Object.keys(e).forEach((function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var r="object"===i(e[n])?e[n]:{ideal:e[n]};void 0!==r.exact&&"number"==typeof r.exact&&(r.min=r.max=r.exact);var o=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==r.ideal){t.optional=t.optional||[];var s={};"number"==typeof r.ideal?(s[o("min",n)]=r.ideal,t.optional.push(s),(s={})[o("max",n)]=r.ideal,t.optional.push(s)):(s[o("",n)]=r.ideal,t.optional.push(s))}void 0!==r.exact&&"number"!=typeof r.exact?(t.mandatory=t.mandatory||{},t.mandatory[o("",n)]=r.exact):["min","max"].forEach((function(e){void 0!==r[e]&&(t.mandatory=t.mandatory||{},t.mandatory[o(e,n)]=r[e])}))}})),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},s=function(e,s){if(t.version>=61)return s(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"===i(e.audio)){var a=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])};a((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),a(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=r(e.audio)}if(e&&"object"===i(e.video)){var c=e.video.facingMode;c=c&&("object"===(void 0===c?"undefined":i(c))?c:{ideal:c});var l=t.version<66;if(c&&("user"===c.exact||"environment"===c.exact||"user"===c.ideal||"environment"===c.ideal)&&(!n.mediaDevices.getSupportedConstraints||!n.mediaDevices.getSupportedConstraints().facingMode||l)){delete e.video.facingMode;var d=void 0;if("environment"===c.exact||"environment"===c.ideal?d=["back","rear"]:"user"!==c.exact&&"user"!==c.ideal||(d=["front"]),d)return n.mediaDevices.enumerateDevices().then((function(t){var n=(t=t.filter((function(e){return"videoinput"===e.kind}))).find((function(e){return d.some((function(t){return e.label.toLowerCase().includes(t)}))}));return!n&&t.length&&d.includes("back")&&(n=t[t.length-1]),n&&(e.video.deviceId=c.exact?{exact:n.deviceId}:{ideal:n.deviceId}),e.video=r(e.video),o("chrome: "+JSON.stringify(e)),s(e)}))}e.video=r(e.video)}return o("chrome: "+JSON.stringify(e)),s(e)},a=function(e){return t.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}},c=function(e,t,i){s(e,(function(e){n.webkitGetUserMedia(e,t,(function(e){i&&i(a(e))}))}))};if(n.getUserMedia=c.bind(n),n.mediaDevices.getUserMedia){var l=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(e){return s(e,(function(e){return l(e).then((function(t){if(e.audio&&!t.getAudioTracks().length||e.video&&!t.getVideoTracks().length)throw t.getTracks().forEach((function(e){e.stop()})),new DOMException("","NotFoundError");return t}),(function(e){return Promise.reject(a(e))}))}))}}}}},{"../utils.js":11}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n.shimRTCIceCandidate=c,n.shimMaxMessageSize=l,n.shimSendThrowTypeError=d,n.shimConnectionState=u,n.removeExtmapAllowMixed=h,n.shimAddIceCandidateNullOrEmpty=f;var r=a(e("sdp")),o=s(e("./utils"));function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}function c(e){if(!(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)){var t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"===(void 0===e?"undefined":i(e))&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substr(2)),e.candidate&&e.candidate.length){var n=new t(e),o=r.default.parseCandidate(e.candidate),s=Object.assign(n,o);return s.toJSON=function(){return{candidate:s.candidate,sdpMid:s.sdpMid,sdpMLineIndex:s.sdpMLineIndex,usernameFragment:s.usernameFragment}},s}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,o.wrapPeerConnectionEvent(e,"icecandidate",(function(t){return t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t}))}}function l(e,t){if(e.RTCPeerConnection){"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp}});var n=function(e){if(!e||!e.sdp)return!1;var t=r.default.splitSections(e.sdp);return t.shift(),t.some((function(e){var t=r.default.parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")}))},i=function(e){var t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;var n=parseInt(t[1],10);return n!=n?-1:n},o=function(e){var n=65536;return"firefox"===t.browser&&(n=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),n},s=function(e,n){var i=65536;"firefox"===t.browser&&57===t.version&&(i=65535);var o=r.default.matchPrefix(e.sdp,"a=max-message-size:");return o.length>0?i=parseInt(o[0].substr(19),10):"firefox"===t.browser&&-1!==n&&(i=2147483637),i},a=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===t.browser&&t.version>=76&&"plan-b"===this.getConfiguration().sdpSemantics&&Object.defineProperty(this,"sctp",{get:function(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0}),n(arguments[0])){var e=i(arguments[0]),r=o(e),c=s(arguments[0],e),l=void 0;l=0===r&&0===c?Number.POSITIVE_INFINITY:0===r||0===c?Math.max(r,c):Math.min(r,c);var d={};Object.defineProperty(d,"maxMessageSize",{get:function(){return l}}),this._sctp=d}return a.apply(this,arguments)}}}function d(e){if(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype){var t=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){var e=t.apply(this,arguments);return n(e,this),e},o.wrapPeerConnectionEvent(e,"datachannel",(function(e){return n(e.channel,e.target),e}))}function n(e,t){var n=e.send;e.send=function(){var i=arguments[0],r=i.length||i.size||i.byteLength;if("open"===e.readyState&&t.sctp&&r>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return n.apply(e,arguments)}}}function u(e){if(e.RTCPeerConnection&&!("connectionState"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get:function(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get:function(){return this._onconnectionstatechange||null},set:function(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach((function(e){var n=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=function(e){var t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;var n=new Event("connectionstatechange",e);t.dispatchEvent(n)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}}))}}function h(e,t){if(e.RTCPeerConnection&&!("chrome"===t.browser&&t.version>=71||"safari"===t.browser&&t.version>=605)){var n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(t){if(t&&t.sdp&&-1!==t.sdp.indexOf("\na=extmap-allow-mixed")){var i=t.sdp.split("\n").filter((function(e){return"a=extmap-allow-mixed"!==e.trim()})).join("\n");e.RTCSessionDescription&&t instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:t.type,sdp:i}):t.sdp=i}return n.apply(this,arguments)}}}function f(e,t){if(e.RTCPeerConnection&&e.RTCPeerConnection.prototype){var n=e.RTCPeerConnection.prototype.addIceCandidate;n&&0!==n.length&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===t.browser&&t.version<78||"firefox"===t.browser&&t.version<68||"safari"===t.browser)&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}}},{"./utils":11,sdp:12}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetDisplayMedia=n.shimGetUserMedia=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=e("./getusermedia");Object.defineProperty(n,"shimGetUserMedia",{enumerable:!0,get:function(){return r.shimGetUserMedia}});var o=e("./getdisplaymedia");Object.defineProperty(n,"shimGetDisplayMedia",{enumerable:!0,get:function(){return o.shimGetDisplayMedia}}),n.shimOnTrack=l,n.shimPeerConnection=d,n.shimSenderGetStats=u,n.shimReceiverGetStats=h,n.shimRemoveStream=f,n.shimRTCDataChannel=_,n.shimAddTransceiver=p,n.shimGetParameters=C,n.shimCreateOffer=g,n.shimCreateAnswer=m;var s=a(e("../utils"));function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e){"object"===(void 0===e?"undefined":i(e))&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function d(e,t){if("object"===(void 0===e?"undefined":i(e))&&(e.RTCPeerConnection||e.mozRTCPeerConnection)){!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){var n=e.RTCPeerConnection.prototype[t],i=c({},t,(function(){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}));e.RTCPeerConnection.prototype[t]=i[t]}));var n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){var e=Array.prototype.slice.call(arguments),i=e[0],o=e[1],s=e[2];return r.apply(this,[i||null]).then((function(e){if(t.version<53&&!o)try{e.forEach((function(e){e.type=n[e.type]||e.type}))}catch(t){if("TypeError"!==t.name)throw t;e.forEach((function(t,i){e.set(i,Object.assign({},t,{type:n[t.type]||t.type}))}))}return e})).then(o,s)}}}function u(e){if("object"===(void 0===e?"undefined":i(e))&&e.RTCPeerConnection&&e.RTCRtpSender&&(!e.RTCRtpSender||!("getStats"in e.RTCRtpSender.prototype))){var t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){var e=this,n=t.apply(this,[]);return n.forEach((function(t){return t._pc=e})),n});var n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){var e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}}function h(e){if("object"===(void 0===e?"undefined":i(e))&&e.RTCPeerConnection&&e.RTCRtpSender&&(!e.RTCRtpSender||!("getStats"in e.RTCRtpReceiver.prototype))){var t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){var e=this,n=t.apply(this,[]);return n.forEach((function(t){return t._pc=e})),n}),s.wrapPeerConnectionEvent(e,"track",(function(e){return e.receiver._pc=e.srcElement,e})),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}}function f(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;s.deprecated("removeStream","removeTrack"),this.getSenders().forEach((function(n){n.track&&e.getTracks().includes(n.track)&&t.removeTrack(n)}))})}function _(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function p(e){if("object"===(void 0===e?"undefined":i(e))&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];var e=arguments[1],n=e&&"sendEncodings"in e;n&&e.sendEncodings.forEach((function(e){if("rid"in e&&!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")}));var i=t.apply(this,arguments);if(n){var r=i.sender,o=r.getParameters();(!("encodings"in o)||1===o.encodings.length&&0===Object.keys(o.encodings[0]).length)&&(o.encodings=e.sendEncodings,r.sendEncodings=e.sendEncodings,this.setParametersPromises.push(r.setParameters(o).then((function(){delete r.sendEncodings})).catch((function(){delete r.sendEncodings}))))}return i})}}function C(e){if("object"===(void 0===e?"undefined":i(e))&&e.RTCRtpSender){var t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){var e=t.apply(this,arguments);return"encodings"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}}function g(e){if("object"===(void 0===e?"undefined":i(e))&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){var e=this,n=arguments;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((function(){return t.apply(e,n)})).finally((function(){e.setParametersPromises=[]})):t.apply(this,arguments)}}}function m(e){if("object"===(void 0===e?"undefined":i(e))&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){var e=this,n=arguments;return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((function(){return t.apply(e,n)})).finally((function(){e.setParametersPromises=[]})):t.apply(this,arguments)}}}},{"../utils":11,"./getdisplaymedia":8,"./getusermedia":9}],8:[function(e,t,n){"use strict";function i(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(n){if(!n||!n.video){var i=new DOMException("getDisplayMedia without video constraints is undefined");return i.name="NotFoundError",i.code=8,Promise.reject(i)}return!0===n.video?n.video={mediaSource:t}:n.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(n)})}Object.defineProperty(n,"__esModule",{value:!0}),n.shimGetDisplayMedia=i},{}],9:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n.shimGetUserMedia=s;var r=o(e("../utils"));function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function s(e,t){var n=e&&e.navigator,o=e&&e.MediaStreamTrack;if(n.getUserMedia=function(e,t,i){r.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(e).then(t,i)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){var s=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])},a=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(e){return"object"===(void 0===e?"undefined":i(e))&&"object"===i(e.audio)&&(e=JSON.parse(JSON.stringify(e)),s(e.audio,"autoGainControl","mozAutoGainControl"),s(e.audio,"noiseSuppression","mozNoiseSuppression")),a(e)},o&&o.prototype.getSettings){var c=o.prototype.getSettings;o.prototype.getSettings=function(){var e=c.apply(this,arguments);return s(e,"mozAutoGainControl","autoGainControl"),s(e,"mozNoiseSuppression","noiseSuppression"),e}}if(o&&o.prototype.applyConstraints){var l=o.prototype.applyConstraints;o.prototype.applyConstraints=function(e){return"audio"===this.kind&&"object"===(void 0===e?"undefined":i(e))&&(e=JSON.parse(JSON.stringify(e)),s(e,"autoGainControl","mozAutoGainControl"),s(e,"noiseSuppression","mozNoiseSuppression")),l.apply(this,[e])}}}}},{"../utils":11}],10:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n.shimLocalStreamsAPI=s,n.shimRemoteStreamsAPI=a,n.shimCallbacksAPI=c,n.shimGetUserMedia=l,n.shimConstraints=d,n.shimRTCIceServerUrls=u,n.shimTrackEventTransceiver=h,n.shimCreateOfferLegacy=f,n.shimAudioContext=_;var r=o(e("../utils"));function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function s(e){if("object"===(void 0===e?"undefined":i(e))&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){var t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){var n=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach((function(i){return t.call(n,i,e)})),e.getVideoTracks().forEach((function(i){return t.call(n,i,e)}))},e.RTCPeerConnection.prototype.addTrack=function(e){for(var n=this,i=arguments.length,r=Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];return r&&r.forEach((function(e){n._localStreams?n._localStreams.includes(e)||n._localStreams.push(e):n._localStreams=[e]})),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){var t=this;this._localStreams||(this._localStreams=[]);var n=this._localStreams.indexOf(e);if(-1!==n){this._localStreams.splice(n,1);var i=e.getTracks();this.getSenders().forEach((function(e){i.includes(e.track)&&t.removeTrack(e)}))}})}}function a(e){if("object"===(void 0===e?"undefined":i(e))&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(e){var t=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=function(e){e.streams.forEach((function(e){if(t._remoteStreams||(t._remoteStreams=[]),!t._remoteStreams.includes(e)){t._remoteStreams.push(e);var n=new Event("addstream");n.stream=e,t.dispatchEvent(n)}}))})}});var t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){var e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach((function(t){if(e._remoteStreams||(e._remoteStreams=[]),!(e._remoteStreams.indexOf(t)>=0)){e._remoteStreams.push(t);var n=new Event("addstream");n.stream=t,e.dispatchEvent(n)}}))}),t.apply(e,arguments)}}}function c(e){if("object"===(void 0===e?"undefined":i(e))&&e.RTCPeerConnection){var t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,o=t.setLocalDescription,s=t.setRemoteDescription,a=t.addIceCandidate;t.createOffer=function(e,t){var i=arguments.length>=2?arguments[2]:arguments[0],r=n.apply(this,[i]);return t?(r.then(e,t),Promise.resolve()):r},t.createAnswer=function(e,t){var n=arguments.length>=2?arguments[2]:arguments[0],i=r.apply(this,[n]);return t?(i.then(e,t),Promise.resolve()):i};var c=function(e,t,n){var i=o.apply(this,[e]);return n?(i.then(t,n),Promise.resolve()):i};t.setLocalDescription=c,c=function(e,t,n){var i=s.apply(this,[e]);return n?(i.then(t,n),Promise.resolve()):i},t.setRemoteDescription=c,c=function(e,t,n){var i=a.apply(this,[e]);return n?(i.then(t,n),Promise.resolve()):i},t.addIceCandidate=c}}function l(e){var t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){var n=t.mediaDevices,i=n.getUserMedia.bind(n);t.mediaDevices.getUserMedia=function(e){return i(d(e))}}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,n,i){t.mediaDevices.getUserMedia(e).then(n,i)}.bind(t))}function d(e){return e&&void 0!==e.video?Object.assign({},e,{video:r.compactObject(e.video)}):e}function u(e){if(e.RTCPeerConnection){var t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,n){if(e&&e.iceServers){for(var i=[],o=0;o<e.iceServers.length;o++){var s=e.iceServers[o];!s.hasOwnProperty("urls")&&s.hasOwnProperty("url")?(r.deprecated("RTCIceServer.url","RTCIceServer.urls"),(s=JSON.parse(JSON.stringify(s))).urls=s.url,delete s.url,i.push(s)):i.push(e.iceServers[o])}e.iceServers=i}return new t(e,n)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:function(){return t.generateCertificate}})}}function h(e){"object"===(void 0===e?"undefined":i(e))&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function f(e){var t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){void 0!==e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);var n=this.getTransceivers().find((function(e){return"audio"===e.receiver.track.kind}));!1===e.offerToReceiveAudio&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==e.offerToReceiveAudio||n||this.addTransceiver("audio"),void 0!==e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);var i=this.getTransceivers().find((function(e){return"video"===e.receiver.track.kind}));!1===e.offerToReceiveVideo&&i?"sendrecv"===i.direction?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":"recvonly"===i.direction&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):!0!==e.offerToReceiveVideo||i||this.addTransceiver("video")}return t.apply(this,arguments)}}function _(e){"object"!==(void 0===e?"undefined":i(e))||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}},{"../utils":11}],11:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.extractVersion=a,n.wrapPeerConnectionEvent=c,n.disableLog=l,n.disableWarnings=d,n.log=u,n.deprecated=h,n.detectBrowser=f,n.compactObject=p,n.walkStats=C,n.filterStats=g;var o=!0,s=!0;function a(e,t,n){var i=e.match(t);return i&&i.length>=n&&parseInt(i[n],10)}function c(e,t,n){if(e.RTCPeerConnection){var i=e.RTCPeerConnection.prototype,r=i.addEventListener;i.addEventListener=function(e,i){if(e!==t)return r.apply(this,arguments);var o=function(e){var t=n(e);t&&(i.handleEvent?i.handleEvent(t):i(t))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(i,o),r.apply(this,[e,o])};var o=i.removeEventListener;i.removeEventListener=function(e,n){if(e!==t||!this._eventMap||!this._eventMap[t])return o.apply(this,arguments);if(!this._eventMap[t].has(n))return o.apply(this,arguments);var i=this._eventMap[t].get(n);return this._eventMap[t].delete(n),0===this._eventMap[t].size&&delete this._eventMap[t],0===Object.keys(this._eventMap).length&&delete this._eventMap,o.apply(this,[e,i])},Object.defineProperty(i,"on"+t,{get:function(){return this["_on"+t]},set:function(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}}function l(e){return"boolean"!=typeof e?new Error("Argument type: "+(void 0===e?"undefined":i(e))+". Please use a boolean."):(o=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function d(e){return"boolean"!=typeof e?new Error("Argument type: "+(void 0===e?"undefined":i(e))+". Please use a boolean."):(s=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function u(){if("object"===("undefined"==typeof window?"undefined":i(window))){if(o)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function h(e,t){s&&console.warn(e+" is deprecated, please use "+t+" instead.")}function f(e){var t={browser:null,version:null};if(void 0===e||!e.navigator)return t.browser="Not a browser.",t;var n=e.navigator;if(n.mozGetUserMedia)t.browser="firefox",t.version=a(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection&&!e.RTCIceGatherer)t.browser="chrome",t.version=a(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else{if(!e.RTCPeerConnection||!n.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=a(n.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return t}function _(e){return"[object Object]"===Object.prototype.toString.call(e)}function p(e){return _(e)?Object.keys(e).reduce((function(t,n){var i=_(e[n]),o=i?p(e[n]):e[n],s=i&&!Object.keys(o).length;return void 0===o||s?t:Object.assign(t,r({},n,o))}),{}):e}function C(e,t,n){t&&!n.has(t.id)&&(n.set(t.id,t),Object.keys(t).forEach((function(i){i.endsWith("Id")?C(e,e.get(t[i]),n):i.endsWith("Ids")&&t[i].forEach((function(t){C(e,e.get(t),n)}))})))}function g(e,t,n){var i=n?"outbound-rtp":"inbound-rtp",r=new Map;if(null===t)return r;var o=[];return e.forEach((function(e){"track"===e.type&&e.trackIdentifier===t.id&&o.push(e)})),o.forEach((function(t){e.forEach((function(n){n.type===i&&n.trackId===t.id&&C(e,n,r)}))})),r}},{}],12:[function(e,t,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};r.localCName=r.generateIdentifier(),r.splitLines=function(e){return e.trim().split("\n").map((function(e){return e.trim()}))},r.splitSections=function(e){return e.split("\nm=").map((function(e,t){return(t>0?"m="+e:e).trim()+"\r\n"}))},r.getDescription=function(e){var t=r.splitSections(e);return t&&t[0]},r.getMediaSections=function(e){var t=r.splitSections(e);return t.shift(),t},r.matchPrefix=function(e,t){return r.splitLines(e).filter((function(e){return 0===e.indexOf(t)}))},r.parseCandidate=function(e){for(var t=void 0,n={foundation:(t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" "))[0],component:{1:"rtp",2:"rtcp"}[t[1]],protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]},i=8;i<t.length;i+=2)switch(t[i]){case"raddr":n.relatedAddress=t[i+1];break;case"rport":n.relatedPort=parseInt(t[i+1],10);break;case"tcptype":n.tcpType=t[i+1];break;case"ufrag":n.ufrag=t[i+1],n.usernameFragment=t[i+1];break;default:void 0===n[t[i]]&&(n[t[i]]=t[i+1])}return n},r.writeCandidate=function(e){var t=[];t.push(e.foundation);var n=e.component;"rtp"===n?t.push(1):"rtcp"===n?t.push(2):t.push(n),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);var i=e.type;return t.push("typ"),t.push(i),"host"!==i&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},r.parseIceOptions=function(e){return e.substr(14).split(" ")},r.parseRtpMap=function(e){var t=e.substr(9).split(" "),n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.channels=3===t.length?parseInt(t[2],10):1,n.numChannels=n.channels,n},r.writeRtpMap=function(e){var t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);var n=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==n?"/"+n:"")+"\r\n"},r.parseExtmap=function(e){var t=e.substr(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1]}},r.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+"\r\n"},r.parseFmtp=function(e){for(var t={},n=void 0,i=e.substr(e.indexOf(" ")+1).split(";"),r=0;r<i.length;r++)t[(n=i[r].trim().split("="))[0].trim()]=n[1];return t},r.writeFmtp=function(e){var t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){var i=[];Object.keys(e.parameters).forEach((function(t){e.parameters[t]?i.push(t+"="+e.parameters[t]):i.push(t)})),t+="a=fmtp:"+n+" "+i.join(";")+"\r\n"}return t},r.parseRtcpFb=function(e){var t=e.substr(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},r.writeRtcpFb=function(e){var t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((function(e){t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),t},r.parseSsrcMedia=function(e){var t=e.indexOf(" "),n={ssrc:parseInt(e.substr(7,t-7),10)},i=e.indexOf(":",t);return i>-1?(n.attribute=e.substr(t+1,i-t-1),n.value=e.substr(i+1)):n.attribute=e.substr(t+1),n},r.parseSsrcGroup=function(e){var t=e.substr(13).split(" ");return{semantics:t.shift(),ssrcs:t.map((function(e){return parseInt(e,10)}))}},r.getMid=function(e){var t=r.matchPrefix(e,"a=mid:")[0];if(t)return t.substr(6)},r.parseFingerprint=function(e){var t=e.substr(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1]}},r.getDtlsParameters=function(e,t){return{role:"auto",fingerprints:r.matchPrefix(e+t,"a=fingerprint:").map(r.parseFingerprint)}},r.writeDtlsParameters=function(e,t){var n="a=setup:"+t+"\r\n";return e.fingerprints.forEach((function(e){n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),n},r.parseCryptoLine=function(e){var t=e.substr(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},r.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"===i(e.keyParams)?r.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},r.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;var t=e.substr(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},r.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},r.getCryptoParameters=function(e,t){return r.matchPrefix(e+t,"a=crypto:").map(r.parseCryptoLine)},r.getIceParameters=function(e,t){var n=r.matchPrefix(e+t,"a=ice-ufrag:")[0],i=r.matchPrefix(e+t,"a=ice-pwd:")[0];return n&&i?{usernameFragment:n.substr(12),password:i.substr(10)}:null},r.writeIceParameters=function(e){var t="a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n";return e.iceLite&&(t+="a=ice-lite\r\n"),t},r.parseRtpParameters=function(e){for(var t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},n=r.splitLines(e)[0].split(" "),i=3;i<n.length;i++){var o=n[i],s=r.matchPrefix(e,"a=rtpmap:"+o+" ")[0];if(s){var a=r.parseRtpMap(s),c=r.matchPrefix(e,"a=fmtp:"+o+" ");switch(a.parameters=c.length?r.parseFmtp(c[0]):{},a.rtcpFeedback=r.matchPrefix(e,"a=rtcp-fb:"+o+" ").map(r.parseRtcpFb),t.codecs.push(a),a.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(a.name.toUpperCase())}}}return r.matchPrefix(e,"a=extmap:").forEach((function(e){t.headerExtensions.push(r.parseExtmap(e))})),t},r.writeRtpDescription=function(e,t){var n="";n+="m="+e+" ",n+=t.codecs.length>0?"9":"0",n+=" UDP/TLS/RTP/SAVPF ",n+=t.codecs.map((function(e){return void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType})).join(" ")+"\r\n",n+="c=IN IP4 0.0.0.0\r\n",n+="a=rtcp:9 IN IP4 0.0.0.0\r\n",t.codecs.forEach((function(e){n+=r.writeRtpMap(e),n+=r.writeFmtp(e),n+=r.writeRtcpFb(e)}));var i=0;return t.codecs.forEach((function(e){e.maxptime>i&&(i=e.maxptime)})),i>0&&(n+="a=maxptime:"+i+"\r\n"),t.headerExtensions&&t.headerExtensions.forEach((function(e){n+=r.writeExtmap(e)})),n},r.parseRtpEncodingParameters=function(e){var t=[],n=r.parseRtpParameters(e),i=-1!==n.fecMechanisms.indexOf("RED"),o=-1!==n.fecMechanisms.indexOf("ULPFEC"),s=r.matchPrefix(e,"a=ssrc:").map((function(e){return r.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute})),a=s.length>0&&s[0].ssrc,c=void 0,l=r.matchPrefix(e,"a=ssrc-group:FID").map((function(e){return e.substr(17).split(" ").map((function(e){return parseInt(e,10)}))}));l.length>0&&l[0].length>1&&l[0][0]===a&&(c=l[0][1]),n.codecs.forEach((function(e){if("RTX"===e.name.toUpperCase()&&e.parameters.apt){var n={ssrc:a,codecPayloadType:parseInt(e.parameters.apt,10)};a&&c&&(n.rtx={ssrc:c}),t.push(n),i&&((n=JSON.parse(JSON.stringify(n))).fec={ssrc:a,mechanism:o?"red+ulpfec":"red"},t.push(n))}})),0===t.length&&a&&t.push({ssrc:a});var d=r.matchPrefix(e,"b=");return d.length&&(d=0===d[0].indexOf("b=TIAS:")?parseInt(d[0].substr(7),10):0===d[0].indexOf("b=AS:")?1e3*parseInt(d[0].substr(5),10)*.95-16e3:void 0,t.forEach((function(e){e.maxBitrate=d}))),t},r.parseRtcpParameters=function(e){var t={},n=r.matchPrefix(e,"a=ssrc:").map((function(e){return r.parseSsrcMedia(e)})).filter((function(e){return"cname"===e.attribute}))[0];n&&(t.cname=n.value,t.ssrc=n.ssrc);var i=r.matchPrefix(e,"a=rtcp-rsize");t.reducedSize=i.length>0,t.compound=0===i.length;var o=r.matchPrefix(e,"a=rtcp-mux");return t.mux=o.length>0,t},r.writeRtcpParameters=function(e){var t="";return e.reducedSize&&(t+="a=rtcp-rsize\r\n"),e.mux&&(t+="a=rtcp-mux\r\n"),void 0!==e.ssrc&&e.cname&&(t+="a=ssrc:"+e.ssrc+" cname:"+e.cname+"\r\n"),t},r.parseMsid=function(e){var t=void 0,n=r.matchPrefix(e,"a=msid:");if(1===n.length)return{stream:(t=n[0].substr(7).split(" "))[0],track:t[1]};var i=r.matchPrefix(e,"a=ssrc:").map((function(e){return r.parseSsrcMedia(e)})).filter((function(e){return"msid"===e.attribute}));return i.length>0?{stream:(t=i[0].value.split(" "))[0],track:t[1]}:void 0},r.parseSctpDescription=function(e){var t=r.parseMLine(e),n=r.matchPrefix(e,"a=max-message-size:"),i=void 0;n.length>0&&(i=parseInt(n[0].substr(19),10)),isNaN(i)&&(i=65536);var o=r.matchPrefix(e,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substr(12),10),protocol:t.fmt,maxMessageSize:i};var s=r.matchPrefix(e,"a=sctpmap:");if(s.length>0){var a=s[0].substr(10).split(" ");return{port:parseInt(a[0],10),protocol:a[1],maxMessageSize:i}}},r.writeSctpDescription=function(e,t){var n=[];return n="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&n.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),n.join("")},r.generateSessionId=function(){return Math.random().toString().substr(2,21)},r.writeSessionBoilerplate=function(e,t,n){var i=void 0!==t?t:2;return"v=0\r\no="+(n||"thisisadapterortc")+" "+(e||r.generateSessionId())+" "+i+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},r.getDirection=function(e,t){for(var n=r.splitLines(e),i=0;i<n.length;i++)switch(n[i]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return n[i].substr(2)}return t?r.getDirection(t):"sendrecv"},r.getKind=function(e){return r.splitLines(e)[0].split(" ")[0].substr(2)},r.isRejected=function(e){return"0"===e.split(" ",2)[1]},r.parseMLine=function(e){var t=r.splitLines(e)[0].substr(2).split(" ");return{kind:t[0],port:parseInt(t[1],10),protocol:t[2],fmt:t.slice(3).join(" ")}},r.parseOLine=function(e){var t=r.matchPrefix(e,"o=")[0].substr(2).split(" ");return{username:t[0],sessionId:t[1],sessionVersion:parseInt(t[2],10),netType:t[3],addressType:t[4],address:t[5]}},r.isValidSDP=function(e){if("string"!=typeof e||0===e.length)return!1;for(var t=r.splitLines(e),n=0;n<t.length;n++)if(t[n].length<2||"="!==t[n].charAt(1))return!1;return!0},"object"===(void 0===t?"undefined":i(t))&&(t.exports=r)},{}]},{},[1])(1)},3412:function(e,t,n){var i;
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */e=n.nmd(e),function(){var r,o="Expected a function",s="__lodash_hash_undefined__",a="__lodash_placeholder__",c=16,l=32,d=64,u=128,h=256,f=1/0,_=9007199254740991,p=NaN,C=4294967295,g=[["ary",u],["bind",1],["bindKey",2],["curry",8],["curryRight",c],["flip",512],["partial",l],["partialRight",d],["rearg",h]],m="[object Arguments]",I="[object Array]",R="[object Boolean]",y="[object Date]",S="[object Error]",v="[object Function]",E="[object GeneratorFunction]",w="[object Map]",b="[object Number]",D="[object Object]",M="[object Promise]",T="[object RegExp]",P="[object Set]",x="[object String]",A="[object Symbol]",O="[object WeakMap]",V="[object ArrayBuffer]",k="[object DataView]",N="[object Float32Array]",L="[object Float64Array]",U="[object Int8Array]",B="[object Int16Array]",F="[object Int32Array]",j="[object Uint8Array]",$="[object Uint8ClampedArray]",H="[object Uint16Array]",q="[object Uint32Array]",W=/\b__p \+= '';/g,K=/\b(__p \+=) '' \+/g,z=/(__e\(.*?\)|\b__t\)) \+\n'';/g,G=/&(?:amp|lt|gt|quot|#39);/g,J=/[&<>"']/g,Q=RegExp(G.source),X=RegExp(J.source),Y=/<%-([\s\S]+?)%>/g,Z=/<%([\s\S]+?)%>/g,ee=/<%=([\s\S]+?)%>/g,te=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ne=/^\w*$/,ie=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,re=/[\\^$.*+?()[\]{}|]/g,oe=RegExp(re.source),se=/^\s+/,ae=/\s/,ce=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,le=/\{\n\/\* \[wrapped with (.+)\] \*/,de=/,? & /,ue=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,he=/[()=,{}\[\]\/\s]/,fe=/\\(\\)?/g,_e=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,pe=/\w*$/,Ce=/^[-+]0x[0-9a-f]+$/i,ge=/^0b[01]+$/i,me=/^\[object .+?Constructor\]$/,Ie=/^0o[0-7]+$/i,Re=/^(?:0|[1-9]\d*)$/,ye=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Se=/($^)/,ve=/['\n\r\u2028\u2029\\]/g,Ee="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",we="\\u2700-\\u27bf",be="a-z\\xdf-\\xf6\\xf8-\\xff",De="A-Z\\xc0-\\xd6\\xd8-\\xde",Me="\\ufe0e\\ufe0f",Te="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Pe="['’]",xe="[\\ud800-\\udfff]",Ae="["+Te+"]",Oe="["+Ee+"]",Ve="\\d+",ke="[\\u2700-\\u27bf]",Ne="["+be+"]",Le="[^\\ud800-\\udfff"+Te+Ve+we+be+De+"]",Ue="\\ud83c[\\udffb-\\udfff]",Be="[^\\ud800-\\udfff]",Fe="(?:\\ud83c[\\udde6-\\uddff]){2}",je="[\\ud800-\\udbff][\\udc00-\\udfff]",$e="["+De+"]",He="(?:"+Ne+"|"+Le+")",qe="(?:"+$e+"|"+Le+")",We="(?:['’](?:d|ll|m|re|s|t|ve))?",Ke="(?:['’](?:D|LL|M|RE|S|T|VE))?",ze="(?:"+Oe+"|"+Ue+")"+"?",Ge="[\\ufe0e\\ufe0f]?",Je=Ge+ze+("(?:\\u200d(?:"+[Be,Fe,je].join("|")+")"+Ge+ze+")*"),Qe="(?:"+[ke,Fe,je].join("|")+")"+Je,Xe="(?:"+[Be+Oe+"?",Oe,Fe,je,xe].join("|")+")",Ye=RegExp(Pe,"g"),Ze=RegExp(Oe,"g"),et=RegExp(Ue+"(?="+Ue+")|"+Xe+Je,"g"),tt=RegExp([$e+"?"+Ne+"+"+We+"(?="+[Ae,$e,"$"].join("|")+")",qe+"+"+Ke+"(?="+[Ae,$e+He,"$"].join("|")+")",$e+"?"+He+"+"+We,$e+"+"+Ke,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ve,Qe].join("|"),"g"),nt=RegExp("[\\u200d\\ud800-\\udfff"+Ee+Me+"]"),it=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,rt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ot=-1,st={};st[N]=st[L]=st[U]=st[B]=st[F]=st[j]=st[$]=st[H]=st[q]=!0,st[m]=st[I]=st[V]=st[R]=st[k]=st[y]=st[S]=st[v]=st[w]=st[b]=st[D]=st[T]=st[P]=st[x]=st[O]=!1;var at={};at[m]=at[I]=at[V]=at[k]=at[R]=at[y]=at[N]=at[L]=at[U]=at[B]=at[F]=at[w]=at[b]=at[D]=at[T]=at[P]=at[x]=at[A]=at[j]=at[$]=at[H]=at[q]=!0,at[S]=at[v]=at[O]=!1;var ct={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},lt=parseFloat,dt=parseInt,ut="object"==typeof global&&global&&global.Object===Object&&global,ht="object"==typeof self&&self&&self.Object===Object&&self,ft=ut||ht||Function("return this")(),_t=t&&!t.nodeType&&t,pt=_t&&e&&!e.nodeType&&e,Ct=pt&&pt.exports===_t,gt=Ct&&ut.process,mt=function(){try{var e=pt&&pt.require&&pt.require("util").types;return e||gt&&gt.binding&&gt.binding("util")}catch(e){}}(),It=mt&&mt.isArrayBuffer,Rt=mt&&mt.isDate,yt=mt&&mt.isMap,St=mt&&mt.isRegExp,vt=mt&&mt.isSet,Et=mt&&mt.isTypedArray;function wt(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function bt(e,t,n,i){for(var r=-1,o=null==e?0:e.length;++r<o;){var s=e[r];t(i,s,n(s),e)}return i}function Dt(e,t){for(var n=-1,i=null==e?0:e.length;++n<i&&!1!==t(e[n],n,e););return e}function Mt(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function Tt(e,t){for(var n=-1,i=null==e?0:e.length;++n<i;)if(!t(e[n],n,e))return!1;return!0}function Pt(e,t){for(var n=-1,i=null==e?0:e.length,r=0,o=[];++n<i;){var s=e[n];t(s,n,e)&&(o[r++]=s)}return o}function xt(e,t){return!!(null==e?0:e.length)&&jt(e,t,0)>-1}function At(e,t,n){for(var i=-1,r=null==e?0:e.length;++i<r;)if(n(t,e[i]))return!0;return!1}function Ot(e,t){for(var n=-1,i=null==e?0:e.length,r=Array(i);++n<i;)r[n]=t(e[n],n,e);return r}function Vt(e,t){for(var n=-1,i=t.length,r=e.length;++n<i;)e[r+n]=t[n];return e}function kt(e,t,n,i){var r=-1,o=null==e?0:e.length;for(i&&o&&(n=e[++r]);++r<o;)n=t(n,e[r],r,e);return n}function Nt(e,t,n,i){var r=null==e?0:e.length;for(i&&r&&(n=e[--r]);r--;)n=t(n,e[r],r,e);return n}function Lt(e,t){for(var n=-1,i=null==e?0:e.length;++n<i;)if(t(e[n],n,e))return!0;return!1}var Ut=Wt("length");function Bt(e,t,n){var i;return n(e,(function(e,n,r){if(t(e,n,r))return i=n,!1})),i}function Ft(e,t,n,i){for(var r=e.length,o=n+(i?1:-1);i?o--:++o<r;)if(t(e[o],o,e))return o;return-1}function jt(e,t,n){return t==t?function(e,t,n){var i=n-1,r=e.length;for(;++i<r;)if(e[i]===t)return i;return-1}(e,t,n):Ft(e,Ht,n)}function $t(e,t,n,i){for(var r=n-1,o=e.length;++r<o;)if(i(e[r],t))return r;return-1}function Ht(e){return e!=e}function qt(e,t){var n=null==e?0:e.length;return n?Gt(e,t)/n:p}function Wt(e){return function(t){return null==t?r:t[e]}}function Kt(e){return function(t){return null==e?r:e[t]}}function zt(e,t,n,i,r){return r(e,(function(e,r,o){n=i?(i=!1,e):t(n,e,r,o)})),n}function Gt(e,t){for(var n,i=-1,o=e.length;++i<o;){var s=t(e[i]);s!==r&&(n=n===r?s:n+s)}return n}function Jt(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}function Qt(e){return e?e.slice(0,pn(e)+1).replace(se,""):e}function Xt(e){return function(t){return e(t)}}function Yt(e,t){return Ot(t,(function(t){return e[t]}))}function Zt(e,t){return e.has(t)}function en(e,t){for(var n=-1,i=e.length;++n<i&&jt(t,e[n],0)>-1;);return n}function tn(e,t){for(var n=e.length;n--&&jt(t,e[n],0)>-1;);return n}function nn(e,t){for(var n=e.length,i=0;n--;)e[n]===t&&++i;return i}var rn=Kt({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"}),on=Kt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function sn(e){return"\\"+ct[e]}function an(e){return nt.test(e)}function cn(e){var t=-1,n=Array(e.size);return e.forEach((function(e,i){n[++t]=[i,e]})),n}function ln(e,t){return function(n){return e(t(n))}}function dn(e,t){for(var n=-1,i=e.length,r=0,o=[];++n<i;){var s=e[n];s!==t&&s!==a||(e[n]=a,o[r++]=n)}return o}function un(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function hn(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}function fn(e){return an(e)?function(e){var t=et.lastIndex=0;for(;et.test(e);)++t;return t}(e):Ut(e)}function _n(e){return an(e)?function(e){return e.match(et)||[]}(e):function(e){return e.split("")}(e)}function pn(e){for(var t=e.length;t--&&ae.test(e.charAt(t)););return t}var Cn=Kt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var gn=function e(t){var n,i=(t=null==t?ft:gn.defaults(ft.Object(),t,gn.pick(ft,rt))).Array,ae=t.Date,Ee=t.Error,we=t.Function,be=t.Math,De=t.Object,Me=t.RegExp,Te=t.String,Pe=t.TypeError,xe=i.prototype,Ae=we.prototype,Oe=De.prototype,Ve=t["__core-js_shared__"],ke=Ae.toString,Ne=Oe.hasOwnProperty,Le=0,Ue=(n=/[^.]+$/.exec(Ve&&Ve.keys&&Ve.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",Be=Oe.toString,Fe=ke.call(De),je=ft._,$e=Me("^"+ke.call(Ne).replace(re,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),He=Ct?t.Buffer:r,qe=t.Symbol,We=t.Uint8Array,Ke=He?He.allocUnsafe:r,ze=ln(De.getPrototypeOf,De),Ge=De.create,Je=Oe.propertyIsEnumerable,Qe=xe.splice,Xe=qe?qe.isConcatSpreadable:r,et=qe?qe.iterator:r,nt=qe?qe.toStringTag:r,ct=function(){try{var e=_o(De,"defineProperty");return e({},"",{}),e}catch(e){}}(),ut=t.clearTimeout!==ft.clearTimeout&&t.clearTimeout,ht=ae&&ae.now!==ft.Date.now&&ae.now,_t=t.setTimeout!==ft.setTimeout&&t.setTimeout,pt=be.ceil,gt=be.floor,mt=De.getOwnPropertySymbols,Ut=He?He.isBuffer:r,Kt=t.isFinite,mn=xe.join,In=ln(De.keys,De),Rn=be.max,yn=be.min,Sn=ae.now,vn=t.parseInt,En=be.random,wn=xe.reverse,bn=_o(t,"DataView"),Dn=_o(t,"Map"),Mn=_o(t,"Promise"),Tn=_o(t,"Set"),Pn=_o(t,"WeakMap"),xn=_o(De,"create"),An=Pn&&new Pn,On={},Vn=jo(bn),kn=jo(Dn),Nn=jo(Mn),Ln=jo(Tn),Un=jo(Pn),Bn=qe?qe.prototype:r,Fn=Bn?Bn.valueOf:r,jn=Bn?Bn.toString:r;function $n(e){if(ra(e)&&!zs(e)&&!(e instanceof Kn)){if(e instanceof Wn)return e;if(Ne.call(e,"__wrapped__"))return $o(e)}return new Wn(e)}var Hn=function(){function e(){}return function(t){if(!ia(t))return{};if(Ge)return Ge(t);e.prototype=t;var n=new e;return e.prototype=r,n}}();function qn(){}function Wn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=r}function Kn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=C,this.__views__=[]}function zn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function Gn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function Jn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function Qn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Jn;++t<n;)this.add(e[t])}function Xn(e){var t=this.__data__=new Gn(e);this.size=t.size}function Yn(e,t){var n=zs(e),i=!n&&Ks(e),r=!n&&!i&&Xs(e),o=!n&&!i&&!r&&ha(e),s=n||i||r||o,a=s?Jt(e.length,Te):[],c=a.length;for(var l in e)!t&&!Ne.call(e,l)||s&&("length"==l||r&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||yo(l,c))||a.push(l);return a}function Zn(e){var t=e.length;return t?e[Qi(0,t-1)]:r}function ei(e,t){return Uo(xr(e),li(t,0,e.length))}function ti(e){return Uo(xr(e))}function ni(e,t,n){(n!==r&&!Hs(e[t],n)||n===r&&!(t in e))&&ai(e,t,n)}function ii(e,t,n){var i=e[t];Ne.call(e,t)&&Hs(i,n)&&(n!==r||t in e)||ai(e,t,n)}function ri(e,t){for(var n=e.length;n--;)if(Hs(e[n][0],t))return n;return-1}function oi(e,t,n,i){return _i(e,(function(e,r,o){t(i,e,n(e),o)})),i}function si(e,t){return e&&Ar(t,Va(t),e)}function ai(e,t,n){"__proto__"==t&&ct?ct(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function ci(e,t){for(var n=-1,o=t.length,s=i(o),a=null==e;++n<o;)s[n]=a?r:Ta(e,t[n]);return s}function li(e,t,n){return e==e&&(n!==r&&(e=e<=n?e:n),t!==r&&(e=e>=t?e:t)),e}function di(e,t,n,i,o,s){var a,c=1&t,l=2&t,d=4&t;if(n&&(a=o?n(e,i,o,s):n(e)),a!==r)return a;if(!ia(e))return e;var u=zs(e);if(u){if(a=function(e){var t=e.length,n=new e.constructor(t);t&&"string"==typeof e[0]&&Ne.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(e),!c)return xr(e,a)}else{var h=go(e),f=h==v||h==E;if(Xs(e))return wr(e,c);if(h==D||h==m||f&&!o){if(a=l||f?{}:Io(e),!c)return l?function(e,t){return Ar(e,Co(e),t)}(e,function(e,t){return e&&Ar(t,ka(t),e)}(a,e)):function(e,t){return Ar(e,po(e),t)}(e,si(a,e))}else{if(!at[h])return o?e:{};a=function(e,t,n){var i=e.constructor;switch(t){case V:return br(e);case R:case y:return new i(+e);case k:return function(e,t){var n=t?br(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,n);case N:case L:case U:case B:case F:case j:case $:case H:case q:return Dr(e,n);case w:return new i;case b:case x:return new i(e);case T:return function(e){var t=new e.constructor(e.source,pe.exec(e));return t.lastIndex=e.lastIndex,t}(e);case P:return new i;case A:return r=e,Fn?De(Fn.call(r)):{}}var r}(e,h,c)}}s||(s=new Xn);var _=s.get(e);if(_)return _;s.set(e,a),la(e)?e.forEach((function(i){a.add(di(i,t,n,i,e,s))})):oa(e)&&e.forEach((function(i,r){a.set(r,di(i,t,n,r,e,s))}));var p=u?r:(d?l?so:oo:l?ka:Va)(e);return Dt(p||e,(function(i,r){p&&(i=e[r=i]),ii(a,r,di(i,t,n,r,e,s))})),a}function ui(e,t,n){var i=n.length;if(null==e)return!i;for(e=De(e);i--;){var o=n[i],s=t[o],a=e[o];if(a===r&&!(o in e)||!s(a))return!1}return!0}function hi(e,t,n){if("function"!=typeof e)throw new Pe(o);return Vo((function(){e.apply(r,n)}),t)}function fi(e,t,n,i){var r=-1,o=xt,s=!0,a=e.length,c=[],l=t.length;if(!a)return c;n&&(t=Ot(t,Xt(n))),i?(o=At,s=!1):t.length>=200&&(o=Zt,s=!1,t=new Qn(t));e:for(;++r<a;){var d=e[r],u=null==n?d:n(d);if(d=i||0!==d?d:0,s&&u==u){for(var h=l;h--;)if(t[h]===u)continue e;c.push(d)}else o(t,u,i)||c.push(d)}return c}$n.templateSettings={escape:Y,evaluate:Z,interpolate:ee,variable:"",imports:{_:$n}},$n.prototype=qn.prototype,$n.prototype.constructor=$n,Wn.prototype=Hn(qn.prototype),Wn.prototype.constructor=Wn,Kn.prototype=Hn(qn.prototype),Kn.prototype.constructor=Kn,zn.prototype.clear=function(){this.__data__=xn?xn(null):{},this.size=0},zn.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},zn.prototype.get=function(e){var t=this.__data__;if(xn){var n=t[e];return n===s?r:n}return Ne.call(t,e)?t[e]:r},zn.prototype.has=function(e){var t=this.__data__;return xn?t[e]!==r:Ne.call(t,e)},zn.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=xn&&t===r?s:t,this},Gn.prototype.clear=function(){this.__data__=[],this.size=0},Gn.prototype.delete=function(e){var t=this.__data__,n=ri(t,e);return!(n<0)&&(n==t.length-1?t.pop():Qe.call(t,n,1),--this.size,!0)},Gn.prototype.get=function(e){var t=this.__data__,n=ri(t,e);return n<0?r:t[n][1]},Gn.prototype.has=function(e){return ri(this.__data__,e)>-1},Gn.prototype.set=function(e,t){var n=this.__data__,i=ri(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this},Jn.prototype.clear=function(){this.size=0,this.__data__={hash:new zn,map:new(Dn||Gn),string:new zn}},Jn.prototype.delete=function(e){var t=ho(this,e).delete(e);return this.size-=t?1:0,t},Jn.prototype.get=function(e){return ho(this,e).get(e)},Jn.prototype.has=function(e){return ho(this,e).has(e)},Jn.prototype.set=function(e,t){var n=ho(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this},Qn.prototype.add=Qn.prototype.push=function(e){return this.__data__.set(e,s),this},Qn.prototype.has=function(e){return this.__data__.has(e)},Xn.prototype.clear=function(){this.__data__=new Gn,this.size=0},Xn.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},Xn.prototype.get=function(e){return this.__data__.get(e)},Xn.prototype.has=function(e){return this.__data__.has(e)},Xn.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Gn){var i=n.__data__;if(!Dn||i.length<199)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new Jn(i)}return n.set(e,t),this.size=n.size,this};var _i=kr(Si),pi=kr(vi,!0);function Ci(e,t){var n=!0;return _i(e,(function(e,i,r){return n=!!t(e,i,r)})),n}function gi(e,t,n){for(var i=-1,o=e.length;++i<o;){var s=e[i],a=t(s);if(null!=a&&(c===r?a==a&&!ua(a):n(a,c)))var c=a,l=s}return l}function mi(e,t){var n=[];return _i(e,(function(e,i,r){t(e,i,r)&&n.push(e)})),n}function Ii(e,t,n,i,r){var o=-1,s=e.length;for(n||(n=Ro),r||(r=[]);++o<s;){var a=e[o];t>0&&n(a)?t>1?Ii(a,t-1,n,i,r):Vt(r,a):i||(r[r.length]=a)}return r}var Ri=Nr(),yi=Nr(!0);function Si(e,t){return e&&Ri(e,t,Va)}function vi(e,t){return e&&yi(e,t,Va)}function Ei(e,t){return Pt(t,(function(t){return ea(e[t])}))}function wi(e,t){for(var n=0,i=(t=yr(t,e)).length;null!=e&&n<i;)e=e[Fo(t[n++])];return n&&n==i?e:r}function bi(e,t,n){var i=t(e);return zs(e)?i:Vt(i,n(e))}function Di(e){return null==e?e===r?"[object Undefined]":"[object Null]":nt&&nt in De(e)?function(e){var t=Ne.call(e,nt),n=e[nt];try{e[nt]=r;var i=!0}catch(e){}var o=Be.call(e);i&&(t?e[nt]=n:delete e[nt]);return o}(e):function(e){return Be.call(e)}(e)}function Mi(e,t){return e>t}function Ti(e,t){return null!=e&&Ne.call(e,t)}function Pi(e,t){return null!=e&&t in De(e)}function xi(e,t,n){for(var o=n?At:xt,s=e[0].length,a=e.length,c=a,l=i(a),d=1/0,u=[];c--;){var h=e[c];c&&t&&(h=Ot(h,Xt(t))),d=yn(h.length,d),l[c]=!n&&(t||s>=120&&h.length>=120)?new Qn(c&&h):r}h=e[0];var f=-1,_=l[0];e:for(;++f<s&&u.length<d;){var p=h[f],C=t?t(p):p;if(p=n||0!==p?p:0,!(_?Zt(_,C):o(u,C,n))){for(c=a;--c;){var g=l[c];if(!(g?Zt(g,C):o(e[c],C,n)))continue e}_&&_.push(C),u.push(p)}}return u}function Ai(e,t,n){var i=null==(e=Po(e,t=yr(t,e)))?e:e[Fo(Zo(t))];return null==i?r:wt(i,e,n)}function Oi(e){return ra(e)&&Di(e)==m}function Vi(e,t,n,i,o){return e===t||(null==e||null==t||!ra(e)&&!ra(t)?e!=e&&t!=t:function(e,t,n,i,o,s){var a=zs(e),c=zs(t),l=a?I:go(e),d=c?I:go(t),u=(l=l==m?D:l)==D,h=(d=d==m?D:d)==D,f=l==d;if(f&&Xs(e)){if(!Xs(t))return!1;a=!0,u=!1}if(f&&!u)return s||(s=new Xn),a||ha(e)?io(e,t,n,i,o,s):function(e,t,n,i,r,o,s){switch(n){case k:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case V:return!(e.byteLength!=t.byteLength||!o(new We(e),new We(t)));case R:case y:case b:return Hs(+e,+t);case S:return e.name==t.name&&e.message==t.message;case T:case x:return e==t+"";case w:var a=cn;case P:var c=1&i;if(a||(a=un),e.size!=t.size&&!c)return!1;var l=s.get(e);if(l)return l==t;i|=2,s.set(e,t);var d=io(a(e),a(t),i,r,o,s);return s.delete(e),d;case A:if(Fn)return Fn.call(e)==Fn.call(t)}return!1}(e,t,l,n,i,o,s);if(!(1&n)){var _=u&&Ne.call(e,"__wrapped__"),p=h&&Ne.call(t,"__wrapped__");if(_||p){var C=_?e.value():e,g=p?t.value():t;return s||(s=new Xn),o(C,g,n,i,s)}}if(!f)return!1;return s||(s=new Xn),function(e,t,n,i,o,s){var a=1&n,c=oo(e),l=c.length,d=oo(t).length;if(l!=d&&!a)return!1;var u=l;for(;u--;){var h=c[u];if(!(a?h in t:Ne.call(t,h)))return!1}var f=s.get(e),_=s.get(t);if(f&&_)return f==t&&_==e;var p=!0;s.set(e,t),s.set(t,e);var C=a;for(;++u<l;){var g=e[h=c[u]],m=t[h];if(i)var I=a?i(m,g,h,t,e,s):i(g,m,h,e,t,s);if(!(I===r?g===m||o(g,m,n,i,s):I)){p=!1;break}C||(C="constructor"==h)}if(p&&!C){var R=e.constructor,y=t.constructor;R==y||!("constructor"in e)||!("constructor"in t)||"function"==typeof R&&R instanceof R&&"function"==typeof y&&y instanceof y||(p=!1)}return s.delete(e),s.delete(t),p}(e,t,n,i,o,s)}(e,t,n,i,Vi,o))}function ki(e,t,n,i){var o=n.length,s=o,a=!i;if(null==e)return!s;for(e=De(e);o--;){var c=n[o];if(a&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++o<s;){var l=(c=n[o])[0],d=e[l],u=c[1];if(a&&c[2]){if(d===r&&!(l in e))return!1}else{var h=new Xn;if(i)var f=i(d,u,l,e,t,h);if(!(f===r?Vi(u,d,3,i,h):f))return!1}}return!0}function Ni(e){return!(!ia(e)||(t=e,Ue&&Ue in t))&&(ea(e)?$e:me).test(jo(e));var t}function Li(e){return"function"==typeof e?e:null==e?sc:"object"==typeof e?zs(e)?Hi(e[0],e[1]):$i(e):pc(e)}function Ui(e){if(!bo(e))return In(e);var t=[];for(var n in De(e))Ne.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Bi(e){if(!ia(e))return function(e){var t=[];if(null!=e)for(var n in De(e))t.push(n);return t}(e);var t=bo(e),n=[];for(var i in e)("constructor"!=i||!t&&Ne.call(e,i))&&n.push(i);return n}function Fi(e,t){return e<t}function ji(e,t){var n=-1,r=Js(e)?i(e.length):[];return _i(e,(function(e,i,o){r[++n]=t(e,i,o)})),r}function $i(e){var t=fo(e);return 1==t.length&&t[0][2]?Mo(t[0][0],t[0][1]):function(n){return n===e||ki(n,e,t)}}function Hi(e,t){return vo(e)&&Do(t)?Mo(Fo(e),t):function(n){var i=Ta(n,e);return i===r&&i===t?Pa(n,e):Vi(t,i,3)}}function qi(e,t,n,i,o){e!==t&&Ri(t,(function(s,a){if(o||(o=new Xn),ia(s))!function(e,t,n,i,o,s,a){var c=Ao(e,n),l=Ao(t,n),d=a.get(l);if(d)return void ni(e,n,d);var u=s?s(c,l,n+"",e,t,a):r,h=u===r;if(h){var f=zs(l),_=!f&&Xs(l),p=!f&&!_&&ha(l);u=l,f||_||p?zs(c)?u=c:Qs(c)?u=xr(c):_?(h=!1,u=wr(l,!0)):p?(h=!1,u=Dr(l,!0)):u=[]:aa(l)||Ks(l)?(u=c,Ks(c)?u=Ra(c):ia(c)&&!ea(c)||(u=Io(l))):h=!1}h&&(a.set(l,u),o(u,l,i,s,a),a.delete(l));ni(e,n,u)}(e,t,a,n,qi,i,o);else{var c=i?i(Ao(e,a),s,a+"",e,t,o):r;c===r&&(c=s),ni(e,a,c)}}),ka)}function Wi(e,t){var n=e.length;if(n)return yo(t+=t<0?n:0,n)?e[t]:r}function Ki(e,t,n){t=t.length?Ot(t,(function(e){return zs(e)?function(t){return wi(t,1===e.length?e[0]:e)}:e})):[sc];var i=-1;t=Ot(t,Xt(uo()));var r=ji(e,(function(e,n,r){var o=Ot(t,(function(t){return t(e)}));return{criteria:o,index:++i,value:e}}));return function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}(r,(function(e,t){return function(e,t,n){var i=-1,r=e.criteria,o=t.criteria,s=r.length,a=n.length;for(;++i<s;){var c=Mr(r[i],o[i]);if(c)return i>=a?c:c*("desc"==n[i]?-1:1)}return e.index-t.index}(e,t,n)}))}function zi(e,t,n){for(var i=-1,r=t.length,o={};++i<r;){var s=t[i],a=wi(e,s);n(a,s)&&tr(o,yr(s,e),a)}return o}function Gi(e,t,n,i){var r=i?$t:jt,o=-1,s=t.length,a=e;for(e===t&&(t=xr(t)),n&&(a=Ot(e,Xt(n)));++o<s;)for(var c=0,l=t[o],d=n?n(l):l;(c=r(a,d,c,i))>-1;)a!==e&&Qe.call(a,c,1),Qe.call(e,c,1);return e}function Ji(e,t){for(var n=e?t.length:0,i=n-1;n--;){var r=t[n];if(n==i||r!==o){var o=r;yo(r)?Qe.call(e,r,1):fr(e,r)}}return e}function Qi(e,t){return e+gt(En()*(t-e+1))}function Xi(e,t){var n="";if(!e||t<1||t>_)return n;do{t%2&&(n+=e),(t=gt(t/2))&&(e+=e)}while(t);return n}function Yi(e,t){return ko(To(e,t,sc),e+"")}function Zi(e){return Zn(Ha(e))}function er(e,t){var n=Ha(e);return Uo(n,li(t,0,n.length))}function tr(e,t,n,i){if(!ia(e))return e;for(var o=-1,s=(t=yr(t,e)).length,a=s-1,c=e;null!=c&&++o<s;){var l=Fo(t[o]),d=n;if("__proto__"===l||"constructor"===l||"prototype"===l)return e;if(o!=a){var u=c[l];(d=i?i(u,l,c):r)===r&&(d=ia(u)?u:yo(t[o+1])?[]:{})}ii(c,l,d),c=c[l]}return e}var nr=An?function(e,t){return An.set(e,t),e}:sc,ir=ct?function(e,t){return ct(e,"toString",{configurable:!0,enumerable:!1,value:ic(t),writable:!0})}:sc;function rr(e){return Uo(Ha(e))}function or(e,t,n){var r=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(n=n>o?o:n)<0&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0;for(var s=i(o);++r<o;)s[r]=e[r+t];return s}function sr(e,t){var n;return _i(e,(function(e,i,r){return!(n=t(e,i,r))})),!!n}function ar(e,t,n){var i=0,r=null==e?i:e.length;if("number"==typeof t&&t==t&&r<=2147483647){for(;i<r;){var o=i+r>>>1,s=e[o];null!==s&&!ua(s)&&(n?s<=t:s<t)?i=o+1:r=o}return r}return cr(e,t,sc,n)}function cr(e,t,n,i){var o=0,s=null==e?0:e.length;if(0===s)return 0;for(var a=(t=n(t))!=t,c=null===t,l=ua(t),d=t===r;o<s;){var u=gt((o+s)/2),h=n(e[u]),f=h!==r,_=null===h,p=h==h,C=ua(h);if(a)var g=i||p;else g=d?p&&(i||f):c?p&&f&&(i||!_):l?p&&f&&!_&&(i||!C):!_&&!C&&(i?h<=t:h<t);g?o=u+1:s=u}return yn(s,4294967294)}function lr(e,t){for(var n=-1,i=e.length,r=0,o=[];++n<i;){var s=e[n],a=t?t(s):s;if(!n||!Hs(a,c)){var c=a;o[r++]=0===s?0:s}}return o}function dr(e){return"number"==typeof e?e:ua(e)?p:+e}function ur(e){if("string"==typeof e)return e;if(zs(e))return Ot(e,ur)+"";if(ua(e))return jn?jn.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function hr(e,t,n){var i=-1,r=xt,o=e.length,s=!0,a=[],c=a;if(n)s=!1,r=At;else if(o>=200){var l=t?null:Xr(e);if(l)return un(l);s=!1,r=Zt,c=new Qn}else c=t?[]:a;e:for(;++i<o;){var d=e[i],u=t?t(d):d;if(d=n||0!==d?d:0,s&&u==u){for(var h=c.length;h--;)if(c[h]===u)continue e;t&&c.push(u),a.push(d)}else r(c,u,n)||(c!==a&&c.push(u),a.push(d))}return a}function fr(e,t){return null==(e=Po(e,t=yr(t,e)))||delete e[Fo(Zo(t))]}function _r(e,t,n,i){return tr(e,t,n(wi(e,t)),i)}function pr(e,t,n,i){for(var r=e.length,o=i?r:-1;(i?o--:++o<r)&&t(e[o],o,e););return n?or(e,i?0:o,i?o+1:r):or(e,i?o+1:0,i?r:o)}function Cr(e,t){var n=e;return n instanceof Kn&&(n=n.value()),kt(t,(function(e,t){return t.func.apply(t.thisArg,Vt([e],t.args))}),n)}function gr(e,t,n){var r=e.length;if(r<2)return r?hr(e[0]):[];for(var o=-1,s=i(r);++o<r;)for(var a=e[o],c=-1;++c<r;)c!=o&&(s[o]=fi(s[o]||a,e[c],t,n));return hr(Ii(s,1),t,n)}function mr(e,t,n){for(var i=-1,o=e.length,s=t.length,a={};++i<o;){var c=i<s?t[i]:r;n(a,e[i],c)}return a}function Ir(e){return Qs(e)?e:[]}function Rr(e){return"function"==typeof e?e:sc}function yr(e,t){return zs(e)?e:vo(e,t)?[e]:Bo(ya(e))}var Sr=Yi;function vr(e,t,n){var i=e.length;return n=n===r?i:n,!t&&n>=i?e:or(e,t,n)}var Er=ut||function(e){return ft.clearTimeout(e)};function wr(e,t){if(t)return e.slice();var n=e.length,i=Ke?Ke(n):new e.constructor(n);return e.copy(i),i}function br(e){var t=new e.constructor(e.byteLength);return new We(t).set(new We(e)),t}function Dr(e,t){var n=t?br(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Mr(e,t){if(e!==t){var n=e!==r,i=null===e,o=e==e,s=ua(e),a=t!==r,c=null===t,l=t==t,d=ua(t);if(!c&&!d&&!s&&e>t||s&&a&&l&&!c&&!d||i&&a&&l||!n&&l||!o)return 1;if(!i&&!s&&!d&&e<t||d&&n&&o&&!i&&!s||c&&n&&o||!a&&o||!l)return-1}return 0}function Tr(e,t,n,r){for(var o=-1,s=e.length,a=n.length,c=-1,l=t.length,d=Rn(s-a,0),u=i(l+d),h=!r;++c<l;)u[c]=t[c];for(;++o<a;)(h||o<s)&&(u[n[o]]=e[o]);for(;d--;)u[c++]=e[o++];return u}function Pr(e,t,n,r){for(var o=-1,s=e.length,a=-1,c=n.length,l=-1,d=t.length,u=Rn(s-c,0),h=i(u+d),f=!r;++o<u;)h[o]=e[o];for(var _=o;++l<d;)h[_+l]=t[l];for(;++a<c;)(f||o<s)&&(h[_+n[a]]=e[o++]);return h}function xr(e,t){var n=-1,r=e.length;for(t||(t=i(r));++n<r;)t[n]=e[n];return t}function Ar(e,t,n,i){var o=!n;n||(n={});for(var s=-1,a=t.length;++s<a;){var c=t[s],l=i?i(n[c],e[c],c,n,e):r;l===r&&(l=e[c]),o?ai(n,c,l):ii(n,c,l)}return n}function Or(e,t){return function(n,i){var r=zs(n)?bt:oi,o=t?t():{};return r(n,e,uo(i,2),o)}}function Vr(e){return Yi((function(t,n){var i=-1,o=n.length,s=o>1?n[o-1]:r,a=o>2?n[2]:r;for(s=e.length>3&&"function"==typeof s?(o--,s):r,a&&So(n[0],n[1],a)&&(s=o<3?r:s,o=1),t=De(t);++i<o;){var c=n[i];c&&e(t,c,i,s)}return t}))}function kr(e,t){return function(n,i){if(null==n)return n;if(!Js(n))return e(n,i);for(var r=n.length,o=t?r:-1,s=De(n);(t?o--:++o<r)&&!1!==i(s[o],o,s););return n}}function Nr(e){return function(t,n,i){for(var r=-1,o=De(t),s=i(t),a=s.length;a--;){var c=s[e?a:++r];if(!1===n(o[c],c,o))break}return t}}function Lr(e){return function(t){var n=an(t=ya(t))?_n(t):r,i=n?n[0]:t.charAt(0),o=n?vr(n,1).join(""):t.slice(1);return i[e]()+o}}function Ur(e){return function(t){return kt(ec(Ka(t).replace(Ye,"")),e,"")}}function Br(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Hn(e.prototype),i=e.apply(n,t);return ia(i)?i:n}}function Fr(e){return function(t,n,i){var o=De(t);if(!Js(t)){var s=uo(n,3);t=Va(t),n=function(e){return s(o[e],e,o)}}var a=e(t,n,i);return a>-1?o[s?t[a]:a]:r}}function jr(e){return ro((function(t){var n=t.length,i=n,s=Wn.prototype.thru;for(e&&t.reverse();i--;){var a=t[i];if("function"!=typeof a)throw new Pe(o);if(s&&!c&&"wrapper"==co(a))var c=new Wn([],!0)}for(i=c?i:n;++i<n;){var l=co(a=t[i]),d="wrapper"==l?ao(a):r;c=d&&Eo(d[0])&&424==d[1]&&!d[4].length&&1==d[9]?c[co(d[0])].apply(c,d[3]):1==a.length&&Eo(a)?c[l]():c.thru(a)}return function(){var e=arguments,i=e[0];if(c&&1==e.length&&zs(i))return c.plant(i).value();for(var r=0,o=n?t[r].apply(this,e):i;++r<n;)o=t[r].call(this,o);return o}}))}function $r(e,t,n,o,s,a,c,l,d,h){var f=t&u,_=1&t,p=2&t,C=24&t,g=512&t,m=p?r:Br(e);return function r(){for(var u=arguments.length,I=i(u),R=u;R--;)I[R]=arguments[R];if(C)var y=lo(r),S=nn(I,y);if(o&&(I=Tr(I,o,s,C)),a&&(I=Pr(I,a,c,C)),u-=S,C&&u<h){var v=dn(I,y);return Jr(e,t,$r,r.placeholder,n,I,v,l,d,h-u)}var E=_?n:this,w=p?E[e]:e;return u=I.length,l?I=xo(I,l):g&&u>1&&I.reverse(),f&&d<u&&(I.length=d),this&&this!==ft&&this instanceof r&&(w=m||Br(w)),w.apply(E,I)}}function Hr(e,t){return function(n,i){return function(e,t,n,i){return Si(e,(function(e,r,o){t(i,n(e),r,o)})),i}(n,e,t(i),{})}}function qr(e,t){return function(n,i){var o;if(n===r&&i===r)return t;if(n!==r&&(o=n),i!==r){if(o===r)return i;"string"==typeof n||"string"==typeof i?(n=ur(n),i=ur(i)):(n=dr(n),i=dr(i)),o=e(n,i)}return o}}function Wr(e){return ro((function(t){return t=Ot(t,Xt(uo())),Yi((function(n){var i=this;return e(t,(function(e){return wt(e,i,n)}))}))}))}function Kr(e,t){var n=(t=t===r?" ":ur(t)).length;if(n<2)return n?Xi(t,e):t;var i=Xi(t,pt(e/fn(t)));return an(t)?vr(_n(i),0,e).join(""):i.slice(0,e)}function zr(e){return function(t,n,o){return o&&"number"!=typeof o&&So(t,n,o)&&(n=o=r),t=Ca(t),n===r?(n=t,t=0):n=Ca(n),function(e,t,n,r){for(var o=-1,s=Rn(pt((t-e)/(n||1)),0),a=i(s);s--;)a[r?s:++o]=e,e+=n;return a}(t,n,o=o===r?t<n?1:-1:Ca(o),e)}}function Gr(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=Ia(t),n=Ia(n)),e(t,n)}}function Jr(e,t,n,i,o,s,a,c,u,h){var f=8&t;t|=f?l:d,4&(t&=~(f?d:l))||(t&=-4);var _=[e,t,o,f?s:r,f?a:r,f?r:s,f?r:a,c,u,h],p=n.apply(r,_);return Eo(e)&&Oo(p,_),p.placeholder=i,No(p,e,t)}function Qr(e){var t=be[e];return function(e,n){if(e=Ia(e),(n=null==n?0:yn(ga(n),292))&&Kt(e)){var i=(ya(e)+"e").split("e");return+((i=(ya(t(i[0]+"e"+(+i[1]+n)))+"e").split("e"))[0]+"e"+(+i[1]-n))}return t(e)}}var Xr=Tn&&1/un(new Tn([,-0]))[1]==f?function(e){return new Tn(e)}:uc;function Yr(e){return function(t){var n=go(t);return n==w?cn(t):n==P?hn(t):function(e,t){return Ot(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Zr(e,t,n,s,f,_,p,C){var g=2&t;if(!g&&"function"!=typeof e)throw new Pe(o);var m=s?s.length:0;if(m||(t&=-97,s=f=r),p=p===r?p:Rn(ga(p),0),C=C===r?C:ga(C),m-=f?f.length:0,t&d){var I=s,R=f;s=f=r}var y=g?r:ao(e),S=[e,t,n,s,f,I,R,_,p,C];if(y&&function(e,t){var n=e[1],i=t[1],r=n|i,o=r<131,s=i==u&&8==n||i==u&&n==h&&e[7].length<=t[8]||384==i&&t[7].length<=t[8]&&8==n;if(!o&&!s)return e;1&i&&(e[2]=t[2],r|=1&n?0:4);var c=t[3];if(c){var l=e[3];e[3]=l?Tr(l,c,t[4]):c,e[4]=l?dn(e[3],a):t[4]}(c=t[5])&&(l=e[5],e[5]=l?Pr(l,c,t[6]):c,e[6]=l?dn(e[5],a):t[6]);(c=t[7])&&(e[7]=c);i&u&&(e[8]=null==e[8]?t[8]:yn(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=r}(S,y),e=S[0],t=S[1],n=S[2],s=S[3],f=S[4],!(C=S[9]=S[9]===r?g?0:e.length:Rn(S[9]-m,0))&&24&t&&(t&=-25),t&&1!=t)v=8==t||t==c?function(e,t,n){var o=Br(e);return function s(){for(var a=arguments.length,c=i(a),l=a,d=lo(s);l--;)c[l]=arguments[l];var u=a<3&&c[0]!==d&&c[a-1]!==d?[]:dn(c,d);return(a-=u.length)<n?Jr(e,t,$r,s.placeholder,r,c,u,r,r,n-a):wt(this&&this!==ft&&this instanceof s?o:e,this,c)}}(e,t,C):t!=l&&33!=t||f.length?$r.apply(r,S):function(e,t,n,r){var o=1&t,s=Br(e);return function t(){for(var a=-1,c=arguments.length,l=-1,d=r.length,u=i(d+c),h=this&&this!==ft&&this instanceof t?s:e;++l<d;)u[l]=r[l];for(;c--;)u[l++]=arguments[++a];return wt(h,o?n:this,u)}}(e,t,n,s);else var v=function(e,t,n){var i=1&t,r=Br(e);return function t(){return(this&&this!==ft&&this instanceof t?r:e).apply(i?n:this,arguments)}}(e,t,n);return No((y?nr:Oo)(v,S),e,t)}function eo(e,t,n,i){return e===r||Hs(e,Oe[n])&&!Ne.call(i,n)?t:e}function to(e,t,n,i,o,s){return ia(e)&&ia(t)&&(s.set(t,e),qi(e,t,r,to,s),s.delete(t)),e}function no(e){return aa(e)?r:e}function io(e,t,n,i,o,s){var a=1&n,c=e.length,l=t.length;if(c!=l&&!(a&&l>c))return!1;var d=s.get(e),u=s.get(t);if(d&&u)return d==t&&u==e;var h=-1,f=!0,_=2&n?new Qn:r;for(s.set(e,t),s.set(t,e);++h<c;){var p=e[h],C=t[h];if(i)var g=a?i(C,p,h,t,e,s):i(p,C,h,e,t,s);if(g!==r){if(g)continue;f=!1;break}if(_){if(!Lt(t,(function(e,t){if(!Zt(_,t)&&(p===e||o(p,e,n,i,s)))return _.push(t)}))){f=!1;break}}else if(p!==C&&!o(p,C,n,i,s)){f=!1;break}}return s.delete(e),s.delete(t),f}function ro(e){return ko(To(e,r,Go),e+"")}function oo(e){return bi(e,Va,po)}function so(e){return bi(e,ka,Co)}var ao=An?function(e){return An.get(e)}:uc;function co(e){for(var t=e.name+"",n=On[t],i=Ne.call(On,t)?n.length:0;i--;){var r=n[i],o=r.func;if(null==o||o==e)return r.name}return t}function lo(e){return(Ne.call($n,"placeholder")?$n:e).placeholder}function uo(){var e=$n.iteratee||ac;return e=e===ac?Li:e,arguments.length?e(arguments[0],arguments[1]):e}function ho(e,t){var n,i,r=e.__data__;return("string"==(i=typeof(n=t))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?r["string"==typeof t?"string":"hash"]:r.map}function fo(e){for(var t=Va(e),n=t.length;n--;){var i=t[n],r=e[i];t[n]=[i,r,Do(r)]}return t}function _o(e,t){var n=function(e,t){return null==e?r:e[t]}(e,t);return Ni(n)?n:r}var po=mt?function(e){return null==e?[]:(e=De(e),Pt(mt(e),(function(t){return Je.call(e,t)})))}:mc,Co=mt?function(e){for(var t=[];e;)Vt(t,po(e)),e=ze(e);return t}:mc,go=Di;function mo(e,t,n){for(var i=-1,r=(t=yr(t,e)).length,o=!1;++i<r;){var s=Fo(t[i]);if(!(o=null!=e&&n(e,s)))break;e=e[s]}return o||++i!=r?o:!!(r=null==e?0:e.length)&&na(r)&&yo(s,r)&&(zs(e)||Ks(e))}function Io(e){return"function"!=typeof e.constructor||bo(e)?{}:Hn(ze(e))}function Ro(e){return zs(e)||Ks(e)||!!(Xe&&e&&e[Xe])}function yo(e,t){var n=typeof e;return!!(t=null==t?_:t)&&("number"==n||"symbol"!=n&&Re.test(e))&&e>-1&&e%1==0&&e<t}function So(e,t,n){if(!ia(n))return!1;var i=typeof t;return!!("number"==i?Js(n)&&yo(t,n.length):"string"==i&&t in n)&&Hs(n[t],e)}function vo(e,t){if(zs(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!ua(e))||(ne.test(e)||!te.test(e)||null!=t&&e in De(t))}function Eo(e){var t=co(e),n=$n[t];if("function"!=typeof n||!(t in Kn.prototype))return!1;if(e===n)return!0;var i=ao(n);return!!i&&e===i[0]}(bn&&go(new bn(new ArrayBuffer(1)))!=k||Dn&&go(new Dn)!=w||Mn&&go(Mn.resolve())!=M||Tn&&go(new Tn)!=P||Pn&&go(new Pn)!=O)&&(go=function(e){var t=Di(e),n=t==D?e.constructor:r,i=n?jo(n):"";if(i)switch(i){case Vn:return k;case kn:return w;case Nn:return M;case Ln:return P;case Un:return O}return t});var wo=Ve?ea:Ic;function bo(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Oe)}function Do(e){return e==e&&!ia(e)}function Mo(e,t){return function(n){return null!=n&&(n[e]===t&&(t!==r||e in De(n)))}}function To(e,t,n){return t=Rn(t===r?e.length-1:t,0),function(){for(var r=arguments,o=-1,s=Rn(r.length-t,0),a=i(s);++o<s;)a[o]=r[t+o];o=-1;for(var c=i(t+1);++o<t;)c[o]=r[o];return c[t]=n(a),wt(e,this,c)}}function Po(e,t){return t.length<2?e:wi(e,or(t,0,-1))}function xo(e,t){for(var n=e.length,i=yn(t.length,n),o=xr(e);i--;){var s=t[i];e[i]=yo(s,n)?o[s]:r}return e}function Ao(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var Oo=Lo(nr),Vo=_t||function(e,t){return ft.setTimeout(e,t)},ko=Lo(ir);function No(e,t,n){var i=t+"";return ko(e,function(e,t){var n=t.length;if(!n)return e;var i=n-1;return t[i]=(n>1?"& ":"")+t[i],t=t.join(n>2?", ":" "),e.replace(ce,"{\n/* [wrapped with "+t+"] */\n")}(i,function(e,t){return Dt(g,(function(n){var i="_."+n[0];t&n[1]&&!xt(e,i)&&e.push(i)})),e.sort()}(function(e){var t=e.match(le);return t?t[1].split(de):[]}(i),n)))}function Lo(e){var t=0,n=0;return function(){var i=Sn(),o=16-(i-n);if(n=i,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(r,arguments)}}function Uo(e,t){var n=-1,i=e.length,o=i-1;for(t=t===r?i:t;++n<t;){var s=Qi(n,o),a=e[s];e[s]=e[n],e[n]=a}return e.length=t,e}var Bo=function(e){var t=Ls(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(ie,(function(e,n,i,r){t.push(i?r.replace(fe,"$1"):n||e)})),t}));function Fo(e){if("string"==typeof e||ua(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function jo(e){if(null!=e){try{return ke.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function $o(e){if(e instanceof Kn)return e.clone();var t=new Wn(e.__wrapped__,e.__chain__);return t.__actions__=xr(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Ho=Yi((function(e,t){return Qs(e)?fi(e,Ii(t,1,Qs,!0)):[]})),qo=Yi((function(e,t){var n=Zo(t);return Qs(n)&&(n=r),Qs(e)?fi(e,Ii(t,1,Qs,!0),uo(n,2)):[]})),Wo=Yi((function(e,t){var n=Zo(t);return Qs(n)&&(n=r),Qs(e)?fi(e,Ii(t,1,Qs,!0),r,n):[]}));function Ko(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var r=null==n?0:ga(n);return r<0&&(r=Rn(i+r,0)),Ft(e,uo(t,3),r)}function zo(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var o=i-1;return n!==r&&(o=ga(n),o=n<0?Rn(i+o,0):yn(o,i-1)),Ft(e,uo(t,3),o,!0)}function Go(e){return(null==e?0:e.length)?Ii(e,1):[]}function Jo(e){return e&&e.length?e[0]:r}var Qo=Yi((function(e){var t=Ot(e,Ir);return t.length&&t[0]===e[0]?xi(t):[]})),Xo=Yi((function(e){var t=Zo(e),n=Ot(e,Ir);return t===Zo(n)?t=r:n.pop(),n.length&&n[0]===e[0]?xi(n,uo(t,2)):[]})),Yo=Yi((function(e){var t=Zo(e),n=Ot(e,Ir);return(t="function"==typeof t?t:r)&&n.pop(),n.length&&n[0]===e[0]?xi(n,r,t):[]}));function Zo(e){var t=null==e?0:e.length;return t?e[t-1]:r}var es=Yi(ts);function ts(e,t){return e&&e.length&&t&&t.length?Gi(e,t):e}var ns=ro((function(e,t){var n=null==e?0:e.length,i=ci(e,t);return Ji(e,Ot(t,(function(e){return yo(e,n)?+e:e})).sort(Mr)),i}));function is(e){return null==e?e:wn.call(e)}var rs=Yi((function(e){return hr(Ii(e,1,Qs,!0))})),os=Yi((function(e){var t=Zo(e);return Qs(t)&&(t=r),hr(Ii(e,1,Qs,!0),uo(t,2))})),ss=Yi((function(e){var t=Zo(e);return t="function"==typeof t?t:r,hr(Ii(e,1,Qs,!0),r,t)}));function as(e){if(!e||!e.length)return[];var t=0;return e=Pt(e,(function(e){if(Qs(e))return t=Rn(e.length,t),!0})),Jt(t,(function(t){return Ot(e,Wt(t))}))}function cs(e,t){if(!e||!e.length)return[];var n=as(e);return null==t?n:Ot(n,(function(e){return wt(t,r,e)}))}var ls=Yi((function(e,t){return Qs(e)?fi(e,t):[]})),ds=Yi((function(e){return gr(Pt(e,Qs))})),us=Yi((function(e){var t=Zo(e);return Qs(t)&&(t=r),gr(Pt(e,Qs),uo(t,2))})),hs=Yi((function(e){var t=Zo(e);return t="function"==typeof t?t:r,gr(Pt(e,Qs),r,t)})),fs=Yi(as);var _s=Yi((function(e){var t=e.length,n=t>1?e[t-1]:r;return n="function"==typeof n?(e.pop(),n):r,cs(e,n)}));function ps(e){var t=$n(e);return t.__chain__=!0,t}function Cs(e,t){return t(e)}var gs=ro((function(e){var t=e.length,n=t?e[0]:0,i=this.__wrapped__,o=function(t){return ci(t,e)};return!(t>1||this.__actions__.length)&&i instanceof Kn&&yo(n)?((i=i.slice(n,+n+(t?1:0))).__actions__.push({func:Cs,args:[o],thisArg:r}),new Wn(i,this.__chain__).thru((function(e){return t&&!e.length&&e.push(r),e}))):this.thru(o)}));var ms=Or((function(e,t,n){Ne.call(e,n)?++e[n]:ai(e,n,1)}));var Is=Fr(Ko),Rs=Fr(zo);function ys(e,t){return(zs(e)?Dt:_i)(e,uo(t,3))}function Ss(e,t){return(zs(e)?Mt:pi)(e,uo(t,3))}var vs=Or((function(e,t,n){Ne.call(e,n)?e[n].push(t):ai(e,n,[t])}));var Es=Yi((function(e,t,n){var r=-1,o="function"==typeof t,s=Js(e)?i(e.length):[];return _i(e,(function(e){s[++r]=o?wt(t,e,n):Ai(e,t,n)})),s})),ws=Or((function(e,t,n){ai(e,n,t)}));function bs(e,t){return(zs(e)?Ot:ji)(e,uo(t,3))}var Ds=Or((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]}));var Ms=Yi((function(e,t){if(null==e)return[];var n=t.length;return n>1&&So(e,t[0],t[1])?t=[]:n>2&&So(t[0],t[1],t[2])&&(t=[t[0]]),Ki(e,Ii(t,1),[])})),Ts=ht||function(){return ft.Date.now()};function Ps(e,t,n){return t=n?r:t,t=e&&null==t?e.length:t,Zr(e,u,r,r,r,r,t)}function xs(e,t){var n;if("function"!=typeof t)throw new Pe(o);return e=ga(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=r),n}}var As=Yi((function(e,t,n){var i=1;if(n.length){var r=dn(n,lo(As));i|=l}return Zr(e,i,t,n,r)})),Os=Yi((function(e,t,n){var i=3;if(n.length){var r=dn(n,lo(Os));i|=l}return Zr(t,i,e,n,r)}));function Vs(e,t,n){var i,s,a,c,l,d,u=0,h=!1,f=!1,_=!0;if("function"!=typeof e)throw new Pe(o);function p(t){var n=i,o=s;return i=s=r,u=t,c=e.apply(o,n)}function C(e){return u=e,l=Vo(m,t),h?p(e):c}function g(e){var n=e-d;return d===r||n>=t||n<0||f&&e-u>=a}function m(){var e=Ts();if(g(e))return I(e);l=Vo(m,function(e){var n=t-(e-d);return f?yn(n,a-(e-u)):n}(e))}function I(e){return l=r,_&&i?p(e):(i=s=r,c)}function R(){var e=Ts(),n=g(e);if(i=arguments,s=this,d=e,n){if(l===r)return C(d);if(f)return Er(l),l=Vo(m,t),p(d)}return l===r&&(l=Vo(m,t)),c}return t=Ia(t)||0,ia(n)&&(h=!!n.leading,a=(f="maxWait"in n)?Rn(Ia(n.maxWait)||0,t):a,_="trailing"in n?!!n.trailing:_),R.cancel=function(){l!==r&&Er(l),u=0,i=d=s=l=r},R.flush=function(){return l===r?c:I(Ts())},R}var ks=Yi((function(e,t){return hi(e,1,t)})),Ns=Yi((function(e,t,n){return hi(e,Ia(t)||0,n)}));function Ls(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Pe(o);var n=function(){var i=arguments,r=t?t.apply(this,i):i[0],o=n.cache;if(o.has(r))return o.get(r);var s=e.apply(this,i);return n.cache=o.set(r,s)||o,s};return n.cache=new(Ls.Cache||Jn),n}function Us(e){if("function"!=typeof e)throw new Pe(o);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Ls.Cache=Jn;var Bs=Sr((function(e,t){var n=(t=1==t.length&&zs(t[0])?Ot(t[0],Xt(uo())):Ot(Ii(t,1),Xt(uo()))).length;return Yi((function(i){for(var r=-1,o=yn(i.length,n);++r<o;)i[r]=t[r].call(this,i[r]);return wt(e,this,i)}))})),Fs=Yi((function(e,t){var n=dn(t,lo(Fs));return Zr(e,l,r,t,n)})),js=Yi((function(e,t){var n=dn(t,lo(js));return Zr(e,d,r,t,n)})),$s=ro((function(e,t){return Zr(e,h,r,r,r,t)}));function Hs(e,t){return e===t||e!=e&&t!=t}var qs=Gr(Mi),Ws=Gr((function(e,t){return e>=t})),Ks=Oi(function(){return arguments}())?Oi:function(e){return ra(e)&&Ne.call(e,"callee")&&!Je.call(e,"callee")},zs=i.isArray,Gs=It?Xt(It):function(e){return ra(e)&&Di(e)==V};function Js(e){return null!=e&&na(e.length)&&!ea(e)}function Qs(e){return ra(e)&&Js(e)}var Xs=Ut||Ic,Ys=Rt?Xt(Rt):function(e){return ra(e)&&Di(e)==y};function Zs(e){if(!ra(e))return!1;var t=Di(e);return t==S||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!aa(e)}function ea(e){if(!ia(e))return!1;var t=Di(e);return t==v||t==E||"[object AsyncFunction]"==t||"[object Proxy]"==t}function ta(e){return"number"==typeof e&&e==ga(e)}function na(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=_}function ia(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function ra(e){return null!=e&&"object"==typeof e}var oa=yt?Xt(yt):function(e){return ra(e)&&go(e)==w};function sa(e){return"number"==typeof e||ra(e)&&Di(e)==b}function aa(e){if(!ra(e)||Di(e)!=D)return!1;var t=ze(e);if(null===t)return!0;var n=Ne.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&ke.call(n)==Fe}var ca=St?Xt(St):function(e){return ra(e)&&Di(e)==T};var la=vt?Xt(vt):function(e){return ra(e)&&go(e)==P};function da(e){return"string"==typeof e||!zs(e)&&ra(e)&&Di(e)==x}function ua(e){return"symbol"==typeof e||ra(e)&&Di(e)==A}var ha=Et?Xt(Et):function(e){return ra(e)&&na(e.length)&&!!st[Di(e)]};var fa=Gr(Fi),_a=Gr((function(e,t){return e<=t}));function pa(e){if(!e)return[];if(Js(e))return da(e)?_n(e):xr(e);if(et&&e[et])return function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}(e[et]());var t=go(e);return(t==w?cn:t==P?un:Ha)(e)}function Ca(e){return e?(e=Ia(e))===f||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function ga(e){var t=Ca(e),n=t%1;return t==t?n?t-n:t:0}function ma(e){return e?li(ga(e),0,C):0}function Ia(e){if("number"==typeof e)return e;if(ua(e))return p;if(ia(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=ia(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Qt(e);var n=ge.test(e);return n||Ie.test(e)?dt(e.slice(2),n?2:8):Ce.test(e)?p:+e}function Ra(e){return Ar(e,ka(e))}function ya(e){return null==e?"":ur(e)}var Sa=Vr((function(e,t){if(bo(t)||Js(t))Ar(t,Va(t),e);else for(var n in t)Ne.call(t,n)&&ii(e,n,t[n])})),va=Vr((function(e,t){Ar(t,ka(t),e)})),Ea=Vr((function(e,t,n,i){Ar(t,ka(t),e,i)})),wa=Vr((function(e,t,n,i){Ar(t,Va(t),e,i)})),ba=ro(ci);var Da=Yi((function(e,t){e=De(e);var n=-1,i=t.length,o=i>2?t[2]:r;for(o&&So(t[0],t[1],o)&&(i=1);++n<i;)for(var s=t[n],a=ka(s),c=-1,l=a.length;++c<l;){var d=a[c],u=e[d];(u===r||Hs(u,Oe[d])&&!Ne.call(e,d))&&(e[d]=s[d])}return e})),Ma=Yi((function(e){return e.push(r,to),wt(La,r,e)}));function Ta(e,t,n){var i=null==e?r:wi(e,t);return i===r?n:i}function Pa(e,t){return null!=e&&mo(e,t,Pi)}var xa=Hr((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Be.call(t)),e[t]=n}),ic(sc)),Aa=Hr((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=Be.call(t)),Ne.call(e,t)?e[t].push(n):e[t]=[n]}),uo),Oa=Yi(Ai);function Va(e){return Js(e)?Yn(e):Ui(e)}function ka(e){return Js(e)?Yn(e,!0):Bi(e)}var Na=Vr((function(e,t,n){qi(e,t,n)})),La=Vr((function(e,t,n,i){qi(e,t,n,i)})),Ua=ro((function(e,t){var n={};if(null==e)return n;var i=!1;t=Ot(t,(function(t){return t=yr(t,e),i||(i=t.length>1),t})),Ar(e,so(e),n),i&&(n=di(n,7,no));for(var r=t.length;r--;)fr(n,t[r]);return n}));var Ba=ro((function(e,t){return null==e?{}:function(e,t){return zi(e,t,(function(t,n){return Pa(e,n)}))}(e,t)}));function Fa(e,t){if(null==e)return{};var n=Ot(so(e),(function(e){return[e]}));return t=uo(t),zi(e,n,(function(e,n){return t(e,n[0])}))}var ja=Yr(Va),$a=Yr(ka);function Ha(e){return null==e?[]:Yt(e,Va(e))}var qa=Ur((function(e,t,n){return t=t.toLowerCase(),e+(n?Wa(t):t)}));function Wa(e){return Za(ya(e).toLowerCase())}function Ka(e){return(e=ya(e))&&e.replace(ye,rn).replace(Ze,"")}var za=Ur((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),Ga=Ur((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),Ja=Lr("toLowerCase");var Qa=Ur((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}));var Xa=Ur((function(e,t,n){return e+(n?" ":"")+Za(t)}));var Ya=Ur((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),Za=Lr("toUpperCase");function ec(e,t,n){return e=ya(e),(t=n?r:t)===r?function(e){return it.test(e)}(e)?function(e){return e.match(tt)||[]}(e):function(e){return e.match(ue)||[]}(e):e.match(t)||[]}var tc=Yi((function(e,t){try{return wt(e,r,t)}catch(e){return Zs(e)?e:new Ee(e)}})),nc=ro((function(e,t){return Dt(t,(function(t){t=Fo(t),ai(e,t,As(e[t],e))})),e}));function ic(e){return function(){return e}}var rc=jr(),oc=jr(!0);function sc(e){return e}function ac(e){return Li("function"==typeof e?e:di(e,1))}var cc=Yi((function(e,t){return function(n){return Ai(n,e,t)}})),lc=Yi((function(e,t){return function(n){return Ai(e,n,t)}}));function dc(e,t,n){var i=Va(t),r=Ei(t,i);null!=n||ia(t)&&(r.length||!i.length)||(n=t,t=e,e=this,r=Ei(t,Va(t)));var o=!(ia(n)&&"chain"in n&&!n.chain),s=ea(e);return Dt(r,(function(n){var i=t[n];e[n]=i,s&&(e.prototype[n]=function(){var t=this.__chain__;if(o||t){var n=e(this.__wrapped__),r=n.__actions__=xr(this.__actions__);return r.push({func:i,args:arguments,thisArg:e}),n.__chain__=t,n}return i.apply(e,Vt([this.value()],arguments))})})),e}function uc(){}var hc=Wr(Ot),fc=Wr(Tt),_c=Wr(Lt);function pc(e){return vo(e)?Wt(Fo(e)):function(e){return function(t){return wi(t,e)}}(e)}var Cc=zr(),gc=zr(!0);function mc(){return[]}function Ic(){return!1}var Rc=qr((function(e,t){return e+t}),0),yc=Qr("ceil"),Sc=qr((function(e,t){return e/t}),1),vc=Qr("floor");var Ec,wc=qr((function(e,t){return e*t}),1),bc=Qr("round"),Dc=qr((function(e,t){return e-t}),0);return $n.after=function(e,t){if("function"!=typeof t)throw new Pe(o);return e=ga(e),function(){if(--e<1)return t.apply(this,arguments)}},$n.ary=Ps,$n.assign=Sa,$n.assignIn=va,$n.assignInWith=Ea,$n.assignWith=wa,$n.at=ba,$n.before=xs,$n.bind=As,$n.bindAll=nc,$n.bindKey=Os,$n.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return zs(e)?e:[e]},$n.chain=ps,$n.chunk=function(e,t,n){t=(n?So(e,t,n):t===r)?1:Rn(ga(t),0);var o=null==e?0:e.length;if(!o||t<1)return[];for(var s=0,a=0,c=i(pt(o/t));s<o;)c[a++]=or(e,s,s+=t);return c},$n.compact=function(e){for(var t=-1,n=null==e?0:e.length,i=0,r=[];++t<n;){var o=e[t];o&&(r[i++]=o)}return r},$n.concat=function(){var e=arguments.length;if(!e)return[];for(var t=i(e-1),n=arguments[0],r=e;r--;)t[r-1]=arguments[r];return Vt(zs(n)?xr(n):[n],Ii(t,1))},$n.cond=function(e){var t=null==e?0:e.length,n=uo();return e=t?Ot(e,(function(e){if("function"!=typeof e[1])throw new Pe(o);return[n(e[0]),e[1]]})):[],Yi((function(n){for(var i=-1;++i<t;){var r=e[i];if(wt(r[0],this,n))return wt(r[1],this,n)}}))},$n.conforms=function(e){return function(e){var t=Va(e);return function(n){return ui(n,e,t)}}(di(e,1))},$n.constant=ic,$n.countBy=ms,$n.create=function(e,t){var n=Hn(e);return null==t?n:si(n,t)},$n.curry=function e(t,n,i){var o=Zr(t,8,r,r,r,r,r,n=i?r:n);return o.placeholder=e.placeholder,o},$n.curryRight=function e(t,n,i){var o=Zr(t,c,r,r,r,r,r,n=i?r:n);return o.placeholder=e.placeholder,o},$n.debounce=Vs,$n.defaults=Da,$n.defaultsDeep=Ma,$n.defer=ks,$n.delay=Ns,$n.difference=Ho,$n.differenceBy=qo,$n.differenceWith=Wo,$n.drop=function(e,t,n){var i=null==e?0:e.length;return i?or(e,(t=n||t===r?1:ga(t))<0?0:t,i):[]},$n.dropRight=function(e,t,n){var i=null==e?0:e.length;return i?or(e,0,(t=i-(t=n||t===r?1:ga(t)))<0?0:t):[]},$n.dropRightWhile=function(e,t){return e&&e.length?pr(e,uo(t,3),!0,!0):[]},$n.dropWhile=function(e,t){return e&&e.length?pr(e,uo(t,3),!0):[]},$n.fill=function(e,t,n,i){var o=null==e?0:e.length;return o?(n&&"number"!=typeof n&&So(e,t,n)&&(n=0,i=o),function(e,t,n,i){var o=e.length;for((n=ga(n))<0&&(n=-n>o?0:o+n),(i=i===r||i>o?o:ga(i))<0&&(i+=o),i=n>i?0:ma(i);n<i;)e[n++]=t;return e}(e,t,n,i)):[]},$n.filter=function(e,t){return(zs(e)?Pt:mi)(e,uo(t,3))},$n.flatMap=function(e,t){return Ii(bs(e,t),1)},$n.flatMapDeep=function(e,t){return Ii(bs(e,t),f)},$n.flatMapDepth=function(e,t,n){return n=n===r?1:ga(n),Ii(bs(e,t),n)},$n.flatten=Go,$n.flattenDeep=function(e){return(null==e?0:e.length)?Ii(e,f):[]},$n.flattenDepth=function(e,t){return(null==e?0:e.length)?Ii(e,t=t===r?1:ga(t)):[]},$n.flip=function(e){return Zr(e,512)},$n.flow=rc,$n.flowRight=oc,$n.fromPairs=function(e){for(var t=-1,n=null==e?0:e.length,i={};++t<n;){var r=e[t];i[r[0]]=r[1]}return i},$n.functions=function(e){return null==e?[]:Ei(e,Va(e))},$n.functionsIn=function(e){return null==e?[]:Ei(e,ka(e))},$n.groupBy=vs,$n.initial=function(e){return(null==e?0:e.length)?or(e,0,-1):[]},$n.intersection=Qo,$n.intersectionBy=Xo,$n.intersectionWith=Yo,$n.invert=xa,$n.invertBy=Aa,$n.invokeMap=Es,$n.iteratee=ac,$n.keyBy=ws,$n.keys=Va,$n.keysIn=ka,$n.map=bs,$n.mapKeys=function(e,t){var n={};return t=uo(t,3),Si(e,(function(e,i,r){ai(n,t(e,i,r),e)})),n},$n.mapValues=function(e,t){var n={};return t=uo(t,3),Si(e,(function(e,i,r){ai(n,i,t(e,i,r))})),n},$n.matches=function(e){return $i(di(e,1))},$n.matchesProperty=function(e,t){return Hi(e,di(t,1))},$n.memoize=Ls,$n.merge=Na,$n.mergeWith=La,$n.method=cc,$n.methodOf=lc,$n.mixin=dc,$n.negate=Us,$n.nthArg=function(e){return e=ga(e),Yi((function(t){return Wi(t,e)}))},$n.omit=Ua,$n.omitBy=function(e,t){return Fa(e,Us(uo(t)))},$n.once=function(e){return xs(2,e)},$n.orderBy=function(e,t,n,i){return null==e?[]:(zs(t)||(t=null==t?[]:[t]),zs(n=i?r:n)||(n=null==n?[]:[n]),Ki(e,t,n))},$n.over=hc,$n.overArgs=Bs,$n.overEvery=fc,$n.overSome=_c,$n.partial=Fs,$n.partialRight=js,$n.partition=Ds,$n.pick=Ba,$n.pickBy=Fa,$n.property=pc,$n.propertyOf=function(e){return function(t){return null==e?r:wi(e,t)}},$n.pull=es,$n.pullAll=ts,$n.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Gi(e,t,uo(n,2)):e},$n.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?Gi(e,t,r,n):e},$n.pullAt=ns,$n.range=Cc,$n.rangeRight=gc,$n.rearg=$s,$n.reject=function(e,t){return(zs(e)?Pt:mi)(e,Us(uo(t,3)))},$n.remove=function(e,t){var n=[];if(!e||!e.length)return n;var i=-1,r=[],o=e.length;for(t=uo(t,3);++i<o;){var s=e[i];t(s,i,e)&&(n.push(s),r.push(i))}return Ji(e,r),n},$n.rest=function(e,t){if("function"!=typeof e)throw new Pe(o);return Yi(e,t=t===r?t:ga(t))},$n.reverse=is,$n.sampleSize=function(e,t,n){return t=(n?So(e,t,n):t===r)?1:ga(t),(zs(e)?ei:er)(e,t)},$n.set=function(e,t,n){return null==e?e:tr(e,t,n)},$n.setWith=function(e,t,n,i){return i="function"==typeof i?i:r,null==e?e:tr(e,t,n,i)},$n.shuffle=function(e){return(zs(e)?ti:rr)(e)},$n.slice=function(e,t,n){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&So(e,t,n)?(t=0,n=i):(t=null==t?0:ga(t),n=n===r?i:ga(n)),or(e,t,n)):[]},$n.sortBy=Ms,$n.sortedUniq=function(e){return e&&e.length?lr(e):[]},$n.sortedUniqBy=function(e,t){return e&&e.length?lr(e,uo(t,2)):[]},$n.split=function(e,t,n){return n&&"number"!=typeof n&&So(e,t,n)&&(t=n=r),(n=n===r?C:n>>>0)?(e=ya(e))&&("string"==typeof t||null!=t&&!ca(t))&&!(t=ur(t))&&an(e)?vr(_n(e),0,n):e.split(t,n):[]},$n.spread=function(e,t){if("function"!=typeof e)throw new Pe(o);return t=null==t?0:Rn(ga(t),0),Yi((function(n){var i=n[t],r=vr(n,0,t);return i&&Vt(r,i),wt(e,this,r)}))},$n.tail=function(e){var t=null==e?0:e.length;return t?or(e,1,t):[]},$n.take=function(e,t,n){return e&&e.length?or(e,0,(t=n||t===r?1:ga(t))<0?0:t):[]},$n.takeRight=function(e,t,n){var i=null==e?0:e.length;return i?or(e,(t=i-(t=n||t===r?1:ga(t)))<0?0:t,i):[]},$n.takeRightWhile=function(e,t){return e&&e.length?pr(e,uo(t,3),!1,!0):[]},$n.takeWhile=function(e,t){return e&&e.length?pr(e,uo(t,3)):[]},$n.tap=function(e,t){return t(e),e},$n.throttle=function(e,t,n){var i=!0,r=!0;if("function"!=typeof e)throw new Pe(o);return ia(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),Vs(e,t,{leading:i,maxWait:t,trailing:r})},$n.thru=Cs,$n.toArray=pa,$n.toPairs=ja,$n.toPairsIn=$a,$n.toPath=function(e){return zs(e)?Ot(e,Fo):ua(e)?[e]:xr(Bo(ya(e)))},$n.toPlainObject=Ra,$n.transform=function(e,t,n){var i=zs(e),r=i||Xs(e)||ha(e);if(t=uo(t,4),null==n){var o=e&&e.constructor;n=r?i?new o:[]:ia(e)&&ea(o)?Hn(ze(e)):{}}return(r?Dt:Si)(e,(function(e,i,r){return t(n,e,i,r)})),n},$n.unary=function(e){return Ps(e,1)},$n.union=rs,$n.unionBy=os,$n.unionWith=ss,$n.uniq=function(e){return e&&e.length?hr(e):[]},$n.uniqBy=function(e,t){return e&&e.length?hr(e,uo(t,2)):[]},$n.uniqWith=function(e,t){return t="function"==typeof t?t:r,e&&e.length?hr(e,r,t):[]},$n.unset=function(e,t){return null==e||fr(e,t)},$n.unzip=as,$n.unzipWith=cs,$n.update=function(e,t,n){return null==e?e:_r(e,t,Rr(n))},$n.updateWith=function(e,t,n,i){return i="function"==typeof i?i:r,null==e?e:_r(e,t,Rr(n),i)},$n.values=Ha,$n.valuesIn=function(e){return null==e?[]:Yt(e,ka(e))},$n.without=ls,$n.words=ec,$n.wrap=function(e,t){return Fs(Rr(t),e)},$n.xor=ds,$n.xorBy=us,$n.xorWith=hs,$n.zip=fs,$n.zipObject=function(e,t){return mr(e||[],t||[],ii)},$n.zipObjectDeep=function(e,t){return mr(e||[],t||[],tr)},$n.zipWith=_s,$n.entries=ja,$n.entriesIn=$a,$n.extend=va,$n.extendWith=Ea,dc($n,$n),$n.add=Rc,$n.attempt=tc,$n.camelCase=qa,$n.capitalize=Wa,$n.ceil=yc,$n.clamp=function(e,t,n){return n===r&&(n=t,t=r),n!==r&&(n=(n=Ia(n))==n?n:0),t!==r&&(t=(t=Ia(t))==t?t:0),li(Ia(e),t,n)},$n.clone=function(e){return di(e,4)},$n.cloneDeep=function(e){return di(e,5)},$n.cloneDeepWith=function(e,t){return di(e,5,t="function"==typeof t?t:r)},$n.cloneWith=function(e,t){return di(e,4,t="function"==typeof t?t:r)},$n.conformsTo=function(e,t){return null==t||ui(e,t,Va(t))},$n.deburr=Ka,$n.defaultTo=function(e,t){return null==e||e!=e?t:e},$n.divide=Sc,$n.endsWith=function(e,t,n){e=ya(e),t=ur(t);var i=e.length,o=n=n===r?i:li(ga(n),0,i);return(n-=t.length)>=0&&e.slice(n,o)==t},$n.eq=Hs,$n.escape=function(e){return(e=ya(e))&&X.test(e)?e.replace(J,on):e},$n.escapeRegExp=function(e){return(e=ya(e))&&oe.test(e)?e.replace(re,"\\$&"):e},$n.every=function(e,t,n){var i=zs(e)?Tt:Ci;return n&&So(e,t,n)&&(t=r),i(e,uo(t,3))},$n.find=Is,$n.findIndex=Ko,$n.findKey=function(e,t){return Bt(e,uo(t,3),Si)},$n.findLast=Rs,$n.findLastIndex=zo,$n.findLastKey=function(e,t){return Bt(e,uo(t,3),vi)},$n.floor=vc,$n.forEach=ys,$n.forEachRight=Ss,$n.forIn=function(e,t){return null==e?e:Ri(e,uo(t,3),ka)},$n.forInRight=function(e,t){return null==e?e:yi(e,uo(t,3),ka)},$n.forOwn=function(e,t){return e&&Si(e,uo(t,3))},$n.forOwnRight=function(e,t){return e&&vi(e,uo(t,3))},$n.get=Ta,$n.gt=qs,$n.gte=Ws,$n.has=function(e,t){return null!=e&&mo(e,t,Ti)},$n.hasIn=Pa,$n.head=Jo,$n.identity=sc,$n.includes=function(e,t,n,i){e=Js(e)?e:Ha(e),n=n&&!i?ga(n):0;var r=e.length;return n<0&&(n=Rn(r+n,0)),da(e)?n<=r&&e.indexOf(t,n)>-1:!!r&&jt(e,t,n)>-1},$n.indexOf=function(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var r=null==n?0:ga(n);return r<0&&(r=Rn(i+r,0)),jt(e,t,r)},$n.inRange=function(e,t,n){return t=Ca(t),n===r?(n=t,t=0):n=Ca(n),function(e,t,n){return e>=yn(t,n)&&e<Rn(t,n)}(e=Ia(e),t,n)},$n.invoke=Oa,$n.isArguments=Ks,$n.isArray=zs,$n.isArrayBuffer=Gs,$n.isArrayLike=Js,$n.isArrayLikeObject=Qs,$n.isBoolean=function(e){return!0===e||!1===e||ra(e)&&Di(e)==R},$n.isBuffer=Xs,$n.isDate=Ys,$n.isElement=function(e){return ra(e)&&1===e.nodeType&&!aa(e)},$n.isEmpty=function(e){if(null==e)return!0;if(Js(e)&&(zs(e)||"string"==typeof e||"function"==typeof e.splice||Xs(e)||ha(e)||Ks(e)))return!e.length;var t=go(e);if(t==w||t==P)return!e.size;if(bo(e))return!Ui(e).length;for(var n in e)if(Ne.call(e,n))return!1;return!0},$n.isEqual=function(e,t){return Vi(e,t)},$n.isEqualWith=function(e,t,n){var i=(n="function"==typeof n?n:r)?n(e,t):r;return i===r?Vi(e,t,r,n):!!i},$n.isError=Zs,$n.isFinite=function(e){return"number"==typeof e&&Kt(e)},$n.isFunction=ea,$n.isInteger=ta,$n.isLength=na,$n.isMap=oa,$n.isMatch=function(e,t){return e===t||ki(e,t,fo(t))},$n.isMatchWith=function(e,t,n){return n="function"==typeof n?n:r,ki(e,t,fo(t),n)},$n.isNaN=function(e){return sa(e)&&e!=+e},$n.isNative=function(e){if(wo(e))throw new Ee("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Ni(e)},$n.isNil=function(e){return null==e},$n.isNull=function(e){return null===e},$n.isNumber=sa,$n.isObject=ia,$n.isObjectLike=ra,$n.isPlainObject=aa,$n.isRegExp=ca,$n.isSafeInteger=function(e){return ta(e)&&e>=-9007199254740991&&e<=_},$n.isSet=la,$n.isString=da,$n.isSymbol=ua,$n.isTypedArray=ha,$n.isUndefined=function(e){return e===r},$n.isWeakMap=function(e){return ra(e)&&go(e)==O},$n.isWeakSet=function(e){return ra(e)&&"[object WeakSet]"==Di(e)},$n.join=function(e,t){return null==e?"":mn.call(e,t)},$n.kebabCase=za,$n.last=Zo,$n.lastIndexOf=function(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var o=i;return n!==r&&(o=(o=ga(n))<0?Rn(i+o,0):yn(o,i-1)),t==t?function(e,t,n){for(var i=n+1;i--;)if(e[i]===t)return i;return i}(e,t,o):Ft(e,Ht,o,!0)},$n.lowerCase=Ga,$n.lowerFirst=Ja,$n.lt=fa,$n.lte=_a,$n.max=function(e){return e&&e.length?gi(e,sc,Mi):r},$n.maxBy=function(e,t){return e&&e.length?gi(e,uo(t,2),Mi):r},$n.mean=function(e){return qt(e,sc)},$n.meanBy=function(e,t){return qt(e,uo(t,2))},$n.min=function(e){return e&&e.length?gi(e,sc,Fi):r},$n.minBy=function(e,t){return e&&e.length?gi(e,uo(t,2),Fi):r},$n.stubArray=mc,$n.stubFalse=Ic,$n.stubObject=function(){return{}},$n.stubString=function(){return""},$n.stubTrue=function(){return!0},$n.multiply=wc,$n.nth=function(e,t){return e&&e.length?Wi(e,ga(t)):r},$n.noConflict=function(){return ft._===this&&(ft._=je),this},$n.noop=uc,$n.now=Ts,$n.pad=function(e,t,n){e=ya(e);var i=(t=ga(t))?fn(e):0;if(!t||i>=t)return e;var r=(t-i)/2;return Kr(gt(r),n)+e+Kr(pt(r),n)},$n.padEnd=function(e,t,n){e=ya(e);var i=(t=ga(t))?fn(e):0;return t&&i<t?e+Kr(t-i,n):e},$n.padStart=function(e,t,n){e=ya(e);var i=(t=ga(t))?fn(e):0;return t&&i<t?Kr(t-i,n)+e:e},$n.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),vn(ya(e).replace(se,""),t||0)},$n.random=function(e,t,n){if(n&&"boolean"!=typeof n&&So(e,t,n)&&(t=n=r),n===r&&("boolean"==typeof t?(n=t,t=r):"boolean"==typeof e&&(n=e,e=r)),e===r&&t===r?(e=0,t=1):(e=Ca(e),t===r?(t=e,e=0):t=Ca(t)),e>t){var i=e;e=t,t=i}if(n||e%1||t%1){var o=En();return yn(e+o*(t-e+lt("1e-"+((o+"").length-1))),t)}return Qi(e,t)},$n.reduce=function(e,t,n){var i=zs(e)?kt:zt,r=arguments.length<3;return i(e,uo(t,4),n,r,_i)},$n.reduceRight=function(e,t,n){var i=zs(e)?Nt:zt,r=arguments.length<3;return i(e,uo(t,4),n,r,pi)},$n.repeat=function(e,t,n){return t=(n?So(e,t,n):t===r)?1:ga(t),Xi(ya(e),t)},$n.replace=function(){var e=arguments,t=ya(e[0]);return e.length<3?t:t.replace(e[1],e[2])},$n.result=function(e,t,n){var i=-1,o=(t=yr(t,e)).length;for(o||(o=1,e=r);++i<o;){var s=null==e?r:e[Fo(t[i])];s===r&&(i=o,s=n),e=ea(s)?s.call(e):s}return e},$n.round=bc,$n.runInContext=e,$n.sample=function(e){return(zs(e)?Zn:Zi)(e)},$n.size=function(e){if(null==e)return 0;if(Js(e))return da(e)?fn(e):e.length;var t=go(e);return t==w||t==P?e.size:Ui(e).length},$n.snakeCase=Qa,$n.some=function(e,t,n){var i=zs(e)?Lt:sr;return n&&So(e,t,n)&&(t=r),i(e,uo(t,3))},$n.sortedIndex=function(e,t){return ar(e,t)},$n.sortedIndexBy=function(e,t,n){return cr(e,t,uo(n,2))},$n.sortedIndexOf=function(e,t){var n=null==e?0:e.length;if(n){var i=ar(e,t);if(i<n&&Hs(e[i],t))return i}return-1},$n.sortedLastIndex=function(e,t){return ar(e,t,!0)},$n.sortedLastIndexBy=function(e,t,n){return cr(e,t,uo(n,2),!0)},$n.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var n=ar(e,t,!0)-1;if(Hs(e[n],t))return n}return-1},$n.startCase=Xa,$n.startsWith=function(e,t,n){return e=ya(e),n=null==n?0:li(ga(n),0,e.length),t=ur(t),e.slice(n,n+t.length)==t},$n.subtract=Dc,$n.sum=function(e){return e&&e.length?Gt(e,sc):0},$n.sumBy=function(e,t){return e&&e.length?Gt(e,uo(t,2)):0},$n.template=function(e,t,n){var i=$n.templateSettings;n&&So(e,t,n)&&(t=r),e=ya(e),t=Ea({},t,i,eo);var o,s,a=Ea({},t.imports,i.imports,eo),c=Va(a),l=Yt(a,c),d=0,u=t.interpolate||Se,h="__p += '",f=Me((t.escape||Se).source+"|"+u.source+"|"+(u===ee?_e:Se).source+"|"+(t.evaluate||Se).source+"|$","g"),_="//# sourceURL="+(Ne.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ot+"]")+"\n";e.replace(f,(function(t,n,i,r,a,c){return i||(i=r),h+=e.slice(d,c).replace(ve,sn),n&&(o=!0,h+="' +\n__e("+n+") +\n'"),a&&(s=!0,h+="';\n"+a+";\n__p += '"),i&&(h+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),d=c+t.length,t})),h+="';\n";var p=Ne.call(t,"variable")&&t.variable;if(p){if(he.test(p))throw new Ee("Invalid `variable` option passed into `_.template`")}else h="with (obj) {\n"+h+"\n}\n";h=(s?h.replace(W,""):h).replace(K,"$1").replace(z,"$1;"),h="function("+(p||"obj")+") {\n"+(p?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var C=tc((function(){return we(c,_+"return "+h).apply(r,l)}));if(C.source=h,Zs(C))throw C;return C},$n.times=function(e,t){if((e=ga(e))<1||e>_)return[];var n=C,i=yn(e,C);t=uo(t),e-=C;for(var r=Jt(i,t);++n<e;)t(n);return r},$n.toFinite=Ca,$n.toInteger=ga,$n.toLength=ma,$n.toLower=function(e){return ya(e).toLowerCase()},$n.toNumber=Ia,$n.toSafeInteger=function(e){return e?li(ga(e),-9007199254740991,_):0===e?e:0},$n.toString=ya,$n.toUpper=function(e){return ya(e).toUpperCase()},$n.trim=function(e,t,n){if((e=ya(e))&&(n||t===r))return Qt(e);if(!e||!(t=ur(t)))return e;var i=_n(e),o=_n(t);return vr(i,en(i,o),tn(i,o)+1).join("")},$n.trimEnd=function(e,t,n){if((e=ya(e))&&(n||t===r))return e.slice(0,pn(e)+1);if(!e||!(t=ur(t)))return e;var i=_n(e);return vr(i,0,tn(i,_n(t))+1).join("")},$n.trimStart=function(e,t,n){if((e=ya(e))&&(n||t===r))return e.replace(se,"");if(!e||!(t=ur(t)))return e;var i=_n(e);return vr(i,en(i,_n(t))).join("")},$n.truncate=function(e,t){var n=30,i="...";if(ia(t)){var o="separator"in t?t.separator:o;n="length"in t?ga(t.length):n,i="omission"in t?ur(t.omission):i}var s=(e=ya(e)).length;if(an(e)){var a=_n(e);s=a.length}if(n>=s)return e;var c=n-fn(i);if(c<1)return i;var l=a?vr(a,0,c).join(""):e.slice(0,c);if(o===r)return l+i;if(a&&(c+=l.length-c),ca(o)){if(e.slice(c).search(o)){var d,u=l;for(o.global||(o=Me(o.source,ya(pe.exec(o))+"g")),o.lastIndex=0;d=o.exec(u);)var h=d.index;l=l.slice(0,h===r?c:h)}}else if(e.indexOf(ur(o),c)!=c){var f=l.lastIndexOf(o);f>-1&&(l=l.slice(0,f))}return l+i},$n.unescape=function(e){return(e=ya(e))&&Q.test(e)?e.replace(G,Cn):e},$n.uniqueId=function(e){var t=++Le;return ya(e)+t},$n.upperCase=Ya,$n.upperFirst=Za,$n.each=ys,$n.eachRight=Ss,$n.first=Jo,dc($n,(Ec={},Si($n,(function(e,t){Ne.call($n.prototype,t)||(Ec[t]=e)})),Ec),{chain:!1}),$n.VERSION="4.17.21",Dt(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){$n[e].placeholder=$n})),Dt(["drop","take"],(function(e,t){Kn.prototype[e]=function(n){n=n===r?1:Rn(ga(n),0);var i=this.__filtered__&&!t?new Kn(this):this.clone();return i.__filtered__?i.__takeCount__=yn(n,i.__takeCount__):i.__views__.push({size:yn(n,C),type:e+(i.__dir__<0?"Right":"")}),i},Kn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),Dt(["filter","map","takeWhile"],(function(e,t){var n=t+1,i=1==n||3==n;Kn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:uo(e,3),type:n}),t.__filtered__=t.__filtered__||i,t}})),Dt(["head","last"],(function(e,t){var n="take"+(t?"Right":"");Kn.prototype[e]=function(){return this[n](1).value()[0]}})),Dt(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");Kn.prototype[e]=function(){return this.__filtered__?new Kn(this):this[n](1)}})),Kn.prototype.compact=function(){return this.filter(sc)},Kn.prototype.find=function(e){return this.filter(e).head()},Kn.prototype.findLast=function(e){return this.reverse().find(e)},Kn.prototype.invokeMap=Yi((function(e,t){return"function"==typeof e?new Kn(this):this.map((function(n){return Ai(n,e,t)}))})),Kn.prototype.reject=function(e){return this.filter(Us(uo(e)))},Kn.prototype.slice=function(e,t){e=ga(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Kn(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==r&&(n=(t=ga(t))<0?n.dropRight(-t):n.take(t-e)),n)},Kn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Kn.prototype.toArray=function(){return this.take(C)},Si(Kn.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),i=/^(?:head|last)$/.test(t),o=$n[i?"take"+("last"==t?"Right":""):t],s=i||/^find/.test(t);o&&($n.prototype[t]=function(){var t=this.__wrapped__,a=i?[1]:arguments,c=t instanceof Kn,l=a[0],d=c||zs(t),u=function(e){var t=o.apply($n,Vt([e],a));return i&&h?t[0]:t};d&&n&&"function"==typeof l&&1!=l.length&&(c=d=!1);var h=this.__chain__,f=!!this.__actions__.length,_=s&&!h,p=c&&!f;if(!s&&d){t=p?t:new Kn(this);var C=e.apply(t,a);return C.__actions__.push({func:Cs,args:[u],thisArg:r}),new Wn(C,h)}return _&&p?e.apply(this,a):(C=this.thru(u),_?i?C.value()[0]:C.value():C)})})),Dt(["pop","push","shift","sort","splice","unshift"],(function(e){var t=xe[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",i=/^(?:pop|shift)$/.test(e);$n.prototype[e]=function(){var e=arguments;if(i&&!this.__chain__){var r=this.value();return t.apply(zs(r)?r:[],e)}return this[n]((function(n){return t.apply(zs(n)?n:[],e)}))}})),Si(Kn.prototype,(function(e,t){var n=$n[t];if(n){var i=n.name+"";Ne.call(On,i)||(On[i]=[]),On[i].push({name:t,func:n})}})),On[$r(r,2).name]=[{name:"wrapper",func:r}],Kn.prototype.clone=function(){var e=new Kn(this.__wrapped__);return e.__actions__=xr(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=xr(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=xr(this.__views__),e},Kn.prototype.reverse=function(){if(this.__filtered__){var e=new Kn(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},Kn.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=zs(e),i=t<0,r=n?e.length:0,o=function(e,t,n){var i=-1,r=n.length;for(;++i<r;){var o=n[i],s=o.size;switch(o.type){case"drop":e+=s;break;case"dropRight":t-=s;break;case"take":t=yn(t,e+s);break;case"takeRight":e=Rn(e,t-s)}}return{start:e,end:t}}(0,r,this.__views__),s=o.start,a=o.end,c=a-s,l=i?a:s-1,d=this.__iteratees__,u=d.length,h=0,f=yn(c,this.__takeCount__);if(!n||!i&&r==c&&f==c)return Cr(e,this.__actions__);var _=[];e:for(;c--&&h<f;){for(var p=-1,C=e[l+=t];++p<u;){var g=d[p],m=g.iteratee,I=g.type,R=m(C);if(2==I)C=R;else if(!R){if(1==I)continue e;break e}}_[h++]=C}return _},$n.prototype.at=gs,$n.prototype.chain=function(){return ps(this)},$n.prototype.commit=function(){return new Wn(this.value(),this.__chain__)},$n.prototype.next=function(){this.__values__===r&&(this.__values__=pa(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?r:this.__values__[this.__index__++]}},$n.prototype.plant=function(e){for(var t,n=this;n instanceof qn;){var i=$o(n);i.__index__=0,i.__values__=r,t?o.__wrapped__=i:t=i;var o=i;n=n.__wrapped__}return o.__wrapped__=e,t},$n.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof Kn){var t=e;return this.__actions__.length&&(t=new Kn(this)),(t=t.reverse()).__actions__.push({func:Cs,args:[is],thisArg:r}),new Wn(t,this.__chain__)}return this.thru(is)},$n.prototype.toJSON=$n.prototype.valueOf=$n.prototype.value=function(){return Cr(this.__wrapped__,this.__actions__)},$n.prototype.first=$n.prototype.head,et&&($n.prototype[et]=function(){return this}),$n}();ft._=gn,(i=function(){return gn}.call(t,n,t,e))===r||(e.exports=i)}.call(this)},5496:function(){(function(){"use strict";var e;function t(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var n="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var i=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);function r(e,t){if(t)e:{var r=i;e=e.split(".");for(var o=0;o<e.length-1;o++){var s=e[o];if(!(s in r))break e;r=r[s]}(t=t(o=r[e=e[e.length-1]]))!=o&&null!=t&&n(r,e,{configurable:!0,writable:!0,value:t})}}function o(e){return(e={next:e})[Symbol.iterator]=function(){return this},e}function s(e){var n="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return n?n.call(e):{next:t(e)}}function a(e){if(!(e instanceof Array)){e=s(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}r("Symbol",(function(e){function t(e,t){this.g=e,n(this,"description",{configurable:!0,writable:!0,value:t})}if(e)return e;t.prototype.toString=function(){return this.g};var i="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",r=0;return function e(n){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new t(i+(n||"")+"_"+r++,n)}})),r("Symbol.iterator",(function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var r="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),s=0;s<r.length;s++){var a=i[r[s]];"function"==typeof a&&"function"!=typeof a.prototype[e]&&n(a.prototype,e,{configurable:!0,writable:!0,value:function(){return o(t(this))}})}return e}));var c,l="function"==typeof Object.create?Object.create:function(e){function t(){}return t.prototype=e,new t};if("function"==typeof Object.setPrototypeOf)c=Object.setPrototypeOf;else{var d;e:{var u={};try{u.__proto__={a:!0},d=u.a;break e}catch(e){}d=!1}c=d?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var h=c;function f(e,t){if(e.prototype=l(t.prototype),e.prototype.constructor=e,h)h(e,t);else for(var n in t)if("prototype"!=n)if(Object.defineProperties){var i=Object.getOwnPropertyDescriptor(t,n);i&&Object.defineProperty(e,n,i)}else e[n]=t[n];e.ea=t.prototype}function _(){this.l=!1,this.i=null,this.h=void 0,this.g=1,this.s=this.m=0,this.j=null}function p(e){if(e.l)throw new TypeError("Generator is already running");e.l=!0}function C(e,t){e.j={U:t,V:!0},e.g=e.m||e.s}function g(e,t,n){return e.g=n,{value:t}}function m(e){this.g=new _,this.h=e}function I(e,t,n,i){try{var r=t.call(e.g.i,n);if(!(r instanceof Object))throw new TypeError("Iterator result "+r+" is not an object");if(!r.done)return e.g.l=!1,r;var o=r.value}catch(t){return e.g.i=null,C(e.g,t),R(e)}return e.g.i=null,i.call(e.g,o),R(e)}function R(e){for(;e.g.g;)try{var t=e.h(e.g);if(t)return e.g.l=!1,{value:t.value,done:!1}}catch(t){e.g.h=void 0,C(e.g,t)}if(e.g.l=!1,e.g.j){if(t=e.g.j,e.g.j=null,t.V)throw t.U;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function y(e){this.next=function(t){return p(e.g),e.g.i?t=I(e,e.g.i.next,t,e.g.o):(e.g.o(t),t=R(e)),t},this.throw=function(t){return p(e.g),e.g.i?t=I(e,e.g.i.throw,t,e.g.o):(C(e.g,t),t=R(e)),t},this.return=function(t){return function(e,t){p(e.g);var n=e.g.i;return n?I(e,"return"in n?n.return:function(e){return{value:e,done:!0}},t,e.g.return):(e.g.return(t),R(e))}(e,t)},this[Symbol.iterator]=function(){return this}}function S(e,t){return t=new y(new m(t)),h&&e.prototype&&h(t,e.prototype),t}_.prototype.o=function(e){this.h=e},_.prototype.return=function(e){this.j={return:e},this.g=this.s};var v="function"==typeof Object.assign?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var i=arguments[n];if(i)for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e};r("Object.assign",(function(e){return e||v})),r("Promise",(function(e){function t(e){this.h=0,this.i=void 0,this.g=[],this.o=!1;var t=this.j();try{e(t.resolve,t.reject)}catch(e){t.reject(e)}}function n(){this.g=null}function r(e){return e instanceof t?e:new t((function(t){t(e)}))}if(e)return e;n.prototype.h=function(e){if(null==this.g){this.g=[];var t=this;this.i((function(){t.l()}))}this.g.push(e)};var o=i.setTimeout;n.prototype.i=function(e){o(e,0)},n.prototype.l=function(){for(;this.g&&this.g.length;){var e=this.g;this.g=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(e){this.j(e)}}}this.g=null},n.prototype.j=function(e){this.i((function(){throw e}))},t.prototype.j=function(){function e(e){return function(i){n||(n=!0,e.call(t,i))}}var t=this,n=!1;return{resolve:e(this.C),reject:e(this.l)}},t.prototype.C=function(e){if(e===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.F(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.u(e):this.m(e)}},t.prototype.u=function(e){var t=void 0;try{t=e.then}catch(e){return void this.l(e)}"function"==typeof t?this.G(t,e):this.m(e)},t.prototype.l=function(e){this.s(2,e)},t.prototype.m=function(e){this.s(1,e)},t.prototype.s=function(e,t){if(0!=this.h)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.h);this.h=e,this.i=t,2===this.h&&this.D(),this.A()},t.prototype.D=function(){var e=this;o((function(){if(e.B()){var t=i.console;void 0!==t&&t.error(e.i)}}),1)},t.prototype.B=function(){if(this.o)return!1;var e=i.CustomEvent,t=i.Event,n=i.dispatchEvent;return void 0===n||("function"==typeof e?e=new e("unhandledrejection",{cancelable:!0}):"function"==typeof t?e=new t("unhandledrejection",{cancelable:!0}):(e=i.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,e),e.promise=this,e.reason=this.i,n(e))},t.prototype.A=function(){if(null!=this.g){for(var e=0;e<this.g.length;++e)a.h(this.g[e]);this.g=null}};var a=new n;return t.prototype.F=function(e){var t=this.j();e.J(t.resolve,t.reject)},t.prototype.G=function(e,t){var n=this.j();try{e.call(t,n.resolve,n.reject)}catch(e){n.reject(e)}},t.prototype.then=function(e,n){function i(e,t){return"function"==typeof e?function(t){try{r(e(t))}catch(e){o(e)}}:t}var r,o,s=new t((function(e,t){r=e,o=t}));return this.J(i(e,r),i(n,o)),s},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.J=function(e,t){function n(){switch(i.h){case 1:e(i.i);break;case 2:t(i.i);break;default:throw Error("Unexpected state: "+i.h)}}var i=this;null==this.g?a.h(n):this.g.push(n),this.o=!0},t.resolve=r,t.reject=function(e){return new t((function(t,n){n(e)}))},t.race=function(e){return new t((function(t,n){for(var i=s(e),o=i.next();!o.done;o=i.next())r(o.value).J(t,n)}))},t.all=function(e){var n=s(e),i=n.next();return i.done?r([]):new t((function(e,t){function o(t){return function(n){s[t]=n,0==--a&&e(s)}}var s=[],a=0;do{s.push(void 0),a++,r(i.value).J(o(s.length-1),t),i=n.next()}while(!i.done)}))},t})),r("Object.is",(function(e){return e||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}})),r("Array.prototype.includes",(function(e){return e||function(e,t){var n=this;n instanceof String&&(n=String(n));var i=n.length;for(0>(t=t||0)&&(t=Math.max(t+i,0));t<i;t++){var r=n[t];if(r===e||Object.is(r,e))return!0}return!1}})),r("String.prototype.includes",(function(e){return e||function(e,t){if(null==this)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(e instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return-1!==this.indexOf(e,t||0)}})),r("Array.prototype.keys",(function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,i=!1,r={next:function(){if(!i&&n<e.length){var r=n++;return{value:t(r,e[r]),done:!1}}return i=!0,{done:!0,value:void 0}}};return r[Symbol.iterator]=function(){return r},r}(this,(function(e){return e}))}}));var E=this||self;function w(e,t){e=e.split(".");var n,i=E;e[0]in i||void 0===i.execScript||i.execScript("var "+e[0]);for(;e.length&&(n=e.shift());)e.length||void 0===t?i=i[n]&&i[n]!==Object.prototype[n]?i[n]:i[n]={}:i[n]=t}function b(e,t){return t=String.fromCharCode.apply(null,t),null==e?t:e+t}var D,M,T="undefined"!=typeof TextDecoder,P="undefined"!=typeof TextEncoder;function x(e){if(P)e=(M||(M=new TextEncoder)).encode(e);else{var t=void 0;t=void 0!==t&&t;for(var n=0,i=new Uint8Array(3*e.length),r=0;r<e.length;r++){var o=e.charCodeAt(r);if(128>o)i[n++]=o;else{if(2048>o)i[n++]=o>>6|192;else{if(55296<=o&&57343>=o){if(56319>=o&&r<e.length){var s=e.charCodeAt(++r);if(56320<=s&&57343>=s){o=1024*(o-55296)+s-56320+65536,i[n++]=o>>18|240,i[n++]=o>>12&63|128,i[n++]=o>>6&63|128,i[n++]=63&o|128;continue}r--}if(t)throw Error("Found an unpaired surrogate");o=65533}i[n++]=o>>12|224,i[n++]=o>>6&63|128}i[n++]=63&o|128}}e=i.subarray(0,n)}return e}var A={},O=null;function V(e,t){void 0===t&&(t=0),N(),t=A[t];for(var n=Array(Math.floor(e.length/3)),i=t[64]||"",r=0,o=0;r<e.length-2;r+=3){var s=e[r],a=e[r+1],c=e[r+2],l=t[s>>2];s=t[(3&s)<<4|a>>4],a=t[(15&a)<<2|c>>6],c=t[63&c],n[o++]=l+s+a+c}switch(l=0,c=i,e.length-r){case 2:c=t[(15&(l=e[r+1]))<<2]||i;case 1:e=e[r],n[o]=t[e>>2]+t[(3&e)<<4|l>>4]+c+i}return n.join("")}function k(e){var t=e.length,n=3*t/4;n%3?n=Math.floor(n):-1!="=.".indexOf(e[t-1])&&(n=-1!="=.".indexOf(e[t-2])?n-2:n-1);var i=new Uint8Array(n),r=0;return function(e,t){function n(t){for(;i<e.length;){var n=e.charAt(i++),r=O[n];if(null!=r)return r;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return t}N();for(var i=0;;){var r=n(-1),o=n(0),s=n(64),a=n(64);if(64===a&&-1===r)break;t(r<<2|o>>4),64!=s&&(t(o<<4&240|s>>2),64!=a&&t(s<<6&192|a))}}(e,(function(e){i[r++]=e})),i.subarray(0,r)}function N(){if(!O){O={};for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),t=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++){var i=e.concat(t[n].split(""));A[n]=i;for(var r=0;r<i.length;r++){var o=i[r];void 0===O[o]&&(O[o]=r)}}}}var L,U="function"==typeof Uint8Array.prototype.slice;function B(e,t,n){return t===n?L||(L=new Uint8Array(0)):U?e.slice(t,n):new Uint8Array(e.subarray(t,n))}var F=0;function j(e,t){t=void 0!==(t=void 0===t?{}:t).v&&t.v,this.h=null,this.g=this.i=this.j=0,this.l=!1,this.v=t,e&&$(this,e)}function $(e,t){t=t.constructor===Uint8Array?t:t.constructor===ArrayBuffer||t.constructor===Array?new Uint8Array(t):t.constructor===String?k(t):t instanceof Uint8Array?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(0),e.h=t,e.j=0,e.i=e.h.length,e.g=e.j}function H(e){var t=e.h,n=t[e.g],i=127&n;return 128>n?(e.g+=1,i):(i|=(127&(n=t[e.g+1]))<<7,128>n?(e.g+=2,i):(i|=(127&(n=t[e.g+2]))<<14,128>n?(e.g+=3,i):(i|=(127&(n=t[e.g+3]))<<21,128>n?(e.g+=4,i):(i|=(15&(n=t[e.g+4]))<<28,128>n?(e.g+=5,i>>>0):(e.g+=5,128<=t[e.g++]&&128<=t[e.g++]&&128<=t[e.g++]&&128<=t[e.g++]&&e.g++,i)))))}function q(e){var t=e.h[e.g],n=e.h[e.g+1],i=e.h[e.g+2],r=e.h[e.g+3];return e.g+=4,e=2*((n=(t<<0|n<<8|i<<16|r<<24)>>>0)>>31)+1,t=n>>>23&255,n&=8388607,255==t?n?NaN:1/0*e:0==t?e*Math.pow(2,-149)*n:e*Math.pow(2,t-150)*(n+Math.pow(2,23))}j.prototype.reset=function(){this.g=this.j};var W=[];function K(){this.g=new Uint8Array(64),this.h=0}function z(e,t){for(;127<t;)e.push(127&t|128),t>>>=7;e.push(t)}function G(e){var t={},n=void 0!==t.N&&t.N;this.o={v:void 0!==t.v&&t.v},this.N=n,t=this.o,W.length?(n=W.pop(),t&&(n.v=t.v),e&&$(n,e),e=n):e=new j(e,t),this.g=e,this.m=this.g.g,this.h=this.i=this.l=-1,this.j=!1}function J(e){var t=e.g;if((t=t.g==t.i)||(t=e.j)||(t=(t=e.g).l||0>t.g||t.g>t.i),t)return!1;e.m=e.g.g;var n=7&(t=H(e.g));return 0!=n&&5!=n&&1!=n&&2!=n&&3!=n&&4!=n?(e.j=!0,!1):(e.i=t,e.l=t>>>3,e.h=n,!0)}function Q(e){switch(e.h){case 0:if(0!=e.h)Q(e);else{for(e=e.g;128&e.h[e.g];)e.g++;e.g++}break;case 1:1!=e.h?Q(e):(e=e.g).g+=8;break;case 2:if(2!=e.h)Q(e);else{var t=H(e.g);(e=e.g).g+=t}break;case 5:5!=e.h?Q(e):(e=e.g).g+=4;break;case 3:for(t=e.l;;){if(!J(e)){e.j=!0;break}if(4==e.h){e.l!=t&&(e.j=!0);break}Q(e)}break;default:e.j=!0}}function X(e,t,n){var i=e.g.i,r=H(e.g);return r=e.g.g+r,e.g.i=r,n(t,e),e.g.g=r,e.g.i=i,t}function Y(e){var t,n=H(e.g),i=(e=e.g).g;if(e.g+=n,e=e.h,T)(t=D)||(t=D=new TextDecoder("utf-8",{fatal:!1})),t=t.decode(e.subarray(i,i+n));else{n=i+n;for(var r,o,s,a=[],c=null;i<n;)128>(r=e[i++])?a.push(r):224>r?i>=n?a.push(65533):(o=e[i++],194>r||128!=(192&o)?(i--,a.push(65533)):a.push((31&r)<<6|63&o)):240>r?i>=n-1?a.push(65533):128!=(192&(o=e[i++]))||224===r&&160>o||237===r&&160<=o||128!=(192&(t=e[i++]))?(i--,a.push(65533)):a.push((15&r)<<12|(63&o)<<6|63&t):244>=r?i>=n-2?a.push(65533):128!=(192&(o=e[i++]))||0!=o-144+(r<<28)>>30||128!=(192&(t=e[i++]))||128!=(192&(s=e[i++]))?(i--,a.push(65533)):(r=(7&r)<<18|(63&o)<<12|(63&t)<<6|63&s,r-=65536,a.push(55296+(r>>10&1023),56320+(1023&r))):a.push(65533),8192<=a.length&&(c=b(c,a),a.length=0);t=b(c,a)}return t}function Z(){this.h=[],this.i=0,this.g=new K}function ee(e,t){0!==t.length&&(e.h.push(t),e.i+=t.length)}function te(e){var t=e.i+e.g.length();if(0===t)return new Uint8Array(0);t=new Uint8Array(t);for(var n=e.h,i=n.length,r=0,o=0;o<i;o++){var s=n[o];0!==s.length&&(t.set(s,r),r+=s.length)}return 0!==(i=(n=e.g).h)&&(t.set(n.g.subarray(0,i),r),n.h=0),e.h=[t],t}function ne(e,t,n){if(null!=n){z(e.g,8*t+5),e=e.g;var i=n;0===(i=(n=0>i?1:0)?-i:i)?0<1/i?F=0:(0,F=2147483648):isNaN(i)?(0,F=2147483647):34028234663852886e22<i?(0,F=(n<<31|2139095040)>>>0):11754943508222875e-54>i?(i=Math.round(i/Math.pow(2,-149)),0,F=(n<<31|i)>>>0):(t=Math.floor(Math.log(i)/Math.LN2),i*=Math.pow(2,-t),i=8388607&Math.round(8388608*i),0,F=(n<<31|t+127<<23|i)>>>0),n=F,e.push(n>>>0&255),e.push(n>>>8&255),e.push(n>>>16&255),e.push(n>>>24&255)}}K.prototype.push=function(e){if(!(this.h+1<this.g.length)){var t=this.g;this.g=new Uint8Array(Math.ceil(1+2*this.g.length)),this.g.set(t)}this.g[this.h++]=e},K.prototype.length=function(){return this.h},K.prototype.end=function(){var e=this.g,t=this.h;return this.h=0,B(e,0,t)},G.prototype.reset=function(){this.g.reset(),this.h=this.l=-1};var ie="function"==typeof Uint8Array;function re(e,t,n){if(null!=e)return"object"==typeof e?ie&&e instanceof Uint8Array?n(e):oe(e,t,n):t(e)}function oe(e,t,n){if(Array.isArray(e)){for(var i=Array(e.length),r=0;r<e.length;r++)i[r]=re(e[r],t,n);return Array.isArray(e)&&e.W&&le(i),i}for(r in i={},e)i[r]=re(e[r],t,n);return i}function se(e){return"number"==typeof e?isFinite(e)?e:String(e):e}var ae,ce={W:{value:!0,configurable:!0}};function le(e){return Array.isArray(e)&&!Object.isFrozen(e)&&Object.defineProperties(e,ce),e}function de(e,t,n){var i=ae;if(ae=null,e||(e=i),i=this.constructor.ca,e||(e=i?[i]:[]),this.j=i?0:-1,this.i=null,this.g=e,e=(i=this.g.length)-1,i&&null!==(i=this.g[e])&&"object"==typeof i&&i.constructor===Object?(this.l=e-this.j,this.h=i):void 0!==t&&-1<t?(this.l=Math.max(t,e+1-this.j),this.h=null):this.l=Number.MAX_VALUE,n)for(t=0;t<n.length;t++)(e=n[t])<this.l?(e+=this.j,(i=this.g[e])?le(i):this.g[e]=ue):(he(this),(i=this.h[e])?le(i):this.h[e]=ue)}var ue=Object.freeze(le([]));function he(e){var t=e.l+e.j;e.g[t]||(e.h=e.g[t]={})}function fe(e,t,n){return-1===t?null:void 0!==n&&n||t>=e.l?e.h?e.h[t]:void 0:e.g[t+e.j]}function _e(e){var t=void 0!==t&&t,n=fe(e,1,t);return null==n&&(n=ue),n===ue&&Ce(e,1,n=le([]),t),n}function pe(e,t,n){return null==(e=null==(e=fe(e,t))?e:+e)?void 0===n?0:n:e}function Ce(e,t,n,i){void 0!==i&&i||t>=e.l?(he(e),e.h[t]=n):e.g[t+e.j]=n}function ge(e,t){e.i||(e.i={});var n=e.i[1];if(!n){var i=_e(e);n=[];for(var r=0;r<i.length;r++)n[r]=new t(i[r]);e.i[1]=n}return n}function me(e,t,n,i){var r=ge(e,n);t=t||new n,e=_e(e),null!=i?(r.splice(i,0,t),e.splice(i,0,Ie(t,!1))):(r.push(t),e.push(Ie(t,!1)))}function Ie(e,t){if(e.i)for(var n in e.i){var i=e.i[n];if(Array.isArray(i))for(var r=0;r<i.length;r++)i[r]&&Ie(i[r],t);else i&&Ie(i,t)}return e.g}function Re(e,t){return null==(e=fe(e,t))?0:e}function ye(e,t){return null==(e=fe(e,t))?"":e}function Se(e,t){if(e=e.m){ee(t,t.g.end());for(var n=0;n<e.length;n++)ee(t,e[n])}}function ve(e,t){if(4==t.h)return!1;var n=t.m;return Q(t),t.N||(t=B(t.g.h,n,t.g.g),(n=e.m)?n.push(t):e.m=[t]),!0}function Ee(e,t){var n=void 0;return new(n||(n=Promise))((function(i,r){function o(e){try{a(t.next(e))}catch(e){r(e)}}function s(e){try{a(t.throw(e))}catch(e){r(e)}}function a(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(o,s)}a((t=t.apply(e,void 0)).next())}))}function we(e){de.call(this,e)}function be(e,t){for(;J(t);)switch(t.i){case 8:var n=H(t.g);Ce(e,1,n);break;case 21:Ce(e,2,n=q(t.g));break;case 26:Ce(e,3,n=Y(t));break;case 34:Ce(e,4,n=Y(t));break;default:if(!ve(e,t))return e}return e}function De(e){de.call(this,e,-1,Me)}de.prototype.toJSON=function(){return oe(Ie(this,!1),se,V)},de.prototype.toString=function(){return Ie(this,!1).toString()},f(we,de),f(De,de),De.prototype.addClassification=function(e,t){me(this,e,we,t)};var Me=[1];function Te(e){de.call(this,e)}function Pe(e,t){for(;J(t);)switch(t.i){case 13:var n=q(t.g);Ce(e,1,n);break;case 21:Ce(e,2,n=q(t.g));break;case 29:Ce(e,3,n=q(t.g));break;case 37:Ce(e,4,n=q(t.g));break;case 45:Ce(e,5,n=q(t.g));break;default:if(!ve(e,t))return e}return e}function xe(e){de.call(this,e,-1,Ae)}f(Te,de),f(xe,de);var Ae=[1];function Oe(e){de.call(this,e)}function Ve(e,t,n){if(n=e.createShader(0===n?e.VERTEX_SHADER:e.FRAGMENT_SHADER),e.shaderSource(n,t),e.compileShader(n),!e.getShaderParameter(n,e.COMPILE_STATUS))throw Error("Could not compile WebGL shader.\n\n"+e.getShaderInfoLog(n));return n}function ke(e){return ge(e,we).map((function(e){return{index:Re(e,1),Y:pe(e,2),label:null!=fe(e,3)?ye(e,3):void 0,displayName:null!=fe(e,4)?ye(e,4):void 0}}))}function Ne(e){return{x:pe(e,1),y:pe(e,2),z:pe(e,3),visibility:null!=fe(e,4)?pe(e,4):void 0}}function Le(e,t){this.h=e,this.g=t,this.l=0}function Ue(e,t,n){return function(e,t){var n=e.g;if(void 0===e.m){var i=Ve(n,"\n  attribute vec2 aVertex;\n  attribute vec2 aTex;\n  varying vec2 vTex;\n  void main(void) {\n    gl_Position = vec4(aVertex, 0.0, 1.0);\n    vTex = aTex;\n  }",0),r=Ve(n,"\n  precision mediump float;\n  varying vec2 vTex;\n  uniform sampler2D sampler0;\n  void main(){\n    gl_FragColor = texture2D(sampler0, vTex);\n  }",1),o=n.createProgram();if(n.attachShader(o,i),n.attachShader(o,r),n.linkProgram(o),!n.getProgramParameter(o,n.LINK_STATUS))throw Error("Could not compile WebGL program.\n\n"+n.getProgramInfoLog(o));i=e.m=o,n.useProgram(i),r=n.getUniformLocation(i,"sampler0"),e.j={I:n.getAttribLocation(i,"aVertex"),H:n.getAttribLocation(i,"aTex"),da:r},e.s=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,e.s),n.enableVertexAttribArray(e.j.I),n.vertexAttribPointer(e.j.I,2,n.FLOAT,!1,0,0),n.bufferData(n.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),e.o=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,e.o),n.enableVertexAttribArray(e.j.H),n.vertexAttribPointer(e.j.H,2,n.FLOAT,!1,0,0),n.bufferData(n.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),n.uniform1i(r,0)}i=e.j,n.useProgram(e.m),n.canvas.width=t.width,n.canvas.height=t.height,n.viewport(0,0,t.width,t.height),n.activeTexture(n.TEXTURE0),e.h.bindTexture2d(t.glName),n.enableVertexAttribArray(i.I),n.bindBuffer(n.ARRAY_BUFFER,e.s),n.vertexAttribPointer(i.I,2,n.FLOAT,!1,0,0),n.enableVertexAttribArray(i.H),n.bindBuffer(n.ARRAY_BUFFER,e.o),n.vertexAttribPointer(i.H,2,n.FLOAT,!1,0,0),n.bindFramebuffer(n.DRAW_FRAMEBUFFER?n.DRAW_FRAMEBUFFER:n.FRAMEBUFFER,null),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),n.colorMask(!0,!0,!0,!0),n.drawArrays(n.TRIANGLE_FAN,0,4),n.disableVertexAttribArray(i.I),n.disableVertexAttribArray(i.H),n.bindBuffer(n.ARRAY_BUFFER,null),e.h.bindTexture2d(0)}(e,t),"function"==typeof e.g.canvas.transferToImageBitmap?Promise.resolve(e.g.canvas.transferToImageBitmap()):n?Promise.resolve(e.g.canvas):"function"==typeof createImageBitmap?createImageBitmap(e.g.canvas):(void 0===e.i&&(e.i=document.createElement("canvas")),new Promise((function(t){e.i.height=e.g.canvas.height,e.i.width=e.g.canvas.width,e.i.getContext("2d",{}).drawImage(e.g.canvas,0,0,e.g.canvas.width,e.g.canvas.height),t(e.i)})))}function Be(e){this.g=e}f(Oe,de);var Fe=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function je(e,t){return t+e}function $e(e,t){window[e]=t}function He(e){if(this.g=e,this.listeners={},this.j={},this.F={},this.m={},this.s={},this.G=this.o=this.R=!0,this.C=Promise.resolve(),this.P="",this.B={},this.locateFile=e&&e.locateFile||je,"object"==typeof window)var t=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else{if("undefined"==typeof location)throw Error("solutions can only be loaded on a web page or in a web worker");t=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/"}if(this.S=t,e.options)for(var n=(t=s(Object.keys(e.options))).next();!n.done;n=t.next()){n=n.value;var i=e.options[n].default;void 0!==i&&(this.j[n]="function"==typeof i?i():i)}}function qe(e){return Ee(e,(function e(){var t,n,i,r,o,s,c,l,d,u,h,f=this;return S(e,(function(e){switch(e.g){case 1:return t=f,f.R?(n=function(e,t){return void 0===e.g.files?[]:"function"==typeof e.g.files?e.g.files(t):e.g.files}(f,f.j),g(e,function(){return Ee(this,(function e(){return S(e,(function(e){switch(e.g){case 1:return e.m=2,g(e,WebAssembly.instantiate(Fe),4);case 4:e.g=3,e.m=0;break;case 2:return e.m=0,e.j=null,e.return(!1);case 3:return e.return(!0)}}))}))}(),2)):e.return();case 2:if(i=e.h,"object"==typeof window)return $e("createMediapipeSolutionsWasm",{locateFile:f.locateFile}),$e("createMediapipeSolutionsPackedAssets",{locateFile:f.locateFile}),s=n.filter((function(e){return void 0!==e.data})),c=n.filter((function(e){return void 0===e.data})),l=Promise.all(s.map((function(e){var n=We(t,e.url);if(void 0!==e.path){var i=e.path;n=n.then((function(e){return t.overrideFile(i,e),Promise.resolve(e)}))}return n}))),d=Promise.all(c.map((function(e){return void 0===e.simd||e.simd&&i||!e.simd&&!i?function(e){var t=document.createElement("script");return t.setAttribute("src",e),t.setAttribute("crossorigin","anonymous"),new Promise((function(e){t.addEventListener("load",(function(){e()}),!1),t.addEventListener("error",(function(){e()}),!1),document.body.appendChild(t)}))}(t.locateFile(e.url,t.S)):Promise.resolve()}))).then((function(){return Ee(t,(function e(){var t,n,i=this;return S(e,(function(e){if(1==e.g)return t=window.createMediapipeSolutionsWasm,n=window.createMediapipeSolutionsPackedAssets,g(e,t(n),2);i.h=e.h,e.g=0}))}))})),u=Ee(t,(function e(){var t=this;return S(e,(function(e){return t.g.graph&&t.g.graph.url?e=g(e,We(t,t.g.graph.url),0):(e.g=0,e=void 0),e}))})),g(e,Promise.all([d,l,u]),7);if("function"!=typeof importScripts)throw Error("solutions can only be loaded on a web page or in a web worker");return r=n.filter((function(e){return void 0===e.simd||e.simd&&i||!e.simd&&!i})).map((function(e){return t.locateFile(e.url,t.S)})),importScripts.apply(null,a(r)),g(e,createMediapipeSolutionsWasm(Module),6);case 6:f.h=e.h,f.l=new OffscreenCanvas(1,1),f.h.canvas=f.l,o=f.h.GL.createContext(f.l,{antialias:!1,alpha:!1,ba:"undefined"!=typeof WebGL2RenderingContext?2:1}),f.h.GL.makeContextCurrent(o),e.g=4;break;case 7:if(f.l=document.createElement("canvas"),!(h=f.l.getContext("webgl2",{}))&&!(h=f.l.getContext("webgl",{})))return alert("Failed to create WebGL canvas context when passing video frame."),e.return();f.D=h,f.h.canvas=f.l,f.h.createContext(f.l,!0,!0,{});case 4:f.i=new f.h.SolutionWasm,f.R=!1,e.g=0}}))}))}function We(e,t){return Ee(e,(function e(){var n,i,r=this;return S(e,(function(e){return t in r.F?e.return(r.F[t]):(n=r.locateFile(t,""),i=fetch(n).then((function(e){return e.arrayBuffer()})),r.F[t]=i,e.return(i))}))}))}function Ke(e,t,n){return Ee(e,(function e(){var i,r,o,a,c,l,d,u,h,f,_,p,C,m,I=this;return S(e,(function(e){switch(e.g){case 1:if(!n)return e.return(t);for(i={},r=0,o=s(Object.keys(n)),a=o.next();!a.done;a=o.next())c=a.value,"string"!=typeof(l=n[c])&&"texture"===l.type&&void 0!==t[l.stream]&&++r;1<r&&(I.G=!1),d=s(Object.keys(n)),a=d.next();case 2:if(a.done){e.g=4;break}if(u=a.value,"string"==typeof(h=n[u]))return C=i,m=u,g(e,function(e,t,n){return Ee(e,(function e(){var i,r=this;return S(e,(function(e){return"number"==typeof n||n instanceof Uint8Array||n instanceof r.h.Uint8BlobList?e.return(n):n instanceof r.h.Texture2dDataOut?((i=r.s[t])||(i=new Le(r.h,r.D),r.s[t]=i),e.return(Ue(i,n,r.G))):e.return(void 0)}))}))}(I,u,t[h]),14);if(f=t[h.stream],"detection_list"===h.type){if(f){for(var R=f.getRectList(),y=f.getLandmarksList(),v=f.getClassificationsList(),E=[],w=0;w<R.size();++w){var b=R.get(w);e:{var D=new Oe;for(b=new G(b);J(b);)switch(b.i){case 13:var M=q(b.g);Ce(D,1,M);break;case 21:Ce(D,2,M=q(b.g));break;case 29:Ce(D,3,M=q(b.g));break;case 37:Ce(D,4,M=q(b.g));break;case 45:Ce(D,5,M=q(b.g));break;case 48:for(var T=b.g,P=128,x=0,A=M=0;4>A&&128<=P;A++)x|=(127&(P=T.h[T.g++]))<<7*A;if(128<=P&&(x|=(127&(P=T.h[T.g++]))<<28,M|=(127&P)>>4),128<=P)for(A=0;5>A&&128<=P;A++)M|=(127&(P=T.h[T.g++]))<<7*A+3;128>P?(T=x>>>0,(M=2147483648&(P=M>>>0))&&(P=~P>>>0,0==(T=1+~T>>>0)&&(P=P+1>>>0)),T=4294967296*P+(T>>>0),M=M?-T:T):(T.l=!0,M=void 0),Ce(D,6,M);break;default:if(!ve(D,b))break e}}D={Z:pe(D,1),$:pe(D,2),height:pe(D,3),width:pe(D,4),rotation:pe(D,5,0),X:Re(D,6)},M=y.get(w);e:for(b=new xe,M=new G(M);J(M);)if(10===M.i)me(b,T=X(M,new Te,Pe),Te,void 0);else if(!ve(b,M))break e;b=ge(b,Te).map(Ne),T=v.get(w);e:for(M=new De,T=new G(T);J(T);)if(10===T.i)M.addClassification(X(T,new we,be));else if(!ve(M,T))break e;D={T:D,O:b,M:ke(M)},E.push(D)}R=E}else R=[];i[u]=R,e.g=7;break}if("proto_list"===h.type){if(f){for(R=Array(f.size()),y=0;y<f.size();y++)R[y]=f.get(y);f.delete()}else R=[];i[u]=R,e.g=7;break}if(void 0===f){e.g=3;break}if("float_list"===h.type){i[u]=f,e.g=7;break}if("proto"===h.type){i[u]=f,e.g=7;break}if("texture"!==h.type)throw Error("Unknown output config type: '"+h.type+"'");return(_=I.s[u])||(_=new Le(I.h,I.D),I.s[u]=_),g(e,Ue(_,f,I.G),13);case 13:p=e.h,i[u]=p;case 7:h.transform&&i[u]&&(i[u]=h.transform(i[u])),e.g=3;break;case 14:C[m]=e.h;case 3:a=d.next(),e.g=2;break;case 4:return e.return(i)}}))}))}function ze(e,t){for(var n=t.name||"$",i=[].concat(a(t.wants)),r=new e.h.StringList,o=s(t.wants),c=o.next();!c.done;c=o.next())r.push_back(c.value);o=e.h.PacketListener.implement({onResults:function(r){for(var o={},s=0;s<t.wants.length;++s)o[i[s]]=r.get(s);var a=e.listeners[n];a&&(e.C=Ke(e,o,t.outs).then((function(n){n=a(n);for(var r=0;r<t.wants.length;++r){var s=o[i[r]];"object"==typeof s&&s.hasOwnProperty&&s.hasOwnProperty("delete")&&s.delete()}n&&(e.C=n)})))}}),e.i.attachMultiListener(r,o),r.delete()}function Ge(e){return void 0===e&&(e=0),1===e?"selfie_segmentation_landscape.tflite":"selfie_segmentation.tflite"}function Je(e){var t=this;e=e||{},this.g=new He({locateFile:e.locateFile,files:function(e){return[{simd:!0,url:"selfie_segmentation_solution_simd_wasm_bin.js"},{simd:!1,url:"selfie_segmentation_solution_wasm_bin.js"},{data:!0,url:Ge(e.modelSelection)}]},graph:{url:"selfie_segmentation.binarypb"},listeners:[{wants:["segmentation_mask","image_transformed"],outs:{image:{type:"texture",stream:"image_transformed"},segmentationMask:{type:"texture",stream:"segmentation_mask"}}}],inputs:{image:{type:"video",stream:"input_frames_gpu"}},options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},modelSelection:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorModelSelection",fieldName:"int_value"},onChange:function(e){return Ee(t,(function t(){var n,i,r,o=this;return S(t,(function(t){return 1==t.g?(n=Ge(e),i="third_party/mediapipe/modules/selfie_segmentation/"+n,g(t,We(o.g,n),2)):(r=t.h,o.g.overrideFile(i,r),t.return(!0))}))}))}}}})}(e=He.prototype).close=function(){return this.i&&this.i.delete(),Promise.resolve()},e.reset=function(){return Ee(this,(function e(){var t=this;return S(e,(function(e){t.i&&(t.i.reset(),t.m={},t.s={}),e.g=0}))}))},e.setOptions=function(e,t){var n=this;if(t=t||this.g.options){for(var i=[],r=[],o={},a=s(Object.keys(e)),c=a.next();!c.done;o={K:o.K,L:o.L},c=a.next()){var l=c.value;l in this.j&&this.j[l]===e[l]||(this.j[l]=e[l],void 0!==(c=t[l])&&(c.onChange&&(o.K=c.onChange,o.L=e[l],i.push(function(e){return function(){return Ee(n,(function t(){var n=this;return S(t,(function(t){if(1==t.g)return g(t,e.K(e.L),2);!0===t.h&&(n.o=!0),t.g=0}))}))}}(o))),c.graphOptionXref&&(l={valueNumber:1===c.type?e[l]:0,valueBoolean:0===c.type&&e[l],valueString:2===c.type?e[l]:""},c=Object.assign(Object.assign(Object.assign({},{calculatorName:"",calculatorIndex:0}),c.graphOptionXref),l),r.push(c))))}0===i.length&&0===r.length||(this.o=!0,this.A=(void 0===this.A?[]:this.A).concat(r),this.u=(void 0===this.u?[]:this.u).concat(i))}},e.initialize=function(){return Ee(this,(function e(){var t=this;return S(e,(function(e){return 1==e.g?g(e,qe(t),2):3!=e.g?g(e,Ee(t,(function e(){var t,n,i,r,o,a,c,l,d=this;return S(e,(function(e){if(1==e.g)return d.g.graph&&d.g.graph.url&&d.P===d.g.graph.url?e.return():(d.o=!0,d.g.graph&&d.g.graph.url?(d.P=d.g.graph.url,g(e,We(d,d.g.graph.url),3)):void(e.g=2));for(2!=e.g&&(t=e.h,d.i.loadGraph(t)),n=s(Object.keys(d.B)),i=n.next();!i.done;i=n.next())r=i.value,d.i.overrideFile(r,d.B[r]);if(d.B={},d.g.listeners)for(o=s(d.g.listeners),a=o.next();!a.done;a=o.next())c=a.value,ze(d,c);l=d.j,d.j={},d.setOptions(l),e.g=0}))})),3):g(e,function(e){return Ee(e,(function e(){var t,n,i,r,o,a,c=this;return S(e,(function(e){switch(e.g){case 1:if(!c.o)return e.return();if(!c.u){e.g=2;break}t=s(c.u),n=t.next();case 3:if(n.done){e.g=5;break}return g(e,(0,n.value)(),4);case 4:n=t.next(),e.g=3;break;case 5:c.u=void 0;case 2:if(c.A){for(i=new c.h.GraphOptionChangeRequestList,r=s(c.A),o=r.next();!o.done;o=r.next())a=o.value,i.push_back(a);c.i.changeOptions(i),i.delete(),c.A=void 0}c.o=!1,e.g=0}}))}))}(t),0)}))}))},e.overrideFile=function(e,t){this.i?this.i.overrideFile(e,t):this.B[e]=t},e.clearOverriddenFiles=function(){this.B={},this.i&&this.i.clearOverriddenFiles()},e.send=function(e,t){return Ee(this,(function n(){var i,r,o,a,c,l,d,u,h,f=this;return S(n,(function(n){switch(n.g){case 1:return f.g.inputs?(i=1e3*(null==t?performance.now():t),g(n,f.C,2)):n.return();case 2:return g(n,f.initialize(),3);case 3:for(r=new f.h.PacketDataList,o=s(Object.keys(e)),a=o.next();!a.done;a=o.next())if(c=a.value,l=f.g.inputs[c]){e:{var _=f,p=e[c];switch(l.type){case"video":var C=_.m[l.stream];if(C||(C=new Le(_.h,_.D),_.m[l.stream]=C),0===(_=C).l&&(_.l=_.h.createTexture()),"undefined"!=typeof HTMLVideoElement&&p instanceof HTMLVideoElement){var m=p.videoWidth;C=p.videoHeight}else"undefined"!=typeof HTMLImageElement&&p instanceof HTMLImageElement?(m=p.naturalWidth,C=p.naturalHeight):(m=p.width,C=p.height);C={glName:_.l,width:m,height:C},(m=_.g).canvas.width=C.width,m.canvas.height=C.height,m.activeTexture(m.TEXTURE0),_.h.bindTexture2d(_.l),m.texImage2D(m.TEXTURE_2D,0,m.RGBA,m.RGBA,m.UNSIGNED_BYTE,p),_.h.bindTexture2d(0),_=C;break e;case"detections":for((C=_.m[l.stream])||(C=new Be(_.h),_.m[l.stream]=C),(_=C).data||(_.data=new _.g.DetectionListData),_.data.reset(p.length),C=0;C<p.length;++C){m=p[C];var I=_.data,R=I.setBoundingBox,y=C,S=m.T,v=new Oe;Ce(v,1,S.Z),Ce(v,2,S.$),Ce(v,3,S.height),Ce(v,4,S.width),Ce(v,5,S.rotation),Ce(v,6,S.X);var E=S=new Z;ne(E,1,fe(v,1)),ne(E,2,fe(v,2)),ne(E,3,fe(v,3)),ne(E,4,fe(v,4)),ne(E,5,fe(v,5));var w=fe(v,6);if(null!=w&&null!=w){z(E.g,48);var b=E.g,D=w;w=0>D;var M=(D=Math.abs(D))>>>0;for(D=Math.floor((D-M)/4294967296),D>>>=0,w&&(D=~D>>>0,4294967295<(M=1+(~M>>>0))&&(M=0,4294967295<++D&&(D=0))),w=F=M,M=D;0<M||127<w;)b.push(127&w|128),w=(w>>>7|M<<25)>>>0,M>>>=7;b.push(w)}if(Se(v,E),S=te(S),R.call(I,y,S),m.O)for(I=0;I<m.O.length;++I)E=!!(v=m.O[I]).visibility,y=(R=_.data).addNormalizedLandmark,S=C,v=Object.assign(Object.assign({},v),{visibility:E?v.visibility:0}),Ce(E=new Te,1,v.x),Ce(E,2,v.y),Ce(E,3,v.z),v.visibility&&Ce(E,4,v.visibility),ne(b=v=new Z,1,fe(E,1)),ne(b,2,fe(E,2)),ne(b,3,fe(E,3)),ne(b,4,fe(E,4)),ne(b,5,fe(E,5)),Se(E,b),v=te(v),y.call(R,S,v);if(m.M)for(I=0;I<m.M.length;++I){if(y=(R=_.data).addClassification,S=C,v=m.M[I],Ce(E=new we,2,v.Y),v.index&&Ce(E,1,v.index),v.label&&Ce(E,3,v.label),v.displayName&&Ce(E,4,v.displayName),b=v=new Z,null!=(M=fe(E,1))&&null!=M)if(z(b.g,8),w=b.g,0<=M)z(w,M);else{for(D=0;9>D;D++)w.push(127&M|128),M>>=7;w.push(1)}ne(b,2,fe(E,2)),null!=(w=fe(E,3))&&(w=x(w),z(b.g,26),z(b.g,w.length),ee(b,b.g.end()),ee(b,w)),null!=(w=fe(E,4))&&(w=x(w),z(b.g,34),z(b.g,w.length),ee(b,b.g.end()),ee(b,w)),Se(E,b),v=te(v),y.call(R,S,v)}}_=_.data;break e;default:_={}}}switch(d=_,u=l.stream,l.type){case"video":r.pushTexture2d(Object.assign(Object.assign({},d),{stream:u,timestamp:i}));break;case"detections":(h=d).stream=u,h.timestamp=i,r.pushDetectionList(h);break;default:throw Error("Unknown input config type: '"+l.type+"'")}}return f.i.send(r),g(n,f.C,4);case 4:r.delete(),n.g=0}}))}))},e.onResults=function(e,t){this.listeners[t||"$"]=e},w("Solution",He),w("OptionType",{BOOL:0,NUMBER:1,aa:2,0:"BOOL",1:"NUMBER",2:"STRING"}),(e=Je.prototype).close=function(){return this.g.close(),Promise.resolve()},e.onResults=function(e){this.g.onResults(e)},e.initialize=function(){return Ee(this,(function e(){var t=this;return S(e,(function(e){return g(e,t.g.initialize(),0)}))}))},e.reset=function(){this.g.reset()},e.send=function(e){return Ee(this,(function t(){var n=this;return S(t,(function(t){return g(t,n.g.send(e),0)}))}))},e.setOptions=function(e){this.g.setOptions(e)},w("SelfieSegmentation",Je),w("VERSION","0.1.1632777926")}).call(this)},7282:()=>{
/** @license zlib.js 2012 - imaya [ https://github.com/imaya/zlib.js ] The MIT License */(function(){"use strict";function e(e){throw e}var t=void 0,n=!0,i=this;function r(e,n){var r,o=e.split("."),s=i;!(o[0]in s)&&s.execScript&&s.execScript("var "+o[0]);for(;o.length&&(r=o.shift());)o.length||n===t?s=s[r]?s[r]:s[r]={}:s[r]=n}var o="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array&&"undefined"!=typeof DataView;function s(t,n){this.index="number"==typeof n?n:0,this.i=0,this.buffer=t instanceof(o?Uint8Array:Array)?t:new(o?Uint8Array:Array)(32768),2*this.buffer.length<=this.index&&e(Error("invalid index")),this.buffer.length<=this.index&&this.f()}s.prototype.f=function(){var e,t=this.buffer,n=t.length,i=new(o?Uint8Array:Array)(n<<1);if(o)i.set(t);else for(e=0;e<n;++e)i[e]=t[e];return this.buffer=i},s.prototype.d=function(e,t,n){var i,r=this.buffer,o=this.index,s=this.i,a=r[o];if(n&&1<t&&(e=8<t?(h[255&e]<<24|h[e>>>8&255]<<16|h[e>>>16&255]<<8|h[e>>>24&255])>>32-t:h[e]>>8-t),8>t+s)a=a<<t|e,s+=t;else for(i=0;i<t;++i)a=a<<1|e>>t-i-1&1,8==++s&&(s=0,r[o++]=h[a],a=0,o===r.length&&(r=this.f()));r[o]=a,this.buffer=r,this.i=s,this.index=o},s.prototype.finish=function(){var e,t=this.buffer,n=this.index;return 0<this.i&&(t[n]<<=8-this.i,t[n]=h[t[n]],n++),o?e=t.subarray(0,n):(t.length=n,e=t),e};var a,c=new(o?Uint8Array:Array)(256);for(a=0;256>a;++a){for(var l=u=a,d=7,u=u>>>1;u;u>>>=1)l<<=1,l|=1&u,--d;c[a]=(l<<d&255)>>>0}var h=c;function f(e){this.buffer=new(o?Uint16Array:Array)(2*e),this.length=0}function _(e){var t,n,i,r,s,a,c,l,d,u,h=e.length,f=0,_=Number.POSITIVE_INFINITY;for(l=0;l<h;++l)e[l]>f&&(f=e[l]),e[l]<_&&(_=e[l]);for(t=1<<f,n=new(o?Uint32Array:Array)(t),i=1,r=0,s=2;i<=f;){for(l=0;l<h;++l)if(e[l]===i){for(a=0,c=r,d=0;d<i;++d)a=a<<1|1&c,c>>=1;for(u=i<<16|l,d=a;d<t;d+=s)n[d]=u;++r}++i,r<<=1,s<<=1}return[n,f,_]}function p(e,t){this.h=g,this.w=0,this.input=o&&e instanceof Array?new Uint8Array(e):e,this.b=0,t&&(t.lazy&&(this.w=t.lazy),"number"==typeof t.compressionType&&(this.h=t.compressionType),t.outputBuffer&&(this.a=o&&t.outputBuffer instanceof Array?new Uint8Array(t.outputBuffer):t.outputBuffer),"number"==typeof t.outputIndex&&(this.b=t.outputIndex)),this.a||(this.a=new(o?Uint8Array:Array)(32768))}f.prototype.getParent=function(e){return 2*((e-2)/4|0)},f.prototype.push=function(e,t){var n,i,r,o=this.buffer;for(n=this.length,o[this.length++]=t,o[this.length++]=e;0<n&&(i=this.getParent(n),o[n]>o[i]);)r=o[n],o[n]=o[i],o[i]=r,r=o[n+1],o[n+1]=o[i+1],o[i+1]=r,n=i;return this.length},f.prototype.pop=function(){var e,t,n,i,r,o=this.buffer;for(t=o[0],e=o[1],this.length-=2,o[0]=o[this.length],o[1]=o[this.length+1],r=0;!((i=2*r+2)>=this.length)&&(i+2<this.length&&o[i+2]>o[i]&&(i+=2),o[i]>o[r]);)n=o[r],o[r]=o[i],o[i]=n,n=o[r+1],o[r+1]=o[i+1],o[i+1]=n,r=i;return{index:e,value:t,length:this.length}};var C,g=2,m={NONE:0,r:1,k:g,N:3},I=[];for(C=0;288>C;C++)switch(n){case 143>=C:I.push([C+48,8]);break;case 255>=C:I.push([C-144+400,9]);break;case 279>=C:I.push([C-256+0,7]);break;case 287>=C:I.push([C-280+192,8]);break;default:e("invalid literal: "+C)}function R(e,t){this.length=e,this.G=t}p.prototype.j=function(){var i,r,a,c,l=this.input;switch(this.h){case 0:for(a=0,c=l.length;a<c;){var d,u,h,f=r=o?l.subarray(a,a+65535):l.slice(a,a+65535),_=(a+=r.length)===c,p=t,C=t,m=this.a,R=this.b;if(o){for(m=new Uint8Array(this.a.buffer);m.length<=R+f.length+5;)m=new Uint8Array(m.length<<1);m.set(this.a)}if(d=_?1:0,m[R++]=0|d,h=65536+~(u=f.length)&65535,m[R++]=255&u,m[R++]=u>>>8&255,m[R++]=255&h,m[R++]=h>>>8&255,o)m.set(f,R),R+=f.length,m=m.subarray(0,R);else{for(p=0,C=f.length;p<C;++p)m[R++]=f[p];m.length=R}this.b=R,this.a=m}break;case 1:var y=new s(o?new Uint8Array(this.a.buffer):this.a,this.b);y.d(1,1,n),y.d(1,2,n);var S,E,D,M=v(this,l);for(S=0,E=M.length;S<E;S++)if(D=M[S],s.prototype.d.apply(y,I[D]),256<D)y.d(M[++S],M[++S],n),y.d(M[++S],5),y.d(M[++S],M[++S],n);else if(256===D)break;this.a=y.finish(),this.b=this.a.length;break;case g:var T,P,x,A,O,V,k,N,L,U,B,F,j,$,H,q=new s(o?new Uint8Array(this.a.buffer):this.a,this.b),W=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],K=Array(19);for(T=g,q.d(1,1,n),q.d(T,2,n),P=v(this,l),k=b(V=w(this.L,15)),L=b(N=w(this.K,7)),x=286;257<x&&0===V[x-1];x--);for(A=30;1<A&&0===N[A-1];A--);var z,G,J,Q,X,Y,Z=x,ee=A,te=new(o?Uint32Array:Array)(Z+ee),ne=new(o?Uint32Array:Array)(316),ie=new(o?Uint8Array:Array)(19);for(z=G=0;z<Z;z++)te[G++]=V[z];for(z=0;z<ee;z++)te[G++]=N[z];if(!o)for(z=0,Q=ie.length;z<Q;++z)ie[z]=0;for(z=X=0,Q=te.length;z<Q;z+=G){for(G=1;z+G<Q&&te[z+G]===te[z];++G);if(J=G,0===te[z])if(3>J)for(;0<J--;)ne[X++]=0,ie[0]++;else for(;0<J;)(Y=138>J?J:138)>J-3&&Y<J&&(Y=J-3),10>=Y?(ne[X++]=17,ne[X++]=Y-3,ie[17]++):(ne[X++]=18,ne[X++]=Y-11,ie[18]++),J-=Y;else if(ne[X++]=te[z],ie[te[z]]++,3>--J)for(;0<J--;)ne[X++]=te[z],ie[te[z]]++;else for(;0<J;)(Y=6>J?J:6)>J-3&&Y<J&&(Y=J-3),ne[X++]=16,ne[X++]=Y-3,ie[16]++,J-=Y}for(i=o?ne.subarray(0,X):ne.slice(0,X),U=w(ie,7),$=0;19>$;$++)K[$]=U[W[$]];for(O=19;4<O&&0===K[O-1];O--);for(B=b(U),q.d(x-257,5,n),q.d(A-1,5,n),q.d(O-4,4,n),$=0;$<O;$++)q.d(K[$],3,n);for($=0,H=i.length;$<H;$++)if(F=i[$],q.d(B[F],U[F],n),16<=F){switch($++,F){case 16:j=2;break;case 17:j=3;break;case 18:j=7;break;default:e("invalid code: "+F)}q.d(i[$],j,n)}var re,oe,se,ae,ce,le,de,ue,he=[k,V],fe=[L,N];for(ce=he[0],le=he[1],de=fe[0],ue=fe[1],re=0,oe=P.length;re<oe;++re)if(se=P[re],q.d(ce[se],le[se],n),256<se)q.d(P[++re],P[++re],n),ae=P[++re],q.d(de[ae],ue[ae],n),q.d(P[++re],P[++re],n);else if(256===se)break;this.a=q.finish(),this.b=this.a.length;break;default:e("invalid compression type")}return this.a};var y=function(){function t(t){switch(n){case 3===t:return[257,t-3,0];case 4===t:return[258,t-4,0];case 5===t:return[259,t-5,0];case 6===t:return[260,t-6,0];case 7===t:return[261,t-7,0];case 8===t:return[262,t-8,0];case 9===t:return[263,t-9,0];case 10===t:return[264,t-10,0];case 12>=t:return[265,t-11,1];case 14>=t:return[266,t-13,1];case 16>=t:return[267,t-15,1];case 18>=t:return[268,t-17,1];case 22>=t:return[269,t-19,2];case 26>=t:return[270,t-23,2];case 30>=t:return[271,t-27,2];case 34>=t:return[272,t-31,2];case 42>=t:return[273,t-35,3];case 50>=t:return[274,t-43,3];case 58>=t:return[275,t-51,3];case 66>=t:return[276,t-59,3];case 82>=t:return[277,t-67,4];case 98>=t:return[278,t-83,4];case 114>=t:return[279,t-99,4];case 130>=t:return[280,t-115,4];case 162>=t:return[281,t-131,5];case 194>=t:return[282,t-163,5];case 226>=t:return[283,t-195,5];case 257>=t:return[284,t-227,5];case 258===t:return[285,t-258,0];default:e("invalid length: "+t)}}var i,r,o=[];for(i=3;258>=i;i++)r=t(i),o[i]=r[2]<<24|r[1]<<16|r[0];return o}(),S=o?new Uint32Array(y):y;function v(i,r){function s(t,i){var r,o,s,a,c=t.G,l=[],d=0;switch(r=S[t.length],l[d++]=65535&r,l[d++]=r>>16&255,l[d++]=r>>24,n){case 1===c:o=[0,c-1,0];break;case 2===c:o=[1,c-2,0];break;case 3===c:o=[2,c-3,0];break;case 4===c:o=[3,c-4,0];break;case 6>=c:o=[4,c-5,1];break;case 8>=c:o=[5,c-7,1];break;case 12>=c:o=[6,c-9,2];break;case 16>=c:o=[7,c-13,2];break;case 24>=c:o=[8,c-17,3];break;case 32>=c:o=[9,c-25,3];break;case 48>=c:o=[10,c-33,4];break;case 64>=c:o=[11,c-49,4];break;case 96>=c:o=[12,c-65,5];break;case 128>=c:o=[13,c-97,5];break;case 192>=c:o=[14,c-129,6];break;case 256>=c:o=[15,c-193,6];break;case 384>=c:o=[16,c-257,7];break;case 512>=c:o=[17,c-385,7];break;case 768>=c:o=[18,c-513,8];break;case 1024>=c:o=[19,c-769,8];break;case 1536>=c:o=[20,c-1025,9];break;case 2048>=c:o=[21,c-1537,9];break;case 3072>=c:o=[22,c-2049,10];break;case 4096>=c:o=[23,c-3073,10];break;case 6144>=c:o=[24,c-4097,11];break;case 8192>=c:o=[25,c-6145,11];break;case 12288>=c:o=[26,c-8193,12];break;case 16384>=c:o=[27,c-12289,12];break;case 24576>=c:o=[28,c-16385,13];break;case 32768>=c:o=[29,c-24577,13];break;default:e("invalid distance")}for(r=o,l[d++]=r[0],l[d++]=r[1],l[d++]=r[2],s=0,a=l.length;s<a;++s)g[m++]=l[s];R[l[0]]++,y[l[3]]++,I=t.length+i-1,_=null}var a,c,l,d,u,h,f,_,p,C={},g=o?new Uint16Array(2*r.length):[],m=0,I=0,R=new(o?Uint32Array:Array)(286),y=new(o?Uint32Array:Array)(30),v=i.w;if(!o){for(l=0;285>=l;)R[l++]=0;for(l=0;29>=l;)y[l++]=0}for(R[256]=1,a=0,c=r.length;a<c;++a){for(l=u=0,d=3;l<d&&a+l!==c;++l)u=u<<8|r[a+l];if(C[u]===t&&(C[u]=[]),h=C[u],!(0<I--)){for(;0<h.length&&32768<a-h[0];)h.shift();if(a+3>=c){for(_&&s(_,-1),l=0,d=c-a;l<d;++l)p=r[a+l],g[m++]=p,++R[p];break}0<h.length?(f=E(r,a,h),_?_.length<f.length?(p=r[a-1],g[m++]=p,++R[p],s(f,0)):s(_,-1):f.length<v?_=f:s(f,0)):_?s(_,-1):(p=r[a],g[m++]=p,++R[p])}h.push(a)}return g[m++]=256,R[256]++,i.L=R,i.K=y,o?g.subarray(0,m):g}function E(e,t,n){var i,r,o,s,a,c,l=0,d=e.length;s=0,c=n.length;e:for(;s<c;s++){if(i=n[c-s-1],o=3,3<l){for(a=l;3<a;a--)if(e[i+a-1]!==e[t+a-1])continue e;o=l}for(;258>o&&t+o<d&&e[i+o]===e[t+o];)++o;if(o>l&&(r=i,l=o),258===o)break}return new R(l,t-r)}function w(e,t){var n,i,r,s,a,c=e.length,l=new f(572),d=new(o?Uint8Array:Array)(c);if(!o)for(s=0;s<c;s++)d[s]=0;for(s=0;s<c;++s)0<e[s]&&l.push(s,e[s]);if(n=Array(l.length/2),i=new(o?Uint32Array:Array)(l.length/2),1===n.length)return d[l.pop().index]=1,d;for(s=0,a=l.length/2;s<a;++s)n[s]=l.pop(),i[s]=n[s].value;for(r=function(e,t,n){function i(e){var n=_[e][p[e]];n===t?(i(e+1),i(e+1)):--h[n],++p[e]}var r,s,a,c,l,d=new(o?Uint16Array:Array)(n),u=new(o?Uint8Array:Array)(n),h=new(o?Uint8Array:Array)(t),f=Array(n),_=Array(n),p=Array(n),C=(1<<n)-t,g=1<<n-1;for(d[n-1]=t,s=0;s<n;++s)C<g?u[s]=0:(u[s]=1,C-=g),C<<=1,d[n-2-s]=(d[n-1-s]/2|0)+t;for(d[0]=u[0],f[0]=Array(d[0]),_[0]=Array(d[0]),s=1;s<n;++s)d[s]>2*d[s-1]+u[s]&&(d[s]=2*d[s-1]+u[s]),f[s]=Array(d[s]),_[s]=Array(d[s]);for(r=0;r<t;++r)h[r]=n;for(a=0;a<d[n-1];++a)f[n-1][a]=e[a],_[n-1][a]=a;for(r=0;r<n;++r)p[r]=0;for(1===u[n-1]&&(--h[0],++p[n-1]),s=n-2;0<=s;--s){for(c=r=0,l=p[s+1],a=0;a<d[s];a++)(c=f[s+1][l]+f[s+1][l+1])>e[r]?(f[s][a]=c,_[s][a]=t,l+=2):(f[s][a]=e[r],_[s][a]=r,++r);p[s]=0,1===u[s]&&i(s)}return h}(i,i.length,t),s=0,a=n.length;s<a;++s)d[n[s].index]=r[s];return d}function b(e){var t,n,i,r,s=new(o?Uint16Array:Array)(e.length),a=[],c=[],l=0;for(t=0,n=e.length;t<n;t++)a[e[t]]=1+(0|a[e[t]]);for(t=1,n=16;t<=n;t++)c[t]=l,l+=0|a[t],l<<=1;for(t=0,n=e.length;t<n;t++)for(l=c[e[t]],c[e[t]]+=1,i=s[t]=0,r=e[t];i<r;i++)s[t]=s[t]<<1|1&l,l>>>=1;return s}function D(t,n){switch(this.l=[],this.m=32768,this.e=this.g=this.c=this.q=0,this.input=o?new Uint8Array(t):t,this.s=!1,this.n=T,this.B=!1,!n&&(n={})||(n.index&&(this.c=n.index),n.bufferSize&&(this.m=n.bufferSize),n.bufferType&&(this.n=n.bufferType),n.resize&&(this.B=n.resize)),this.n){case M:this.b=32768,this.a=new(o?Uint8Array:Array)(32768+this.m+258);break;case T:this.b=0,this.a=new(o?Uint8Array:Array)(this.m),this.f=this.J,this.t=this.H,this.o=this.I;break;default:e(Error("invalid inflate mode"))}}var M=0,T=1,P={D:M,C:T};D.prototype.p=function(){for(;!this.s;){var i=J(this,3);switch(1&i&&(this.s=n),i>>>=1){case 0:var r=this.input,s=this.c,a=this.a,c=this.b,l=r.length,d=t,u=a.length,h=t;switch(this.e=this.g=0,s+1>=l&&e(Error("invalid uncompressed block header: LEN")),d=r[s++]|r[s++]<<8,s+1>=l&&e(Error("invalid uncompressed block header: NLEN")),d===~(r[s++]|r[s++]<<8)&&e(Error("invalid uncompressed block header: length verify")),s+d>r.length&&e(Error("input buffer is broken")),this.n){case M:for(;c+d>a.length;){if(d-=h=u-c,o)a.set(r.subarray(s,s+h),c),c+=h,s+=h;else for(;h--;)a[c++]=r[s++];this.b=c,a=this.f(),c=this.b}break;case T:for(;c+d>a.length;)a=this.f({v:2});break;default:e(Error("invalid inflate mode"))}if(o)a.set(r.subarray(s,s+d),c),c+=d,s+=d;else for(;d--;)a[c++]=r[s++];this.c=s,this.b=c,this.a=a;break;case 1:this.o(K,G);break;case 2:var f,p,C,g,m=J(this,5)+257,I=J(this,5)+1,R=J(this,4)+4,y=new(o?Uint8Array:Array)(V.length),S=t,v=t,E=t,w=t,b=t;for(b=0;b<R;++b)y[V[b]]=J(this,3);if(!o)for(b=R,R=y.length;b<R;++b)y[V[b]]=0;for(f=_(y),S=new(o?Uint8Array:Array)(m+I),b=0,g=m+I;b<g;)switch(v=Q(this,f),v){case 16:for(w=3+J(this,2);w--;)S[b++]=E;break;case 17:for(w=3+J(this,3);w--;)S[b++]=0;E=0;break;case 18:for(w=11+J(this,7);w--;)S[b++]=0;E=0;break;default:E=S[b++]=v}p=_(o?S.subarray(0,m):S.slice(0,m)),C=_(o?S.subarray(m):S.slice(m)),this.o(p,C);break;default:e(Error("unknown BTYPE: "+i))}}return this.t()};var x,A,O=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],V=o?new Uint16Array(O):O,k=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],N=o?new Uint16Array(k):k,L=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],U=o?new Uint8Array(L):L,B=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],F=o?new Uint16Array(B):B,j=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],$=o?new Uint8Array(j):j,H=new(o?Uint8Array:Array)(288);for(x=0,A=H.length;x<A;++x)H[x]=143>=x?8:255>=x?9:279>=x?7:8;var q,W,K=_(H),z=new(o?Uint8Array:Array)(30);for(q=0,W=z.length;q<W;++q)z[q]=5;var G=_(z);function J(t,n){for(var i,r=t.g,o=t.e,s=t.input,a=t.c,c=s.length;o<n;)a>=c&&e(Error("input buffer is broken")),r|=s[a++]<<o,o+=8;return i=r&(1<<n)-1,t.g=r>>>n,t.e=o-n,t.c=a,i}function Q(t,n){for(var i,r,o=t.g,s=t.e,a=t.input,c=t.c,l=a.length,d=n[0],u=n[1];s<u&&!(c>=l);)o|=a[c++]<<s,s+=8;return(r=(i=d[o&(1<<u)-1])>>>16)>s&&e(Error("invalid code length: "+r)),t.g=o>>r,t.e=s-r,t.c=c,65535&i}function X(e){if("string"==typeof e){var t,n,i=e.split("");for(t=0,n=i.length;t<n;t++)i[t]=(255&i[t].charCodeAt(0))>>>0;e=i}for(var r,o=1,s=0,a=e.length,c=0;0<a;){a-=r=1024<a?1024:a;do{s+=o+=e[c++]}while(--r);o%=65521,s%=65521}return(s<<16|o)>>>0}function Y(t,n){var i,r;if(this.input=t,this.c=0,!n&&(n={})||(n.index&&(this.c=n.index),n.verify&&(this.M=n.verify)),i=t[this.c++],r=t[this.c++],(15&i)===Z)this.method=Z;else e(Error("unsupported compression method"));0!=((i<<8)+r)%31&&e(Error("invalid fcheck flag:"+((i<<8)+r)%31)),32&r&&e(Error("fdict flag is not supported")),this.A=new D(t,{index:this.c,bufferSize:n.bufferSize,bufferType:n.bufferType,resize:n.resize})}D.prototype.o=function(e,t){var n=this.a,i=this.b;this.u=e;for(var r,o,s,a,c=n.length-258;256!==(r=Q(this,e));)if(256>r)i>=c&&(this.b=i,n=this.f(),i=this.b),n[i++]=r;else for(a=N[o=r-257],0<U[o]&&(a+=J(this,U[o])),r=Q(this,t),s=F[r],0<$[r]&&(s+=J(this,$[r])),i>=c&&(this.b=i,n=this.f(),i=this.b);a--;)n[i]=n[i++-s];for(;8<=this.e;)this.e-=8,this.c--;this.b=i},D.prototype.I=function(e,t){var n=this.a,i=this.b;this.u=e;for(var r,o,s,a,c=n.length;256!==(r=Q(this,e));)if(256>r)i>=c&&(c=(n=this.f()).length),n[i++]=r;else for(a=N[o=r-257],0<U[o]&&(a+=J(this,U[o])),r=Q(this,t),s=F[r],0<$[r]&&(s+=J(this,$[r])),i+a>c&&(c=(n=this.f()).length);a--;)n[i]=n[i++-s];for(;8<=this.e;)this.e-=8,this.c--;this.b=i},D.prototype.f=function(){var e,t,n=new(o?Uint8Array:Array)(this.b-32768),i=this.b-32768,r=this.a;if(o)n.set(r.subarray(32768,n.length));else for(e=0,t=n.length;e<t;++e)n[e]=r[e+32768];if(this.l.push(n),this.q+=n.length,o)r.set(r.subarray(i,i+32768));else for(e=0;32768>e;++e)r[e]=r[i+e];return this.b=32768,r},D.prototype.J=function(e){var t,n,i,r=this.input.length/this.c+1|0,s=this.input,a=this.a;return e&&("number"==typeof e.v&&(r=e.v),"number"==typeof e.F&&(r+=e.F)),2>r?n=(i=(s.length-this.c)/this.u[2]/2*258|0)<a.length?a.length+i:a.length<<1:n=a.length*r,o?(t=new Uint8Array(n)).set(a):t=a,this.a=t},D.prototype.t=function(){var e,t,n,i,r,s=0,a=this.a,c=this.l,l=new(o?Uint8Array:Array)(this.q+(this.b-32768));if(0===c.length)return o?this.a.subarray(32768,this.b):this.a.slice(32768,this.b);for(t=0,n=c.length;t<n;++t)for(i=0,r=(e=c[t]).length;i<r;++i)l[s++]=e[i];for(t=32768,n=this.b;t<n;++t)l[s++]=a[t];return this.l=[],this.buffer=l},D.prototype.H=function(){var e,t=this.b;return o?this.B?(e=new Uint8Array(t)).set(this.a.subarray(0,t)):e=this.a.subarray(0,t):(this.a.length>t&&(this.a.length=t),e=this.a),this.buffer=e},Y.prototype.p=function(){var t,n=this.input;return t=this.A.p(),this.c=this.A.c,this.M&&((n[this.c++]<<24|n[this.c++]<<16|n[this.c++]<<8|n[this.c++])>>>0!==X(t)&&e(Error("invalid adler-32 checksum"))),t};var Z=8;function ee(e,t){this.input=e,this.a=new(o?Uint8Array:Array)(32768),this.h=te.k;var n,i={};for(n in!t&&(t={})||"number"!=typeof t.compressionType||(this.h=t.compressionType),t)i[n]=t[n];i.outputBuffer=this.a,this.z=new p(this.input,i)}var te=m;function ne(e,t){var n,i,o,s;if(Object.keys)n=Object.keys(t);else for(i in n=[],o=0,t)n[o++]=i;for(o=0,s=n.length;o<s;++o)r(e+"."+(i=n[o]),t[i])}ee.prototype.j=function(){var t,n,i,r,s,a,c,l=0;if(c=this.a,(t=Z)===Z)n=Math.LOG2E*Math.log(32768)-8;else e(Error("invalid compression method"));if(i=n<<4|t,c[l++]=i,t===Z)switch(this.h){case te.NONE:s=0;break;case te.r:s=1;break;case te.k:s=2;break;default:e(Error("unsupported compression type"))}else e(Error("invalid compression method"));return r=s<<6|0,c[l++]=r|31-(256*i+r)%31,a=X(this.input),this.z.b=l,l=(c=this.z.j()).length,o&&((c=new Uint8Array(c.buffer)).length<=l+4&&(this.a=new Uint8Array(c.length+4),this.a.set(c),c=this.a),c=c.subarray(0,l+4)),c[l++]=a>>24&255,c[l++]=a>>16&255,c[l++]=a>>8&255,c[l++]=255&a,c},r("Zlib.Inflate",Y),r("Zlib.Inflate.prototype.decompress",Y.prototype.p),ne("Zlib.Inflate.BufferType",{ADAPTIVE:P.C,BLOCK:P.D}),r("Zlib.Deflate",ee),r("Zlib.Deflate.compress",(function(e,t){return new ee(e,t).j()})),r("Zlib.Deflate.prototype.compress",ee.prototype.j),ne("Zlib.Deflate.CompressionType",{NONE:te.NONE,FIXED:te.r,DYNAMIC:te.k})}).call(window)},1028:function(e,t,n){e=n.nmd(e),function(e,t,n){var i=t("ice").Ice,r=i.__M,o=i.Slice,s=r.module("WhiteBoard");s.WBConferenceError=o.defineUserException((function(e,t,n){i.UserException.call(this,n),this.error=void 0!==e?e:0,this.reason=void 0!==t?t:""}),i.UserException,"WhiteBoard::WBConferenceError",(function(e){e.writeInt(this.error),e.writeString(this.reason)}),(function(e){this.error=e.readInt(),this.reason=e.readString()}),!1,!1),s.WhiteBoardCtrl2_V4=o.defineObject(void 0,i.Object,void 0,1,["::Ice::Object","::WhiteBoard::WhiteBoardCtrl2_V4"],-1,void 0,void 0,!1),s.WhiteBoardCtrl2_V4Prx=o.defineProxy(i.ObjectPrx,s.WhiteBoardCtrl2_V4.ice_staticId,void 0),o.defineOperations(s.WhiteBoardCtrl2_V4,s.WhiteBoardCtrl2_V4Prx,{sendCmd:[,,,1,,,[[7],[7],[7],["Ice.ByteSeqHelper"]],[[7],["Ice.ByteSeqHelper"]],[s.WBConferenceError],,]}),n.WhiteBoard=s}("undefined"!=typeof global&&global.process,"undefined"!=typeof global&&void 0!==global.process?n(4538):window.Ice.__require,"undefined"!=typeof global&&void 0!==global.process?t:this)},4538:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=4538,e.exports=t},2480:()=>{}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.loaded=!0,n.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.nmd=e=>(e.paths=[],e.children||(e.children=[]),e);var __webpack_exports__={};(()=>{"use strict";__webpack_require__(3412),__webpack_require__(1638),__webpack_require__(7282),__webpack_require__(1046),__webpack_require__(2770),__webpack_require__(2382),__webpack_require__(8813),__webpack_require__(4246),__webpack_require__(7637),__webpack_require__(6052),__webpack_require__(8635),__webpack_require__(8542),__webpack_require__(8826),__webpack_require__(7727),__webpack_require__(6581),__webpack_require__(3138),__webpack_require__(8163),__webpack_require__(5267),__webpack_require__(7588),__webpack_require__(8002),__webpack_require__(7047),__webpack_require__(156),__webpack_require__(6251),__webpack_require__(6046),__webpack_require__(834),__webpack_require__(1948),__webpack_require__(1028),__webpack_require__(1287),__webpack_require__(5796),__webpack_require__(3130);var e=__webpack_require__(3085);__webpack_require__(158);const t=new class{constructor(){this.apis=[],window.CRVideo_SetApisNoLog=e=>{if(e.add)for(let t=0;t<e.add.length;t++)this.add(e.add[t]);if(e.remove)for(let t=0;t<e.remove.length;t++)this.remove(e.remove[t])}}add(e){this.apis.push(e)}remove(e){let t=this.apis.findIndex((t=>t==e));this.apis.splice(t,1)}};CRVideo.CbProxy=function(e){this.name=e,this.target=function(...n){try{"[object Function]"===Object.prototype.toString.call(this.callback)?(!this.noLogArr.includes(this.name)&&!t.apis.includes(this.name)&&console.crlog(`[SDK][Callback] ${this.name}.target(${n})`),this.callback.apply(null,n)):!this.noLogArr.includes(this.name)&&!t.apis.includes(this.name)&&console.crlog("[SDK][Callback] Undefined callback: "+e)}catch(e){console.error(e)}},this.noLogArr=["CRVideo_GetQueueStatusRslt","CRVideo_CloudMixerOutputInfoChanged","CRVideo_ShakeHandRslt","CRVideo_MicEnergyUpdate","CRVideo_NetStateChanged","CRVideo_NotifyNetworkDelay","CRVideo_NotifyNetworkLostRate"]};__webpack_require__(3961);var n=__webpack_require__(9176);CRVideo.sdkver="2.9.1.2",CRVideo.sdkInfo="SDK Ver: 2.9.1.2, Last modified: Victor.LiuWei 2023/9/20 20:00:02",console.crlog(`[SDK] ${CRVideo.sdkInfo}`),CRVideo.isSDKConsole=!0,CRVideo.isUploadLog=!0,CRVideo.maxBps_media=2400,CRVideo.isCallSer=!0,CRVideo.MSProtocol=1,CRVideo.isWebRTC=!0,CRVideo.protocol="https:",CRVideo.__crfib=function(e){return e<2?e:CRVideo.__crfib(e-1)+CRVideo.__crfib(e-2)},window.addEventListener("unload",(e=>{(CRVideo.isMeeting||CRVideo.isLoginCallserver)&&(CRVideo.isMeeting&&__Rtc.CR__Exit("直接离开页面"),CRVideo.isLoginCallserver&&CRVideo.webSendcmd({cmd:"Logout",module:"CallServer",sessionID:CRVideo.sessionID}),CRVideo.__crfib(25))})),window.CRVideo_GetSDKVersion=()=>CRVideo.sdkver,window.CRVideo_WriteLog=e=>{console.crlog(`[APP] ${e}`)},window.CRVideo_SetSDKParams=e=>{if(console.crlog(`[SDK] CRVideo_SetSDKParams:${JSON.stringify(e)}`),void 0!==e)return null!=e.isSDKConsole&&(CRVideo.isSDKConsole=!1!==e.isSDKConsole),null!=e.isUploadLog&&(CRVideo.isUploadLog=!1!==e.isUploadLog),null!=e.mediaSendBW&&(CRVideo.maxBps_media=+e.mediaSendBW),null!=e.isCallSer&&(CRVideo.isCallSer=!1!==e.isCallSer),void 0!==e.MSProtocol&&(CRVideo.MSProtocol=+e.MSProtocol),null!=e.isWebRTC&&(CRVideo.isWebRTC=!1!==e.isWebRTC),CRVideo.virtualBackgroundAssets=e.virtualBackgroundAssets||void 0,console.crlog(`[Init] Set isUploadLog:${CRVideo.isUploadLog},isSDKConsole:${CRVideo.isSDKConsole}, on init sdk!`),void window.CRVideo_EnableLog2File(CRVideo.isUploadLog,CRVideo.isSDKConsole);console.crlog(`[Init] Set isUploadLog:${CRVideo.isUploadLog},isSDKConsole:${CRVideo.isSDKConsole}, on init sdk!`),window.CRVideo_EnableLog2File(CRVideo.isUploadLog,CRVideo.isSDKConsole),CRVideo_UploadingLog()},window.CRVideo_Init=e=>(console.crlog(`[Init] CRVideo_Init(${JSON.stringify(e)})`),new Promise(((t,n)=>(localStorage.getItem("CRRTCSDK_SDKVer")!=CRVideo.sdkver&&(localStorage.removeItem("CRRTCSDK_UserInfoHistory"),localStorage.removeItem("CRRTCSDK_UserInfo"),localStorage.setItem("CRRTCSDK_SDKVer",CRVideo.sdkver)),void 0!==e&&(CRVideo.isSDKConsole=!1!==e.isSDKConsole,CRVideo.isUploadLog=!1!==e.isUploadLog,e.mediaSendBW&&(CRVideo.maxBps_media=+e.mediaSendBW),CRVideo.isCallSer=!1!==e.isCallSer,void 0!==e.MSProtocol&&(CRVideo.MSProtocol=+e.MSProtocol)),console.crlog(`[Init] Set isUploadLog:${CRVideo.isUploadLog},isSDKConsole:${CRVideo.isSDKConsole}, on init sdk!`),window.CRVideo_EnableLog2File(CRVideo.isUploadLog,CRVideo.isSDKConsole),null!=e&&!1===e.isWebRTC&&(CRVideo.isWebRTC=!1),CRVideo.isWebRTC?window.RTCPeerConnection?window.navigator.mediaDevices?window.navigator.mediaDevices.enumerateDevices?window.navigator.mediaDevices.getUserMedia?(window.location.protocol&&"http:"==window.location.protocol&&console.crlog('[Init][Error] The current page protocal is "HTTP", You should use "HTTPS" protocol!'),window.location.protocol&&"http:"==window.location.protocol&&console.error('The current page protocal is "HTTP", You should use "HTTPS" protocol!'),console.crlog("[Init] First enumerateDevices on init..."),void navigator.mediaDevices.enumerateDevices().then((e=>{const i=[],r=[],o=[];let s;if(e.forEach((e=>{"audioinput"==e.kind?r.push(e):"audiooutput"==e.kind?o.push(e):"videoinput"==e.kind&&i.push(e)})),console.crlog(`[Init] Video input devices: ${JSON.stringify(i)}`),console.crlog(`[Init] Audio input devices: ${JSON.stringify(r)}`),console.crlog(`[Init] Audio output devices: ${JSON.stringify(o)}`),s=(0!==i.length||0!==r.length)&&(0===i.length?{video:!1,audio:!0}:0===r.length?{video:!0,audio:!1}:{video:!0,audio:!0}),!s)return console.crlog("[Init] Init sdk success, no video or audio input devices, still return init success!"),t(0);console.crlog(`[Init] GetUserMedia on init device promission, constrains: ${JSON.stringify(s)}`),navigator.mediaDevices.getUserMedia(s).then((e=>{if(console.crlog("[Init] Get video & audio permission by getUserMedia on init, success!"),!e)return console.crlog(`[Init] Get video & audio permission by getUserMedia on init, fail! GetUserMedia stream :${e}`),n(8001);{const n=new RTCPeerConnection({iceServers:[{urls:"stun:121.42.156.84:3478"}]});window.__Rtc.firstInitStream=e;const i=e.getVideoTracks(),r=e.getAudioTracks();i.length>0&&n.addTrack(i[0],e),r.length>0&&n.addTrack(r[0],e),n.createOffer().then((n=>(window.__Rtc.baseOffer=n,n.sdp.includes("H264")&&n.sdp.includes("VP8")?window.__Rtc.rtc_codecs="VP8;H264":n.sdp.includes("H264")?window.__Rtc.rtc_codecs="H264":n.sdp.includes("VP8")?window.__Rtc.rtc_codecs="VP8":window.__Rtc.rtc_codecs="",console.crlog(`[Init] __Rtc.rtc_codecs(encode): ${window.__Rtc.rtc_codecs}`),window.rtc_codecs=window.__Rtc.rtc_codecs,e.getTracks().forEach((e=>{"video"==e.kind&&(console.crlog("[Init] Stop video stream on get video & audio permission..."),e.stop()),"audio"!=e.kind||__Rtc.CRBrowser.weixin.isWeixin||"iOS"==__Rtc.CRBrowser.curBrowserCfg.platform||(console.crlog("[Init] Stop audio stream on get video & audio permission..."),e.stop())})),console.crlog("[Init] Init sdk success!"),t(0))))}})).catch((e=>(console.crlog(`[Init] Get video & audio permission by getUserMedia on init, fail! GetUserMedia fail: ${e}`),"NotAllowedError"==e.name?(console.crlog(`[Init] Init sdk fail,user not allowd devices promission! ${e.name}`),n(8002)):"NotReadableError"==e.name?(console.crlog(`[Init] InitDevicePromission fail, NotReadableError ${e}`),n(8007)):(console.crlog(`[Init] Init sdk fail, getUserMedia fail: ${e.name}`),n(8001)))))})).catch((e=>(console.crlog(`[Init] Enumerate devices fail! ${e}`),console.error(e),n(8003))))):(console.crlog('[Init] Init SDK fail! "window.navigator.mediaDevices.getUserMedia" API not found!'),n(8004)):(console.crlog('[Init] Init SDK fail! "window.navigator.mediaDevices.enumerateDevices" API not found!'),n(8004)):(console.crlog('[Init] Init SDK fail! "window.navigator.mediaDevices" API not found!'),n(8004)):(console.crlog('[Init] Init SDK fail! "window.RTCPeerConnection" API not found!'),n(8004)):(console.crlog("[Init] Init sdk success when isWebRTC-false!"),t(0)))))),window.CRVideo_SetServerAddr=e=>{e.includes(":8934")&&(e=`sdk.${window.__CRName}.com`);try{console.crlog(`[Init] CRVideo_SetServerAddr(${e})`)}catch(e){console.error(e)}e=e.replace(/\s*/g,""),CRVideo.webServerAddr=e,n.Z.server.setServerAddr(e)},function(e,t,n){e.__Rtc.CRBrowser=new class{constructor(){this.initData(),this.getPlatform(),this.getBrowser(),console.crlog(`[Browser] UA: ${this.ua}`),console.crlog(`[Browser] Browser: ${JSON.stringify(this.curBrowserCfg)}`)}initData(){this.ua=e.navigator.userAgent,this.curBrowserCfg={name:"",minVer:null,ver:null,support:!1,platform:"unknown",isMobile:!1,OSVer:""},this.supportVer={Windows_Chrome:58,Windows_Edg:80,Windows_Edge:999,Windows_OPR:70,Windows_Firefox:78,Windows_QQBrowser:10,Android_Chrome:58,Mac_Safari:12,Mac_Chrome:69,iOS_Safari:12,iOS_Chrome:69,iOS_QQBrowser:11,iOS_MicroMessenger:7,iOS_uniApp:1},this.weixin={isWeixin:!1,weixinVer:null}}getPlatform(){if((this.ua.match(/AppleWebKit.*Mobile.*/)||this.ua.includes("Android"))&&(this.curBrowserCfg.isMobile=!0),this.ua.includes("Windows")&&(this.curBrowserCfg.platform="Windows"),this.ua.includes("Macintosh")&&(this.curBrowserCfg.platform="Mac"),this.ua.includes("Android")&&(this.curBrowserCfg.platform="Android"),/(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent)&&(this.curBrowserCfg.platform="iOS"),"iOS"==this.curBrowserCfg.platform){const e=this.ua.split(" like Mac OS X")[0].split(" OS ")[1].split("_")||null;this.curBrowserCfg.OSVer=e.join(".")}}getBrowser(){if(this.curBrowserCfg.isMobile){if("Android"==this.curBrowserCfg.platform&&this.ua.includes("Chrome/")&&(this.curBrowserCfg.name="Chrome",this.curBrowserCfg.ver=+this.ua.split("Chrome/")[1].split(".")[0]),"iOS"==this.curBrowserCfg.platform&&(this.ua.includes("Safari")&&!/(Chrome|FxiOS|EdgiOS|CriOS|MQQ|QQ|MXiOS|Sogou|baidu|Baidu|MicroMessenger|UC|Quark|AliApp|QH|Qihoo|2345|Browser)/i.test(this.ua)&&(this.curBrowserCfg.name="Safari",this.curBrowserCfg.ver=+this.ua.split("Version/")[1].split(".")[0],this.curBrowserCfg.platform="iOS"),this.ua.includes("CriOS/")&&(this.curBrowserCfg.name="Chrome",this.curBrowserCfg.ver=+this.ua.split("CriOS/")[1].split(".")[0]),this.ua.includes("MQQBrowser/")&&(this.curBrowserCfg.name="QQBrowser",this.curBrowserCfg.ver=+this.ua.split("MQQBrowser/")[1].split(".")[0]),this.ua.includes("MicroMessenger/")&&(this.curBrowserCfg.name="MicroMessenger",this.curBrowserCfg.ver=+this.ua.split("MicroMessenger/")[1].split(".")[0]),this.ua.includes("uni-app")&&(this.curBrowserCfg.name="uniApp",this.curBrowserCfg.ver=1)),this.ua.includes("MicroMessenger/")||this.ua.includes("WeChat/")||this.ua.includes("Weixin"))try{this.weixin.isWeixin=!0,this.weixin.weixinVer=this.ua.split("MicroMessenger/")[1].split("(")[0]}catch(e){console.error(e)}console.crlog(`[Browser] ${JSON.stringify(this.weixin)}`)}else"Mac"==this.curBrowserCfg.platform&&this.ua.includes("Safari")&&!/(Chrome|FxiOS|EdgiOS|CriOS|MQQ|QQ|MXiOS|Sogou|baidu|Baidu|MicroMessenger|UC|Quark|AliApp|QH|Qihoo|2345|Browser)/i.test(this.ua)&&(this.curBrowserCfg.name="Safari",this.curBrowserCfg.ver=+this.ua.split("Version/")[1].split(".")[0]),this.ua.includes("Chrome/")&&(this.curBrowserCfg.name="Chrome",this.curBrowserCfg.ver=+this.ua.split("Chrome/")[1].split(".")[0]),/(Edg|Edge)/i.test(this.ua)&&(this.ua.includes("Edg/")?(this.curBrowserCfg.name="Edg",this.curBrowserCfg.ver=+this.ua.split("Edg/")[1].split(".")[0]):this.ua.includes("Edge/")&&(this.curBrowserCfg.name="Edge",this.curBrowserCfg.ver=+this.ua.split("Edge/")[1].split(".")[0])),this.ua.includes("Firefox/")&&(this.curBrowserCfg.name="Firefox",this.curBrowserCfg.ver=+this.ua.split("Firefox/")[1].split(".")[0]);const e=`${this.curBrowserCfg.platform}_${this.curBrowserCfg.name}`;console.crlog(`[Browser] ${e} ${this.curBrowserCfg.ver}`),this.curBrowserCfg.minVer=this.supportVer[e]||999}}}(window,Ice,CRVideo);var i=__webpack_require__(4719),r=__webpack_require__(7693);const o=window.CRVideo;window.Ice;var s=function(e,t,s){const l=`https://${o.webServerAddr}${i.Z.getJsCallServerInfo}`;var d={RequestId:window.Ice.generateUUID(),MgrSDKVer:o.sdkver,PRODUCT:"H5",APPIDMode:CRVideo.APPIDMode,...e};let u={};u=__Rtc._ReplaceObjParam(d,"UserPswd","******"),u=__Rtc._ReplaceObjParam(u,"Token","******"),u=__Rtc._ReplaceObjParam(u,"CustomPswd","******"),console.crlog("[Login] WebAPI request url: "+l+", data:"+JSON.stringify(u)),(0,r.Z)({url:l,type:"get",timeout:3e4,data:d,success:function(i){if(console.crlog("[Login] WebAPI, /servlet/getJsCallServerInfo result: "+JSON.stringify(i)),__Rtc.postCmd.CallServerInfo=i,o.webLoginOAuth=e,n.Z.auth.setAuth(e),o.callServerLoginOAuth=t,void 0!==i.RspCode&&0==i.RspCode){let e=-1;function t(){o.callserverExiting?(console.crlog("[Login] callserver exiting.... waiting...."),e=setTimeout((()=>{t()}),500)):(console.crlog("[Login] callserver exiting complete...."),clearInterval(e),a(i,s))}t()}else c(i,s)},error:function(e){console.crlog("[Login] GetJsCallServerInfo API request fail:"),console.crlog(`[Login][Error] ${e}`),console.error(e),c({RspCode:11e3,RspDesc:"Server not responding..!"},s)}})},a=function(e,t){if(console.crlog("[Login] GetCallServerInfoSuccess..."),e.Data&&e.APPIDMode?(o.APPIDMode=+e.APPIDMode,o.multiProject=e.Data):o.APPIDMode=0,void 0!==e.TokenTime&&0!==e.TokenTime&&l(e.TokenTime),e.stunServerAddr&&""!=e.stunServerAddr&&(o.stunServerAddr=e.stunServerAddr.split(";")[0]),o.loginAuthFlag=1,""===o.LoginParam.nick_name&&e.Data&&e.Data.username&&(o.LoginParam.nick_name=e.Data.username),""===o.LoginParam.user_id&&e.Data&&e.Data.userId&&(o.LoginParam.user_id=e.Data.userId),o.userInfo={nickname:CRVideo.LoginParam.nick_name,userId:CRVideo.LoginParam.user_id},o.isCallSer)__Rtc.postCmd.IceCruxCreate(t);else{try{console.crlog(`[Login] CRVideo_LoginSuccess.target(${o.LoginParam.user_id}, ${t})`)}catch(e){}CRVideo_LoginSuccess.target(o.LoginParam.user_id,t),CRVideo_UploadingLog()}e.uploadUrl&&CRVideo.isUploadLog&&__Rtc.postCmd.IceLogCreate()},c=function(e,t){try{console.crlog(`[Login] Login authentication failed, RspCode:${e.RspCode} --- RspDesc:${e.RspDesc}`),console.crlog(`[Login] CRVideo_LoginFail.target(${window.WEB_SDK_ERR(e.RspCode)},${t})`)}catch(e){}CRVideo_LoginFail.target(window.WEB_SDK_ERR(e.RspCode),t)},l=function(){let e,t;return function(n){console.crlog("[Login] Update webAPI Token Expire Time: "+n),clearTimeout(e),clearTimeout(t);const i=n>30?1e3*(n-30):0;function r(){console.crlog("[Login] !!!Token Expire!!!"),o.ic&&(clearTimeout(o.HandShark),console.crlog("[Login] CallServer destroy connection..."),o.destroyCruxConnect(),o.LineOffHandler(CRVideo_ERR_DEF.SDK_TOKEN_TIMEOUT)),o.isMeeting&&(console.crlog("[Login] Token失效，退出会议！CRVideo_ExitMeeting('token失效')"),CRVideo_ExitMeeting("token失效"))}console.crlog(`[Login] Token剩余有效期：${i/1e3+30} 秒`),i>2147483647||(e=setTimeout((()=>{t=setTimeout(r,1e3*(i>30?30:n)),console.crlog("[Login] CRVideo_NotifyTokenWillExpire.target()"),CRVideo_NotifyTokenWillExpire.target()}),i))}}();o.LineOffHandler=e=>{console.crlog(`[CMD] line off .... ${e}`),o.callserverCastPrx?(o.callserverCastPrx=null,console.crlog(`[Login] CRVideo_LineOff.target(${e})`),CRVideo_LineOff.target(e)):18==e&&(o.loginAuthFlag=0,o.webLoginOAuth={},console.crlog(`[Login] CRVideo_LineOff.target(${e})`),CRVideo_LineOff.target(e))},o.__LoginCallserver=()=>{const e=CRVideo.LoginParam.cookie,t=__Rtc.CRBrowser.curBrowserCfg,n={OEMKey:`${window.__CRNameUP}`,SDKVersion:CRVideo.sdkver,cmd:"Login",...CRVideo.callServerLoginOAuth,deviceType:`${t.platform}_${t.name}`,language:"zh_CN",module:"CallServer",productType:"h5sdk",userID:CRVideo.LoginParam.user_id,userName:CRVideo.LoginParam.nick_name},i=__Rtc._ReplaceObjParam(n,"crPswd","******");try{console.crlog(`[Login] WebCMD:${JSON.stringify(i)}, cookie:${e}`)}catch(e){}o.webSendcmd(n,e)},window.CRVideo_Login=function(e,t,n="",i="",r="",a=""){try{console.crlog(`[Login] CRVideo_Login(${e},'******',${n},${i},${r},${a})`)}catch(e){}if(!(""!==n&&void 0!==n&&""!==i&&void 0!==i||CRVideo.SDKKey&&"MeetSDK"==CRVideo.SDKKey))return CRVideo_LoginFail.target(5,a),void CRVideo_UploadingLog();o.crpswdmd5=t,o.loginCookie=a,o.LoginParam={account:e,psw:t,nick_name:n,user_id:i,CustomID:i,CustomPswd:r||"",cookie:a};try{console.crlog(`[Login] Login param: ${JSON.stringify(window.__Rtc._ReplaceObjParam(o.LoginParam,"psw","******"))}`)}catch(e){}let c;c=r?{UserName:e,UserPswd:t,CustomID:i,CustomPswd:r||""}:{UserName:e,UserPswd:t};s(c,{crAcnt:e,crPswd:t},a)},window.CRVideo_LoginByToken=(t,n,i,r,a)=>{try{console.crlog(`[Login] CRVideo_LoginByToken('******',${n},${i},${r},${a})`)}catch(e){}let c,l;try{const n=t.split(".")[1],i=!!n&&e.Z.base64decode(n).replace(/\0/g,"");c=JSON.parse(i)}catch(e){console.crlog("[Login] token本地解析失败"),console.crlog(e);try{console.crlog(`[Login] CRVideo_LoginFail.target(1,${a});`)}catch(e){}return CRVideo_LoginFail.target(1,a),void CRVideo_UploadingLog()}o.LoginParam={account:c.appID,nick_name:n,user_id:i,CustomID:i,CustomPswd:r||"",cookie:a||""},l=r?{Token:t,CustomID:i,CustomPswd:r||""}:{Token:t};const d={crToken:t};try{console.crlog(`[Login] Login param: ${JSON.stringify(o.LoginParam)}`)}catch(e){}s(l,d,a)},window.CRVideo_UpdateToken=function(e){console.crlog("[Login] CRVideo_UpdateToken('******')");const t=`https://${o.webServerAddr}${i.Z.HandToken}`,n={ClientVer:"",Language:"",RequestId:window.Ice.generateUUID(),MgrSDKVer:o.sdkver,PRODUCT:"H5",Token:e},s=__Rtc._ReplaceObjParam(n,"Token","******");try{console.crlog("[Login] WebAPI UpdateToken: url: "+t+" ,data: "+JSON.stringify(s))}catch(e){}(0,r.Z)({url:t,data:{_data_:JSON.stringify(n)},dataType:"jsonp",jsonp:"callback",success:function(t){if(console.crlog("[Login] WebAPI UpdateToken result: "+JSON.stringify(t)),0==t.RspCode){t.TokenTime&&l(t.TokenTime);try{console.crlog(`[Login] CRVideo_UpdateTokenRslt.target(${CRVideo_ERR_DEF.NOERR})`)}catch(e){}CRVideo_UpdateTokenRslt.target(CRVideo_ERR_DEF.NOERR),o.webLoginOAuth={Token:e},o.callServerLoginOAuth={crToken:e}}else{try{console.crlog(`[Login] CRVideo_UpdateTokenRslt.target(${CRVideo_ERR_DEF.SDK_TOKEN_AUTH_FAILED})`)}catch(e){}CRVideo_UpdateTokenRslt.target(CRVideo_ERR_DEF.SDK_TOKEN_AUTH_FAILED)}},error:function(e){try{console.crlog(`[Login] CRVideo_UpdateTokenRslt.target(${CRVideo_ERR_DEF.NOSERVER_RSP})`)}catch(e){}CRVideo_UpdateTokenRslt.target(CRVideo_ERR_DEF.NOSERVER_RSP)}})},window.CRVideo_Logout=function(){if(o.loginAuthFlag=0,o.webLoginOAuth={},o.LoginParam={},console.crlog("[Login] CRVideo_Logout()"),clearInterval(o.resetAdapterTimer),!o.isCallSer)return;o.callserverExiting=!0,setTimeout((()=>{o.callserverExiting=!1}),3e3);const e={cmd:"Logout",module:"CallServer",sessionID:o.sessionID};try{console.crlog(`[Login] WebCMD:${JSON.stringify(e)},cookie:${cookie}`)}catch(e){}o.webSendcmd(e),o.CallID="",o.HandErrTimes=0,o.KEEPLIVE_COMMIT=!1},o.loginCallback={Login:function(e,t,n){try{console.crlog(`[Login] CRVideo_Login -- CMDCallback --\x3e Login: ${JSON.stringify(e)}`)}catch(e){}0==e.RspCode?(console.crlog("[Login] CallServer login success!"),o.sessionID=e.sessionID,o.isLoginCallserver=!0,console.crlog(`[Login] CRVideo_LoginSuccess.target(${e.userID}, ${n})`),CRVideo_LoginSuccess.target(e.userID,n),CRVideo_UploadingLog(),console.crlog("[Login] CallServer sessionID: "+e.sessionID),console.crlog("[Login] Begain shakeHand..."),window.CRVideo_ShakeHand()):(console.crlog("[Login] CallServer login fail!"),console.crlog(`[Login] CRVideo_LoginFail.target(${ICE_SDK_ERR(e.RspDesc)},${n})`),CRVideo_LoginFail.target(ICE_SDK_ERR(e.RspDesc),n),CRVideo_UploadingLog())},Logout:function(e,t){if(0==e.RspCode)console.crlog("[Login] Callserver logout success..."),setTimeout((()=>{CRVideo_UploadingLog()}),1e3),setTimeout((()=>{o.destroyCruxConnect()}),1e3);else{console.crlog("[Login] Callserver logout fail...");try{console.crlog(`[Login] ${JSON.stringify(e)}`)}catch(e){}}o.isLoginCallserver=!1},ServerKickoutUser:function(e){o.HandErrTimes=0,o.isLoginCallserver=!1,clearTimeout(o.HandShark),o.LineOffHandler(CRVideo_ERR_DEF.SDK_USER_BEEN_KICKOUT)}},window.CRVideo_LineOff=new o.CbProxy("CRVideo_LineOff"),window.CRVideo_LoginSuccess=new o.CbProxy("CRVideo_LoginSuccess"),window.CRVideo_LoginFail=new o.CbProxy("CRVideo_LoginFail"),window.CRVideo_NotifyTokenWillExpire=new o.CbProxy("CRVideo_NotifyTokenWillExpire"),window.CRVideo_UpdateTokenRslt=new o.CbProxy("CRVideo_UpdateTokenRslt"),window.CRVideo_LogoutSuccess=new CRVideo.CbProxy("CRVideo_LogoutSuccess"),window.CRVideo_LogoutFail=new CRVideo.CbProxy("CRVideo_LogoutFail");__webpack_require__(2803),__webpack_require__(5829),__webpack_require__(6533);CRVideo.addEventListener=function(e,t,n){e.addEventListener?e.addEventListener(t,n):e.attachEvent&&e.attachEvent("on"+t,n)},CRVideo.ic=null,CRVideo.webServerAddr=null,CRVideo.proxy=null,CRVideo.logproxy=null,CRVideo.queuingID=null,CRVideo.sessionID=null,CRVideo.cookie="",CRVideo.MeetInfoObj=null,CRVideo.CallID="",CRVideo.HandErrTimes=0,CRVideo.loginAuthFlag=0,CRVideo.meetSubject="test",CRVideo.IceAddr=null,CRVideo.logServer=null,CRVideo.logUUID="",__Rtc._ReplaceObjParam=function(e,t,n){let i={};for(var r in e)i[r]=r!==t?e[r]:n;return i},__Rtc.postCmd={config:{HandSharkTime:1e4}},function(t,n){var i={},r=["Ice::ConnectionLostException","Ice::ConnectFailedException"],o=function(){const e=new Ice.InitializationData;return e.properties=Ice.createProperties(),e.properties.setProperty("Ice.Trace.Network","0"),e.properties.setProperty("Ice.Trace.Protocol","0"),e.properties.setProperty("Ice.ACM.Client","0"),e.properties.setProperty("Ice.ACM.Server","0"),e.properties.setProperty("Ice.Default.EncodingVersion","1.0"),Ice.initialize(e)},s=function(){console.crlog("[Callsvr] destroy Crux Connect on IceCruxCreate..."),a();var r=t.CallServerInfo,s=r.callSvrList,c=new Array;c=r.callSvrList.indexOf(";")>-1?s.split(";")[0]:s;var l=e.Z.parse_url("https://"+c),d="jserver:wss";l?(i.crux=o(),l.path&&(d+=" -r "+l.path),l.host&&(d+=" -h "+l.host),l.port?d+=" -p "+l.port:d+=" -p 443",console.crlog("[Callsvr] "+d),CRVideo.proxy=i.crux.stringToProxy(d),n.ic=i.crux,CRVideo_SetAdapter().then(CRVideo.__LoginCallserver).catch((e=>{CRVideo_LoginFail.target(204,CRVideo.LoginParam.cookie),CRVideo_UploadingLog()}))):console.error("[Callsvr] error: jserver parseUrl")},a=function(){i.crux&&i.crux.destroy&&(clearTimeout(CRVideo.HandShark),console.crlog("[Callsvr] Websockt destroy Crux connect..."),i.crux.destroy(),clearInterval(CRVideo.resetAdapterTimer),CRVideo.callserverCastPrx=null,setTimeout((()=>{CRVideo.callserverExiting=!1}),100))},c=function(){i.Log&&i.Log.destroy&&(console.crlog("[LogServer] Websockt destroy Log connect..."),i.Log.destroy(),CRVideo.logproxy=null)};t.IceCruxCreate=s,CRVideo.destroyCruxConnect=a,t.IceLogCreate=function(){console.crlog("[LogServer] destroy Log Connect on IceLogCreate..."),c();var n="",r=t.CallServerInfo;if(r?n=r.uploadUrl.split(";")[0]?r.uploadUrl.split(";")[0]:r.uploadUrl.split(";")[1]:window.rtcProxy.crmt&&window.rtcProxy.crmt.WEBLOGCFG&&(n=window.rtcProxy.crmt.WEBLOGCFG),n){var s=e.Z.parse_url("https://"+n);if(s){var a="Log.ClientLogServer:wss";s.path&&(a+=" -r "+s.path),s.host&&(a+=" -h "+s.host),s.port?a+=" -p "+s.port:a+=" -p 443",console.crlog("[LogServer] logserver: "+a),i.Log=o(),CRVideo.logproxy=i.Log.stringToProxy(a),CRVideo_LoggerAdapter();var l="";window.sessionStorage&&((l=window.sessionStorage.getItem("logUUID"))||(l=Ice.generateUUID(),window.sessionStorage.setItem("logUUID",l))),CRVideo.logUUID=l,null==CRVideo.isUploadLog&&(CRVideo.isUploadLog=0),CRVideo.logIceConnect=i.Log,CRVideo_UploadingReport()}else console.error("[LogServer] error: ClientLogServer parseUrl")}},CRVideo.destroyLogConnect=c,t.destroyLogConnect=c,t.resetCruxConnect=function(e){var t=e.toString();r.find((e=>-1!=t.indexOf(e)))&&(console.crlog("[Callsvr] callserver loginAgain..."),s())},t.errorLoginAgain=r}(__Rtc.postCmd,CRVideo);var d={NotifyQueueStatus:CRVideo.queCallback.NotifyQueueStatus,NotifyPosition:CRVideo.queCallback.NotifyPosition,AssignUser:CRVideo.queCallback.AssignUser,AssignCancel:CRVideo.queCallback.AssignCancel,NotifyUserEnter:CRVideo.queCallback.NotifyUserEnter,NotifyUserLeave:CRVideo.queCallback.NotifyUserLeave,ServerAccept:CRVideo.callSvrCallback.ServerAccept,ServerDecline:CRVideo.callSvrCallback.ServerDecline,ServerCall:CRVideo.callSvrCallback.ServerCall,ServerPushUserStatus:CRVideo.callSvrCallback.ServerPushUserStatus,ServerReleaseCall:CRVideo.callSvrCallback.ServerReleaseCall,ServerCancelCall:CRVideo.callSvrCallback.ServerCancelCall,ServerKickoutUser:CRVideo.loginCallback.ServerKickoutUser,invite:__Rtc.CRRTCInvite.ICECallback.invite,acceptInvite:__Rtc.CRRTCInvite.ICECallback.acceptInvite,rejectInvite:__Rtc.CRRTCInvite.ICECallback.rejectInvite,cancelInvite:__Rtc.CRRTCInvite.ICECallback.cancelInvite,inviteResult:__Rtc.CRRTCInvite.ICECallback.inviteResult},u={Login:CRVideo.loginCallback.Login,GetServiceData:CRVideo.queCallback.GetServiceData,GetQueueStatus:CRVideo.queCallback.GetQueueStatus,UserEnter:CRVideo.queCallback.UserEnter,UserLeave:CRVideo.queCallback.UserLeave,AgentEnter:CRVideo.queCallback.AgentEnter,AgentLeave:CRVideo.queCallback.AgentLeave,AssignResponse:CRVideo.queCallback.AssignResponse,StartStatusPush:CRVideo.callSvrCallback.StartStatusPush,StopStatusPush:CRVideo.callSvrCallback.StopStatusPush,GetUserStatus:CRVideo.callSvrCallback.GetUserStatus,GetUserServiceStatus:CRVideo.queCallback.GetUserServiceStatus,GetAgentServiceStatus:CRVideo.queCallback.GetAgentServiceStatus,ClientCustomStatusUpdate:CRVideo.callSvrCallback.ClientCustomStatusUpdate,RequestUser:CRVideo.queCallback.RequestUser,GetQueueUsers:CRVideo.queCallback.GetQueueUsers,ClientCall:CRVideo.callSvrCallback.ClientCall,ClientAccept:CRVideo.callSvrCallback.ClientAccept,ClientDecline:CRVideo.callSvrCallback.ClientDecline,ClientReleaseCall:CRVideo.callSvrCallback.ClientReleaseCall,Logout:CRVideo.loginCallback.Logout,ShakeHand:function(e,t,n){0==e.RspCode?function(e,t){const n=(new Date).getTime()-t;0==e.RspCode?(console.crlog(`[Callserver] Callserver shakeHand success, delay: ${n}ms`),CRVideo.HandErrTimes=CRVideo.HandErrTimes-1):console.crlog(`[Callserver] Callserver shakeHand fail: ${JSON.stringify(e)},`)}(e,n):console.crlog("[Callsvr] ShakeHandRslt"+e.RspCode)}};const h={data:{sendTask:[]},receive(e,t,n){let i=0;const r=t[i++],o=t[i++]<<24|t[i++]<<16|t[i++]<<8|t[i++],s=Utils.Uint8ArrToChar(t.slice(i,i+=o));if(0===r){console.crlog("[Callsvr] Received bufferData, received header data...");const e=t[i++]<<24|t[i++]<<16|t[i++]<<8|t[i++],n=Utils.Uint8ArrToChar(t.slice(i,i+=e)),o=t[i++]<<24|t[i++]<<16|t[i++]<<8|t[i++];this.data[s]={type:r,fileName:n,dataSize:o,dataBurst:[]}}else if(1===r){this.isStarting||(console.crlog("[Callsvr] Received bufferData, start to recive part data..."),this.isStarting=!0);const e=t[i++]<<24|t[i++]<<16|t[i++]<<8|t[i++],n=t[i++]<<24|t[i++]<<16|t[i++]<<8|t[i++],o=Array.prototype.concat.apply([],t.slice(i,n+i));this.data[s].type=r,this.data[s].dataBurst.push({start:e,length:n,data:o})}else if(2===r){console.crlog("[Callsvr] Received bufferData, transmit finished...");const t=this.data[s].dataBurst;t.sort(((e,t)=>e.start-t.start));let n=0,i=[];console.crlog("[Callsvr] Received bufferData, start to concat...");for(let e=0;e<t.length;e++)n+=t[e].length,i=i.concat(t[e].data);if(i=Utils.Uint8ArrToChar(i),n===this.data[s].dataSize)try{console.crlog(`[Callsvr] CRVideo_NotifyBufferData.target(${e.sourceUserId},bufferData)`),CRVideo_NotifyBufferData.target(e.sourceUserId,i)}catch(e){console.error(e)}}n.ice_response(JSON.stringify({RspCode:0,RspDesc:"ok"}))},receiveFile(e,t,n){let i=0;const r=t[i++],o=t[i++]<<24|t[i++]<<16|t[i++]<<8|t[i++],s=Utils.Uint8ArrToChar(t.slice(i,i+=o));if(0===r){console.crlog("[Callsvr] Received fileData, received header data...");const e=t[i++]<<24|t[i++]<<16|t[i++]<<8|t[i++],n=Utils.Uint8ArrToChar(t.slice(i,i+=e)).split("\\").pop(),o=t[i++]<<24|t[i++]<<16|t[i++]<<8|t[i++];this.data[s]={type:r,fileName:n,dataSize:o,dataBurst:[]}}else if(1===r){this.isStarting||(console.crlog("[Callsvr] Received fileData, start to recive part data..."),this.isStarting=!0);const e=t[i++]<<24|t[i++]<<16|t[i++]<<8|t[i++],n=t[i++]<<24|t[i++]<<16|t[i++]<<8|t[i++],o=Array.prototype.concat.apply([],t.slice(i,n+i));this.data[s].type=r,this.data[s].dataBurst.push({start:e,length:n,data:o})}else if(2===r){console.crlog("[Callsvr] Received fileData, transmit finished...");const t=this.data[s].dataBurst;t.sort(((e,t)=>e.start-t.start));let n=0,i=[];console.crlog("[Callsvr] Received fileData, start to concat...");for(let e=0;e<t.length;e++)n+=t[e].length,i=i.concat(t[e].data);if(n===this.data[s].dataSize)try{this.writeFile(e.sourceUserId,new Uint8Array(i).buffer,this.data[s].fileName,s)}catch(e){console.error(e)}}n.ice_response(JSON.stringify({RspCode:0,RspDesc:"ok"}))},writeFile(e,t,n,i){const r=Utils.getFileType(n),o=new Blob([t]);window.URL.createObjectURL(o);console.crlog(`[Callsvr] Recevied file success, fileName: ${n}, fileType: ${r}, size: ${parseInt(o.size/1024)}KB`),console.crlog(`[Callsvr] CRVideo_NotifyFileData.target(${e}, ${t}, ${n})`),CRVideo_NotifyFileData.target(e,t,n)},sendFile(e,t,n,i,r){const o=102400,s=n,a=Utils.splitCutArr(s,o),c=s.length,l=Utils.charToUint8Arr(t),d=l.length,u=new C,f=u.create(0,8+l.length);let _=f.length-8-l.length;f[_++]=(4278190080&d)>>24,f[_++]=(16711680&d)>>16,f[_++]=(65280&d)>>8,f[_++]=255&d;for(let e=0;e<l.length;e++)f[_++]=l[e];f[_++]=(4278190080&c)>>24,f[_++]=(16711680&c)>>16,f[_++]=(65280&c)>>8,f[_++]=255&c;var p={cmd:"SendFile",module:"CallServer",sessionID:CRVideo.sessionID,sourceUserId:CRVideo.LoginParam.user_id||"",targetUserId:e};function g(e){h.data.sendTask.forEach((e=>{e.uuid==i&&(e.state=3)})),console.crlog(`[Callsvr] CRVideo_SendFileRslt.target(${i},1,${r})`),CRVideo_SendFileRslt.target(i,e||1,r)}h.data.sendTask.forEach((e=>{e.uuid==i&&(e.state=1)})),CRVideo.webSendBuffer(p,f,((e,t)=>{if(0!==t)return void g(t);let n=0;function i(t,n){const i=t*o,l=a.length?o:s.length%o,d=u.create(1,l+8);let h=d.length-(l+8);d[h++]=(4278190080&i)>>24,d[h++]=(16711680&i)>>16,d[h++]=(65280&i)>>8,d[h++]=255&i,d[h++]=(4278190080&l)>>24,d[h++]=(16711680&l)>>16,d[h++]=(65280&l)>>8,d[h++]=255&l;for(let e=0;e<n.length;e++)d[h++]=n[e];CRVideo_SendProgress.target(e,i,s.length,r),CRVideo.webSendBuffer(p,d,c,e,r)}function c(e,t){if(t&&0!==t)return void g(t);const o=h.data.sendTask.find((t=>t.uuid==e)),s=a.shift();if(s)1==o.state?(i(n,s),n++):(console.crlog(`[Callsvr] CRVideo_SendFileRslt.target(${e},1199,${r})`),CRVideo_SendFileRslt.target(e,1199,r));else{const t=u.create(2,0);CRVideo.webSendBuffer(p,t,((e,t)=>{0===t?(h.data.sendTask.forEach((t=>{t.uuid==e&&(t.state=2)})),console.crlog(`[Callsvr] CRVideo_SendFileRslt.target(${e},0,${r})`),CRVideo_SendFileRslt.target(e,0,r)):g(t)}),e,r)}}c(e)}),i,r)}};var f=Ice.Class(SendCmd.Cmd,{sendCmd_async:function(e,t,n){e.ice_response(JSON.stringify({RspCode:0,RspDesc:"ok"}));var i=JSON.parse(t),r=i.cmd;i.module;if(null!=r){console.crlog(`[Callsvr] Received cmd callback:${r} --\x3e ${JSON.stringify(i)}`);try{d[r](i)}catch(e){console.crlog(e),console.error(e)}}},sendBuffer_async:function(e,n,i,r){e.ice_response(JSON.stringify({RspCode:0,RspDesc:"ok"}));var o=JSON.parse(n);if("SendCMD"==o.cmd){var s=function(e){var t,n,i,r,o,s;for(t="",i=e.length,n=0;n<i;)switch((r=e[n++])>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:t+=String.fromCharCode(r);break;case 12:case 13:o=e[n++],t+=String.fromCharCode((31&r)<<6|63&o);break;case 14:o=e[n++],s=e[n++],t+=String.fromCharCode((15&r)<<12|(63&o)<<6|(63&s)<<0)}return t}(i);t.apis.includes("CRVideo_NotifyCmdData")||console.crlog(`[Callsvr] CRVideo_NotifyCmdData.target(${o.sourceUserId}, ${s});`),CRVideo_NotifyCmdData.target(o.sourceUserId,s)}else"SendBuffer"==o.cmd?h.receive(o,i,e):"SendFile"==o.cmd&&h.receiveFile(o,i,e)}}),p=Ice.Class(LogSpace.ClientLogServer,{log:function(e){console.crlog("[Callsvr] log:"+e)},logFatal:function(e){console.crlog("[Callsvr] logFatal:"+e)},usrReport:function(e){console.crlog("[Callsvr] usrReport:"+e)},logDetail:function(e){console.crlog("[Callsvr] logDetail:"+e)}});function C(){this.uuid=Ice.generateUUID(),this.CommonArray=[],this.init()}window.CRVideo_SetAdapter=function(){const e=new Promise(((e,t)=>{Ice.Promise.try2((function(){SendCmd.CmdPrx.checkedCast(CRVideo.proxy).then((function(t){return CRVideo.callserverCastPrx=t,console.crlog("[Callsvr] Ice set adapter success!"),CRVideo.ic.createObjectAdapter("").then((function(e){CRVideo.cruxAdapter=e,e.add(new f,CRVideo.ic.stringToIdentity("jclient")),e.activate();let t=CRVideo.callserverCastPrx.ice_getCachedConnection();if(null==t)return console.crlog("[Callsvr] callserver ice_getCachedConnection is null!"),!1;t.setAdapter(e)})),e()})).exception((function(e){return console.crlog("[Callsvr] !!!Callserver checkedCast fail. is: "+e),t()}))})).exception((function(e){return t()}))}));return e},window.CRVideo_LoggerAdapter=function(){Ice.Promise.try2((function(){CRVideo.ServerLogger=LogSpace.ClientLogServerPrx.checkedCast(CRVideo.logproxy).then((function(e){CRVideo.logIceConnect.createObjectAdapter("").then((function(t){CRVideo.logServerPrx=e,CRVideo.logServerAdapter=t,t.add(new p,Ice.stringToIdentity("jclient"));let n=CRVideo.logServerPrx.ice_getCachedConnection();if(null==n)return console.crlog("[Callsvr] log ice_getCachedConnection is null!"),!1;n.setAdapter(t)}))}))})).exception((function(e){console.crlog("[Callsvr] There are several reasons for websocket errors: "+e.toString()),Ice.Promise.try2(__Rtc.postCmd.destroyLogConnect).finally((function(){process.exit(1)}))}))},C.prototype.init=function(){let e=0;const t=this.uuid.length;this.CommonArray[e++]=0,this.CommonArray[e++]=(4278190080&t)>>24,this.CommonArray[e++]=(16711680&t)>>16,this.CommonArray[e++]=(65280&t)>>8,this.CommonArray[e++]=255&t;const n=new TextEncoder("utf-8").encode(this.uuid);for(let i=0;i<t;i++)this.CommonArray[e++]=n[i]},C.prototype.create=function(e,t){const n=new Uint8Array(this.CommonArray.length+t);for(let e=0;e<this.CommonArray.length;e++)n[e]=this.CommonArray[e];return n[0]=e,n},C.prototype.getUUID=function(){return this.uuid},window.CRVideo_SendBuffer=function(e,t,n){function i(e){h.data.sendTask.forEach((e=>{e.uuid==d&&(e.state=3)})),console.crlog("[Callsvr] CRVideo_SendBuffer finished： "+JSON.stringify(f)),CRVideo_SendBufferRslt.target(d,e||1,n)}const r=102400;let o=new TextEncoder("utf-8").encode(t.toString());const s=function(e,t){let n=0,i=[];for(;n<e.length;)i.push(e.slice(n,n+=t));return i}(o,r),a=o.length,c=new C,l=c.create(0,8),d=c.getUUID();h.data.sendTask.push({uuid:d,state:0});let u=l.length-8;l[u++]=l[u++]=l[u++]=l[u++]=0,l[u++]=(4278190080&a)>>24,l[u++]=(16711680&a)>>16,l[u++]=(65280&a)>>8,l[u++]=255&a;var f={cmd:"SendBuffer",module:"CallServer",sessionID:CRVideo.sessionID,sourceUserId:CRVideo.LoginParam.user_id||"",targetUserId:e};return h.data.sendTask.forEach((e=>{e.uuid==d&&(e.state=1)})),CRVideo.webSendBuffer(f,l,(function(e,t){if(0!==t)return void i(t);let a=0;function l(t,a){const l=t*r,u=s.length?r:o.length%r,h=c.create(1,u+8);let _=h.length-(u+8);h[_++]=(4278190080&l)>>24,h[_++]=(16711680&l)>>16,h[_++]=(65280&l)>>8,h[_++]=255&l,h[_++]=(4278190080&u)>>24,h[_++]=(16711680&u)>>16,h[_++]=(65280&u)>>8,h[_++]=255&u;for(let e=0;e<a.length;e++)h[_++]=a[e];CRVideo_SendProgress.target(e,l,o.length,n),CRVideo.webSendBuffer(f,h,(function(e,t){0===t?d(e):i(t)}),e,n)}function d(e){const t=h.data.sendTask.find((t=>t.uuid==e)),r=s.shift();if(r)1==t.state?(l(a,r),a++):(console.crlog(`[Callsvr] CRVideo_SendBufferRslt.target(${e},1199,${n})`),CRVideo_SendBufferRslt.target(e,1199,n));else{const t=c.create(2,0);CRVideo.webSendBuffer(f,t,(function(e,t){0===t?(h.data.sendTask.forEach((t=>{t.uuid==e&&(t.state=2)})),CRVideo_SendBufferRslt.target(e,0,n)):i(t)}),e,n)}}d(e)}),d,n),d},window.CRVideo_SendFile=function(e,t,n){console.crlog(`[Callsvr] CRVideo_SendFile(${e},${t.name})`);const i=Ice.generateUUID();try{const o=t.name;var r=new FileReader;r.readAsArrayBuffer(t),r.onload=t=>{const s=new Int8Array(r.result);h.data.sendTask.push({uuid:i,state:0}),h.sendFile(e,o,s,i,n)}}catch(e){throw console.crlog(`[Callsvr] [error] ${e}`),e}return i},window.CRVideo_SendCmd=function(e,n,i){try{t.apis.includes("CRVideo_SendCmd")||console.crlog(`[Callsvr] CRVideo_SendCmd(${e},${n},${i})`)}catch(e){throw e}var r={cmd:"SendCMD",module:"CallServer",sessionID:CRVideo.sessionID,sourceUserId:CRVideo.LoginParam.user_id||"",targetUserId:e},o=new TextEncoder("utf-8").encode(n.toString());const s=Ice.generateUUID();return CRVideo.webSendBuffer(r,o,CRVideo_SendCmdRslt.callback,s,i),s},window.CRVideo_CancelSend=function(e){h.data.sendTask.forEach((t=>{t.uuid==e&&(t.state=0)}))},CRVideo.webSendBuffer=function(e,t,n,i,r){Ice.Promise.try2((function(){CRVideo.callserverCastPrx&&(CRVideo.ic.createObjectAdapter("").then((function(e){CRVideo.cruxAdapter=e,e.add(new f,CRVideo.ic.stringToIdentity("jclient")),e.activate();let t=CRVideo.callserverCastPrx.ice_getCachedConnection();if(null==t)return console.crlog("[Callsvr] callserver ice_getCachedConnection is null!"),!1;t.setAdapter(e)})),CRVideo.callserverCastPrx.sendBuffer(JSON.stringify(e),t).then((function(t){void 0!==n&&n(i,CRVideo_ERR_DEF.NOERR,r);e.cmd})).exception((function(e){let t=e.reason;void 0!==n&&(t.includes("not found")?n(i,CRVideo_ERR_DEF.SENDDATA_TARGETINVALID,r):n(i,CRVideo_ERR_DEF.UNKNOWERR,r)),console.crlog("[Callsvr] ex = "+e),console.error(e),console.crlog("[Callsvr] reason = "+e.reason)})))})).exception((function(e){console.crlog("[Callsvr] There are several reasons for websocket errors: "+e.toString()),Ice.Promise.try2(CRVideo.destroyCruxConnect).finally((function(){process.exit(1)}))}))},CRVideo.webSendcmd=function(e,t,n){var i=e.cmd;e.module;CRVideo.callserverCastPrx&&CRVideo.callserverCastPrx.sendCmd(JSON.stringify(e)).then((function(r){let o=CRVideo.callserverCastPrx.ice_getCachedConnection();null!=o?o.setAdapter(CRVideo.cruxAdapter):console.crlog("[Callsvr] callserver ice_getCachedConnection is null!");var s=JSON.parse(r);0!=s.RspCode&&console.crlog("[Callsvr] !!!error. sendcmdName: "+i+", RspCode: "+s.RspCode+", RspDesc: "+s.RspDesc),u[i]&&u[i](s,e,t,n)})).exception((function(r){console.crlog(`[Callsvr] !!!Callserver send cmd uncheckedCast fail. error: ${r.error}, reason: ${r.reason}`),3!==r.error&&1006!==r.error||CRVideo.LineOffHandler(204),console.error(r),u[i]&&u[i]({RspCode:204},e,t,n)}))},CRVideo.webLogDetail=function(e,t,n){CRVideo.logproxy&&Ice.Promise.try2((function(){LogSpace.ClientLogServerPrx.checkedCast(CRVideo.logproxy).then((function(i){i.logDetail(e,t,n).then((function(e){console.crlog("[LOG] Log uploading success!")}))})).exception((function(e){console.crlog("[LOG] !!! log checkedCast fail. is: "+e),-1!=__Rtc.postCmd.errorLoginAgain.indexOf(e.toString())&&__Rtc.postCmd.IceLogCreate()}))})).exception((function(e){console.crlog("[Callsvr] There are several reasons for websocket errors: "+e.toString()),Ice.Promise.try((function(){CRVideo.destroyCruxConnect})).finally((function(){process.exit(1)}))}))},window.CRVideo_ShakeHand=function(){if(clearTimeout(CRVideo.HandShark),CRVideo.HandShark=setTimeout(CRVideo_ShakeHand,__Rtc.postCmd.config.HandSharkTime),CRVideo.HandErrTimes>120)CRVideo.HandErrTimes=0,console.crlog("[Callsvr] HandErrTimes error: Abnormal dropped!!!!!"),CRVideo.LineOffHandler(CRVideo_ERR_DEF.SOCKETEXCEPTION);else{var e={};let t=(new Date).getTime();e=CRVideo.CallID?{cmd:"ShakeHand",module:"CallServer",sessionID:CRVideo.sessionID,callID:CRVideo.CallID}:{cmd:"ShakeHand",module:"CallServer",sessionID:CRVideo.sessionID},CRVideo.webSendcmd(e,t),CRVideo.HandErrTimes=CRVideo.HandErrTimes+1}},CRVideo.callServerSendCMD=function(e){return new Promise(((t,n)=>{Ice.Promise.try2((()=>{if(!CRVideo.callserverCastPrx)return console.crlog("[Callserver] Did not login callserver!"),n("[Callserver] Did not login callserver!");{const i=JSON.stringify(Object.assign(e,{sessionID:CRVideo.sessionID}));CRVideo.callserverCastPrx.sendCmd(i).then((e=>t(JSON.parse(e)))).exception((t=>{if(console.crlog(`[Callserver] SendCMD Fail, cmd: ${e.cmd}`),console.crlog(t),!t||3!==t.error)return n(t);CRVideo.LineOffHandler(204)}))}})).exception((e=>(console.crlog(e.toString()),n(`[Error] Callserver connect Fail, ${e.toString()}`))))}))},window.CRVideo_NotifyCmdData=new CRVideo.CbProxy("CRVideo_NotifyCmdData"),window.CRVideo_SendCmdRslt=new CRVideo.CbProxy("CRVideo_SendCmdRslt"),window.CRVideo_SendBufferRslt=new CRVideo.CbProxy("CRVideo_SendBufferRslt"),window.CRVideo_SendProgress=new CRVideo.CbProxy("CRVideo_SendProgress"),window.CRVideo_SendFileRslt=new CRVideo.CbProxy("CRVideo_SendFileRslt"),window.CRVideo_SendProgress=new CRVideo.CbProxy("CRVideo_SendProgress"),window.CRVideo_CancelSendRslt=new CRVideo.CbProxy("CRVideo_CancelSendRslt"),window.CRVideo_NotifyBufferData=new CRVideo.CbProxy("CRVideo_NotifyBufferData"),window.CRVideo_NotifyFileData=new CRVideo.CbProxy("CRVideo_NotifyFileData"),window.CRVideo_NotifyCancelSend=new CRVideo.CbProxy("CRVideo_NotifyCancelSend");__webpack_require__(2398);var g=__webpack_require__(3826);Cr.LHProxy=function(e){this.__config=e,!this.__config||"ws"!=this.__config.protocol&&"wss"!=this.__config.protocol?this._protocol="wss":this._protocol=this.__config.protocol,this._type="html5",this._logining=!1},Cr.LHProxy.prototype.initIce=function(){var e=new Cr.AsyncResult;return this.callbackDict={},this._initData=new Ice.InitializationData,this._initData.properties=Ice.createProperties(),this._initData.properties.setProperty("Ice.Trace.Network","0"),this._initData.properties.setProperty("Ice.Trace.Protocol","0"),this._initData.properties.setProperty("Ice.ACM.Client","0"),this._initData.properties.setProperty("Ice.Default.EncodingVersion","1.0"),this._initData.properties.setProperty("Ice.ThreadPool.Client.Serialize","1"),this._initData.properties.setProperty("Ice.ThreadPool.Server.Serialize","1"),e.complete([0,""]),e},Cr.LHProxy.prototype.registeredCallback=function(e,t){if(this.callbackDict[e])throw"已经存在的注册对象";this.callbackDict[e]=t},Cr.LHProxy.prototype.unregisterCallback=function(e,t){this.callbackDict[e]=null,delete this.callbackDict[e]},Cr.LHProxy.prototype.callCallback=function(e,t){var n=this.callbackDict[e];if(n&&"function"==typeof n)try{n.call(null,t)}catch(e){console.crlog(`[SDK][Error] ${e}`),console.error(e)}},Cr.LHProxy.prototype.initCon=function(){try{this._communicator&&(this._communicator.destroy(),this._communicator=null),this._connection&&(this._connection.destroy(0),this._connection=null),this._adapter&&(this._adapter.destroy(),this._adapter=null),this._routerPrx&&(this._routerPrx.destroySession(),this._routerPrx=null)}catch(e){console.crlog("[RTC] ice Init fail.!")}},Cr.LHProxy.prototype.refreshSession=function(){var e=new Cr.AsyncResult;try{this._routerPrx.refreshSession().then(function(){e.complete([0,""])}.bind(this)).exception(function(t){e.complete([204,"网络错误"]),console.crlog&&console.crlog(t.toString()),console.crlog&&console.crlog(t.stack)}.bind(this))}catch(t){e.complete([3,t.toString()])}return e},Cr.LHProxy.prototype.keepAlive=function(e){var t=new Cr.AsyncResult;try{var n=new Ice.HashMap;n.set("w",e.toString()),this._conferenceRequest.keepAlive(n).then(function(){t.complete([0,""])}.bind(this)).exception(function(e){t.complete([204,"网络错误"]),console.crlog&&console.crlog(e.toString()),console.crlog&&console.crlog(e.stack)}.bind(this))}catch(e){t.complete([3,e.toString()])}return t},Cr.LHProxy.prototype.exit=function(e){var t=new Cr.AsyncResult;try{console.crlog(`[Ice] this._conferenceRequest.exit(${e})`),this._conferenceRequest.exit(e).then(function(){t.complete([0,""])}.bind(this)).exception(function(e){t.complete([204,"网络错误"]),console.crlog&&console.crlog(e.toString()),console.crlog&&console.crlog(e.stack)}.bind(this))}catch(e){t.complete([3,e.toString()])}return t},Cr.LHProxy.prototype.getActiveMembers=function(){var e=new Cr.AsyncResult;try{new Ice.HashMap;this._conferenceRequest.getActiveMembers().then(function(t){for(var n in t){var i=t[n].extProperty.get(Conference.MINFO_OPENEDCAMIDS);null!=i&&(i=i.split(";")[0]),t[n].openedCamIDs=i}e.complete([0,"",t])}.bind(this)).exception(function(t){e.complete([204,"网络错误"]),console.crlog&&console.crlog(t.toString()),console.crlog&&console.crlog(t.stack)}.bind(this))}catch(t){e.complete([3,t.toString()])}return e},Cr.LHProxy.prototype.SendIMMsg=function(t,n,i,r,o){var s=new Cr.AsyncResult;try{var a=new Ice.Context;a._fwd="z";var c=new Conference.InIMMsgInfo;c.targetTermId=t,c.targetNickname=n,c.font=i,c.msg=e.Z.html2chat(r),c.sendTime=o,this._chatRequest.sendIMMsg(c,a).then(function(){s.complete([0,""])}.bind(this)).exception(function(e){e instanceof Conference.ContainsSensitiveWords?s.complete([900,"包含了敏感词"]):e instanceof Conference.NotPermitError?s.complete([901,"没有聊天权限"]):s.complete([1,"未知错误"]),console.crlog&&console.crlog(e.toString()),console.crlog&&console.crlog(e.stack)}.bind(this))}catch(e){s.complete([3,e.toString()])}return s},Cr.LHProxy.prototype.getIMMsgCount=function(){var e=new Cr.AsyncResult;try{this._chatRequest.getIMMsgCount().then(function(t){e.complete([0,"",t])}.bind(this)).exception(function(t){e.complete([1,"未知错误"]),console.crlog&&console.crlog(t.toString()),console.crlog&&console.crlog(t.stack)}.bind(this))}catch(t){e.complete([3,t.toString()])}return e},Cr.LHProxy.prototype.getLastMsg=function(t){var n=new Cr.AsyncResult;try{var i=new Ice.Context;i._fwd="z",this._chatRequest.getLastMsg(t,i).then(function(t){var i=[];for(var r in t){var o=t[r],s=o.srcNickname.split("\0"),a=e.Z.chat2html(o.inMsg.msg,o.inMsg.font.color,o.inMsg.font.size),c={type:a[0],index:o.index,msg:a[2],head:a[1],sendTime:o.inMsg.sendTime,targetNickname:o.inMsg.targetNickname,targetTermId:o.inMsg.targetTermId,srcNickname:s[0],srcTermId:o.srcTermId,ishost:s.length>1};i.push(new Cr.MsgInfo(c))}n.complete([0,"",i])}.bind(this)).exception(function(e){n.complete([1,"未知错误"]),console.crlog&&console.crlog(e.toString()),console.crlog&&console.crlog(e.stack)}.bind(this))}catch(e){n.complete([3,e.toString()])}return n},Cr.LHProxy.prototype.getLastNMsg=function(t,n){var i=new Cr.AsyncResult;try{var r=new Ice.Context;r._fwd="z",this._chatRequest.getLastNMsg(t,n,r).then(function(t){var n=[];for(var r in t){var o=t[r],s=o.srcNickname.split("\0"),a=e.Z.chat2html(o.inMsg.msg,o.inMsg.font.color,o.inMsg.font.size),c={type:a[0],index:o.index,msg:a[2],head:a[1],sendTime:o.inMsg.sendTime,targetNickname:o.inMsg.targetNickname,targetTermId:o.inMsg.targetTermId,srcNickname:s[0],srcTermId:o.srcTermId,ishost:s.length>1};n.push(new Cr.MsgInfo(c))}i.complete([0,"",n]),console.crlog&&console.crlog("[RTC] It takes time to get chat history:"+((new Date).getTime()-Cr.AccessLoginStartTime))}.bind(this)).exception(function(e){i.complete([1,"未知错误"]),console.crlog&&console.crlog(e.toString()),console.crlog&&console.crlog(e.stack)}.bind(this))}catch(e){i.complete([3,e.toString()])}return i},Cr.LHProxy.prototype.getBroadCastUrl=function(){var e=new Cr.AsyncResult;try{this._conferenceRequest.getBroadCastUrl().then((function(t){var n={rtmp:t.get(Conference.BOARDCAST_RTMP),hls:t.get(Conference.BOARDCAST_HLS)};e.complete([0,"",n])})).exception((function(t){e.complete([1,"未知错误"]),console.crlog&&console.crlog(t.toString()),console.crlog&&console.crlog(t.stack)}))}catch(t){e.complete([3,t.toString()])}return e},Cr.LHProxy.prototype.askQues=function(e,t,n,i,r,o){var s=new Cr.AsyncResult;try{var a=new Conference.QuesAsk;a.typeID=e,a.asktime=t,a.termID=n,i&&""!=i&&(r='<headimg src="'+i+'"/>'+ +r),a.content=r,a.nickname=o,this._ansQuesCtrl.askQues(a).then((function(e){s.complete([0,"",e])})).exception((function(e){s.complete([1,"未知错误"]),console.crlog&&console.crlog(e.toString()),console.crlog&&console.crlog(e.stack)}))}catch(e){s.complete([3,e.toString()])}return s},Cr.LHProxy.prototype.getQuesList=function(){var e=new Cr.AsyncResult;try{this._ansQuesCtrl.getQuesList().then((function(t){for(var n in quesList=[],t){var i=t[n];quesList.push(new Cr.QuesInf(i))}e.complete([0,"",quesList])})).exception((function(t){e.complete([1,"未知错误"]),console.crlog&&console.crlog(t.toString()),console.crlog&&console.crlog(t.stack)}))}catch(t){e.complete([3,t.toString()])}return e},Cr.LHProxy.prototype.getLuckyDrawCfg=function(){var e=new Cr.AsyncResult;try{this._conferenceRequest.getLuckyDrawCfg().then((function(t){var n=t;e.complete([0,"",n])})).exception((function(t){e.complete([1,"未知错误"])}))}catch(t){e.complete([3,t.toString()])}return e},Cr.LHProxy.prototype.joinLuckyDrawMembers=function(e,t){var n=new Cr.AsyncResult;try{this._conferenceRequest.joinLuckyDrawMembers(e,t).then(function(){n.complete([0,""])}.bind(this)).exception(function(e){n.complete([204,"网络错误"]),console.crlog&&console.crlog(e.toString()),console.crlog&&console.crlog(e.stack)}.bind(this))}catch(e){n.complete([3,e.toString()])}return n},Cr.LHProxy.prototype.terminalMsg=function(e,t,n,i){var r=new Cr.AsyncResult;try{this._conferenceRequest.terminalMsg(e,t,n,i).then((function(){r.complete([0,""])})).exception((function(e){r.complete([1,"未知错误"])}))}catch(e){r.complete([3,e.toString()])}return r},Cr.LHProxy.prototype.VideoResolutionReport=function(e,t,n){var i=new Cr.AsyncResult;try{this._clientReport.VideoResolutionReport(e,t,n).then(function(){i.complete([0,""])}.bind(this)).exception(function(e){i.complete([204,"网络错误"]),console.crlog&&console.crlog(e.toString()),console.crlog&&console.crlog(e.stack)}.bind(this))}catch(e){i.complete([3,e.toString()])}return i},Cr.LHProxy.prototype.setAudioDeviceStatus=function(e){var t=new Cr.AsyncResult;try{this._audioCtrl.setDeviceStatus(e).then(function(){t.complete([0,""])}.bind(this)).exception(function(e){t.complete([204,"网络错误"]),console.crlog&&console.crlog(e.toString()),console.crlog&&console.crlog(e.stack)}.bind(this))}catch(e){t.complete([3,e.toString()])}return t},Cr.LHProxy.prototype.closeMicEx=function(e){var t=new Cr.AsyncResult;try{this._audioCtrl.closeMicEx(e).then(function(){t.complete([0,""])}.bind(this)).exception(function(e){t.complete([204,"网络错误"]),console.crlog&&console.crlog(e.toString()),console.crlog&&console.crlog(e.stack)}.bind(this))}catch(e){t.complete([3,e.toString()])}return t},Cr.LHProxy.prototype.closeAll=function(){var e=new Cr.AsyncResult;try{this._audioCtrl.closeAll().then(function(){e.complete([0,""])}.bind(this)).exception(function(t){e.complete([204,"网络错误"]),console.crlog&&console.crlog(t.toString()),console.crlog&&console.crlog(t.stack)}.bind(this))}catch(t){e.complete([3,t.toString()])}return e},Cr.LHProxy.prototype.setVoiceEnergy=function(e){var t=new Cr.AsyncResult;try{this._audioCtrl.setVoiceEnergy(e).then(function(){t.complete([0,""])}.bind(this)).exception(function(e){t.complete([204,"网络错误"]),console.crlog&&console.crlog(e.toString()),console.crlog&&console.crlog(e.stack)}.bind(this))}catch(e){t.complete([3,e.toString()])}return t},Cr.LHProxy.prototype.pstnSwitchMicStatus=function(){var e=new Cr.AsyncResult;try{this._audioCtrl.pstnSwitchMicStatus().then(function(){e.complete([0,""])}.bind(this)).exception(function(t){e.complete([204,"网络错误"]),console.crlog&&console.crlog(t.toString()),console.crlog&&console.crlog(t.stack)}.bind(this))}catch(t){e.complete([3,t.toString()])}return e},Cr.LHProxy.prototype.startRecord=function(){var e=new Cr.AsyncResult;try{this._audioCtrl.startRecord().then(function(){e.complete([0,""])}.bind(this)).exception(function(t){e.complete([204,"网络错误"]),console.crlog&&console.crlog(t.toString()),console.crlog&&console.crlog(t.stack)}.bind(this))}catch(t){e.complete([3,t.toString()])}return e},Cr.LHProxy.prototype.isRecording=function(){var e=new Cr.AsyncResult;try{this._audioCtrl.isRecording().then(function(){e.complete([0,""])}.bind(this)).exception(function(t){e.complete([204,"网络错误"]),console.crlog&&console.crlog(t.toString()),console.crlog&&console.crlog(t.stack)}.bind(this))}catch(t){e.complete([3,t.toString()])}return e},Cr.LHProxy.prototype.stopRecord=function(){var e=new Cr.AsyncResult;try{this._audioCtrl.stopRecord().then(function(){e.complete([0,""])}.bind(this)).exception(function(t){e.complete([204,"网络错误"]),console.crlog&&console.crlog(t.toString()),console.crlog&&console.crlog(t.stack)}.bind(this))}catch(t){e.complete([3,t.toString()])}return e},Cr.LHProxy.prototype.playApplause=function(){var e=new Cr.AsyncResult;try{this._audioCtrl.playApplause().then(function(){e.complete([0,""])}.bind(this)).exception(function(t){e.complete([204,"网络错误"]),console.crlog&&console.crlog(t.toString()),console.crlog&&console.crlog(t.stack)}.bind(this))}catch(t){e.complete([3,t.toString()])}return e},Cr.LHProxy.prototype.getMusicList=function(){var e=new Cr.AsyncResult;try{this._audioCtrl.getMusicList().then(function(){e.complete([0,""])}.bind(this)).exception(function(t){e.complete([204,"网络错误"]),console.crlog&&console.crlog(t.toString()),console.crlog&&console.crlog(t.stack)}.bind(this))}catch(t){e.complete([3,t.toString()])}return e},Cr.LHProxy.prototype.getPlayBGMusic=function(){var e=new Cr.AsyncResult;try{this._audioCtrl.getPlayBGMusic().then(function(){e.complete([0,""])}.bind(this)).exception(function(t){e.complete([204,"网络错误"]),console.crlog&&console.crlog(t.toString()),console.crlog&&console.crlog(t.stack)}.bind(this))}catch(t){e.complete([3,t.toString()])}return e},Cr.LHProxy.prototype.startBGMusic=function(e,t){var n=new Cr.AsyncResult;try{this._audioCtrl.startBGMusic(e,t).then(function(){n.complete([0,""])}.bind(this)).exception(function(e){n.complete([204,"网络错误"]),console.crlog&&console.crlog(e.toString()),console.crlog&&console.crlog(e.stack)}.bind(this))}catch(e){n.complete([3,e.toString()])}return n},Cr.LHProxy.prototype.stopPlayBGMusic=function(){var e=new Cr.AsyncResult;try{this._audioCtrl.stopPlayBGMusic().then(function(){e.complete([0,""])}.bind(this)).exception(function(t){e.complete([204,"网络错误"]),console.crlog&&console.crlog(t.toString()),console.crlog&&console.crlog(t.stack)}.bind(this))}catch(t){e.complete([3,t.toString()])}return e},Cr.LHProxy.prototype.setPlayBGMusicVolumn=function(e){var t=new Cr.AsyncResult;try{this._audioCtrl.setPlayBGMusicVolumn(e).then(function(){t.complete([0,""])}.bind(this)).exception(function(e){t.complete([204,"网络错误"]),console.crlog&&console.crlog(e.toString()),console.crlog&&console.crlog(e.stack)}.bind(this))}catch(e){t.complete([3,e.toString()])}return t},Cr.LHProxy.prototype.getPlayBGMusicVolumn=function(){var e=new Cr.AsyncResult;try{this._audioCtrl.getPlayBGMusicVolumn().then(function(){e.complete([0,""])}.bind(this)).exception(function(t){e.complete([204,"网络错误"]),console.crlog&&console.crlog(t.toString()),console.crlog&&console.crlog(t.stack)}.bind(this))}catch(t){e.complete([3,t.toString()])}return e},Cr.LHProxy.prototype.voiceHowling=function(e){var t=new Cr.AsyncResult;try{this._audioCtrl.voiceHowling(e).then(function(){t.complete([0,""])}.bind(this)).exception(function(e){t.complete([204,"网络错误"]),console.crlog&&console.crlog(e.toString()),console.crlog&&console.crlog(e.stack)}.bind(this))}catch(e){t.complete([3,e.toString()])}return t},Cr.LHProxy.prototype.voiceNoise=function(e){var t=new Cr.AsyncResult;try{this._audioCtrl.voiceNoise(e).then(function(){t.complete([0,""])}.bind(this)).exception(function(e){t.complete([204,"网络错误"]),console.crlog&&console.crlog(e.toString()),console.crlog&&console.crlog(e.stack)}.bind(this))}catch(e){t.complete([3,e.toString()])}return t},Cr.LHProxy.prototype.remoteAudioSet=function(e,t){var n=new Cr.AsyncResult;try{this._audioCtrl.remoteAudioSet(e,t).then(function(){n.complete([0,""])}.bind(this)).exception(function(e){n.complete([204,"网络错误"]),console.crlog&&console.crlog(e.toString()),console.crlog&&console.crlog(e.stack)}.bind(this))}catch(e){n.complete([3,e.toString()])}return n},Cr.LHProxy.prototype.getRemoteAudioInf=function(e){var t=new Cr.AsyncResult;try{this._audioCtrl.getRemoteAudioInf(e).then(function(){t.complete([0,""])}.bind(this)).exception(function(e){t.complete([204,"网络错误"]),console.crlog&&console.crlog(e.toString()),console.crlog&&console.crlog(e.stack)}.bind(this))}catch(e){t.complete([3,e.toString()])}return t},Cr.conferenceRequest=(e,...t)=>new Promise(((n,i)=>{try{Cr._proxy._conferenceRequest[e](...t).then((function(...e){return n(e)})).exception((function(e){return console.crlog("[RTC] conferenceRequest fail: "+e.toString()),i(window.CRVideo_ERR_DEF.UNKNOWERR)}))}catch(e){return console.crlog("[RTC] conferenceRequest error: "+e.toString()),i(window.CRVideo_ERR_DEF.UNKNOWERR)}}));__webpack_require__(473);var m=__webpack_require__(1440);window.__Rtc.CRICEAPI=new class{constructor(){}GetScreenShareInfo(){(0,m.V)("_screenShareCtrl","getScreenShareInfo").then((e=>{__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.getScreenShareInfoRslt.apply(__Rtc.CRRTCScreen,e)})).catch((e=>{__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.getScreenShareInfoRslt.apply(__Rtc.CRRTCScreen,[e])}))}StartScreenShare(){(0,m.V)("_screenShareCtrl","startScreenShare").then((e=>{__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.startScreenShareRslt.apply(__Rtc.CRRTCScreen,e)})).catch((e=>{__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.startScreenShareRslt.apply(__Rtc.CRRTCScreen,[e])}))}StopScreenShare(){(0,m.V)("_screenShareCtrl","stopScreenShare").then((e=>{__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.stopScreenShareRslt.apply(__Rtc.CRRTCScreen,e)})).catch((e=>{__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.stopScreenShareRslt.apply(__Rtc.CRRTCScreen,[e])}))}StartMarked(){(0,m.V)("_screenShareCtrl","startMarked").then((e=>{__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.startMarkedRslt.apply(__Rtc.CRRTCScreen,e)})).catch((e=>{__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.startMarkedRslt.apply(__Rtc.CRRTCScreen,[e])}))}StopMarked(){(0,m.V)("_screenShareCtrl","stopMarked").then((e=>{__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.stopMarkedRslt.apply(__Rtc.CRRTCScreen,e)})).catch((e=>{__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.stopMarkedRslt.apply(__Rtc.CRRTCScreen,[e])}))}ClearAllMarksV4(){(0,m.V)("_screenShareCtrl","clearAllMarksV4").then((e=>{__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.clearAllMarksV4Rslt.apply(__Rtc.CRRTCScreen,e)})).catch((e=>{__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.clearAllMarksV4Rslt.apply(__Rtc.CRRTCScreen,[e])}))}GetAllMarkData(){(0,m.V)("_screenShareCtrl","getAllMarkData").then((e=>{__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.getAllMarkDataRslt.apply(__Rtc.CRRTCScreen,e)})).catch((e=>{__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.getAllMarkDataRslt.apply(__Rtc.CRRTCScreen,[e])}))}GetAllMarkDataV4(){(0,m.V)("_screenShareCtrl","getAllMarkDataV4").then((e=>{__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.getAllMarkDataV4Rslt.apply(__Rtc.CRRTCScreen,e)})).catch((e=>{__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.getAllMarkDataV4Rslt.apply(__Rtc.CRRTCScreen,[e])}))}SendMarkData({termid:e,color:t,mousePosSeq:n}={}){}SendMarkDataV4({termid:e,markid:t,type:n,mousePosSeq:i}={}){const r=new Conference.MarkDataV4(e,t,n,i);(0,m.V)("_screenShareCtrl","sendMarkDataV4",r).then((e=>{__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.sendMarkDataV4Rslt.apply(__Rtc.CRRTCScreen,e)})).catch((e=>{__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.ICECallback.sendMarkDataV4Rslt.apply(__Rtc.CRRTCScreen,[e])}))}StartPlayMedia(e){(0,m.V)("_mediaCtrl","startPlayMedia",e).then((e=>{__Rtc.CRRTCMedia&&__Rtc.CRRTCMedia.ICECallback.startPlayMediaRslt.apply(__Rtc.CRRTCMedia,e)})).catch((e=>{__Rtc.CRRTCMedia&&__Rtc.CRRTCMedia.ICECallback.startPlayMediaRslt.apply(__Rtc.CRRTCMedia,[e])}))}StopPlayMedia(){(0,m.V)("_mediaCtrl","stopPlayMedia").then((e=>{__Rtc.CRRTCMedia&&__Rtc.CRRTCMedia.ICECallback.stopPlayMediaRslt.apply(__Rtc.CRRTCMedia,e)})).catch((e=>{__Rtc.CRRTCMedia&&__Rtc.CRRTCMedia.ICECallback.stopPlayMediaRslt.apply(__Rtc.CRRTCMedia,[e])}))}GetMediaInfo(){(0,m.V)("_mediaCtrl","getMediaInfo").then((e=>{__Rtc.CRRTCMedia&&__Rtc.CRRTCMedia.ICECallback.getMediaInfoRslt.apply(__Rtc.CRRTCMedia,e)})).catch((e=>{__Rtc.CRRTCMedia&&__Rtc.CRRTCMedia.ICECallback.getMediaInfoRslt.apply(__Rtc.CRRTCMedia,[e])}))}PausePlayMedia(e){(0,m.V)("_mediaCtrl","pausePlayMedia",e).then((e=>{__Rtc.CRRTCMedia&&__Rtc.CRRTCMedia.ICECallback.pausePlayMediaRslt.apply(__Rtc.CRRTCMedia,e)})).catch((e=>{__Rtc.CRRTCMedia&&__Rtc.CRRTCMedia.ICECallback.pausePlayMediaRslt.apply(__Rtc.CRRTCMedia,[e])}))}SubscribeMedia(e){(0,m.V)("_mediaCtrl","subscribeMedia",e).then((e=>{__Rtc.CRRTCMedia&&__Rtc.CRRTCMedia.ICECallback.subscribeMediaRslt.apply(__Rtc.CRRTCMedia,e)})).catch((e=>{__Rtc.CRRTCMedia&&__Rtc.CRRTCMedia.ICECallback.subscribeMediaRslt.apply(__Rtc.CRRTCMedia,[e])}))}SetCurrentTab(e,t){return new Promise(((n,i)=>{const r=new Conference.TabID(e.termID,e.localID),o=new Conference.TabID(t.termID,t.localID);(0,m.V)("_syncCtrl","setCurrentTab",r,o).then((e=>n(e))).catch((e=>i(e)))}))}SaveLastTabValue(e){return new Promise(((t,n)=>{(0,m.V)("_syncCtrl","saveLastTabValue",e).then((e=>t(e))).catch((e=>n(e)))}))}setContainerSize(){}Create(e){return new Promise(((t,n)=>{const i=new Conference.TabID(e.wID.termID,e.wID.localID),r=new Conference.WhiteBoardDescribe(i,e.wType,e.docType,e.name,e.docName,e.width,e.height,e.scaleType,e.rotation,e.pageCount,e.curPage,e.animID,e.animFrames,e.showThum,e.bAll,e.allowTerms);(0,m.V)("_whiteBoardCtrl","create",r).then((e=>t(e)),(e=>n(e)))}))}ImportPage(e,t){return new Promise(((n,i)=>{e=new Conference.TabID(e.termID,e.localID);const r=[];for(let e=0;e<t.length;e++){const n=t[e].pageNo,i=t[e].imgID,o=i?Conference.WB_BAKIMG_TYPE.WB_BAKIMG_JPG:Conference.WB_BAKIMG_TYPE.WB_BAKIMG_NULL,s=t[e].elementList||[];r[e]=new Conference.PageData(n,o,i,s)}(0,m.V)("_whiteBoardCtrl","importPage",e,r).then((e=>n(e)),(e=>i(e)))}))}Close(e){return new Promise(((t,n)=>{const i=new Conference.TabID(e.termID,e.localID);(0,m.V)("_whiteBoardCtrl","close",i).then((e=>t(e)),(e=>n(e)))}))}changeName(){}changeScale(){}changeRatote(){}SetCurrentPage(e,t,n,i){return new Promise(((r,o)=>{e=new Conference.TabID(e.termID,e.localID),(0,m.V)("_whiteBoardCtrl","setCurrentPage",e,t,n,i).then((e=>r(e)),(e=>o(e)))}))}showThumPage(){}AddElement(e,t,n){return new Promise(((i,r)=>{const o=new Conference.ElementID(n.eID.ownerID,n.eID.ID),s=new Conference.ElementData(o,n.orderId,n.left,n.top,n.type,n.noused,n.data);(0,m.V)("_whiteBoardCtrl","addElement",e,t,s).then((e=>i(e)),(e=>r(e)))}))}AddElementEx(e,t,n){return new Promise(((i,r)=>{const o=[];for(var s=0;s<n.length;s++){const e=new Conference.ElementID(n[s].eID.ownerID,n[s].eID.ID);o.push(new Conference.ElementData(e,n[s].orderId,n[s].left,n[s].top,n[s].type,n[s].noused,n[s].data))}(0,m.V)("_whiteBoardCtrl","addElementEx",e,t,o).then((e=>i(e)),(e=>r(e)))}))}moveElement(){}modifyElement(){}DelElement(e,t,n){return new Promise(((i,r)=>{e=new Conference.TabID(e.termID,e.localID);const o=[];for(var s=0;s<n.length;s++)o.push(new Conference.ElementID(n[s].ownerID,n[s].ID));(0,m.V)("_whiteBoardCtrl","delElement",e,t,o).then((e=>i(e)),(e=>r(e)))}))}setElementZPos(){}setIndicator(){}setHotspot(){}queryIndicator(){}QueryAllBoardList(){return new Promise(((e,t)=>{(0,m.V)("_whiteBoardCtrl","queryAllBoardList").then((t=>e(t))).catch((e=>t(e)))}))}QueryElementByIDs(e,t){return new Promise(((n,i)=>{const r=new Conference.TabID(e.termID,e.localID);(0,m.V)("_whiteBoardCtrl","queryElementByIDs",r,t).then((e=>n(e))).catch((e=>i(e)))}))}QueryPageElementByIDs(e,t,n){return new Promise(((i,r)=>{const o=[];for(var s=0;s<n.length;s++)o.push(new Conference.ElementID(n[s]));const a=new Conference.TabID(e.termID,e.localID);(0,m.V)("_whiteBoardCtrl","queryPageElementByIDs",a,t,o).then((e=>i(e))).catch((e=>r(e)))}))}SetMarkTerms(){}Kickout(e){return new Promise(((t,n)=>{(0,m.V)("_conferenceRequest","kickout",e).then((e=>t(e))).catch((e=>n(e)))}))}ChangeNickname(e,t){return new Promise(((n,i)=>{(0,m.V)("_conferenceRequest","changeNickname",e,t).then((e=>n(e))).catch((e=>i(e)))}))}NetDetectResults(e,t){return new Promise(((n,i)=>{(0,m.V)("_conferenceRequest","netDetectResults",e,t).then((e=>n(e))).catch((e=>i(e)))}))}MediaConnectionBreakReport(e){return new Promise(((t,n)=>{(0,m.V)("_clientReport","MediaConnectionBreakReport",e).then((e=>t(e))).catch((e=>(console.error(e),n(e))))}))}};__webpack_require__(8989);const I=window.CRVideo,R=window.Ice;window.CRVideo_CreateMeeting2=e=>{try{console.crlog(`[MeetMgr] CRVideo_CreateMeeting2(${e})`)}catch(e){console.error(e)}window.CRVideo_CreateMeeting("",e)},window.CRVideo_CreateMeeting=function(e,t){try{console.crlog(`[MeetMgr] CRVideo_CreateMeeting(${JSON.stringify(e)},${t})`)}catch(e){console.error(e)}const n=`https://${I.webServerAddr}${i.Z.ClientCreateNetMeet}`,o=null!=e&&null!=e.meetSubject?e.meetSubject:"H5_SDK_REGULAR_ROOM",s=null!=e&&null!=e.needPswd?e.needPswd:0,a=null!=e&&null!=e.isRegular?e.isRegular:1,c={RequestId:R.generateUUID(),MeetSubject:encodeURI(o),IsRegular:a,NeedPswd:s,AsyncMeetMode:1,...I.webLoginOAuth};let l={};l=window.__Rtc._ReplaceObjParam(c,"UserPswd","******"),l=window.__Rtc._ReplaceObjParam(l,"Token","******"),console.crlog("[MeetMgr] WebAPI request url: "+n+", data:"+JSON.stringify(l)),I.meetSubject=o,(0,r.Z)({url:n,timeout:1e4,data:c,dataType:"jsonp",jsonp:"CallBack",success:function(e){let n;if(n=window.__Rtc._ReplaceObjParam(e,"CRMTStr","******"),n=window.__Rtc._ReplaceObjParam(e,"MeetPswd","******"),console.crlog("[MeetMgr] WebAPI /servlet/ClientCreateNetMeet request success, result: "+JSON.stringify(n)),0==e.RspCode){const n={ID:e.MeetID,pswd:e.MeetPswd,subject:o,pubMeetUrl:e.PublicUrl};I.pubMeetUrl=n.publicUrl,__Rtc.postCmd.meetJson=n,console.crlog("[MeetMgr] CreateMeetingSuccess! meetID: "+n.ID);try{console.crlog(`[MeetMgr] CRVideo_CreateMeetingSuccess.target(${JSON.stringify(window.__Rtc._ReplaceObjParam(n,"pswd","******"))},${t})`)}catch(e){console.error(e)}window.CRVideo_CreateMeetingSuccess.target(n,t)}else{console.crlog(`[MeetMgr] CreateMeetingFail! ResJson: ${JSON.stringify(e)}`);try{console.crlog(`[MeetMgr] CRVideo_CreateMeetingFail.target(${window.WEB_SDK_ERR(e.RspCode)},${t})`)}catch(e){console.error(e)}7==e.RspCode&&e.RspCode,window.CRVideo_CreateMeetingFail.target(window.WEB_SDK_ERR(e.RspCode),t)}},error:function(e){console.crlog("[MeetMgr] WebAPI /servlet/ClientCreateNetMeet request fail!");try{console.crlog(`[MeetMgr] CRVideo_CreateMeetingFail.target(202,${t})`)}catch(e){console.error(e)}window.CRVideo_CreateMeetingFail.target(202,t)}})},window.CRVideo_EnterMeeting3=(e,t,n)=>{if(console.crlog(`[MeetMgr] CRVideo_EnterMeeting3(${e},${t},${n})`),1!==I.loginAuthFlag||!I.LoginParam)return console.crlog(`[MeetMgr] CRVideo_EnterMeetingRslt.target(7, ${t})`),CRVideo_EnterMeetingRslt.target(7,t),void CRVideo_UploadingLog();if(!e||8!==e.toString().length||NaN==(+e).toString())return console.crlog(`[MeetMgr] CRVideo_EnterMeetingRslt.target(5, ${t})`),CRVideo_EnterMeetingRslt.target(5,t),void CRVideo_UploadingLog();const i=n||"",r=I.LoginParam.user_id,o=I.LoginParam.nick_name;CRVideo_EnterMeeting(e,i,r,o,t)},window.CRVideo_EnterMeeting2=(e,t,n,i)=>{console.crlog(`[MeetMgr] CRVideo_EnterMeeting2(${e},${t},${n},${i})`),CRVideo_EnterMeeting(e,"",t,n,i)},window.CRVideo_EnterMeeting=async function(e,t,n,o,s=""){if(console.crlog(`[MeetMgr] CRVideo_EnterMeeting(${e},***,${n},${o},${s})`),"MeetSDK"!=I.SDKKey&&(1!==I.loginAuthFlag||!I.LoginParam))return console.crlog(`[MeetMgr] CRVideo_EnterMeetingRslt.target(7, ${s})`),CRVideo_EnterMeetingRslt.target(7,s),void CRVideo_UploadingLog();function a(){const n=`https://${I.webServerAddr}${i.Z.joinMeetingAPI}`;console.crlog("[MeetMgr] CR.EnterMeeting begin： "+e);const a={ClientVer:I.sdkver,PRODUCT:"MeetSDK"==I.SDKKey?"WebMeetApp":"H5SDK",RequestId:R.generateUUID(),MeetID:e,MeetPswd:t,NickName:encodeURI(o),MeetWay:0,AsyncMeetMode:1};"MeetSDK"!=I.SDKKey&&Object.assign(a,{UserType:4,...I.webLoginOAuth});let c={};c=window.__Rtc._ReplaceObjParam(a,"UserPswd","******"),c=window.__Rtc._ReplaceObjParam(c,"Token","******"),c=window.__Rtc._ReplaceObjParam(c,"MeetPswd","******"),console.crlog("[MeetMgr] WebAPI request url: "+n+", data:"+JSON.stringify(c));const l={_data_:JSON.stringify(a)};CRVideo.lastJoinApiRequest=a.RequestId,(0,r.Z)({url:n,timeout:2e3,data:l,dataType:"jsonp",jsonp:"jsoncallback",success:function(t){if(a.RequestId===CRVideo.lastJoinApiRequest)if(console.crlog("[MeetMgr] WebAPI /servlet/joinMeetingAPI request success, result: "+JSON.stringify(t)),0==t.RspCode){I.meetingID=+e,I.crmtStr=t.CRMTStr.replace(/CRMT[\.|\w]{0,}:/,"");let n=setInterval((()=>{I.meetingExiting?console.crlog("[MeetMgr] meeting exiting.... waiting...."):(console.crlog("[MeetMgr] meeting exiting complete......"),clearInterval(n),I.initweb())}),100)}else"MeetSDK"==I.SDKKey?(console.crlog(`[MeetMgr] MeetSDK.enterMeetingRslt.target(${window.WEB_SDK_ERR(t.RspCode)}, '', '', ${s})`),g.Z.enterMeetingRslt.target(window.WEB_SDK_ERR(t.RspCode),"","",s)):(console.crlog(`[MeetMgr] CRVideo_EnterMeetingRslt.target(${window.WEB_SDK_ERR(t.RspCode)},${s})`),CRVideo_EnterMeetingRslt.target(window.WEB_SDK_ERR(t.RspCode),s)),CRVideo_UploadingLog()},error:function(e){console.error(e),console.crlog("[MeetMgr] WebAPI /servlet/joinMeetingAPI request fail!"),"MeetSDK"==I.SDKKey?(console.crlog(`[MeetMgr] MeetSDK.enterMeetingRslt.target(202, '', '', ${s})`),g.Z.enterMeetingRslt.target(202,"","",s)):(console.crlog(`[MeetMgr] CRVideo_EnterMeetingRslt.target(202,${s})`),CRVideo_EnterMeetingRslt.target(202,s)),CRVideo_UploadingLog()}})}I.startEnterTimestamp=(new Date).getTime(),I.enterMeetingCookie=s,I.destroyMeetingConnect(),await I.leftMeetingFun(),null==I.LoginParam&&(I.LoginParam={}),I.LoginParam.user_id||""==n||(I.LoginParam.user_id=n),I.LoginParam.nick_name=o,I.isWebRTC?(window.__Rtc.CRRTCAudio.createAudioElement(),navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?(console.crlog("[MeetMgr] EnumerateDevices on enterMeeting..."),navigator.mediaDevices.enumerateDevices().then((e=>{console.crlog(`[MeetMgr] EnumerateDevices success:${JSON.stringify(e)}`),I.updateDevicesList(e),a()})).catch((function(e){console.crlog(`navigator.mediaDevices.enumerateDevices error: ${e}`),"MeetSDK"==I.SDKKey?(console.crlog(`[MeetMgr] MeetSDK.enterMeetingRslt.target(8003, '', '', ${s})`),g.Z.enterMeetingRslt.target(8003,"","",s)):(console.crlog(`[MeetMgr] CRVideo_EnterMeetingRslt.target(8003,${s})`),CRVideo_EnterMeetingRslt.target(8003,s)),CRVideo_UploadingLog(),console.error(e)}))):(console.crlog(`[MeetMgr] navigator.mediaDevices is undefined!!! protocal: ${window.location.protocol}`),"MeetSDK"==I.SDKKey?(console.crlog(`[MeetMgr] MeetSDK.enterMeetingRslt.target(8004, '', '', ${s})`),g.Z.enterMeetingRslt.target(8004,"","",s)):(console.crlog(`[MeetMgr] CRVideo_EnterMeetingRslt.target(8004,${s})`),CRVideo_EnterMeetingRslt.target(8004,s)))):a()},window.CRVideo_DestroyMeeting=function(e,t,n){console.crlog(`[MeetMgr] CRVideo_DestroyMeeting(${e},${t},${n})`);const o=`https://${I.webServerAddr}${i.Z.closeConf}`,s={RequestId:R.generateUUID(),MeetID:e,ClientVer:"",...I.webLoginOAuth};let a={};a=__Rtc._ReplaceObjParam(s,"UserPswd","******"),a=__Rtc._ReplaceObjParam(a,"Token","******"),console.crlog("[MeetMgr] WebAPI request url: "+o+", data:"+JSON.stringify(a));const c={_data_:JSON.stringify(s)};(0,r.Z)({url:o,timeout:5e3,data:c,dataType:"jsonp",jsonp:"jsoncallback",success:function(e){console.crlog("[MeetMgr] WebAPI /api/servlet/closeConf request success: "+JSON.stringify(e)),n?(console.crlog(`[MeetMgr] CRVideo_StopMeetingRslt.target(${window.WEB_SDK_ERR(e.RspCode)},${t})`),CRVideo_StopMeetingRslt.target(window.WEB_SDK_ERR(e.RspCode),t)):(console.crlog(`[MeetMgr] CRVideo_DestroyMeetingRslt.target(${window.WEB_SDK_ERR(e.RspCode)},${t})`),CRVideo_DestroyMeetingRslt.target(window.WEB_SDK_ERR(e.RspCode),t))},error:function(e){console.error(e),console.crlog("[MeetMgr] WebAPI /api/servlet/closeConf request fail!"),n?(console.crlog(`[MeetMgr] CRVideo_StopMeetingRslt.target(202,${t})`),CRVideo_StopMeetingRslt.target(202,t)):(console.crlog(`[MeetMgr] CRVideo_DestroyMeetingRslt.target(202,${t})`),CRVideo_DestroyMeetingRslt.target(202,t))}})},window.CRVideo_StopMeeting=(e,t)=>{console.crlog(`[MeetMgr] CRVideo_StopMeeting(${e},${t})`),window.CRVideo_DestroyMeeting(e,t,!0)},window.CRVideo_CreateMeetingSuccess=new I.CbProxy("CRVideo_CreateMeetingSuccess"),window.CRVideo_CreateMeetingFail=new I.CbProxy("CRVideo_CreateMeetingFail"),window.CRVideo_EnterMeetingRslt=new I.CbProxy("CRVideo_EnterMeetingRslt"),window.CRVideo_DestroyMeetingRslt=new I.CbProxy("CRVideo_DestroyMeetingRslt"),window.CRVideo_StopMeetingRslt=new I.CbProxy("CRVideo_StopMeetingRslt");const y=window.Conference,S=(window.Cr,window.Ice),v=window.__Rtc;v.ConferenceReceptor=S.Class(y.ConferenceCallback,{setProxy:function(e){this.proxy=e},entered(...e){v.CRRTCConf&&v.CRRTCConf.entered(...e)},left(...e){v.CRRTCConf&&v.CRRTCConf.left(...e)},actorChanged(...e){v.CRRTCConf&&v.CRRTCConf.actorChanged(...e)},nicknameChanged(...e){v.CRRTCConf&&v.CRRTCConf.nicknameChanged(...e)},optionChanged(...e){v.CRRTCConf&&v.CRRTCConf.optionChanged(...e)},rightChanged(...e){v.CRRTCConf&&v.CRRTCConf.rightChanged(...e)},roomStateChanged(...e){console.log("===== roomStateChanged =====",e)},inviteStateChanged(...e){console.log("===== inviteStateChanged =====",e)},conferenceBegan(...e){console.log("===== conferenceBegan =====",e)},conferenceEnded(...e){v.CRRTCConf&&v.CRRTCConf.conferenceEnded(...e)},memberCount(...e){console.log("===== memberCount =====",e)},confirmAutoEnd(...e){console.log("===== confirmAutoEnd =====",e)},autoEndCancelled(...e){console.log("===== autoEndCancelled =====",e)},roomKnocked(...e){console.log("===== roomKnocked =====",e)},agendaUpdated(...e){console.log("===== agendaUpdated =====",e)},subjectUpdated(...e){console.log("===== subjectUpdated =====",e)},notifyApplyDemo(...e){console.log("===== notifyApplyDemo =====",e)},notifyApplyRejected(...e){console.log("===== notifyApplyRejected =====",e)},serverNotify(...e){console.log("===== serverNotify =====",e)},serverNotifyMsg(...e){console.log("===== serverNotifyMsg =====",e)},updateAppStatus(...e){console.log("===== updateAppStatus =====",e)},notifyAssistantChanged(...e){v.CRRTCConf&&v.CRRTCConf.notifyAssistantChanged(...e)},notifyNetDetectResults(...e){console.log("===== notifyNetDetectResults =====",e)},notifyReportStatus(...e){console.log("===== notifyReportStatus =====",e)},notifyReportStatus_async(...e){console.log("===== notifyReportStatus_async =====",e)},exeCmd(...e){console.log("===== exeCmd =====",e)},exeCmd_async(...e){console.log("===== exeCmd_async =====",e)},notifyStart1v1SubMeeting_async(...e){console.log("===== notifyStart1v1SubMeeting_async =====",e)},notifyStart1v1SubMeeting(...e){console.log("===== notifyStart1v1SubMeeting =====",e)},notifyStop1v1SubMeeting(...e){console.log("===== notifyStop1v1SubMeeting =====",e)},notifyStart1v1SubMeetingRslt(...e){console.log("===== notifyStart1v1SubMeetingRslt =====",e)},setWDT1v1SubMeetingMode(...e){console.log("===== setWDT1v1SubMeetingMode =====",e)},notifyIVRStatus(...e){console.log("===== notifyIVRStatus =====",e)},notifyStartSvrBroadcast(...e){console.log("===== notifyStartSvrBroadcast =====",e)},notifyStartBroadCast(...e){console.log("===== notifyStartBroadCast =====",e)},notifyStopBroadCast(...e){console.log("===== notifyStopBroadCast =====",e)},notifyWebViewerNum(...e){console.log("===== notifyWebViewerNum =====",e)},notifyBroadCastStartPush(...e){console.log("===== notifyBroadCastStartPush =====",e)},notifyBroadCastStopPush(...e){console.log("===== notifyBroadCastStopPush =====",e)},notifyBroadCastPlayback(...e){console.log("===== notifyBroadCastPlayback =====",e)},notifyBroadCastPlaybackStop(...e){console.log("===== notifyBroadCastPlaybackStop =====",e)},notifypayback(...e){console.log("===== notifypayback =====",e)},notifySwtichLiveAppElements(...e){console.log("===== notifySwtichLiveAppElements =====",e)},notifyThumbUp(...e){console.log("===== notifyThumbUp =====",e)},notifyLuckyDrawCfg(...e){console.log("===== notifyLuckyDrawCfg =====",e)},notifyLDMembersStatus(...e){console.log("===== notifyLDMembersStatus =====",e)},notifyLuckyDrawResult(...e){console.log("===== notifyLuckyDrawResult =====",e)},notifySvrRecordStateChanged(...e){v.CRRTCRecord&&v.CRRTCRecord.ICECallback.notifySvrRecordStateChanged(...e)},notifySvrRecordCfgChanged(...e){v.CRRTCRecord&&v.CRRTCRecord.ICECallback.notifySvrRecordCfgChanged(...e)},notifySvrRecordFileState(...e){v.CRRTCRecord&&v.CRRTCRecord.ICECallback.notifySvrRecordFileState(...e)},notifySvrBroadcastCfgChanged(...e){console.log("===== notifySvrBroadcastCfgChanged =====",e)},notifyAppUILocked(...e){console.log("===== notifyAppUILocked =====",e)},notifyBeginVote(...e){console.log("===== notifyBeginVote =====",e)},notifyEndVote(...e){console.log("===== notifyEndVote =====",e)},notifyPublishVoteResult(...e){console.log("===== notifyPublishVoteResult =====",e)},notifyCommitVote(...e){console.log("===== notifyCommitVote =====",e)},notifyTerminalMsg(...e){v.CRRTCTermMsg&&v.CRRTCTermMsg.ICECallback.notifyTerminalMsg(...e)},notifySCEPChanged(...e){console.log("===== notifySCEPChanged =====",e)},notifyMeetingAttrsChanged(...e){v.CRRTCAttr&&v.CRRTCAttr.ICECallback.notifyMeetingAttrsChanged(...e)},notifyUserAttrsChanged(...e){v.CRRTCAttr&&v.CRRTCAttr.ICECallback.notifyUserAttrsChanged(...e)},notifyShareStateChanged(...e){v.CRRTCConf&&v.CRRTCConf.notifyShareStateChanged(...e)},notifyEnterWaitingRoom(...e){console.log("===== notifyEnterWaitingRoom =====",e)},notifyLeftWaitingRoom(...e){console.log("===== notifyLeftWaitingRoom =====",e)},notifyJoinSubMeeting(...e){console.log("===== notifyJoinSubMeeting =====",e)},notifyClodudRecordStateChanged(...e){v.CRRTCCloudRecord&&v.CRRTCCloudRecord.ICECallback.notifyCloudRecordStateChanged(...e)},notifyClodudRecordCfgChanged(...e){v.CRRTCCloudRecord&&v.CRRTCCloudRecord.ICECallback.notifyCloudRecordCfgChanged(...e)},notifyClodudRecordFileState(...e){v.CRRTCCloudRecord&&v.CRRTCCloudRecord.ICECallback.notifyCloudRecordFileState(...e)}});const E={changeOption:e=>new Promise(((t,n)=>{(0,m.V)("_conferenceRequest","changeOption",e).then((e=>t(e))).catch((e=>n(e)))})),setAssistantActor:(e,t)=>new Promise(((n,i)=>{(0,m.V)("_conferenceRequest","setAssistantActor",e,t).then((e=>n(e))).catch((e=>i(e)))})),endConference:()=>new Promise(((e,t)=>{(0,m.V)("_conferenceRequest","endConference").then((t=>e(t))).catch((e=>t(e)))})),startSvrRecord:e=>new Promise(((t,n)=>{(0,m.V)("_conferenceRequest","startSvrRecord",e).then((e=>t(e))).catch((e=>n(e)))})),updateSvrRecCfg:e=>new Promise(((t,n)=>{(0,m.V)("_conferenceRequest","updateSvrRecCfg",e).then((e=>t(e))).catch((e=>n(e)))})),stopSvrRecord:()=>new Promise(((e,t)=>{(0,m.V)("_conferenceRequest","stopSvrRecord").then((t=>e(t))).catch((e=>t(e)))})),startShare:e=>new Promise(((t,n)=>{(0,m.V)("_conferenceRequest","startShare",e).then((e=>t(e))).catch((e=>n(e)))})),stopShare:e=>new Promise(((t,n)=>{(0,m.V)("_conferenceRequest","stopShare",e).then((e=>t(e))).catch((e=>n(e)))})),startCloudRecord:(e,t)=>new Promise(((n,i)=>{(0,m.V)("_conferenceRequest","startCloudRecord",e,t).then((e=>n(e))).catch((e=>i(e)))})),stopCloudRecord:e=>new Promise(((t,n)=>{(0,m.V)("_conferenceRequest","stopCloudRecord",e).then((e=>t(e))).catch((e=>n(e)))})),updateCloudRecord:(e,t)=>new Promise(((n,i)=>{(0,m.V)("_conferenceRequest","updateCloudRecord",e,t).then((e=>n(e))).catch((e=>i(e)))}))};var w=__webpack_require__(5004);const b=window.CRVideo,D=window.Ice;window.__crConferenceClass=class{constructor(){this.initData(),this.initIceCallback(),this.initIceNotify(),this.initSDKInterface()}initData(){console.crlog("[Conference] ConferenceModule initData..."),this.curActorID=0,this.curPresenterID=0,this.curOption=0,this.shareState={state:0,shareID:0},this.rights=[]}initIceCallback(){}initIceNotify(){this.entered=e=>{if(this.parseMemberInfo(e),console.crlog(`[Conference] ICE Notify: new member entered, params:${JSON.stringify({newMember:e})}`),!b.isMeeting)return console.crlog("[Conference] New member entered callback, now is not in meeting, return false!");console.crlog(`[Conference] User termID:${e.termId}, userID:${e.userId}, nickname:${e.nickname} entered meeting... `);let t=!0;b.allMemberInfo.forEach((function(n){n.termId!=e.termId||(t=!1)})),e.termId!==b.userInfo.termId&&t&&(e.userId=e.userId||D.generateUUID(),e.audioStatus="AUNKNOWN",e.videoStatus="VUNKNOWN","family"==e.privRole?b.privRoleFamily=e.userId:"prisoner"==e.privRole&&(b.privRolePrison=e.userId),b.allMemberInfo.push(e),window.CRVideo_UserEnterMeeting.target(e.userId))},this.left=(e,t,n,i)=>{if(console.crlog(`[Conference] ICE Notify: member left, params:${JSON.stringify({termID:t,reason:i})}`),t!=b.userInfo.termId){const e=b.allMemberInfo.findIndex((e=>e.termId==t));if(e>-1){__Rtc.CRRTCRemoteVideo.userLeftHandler(b.allMemberInfo[e].termId);const n=b.allMemberInfo[e].userId;b.allMemberInfo.splice(e,1),window.CRVideo_UserLeftMeeting.target(n,i),console.crlog(`[Conference] TermID:${t}, userID: ${n} left meeting, reason: ${i}`)}}else"kick"===i&&(b.leftMeetingFun(i),b.destroyMeetingConnect(),window.CRVideo_UserLeftMeeting.target(b.userInfo.userId,i))},this.nicknameChanged=(e,t,n)=>{console.crlog(`[Conference] ICE Notify: nicknameChanged, params:${JSON.stringify({operatorID:e,termID:t,newNickname:n})}`);const i=CRVideo.allMemberInfo.find((e=>e.termId==t));if(!i)return;const r=i.nickname;if(i.nickname=n,t==CRVideo.userInfo.termId&&(CRVideo.userInfo.nickname=n),__Rtc.CRRTCUI.videoContainerList.forEach((e=>{if(e._userID==i.userId){let t=e.nickNameContent||e._nicknameEle.innerText;t=t.replace(r,n),e.nickNameContent&&(e.nickNameContent=t),e._nicknameEle.innerText=t}})),__Rtc.CRRTCUI.screenContainerList.forEach((e=>{if(e._userID==i.userId){let t=e.nickNameContent||e._nicknameEle.innerText;t=t.replace(r,n),e.nickNameContent&&(e.nickNameContent=t),e._nicknameEle.innerText=t}})),__Rtc.CRRTCMedia.container&&__Rtc.CRRTCMedia.container._userID==i.userId){let e=__Rtc.CRRTCMedia.container.nickNameContent||__Rtc.CRRTCMedia.container._nicknameEle.innerText;e=e.replace(r,n),__Rtc.CRRTCMedia.container.nickNameContent&&(__Rtc.CRRTCMedia.container.nickNameContent=e),__Rtc.CRRTCMedia.container._nicknameEle.innerText=e}console.crlog(`[Conference] CRVideo_NotifyNickNameChanged.target(${i.userId},${r},${n})`),window.CRVideo_NotifyNickNameChanged.target(i.userId,r,n)},this.optionChanged=e=>{console.crlog(`[Conference] ICE Notify: optionChanged, params:${JSON.stringify({option:e})}`),this.curOption=e,g.Z.notifyOptionChanged.target(e)},this.rightChanged=e=>{if(console.crlog(`[Conference] ICE Notify: rightChanged, params: ${JSON.stringify(e)}`),e.addedRights.length>0&&(this.rights.push(e.addedRights[0]),g.Z.notifyAddedRights.target(e.addedRights[0])),e.reducedRights.length>0){const t=this.rights.findIndex((t=>t==e.reducedRights[0]));this.rights.splice(t,1),g.Z.notifyReducedRights.target(e.reducedRights[0])}},this.actorChanged=(e,t,n)=>{console.crlog(`[Conference] ICE Notify: actorChanged, params:${JSON.stringify({operatorID:e,termID:t,actorType:n})}`),b.allMemberInfo.forEach((e=>{e.termId==t?(e.actor=e.actor|n,g.Z.notifyActorChanged.target(e.userId,e.actor)):(1==n&&e.termId==this.curPresenterID||2==n&&e.termId==this.curActorID)&&(e.actor=e.actor&~n,g.Z.notifyActorChanged.target(e.userId,e.actor))})),1==n&&(this.curPresenterID=t),2==n&&(this.curActorID=t),console.crlog(`[Conference] Current actorID:${this.curActorID}, Current PresenterID:${this.curPresenterID}`)},this.notifyAssistantChanged=(e,t,n)=>{console.crlog(`[Conference] ICE Notify: notifyAssistantChanged, params:${JSON.stringify({operatorID:e,termID:t,isAssistant:n})}`);const i=b.allMemberInfo.find((e=>e.termId==t));i&&(i.actor=n?8|i.actor:-9&i.actor,g.Z.notifyActorChanged.target(i.userId,i.actor))},this.conferenceEnded=e=>{console.crlog(`[Conference] ICE Notify: conferenceEnded, params:${JSON.stringify({operatorID:e})}`),b.leftMeetingFun(),clearTimeout(b.KEEPALIVE_TIMER),clearTimeout(b.REFRESH_SESSION_TIMER),CRVideo_NotifyMeetEnded.target(),CRVideo_MeetingStopped.target()},this.notifyShareStateChanged=e=>{console.crlog(`[Conference] ICE Notify: notifyShareStateChanged, params:${JSON.stringify({shareState:e})}`),this.shareState=JSON.parse(e)}}initSDKInterface(){window.CRVideo_Kickout=e=>{console.crlog(`[Conference] CRVideo_Kickout(${e})`);return new Promise(((t,n)=>{const i=b.findMemberInfo({want:"termId",use:"userId",value:e});__Rtc.CRICEAPI.Kickout(i).then((n=>{const i={errCode:0,userID:e};return console.crlog(`[Conference] CRVideo_Kickout, success! userID:${JSON.stringify(i)}`),t(i)}),(e=>(console.crlog(`[Conference][Error] CRVideo_Kickout, fail! userID:${e}`),n({errCode:1,errDesc:e}))))}))},window.CRVideo_SetNickName=(e,t)=>{console.crlog(`[Conference] CRVideo_SetNickName(${e},${t})`);return new Promise(((n,i)=>{const r=b.findMemberInfo({want:"termId",use:"userId",value:e});__Rtc.CRICEAPI.ChangeNickname(r,t).then((i=>{const r={errCode:0,userID:e,newname:t};return console.crlog(`[Conference] CRVideo_SetNickName, success! ${JSON.stringify(r)}`),n(r)}),(e=>(console.crlog(`[Conference] CRVideo_SetNickName, fail! ${e}`),i({errCode:1,errDesc:e}))))}))},g.Z.startShare=e=>(console.crlog(`[Conference] MeetSDK.startShare(${e})`),new Promise(((t,n)=>{E.startShare(e).then((e=>t({errCode:0})),(e=>n({errCode:1,errDesc:e})))}))),g.Z.stopShare=e=>(console.crlog(`[Conference] MeetSDK.stopShare(${e})`),new Promise(((t,n)=>{E.stopShare(e).then((e=>t({errCode:0})),(e=>n({errCode:1,errDesc:e})))}))),g.Z.getMeetInfo=()=>{const e={};if(b.meetingInfo&&b.meetingInfo.confInfo)for(var t in b.meetingInfo.confInfo)e[t]=b.meetingInfo.confInfo[t];return console.crlog(`[Conference] MeetSDK.getMeetInfo(), return: ${JSON.stringify(e)}`),e},g.Z.getCurOption=()=>(console.crlog(`[Conference] MeetSDK.getCurOption(), return: ${this.curOption}`),this.curOption),g.Z.changeOption=e=>(console.crlog(`[Conference] MeetSDK.changeOption(${e})`),new Promise(((t,n)=>{E.changeOption(e).then((e=>t({errCode:0})),(e=>n({errCode:1,errDesc:e})))}))),g.Z.setAssistantActor=(t,n)=>(console.crlog(`[Conference] MeetSDK.changeOption(${t},${n})`),new Promise(((i,r)=>{let o=e.Z.userIDtoTermID(t);if(!o)return r({errCode:1,errDesc:"用户不存在"});this.setAssistantActor(o,n).then((e=>i({errCode:0})),(e=>r({errCode:1,errDesc:e})))}))),g.Z.endConference=()=>(console.crlog("[Conference] MeetSDK.endConference()"),new Promise(((e,t)=>{E.endConference().then((t=>e({errCode:0})),(e=>t({errCode:1,errDesc:e})))}))),g.Z.getCurRights=()=>Array.from(this.rights),g.Z.getVoiceOnly=()=>!(!CRVideo.meetingInfo.confInfo||1!=+CRVideo.meetingInfo.confInfo.ccfg_voice_only)}parseMemberInfo(e){let t=e.extProperty,n=t.get(Conference.MINFO_OPENEDCAMIDS);if(null!=n){n=n.split(";");for(let e=0;e<n.length;e++)n[e]=+n[e];e.defaultCam=n[0],e.openedCamIDs=n.slice(1)}void 0!==t.get(Conference.MINFO_ALLCAMS)&&(e.allCams=t.get(Conference.MINFO_ALLCAMS).split("\n").slice(0,-1)),e.userId=t.get(Conference.CLIETN_PRIV_DAT),e.platform=t.get(Conference.CLINET_PLATFORM),e.sdk_ver=t.get(Conference.CLINET_SDK_VER),e.slice_ver=t.get("slice_ver"),e.iswifi=t.get(Conference.CLINET_ISWIFI)||!1,e.privRole=t.get("priv_role")||"others",e.voiceChangeType=t.get("voiceChangeType")||0}setAssistantActor(e,t){return new Promise(((n,i)=>{E.setAssistantActor(e,t).then((e=>n({errCode:0})),(e=>i({errCode:1,errDesc:e})))}))}},window.__Rtc.CRRTCConf=new window.__crConferenceClass,window.CRVideo_UserLeftMeeting=new b.CbProxy("CRVideo_UserLeftMeeting"),window.CRVideo_UserEnterMeeting=new b.CbProxy("CRVideo_UserEnterMeeting"),window.CRVideo_NotifyNickNameChanged=new b.CbProxy("CRVideo_NotifyNickNameChanged"),window.CRVideo_NotifyMeetEnded=new CRVideo.CbProxy("CRVideo_NotifyMeetEnded"),window.CRVideo_MeetingStopped=new CRVideo.CbProxy("CRVideo_MeetingStopped"),g.Z.notifyActorChanged=new w.Z("notifyActorChanged"),g.Z.notifyOptionChanged=new w.Z("notifyOptionChanged"),g.Z.notifyAddedRights=new w.Z("notifyAddedRights"),g.Z.notifyReducedRights=new w.Z("notifyReducedRights");__webpack_require__(9327),__webpack_require__(724);const M=window.Conference,T=window.Ice,P=window.__Rtc;P.AudioReceptor=T.Class(M.AudioCallback,{setProxy:function(e){this.proxy=e},updateStatus(...e){P.CRRTCAudio&&P.CRRTCAudio.ICECallback.audioUpdateStatus.call(P.CRRTCAudio,...e)},updateVoiceEnergy(...e){P.CRRTCAudio&&P.CRRTCAudio.ICECallback.updateVoiceEnergy.call(P.CRRTCAudio,...e)},updateSpeaker(...e){P.CRRTCAudio&&P.CRRTCAudio.ICECallback.updateSpeaker.call(P.CRRTCAudio,...e)},closeAll(...e){P.CRRTCAudio&&P.CRRTCAudio.ICECallback.closeAll.call(P.CRRTCAudio,...e)},playBackgroundMusic(...e){P.CRRTCAudio&&P.CRRTCAudio.ICECallback.playBackgroundMusic.call(P.CRRTCAudio,...e)},notifyVoiceHowling(...e){P.CRRTCAudio&&P.CRRTCAudio.ICECallback.notifyVoiceHowling.call(P.CRRTCAudio,...e)},notifyVoiceNoise(...e){P.CRRTCAudio&&P.CRRTCAudio.ICECallback.notifyVoiceNoise.call(P.CRRTCAudio,...e)},getRemoteAudioInfNotify(...e){P.CRRTCAudio&&P.CRRTCAudio.ICECallback.getRemoteAudioInfNotify.call(P.CRRTCAudio,...e)},remoteAudioSetNotify(...e){P.CRRTCAudio&&P.CRRTCAudio.ICECallback.remoteAudioSetNotify.call(P.CRRTCAudio,...e)},notifyLanLessMicOpen(...e){P.CRRTCAudio&&P.CRRTCAudio.ICECallback.notifyLanLessMicOpen.call(P.CRRTCAudio,...e)},notifySetVoiceChange(...e){P.CRRTCAudio&&P.CRRTCAudio.ICECallback.notifySetVoiceChange.call(P.CRRTCAudio,...e)}});const x={askForMic:()=>new Promise(((e,t)=>{(0,m.V)("_audioCtrl","askForMic").then((t=>e(t))).catch((e=>t(e)))})),openMicEx:e=>new Promise(((t,n)=>{(0,m.V)("_audioCtrl","openMicEx",e).then((e=>t(e))).catch((e=>n(e)))})),setVoiceChange:(e,t)=>new Promise(((n,i)=>{(0,m.V)("_audioCtrl","setVoiceChange",e,t).then((e=>n(e))).catch((e=>i(e)))}))},A=window.CRVideo,O=window.Ice;window.__crAudioClass=class{constructor(){this.initData(),this.initIceCallback(),this.initSDKInterface()}initData(){console.crlog("[Audio] AudioModule initData..."),this.localAudioStream=null,this.localAudioTracks=[],this.audioMSID=11e4,this.audioPeerConnections=[],this.audioInput=[],this.audioOutput=[],this.audioCfg={micID:1,speakerID:1,speakerPause:!1,autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0,micVolume:100},this.playerAudioContext=Object,this.micAudioContext=Object,this.micAudioSource=Object,this.micAudioGainNode=Object,clearInterval(this.rtpLogTimer),this.rtpLogTimer=-1,clearInterval(this.mediaSourceLogTimer),this.mediaSourceLogTimer=-1,this.myAudioLevel=0,this.audioFirstOpenWaiting=!0,this.audioFirstOpenWaitingTimout=-1,this.defaultGainVal=8,this.packetsLostRate=0,this.networkScore=-1,this.networkScoreResetTimout=-1}initIceCallback(){this.ICECallback={AudioAllocRawExt2_async:(e,t,n,i)=>{console.crlog(`[Audio] ICE Notify: AudioAllocRawExt2_async, params:${JSON.stringify({asParam:t,strParams:n})}`),"1"==(n=n.get("mediashare"))?setTimeout((()=>{__Rtc.CRRTCMedia.audioAllocRawExt2(e,t,n,i)}),500):this.audioAllocRawExt2(e,t.shareListen)},updateVoiceEnergy:e=>{const t=e._head._key,n=e._head._value;let i=null,r=0;A.allMemberInfo.forEach((e=>{e.termId==t&&(i=e.userId,r=e.voiceEnergy||0,e.voiceEnergy=n)})),i&&CRVideo_MicEnergyUpdate.target(i,r,n)},audioUpdateStatus:(e,t,n)=>{console.crlog(`[Audio] ICE Notify: audioUpdateStatus, params:${JSON.stringify({terminalID:t,status:n,opId:e})}`);const i={AUNKNOWN:0,ANULL:1,ACLOSE:2,AOPEN:3,AOPENING:4};let r,o,s;A.allMemberInfo.forEach((e=>{e.termId==t&&(r=e.userId,o=e.audioStatus,e.audioStatus=n.name,e.userId==A.userInfo.userId&&("ACLOSE"===n.name&&this.isEnableAudioTrack(!1),"AOPEN"===n.name&&this.isEnableAudioTrack(!0)),s=e.audioStatus,s!==o&&console.crlog(`[Audio] CRVideo_AudioStatusChanged.target(${r},${i[o]},${i[s]})`),s!==o&&CRVideo_AudioStatusChanged.target(r,i[o],i[s]))}))},updateSpeaker:e=>{console.crlog(`[Audio] ICE Notify: updateSpeaker, params:${JSON.stringify({terminalID:e})}`)},closeAll:e=>{console.crlog(`[Audio] ICE Notify: closeAll, params:${JSON.stringify({operatorID:e})}`),e!==A.userInfo.termId&&this.isEnableAudioTrack(!1),A.allMemberInfo.forEach((t=>{t.termId!==e&&"AOPEN"==t.audioStatus&&(t.audioStatus="ACLOSE",console.crlog(`[Audio] CRVideo_AudioStatusChanged.target(${t.userId},3,2)`),CRVideo_AudioStatusChanged.target(t.userId,3,2))}))},playBackgroundMusic:(e,t)=>{console.crlog(`[Audio] ICE Notify: playBackgroundMusic, params:${JSON.stringify({operatorID:e,sPlay:t})}`)},notifyVoiceHowling:(e,t)=>{console.crlog(`[Audio] ICE Notify: notifyVoiceHowling, params:${JSON.stringify({termid:e,bHowling:t})}`)},notifyVoiceNoise:(e,t)=>{console.crlog(`[Audio] ICE Notify: notifyVoiceNoise, params:${JSON.stringify({termid:e,bNoising:t})}`)},getRemoteAudioInfNotify:(e,t)=>{try{console.crlog(`[Audio] ICE Notify: getRemoteAudioInfNotify, params:${JSON.stringify({cb:e,reqTermID:t})}`)}catch(e){console.error(e)}e.ice_response(),e.isResponsed=!0},remoteAudioSetNotify:(e,t)=>{console.crlog(`[Audio] ICE Notify: remoteAudioSetNotify, params:${JSON.stringify({opeTermId:e,rAudio:t})}`)},notifyLanLessMicOpen:()=>{console.crlog("[Audio] ICE Notify: notifyLanLessMicOpen, params:null")},closeMicExRslt:(e,t)=>{console.crlog(`[Audio] ICE Callback --\x3e closeMicExRslt, params:${JSON.stringify({errCode:e,errDesc:t})}`)},setAudioDeviceStatusRslt:(e,t)=>{console.crlog(`[Audio] ICE Callback --\x3e setAudioDeviceStatusRslt, params:${JSON.stringify({errCode:e,errDesc:t})}`)},closeAllRslt:(e,t)=>{console.crlog(`[Audio] ICE Callback --\x3e closeAllRslt, params:${JSON.stringify({errCode:e,errDesc:t})}`)},notifySetVoiceChange:(e,t,n)=>{console.crlog(`[Audio] ICE Callback --\x3e notifySetVoiceChange, params:${JSON.stringify({})}`);const i=A.allMemberInfo.find((e=>e.termId==t));i&&(i.voiceChangeType=n,console.crlog(`[Audio] CRVideo_NotifySetVoiceChange.target(${i.userId},${n})`),window.CRVideo_NotifySetVoiceChange.target(i.userId,n))}}}initSDKInterface(){window.CRVideo_OpenMic=t=>{console.crlog(`[Audio] CRVideo_OpenMic(${t})`);return new Promise(((n,i)=>{const r=e.Z.userIDtoTermID(t);if(t==A.userInfo.userId&&0===this.audioInput.length)return console.crlog("[Audio][Error] CRVideo_OpenMic fail, no mic devices!"),console.error("[Audio][Error] CRVideo_OpenMic fail, no mic devices!"),i();const o=()=>{this.audioFirstOpenWaiting?setTimeout((()=>{o()}),100):r&&x.openMicEx(r).then((e=>n(e[0])),(e=>i(__Rtc.CRCONFERR.Parse(e))))};o()}))},window.CRVideo_CloseMic=e=>{console.crlog(`[Audio] CRVideo_CloseMic(${e})`),this.closeMicEx(e)},window.CRVideo_PlaySpeaker=()=>{console.crlog("[Audio] CRVideo_PlaySpeaker()"),document.querySelector("#CRSDKAudioPlayer").click(),document.querySelector("#CRSDKAudioPlayer").play(),document.querySelector("#CRSDKAudioPlayer").isPaused=!1,!document.querySelector("#CRSDKAudioPlayer").paused&&console.crlog("[Audio] Audio elememt is playing...")},window.CRVideo_PauseSpeaker=()=>{console.crlog("[Audio] CRVideo_PauseSpeaker()"),this.audioCfg.speakerPause=!0,document.querySelector("#CRSDKAudioPlayer").click(),document.querySelector("#CRSDKAudioPlayer").pause(),document.querySelector("#CRSDKAudioPlayer").isPaused=!0,document.querySelector("#CRSDKAudioPlayer").paused&&console.crlog("[Audio] Audio elememt is paused...")},window.CRVideo_GetAudioMicNames=()=>{const e=[];this.audioInput.forEach((t=>{e.push({micID:t.id,micName:t.name})}));try{console.crlog(`[Audio] CRVideo_GetAudioMicNames(), return:${JSON.stringify(e)}`)}catch(e){console.error(e)}return e},window.CRVideo_GetAudioSpkNames=()=>{const e=[];this.audioOutput.forEach((t=>{e.push({speakerID:t.id,speakerName:t.name})}));try{console.crlog(`[Audio] CRVideo_GetAudioSpkNames(), return:${JSON.stringify(e)}`)}catch(e){console.error(e)}return e},window.CRVideo_SetAudioCfg=e=>{console.crlog(`[Audio] CRVideo_SetAudioCfg(${JSON.stringify(e)})`),this.setAudioCfg(e)},window.CRVideo_GetAudioCfg=()=>{const e=this.audioCfg;return console.crlog(`[Audio] CRVideo_GetAudioCfg(), return:${JSON.stringify(e)}`),e},window.CRVideo_GetMicEnergy=e=>{let t=null;return A.allMemberInfo.forEach((n=>{n.userId==e&&(t=void 0===n.voiceEnergy?null:n.voiceEnergy)})),t},window.CRVideo_GetAudioStatus=e=>{const t=this.getAudioStatus(e);return console.crlog(`[Audio] CRVideo_GetAudioStatus(${e}), return:${t}`),t},window.CRVideo_SetAllAudioClose=()=>{console.crlog("[Audio] CRVideo_SetAllAudioClose()"),__Rtc.CR__CloseAll()},window.CRVideo_SetVoiceChange=(t,n=0)=>(console.crlog(`[Audio] CRVideo_SetVoiceChange(${t},${n})`),new Promise(((i,r)=>{const o=e.Z.userIDtoTermID(t);if(!o)return r({errCode:5,errDesc:"参数错误"});x.setVoiceChange(o,n).then((()=>i())).catch((e=>r({errCode:1,errDesc:e.toString()})))}))),window.CRVideo_GetVoiceChangeType=e=>{console.crlog(`[Audio] CRVideo_GetVoiceChangeType(${e})`);let t=0;const n=A.allMemberInfo.find((t=>t.userId==e));return n&&n.voiceChangeType&&(t=+n.voiceChangeType),t},g.Z.askForMic=()=>{console.crlog("[MeetSDK][Audio] MeetSDK.askForMic()");return new Promise(((e,t)=>{x.askForMic().then((t=>e({errCode:0,errDesc:"success"})),(e=>(console.error(e),t(__Rtc.CRCONFERR.Parse(e)))))}))}}createAudioElement(){console.crlog("[Audio] Do create audio element...");const e=this;!A.changyiweb&&function(t){if(!(n=t.document.getElementById("CRSDKAudioPlayer"))){var n,i=t.document.createElement("div");i.style.position="absolute",i.style.top="0px",i.style.left="0px",i.style.zIndex="99999",i.style.display="none",i.id="CRSDKAudioBox",(n=t.document.createElement("audio")).autoplay=!0,n.controls=!0,n.id="CRSDKAudioPlayer",i.appendChild(n),t.document.body.appendChild(i),e.setAudioCfg(e.audioCfg)}}(window)}connectToSpeaker(e,t){window.document.getElementById("CRSDKAudioPlayer").srcObject=e,window.document.getElementById("CRSDKAudioPlayer").muted=!0,console.crlog("[Audio] Use audioContext & gain to play audio..."),window.AudioContext=window.AudioContext||window.webkitAudioContext,this.playerAudioContext.close&&"running"===this.playerAudioContext.state&&this.playerAudioContext.close(),this.playerAudioContext=new window.AudioContext;const n=this.playerAudioContext.createMediaStreamSource(e),i=this.playerAudioContext.createGain();i.gain.value=t||+this.defaultGainVal,console.crlog(`[Audio] Audio gain value: ${i.gain.value}`),n.connect(i),i.connect(this.playerAudioContext.destination)}audioAllocRawExt2(e,t){console.crlog(`[Audio] AudioAllocRawExt2, isRecvonly: ${t}`),setTimeout((()=>{e.isResponsed||e.ice_response()}),2e4);const n={};if(n.msid=this.audioMSID++,n.cb=e,n.candidates=[],n.connection=null,n.remoteStream=null,n.offer=null,n.answer=null,this.audioPeerConnections.push(n),console.crlog(`[Audio] Start to create audio connection, MSID: ${n.msid}`),t)n.type="recvonly",this.setPeerConnection(n,e);else{n.type="sendrecv",n.micID=this.audioCfg.micID;const t=this.audioInput.find((e=>e.id===this.audioCfg.micID)).deviceId;this.localAudioStream&&this.localAudioTracks[0].micID===this.audioCfg.micID&&this.localAudioTracks[0].autoGainControl===this.audioCfg.autoGainControl&&this.localAudioTracks[0].echoCancellation===this.audioCfg.echoCancellation&&this.localAudioTracks[0].noiseSuppression===this.audioCfg.noiseSuppression?(this.isEnableAudioTrack(!0),this.setPeerConnection(n,e)):this.getAudioStream(t&&!__Rtc.CRBrowser.curBrowserCfg.isMobile||!t.includes("default")?{audio:{deviceId:{ideal:t},autoGainControl:this.audioCfg.autoGainControl,echoCancellation:this.audioCfg.echoCancellation,noiseSuppression:this.audioCfg.noiseSuppression},video:!1}:{audio:{autoGainControl:this.audioCfg.autoGainControl,echoCancellation:this.audioCfg.echoCancellation,noiseSuppression:this.audioCfg.noiseSuppression},video:!1}).then((()=>{this.setPeerConnection(n,e)}),(e=>{const t=A.allMemberInfo.find((e=>e.userId==A.userInfo.userId)).audioStatus;this.uploadAudioDevicesStatus(!1),"ANULL"!=t&&setTimeout((()=>{this.uploadAudioDevicesStatus()}),1e3),console.crlog(`[Audio] CRVideo_OpenMicFailed.target(${e})`),CRVideo_OpenMicFailed.target(e),console.error(`Open mic failed: ${e}`)}))}}modifyOfferSDP(e){const t=e.split("\r\n");let n=[],i=0;for(let e=0;e<t.length;e++){let r=t[e];if(r.includes("a=rtpmap:")){let e=/a=rtpmap:(\d+)/,t=r.match(e)[1];n.push(`a=rtcp-fb:${t} nack`)}r.includes("a=setup:actpass")&&(i=e)}return n.unshift(i,0),Array.prototype.splice.apply(t,n),t.join("\r\n")}modifyAnswerSDP(e){const t=e.split("\r\n");for(let e=0;e<t.length;e++){let n=t[e];if(n.includes("a=rtpmap:")){let i=/a=rtpmap:(\d+)/,r=n.match(i)[1];t.splice(e+1,0,`a=rtcp-fb:${r} nack`)}}return t.join("\r\n")}setPeerConnection(e,t){const n=`[Audio] MSID:${e.msid} --`;console.crlog(`${n} Audio RTCPeerConnection setPeerConnection... >> ${e.type} <<`),console.crlog(`${n} Audio RTCPeerConnection new RTCPeerConnection...`);const i=new RTCPeerConnection(A.rtcCfg);if(e.connection=i,"recvonly"==e.type){const t={offerToReceiveAudio:!0,offerToReceiveVideo:!1};console.crlog(`${n} Audio RTCPeerConnection offerOptions: ${JSON.stringify(t)}`),i.createOffer(t).then((t=>{t.sdp=this.modifyOfferSDP(t.sdp),console.crlog(`${n} Audio RTCPeerConnection createOffer success! offer sdp:\r\n${t.sdp}`),e.offer=t,this.offerSetLocalDescription(t)})).catch((t=>{console.crlog(`[Audio][Error] MSID:${e.msid} -- Audio RTCPeerConnection createOffer fail!`),console.error(t)}))}else this.localAudioStream?i.addTrack?(console.crlog(`[Audio] MSID:${e.msid} -- Audio RTCPeerConnection addTrack`),i.addTrack(this.localAudioTracks[0],this.localAudioStream)):setTimeout((function(){console.crlog(`[Audio] MSID:${e.msid} -- Audio RTCPeerConnection dispatchEvent:negotiationneeded`),i.dispatchEvent(new Event("negotiationneeded"))}),1e3):(console.crlog(`[Audio][Error] MSID:${e.msid} -- Audio RTCPeerConnection addTrack fail, no localAudioStream!`),console.error(`[Audio][Error] MSID:${e.msid} -- Audio RTCPeerConnection addTrack fail, no localAudioStream!`)),i.createOffer().then((t=>{t.sdp=this.modifyOfferSDP(t.sdp),console.crlog(`${n} Audio RTCPeerConnection createOffer success! offer sdp:\r\n${t.sdp}`),e.offer=t,this.offerSetLocalDescription(t)})).catch((t=>{console.crlog(`[Audio][Error] MSID:${e.msid} -- Audio RTCPeerConnection createOffer fail!`),console.error(t)}));this.__proto__.offerSetLocalDescription=r=>{i.setLocalDescription(r).then((e=>{console.crlog(`${n} Audio RTCPeerConnection setLocalDescription success!`),i.waitingCandidateTimer=setTimeout((()=>{t&&t.ice_response(),t.isResponsed=!0}),1e4)})).catch((t=>{console.crlog(`[Audio][Error] MSID:${e.msid} -- Audio RTCPeerConnection setLocalDescription fail!`),console.error(t)}))},i.onicecandidate=r=>{function o(){if(!t.isResponsed){const r=new O.HashMap;r.set("sdp",e.offer.sdp),r.set("icecandidate",JSON.stringify(e.candidates)),console.crlog(`${n} Audio RTCPeerConnection response candidates(${e.candidates.length}): ${JSON.stringify(e.candidates)}`),console.crlog(`${n} Audio RTCPeerConnection ice_response(${e.msid}, HashMap)`),clearTimeout(i.waitingCandidateTimer),t&&t.ice_response(e.msid,r),t.isResponsed=!0}}console.crlog(`${n} Audio RTCPeerConnection onicecandidate: ${JSON.stringify(r.candidate)}`),setTimeout((()=>{o()}),300),r.candidate?e.candidates.push(r.candidate):o()},i.onicecandidateerror=e=>{e.address,e.errorCode,e.errorText,e.hostCandidate},i.ontrack=t=>{console.crlog(`${n} Audio RTCPeerConnection ontrack`);const r=t.streams[0];console.crlog(`${n} Audio RTCPeerConnection got audio stream: ${JSON.stringify({active:r.active,id:r.id})}`),e.remoteStream=r,this.distantAudioStream=r,console.crlog("[Audio] CRVideo_NotifyAudioStream.target(1, remoteStream)"),CRVideo_NotifyAudioStream.target(1,r),this.getDistantAudioEnergy(r,i,e.msid);const o=__Rtc.CRBrowser.curBrowserCfg;o.isMobile&&"iOS"==o.platform&&15==o.OSVer.split(".")[0]&&o.OSVer.split(".")[1]<=3?this.connectToSpeaker(r):document.getElementById("CRSDKAudioPlayer")?(console.crlog(`${n} Audio RTCPeerConnection found the audio element success and set srcObject!`),document.getElementById("CRSDKAudioPlayer").srcObject=r,document.getElementById("CRSDKAudioPlayer").isPaused?CRVideo_PauseSpeaker():setTimeout((()=>{try{document.getElementById("CRSDKAudioPlayer").srcObject&&1==document.getElementById("CRSDKAudioPlayer").srcObject.active&&(document.getElementById("CRSDKAudioPlayer").click(),document.getElementById("CRSDKAudioPlayer").play())}catch(e){console.error(e)}}),100)):console.crlog(`[Audio][Error] MSID:${e.msid} -- Can not find audio elemment, set srcObject fail!`)},i.onconnectionstatechange=t=>{const r=t.currentTarget.connectionState;console.crlog(`${n} Audio RTCPeerConnection onconnectionstatechange, connectionState: ${r}`),"connected"==r?this.startWebrtcLog(i,n):"disconnected"!=r&&"failed"!=r||e.msid==this.audioMSID-1&&(console.crlog(`[Audio] ${n} Audio RTCPeerConnection abnormal disconnect...!`),clearInterval(this.mediaSourceLogTimer),clearInterval(this.rtpLogTimer),"failed"==r&&(CRVideo_NotifyNetworkLostRate.target(1),"connected"!=i.lastState&&"connecting"!=i.lastState||(console.crlog(`[Audio] ${n} Audio RTCPeerConnection connection state failed!`),__Rtc.CRICEAPI.MediaConnectionBreakReport(e.msid)))),"failed"==r&&i.audioContext&&"running"===i.audioContext.state&&i.audioContext.close&&i.audioContext.close(),i.lastState=r},i.ondatachannel=e=>{console.crlog(`${n} Audio RTCPeerConnection ondatachannel`)},i.oniceconnectionstatechange=e=>{console.crlog(`${n} Audio RTCPeerConnection oniceconnectionstatechange, iceConnectionState: ${e.currentTarget.iceConnectionState}`)},i.onicegatheringstatechange=e=>{console.crlog(`${n} Audio RTCPeerConnection onicegatheringstatechange, iceGatheringState: ${e.currentTarget.iceGatheringState}`)},i.onnegotiationneeded=e=>{console.crlog(`${n} Audio RTCPeerConnection onnegotiationneeded`)},i.onremovestream=e=>{console.crlog(`${n} Audio RTCPeerConnection onremovestream`)},i.onsignalingstatechange=e=>{console.crlog(`${n} Audio RTCPeerConnection onsignalingstatechange, signalingState: ${e.currentTarget.signalingState}`)}}getDistantAudioEnergy(e,t,n){let i=new AudioContext,r=i.createScriptProcessor(2048,1,1);i.createMediaStreamSource(e).connect(r),r.connect(i.destination),t.audioContext=i,r.onaudioprocess=t=>{let n=t.inputBuffer.getChannelData(0),o=0,s=0;for(let e=0;e<n.length;++e)s+=n[e]*n[e];o=Math.sqrt(s/n.length),this.distantAudioEnergy=parseInt(100*o)/100,0!=this.audioPeerConnections.length&&e.active||(r.onaudioprocess=null,r=null,i.close&&"running"===i.state&&i.close())}}startWebrtcLog(e,t){const n=2e3;clearInterval(this.rtpLogTimer),clearInterval(this.mediaSourceLogTimer),this.codeRateSend=0,this.packetsLostRate=0,this.codeRateReceived=0;let i=0,r=0,o=-1,s=0,a=0,c=0,l=[],d=0;this.rtpLogTimer=setInterval((()=>{e.getStats().then((e=>{e.forEach((e=>{if("inbound-rtp"==e.type)try{const s=e.packetsReceived-i,a=e.packetsLost-r;if(this.packetsLostRate=0==s?0:a/(s+a),this.packetsLostRate>0||o>=5||-1===o){let n=parseInt(1e4*this.packetsLostRate)/100;const i={},r=["id","timestamp","type","ssrc","kind","trackId","transportId","codecId","mediaType","mid"],c=["trackIdentifier","bytesReceived","headerBytesReceived","lastPacketReceivedTimestamp"],l=["mediaSourceId","bytesSent","headerBytesSent","retransmittedBytesSent"];for(let t in e)r.includes(t)||c.includes(t)||l.includes(t)||(i[t]=e[t]);console.crlog(`${t} inbound-rtp(2s), audioLevel:${parseInt(1e4*e.audioLevel)/1e4}, packetsTotal:${s+a}, packetsLost:${a}, packetsLostRate:${n}%, ${JSON.stringify(i)}`),CRVideo_NotifyNetworkLostRate.target(n/100),o=0}o++,i=e.packetsReceived,r=e.packetsLost,this.codeRateReceived=(e.bytesReceived-c)/n,c=e.bytesReceived;const l=this.networkScore;s>0?this.packetsLostRate<=.05?this.networkScore=10:this.packetsLostRate<=.1?this.networkScore=9:this.packetsLostRate<=.15?this.networkScore=8:this.packetsLostRate<=.2?this.networkScore=7:this.packetsLostRate<=.25?this.networkScore=6:this.packetsLostRate<=.3?this.networkScore=5:this.packetsLostRate<=.35?this.networkScore=4:this.packetsLostRate<=.4?this.networkScore=3:this.packetsLostRate<=.45?this.networkScore=2:this.packetsLostRate<=.5?this.networkScore=1:this.networkScore=0:this.networkScore=-1,clearTimeout(this.networkScoreResetTimout),this.networkScoreResetTimout=setTimeout((()=>{-1!=this.networkScore&&(this.networkScore=-1,CRVideo_NetStateChanged.target(this.networkScore))}),4e3),this.networkScore!=l&&CRVideo_NetStateChanged.target(this.networkScore);const d=-1==this.networkScore?0:this.networkScore;navigator.connection&&navigator.connection.type&&"wifi"==navigator.connection.type||navigator.userAgent.includes("WIFI")?__Rtc.CRICEAPI.NetDetectResults(d,!0):__Rtc.CRICEAPI.NetDetectResults(d,!1)}catch(e){console.error(e)}if("outbound-rtp"==e.type&&(this.codeRateSend=(e.bytesSent-a)/n,a=e.bytesSent,s++,s>=5)){s=0;const n={},i=["id","timestamp","type","ssrc","kind","trackId","transportId","codecId","mediaType","mid"],r=["trackIdentifier","bytesReceived","headerBytesReceived","lastPacketReceivedTimestamp"],o=["mediaSourceId","bytesSent","headerBytesSent","retransmittedBytesSent"];for(let t in e)i.includes(t)||r.includes(t)||o.includes(t)||(n[t]=e[t]);console.crlog(`${t} outbound-rtp: ${JSON.stringify(n)}`)}if("media-source"==e.type&&e.audioLevel){const n={audioLevel:parseInt(100*e.audioLevel)/100,totalAudioEnergy:parseInt(100*e.totalAudioEnergy)/100,totalSamplesDuration:parseInt(100*e.totalSamplesDuration)/100,echoReturnLoss:parseInt(100*e.echoReturnLoss)/100,echoReturnLossEnhancement:parseInt(100*e.echoReturnLossEnhancement)/100};d++,l.push(n),d>=5&&(console.crlog(`${t} media-source arr: ${JSON.stringify(l)}`),d=0,l=[])}"ssrc"==e.type&&console.crlog(`${t} ssrc：${JSON.stringify(e)}`)}))}))}),n),this.mediaSourceLogTimer=setInterval((()=>{e.getStats().then((e=>{e.forEach((e=>{"media-source"==e.type&&(this.myAudioLevel=e.audioLevel,clearTimeout(this.myAudioLevelResetTimer),this.myAudioLevelResetTimer=setTimeout((()=>{this.myAudioLevel=0}),1e3))}))}))}),1e3)}modifyPeerAddrExt(e,t){console.crlog(`[Audio] ModifyPeerAddrExt, MSID:${t}`);const n=`[Audio] MSID:${t} --`;let i=this.audioPeerConnections.find((e=>e.msid===t));void 0!==i?(e.sdp=this.modifyAnswerSDP(e.sdp),console.crlog(`${n} Audio RTCPeerConnection got remote answer, answer.sdp:\r\n${e.sdp}`),i.answer=e,i.connection.setRemoteDescription(new RTCSessionDescription(e)).then((t=>{console.crlog(`${n} Audio RTCPeerConnection answer setRemoteDescription success!`),e.sdp.includes("sendonly")&&(clearTimeout(this.audioFirstOpenWaitingTimout),this.audioFirstOpenWaiting=!1)})).catch((e=>{console.crlog(`[Audio][Error] MSID:${i.msid} -- Audio RTCPeerConnection setRemoteDescription fail!`),console.error(e)}))):console.crlog(`[Audio][Error] Can not find MSID:${t} corresponding connection object!!!`)}getAudioStream(e){console.crlog(`[Audio] Do get audio stream...  constraints: ${JSON.stringify(e)}`);return new Promise(((t,n)=>{e=e||{audio:{autoGainControl:this.audioCfg.autoGainControl,echoCancellation:this.audioCfg.echoCancellation,noiseSuppression:this.audioCfg.noiseSuppression},video:!1},window.__Rtc.firstInitStream&&1==window.__Rtc.firstInitStream.active&&window.__Rtc.firstInitStream.getAudioTracks().forEach((e=>{console.crlog("[Audio] Stop first init audio stream tracks..."),e.stop()})),this.localAudioStream&&this.localAudioStream.getAudioTracks().forEach((e=>{console.crlog("[Audio] Do stop old audio stream tracks..."),e.stop()})),this.micAudioSource.mediaStream&&this.micAudioSource.mediaStream.getAudioTracks()[0].stop(),this.micAudioContext.close&&"running"===this.micAudioContext.state&&this.micAudioContext.close(),console.crlog(`[Audio] Open or change mic, constraints: ${JSON.stringify(e)}`),navigator.mediaDevices.getUserMedia(e).then((e=>(console.crlog(`[Audio] Local audio getUserMedia success! ${JSON.stringify({active:e.active,id:e.id})}`),this.getLocalAudioEnergy(e),e))).then((e=>{if(console.crlog("[Audio] CRVideo_NotifyAudioStream.target(0, localStream)"),CRVideo_NotifyAudioStream.target(0,e),this.audioCfg.autoGainControl)console.crlog("[Audio] Local audio track use AGC mode"),this.localAudioStream=e,this.localAudioTracks=e.getAudioTracks();else{console.crlog("[Audio] Local audio track use web audio api, manual control gain value"),this.micAudioContext.close&&"running"===this.micAudioContext.state&&this.micAudioContext.close(),this.micAudioContext=new AudioContext;const t=this.micAudioContext.createGain(),n=this.micAudioContext.createMediaStreamSource(e),i=this.micAudioContext.createMediaStreamDestination();n.connect(t),t.connect(i),this.micAudioGainNode=t,this.micAudioSource=n,this.localAudioStream=i.stream,this.localAudioTracks=this.localAudioStream.getAudioTracks(),this.setMicGainValue(this.audioCfg.micVolume)}try{console.crlog(`[Audio] Local audio stream track settings: ${JSON.stringify(this.localAudioTracks[0].getSettings())}`)}catch(e){console.error(e)}return this.localAudioTracks[0].micID=this.audioCfg.micID,this.localAudioTracks[0].autoGainControl=this.audioCfg.autoGainControl,this.localAudioTracks[0].echoCancellation=this.audioCfg.echoCancellation,this.localAudioTracks[0].noiseSuppression=this.audioCfg.noiseSuppression,t()})).catch((e=>(console.crlog(`[Audio][Error] Local audio getUserMedia fail! ${e}`),console.error(e),n(e))))}))}getLocalAudioEnergy(e){let t=new AudioContext,n=t.createScriptProcessor(2048,1,1);t.createMediaStreamSource(e).connect(n),n.connect(t.destination),n.onaudioprocess=i=>{let r=i.inputBuffer.getChannelData(0),o=0,s=0;for(let e=0;e<r.length;++e)s+=r[e]*r[e];o=Math.sqrt(s/r.length),this.localAudioEnergy=parseInt(100*o)/100,e.active||(n.onaudioprocess=null,n=null,t.close&&"running"===t.state&&t.close())}}isEnableAudioTrack(e){this.localAudioTracks.forEach((t=>{e?console.crlog("[Audio] Enable local audio track!"):console.crlog("[Audio] Disable local audio track!"),t.enabled=e}))}stopAllAudioTrack(){console.crlog("[Audio] Do stop all audio track..."),this.localAudioTracks.forEach((e=>{"ended"!==e.readyState&&e.stop()})),this.micAudioSource.mediaStream&&this.micAudioSource.mediaStream.getAudioTracks()[0].stop(),this.micAudioContext.close&&"running"===this.micAudioContext.state&&this.micAudioContext.close(),this.localAudioTracks=[],this.localAudioStream=null,this.micAudioContext=Object,this.micAudioGainNode=Object,this.micAudioSource=Object}closeAllPeerConnection(){console.crlog("[Audio] Do close all peerConnections..."),this.audioPeerConnections.forEach((e=>{e.connection&&e.connection.close()})),this.audioPeerConnections=[],clearInterval(this.mediaSourceLogTimer),clearInterval(this.rtpLogTimer)}closeMicEx(t){const n=e.Z.userIDtoTermID(t);t==A.userInfo.userId&&this.isEnableAudioTrack(!1),n&&console.crlog(`[Audio] CR__CloseMicEx(${n})`),n&&__Rtc.CR__CloseMicEx(n)}audioMSIDFree(e){console.crlog(`[Audio] Audio MSID free, MSID:${e}`);const t=this.audioPeerConnections.findIndex((t=>t.msid===e));let n=this.audioPeerConnections[t].connection?this.audioPeerConnections[t].connection.audioContext.audioContext:null;n&&"running"===n.state&&n.close&&n.close(),-1!=t&&this.audioPeerConnections.splice(t,1),CRVideo_UploadingLog(),e===this.audioMSID-1&&this.audioPeerConnections.length>0&&(console.crlog("[Audio] Fast on/off mic"),this.resetAudioPeerConnection(e))}resetAudioPeerConnection(){console.crlog("[Audio] Do reset audio peerConnection...");const e=this.audioPeerConnections[0];if(console.crlog(`[Audio] Current audio connection type: ${e.type}`),"recvonly"===e.type){const t=e.remoteStream;console.crlog("[Audio] CRVideo_NotifyAudioStream.target(1, remoteStream)"),CRVideo_NotifyAudioStream.target(1,t);const n=__Rtc.CRBrowser.curBrowserCfg;n.isMobile&&"iOS"==n.platform&&15==n.OSVer.split(".")[0]&&n.OSVer.split(".")[1]<=3?this.connectToSpeaker(t):document.getElementById("CRSDKAudioPlayer")?(console.crlog(`[Audio] MSID:${e.msid} -- Audio RTCPeerConnection found the audio element success and set srcObject on free notify!`),document.getElementById("CRSDKAudioPlayer").srcObject=t,document.getElementById("CRSDKAudioPlayer").isPaused?CRVideo_PauseSpeaker():setTimeout((()=>{try{document.getElementById("CRSDKAudioPlayer").srcObject&&1==document.getElementById("CRSDKAudioPlayer").srcObject.active&&(document.getElementById("CRSDKAudioPlayer").click(),document.getElementById("CRSDKAudioPlayer").play())}catch(e){console.error(e)}}),100)):console.crlog(`[Audio][Error] MSID:${e.msid} -- Can not find audio elemment, set srcObject fail on free notify!`)}else if(this.isEnableAudioTrack(!0),e.micID===this.audioCfg.micID){console.crlog("[Audio] Audio micID did not changed...");const t=e.remoteStream;console.crlog("[Audio] CRVideo_NotifyAudioStream.target(1, remoteStream)"),CRVideo_NotifyAudioStream.target(1,t);const n=__Rtc.CRBrowser.curBrowserCfg;n.isMobile&&"iOS"==n.platform&&15==n.OSVer.split(".")[0]&&n.OSVer.split(".")[1]<=3?this.connectToSpeaker(t):document.getElementById("CRSDKAudioPlayer")?(console.crlog(`[Audio] MSID:${e.msid} -- Audio RTCPeerConnection found the audio element success and set srcObject on free notify!`),document.getElementById("CRSDKAudioPlayer").srcObject=t,document.getElementById("CRSDKAudioPlayer").isPaused?CRVideo_PauseSpeaker():setTimeout((()=>{try{document.getElementById("CRSDKAudioPlayer").srcObject&&1==document.getElementById("CRSDKAudioPlayer").srcObject.active&&(document.getElementById("CRSDKAudioPlayer").click(),document.getElementById("CRSDKAudioPlayer").play())}catch(e){console.error(e)}}),100)):console.crlog(`[Audio][Error] MSID:${e.msid} -- Can not find audio elemment, set srcObject fail on free notify!`)}else console.crlog("[Audio] Audio micID has changed, do changeMicID now..."),this.changeMicID(this.audioCfg.micID)}uploadAudioDevicesStatus(e){console.crlog("[Audio] Do upload audio devices status..."),void 0===e&&console.crlog(`[Audio] Audio input devices: ${JSON.stringify(this.audioInput)}`),void 0===e?this.audioInput.length>0?(console.crlog("[Audio] CR__SetAudioDeviceStatus(true)"),__Rtc.CR__SetAudioDeviceStatus(!0)):(console.crlog("[Audio] CR__SetAudioDeviceStatus(false)"),__Rtc.CR__SetAudioDeviceStatus(!1)):e?(console.crlog("[Audio] CR__SetAudioDeviceStatus(true)"),__Rtc.CR__SetAudioDeviceStatus(!0)):(console.crlog("[Audio] CR__SetAudioDeviceStatus(false)"),__Rtc.CR__SetAudioDeviceStatus(!1)),this.audioFirstOpenWaitingTimout=setTimeout((()=>{this.audioFirstOpenWaiting=!1}),2e3)}setAudioCfg(e){for(var t in e)this.audioCfg[t]=e[t];e.micID&&this.changeMicID(+e.micID),e.speakerID&&this.changeSpeakerID(+e.speakerID),null==e.autoGainControl&&null==e.echoCancellation&&null==e.noiseSuppression||this.changeMicID(this.audioCfg.micID),e.micVolume&&!this.audioCfg.autoGainControl&&this.micAudioGainNode.gain&&this.setMicGainValue(e.micVolume)}setMicGainValue(e){const t=parseInt(e)/100;console.crlog(`[Audio] Set local audio web audio api gain value: ${t}`),this.micAudioGainNode.gain.setValueAtTime(t,this.micAudioContext.currentTime)}changeMicID(e){console.crlog(`[Audio] Set mic device, micID:${e}`),this.audioInput.forEach((t=>{if(t.id===e){let n=!1;this.localAudioTracks.forEach((e=>{1==e.enabled&&(n=!0)})),this.audioCfg.micID=e,n&&this.getAudioStream({audio:{deviceId:{ideal:t.deviceId},autoGainControl:this.audioCfg.autoGainControl,echoCancellation:this.audioCfg.echoCancellation,noiseSuppression:this.audioCfg.noiseSuppression}}).then((()=>{this.uploadAudioDevicesStatus(!0)}),(e=>{console.crlog(`[Audio] CRVideo_OpenMicFailed.target(${e})`),CRVideo_OpenMicFailed.target(e),console.error(`Open mic failed: ${e}`)}))}}))}changeSpeakerID(e){console.crlog(`[Audio] Set speaker device, speakerID:${e}`);const t=document.getElementById("CRSDKAudioPlayer");for(let n=0;n<this.audioOutput.length;n++)e==this.audioOutput[n].id&&t&&t.setSinkId&&t.setSinkId(this.audioOutput[n].deviceId).then((()=>{console.crlog(`[Audio] Change speaker devices success, audio output device attached: ${this.audioOutput[n].deviceId}`)})).catch((e=>{console.crlog(`[Audio] Change speaker devices fail! ${e.name}`);let t=e;"SecurityError"==e.name&&(t="You need to use HTTPS for selecting audio output"),console.error(e)}))}getAudioStatus(e){let t="AUNKNOWN";return t=A.findMemberInfo({use:"userId",want:"audioStatus",value:e})||t,window.CRVideo_ASTATUS[t]}},window.__Rtc.CRRTCAudio=new window.__crAudioClass,window.CRVideo_AudioStatusChanged=new A.CbProxy("CRVideo_AudioStatusChanged"),window.CRVideo_NotifyAudioStream=new A.CbProxy("CRVideo_NotifyAudioStream"),window.CRVideo_MicEnergyUpdate=new A.CbProxy("CRVideo_MicEnergyUpdate"),window.CRVideo_NetStateChanged=new A.CbProxy("CRVideo_NetStateChanged"),window.CRVideo_PeerConnectionError=new A.CbProxy("CRVideo_PeerConnectionError"),window.CRVideo_OpenMicFailed=new A.CbProxy("CRVideo_OpenMicFailed"),window.CRVideo_NotifyNetworkLostRate=new A.CbProxy("CRVideo_NotifyNetworkLostRate"),window.CRVideo_NotifySetVoiceChange=new A.CbProxy("CRVideo_NotifySetVoiceChange");__webpack_require__(7957),__webpack_require__(1954);const V=window.CRVideo,k=window.Ice;window.__crSvrRecordClass=class{constructor(){this.initData(),this.initIceCallback(),this.initSDKInterface()}initData(){console.crlog("[SvrRecord] SvrRecordModule initData..."),this.MixersList=[],this.svrRecordStatus=0}initIceCallback(){this.ICECallback={notifySvrRecordStateChanged:(e,t,n)=>{console.crlog(`[SvrRecord] ICE Notify: notifySvrRecordStateChanged, params:${JSON.stringify({operatorID:e,state:t,err:n})}`);const i=t._value,r=V.findMemberInfo({use:"termId",want:"userId",value:e});let o;switch(this.svrRecordStatus=i,t.name){case"NO_RECORD":o=0;break;case"STARTING":o=1;break;case"RECORDING":o=2;break;case"PAUSED":o=3;break;case"STOPPING":o=4;break;default:o=t._value}console.crlog(`[SvrRecord] CRVideo_SvrMixerStateChanged/CRVideo_SvrRecordStateChanged.target(${o},${n})`),CRVideo_SvrMixerStateChanged.target(o,n,r),window.CRVideo_SvrRecordStateChanged.target(o,n),setTimeout((()=>{window.CRVideo_UploadingLog()}),1e3)},notifySvrRecordCfgChanged:(e,t)=>{const n=JSON.parse(t);console.crlog(`[SvrRecord] ICE Notify: notifySvrRecordCfgChanged, params:${JSON.stringify({operatorID:e,svrConfig:n})}`),console.crlog("[SvrRecord] CRVideo_SvrRecVideosChanged/CRVideo_SvrMixerCfgChanged.target()"),window.CRVideo_SvrRecVideosChanged.target(),window.CRVideo_SvrMixerCfgChanged.target()},notifySvrRecordFileState:e=>{const t=JSON.parse(e);console.crlog(`[SvrRecord] ICE Notify: notifySvrRecordFileState, params:${JSON.stringify({State:t})}`);const n={errCode:t.errCode,state:t.state,duration:t.duration,fileSize:t.fileSize,fileName:t.fileName,id:t.id};console.crlog(`[SvrRecord] CRVideo_NotifySvrRecordFileState.target(${JSON.stringify(t)})`),console.crlog(`[SvrRecord] CRVideo_SvrMixerOutputInfo.target(${JSON.stringify(n)})`),window.CRVideo_NotifySvrRecordFileState.target(t),window.CRVideo_SvrMixerOutputInfo.target(n)}}}initSDKInterface(){window.CRVideo_StartSvrMixer=(e,t,n)=>{try{console.crlog("[SvrRecord] CRVideo_StartSvrMixer(MutiMixerCfgs, MutiMixerContents, MutiMixerOutputs)"),console.crlog(`[SvrRecord] MutiMixerCfgs: ${JSON.stringify(e)}`),console.crlog(`[SvrRecord] MutiMixerContents: ${JSON.stringify(t)}`),console.crlog(`[SvrRecord] MutiMixerOutputs: ${JSON.stringify(n)}`)}catch(e){console.error(e)}return new Promise(((i,r)=>{this.MixersList=[],e.forEach((e=>{let i,r,o={};if(o.id=e.id,o.recCfg={},o.contents=[],o.clientType=1,e.streamTypes=e.streamTypes?e.streamTypes:3,t.forEach((t=>{t.id===e.id&&(i=t.content)})),n.forEach((t=>{t.id==e.id&&(r=t.output)})),e.streamTypes&&3!=e.streamTypes){if(e.streamTypes&&1==e.streamTypes){let t=e.aCfg;t&&(o.recCfg.audioFormat=t.audioFormat||1,o.recCfg.channelType=t.channelType||1,o.recCfg.streamTypes=1),r&&r.forEach((e=>{0==e.type&&(o.recCfg.serverPathFileName=e.filename,CRVideo.APPIDMode&&(o.recCfg.userNetDiskId=V.multiProject.userId))})),i&&(o.contents=this.fmtAudioContent(i)),this.MixersList.push(o)}}else{let t=e.cfg;t&&(o.recCfg.dstResolutionWidth=t.width||1280,o.recCfg.dstResolutionHeight=t.height||720,o.recCfg.fps=t.frameRate||20,o.recCfg.gop=t.gop||120,o.recCfg.maxBPS=t.bitRate||35e4,o.recCfg.qp=t.defaultQP||26,o.recCfg.streamTypes=3),r&&r.forEach((e=>{0==e.type?(o.recCfg.serverPathFileName=e.filename,CRVideo.APPIDMode&&(o.recCfg.userNetDiskId=V.multiProject.userId)):1==e.type&&(o.recCfg.liveUrl=e.liveUrl)})),i&&(o.contents=this.fmtVideoContent(i)),this.MixersList.push(o)}})),E.startSvrRecord(JSON.stringify(this.MixersList)).then((e=>i({errCode:0})),(e=>r(__Rtc.CRCONFERR.Parse(e))))}))},window.CRVideo_UpdateSvrMixerContent=e=>{try{console.crlog(`[SvrRecord] CRVideo_UpdateSvrMixerContent(${JSON.stringify(e)})`)}catch(e){console.error(e)}return new Promise(((t,n)=>{e.forEach((e=>{this.MixersList.forEach((t=>{t.id===e.id&&(3===t.recCfg.streamTypes&&(t.contents=this.fmtVideoContent(e.content)),1===t.recCfg.streamTypes&&(t.contents=this.fmtAudioContent(e.content)))}))})),E.updateSvrRecCfg(JSON.stringify(this.MixersList)).then((e=>t({errCode:0})),(e=>n(__Rtc.CRCONFERR.Parse(e))))}))},window.CRVideo_StopSvrMixer=()=>new Promise(((e,t)=>{console.crlog("[SvrRecord] CRVideo_StopSvrMixer()"),E.stopSvrRecord().then((t=>e({errCode:0})),(e=>t(__Rtc.CRCONFERR.Parse(e))))})),window.CRVideo_GetSvrMixerState=()=>{const e=this.svrRecordStatus||0;return console.crlog(`[SvrRecord] CRVideo_GetSvrMixerState(), return: ${e}`),e}}fmtAudioContent(e){const t=JSON.parse(JSON.stringify(e));return t.forEach((e=>{if(9==e.type){const t=V.findMemberInfo({use:"userId",want:"termId",value:e.param});e.param={termId:t}}})),t}fmtVideoContent(e){const t=JSON.parse(JSON.stringify(e));return t.forEach((e=>{if(4==e.type)e.param={},e.param.resourceid=k.generateUUID();else if(0==e.type){var t,n,i,r;n=(t=e.param.camid.split("."))[t.length-1],t.length=t.length-1,i=t.join(".");const o=V.allMemberInfo.find((e=>e.userId==i));r=o&&o.termId?o.termId:"",e.param={},e.param.camId=+n,e.param.termId=r}else 7==e.type&&(e.param.resourceid=k.generateUUID())})),t}},window.__Rtc.CRRTCRecord=new window.__crSvrRecordClass,window.CRVideo_SvrRecordStateChanged=new V.CbProxy("CRVideo_SvrRecordStateChanged"),window.CRVideo_SvrRecVideosChanged=new V.CbProxy("CRVideo_SvrRecVideosChanged"),window.CRVideo_NotifySvrRecordFileState=new V.CbProxy("CRVideo_NotifySvrRecordFileState"),window.CRVideo_SvrMixerCfgChanged=new V.CbProxy("CRVideo_SvrMixerCfgChanged"),window.CRVideo_SvrMixerStateChanged=new V.CbProxy("CRVideo_SvrMixerStateChanged"),window.CRVideo_SvrMixerOutputInfo=new V.CbProxy("CRVideo_SvrMixerOutputInfo");const N=window.CRVideo,L=window.Ice;window.__crCloudRecordClass=class{constructor(){this.initData(),this.initIceCallback(),this.initSDKInterface()}initData(){console.crlog("[CloudRecord] CloudRecordModule initData..."),this.cloudRecordList=[]}initIceCallback(){this.ICECallback={notifyCloudRecordStateChanged:(e,t,n,i)=>{const r=n.value;let o=JSON.parse(i);console.crlog(`[CloudRecord] ICE Notify: notifyCloudRecordStateChanged, params:${JSON.stringify({operatorId:e,MixerID:t,status:r})}`),this.updateRecordList({MixerID:t,state:r});const s=N.findMemberInfo({use:"termId",want:"userId",value:e})||"CRMCU";if(0===r)o={err:this.errCodeTo(o.err),errDesc:o.errDesc},0!==o.err&&(console.crlog(`[CloudRecord] CRVideo_CreateCloudMixerFailed.target(${t}, ${o.err})`),CRVideo_CreateCloudMixerFailed.target(t,o.err));else if(1===r){const e=JSON.parse(o.jsonCfg);o=this.IceCfg2UserCfg(e)}console.crlog(`[CloudRecord] CRVideo_CloudMixerStateChanged.target(${t},${r},${JSON.stringify(o)},${s})`),window.CRVideo_CloudMixerStateChanged.target(t,r,o,s)},notifyCloudRecordCfgChanged:(e,t,n)=>{delete(n=JSON.parse(n)).storageConfig,console.crlog(`[CloudRecord] ICE Notify: notifyCloudRecordCfgChanged, params:${JSON.stringify({operatorId:e,MixerID:t,jsonCfg:n})}`),this.updateRecordList({MixerID:t,jsonCfg:n}),console.crlog(`[CloudRecord] CRVideo_CloudMixerInfoChanged.target(${t})`),window.CRVideo_CloudMixerInfoChanged.target(t)},notifyCloudRecordFileState:(e,t)=>{(t=JSON.parse(t)).errCode&&(t.errCode=this.errCodeTo(t.errCode)),console.crlog(`[CloudRecord] CRVideo_CloudMixerOutputInfoChanged.target(${e}, ${JSON.stringify(t)})`),window.CRVideo_CloudMixerOutputInfoChanged.target(e,t)}}}initSDKInterface(){window.CRVideo_CreateCloudMixer=e=>{try{const t=JSON.parse(JSON.stringify(e));t.storageConfig&&(t.storageConfig.accessKey="******",t.storageConfig.secretKey="******"),console.crlog(`[CloudRecord] CRVideo_CreateCloudMixer(${JSON.stringify(t)})`)}catch(e){console.error(e),Promise.resolve().then((()=>{console.crlog(`[CloudRecord] CRVideo_CreateCloudMixerFailed.target(${t}, 5)`),CRVideo_CreateCloudMixerFailed.target(t,5)}))}const t=L.generateUUID().replace(/-/g,"");return this.userCfg2IceCfg(e).then((e=>{E.startCloudRecord(t,JSON.stringify(e)).catch((e=>{console.error(e),e.toString().indexOf("SeviceNotEnabled")>-1&&(e="806"),console.crlog(`[CloudRecord] CRVideo_CreateCloudMixerFailed.target(${t}, 806)`),CRVideo_CreateCloudMixerFailed.target(t,806)}))})).catch((e=>{console.error(e),console.crlog(`[CloudRecord] CRVideo_CreateCloudMixerFailed.target(${t}, 1)`),CRVideo_CreateCloudMixerFailed.target(t,1)})),t},window.CRVideo_DestroyCloudMixer=e=>new Promise(((t,n)=>{console.crlog(`[CloudRecord] CRVideo_DestroyCloudMixer(${e})`),E.stopCloudRecord(e).then((e=>t({errCode:0,errDesc:"success"})),(e=>(console.error(e),n(__Rtc.CRCONFERR.Parse(e)))))})),window.CRVideo_UpdateCloudMixerContent=(e,t)=>new Promise(((n,i)=>{try{console.crlog(`[CloudRecord] CRVideo_UpdateCloudMixerContent(${e},${JSON.stringify(t)})`)}catch(e){return console.error(e),i({errCode:5,errDesc:"参数格式错误"})}this.cloudRecordList.some((r=>{if(r.MixerID==e){const o=JSON.parse(JSON.stringify(r.jsonCfg));if(1===o.mode)for(let e in t){if("videoFileCfg"===e){if(!o.videoFileCfg)return i({errCode:5,errDesc:"不支持录制中创建视频录制"});o[e].subscribeVideos=this.videoCfgUID2TermId(t[e].subscribeVideos)}if("audioFileCfg"===e){if(!o.audioFileCfg)return i({errCode:5,errDesc:"不支持录制中创建音频录制"});o[e].subscribeAudios=this.audioCfgUID2TermId(t[e].subscribeAudios)}}else if(0===o.mode)for(let e in t){if("videoFileCfg"===e){if(!o.videoFileCfg)return i({errCode:5,errDesc:"不支持录制中创建视频录制"});t[e].layoutConfig&&(t[e].layoutConfig.reduce(((e,t)=>(0===t.type&&(t.param.camid=this.uidACamid2TermIdACamId(t.param.camid)),e.push(t),e)),[]),o[e].layoutConfig=t[e].layoutConfig),t[e].aChannelContent&&(o[e].aChannelContent=this.Uids2termIds(t[e].aChannelContent,!0))}"audioFileCfg"===e&&t[e].aChannelContent&&(o[e].aChannelContent=this.Uids2termIds(t[e].aChannelContent,!0))}return E.updateCloudRecord(e,JSON.stringify(o)).then((e=>n({errCode:0,errDesc:"success"})),(e=>(console.error(e),i(__Rtc.CRCONFERR.Parse(e))))),!0}}))})),window.CRVideo_GetCloudMixerInfo=e=>{console.crlog(`[CloudRecord] CRVideo_GetCloudMixerInfo(${e})`);let t=null;return this.cloudRecordList.some((n=>{if(n.MixerID==e){const e=this.IceCfg2UserCfg(n.jsonCfg);return t={ID:n.MixerID,owner:N.findMemberInfo({use:"termId",want:"userId",value:n.jsonCfg.owner})||"",cfg:e,state:n.state},!0}})),console.crlog(`[CloudRecord] CRVideo_GetCloudMixerInfo, return: ${JSON.stringify(t)}`),t},window.CRVideo_GetAllCloudMixerInfo=()=>{console.crlog("[CloudRecord] CRVideo_GetAllCloudMixerInfo()");const e=[];return this.cloudRecordList.forEach((t=>{if(0!==t.state){const n=this.IceCfg2UserCfg(t.jsonCfg),i={ID:t.MixerID,owner:N.findMemberInfo({use:"termId",want:"userId",value:t.jsonCfg.owner})||"",cfg:n,state:t.state};e.push(i)}})),console.crlog(`[CloudRecord] CRVideo_GetAllCloudMixerInfo, return: ${JSON.stringify(e)}`),e}}errCodeTo(e){return{0:0,1:900,2:901,3:902,4:1,5:5,6:904,7:5,8:5,9:905,200:907}[e]}initRecord(e){if(e.confInfo&&e.confInfo.cloud_record){const n=JSON.parse(e.confInfo.cloud_record);for(var t in n)this.cloudRecordList.push({MixerID:t,jsonCfg:JSON.parse(n[t].jsonCfg||"{}"),state:n[t].state})}}updateRecordList(e){const t=this.cloudRecordList.findIndex((t=>t.MixerID==e.MixerID));if(-1!==t)if(0==e.state)this.cloudRecordList.splice(t,1);else for(var n in e)this.cloudRecordList[t][n]=e[n];else{const t={};for(var n in e)t[n]=e[n];this.cloudRecordList.push(t)}}userCfg2IceCfg(e){return new Promise(((t,n)=>{const i={clientType:1};if(i.owner=N.userInfo.termId,i.storageConfig=e.storageConfig?e.storageConfig:{userNetDiskId:N.multiProject.userId},i.mode=e.mode||0,1==i.mode){if(e.audioFileCfg){i.audioFileCfg={svrPath:e.audioFileCfg.svrPath?e.audioFileCfg.svrPath:"",svrFileNameSuffix:e.audioFileCfg.svrFileNameSuffix?e.audioFileCfg.svrFileNameSuffix:".mp3"},i.audioFileCfg.subscribeAudios=[];try{e.audioFileCfg.subscribeAudios&&e.audioFileCfg.subscribeAudios.forEach((e=>{if("_cr_all_"===e)i.audioFileCfg.subscribeAudios.push(e);else{const t=N.findMemberInfo({use:"userId",want:"termId",value:e});if(!t)return n({errCode:5,errDesc:`参数错误，未找到用户: ${e}`});i.audioFileCfg.subscribeAudios.push(t)}}))}catch(e){return console.error(e),n({errCode:5,errDesc:'"subscribeAudios"参数错误'})}}if(e.videoFileCfg){i.videoFileCfg={svrPath:e.videoFileCfg.svrPath?e.videoFileCfg.svrPath:"",svrFileNameSuffix:e.videoFileCfg.svrFileNameSuffix?e.videoFileCfg.svrFileNameSuffix:".mp4",aStreamType:e.videoFileCfg.aStreamType?e.videoFileCfg.aStreamType:0},i.videoFileCfg.subscribeVideos=[];try{e.videoFileCfg.subscribeVideos&&e.videoFileCfg.subscribeVideos.forEach((e=>{if("_cr_all_"===e||"_cr_allDefCam_"===e)i.videoFileCfg.subscribeVideos.push(e);else{const t=e.lastIndexOf("."),r=e.substr(0,t),o=e.substr(t+1)||-1,s=N.findMemberInfo({use:"userId",want:"termId",value:r});if(!s)return n({errCode:5,errDesc:`参数错误，未找到用户: ${r}`});i.videoFileCfg.subscribeVideos.push(`${s}.${o}`)}}))}catch(e){return console.error(e),n({errCode:5,errDesc:'"subscribeVideos"参数错误'})}}}if(0===i.mode){if(e.audioFileCfg){const t=Object.assign({aChannelType:0},e.audioFileCfg);if(t.aChannelContent){const e=[];t.aChannelContent.forEach((t=>{const i=N.findMemberInfo({use:"userId",want:"termId",value:t});if(!i)return n({errCode:5,errDesc:`参数错误，未找到用户: ${t}`});e.push(i)})),t.aChannelContent=e}i.audioFileCfg=t}if(e.videoFileCfg){const t=Object.assign({mixedLayout:1},e.videoFileCfg);if(t.layoutConfig.forEach((e=>{if(0===e.type){const t=e.param.camid,i=t.lastIndexOf("."),r=t.substr(0,i),o=t.substr(i+1),s=N.findMemberInfo({use:"userId",want:"termId",value:r});if(!s)return n({errCode:5,errDesc:`参数错误，未找到用户: ${r}`});e.param.camid=`${s}.${o}`}})),t.aChannelContent){const e=[];t.aChannelContent.forEach((t=>{const i=N.findMemberInfo({use:"userId",want:"termId",value:t});if(!i)return n({errCode:5,errDesc:`参数错误，未找到用户: ${t}`});e.push(i)})),t.aChannelContent=e}i.videoFileCfg=t}}return t(i)}))}IceCfg2UserCfg(e){const t=JSON.parse(JSON.stringify(e)),n={mode:t.mode,audioFileCfg:t.audioFileCfg,videoFileCfg:t.videoFileCfg};return t.videoFileCfg&&(t.videoFileCfg.aChannelContent&&(n.videoFileCfg.aChannelContent=this.Uids2termIds(t.videoFileCfg.aChannelContent,!1)),t.videoFileCfg.subscribeVideos&&(n.videoFileCfg.subscribeVideos=this.videoCfgTermId2UID(t.videoFileCfg.subscribeVideos)),t.videoFileCfg.layoutConfig&&n.videoFileCfg.layoutConfig.map((e=>(0===e.type&&(e.param.camid=this.uidACamid2TermIdACamId(e.param.camid,!0)),e)))),t.audioFileCfg&&(t.audioFileCfg.aChannelContent&&(n.audioFileCfg.aChannelContent=this.Uids2termIds(t.audioFileCfg.aChannelContent,!1)),t.audioFileCfg.subscribeAudios&&(n.audioFileCfg.subscribeAudios=this.audioCfgTermId2UID(t.audioFileCfg.subscribeAudios))),n}Uids2termIds(e,t){return e.map((e=>N.findMemberInfo({use:t?"userId":"termId",want:t?"termId":"userId",value:e})))}uidACamid2TermIdACamId(e,t){const n=e.lastIndexOf("."),i=e.substr(0,n),r=e.substr(n+1)||-1;return`${N.findMemberInfo({use:t?"termId":"userId",want:t?"userId":"termId",value:i})||""}.${r}`}videoCfgTermId2UID(e){const t=[];return e.forEach((e=>{if("_cr_all_"===e||"_cr_allDefCam_"===e)t.push(e);else{const n=e.lastIndexOf("."),i=e.substr(0,n),r=e.substr(n+1)||-1,o=N.findMemberInfo({use:"termId",want:"userId",value:i})||"";t.push(`${o}.${r}`)}})),t}videoCfgUID2TermId(e){return e.forEach(((t,n)=>{if("_cr_all_"!==t&&"_cr_allDefCam_"!==t){const i=t.lastIndexOf("."),r=t.substr(0,i),o=t.substr(i+1)||-1,s=N.findMemberInfo({use:"userId",want:"termId",value:r})||"";e[n]=`${s}.${o}`}})),e}audioCfgTermId2UID(e){const t=[];return e.forEach((e=>{if("_cr_all_"===e)t.push(e);else{const n=N.findMemberInfo({use:"termId",want:"userId",value:e})||"";t.push(n)}})),t}audioCfgUID2TermId(e){return e.forEach(((t,n)=>{if("_cr_all_"!==t){const i=N.findMemberInfo({use:"userId",want:"termId",value:t})||"";e[n]=i}})),e}},window.__Rtc.CRRTCCloudRecord=new window.__crCloudRecordClass,window.CRVideo_CreateCloudMixerFailed=new N.CbProxy("CRVideo_CreateCloudMixerFailed"),window.CRVideo_CloudMixerStateChanged=new N.CbProxy("CRVideo_CloudMixerStateChanged"),window.CRVideo_CloudMixerInfoChanged=new N.CbProxy("CRVideo_CloudMixerInfoChanged"),window.CRVideo_CloudMixerOutputInfoChanged=new N.CbProxy("CRVideo_CloudMixerOutputInfoChanged");const U=window.CRVideo;window.Ice;window._crMemberClass=class{constructor(){this.initIceCallback(),this.initSDKInterface()}initIceCallback(){this.ICECallback={kickoutRslt:(e,t,n)=>{CRVideo_KickoutRslt.target()},changeNicknameRslt:(e,t)=>{}}}initSDKInterface(){window.CRVideo_GetAllMembers=()=>{const e=[];return U.allMemberInfo.forEach((t=>{const n={};n.userID=t.userId,n.nickname=t.nickname,n.audioStatus=window.CRVideo_ASTATUS[t.audioStatus],n.videoStatus=window.CRVideo_VSTATUS[t.videoStatus],e.push(n)})),e},window.CRVideo_GetMemberInfo=e=>{const t={};U.allMemberInfo.forEach((n=>{e==n.userId&&(t.userID=n.userId,t.nickname=n.nickname,t.audioStatus=window.CRVideo_ASTATUS[n.audioStatus],t.videoStatus=window.CRVideo_VSTATUS[n.videoStatus])}));try{console.crlog(`[Member] CRVideo_GetMemberInfo(${e}), return: ${JSON.stringify(t)}`)}catch(e){console.error(e)}return t},window.CRVideo_GetMemberNickName=e=>{let t="";return e==U.userInfo.userId?t=U.userInfo.nickname:U.allMemberInfo.forEach((n=>{e==n.userId&&(t=n.nickname)})),t},window.CRVideo_IsUserInMeeting=e=>{let t=!1;return U.allMemberInfo.forEach((function(n){e==n.userId&&(t=!0)})),console.crlog(`[Member] CRVideo_IsUserInMeeting(${e}), return: ${t}`),t},g.Z.getAllMembers=()=>{const e=[];return U.allMemberInfo.forEach((t=>{const n={};n.actor=t.actor,n.userID=t.userId,n.nickname=t.nickname,n.audioStatus=window.CRVideo_ASTATUS[t.audioStatus],n.videoStatus=window.CRVideo_VSTATUS[t.videoStatus],e.push(n)})),e},g.Z.getMemberInfo=e=>{const t={};return U.allMemberInfo.forEach((n=>{e==n.userId&&(t.actor=n.actor,t.userID=n.userId,t.nickname=n.nickname,t.audioStatus=window.CRVideo_ASTATUS[n.audioStatus],t.videoStatus=window.CRVideo_VSTATUS[n.videoStatus])})),t}}},window.__Rtc.CRRTCMember=new window._crMemberClass;__webpack_require__(702),__webpack_require__(5043),__webpack_require__(7331),__webpack_require__(1955);var B=__webpack_require__(246),F=__webpack_require__(5273);const j=window.Ice;const $=new class{constructor(){this._initData()}_initData(){this._proxyString="",this._ic=null,this._proxy=null,this._adapter=null,this._connection=null,this.serverPrx=null,this.isConnected=!1}_initializationData(){const e=new j.InitializationData;return e.properties=j.createProperties(),e.properties.setProperty("Ice.Trace.Network","0"),e.properties.setProperty("Ice.Trace.Protocol","0"),e.properties.setProperty("Ice.ACM.Client","0"),e.properties.setProperty("Ice.ACM.Server","0"),e.properties.setProperty("Ice.Default.EncodingVersion","1.0"),j.initialize(e)}getProxyString(){const e=n.Z.server.wbServer;let t=e.split(":")[0],i=e.split(":")[1];if(i&&i.indexOf("sig")>-1){let e=parseInt(i.split("/sig/")[0]),n="/sig/"+i.split("/sig/")[1];this._proxyString=`WhiteBoardServer:wss -r ${n} -h ${t} -p ${e}`}}createConnection(e){console.crlog("[BoardV2] Server createConnection..");const t=new Promise(((t,n)=>{this.getProxyString(),this._ic=this._initializationData(),console.crlog(`[BoardV2] ServerProxy: ${this._proxyString}`),this._proxy=this._ic.stringToProxy(this._proxyString),WhiteBoard.WhiteBoardCtrl2_V4Prx.checkedCast(this._proxy).then((i=>{this.serverPrx=i,this._ic.createObjectAdapter("").then((i=>{this._adapter=i,i.add(new e,this._ic.stringToIdentity("WhiteBoardClient")),i.activate();const r=this.serverPrx.ice_getCachedConnection();return null!=r?(this._connection=r,r.setAdapter(i),this.isConnected=!0,t()):(console.crlog("[BoardV2] Server whiteBoard connection, ice_getCachedConnection is null!"),n(window.__Rtc.CRCONFERR.Parse()))})).exception((e=>(console.crlog(`[BoardV2] Server createObjectAdapter fail! ${e.toString()}`),n(window.__Rtc.CRCONFERR.Parse(e)))))})).exception((e=>(console.crlog(`[BoardV2] Server checkedCast fail! ${e.toString()}`),n(window.__Rtc.CRCONFERR.Parse(e)))))}));return t}destroyConnect(){return new Promise(((e,t)=>{console.crlog("[BoardV2] Server destroyConnect..."),this._ic&&this._ic.destroy&&this._ic.destroy().then((()=>(this._initData(),e())))}))}},H=$;const q=new class{constructor(){}handlers={};addEventListener(e,t){e in this.handlers||(this.handlers[e]=[]),this.handlers[e].push(t)}dispatchEvent(e,...t){if(!(e in this.handlers))return new Error("未注册该事件");this.handlers[e].forEach((e=>{try{e(...t)}catch(e){console.error(e)}}))}removeEventListener(e,t){if(!(e in this.handlers))return new Error("无效事件");if(t){const n=this.handlers[e].findIndex((e=>e===t));if(void 0===n)return new Error("无该绑定事件");this.handlers[e].splice(n,1),0===this.handlers[e].length&&delete this.handlers[e]}else delete this.handlers[e]}},W=window.Ice;const K=new class{constructor(){this.serverPrx=null,this.sessionID="",this.heartBeatTimer=-1,this.initCallback(),this.noLog=["appendShapeDat","notifyAppendShapeDat","notifyCurrentPos","setCurrentPos"]}initCallback(){const e=this;this.IceCallback=W.Class(WhiteBoard.WhiteBoardCtrl2_V4,{sendCmd_async(...t){(null==e.noLog||!e.noLog.includes(t[2]))&&console.crlog(`[BoardV2] Ice Notify: ${t[2]}, ${t[3]}`),t[0].ice_response("",[]),q.dispatchEvent(t[2],JSON.parse(t[3]),t[4])}})}sendCmd(e,t={}){return new Promise(((n,i)=>{if(!this.serverPrx)return i({errCode:202,errDesc:"网络错误"});"login"!=e&&null==t.sessionID&&this.sessionID&&(t.sessionID=this.sessionID),(null==this.noLog||!this.noLog.includes(e))&&console.crlog(`[BoardV2] Ice request: ${e} - ${JSON.stringify(t)}`),this.serverPrx.sendCmd("WhiteBoardCtrl2",e,JSON.stringify(t),null,null,null).then((t=>((null==this.noLog||!this.noLog.includes(e))&&console.crlog(`[BoardV2] Ice request: ${e} - success!`),n(t)))).exception((t=>((null==this.noLog||!this.noLog.includes(e))&&console.crlog(`[BoardV2] Ice request: ${e} - fail! ${t.toString()}`),i(t))))}))}login(e,t){return new Promise(((n,i)=>{const r=()=>{this.sendCmd("login",{confId:e,opId:t}).then((e=>{const t=JSON.parse(e).rslt;return this.sessionID=t.sessionId,console.crlog(`[BoardV2] SessionID:${this.sessionID}`),console.crlog("[BoardV2] Ice start to keep heartbeat..."),this.heartBeat(),clearInterval(this.heartBeatTimer),this.heartBeatTimer=setInterval((()=>{this.heartBeat()}),6e4),n(t.descs)})).catch((e=>i(window.__Rtc.CRCONFERR.Parse(e))))},o=()=>{H.createConnection(this.IceCallback).then((()=>{this.serverPrx=H.serverPrx,r()})).catch((e=>(console.crlog(`[BoardV2] Server create connect fail! ${e}`),i(window.__Rtc.CRCONFERR.Parse(e)))))};H.isConnected?this.logout().then((()=>{o()})):o()}))}logout(){return new Promise(((e,t)=>{this.sendCmd("logout").then((()=>{H.destroyConnect().then((()=>(this.serverPrx=null,console.crlog("[BoardV2] Ice stop heartbeat..."),clearInterval(this.heartBeatTimer),e())))})).catch((e=>t(window.__Rtc.CRCONFERR.Parse(e))))}))}heartBeat(){return new Promise(((e,t)=>{this.sendCmd("heartBeat").then((()=>e())).catch((e=>(console.crlog("[BoardV2] Heartbeat fail..."),console.crlog("[BoardV2] Ice stop heartbeat..."),clearInterval(this.heartBeatTimer),CRVideo.destroyMeetingConnect(),CRVideo_NotifyNetworkDelay.target("超时"),CRVideo_NetStateChanged.target(0),console.crlog(`[BoardV2] CRVideo_MeetingDropped.target(${CRVideo_ERR_DEF.SOCKETEXCEPTION})`),CRVideo_MeetingDropped.target(CRVideo_ERR_DEF.SOCKETEXCEPTION),t(window.__Rtc.CRCONFERR.Parse(e)))))}))}create(e){return new Promise(((t,n)=>{this.sendCmd("create",{wb:e}).then((()=>t(e))).catch((e=>n(window.__Rtc.CRCONFERR.Parse(e))))}))}delete(e){return new Promise(((t,n)=>{this.sendCmd("delete",{wId:e}).then((()=>t())).catch((e=>n(window.__Rtc.CRCONFERR.Parse(e))))}))}queryAllBoardList(){return new Promise(((e,t)=>{this.sendCmd("queryAllBoardList").then((t=>e(t))).catch((e=>t(window.__Rtc.CRCONFERR.Parse(e))))}))}setExtInfo(e,t){return new Promise(((n,i)=>{this.sendCmd("setExtInfo",{wId:e,extInfo:t}).then((()=>n())).catch((e=>i(window.__Rtc.CRCONFERR.Parse(e))))}))}setCurrentWB(e){return new Promise(((t,n)=>{this.sendCmd("setCurrentWB",{wId:e}).then((()=>t())).catch((e=>n(window.__Rtc.CRCONFERR.Parse(e))))}))}queryShapeByIds(e,t){return new Promise(((n,i)=>{this.sendCmd("queryShapeByIds",{wId:e,pageIds:t}).then((e=>n(JSON.parse(e).rslt))).catch((e=>i(window.__Rtc.CRCONFERR.Parse(e))))}))}setScale(e,t){return new Promise(((n,i)=>{this.sendCmd("setScale",{wId:e,scale:t}).then((()=>n())).catch((e=>i(window.__Rtc.CRCONFERR.Parse(e))))}))}setCurrentPos(e,t,n){return new Promise(((i,r)=>{this.sendCmd("setCurrentPos",{wId:e,xPos:t,yPos:n}).then((e=>i())).catch((e=>r(window.__Rtc.CRCONFERR.Parse(e))))}))}addShape(e,t,n){return new Promise(((i,r)=>{this.sendCmd("addShape",{wId:e,page:t,shape:n}).then((()=>i())).catch((e=>r(window.__Rtc.CRCONFERR.Parse(e))))}))}appendShapeDat(e,t,n,i){return new Promise(((r,o)=>{this.sendCmd("appendShapeDat",{wId:e,page:t,sId:n,dat:i}).then((()=>r())).catch((e=>o(window.__Rtc.CRCONFERR.Parse(e))))}))}delShape(e,t){return new Promise(((n,i)=>{this.sendCmd("delShape",{wId:e,shapeIdsMap:t}).then((()=>n())).catch((e=>i(window.__Rtc.CRCONFERR.Parse(e))))}))}moveShape(e,t,n){return new Promise(((i,r)=>{this.sendCmd("moveShape",{wId:e,page:t,sPos:n}).then((e=>i())).catch((e=>r(window.__Rtc.CRCONFERR.Parse(e))))}))}setPageDat(e,t){return new Promise(((n,i)=>{if(!this.serverPrx)return i({errCode:202,errDesc:"网络错误"});const r=this.sessionID,o=new whiteBoard.WBPageData;for(var s in wbDesc)o[s]=t[s];console.crlog(`[BoardV2] Ice request: setPageDat - ${JSON.stringify(o)},${r}`),this.serverPrx.setPageDat(e,o,r).then((e=>(console.crlog("[BoardV2] Ice request: setPageDat - success!"),console.log("=================",e),n()))).exception((e=>(console.crlog(`[BoardV2] Ice request: setPageDat - fail! ${e.toString()}`),i(window.__Rtc.CRCONFERR.Parse(e)))))}))}modifyShape(e,t,n){return new Promise(((i,r)=>{if(!this.serverPrx)return r({errCode:202,errDesc:"网络错误"});const o=this.sessionID,s=new whiteBoard.WBShapeData;for(var a in wbDesc)s[a]=n[a];console.crlog(`[BoardV2] Ice request: modifyShape - ${e},${t},${JSON.stringify(s)},${o}`),this.serverPrx.modifyShape(e,t,s,o).then((e=>(console.crlog("[BoardV2] Ice request: modifyShape - success!"),console.log("=================",e),i()))).exception((e=>(console.crlog(`[BoardV2] Ice request: modifyShape - fail! ${e.toString()}`),r(window.__Rtc.CRCONFERR.Parse(e)))))}))}setHotspot(e){return new Promise(((t,n)=>{if(!this.serverPrx)return n({errCode:202,errDesc:"网络错误"});const i=this.sessionID,r=new whiteBoard.WBHotspot;for(var o in wbDesc)r[o]=e[o];console.crlog(`[BoardV2] Ice request: setHotspot - ${JSON.stringify(r)},${i}`),this.serverPrx.setHotspot(r,i).then((e=>(console.crlog("[BoardV2] Ice request: setHotspot - success!"),console.log("=================",e),t()))).exception((e=>(console.crlog(`[BoardV2] Ice request: setHotspot - fail! ${e.toString()}`),n(window.__Rtc.CRCONFERR.Parse(e)))))}))}getHotspot(){return new Promise(((e,t)=>{if(!this.serverPrx)return t({errCode:202,errDesc:"网络错误"});const n=this.sessionID;console.crlog(`[BoardV2] Ice request: getHotspot - ${n}`),this.serverPrx.getHotspot(n).then((t=>(console.crlog("[BoardV2] Ice request: getHotspot - success!"),console.log("=================",t),e()))).exception((e=>(console.crlog(`[BoardV2] Ice request: getHotspot - fail! ${e.toString()}`),t(window.__Rtc.CRCONFERR.Parse(e)))))}))}};window.boardapi=K;const z=K,G=window.CRVideo,J=window.Ice;class Q{constructor(e){this.boardID=e.wId,this.owner=e.owner,this.width=e.width,this.height=e.height,this.pageCount=e.pageCount,this.pageMode=null!=e.extProperty.show_multi_page?parseInt(e.extProperty.show_multi_page):0,this.scale=e.scale,this.extInfo=e.extInfo}}class X{constructor({wId:e=J.generateUUID(),owner:t=G.userInfo.userId,width:n,height:i,wType:r=0,imgType:o=0,pageCount:s=1,xPos:a=0,yPos:c=0,scale:l=100,extInfo:d="",show_multi_page:u=0}){this.wId=e,this.owner=t,this.wType=r,this.imgType=o,this.width=n,this.height=i,this.pageCount=s,this.xPos=a,this.yPos=c,this.scale=l,this.extInfo=d,this.extProperty={show_multi_page:u}}}const Y=new class{constructor(){this.initData(),this.initIceCallback(),this.initSDKInterface()}initData(){console.crlog("[BoardV2] initData..."),this.heartBeatTimer=-1,this.wbDescList=[],this.viewList=[],this.curWB=""}initIceCallback(){this.notifyInitBoardListCallback=new G.CbProxy("CRBoard_NotifyInitBoardList"),this.notifyCreateBoardCallback=new G.CbProxy("CRBoard_NotifyCreateBoard"),this.notifyCloseBoardCallback=new G.CbProxy("CRBoard_NotifyCloseBoard"),this.notifyBoardExinfoUpdatedCallback=new G.CbProxy("CRBoard_NotifyBoardExinfoUpdated"),this.notifyCurrentBoardCallback=new G.CbProxy("CRBoard_NotifyCurrentBoard"),this.notifyBoardScaleCallback=new G.CbProxy("CRBoard_NotifyBoardScale"),q.addEventListener("notifyCreate",(e=>{null==e.wb.shapeList&&(e.wb.shapeList=[]),this.wbDescList.push(e.wb),this.notifyCreateBoardCallback.target(new Q(e.wb),e.opId)})),q.addEventListener("notifySetPageDat",(e=>{console.log("----- notifySetPageDat -----",e)})),q.addEventListener("notifyDelete",(e=>{let t=this.wbDescList.findIndex((t=>t.wId==e.wId));-1!=t&&this.wbDescList.splice(t,1),this.notifyCloseBoardCallback.target(e.wId,e.opId)})),q.addEventListener("notifyCurrentWB",(e=>{0==this.wbDescList.length?(this.curWB="",this.notifyCurrentBoardCallback.target("",e.opId)):(this.curWB=e.wId||"",this.notifyCurrentBoardCallback.target(e.wId||"",e.opId))})),q.addEventListener("notifySetExtInfo",(e=>{let t=this.wbDescList.find((t=>t.wId==e.wId));t&&(t.extInfo=e.extInfo),this.notifyBoardExinfoUpdatedCallback.target(e.wId,e.extInfo,e.opId)})),q.addEventListener("notifySetScale",(e=>{const t=this.wbDescList.find((t=>t.wId==e.wId));t&&(t.scale=e.scale,this.notifyBoardScaleCallback.target(e.wId,e.scale,e.opId))})),q.addEventListener("notifyCurrentPos",(e=>{const t=this.wbDescList.find((t=>t.wId==e.wId));t&&(t.xPos=e.xPos,t.yPos=e.yPos,e.opId!=G.userInfo.userId&&this.viewList.forEach((e=>{e._wbDesc.wId==t.wId&&e._attr.followPage&&e._refreshPos()})))})),q.addEventListener("notifyAddShape",(e=>{const t=this.wbDescList.find((t=>t.wId==e.wId));if(!t||e.opId==G.userInfo.userId)return;let n=t.shapeList.find((t=>t.pageId==e.page));n||(n={pageId:e.page,shapes:[]},t.shapeList.push(n)),null==n.shapes&&(n.shapes=[]),e.shape.attr=JSON.parse(e.shape.attr),e.shape.attr.penColor=this.decodeShapeColor(e.shape.attr.penColor),void 0!==e.shape.attr.txtBkColor&&(e.shape.attr.txtBkColor=this.decodeShapeColor(e.shape.attr.txtBkColor)),e.shape.dat=this.decodeShapeDat(e.shape.dat);const i=JSON.parse(JSON.stringify(e.shape));n.shapes.push(i),this.viewList.forEach((e=>{if(e._wbDesc.wId==t.wId){const t=e._canvasList.find((e=>e.pageID==n.pageId));e._drawShape(t,i)}}))})),q.addEventListener("notifyAppendShapeDat",(e=>{const t=this.wbDescList.find((t=>t.wId==e.wId));t&&e.opId!=G.userInfo.userId&&t.shapeList.forEach((n=>{n.pageId==e.page&&n.shapes.forEach((i=>{if(i.sId==e.sId){const r=this.decodeShapeDat(e.dat),o=i.dat,s=r;this.viewList.forEach((e=>{e._wbDesc.wId==t.wId&&e._drawAppendShapeDat(n.pageId,i,o,s)})),i.dat=[...i.dat,...r]}}))}))})),q.addEventListener("notifyMoveShape",(e=>{const t=this.wbDescList.find((t=>t.wId==e.wId));t&&(e.sPos.forEach((n=>{t.shapeList.forEach((t=>{t.pageId==e.page&&t.shapes.forEach((e=>{e.sId==n.sId&&(e.top=n.top,e.left=n.left)}))}))})),this.viewList.forEach((n=>{n._wbDesc.wId==t.wId&&n._drawAllShapes({pageID:e.page},"notifyMoveShape")})))})),q.addEventListener("notifyModifyShapeAttr",(e=>{const t=this.wbDescList.find((t=>t.wId==e.wId));t&&(t.shapeList.forEach((t=>{t.pageId==e.page&&t.shapes.forEach((t=>{if(t.sId==e.sId){const n=JSON.parse(e.attr);t.attr=n,t.attr.penColor=this.decodeShapeColor(n.penColor),void 0!==n.txtBkColor&&(t.attr.txtBkColor=this.decodeShapeColor(n.txtBkColor))}}))})),this.viewList.forEach((n=>{n._wbDesc.wId==t.wId&&n._drawAllShapes({pageID:e.page},"notifyModifyShapeAttr")})))})),q.addEventListener("notifyDelShape",(e=>{const t=this.wbDescList.find((t=>t.wId==e.wId));if(t){for(let n in e.shapeIdsMap)e.shapeIdsMap[n].forEach((e=>{t.shapeList.forEach((t=>{if(t.pageId==n){let n=t.shapes.findIndex((t=>t.sId==e));n>-1&&t.shapes.splice(n,1)}}))}));this.viewList.forEach((n=>{if(n._wbDesc.wId==t.wId){n._drawAllShapes({pageID:e.page},"notifyDelShape");let i=e.opId!=G.userInfo.userId;for(let e=0;e<t.shapeList.length;e++)t.shapeList[e].shapes.length>0&&(i=!1);i&&(n._revocableShapesArr=[],n._changeRedoUndoState())}}))}})),q.addEventListener("notifySetHotspot",(e=>{console.log("----- notifySetHotspot -----",e)}))}initSDKInterface(){this.createWhiteBoard=(e,t,n,i,r)=>new Promise(((o,s)=>{if(console.crlog(`[BoardV2] CRBoard_CreateWhiteBoard(${e},${t},${n},${i},${r})`),this.wbDescList.length>=10)return s({errCode:1,errDesc:"房间内白板数量超过限制"});if(n>300)return s({errCode:1,errDesc:"白板页数超过限制"});let a=new X({width:e,height:t,pageCount:n,extInfo:r,show_multi_page:1==i?1:0});z.create(a).then((e=>o(new Q(e)))).catch((e=>s({errCode:1,errDesc:e.toString()})))})),this.closeWhiteBoard=e=>new Promise(((t,n)=>{console.crlog(`[BoardV2] CRBoard_CloseBoard(${e})`),z.delete(e).then((()=>t())).catch((e=>n({errCode:1,errDesc:e.toString()})))})),this.getAllBoard=()=>{let e=[];return this.wbDescList.forEach((t=>{e.push(new Q(t))})),e},this.updateBoardExInfo=(e,t)=>new Promise(((n,i)=>{console.crlog(`[BoardV2] CRBoard_UpdateBoardExInfo(${e},${t})`),z.setExtInfo(e,t).then((()=>n())).catch((e=>i({errCode:1,errDesc:e.toString()})))})),this.getBoardInfo=e=>{const t=this.wbDescList.find((t=>t.wId==e));return t?new Q(t):""},this.getCurrentBoard=()=>this.curWB,this.setCurrentBoard=e=>new Promise(((t,n)=>{console.crlog(`[BoardV2] CRBoard_SetCurrentBoard(${e})`),z.setCurrentWB(e).then((()=>t())).catch((e=>n({errCode:1,errDesc:e.toString()})))}))}init(){return new Promise(((e,t)=>{console.crlog("[BoardV2] Init whiteBoard v2...");const n=G.meetingID,i=G.userInfo.userId;if(!n||8!==n.toString().length||null==i)return t({errCode:5,errDesc:"参数错误"});this.initData(),z.login(n,i).then((t=>{this.wbDescList=t.wbDescList||[],console.log(JSON.stringify(t.wbDescList)),this.curWB=t.wbDescList&&t.wbDescList.length>0?t.curWB:"",this.wbDescList.find((e=>e.wId==this.curWB))||(this.curWB="");let n=[];return this.wbDescList.forEach((e=>{if(e.wId==this.curWB){let t=[];for(let n=0;n<e.pageCount;n++)t.push(n);z.queryShapeByIds(this.curWB,t).then((t=>{this.handleShapes(e,t),this.viewList.forEach((t=>{t._wbDesc.wId==e.wId&&t._drawAllShapes({},"queryShapeByIds")}))}))}})),this.wbDescList.forEach((e=>{if(n.push(new Q(e)),e.wId!=this.curWB){let t=[];for(let n=0;n<e.pageCount;n++)t.push(n);z.queryShapeByIds(e.wId,t).then((t=>{this.handleShapes(e,t)}))}})),this.notifyInitBoardListCallback.target(n),this.notifyCurrentBoardCallback.target(this.curWB),e()}),(e=>t(window.__Rtc.CRCONFERR.Parse(e))))}))}handleShapes(e,t){console.crlog("[BoardV2] Handle shapes after init..."),t.forEach((e=>{null==e.shapes&&(e.shapes=[]),e.shapes.forEach((e=>{e.attr=JSON.parse(e.attr),e.attr.penColor=this.decodeShapeColor(e.attr.penColor),void 0!==e.attr.txtBkColor&&(e.attr.txtBkColor=this.decodeShapeColor(e.attr.txtBkColor)),e.dat=this.decodeShapeDat(e.dat)}));for(var t=0;t<e.shapes.length-1;t++)for(var n=0;n<e.shapes.length-1-t;n++)if(e.shapes[n].order>e.shapes[n+1].order){var i=e.shapes[n];e.shapes[n]=e.shapes[n+1],e.shapes[n+1]=i}})),e.shapeList=t}uninit(){console.crlog("[BoardV2] Uninit()"),z.logout().then((()=>{this.initData()}))}decodeShapeDat(t){const n=e.Z.base64ToUint8Array(t),i=[],r=[];for(var o=0;o<n.length;o+=2)r[o]=n[o],r[o+1]=n[o+1],n[o]>=240&&(r[o]=n[o]-256,r[o+1]=n[o+1]+256*(n[o]-256));for(o=0;o<r.length;o+=4)i.push({x:r[o]<<8|r[o+1],y:r[o+2]<<8|r[o+3]});return i}encodeShapeDat(t){const n=new ArrayBuffer(4*t.length),i=new Uint8Array(n);let r=[];for(var o=0;o<t.length;o++)r.push(t[o].x>>8),r.push(255&t[o].x),r.push(t[o].y>>8),r.push(255&t[o].y);return i.set(r),e.Z.uint8ArrayToBase64(i)}decodeShapeColor(e){return`rgba(${e>>>16&255},${e>>>8&255},${255&e},${((e>>>24)/255).toFixed(2)})`}encodeShapeColor(e){const t=+e.split("(")[1].split(",")[0],n=+e.split(",")[1],i=+e.split(",")[2];return 255*e.split(",")[3].split(")")[0]<<24|t<<16|n<<8|i}addShape(e,t,n){const i=JSON.parse(JSON.stringify(n));i.dat=this.encodeShapeDat(i.dat),i.attr.penColor=this.encodeShapeColor(i.attr.penColor),i.attr.txtBkColor&&(i.attr.txtBkColor=this.encodeShapeColor(i.attr.txtBkColor)),z.addShape(e,t,i).then((()=>{})).catch((e=>{console.error(e)}))}appendShapeDat(e,t,n,i){const r=this.encodeShapeDat(i);z.appendShapeDat(e,t,n,r).then((()=>{})).catch((e=>{console.error(e)}))}delShape(e,t,n){const i=new Object;i[t]=n,z.delShape(e,i).then((()=>{})).catch((e=>{console.error(e)}))}};window.__Rtc.CRBoardV2=Y;const Z=Y;var ee,te;window.__Rtc._proxy=F.Z,CRVideo.APPIDMode=1,CRVideo.changyiweb=!1,CRVideo.LOCAL_KEY="CRwebRTC",CRVideo.KEEPLIVE_COMMIT=!1,CRVideo.KEEPALIVE_TIMER=-1,CRVideo.REFRESH_SESSION_TIMER=-1,CRVideo.userInfo={},CRVideo.allMemberInfo=[],CRVideo.isExitmeet=!1,CRVideo.isMeeting=!1,CRVideo.isWebRTC=!0,CRVideo.msType={localAudio:11,localVideo:12,localScreen:13,localMediaVideo:14,localMediaAudio:15,remoteVideo:22,remoteScreen:23,remoteMedia:24},CRVideo.firstEnterStatus=!1,CRVideo.meetingExiting=!1,CRVideo.callserverExiting=!1,window.enmeet={config:{controlSharkTime:3e4,refreshSessionTime:1e4}},function(e){!function(t){var n={findUserInfo:function(t,n){return e.allMemberInfo.find((function(e){return e[t]==n}))}};t.findUserInfo=n.findUserInfo,n.controlSharkHand=function(){__Rtc.CR__KeepAlive(1,(new Date).getTime()),clearTimeout(e.KEEPALIVE_TIMER),e.KEEPALIVE_TIMER=setTimeout(n.controlSharkHand,enmeet.config.controlSharkTime)},t.controlSharkHand=n.controlSharkHand,n.refreshSessionSharkHand=function(){__Rtc.CR__RefreshSession((new Date).getTime()),clearTimeout(e.REFRESH_SESSION_TIMER),e.REFRESH_SESSION_TIMER=setTimeout(n.refreshSessionSharkHand,enmeet.config.refreshSessionTime)},t.refreshSessionSharkHand=n.refreshSessionSharkHand,n.destroyMeetingConnect=function(){console.crlog("[SDK] Websockt destroy meeting connect..."),e.communicatorIc&&e.communicatorIc.destroy(),e.communicatorIc=null,console.crlog("[SDK] CRVideo.communicatorIc && CRVideo.communicatorIc.destroy();CRVideo.communicatorIc = null")},t.destroyMeetingConnect=n.destroyMeetingConnect}(e)}(CRVideo),window.findMemberInfo=function(e){var t=!1;return CRVideo.allMemberInfo.forEach((function(n){n[e.use]==e.value&&(t=n[e.want])})),t},CRVideo.findMemberInfo=findMemberInfo,CRVideo.initweb=function(){__Rtc.CR__Init("js",{protocol:"wss",CheckFlash:!1})},__Rtc.CR_InitRslt.callback=function(e,t){0==e?CRVideo.loginWebMeeting():console.crlog("[SDK] CR_InitRslt.callback fail!")},CRVideo.loginWebMeeting=function(){var e=CRVideo.crmtStr,t={};t.nickname=CRVideo.userInfo.nickname||"",t.userId=CRVideo.userInfo.userId||"",CRVideo.KEEPLIVE_COMMIT=!0,CRVideo.isExitmeet=!1,F.Z.loginControl(e,t)},__Rtc.CR__LoginRslt.callback=function(e,t,i){CRVideo.reEnterMeetTimes=0;var r=null==t||""==t?"":" ----errDesc: \n"+t;if(console.crlog("[SDK] Login Access CallBack, errCode: "+e+r),CRVideo_UploadingLog(),"3"==e||"1"==e)console.crlog("[SDK] 登录access未知错误: "+t);else if("800"==e)console.crlog("[SDK] 会议不存在或已结束!");else if("801"==e)console.crlog("[SDK] 房间密码不正确!");else if("802"==e)console.crlog("[SDK] 房间终端数量已满（购买的license不够)!");else if("803"==e)console.crlog("[SDK] 分配房间资源失败!");else if("804"==e)console.crlog("[SDK] 房间已加锁!");else if("805"==e)console.crlog("[SDK] 余额不足!");else if("806"==e)console.crlog("[SDK] 业务权限未开启!");else if("807"==e)console.crlog("[SDK] 重复进入了，该用户当前已在房间内！");else if("0"==e){CRVideo.isMeeting=!0,CRVideo.meetingID=i.meetID,null!=F.Z.crmt.ACNT[4]&&8==F.Z.crmt.ACNT[4]&&window.__Rtc.CRRTCConf.setAssistantActor(i.termId,!0),CRVideo.firstEnterStatus=!0,setTimeout((()=>{CRVideo.firstEnterStatus=!1}),3e3),window.__Rtc.CRRTCVideo.mainVideoTermID=i.mainVideoTermID||0,window.__Rtc.CRRTCVideo.windowMode=i.windowMode.value,window.__Rtc.CRRTCBoard.lastElemValue=++i.lastElemValue,window.__Rtc.CRRTCBoard.lastTabValue=++i.lastTabValue,window.__Rtc.CRRTCConf.curOption=i.option,window.__Rtc.CRRTCConf.shareState=i.confInfo.share_cfg?JSON.parse(i.confInfo.share_cfg):{state:0,shareID:0},window.__Rtc.CRRTCLocalVideo.selfieSegmentationPermission="1"===i.confInfo.ccfg_portrait_segmentation,window.__Rtc.CRRTCBoard.wbDescibes=i.wbDescibes?i.wbDescibes:[],window.__Rtc.CRRTCRecord.svrRecordStatus=null!=i.confInfo.srv_record_state?+i.confInfo.srv_record_state:0,window.__Rtc.CRRTCRecord.MixersList=i.confInfo.srv_record_cfg?JSON.parse(i.confInfo.srv_record_cfg):[],window.__Rtc.CRRTCVideo.vwalllo=null!=i.confInfo.vwalllo?+i.confInfo.vwalllo:0;for(let e=0;e<i.activeMembers.length;e++)CRVideo.allMemberInfo.push(i.activeMembers[e]);function e(){CRVideo.stunServerAddr||(CRVideo.webServerAddr.includes(`${window.__CRName}.com`)&&!CRVideo.webServerAddr.includes(`crlab.${window.__CRName}.com`)?CRVideo.stunServerAddr="47.104.128.57:30000":CRVideo.stunServerAddr=`${CRVideo.webServerAddr}:2699`);let e=[];e=1==CRVideo.MSProtocol?["turn:"+CRVideo.stunServerAddr+"?transport=udp"]:2==CRVideo.MSProtocol?["turn:"+CRVideo.stunServerAddr+"?transport=tcp"]:["turn:"+CRVideo.stunServerAddr+"?transport=udp","turn:"+CRVideo.stunServerAddr+"?transport=tcp"];const t=null!=__Rtc.postCmd.CallServerInfo?__Rtc.postCmd.CallServerInfo.RtcCfgVer:0;if(CRVideo.rtcCfg={iceServers:[{username:1==t?"conference":`${window.__CRName}`,credential:1==t?"Nsyhl9t":`${window.__CRName}`,urls:e}],iceTransportPolicy:"relay"},i.confInfo.ccfg_rtc_cfg){const e=JSON.parse(i.confInfo.ccfg_rtc_cfg);CRVideo.rtcCfg.iceServers[0].username=e.username,CRVideo.rtcCfg.iceServers[0].credential=e.credential}}function t(e){CRVideo.rtcCfg.iceServers.forEach((t=>{let n=t.urls,i=[];t.urls=n.map((t=>{let n=String(CRVideo.stunServerAddr),r=String(e);i.push(t.replace(n,r))})),console.crlog(`[SDK] New stun server urls: ${JSON.stringify(i)}`),t.urls=i}))}CRVideo.userInfo.detail=i.myDetail,CRVideo.userInfo.termId=i.termId,CRVideo.userInfo.nickname=i.nickname,CRVideo.userInfo.userId=i.userId||CRVideo.userInfo.userId,i.myDetail.userId=i.userId,n.Z.userInfo.setUserInfo(CRVideo.userInfo.nickname,CRVideo.userInfo.userId),e(),F.Z.crmt.STUNSVR?t(F.Z.crmt.STUNSVR):F.Z.crmt.STUNSVRPORT?t(`${CRVideo.accessSvr}:${F.Z.crmt.STUNSVRPORT}`):t(`${CRVideo.accessSvr}:${CRVideo.stunServerAddr.split(":")[CRVideo.stunServerAddr.split(":").length-1]}`);const r=_.cloneDeep(CRVideo.rtcCfg);r.iceServers[0].credential="******",r.iceServers[0].username="******",console.crlog(`[SDK] New webrtc RTCPeerConnection config: ${JSON.stringify(r)}`),console.crlog(`[SDK] ${CRVideo.sdkInfo}`),console.crlog(`[SDK] Browser Info: ${navigator.userAgent}`),setTimeout((()=>{CRVideo.callServerLoginOAuth&&console.crlog(`[Login] LoginOAuth: ${CRVideo.callServerLoginOAuth.crPswd}`)}),100),console.crlog(`[SDK] CRVideo.isWebRTC:${CRVideo.isWebRTC}`),CRVideo.meetingInfo=i,CRVideo.isWebRTC&&(console.crlog(`[SDK] RTC Codecs: ${window.__Rtc.rtc_codecs}`),console.crlog(`[SDK] Video input devices: ${JSON.stringify(__Rtc.CRRTCLocalVideo.videoInput)}`),__Rtc.CRRTCAudio.uploadAudioDevicesStatus(),__Rtc.CRRTCLocalVideo.uploadVideoDeviceStatus(),__Rtc.CRRTCLocalVideo.uploadAllCamInfo(),CRVideo.allMemberInfo.forEach((function(e){e.termId==i.termId?(e.isSelf=!0,e.userId=e.userId||CRVideo.userInfo.userId,__Rtc.CRRTCConf.rights=Array.from(e.rights)):e.isSelf=!1,2!=e.actor&&3!=e.actor&&10!=e.actor&&11!=e.actor||(window.__Rtc.CRRTCConf.curActorID=e.termId),1!=e.actor&&3!=e.actor&&9!=e.actor&&11!=e.actor||(window.__Rtc.CRRTCConf.curPresenterID=e.termId),e.userId=null==e.userId?Ice.generateUUID():e.userId,e.audioStatus=e.audioStatus.name,e.videoStatus=e.videoStatus.name,"family"==e.privRole?CRVideo.privRoleFamily=e.userId:"prisoner"==e.privRole&&(CRVideo.privRolePrison=e.userId)}))),CRVideo.controlSharkHand(),CRVideo.refreshSessionSharkHand(),console.crlog(`[SDK] Enter meeting success, meetID:${CRVideo.meetingID}`)}else console.crlog(`[SDK][Error] Enter meeting fail! Error:${e}`);CRVideo_UploadingLog();try{0==e&&(__Rtc.CRICEAPI.GetScreenShareInfo(),__Rtc.CRICEAPI.GetMediaInfo(),__Rtc.CRRTCSync.initSync(i),__Rtc.CRRTCCloudRecord.initRecord(i),__Rtc.CRRTCPrism.meetInfoUpload&&__Rtc.CRRTCPrism.uploadEnterMeetInfo()),"MeetSDK"==CRVideo.SDKKey?(console.crlog(`[SDK] MeetSDK.enterMeetingRslt.target(${e}, ${CRVideo.userInfo.userId}, ${CRVideo.userInfo.nickname}, ${CRVideo.enterMeetingCookie})`),g.Z.enterMeetingRslt.target(e,CRVideo.userInfo.userId,CRVideo.userInfo.nickname,CRVideo.enterMeetingCookie)):(CRVideo_EnterMeetingRslt.target(e,CRVideo.enterMeetingCookie),console.crlog(`[SDK] CRVideo_EnterMeetingRslt.target(${e},${CRVideo.enterMeetingCookie})`)),0==e&&(__Rtc.CRRTCBoard.initBoards(),Z.init()),CRVideo_UploadingLog()}catch(e){console.error(e)}window.loginData=i},__Rtc.CR__RefreshSessionRslt.callback=function(e,t,n){let i="0"==e?"success":"fail",r=null==t?"":t,o=(new Date).getTime()-n;"success"==i?console.crlog(`[SDK] RefreshSessionRslt: ${i} ${r} delay:${o}ms`):console.crlog(`[SDK] RefreshSessionRslt: ${i} ${r}`),0==e&&-1!=CRVideo.REFRESH_SESSION_TIMER?CRVideo_NotifyNetworkDelay.target(o):-1!=CRVideo.REFRESH_SESSION_TIMER&&(clearTimeout(CRVideo.REFRESH_SESSION_TIMER),CRVideo.REFRESH_SESSION_TIMER=-1,-1==CRVideo.KEEPALIVE_TIMER||CRVideo.isExitmeet||(console.crlog("[SDK] RefreshSession fail, meeting dropped!!!"),console.crlog(`[SDK] CRVideo_MeetingDropped.target(${CRVideo_ERR_DEF.SOCKETEXCEPTION})`),CRVideo.destroyMeetingConnect(),CRVideo_NotifyNetworkDelay.target("超时"),CRVideo_NetStateChanged.target(0),CRVideo_MeetingDropped.target(CRVideo_ERR_DEF.SOCKETEXCEPTION)))},__Rtc.CR__KeepAliveRslt.callback=function(e,t,n){let i="0"==e?"success":"fail",r=null==t?"":t,o=(new Date).getTime()-n;"success"==i?console.crlog(`[SDK] KeepAliveRslt: ${i} ${r} delay:${o}ms`):console.crlog(`[SDK] KeepAliveRslt: ${i} ${r}`),0==e&&-1!=CRVideo.KEEPALIVE_TIMER?CRVideo_NotifyNetworkDelay.target(o):-1!=CRVideo.KEEPALIVE_TIMER&&(clearTimeout(CRVideo.KEEPALIVE_TIMER),CRVideo.KEEPALIVE_TIMER=-1,-1==CRVideo.REFRESH_SESSION_TIMER||CRVideo.isExitmeet||(console.crlog("[SDK] KeepAlive fail, meeting dropped!!!"),console.crlog(`[SDK] CRVideo_MeetingDropped.target(${CRVideo_ERR_DEF.SOCKETEXCEPTION})`),CRVideo.destroyMeetingConnect(),CRVideo_NotifyNetworkDelay.target("超时"),CRVideo_NetStateChanged.target(0),CRVideo_MeetingDropped.target(CRVideo_ERR_DEF.SOCKETEXCEPTION)))},window.CRVideo_Uninit=function(){console.crlog("[SDK] CRVideo_Uninit()"),CRVideo.loginAuthFlag=0,CRVideo.webLoginOAuth={},__Rtc.CR__UnInit(),setTimeout((()=>{CRVideo.destroyLogConnect(),clearTimeout(CRVideo.logReportTimer)}),5e3)},ee="hidden"in document?"hidden":"webkitHidden"in document?"webkitHidden":"mozHidden"in document?"mozHidden":null,te=ee.replace(/hidden/i,"visibilitychange"),document.addEventListener(te,(function(){document[ee]||(console.crlog("[SDK] CRVideo.KEEPALIVE_TIMER-----"+CRVideo.KEEPALIVE_TIMER),console.crlog("[SDK] CRVideo.REFRESH_SESSION_TIMER-----"+CRVideo.REFRESH_SESSION_TIMER),CRVideo.KEEPLIVE_COMMIT&&(-1!=CRVideo.KEEPALIVE_TIMER&&CRVideo.controlSharkHand(),-1!=CRVideo.REFRESH_SESSION_TIMER&&CRVideo.refreshSessionSharkHand(),CRVideo_ShakeHand()))})),CRVideo.updateDevicesList=e=>{__Rtc.CRRTCAudio.audioInput=[],__Rtc.CRRTCAudio.audioOutput=[],__Rtc.CRRTCLocalVideo.videoInput=[];let t=1,n=1,i=1;for(var r=0;r<e.length;r++){var o=e[r];if("audioinput"==o.kind){var s={};s.deviceId=o.deviceId,s.name=o.label||"麦克风 - 默认",s.kind=o.kind,s.id=t++,__Rtc.CRRTCAudio.audioInput.push(s)}else if("audiooutput"==o.kind){var a={};a.deviceId=o.deviceId,a.name=o.label||"扬声器 - 默认",a.kind=o.kind,a.id=n++,__Rtc.CRRTCAudio.audioOutput.push(a)}else if("videoinput"==o.kind){var c={};c.deviceId=o.deviceId||i,c.name=o.label||"摄像头 - 默认",c.kind=o.kind,c.id=i++,c.disabled=!1,c.locAttr={},c.stream=null,c.ssVal=0,c.connect=new _ConnectItemClass(c.id,__Rtc.CRRTCLocalVideo.lastLocalVideoMSID++),c.connect2=new _ConnectItemClass(c.id+1e4,__Rtc.CRRTCLocalVideo.lastLocalVideoMSID++),__Rtc.CRRTCLocalVideo.videoInput.push(c)}}__Rtc.CRBrowser.curBrowserCfg.isMobile&&__Rtc.CRRTCLocalVideo.videoInput.length>0&&(__Rtc.CRRTCLocalVideo.videoInput=[],__Rtc.CRRTCLocalVideo.videoInput.push({facingMode:"user",name:"前置镜头",kind:"video",id:1,disabled:!1,locAttr:{},stream:null,ssVal:0,connect:new _ConnectItemClass(1,__Rtc.CRRTCLocalVideo.lastLocalVideoMSID++),connect2:new _ConnectItemClass(10001,__Rtc.CRRTCLocalVideo.lastLocalVideoMSID++)}),__Rtc.CRRTCLocalVideo.videoInput.push({facingMode:"environment",name:"后置镜头",kind:"video",id:2,disabled:!1,locAttr:{},stream:null,ssVal:0,connect:new _ConnectItemClass(2,__Rtc.CRRTCLocalVideo.lastLocalVideoMSID++),connect2:new _ConnectItemClass(10002,__Rtc.CRRTCLocalVideo.lastLocalVideoMSID++)})),"Firefox"==__Rtc.CRBrowser.name?__Rtc.CRRTCAudio.audioOutput.push({name:"Firefox暂不支持切换扬声器",deviceId:""}):"Mac"==__Rtc.CRBrowser.curBrowserCfg.platform&&"Safari"==__Rtc.CRBrowser.curBrowserCfg.name&&__Rtc.CRRTCAudio.audioOutput.push({name:"Safari暂不支持切换扬声器",deviceId:""})},__Rtc.CR__VideoAllocRawExt2.callback=function(e,t,n,i){const r={VCT_CAMERA:"video",VCT_SCREEN:"screen",VCT_FILM:"media"}[t.contentType.name];if("video"==r)__Rtc.CRRTCVideo.videoAllocRawExt2(e,t,n,i);else{if("screen"==r)return void __Rtc.CRRTCScreen.videoAllocRawExt2(e,t,n,i);"media"==r&&__Rtc.CRRTCMedia.videoAllocRawExt2(e,t,n,i)}},__Rtc.CR__ModifyPeerAddrExt.callback=function(e,t,n){console.crlog("[SDK] CR__ModifyPeerAddrExt: MSID-----"+t),enmeet.videoAnswerBrowserParse=function(e,t){const n=__Rtc.baseOffer.sdp.match(/a=extmap:(.*?)http:\/\/www.webrtc.org\/experiments\/rtp-hdrext\/abs-send-time/)?`${__Rtc.baseOffer.sdp.match(/a=extmap:(.*?)http:\/\/www.webrtc.org\/experiments\/rtp-hdrext\/abs-send-time/)[0]}\r\n`:"",i=__Rtc.baseOffer.sdp.match(/a=extmap:(.*?)urn:3gpp:video-orientation/)?`${__Rtc.baseOffer.sdp.match(/a=extmap:(.*?)urn:3gpp:video-orientation/)[0]}\r\n`:"";t.sdp=t.sdp.replace("a=extmap:5 http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01\r\n",`${n}${i}`);const r=t.sdp.match(/c=IN IP4(.*?)\r\n/)?t.sdp.match(/c=IN IP4(.*?)\r\n/)[0]:"",o=t.sdp.match(/b=AS:(.*?)\r\n/)?t.sdp.match(/b=AS:(.*?)\r\n/)[0]:"";r&&t.sdp.split(r).length>2&&(t.sdp=t.sdp.replace(`${r}${o}`,"")),t.sdp=t.sdp.replace(";profile-level-id=42001f",""),"local"==e||(t.sdp=t.sdp.replace("a=sendrecv","a=sendonly"))};var i={type:"answer",sdp:n.get("sdp")},r=t.toString().substr(0,2);if(r==CRVideo.msType.localAudio)__Rtc.CRRTCAudio.modifyPeerAddrExt(i,+t);else{if(r==CRVideo.msType.localVideo)return void __Rtc.CRRTCVideo.modifyPeerAddrExt("localVideo",e,t,n);if(r==CRVideo.msType.remoteVideo)return void __Rtc.CRRTCVideo.modifyPeerAddrExt("remoteVideo",e,t,n);if(r==CRVideo.msType.localScreen)return void __Rtc.CRRTCScreen.modifyPeerAddrExt("localScreen",e,t,n);if(r==CRVideo.msType.remoteScreen)return void __Rtc.CRRTCScreen.modifyPeerAddrExt("remoteScreen",e,t,n);if(r==CRVideo.msType.remoteMedia)return void __Rtc.CRRTCMedia.modifyPeerAddrExt("remoteMedia",e,t,n);if(r==CRVideo.msType.localMediaVideo)return void __Rtc.CRRTCMedia.modifyPeerAddrExt("localMediaVideo",e,t,n);if(r==CRVideo.msType.localMediaAudio)return void __Rtc.CRRTCMedia.modifyPeerAddrExt("localMediaAudio",e,t,n)}},window.videoResolutionReport=function(e,t,n,i){if(CRVideo.isMeeting){if("screen"==t){const t=__Rtc.CRRTCScreen.localScreenStream.getTracks()[0].getSettings();i=t.height?t.height:1080,n=t.widht?t.widht:1920,e=__Rtc.CRRTCScreen.localConnection.msid}if("media"==t){const t=__Rtc.CRRTCMedia.localMediaVideoConnection.stream.getTracks()[0].getSettings();i=t.height?t.height:1080,n=t.widht?t.widht:1920,e=__Rtc.CRRTCMedia.localMediaVideoConnection.msid}console.crlog(`[SDK] CR__VideoResolutionReport(${e},${n},${i})`),__Rtc.CR__VideoResolutionReport(e,n,i)}},__Rtc.CR__VideoResolutionReportRslt.callback=function(e,t){e=0==e?"success":"fail",t=null==t?"":t},CRVideo.leftMeetingFun=function(e){return new Promise(((t,n)=>{console.crlog("[SDK] CRVideo.leftMeetingFun..."),CRVideo.isWebRTC&&B.Z.stopVideo(),clearTimeout(CRVideo.KEEPALIVE_TIMER),CRVideo.KEEPALIVE_TIMER=-1,clearTimeout(CRVideo.REFRESH_SESSION_TIMER),CRVideo.REFRESH_SESSION_TIMER=-1,window.__Rtc.CRRTCAudio&&__Rtc.CRRTCAudio.stopAllAudioTrack(),window.__Rtc.CRRTCAudio&&__Rtc.CRRTCAudio.closeAllPeerConnection(),window.__Rtc.CRRTCRemoteVideo&&__Rtc.CRRTCRemoteVideo.closeAllRTCConnection(),window.__Rtc.CRRTCLocalVideo&&__Rtc.CRRTCLocalVideo.stopAllLocalVideoAndConnect(),window.__Rtc.CRRTCScreen&&__Rtc.CRRTCScreen.isMySharing&&(CRVideo_StopScreenShare(),__Rtc.CRICEAPI.SetCurrentTab(8,{termID:CRVideo.userInfo.termId,localID:0})),window.__Rtc.CRRTCMedia&&0==__Rtc.CRRTCMedia.mediaShareInfo.state&&__Rtc.CRRTCMedia.mediaShareInfo.userID==CRVideo.userInfo.userId&&(CRVideo_StopPlayMedia(),__Rtc.CRICEAPI.SetCurrentTab(8,{termID:CRVideo.userInfo.termId,localID:0})),"token失效"==e&&(console.crlog(`[SDK] CRVideo_MeetingDropped.target(${CRVideo_ERR_DEF.SDK_TOKEN_TIMEOUT})`),CRVideo.destroyMeetingConnect(),CRVideo_MeetingDropped.target(CRVideo_ERR_DEF.SDK_TOKEN_TIMEOUT)),setTimeout((()=>{CRVideo.isMeeting=!1,CRVideo.allMemberInfo=[],window.__Rtc.CRRTCConf.initData(),window.__Rtc.CRRTCIMMsg.initData(),window.__Rtc.CRRTCTermMsg.initData(),window.__Rtc.CRRTCAudio.initData(),window.__Rtc.CRRTCVideo.initData(),window.__Rtc.CRRTCLocalVideo.initData(),window.__Rtc.CRRTCRemoteVideo.initData(),window.__Rtc.CRRTCUI.initData(),window.__Rtc.CRRTCRecord.initData(),window.__Rtc.CRRTCScreen.initData(),window.__Rtc.CRRTCMedia.initData(),window.__Rtc.CRRTCBoard.initData(),window.__Rtc.CRRTCSync.initData(),window.__Rtc.CRRTCCloudRecord.initData(),window.__Rtc.CRRTCPrism.initData(),F.Z.initData(),t()}),0)}))},window.CRVideo_ExitMeeting=function(e){console.crlog(`[SDK] CRVideo_ExitMeeting(${e})`);let t=void 0!==e?e:"主动离开";"token失效"==t&&console.crlog("[SDK] Token Expire, do left meeting!"),__Rtc.CR__Exit(t),CRVideo.isExitmeet||(CRVideo.isExitmeet=!0,CRVideo.isMeeting=!1,CRVideo_UploadingLog(),setTimeout((()=>{CRVideo_UploadingLog()}),1e3),CRVideo.meetingExiting=!0,setTimeout((()=>{CRVideo.meetingExiting=!1}),3e3),console.crlog("[SDK] exit meeting---do left meeting function"),CRVideo.leftMeetingFun(t))},__Rtc.CR__ExitRslt.callback=function(e,t){e=0==e?"success":"fail",t=null==t?"":t,console.crlog("[SDK] ExitRslt Callback："+e+" "+t),CRVideo.CallID="",__Rtc.CR__UnInit(),setTimeout((()=>{CRVideo.destroyMeetingConnect()}),1e3),Z.uninit()},__Rtc.CR__Free.callback=function(e){console.crlog("[SDK] Free Callback: msid is "+e);var t=e.toString().substr(0,2);t==CRVideo.msType.localAudio?__Rtc.CRRTCAudio.audioMSIDFree(+e):t==CRVideo.msType.localVideo?__Rtc.CRRTCLocalVideo.videoMSIDFree(+e):t==CRVideo.msType.remoteVideo&&__Rtc.CRRTCRemoteVideo.videoMSIDFree(+e)};class ne{constructor(){this.initData(),this.initIceCallback(),this.initIceNotify(),this.initSDKInterface()}initData(){console.crlog("[EnMeet] EnMeetModule initData...")}initIceCallback(){}initIceNotify(){}initSDKInterface(){}}window.__crEnMeetClass=ne,window.__Rtc.CRRTCEnmeet=new ne,window.CRVideo_NotifyNetworkDelay=new CRVideo.CbProxy("CRVideo_NotifyNetworkDelay"),window.CRVideo_MeetingDropped=new CRVideo.CbProxy("CRVideo_MeetingDropped");const ie=window.CRVideo;window.Ice;function re(e,t,n){let i=document.createElement("a");i.href=window.URL.createObjectURL(e),i.download=`${t}.${n}`,i.click()}function oe(e,t,n=!0){let i=0,r=e.length*(t/8),o=new ArrayBuffer(r),s=new DataView(o);if(8===t)for(let t=0;t<e.length;t++,i++){let n=Math.max(-1,Math.min(1,e[t])),r=n<0?128*n:127*n;r=+r+128,s.setInt8(i,r)}else for(let t=0;t<e.length;t++,i+=2){let r=Math.max(-1,Math.min(1,e[t]));s.setInt16(i,r<0?32768*r:32767*r,n)}return s}window.__Rtc.CRRTCPrism=new class{constructor(){this.initData()}initData(){console.crlog("[Prism] PrismModule initData..."),this.meetInfoUpload=!0,this.UA=navigator.userAgent,this.appId="",this.confId="",this.userId="",this.cost="",this.systemType="",this.systemVersion="",this.terminal="",this.sdkVersion="",this.ip="",this.networkType="",this.server="",this.baseDetail=[],this.streamDetail=[],clearInterval(this.getMeetDetailTimer),this.getMeetDetailTimer=-1,clearInterval(this.meetDetailUploadTimer),this.meetDetailUploadTimer=-1,this.localAudioEnergy=null,this.distantAudioEnergy=null,this.meetDetailUploadTime=3e4}getBaseMessage(){const e={};return e.confId=this.confId=ie.meetingInfo.meetID,e.userId=this.userId="MeetSDK"==ie.SDKKey?ie.userInfo.nickname:ie.userInfo.userId,e.cost=this.cost=(new Date).getTime()-ie.startEnterTimestamp,e.systemType=this.systemType="Web",e.systemVersion=this.systemVersion=`${__Rtc.CRBrowser.curBrowserCfg.name}_${__Rtc.CRBrowser.curBrowserCfg.ver}`,e.terminal=this.terminal=this.UA.split("(")[1].split(")")[0],e.sdkVersion=this.sdkVersion=ie.sdkver,e.ip=this.ip=ie.myPublicIP,e.networkType=this.networkType=this.getNetType()||"未知",e.server=this.server=ie.resmAccessNo,null!=ie.LoginParam&&null!=ie.LoginParam.account&&(e.appId=this.appId=ie.LoginParam.account),e}getNetType(){return this.UA.includes("WIFI")?"WIFI":this.UA.includes("4G")?"4G":void 0}uploadEnterMeetInfo(){const e=this.getBaseMessage();let t=this;setTimeout((()=>{let n=`https://${ie.webServerAddr}/${window.__CRNameUP}-REPORT/report`;"conference"==ie.rtcCfg.iceServers[0].username&&(n=`https://${ie.webServerAddr}/CLOUDMEETING-REPORT/report`),(0,r.Z)({url:n,type:"post",data:JSON.stringify(e),success(e){console.crlog("[Prism] 入会信息上报成功"),t.begainMeetDetailUpload()},error(e){console.crlog("[Prism] 入会信息上报失败，不再启动会议详情定期上报！")}})}),2e3)}begainMeetDetailUpload(){console.crlog("[Prism] 开始定期上报会议详情..."),this.startGetMeetDetail(),clearInterval(this.meetDetailUploadTimer),setTimeout((()=>{this.uploadMeetDetail()}),1e4),this.meetDetailUploadTimer=setInterval((()=>{ie.isMeeting&&this.baseDetail.length>0&&this.streamDetail.length>0?this.uploadMeetDetail():ie.isMeeting||clearInterval(this.meetDetailUploadTimer)}),this.meetDetailUploadTime)}uploadMeetDetail(){let e=this;const t={confId:this.confId?this.confId:ie.meetingInfo.meetID,userId:this.userId?this.userId:"MeetSDK"==ie.SDKKey?ie.userInfo.nickname:ie.userInfo.userId,baseDetail:this.baseDetail,streamDetail:this.streamDetail};null!=ie.LoginParam&&null!=ie.LoginParam.account&&(t.appId=this.appId?this.appId:ie.LoginParam.account);let n=`https://${ie.webServerAddr}/${window.__CRNameUP}-REPORT/report/detail`;"conference"==ie.rtcCfg.iceServers[0].username&&(n=`https://${ie.webServerAddr}/CLOUDMEETING-REPORT/report/detail`),(0,r.Z)({url:n,type:"post",data:JSON.stringify(t),success(t){(200==t.code||e.baseDetail.length>100)&&(e.baseDetail=[],e.streamDetail=[])},error(t){console.crlog("[Prism] 会议详情上报失败，停止继续收集和上报"),clearInterval(e.meetDetailUploadTimer),clearInterval(e.getMeetDetailTimer)}})}startGetMeetDetail(){console.crlog("[Prism] 开始定期收集会议详情..."),clearInterval(this.getMeetDetailTimer),this.getMeetDetail(),this.getMeetDetailTimer=setInterval((()=>{0==ie.isMeeting&&clearInterval(this.getMeetDetailTimer),this.getMeetDetail()}),1e4)}getMeetDetail(){this.getBaseDetail(),this.getAudioRecStreamDetail(),this.getAudioSendStreamDetail(),this.getLocalVideoStreamDetail(),this.getRemoteVideoStreamDetail(),this.getLocalScreenShareStreamDetail(),this.getRemoteScreenShareStreamDetail(),this.getLocalMediaStreamDetail(),this.getRemoteMediaStreamDetail()}getBaseDetail(){const e={};e.reportTime=parseInt((new Date).getTime()/1e3),e.networkScore=__Rtc.CRRTCAudio.networkScore>0?__Rtc.CRRTCAudio.networkScore:0,e.localVolume=__Rtc.CRRTCAudio.localAudioEnergy||0,e.distantVolume=__Rtc.CRRTCAudio.distantAudioEnergy||0,this.baseDetail.push(e)}getAudioRecStreamDetail(){let e={streamId:"0.0"};e.reportTime=parseInt((new Date).getTime()/1e3),e.flowType=2,e.peerLossRate=__Rtc.CRRTCAudio.packetsLostRate||0,e.codeRate=__Rtc.CRRTCAudio.codeRateReceived||0,this.streamDetail.push(e)}getAudioSendStreamDetail(){let e={streamId:"0.0"};e.reportTime=parseInt((new Date).getTime()/1e3),e.flowType=1,e.codeRate=__Rtc.CRRTCAudio.codeRateSend||0,this.streamDetail.push(e)}getLocalVideoStreamDetail(){let e=__Rtc.CRRTCLocalVideo.videoInput;for(let t=0;t<e.length;t++){let n=e[t].connect.connection,i=e[t].connect2.connection;if(n&&"connected"===n.connectionState){let n={};n.streamId=`1.${e[t].id}`,n.reportTime=parseInt((new Date).getTime()/1e3),n.flowType=1,n.resolutionWidth=e[t].connect.width||0,n.resolutionHeight=e[t].connect.height||0,n.frameRate=e[t].connect.frameRate||0,n.codeRate=e[t].connect.codeRate||0,this.streamDetail.push(n)}if(i&&"connected"===i.connectionState){let n={};n.streamId=`1.${e[t].id}`,n.reportTime=parseInt((new Date).getTime()/1e3),n.flowType=1,n.resolutionWidth=e[t].connect2.width||0,n.resolutionHeight=e[t].connect2.height||0,n.frameRate=e[t].connect2.frameRate||0,n.codeRate=e[t].connect2.codeRate||0,this.streamDetail.push(n)}}}getRemoteVideoStreamDetail(){__Rtc.CRRTCRemoteVideo.connectList.forEach((e=>{e.list.forEach((t=>{if(t.connection&&"connected"===t.connection.connectionState){let n={};n.streamId=`1.${t.camID}`,n.srcUserId=ie.findMemberInfo({use:"termId",want:"userId",value:e.termID}),n.reportTime=parseInt((new Date).getTime()/1e3),n.flowType=2,n.resolutionWidth=t.width||0,n.resolutionHeight=t.height||0,n.frameRate=t.frameRate||0,n.codeRate=t.codeRate||0,n.peerLossRate=t.packetsLostRate||0,this.streamDetail.push(n)}}))}))}getLocalScreenShareStreamDetail(){let e=__Rtc.CRRTCScreen.localConnection;if(e.connection&&"connected"===e.connection.connectionState){let t={streamId:"2.0"};t.reportTime=parseInt((new Date).getTime()/1e3),t.flowType=1,t.resolutionWidth=e.width||0,t.resolutionHeight=e.height||0,t.frameRate=e.frameRate||0,t.codeRate=e.codeRate||0,this.streamDetail.push(t)}}getRemoteScreenShareStreamDetail(){let e=__Rtc.CRRTCScreen.remoteConnection;if(e.connection&&"connected"===e.connection.connectionState){let t={streamId:"2.0"};t.srcUserId=ie.findMemberInfo({want:"userId",use:"termId",value:__Rtc.CRRTCScreen.screenShareInfo.sharer}),t.reportTime=parseInt((new Date).getTime()/1e3),t.flowType=2,t.resolutionWidth=e.width||0,t.resolutionHeight=e.height||0,t.frameRate=e.frameRate||0,t.codeRate=e.codeRate||0,t.peerLossRate=e.packetsLostRate||0,this.streamDetail.push(t)}}getLocalMediaStreamDetail(){let e=__Rtc.CRRTCMedia.localMediaVideoConnection;if(e.connection&&"connected"===e.connection.connectionState){let t={streamId:"3.0"};t.reportTime=parseInt((new Date).getTime()/1e3),t.flowType=1,t.resolutionWidth=e.width||0,t.resolutionHeight=e.height||0,t.frameRate=e.frameRate||0,t.codeRate=e.codeRate||0,this.streamDetail.push(t)}}getRemoteMediaStreamDetail(){let e=__Rtc.CRRTCMedia.remoteMediaConnection;if(e.connection&&"connected"===e.connection.connectionState){let t={streamId:"3.0"};t.srcUserId=__Rtc.CRRTCMedia.mediaShareInfo.userID,t.reportTime=parseInt((new Date).getTime()/1e3),t.flowType=2,t.resolutionWidth=e.width||0,t.resolutionHeight=e.height||0,t.frameRate=e.frameRate||0,t.codeRate=e.codeRate||0,t.peerLossRate=e.packetsLostRate||0,this.streamDetail.push(t)}}};class se{constructor(e={},t){this.stream=t,this.aSide=e.aSide,this.getType=e.getType,this.sampleBits=e.jsonParam.sampleBits,this.sampleRate=e.jsonParam.sampleRate,this.eachSize=e.jsonParam.eachSize,this.eachTime=e.jsonParam.eachTime,this.fileName=e.jsonParam.fileName,this.size=0,this.lBuffer=[],this.rBuffer=[],this.tempPCMBuffer=[],this.tempSize=0,this.fileSize=0,this.duration=0,this.needRecord=!0;let n=new(window.AudioContext||window.webkitAudioContext);this.inputSampleRate=n.sampleRate,this.setNewOption(e),this.littleEdian=function(){let e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),256===new Int16Array(e)[0]}()}setNewOption(e={}){this.config={sampleBits:~[8,16].indexOf(this.sampleBits)?this.sampleBits:16,sampleRate:~[8e3,11025,16e3,22050,24e3,44100,48e3].indexOf(this.sampleRate)?this.sampleRate:this.inputSampleRate,numChannels:~[1,2].indexOf(this.numChannels)?this.numChannels:1},this.outputSampleRate=this.config.sampleRate,this.oututSampleBits=this.config.sampleBits}startRecord(){return this.context&&this.destroyRecord(),this.initRecorder(),this.audioInput=this.context.createMediaStreamSource(this.stream),this.audioInput.connect(this.analyser),this.analyser.connect(this.recorder),this.recorder.connect(this.context.destination),0}pauseRecord(){this.needRecord=!1}resumeRecord(){this.needRecord=!0}stopRecord(){0==this.getType&&this.size>0&&this.getPCM(),1==this.getType&&this.downloadPCM(this.fileName),this.audioInput&&this.audioInput.disconnect(),this.source&&this.source.stop(),this.recorder.disconnect(),this.analyser.disconnect(),this.needRecord=!0}initRecorder(){this.clearRecordStatus(),this.context=new(window.AudioContext||window.webkitAudioContext),this.analyser=this.context.createAnalyser(),this.analyser.fftSize=2048;let e=this.context.createScriptProcessor||this.context.createJavaScriptNode;this.recorder=e.apply(this.context,[4096,this.config.numChannels,this.config.numChannels]),this.recorder.onaudioprocess=e=>{if(!this.needRecord)return;let t=e.inputBuffer.getChannelData(0),n=null;this.lBuffer.push(new Float32Array(t)),this.size+=t.length,2===this.config.numChannels&&(n=e.inputBuffer.getChannelData(1),this.rBuffer.push(new Float32Array(n)),this.size+=n.length),this.fileSize=Math.floor(this.size/Math.max(this.inputSampleRate/this.outputSampleRate,1))*(this.oututSampleBits/8),this.duration+=4096/this.inputSampleRate,0==this.getType&&this.eachSize&&this.fileSize>=this.eachSize&&this.getPCM(),0==this.getType&&this.eachTime&&this.duration>=this.eachTime&&this.getPCM()}}destroyRecord(){return this.clearRecordStatus(),this.closeAudioContext()}clearRecordStatus(){this.lBuffer.length=0,this.rBuffer.length=0,this.size=0,this.fileSize=0,this.PCM=null,this.audioInput=null,this.duration=0}closeAudioContext(){return this.context&&this.context.close&&"closed"!==this.context.state?this.context.close():new Promise((e=>{e()}))}getPCM(){let e=this.getData();return e=function(e,t,n){let i=t/n,r=Math.max(i,1),o=e.left,s=e.right,a=Math.floor((o.length+s.length)/i),c=new Float32Array(a),l=0,d=0;for(;l<a;){let e=Math.floor(d);c[l]=o[e],l++,s.length&&(c[l]=s[e],l++),d+=r}return c}(e,this.inputSampleRate,this.outputSampleRate),0==this.getType?window.CRVideo_NotifyAudioPCMDat.target(this.aSide,oe(e,this.oututSampleBits,this.littleEdian)):oe(e,this.oututSampleBits,this.littleEdian)}getPCMBlob(){return new Blob([this.getPCM()])}downloadPCM(e="recorder"){!function(e,t="recorder"){re(e,t,"pcm")}(this.getPCMBlob(),e)}getData(){let e=this.flat();return 0==this.getType&&(this.tempPCMBuffer=this.lBuffer,this.tempSize=this.size,this.lBuffer=[],this.size=0,this.duration=0,this.fileSize=0),e}flat(){let e=null,t=new Float32Array(0);1===this.config.numChannels?e=new Float32Array(this.size):(e=new Float32Array(this.size/2),t=new Float32Array(this.size/2));let n=0;for(let t=0;t<this.lBuffer.length;t++)e.set(this.lBuffer[t],n),n+=this.lBuffer[t].length;n=0;for(let e=0;e<this.rBuffer.length;e++)t.set(this.rBuffer[e],n),n+=this.rBuffer[e].length;return{left:e,right:t}}}window.__Rtc.CRRTCAudioRecorder=new class{constructor(){this.initSDKInterface(),this.micRecorder=null,this.speakerRecorder=null}initSDKInterface(){window.CRVideo_StartGetAudioPCM=(e,t,n)=>{try{console.crlog(`[AudioRecorder] CRVideo_StartGetAudioPCM(${e},${t},${JSON.stringify(n)})`)}catch(e){console.error(e)}return this.startGetAudioPCM(e,t,n)},window.CRVideo_StopGetAudioPCM=e=>{console.crlog(`[AudioRecorder] CRVideo_StopGetAudioPCM(${e})`),this.stopGetAudioPCM(e)}}startGetAudioPCM(e=0,t=0,n={}){let i;if(0==e&&null===this.micRecorder?i=__Rtc.CRRTCAudio.localAudioStream:1==e&&null===this.speakerRecorder&&(i=__Rtc.CRRTCAudio.distantAudioStream),0==t&&!n.eachSize&&!n.eachTime)return 1;if(1==t&&!n.fileName)return 1;if(!i||1!=i.active)return 1;n.sampleBits=void 0===n.sampleBits?n.sampleBits=16:n.sampleBits,n.sampleRate=void 0===n.sampleRate?n.sampleRate=16e3:n.sampleRate;const r=new se({aSide:e,getType:t,jsonParam:n},i);return 0==e?this.micRecorder=r:this.speakerRecorder=r,r.startRecord()}stopGetAudioPCM(e){0==e&&this.micRecorder&&(this.micRecorder.stopRecord(),this.micRecorder=null),1==e&&this.speakerRecorder&&(this.speakerRecorder.stopRecord(),this.speakerRecorder=null)}},window.CRVideo_NotifyAudioPCMDat=new CRVideo.CbProxy("CRVideo_NotifyAudioPCMDat");const ae=window.CRVideo,ce=window.Ice,le=0,de=1,ue=2,he=3,fe=4,_e=5,pe=6,Ce=8,ge=9,me=10,Ie=11,Re=12,ye=1;const Se=class{constructor(e,t={}){this._id=`boardView_${ce.generateUUID()}`,this._boardID=e||"",this._wbDesc=null,this._curPageID=0,this._handlerDiv=null,this._mainContainerDiv=null,this._canvasList=[],this._mainContainerDivStyle={},this._canvasStyle={},this._attr={readOnly:t.readOnly||!1,asyncPage:t.asyncPage||!0,followPage:t.followPage||!0,asyncScale:t.asyncScale||!0,followScale:t.followScale||!0,pageMargin:t.pageMargin||10,showRange:t.showRange||!1},this._toolAttr={lineWidth:1,lineStyle:ye,color:"",fontSize:20,fontFamily:"sans-serif",fontWeight:"normal",fontItalic:!1,fontUnderLine:!1,fontAlign:"left",fontBaseLine:"middle",fontBackGroundColor:"rgba(0,0,0,1)"},this._shapeType=le,this._revocableShapesArr=[],this._resumableShapesArr=[],this._undo=!1,this._redo=!1,this._lastOrder=1,this._pageMarginClientHeight=0,this._canvasContainerHeight=0,this._shapeDataCacheContainer=[],this._shapeDataSendTimer=-1,this._shapeDataSendInterval=100,this._drawAllShapesTimeout=-1,this._drawAllShapesWaiting=!1,this._debounce=(e,t)=>{var n;t=t||200;return function(){var i=this,r=arguments;n&&clearTimeout(n),n=setTimeout((function(){n=null,e.apply(i,r)}),t)}},this._throttle=(e,t)=>{var n,i;t=t||200;return function(){var r=this,o=arguments,s=+new Date;n&&s-n<t?(clearTimeout(i),i=setTimeout((function(){n=s,e.apply(r,o)}),t)):(n=s,e.apply(r,o))}},this._drawAllShapes=this._throttle(this._drawAllShapesB,200),this._init()}_init(){this._initCallback(),this._initData(),this._initDom()}_initData(){this._curPageID=0,this._revocableShapesArr=[],this._resumableShapesArr=[],this._undo=!1,this._redo=!1}_initCallback(){this.notifyBoardCurPageChanged=new ae.CbProxy("notifyBoardCurPageChanged"),this.notifyRedoEnableChanged=new ae.CbProxy("notifyRedoEnableChanged"),this.notifyUndoEnableChanged=new ae.CbProxy("notifyUndoEnableChanged"),this.notifyScaleChanged=new ae.CbProxy("notifyScaleChanged"),this.notifyMarkException=new ae.CbProxy("notifyMarkException"),this.notifyUserTextInput=new ae.CbProxy("notifyUserTextInput"),this.notifyMarkException=new ae.CbProxy("notifyMarkException"),q.addEventListener("notifySetScale",(e=>{e.wId==this._boardID&&e.opId!=ae.userInfo.userId&&this._attr.followScale&&(this._wbDesc.scale=e.scale,this.resize("notifySetScale"),this.notifyScaleChanged.target(e.wId,e.scale,e.opId))}))}_initDom(){console.crlog(`[BoardView] ${this._id} _initDom`),this._handlerDiv||(this._handlerDiv=document.createElement("div"),this._handlerDiv.id=this._id,this._handlerDiv.style.width="100%",this._handlerDiv.style.height="100%",this._handlerDiv.style.position="relative",this._handlerDiv.style.boxSizing="border-box",this._handlerDiv.style.overflow="hidden"),this._handlerDiv.innerHTML="",this._mainContainerDiv=document.createElement("div"),this._mainContainerDiv.style.position="absolute",this._mainContainerDiv.style.left="50%",this._mainContainerDiv.style.top="50%",this._mainContainerDiv.style.transform="translate(-50%, -50%)",this._mainContainerDiv.style.display="flex",this._mainContainerDiv.style.flexDirection="column",this._mainContainerDiv.style.justifyContent="flex-start",this._mainContainerDiv.style.alignItems="flex-start",this._mainContainerDiv.style.overflow="auto",this._mainContainerDiv.style.boxSizing="border-box";for(let e in this._mainContainerDivStyle)this._mainContainerDiv.style[e]=this._mainContainerDivStyle[e];this._handlerDiv.appendChild(this._mainContainerDiv);new ResizeObserver((e=>{this.resize("on resize")})).observe(this._handlerDiv)}_bindingBoardInfo(){const e=Z.wbDescList.find((e=>e.wId==this._boardID));e&&(console.crlog(`[BoardView] ${this._id} _bindingBoardInfo, wID: ${this._boardID}`),this._wbDesc=e,this._createCanvas(),this._refreshPos(),-1==Z.viewList.findIndex((e=>e._id==this._id))&&Z.viewList.push(this))}_createCanvas(){this._canvasList=[];for(let e=0;e<this._wbDesc.pageCount;e++){const t=document.createElement("div");t.style.position="relative",this._mainContainerDiv.appendChild(t);const n=document.createElement("canvas"),i=n.getContext("2d");n.style.boxSizing="border-box",n.style.backgroundColor="rgba(255,255,255,1)",n.style.height="100%",n.style.width="100%",n.width=this._wbDesc.width||0,n.height=this._wbDesc.height||0,t.appendChild(n);const r=document.createElement("canvas"),o=r.getContext("2d");r.width=this._wbDesc.width||0,r.height=this._wbDesc.height||0,r.style.position="absolute",r.style.left="0px",r.style.top="0px",r.style.width="100%",r.style.height="100%",t.appendChild(r),this._canvasList.push({canvasContainer:t,shapeCanvas:n,drawCanvas:r,shapeCanvasCtx:i,drawCanvasCtx:o,pageID:e});for(let e in this._canvasStyle)n.style[e]=this._canvasStyle[e]}this._loadEvent()}_refreshPos(){let{xPos:e,yPos:t}=this._wbDesc;this._attr.followPage&&(this._mainContainerDiv.onscroll=null),this._mainContainerDiv.scrollTop=(this._mainContainerDiv.scrollHeight+this._pageMarginClientHeight)*t,this._mainContainerDiv.scrollLeft=e*this._mainContainerDiv.scrollWidth,this._attr.followPage&&(clearTimeout(this._loadEventTimeout),this._loadEventTimeout=setTimeout((()=>{this._loadEvent()}),50)),this._calcCurPageID()}_calcCurPageID(){const e=this._curPageID;let t=this._canvasContainerHeight,n=this._pageMarginClientHeight,i=this._mainContainerDiv.clientHeight,r=this._mainContainerDiv.scrollTop;const o=t+n/2-i/2;this._curPageID=0==r||1==this._wbDesc.pageCount?0:Math.floor((r-o)/(t+n))+1,e!=this._curPageID&&this.notifyBoardCurPageChanged.target(this._curPageID)}_setLineStyle(e,t){const n=e.shapeCanvas.width/this._wbDesc.width;e.drawCanvasCtx.strokeStyle=e.shapeCanvasCtx.strokeStyle=t.attr.penColor,e.drawCanvasCtx.lineWidth=e.shapeCanvasCtx.lineWidth=t.attr.penWidth*n,e.drawCanvasCtx.lineCap=e.shapeCanvasCtx.lineCap="round",e.shapeCanvasCtx.setLineDash([1,0]),e.drawCanvasCtx.setLineDash([1,0]),t.type==_e&&(e.drawCanvasCtx.lineWidth=e.shapeCanvasCtx.lineWidth=1)}_convertToolType(e){let t=e;switch(e){case 11:t=3;break;case 12:t=4}return t}_drawAllShapesB(e={},t){if(!this._wbDesc.shapeList||1==this._drawAllShapesWaiting)return;const n=null==e.pageID?null:e.pageID;this._clearAllMark(n),this._wbDesc.shapeList.forEach((e=>{if(n==e.pageId||null==n){const t=this._canvasList.find((t=>t.pageID==e.pageId));t.drawCanvasCtx.clearRect(0,0,t.drawCanvas.width,t.drawCanvas.height);for(let n=0;n<e.shapes.length;n++)this._drawShape(t,e.shapes[n])}})),e.callback&&e.callback()}_drawAppendShapeDat(e,t,n,i){this._canvasList.forEach((r=>{if(r.pageID==e){const e=n.length,c=n.concat(i);if(0==c.length||0==i.length)return;const{left:l,top:d}=t,u=r.shapeCanvasCtx,h=r.shapeCanvas.width/this._wbDesc.width;if(this._setLineStyle(r,t),u.beginPath(),2==c.length)u.moveTo((l+c[0].x)*h,(d+c[0].y)*h),u.lineTo((2*l+c[0].x+c[1].x)/2*h,(2*d+c[0].y+c[1].y)/2*h);else if(c.length>2)for(var o=0;o<i.length;o++)if(1==e&&0==o)u.moveTo((l+c[e-1].x)*h,(d+c[e-1].y)*h),u.lineTo((2*l+c[e].x+c[e].x)/2*h,(2*d+c[e].y+c[e].y)/2*h);else{const{x:t,y:n}=c[e-1+o],{x:i,y:r}=c[e-2+o],{x:f,y:_}=c[e+o];u.moveTo((2*l+i+t)/2*h,(2*d+r+n)/2*h);var s=(2*l+f+t)/2,a=(2*d+_+n)/2;u.quadraticCurveTo((l+t)*h,(d+n)*h,s*h,a*h)}u.stroke(),this._calcRange(t)}}))}_drawShape(e,t,n){switch(this._lastOrder=t.order>=this._lastOrder?t.order:this._lastOrder,t.type){case 1:this._drawPencil(e,t,n);break;case 2:this._drawStraightLine(e,t,n);break;case 3:this._drawRect(e,t,n);break;case 4:this._drawEllipse(e,t,n);break;case 5:this._drawArrow(e,t,n);break;case 6:this._drawText(e,t,n)}}_uploadCurPosition(){this._attr.asyncPage&&z.setCurrentPos(this._boardID,this._mainContainerDiv.scrollLeft/this._mainContainerDiv.scrollWidth,this._mainContainerDiv.scrollTop/(this._mainContainerDiv.scrollHeight+this._pageMarginClientHeight)).then((e=>{})).catch((e=>{console.error(e)}))}_loadEvent(){this._mainContainerDiv.onmousedown=e=>{this._shapeType==me&&(e.preventDefault(),this._mainContainerDiv.onmousemove=e=>{e.preventDefault(),this._mainContainerDiv.scrollTop=this._mainContainerDiv.scrollTop-e.movementY,this._mainContainerDiv.scrollLeft=this._mainContainerDiv.scrollLeft-e.movementX},document.addEventListener("mouseup",(()=>{this._mainContainerDiv.onmousemove=null})))},this._mainContainerDiv.onscroll=e=>{this._boardID&&(this._calcCurPageID(),this._uploadCurPosition())},this._canvasList.forEach((t=>{const n=t.drawCanvas,i=t.drawCanvasCtx,r=t.pageID;n.onmousedown=o=>{if(this._shapeType==me||this._attr.readOnly)return;const s=n.width/this._wbDesc.width,a=o.offsetX/s,c=o.offsetY/s;let l={type:this._convertToolType(this._shapeType),order:++this._lastOrder,sId:ce.generateUUID(),owner:ae.userInfo.userId,left:Math.round(a),top:Math.round(c),attr:{penColor:e.Z.colorHexToRgba(this._toolAttr.color,1).rgba,penWidth:this._toolAttr.lineWidth,penStyle:this._toolAttr.lineStyle},dat:[]};if(this._setLineStyle(t,l),this._shapeType==Ce){let e=this._pitchOnShape(t,Math.round(a),Math.round(c));e&&(this._drawRange(t,e,s),l=e,this._resumableShapesArr=[],this._revocableShapesArr.push({action:"move",shape:{boardID:this._boardID,pageID:r,sPosOld:{sId:e.sId,left:Math.round(e.left),top:Math.round(e.top)}}}),this._changeRedoUndoState())}else if(this._shapeType==ge){let e=this._pitchOnShape(t,Math.round(a),Math.round(c));e&&this._drawRange(t,e,s)}else{const e=this._wbDesc.shapeList.find((e=>e.pageId==r));if(e&&e.shapes.length>800)return void this.notifyMarkException.target({errCode:1,errDesc:"单页标注超过最大数量限制"});this._shapeType==de&&(l.dat.push({x:0,y:0}),this._shapeDataCacheContainer=[],Z.addShape(this._boardID,r,l)),this._shapeType!=ue&&this._shapeType!=_e||(l.attr.lineStartPosX=0,l.attr.lineStartPosY=0),this._shapeType!=he&&this._shapeType!=fe&&this._shapeType!=Ie&&this._shapeType!=Re||(l.attr.rectX=0,l.attr.rectY=0,l.attr.rectRadius=0,this._shapeType!=Ie&&this._shapeType!=Re||(l.attr.fill=!0)),this._shapeType==pe&&this.notifyUserTextInput.target((e=>{null!=e&&(l.attr.txtBkColor=this._toolAttr.fontBackGroundColor,l.attr.fontSize=this._toolAttr.fontSize,l.attr.fontWeight=this._toolAttr.fontWeight,l.attr.fontItalic=this._toolAttr.fontItalic,l.attr.fontUnderLine=this._toolAttr.fontUnderLine,l.attr.fontFamily=this._toolAttr.fontFamily,l.attr.fontAlign=this._toolAttr.fontAlign,l.attr.fontBaseLine=this._toolAttr.fontBaseLine,l.attr.txt=e.toString(),l.top=Math.round(l.top-.6*l.attr.fontSize),Z.addShape(this._boardID,r,l),this._drawShape(t,l),this._addShapeToShapeList(l,r),this._resumableShapesArr=[],this._revocableShapesArr.push({action:"add",shape:{boardID:this._boardID,pageID:r,shape:l}}),this._changeRedoUndoState())}))}let d={x:o.offsetX,y:o.offsetY},u=null;n.onmousemove=e=>{this._setLineStyle(t,l);const o=e.offsetX,h=e.offsetY;if(this._shapeType==Ce&&l.range)l.left=l.left+(o-d.x)/s,l.top=l.top+(h-d.y)/s,d={x:o,y:h},i.clearRect(0,0,n.width,n.height),this._drawShape(t,l,"drawing"),this._calcRange(l),this._drawRange(t,l,s,"drawing");else if(this._shapeType==de){i.beginPath();const e={x:(d.x+o)/2,y:(d.y+h)/2},t={x:Math.round(o/s-a),y:Math.round(h/s-c)};if(l.dat.length>=600)return this.notifyMarkException.target({errCode:2,errDesc:"单笔标注超过最大长度"}),void(n.onmousemove=null);l.dat.push(t),this._shapeDataCacheContainer.push(t),-1==this._shapeDataSendTimer&&(this._shapeDataSendTimer=setInterval((()=>{this._shapeDataCacheContainer.length>0&&Z.appendShapeDat(this._boardID,r,l.sId,this._shapeDataCacheContainer),this._shapeDataCacheContainer=[]}),this._shapeDataSendInterval)),u?(i.moveTo(u.x,u.y),i.quadraticCurveTo(d.x,d.y,e.x,e.y)):(i.moveTo(d.x,d.y),i.lineTo(o,h)),i.stroke(),u=e,d={x:o,y:h}}else this._shapeType!=ue&&this._shapeType!=_e||(l.attr.lineEndPosX=Math.round(e.offsetX/s-a),l.attr.lineEndPosY=Math.round(e.offsetY/s-c)),this._shapeType!=fe&&this._shapeType!=Re&&this._shapeType!=he&&this._shapeType!=Ie||(l.attr.rectWidth=Math.round(o/s-a-l.attr.rectX),l.attr.rectHeight=Math.round(h/s-c-l.attr.rectY)),i.clearRect(0,0,n.width,n.height),this._drawShape(t,l,"drawing")};const h=e=>{if(i.clearRect(0,0,n.width,n.height),this._shapeType==Ce&&l.range){z.moveShape(this._boardID,r,[{sId:l.sId,left:Math.round(l.left),top:Math.round(l.top)}]),this._resumableShapesArr=[];this._revocableShapesArr[this._revocableShapesArr.length-1].shape.sPosNew={sId:l.sId,left:Math.round(l.left),top:Math.round(l.top)},this._changeRedoUndoState()}if(this._shapeType==ge){let e=this._pitchOnShape(t,Math.round(a),Math.round(c));e&&(e&&Z.delShape(this._boardID,r,[e.sId]),this._resumableShapesArr=[],this._revocableShapesArr.push({action:"del",shape:{boardID:this._boardID,pageID:r,shape:e}}),this._changeRedoUndoState())}this._shapeType==de&&(this._shapeDataCacheContainer.length>0&&Z.appendShapeDat(this._boardID,r,l.sId,this._shapeDataCacheContainer),this._shapeDataCacheContainer=[]),this._shapeType!=de&&this._shapeType!=ue&&this._shapeType!=_e&&this._shapeType!=he&&this._shapeType!=fe&&this._shapeType!=Ie&&this._shapeType!=Re||(this._drawShape(t,l),this._addShapeToShapeList(l,r),this._resumableShapesArr=[],this._revocableShapesArr.push({action:"add",shape:{boardID:this._boardID,pageID:r,shape:l}}),this._changeRedoUndoState(),this._shapeType!=de&&Z.addShape(this._boardID,r,l)),clearInterval(this._shapeDataSendTimer),this._shapeDataSendTimer=-1,n.onmousemove=null,document.removeEventListener("mouseup",h),d=null,u=null};document.addEventListener("mouseup",h)}}))}_addShapeToShapeList(e,t){let n=this._wbDesc.shapeList.find((e=>e.pageId==t));n||(n={pageId:t,shapes:[]},this._wbDesc.shapeList.push(n)),null==n.shapes&&(n.shapes=[]),n.shapes.push(e)}_clearAllMark(e=null){this._canvasList.forEach(((t,n)=>{e!=n&&null!=e||t.shapeCanvasCtx.clearRect(0,0,t.shapeCanvas.width,t.shapeCanvas.height)}))}_pitchOnShape(e,t,n){let i=null;return this._wbDesc.shapeList.forEach((r=>{if(e.pageID==r.pageId)for(let e=r.shapes.length-1;e>=0;e--){const o=r.shapes[e];if(o.range&&o.range.left<=t&&o.range.right>=t&&o.range.top<=n&&o.range.bottom>=n){i=o;break}}})),i}_calcRange(e){if(e.type==de){let t={left:0,top:0,right:0,bottom:0};const n=10;for(let i=0;i<e.dat.length;i++)0==i?(t.left=Math.ceil(e.dat[i].x+e.left-n),t.right=Math.ceil(e.dat[i].x+e.left+n),t.top=Math.ceil(e.dat[i].y+e.top-n),t.bottom=Math.ceil(e.dat[i].y+e.top+n)):(e.dat[i].x+e.left-n<t.left&&(t.left=Math.ceil(e.dat[i].x+e.left-n)),e.dat[i].x+e.left+n>t.right&&(t.right=Math.ceil(e.dat[i].x+e.left+n)),e.dat[i].y+e.top-n<t.top&&(t.top=Math.ceil(e.dat[i].y+e.top-n)),e.dat[i].y+e.top+n>t.bottom&&(t.bottom=Math.ceil(e.dat[i].y+e.top+n)));e.range=t}}_drawRange(e,t,n,i){const r=i?e.drawCanvasCtx:e.shapeCanvasCtx;this._setLineStyle(e,t),r.lineWidth=1*n,r.setLineDash([parseInt(10*n)]),r.beginPath(),r.moveTo(t.range.left*n,t.range.top*n),r.lineTo(t.range.right*n,t.range.top*n),r.lineTo(t.range.right*n,t.range.bottom*n),r.lineTo(t.range.left*n,t.range.bottom*n),r.lineTo(t.range.left*n,t.range.top*n),r.stroke()}_drawPencil(e,t,n){if(0==t.dat.length)return;const i=t.dat,r=n?e.drawCanvasCtx:e.shapeCanvasCtx,o=e.shapeCanvas.width/this._wbDesc.width;if(this._setLineStyle(e,t),r.beginPath(),r.moveTo(Math.round((i[0].x+t.left)*o),Math.round((i[0].y+t.top)*o)),i.length<2)r.lineTo(Math.round((t.left+i[0].x)*o),Math.round((t.top+i[0].y)*o));else for(var s=0;s<i.length-1;s++){var a=Math.round(t.left+i[s].x+t.left+i[s+1].x)*o/2,c=Math.round(t.top+i[s].y+t.top+i[s+1].y)*o/2;r.quadraticCurveTo((t.left+i[s].x)*o,(t.top+i[s].y)*o,a,c)}r.stroke(),this._calcRange(t),this._attr.showRange&&this._drawRange(e,t,o)}_drawStraightLine(e,t,n){const i=n?e.drawCanvasCtx:e.shapeCanvasCtx,r=e.shapeCanvas.width/this._wbDesc.width;this._setLineStyle(e,t),i.beginPath(),i.moveTo(Math.round((t.attr.lineStartPosX+t.left)*r),Math.round((t.attr.lineStartPosY+t.top)*r)),i.lineTo(Math.round((t.attr.lineEndPosX+t.left)*r),Math.round((t.attr.lineEndPosY+t.top)*r)),i.stroke();let o={left:0,top:0,right:0,bottom:0};const s=10;t.attr.lineStartPosX<=t.attr.lineEndPosX?(o.left=t.attr.lineStartPosX+t.left-s,o.right=t.attr.lineEndPosX+t.left+s):(o.left=t.attr.lineEndPosX+t.left-s,o.right=t.attr.lineStartPosX+t.left+s),t.attr.lineStartPosY<=t.attr.lineEndPosY?(o.top=t.attr.lineStartPosY+t.top-s,o.bottom=t.attr.lineEndPosY+t.top+s):(o.top=t.attr.lineEndPosY+t.top-s,o.bottom=t.attr.lineStartPosY+t.top+s),t.range=o,this._attr.showRange&&this._drawRange(e,t,r)}_drawRect(e,t,n){const i=n?e.drawCanvasCtx:e.shapeCanvasCtx,r=e.shapeCanvas.width/this._wbDesc.width;this._setLineStyle(e,t);const o=(t.attr.rectX+t.left)*r,s=(t.attr.rectY+t.top)*r,a=t.attr.rectWidth*r,c=t.attr.rectHeight*r;t.attr.fill?(i.fillStyle=t.attr.penColor,i.fillRect(o,s,a,c)):i.strokeRect(o,s,a,c);let l={left:0,top:0,right:0,bottom:0};const d=10;a>=0?(l.left=t.attr.rectX+t.left-d,l.right=t.attr.rectX+t.left+t.attr.rectWidth+d):(l.left=t.attr.rectX+t.left+t.attr.rectWidth-d,l.right=t.attr.rectX+t.left+d),c>=0?(l.top=t.attr.rectY+t.top-d,l.bottom=t.attr.rectY+t.top+t.attr.rectHeight+d):(l.top=t.attr.rectY+t.top+t.attr.rectHeight-d,l.bottom=t.attr.rectY+t.top+d),t.range=l,this._attr.showRange&&this._drawRange(e,t,r)}_drawEllipse(e,t,n){const i=n?e.drawCanvasCtx:e.shapeCanvasCtx,r=e.shapeCanvas.width/this._wbDesc.width;this._setLineStyle(e,t);const o=t.attr.rectWidth*r,s=t.attr.rectHeight*r,a=(t.attr.rectX+t.left)*r+o/2,c=(t.attr.rectY+t.top)*r+s/2,l=o/1.5,d=s/2;i.beginPath(),i.moveTo(a,c-d),i.bezierCurveTo(a+l,c-d,a+l,c+d,a,c+d),i.bezierCurveTo(a-l,c+d,a-l,c-d,a,c-d),i.closePath(),t.attr.fill&&(i.fillStyle=t.attr.penColor,i.fill()),i.strokeStyle=t.attr.penColor,i.stroke();let u={left:0,top:0,right:0,bottom:0};const h=10;o>=0?(u.left=t.attr.rectX+t.left-h,u.right=t.attr.rectX+t.left+t.attr.rectWidth+h):(u.left=t.attr.rectX+t.left+t.attr.rectWidth-h,u.right=t.attr.rectX+t.left+h),s>=0?(u.top=t.attr.rectY+t.top-h,u.bottom=t.attr.rectY+t.top+t.attr.rectHeight+h):(u.top=t.attr.rectY+t.top+t.attr.rectHeight-h,u.bottom=t.attr.rectY+t.top+h),t.range=u,this._attr.showRange&&this._drawRange(e,t,r)}_calcByArrowLine(e,t,n){let i=.15*Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y));i>=15&&(i=15),i<5&&(i=5),n.attr.penWidth&&(i*=1+.5*n.attr.penWidth);let r,o,s,a,c,l,d,u,h=.45,f=[];r=e.x-t.x,o=e.y-t.y,0==r&&0==o&&(r=-1),s=r*Math.cos(h)-o*Math.sin(h),a=r*Math.sin(h)+o*Math.cos(h),c=r*Math.cos(h)+o*Math.sin(h),l=r*Math.sin(-.45)+o*Math.cos(h),d=Math.sqrt(s*s+a*a),u=Math.sqrt(c*c+l*l),s=s*i/d,c=c*i/u,a=a*i/d,l=l*i/u,s+=t.x,a+=t.y,c+=t.x,l+=t.y;let _=1*(c-s)/4+s,p=(_-s)*(l-a)/(c-s)+a,C=3*(c-s)/4+s,g=(C-s)*(l-a)/(c-s)+a;return f.push(e),f.push({x:C,y:g}),f.push({x:c,y:l}),f.push(t),f.push({x:s,y:a}),f.push({x:_,y:p}),f}_drawArrow(e,t,n){const i=n?e.drawCanvasCtx:e.shapeCanvasCtx,r=e.shapeCanvas.width/this._wbDesc.width;this._setLineStyle(e,t),t.attr.fill=null==t.attr.fill||t.attr.fill;const o={x:(t.left+t.attr.lineStartPosX)*r,y:(t.top+t.attr.lineStartPosY)*r},s={x:(t.left+t.attr.lineEndPosX)*r,y:(t.top+t.attr.lineEndPosY)*r};let a=this._calcByArrowLine(o,s,t);i.beginPath(),i.moveTo(a[0].x,a[0].y);for(let e=1;e<a.length;e++)i.lineTo(a[e].x,a[e].y);i.lineTo(a[0].x,a[0].y),t.attr.fill&&(i.fillStyle=t.attr.penColor,i.fill()),i.strokeStyle=t.attr.penColor,i.stroke();let c={left:0,top:0,right:0,bottom:0};const l=10;t.attr.lineStartPosX<=t.attr.lineEndPosX?(c.left=t.attr.lineStartPosX+t.left-l,c.right=t.attr.lineEndPosX+t.left+l):(c.left=t.attr.lineEndPosX+t.left-l,c.right=t.attr.lineStartPosX+t.left+l),t.attr.lineStartPosY<=t.attr.lineEndPosY?(c.top=t.attr.lineStartPosY+t.top-l,c.bottom=t.attr.lineEndPosY+t.top+l):(c.top=t.attr.lineEndPosY+t.top-l,c.bottom=t.attr.lineStartPosY+t.top+l),t.range=c,this._attr.showRange&&this._drawRange(e,t,r)}_drawText(e,t,n){const i=n?e.drawCanvasCtx:e.shapeCanvasCtx,r=e.shapeCanvas.width/this._wbDesc.width;t.attr.fontSize=null==t.attr.fontSize?20:t.attr.fontSize;const o=t.left*r,s=t.top*r,a=Math.round(t.attr.fontSize*r),c=t.attr.fontWeight||"normal",l=t.attr.fontItalic?"italic":"",d=t.attr.fontFamily||"sans-serif",u=t.attr.fontAlign||"left",h=t.attr.fontBaseLine||"middle",f=t.attr.txt||"";i.font=`${c} ${l} ${a}px ${d}`,i.textAlign=u,i.textBaseline=h;let _=[];_=f.split("\n");let p="";for(let e=0;e<_.length;e++)_[e].length>p.length&&(p=_[e]);let C=a;for(;C%10!=8;)C++;const g=a/10,m=(_?_.length:1)*(a+g)+2*g,I=i.measureText(p).width+2*g;i.fillStyle=t.attr.txtBkColor,i.fillRect(o,s,I,m),i.fillStyle=t.attr.penColor;for(let n=0;n<_.length;n++)i.fillText(_[n],o+g,s+(a+g)*(n+.5)+2*g),t.attr.fontUnderLine&&(this._setLineStyle(e,t),i.beginPath(),i.moveTo(o,s+m*(n+1)),i.lineTo(o+I,s+m*(n+1)),i.stroke());let R={left:0,top:0,right:0,bottom:0};R.left=t.left-10,R.right=t.left+I/r+10,R.top=t.top-10,R.bottom=t.top+m/r+10,t.range=R,this._attr.showRange&&this._drawRange(e,t,r)}_changeRedoUndoState(){this._revocableShapesArr.length>10&&this._revocableShapesArr.splice(0,1);const e=!!this._revocableShapesArr.length&&this._resumableShapesArr.length<10,t=!!this._resumableShapesArr.length;void 0!==e&&this._undo!==e&&(this._undo=e,this.notifyUndoEnableChanged.target(e)),void 0!==t&&this._redo!==t&&(this._redo=t,this.notifyRedoEnableChanged.target(t))}handler(){return this._handlerDiv}resize(e){if(!this._wbDesc||!document.querySelector(`#${this._id}`))return;let t=0,n=0,i=document.querySelector(`#${this._id}`).clientWidth,r=document.querySelector(`#${this._id}`).clientHeight,o=this._wbDesc.width,s=this._wbDesc.height,a=this._wbDesc.scale/100,c=o/s;a>1?(this._mainContainerDiv.style.overflowX="auto",this._mainContainerDiv.style.overflowY="auto"):1==a&&1==this._canvasList.length?(this._mainContainerDiv.style.overflowY="hidden",this._mainContainerDiv.style.overflowX="hidden"):(this._mainContainerDiv.style.overflowX="hidden",this._mainContainerDiv.style.overflowY="auto"),i/r>=o/s?(this._mainContainerDiv.style.height="100%",this._mainContainerDiv.style.width=this._mainContainerDiv.clientHeight*c+"px",n=this._mainContainerDiv.clientHeight*a,t=n*c,1==a&&(this._mainContainerDiv.style.width="auto")):(this._mainContainerDiv.style.width="100%",this._mainContainerDiv.style.height=this._mainContainerDiv.clientWidth/c+"px",t=this._mainContainerDiv.clientWidth*a,n=t/c,1==a&&1==this._canvasList.length&&(this._mainContainerDiv.style.height="auto"));let l=Math.ceil(this._attr.pageMargin*(n/s));this._canvasList.forEach(((e,i)=>{e.canvasContainer.style.width=`${t}px`,e.canvasContainer.style.height=`${n}px`,e.shapeCanvas.width=e.drawCanvas.width=t,e.shapeCanvas.height=e.drawCanvas.height=n,i<this._canvasList.length-1&&(e.canvasContainer.style.marginBottom=`${l}px`)})),this._canvasContainerHeight=n,this._pageMarginClientHeight=l,this._mainContainerDiv.scrollHeight>this._mainContainerDiv.offsetHeight?this._mainContainerDiv.style.justifyContent="flex-start":this._mainContainerDiv.style.justifyContent="center",this._mainContainerDiv.scrollWidth>this._mainContainerDiv.offsetWidth?this._mainContainerDiv.style.alignItems="flex-start":this._mainContainerDiv.style.alignItems="center",this._drawAllShapes({},"resize"),this._refreshPos(),"notifySetScale"!=e&&this._uploadCurPosition()}setCursor(e){console.crlog(`[BoardView] ${this._id} setCursor: ${e}`),this._canvasList.forEach((t=>{t.drawCanvas.style.cursor=e}))}setBoardID(e,t){this._boardID=e;for(let e in t)this._attr[e]=t[e];this._bindingBoardInfo(),setTimeout((()=>{this.resize("setBoardID")}),100)}getAttr(){return JSON.parse(JSON.stringify(this._attr))}setAttr(e){console.crlog(`[BoardView] ${this._id} setAttr: ${JSON.stringify(e)}`);for(let t in e)this._attr[t]=e[t]}setCurPage(e){console.crlog(`[BoardView] ${this._id} setCurPage: ${e}`),this._mainContainerDiv.scrollTop=e*(this._canvasContainerHeight+this._pageMarginClientHeight)}getCurPage(){return this._curPageID}setToolType(e){console.crlog(`[BoardView] ${this._id} setToolType: ${JSON.stringify(e)}`),this._shapeType=e}getToolType(){return this._shapeType}setToolAttr(e){console.crlog(`[BoardView] ${this._id} setToolAttr: ${JSON.stringify(e)}`);for(let t in e)this._toolAttr[t]=e[t]}getToolAttr(){return JSON.parse(JSON.stringify(this._toolAttr))}clearCurPage(){if(!this._wbDesc.shapeList||this._attr.readOnly)return;const e=[];this._wbDesc.shapeList.forEach((t=>{t.pageId==this._curPageID&&t.shapes.forEach((t=>{e.push(t.sId)}))})),this._revocableShapesArr=[],this._resumableShapesArr=[],this._changeRedoUndoState(),Z.delShape(this._boardID,this._curPageID,e)}clearAllPage(){if(!this._wbDesc.shapeList||this._attr.readOnly)return;const e=[];this._wbDesc.shapeList.forEach((t=>{t.shapes.forEach((t=>{e.push(t.sId)})),Z.delShape(this._boardID,t.pageId,e)})),this._revocableShapesArr=[],this._resumableShapesArr=[],this._changeRedoUndoState()}getUndoEnableState(){return this._undo}getRedoEnableState(){return this._redo}undo(){if(this._attr.readOnly)return;console.crlog(`[BoardView] ${this._id}, undo()`);const e=this._canvasList.find((e=>e.pageID==this._curPageID)),t=this._revocableShapesArr.pop();t&&(this._resumableShapesArr.push(t),"add"==t.action?Z.delShape(t.shape.boardID,t.shape.pageID,[t.shape.shape.sId]):"move"==t.action?z.moveShape(t.shape.boardID,t.shape.pageID,[{sId:t.shape.sPosOld.sId,left:Math.round(t.shape.sPosOld.left),top:Math.round(t.shape.sPosOld.top)}]):"del"==t.action&&(Z.addShape(t.shape.boardID,t.shape.pageID,t.shape.shape),this._drawShape(e,t.shape.shape),this._addShapeToShapeList(t.shape.shape,t.shape.pageID))),this._changeRedoUndoState()}redo(){if(this._attr.readOnly)return;console.crlog(`[BoardView] ${this._id}, redo()`);const e=this._canvasList.find((e=>e.pageID==this._curPageID)),t=this._resumableShapesArr.pop();t&&(this._revocableShapesArr.push(t),"add"==t.action?(this._drawShape(e,t.shape.shape),this._addShapeToShapeList(t.shape.shape,t.shape.pageID),Z.addShape(t.shape.boardID,t.shape.pageID,t.shape.shape)):"move"==t.action?z.moveShape(t.shape.boardID,t.shape.pageID,[{sId:t.shape.sPosNew.sId,left:Math.round(t.shape.sPosNew.left),top:Math.round(t.shape.sPosNew.top)}]):"del"==t.action&&Z.delShape(t.shape.boardID,t.shape.pageID,[t.shape.shape.sId])),this._changeRedoUndoState()}setScale(e){return new Promise(((t,n)=>{if(console.crlog(`[BoardView] ${this._id} setScale: ${e}`),!this._boardID||e<20||e>500)return n({errCode:1,errDesc:"白板缩放超出限制"});this._wbDesc.scale=e,this.resize("setScale"),this.notifyScaleChanged.target(this._wbDesc.wId,+e,ae.userInfo.userId),this._attr.asyncScale&&z.setScale(this._boardID,e).then((e=>t())).catch((e=>n({errCode:1,errDesc:e.toString()})))}))}getScale(){return this._wbDesc?this._wbDesc.scale:100}setCanvasStyle(e){console.crlog(`[BoardView] ${this._id} setCanvasStyle: ${JSON.stringify(e)}`);for(let t in e)this._canvasList.forEach((n=>{n.shapeCanvas.style[t]=e[t]}));this._canvasStyle=e}setContainerStyle(e){console.crlog(`[BoardView] ${this._id} setContainerStyle: ${JSON.stringify(e)}`);for(let t in e)this._mainContainerDiv.style[t]=e[t];this._mainContainerDivStyle=e}};window.boardv2=Z,window.CRBoard_BoardView=Se,window.CRBoard_CreateWhiteBoard=Z.createWhiteBoard,window.CRBoard_CloseBoard=Z.closeWhiteBoard,window.CRBoard_GetBoardInfo=Z.getBoardInfo,window.CRBoard_GetAllBoard=Z.getAllBoard,window.CRBoard_UpdateBoardExInfo=Z.updateBoardExInfo,window.CRBoard_GetCurrentBoard=Z.getCurrentBoard,window.CRBoard_SetCurrentBoard=Z.setCurrentBoard,window.CRBoard_NotifyInitBoardList=Z.notifyInitBoardListCallback,window.CRBoard_NotifyCreateBoard=Z.notifyCreateBoardCallback,window.CRBoard_NotifyCloseBoard=Z.notifyCloseBoardCallback,window.CRBoard_NotifyBoardExinfoUpdated=Z.notifyBoardExinfoUpdatedCallback,window.CRBoard_NotifyCurrentBoard=Z.notifyCurrentBoardCallback,window.CRBoard_NotifyBoardScale=Z.notifyBoardScaleCallback;Z.createWhiteBoard,Z.closeWhiteBoard,Z.getAllBoard,Z.updateBoardExInfo,Z.getBoardInfo,Z.getCurrentBoard,Z.setCurrentBoard,Z.notifyInitBoardListCallback,Z.notifyCreateBoardCallback,Z.notifyCloseBoardCallback,Z.notifyBoardExinfoUpdatedCallback,Z.notifyCurrentBoardCallback,Z.notifyBoardScaleCallback;const ve={Init:window.CRVideo_Init,LoginSuccess:window.CRVideo_LoginSuccess};console.crlog(`[SDK] SDKKey: ${ve.SDKKey}`),window.__CRName=atob("Y2xvdWRyb29t"),window.__CRNamC=atob("Q2xvdWRyb29t"),window.__CRNameUP=atob("Q0xPVURST09N")})()})();
//# sourceMappingURL=RTCSDKV2.min.js.map?v=2c95